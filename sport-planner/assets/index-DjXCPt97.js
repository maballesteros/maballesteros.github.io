function UE(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Ro(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function WE(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var Pf={exports:{}},_a={},Af={exports:{}},ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iv;function HE(){if(iv)return ct;iv=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function v(F){return F===null||typeof F!="object"?null:(F=p&&F[p]||F["@@iterator"],typeof F=="function"?F:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,k={};function E(F,G,P){this.props=F,this.context=G,this.refs=k,this.updater=P||y}E.prototype.isReactComponent={},E.prototype.setState=function(F,G){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,G,"setState")},E.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function C(){}C.prototype=E.prototype;function _(F,G,P){this.props=F,this.context=G,this.refs=k,this.updater=P||y}var j=_.prototype=new C;j.constructor=_,b(j,E.prototype),j.isPureReactComponent=!0;var I=Array.isArray,O=Object.prototype.hasOwnProperty,A={current:null},$={key:!0,ref:!0,__self:!0,__source:!0};function ie(F,G,P){var be,ge={},me=null,ye=null;if(G!=null)for(be in G.ref!==void 0&&(ye=G.ref),G.key!==void 0&&(me=""+G.key),G)O.call(G,be)&&!$.hasOwnProperty(be)&&(ge[be]=G[be]);var Ce=arguments.length-2;if(Ce===1)ge.children=P;else if(1<Ce){for(var Re=Array(Ce),Pe=0;Pe<Ce;Pe++)Re[Pe]=arguments[Pe+2];ge.children=Re}if(F&&F.defaultProps)for(be in Ce=F.defaultProps,Ce)ge[be]===void 0&&(ge[be]=Ce[be]);return{$$typeof:e,type:F,key:me,ref:ye,props:ge,_owner:A.current}}function U(F,G){return{$$typeof:e,type:F.type,key:G,ref:F.ref,props:F.props,_owner:F._owner}}function R(F){return typeof F=="object"&&F!==null&&F.$$typeof===e}function D(F){var G={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(P){return G[P]})}var Z=/\/+/g;function H(F,G){return typeof F=="object"&&F!==null&&F.key!=null?D(""+F.key):G.toString(36)}function K(F,G,P,be,ge){var me=typeof F;(me==="undefined"||me==="boolean")&&(F=null);var ye=!1;if(F===null)ye=!0;else switch(me){case"string":case"number":ye=!0;break;case"object":switch(F.$$typeof){case e:case t:ye=!0}}if(ye)return ye=F,ge=ge(ye),F=be===""?"."+H(ye,0):be,I(ge)?(P="",F!=null&&(P=F.replace(Z,"$&/")+"/"),K(ge,G,P,"",function(Pe){return Pe})):ge!=null&&(R(ge)&&(ge=U(ge,P+(!ge.key||ye&&ye.key===ge.key?"":(""+ge.key).replace(Z,"$&/")+"/")+F)),G.push(ge)),1;if(ye=0,be=be===""?".":be+":",I(F))for(var Ce=0;Ce<F.length;Ce++){me=F[Ce];var Re=be+H(me,Ce);ye+=K(me,G,P,Re,ge)}else if(Re=v(F),typeof Re=="function")for(F=Re.call(F),Ce=0;!(me=F.next()).done;)me=me.value,Re=be+H(me,Ce++),ye+=K(me,G,P,Re,ge);else if(me==="object")throw G=String(F),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return ye}function V(F,G,P){if(F==null)return F;var be=[],ge=0;return K(F,be,"","",function(me){return G.call(P,me,ge++)}),be}function X(F){if(F._status===-1){var G=F._result;G=G(),G.then(function(P){(F._status===0||F._status===-1)&&(F._status=1,F._result=P)},function(P){(F._status===0||F._status===-1)&&(F._status=2,F._result=P)}),F._status===-1&&(F._status=0,F._result=G)}if(F._status===1)return F._result.default;throw F._result}var W={current:null},M={transition:null},ee={ReactCurrentDispatcher:W,ReactCurrentBatchConfig:M,ReactCurrentOwner:A};function T(){throw Error("act(...) is not supported in production builds of React.")}return ct.Children={map:V,forEach:function(F,G,P){V(F,function(){G.apply(this,arguments)},P)},count:function(F){var G=0;return V(F,function(){G++}),G},toArray:function(F){return V(F,function(G){return G})||[]},only:function(F){if(!R(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},ct.Component=E,ct.Fragment=n,ct.Profiler=i,ct.PureComponent=_,ct.StrictMode=r,ct.Suspense=c,ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ee,ct.act=T,ct.cloneElement=function(F,G,P){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var be=b({},F.props),ge=F.key,me=F.ref,ye=F._owner;if(G!=null){if(G.ref!==void 0&&(me=G.ref,ye=A.current),G.key!==void 0&&(ge=""+G.key),F.type&&F.type.defaultProps)var Ce=F.type.defaultProps;for(Re in G)O.call(G,Re)&&!$.hasOwnProperty(Re)&&(be[Re]=G[Re]===void 0&&Ce!==void 0?Ce[Re]:G[Re])}var Re=arguments.length-2;if(Re===1)be.children=P;else if(1<Re){Ce=Array(Re);for(var Pe=0;Pe<Re;Pe++)Ce[Pe]=arguments[Pe+2];be.children=Ce}return{$$typeof:e,type:F.type,key:ge,ref:me,props:be,_owner:ye}},ct.createContext=function(F){return F={$$typeof:l,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:o,_context:F},F.Consumer=F},ct.createElement=ie,ct.createFactory=function(F){var G=ie.bind(null,F);return G.type=F,G},ct.createRef=function(){return{current:null}},ct.forwardRef=function(F){return{$$typeof:u,render:F}},ct.isValidElement=R,ct.lazy=function(F){return{$$typeof:h,_payload:{_status:-1,_result:F},_init:X}},ct.memo=function(F,G){return{$$typeof:f,type:F,compare:G===void 0?null:G}},ct.startTransition=function(F){var G=M.transition;M.transition={};try{F()}finally{M.transition=G}},ct.unstable_act=T,ct.useCallback=function(F,G){return W.current.useCallback(F,G)},ct.useContext=function(F){return W.current.useContext(F)},ct.useDebugValue=function(){},ct.useDeferredValue=function(F){return W.current.useDeferredValue(F)},ct.useEffect=function(F,G){return W.current.useEffect(F,G)},ct.useId=function(){return W.current.useId()},ct.useImperativeHandle=function(F,G,P){return W.current.useImperativeHandle(F,G,P)},ct.useInsertionEffect=function(F,G){return W.current.useInsertionEffect(F,G)},ct.useLayoutEffect=function(F,G){return W.current.useLayoutEffect(F,G)},ct.useMemo=function(F,G){return W.current.useMemo(F,G)},ct.useReducer=function(F,G,P){return W.current.useReducer(F,G,P)},ct.useRef=function(F){return W.current.useRef(F)},ct.useState=function(F){return W.current.useState(F)},ct.useSyncExternalStore=function(F,G,P){return W.current.useSyncExternalStore(F,G,P)},ct.useTransition=function(){return W.current.useTransition()},ct.version="18.3.1",ct}var sv;function bc(){return sv||(sv=1,Af.exports=HE()),Af.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ov;function VE(){if(ov)return _a;ov=1;var e=bc(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,c,f){var h,p={},v=null,y=null;f!==void 0&&(v=""+f),c.key!==void 0&&(v=""+c.key),c.ref!==void 0&&(y=c.ref);for(h in c)r.call(c,h)&&!o.hasOwnProperty(h)&&(p[h]=c[h]);if(u&&u.defaultProps)for(h in c=u.defaultProps,c)p[h]===void 0&&(p[h]=c[h]);return{$$typeof:t,type:u,key:v,ref:y,props:p,_owner:i.current}}return _a.Fragment=n,_a.jsx=l,_a.jsxs=l,_a}var av;function qE(){return av||(av=1,Pf.exports=VE()),Pf.exports}var m=qE(),w=bc();const Oe=Ro(w),Qu=UE({__proto__:null,default:Oe},[w]);var _u={},Rf={exports:{}},Pn={},Of={exports:{}},Mf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lv;function KE(){return lv||(lv=1,(function(e){function t(M,ee){var T=M.length;M.push(ee);e:for(;0<T;){var F=T-1>>>1,G=M[F];if(0<i(G,ee))M[F]=ee,M[T]=G,T=F;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var ee=M[0],T=M.pop();if(T!==ee){M[0]=T;e:for(var F=0,G=M.length,P=G>>>1;F<P;){var be=2*(F+1)-1,ge=M[be],me=be+1,ye=M[me];if(0>i(ge,T))me<G&&0>i(ye,ge)?(M[F]=ye,M[me]=T,F=me):(M[F]=ge,M[be]=T,F=be);else if(me<G&&0>i(ye,T))M[F]=ye,M[me]=T,F=me;else break e}}return ee}function i(M,ee){var T=M.sortIndex-ee.sortIndex;return T!==0?T:M.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var c=[],f=[],h=1,p=null,v=3,y=!1,b=!1,k=!1,E=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(M){for(var ee=n(f);ee!==null;){if(ee.callback===null)r(f);else if(ee.startTime<=M)r(f),ee.sortIndex=ee.expirationTime,t(c,ee);else break;ee=n(f)}}function I(M){if(k=!1,j(M),!b)if(n(c)!==null)b=!0,X(O);else{var ee=n(f);ee!==null&&W(I,ee.startTime-M)}}function O(M,ee){b=!1,k&&(k=!1,C(ie),ie=-1),y=!0;var T=v;try{for(j(ee),p=n(c);p!==null&&(!(p.expirationTime>ee)||M&&!D());){var F=p.callback;if(typeof F=="function"){p.callback=null,v=p.priorityLevel;var G=F(p.expirationTime<=ee);ee=e.unstable_now(),typeof G=="function"?p.callback=G:p===n(c)&&r(c),j(ee)}else r(c);p=n(c)}if(p!==null)var P=!0;else{var be=n(f);be!==null&&W(I,be.startTime-ee),P=!1}return P}finally{p=null,v=T,y=!1}}var A=!1,$=null,ie=-1,U=5,R=-1;function D(){return!(e.unstable_now()-R<U)}function Z(){if($!==null){var M=e.unstable_now();R=M;var ee=!0;try{ee=$(!0,M)}finally{ee?H():(A=!1,$=null)}}else A=!1}var H;if(typeof _=="function")H=function(){_(Z)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,V=K.port2;K.port1.onmessage=Z,H=function(){V.postMessage(null)}}else H=function(){E(Z,0)};function X(M){$=M,A||(A=!0,H())}function W(M,ee){ie=E(function(){M(e.unstable_now())},ee)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){b||y||(b=!0,X(O))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(M){switch(v){case 1:case 2:case 3:var ee=3;break;default:ee=v}var T=v;v=ee;try{return M()}finally{v=T}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,ee){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var T=v;v=M;try{return ee()}finally{v=T}},e.unstable_scheduleCallback=function(M,ee,T){var F=e.unstable_now();switch(typeof T=="object"&&T!==null?(T=T.delay,T=typeof T=="number"&&0<T?F+T:F):T=F,M){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=T+G,M={id:h++,callback:ee,priorityLevel:M,startTime:T,expirationTime:G,sortIndex:-1},T>F?(M.sortIndex=T,t(f,M),n(c)===null&&M===n(f)&&(k?(C(ie),ie=-1):k=!0,W(I,T-F))):(M.sortIndex=G,t(c,M),b||y||(b=!0,X(O))),M},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(M){var ee=v;return function(){var T=v;v=ee;try{return M.apply(this,arguments)}finally{v=T}}}})(Mf)),Mf}var uv;function YE(){return uv||(uv=1,Of.exports=KE()),Of.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cv;function GE(){if(cv)return Pn;cv=1;var e=bc(),t=YE();function n(s){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+s,d=1;d<arguments.length;d++)a+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(s,a){l(s,a),l(s+"Capture",a)}function l(s,a){for(i[s]=a,s=0;s<a.length;s++)r.add(a[s])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function v(s){return c.call(p,s)?!0:c.call(h,s)?!1:f.test(s)?p[s]=!0:(h[s]=!0,!1)}function y(s,a,d,g){if(d!==null&&d.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return g?!1:d!==null?!d.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function b(s,a,d,g){if(a===null||typeof a>"u"||y(s,a,d,g))return!0;if(g)return!1;if(d!==null)switch(d.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function k(s,a,d,g,x,S,N){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=g,this.attributeNamespace=x,this.mustUseProperty=d,this.propertyName=s,this.type=a,this.sanitizeURL=S,this.removeEmptyString=N}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){E[s]=new k(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var a=s[0];E[a]=new k(a,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){E[s]=new k(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){E[s]=new k(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){E[s]=new k(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){E[s]=new k(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){E[s]=new k(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){E[s]=new k(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){E[s]=new k(s,5,!1,s.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function _(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var a=s.replace(C,_);E[a]=new k(a,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var a=s.replace(C,_);E[a]=new k(a,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var a=s.replace(C,_);E[a]=new k(a,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){E[s]=new k(s,1,!1,s.toLowerCase(),null,!1,!1)}),E.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){E[s]=new k(s,1,!1,s.toLowerCase(),null,!0,!0)});function j(s,a,d,g){var x=E.hasOwnProperty(a)?E[a]:null;(x!==null?x.type!==0:g||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(b(a,d,x,g)&&(d=null),g||x===null?v(a)&&(d===null?s.removeAttribute(a):s.setAttribute(a,""+d)):x.mustUseProperty?s[x.propertyName]=d===null?x.type===3?!1:"":d:(a=x.attributeName,g=x.attributeNamespace,d===null?s.removeAttribute(a):(x=x.type,d=x===3||x===4&&d===!0?"":""+d,g?s.setAttributeNS(g,a,d):s.setAttribute(a,d))))}var I=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,O=Symbol.for("react.element"),A=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),ie=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),D=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),K=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),W=Symbol.for("react.offscreen"),M=Symbol.iterator;function ee(s){return s===null||typeof s!="object"?null:(s=M&&s[M]||s["@@iterator"],typeof s=="function"?s:null)}var T=Object.assign,F;function G(s){if(F===void 0)try{throw Error()}catch(d){var a=d.stack.trim().match(/\n( *(at )?)/);F=a&&a[1]||""}return`
`+F+s}var P=!1;function be(s,a){if(!s||P)return"";P=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(ae){var g=ae}Reflect.construct(s,[],a)}else{try{a.call()}catch(ae){g=ae}s.call(a.prototype)}else{try{throw Error()}catch(ae){g=ae}s()}}catch(ae){if(ae&&g&&typeof ae.stack=="string"){for(var x=ae.stack.split(`
`),S=g.stack.split(`
`),N=x.length-1,B=S.length-1;1<=N&&0<=B&&x[N]!==S[B];)B--;for(;1<=N&&0<=B;N--,B--)if(x[N]!==S[B]){if(N!==1||B!==1)do if(N--,B--,0>B||x[N]!==S[B]){var Y=`
`+x[N].replace(" at new "," at ");return s.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",s.displayName)),Y}while(1<=N&&0<=B);break}}}finally{P=!1,Error.prepareStackTrace=d}return(s=s?s.displayName||s.name:"")?G(s):""}function ge(s){switch(s.tag){case 5:return G(s.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return s=be(s.type,!1),s;case 11:return s=be(s.type.render,!1),s;case 1:return s=be(s.type,!0),s;default:return""}}function me(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case $:return"Fragment";case A:return"Portal";case U:return"Profiler";case ie:return"StrictMode";case H:return"Suspense";case K:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case D:return(s.displayName||"Context")+".Consumer";case R:return(s._context.displayName||"Context")+".Provider";case Z:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case V:return a=s.displayName||null,a!==null?a:me(s.type)||"Memo";case X:a=s._payload,s=s._init;try{return me(s(a))}catch{}}return null}function ye(s){var a=s.type;switch(s.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=a.render,s=s.displayName||s.name||"",a.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return me(a);case 8:return a===ie?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Ce(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Re(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Pe(s){var a=Re(s)?"checked":"value",d=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),g=""+s[a];if(!s.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var x=d.get,S=d.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return x.call(this)},set:function(N){g=""+N,S.call(this,N)}}),Object.defineProperty(s,a,{enumerable:d.enumerable}),{getValue:function(){return g},setValue:function(N){g=""+N},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function te(s){s._valueTracker||(s._valueTracker=Pe(s))}function Ne(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var d=a.getValue(),g="";return s&&(g=Re(s)?s.checked?"true":"false":s.value),s=g,s!==d?(a.setValue(s),!0):!1}function Be(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function We(s,a){var d=a.checked;return T({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??s._wrapperState.initialChecked})}function rt(s,a){var d=a.defaultValue==null?"":a.defaultValue,g=a.checked!=null?a.checked:a.defaultChecked;d=Ce(a.value!=null?a.value:d),s._wrapperState={initialChecked:g,initialValue:d,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function at(s,a){a=a.checked,a!=null&&j(s,"checked",a,!1)}function Nt(s,a){at(s,a);var d=Ce(a.value),g=a.type;if(d!=null)g==="number"?(d===0&&s.value===""||s.value!=d)&&(s.value=""+d):s.value!==""+d&&(s.value=""+d);else if(g==="submit"||g==="reset"){s.removeAttribute("value");return}a.hasOwnProperty("value")?J(s,a.type,d):a.hasOwnProperty("defaultValue")&&J(s,a.type,Ce(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(s.defaultChecked=!!a.defaultChecked)}function qt(s,a,d){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var g=a.type;if(!(g!=="submit"&&g!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+s._wrapperState.initialValue,d||a===s.value||(s.value=a),s.defaultValue=a}d=s.name,d!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,d!==""&&(s.name=d)}function J(s,a,d){(a!=="number"||Be(s.ownerDocument)!==s)&&(d==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+d&&(s.defaultValue=""+d))}var de=Array.isArray;function pe(s,a,d,g){if(s=s.options,a){a={};for(var x=0;x<d.length;x++)a["$"+d[x]]=!0;for(d=0;d<s.length;d++)x=a.hasOwnProperty("$"+s[d].value),s[d].selected!==x&&(s[d].selected=x),x&&g&&(s[d].defaultSelected=!0)}else{for(d=""+Ce(d),a=null,x=0;x<s.length;x++){if(s[x].value===d){s[x].selected=!0,g&&(s[x].defaultSelected=!0);return}a!==null||s[x].disabled||(a=s[x])}a!==null&&(a.selected=!0)}}function Ae(s,a){if(a.dangerouslySetInnerHTML!=null)throw Error(n(91));return T({},a,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function Se(s,a){var d=a.value;if(d==null){if(d=a.children,a=a.defaultValue,d!=null){if(a!=null)throw Error(n(92));if(de(d)){if(1<d.length)throw Error(n(93));d=d[0]}a=d}a==null&&(a=""),d=a}s._wrapperState={initialValue:Ce(d)}}function ue(s,a){var d=Ce(a.value),g=Ce(a.defaultValue);d!=null&&(d=""+d,d!==s.value&&(s.value=d),a.defaultValue==null&&s.defaultValue!==d&&(s.defaultValue=d)),g!=null&&(s.defaultValue=""+g)}function Te(s){var a=s.textContent;a===s._wrapperState.initialValue&&a!==""&&a!==null&&(s.value=a)}function L(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function q(s,a){return s==null||s==="http://www.w3.org/1999/xhtml"?L(a):s==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var ce,le=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,d,g,x){MSApp.execUnsafeLocalFunction(function(){return s(a,d,g,x)})}:s})(function(s,a){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=a;else{for(ce=ce||document.createElement("div"),ce.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=ce.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;a.firstChild;)s.appendChild(a.firstChild)}});function re(s,a){if(a){var d=s.firstChild;if(d&&d===s.lastChild&&d.nodeType===3){d.nodeValue=a;return}}s.textContent=a}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},z=["Webkit","ms","Moz","O"];Object.keys(fe).forEach(function(s){z.forEach(function(a){a=a+s.charAt(0).toUpperCase()+s.substring(1),fe[a]=fe[s]})});function ne(s,a,d){return a==null||typeof a=="boolean"||a===""?"":d||typeof a!="number"||a===0||fe.hasOwnProperty(s)&&fe[s]?(""+a).trim():a+"px"}function he(s,a){s=s.style;for(var d in a)if(a.hasOwnProperty(d)){var g=d.indexOf("--")===0,x=ne(d,a[d],g);d==="float"&&(d="cssFloat"),g?s.setProperty(d,x):s[d]=x}}var we=T({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Me(s,a){if(a){if(we[s]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(n(137,s));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(n(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(n(61))}if(a.style!=null&&typeof a.style!="object")throw Error(n(62))}}function et(s,a){if(s.indexOf("-")===-1)return typeof a.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ve=null;function tt(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ve=null,Qe=null,qe=null;function $e(s){if(s=ca(s)){if(typeof Ve!="function")throw Error(n(280));var a=s.stateNode;a&&(a=zl(a),Ve(s.stateNode,s.type,a))}}function st(s){Qe?qe?qe.push(s):qe=[s]:Qe=s}function ut(){if(Qe){var s=Qe,a=qe;if(qe=Qe=null,$e(s),a)for(s=0;s<a.length;s++)$e(a[s])}}function vt(s,a){return s(a)}function sn(){}var xn=!1;function $n(s,a,d){if(xn)return s(a,d);xn=!0;try{return vt(s,a,d)}finally{xn=!1,(Qe!==null||qe!==null)&&(sn(),ut())}}function It(s,a){var d=s.stateNode;if(d===null)return null;var g=zl(d);if(g===null)return null;d=g[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(s=s.type,g=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!g;break e;default:s=!1}if(s)return null;if(d&&typeof d!="function")throw Error(n(231,a,typeof d));return d}var Qn=!1;if(u)try{var un={};Object.defineProperty(un,"passive",{get:function(){Qn=!0}}),window.addEventListener("test",un,un),window.removeEventListener("test",un,un)}catch{Qn=!1}function ur(s,a,d,g,x,S,N,B,Y){var ae=Array.prototype.slice.call(arguments,3);try{a.apply(d,ae)}catch(ke){this.onError(ke)}}var cr=!1,Cr=null,Fn=!1,Hr=null,Vo={onError:function(s){cr=!0,Cr=s}};function J1(s,a,d,g,x,S,N,B,Y){cr=!1,Cr=null,ur.apply(Vo,arguments)}function Q1(s,a,d,g,x,S,N,B,Y){if(J1.apply(this,arguments),cr){if(cr){var ae=Cr;cr=!1,Cr=null}else throw Error(n(198));Fn||(Fn=!0,Hr=ae)}}function Vi(s){var a=s,d=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(d=a.return),s=a.return;while(s)}return a.tag===3?d:null}function jm(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function Nm(s){if(Vi(s)!==s)throw Error(n(188))}function X1(s){var a=s.alternate;if(!a){if(a=Vi(s),a===null)throw Error(n(188));return a!==s?null:s}for(var d=s,g=a;;){var x=d.return;if(x===null)break;var S=x.alternate;if(S===null){if(g=x.return,g!==null){d=g;continue}break}if(x.child===S.child){for(S=x.child;S;){if(S===d)return Nm(x),s;if(S===g)return Nm(x),a;S=S.sibling}throw Error(n(188))}if(d.return!==g.return)d=x,g=S;else{for(var N=!1,B=x.child;B;){if(B===d){N=!0,d=x,g=S;break}if(B===g){N=!0,g=x,d=S;break}B=B.sibling}if(!N){for(B=S.child;B;){if(B===d){N=!0,d=S,g=x;break}if(B===g){N=!0,g=S,d=x;break}B=B.sibling}if(!N)throw Error(n(189))}}if(d.alternate!==g)throw Error(n(190))}if(d.tag!==3)throw Error(n(188));return d.stateNode.current===d?s:a}function Tm(s){return s=X1(s),s!==null?Im(s):null}function Im(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var a=Im(s);if(a!==null)return a;s=s.sibling}return null}var Pm=t.unstable_scheduleCallback,Am=t.unstable_cancelCallback,Z1=t.unstable_shouldYield,eS=t.unstable_requestPaint,Dt=t.unstable_now,tS=t.unstable_getCurrentPriorityLevel,Jc=t.unstable_ImmediatePriority,Rm=t.unstable_UserBlockingPriority,wl=t.unstable_NormalPriority,nS=t.unstable_LowPriority,Om=t.unstable_IdlePriority,bl=null,jr=null;function rS(s){if(jr&&typeof jr.onCommitFiberRoot=="function")try{jr.onCommitFiberRoot(bl,s,void 0,(s.current.flags&128)===128)}catch{}}var dr=Math.clz32?Math.clz32:oS,iS=Math.log,sS=Math.LN2;function oS(s){return s>>>=0,s===0?32:31-(iS(s)/sS|0)|0}var kl=64,Sl=4194304;function qo(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function El(s,a){var d=s.pendingLanes;if(d===0)return 0;var g=0,x=s.suspendedLanes,S=s.pingedLanes,N=d&268435455;if(N!==0){var B=N&~x;B!==0?g=qo(B):(S&=N,S!==0&&(g=qo(S)))}else N=d&~x,N!==0?g=qo(N):S!==0&&(g=qo(S));if(g===0)return 0;if(a!==0&&a!==g&&(a&x)===0&&(x=g&-g,S=a&-a,x>=S||x===16&&(S&4194240)!==0))return a;if((g&4)!==0&&(g|=d&16),a=s.entangledLanes,a!==0)for(s=s.entanglements,a&=g;0<a;)d=31-dr(a),x=1<<d,g|=s[d],a&=~x;return g}function aS(s,a){switch(s){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lS(s,a){for(var d=s.suspendedLanes,g=s.pingedLanes,x=s.expirationTimes,S=s.pendingLanes;0<S;){var N=31-dr(S),B=1<<N,Y=x[N];Y===-1?((B&d)===0||(B&g)!==0)&&(x[N]=aS(B,a)):Y<=a&&(s.expiredLanes|=B),S&=~B}}function Qc(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Mm(){var s=kl;return kl<<=1,(kl&4194240)===0&&(kl=64),s}function Xc(s){for(var a=[],d=0;31>d;d++)a.push(s);return a}function Ko(s,a,d){s.pendingLanes|=a,a!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,a=31-dr(a),s[a]=d}function uS(s,a){var d=s.pendingLanes&~a;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=a,s.mutableReadLanes&=a,s.entangledLanes&=a,a=s.entanglements;var g=s.eventTimes;for(s=s.expirationTimes;0<d;){var x=31-dr(d),S=1<<x;a[x]=0,g[x]=-1,s[x]=-1,d&=~S}}function Zc(s,a){var d=s.entangledLanes|=a;for(s=s.entanglements;d;){var g=31-dr(d),x=1<<g;x&a|s[g]&a&&(s[g]|=a),d&=~x}}var gt=0;function Dm(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var Lm,ed,$m,Fm,zm,td=!1,_l=[],oi=null,ai=null,li=null,Yo=new Map,Go=new Map,ui=[],cS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bm(s,a){switch(s){case"focusin":case"focusout":oi=null;break;case"dragenter":case"dragleave":ai=null;break;case"mouseover":case"mouseout":li=null;break;case"pointerover":case"pointerout":Yo.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Go.delete(a.pointerId)}}function Jo(s,a,d,g,x,S){return s===null||s.nativeEvent!==S?(s={blockedOn:a,domEventName:d,eventSystemFlags:g,nativeEvent:S,targetContainers:[x]},a!==null&&(a=ca(a),a!==null&&ed(a)),s):(s.eventSystemFlags|=g,a=s.targetContainers,x!==null&&a.indexOf(x)===-1&&a.push(x),s)}function dS(s,a,d,g,x){switch(a){case"focusin":return oi=Jo(oi,s,a,d,g,x),!0;case"dragenter":return ai=Jo(ai,s,a,d,g,x),!0;case"mouseover":return li=Jo(li,s,a,d,g,x),!0;case"pointerover":var S=x.pointerId;return Yo.set(S,Jo(Yo.get(S)||null,s,a,d,g,x)),!0;case"gotpointercapture":return S=x.pointerId,Go.set(S,Jo(Go.get(S)||null,s,a,d,g,x)),!0}return!1}function Um(s){var a=qi(s.target);if(a!==null){var d=Vi(a);if(d!==null){if(a=d.tag,a===13){if(a=jm(d),a!==null){s.blockedOn=a,zm(s.priority,function(){$m(d)});return}}else if(a===3&&d.stateNode.current.memoizedState.isDehydrated){s.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Cl(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var d=rd(s.domEventName,s.eventSystemFlags,a[0],s.nativeEvent);if(d===null){d=s.nativeEvent;var g=new d.constructor(d.type,d);ve=g,d.target.dispatchEvent(g),ve=null}else return a=ca(d),a!==null&&ed(a),s.blockedOn=d,!1;a.shift()}return!0}function Wm(s,a,d){Cl(s)&&d.delete(a)}function fS(){td=!1,oi!==null&&Cl(oi)&&(oi=null),ai!==null&&Cl(ai)&&(ai=null),li!==null&&Cl(li)&&(li=null),Yo.forEach(Wm),Go.forEach(Wm)}function Qo(s,a){s.blockedOn===a&&(s.blockedOn=null,td||(td=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,fS)))}function Xo(s){function a(x){return Qo(x,s)}if(0<_l.length){Qo(_l[0],s);for(var d=1;d<_l.length;d++){var g=_l[d];g.blockedOn===s&&(g.blockedOn=null)}}for(oi!==null&&Qo(oi,s),ai!==null&&Qo(ai,s),li!==null&&Qo(li,s),Yo.forEach(a),Go.forEach(a),d=0;d<ui.length;d++)g=ui[d],g.blockedOn===s&&(g.blockedOn=null);for(;0<ui.length&&(d=ui[0],d.blockedOn===null);)Um(d),d.blockedOn===null&&ui.shift()}var Is=I.ReactCurrentBatchConfig,jl=!0;function hS(s,a,d,g){var x=gt,S=Is.transition;Is.transition=null;try{gt=1,nd(s,a,d,g)}finally{gt=x,Is.transition=S}}function pS(s,a,d,g){var x=gt,S=Is.transition;Is.transition=null;try{gt=4,nd(s,a,d,g)}finally{gt=x,Is.transition=S}}function nd(s,a,d,g){if(jl){var x=rd(s,a,d,g);if(x===null)wd(s,a,g,Nl,d),Bm(s,g);else if(dS(x,s,a,d,g))g.stopPropagation();else if(Bm(s,g),a&4&&-1<cS.indexOf(s)){for(;x!==null;){var S=ca(x);if(S!==null&&Lm(S),S=rd(s,a,d,g),S===null&&wd(s,a,g,Nl,d),S===x)break;x=S}x!==null&&g.stopPropagation()}else wd(s,a,g,null,d)}}var Nl=null;function rd(s,a,d,g){if(Nl=null,s=tt(g),s=qi(s),s!==null)if(a=Vi(s),a===null)s=null;else if(d=a.tag,d===13){if(s=jm(a),s!==null)return s;s=null}else if(d===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null);return Nl=s,null}function Hm(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tS()){case Jc:return 1;case Rm:return 4;case wl:case nS:return 16;case Om:return 536870912;default:return 16}default:return 16}}var ci=null,id=null,Tl=null;function Vm(){if(Tl)return Tl;var s,a=id,d=a.length,g,x="value"in ci?ci.value:ci.textContent,S=x.length;for(s=0;s<d&&a[s]===x[s];s++);var N=d-s;for(g=1;g<=N&&a[d-g]===x[S-g];g++);return Tl=x.slice(s,1<g?1-g:void 0)}function Il(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Pl(){return!0}function qm(){return!1}function zn(s){function a(d,g,x,S,N){this._reactName=d,this._targetInst=x,this.type=g,this.nativeEvent=S,this.target=N,this.currentTarget=null;for(var B in s)s.hasOwnProperty(B)&&(d=s[B],this[B]=d?d(S):S[B]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Pl:qm,this.isPropagationStopped=qm,this}return T(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Pl)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Pl)},persist:function(){},isPersistent:Pl}),a}var Ps={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sd=zn(Ps),Zo=T({},Ps,{view:0,detail:0}),mS=zn(Zo),od,ad,ea,Al=T({},Zo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ud,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ea&&(ea&&s.type==="mousemove"?(od=s.screenX-ea.screenX,ad=s.screenY-ea.screenY):ad=od=0,ea=s),od)},movementY:function(s){return"movementY"in s?s.movementY:ad}}),Km=zn(Al),gS=T({},Al,{dataTransfer:0}),yS=zn(gS),vS=T({},Zo,{relatedTarget:0}),ld=zn(vS),xS=T({},Ps,{animationName:0,elapsedTime:0,pseudoElement:0}),wS=zn(xS),bS=T({},Ps,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),kS=zn(bS),SS=T({},Ps,{data:0}),Ym=zn(SS),ES={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_S={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},CS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jS(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=CS[s])?!!a[s]:!1}function ud(){return jS}var NS=T({},Zo,{key:function(s){if(s.key){var a=ES[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=Il(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?_S[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ud,charCode:function(s){return s.type==="keypress"?Il(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Il(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),TS=zn(NS),IS=T({},Al,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gm=zn(IS),PS=T({},Zo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ud}),AS=zn(PS),RS=T({},Ps,{propertyName:0,elapsedTime:0,pseudoElement:0}),OS=zn(RS),MS=T({},Al,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),DS=zn(MS),LS=[9,13,27,32],cd=u&&"CompositionEvent"in window,ta=null;u&&"documentMode"in document&&(ta=document.documentMode);var $S=u&&"TextEvent"in window&&!ta,Jm=u&&(!cd||ta&&8<ta&&11>=ta),Qm=" ",Xm=!1;function Zm(s,a){switch(s){case"keyup":return LS.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eg(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var As=!1;function FS(s,a){switch(s){case"compositionend":return eg(a);case"keypress":return a.which!==32?null:(Xm=!0,Qm);case"textInput":return s=a.data,s===Qm&&Xm?null:s;default:return null}}function zS(s,a){if(As)return s==="compositionend"||!cd&&Zm(s,a)?(s=Vm(),Tl=id=ci=null,As=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Jm&&a.locale!=="ko"?null:a.data;default:return null}}var BS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tg(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!BS[s.type]:a==="textarea"}function ng(s,a,d,g){st(g),a=Ll(a,"onChange"),0<a.length&&(d=new sd("onChange","change",null,d,g),s.push({event:d,listeners:a}))}var na=null,ra=null;function US(s){wg(s,0)}function Rl(s){var a=Ls(s);if(Ne(a))return s}function WS(s,a){if(s==="change")return a}var rg=!1;if(u){var dd;if(u){var fd="oninput"in document;if(!fd){var ig=document.createElement("div");ig.setAttribute("oninput","return;"),fd=typeof ig.oninput=="function"}dd=fd}else dd=!1;rg=dd&&(!document.documentMode||9<document.documentMode)}function sg(){na&&(na.detachEvent("onpropertychange",og),ra=na=null)}function og(s){if(s.propertyName==="value"&&Rl(ra)){var a=[];ng(a,ra,s,tt(s)),$n(US,a)}}function HS(s,a,d){s==="focusin"?(sg(),na=a,ra=d,na.attachEvent("onpropertychange",og)):s==="focusout"&&sg()}function VS(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Rl(ra)}function qS(s,a){if(s==="click")return Rl(a)}function KS(s,a){if(s==="input"||s==="change")return Rl(a)}function YS(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var fr=typeof Object.is=="function"?Object.is:YS;function ia(s,a){if(fr(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var d=Object.keys(s),g=Object.keys(a);if(d.length!==g.length)return!1;for(g=0;g<d.length;g++){var x=d[g];if(!c.call(a,x)||!fr(s[x],a[x]))return!1}return!0}function ag(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function lg(s,a){var d=ag(s);s=0;for(var g;d;){if(d.nodeType===3){if(g=s+d.textContent.length,s<=a&&g>=a)return{node:d,offset:a-s};s=g}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=ag(d)}}function ug(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?ug(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function cg(){for(var s=window,a=Be();a instanceof s.HTMLIFrameElement;){try{var d=typeof a.contentWindow.location.href=="string"}catch{d=!1}if(d)s=a.contentWindow;else break;a=Be(s.document)}return a}function hd(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}function GS(s){var a=cg(),d=s.focusedElem,g=s.selectionRange;if(a!==d&&d&&d.ownerDocument&&ug(d.ownerDocument.documentElement,d)){if(g!==null&&hd(d)){if(a=g.start,s=g.end,s===void 0&&(s=a),"selectionStart"in d)d.selectionStart=a,d.selectionEnd=Math.min(s,d.value.length);else if(s=(a=d.ownerDocument||document)&&a.defaultView||window,s.getSelection){s=s.getSelection();var x=d.textContent.length,S=Math.min(g.start,x);g=g.end===void 0?S:Math.min(g.end,x),!s.extend&&S>g&&(x=g,g=S,S=x),x=lg(d,S);var N=lg(d,g);x&&N&&(s.rangeCount!==1||s.anchorNode!==x.node||s.anchorOffset!==x.offset||s.focusNode!==N.node||s.focusOffset!==N.offset)&&(a=a.createRange(),a.setStart(x.node,x.offset),s.removeAllRanges(),S>g?(s.addRange(a),s.extend(N.node,N.offset)):(a.setEnd(N.node,N.offset),s.addRange(a)))}}for(a=[],s=d;s=s.parentNode;)s.nodeType===1&&a.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<a.length;d++)s=a[d],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var JS=u&&"documentMode"in document&&11>=document.documentMode,Rs=null,pd=null,sa=null,md=!1;function dg(s,a,d){var g=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;md||Rs==null||Rs!==Be(g)||(g=Rs,"selectionStart"in g&&hd(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),sa&&ia(sa,g)||(sa=g,g=Ll(pd,"onSelect"),0<g.length&&(a=new sd("onSelect","select",null,a,d),s.push({event:a,listeners:g}),a.target=Rs)))}function Ol(s,a){var d={};return d[s.toLowerCase()]=a.toLowerCase(),d["Webkit"+s]="webkit"+a,d["Moz"+s]="moz"+a,d}var Os={animationend:Ol("Animation","AnimationEnd"),animationiteration:Ol("Animation","AnimationIteration"),animationstart:Ol("Animation","AnimationStart"),transitionend:Ol("Transition","TransitionEnd")},gd={},fg={};u&&(fg=document.createElement("div").style,"AnimationEvent"in window||(delete Os.animationend.animation,delete Os.animationiteration.animation,delete Os.animationstart.animation),"TransitionEvent"in window||delete Os.transitionend.transition);function Ml(s){if(gd[s])return gd[s];if(!Os[s])return s;var a=Os[s],d;for(d in a)if(a.hasOwnProperty(d)&&d in fg)return gd[s]=a[d];return s}var hg=Ml("animationend"),pg=Ml("animationiteration"),mg=Ml("animationstart"),gg=Ml("transitionend"),yg=new Map,vg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function di(s,a){yg.set(s,a),o(a,[s])}for(var yd=0;yd<vg.length;yd++){var vd=vg[yd],QS=vd.toLowerCase(),XS=vd[0].toUpperCase()+vd.slice(1);di(QS,"on"+XS)}di(hg,"onAnimationEnd"),di(pg,"onAnimationIteration"),di(mg,"onAnimationStart"),di("dblclick","onDoubleClick"),di("focusin","onFocus"),di("focusout","onBlur"),di(gg,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ZS=new Set("cancel close invalid load scroll toggle".split(" ").concat(oa));function xg(s,a,d){var g=s.type||"unknown-event";s.currentTarget=d,Q1(g,a,void 0,s),s.currentTarget=null}function wg(s,a){a=(a&4)!==0;for(var d=0;d<s.length;d++){var g=s[d],x=g.event;g=g.listeners;e:{var S=void 0;if(a)for(var N=g.length-1;0<=N;N--){var B=g[N],Y=B.instance,ae=B.currentTarget;if(B=B.listener,Y!==S&&x.isPropagationStopped())break e;xg(x,B,ae),S=Y}else for(N=0;N<g.length;N++){if(B=g[N],Y=B.instance,ae=B.currentTarget,B=B.listener,Y!==S&&x.isPropagationStopped())break e;xg(x,B,ae),S=Y}}}if(Fn)throw s=Hr,Fn=!1,Hr=null,s}function _t(s,a){var d=a[Cd];d===void 0&&(d=a[Cd]=new Set);var g=s+"__bubble";d.has(g)||(bg(a,s,2,!1),d.add(g))}function xd(s,a,d){var g=0;a&&(g|=4),bg(d,s,g,a)}var Dl="_reactListening"+Math.random().toString(36).slice(2);function aa(s){if(!s[Dl]){s[Dl]=!0,r.forEach(function(d){d!=="selectionchange"&&(ZS.has(d)||xd(d,!1,s),xd(d,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Dl]||(a[Dl]=!0,xd("selectionchange",!1,a))}}function bg(s,a,d,g){switch(Hm(a)){case 1:var x=hS;break;case 4:x=pS;break;default:x=nd}d=x.bind(null,a,d,s),x=void 0,!Qn||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(x=!0),g?x!==void 0?s.addEventListener(a,d,{capture:!0,passive:x}):s.addEventListener(a,d,!0):x!==void 0?s.addEventListener(a,d,{passive:x}):s.addEventListener(a,d,!1)}function wd(s,a,d,g,x){var S=g;if((a&1)===0&&(a&2)===0&&g!==null)e:for(;;){if(g===null)return;var N=g.tag;if(N===3||N===4){var B=g.stateNode.containerInfo;if(B===x||B.nodeType===8&&B.parentNode===x)break;if(N===4)for(N=g.return;N!==null;){var Y=N.tag;if((Y===3||Y===4)&&(Y=N.stateNode.containerInfo,Y===x||Y.nodeType===8&&Y.parentNode===x))return;N=N.return}for(;B!==null;){if(N=qi(B),N===null)return;if(Y=N.tag,Y===5||Y===6){g=S=N;continue e}B=B.parentNode}}g=g.return}$n(function(){var ae=S,ke=tt(d),Ee=[];e:{var xe=yg.get(s);if(xe!==void 0){var De=sd,Fe=s;switch(s){case"keypress":if(Il(d)===0)break e;case"keydown":case"keyup":De=TS;break;case"focusin":Fe="focus",De=ld;break;case"focusout":Fe="blur",De=ld;break;case"beforeblur":case"afterblur":De=ld;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":De=Km;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":De=yS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":De=AS;break;case hg:case pg:case mg:De=wS;break;case gg:De=OS;break;case"scroll":De=mS;break;case"wheel":De=DS;break;case"copy":case"cut":case"paste":De=kS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":De=Gm}var Ue=(a&4)!==0,Lt=!Ue&&s==="scroll",se=Ue?xe!==null?xe+"Capture":null:xe;Ue=[];for(var Q=ae,oe;Q!==null;){oe=Q;var je=oe.stateNode;if(oe.tag===5&&je!==null&&(oe=je,se!==null&&(je=It(Q,se),je!=null&&Ue.push(la(Q,je,oe)))),Lt)break;Q=Q.return}0<Ue.length&&(xe=new De(xe,Fe,null,d,ke),Ee.push({event:xe,listeners:Ue}))}}if((a&7)===0){e:{if(xe=s==="mouseover"||s==="pointerover",De=s==="mouseout"||s==="pointerout",xe&&d!==ve&&(Fe=d.relatedTarget||d.fromElement)&&(qi(Fe)||Fe[Vr]))break e;if((De||xe)&&(xe=ke.window===ke?ke:(xe=ke.ownerDocument)?xe.defaultView||xe.parentWindow:window,De?(Fe=d.relatedTarget||d.toElement,De=ae,Fe=Fe?qi(Fe):null,Fe!==null&&(Lt=Vi(Fe),Fe!==Lt||Fe.tag!==5&&Fe.tag!==6)&&(Fe=null)):(De=null,Fe=ae),De!==Fe)){if(Ue=Km,je="onMouseLeave",se="onMouseEnter",Q="mouse",(s==="pointerout"||s==="pointerover")&&(Ue=Gm,je="onPointerLeave",se="onPointerEnter",Q="pointer"),Lt=De==null?xe:Ls(De),oe=Fe==null?xe:Ls(Fe),xe=new Ue(je,Q+"leave",De,d,ke),xe.target=Lt,xe.relatedTarget=oe,je=null,qi(ke)===ae&&(Ue=new Ue(se,Q+"enter",Fe,d,ke),Ue.target=oe,Ue.relatedTarget=Lt,je=Ue),Lt=je,De&&Fe)t:{for(Ue=De,se=Fe,Q=0,oe=Ue;oe;oe=Ms(oe))Q++;for(oe=0,je=se;je;je=Ms(je))oe++;for(;0<Q-oe;)Ue=Ms(Ue),Q--;for(;0<oe-Q;)se=Ms(se),oe--;for(;Q--;){if(Ue===se||se!==null&&Ue===se.alternate)break t;Ue=Ms(Ue),se=Ms(se)}Ue=null}else Ue=null;De!==null&&kg(Ee,xe,De,Ue,!1),Fe!==null&&Lt!==null&&kg(Ee,Lt,Fe,Ue,!0)}}e:{if(xe=ae?Ls(ae):window,De=xe.nodeName&&xe.nodeName.toLowerCase(),De==="select"||De==="input"&&xe.type==="file")var He=WS;else if(tg(xe))if(rg)He=KS;else{He=VS;var Ke=HS}else(De=xe.nodeName)&&De.toLowerCase()==="input"&&(xe.type==="checkbox"||xe.type==="radio")&&(He=qS);if(He&&(He=He(s,ae))){ng(Ee,He,d,ke);break e}Ke&&Ke(s,xe,ae),s==="focusout"&&(Ke=xe._wrapperState)&&Ke.controlled&&xe.type==="number"&&J(xe,"number",xe.value)}switch(Ke=ae?Ls(ae):window,s){case"focusin":(tg(Ke)||Ke.contentEditable==="true")&&(Rs=Ke,pd=ae,sa=null);break;case"focusout":sa=pd=Rs=null;break;case"mousedown":md=!0;break;case"contextmenu":case"mouseup":case"dragend":md=!1,dg(Ee,d,ke);break;case"selectionchange":if(JS)break;case"keydown":case"keyup":dg(Ee,d,ke)}var Ye;if(cd)e:{switch(s){case"compositionstart":var nt="onCompositionStart";break e;case"compositionend":nt="onCompositionEnd";break e;case"compositionupdate":nt="onCompositionUpdate";break e}nt=void 0}else As?Zm(s,d)&&(nt="onCompositionEnd"):s==="keydown"&&d.keyCode===229&&(nt="onCompositionStart");nt&&(Jm&&d.locale!=="ko"&&(As||nt!=="onCompositionStart"?nt==="onCompositionEnd"&&As&&(Ye=Vm()):(ci=ke,id="value"in ci?ci.value:ci.textContent,As=!0)),Ke=Ll(ae,nt),0<Ke.length&&(nt=new Ym(nt,s,null,d,ke),Ee.push({event:nt,listeners:Ke}),Ye?nt.data=Ye:(Ye=eg(d),Ye!==null&&(nt.data=Ye)))),(Ye=$S?FS(s,d):zS(s,d))&&(ae=Ll(ae,"onBeforeInput"),0<ae.length&&(ke=new Ym("onBeforeInput","beforeinput",null,d,ke),Ee.push({event:ke,listeners:ae}),ke.data=Ye))}wg(Ee,a)})}function la(s,a,d){return{instance:s,listener:a,currentTarget:d}}function Ll(s,a){for(var d=a+"Capture",g=[];s!==null;){var x=s,S=x.stateNode;x.tag===5&&S!==null&&(x=S,S=It(s,d),S!=null&&g.unshift(la(s,S,x)),S=It(s,a),S!=null&&g.push(la(s,S,x))),s=s.return}return g}function Ms(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function kg(s,a,d,g,x){for(var S=a._reactName,N=[];d!==null&&d!==g;){var B=d,Y=B.alternate,ae=B.stateNode;if(Y!==null&&Y===g)break;B.tag===5&&ae!==null&&(B=ae,x?(Y=It(d,S),Y!=null&&N.unshift(la(d,Y,B))):x||(Y=It(d,S),Y!=null&&N.push(la(d,Y,B)))),d=d.return}N.length!==0&&s.push({event:a,listeners:N})}var eE=/\r\n?/g,tE=/\u0000|\uFFFD/g;function Sg(s){return(typeof s=="string"?s:""+s).replace(eE,`
`).replace(tE,"")}function $l(s,a,d){if(a=Sg(a),Sg(s)!==a&&d)throw Error(n(425))}function Fl(){}var bd=null,kd=null;function Sd(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Ed=typeof setTimeout=="function"?setTimeout:void 0,nE=typeof clearTimeout=="function"?clearTimeout:void 0,Eg=typeof Promise=="function"?Promise:void 0,rE=typeof queueMicrotask=="function"?queueMicrotask:typeof Eg<"u"?function(s){return Eg.resolve(null).then(s).catch(iE)}:Ed;function iE(s){setTimeout(function(){throw s})}function _d(s,a){var d=a,g=0;do{var x=d.nextSibling;if(s.removeChild(d),x&&x.nodeType===8)if(d=x.data,d==="/$"){if(g===0){s.removeChild(x),Xo(a);return}g--}else d!=="$"&&d!=="$?"&&d!=="$!"||g++;d=x}while(d);Xo(a)}function fi(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return s}function _g(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var d=s.data;if(d==="$"||d==="$!"||d==="$?"){if(a===0)return s;a--}else d==="/$"&&a++}s=s.previousSibling}return null}var Ds=Math.random().toString(36).slice(2),Nr="__reactFiber$"+Ds,ua="__reactProps$"+Ds,Vr="__reactContainer$"+Ds,Cd="__reactEvents$"+Ds,sE="__reactListeners$"+Ds,oE="__reactHandles$"+Ds;function qi(s){var a=s[Nr];if(a)return a;for(var d=s.parentNode;d;){if(a=d[Vr]||d[Nr]){if(d=a.alternate,a.child!==null||d!==null&&d.child!==null)for(s=_g(s);s!==null;){if(d=s[Nr])return d;s=_g(s)}return a}s=d,d=s.parentNode}return null}function ca(s){return s=s[Nr]||s[Vr],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Ls(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(n(33))}function zl(s){return s[ua]||null}var jd=[],$s=-1;function hi(s){return{current:s}}function Ct(s){0>$s||(s.current=jd[$s],jd[$s]=null,$s--)}function kt(s,a){$s++,jd[$s]=s.current,s.current=a}var pi={},cn=hi(pi),Cn=hi(!1),Ki=pi;function Fs(s,a){var d=s.type.contextTypes;if(!d)return pi;var g=s.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===a)return g.__reactInternalMemoizedMaskedChildContext;var x={},S;for(S in d)x[S]=a[S];return g&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=a,s.__reactInternalMemoizedMaskedChildContext=x),x}function jn(s){return s=s.childContextTypes,s!=null}function Bl(){Ct(Cn),Ct(cn)}function Cg(s,a,d){if(cn.current!==pi)throw Error(n(168));kt(cn,a),kt(Cn,d)}function jg(s,a,d){var g=s.stateNode;if(a=a.childContextTypes,typeof g.getChildContext!="function")return d;g=g.getChildContext();for(var x in g)if(!(x in a))throw Error(n(108,ye(s)||"Unknown",x));return T({},d,g)}function Ul(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||pi,Ki=cn.current,kt(cn,s),kt(Cn,Cn.current),!0}function Ng(s,a,d){var g=s.stateNode;if(!g)throw Error(n(169));d?(s=jg(s,a,Ki),g.__reactInternalMemoizedMergedChildContext=s,Ct(Cn),Ct(cn),kt(cn,s)):Ct(Cn),kt(Cn,d)}var qr=null,Wl=!1,Nd=!1;function Tg(s){qr===null?qr=[s]:qr.push(s)}function aE(s){Wl=!0,Tg(s)}function mi(){if(!Nd&&qr!==null){Nd=!0;var s=0,a=gt;try{var d=qr;for(gt=1;s<d.length;s++){var g=d[s];do g=g(!0);while(g!==null)}qr=null,Wl=!1}catch(x){throw qr!==null&&(qr=qr.slice(s+1)),Pm(Jc,mi),x}finally{gt=a,Nd=!1}}return null}var zs=[],Bs=0,Hl=null,Vl=0,Xn=[],Zn=0,Yi=null,Kr=1,Yr="";function Gi(s,a){zs[Bs++]=Vl,zs[Bs++]=Hl,Hl=s,Vl=a}function Ig(s,a,d){Xn[Zn++]=Kr,Xn[Zn++]=Yr,Xn[Zn++]=Yi,Yi=s;var g=Kr;s=Yr;var x=32-dr(g)-1;g&=~(1<<x),d+=1;var S=32-dr(a)+x;if(30<S){var N=x-x%5;S=(g&(1<<N)-1).toString(32),g>>=N,x-=N,Kr=1<<32-dr(a)+x|d<<x|g,Yr=S+s}else Kr=1<<S|d<<x|g,Yr=s}function Td(s){s.return!==null&&(Gi(s,1),Ig(s,1,0))}function Id(s){for(;s===Hl;)Hl=zs[--Bs],zs[Bs]=null,Vl=zs[--Bs],zs[Bs]=null;for(;s===Yi;)Yi=Xn[--Zn],Xn[Zn]=null,Yr=Xn[--Zn],Xn[Zn]=null,Kr=Xn[--Zn],Xn[Zn]=null}var Bn=null,Un=null,Tt=!1,hr=null;function Pg(s,a){var d=rr(5,null,null,0);d.elementType="DELETED",d.stateNode=a,d.return=s,a=s.deletions,a===null?(s.deletions=[d],s.flags|=16):a.push(d)}function Ag(s,a){switch(s.tag){case 5:var d=s.type;return a=a.nodeType!==1||d.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(s.stateNode=a,Bn=s,Un=fi(a.firstChild),!0):!1;case 6:return a=s.pendingProps===""||a.nodeType!==3?null:a,a!==null?(s.stateNode=a,Bn=s,Un=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(d=Yi!==null?{id:Kr,overflow:Yr}:null,s.memoizedState={dehydrated:a,treeContext:d,retryLane:1073741824},d=rr(18,null,null,0),d.stateNode=a,d.return=s,s.child=d,Bn=s,Un=null,!0):!1;default:return!1}}function Pd(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Ad(s){if(Tt){var a=Un;if(a){var d=a;if(!Ag(s,a)){if(Pd(s))throw Error(n(418));a=fi(d.nextSibling);var g=Bn;a&&Ag(s,a)?Pg(g,d):(s.flags=s.flags&-4097|2,Tt=!1,Bn=s)}}else{if(Pd(s))throw Error(n(418));s.flags=s.flags&-4097|2,Tt=!1,Bn=s}}}function Rg(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Bn=s}function ql(s){if(s!==Bn)return!1;if(!Tt)return Rg(s),Tt=!0,!1;var a;if((a=s.tag!==3)&&!(a=s.tag!==5)&&(a=s.type,a=a!=="head"&&a!=="body"&&!Sd(s.type,s.memoizedProps)),a&&(a=Un)){if(Pd(s))throw Og(),Error(n(418));for(;a;)Pg(s,a),a=fi(a.nextSibling)}if(Rg(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8){var d=s.data;if(d==="/$"){if(a===0){Un=fi(s.nextSibling);break e}a--}else d!=="$"&&d!=="$!"&&d!=="$?"||a++}s=s.nextSibling}Un=null}}else Un=Bn?fi(s.stateNode.nextSibling):null;return!0}function Og(){for(var s=Un;s;)s=fi(s.nextSibling)}function Us(){Un=Bn=null,Tt=!1}function Rd(s){hr===null?hr=[s]:hr.push(s)}var lE=I.ReactCurrentBatchConfig;function da(s,a,d){if(s=d.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(n(309));var g=d.stateNode}if(!g)throw Error(n(147,s));var x=g,S=""+s;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===S?a.ref:(a=function(N){var B=x.refs;N===null?delete B[S]:B[S]=N},a._stringRef=S,a)}if(typeof s!="string")throw Error(n(284));if(!d._owner)throw Error(n(290,s))}return s}function Kl(s,a){throw s=Object.prototype.toString.call(a),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s))}function Mg(s){var a=s._init;return a(s._payload)}function Dg(s){function a(se,Q){if(s){var oe=se.deletions;oe===null?(se.deletions=[Q],se.flags|=16):oe.push(Q)}}function d(se,Q){if(!s)return null;for(;Q!==null;)a(se,Q),Q=Q.sibling;return null}function g(se,Q){for(se=new Map;Q!==null;)Q.key!==null?se.set(Q.key,Q):se.set(Q.index,Q),Q=Q.sibling;return se}function x(se,Q){return se=Si(se,Q),se.index=0,se.sibling=null,se}function S(se,Q,oe){return se.index=oe,s?(oe=se.alternate,oe!==null?(oe=oe.index,oe<Q?(se.flags|=2,Q):oe):(se.flags|=2,Q)):(se.flags|=1048576,Q)}function N(se){return s&&se.alternate===null&&(se.flags|=2),se}function B(se,Q,oe,je){return Q===null||Q.tag!==6?(Q=_f(oe,se.mode,je),Q.return=se,Q):(Q=x(Q,oe),Q.return=se,Q)}function Y(se,Q,oe,je){var He=oe.type;return He===$?ke(se,Q,oe.props.children,je,oe.key):Q!==null&&(Q.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===X&&Mg(He)===Q.type)?(je=x(Q,oe.props),je.ref=da(se,Q,oe),je.return=se,je):(je=yu(oe.type,oe.key,oe.props,null,se.mode,je),je.ref=da(se,Q,oe),je.return=se,je)}function ae(se,Q,oe,je){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==oe.containerInfo||Q.stateNode.implementation!==oe.implementation?(Q=Cf(oe,se.mode,je),Q.return=se,Q):(Q=x(Q,oe.children||[]),Q.return=se,Q)}function ke(se,Q,oe,je,He){return Q===null||Q.tag!==7?(Q=rs(oe,se.mode,je,He),Q.return=se,Q):(Q=x(Q,oe),Q.return=se,Q)}function Ee(se,Q,oe){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Q=_f(""+Q,se.mode,oe),Q.return=se,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case O:return oe=yu(Q.type,Q.key,Q.props,null,se.mode,oe),oe.ref=da(se,null,Q),oe.return=se,oe;case A:return Q=Cf(Q,se.mode,oe),Q.return=se,Q;case X:var je=Q._init;return Ee(se,je(Q._payload),oe)}if(de(Q)||ee(Q))return Q=rs(Q,se.mode,oe,null),Q.return=se,Q;Kl(se,Q)}return null}function xe(se,Q,oe,je){var He=Q!==null?Q.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number")return He!==null?null:B(se,Q,""+oe,je);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case O:return oe.key===He?Y(se,Q,oe,je):null;case A:return oe.key===He?ae(se,Q,oe,je):null;case X:return He=oe._init,xe(se,Q,He(oe._payload),je)}if(de(oe)||ee(oe))return He!==null?null:ke(se,Q,oe,je,null);Kl(se,oe)}return null}function De(se,Q,oe,je,He){if(typeof je=="string"&&je!==""||typeof je=="number")return se=se.get(oe)||null,B(Q,se,""+je,He);if(typeof je=="object"&&je!==null){switch(je.$$typeof){case O:return se=se.get(je.key===null?oe:je.key)||null,Y(Q,se,je,He);case A:return se=se.get(je.key===null?oe:je.key)||null,ae(Q,se,je,He);case X:var Ke=je._init;return De(se,Q,oe,Ke(je._payload),He)}if(de(je)||ee(je))return se=se.get(oe)||null,ke(Q,se,je,He,null);Kl(Q,je)}return null}function Fe(se,Q,oe,je){for(var He=null,Ke=null,Ye=Q,nt=Q=0,Zt=null;Ye!==null&&nt<oe.length;nt++){Ye.index>nt?(Zt=Ye,Ye=null):Zt=Ye.sibling;var pt=xe(se,Ye,oe[nt],je);if(pt===null){Ye===null&&(Ye=Zt);break}s&&Ye&&pt.alternate===null&&a(se,Ye),Q=S(pt,Q,nt),Ke===null?He=pt:Ke.sibling=pt,Ke=pt,Ye=Zt}if(nt===oe.length)return d(se,Ye),Tt&&Gi(se,nt),He;if(Ye===null){for(;nt<oe.length;nt++)Ye=Ee(se,oe[nt],je),Ye!==null&&(Q=S(Ye,Q,nt),Ke===null?He=Ye:Ke.sibling=Ye,Ke=Ye);return Tt&&Gi(se,nt),He}for(Ye=g(se,Ye);nt<oe.length;nt++)Zt=De(Ye,se,nt,oe[nt],je),Zt!==null&&(s&&Zt.alternate!==null&&Ye.delete(Zt.key===null?nt:Zt.key),Q=S(Zt,Q,nt),Ke===null?He=Zt:Ke.sibling=Zt,Ke=Zt);return s&&Ye.forEach(function(Ei){return a(se,Ei)}),Tt&&Gi(se,nt),He}function Ue(se,Q,oe,je){var He=ee(oe);if(typeof He!="function")throw Error(n(150));if(oe=He.call(oe),oe==null)throw Error(n(151));for(var Ke=He=null,Ye=Q,nt=Q=0,Zt=null,pt=oe.next();Ye!==null&&!pt.done;nt++,pt=oe.next()){Ye.index>nt?(Zt=Ye,Ye=null):Zt=Ye.sibling;var Ei=xe(se,Ye,pt.value,je);if(Ei===null){Ye===null&&(Ye=Zt);break}s&&Ye&&Ei.alternate===null&&a(se,Ye),Q=S(Ei,Q,nt),Ke===null?He=Ei:Ke.sibling=Ei,Ke=Ei,Ye=Zt}if(pt.done)return d(se,Ye),Tt&&Gi(se,nt),He;if(Ye===null){for(;!pt.done;nt++,pt=oe.next())pt=Ee(se,pt.value,je),pt!==null&&(Q=S(pt,Q,nt),Ke===null?He=pt:Ke.sibling=pt,Ke=pt);return Tt&&Gi(se,nt),He}for(Ye=g(se,Ye);!pt.done;nt++,pt=oe.next())pt=De(Ye,se,nt,pt.value,je),pt!==null&&(s&&pt.alternate!==null&&Ye.delete(pt.key===null?nt:pt.key),Q=S(pt,Q,nt),Ke===null?He=pt:Ke.sibling=pt,Ke=pt);return s&&Ye.forEach(function(BE){return a(se,BE)}),Tt&&Gi(se,nt),He}function Lt(se,Q,oe,je){if(typeof oe=="object"&&oe!==null&&oe.type===$&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case O:e:{for(var He=oe.key,Ke=Q;Ke!==null;){if(Ke.key===He){if(He=oe.type,He===$){if(Ke.tag===7){d(se,Ke.sibling),Q=x(Ke,oe.props.children),Q.return=se,se=Q;break e}}else if(Ke.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===X&&Mg(He)===Ke.type){d(se,Ke.sibling),Q=x(Ke,oe.props),Q.ref=da(se,Ke,oe),Q.return=se,se=Q;break e}d(se,Ke);break}else a(se,Ke);Ke=Ke.sibling}oe.type===$?(Q=rs(oe.props.children,se.mode,je,oe.key),Q.return=se,se=Q):(je=yu(oe.type,oe.key,oe.props,null,se.mode,je),je.ref=da(se,Q,oe),je.return=se,se=je)}return N(se);case A:e:{for(Ke=oe.key;Q!==null;){if(Q.key===Ke)if(Q.tag===4&&Q.stateNode.containerInfo===oe.containerInfo&&Q.stateNode.implementation===oe.implementation){d(se,Q.sibling),Q=x(Q,oe.children||[]),Q.return=se,se=Q;break e}else{d(se,Q);break}else a(se,Q);Q=Q.sibling}Q=Cf(oe,se.mode,je),Q.return=se,se=Q}return N(se);case X:return Ke=oe._init,Lt(se,Q,Ke(oe._payload),je)}if(de(oe))return Fe(se,Q,oe,je);if(ee(oe))return Ue(se,Q,oe,je);Kl(se,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"?(oe=""+oe,Q!==null&&Q.tag===6?(d(se,Q.sibling),Q=x(Q,oe),Q.return=se,se=Q):(d(se,Q),Q=_f(oe,se.mode,je),Q.return=se,se=Q),N(se)):d(se,Q)}return Lt}var Ws=Dg(!0),Lg=Dg(!1),Yl=hi(null),Gl=null,Hs=null,Od=null;function Md(){Od=Hs=Gl=null}function Dd(s){var a=Yl.current;Ct(Yl),s._currentValue=a}function Ld(s,a,d){for(;s!==null;){var g=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,g!==null&&(g.childLanes|=a)):g!==null&&(g.childLanes&a)!==a&&(g.childLanes|=a),s===d)break;s=s.return}}function Vs(s,a){Gl=s,Od=Hs=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&a)!==0&&(Nn=!0),s.firstContext=null)}function er(s){var a=s._currentValue;if(Od!==s)if(s={context:s,memoizedValue:a,next:null},Hs===null){if(Gl===null)throw Error(n(308));Hs=s,Gl.dependencies={lanes:0,firstContext:s}}else Hs=Hs.next=s;return a}var Ji=null;function $d(s){Ji===null?Ji=[s]:Ji.push(s)}function $g(s,a,d,g){var x=a.interleaved;return x===null?(d.next=d,$d(a)):(d.next=x.next,x.next=d),a.interleaved=d,Gr(s,g)}function Gr(s,a){s.lanes|=a;var d=s.alternate;for(d!==null&&(d.lanes|=a),d=s,s=s.return;s!==null;)s.childLanes|=a,d=s.alternate,d!==null&&(d.childLanes|=a),d=s,s=s.return;return d.tag===3?d.stateNode:null}var gi=!1;function Fd(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fg(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Jr(s,a){return{eventTime:s,lane:a,tag:0,payload:null,callback:null,next:null}}function yi(s,a,d){var g=s.updateQueue;if(g===null)return null;if(g=g.shared,(ht&2)!==0){var x=g.pending;return x===null?a.next=a:(a.next=x.next,x.next=a),g.pending=a,Gr(s,d)}return x=g.interleaved,x===null?(a.next=a,$d(g)):(a.next=x.next,x.next=a),g.interleaved=a,Gr(s,d)}function Jl(s,a,d){if(a=a.updateQueue,a!==null&&(a=a.shared,(d&4194240)!==0)){var g=a.lanes;g&=s.pendingLanes,d|=g,a.lanes=d,Zc(s,d)}}function zg(s,a){var d=s.updateQueue,g=s.alternate;if(g!==null&&(g=g.updateQueue,d===g)){var x=null,S=null;if(d=d.firstBaseUpdate,d!==null){do{var N={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};S===null?x=S=N:S=S.next=N,d=d.next}while(d!==null);S===null?x=S=a:S=S.next=a}else x=S=a;d={baseState:g.baseState,firstBaseUpdate:x,lastBaseUpdate:S,shared:g.shared,effects:g.effects},s.updateQueue=d;return}s=d.lastBaseUpdate,s===null?d.firstBaseUpdate=a:s.next=a,d.lastBaseUpdate=a}function Ql(s,a,d,g){var x=s.updateQueue;gi=!1;var S=x.firstBaseUpdate,N=x.lastBaseUpdate,B=x.shared.pending;if(B!==null){x.shared.pending=null;var Y=B,ae=Y.next;Y.next=null,N===null?S=ae:N.next=ae,N=Y;var ke=s.alternate;ke!==null&&(ke=ke.updateQueue,B=ke.lastBaseUpdate,B!==N&&(B===null?ke.firstBaseUpdate=ae:B.next=ae,ke.lastBaseUpdate=Y))}if(S!==null){var Ee=x.baseState;N=0,ke=ae=Y=null,B=S;do{var xe=B.lane,De=B.eventTime;if((g&xe)===xe){ke!==null&&(ke=ke.next={eventTime:De,lane:0,tag:B.tag,payload:B.payload,callback:B.callback,next:null});e:{var Fe=s,Ue=B;switch(xe=a,De=d,Ue.tag){case 1:if(Fe=Ue.payload,typeof Fe=="function"){Ee=Fe.call(De,Ee,xe);break e}Ee=Fe;break e;case 3:Fe.flags=Fe.flags&-65537|128;case 0:if(Fe=Ue.payload,xe=typeof Fe=="function"?Fe.call(De,Ee,xe):Fe,xe==null)break e;Ee=T({},Ee,xe);break e;case 2:gi=!0}}B.callback!==null&&B.lane!==0&&(s.flags|=64,xe=x.effects,xe===null?x.effects=[B]:xe.push(B))}else De={eventTime:De,lane:xe,tag:B.tag,payload:B.payload,callback:B.callback,next:null},ke===null?(ae=ke=De,Y=Ee):ke=ke.next=De,N|=xe;if(B=B.next,B===null){if(B=x.shared.pending,B===null)break;xe=B,B=xe.next,xe.next=null,x.lastBaseUpdate=xe,x.shared.pending=null}}while(!0);if(ke===null&&(Y=Ee),x.baseState=Y,x.firstBaseUpdate=ae,x.lastBaseUpdate=ke,a=x.shared.interleaved,a!==null){x=a;do N|=x.lane,x=x.next;while(x!==a)}else S===null&&(x.shared.lanes=0);Zi|=N,s.lanes=N,s.memoizedState=Ee}}function Bg(s,a,d){if(s=a.effects,a.effects=null,s!==null)for(a=0;a<s.length;a++){var g=s[a],x=g.callback;if(x!==null){if(g.callback=null,g=d,typeof x!="function")throw Error(n(191,x));x.call(g)}}}var fa={},Tr=hi(fa),ha=hi(fa),pa=hi(fa);function Qi(s){if(s===fa)throw Error(n(174));return s}function zd(s,a){switch(kt(pa,a),kt(ha,s),kt(Tr,fa),s=a.nodeType,s){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:q(null,"");break;default:s=s===8?a.parentNode:a,a=s.namespaceURI||null,s=s.tagName,a=q(a,s)}Ct(Tr),kt(Tr,a)}function qs(){Ct(Tr),Ct(ha),Ct(pa)}function Ug(s){Qi(pa.current);var a=Qi(Tr.current),d=q(a,s.type);a!==d&&(kt(ha,s),kt(Tr,d))}function Bd(s){ha.current===s&&(Ct(Tr),Ct(ha))}var Pt=hi(0);function Xl(s){for(var a=s;a!==null;){if(a.tag===13){var d=a.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Ud=[];function Wd(){for(var s=0;s<Ud.length;s++)Ud[s]._workInProgressVersionPrimary=null;Ud.length=0}var Zl=I.ReactCurrentDispatcher,Hd=I.ReactCurrentBatchConfig,Xi=0,At=null,Kt=null,Qt=null,eu=!1,ma=!1,ga=0,uE=0;function dn(){throw Error(n(321))}function Vd(s,a){if(a===null)return!1;for(var d=0;d<a.length&&d<s.length;d++)if(!fr(s[d],a[d]))return!1;return!0}function qd(s,a,d,g,x,S){if(Xi=S,At=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Zl.current=s===null||s.memoizedState===null?hE:pE,s=d(g,x),ma){S=0;do{if(ma=!1,ga=0,25<=S)throw Error(n(301));S+=1,Qt=Kt=null,a.updateQueue=null,Zl.current=mE,s=d(g,x)}while(ma)}if(Zl.current=ru,a=Kt!==null&&Kt.next!==null,Xi=0,Qt=Kt=At=null,eu=!1,a)throw Error(n(300));return s}function Kd(){var s=ga!==0;return ga=0,s}function Ir(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qt===null?At.memoizedState=Qt=s:Qt=Qt.next=s,Qt}function tr(){if(Kt===null){var s=At.alternate;s=s!==null?s.memoizedState:null}else s=Kt.next;var a=Qt===null?At.memoizedState:Qt.next;if(a!==null)Qt=a,Kt=s;else{if(s===null)throw Error(n(310));Kt=s,s={memoizedState:Kt.memoizedState,baseState:Kt.baseState,baseQueue:Kt.baseQueue,queue:Kt.queue,next:null},Qt===null?At.memoizedState=Qt=s:Qt=Qt.next=s}return Qt}function ya(s,a){return typeof a=="function"?a(s):a}function Yd(s){var a=tr(),d=a.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=s;var g=Kt,x=g.baseQueue,S=d.pending;if(S!==null){if(x!==null){var N=x.next;x.next=S.next,S.next=N}g.baseQueue=x=S,d.pending=null}if(x!==null){S=x.next,g=g.baseState;var B=N=null,Y=null,ae=S;do{var ke=ae.lane;if((Xi&ke)===ke)Y!==null&&(Y=Y.next={lane:0,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),g=ae.hasEagerState?ae.eagerState:s(g,ae.action);else{var Ee={lane:ke,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null};Y===null?(B=Y=Ee,N=g):Y=Y.next=Ee,At.lanes|=ke,Zi|=ke}ae=ae.next}while(ae!==null&&ae!==S);Y===null?N=g:Y.next=B,fr(g,a.memoizedState)||(Nn=!0),a.memoizedState=g,a.baseState=N,a.baseQueue=Y,d.lastRenderedState=g}if(s=d.interleaved,s!==null){x=s;do S=x.lane,At.lanes|=S,Zi|=S,x=x.next;while(x!==s)}else x===null&&(d.lanes=0);return[a.memoizedState,d.dispatch]}function Gd(s){var a=tr(),d=a.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=s;var g=d.dispatch,x=d.pending,S=a.memoizedState;if(x!==null){d.pending=null;var N=x=x.next;do S=s(S,N.action),N=N.next;while(N!==x);fr(S,a.memoizedState)||(Nn=!0),a.memoizedState=S,a.baseQueue===null&&(a.baseState=S),d.lastRenderedState=S}return[S,g]}function Wg(){}function Hg(s,a){var d=At,g=tr(),x=a(),S=!fr(g.memoizedState,x);if(S&&(g.memoizedState=x,Nn=!0),g=g.queue,Jd(Kg.bind(null,d,g,s),[s]),g.getSnapshot!==a||S||Qt!==null&&Qt.memoizedState.tag&1){if(d.flags|=2048,va(9,qg.bind(null,d,g,x,a),void 0,null),Xt===null)throw Error(n(349));(Xi&30)!==0||Vg(d,a,x)}return x}function Vg(s,a,d){s.flags|=16384,s={getSnapshot:a,value:d},a=At.updateQueue,a===null?(a={lastEffect:null,stores:null},At.updateQueue=a,a.stores=[s]):(d=a.stores,d===null?a.stores=[s]:d.push(s))}function qg(s,a,d,g){a.value=d,a.getSnapshot=g,Yg(a)&&Gg(s)}function Kg(s,a,d){return d(function(){Yg(a)&&Gg(s)})}function Yg(s){var a=s.getSnapshot;s=s.value;try{var d=a();return!fr(s,d)}catch{return!0}}function Gg(s){var a=Gr(s,1);a!==null&&yr(a,s,1,-1)}function Jg(s){var a=Ir();return typeof s=="function"&&(s=s()),a.memoizedState=a.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:s},a.queue=s,s=s.dispatch=fE.bind(null,At,s),[a.memoizedState,s]}function va(s,a,d,g){return s={tag:s,create:a,destroy:d,deps:g,next:null},a=At.updateQueue,a===null?(a={lastEffect:null,stores:null},At.updateQueue=a,a.lastEffect=s.next=s):(d=a.lastEffect,d===null?a.lastEffect=s.next=s:(g=d.next,d.next=s,s.next=g,a.lastEffect=s)),s}function Qg(){return tr().memoizedState}function tu(s,a,d,g){var x=Ir();At.flags|=s,x.memoizedState=va(1|a,d,void 0,g===void 0?null:g)}function nu(s,a,d,g){var x=tr();g=g===void 0?null:g;var S=void 0;if(Kt!==null){var N=Kt.memoizedState;if(S=N.destroy,g!==null&&Vd(g,N.deps)){x.memoizedState=va(a,d,S,g);return}}At.flags|=s,x.memoizedState=va(1|a,d,S,g)}function Xg(s,a){return tu(8390656,8,s,a)}function Jd(s,a){return nu(2048,8,s,a)}function Zg(s,a){return nu(4,2,s,a)}function ey(s,a){return nu(4,4,s,a)}function ty(s,a){if(typeof a=="function")return s=s(),a(s),function(){a(null)};if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function ny(s,a,d){return d=d!=null?d.concat([s]):null,nu(4,4,ty.bind(null,a,s),d)}function Qd(){}function ry(s,a){var d=tr();a=a===void 0?null:a;var g=d.memoizedState;return g!==null&&a!==null&&Vd(a,g[1])?g[0]:(d.memoizedState=[s,a],s)}function iy(s,a){var d=tr();a=a===void 0?null:a;var g=d.memoizedState;return g!==null&&a!==null&&Vd(a,g[1])?g[0]:(s=s(),d.memoizedState=[s,a],s)}function sy(s,a,d){return(Xi&21)===0?(s.baseState&&(s.baseState=!1,Nn=!0),s.memoizedState=d):(fr(d,a)||(d=Mm(),At.lanes|=d,Zi|=d,s.baseState=!0),a)}function cE(s,a){var d=gt;gt=d!==0&&4>d?d:4,s(!0);var g=Hd.transition;Hd.transition={};try{s(!1),a()}finally{gt=d,Hd.transition=g}}function oy(){return tr().memoizedState}function dE(s,a,d){var g=bi(s);if(d={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null},ay(s))ly(a,d);else if(d=$g(s,a,d,g),d!==null){var x=bn();yr(d,s,g,x),uy(d,a,g)}}function fE(s,a,d){var g=bi(s),x={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null};if(ay(s))ly(a,x);else{var S=s.alternate;if(s.lanes===0&&(S===null||S.lanes===0)&&(S=a.lastRenderedReducer,S!==null))try{var N=a.lastRenderedState,B=S(N,d);if(x.hasEagerState=!0,x.eagerState=B,fr(B,N)){var Y=a.interleaved;Y===null?(x.next=x,$d(a)):(x.next=Y.next,Y.next=x),a.interleaved=x;return}}catch{}finally{}d=$g(s,a,x,g),d!==null&&(x=bn(),yr(d,s,g,x),uy(d,a,g))}}function ay(s){var a=s.alternate;return s===At||a!==null&&a===At}function ly(s,a){ma=eu=!0;var d=s.pending;d===null?a.next=a:(a.next=d.next,d.next=a),s.pending=a}function uy(s,a,d){if((d&4194240)!==0){var g=a.lanes;g&=s.pendingLanes,d|=g,a.lanes=d,Zc(s,d)}}var ru={readContext:er,useCallback:dn,useContext:dn,useEffect:dn,useImperativeHandle:dn,useInsertionEffect:dn,useLayoutEffect:dn,useMemo:dn,useReducer:dn,useRef:dn,useState:dn,useDebugValue:dn,useDeferredValue:dn,useTransition:dn,useMutableSource:dn,useSyncExternalStore:dn,useId:dn,unstable_isNewReconciler:!1},hE={readContext:er,useCallback:function(s,a){return Ir().memoizedState=[s,a===void 0?null:a],s},useContext:er,useEffect:Xg,useImperativeHandle:function(s,a,d){return d=d!=null?d.concat([s]):null,tu(4194308,4,ty.bind(null,a,s),d)},useLayoutEffect:function(s,a){return tu(4194308,4,s,a)},useInsertionEffect:function(s,a){return tu(4,2,s,a)},useMemo:function(s,a){var d=Ir();return a=a===void 0?null:a,s=s(),d.memoizedState=[s,a],s},useReducer:function(s,a,d){var g=Ir();return a=d!==void 0?d(a):a,g.memoizedState=g.baseState=a,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:a},g.queue=s,s=s.dispatch=dE.bind(null,At,s),[g.memoizedState,s]},useRef:function(s){var a=Ir();return s={current:s},a.memoizedState=s},useState:Jg,useDebugValue:Qd,useDeferredValue:function(s){return Ir().memoizedState=s},useTransition:function(){var s=Jg(!1),a=s[0];return s=cE.bind(null,s[1]),Ir().memoizedState=s,[a,s]},useMutableSource:function(){},useSyncExternalStore:function(s,a,d){var g=At,x=Ir();if(Tt){if(d===void 0)throw Error(n(407));d=d()}else{if(d=a(),Xt===null)throw Error(n(349));(Xi&30)!==0||Vg(g,a,d)}x.memoizedState=d;var S={value:d,getSnapshot:a};return x.queue=S,Xg(Kg.bind(null,g,S,s),[s]),g.flags|=2048,va(9,qg.bind(null,g,S,d,a),void 0,null),d},useId:function(){var s=Ir(),a=Xt.identifierPrefix;if(Tt){var d=Yr,g=Kr;d=(g&~(1<<32-dr(g)-1)).toString(32)+d,a=":"+a+"R"+d,d=ga++,0<d&&(a+="H"+d.toString(32)),a+=":"}else d=uE++,a=":"+a+"r"+d.toString(32)+":";return s.memoizedState=a},unstable_isNewReconciler:!1},pE={readContext:er,useCallback:ry,useContext:er,useEffect:Jd,useImperativeHandle:ny,useInsertionEffect:Zg,useLayoutEffect:ey,useMemo:iy,useReducer:Yd,useRef:Qg,useState:function(){return Yd(ya)},useDebugValue:Qd,useDeferredValue:function(s){var a=tr();return sy(a,Kt.memoizedState,s)},useTransition:function(){var s=Yd(ya)[0],a=tr().memoizedState;return[s,a]},useMutableSource:Wg,useSyncExternalStore:Hg,useId:oy,unstable_isNewReconciler:!1},mE={readContext:er,useCallback:ry,useContext:er,useEffect:Jd,useImperativeHandle:ny,useInsertionEffect:Zg,useLayoutEffect:ey,useMemo:iy,useReducer:Gd,useRef:Qg,useState:function(){return Gd(ya)},useDebugValue:Qd,useDeferredValue:function(s){var a=tr();return Kt===null?a.memoizedState=s:sy(a,Kt.memoizedState,s)},useTransition:function(){var s=Gd(ya)[0],a=tr().memoizedState;return[s,a]},useMutableSource:Wg,useSyncExternalStore:Hg,useId:oy,unstable_isNewReconciler:!1};function pr(s,a){if(s&&s.defaultProps){a=T({},a),s=s.defaultProps;for(var d in s)a[d]===void 0&&(a[d]=s[d]);return a}return a}function Xd(s,a,d,g){a=s.memoizedState,d=d(g,a),d=d==null?a:T({},a,d),s.memoizedState=d,s.lanes===0&&(s.updateQueue.baseState=d)}var iu={isMounted:function(s){return(s=s._reactInternals)?Vi(s)===s:!1},enqueueSetState:function(s,a,d){s=s._reactInternals;var g=bn(),x=bi(s),S=Jr(g,x);S.payload=a,d!=null&&(S.callback=d),a=yi(s,S,x),a!==null&&(yr(a,s,x,g),Jl(a,s,x))},enqueueReplaceState:function(s,a,d){s=s._reactInternals;var g=bn(),x=bi(s),S=Jr(g,x);S.tag=1,S.payload=a,d!=null&&(S.callback=d),a=yi(s,S,x),a!==null&&(yr(a,s,x,g),Jl(a,s,x))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var d=bn(),g=bi(s),x=Jr(d,g);x.tag=2,a!=null&&(x.callback=a),a=yi(s,x,g),a!==null&&(yr(a,s,g,d),Jl(a,s,g))}};function cy(s,a,d,g,x,S,N){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(g,S,N):a.prototype&&a.prototype.isPureReactComponent?!ia(d,g)||!ia(x,S):!0}function dy(s,a,d){var g=!1,x=pi,S=a.contextType;return typeof S=="object"&&S!==null?S=er(S):(x=jn(a)?Ki:cn.current,g=a.contextTypes,S=(g=g!=null)?Fs(s,x):pi),a=new a(d,S),s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=iu,s.stateNode=a,a._reactInternals=s,g&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=x,s.__reactInternalMemoizedMaskedChildContext=S),a}function fy(s,a,d,g){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(d,g),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(d,g),a.state!==s&&iu.enqueueReplaceState(a,a.state,null)}function Zd(s,a,d,g){var x=s.stateNode;x.props=d,x.state=s.memoizedState,x.refs={},Fd(s);var S=a.contextType;typeof S=="object"&&S!==null?x.context=er(S):(S=jn(a)?Ki:cn.current,x.context=Fs(s,S)),x.state=s.memoizedState,S=a.getDerivedStateFromProps,typeof S=="function"&&(Xd(s,a,S,d),x.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(a=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),a!==x.state&&iu.enqueueReplaceState(x,x.state,null),Ql(s,d,x,g),x.state=s.memoizedState),typeof x.componentDidMount=="function"&&(s.flags|=4194308)}function Ks(s,a){try{var d="",g=a;do d+=ge(g),g=g.return;while(g);var x=d}catch(S){x=`
Error generating stack: `+S.message+`
`+S.stack}return{value:s,source:a,stack:x,digest:null}}function ef(s,a,d){return{value:s,source:null,stack:d??null,digest:a??null}}function tf(s,a){try{console.error(a.value)}catch(d){setTimeout(function(){throw d})}}var gE=typeof WeakMap=="function"?WeakMap:Map;function hy(s,a,d){d=Jr(-1,d),d.tag=3,d.payload={element:null};var g=a.value;return d.callback=function(){du||(du=!0,yf=g),tf(s,a)},d}function py(s,a,d){d=Jr(-1,d),d.tag=3;var g=s.type.getDerivedStateFromError;if(typeof g=="function"){var x=a.value;d.payload=function(){return g(x)},d.callback=function(){tf(s,a)}}var S=s.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(d.callback=function(){tf(s,a),typeof g!="function"&&(xi===null?xi=new Set([this]):xi.add(this));var N=a.stack;this.componentDidCatch(a.value,{componentStack:N!==null?N:""})}),d}function my(s,a,d){var g=s.pingCache;if(g===null){g=s.pingCache=new gE;var x=new Set;g.set(a,x)}else x=g.get(a),x===void 0&&(x=new Set,g.set(a,x));x.has(d)||(x.add(d),s=IE.bind(null,s,a,d),a.then(s,s))}function gy(s){do{var a;if((a=s.tag===13)&&(a=s.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return s;s=s.return}while(s!==null);return null}function yy(s,a,d,g,x){return(s.mode&1)===0?(s===a?s.flags|=65536:(s.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(a=Jr(-1,1),a.tag=2,yi(d,a,1))),d.lanes|=1),s):(s.flags|=65536,s.lanes=x,s)}var yE=I.ReactCurrentOwner,Nn=!1;function wn(s,a,d,g){a.child=s===null?Lg(a,null,d,g):Ws(a,s.child,d,g)}function vy(s,a,d,g,x){d=d.render;var S=a.ref;return Vs(a,x),g=qd(s,a,d,g,S,x),d=Kd(),s!==null&&!Nn?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~x,Qr(s,a,x)):(Tt&&d&&Td(a),a.flags|=1,wn(s,a,g,x),a.child)}function xy(s,a,d,g,x){if(s===null){var S=d.type;return typeof S=="function"&&!Ef(S)&&S.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(a.tag=15,a.type=S,wy(s,a,S,g,x)):(s=yu(d.type,null,g,a,a.mode,x),s.ref=a.ref,s.return=a,a.child=s)}if(S=s.child,(s.lanes&x)===0){var N=S.memoizedProps;if(d=d.compare,d=d!==null?d:ia,d(N,g)&&s.ref===a.ref)return Qr(s,a,x)}return a.flags|=1,s=Si(S,g),s.ref=a.ref,s.return=a,a.child=s}function wy(s,a,d,g,x){if(s!==null){var S=s.memoizedProps;if(ia(S,g)&&s.ref===a.ref)if(Nn=!1,a.pendingProps=g=S,(s.lanes&x)!==0)(s.flags&131072)!==0&&(Nn=!0);else return a.lanes=s.lanes,Qr(s,a,x)}return nf(s,a,d,g,x)}function by(s,a,d){var g=a.pendingProps,x=g.children,S=s!==null?s.memoizedState:null;if(g.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},kt(Gs,Wn),Wn|=d;else{if((d&1073741824)===0)return s=S!==null?S.baseLanes|d:d,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:s,cachePool:null,transitions:null},a.updateQueue=null,kt(Gs,Wn),Wn|=s,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=S!==null?S.baseLanes:d,kt(Gs,Wn),Wn|=g}else S!==null?(g=S.baseLanes|d,a.memoizedState=null):g=d,kt(Gs,Wn),Wn|=g;return wn(s,a,x,d),a.child}function ky(s,a){var d=a.ref;(s===null&&d!==null||s!==null&&s.ref!==d)&&(a.flags|=512,a.flags|=2097152)}function nf(s,a,d,g,x){var S=jn(d)?Ki:cn.current;return S=Fs(a,S),Vs(a,x),d=qd(s,a,d,g,S,x),g=Kd(),s!==null&&!Nn?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~x,Qr(s,a,x)):(Tt&&g&&Td(a),a.flags|=1,wn(s,a,d,x),a.child)}function Sy(s,a,d,g,x){if(jn(d)){var S=!0;Ul(a)}else S=!1;if(Vs(a,x),a.stateNode===null)ou(s,a),dy(a,d,g),Zd(a,d,g,x),g=!0;else if(s===null){var N=a.stateNode,B=a.memoizedProps;N.props=B;var Y=N.context,ae=d.contextType;typeof ae=="object"&&ae!==null?ae=er(ae):(ae=jn(d)?Ki:cn.current,ae=Fs(a,ae));var ke=d.getDerivedStateFromProps,Ee=typeof ke=="function"||typeof N.getSnapshotBeforeUpdate=="function";Ee||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(B!==g||Y!==ae)&&fy(a,N,g,ae),gi=!1;var xe=a.memoizedState;N.state=xe,Ql(a,g,N,x),Y=a.memoizedState,B!==g||xe!==Y||Cn.current||gi?(typeof ke=="function"&&(Xd(a,d,ke,g),Y=a.memoizedState),(B=gi||cy(a,d,B,g,xe,Y,ae))?(Ee||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(a.flags|=4194308)):(typeof N.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=g,a.memoizedState=Y),N.props=g,N.state=Y,N.context=ae,g=B):(typeof N.componentDidMount=="function"&&(a.flags|=4194308),g=!1)}else{N=a.stateNode,Fg(s,a),B=a.memoizedProps,ae=a.type===a.elementType?B:pr(a.type,B),N.props=ae,Ee=a.pendingProps,xe=N.context,Y=d.contextType,typeof Y=="object"&&Y!==null?Y=er(Y):(Y=jn(d)?Ki:cn.current,Y=Fs(a,Y));var De=d.getDerivedStateFromProps;(ke=typeof De=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(B!==Ee||xe!==Y)&&fy(a,N,g,Y),gi=!1,xe=a.memoizedState,N.state=xe,Ql(a,g,N,x);var Fe=a.memoizedState;B!==Ee||xe!==Fe||Cn.current||gi?(typeof De=="function"&&(Xd(a,d,De,g),Fe=a.memoizedState),(ae=gi||cy(a,d,ae,g,xe,Fe,Y)||!1)?(ke||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(g,Fe,Y),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(g,Fe,Y)),typeof N.componentDidUpdate=="function"&&(a.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof N.componentDidUpdate!="function"||B===s.memoizedProps&&xe===s.memoizedState||(a.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||B===s.memoizedProps&&xe===s.memoizedState||(a.flags|=1024),a.memoizedProps=g,a.memoizedState=Fe),N.props=g,N.state=Fe,N.context=Y,g=ae):(typeof N.componentDidUpdate!="function"||B===s.memoizedProps&&xe===s.memoizedState||(a.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||B===s.memoizedProps&&xe===s.memoizedState||(a.flags|=1024),g=!1)}return rf(s,a,d,g,S,x)}function rf(s,a,d,g,x,S){ky(s,a);var N=(a.flags&128)!==0;if(!g&&!N)return x&&Ng(a,d,!1),Qr(s,a,S);g=a.stateNode,yE.current=a;var B=N&&typeof d.getDerivedStateFromError!="function"?null:g.render();return a.flags|=1,s!==null&&N?(a.child=Ws(a,s.child,null,S),a.child=Ws(a,null,B,S)):wn(s,a,B,S),a.memoizedState=g.state,x&&Ng(a,d,!0),a.child}function Ey(s){var a=s.stateNode;a.pendingContext?Cg(s,a.pendingContext,a.pendingContext!==a.context):a.context&&Cg(s,a.context,!1),zd(s,a.containerInfo)}function _y(s,a,d,g,x){return Us(),Rd(x),a.flags|=256,wn(s,a,d,g),a.child}var sf={dehydrated:null,treeContext:null,retryLane:0};function of(s){return{baseLanes:s,cachePool:null,transitions:null}}function Cy(s,a,d){var g=a.pendingProps,x=Pt.current,S=!1,N=(a.flags&128)!==0,B;if((B=N)||(B=s!==null&&s.memoizedState===null?!1:(x&2)!==0),B?(S=!0,a.flags&=-129):(s===null||s.memoizedState!==null)&&(x|=1),kt(Pt,x&1),s===null)return Ad(a),s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((a.mode&1)===0?a.lanes=1:s.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(N=g.children,s=g.fallback,S?(g=a.mode,S=a.child,N={mode:"hidden",children:N},(g&1)===0&&S!==null?(S.childLanes=0,S.pendingProps=N):S=vu(N,g,0,null),s=rs(s,g,d,null),S.return=a,s.return=a,S.sibling=s,a.child=S,a.child.memoizedState=of(d),a.memoizedState=sf,s):af(a,N));if(x=s.memoizedState,x!==null&&(B=x.dehydrated,B!==null))return vE(s,a,N,g,B,x,d);if(S){S=g.fallback,N=a.mode,x=s.child,B=x.sibling;var Y={mode:"hidden",children:g.children};return(N&1)===0&&a.child!==x?(g=a.child,g.childLanes=0,g.pendingProps=Y,a.deletions=null):(g=Si(x,Y),g.subtreeFlags=x.subtreeFlags&14680064),B!==null?S=Si(B,S):(S=rs(S,N,d,null),S.flags|=2),S.return=a,g.return=a,g.sibling=S,a.child=g,g=S,S=a.child,N=s.child.memoizedState,N=N===null?of(d):{baseLanes:N.baseLanes|d,cachePool:null,transitions:N.transitions},S.memoizedState=N,S.childLanes=s.childLanes&~d,a.memoizedState=sf,g}return S=s.child,s=S.sibling,g=Si(S,{mode:"visible",children:g.children}),(a.mode&1)===0&&(g.lanes=d),g.return=a,g.sibling=null,s!==null&&(d=a.deletions,d===null?(a.deletions=[s],a.flags|=16):d.push(s)),a.child=g,a.memoizedState=null,g}function af(s,a){return a=vu({mode:"visible",children:a},s.mode,0,null),a.return=s,s.child=a}function su(s,a,d,g){return g!==null&&Rd(g),Ws(a,s.child,null,d),s=af(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function vE(s,a,d,g,x,S,N){if(d)return a.flags&256?(a.flags&=-257,g=ef(Error(n(422))),su(s,a,N,g)):a.memoizedState!==null?(a.child=s.child,a.flags|=128,null):(S=g.fallback,x=a.mode,g=vu({mode:"visible",children:g.children},x,0,null),S=rs(S,x,N,null),S.flags|=2,g.return=a,S.return=a,g.sibling=S,a.child=g,(a.mode&1)!==0&&Ws(a,s.child,null,N),a.child.memoizedState=of(N),a.memoizedState=sf,S);if((a.mode&1)===0)return su(s,a,N,null);if(x.data==="$!"){if(g=x.nextSibling&&x.nextSibling.dataset,g)var B=g.dgst;return g=B,S=Error(n(419)),g=ef(S,g,void 0),su(s,a,N,g)}if(B=(N&s.childLanes)!==0,Nn||B){if(g=Xt,g!==null){switch(N&-N){case 4:x=2;break;case 16:x=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:x=32;break;case 536870912:x=268435456;break;default:x=0}x=(x&(g.suspendedLanes|N))!==0?0:x,x!==0&&x!==S.retryLane&&(S.retryLane=x,Gr(s,x),yr(g,s,x,-1))}return Sf(),g=ef(Error(n(421))),su(s,a,N,g)}return x.data==="$?"?(a.flags|=128,a.child=s.child,a=PE.bind(null,s),x._reactRetry=a,null):(s=S.treeContext,Un=fi(x.nextSibling),Bn=a,Tt=!0,hr=null,s!==null&&(Xn[Zn++]=Kr,Xn[Zn++]=Yr,Xn[Zn++]=Yi,Kr=s.id,Yr=s.overflow,Yi=a),a=af(a,g.children),a.flags|=4096,a)}function jy(s,a,d){s.lanes|=a;var g=s.alternate;g!==null&&(g.lanes|=a),Ld(s.return,a,d)}function lf(s,a,d,g,x){var S=s.memoizedState;S===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:g,tail:d,tailMode:x}:(S.isBackwards=a,S.rendering=null,S.renderingStartTime=0,S.last=g,S.tail=d,S.tailMode=x)}function Ny(s,a,d){var g=a.pendingProps,x=g.revealOrder,S=g.tail;if(wn(s,a,g.children,d),g=Pt.current,(g&2)!==0)g=g&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&jy(s,d,a);else if(s.tag===19)jy(s,d,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}g&=1}if(kt(Pt,g),(a.mode&1)===0)a.memoizedState=null;else switch(x){case"forwards":for(d=a.child,x=null;d!==null;)s=d.alternate,s!==null&&Xl(s)===null&&(x=d),d=d.sibling;d=x,d===null?(x=a.child,a.child=null):(x=d.sibling,d.sibling=null),lf(a,!1,x,d,S);break;case"backwards":for(d=null,x=a.child,a.child=null;x!==null;){if(s=x.alternate,s!==null&&Xl(s)===null){a.child=x;break}s=x.sibling,x.sibling=d,d=x,x=s}lf(a,!0,d,null,S);break;case"together":lf(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function ou(s,a){(a.mode&1)===0&&s!==null&&(s.alternate=null,a.alternate=null,a.flags|=2)}function Qr(s,a,d){if(s!==null&&(a.dependencies=s.dependencies),Zi|=a.lanes,(d&a.childLanes)===0)return null;if(s!==null&&a.child!==s.child)throw Error(n(153));if(a.child!==null){for(s=a.child,d=Si(s,s.pendingProps),a.child=d,d.return=a;s.sibling!==null;)s=s.sibling,d=d.sibling=Si(s,s.pendingProps),d.return=a;d.sibling=null}return a.child}function xE(s,a,d){switch(a.tag){case 3:Ey(a),Us();break;case 5:Ug(a);break;case 1:jn(a.type)&&Ul(a);break;case 4:zd(a,a.stateNode.containerInfo);break;case 10:var g=a.type._context,x=a.memoizedProps.value;kt(Yl,g._currentValue),g._currentValue=x;break;case 13:if(g=a.memoizedState,g!==null)return g.dehydrated!==null?(kt(Pt,Pt.current&1),a.flags|=128,null):(d&a.child.childLanes)!==0?Cy(s,a,d):(kt(Pt,Pt.current&1),s=Qr(s,a,d),s!==null?s.sibling:null);kt(Pt,Pt.current&1);break;case 19:if(g=(d&a.childLanes)!==0,(s.flags&128)!==0){if(g)return Ny(s,a,d);a.flags|=128}if(x=a.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),kt(Pt,Pt.current),g)break;return null;case 22:case 23:return a.lanes=0,by(s,a,d)}return Qr(s,a,d)}var Ty,uf,Iy,Py;Ty=function(s,a){for(var d=a.child;d!==null;){if(d.tag===5||d.tag===6)s.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},uf=function(){},Iy=function(s,a,d,g){var x=s.memoizedProps;if(x!==g){s=a.stateNode,Qi(Tr.current);var S=null;switch(d){case"input":x=We(s,x),g=We(s,g),S=[];break;case"select":x=T({},x,{value:void 0}),g=T({},g,{value:void 0}),S=[];break;case"textarea":x=Ae(s,x),g=Ae(s,g),S=[];break;default:typeof x.onClick!="function"&&typeof g.onClick=="function"&&(s.onclick=Fl)}Me(d,g);var N;d=null;for(ae in x)if(!g.hasOwnProperty(ae)&&x.hasOwnProperty(ae)&&x[ae]!=null)if(ae==="style"){var B=x[ae];for(N in B)B.hasOwnProperty(N)&&(d||(d={}),d[N]="")}else ae!=="dangerouslySetInnerHTML"&&ae!=="children"&&ae!=="suppressContentEditableWarning"&&ae!=="suppressHydrationWarning"&&ae!=="autoFocus"&&(i.hasOwnProperty(ae)?S||(S=[]):(S=S||[]).push(ae,null));for(ae in g){var Y=g[ae];if(B=x!=null?x[ae]:void 0,g.hasOwnProperty(ae)&&Y!==B&&(Y!=null||B!=null))if(ae==="style")if(B){for(N in B)!B.hasOwnProperty(N)||Y&&Y.hasOwnProperty(N)||(d||(d={}),d[N]="");for(N in Y)Y.hasOwnProperty(N)&&B[N]!==Y[N]&&(d||(d={}),d[N]=Y[N])}else d||(S||(S=[]),S.push(ae,d)),d=Y;else ae==="dangerouslySetInnerHTML"?(Y=Y?Y.__html:void 0,B=B?B.__html:void 0,Y!=null&&B!==Y&&(S=S||[]).push(ae,Y)):ae==="children"?typeof Y!="string"&&typeof Y!="number"||(S=S||[]).push(ae,""+Y):ae!=="suppressContentEditableWarning"&&ae!=="suppressHydrationWarning"&&(i.hasOwnProperty(ae)?(Y!=null&&ae==="onScroll"&&_t("scroll",s),S||B===Y||(S=[])):(S=S||[]).push(ae,Y))}d&&(S=S||[]).push("style",d);var ae=S;(a.updateQueue=ae)&&(a.flags|=4)}},Py=function(s,a,d,g){d!==g&&(a.flags|=4)};function xa(s,a){if(!Tt)switch(s.tailMode){case"hidden":a=s.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?s.tail=null:d.sibling=null;break;case"collapsed":d=s.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:g.sibling=null}}function fn(s){var a=s.alternate!==null&&s.alternate.child===s.child,d=0,g=0;if(a)for(var x=s.child;x!==null;)d|=x.lanes|x.childLanes,g|=x.subtreeFlags&14680064,g|=x.flags&14680064,x.return=s,x=x.sibling;else for(x=s.child;x!==null;)d|=x.lanes|x.childLanes,g|=x.subtreeFlags,g|=x.flags,x.return=s,x=x.sibling;return s.subtreeFlags|=g,s.childLanes=d,a}function wE(s,a,d){var g=a.pendingProps;switch(Id(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fn(a),null;case 1:return jn(a.type)&&Bl(),fn(a),null;case 3:return g=a.stateNode,qs(),Ct(Cn),Ct(cn),Wd(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(s===null||s.child===null)&&(ql(a)?a.flags|=4:s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,hr!==null&&(wf(hr),hr=null))),uf(s,a),fn(a),null;case 5:Bd(a);var x=Qi(pa.current);if(d=a.type,s!==null&&a.stateNode!=null)Iy(s,a,d,g,x),s.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!g){if(a.stateNode===null)throw Error(n(166));return fn(a),null}if(s=Qi(Tr.current),ql(a)){g=a.stateNode,d=a.type;var S=a.memoizedProps;switch(g[Nr]=a,g[ua]=S,s=(a.mode&1)!==0,d){case"dialog":_t("cancel",g),_t("close",g);break;case"iframe":case"object":case"embed":_t("load",g);break;case"video":case"audio":for(x=0;x<oa.length;x++)_t(oa[x],g);break;case"source":_t("error",g);break;case"img":case"image":case"link":_t("error",g),_t("load",g);break;case"details":_t("toggle",g);break;case"input":rt(g,S),_t("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!S.multiple},_t("invalid",g);break;case"textarea":Se(g,S),_t("invalid",g)}Me(d,S),x=null;for(var N in S)if(S.hasOwnProperty(N)){var B=S[N];N==="children"?typeof B=="string"?g.textContent!==B&&(S.suppressHydrationWarning!==!0&&$l(g.textContent,B,s),x=["children",B]):typeof B=="number"&&g.textContent!==""+B&&(S.suppressHydrationWarning!==!0&&$l(g.textContent,B,s),x=["children",""+B]):i.hasOwnProperty(N)&&B!=null&&N==="onScroll"&&_t("scroll",g)}switch(d){case"input":te(g),qt(g,S,!0);break;case"textarea":te(g),Te(g);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(g.onclick=Fl)}g=x,a.updateQueue=g,g!==null&&(a.flags|=4)}else{N=x.nodeType===9?x:x.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=L(d)),s==="http://www.w3.org/1999/xhtml"?d==="script"?(s=N.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof g.is=="string"?s=N.createElement(d,{is:g.is}):(s=N.createElement(d),d==="select"&&(N=s,g.multiple?N.multiple=!0:g.size&&(N.size=g.size))):s=N.createElementNS(s,d),s[Nr]=a,s[ua]=g,Ty(s,a,!1,!1),a.stateNode=s;e:{switch(N=et(d,g),d){case"dialog":_t("cancel",s),_t("close",s),x=g;break;case"iframe":case"object":case"embed":_t("load",s),x=g;break;case"video":case"audio":for(x=0;x<oa.length;x++)_t(oa[x],s);x=g;break;case"source":_t("error",s),x=g;break;case"img":case"image":case"link":_t("error",s),_t("load",s),x=g;break;case"details":_t("toggle",s),x=g;break;case"input":rt(s,g),x=We(s,g),_t("invalid",s);break;case"option":x=g;break;case"select":s._wrapperState={wasMultiple:!!g.multiple},x=T({},g,{value:void 0}),_t("invalid",s);break;case"textarea":Se(s,g),x=Ae(s,g),_t("invalid",s);break;default:x=g}Me(d,x),B=x;for(S in B)if(B.hasOwnProperty(S)){var Y=B[S];S==="style"?he(s,Y):S==="dangerouslySetInnerHTML"?(Y=Y?Y.__html:void 0,Y!=null&&le(s,Y)):S==="children"?typeof Y=="string"?(d!=="textarea"||Y!=="")&&re(s,Y):typeof Y=="number"&&re(s,""+Y):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(i.hasOwnProperty(S)?Y!=null&&S==="onScroll"&&_t("scroll",s):Y!=null&&j(s,S,Y,N))}switch(d){case"input":te(s),qt(s,g,!1);break;case"textarea":te(s),Te(s);break;case"option":g.value!=null&&s.setAttribute("value",""+Ce(g.value));break;case"select":s.multiple=!!g.multiple,S=g.value,S!=null?pe(s,!!g.multiple,S,!1):g.defaultValue!=null&&pe(s,!!g.multiple,g.defaultValue,!0);break;default:typeof x.onClick=="function"&&(s.onclick=Fl)}switch(d){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return fn(a),null;case 6:if(s&&a.stateNode!=null)Py(s,a,s.memoizedProps,g);else{if(typeof g!="string"&&a.stateNode===null)throw Error(n(166));if(d=Qi(pa.current),Qi(Tr.current),ql(a)){if(g=a.stateNode,d=a.memoizedProps,g[Nr]=a,(S=g.nodeValue!==d)&&(s=Bn,s!==null))switch(s.tag){case 3:$l(g.nodeValue,d,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&$l(g.nodeValue,d,(s.mode&1)!==0)}S&&(a.flags|=4)}else g=(d.nodeType===9?d:d.ownerDocument).createTextNode(g),g[Nr]=a,a.stateNode=g}return fn(a),null;case 13:if(Ct(Pt),g=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(Tt&&Un!==null&&(a.mode&1)!==0&&(a.flags&128)===0)Og(),Us(),a.flags|=98560,S=!1;else if(S=ql(a),g!==null&&g.dehydrated!==null){if(s===null){if(!S)throw Error(n(318));if(S=a.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(n(317));S[Nr]=a}else Us(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;fn(a),S=!1}else hr!==null&&(wf(hr),hr=null),S=!0;if(!S)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=d,a):(g=g!==null,g!==(s!==null&&s.memoizedState!==null)&&g&&(a.child.flags|=8192,(a.mode&1)!==0&&(s===null||(Pt.current&1)!==0?Yt===0&&(Yt=3):Sf())),a.updateQueue!==null&&(a.flags|=4),fn(a),null);case 4:return qs(),uf(s,a),s===null&&aa(a.stateNode.containerInfo),fn(a),null;case 10:return Dd(a.type._context),fn(a),null;case 17:return jn(a.type)&&Bl(),fn(a),null;case 19:if(Ct(Pt),S=a.memoizedState,S===null)return fn(a),null;if(g=(a.flags&128)!==0,N=S.rendering,N===null)if(g)xa(S,!1);else{if(Yt!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(N=Xl(s),N!==null){for(a.flags|=128,xa(S,!1),g=N.updateQueue,g!==null&&(a.updateQueue=g,a.flags|=4),a.subtreeFlags=0,g=d,d=a.child;d!==null;)S=d,s=g,S.flags&=14680066,N=S.alternate,N===null?(S.childLanes=0,S.lanes=s,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=N.childLanes,S.lanes=N.lanes,S.child=N.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=N.memoizedProps,S.memoizedState=N.memoizedState,S.updateQueue=N.updateQueue,S.type=N.type,s=N.dependencies,S.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),d=d.sibling;return kt(Pt,Pt.current&1|2),a.child}s=s.sibling}S.tail!==null&&Dt()>Js&&(a.flags|=128,g=!0,xa(S,!1),a.lanes=4194304)}else{if(!g)if(s=Xl(N),s!==null){if(a.flags|=128,g=!0,d=s.updateQueue,d!==null&&(a.updateQueue=d,a.flags|=4),xa(S,!0),S.tail===null&&S.tailMode==="hidden"&&!N.alternate&&!Tt)return fn(a),null}else 2*Dt()-S.renderingStartTime>Js&&d!==1073741824&&(a.flags|=128,g=!0,xa(S,!1),a.lanes=4194304);S.isBackwards?(N.sibling=a.child,a.child=N):(d=S.last,d!==null?d.sibling=N:a.child=N,S.last=N)}return S.tail!==null?(a=S.tail,S.rendering=a,S.tail=a.sibling,S.renderingStartTime=Dt(),a.sibling=null,d=Pt.current,kt(Pt,g?d&1|2:d&1),a):(fn(a),null);case 22:case 23:return kf(),g=a.memoizedState!==null,s!==null&&s.memoizedState!==null!==g&&(a.flags|=8192),g&&(a.mode&1)!==0?(Wn&1073741824)!==0&&(fn(a),a.subtreeFlags&6&&(a.flags|=8192)):fn(a),null;case 24:return null;case 25:return null}throw Error(n(156,a.tag))}function bE(s,a){switch(Id(a),a.tag){case 1:return jn(a.type)&&Bl(),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return qs(),Ct(Cn),Ct(cn),Wd(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 5:return Bd(a),null;case 13:if(Ct(Pt),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(n(340));Us()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return Ct(Pt),null;case 4:return qs(),null;case 10:return Dd(a.type._context),null;case 22:case 23:return kf(),null;case 24:return null;default:return null}}var au=!1,hn=!1,kE=typeof WeakSet=="function"?WeakSet:Set,Le=null;function Ys(s,a){var d=s.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(g){Ot(s,a,g)}else d.current=null}function cf(s,a,d){try{d()}catch(g){Ot(s,a,g)}}var Ay=!1;function SE(s,a){if(bd=jl,s=cg(),hd(s)){if("selectionStart"in s)var d={start:s.selectionStart,end:s.selectionEnd};else e:{d=(d=s.ownerDocument)&&d.defaultView||window;var g=d.getSelection&&d.getSelection();if(g&&g.rangeCount!==0){d=g.anchorNode;var x=g.anchorOffset,S=g.focusNode;g=g.focusOffset;try{d.nodeType,S.nodeType}catch{d=null;break e}var N=0,B=-1,Y=-1,ae=0,ke=0,Ee=s,xe=null;t:for(;;){for(var De;Ee!==d||x!==0&&Ee.nodeType!==3||(B=N+x),Ee!==S||g!==0&&Ee.nodeType!==3||(Y=N+g),Ee.nodeType===3&&(N+=Ee.nodeValue.length),(De=Ee.firstChild)!==null;)xe=Ee,Ee=De;for(;;){if(Ee===s)break t;if(xe===d&&++ae===x&&(B=N),xe===S&&++ke===g&&(Y=N),(De=Ee.nextSibling)!==null)break;Ee=xe,xe=Ee.parentNode}Ee=De}d=B===-1||Y===-1?null:{start:B,end:Y}}else d=null}d=d||{start:0,end:0}}else d=null;for(kd={focusedElem:s,selectionRange:d},jl=!1,Le=a;Le!==null;)if(a=Le,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,Le=s;else for(;Le!==null;){a=Le;try{var Fe=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(Fe!==null){var Ue=Fe.memoizedProps,Lt=Fe.memoizedState,se=a.stateNode,Q=se.getSnapshotBeforeUpdate(a.elementType===a.type?Ue:pr(a.type,Ue),Lt);se.__reactInternalSnapshotBeforeUpdate=Q}break;case 3:var oe=a.stateNode.containerInfo;oe.nodeType===1?oe.textContent="":oe.nodeType===9&&oe.documentElement&&oe.removeChild(oe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(je){Ot(a,a.return,je)}if(s=a.sibling,s!==null){s.return=a.return,Le=s;break}Le=a.return}return Fe=Ay,Ay=!1,Fe}function wa(s,a,d){var g=a.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var x=g=g.next;do{if((x.tag&s)===s){var S=x.destroy;x.destroy=void 0,S!==void 0&&cf(a,d,S)}x=x.next}while(x!==g)}}function lu(s,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var d=a=a.next;do{if((d.tag&s)===s){var g=d.create;d.destroy=g()}d=d.next}while(d!==a)}}function df(s){var a=s.ref;if(a!==null){var d=s.stateNode;switch(s.tag){case 5:s=d;break;default:s=d}typeof a=="function"?a(s):a.current=s}}function Ry(s){var a=s.alternate;a!==null&&(s.alternate=null,Ry(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&(delete a[Nr],delete a[ua],delete a[Cd],delete a[sE],delete a[oE])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function Oy(s){return s.tag===5||s.tag===3||s.tag===4}function My(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Oy(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function ff(s,a,d){var g=s.tag;if(g===5||g===6)s=s.stateNode,a?d.nodeType===8?d.parentNode.insertBefore(s,a):d.insertBefore(s,a):(d.nodeType===8?(a=d.parentNode,a.insertBefore(s,d)):(a=d,a.appendChild(s)),d=d._reactRootContainer,d!=null||a.onclick!==null||(a.onclick=Fl));else if(g!==4&&(s=s.child,s!==null))for(ff(s,a,d),s=s.sibling;s!==null;)ff(s,a,d),s=s.sibling}function hf(s,a,d){var g=s.tag;if(g===5||g===6)s=s.stateNode,a?d.insertBefore(s,a):d.appendChild(s);else if(g!==4&&(s=s.child,s!==null))for(hf(s,a,d),s=s.sibling;s!==null;)hf(s,a,d),s=s.sibling}var on=null,mr=!1;function vi(s,a,d){for(d=d.child;d!==null;)Dy(s,a,d),d=d.sibling}function Dy(s,a,d){if(jr&&typeof jr.onCommitFiberUnmount=="function")try{jr.onCommitFiberUnmount(bl,d)}catch{}switch(d.tag){case 5:hn||Ys(d,a);case 6:var g=on,x=mr;on=null,vi(s,a,d),on=g,mr=x,on!==null&&(mr?(s=on,d=d.stateNode,s.nodeType===8?s.parentNode.removeChild(d):s.removeChild(d)):on.removeChild(d.stateNode));break;case 18:on!==null&&(mr?(s=on,d=d.stateNode,s.nodeType===8?_d(s.parentNode,d):s.nodeType===1&&_d(s,d),Xo(s)):_d(on,d.stateNode));break;case 4:g=on,x=mr,on=d.stateNode.containerInfo,mr=!0,vi(s,a,d),on=g,mr=x;break;case 0:case 11:case 14:case 15:if(!hn&&(g=d.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){x=g=g.next;do{var S=x,N=S.destroy;S=S.tag,N!==void 0&&((S&2)!==0||(S&4)!==0)&&cf(d,a,N),x=x.next}while(x!==g)}vi(s,a,d);break;case 1:if(!hn&&(Ys(d,a),g=d.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=d.memoizedProps,g.state=d.memoizedState,g.componentWillUnmount()}catch(B){Ot(d,a,B)}vi(s,a,d);break;case 21:vi(s,a,d);break;case 22:d.mode&1?(hn=(g=hn)||d.memoizedState!==null,vi(s,a,d),hn=g):vi(s,a,d);break;default:vi(s,a,d)}}function Ly(s){var a=s.updateQueue;if(a!==null){s.updateQueue=null;var d=s.stateNode;d===null&&(d=s.stateNode=new kE),a.forEach(function(g){var x=AE.bind(null,s,g);d.has(g)||(d.add(g),g.then(x,x))})}}function gr(s,a){var d=a.deletions;if(d!==null)for(var g=0;g<d.length;g++){var x=d[g];try{var S=s,N=a,B=N;e:for(;B!==null;){switch(B.tag){case 5:on=B.stateNode,mr=!1;break e;case 3:on=B.stateNode.containerInfo,mr=!0;break e;case 4:on=B.stateNode.containerInfo,mr=!0;break e}B=B.return}if(on===null)throw Error(n(160));Dy(S,N,x),on=null,mr=!1;var Y=x.alternate;Y!==null&&(Y.return=null),x.return=null}catch(ae){Ot(x,a,ae)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)$y(a,s),a=a.sibling}function $y(s,a){var d=s.alternate,g=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(gr(a,s),Pr(s),g&4){try{wa(3,s,s.return),lu(3,s)}catch(Ue){Ot(s,s.return,Ue)}try{wa(5,s,s.return)}catch(Ue){Ot(s,s.return,Ue)}}break;case 1:gr(a,s),Pr(s),g&512&&d!==null&&Ys(d,d.return);break;case 5:if(gr(a,s),Pr(s),g&512&&d!==null&&Ys(d,d.return),s.flags&32){var x=s.stateNode;try{re(x,"")}catch(Ue){Ot(s,s.return,Ue)}}if(g&4&&(x=s.stateNode,x!=null)){var S=s.memoizedProps,N=d!==null?d.memoizedProps:S,B=s.type,Y=s.updateQueue;if(s.updateQueue=null,Y!==null)try{B==="input"&&S.type==="radio"&&S.name!=null&&at(x,S),et(B,N);var ae=et(B,S);for(N=0;N<Y.length;N+=2){var ke=Y[N],Ee=Y[N+1];ke==="style"?he(x,Ee):ke==="dangerouslySetInnerHTML"?le(x,Ee):ke==="children"?re(x,Ee):j(x,ke,Ee,ae)}switch(B){case"input":Nt(x,S);break;case"textarea":ue(x,S);break;case"select":var xe=x._wrapperState.wasMultiple;x._wrapperState.wasMultiple=!!S.multiple;var De=S.value;De!=null?pe(x,!!S.multiple,De,!1):xe!==!!S.multiple&&(S.defaultValue!=null?pe(x,!!S.multiple,S.defaultValue,!0):pe(x,!!S.multiple,S.multiple?[]:"",!1))}x[ua]=S}catch(Ue){Ot(s,s.return,Ue)}}break;case 6:if(gr(a,s),Pr(s),g&4){if(s.stateNode===null)throw Error(n(162));x=s.stateNode,S=s.memoizedProps;try{x.nodeValue=S}catch(Ue){Ot(s,s.return,Ue)}}break;case 3:if(gr(a,s),Pr(s),g&4&&d!==null&&d.memoizedState.isDehydrated)try{Xo(a.containerInfo)}catch(Ue){Ot(s,s.return,Ue)}break;case 4:gr(a,s),Pr(s);break;case 13:gr(a,s),Pr(s),x=s.child,x.flags&8192&&(S=x.memoizedState!==null,x.stateNode.isHidden=S,!S||x.alternate!==null&&x.alternate.memoizedState!==null||(gf=Dt())),g&4&&Ly(s);break;case 22:if(ke=d!==null&&d.memoizedState!==null,s.mode&1?(hn=(ae=hn)||ke,gr(a,s),hn=ae):gr(a,s),Pr(s),g&8192){if(ae=s.memoizedState!==null,(s.stateNode.isHidden=ae)&&!ke&&(s.mode&1)!==0)for(Le=s,ke=s.child;ke!==null;){for(Ee=Le=ke;Le!==null;){switch(xe=Le,De=xe.child,xe.tag){case 0:case 11:case 14:case 15:wa(4,xe,xe.return);break;case 1:Ys(xe,xe.return);var Fe=xe.stateNode;if(typeof Fe.componentWillUnmount=="function"){g=xe,d=xe.return;try{a=g,Fe.props=a.memoizedProps,Fe.state=a.memoizedState,Fe.componentWillUnmount()}catch(Ue){Ot(g,d,Ue)}}break;case 5:Ys(xe,xe.return);break;case 22:if(xe.memoizedState!==null){By(Ee);continue}}De!==null?(De.return=xe,Le=De):By(Ee)}ke=ke.sibling}e:for(ke=null,Ee=s;;){if(Ee.tag===5){if(ke===null){ke=Ee;try{x=Ee.stateNode,ae?(S=x.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(B=Ee.stateNode,Y=Ee.memoizedProps.style,N=Y!=null&&Y.hasOwnProperty("display")?Y.display:null,B.style.display=ne("display",N))}catch(Ue){Ot(s,s.return,Ue)}}}else if(Ee.tag===6){if(ke===null)try{Ee.stateNode.nodeValue=ae?"":Ee.memoizedProps}catch(Ue){Ot(s,s.return,Ue)}}else if((Ee.tag!==22&&Ee.tag!==23||Ee.memoizedState===null||Ee===s)&&Ee.child!==null){Ee.child.return=Ee,Ee=Ee.child;continue}if(Ee===s)break e;for(;Ee.sibling===null;){if(Ee.return===null||Ee.return===s)break e;ke===Ee&&(ke=null),Ee=Ee.return}ke===Ee&&(ke=null),Ee.sibling.return=Ee.return,Ee=Ee.sibling}}break;case 19:gr(a,s),Pr(s),g&4&&Ly(s);break;case 21:break;default:gr(a,s),Pr(s)}}function Pr(s){var a=s.flags;if(a&2){try{e:{for(var d=s.return;d!==null;){if(Oy(d)){var g=d;break e}d=d.return}throw Error(n(160))}switch(g.tag){case 5:var x=g.stateNode;g.flags&32&&(re(x,""),g.flags&=-33);var S=My(s);hf(s,S,x);break;case 3:case 4:var N=g.stateNode.containerInfo,B=My(s);ff(s,B,N);break;default:throw Error(n(161))}}catch(Y){Ot(s,s.return,Y)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function EE(s,a,d){Le=s,Fy(s)}function Fy(s,a,d){for(var g=(s.mode&1)!==0;Le!==null;){var x=Le,S=x.child;if(x.tag===22&&g){var N=x.memoizedState!==null||au;if(!N){var B=x.alternate,Y=B!==null&&B.memoizedState!==null||hn;B=au;var ae=hn;if(au=N,(hn=Y)&&!ae)for(Le=x;Le!==null;)N=Le,Y=N.child,N.tag===22&&N.memoizedState!==null?Uy(x):Y!==null?(Y.return=N,Le=Y):Uy(x);for(;S!==null;)Le=S,Fy(S),S=S.sibling;Le=x,au=B,hn=ae}zy(s)}else(x.subtreeFlags&8772)!==0&&S!==null?(S.return=x,Le=S):zy(s)}}function zy(s){for(;Le!==null;){var a=Le;if((a.flags&8772)!==0){var d=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:hn||lu(5,a);break;case 1:var g=a.stateNode;if(a.flags&4&&!hn)if(d===null)g.componentDidMount();else{var x=a.elementType===a.type?d.memoizedProps:pr(a.type,d.memoizedProps);g.componentDidUpdate(x,d.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var S=a.updateQueue;S!==null&&Bg(a,S,g);break;case 3:var N=a.updateQueue;if(N!==null){if(d=null,a.child!==null)switch(a.child.tag){case 5:d=a.child.stateNode;break;case 1:d=a.child.stateNode}Bg(a,N,d)}break;case 5:var B=a.stateNode;if(d===null&&a.flags&4){d=B;var Y=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":Y.autoFocus&&d.focus();break;case"img":Y.src&&(d.src=Y.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var ae=a.alternate;if(ae!==null){var ke=ae.memoizedState;if(ke!==null){var Ee=ke.dehydrated;Ee!==null&&Xo(Ee)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}hn||a.flags&512&&df(a)}catch(xe){Ot(a,a.return,xe)}}if(a===s){Le=null;break}if(d=a.sibling,d!==null){d.return=a.return,Le=d;break}Le=a.return}}function By(s){for(;Le!==null;){var a=Le;if(a===s){Le=null;break}var d=a.sibling;if(d!==null){d.return=a.return,Le=d;break}Le=a.return}}function Uy(s){for(;Le!==null;){var a=Le;try{switch(a.tag){case 0:case 11:case 15:var d=a.return;try{lu(4,a)}catch(Y){Ot(a,d,Y)}break;case 1:var g=a.stateNode;if(typeof g.componentDidMount=="function"){var x=a.return;try{g.componentDidMount()}catch(Y){Ot(a,x,Y)}}var S=a.return;try{df(a)}catch(Y){Ot(a,S,Y)}break;case 5:var N=a.return;try{df(a)}catch(Y){Ot(a,N,Y)}}}catch(Y){Ot(a,a.return,Y)}if(a===s){Le=null;break}var B=a.sibling;if(B!==null){B.return=a.return,Le=B;break}Le=a.return}}var _E=Math.ceil,uu=I.ReactCurrentDispatcher,pf=I.ReactCurrentOwner,nr=I.ReactCurrentBatchConfig,ht=0,Xt=null,Ft=null,an=0,Wn=0,Gs=hi(0),Yt=0,ba=null,Zi=0,cu=0,mf=0,ka=null,Tn=null,gf=0,Js=1/0,Xr=null,du=!1,yf=null,xi=null,fu=!1,wi=null,hu=0,Sa=0,vf=null,pu=-1,mu=0;function bn(){return(ht&6)!==0?Dt():pu!==-1?pu:pu=Dt()}function bi(s){return(s.mode&1)===0?1:(ht&2)!==0&&an!==0?an&-an:lE.transition!==null?(mu===0&&(mu=Mm()),mu):(s=gt,s!==0||(s=window.event,s=s===void 0?16:Hm(s.type)),s)}function yr(s,a,d,g){if(50<Sa)throw Sa=0,vf=null,Error(n(185));Ko(s,d,g),((ht&2)===0||s!==Xt)&&(s===Xt&&((ht&2)===0&&(cu|=d),Yt===4&&ki(s,an)),In(s,g),d===1&&ht===0&&(a.mode&1)===0&&(Js=Dt()+500,Wl&&mi()))}function In(s,a){var d=s.callbackNode;lS(s,a);var g=El(s,s===Xt?an:0);if(g===0)d!==null&&Am(d),s.callbackNode=null,s.callbackPriority=0;else if(a=g&-g,s.callbackPriority!==a){if(d!=null&&Am(d),a===1)s.tag===0?aE(Hy.bind(null,s)):Tg(Hy.bind(null,s)),rE(function(){(ht&6)===0&&mi()}),d=null;else{switch(Dm(g)){case 1:d=Jc;break;case 4:d=Rm;break;case 16:d=wl;break;case 536870912:d=Om;break;default:d=wl}d=Xy(d,Wy.bind(null,s))}s.callbackPriority=a,s.callbackNode=d}}function Wy(s,a){if(pu=-1,mu=0,(ht&6)!==0)throw Error(n(327));var d=s.callbackNode;if(Qs()&&s.callbackNode!==d)return null;var g=El(s,s===Xt?an:0);if(g===0)return null;if((g&30)!==0||(g&s.expiredLanes)!==0||a)a=gu(s,g);else{a=g;var x=ht;ht|=2;var S=qy();(Xt!==s||an!==a)&&(Xr=null,Js=Dt()+500,ts(s,a));do try{NE();break}catch(B){Vy(s,B)}while(!0);Md(),uu.current=S,ht=x,Ft!==null?a=0:(Xt=null,an=0,a=Yt)}if(a!==0){if(a===2&&(x=Qc(s),x!==0&&(g=x,a=xf(s,x))),a===1)throw d=ba,ts(s,0),ki(s,g),In(s,Dt()),d;if(a===6)ki(s,g);else{if(x=s.current.alternate,(g&30)===0&&!CE(x)&&(a=gu(s,g),a===2&&(S=Qc(s),S!==0&&(g=S,a=xf(s,S))),a===1))throw d=ba,ts(s,0),ki(s,g),In(s,Dt()),d;switch(s.finishedWork=x,s.finishedLanes=g,a){case 0:case 1:throw Error(n(345));case 2:ns(s,Tn,Xr);break;case 3:if(ki(s,g),(g&130023424)===g&&(a=gf+500-Dt(),10<a)){if(El(s,0)!==0)break;if(x=s.suspendedLanes,(x&g)!==g){bn(),s.pingedLanes|=s.suspendedLanes&x;break}s.timeoutHandle=Ed(ns.bind(null,s,Tn,Xr),a);break}ns(s,Tn,Xr);break;case 4:if(ki(s,g),(g&4194240)===g)break;for(a=s.eventTimes,x=-1;0<g;){var N=31-dr(g);S=1<<N,N=a[N],N>x&&(x=N),g&=~S}if(g=x,g=Dt()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*_E(g/1960))-g,10<g){s.timeoutHandle=Ed(ns.bind(null,s,Tn,Xr),g);break}ns(s,Tn,Xr);break;case 5:ns(s,Tn,Xr);break;default:throw Error(n(329))}}}return In(s,Dt()),s.callbackNode===d?Wy.bind(null,s):null}function xf(s,a){var d=ka;return s.current.memoizedState.isDehydrated&&(ts(s,a).flags|=256),s=gu(s,a),s!==2&&(a=Tn,Tn=d,a!==null&&wf(a)),s}function wf(s){Tn===null?Tn=s:Tn.push.apply(Tn,s)}function CE(s){for(var a=s;;){if(a.flags&16384){var d=a.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var g=0;g<d.length;g++){var x=d[g],S=x.getSnapshot;x=x.value;try{if(!fr(S(),x))return!1}catch{return!1}}}if(d=a.child,a.subtreeFlags&16384&&d!==null)d.return=a,a=d;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ki(s,a){for(a&=~mf,a&=~cu,s.suspendedLanes|=a,s.pingedLanes&=~a,s=s.expirationTimes;0<a;){var d=31-dr(a),g=1<<d;s[d]=-1,a&=~g}}function Hy(s){if((ht&6)!==0)throw Error(n(327));Qs();var a=El(s,0);if((a&1)===0)return In(s,Dt()),null;var d=gu(s,a);if(s.tag!==0&&d===2){var g=Qc(s);g!==0&&(a=g,d=xf(s,g))}if(d===1)throw d=ba,ts(s,0),ki(s,a),In(s,Dt()),d;if(d===6)throw Error(n(345));return s.finishedWork=s.current.alternate,s.finishedLanes=a,ns(s,Tn,Xr),In(s,Dt()),null}function bf(s,a){var d=ht;ht|=1;try{return s(a)}finally{ht=d,ht===0&&(Js=Dt()+500,Wl&&mi())}}function es(s){wi!==null&&wi.tag===0&&(ht&6)===0&&Qs();var a=ht;ht|=1;var d=nr.transition,g=gt;try{if(nr.transition=null,gt=1,s)return s()}finally{gt=g,nr.transition=d,ht=a,(ht&6)===0&&mi()}}function kf(){Wn=Gs.current,Ct(Gs)}function ts(s,a){s.finishedWork=null,s.finishedLanes=0;var d=s.timeoutHandle;if(d!==-1&&(s.timeoutHandle=-1,nE(d)),Ft!==null)for(d=Ft.return;d!==null;){var g=d;switch(Id(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&Bl();break;case 3:qs(),Ct(Cn),Ct(cn),Wd();break;case 5:Bd(g);break;case 4:qs();break;case 13:Ct(Pt);break;case 19:Ct(Pt);break;case 10:Dd(g.type._context);break;case 22:case 23:kf()}d=d.return}if(Xt=s,Ft=s=Si(s.current,null),an=Wn=a,Yt=0,ba=null,mf=cu=Zi=0,Tn=ka=null,Ji!==null){for(a=0;a<Ji.length;a++)if(d=Ji[a],g=d.interleaved,g!==null){d.interleaved=null;var x=g.next,S=d.pending;if(S!==null){var N=S.next;S.next=x,g.next=N}d.pending=g}Ji=null}return s}function Vy(s,a){do{var d=Ft;try{if(Md(),Zl.current=ru,eu){for(var g=At.memoizedState;g!==null;){var x=g.queue;x!==null&&(x.pending=null),g=g.next}eu=!1}if(Xi=0,Qt=Kt=At=null,ma=!1,ga=0,pf.current=null,d===null||d.return===null){Yt=1,ba=a,Ft=null;break}e:{var S=s,N=d.return,B=d,Y=a;if(a=an,B.flags|=32768,Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var ae=Y,ke=B,Ee=ke.tag;if((ke.mode&1)===0&&(Ee===0||Ee===11||Ee===15)){var xe=ke.alternate;xe?(ke.updateQueue=xe.updateQueue,ke.memoizedState=xe.memoizedState,ke.lanes=xe.lanes):(ke.updateQueue=null,ke.memoizedState=null)}var De=gy(N);if(De!==null){De.flags&=-257,yy(De,N,B,S,a),De.mode&1&&my(S,ae,a),a=De,Y=ae;var Fe=a.updateQueue;if(Fe===null){var Ue=new Set;Ue.add(Y),a.updateQueue=Ue}else Fe.add(Y);break e}else{if((a&1)===0){my(S,ae,a),Sf();break e}Y=Error(n(426))}}else if(Tt&&B.mode&1){var Lt=gy(N);if(Lt!==null){(Lt.flags&65536)===0&&(Lt.flags|=256),yy(Lt,N,B,S,a),Rd(Ks(Y,B));break e}}S=Y=Ks(Y,B),Yt!==4&&(Yt=2),ka===null?ka=[S]:ka.push(S),S=N;do{switch(S.tag){case 3:S.flags|=65536,a&=-a,S.lanes|=a;var se=hy(S,Y,a);zg(S,se);break e;case 1:B=Y;var Q=S.type,oe=S.stateNode;if((S.flags&128)===0&&(typeof Q.getDerivedStateFromError=="function"||oe!==null&&typeof oe.componentDidCatch=="function"&&(xi===null||!xi.has(oe)))){S.flags|=65536,a&=-a,S.lanes|=a;var je=py(S,B,a);zg(S,je);break e}}S=S.return}while(S!==null)}Yy(d)}catch(He){a=He,Ft===d&&d!==null&&(Ft=d=d.return);continue}break}while(!0)}function qy(){var s=uu.current;return uu.current=ru,s===null?ru:s}function Sf(){(Yt===0||Yt===3||Yt===2)&&(Yt=4),Xt===null||(Zi&268435455)===0&&(cu&268435455)===0||ki(Xt,an)}function gu(s,a){var d=ht;ht|=2;var g=qy();(Xt!==s||an!==a)&&(Xr=null,ts(s,a));do try{jE();break}catch(x){Vy(s,x)}while(!0);if(Md(),ht=d,uu.current=g,Ft!==null)throw Error(n(261));return Xt=null,an=0,Yt}function jE(){for(;Ft!==null;)Ky(Ft)}function NE(){for(;Ft!==null&&!Z1();)Ky(Ft)}function Ky(s){var a=Qy(s.alternate,s,Wn);s.memoizedProps=s.pendingProps,a===null?Yy(s):Ft=a,pf.current=null}function Yy(s){var a=s;do{var d=a.alternate;if(s=a.return,(a.flags&32768)===0){if(d=wE(d,a,Wn),d!==null){Ft=d;return}}else{if(d=bE(d,a),d!==null){d.flags&=32767,Ft=d;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Yt=6,Ft=null;return}}if(a=a.sibling,a!==null){Ft=a;return}Ft=a=s}while(a!==null);Yt===0&&(Yt=5)}function ns(s,a,d){var g=gt,x=nr.transition;try{nr.transition=null,gt=1,TE(s,a,d,g)}finally{nr.transition=x,gt=g}return null}function TE(s,a,d,g){do Qs();while(wi!==null);if((ht&6)!==0)throw Error(n(327));d=s.finishedWork;var x=s.finishedLanes;if(d===null)return null;if(s.finishedWork=null,s.finishedLanes=0,d===s.current)throw Error(n(177));s.callbackNode=null,s.callbackPriority=0;var S=d.lanes|d.childLanes;if(uS(s,S),s===Xt&&(Ft=Xt=null,an=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||fu||(fu=!0,Xy(wl,function(){return Qs(),null})),S=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||S){S=nr.transition,nr.transition=null;var N=gt;gt=1;var B=ht;ht|=4,pf.current=null,SE(s,d),$y(d,s),GS(kd),jl=!!bd,kd=bd=null,s.current=d,EE(d),eS(),ht=B,gt=N,nr.transition=S}else s.current=d;if(fu&&(fu=!1,wi=s,hu=x),S=s.pendingLanes,S===0&&(xi=null),rS(d.stateNode),In(s,Dt()),a!==null)for(g=s.onRecoverableError,d=0;d<a.length;d++)x=a[d],g(x.value,{componentStack:x.stack,digest:x.digest});if(du)throw du=!1,s=yf,yf=null,s;return(hu&1)!==0&&s.tag!==0&&Qs(),S=s.pendingLanes,(S&1)!==0?s===vf?Sa++:(Sa=0,vf=s):Sa=0,mi(),null}function Qs(){if(wi!==null){var s=Dm(hu),a=nr.transition,d=gt;try{if(nr.transition=null,gt=16>s?16:s,wi===null)var g=!1;else{if(s=wi,wi=null,hu=0,(ht&6)!==0)throw Error(n(331));var x=ht;for(ht|=4,Le=s.current;Le!==null;){var S=Le,N=S.child;if((Le.flags&16)!==0){var B=S.deletions;if(B!==null){for(var Y=0;Y<B.length;Y++){var ae=B[Y];for(Le=ae;Le!==null;){var ke=Le;switch(ke.tag){case 0:case 11:case 15:wa(8,ke,S)}var Ee=ke.child;if(Ee!==null)Ee.return=ke,Le=Ee;else for(;Le!==null;){ke=Le;var xe=ke.sibling,De=ke.return;if(Ry(ke),ke===ae){Le=null;break}if(xe!==null){xe.return=De,Le=xe;break}Le=De}}}var Fe=S.alternate;if(Fe!==null){var Ue=Fe.child;if(Ue!==null){Fe.child=null;do{var Lt=Ue.sibling;Ue.sibling=null,Ue=Lt}while(Ue!==null)}}Le=S}}if((S.subtreeFlags&2064)!==0&&N!==null)N.return=S,Le=N;else e:for(;Le!==null;){if(S=Le,(S.flags&2048)!==0)switch(S.tag){case 0:case 11:case 15:wa(9,S,S.return)}var se=S.sibling;if(se!==null){se.return=S.return,Le=se;break e}Le=S.return}}var Q=s.current;for(Le=Q;Le!==null;){N=Le;var oe=N.child;if((N.subtreeFlags&2064)!==0&&oe!==null)oe.return=N,Le=oe;else e:for(N=Q;Le!==null;){if(B=Le,(B.flags&2048)!==0)try{switch(B.tag){case 0:case 11:case 15:lu(9,B)}}catch(He){Ot(B,B.return,He)}if(B===N){Le=null;break e}var je=B.sibling;if(je!==null){je.return=B.return,Le=je;break e}Le=B.return}}if(ht=x,mi(),jr&&typeof jr.onPostCommitFiberRoot=="function")try{jr.onPostCommitFiberRoot(bl,s)}catch{}g=!0}return g}finally{gt=d,nr.transition=a}}return!1}function Gy(s,a,d){a=Ks(d,a),a=hy(s,a,1),s=yi(s,a,1),a=bn(),s!==null&&(Ko(s,1,a),In(s,a))}function Ot(s,a,d){if(s.tag===3)Gy(s,s,d);else for(;a!==null;){if(a.tag===3){Gy(a,s,d);break}else if(a.tag===1){var g=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(xi===null||!xi.has(g))){s=Ks(d,s),s=py(a,s,1),a=yi(a,s,1),s=bn(),a!==null&&(Ko(a,1,s),In(a,s));break}}a=a.return}}function IE(s,a,d){var g=s.pingCache;g!==null&&g.delete(a),a=bn(),s.pingedLanes|=s.suspendedLanes&d,Xt===s&&(an&d)===d&&(Yt===4||Yt===3&&(an&130023424)===an&&500>Dt()-gf?ts(s,0):mf|=d),In(s,a)}function Jy(s,a){a===0&&((s.mode&1)===0?a=1:(a=Sl,Sl<<=1,(Sl&130023424)===0&&(Sl=4194304)));var d=bn();s=Gr(s,a),s!==null&&(Ko(s,a,d),In(s,d))}function PE(s){var a=s.memoizedState,d=0;a!==null&&(d=a.retryLane),Jy(s,d)}function AE(s,a){var d=0;switch(s.tag){case 13:var g=s.stateNode,x=s.memoizedState;x!==null&&(d=x.retryLane);break;case 19:g=s.stateNode;break;default:throw Error(n(314))}g!==null&&g.delete(a),Jy(s,d)}var Qy;Qy=function(s,a,d){if(s!==null)if(s.memoizedProps!==a.pendingProps||Cn.current)Nn=!0;else{if((s.lanes&d)===0&&(a.flags&128)===0)return Nn=!1,xE(s,a,d);Nn=(s.flags&131072)!==0}else Nn=!1,Tt&&(a.flags&1048576)!==0&&Ig(a,Vl,a.index);switch(a.lanes=0,a.tag){case 2:var g=a.type;ou(s,a),s=a.pendingProps;var x=Fs(a,cn.current);Vs(a,d),x=qd(null,a,g,s,x,d);var S=Kd();return a.flags|=1,typeof x=="object"&&x!==null&&typeof x.render=="function"&&x.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,jn(g)?(S=!0,Ul(a)):S=!1,a.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,Fd(a),x.updater=iu,a.stateNode=x,x._reactInternals=a,Zd(a,g,s,d),a=rf(null,a,g,!0,S,d)):(a.tag=0,Tt&&S&&Td(a),wn(null,a,x,d),a=a.child),a;case 16:g=a.elementType;e:{switch(ou(s,a),s=a.pendingProps,x=g._init,g=x(g._payload),a.type=g,x=a.tag=OE(g),s=pr(g,s),x){case 0:a=nf(null,a,g,s,d);break e;case 1:a=Sy(null,a,g,s,d);break e;case 11:a=vy(null,a,g,s,d);break e;case 14:a=xy(null,a,g,pr(g.type,s),d);break e}throw Error(n(306,g,""))}return a;case 0:return g=a.type,x=a.pendingProps,x=a.elementType===g?x:pr(g,x),nf(s,a,g,x,d);case 1:return g=a.type,x=a.pendingProps,x=a.elementType===g?x:pr(g,x),Sy(s,a,g,x,d);case 3:e:{if(Ey(a),s===null)throw Error(n(387));g=a.pendingProps,S=a.memoizedState,x=S.element,Fg(s,a),Ql(a,g,null,d);var N=a.memoizedState;if(g=N.element,S.isDehydrated)if(S={element:g,isDehydrated:!1,cache:N.cache,pendingSuspenseBoundaries:N.pendingSuspenseBoundaries,transitions:N.transitions},a.updateQueue.baseState=S,a.memoizedState=S,a.flags&256){x=Ks(Error(n(423)),a),a=_y(s,a,g,d,x);break e}else if(g!==x){x=Ks(Error(n(424)),a),a=_y(s,a,g,d,x);break e}else for(Un=fi(a.stateNode.containerInfo.firstChild),Bn=a,Tt=!0,hr=null,d=Lg(a,null,g,d),a.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Us(),g===x){a=Qr(s,a,d);break e}wn(s,a,g,d)}a=a.child}return a;case 5:return Ug(a),s===null&&Ad(a),g=a.type,x=a.pendingProps,S=s!==null?s.memoizedProps:null,N=x.children,Sd(g,x)?N=null:S!==null&&Sd(g,S)&&(a.flags|=32),ky(s,a),wn(s,a,N,d),a.child;case 6:return s===null&&Ad(a),null;case 13:return Cy(s,a,d);case 4:return zd(a,a.stateNode.containerInfo),g=a.pendingProps,s===null?a.child=Ws(a,null,g,d):wn(s,a,g,d),a.child;case 11:return g=a.type,x=a.pendingProps,x=a.elementType===g?x:pr(g,x),vy(s,a,g,x,d);case 7:return wn(s,a,a.pendingProps,d),a.child;case 8:return wn(s,a,a.pendingProps.children,d),a.child;case 12:return wn(s,a,a.pendingProps.children,d),a.child;case 10:e:{if(g=a.type._context,x=a.pendingProps,S=a.memoizedProps,N=x.value,kt(Yl,g._currentValue),g._currentValue=N,S!==null)if(fr(S.value,N)){if(S.children===x.children&&!Cn.current){a=Qr(s,a,d);break e}}else for(S=a.child,S!==null&&(S.return=a);S!==null;){var B=S.dependencies;if(B!==null){N=S.child;for(var Y=B.firstContext;Y!==null;){if(Y.context===g){if(S.tag===1){Y=Jr(-1,d&-d),Y.tag=2;var ae=S.updateQueue;if(ae!==null){ae=ae.shared;var ke=ae.pending;ke===null?Y.next=Y:(Y.next=ke.next,ke.next=Y),ae.pending=Y}}S.lanes|=d,Y=S.alternate,Y!==null&&(Y.lanes|=d),Ld(S.return,d,a),B.lanes|=d;break}Y=Y.next}}else if(S.tag===10)N=S.type===a.type?null:S.child;else if(S.tag===18){if(N=S.return,N===null)throw Error(n(341));N.lanes|=d,B=N.alternate,B!==null&&(B.lanes|=d),Ld(N,d,a),N=S.sibling}else N=S.child;if(N!==null)N.return=S;else for(N=S;N!==null;){if(N===a){N=null;break}if(S=N.sibling,S!==null){S.return=N.return,N=S;break}N=N.return}S=N}wn(s,a,x.children,d),a=a.child}return a;case 9:return x=a.type,g=a.pendingProps.children,Vs(a,d),x=er(x),g=g(x),a.flags|=1,wn(s,a,g,d),a.child;case 14:return g=a.type,x=pr(g,a.pendingProps),x=pr(g.type,x),xy(s,a,g,x,d);case 15:return wy(s,a,a.type,a.pendingProps,d);case 17:return g=a.type,x=a.pendingProps,x=a.elementType===g?x:pr(g,x),ou(s,a),a.tag=1,jn(g)?(s=!0,Ul(a)):s=!1,Vs(a,d),dy(a,g,x),Zd(a,g,x,d),rf(null,a,g,!0,s,d);case 19:return Ny(s,a,d);case 22:return by(s,a,d)}throw Error(n(156,a.tag))};function Xy(s,a){return Pm(s,a)}function RE(s,a,d,g){this.tag=s,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rr(s,a,d,g){return new RE(s,a,d,g)}function Ef(s){return s=s.prototype,!(!s||!s.isReactComponent)}function OE(s){if(typeof s=="function")return Ef(s)?1:0;if(s!=null){if(s=s.$$typeof,s===Z)return 11;if(s===V)return 14}return 2}function Si(s,a){var d=s.alternate;return d===null?(d=rr(s.tag,a,s.key,s.mode),d.elementType=s.elementType,d.type=s.type,d.stateNode=s.stateNode,d.alternate=s,s.alternate=d):(d.pendingProps=a,d.type=s.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=s.flags&14680064,d.childLanes=s.childLanes,d.lanes=s.lanes,d.child=s.child,d.memoizedProps=s.memoizedProps,d.memoizedState=s.memoizedState,d.updateQueue=s.updateQueue,a=s.dependencies,d.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},d.sibling=s.sibling,d.index=s.index,d.ref=s.ref,d}function yu(s,a,d,g,x,S){var N=2;if(g=s,typeof s=="function")Ef(s)&&(N=1);else if(typeof s=="string")N=5;else e:switch(s){case $:return rs(d.children,x,S,a);case ie:N=8,x|=8;break;case U:return s=rr(12,d,a,x|2),s.elementType=U,s.lanes=S,s;case H:return s=rr(13,d,a,x),s.elementType=H,s.lanes=S,s;case K:return s=rr(19,d,a,x),s.elementType=K,s.lanes=S,s;case W:return vu(d,x,S,a);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case R:N=10;break e;case D:N=9;break e;case Z:N=11;break e;case V:N=14;break e;case X:N=16,g=null;break e}throw Error(n(130,s==null?s:typeof s,""))}return a=rr(N,d,a,x),a.elementType=s,a.type=g,a.lanes=S,a}function rs(s,a,d,g){return s=rr(7,s,g,a),s.lanes=d,s}function vu(s,a,d,g){return s=rr(22,s,g,a),s.elementType=W,s.lanes=d,s.stateNode={isHidden:!1},s}function _f(s,a,d){return s=rr(6,s,null,a),s.lanes=d,s}function Cf(s,a,d){return a=rr(4,s.children!==null?s.children:[],s.key,a),a.lanes=d,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}function ME(s,a,d,g,x){this.tag=a,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xc(0),this.expirationTimes=Xc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xc(0),this.identifierPrefix=g,this.onRecoverableError=x,this.mutableSourceEagerHydrationData=null}function jf(s,a,d,g,x,S,N,B,Y){return s=new ME(s,a,d,B,Y),a===1?(a=1,S===!0&&(a|=8)):a=0,S=rr(3,null,null,a),s.current=S,S.stateNode=s,S.memoizedState={element:g,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fd(S),s}function DE(s,a,d){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:A,key:g==null?null:""+g,children:s,containerInfo:a,implementation:d}}function Zy(s){if(!s)return pi;s=s._reactInternals;e:{if(Vi(s)!==s||s.tag!==1)throw Error(n(170));var a=s;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(jn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(n(171))}if(s.tag===1){var d=s.type;if(jn(d))return jg(s,d,a)}return a}function ev(s,a,d,g,x,S,N,B,Y){return s=jf(d,g,!0,s,x,S,N,B,Y),s.context=Zy(null),d=s.current,g=bn(),x=bi(d),S=Jr(g,x),S.callback=a??null,yi(d,S,x),s.current.lanes=x,Ko(s,x,g),In(s,g),s}function xu(s,a,d,g){var x=a.current,S=bn(),N=bi(x);return d=Zy(d),a.context===null?a.context=d:a.pendingContext=d,a=Jr(S,N),a.payload={element:s},g=g===void 0?null:g,g!==null&&(a.callback=g),s=yi(x,a,N),s!==null&&(yr(s,x,N,S),Jl(s,x,N)),N}function wu(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function tv(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var d=s.retryLane;s.retryLane=d!==0&&d<a?d:a}}function Nf(s,a){tv(s,a),(s=s.alternate)&&tv(s,a)}function LE(){return null}var nv=typeof reportError=="function"?reportError:function(s){console.error(s)};function Tf(s){this._internalRoot=s}bu.prototype.render=Tf.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(n(409));xu(s,a,null,null)},bu.prototype.unmount=Tf.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;es(function(){xu(null,s,null,null)}),a[Vr]=null}};function bu(s){this._internalRoot=s}bu.prototype.unstable_scheduleHydration=function(s){if(s){var a=Fm();s={blockedOn:null,target:s,priority:a};for(var d=0;d<ui.length&&a!==0&&a<ui[d].priority;d++);ui.splice(d,0,s),d===0&&Um(s)}};function If(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function ku(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function rv(){}function $E(s,a,d,g,x){if(x){if(typeof g=="function"){var S=g;g=function(){var ae=wu(N);S.call(ae)}}var N=ev(a,g,s,0,null,!1,!1,"",rv);return s._reactRootContainer=N,s[Vr]=N.current,aa(s.nodeType===8?s.parentNode:s),es(),N}for(;x=s.lastChild;)s.removeChild(x);if(typeof g=="function"){var B=g;g=function(){var ae=wu(Y);B.call(ae)}}var Y=jf(s,0,!1,null,null,!1,!1,"",rv);return s._reactRootContainer=Y,s[Vr]=Y.current,aa(s.nodeType===8?s.parentNode:s),es(function(){xu(a,Y,d,g)}),Y}function Su(s,a,d,g,x){var S=d._reactRootContainer;if(S){var N=S;if(typeof x=="function"){var B=x;x=function(){var Y=wu(N);B.call(Y)}}xu(a,N,s,x)}else N=$E(d,a,s,x,g);return wu(N)}Lm=function(s){switch(s.tag){case 3:var a=s.stateNode;if(a.current.memoizedState.isDehydrated){var d=qo(a.pendingLanes);d!==0&&(Zc(a,d|1),In(a,Dt()),(ht&6)===0&&(Js=Dt()+500,mi()))}break;case 13:es(function(){var g=Gr(s,1);if(g!==null){var x=bn();yr(g,s,1,x)}}),Nf(s,1)}},ed=function(s){if(s.tag===13){var a=Gr(s,134217728);if(a!==null){var d=bn();yr(a,s,134217728,d)}Nf(s,134217728)}},$m=function(s){if(s.tag===13){var a=bi(s),d=Gr(s,a);if(d!==null){var g=bn();yr(d,s,a,g)}Nf(s,a)}},Fm=function(){return gt},zm=function(s,a){var d=gt;try{return gt=s,a()}finally{gt=d}},Ve=function(s,a,d){switch(a){case"input":if(Nt(s,d),a=d.name,d.type==="radio"&&a!=null){for(d=s;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<d.length;a++){var g=d[a];if(g!==s&&g.form===s.form){var x=zl(g);if(!x)throw Error(n(90));Ne(g),Nt(g,x)}}}break;case"textarea":ue(s,d);break;case"select":a=d.value,a!=null&&pe(s,!!d.multiple,a,!1)}},vt=bf,sn=es;var FE={usingClientEntryPoint:!1,Events:[ca,Ls,zl,st,ut,bf]},Ea={findFiberByHostInstance:qi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zE={bundleType:Ea.bundleType,version:Ea.version,rendererPackageName:Ea.rendererPackageName,rendererConfig:Ea.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Tm(s),s===null?null:s.stateNode},findFiberByHostInstance:Ea.findFiberByHostInstance||LE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Eu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Eu.isDisabled&&Eu.supportsFiber)try{bl=Eu.inject(zE),jr=Eu}catch{}}return Pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FE,Pn.createPortal=function(s,a){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!If(a))throw Error(n(200));return DE(s,a,null,d)},Pn.createRoot=function(s,a){if(!If(s))throw Error(n(299));var d=!1,g="",x=nv;return a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),a=jf(s,1,!1,null,null,d,!1,g,x),s[Vr]=a.current,aa(s.nodeType===8?s.parentNode:s),new Tf(a)},Pn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=Tm(a),s=s===null?null:s.stateNode,s},Pn.flushSync=function(s){return es(s)},Pn.hydrate=function(s,a,d){if(!ku(a))throw Error(n(200));return Su(null,s,a,!0,d)},Pn.hydrateRoot=function(s,a,d){if(!If(s))throw Error(n(405));var g=d!=null&&d.hydratedSources||null,x=!1,S="",N=nv;if(d!=null&&(d.unstable_strictMode===!0&&(x=!0),d.identifierPrefix!==void 0&&(S=d.identifierPrefix),d.onRecoverableError!==void 0&&(N=d.onRecoverableError)),a=ev(a,null,s,1,d??null,x,!1,S,N),s[Vr]=a.current,aa(s),g)for(s=0;s<g.length;s++)d=g[s],x=d._getVersion,x=x(d._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[d,x]:a.mutableSourceEagerHydrationData.push(d,x);return new bu(a)},Pn.render=function(s,a,d){if(!ku(a))throw Error(n(200));return Su(null,s,a,!1,d)},Pn.unmountComponentAtNode=function(s){if(!ku(s))throw Error(n(40));return s._reactRootContainer?(es(function(){Su(null,null,s,!1,function(){s._reactRootContainer=null,s[Vr]=null})}),!0):!1},Pn.unstable_batchedUpdates=bf,Pn.unstable_renderSubtreeIntoContainer=function(s,a,d,g){if(!ku(d))throw Error(n(200));if(s==null||s._reactInternals===void 0)throw Error(n(38));return Su(s,a,d,!1,g)},Pn.version="18.3.1-next-f1338f8080-20240426",Pn}var dv;function rw(){if(dv)return Rf.exports;dv=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Rf.exports=GE(),Rf.exports}var fv;function JE(){if(fv)return _u;fv=1;var e=rw();return _u.createRoot=e.createRoot,_u.hydrateRoot=e.hydrateRoot,_u}var QE=JE();const XE=Ro(QE);var Kn=rw();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ya(){return Ya=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ya.apply(this,arguments)}var Oi;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Oi||(Oi={}));const hv="popstate";function ZE(e){e===void 0&&(e={});function t(i,o){let{pathname:l="/",search:u="",hash:c=""}=Ss(i.location.hash.substr(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),Th("",{pathname:l,search:u,hash:c},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){let l=i.document.querySelector("base"),u="";if(l&&l.getAttribute("href")){let c=i.location.href,f=c.indexOf("#");u=f===-1?c:c.slice(0,f)}return u+"#"+(typeof o=="string"?o:Xu(o))}function r(i,o){jp(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return t_(t,n,r,e)}function Rt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function jp(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function e_(){return Math.random().toString(36).substr(2,8)}function pv(e,t){return{usr:e.state,key:e.key,idx:t}}function Th(e,t,n,r){return n===void 0&&(n=null),Ya({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Ss(t):t,{state:n,key:t&&t.key||r||e_()})}function Xu(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Ss(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function t_(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,l=i.history,u=Oi.Pop,c=null,f=h();f==null&&(f=0,l.replaceState(Ya({},l.state,{idx:f}),""));function h(){return(l.state||{idx:null}).idx}function p(){u=Oi.Pop;let E=h(),C=E==null?null:E-f;f=E,c&&c({action:u,location:k.location,delta:C})}function v(E,C){u=Oi.Push;let _=Th(k.location,E,C);n&&n(_,E),f=h()+1;let j=pv(_,f),I=k.createHref(_);try{l.pushState(j,"",I)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(I)}o&&c&&c({action:u,location:k.location,delta:1})}function y(E,C){u=Oi.Replace;let _=Th(k.location,E,C);n&&n(_,E),f=h();let j=pv(_,f),I=k.createHref(_);l.replaceState(j,"",I),o&&c&&c({action:u,location:k.location,delta:0})}function b(E){let C=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof E=="string"?E:Xu(E);return _=_.replace(/ $/,"%20"),Rt(C,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,C)}let k={get action(){return u},get location(){return e(i,l)},listen(E){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(hv,p),c=E,()=>{i.removeEventListener(hv,p),c=null}},createHref(E){return t(i,E)},createURL:b,encodeLocation(E){let C=b(E);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:v,replace:y,go(E){return l.go(E)}};return k}var mv;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(mv||(mv={}));function n_(e,t,n){return n===void 0&&(n="/"),r_(e,t,n)}function r_(e,t,n,r){let i=typeof t=="string"?Ss(t):t,o=Co(i.pathname||"/",n);if(o==null)return null;let l=iw(e);i_(l);let u=null;for(let c=0;u==null&&c<l.length;++c){let f=m_(o);u=h_(l[c],f)}return u}function iw(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,l,u)=>{let c={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};c.relativePath.startsWith("/")&&(Rt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let f=Li([r,c.relativePath]),h=n.concat(c);o.children&&o.children.length>0&&(Rt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),iw(o.children,t,h,f)),!(o.path==null&&!o.index)&&t.push({path:f,score:d_(f,o.index),routesMeta:h})};return e.forEach((o,l)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))i(o,l);else for(let c of sw(o.path))i(o,l,c)}),t}function sw(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let l=sw(r.join("/")),u=[];return u.push(...l.map(c=>c===""?o:[o,c].join("/"))),i&&u.push(...l),u.map(c=>e.startsWith("/")&&c===""?"/":c)}function i_(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:f_(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const s_=/^:[\w-]+$/,o_=3,a_=2,l_=1,u_=10,c_=-2,gv=e=>e==="*";function d_(e,t){let n=e.split("/"),r=n.length;return n.some(gv)&&(r+=c_),t&&(r+=a_),n.filter(i=>!gv(i)).reduce((i,o)=>i+(s_.test(o)?o_:o===""?l_:u_),r)}function f_(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function h_(e,t,n){let{routesMeta:r}=e,i={},o="/",l=[];for(let u=0;u<r.length;++u){let c=r[u],f=u===r.length-1,h=o==="/"?t:t.slice(o.length)||"/",p=Ih({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},h),v=c.route;if(!p)return null;Object.assign(i,p.params),l.push({params:i,pathname:Li([o,p.pathname]),pathnameBase:x_(Li([o,p.pathnameBase])),route:v}),p.pathnameBase!=="/"&&(o=Li([o,p.pathnameBase]))}return l}function Ih(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=p_(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],l=o.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((f,h,p)=>{let{paramName:v,isOptional:y}=h;if(v==="*"){let k=u[p]||"";l=o.slice(0,o.length-k.length).replace(/(.)\/+$/,"$1")}const b=u[p];return y&&!b?f[v]=void 0:f[v]=(b||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:e}}function p_(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),jp(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,c)=>(r.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function m_(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return jp(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Co(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function g_(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Ss(e):e;return{pathname:n?n.startsWith("/")?n:y_(n,t):t,search:w_(r),hash:b_(i)}}function y_(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Df(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function v_(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Np(e,t){let n=v_(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Tp(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=Ss(e):(i=Ya({},e),Rt(!i.pathname||!i.pathname.includes("?"),Df("?","pathname","search",i)),Rt(!i.pathname||!i.pathname.includes("#"),Df("#","pathname","hash",i)),Rt(!i.search||!i.search.includes("#"),Df("#","search","hash",i)));let o=e===""||i.pathname==="",l=o?"/":i.pathname,u;if(l==null)u=n;else{let p=t.length-1;if(!r&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),p-=1;i.pathname=v.join("/")}u=p>=0?t[p]:"/"}let c=g_(i,u),f=l&&l!=="/"&&l.endsWith("/"),h=(o||l===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(f||h)&&(c.pathname+="/"),c}const Li=e=>e.join("/").replace(/\/\/+/g,"/"),x_=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),w_=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,b_=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function k_(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const ow=["post","put","patch","delete"];new Set(ow);const S_=["get",...ow];new Set(S_);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ga(){return Ga=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ga.apply(this,arguments)}const kc=w.createContext(null),aw=w.createContext(null),ni=w.createContext(null),Sc=w.createContext(null),ri=w.createContext({outlet:null,matches:[],isDataRoute:!1}),lw=w.createContext(null);function E_(e,t){let{relative:n}=t===void 0?{}:t;Oo()||Rt(!1);let{basename:r,navigator:i}=w.useContext(ni),{hash:o,pathname:l,search:u}=Ec(e,{relative:n}),c=l;return r!=="/"&&(c=l==="/"?r:Li([r,l])),i.createHref({pathname:c,search:u,hash:o})}function Oo(){return w.useContext(Sc)!=null}function ii(){return Oo()||Rt(!1),w.useContext(Sc).location}function uw(e){w.useContext(ni).static||w.useLayoutEffect(e)}function Ip(){let{isDataRoute:e}=w.useContext(ri);return e?F_():__()}function __(){Oo()||Rt(!1);let e=w.useContext(kc),{basename:t,future:n,navigator:r}=w.useContext(ni),{matches:i}=w.useContext(ri),{pathname:o}=ii(),l=JSON.stringify(Np(i,n.v7_relativeSplatPath)),u=w.useRef(!1);return uw(()=>{u.current=!0}),w.useCallback(function(f,h){if(h===void 0&&(h={}),!u.current)return;if(typeof f=="number"){r.go(f);return}let p=Tp(f,JSON.parse(l),o,h.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:Li([t,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[t,r,l,o,e])}const C_=w.createContext(null);function j_(e){let t=w.useContext(ri).outlet;return t&&w.createElement(C_.Provider,{value:e},t)}function Ec(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=w.useContext(ni),{matches:i}=w.useContext(ri),{pathname:o}=ii(),l=JSON.stringify(Np(i,r.v7_relativeSplatPath));return w.useMemo(()=>Tp(e,JSON.parse(l),o,n==="path"),[e,l,o,n])}function N_(e,t){return T_(e,t)}function T_(e,t,n,r){Oo()||Rt(!1);let{navigator:i}=w.useContext(ni),{matches:o}=w.useContext(ri),l=o[o.length-1],u=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let f=ii(),h;if(t){var p;let E=typeof t=="string"?Ss(t):t;c==="/"||(p=E.pathname)!=null&&p.startsWith(c)||Rt(!1),h=E}else h=f;let v=h.pathname||"/",y=v;if(c!=="/"){let E=c.replace(/^\//,"").split("/");y="/"+v.replace(/^\//,"").split("/").slice(E.length).join("/")}let b=n_(e,{pathname:y}),k=O_(b&&b.map(E=>Object.assign({},E,{params:Object.assign({},u,E.params),pathname:Li([c,i.encodeLocation?i.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?c:Li([c,i.encodeLocation?i.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),o,n,r);return t&&k?w.createElement(Sc.Provider,{value:{location:Ga({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Oi.Pop}},k):k}function I_(){let e=$_(),t=k_(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},t),n?w.createElement("pre",{style:i},n):null,null)}const P_=w.createElement(I_,null);class A_ extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?w.createElement(ri.Provider,{value:this.props.routeContext},w.createElement(lw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function R_(e){let{routeContext:t,match:n,children:r}=e,i=w.useContext(kc);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),w.createElement(ri.Provider,{value:t},r)}function O_(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let l=e,u=(i=n)==null?void 0:i.errors;if(u!=null){let h=l.findIndex(p=>p.route.id&&(u==null?void 0:u[p.route.id])!==void 0);h>=0||Rt(!1),l=l.slice(0,Math.min(l.length,h+1))}let c=!1,f=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<l.length;h++){let p=l[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(f=h),p.route.id){let{loaderData:v,errors:y}=n,b=p.route.loader&&v[p.route.id]===void 0&&(!y||y[p.route.id]===void 0);if(p.route.lazy||b){c=!0,f>=0?l=l.slice(0,f+1):l=[l[0]];break}}}return l.reduceRight((h,p,v)=>{let y,b=!1,k=null,E=null;n&&(y=u&&p.route.id?u[p.route.id]:void 0,k=p.route.errorElement||P_,c&&(f<0&&v===0?(z_("route-fallback"),b=!0,E=null):f===v&&(b=!0,E=p.route.hydrateFallbackElement||null)));let C=t.concat(l.slice(0,v+1)),_=()=>{let j;return y?j=k:b?j=E:p.route.Component?j=w.createElement(p.route.Component,null):p.route.element?j=p.route.element:j=h,w.createElement(R_,{match:p,routeContext:{outlet:h,matches:C,isDataRoute:n!=null},children:j})};return n&&(p.route.ErrorBoundary||p.route.errorElement||v===0)?w.createElement(A_,{location:n.location,revalidation:n.revalidation,component:k,error:y,children:_(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):_()},null)}var cw=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(cw||{}),dw=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(dw||{});function M_(e){let t=w.useContext(kc);return t||Rt(!1),t}function D_(e){let t=w.useContext(aw);return t||Rt(!1),t}function L_(e){let t=w.useContext(ri);return t||Rt(!1),t}function fw(e){let t=L_(),n=t.matches[t.matches.length-1];return n.route.id||Rt(!1),n.route.id}function $_(){var e;let t=w.useContext(lw),n=D_(),r=fw();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function F_(){let{router:e}=M_(cw.UseNavigateStable),t=fw(dw.UseNavigateStable),n=w.useRef(!1);return uw(()=>{n.current=!0}),w.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,Ga({fromRouteId:t},o)))},[e,t])}const yv={};function z_(e,t,n){yv[e]||(yv[e]=!0)}function B_(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Ja(e){let{to:t,replace:n,state:r,relative:i}=e;Oo()||Rt(!1);let{future:o,static:l}=w.useContext(ni),{matches:u}=w.useContext(ri),{pathname:c}=ii(),f=Ip(),h=Tp(t,Np(u,o.v7_relativeSplatPath),c,i==="path"),p=JSON.stringify(h);return w.useEffect(()=>f(JSON.parse(p),{replace:n,state:r,relative:i}),[f,p,i,n,r]),null}function hw(e){return j_(e.context)}function pn(e){Rt(!1)}function U_(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Oi.Pop,navigator:o,static:l=!1,future:u}=e;Oo()&&Rt(!1);let c=t.replace(/^\/*/,"/"),f=w.useMemo(()=>({basename:c,navigator:o,static:l,future:Ga({v7_relativeSplatPath:!1},u)}),[c,u,o,l]);typeof r=="string"&&(r=Ss(r));let{pathname:h="/",search:p="",hash:v="",state:y=null,key:b="default"}=r,k=w.useMemo(()=>{let E=Co(h,c);return E==null?null:{location:{pathname:E,search:p,hash:v,state:y,key:b},navigationType:i}},[c,h,p,v,y,b,i]);return k==null?null:w.createElement(ni.Provider,{value:f},w.createElement(Sc.Provider,{children:n,value:k}))}function W_(e){let{children:t,location:n}=e;return N_(Ph(t),n)}new Promise(()=>{});function Ph(e,t){t===void 0&&(t=[]);let n=[];return w.Children.forEach(e,(r,i)=>{if(!w.isValidElement(r))return;let o=[...t,i];if(r.type===w.Fragment){n.push.apply(n,Ph(r.props.children,o));return}r.type!==pn&&Rt(!1),!r.props.index||!r.props.children||Rt(!1);let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Ph(r.props.children,o)),n.push(l)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zu(){return Zu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zu.apply(this,arguments)}function pw(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function H_(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function V_(e,t){return e.button===0&&(!t||t==="_self")&&!H_(e)}function Ah(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function q_(e,t){let n=Ah(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(o=>{n.append(i,o)})}),n}const K_=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Y_=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],G_="6";try{window.__reactRouterVersion=G_}catch{}const J_=w.createContext({isTransitioning:!1}),Q_="startTransition",vv=Qu[Q_];function X_(e){let{basename:t,children:n,future:r,window:i}=e,o=w.useRef();o.current==null&&(o.current=ZE({window:i,v5Compat:!0}));let l=o.current,[u,c]=w.useState({action:l.action,location:l.location}),{v7_startTransition:f}=r||{},h=w.useCallback(p=>{f&&vv?vv(()=>c(p)):c(p)},[c,f]);return w.useLayoutEffect(()=>l.listen(h),[l,h]),w.useEffect(()=>B_(r),[r]),w.createElement(U_,{basename:t,children:n,location:u.location,navigationType:u.action,navigator:l,future:r})}const Z_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",eC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$i=w.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:o,replace:l,state:u,target:c,to:f,preventScrollReset:h,viewTransition:p}=t,v=pw(t,K_),{basename:y}=w.useContext(ni),b,k=!1;if(typeof f=="string"&&eC.test(f)&&(b=f,Z_))try{let j=new URL(window.location.href),I=f.startsWith("//")?new URL(j.protocol+f):new URL(f),O=Co(I.pathname,y);I.origin===j.origin&&O!=null?f=O+I.search+I.hash:k=!0}catch{}let E=E_(f,{relative:i}),C=nC(f,{replace:l,state:u,target:c,preventScrollReset:h,relative:i,viewTransition:p});function _(j){r&&r(j),j.defaultPrevented||C(j)}return w.createElement("a",Zu({},v,{href:b||E,onClick:k||o?r:_,ref:n,target:c}))}),xv=w.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:i=!1,className:o="",end:l=!1,style:u,to:c,viewTransition:f,children:h}=t,p=pw(t,Y_),v=Ec(c,{relative:p.relative}),y=ii(),b=w.useContext(aw),{navigator:k,basename:E}=w.useContext(ni),C=b!=null&&rC(v)&&f===!0,_=k.encodeLocation?k.encodeLocation(v).pathname:v.pathname,j=y.pathname,I=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;i||(j=j.toLowerCase(),I=I?I.toLowerCase():null,_=_.toLowerCase()),I&&E&&(I=Co(I,E)||I);const O=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let A=j===_||!l&&j.startsWith(_)&&j.charAt(O)==="/",$=I!=null&&(I===_||!l&&I.startsWith(_)&&I.charAt(_.length)==="/"),ie={isActive:A,isPending:$,isTransitioning:C},U=A?r:void 0,R;typeof o=="function"?R=o(ie):R=[o,A?"active":null,$?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let D=typeof u=="function"?u(ie):u;return w.createElement($i,Zu({},p,{"aria-current":U,className:R,ref:n,style:D,to:c,viewTransition:f}),typeof h=="function"?h(ie):h)});var Rh;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Rh||(Rh={}));var wv;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(wv||(wv={}));function tC(e){let t=w.useContext(kc);return t||Rt(!1),t}function nC(e,t){let{target:n,replace:r,state:i,preventScrollReset:o,relative:l,viewTransition:u}=t===void 0?{}:t,c=Ip(),f=ii(),h=Ec(e,{relative:l});return w.useCallback(p=>{if(V_(p,n)){p.preventDefault();let v=r!==void 0?r:Xu(f)===Xu(h);c(e,{replace:v,state:i,preventScrollReset:o,relative:l,viewTransition:u})}},[f,c,h,r,i,n,e,o,l,u])}function Mo(e){let t=w.useRef(Ah(e)),n=w.useRef(!1),r=ii(),i=w.useMemo(()=>q_(r.search,n.current?null:t.current),[r.search]),o=Ip(),l=w.useCallback((u,c)=>{const f=Ah(typeof u=="function"?u(i):u);n.current=!0,o("?"+f,c)},[o,i]);return[i,l]}function rC(e,t){t===void 0&&(t={});let n=w.useContext(J_);n==null&&Rt(!1);let{basename:r}=tC(Rh.useViewTransitionState),i=Ec(e,{relative:t.relative});if(!n.isTransitioning)return!1;let o=Co(n.currentLocation.pathname,r)||n.currentLocation.pathname,l=Co(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Ih(i.pathname,l)!=null||Ih(i.pathname,o)!=null}const mw=typeof document<"u"?Oe.useLayoutEffect:()=>{};var Lf;const iC=(Lf=Oe.useInsertionEffect)!==null&&Lf!==void 0?Lf:mw;function sC(e){const t=w.useRef(null);return iC(()=>{t.current=e},[e]),w.useCallback((...n)=>{const r=t.current;return r==null?void 0:r(...n)},[])}const Ui=e=>{var t;return(t=e==null?void 0:e.ownerDocument)!==null&&t!==void 0?t:document},gs=e=>e&&"window"in e&&e.window===e?e:Ui(e).defaultView||window;function oC(e){return e!==null&&typeof e=="object"&&"nodeType"in e&&typeof e.nodeType=="number"}function aC(e){return oC(e)&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in e}let lC=!1;function Pp(){return lC}function gw(e,t){if(!Pp())return t&&e?e.contains(t):!1;if(!e||!t)return!1;let n=t;for(;n!==null;){if(n===e)return!0;n.tagName==="SLOT"&&n.assignedSlot?n=n.assignedSlot.parentNode:aC(n)?n=n.host:n=n.parentNode}return!1}const Oh=(e=document)=>{var t;if(!Pp())return e.activeElement;let n=e.activeElement;for(;n&&"shadowRoot"in n&&(!((t=n.shadowRoot)===null||t===void 0)&&t.activeElement);)n=n.shadowRoot.activeElement;return n};function yw(e){return Pp()&&e.target.shadowRoot&&e.composedPath?e.composedPath()[0]:e.target}function vw(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=vw(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function ze(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=vw(e))&&(r&&(r+=" "),r+=t);return r}function uC(e){var t;if(typeof window>"u"||window.navigator==null)return!1;let n=(t=window.navigator.userAgentData)===null||t===void 0?void 0:t.brands;return Array.isArray(n)&&n.some(r=>e.test(r.brand))||e.test(window.navigator.userAgent)}function cC(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function xw(e){let t=null;return()=>(t==null&&(t=e()),t)}const dC=xw(function(){return cC(/^Mac/i)}),fC=xw(function(){return uC(/Android/i)});function ww(){let e=w.useRef(new Map),t=w.useCallback((i,o,l,u)=>{let c=u!=null&&u.once?(...f)=>{e.current.delete(l),l(...f)}:l;e.current.set(l,{type:o,eventTarget:i,fn:c,options:u}),i.addEventListener(o,c,u)},[]),n=w.useCallback((i,o,l,u)=>{var c;let f=((c=e.current.get(l))===null||c===void 0?void 0:c.fn)||l;i.removeEventListener(o,f,u),e.current.delete(l)},[]),r=w.useCallback(()=>{e.current.forEach((i,o)=>{n(i.eventTarget,i.type,o,i.options)})},[n]);return w.useEffect(()=>r,[r]),{addGlobalListener:t,removeGlobalListener:n,removeAllGlobalListeners:r}}function hC(e){return e.pointerType===""&&e.isTrusted?!0:fC()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function bw(e){let t=e;return t.nativeEvent=e,t.isDefaultPrevented=()=>t.defaultPrevented,t.isPropagationStopped=()=>t.cancelBubble,t.persist=()=>{},t}function pC(e,t){Object.defineProperty(e,"target",{value:t}),Object.defineProperty(e,"currentTarget",{value:t})}function kw(e){let t=w.useRef({isFocused:!1,observer:null});mw(()=>{const r=t.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]);let n=sC(r=>{e==null||e(r)});return w.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){t.current.isFocused=!0;let i=r.target,o=l=>{if(t.current.isFocused=!1,i.disabled){let u=bw(l);n(u)}t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)};i.addEventListener("focusout",o,{once:!0}),t.current.observer=new MutationObserver(()=>{if(t.current.isFocused&&i.disabled){var l;(l=t.current.observer)===null||l===void 0||l.disconnect();let u=i===document.activeElement?null:document.activeElement;i.dispatchEvent(new FocusEvent("blur",{relatedTarget:u})),i.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:u}))}}),t.current.observer.observe(i,{attributes:!0,attributeFilter:["disabled"]})}},[n])}let mC=!1,al=null,Mh=new Set,Ma=new Map,xs=!1,Dh=!1;const gC={Tab:!0,Escape:!0};function Ap(e,t){for(let n of Mh)n(e,t)}function yC(e){return!(e.metaKey||!dC()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function ec(e){xs=!0,yC(e)&&(al="keyboard",Ap("keyboard",e))}function xo(e){al="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(xs=!0,Ap("pointer",e))}function Sw(e){hC(e)&&(xs=!0,al="virtual")}function Ew(e){e.target===window||e.target===document||mC||!e.isTrusted||(!xs&&!Dh&&(al="virtual",Ap("virtual",e)),xs=!1,Dh=!1)}function _w(){xs=!1,Dh=!0}function Lh(e){if(typeof window>"u"||typeof document>"u"||Ma.get(gs(e)))return;const t=gs(e),n=Ui(e);let r=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){xs=!0,r.apply(this,arguments)},n.addEventListener("keydown",ec,!0),n.addEventListener("keyup",ec,!0),n.addEventListener("click",Sw,!0),t.addEventListener("focus",Ew,!0),t.addEventListener("blur",_w,!1),typeof PointerEvent<"u"&&(n.addEventListener("pointerdown",xo,!0),n.addEventListener("pointermove",xo,!0),n.addEventListener("pointerup",xo,!0)),t.addEventListener("beforeunload",()=>{Cw(e)},{once:!0}),Ma.set(t,{focus:r})}const Cw=(e,t)=>{const n=gs(e),r=Ui(e);t&&r.removeEventListener("DOMContentLoaded",t),Ma.has(n)&&(n.HTMLElement.prototype.focus=Ma.get(n).focus,r.removeEventListener("keydown",ec,!0),r.removeEventListener("keyup",ec,!0),r.removeEventListener("click",Sw,!0),n.removeEventListener("focus",Ew,!0),n.removeEventListener("blur",_w,!1),typeof PointerEvent<"u"&&(r.removeEventListener("pointerdown",xo,!0),r.removeEventListener("pointermove",xo,!0),r.removeEventListener("pointerup",xo,!0)),Ma.delete(n))};function vC(e){const t=Ui(e);let n;return t.readyState!=="loading"?Lh(e):(n=()=>{Lh(e)},t.addEventListener("DOMContentLoaded",n)),()=>Cw(e,n)}typeof document<"u"&&vC();function jw(){return al!=="pointer"}const xC=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function wC(e,t,n){let r=Ui(n==null?void 0:n.target);const i=typeof window<"u"?gs(n==null?void 0:n.target).HTMLInputElement:HTMLInputElement,o=typeof window<"u"?gs(n==null?void 0:n.target).HTMLTextAreaElement:HTMLTextAreaElement,l=typeof window<"u"?gs(n==null?void 0:n.target).HTMLElement:HTMLElement,u=typeof window<"u"?gs(n==null?void 0:n.target).KeyboardEvent:KeyboardEvent;return e=e||r.activeElement instanceof i&&!xC.has(r.activeElement.type)||r.activeElement instanceof o||r.activeElement instanceof l&&r.activeElement.isContentEditable,!(e&&t==="keyboard"&&n instanceof u&&!gC[n.key])}function bC(e,t,n){Lh(),w.useEffect(()=>{let r=(i,o)=>{wC(!!(n!=null&&n.isTextInput),i,o)&&e(jw())};return Mh.add(r),()=>{Mh.delete(r)}},t)}function kC(e){let{isDisabled:t,onFocus:n,onBlur:r,onFocusChange:i}=e;const o=w.useCallback(c=>{if(c.target===c.currentTarget)return r&&r(c),i&&i(!1),!0},[r,i]),l=kw(o),u=w.useCallback(c=>{const f=Ui(c.target),h=f?Oh(f):Oh();c.target===c.currentTarget&&h===yw(c.nativeEvent)&&(n&&n(c),i&&i(!0),l(c))},[i,n,l]);return{focusProps:{onFocus:!t&&(n||i||r)?u:void 0,onBlur:!t&&(r||i)?o:void 0}}}function SC(e){let{isDisabled:t,onBlurWithin:n,onFocusWithin:r,onFocusWithinChange:i}=e,o=w.useRef({isFocusWithin:!1}),{addGlobalListener:l,removeAllGlobalListeners:u}=ww(),c=w.useCallback(p=>{p.currentTarget.contains(p.target)&&o.current.isFocusWithin&&!p.currentTarget.contains(p.relatedTarget)&&(o.current.isFocusWithin=!1,u(),n&&n(p),i&&i(!1))},[n,i,o,u]),f=kw(c),h=w.useCallback(p=>{if(!p.currentTarget.contains(p.target))return;const v=Ui(p.target),y=Oh(v);if(!o.current.isFocusWithin&&y===yw(p.nativeEvent)){r&&r(p),i&&i(!0),o.current.isFocusWithin=!0,f(p);let b=p.currentTarget;l(v,"focus",k=>{if(o.current.isFocusWithin&&!gw(b,k.target)){let E=new v.defaultView.FocusEvent("blur",{relatedTarget:k.target});pC(E,b);let C=bw(E);c(C)}},{capture:!0})}},[r,i,f,l,c]);return t?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:h,onBlur:c}}}let $h=!1,Cu=0;function EC(){$h=!0,setTimeout(()=>{$h=!1},50)}function bv(e){e.pointerType==="touch"&&EC()}function _C(){if(!(typeof document>"u"))return Cu===0&&typeof PointerEvent<"u"&&document.addEventListener("pointerup",bv),Cu++,()=>{Cu--,!(Cu>0)&&typeof PointerEvent<"u"&&document.removeEventListener("pointerup",bv)}}function CC(e){let{onHoverStart:t,onHoverChange:n,onHoverEnd:r,isDisabled:i}=e,[o,l]=w.useState(!1),u=w.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;w.useEffect(_C,[]);let{addGlobalListener:c,removeAllGlobalListeners:f}=ww(),{hoverProps:h,triggerHoverEnd:p}=w.useMemo(()=>{let v=(k,E)=>{if(u.pointerType=E,i||E==="touch"||u.isHovered||!k.currentTarget.contains(k.target))return;u.isHovered=!0;let C=k.currentTarget;u.target=C,c(Ui(k.target),"pointerover",_=>{u.isHovered&&u.target&&!gw(u.target,_.target)&&y(_,_.pointerType)},{capture:!0}),t&&t({type:"hoverstart",target:C,pointerType:E}),n&&n(!0),l(!0)},y=(k,E)=>{let C=u.target;u.pointerType="",u.target=null,!(E==="touch"||!u.isHovered||!C)&&(u.isHovered=!1,f(),r&&r({type:"hoverend",target:C,pointerType:E}),n&&n(!1),l(!1))},b={};return typeof PointerEvent<"u"&&(b.onPointerEnter=k=>{$h&&k.pointerType==="mouse"||v(k,k.pointerType)},b.onPointerLeave=k=>{!i&&k.currentTarget.contains(k.target)&&y(k,k.pointerType)}),{hoverProps:b,triggerHoverEnd:y}},[t,n,r,i,u,c,f]);return w.useEffect(()=>{i&&p({currentTarget:u.target},u.pointerType)},[i]),{hoverProps:h,isHovered:o}}function jC(e={}){let{autoFocus:t=!1,isTextInput:n,within:r}=e,i=w.useRef({isFocused:!1,isFocusVisible:t||jw()}),[o,l]=w.useState(!1),[u,c]=w.useState(()=>i.current.isFocused&&i.current.isFocusVisible),f=w.useCallback(()=>c(i.current.isFocused&&i.current.isFocusVisible),[]),h=w.useCallback(y=>{i.current.isFocused=y,l(y),f()},[f]);bC(y=>{i.current.isFocusVisible=y,f()},[],{isTextInput:n});let{focusProps:p}=kC({isDisabled:r,onFocusChange:h}),{focusWithinProps:v}=SC({isDisabled:!r,onFocusWithinChange:h});return{isFocused:o,isFocusVisible:u,focusProps:r?v:p}}var NC=Object.defineProperty,TC=(e,t,n)=>t in e?NC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$f=(e,t,n)=>(TC(e,typeof t!="symbol"?t+"":t,n),n);let IC=class{constructor(){$f(this,"current",this.detect()),$f(this,"handoffState","pending"),$f(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Dr=new IC;function Es(e){var t;return Dr.isServer?null:e==null?document:(t=e==null?void 0:e.ownerDocument)!=null?t:document}function tc(e){var t,n;return Dr.isServer?null:e==null?document:(n=(t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))!=null?n:document}function Rp(e){var t,n;return(n=(t=tc(e))==null?void 0:t.activeElement)!=null?n:null}function Nw(e){return Rp(e)===e}function _c(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Mn(){let e=[],t={addEventListener(n,r,i,o){return n.addEventListener(r,i,o),t.add(()=>n.removeEventListener(r,i,o))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return _c(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},style(n,r,i){let o=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:i}),this.add(()=>{Object.assign(n.style,{[r]:o})})},group(n){let r=Mn();return n(r),this.add(()=>r.dispose())},add(n){return e.includes(n)||e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let i of e.splice(r,1))i()}},dispose(){for(let n of e.splice(0))n()}};return t}function _s(){let[e]=w.useState(Mn);return w.useEffect(()=>()=>e.dispose(),[e]),e}let jt=(e,t)=>{Dr.isServer?w.useEffect(e,t):w.useLayoutEffect(e,t)};function Cs(e){let t=w.useRef(e);return jt(()=>{t.current=e},[e]),t}let Ze=function(e){let t=Cs(e);return Oe.useCallback((...n)=>t.current(...n),[t])};function PC(e){let t=e.width/2,n=e.height/2;return{top:e.clientY-n,right:e.clientX+t,bottom:e.clientY+n,left:e.clientX-t}}function AC(e,t){return!(!e||!t||e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom)}function RC({disabled:e=!1}={}){let t=w.useRef(null),[n,r]=w.useState(!1),i=_s(),o=Ze(()=>{t.current=null,r(!1),i.dispose()}),l=Ze(u=>{if(i.dispose(),t.current===null){t.current=u.currentTarget,r(!0);{let c=Es(u.currentTarget);i.addEventListener(c,"pointerup",o,!1),i.addEventListener(c,"pointermove",f=>{if(t.current){let h=PC(f);r(AC(h,t.current.getBoundingClientRect()))}},!1),i.addEventListener(c,"pointercancel",o,!1)}}});return{pressed:n,pressProps:e?{}:{onPointerDown:l,onPointerUp:o,onClick:o}}}function Br(e){return w.useMemo(()=>e,Object.values(e))}let OC=w.createContext(void 0);function Tw(){return w.useContext(OC)}function Fh(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function Sr(e,t,...n){if(e in t){let i=t[e];return typeof i=="function"?i(...n):i}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(i=>`"${i}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Sr),r}var jo=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(jo||{}),Mi=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Mi||{});function Vt(){let e=DC();return w.useCallback(t=>MC({mergeRefs:e,...t}),[e])}function MC({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:i,visible:o=!0,name:l,mergeRefs:u}){u=u??LC;let c=Iw(t,e);if(o)return ju(c,n,r,l,u);let f=i??0;if(f&2){let{static:h=!1,...p}=c;if(h)return ju(p,n,r,l,u)}if(f&1){let{unmount:h=!0,...p}=c;return Sr(h?0:1,{0(){return null},1(){return ju({...p,hidden:!0,style:{display:"none"}},n,r,l,u)}})}return ju(c,n,r,l,u)}function ju(e,t={},n,r,i){let{as:o=n,children:l,refName:u="ref",...c}=Ff(e,["unmount","static"]),f=e.ref!==void 0?{[u]:e.ref}:{},h=typeof l=="function"?l(t):l;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(t)),c["aria-labelledby"]&&c["aria-labelledby"]===c.id&&(c["aria-labelledby"]=void 0);let p={};if(t){let v=!1,y=[];for(let[b,k]of Object.entries(t))typeof k=="boolean"&&(v=!0),k===!0&&y.push(b.replace(/([A-Z])/g,E=>`-${E.toLowerCase()}`));if(v){p["data-headlessui-state"]=y.join(" ");for(let b of y)p[`data-${b}`]=""}}if(Da(o)&&(Object.keys(as(c)).length>0||Object.keys(as(p)).length>0))if(!w.isValidElement(h)||Array.isArray(h)&&h.length>1||FC(h)){if(Object.keys(as(c)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(as(c)).concat(Object.keys(as(p))).map(v=>`  - ${v}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(v=>`  - ${v}`).join(`
`)].join(`
`))}else{let v=h.props,y=v==null?void 0:v.className,b=typeof y=="function"?(...C)=>Fh(y(...C),c.className):Fh(y,c.className),k=b?{className:b}:{},E=Iw(h.props,as(Ff(c,["ref"])));for(let C in p)C in E&&delete p[C];return w.cloneElement(h,Object.assign({},E,p,f,{ref:i($C(h),f.ref)},k))}return w.createElement(o,Object.assign({},Ff(c,["ref"]),!Da(o)&&f,!Da(o)&&p),h)}function DC(){let e=w.useRef([]),t=w.useCallback(n=>{for(let r of e.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return e.current=n,t}}function LC(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function Iw(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):t[i]=r[i];if(t.disabled||t["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[i=>{var o;return(o=i==null?void 0:i.preventDefault)==null?void 0:o.call(i)}]);for(let r in n)Object.assign(t,{[r](i,...o){let l=n[r];for(let u of l){if((i instanceof Event||(i==null?void 0:i.nativeEvent)instanceof Event)&&i.defaultPrevented)return;u(i,...o)}}});return t}function Pw(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):t[i]=r[i];for(let r in n)Object.assign(t,{[r](...i){let o=n[r];for(let l of o)l==null||l(...i)}});return t}function Mt(e){var t;return Object.assign(w.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function as(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function Ff(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function $C(e){return Oe.version.split(".")[0]>="19"?e.props.ref:e.ref}function Da(e){return e===w.Fragment||e===Symbol.for("react.fragment")}function FC(e){return Da(e.type)}let zC="span";var nc=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(nc||{});function BC(e,t){var n;let{features:r=1,...i}=e,o={ref:t,"aria-hidden":(r&2)===2?!0:(n=i["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return Vt()({ourProps:o,theirProps:i,slot:{},defaultTag:zC,name:"Hidden"})}let zh=Mt(BC),UC=w.createContext(void 0);function WC(){return w.useContext(UC)}function Aw(e){return typeof e!="object"||e===null?!1:"nodeType"in e}function ti(e){return Aw(e)&&"tagName"in e}function Jn(e){return ti(e)&&"accessKey"in e}function Mr(e){return ti(e)&&"tabIndex"in e}function HC(e){return ti(e)&&"style"in e}function VC(e){return Jn(e)&&e.nodeName==="IFRAME"}function Rw(e){return Jn(e)&&e.nodeName==="INPUT"}function kv(e){return Jn(e)&&e.nodeName==="LABEL"}function qC(e){return Jn(e)&&e.nodeName==="FIELDSET"}function Ow(e){return Jn(e)&&e.nodeName==="LEGEND"}function KC(e){return ti(e)?e.matches('a[href],audio[controls],button,details,embed,iframe,img[usemap],input:not([type="hidden"]),label,select,textarea,video[controls]'):!1}function Sv(e){let t=e.parentElement,n=null;for(;t&&!qC(t);)Ow(t)&&(n=t),t=t.parentElement;let r=(t==null?void 0:t.getAttribute("disabled"))==="";return r&&YC(n)?!1:r}function YC(e){if(!e)return!1;let t=e.previousElementSibling;for(;t!==null;){if(Ow(t))return!1;t=t.previousElementSibling}return!0}let Mw=Symbol();function GC(e,t=!0){return Object.assign(e,{[Mw]:t})}function _n(...e){let t=w.useRef(e);w.useEffect(()=>{t.current=e},[e]);let n=Ze(r=>{for(let i of t.current)i!=null&&(typeof i=="function"?i(r):i.current=r)});return e.every(r=>r==null||(r==null?void 0:r[Mw]))?void 0:n}let Op=w.createContext(null);Op.displayName="DescriptionContext";function Dw(){let e=w.useContext(Op);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,Dw),t}return e}function Lw(){let[e,t]=w.useState([]);return[e.length>0?e.join(" "):void 0,w.useMemo(()=>function(n){let r=Ze(o=>(t(l=>[...l,o]),()=>t(l=>{let u=l.slice(),c=u.indexOf(o);return c!==-1&&u.splice(c,1),u}))),i=w.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return Oe.createElement(Op.Provider,{value:i},n.children)},[t])]}let JC="p";function QC(e,t){let n=w.useId(),r=Tw(),{id:i=`headlessui-description-${n}`,...o}=e,l=Dw(),u=_n(t);jt(()=>l.register(i),[i,l.register]);let c=Br({...l.slot,disabled:r||!1}),f={ref:u,...l.props,id:i};return Vt()({ourProps:f,theirProps:o,slot:c,defaultTag:JC,name:l.name||"Description"})}let XC=Mt(QC),ZC=Object.assign(XC,{});var tn=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(tn||{});let Cc=w.createContext(null);Cc.displayName="LabelContext";function Mp(){let e=w.useContext(Cc);if(e===null){let t=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,Mp),t}return e}function ej(e){var t,n,r;let i=(n=(t=w.useContext(Cc))==null?void 0:t.value)!=null?n:void 0;return((r=void 0)!=null?r:0)>0?[i,...e].filter(Boolean).join(" "):i}function $w({inherit:e=!1}={}){let t=ej(),[n,r]=w.useState([]),i=e?[t,...n].filter(Boolean):n;return[i.length>0?i.join(" "):void 0,w.useMemo(()=>function(o){let l=Ze(c=>(r(f=>[...f,c]),()=>r(f=>{let h=f.slice(),p=h.indexOf(c);return p!==-1&&h.splice(p,1),h}))),u=w.useMemo(()=>({register:l,slot:o.slot,name:o.name,props:o.props,value:o.value}),[l,o.slot,o.name,o.props,o.value]);return Oe.createElement(Cc.Provider,{value:u},o.children)},[r])]}let tj="label";function nj(e,t){var n;let r=w.useId(),i=Mp(),o=WC(),l=Tw(),{id:u=`headlessui-label-${r}`,htmlFor:c=o??((n=i.props)==null?void 0:n.htmlFor),passive:f=!1,...h}=e,p=_n(t);jt(()=>i.register(u),[u,i.register]);let v=Ze(k=>{let E=k.currentTarget;if(!(k.target!==k.currentTarget&&KC(k.target))&&(kv(E)&&k.preventDefault(),i.props&&"onClick"in i.props&&typeof i.props.onClick=="function"&&i.props.onClick(k),kv(E))){let C=document.getElementById(E.htmlFor);if(C){let _=C.getAttribute("disabled");if(_==="true"||_==="")return;let j=C.getAttribute("aria-disabled");if(j==="true"||j==="")return;(Rw(C)&&(C.type==="file"||C.type==="radio"||C.type==="checkbox")||C.role==="radio"||C.role==="checkbox"||C.role==="switch")&&C.click(),C.focus({preventScroll:!0})}}}),y=Br({...i.slot,disabled:l||!1}),b={ref:p,...i.props,id:u,htmlFor:c,onClick:v};return f&&("onClick"in b&&(delete b.htmlFor,delete b.onClick),"onClick"in h&&delete h.onClick),Vt()({ourProps:b,theirProps:h,slot:y,defaultTag:c?tj:"div",name:i.name||"Label"})}let rj=Mt(nj);Object.assign(rj,{});let ij=w.createContext(()=>{});function sj({value:e,children:t}){return Oe.createElement(ij.Provider,{value:e},t)}function Ev(e){if(e===null)return{width:0,height:0};let{width:t,height:n}=e.getBoundingClientRect();return{width:t,height:n}}function oj(e,t,n=!1){let[r,i]=w.useState(()=>Ev(t));return jt(()=>{if(!t||!e)return;let o=Mn();return o.requestAnimationFrame(function l(){o.requestAnimationFrame(l),i(u=>{let c=Ev(t);return c.width===u.width&&c.height===u.height?u:c})}),()=>{o.dispose()}},[t,e]),n?{width:`${r.width}px`,height:`${r.height}px`}:r}var Fw=(e=>(e[e.Left=0]="Left",e[e.Right=2]="Right",e))(Fw||{});function aj(e){let t=w.useRef(null),n=Ze(i=>{t.current=i.pointerType,!Sv(i.currentTarget)&&i.pointerType==="mouse"&&i.button===Fw.Left&&(i.preventDefault(),e(i))}),r=Ze(i=>{t.current!=="mouse"&&(Sv(i.currentTarget)||e(i))});return{onPointerDown:n,onClick:r}}let zw=class extends Map{constructor(t){super(),this.factory=t}get(t){let n=super.get(t);return n===void 0&&(n=this.factory(t),this.set(t,n)),n}};var lj=Object.defineProperty,uj=(e,t,n)=>t in e?lj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cj=(e,t,n)=>(uj(e,t+"",n),n),Bw=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},ir=(e,t,n)=>(Bw(e,t,"read from private field"),n?n.call(e):t.get(e)),zf=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},_v=(e,t,n,r)=>(Bw(e,t,"write to private field"),t.set(e,n),n),Ar,Ia,Pa;let Uw=class{constructor(t){zf(this,Ar,{}),zf(this,Ia,new zw(()=>new Set)),zf(this,Pa,new Set),cj(this,"disposables",Mn()),_v(this,Ar,t),Dr.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return ir(this,Ar)}subscribe(t,n){if(Dr.isServer)return()=>{};let r={selector:t,callback:n,current:t(ir(this,Ar))};return ir(this,Pa).add(r),this.disposables.add(()=>{ir(this,Pa).delete(r)})}on(t,n){return Dr.isServer?()=>{}:(ir(this,Ia).get(t).add(n),this.disposables.add(()=>{ir(this,Ia).get(t).delete(n)}))}send(t){let n=this.reduce(ir(this,Ar),t);if(n!==ir(this,Ar)){_v(this,Ar,n);for(let r of ir(this,Pa)){let i=r.selector(ir(this,Ar));Ww(r.current,i)||(r.current=i,r.callback(i))}for(let r of ir(this,Ia).get(t.type))r(ir(this,Ar),t)}}};Ar=new WeakMap,Ia=new WeakMap,Pa=new WeakMap;function Ww(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:Array.isArray(e)&&Array.isArray(t)?e.length!==t.length?!1:Bf(e[Symbol.iterator](),t[Symbol.iterator]()):e instanceof Map&&t instanceof Map||e instanceof Set&&t instanceof Set?e.size!==t.size?!1:Bf(e.entries(),t.entries()):Cv(e)&&Cv(t)?Bf(Object.entries(e)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()):!1}function Bf(e,t){do{let n=e.next(),r=t.next();if(n.done&&r.done)return!0;if(n.done||r.done||!Object.is(n.value,r.value))return!1}while(!0)}function Cv(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||Object.getPrototypeOf(t)===null}function jv(e){let[t,n]=e(),r=Mn();return(...i)=>{t(...i),r.dispose(),r.microTask(n)}}var dj=Object.defineProperty,fj=(e,t,n)=>t in e?dj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Nv=(e,t,n)=>(fj(e,typeof t!="symbol"?t+"":t,n),n),Hw=(e=>(e[e.Push=0]="Push",e[e.Pop=1]="Pop",e))(Hw||{});let hj={0(e,t){let n=t.id,r=e.stack,i=e.stack.indexOf(n);if(i!==-1){let o=e.stack.slice();return o.splice(i,1),o.push(n),r=o,{...e,stack:r}}return{...e,stack:[...e.stack,n]}},1(e,t){let n=t.id,r=e.stack.indexOf(n);if(r===-1)return e;let i=e.stack.slice();return i.splice(r,1),{...e,stack:i}}},pj=class Vw extends Uw{constructor(){super(...arguments),Nv(this,"actions",{push:t=>this.send({type:0,id:t}),pop:t=>this.send({type:1,id:t})}),Nv(this,"selectors",{isTop:(t,n)=>t.stack[t.stack.length-1]===n,inStack:(t,n)=>t.stack.includes(n)})}static new(){return new Vw({stack:[]})}reduce(t,n){return Sr(n.type,hj,t,n)}};const jc=new zw(()=>pj.new());var Uf={exports:{}},Wf={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tv;function mj(){if(Tv)return Wf;Tv=1;var e=bc();function t(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,o=e.useEffect,l=e.useMemo,u=e.useDebugValue;return Wf.useSyncExternalStoreWithSelector=function(c,f,h,p,v){var y=i(null);if(y.current===null){var b={hasValue:!1,value:null};y.current=b}else b=y.current;y=l(function(){function E(O){if(!C){if(C=!0,_=O,O=p(O),v!==void 0&&b.hasValue){var A=b.value;if(v(A,O))return j=A}return j=O}if(A=j,n(_,O))return A;var $=p(O);return v!==void 0&&v(A,$)?(_=O,A):(_=O,j=$)}var C=!1,_,j,I=h===void 0?null:h;return[function(){return E(f())},I===null?void 0:function(){return E(I())}]},[f,h,p,v]);var k=r(c,y[0],y[1]);return o(function(){b.hasValue=!0,b.value=k},[k]),u(k),k},Wf}var Iv;function gj(){return Iv||(Iv=1,Uf.exports=mj()),Uf.exports}var yj=gj();function lr(e,t,n=Ww){return yj.useSyncExternalStoreWithSelector(Ze(r=>e.subscribe(vj,r)),Ze(()=>e.state),Ze(()=>e.state),Ze(t),n)}function vj(e){return e}function ll(e,t){let n=w.useId(),r=jc.get(t),[i,o]=lr(r,w.useCallback(l=>[r.selectors.isTop(l,n),r.selectors.inStack(l,n)],[r,n]));return jt(()=>{if(e)return r.actions.push(n),()=>r.actions.pop(n)},[r,e,n]),e?o?i:!0:!1}let Bh=new Map,La=new Map;function Pv(e){var t;let n=(t=La.get(e))!=null?t:0;return La.set(e,n+1),n!==0?()=>Av(e):(Bh.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>Av(e))}function Av(e){var t;let n=(t=La.get(e))!=null?t:1;if(n===1?La.delete(e):La.set(e,n-1),n!==1)return;let r=Bh.get(e);r&&(r["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r["aria-hidden"]),e.inert=r.inert,Bh.delete(e))}function qw(e,{allowed:t,disallowed:n}={}){let r=ll(e,"inert-others");jt(()=>{var i,o;if(!r)return;let l=Mn();for(let c of(i=n==null?void 0:n())!=null?i:[])c&&l.add(Pv(c));let u=(o=t==null?void 0:t())!=null?o:[];for(let c of u){if(!c)continue;let f=Es(c);if(!f)continue;let h=c.parentElement;for(;h&&h!==f.body;){for(let p of h.children)u.some(v=>p.contains(v))||l.add(Pv(p));h=h.parentElement}}return l.dispose},[r,t,n])}function Kw(e,t,n){let r=Cs(i=>{let o=i.getBoundingClientRect();o.x===0&&o.y===0&&o.width===0&&o.height===0&&n()});w.useEffect(()=>{if(!e)return;let i=t===null?null:Jn(t)?t:t.current;if(!i)return;let o=Mn();if(typeof ResizeObserver<"u"){let l=new ResizeObserver(()=>r.current(i));l.observe(i),o.add(()=>l.disconnect())}if(typeof IntersectionObserver<"u"){let l=new IntersectionObserver(()=>r.current(i));l.observe(i),o.add(()=>l.disconnect())}return()=>o.dispose()},[t,r,e])}let rc=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","details>summary","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),xj=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var br=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(br||{}),Uh=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Uh||{}),wj=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(wj||{});function Yw(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(rc)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function bj(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(xj)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var Dp=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(Dp||{});function Lp(e,t=0){var n;return e===((n=Es(e))==null?void 0:n.body)?!1:Sr(t,{0(){return e.matches(rc)},1(){let r=e;for(;r!==null;){if(r.matches(rc))return!0;r=r.parentElement}return!1}})}function Gw(e){Mn().nextFrame(()=>{let t=Rp(e);t&&Mr(t)&&!Lp(t,0)&&Lr(e)})}var kj=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(kj||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Lr(e){e==null||e.focus({preventScroll:!0})}let Sj=["textarea","input"].join(",");function Ej(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,Sj))!=null?n:!1}function Jw(e,t=n=>n){return e.slice().sort((n,r)=>{let i=t(n),o=t(r);if(i===null||o===null)return 0;let l=i.compareDocumentPosition(o);return l&Node.DOCUMENT_POSITION_FOLLOWING?-1:l&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function _j(e,t,n=e===null?document.body:tc(e)){return wo(Yw(n),t,{relativeTo:e})}function wo(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:i=[]}={}){let o=Array.isArray(e)?e.length>0?tc(e[0]):document:tc(e),l=Array.isArray(e)?n?Jw(e):e:t&64?bj(e):Yw(e);i.length>0&&l.length>1&&(l=l.filter(y=>!i.some(b=>b!=null&&"current"in b?(b==null?void 0:b.current)===y:b===y))),r=r??(o==null?void 0:o.activeElement);let u=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,l.indexOf(r))-1;if(t&4)return Math.max(0,l.indexOf(r))+1;if(t&8)return l.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),f=t&32?{preventScroll:!0}:{},h=0,p=l.length,v;do{if(h>=p||h+p<=0)return 0;let y=c+h;if(t&16)y=(y+p)%p;else{if(y<0)return 3;if(y>=p)return 1}v=l[y],v==null||v.focus(f),h+=u}while(v!==Rp(v));return t&6&&Ej(v)&&v.select(),2}function Qw(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function Cj(){return/Android/gi.test(window.navigator.userAgent)}function Rv(){return Qw()||Cj()}function yo(e,t,n,r){let i=Cs(n);w.useEffect(()=>{if(!e)return;function o(l){i.current(l)}return document.addEventListener(t,o,r),()=>document.removeEventListener(t,o,r)},[e,t,r])}function Xw(e,t,n,r){let i=Cs(n);w.useEffect(()=>{if(!e)return;function o(l){i.current(l)}return window.addEventListener(t,o,r),()=>window.removeEventListener(t,o,r)},[e,t,r])}const Ov=30;function Zw(e,t,n){let r=Cs(n),i=w.useCallback(function(u,c){if(u.defaultPrevented)return;let f=c(u);if(f===null||!f.getRootNode().contains(f)||!f.isConnected)return;let h=(function p(v){return typeof v=="function"?p(v()):Array.isArray(v)||v instanceof Set?v:[v]})(t);for(let p of h)if(p!==null&&(p.contains(f)||u.composed&&u.composedPath().includes(p)))return;return!Lp(f,Dp.Loose)&&f.tabIndex!==-1&&u.preventDefault(),r.current(u,f)},[r,t]),o=w.useRef(null);yo(e,"pointerdown",u=>{var c,f;Rv()||(o.current=((f=(c=u.composedPath)==null?void 0:c.call(u))==null?void 0:f[0])||u.target)},!0),yo(e,"pointerup",u=>{if(Rv()||!o.current)return;let c=o.current;return o.current=null,i(u,()=>c)},!0);let l=w.useRef({x:0,y:0});yo(e,"touchstart",u=>{l.current.x=u.touches[0].clientX,l.current.y=u.touches[0].clientY},!0),yo(e,"touchend",u=>{let c={x:u.changedTouches[0].clientX,y:u.changedTouches[0].clientY};if(!(Math.abs(c.x-l.current.x)>=Ov||Math.abs(c.y-l.current.y)>=Ov))return i(u,()=>Mr(u.target)?u.target:null)},!0),Xw(e,"blur",u=>i(u,()=>VC(window.document.activeElement)?window.document.activeElement:null),!0)}function Qa(...e){return w.useMemo(()=>Es(...e),[...e])}var jj=(e=>(e[e.Ignore=0]="Ignore",e[e.Select=1]="Select",e[e.Close=2]="Close",e))(jj||{});const Nu={Ignore:{kind:0},Select:e=>({kind:1,target:e}),Close:{kind:2}},Nj=200,Mv=5;function Tj(e,{trigger:t,action:n,close:r,select:i}){let o=w.useRef(null),l=w.useRef(null),u=w.useRef(null);yo(e&&t!==null,"pointerdown",c=>{Aw(c==null?void 0:c.target)&&t!=null&&t.contains(c.target)&&(l.current=c.x,u.current=c.y,o.current=c.timeStamp)}),yo(e&&t!==null,"pointerup",c=>{var f,h;let p=o.current;if(p===null||(o.current=null,!Mr(c.target))||Math.abs(c.x-((f=l.current)!=null?f:c.x))<Mv&&Math.abs(c.y-((h=u.current)!=null?h:c.y))<Mv)return;let v=n(c);switch(v.kind){case 0:return;case 1:{c.timeStamp-p>Nj&&(i(v.target),r());break}case 2:{r();break}}},{capture:!0})}function eb(e,t,n,r){let i=Cs(n);w.useEffect(()=>{e=e??window;function o(l){i.current(l)}return e.addEventListener(t,o,r),()=>e.removeEventListener(t,o,r)},[e,t,r])}function Ij(e,t){return w.useMemo(()=>{var n;if(e.type)return e.type;let r=(n=e.as)!=null?n:"button";if(typeof r=="string"&&r.toLowerCase()==="button"||(t==null?void 0:t.tagName)==="BUTTON"&&!t.hasAttribute("type"))return"button"},[e.type,e.as,t])}function Pj(e){return w.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}function Aj(e,t){let n=e(),r=new Set;return{getSnapshot(){return n},subscribe(i){return r.add(i),()=>r.delete(i)},dispatch(i,...o){let l=t[i].call(n,...o);l&&(n=l,r.forEach(u=>u()))}}}function Rj(){let e;return{before({doc:t}){var n;let r=t.documentElement,i=(n=t.defaultView)!=null?n:window;e=Math.max(0,i.innerWidth-r.clientWidth)},after({doc:t,d:n}){let r=t.documentElement,i=Math.max(0,r.clientWidth-r.offsetWidth),o=Math.max(0,e-i);n.style(r,"paddingRight",`${o}px`)}}}function Oj(){return Qw()?{before({doc:e,d:t,meta:n}){function r(i){for(let o of n().containers)for(let l of o())if(l.contains(i))return!0;return!1}t.microTask(()=>{var i;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let u=Mn();u.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>u.dispose()))}let o=(i=window.scrollY)!=null?i:window.pageYOffset,l=null;t.addEventListener(e,"click",u=>{if(Mr(u.target))try{let c=u.target.closest("a");if(!c)return;let{hash:f}=new URL(c.href),h=e.querySelector(f);Mr(h)&&!r(h)&&(l=h)}catch{}},!0),t.group(u=>{t.addEventListener(e,"touchstart",c=>{if(u.dispose(),Mr(c.target)&&HC(c.target))if(r(c.target)){let f=c.target;for(;f.parentElement&&r(f.parentElement);)f=f.parentElement;u.style(f,"overscrollBehavior","contain")}else u.style(c.target,"touchAction","none")})}),t.addEventListener(e,"touchmove",u=>{if(Mr(u.target)){if(Rw(u.target))return;if(r(u.target)){let c=u.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&u.preventDefault()}else u.preventDefault()}},{passive:!1}),t.add(()=>{var u;let c=(u=window.scrollY)!=null?u:window.pageYOffset;o!==c&&window.scrollTo(0,o),l&&l.isConnected&&(l.scrollIntoView({block:"nearest"}),l=null)})})}}:{}}function Mj(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function Dv(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let ys=Aj(()=>new Map,{PUSH(e,t){var n;let r=(n=this.get(e))!=null?n:{doc:e,count:0,d:Mn(),meta:new Set,computedMeta:{}};return r.count++,r.meta.add(t),r.computedMeta=Dv(r.meta),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t),n.computedMeta=Dv(n.meta)),this},SCROLL_PREVENT(e){let t={doc:e.doc,d:e.d,meta(){return e.computedMeta}},n=[Oj(),Rj(),Mj()];n.forEach(({before:r})=>r==null?void 0:r(t)),n.forEach(({after:r})=>r==null?void 0:r(t))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});ys.subscribe(()=>{let e=ys.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let r=t.get(n.doc)==="hidden",i=n.count!==0;(i&&!r||!i&&r)&&ys.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&ys.dispatch("TEARDOWN",n)}});function Dj(e,t,n=()=>({containers:[]})){let r=Pj(ys),i=t?r.get(t):void 0,o=i?i.count>0:!1;return jt(()=>{if(!(!t||!e))return ys.dispatch("PUSH",t,n),()=>ys.dispatch("POP",t,n)},[e,t]),o}function tb(e,t,n=()=>[document.body]){let r=ll(e,"scroll-lock");Dj(r,t,i=>{var o;return{containers:[...(o=i.containers)!=null?o:[],n]}})}function Lv(e){return[e.screenX,e.screenY]}function Lj(){let e=w.useRef([-1,-1]);return{wasMoved(t){let n=Lv(t);return e.current[0]===n[0]&&e.current[1]===n[1]?!1:(e.current=n,!0)},update(t){e.current=Lv(t)}}}function $j(e=0){let[t,n]=w.useState(e),r=w.useCallback(c=>n(c),[]),i=w.useCallback(c=>n(f=>f|c),[]),o=w.useCallback(c=>(t&c)===c,[t]),l=w.useCallback(c=>n(f=>f&~c),[]),u=w.useCallback(c=>n(f=>f^c),[]);return{flags:t,setFlag:r,addFlag:i,hasFlag:o,removeFlag:l,toggleFlag:u}}var Fj={},$v,Fv;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&(($v=process==null?void 0:Fj)==null?void 0:$v.NODE_ENV)==="test"&&typeof((Fv=Element==null?void 0:Element.prototype)==null?void 0:Fv.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var zj=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(zj||{});function nb(e){let t={};for(let n in e)e[n]===!0&&(t[`data-${n}`]="");return t}function rb(e,t,n,r){let[i,o]=w.useState(n),{hasFlag:l,addFlag:u,removeFlag:c}=$j(e&&i?3:0),f=w.useRef(!1),h=w.useRef(!1),p=_s();return jt(()=>{var v;if(e){if(n&&o(!0),!t){n&&u(3);return}return(v=r==null?void 0:r.start)==null||v.call(r,n),Bj(t,{inFlight:f,prepare(){h.current?h.current=!1:h.current=f.current,f.current=!0,!h.current&&(n?(u(3),c(4)):(u(4),c(2)))},run(){h.current?n?(c(3),u(4)):(c(4),u(3)):n?c(1):u(1)},done(){var y;h.current&&Hj(t)||(f.current=!1,c(7),n||o(!1),(y=r==null?void 0:r.end)==null||y.call(r,n))}})}},[e,n,t,p]),e?[i,{closed:l(1),enter:l(2),leave:l(4),transition:l(2)||l(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function Bj(e,{prepare:t,run:n,done:r,inFlight:i}){let o=Mn();return Wj(e,{prepare:t,inFlight:i}),o.nextFrame(()=>{n(),o.requestAnimationFrame(()=>{o.add(Uj(e,r))})}),o.dispose}function Uj(e,t){var n,r;let i=Mn();if(!e)return i.dispose;let o=!1;i.add(()=>{o=!0});let l=(r=(n=e.getAnimations)==null?void 0:n.call(e).filter(u=>u instanceof CSSTransition))!=null?r:[];return l.length===0?(t(),i.dispose):(Promise.allSettled(l.map(u=>u.finished)).then(()=>{o||t()}),i.dispose)}function Wj(e,{inFlight:t,prepare:n}){if(t!=null&&t.current){n();return}let r=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=r}function Hj(e){var t,n;return((n=(t=e.getAnimations)==null?void 0:t.call(e))!=null?n:[]).some(r=>r instanceof CSSTransition&&r.playState!=="finished")}function Vj(e,{container:t,accept:n,walk:r}){let i=w.useRef(n),o=w.useRef(r);w.useEffect(()=>{i.current=n,o.current=r},[n,r]),jt(()=>{if(!t||!e)return;let l=Es(t);if(!l)return;let u=i.current,c=o.current,f=Object.assign(p=>u(p),{acceptNode:u}),h=l.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,f,!1);for(;h.nextNode();)c(h.currentNode)},[t,e,i,o])}function $p(e,t){let n=w.useRef([]),r=Ze(e);w.useEffect(()=>{let i=[...n.current];for(let[o,l]of t.entries())if(n.current[o]!==l){let u=r(t,i);return n.current=t,u}},[r,...t])}function Nc(){return typeof window<"u"}function Do(e){return ib(e)?(e.nodeName||"").toLowerCase():"#document"}function Yn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ur(e){var t;return(t=(ib(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function ib(e){return Nc()?e instanceof Node||e instanceof Yn(e).Node:!1}function Sn(e){return Nc()?e instanceof Element||e instanceof Yn(e).Element:!1}function Fr(e){return Nc()?e instanceof HTMLElement||e instanceof Yn(e).HTMLElement:!1}function zv(e){return!Nc()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Yn(e).ShadowRoot}const qj=new Set(["inline","contents"]);function ul(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Er(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!qj.has(i)}const Kj=new Set(["table","td","th"]);function Yj(e){return Kj.has(Do(e))}const Gj=[":popover-open",":modal"];function Tc(e){return Gj.some(t=>{try{return e.matches(t)}catch{return!1}})}const Jj=["transform","translate","scale","rotate","perspective"],Qj=["transform","translate","scale","rotate","perspective","filter"],Xj=["paint","layout","strict","content"];function Fp(e){const t=zp(),n=Sn(e)?Er(e):e;return Jj.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||Qj.some(r=>(n.willChange||"").includes(r))||Xj.some(r=>(n.contain||"").includes(r))}function Zj(e){let t=Fi(e);for(;Fr(t)&&!No(t);){if(Fp(t))return t;if(Tc(t))return null;t=Fi(t)}return null}function zp(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const eN=new Set(["html","body","#document"]);function No(e){return eN.has(Do(e))}function Er(e){return Yn(e).getComputedStyle(e)}function Ic(e){return Sn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Fi(e){if(Do(e)==="html")return e;const t=e.assignedSlot||e.parentNode||zv(e)&&e.host||Ur(e);return zv(t)?t.host:t}function sb(e){const t=Fi(e);return No(t)?e.ownerDocument?e.ownerDocument.body:e.body:Fr(t)&&ul(t)?t:sb(t)}function Xa(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=sb(e),o=i===((r=e.ownerDocument)==null?void 0:r.body),l=Yn(i);if(o){const u=Wh(l);return t.concat(l,l.visualViewport||[],ul(i)?i:[],u&&n?Xa(u):[])}return t.concat(i,Xa(i,[],n))}function Wh(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function tN(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}const ws=Math.min,gn=Math.max,Za=Math.round,Tu=Math.floor,$r=e=>({x:e,y:e}),nN={left:"right",right:"left",bottom:"top",top:"bottom"},rN={start:"end",end:"start"};function Bv(e,t,n){return gn(e,ws(t,n))}function Lo(e,t){return typeof e=="function"?e(t):e}function zi(e){return e.split("-")[0]}function cl(e){return e.split("-")[1]}function ob(e){return e==="x"?"y":"x"}function ab(e){return e==="y"?"height":"width"}const iN=new Set(["top","bottom"]);function ei(e){return iN.has(zi(e))?"y":"x"}function lb(e){return ob(ei(e))}function sN(e,t,n){n===void 0&&(n=!1);const r=cl(e),i=lb(e),o=ab(i);let l=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(l=ic(l)),[l,ic(l)]}function oN(e){const t=ic(e);return[Hh(e),t,Hh(t)]}function Hh(e){return e.replace(/start|end/g,t=>rN[t])}const Uv=["left","right"],Wv=["right","left"],aN=["top","bottom"],lN=["bottom","top"];function uN(e,t,n){switch(e){case"top":case"bottom":return n?t?Wv:Uv:t?Uv:Wv;case"left":case"right":return t?aN:lN;default:return[]}}function cN(e,t,n,r){const i=cl(e);let o=uN(zi(e),n==="start",r);return i&&(o=o.map(l=>l+"-"+i),t&&(o=o.concat(o.map(Hh)))),o}function ic(e){return e.replace(/left|right|bottom|top/g,t=>nN[t])}function dN(e){return{top:0,right:0,bottom:0,left:0,...e}}function fN(e){return typeof e!="number"?dN(e):{top:e,right:e,bottom:e,left:e}}function sc(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function Hv(e,t,n){let{reference:r,floating:i}=e;const o=ei(t),l=lb(t),u=ab(l),c=zi(t),f=o==="y",h=r.x+r.width/2-i.width/2,p=r.y+r.height/2-i.height/2,v=r[u]/2-i[u]/2;let y;switch(c){case"top":y={x:h,y:r.y-i.height};break;case"bottom":y={x:h,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:p};break;case"left":y={x:r.x-i.width,y:p};break;default:y={x:r.x,y:r.y}}switch(cl(t)){case"start":y[l]-=v*(n&&f?-1:1);break;case"end":y[l]+=v*(n&&f?-1:1);break}return y}const hN=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:l}=n,u=o.filter(Boolean),c=await(l.isRTL==null?void 0:l.isRTL(t));let f=await l.getElementRects({reference:e,floating:t,strategy:i}),{x:h,y:p}=Hv(f,r,c),v=r,y={},b=0;for(let k=0;k<u.length;k++){const{name:E,fn:C}=u[k],{x:_,y:j,data:I,reset:O}=await C({x:h,y:p,initialPlacement:r,placement:v,strategy:i,middlewareData:y,rects:f,platform:l,elements:{reference:e,floating:t}});h=_??h,p=j??p,y={...y,[E]:{...y[E],...I}},O&&b<=50&&(b++,typeof O=="object"&&(O.placement&&(v=O.placement),O.rects&&(f=O.rects===!0?await l.getElementRects({reference:e,floating:t,strategy:i}):O.rects),{x:h,y:p}=Hv(f,v,c)),k=-1)}return{x:h,y:p,placement:v,strategy:i,middlewareData:y}};async function Pc(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:o,rects:l,elements:u,strategy:c}=e,{boundary:f="clippingAncestors",rootBoundary:h="viewport",elementContext:p="floating",altBoundary:v=!1,padding:y=0}=Lo(t,e),b=fN(y),E=u[v?p==="floating"?"reference":"floating":p],C=sc(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(E)))==null||n?E:E.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(u.floating)),boundary:f,rootBoundary:h,strategy:c})),_=p==="floating"?{x:r,y:i,width:l.floating.width,height:l.floating.height}:l.reference,j=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u.floating)),I=await(o.isElement==null?void 0:o.isElement(j))?await(o.getScale==null?void 0:o.getScale(j))||{x:1,y:1}:{x:1,y:1},O=sc(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:_,offsetParent:j,strategy:c}):_);return{top:(C.top-O.top+b.top)/I.y,bottom:(O.bottom-C.bottom+b.bottom)/I.y,left:(C.left-O.left+b.left)/I.x,right:(O.right-C.right+b.right)/I.x}}const pN=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:o,rects:l,initialPlacement:u,platform:c,elements:f}=t,{mainAxis:h=!0,crossAxis:p=!0,fallbackPlacements:v,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:k=!0,...E}=Lo(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const C=zi(i),_=ei(u),j=zi(u)===u,I=await(c.isRTL==null?void 0:c.isRTL(f.floating)),O=v||(j||!k?[ic(u)]:oN(u)),A=b!=="none";!v&&A&&O.push(...cN(u,k,b,I));const $=[u,...O],ie=await Pc(t,E),U=[];let R=((r=o.flip)==null?void 0:r.overflows)||[];if(h&&U.push(ie[C]),p){const K=sN(i,l,I);U.push(ie[K[0]],ie[K[1]])}if(R=[...R,{placement:i,overflows:U}],!U.every(K=>K<=0)){var D,Z;const K=(((D=o.flip)==null?void 0:D.index)||0)+1,V=$[K];if(V&&(!(p==="alignment"?_!==ei(V):!1)||R.every(M=>ei(M.placement)===_?M.overflows[0]>0:!0)))return{data:{index:K,overflows:R},reset:{placement:V}};let X=(Z=R.filter(W=>W.overflows[0]<=0).sort((W,M)=>W.overflows[1]-M.overflows[1])[0])==null?void 0:Z.placement;if(!X)switch(y){case"bestFit":{var H;const W=(H=R.filter(M=>{if(A){const ee=ei(M.placement);return ee===_||ee==="y"}return!0}).map(M=>[M.placement,M.overflows.filter(ee=>ee>0).reduce((ee,T)=>ee+T,0)]).sort((M,ee)=>M[1]-ee[1])[0])==null?void 0:H[0];W&&(X=W);break}case"initialPlacement":X=u;break}if(i!==X)return{reset:{placement:X}}}return{}}}},mN=new Set(["left","top"]);async function gN(e,t){const{placement:n,platform:r,elements:i}=e,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),l=zi(n),u=cl(n),c=ei(n)==="y",f=mN.has(l)?-1:1,h=o&&c?-1:1,p=Lo(t,e);let{mainAxis:v,crossAxis:y,alignmentAxis:b}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return u&&typeof b=="number"&&(y=u==="end"?b*-1:b),c?{x:y*h,y:v*f}:{x:v*f,y:y*h}}const yN=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:o,placement:l,middlewareData:u}=t,c=await gN(t,e);return l===((n=u.offset)==null?void 0:n.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:o+c.y,data:{...c,placement:l}}}}},vN=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:l=!1,limiter:u={fn:E=>{let{x:C,y:_}=E;return{x:C,y:_}}},...c}=Lo(e,t),f={x:n,y:r},h=await Pc(t,c),p=ei(zi(i)),v=ob(p);let y=f[v],b=f[p];if(o){const E=v==="y"?"top":"left",C=v==="y"?"bottom":"right",_=y+h[E],j=y-h[C];y=Bv(_,y,j)}if(l){const E=p==="y"?"top":"left",C=p==="y"?"bottom":"right",_=b+h[E],j=b-h[C];b=Bv(_,b,j)}const k=u.fn({...t,[v]:y,[p]:b});return{...k,data:{x:k.x-n,y:k.y-r,enabled:{[v]:o,[p]:l}}}}}},xN=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:o,platform:l,elements:u}=t,{apply:c=()=>{},...f}=Lo(e,t),h=await Pc(t,f),p=zi(i),v=cl(i),y=ei(i)==="y",{width:b,height:k}=o.floating;let E,C;p==="top"||p==="bottom"?(E=p,C=v===(await(l.isRTL==null?void 0:l.isRTL(u.floating))?"start":"end")?"left":"right"):(C=p,E=v==="end"?"top":"bottom");const _=k-h.top-h.bottom,j=b-h.left-h.right,I=ws(k-h[E],_),O=ws(b-h[C],j),A=!t.middlewareData.shift;let $=I,ie=O;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(ie=j),(r=t.middlewareData.shift)!=null&&r.enabled.y&&($=_),A&&!v){const R=gn(h.left,0),D=gn(h.right,0),Z=gn(h.top,0),H=gn(h.bottom,0);y?ie=b-2*(R!==0||D!==0?R+D:gn(h.left,h.right)):$=k-2*(Z!==0||H!==0?Z+H:gn(h.top,h.bottom))}await c({...t,availableWidth:ie,availableHeight:$});const U=await l.getDimensions(u.floating);return b!==U.width||k!==U.height?{reset:{rects:!0}}:{}}}};function ub(e){const t=Er(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Fr(e),o=i?e.offsetWidth:n,l=i?e.offsetHeight:r,u=Za(n)!==o||Za(r)!==l;return u&&(n=o,r=l),{width:n,height:r,$:u}}function Bp(e){return Sn(e)?e:e.contextElement}function bo(e){const t=Bp(e);if(!Fr(t))return $r(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=ub(t);let l=(o?Za(n.width):n.width)/r,u=(o?Za(n.height):n.height)/i;return(!l||!Number.isFinite(l))&&(l=1),(!u||!Number.isFinite(u))&&(u=1),{x:l,y:u}}const wN=$r(0);function cb(e){const t=Yn(e);return!zp()||!t.visualViewport?wN:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function bN(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Yn(e)?!1:t}function bs(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),o=Bp(e);let l=$r(1);t&&(r?Sn(r)&&(l=bo(r)):l=bo(e));const u=bN(o,n,r)?cb(o):$r(0);let c=(i.left+u.x)/l.x,f=(i.top+u.y)/l.y,h=i.width/l.x,p=i.height/l.y;if(o){const v=Yn(o),y=r&&Sn(r)?Yn(r):r;let b=v,k=Wh(b);for(;k&&r&&y!==b;){const E=bo(k),C=k.getBoundingClientRect(),_=Er(k),j=C.left+(k.clientLeft+parseFloat(_.paddingLeft))*E.x,I=C.top+(k.clientTop+parseFloat(_.paddingTop))*E.y;c*=E.x,f*=E.y,h*=E.x,p*=E.y,c+=j,f+=I,b=Yn(k),k=Wh(b)}}return sc({width:h,height:p,x:c,y:f})}function Ac(e,t){const n=Ic(e).scrollLeft;return t?t.left+n:bs(Ur(e)).left+n}function db(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-Ac(e,n),i=n.top+t.scrollTop;return{x:r,y:i}}function kN(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const o=i==="fixed",l=Ur(r),u=t?Tc(t.floating):!1;if(r===l||u&&o)return n;let c={scrollLeft:0,scrollTop:0},f=$r(1);const h=$r(0),p=Fr(r);if((p||!p&&!o)&&((Do(r)!=="body"||ul(l))&&(c=Ic(r)),Fr(r))){const y=bs(r);f=bo(r),h.x=y.x+r.clientLeft,h.y=y.y+r.clientTop}const v=l&&!p&&!o?db(l,c):$r(0);return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-c.scrollLeft*f.x+h.x+v.x,y:n.y*f.y-c.scrollTop*f.y+h.y+v.y}}function SN(e){return Array.from(e.getClientRects())}function EN(e){const t=Ur(e),n=Ic(e),r=e.ownerDocument.body,i=gn(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=gn(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let l=-n.scrollLeft+Ac(e);const u=-n.scrollTop;return Er(r).direction==="rtl"&&(l+=gn(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:l,y:u}}const Vv=25;function _N(e,t){const n=Yn(e),r=Ur(e),i=n.visualViewport;let o=r.clientWidth,l=r.clientHeight,u=0,c=0;if(i){o=i.width,l=i.height;const h=zp();(!h||h&&t==="fixed")&&(u=i.offsetLeft,c=i.offsetTop)}const f=Ac(r);if(f<=0){const h=r.ownerDocument,p=h.body,v=getComputedStyle(p),y=h.compatMode==="CSS1Compat"&&parseFloat(v.marginLeft)+parseFloat(v.marginRight)||0,b=Math.abs(r.clientWidth-p.clientWidth-y);b<=Vv&&(o-=b)}else f<=Vv&&(o+=f);return{width:o,height:l,x:u,y:c}}const CN=new Set(["absolute","fixed"]);function jN(e,t){const n=bs(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=Fr(e)?bo(e):$r(1),l=e.clientWidth*o.x,u=e.clientHeight*o.y,c=i*o.x,f=r*o.y;return{width:l,height:u,x:c,y:f}}function qv(e,t,n){let r;if(t==="viewport")r=_N(e,n);else if(t==="document")r=EN(Ur(e));else if(Sn(t))r=jN(t,n);else{const i=cb(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return sc(r)}function fb(e,t){const n=Fi(e);return n===t||!Sn(n)||No(n)?!1:Er(n).position==="fixed"||fb(n,t)}function NN(e,t){const n=t.get(e);if(n)return n;let r=Xa(e,[],!1).filter(u=>Sn(u)&&Do(u)!=="body"),i=null;const o=Er(e).position==="fixed";let l=o?Fi(e):e;for(;Sn(l)&&!No(l);){const u=Er(l),c=Fp(l);!c&&u.position==="fixed"&&(i=null),(o?!c&&!i:!c&&u.position==="static"&&!!i&&CN.has(i.position)||ul(l)&&!c&&fb(e,l))?r=r.filter(h=>h!==l):i=u,l=Fi(l)}return t.set(e,r),r}function TN(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const l=[...n==="clippingAncestors"?Tc(t)?[]:NN(t,this._c):[].concat(n),r],u=l[0],c=l.reduce((f,h)=>{const p=qv(t,h,i);return f.top=gn(p.top,f.top),f.right=ws(p.right,f.right),f.bottom=ws(p.bottom,f.bottom),f.left=gn(p.left,f.left),f},qv(t,u,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function IN(e){const{width:t,height:n}=ub(e);return{width:t,height:n}}function PN(e,t,n){const r=Fr(t),i=Ur(t),o=n==="fixed",l=bs(e,!0,o,t);let u={scrollLeft:0,scrollTop:0};const c=$r(0);function f(){c.x=Ac(i)}if(r||!r&&!o)if((Do(t)!=="body"||ul(i))&&(u=Ic(t)),r){const y=bs(t,!0,o,t);c.x=y.x+t.clientLeft,c.y=y.y+t.clientTop}else i&&f();o&&!r&&i&&f();const h=i&&!r&&!o?db(i,u):$r(0),p=l.left+u.scrollLeft-c.x-h.x,v=l.top+u.scrollTop-c.y-h.y;return{x:p,y:v,width:l.width,height:l.height}}function Hf(e){return Er(e).position==="static"}function Kv(e,t){if(!Fr(e)||Er(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Ur(e)===n&&(n=n.ownerDocument.body),n}function hb(e,t){const n=Yn(e);if(Tc(e))return n;if(!Fr(e)){let i=Fi(e);for(;i&&!No(i);){if(Sn(i)&&!Hf(i))return i;i=Fi(i)}return n}let r=Kv(e,t);for(;r&&Yj(r)&&Hf(r);)r=Kv(r,t);return r&&No(r)&&Hf(r)&&!Fp(r)?n:r||Zj(e)||n}const AN=async function(e){const t=this.getOffsetParent||hb,n=this.getDimensions,r=await n(e.floating);return{reference:PN(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function RN(e){return Er(e).direction==="rtl"}const ON={convertOffsetParentRelativeRectToViewportRelativeRect:kN,getDocumentElement:Ur,getClippingRect:TN,getOffsetParent:hb,getElementRects:AN,getClientRects:SN,getDimensions:IN,getScale:bo,isElement:Sn,isRTL:RN};function pb(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function MN(e,t){let n=null,r;const i=Ur(e);function o(){var u;clearTimeout(r),(u=n)==null||u.disconnect(),n=null}function l(u,c){u===void 0&&(u=!1),c===void 0&&(c=1),o();const f=e.getBoundingClientRect(),{left:h,top:p,width:v,height:y}=f;if(u||t(),!v||!y)return;const b=Tu(p),k=Tu(i.clientWidth-(h+v)),E=Tu(i.clientHeight-(p+y)),C=Tu(h),j={rootMargin:-b+"px "+-k+"px "+-E+"px "+-C+"px",threshold:gn(0,ws(1,c))||1};let I=!0;function O(A){const $=A[0].intersectionRatio;if($!==c){if(!I)return l();$?l(!1,$):r=setTimeout(()=>{l(!1,1e-7)},1e3)}$===1&&!pb(f,e.getBoundingClientRect())&&l(),I=!1}try{n=new IntersectionObserver(O,{...j,root:i.ownerDocument})}catch{n=new IntersectionObserver(O,j)}n.observe(e)}return l(!0),o}function DN(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,f=Bp(e),h=i||o?[...f?Xa(f):[],...Xa(t)]:[];h.forEach(C=>{i&&C.addEventListener("scroll",n,{passive:!0}),o&&C.addEventListener("resize",n)});const p=f&&u?MN(f,n):null;let v=-1,y=null;l&&(y=new ResizeObserver(C=>{let[_]=C;_&&_.target===f&&y&&(y.unobserve(t),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var j;(j=y)==null||j.observe(t)})),n()}),f&&!c&&y.observe(f),y.observe(t));let b,k=c?bs(e):null;c&&E();function E(){const C=bs(e);k&&!pb(k,C)&&n(),k=C,b=requestAnimationFrame(E)}return n(),()=>{var C;h.forEach(_=>{i&&_.removeEventListener("scroll",n),o&&_.removeEventListener("resize",n)}),p==null||p(),(C=y)==null||C.disconnect(),y=null,c&&cancelAnimationFrame(b)}}const Vf=Pc,LN=yN,$N=vN,FN=pN,zN=xN,BN=(e,t,n)=>{const r=new Map,i={platform:ON,...n},o={...i.platform,_c:r};return hN(e,t,{...i,platform:o})};var UN=typeof document<"u",WN=function(){},Wu=UN?w.useLayoutEffect:WN;function oc(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!oc(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&e.$$typeof)&&!oc(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function mb(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Yv(e,t){const n=mb(e);return Math.round(t*n)/n}function qf(e){const t=w.useRef(e);return Wu(()=>{t.current=e}),t}function HN(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:l}={},transform:u=!0,whileElementsMounted:c,open:f}=e,[h,p]=w.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[v,y]=w.useState(r);oc(v,r)||y(r);const[b,k]=w.useState(null),[E,C]=w.useState(null),_=w.useCallback(M=>{M!==A.current&&(A.current=M,k(M))},[]),j=w.useCallback(M=>{M!==$.current&&($.current=M,C(M))},[]),I=o||b,O=l||E,A=w.useRef(null),$=w.useRef(null),ie=w.useRef(h),U=c!=null,R=qf(c),D=qf(i),Z=qf(f),H=w.useCallback(()=>{if(!A.current||!$.current)return;const M={placement:t,strategy:n,middleware:v};D.current&&(M.platform=D.current),BN(A.current,$.current,M).then(ee=>{const T={...ee,isPositioned:Z.current!==!1};K.current&&!oc(ie.current,T)&&(ie.current=T,Kn.flushSync(()=>{p(T)}))})},[v,t,n,D,Z]);Wu(()=>{f===!1&&ie.current.isPositioned&&(ie.current.isPositioned=!1,p(M=>({...M,isPositioned:!1})))},[f]);const K=w.useRef(!1);Wu(()=>(K.current=!0,()=>{K.current=!1}),[]),Wu(()=>{if(I&&(A.current=I),O&&($.current=O),I&&O){if(R.current)return R.current(I,O,H);H()}},[I,O,H,R,U]);const V=w.useMemo(()=>({reference:A,floating:$,setReference:_,setFloating:j}),[_,j]),X=w.useMemo(()=>({reference:I,floating:O}),[I,O]),W=w.useMemo(()=>{const M={position:n,left:0,top:0};if(!X.floating)return M;const ee=Yv(X.floating,h.x),T=Yv(X.floating,h.y);return u?{...M,transform:"translate("+ee+"px, "+T+"px)",...mb(X.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ee,top:T}},[n,u,X.floating,h.x,h.y]);return w.useMemo(()=>({...h,update:H,refs:V,elements:X,floatingStyles:W}),[h,H,V,X,W])}const gb=(e,t)=>({...LN(e),options:[e,t]}),VN=(e,t)=>({...$N(e),options:[e,t]}),qN=(e,t)=>({...FN(e),options:[e,t]}),KN=(e,t)=>({...zN(e),options:[e,t]}),yb={...Qu},YN=yb.useInsertionEffect,GN=YN||(e=>e());function vb(e){const t=w.useRef(()=>{});return GN(()=>{t.current=e}),w.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var Vh=typeof document<"u"?w.useLayoutEffect:w.useEffect;let Gv=!1,JN=0;const Jv=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+JN++;function QN(){const[e,t]=w.useState(()=>Gv?Jv():void 0);return Vh(()=>{e==null&&t(Jv())},[]),w.useEffect(()=>{Gv=!0},[]),e}const XN=yb.useId,ZN=XN||QN;function eT(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const tT=w.createContext(null),nT=w.createContext(null),rT=()=>{var e;return((e=w.useContext(tT))==null?void 0:e.id)||null},iT=()=>w.useContext(nT),sT="data-floating-ui-focusable";function oT(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=ZN(),o=w.useRef({}),[l]=w.useState(()=>eT()),u=rT()!=null,[c,f]=w.useState(r.reference),h=vb((y,b,k)=>{o.current.openEvent=y?b:void 0,l.emit("openchange",{open:y,event:b,reason:k,nested:u}),n==null||n(y,b,k)}),p=w.useMemo(()=>({setPositionReference:f}),[]),v=w.useMemo(()=>({reference:c||r.reference||null,floating:r.floating||null,domReference:r.reference}),[c,r.reference,r.floating]);return w.useMemo(()=>({dataRef:o,open:t,onOpenChange:h,elements:v,events:l,floatingId:i,refs:p}),[t,h,v,l,i,p])}function aT(e){e===void 0&&(e={});const{nodeId:t}=e,n=oT({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[o,l]=w.useState(null),[u,c]=w.useState(null),h=(i==null?void 0:i.domReference)||o,p=w.useRef(null),v=iT();Vh(()=>{h&&(p.current=h)},[h]);const y=HN({...e,elements:{...i,...u&&{reference:u}}}),b=w.useCallback(j=>{const I=Sn(j)?{getBoundingClientRect:()=>j.getBoundingClientRect(),contextElement:j}:j;c(I),y.refs.setReference(I)},[y.refs]),k=w.useCallback(j=>{(Sn(j)||j===null)&&(p.current=j,l(j)),(Sn(y.refs.reference.current)||y.refs.reference.current===null||j!==null&&!Sn(j))&&y.refs.setReference(j)},[y.refs]),E=w.useMemo(()=>({...y.refs,setReference:k,setPositionReference:b,domReference:p}),[y.refs,k,b]),C=w.useMemo(()=>({...y.elements,domReference:h}),[y.elements,h]),_=w.useMemo(()=>({...y,...r,refs:E,elements:C,nodeId:t}),[y,E,C,t,r]);return Vh(()=>{r.dataRef.current.floatingContext=_;const j=v==null?void 0:v.nodesRef.current.find(I=>I.id===t);j&&(j.context=_)}),w.useMemo(()=>({...y,context:_,refs:E,elements:C}),[y,E,C,_])}const Qv="active",Xv="selected";function Kf(e,t,n){const r=new Map,i=n==="item";let o=e;if(i&&e){const{[Qv]:l,[Xv]:u,...c}=e;o=c}return{...n==="floating"&&{tabIndex:-1,[sT]:""},...o,...t.map(l=>{const u=l?l[n]:null;return typeof u=="function"?e?u(e):null:u}).concat(e).reduce((l,u)=>(u&&Object.entries(u).forEach(c=>{let[f,h]=c;if(!(i&&[Qv,Xv].includes(f)))if(f.indexOf("on")===0){if(r.has(f)||r.set(f,[]),typeof h=="function"){var p;(p=r.get(f))==null||p.push(h),l[f]=function(){for(var v,y=arguments.length,b=new Array(y),k=0;k<y;k++)b[k]=arguments[k];return(v=r.get(f))==null?void 0:v.map(E=>E(...b)).find(E=>E!==void 0)}}}else l[f]=h}),l),{})}}function lT(e){e===void 0&&(e=[]);const t=e.map(u=>u==null?void 0:u.reference),n=e.map(u=>u==null?void 0:u.floating),r=e.map(u=>u==null?void 0:u.item),i=w.useCallback(u=>Kf(u,e,"reference"),t),o=w.useCallback(u=>Kf(u,e,"floating"),n),l=w.useCallback(u=>Kf(u,e,"item"),r);return w.useMemo(()=>({getReferenceProps:i,getFloatingProps:o,getItemProps:l}),[i,o,l])}function Zv(e,t){return{...e,rects:{...e.rects,floating:{...e.rects.floating,height:t}}}}const uT=e=>({name:"inner",options:e,async fn(t){const{listRef:n,overflowRef:r,onFallbackChange:i,offset:o=0,index:l=0,minItemsVisible:u=4,referenceOverflowThreshold:c=0,scrollRef:f,...h}=Lo(e,t),{rects:p,elements:{floating:v}}=t,y=n.current[l],b=(f==null?void 0:f.current)||v,k=v.clientTop||b.clientTop,E=v.clientTop!==0,C=b.clientTop!==0,_=v===b;if(!y)return{};const j={...t,...await gb(-y.offsetTop-v.clientTop-p.reference.height/2-y.offsetHeight/2-o).fn(t)},I=await Vf(Zv(j,b.scrollHeight+k+v.clientTop),h),O=await Vf(j,{...h,elementContext:"reference"}),A=gn(0,I.top),$=j.y+A,R=(b.scrollHeight>b.clientHeight?D=>D:Za)(gn(0,b.scrollHeight+(E&&_||C?k*2:0)-A-gn(0,I.bottom)));if(b.style.maxHeight=R+"px",b.scrollTop=A,i){const D=b.offsetHeight<y.offsetHeight*ws(u,n.current.length)-1||O.top>=-c||O.bottom>=-c;Kn.flushSync(()=>i(D))}return r&&(r.current=await Vf(Zv({...j,y:$},b.offsetHeight+k+v.clientTop),h)),{y:$}}});function cT(e,t){const{open:n,elements:r}=e,{enabled:i=!0,overflowRef:o,scrollRef:l,onChange:u}=t,c=vb(u),f=w.useRef(!1),h=w.useRef(null),p=w.useRef(null);w.useEffect(()=>{if(!i)return;function y(k){if(k.ctrlKey||!b||o.current==null)return;const E=k.deltaY,C=o.current.top>=-.5,_=o.current.bottom>=-.5,j=b.scrollHeight-b.clientHeight,I=E<0?-1:1,O=E<0?"max":"min";b.scrollHeight<=b.clientHeight||(!C&&E>0||!_&&E<0?(k.preventDefault(),Kn.flushSync(()=>{c(A=>A+Math[O](E,j*I))})):/firefox/i.test(tN())&&(b.scrollTop+=E))}const b=(l==null?void 0:l.current)||r.floating;if(n&&b)return b.addEventListener("wheel",y),requestAnimationFrame(()=>{h.current=b.scrollTop,o.current!=null&&(p.current={...o.current})}),()=>{h.current=null,p.current=null,b.removeEventListener("wheel",y)}},[i,n,r.floating,o,l,c]);const v=w.useMemo(()=>({onKeyDown(){f.current=!0},onWheel(){f.current=!1},onPointerMove(){f.current=!1},onScroll(){const y=(l==null?void 0:l.current)||r.floating;if(!(!o.current||!y||!f.current)){if(h.current!==null){const b=y.scrollTop-h.current;(o.current.bottom<-.5&&b<-1||o.current.top<-.5&&b>1)&&Kn.flushSync(()=>c(k=>k+b))}requestAnimationFrame(()=>{h.current=y.scrollTop})}}}),[r.floating,c,o,l]);return w.useMemo(()=>i?{floating:v}:{},[i,v])}let $o=w.createContext({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});$o.displayName="FloatingContext";let Up=w.createContext(null);Up.displayName="PlacementContext";function dT(e){return w.useMemo(()=>e?typeof e=="string"?{to:e}:e:null,[e])}function fT(){return w.useContext($o).setReference}function hT(){return w.useContext($o).getReferenceProps}function pT(){let{getFloatingProps:e,slot:t}=w.useContext($o);return w.useCallback((...n)=>Object.assign({},e(...n),{"data-anchor":t.anchor}),[e,t])}function mT(e=null){e===!1&&(e=null),typeof e=="string"&&(e={to:e});let t=w.useContext(Up),n=w.useMemo(()=>e,[JSON.stringify(e,(i,o)=>{var l;return(l=o==null?void 0:o.outerHTML)!=null?l:o})]);jt(()=>{t==null||t(n??null)},[t,n]);let r=w.useContext($o);return w.useMemo(()=>[r.setFloating,e?r.styles:{}],[r.setFloating,e,r.styles])}let ex=4;function gT({children:e,enabled:t=!0}){let[n,r]=w.useState(null),[i,o]=w.useState(0),l=w.useRef(null),[u,c]=w.useState(null);yT(u);let f=t&&n!==null&&u!==null,{to:h="bottom",gap:p=0,offset:v=0,padding:y=0,inner:b}=vT(n,u),[k,E="center"]=h.split(" ");jt(()=>{f&&o(0)},[f]);let{refs:C,floatingStyles:_,context:j}=aT({open:f,placement:k==="selection"?E==="center"?"bottom":`bottom-${E}`:E==="center"?`${k}`:`${k}-${E}`,strategy:"absolute",transform:!1,middleware:[gb({mainAxis:k==="selection"?0:p,crossAxis:v}),VN({padding:y}),k!=="selection"&&qN({padding:y}),k==="selection"&&b?uT({...b,padding:y,overflowRef:l,offset:i,minItemsVisible:ex,referenceOverflowThreshold:y,onFallbackChange(D){var Z,H;if(!D)return;let K=j.elements.floating;if(!K)return;let V=parseFloat(getComputedStyle(K).scrollPaddingBottom)||0,X=Math.min(ex,K.childElementCount),W=0,M=0;for(let ee of(H=(Z=j.elements.floating)==null?void 0:Z.childNodes)!=null?H:[])if(Jn(ee)){let T=ee.offsetTop,F=T+ee.clientHeight+V,G=K.scrollTop,P=G+K.clientHeight;if(T>=G&&F<=P)X--;else{M=Math.max(0,Math.min(F,P)-Math.max(T,G)),W=ee.clientHeight;break}}X>=1&&o(ee=>{let T=W*X-M+V;return ee>=T?ee:T})}}):null,KN({padding:y,apply({availableWidth:D,availableHeight:Z,elements:H}){Object.assign(H.floating.style,{overflow:"auto",maxWidth:`${D}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${Z}px)`})}})].filter(Boolean),whileElementsMounted:DN}),[I=k,O=E]=j.placement.split("-");k==="selection"&&(I="selection");let A=w.useMemo(()=>({anchor:[I,O].filter(Boolean).join(" ")}),[I,O]),$=cT(j,{overflowRef:l,onChange:o}),{getReferenceProps:ie,getFloatingProps:U}=lT([$]),R=Ze(D=>{c(D),C.setFloating(D)});return w.createElement(Up.Provider,{value:r},w.createElement($o.Provider,{value:{setFloating:R,setReference:C.setReference,styles:_,getReferenceProps:ie,getFloatingProps:U,slot:A}},e))}function yT(e){jt(()=>{if(!e)return;let t=new MutationObserver(()=>{let n=window.getComputedStyle(e).maxHeight,r=parseFloat(n);if(isNaN(r))return;let i=parseInt(n);isNaN(i)||r!==i&&(e.style.maxHeight=`${Math.ceil(r)}px`)});return t.observe(e,{attributes:!0,attributeFilter:["style"]}),()=>{t.disconnect()}},[e])}function vT(e,t){var n,r,i;let o=Yf((n=e==null?void 0:e.gap)!=null?n:"var(--anchor-gap, 0)",t),l=Yf((r=e==null?void 0:e.offset)!=null?r:"var(--anchor-offset, 0)",t),u=Yf((i=e==null?void 0:e.padding)!=null?i:"var(--anchor-padding, 0)",t);return{...e,gap:o,offset:l,padding:u}}function Yf(e,t,n=void 0){let r=_s(),i=Ze((c,f)=>{if(c==null)return[n,null];if(typeof c=="number")return[c,null];if(typeof c=="string"){if(!f)return[n,null];let h=tx(c,f);return[h,p=>{let v=xb(c);{let y=v.map(b=>window.getComputedStyle(f).getPropertyValue(b));r.requestAnimationFrame(function b(){r.nextFrame(b);let k=!1;for(let[C,_]of v.entries()){let j=window.getComputedStyle(f).getPropertyValue(_);if(y[C]!==j){y[C]=j,k=!0;break}}if(!k)return;let E=tx(c,f);h!==E&&(p(E),h=E)})}return r.dispose}]}return[n,null]}),o=w.useMemo(()=>i(e,t)[0],[e,t]),[l=o,u]=w.useState();return jt(()=>{let[c,f]=i(e,t);if(u(c),!!f)return f(u)},[e,t]),l}function xb(e){let t=/var\((.*)\)/.exec(e);if(t){let n=t[1].indexOf(",");if(n===-1)return[t[1]];let r=t[1].slice(0,n).trim(),i=t[1].slice(n+1).trim();return i?[r,...xb(i)]:[r]}return[]}function tx(e,t){let n=document.createElement("div");t.appendChild(n),n.style.setProperty("margin-top","0px","important"),n.style.setProperty("margin-top",e,"important");let r=parseFloat(window.getComputedStyle(n).marginTop)||0;return t.removeChild(n),r}let Rc=w.createContext(null);Rc.displayName="OpenClosedContext";var En=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(En||{});function dl(){return w.useContext(Rc)}function wb({value:e,children:t}){return Oe.createElement(Rc.Provider,{value:e},t)}function xT({children:e}){return Oe.createElement(Rc.Provider,{value:null},e)}function wT(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Pi=[];wT(()=>{function e(t){if(!Mr(t.target)||t.target===document.body||Pi[0]===t.target)return;let n=t.target;n=n.closest(rc),Pi.unshift(n??t.target),Pi=Pi.filter(r=>r!=null&&r.isConnected),Pi.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function bT(e){throw new Error("Unexpected object: "+e)}var Wt=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(Wt||{});function Iu(e,t){let n=t.resolveItems();if(n.length<=0)return null;let r=t.resolveActiveIndex(),i=r??-1;switch(e.focus){case 0:{for(let o=0;o<n.length;++o)if(!t.resolveDisabled(n[o],o,n))return o;return r}case 1:{i===-1&&(i=n.length);for(let o=i-1;o>=0;--o)if(!t.resolveDisabled(n[o],o,n))return o;return r}case 2:{for(let o=i+1;o<n.length;++o)if(!t.resolveDisabled(n[o],o,n))return o;return r}case 3:{for(let o=n.length-1;o>=0;--o)if(!t.resolveDisabled(n[o],o,n))return o;return r}case 4:{for(let o=0;o<n.length;++o)if(t.resolveId(n[o],o,n)===e.id)return o;return r}case 5:return null;default:bT(e)}}function Wp(e){let t=Ze(e),n=w.useRef(!1);w.useEffect(()=>(n.current=!1,()=>{n.current=!0,_c(()=>{n.current&&t()})}),[t])}let bb=w.createContext(!1);function kT(){return w.useContext(bb)}function nx(e){return Oe.createElement(bb.Provider,{value:e.force},e.children)}function ST(e){let t=kT(),n=w.useContext(Sb),[r,i]=w.useState(()=>{var o;if(!t&&n!==null)return(o=n.current)!=null?o:null;if(Dr.isServer)return null;let l=e==null?void 0:e.getElementById("headlessui-portal-root");if(l)return l;if(e===null)return null;let u=e.createElement("div");return u.setAttribute("id","headlessui-portal-root"),e.body.appendChild(u)});return w.useEffect(()=>{r!==null&&(e!=null&&e.body.contains(r)||e==null||e.body.appendChild(r))},[r,e]),w.useEffect(()=>{t||n!==null&&i(n.current)},[n,i,t]),r}let kb=w.Fragment,ET=Mt(function(e,t){let{ownerDocument:n=null,...r}=e,i=w.useRef(null),o=_n(GC(v=>{i.current=v}),t),l=Qa(i.current),u=n??l,c=ST(u),f=w.useContext(qh),h=_s(),p=Vt();return Wp(()=>{var v;c&&c.childNodes.length<=0&&((v=c.parentElement)==null||v.removeChild(c))}),c?Kn.createPortal(Oe.createElement("div",{"data-headlessui-portal":"",ref:v=>{h.dispose(),f&&v&&h.add(f.register(v))}},p({ourProps:{ref:o},theirProps:r,slot:{},defaultTag:kb,name:"Portal"})),c):null});function _T(e,t){let n=_n(t),{enabled:r=!0,ownerDocument:i,...o}=e,l=Vt();return r?Oe.createElement(ET,{...o,ownerDocument:i,ref:n}):l({ourProps:{ref:n},theirProps:o,slot:{},defaultTag:kb,name:"Portal"})}let CT=w.Fragment,Sb=w.createContext(null);function jT(e,t){let{target:n,...r}=e,i={ref:_n(t)},o=Vt();return Oe.createElement(Sb.Provider,{value:n},o({ourProps:i,theirProps:r,defaultTag:CT,name:"Popover.Group"}))}let qh=w.createContext(null);function NT(){let e=w.useContext(qh),t=w.useRef([]),n=Ze(o=>(t.current.push(o),e&&e.register(o),()=>r(o))),r=Ze(o=>{let l=t.current.indexOf(o);l!==-1&&t.current.splice(l,1),e&&e.unregister(o)}),i=w.useMemo(()=>({register:n,unregister:r,portals:t}),[n,r,t]);return[t,w.useMemo(()=>function({children:o}){return Oe.createElement(qh.Provider,{value:i},o)},[i])]}let TT=Mt(_T),Eb=Mt(jT),_b=Object.assign(TT,{Group:Eb});const Hu={Idle:{kind:"Idle"},Tracked:e=>({kind:"Tracked",position:e}),Moved:{kind:"Moved"}};function Cb(e){let t=e.getBoundingClientRect();return`${t.x},${t.y}`}function IT(e,t,n){let r=Mn();if(t.kind==="Tracked"){let i=function(){o!==Cb(e)&&(r.dispose(),n())},{position:o}=t,l=new ResizeObserver(i);l.observe(e),r.add(()=>l.disconnect()),r.addEventListener(window,"scroll",i,{passive:!0}),r.addEventListener(window,"resize",i)}return()=>r.dispose()}function PT(e,t=typeof document<"u"?document.defaultView:null,n){let r=ll(e,"escape");eb(t,"keydown",i=>{r&&(i.defaultPrevented||i.key===tn.Escape&&n(i))})}function AT(){var e;let[t]=w.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,r]=w.useState((e=t==null?void 0:t.matches)!=null?e:!1);return jt(()=>{if(!t)return;function i(o){r(o.matches)}return t.addEventListener("change",i),()=>t.removeEventListener("change",i)},[t]),n}function RT({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let r=Ze(()=>{var i,o;let l=Es(n),u=[];for(let c of e)c!==null&&(ti(c)?u.push(c):"current"in c&&ti(c.current)&&u.push(c.current));if(t!=null&&t.current)for(let c of t.current)u.push(c);for(let c of(i=l==null?void 0:l.querySelectorAll("html > *, body > *"))!=null?i:[])c!==document.body&&c!==document.head&&ti(c)&&c.id!=="headlessui-portal-root"&&(n&&(c.contains(n)||c.contains((o=n==null?void 0:n.getRootNode())==null?void 0:o.host))||u.some(f=>c.contains(f))||u.push(c));return u});return{resolveContainers:r,contains:Ze(i=>r().some(o=>o.contains(i)))}}let jb=w.createContext(null);function rx({children:e,node:t}){let[n,r]=w.useState(null),i=Nb(t??n);return Oe.createElement(jb.Provider,{value:i},e,i===null&&Oe.createElement(zh,{features:nc.Hidden,ref:o=>{var l,u;if(o){for(let c of(u=(l=Es(o))==null?void 0:l.querySelectorAll("html > *, body > *"))!=null?u:[])if(c!==document.body&&c!==document.head&&ti(c)&&c!=null&&c.contains(o)){r(c);break}}}}))}function Nb(e=null){var t;return(t=w.useContext(jb))!=null?t:e}function OT(){let e=typeof document>"u";return"useSyncExternalStore"in Qu?(t=>t.useSyncExternalStore)(Qu)(()=>()=>{},()=>!1,()=>!e):!1}function Oc(){let e=OT(),[t,n]=w.useState(Dr.isHandoffComplete);return t&&Dr.isHandoffComplete===!1&&n(!1),w.useEffect(()=>{t!==!0&&n(!0)},[t]),w.useEffect(()=>Dr.handoff(),[]),e?!1:t}function Hp(){let e=w.useRef(!1);return jt(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var Aa=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Aa||{});function MT(){let e=w.useRef(0);return Xw(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function Tb(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)ti(n.current)&&t.add(n.current);return t}let DT="div";var ds=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(ds||{});function LT(e,t){let n=w.useRef(null),r=_n(n,t),{initialFocus:i,initialFocusFallback:o,containers:l,features:u=15,...c}=e;Oc()||(u=0);let f=Qa(n.current);BT(u,{ownerDocument:f});let h=UT(u,{ownerDocument:f,container:n,initialFocus:i,initialFocusFallback:o});WT(u,{ownerDocument:f,container:n,containers:l,previousActiveElement:h});let p=MT(),v=Ze(_=>{if(!Jn(n.current))return;let j=n.current;(I=>I())(()=>{Sr(p.current,{[Aa.Forwards]:()=>{wo(j,br.First,{skipElements:[_.relatedTarget,o]})},[Aa.Backwards]:()=>{wo(j,br.Last,{skipElements:[_.relatedTarget,o]})}})})}),y=ll(!!(u&2),"focus-trap#tab-lock"),b=_s(),k=w.useRef(!1),E={ref:r,onKeyDown(_){_.key=="Tab"&&(k.current=!0,b.requestAnimationFrame(()=>{k.current=!1}))},onBlur(_){if(!(u&4))return;let j=Tb(l);Jn(n.current)&&j.add(n.current);let I=_.relatedTarget;Mr(I)&&I.dataset.headlessuiFocusGuard!=="true"&&(Ib(j,I)||(k.current?wo(n.current,Sr(p.current,{[Aa.Forwards]:()=>br.Next,[Aa.Backwards]:()=>br.Previous})|br.WrapAround,{relativeTo:_.target}):Mr(_.target)&&Lr(_.target)))}},C=Vt();return Oe.createElement(Oe.Fragment,null,y&&Oe.createElement(zh,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:v,features:nc.Focusable}),C({ourProps:E,theirProps:c,defaultTag:DT,name:"FocusTrap"}),y&&Oe.createElement(zh,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:v,features:nc.Focusable}))}let $T=Mt(LT),FT=Object.assign($T,{features:ds});function zT(e=!0){let t=w.useRef(Pi.slice());return $p(([n],[r])=>{r===!0&&n===!1&&_c(()=>{t.current.splice(0)}),r===!1&&n===!0&&(t.current=Pi.slice())},[e,Pi,t]),Ze(()=>{var n;return(n=t.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function BT(e,{ownerDocument:t}){let n=!!(e&8),r=zT(n);$p(()=>{n||Nw(t==null?void 0:t.body)&&Lr(r())},[n]),Wp(()=>{n&&Lr(r())})}function UT(e,{ownerDocument:t,container:n,initialFocus:r,initialFocusFallback:i}){let o=w.useRef(null),l=ll(!!(e&1),"focus-trap#initial-focus"),u=Hp();return $p(()=>{if(e===0)return;if(!l){i!=null&&i.current&&Lr(i.current);return}let c=n.current;c&&_c(()=>{if(!u.current)return;let f=t==null?void 0:t.activeElement;if(r!=null&&r.current){if((r==null?void 0:r.current)===f){o.current=f;return}}else if(c.contains(f)){o.current=f;return}if(r!=null&&r.current)Lr(r.current);else{if(e&16){if(wo(c,br.First|br.AutoFocus)!==Uh.Error)return}else if(wo(c,br.First)!==Uh.Error)return;if(i!=null&&i.current&&(Lr(i.current),(t==null?void 0:t.activeElement)===i.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}o.current=t==null?void 0:t.activeElement})},[i,l,e]),o}function WT(e,{ownerDocument:t,container:n,containers:r,previousActiveElement:i}){let o=Hp(),l=!!(e&4);eb(t==null?void 0:t.defaultView,"focus",u=>{if(!l||!o.current)return;let c=Tb(r);Jn(n.current)&&c.add(n.current);let f=i.current;if(!f)return;let h=u.target;Jn(h)?Ib(c,h)?(i.current=h,Lr(h)):(u.preventDefault(),u.stopPropagation(),Lr(f)):Lr(i.current)},!0)}function Ib(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function Pb(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||!Da((t=e.as)!=null?t:Rb)||Oe.Children.count(e.children)===1}let Mc=w.createContext(null);Mc.displayName="TransitionContext";var HT=(e=>(e.Visible="visible",e.Hidden="hidden",e))(HT||{});function VT(){let e=w.useContext(Mc);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function qT(){let e=w.useContext(Dc);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let Dc=w.createContext(null);Dc.displayName="NestingContext";function Lc(e){return"children"in e?Lc(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function Ab(e,t){let n=Cs(e),r=w.useRef([]),i=Hp(),o=_s(),l=Ze((y,b=Mi.Hidden)=>{let k=r.current.findIndex(({el:E})=>E===y);k!==-1&&(Sr(b,{[Mi.Unmount](){r.current.splice(k,1)},[Mi.Hidden](){r.current[k].state="hidden"}}),o.microTask(()=>{var E;!Lc(r)&&i.current&&((E=n.current)==null||E.call(n))}))}),u=Ze(y=>{let b=r.current.find(({el:k})=>k===y);return b?b.state!=="visible"&&(b.state="visible"):r.current.push({el:y,state:"visible"}),()=>l(y,Mi.Unmount)}),c=w.useRef([]),f=w.useRef(Promise.resolve()),h=w.useRef({enter:[],leave:[]}),p=Ze((y,b,k)=>{c.current.splice(0),t&&(t.chains.current[b]=t.chains.current[b].filter(([E])=>E!==y)),t==null||t.chains.current[b].push([y,new Promise(E=>{c.current.push(E)})]),t==null||t.chains.current[b].push([y,new Promise(E=>{Promise.all(h.current[b].map(([C,_])=>_)).then(()=>E())})]),b==="enter"?f.current=f.current.then(()=>t==null?void 0:t.wait.current).then(()=>k(b)):k(b)}),v=Ze((y,b,k)=>{Promise.all(h.current[b].splice(0).map(([E,C])=>C)).then(()=>{var E;(E=c.current.shift())==null||E()}).then(()=>k(b))});return w.useMemo(()=>({children:r,register:u,unregister:l,onStart:p,onStop:v,wait:f,chains:h}),[u,l,r,p,v,h,f])}let Rb=w.Fragment,Ob=jo.RenderStrategy;function KT(e,t){var n,r;let{transition:i=!0,beforeEnter:o,afterEnter:l,beforeLeave:u,afterLeave:c,enter:f,enterFrom:h,enterTo:p,entered:v,leave:y,leaveFrom:b,leaveTo:k,...E}=e,[C,_]=w.useState(null),j=w.useRef(null),I=Pb(e),O=_n(...I?[j,t,_]:t===null?[]:[t]),A=(n=E.unmount)==null||n?Mi.Unmount:Mi.Hidden,{show:$,appear:ie,initial:U}=VT(),[R,D]=w.useState($?"visible":"hidden"),Z=qT(),{register:H,unregister:K}=Z;jt(()=>H(j),[H,j]),jt(()=>{if(A===Mi.Hidden&&j.current){if($&&R!=="visible"){D("visible");return}return Sr(R,{hidden:()=>K(j),visible:()=>H(j)})}},[R,j,H,K,$,A]);let V=Oc();jt(()=>{if(I&&V&&R==="visible"&&j.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[j,R,V,I]);let X=U&&!ie,W=ie&&$&&U,M=w.useRef(!1),ee=Ab(()=>{M.current||(D("hidden"),K(j))},Z),T=Ze(ye=>{M.current=!0;let Ce=ye?"enter":"leave";ee.onStart(j,Ce,Re=>{Re==="enter"?o==null||o():Re==="leave"&&(u==null||u())})}),F=Ze(ye=>{let Ce=ye?"enter":"leave";M.current=!1,ee.onStop(j,Ce,Re=>{Re==="enter"?l==null||l():Re==="leave"&&(c==null||c())}),Ce==="leave"&&!Lc(ee)&&(D("hidden"),K(j))});w.useEffect(()=>{I&&i||(T($),F($))},[$,I,i]);let G=!(!i||!I||!V||X),[,P]=rb(G,C,$,{start:T,end:F}),be=as({ref:O,className:((r=Fh(E.className,W&&f,W&&h,P.enter&&f,P.enter&&P.closed&&h,P.enter&&!P.closed&&p,P.leave&&y,P.leave&&!P.closed&&b,P.leave&&P.closed&&k,!P.transition&&$&&v))==null?void 0:r.trim())||void 0,...nb(P)}),ge=0;R==="visible"&&(ge|=En.Open),R==="hidden"&&(ge|=En.Closed),$&&R==="hidden"&&(ge|=En.Opening),!$&&R==="visible"&&(ge|=En.Closing);let me=Vt();return Oe.createElement(Dc.Provider,{value:ee},Oe.createElement(wb,{value:ge},me({ourProps:be,theirProps:E,defaultTag:Rb,features:Ob,visible:R==="visible",name:"Transition.Child"})))}function YT(e,t){let{show:n,appear:r=!1,unmount:i=!0,...o}=e,l=w.useRef(null),u=Pb(e),c=_n(...u?[l,t]:t===null?[]:[t]);Oc();let f=dl();if(n===void 0&&f!==null&&(n=(f&En.Open)===En.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[h,p]=w.useState(n?"visible":"hidden"),v=Ab(()=>{n||p("hidden")}),[y,b]=w.useState(!0),k=w.useRef([n]);jt(()=>{y!==!1&&k.current[k.current.length-1]!==n&&(k.current.push(n),b(!1))},[k,n]);let E=w.useMemo(()=>({show:n,appear:r,initial:y}),[n,r,y]);jt(()=>{n?p("visible"):!Lc(v)&&l.current!==null&&p("hidden")},[n,v]);let C={unmount:i},_=Ze(()=>{var O;y&&b(!1),(O=e.beforeEnter)==null||O.call(e)}),j=Ze(()=>{var O;y&&b(!1),(O=e.beforeLeave)==null||O.call(e)}),I=Vt();return Oe.createElement(Dc.Provider,{value:v},Oe.createElement(Mc.Provider,{value:E},I({ourProps:{...C,as:w.Fragment,children:Oe.createElement(Mb,{ref:c,...C,...o,beforeEnter:_,beforeLeave:j})},theirProps:{},defaultTag:w.Fragment,features:Ob,visible:h==="visible",name:"Transition"})))}function GT(e,t){let n=w.useContext(Mc)!==null,r=dl()!==null;return Oe.createElement(Oe.Fragment,null,!n&&r?Oe.createElement(Kh,{ref:t,...e}):Oe.createElement(Mb,{ref:t,...e}))}let Kh=Mt(YT),Mb=Mt(KT),Vp=Mt(GT),Db=Object.assign(Kh,{Child:Vp,Root:Kh});var JT=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(JT||{}),QT=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(QT||{});let XT={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},qp=w.createContext(null);qp.displayName="DialogContext";function $c(e){let t=w.useContext(qp);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,$c),n}return t}function ZT(e,t){return Sr(t.type,XT,e,t)}let ix=Mt(function(e,t){let n=w.useId(),{id:r=`headlessui-dialog-${n}`,open:i,onClose:o,initialFocus:l,role:u="dialog",autoFocus:c=!0,__demoMode:f=!1,unmount:h=!1,...p}=e,v=w.useRef(!1);u=(function(){return u==="dialog"||u==="alertdialog"?u:(v.current||(v.current=!0,console.warn(`Invalid role [${u}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")})();let y=dl();i===void 0&&y!==null&&(i=(y&En.Open)===En.Open);let b=w.useRef(null),k=_n(b,t),E=Qa(b.current),C=i?0:1,[_,j]=w.useReducer(ZT,{titleId:null,descriptionId:null,panelRef:w.createRef()}),I=Ze(()=>o(!1)),O=Ze(P=>j({type:0,id:P})),A=Oc()?C===0:!1,[$,ie]=NT(),U={get current(){var P;return(P=_.panelRef.current)!=null?P:b.current}},R=Nb(),{resolveContainers:D}=RT({mainTreeNode:R,portals:$,defaultContainers:[U]}),Z=y!==null?(y&En.Closing)===En.Closing:!1;qw(f||Z?!1:A,{allowed:Ze(()=>{var P,be;return[(be=(P=b.current)==null?void 0:P.closest("[data-headlessui-portal]"))!=null?be:null]}),disallowed:Ze(()=>{var P;return[(P=R==null?void 0:R.closest("body > *:not(#headlessui-portal-root)"))!=null?P:null]})});let H=jc.get(null);jt(()=>{if(A)return H.actions.push(r),()=>H.actions.pop(r)},[H,r,A]);let K=lr(H,w.useCallback(P=>H.selectors.isTop(P,r),[H,r]));Zw(K,D,P=>{P.preventDefault(),I()}),PT(K,E==null?void 0:E.defaultView,P=>{P.preventDefault(),P.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),I()}),tb(f||Z?!1:A,E,D),Kw(A,b,I);let[V,X]=Lw(),W=w.useMemo(()=>[{dialogState:C,close:I,setTitleId:O,unmount:h},_],[C,I,O,h,_]),M=Br({open:C===0}),ee={ref:k,id:r,role:u,tabIndex:-1,"aria-modal":f?void 0:C===0?!0:void 0,"aria-labelledby":_.titleId,"aria-describedby":V,unmount:h},T=!AT(),F=ds.None;A&&!f&&(F|=ds.RestoreFocus,F|=ds.TabLock,c&&(F|=ds.AutoFocus),T&&(F|=ds.InitialFocus));let G=Vt();return Oe.createElement(xT,null,Oe.createElement(nx,{force:!0},Oe.createElement(_b,null,Oe.createElement(qp.Provider,{value:W},Oe.createElement(Eb,{target:b},Oe.createElement(nx,{force:!1},Oe.createElement(X,{slot:M},Oe.createElement(ie,null,Oe.createElement(FT,{initialFocus:l,initialFocusFallback:b,containers:D,features:F},Oe.createElement(sj,{value:I},G({ourProps:ee,theirProps:p,slot:M,defaultTag:eI,features:tI,visible:C===0,name:"Dialog"})))))))))))}),eI="div",tI=jo.RenderStrategy|jo.Static;function nI(e,t){let{transition:n=!1,open:r,...i}=e,o=dl(),l=e.hasOwnProperty("open")||o!==null,u=e.hasOwnProperty("onClose");if(!l&&!u)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!l)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!u)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!o&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(r!==void 0||n)&&!i.static?Oe.createElement(rx,null,Oe.createElement(Db,{show:r,transition:n,unmount:i.unmount},Oe.createElement(ix,{ref:t,...i}))):Oe.createElement(rx,null,Oe.createElement(ix,{ref:t,open:r,...i}))}let rI="div";function iI(e,t){let n=w.useId(),{id:r=`headlessui-dialog-panel-${n}`,transition:i=!1,...o}=e,[{dialogState:l,unmount:u},c]=$c("Dialog.Panel"),f=_n(t,c.panelRef),h=Br({open:l===0}),p=Ze(E=>{E.stopPropagation()}),v={ref:f,id:r,onClick:p},y=i?Vp:w.Fragment,b=i?{unmount:u}:{},k=Vt();return Oe.createElement(y,{...b},k({ourProps:v,theirProps:o,slot:h,defaultTag:rI,name:"Dialog.Panel"}))}let sI="div";function oI(e,t){let{transition:n=!1,...r}=e,[{dialogState:i,unmount:o}]=$c("Dialog.Backdrop"),l=Br({open:i===0}),u={ref:t,"aria-hidden":!0},c=n?Vp:w.Fragment,f=n?{unmount:o}:{},h=Vt();return Oe.createElement(c,{...f},h({ourProps:u,theirProps:r,slot:l,defaultTag:sI,name:"Dialog.Backdrop"}))}let aI="h2";function lI(e,t){let n=w.useId(),{id:r=`headlessui-dialog-title-${n}`,...i}=e,[{dialogState:o,setTitleId:l}]=$c("Dialog.Title"),u=_n(t);w.useEffect(()=>(l(r),()=>l(null)),[r,l]);let c=Br({open:o===0}),f={ref:u,id:r};return Vt()({ourProps:f,theirProps:i,slot:c,defaultTag:aI,name:"Dialog.Title"})}let uI=Mt(nI),cI=Mt(iI);Mt(oI);let dI=Mt(lI),sx=Object.assign(uI,{Panel:cI,Title:dI,Description:ZC}),ox=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function ax(e){var t,n;let r=(t=e.innerText)!=null?t:"",i=e.cloneNode(!0);if(!Jn(i))return r;let o=!1;for(let u of i.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))u.remove(),o=!0;let l=o?(n=i.innerText)!=null?n:"":r;return ox.test(l)&&(l=l.replace(ox,"")),l}function fI(e){let t=e.getAttribute("aria-label");if(typeof t=="string")return t.trim();let n=e.getAttribute("aria-labelledby");if(n){let r=n.split(" ").map(i=>{let o=document.getElementById(i);if(o){let l=o.getAttribute("aria-label");return typeof l=="string"?l.trim():ax(o).trim()}return null}).filter(Boolean);if(r.length>0)return r.join(", ")}return ax(e).trim()}function hI(e){let t=w.useRef(""),n=w.useRef("");return Ze(()=>{let r=e.current;if(!r)return"";let i=r.innerText;if(t.current===i)return n.current;let o=fI(r).trim().toLowerCase();return t.current=i,n.current=o,o})}var pI=Object.defineProperty,mI=(e,t,n)=>t in e?pI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lx=(e,t,n)=>(mI(e,typeof t!="symbol"?t+"":t,n),n),mn=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(mn||{}),ac=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(ac||{}),wt=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItems=5]="RegisterItems",e[e.UnregisterItems=6]="UnregisterItems",e[e.SetButtonElement=7]="SetButtonElement",e[e.SetItemsElement=8]="SetItemsElement",e[e.SortItems=9]="SortItems",e[e.MarkButtonAsMoved=10]="MarkButtonAsMoved",e))(wt||{});function ux(e,t=n=>n){let n=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,r=Jw(t(e.items.slice()),o=>o.dataRef.current.domRef.current),i=n?r.indexOf(n):null;return i===-1&&(i=null),{items:r,activeItemIndex:i}}let gI={1(e){if(e.menuState===1)return e;let t=e.buttonElement?Hu.Tracked(Cb(e.buttonElement)):e.buttonPositionState;return{...e,activeItemIndex:null,pendingFocus:{focus:Wt.Nothing},menuState:1,buttonPositionState:t}},0(e,t){return e.menuState===0?e:{...e,__demoMode:!1,pendingFocus:t.focus,menuState:0,buttonPositionState:Hu.Idle}},2:(e,t)=>{var n,r,i,o,l;if(e.menuState===1)return e;let u={...e,searchQuery:"",activationTrigger:(n=t.trigger)!=null?n:1,__demoMode:!1};if(t.focus===Wt.Nothing)return{...u,activeItemIndex:null};if(t.focus===Wt.Specific)return{...u,activeItemIndex:e.items.findIndex(h=>h.id===t.id)};if(t.focus===Wt.Previous){let h=e.activeItemIndex;if(h!==null){let p=e.items[h].dataRef.current.domRef,v=Iu(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:y=>y.id,resolveDisabled:y=>y.dataRef.current.disabled});if(v!==null){let y=e.items[v].dataRef.current.domRef;if(((r=p.current)==null?void 0:r.previousElementSibling)===y.current||((i=y.current)==null?void 0:i.previousElementSibling)===null)return{...u,activeItemIndex:v}}}}else if(t.focus===Wt.Next){let h=e.activeItemIndex;if(h!==null){let p=e.items[h].dataRef.current.domRef,v=Iu(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:y=>y.id,resolveDisabled:y=>y.dataRef.current.disabled});if(v!==null){let y=e.items[v].dataRef.current.domRef;if(((o=p.current)==null?void 0:o.nextElementSibling)===y.current||((l=y.current)==null?void 0:l.nextElementSibling)===null)return{...u,activeItemIndex:v}}}}let c=ux(e),f=Iu(t,{resolveItems:()=>c.items,resolveActiveIndex:()=>c.activeItemIndex,resolveId:h=>h.id,resolveDisabled:h=>h.dataRef.current.disabled});return{...u,...c,activeItemIndex:f}},3:(e,t)=>{let n=e.searchQuery!==""?0:1,r=e.searchQuery+t.value.toLowerCase(),i=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+n).concat(e.items.slice(0,e.activeItemIndex+n)):e.items).find(l=>{var u;return((u=l.dataRef.current.textValue)==null?void 0:u.startsWith(r))&&!l.dataRef.current.disabled}),o=i?e.items.indexOf(i):-1;return o===-1||o===e.activeItemIndex?{...e,searchQuery:r}:{...e,searchQuery:r,activeItemIndex:o,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,t)=>{let n=e.items.concat(t.items.map(i=>i)),r=e.activeItemIndex;return e.pendingFocus.focus!==Wt.Nothing&&(r=Iu(e.pendingFocus,{resolveItems:()=>n,resolveActiveIndex:()=>e.activeItemIndex,resolveId:i=>i.id,resolveDisabled:i=>i.dataRef.current.disabled})),{...e,items:n,activeItemIndex:r,pendingFocus:{focus:Wt.Nothing},pendingShouldSort:!0}},6:(e,t)=>{let n=e.items,r=[],i=new Set(t.items);for(let[o,l]of n.entries())if(i.has(l.id)&&(r.push(o),i.delete(l.id),i.size===0))break;if(r.length>0){n=n.slice();for(let o of r.reverse())n.splice(o,1)}return{...e,items:n,activationTrigger:1}},7:(e,t)=>e.buttonElement===t.element?e:{...e,buttonElement:t.element},8:(e,t)=>e.itemsElement===t.element?e:{...e,itemsElement:t.element},9:e=>e.pendingShouldSort?{...e,...ux(e),pendingShouldSort:!1}:e,10(e){return e.buttonPositionState.kind!=="Tracked"?e:{...e,buttonPositionState:Hu.Moved}}};class Kp extends Uw{constructor(t){super(t),lx(this,"actions",{registerItem:jv(()=>{let n=[],r=new Set;return[(i,o)=>{r.has(o)||(r.add(o),n.push({id:i,dataRef:o}))},()=>(r.clear(),this.send({type:5,items:n.splice(0)}))]}),unregisterItem:jv(()=>{let n=[];return[r=>n.push(r),()=>this.send({type:6,items:n.splice(0)})]})}),lx(this,"selectors",{activeDescendantId(n){var r;let i=n.activeItemIndex,o=n.items;return i===null||(r=o[i])==null?void 0:r.id},isActive(n,r){var i;let o=n.activeItemIndex,l=n.items;return o!==null?((i=l[o])==null?void 0:i.id)===r:!1},shouldScrollIntoView(n,r){return n.__demoMode||n.menuState!==0||n.activationTrigger===0?!1:this.isActive(n,r)},didButtonMove(n){return n.buttonPositionState.kind==="Moved"}}),this.on(5,()=>{this.disposables.requestAnimationFrame(()=>{this.send({type:9})})});{let n=this.state.id,r=jc.get(null);this.disposables.add(r.on(Hw.Push,i=>{!r.selectors.isTop(i,n)&&this.state.menuState===0&&this.send({type:1})})),this.on(0,()=>r.actions.push(n)),this.on(1,()=>r.actions.pop(n))}this.disposables.group(n=>{this.on(1,r=>{r.buttonElement&&(n.dispose(),n.add(IT(r.buttonElement,r.buttonPositionState,()=>{this.send({type:10})})))})})}static new({id:t,__demoMode:n=!1}){return new Kp({id:t,__demoMode:n,menuState:n?0:1,buttonElement:null,itemsElement:null,items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1,pendingShouldSort:!1,pendingFocus:{focus:Wt.Nothing},buttonPositionState:Hu.Idle})}reduce(t,n){return Sr(n.type,gI,t,n)}}const Lb=w.createContext(null);function Yp(e){let t=w.useContext(Lb);if(t===null){let n=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,$b),n}return t}function $b({id:e,__demoMode:t=!1}){let n=w.useMemo(()=>Kp.new({id:e,__demoMode:t}),[]);return Wp(()=>n.dispose()),n}let yI=w.Fragment;function vI(e,t){let n=w.useId(),{__demoMode:r=!1,...i}=e,o=$b({id:n,__demoMode:r}),[l,u,c]=lr(o,E=>[E.menuState,E.itemsElement,E.buttonElement]),f=_n(t),h=jc.get(null),p=lr(h,w.useCallback(E=>h.selectors.isTop(E,n),[h,n]));Zw(p,[c,u],(E,C)=>{var _;o.send({type:wt.CloseMenu}),Lp(C,Dp.Loose)||(E.preventDefault(),(_=o.state.buttonElement)==null||_.focus())});let v=Ze(()=>{o.send({type:wt.CloseMenu})}),y=Br({open:l===mn.Open,close:v}),b={ref:f},k=Vt();return Oe.createElement(gT,null,Oe.createElement(Lb.Provider,{value:o},Oe.createElement(wb,{value:Sr(l,{[mn.Open]:En.Open,[mn.Closed]:En.Closed})},k({ourProps:b,theirProps:i,slot:y,defaultTag:yI,name:"Menu"}))))}let xI="button";function wI(e,t){let n=Yp("Menu.Button"),r=w.useId(),{id:i=`headlessui-menu-button-${r}`,disabled:o=!1,autoFocus:l=!1,...u}=e,c=w.useRef(null),f=hT(),h=_n(t,c,fT(),Ze(R=>n.send({type:wt.SetButtonElement,element:R}))),p=Ze(R=>{switch(R.key){case tn.Space:case tn.Enter:case tn.ArrowDown:R.preventDefault(),R.stopPropagation(),n.send({type:wt.OpenMenu,focus:{focus:Wt.First}});break;case tn.ArrowUp:R.preventDefault(),R.stopPropagation(),n.send({type:wt.OpenMenu,focus:{focus:Wt.Last}});break}}),v=Ze(R=>{switch(R.key){case tn.Space:R.preventDefault();break}}),[y,b,k]=lr(n,R=>[R.menuState,R.buttonElement,R.itemsElement]),E=y===mn.Open;Tj(E,{trigger:b,action:w.useCallback(R=>{if(b!=null&&b.contains(R.target))return Nu.Ignore;let D=R.target.closest('[role="menuitem"]:not([data-disabled])');return Jn(D)?Nu.Select(D):k!=null&&k.contains(R.target)?Nu.Ignore:Nu.Close},[b,k]),close:w.useCallback(()=>n.send({type:wt.CloseMenu}),[]),select:w.useCallback(R=>R.click(),[])});let C=aj(R=>{var D;o||(y===mn.Open?(Kn.flushSync(()=>n.send({type:wt.CloseMenu})),(D=c.current)==null||D.focus({preventScroll:!0})):(R.preventDefault(),n.send({type:wt.OpenMenu,focus:{focus:Wt.Nothing},trigger:ac.Pointer})))}),{isFocusVisible:_,focusProps:j}=jC({autoFocus:l}),{isHovered:I,hoverProps:O}=CC({isDisabled:o}),{pressed:A,pressProps:$}=RC({disabled:o}),ie=Br({open:y===mn.Open,active:A||y===mn.Open,disabled:o,hover:I,focus:_,autofocus:l}),U=Pw(f(),{ref:h,id:i,type:Ij(e,c.current),"aria-haspopup":"menu","aria-controls":k==null?void 0:k.id,"aria-expanded":y===mn.Open,disabled:o||void 0,autoFocus:l,onKeyDown:p,onKeyUp:v},C,j,O,$);return Vt()({ourProps:U,theirProps:u,slot:ie,defaultTag:xI,name:"Menu.Button"})}let bI="div",kI=jo.RenderStrategy|jo.Static;function SI(e,t){let n=w.useId(),{id:r=`headlessui-menu-items-${n}`,anchor:i,portal:o=!1,modal:l=!0,transition:u=!1,...c}=e,f=dT(i),h=Yp("Menu.Items"),[p,v]=mT(f),y=pT(),[b,k]=w.useState(null),E=_n(t,f?p:null,Ze(M=>h.send({type:wt.SetItemsElement,element:M})),k),[C,_]=lr(h,M=>[M.menuState,M.buttonElement]),j=Qa(_),I=Qa(b);f&&(o=!0);let O=dl(),[A,$]=rb(u,b,O!==null?(O&En.Open)===En.Open:C===mn.Open);Kw(A,_,()=>{h.send({type:wt.CloseMenu})});let ie=lr(h,M=>M.__demoMode),U=ie?!1:l&&C===mn.Open;tb(U,I);let R=ie?!1:l&&C===mn.Open;qw(R,{allowed:w.useCallback(()=>[_,b],[_,b])});let D=lr(h,h.selectors.didButtonMove)?!1:A;w.useEffect(()=>{let M=b;M&&C===mn.Open&&(Nw(M)||M.focus({preventScroll:!0}))},[C,b]),Vj(C===mn.Open,{container:b,accept(M){return M.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:M.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(M){M.setAttribute("role","none")}});let Z=_s(),H=Ze(M=>{var ee,T,F;switch(Z.dispose(),M.key){case tn.Space:if(h.state.searchQuery!=="")return M.preventDefault(),M.stopPropagation(),h.send({type:wt.Search,value:M.key});case tn.Enter:if(M.preventDefault(),M.stopPropagation(),h.state.activeItemIndex!==null){let{dataRef:G}=h.state.items[h.state.activeItemIndex];(T=(ee=G.current)==null?void 0:ee.domRef.current)==null||T.click()}h.send({type:wt.CloseMenu}),Gw(h.state.buttonElement);break;case tn.ArrowDown:return M.preventDefault(),M.stopPropagation(),h.send({type:wt.GoToItem,focus:Wt.Next});case tn.ArrowUp:return M.preventDefault(),M.stopPropagation(),h.send({type:wt.GoToItem,focus:Wt.Previous});case tn.Home:case tn.PageUp:return M.preventDefault(),M.stopPropagation(),h.send({type:wt.GoToItem,focus:Wt.First});case tn.End:case tn.PageDown:return M.preventDefault(),M.stopPropagation(),h.send({type:wt.GoToItem,focus:Wt.Last});case tn.Escape:M.preventDefault(),M.stopPropagation(),Kn.flushSync(()=>h.send({type:wt.CloseMenu})),(F=h.state.buttonElement)==null||F.focus({preventScroll:!0});break;case tn.Tab:M.preventDefault(),M.stopPropagation(),Kn.flushSync(()=>h.send({type:wt.CloseMenu})),_j(h.state.buttonElement,M.shiftKey?br.Previous:br.Next);break;default:M.key.length===1&&(h.send({type:wt.Search,value:M.key}),Z.setTimeout(()=>h.send({type:wt.ClearSearch}),350));break}}),K=Ze(M=>{switch(M.key){case tn.Space:M.preventDefault();break}}),V=Br({open:C===mn.Open}),X=Pw(f?y():{},{"aria-activedescendant":lr(h,h.selectors.activeDescendantId),"aria-labelledby":lr(h,M=>{var ee;return(ee=M.buttonElement)==null?void 0:ee.id}),id:r,onKeyDown:H,onKeyUp:K,role:"menu",tabIndex:C===mn.Open?0:void 0,ref:E,style:{...c.style,...v,"--button-width":oj(A,_,!0).width},...nb($)}),W=Vt();return Oe.createElement(_b,{enabled:o?e.static||A:!1,ownerDocument:j},W({ourProps:X,theirProps:c,slot:V,defaultTag:bI,features:kI,visible:D,name:"Menu.Items"}))}let EI=w.Fragment;function _I(e,t){let n=w.useId(),{id:r=`headlessui-menu-item-${n}`,disabled:i=!1,...o}=e,l=Yp("Menu.Item"),u=lr(l,D=>l.selectors.isActive(D,r)),c=w.useRef(null),f=_n(t,c),h=lr(l,D=>l.selectors.shouldScrollIntoView(D,r));jt(()=>{if(h)return Mn().requestAnimationFrame(()=>{var D,Z;(Z=(D=c.current)==null?void 0:D.scrollIntoView)==null||Z.call(D,{block:"nearest"})})},[h,c]);let p=hI(c),v=w.useRef({disabled:i,domRef:c,get textValue(){return p()}});jt(()=>{v.current.disabled=i},[v,i]),jt(()=>(l.actions.registerItem(r,v),()=>l.actions.unregisterItem(r)),[v,r]);let y=Ze(()=>{l.send({type:wt.CloseMenu})}),b=Ze(D=>{if(i)return D.preventDefault();l.send({type:wt.CloseMenu}),Gw(l.state.buttonElement)}),k=Ze(()=>{if(i)return l.send({type:wt.GoToItem,focus:Wt.Nothing});l.send({type:wt.GoToItem,focus:Wt.Specific,id:r})}),E=Lj(),C=Ze(D=>E.update(D)),_=Ze(D=>{E.wasMoved(D)&&(i||u||l.send({type:wt.GoToItem,focus:Wt.Specific,id:r,trigger:ac.Pointer}))}),j=Ze(D=>{E.wasMoved(D)&&(i||u&&l.state.activationTrigger===ac.Pointer&&l.send({type:wt.GoToItem,focus:Wt.Nothing}))}),[I,O]=$w(),[A,$]=Lw(),ie=Br({active:u,focus:u,disabled:i,close:y}),U={id:r,ref:f,role:"menuitem",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,"aria-labelledby":I,"aria-describedby":A,disabled:void 0,onClick:b,onFocus:k,onPointerEnter:C,onMouseEnter:C,onPointerMove:_,onMouseMove:_,onPointerLeave:j,onMouseLeave:j},R=Vt();return Oe.createElement(O,null,Oe.createElement($,null,R({ourProps:U,theirProps:o,slot:ie,defaultTag:EI,name:"Menu.Item"})))}let CI="div";function jI(e,t){let[n,r]=$w(),i=e,o={ref:t,"aria-labelledby":n,role:"group"},l=Vt();return Oe.createElement(r,null,l({ourProps:o,theirProps:i,slot:{},defaultTag:CI,name:"Menu.Section"}))}let NI="header";function TI(e,t){let n=w.useId(),{id:r=`headlessui-menu-heading-${n}`,...i}=e,o=Mp();jt(()=>o.register(r),[r,o.register]);let l={id:r,ref:t,role:"presentation",...o.props};return Vt()({ourProps:l,theirProps:i,slot:{},defaultTag:NI,name:"Menu.Heading"})}let II="div";function PI(e,t){let n=e,r={ref:t,role:"separator"};return Vt()({ourProps:r,theirProps:n,slot:{},defaultTag:II,name:"Menu.Separator"})}let AI=Mt(vI),RI=Mt(wI),OI=Mt(SI),MI=Mt(_I),DI=Mt(jI),LI=Mt(TI),$I=Mt(PI),sr=Object.assign(AI,{Button:RI,Items:OI,Item:MI,Section:DI,Heading:LI,Separator:$I});const Fb=w.createContext(void 0);function js(){const e=w.useContext(Fb);if(!e)throw new Error("useAuth debe usarse dentro de un AuthProvider");return e}const FI="modulepreload",zI=function(e){return"/sport-planner/"+e},cx={},fl=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let l=function(f){return Promise.all(f.map(h=>Promise.resolve(h).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),c=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));i=l(n.map(f=>{if(f=zI(f),f in cx)return;cx[f]=!0;const h=f.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${p}`))return;const v=document.createElement("link");if(v.rel=h?"stylesheet":FI,h||(v.as="script"),v.crossOrigin="",v.href=f,c&&v.setAttribute("nonce",c),document.head.appendChild(v),h)return new Promise((y,b)=>{v.addEventListener("load",y),v.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return i.then(l=>{for(const u of l||[])u.status==="rejected"&&o(u.reason);return t().catch(o)})},BI=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>fl(async()=>{const{default:r}=await Promise.resolve().then(()=>Fo);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class Gp extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class dx extends Gp{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class fx extends Gp{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class hx extends Gp{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Yh;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Yh||(Yh={}));var UI=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};class WI{constructor(t,{headers:n={},customFetch:r,region:i=Yh.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=BI(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return UI(this,arguments,void 0,function*(n,r={}){var i;try{const{headers:o,method:l,body:u,signal:c}=r;let f={},{region:h}=r;h||(h=this.region);const p=new URL(`${this.url}/${n}`);h&&h!=="any"&&(f["x-region"]=h,p.searchParams.set("forceFunctionRegion",h));let v;u&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",v=u):typeof u=="string"?(f["Content-Type"]="text/plain",v=u):typeof FormData<"u"&&u instanceof FormData?v=u:(f["Content-Type"]="application/json",v=JSON.stringify(u)));const y=yield this.fetch(p.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),o),body:v,signal:c}).catch(C=>{throw C.name==="AbortError"?C:new dx(C)}),b=y.headers.get("x-relay-error");if(b&&b==="true")throw new fx(y);if(!y.ok)throw new hx(y);let k=((i=y.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),E;return k==="application/json"?E=yield y.json():k==="application/octet-stream"?E=yield y.blob():k==="text/event-stream"?E=y:k==="multipart/form-data"?E=yield y.formData():E=yield y.text(),{data:E,error:null,response:y}}catch(o){return o instanceof Error&&o.name==="AbortError"?{data:null,error:new dx(o)}:{data:null,error:o,response:o instanceof hx||o instanceof fx?o.context:void 0}}})}}var en={},Xs={},Zs={},eo={},to={},no={},HI=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},To=HI();const VI=To.fetch,zb=To.fetch.bind(To),Bb=To.Headers,qI=To.Request,KI=To.Response,Fo=Object.freeze(Object.defineProperty({__proto__:null,Headers:Bb,Request:qI,Response:KI,default:zb,fetch:VI},Symbol.toStringTag,{value:"Module"})),YI=WE(Fo);var Pu={},px;function Ub(){if(px)return Pu;px=1,Object.defineProperty(Pu,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Pu.default=e,Pu}var mx;function Wb(){if(mx)return no;mx=1;var e=no&&no.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(no,"__esModule",{value:!0});const t=e(YI),n=e(Ub());class r{constructor(o){var l,u;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(l=o.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=o.signal,this.isMaybeSingle=(u=o.isMaybeSingle)!==null&&u!==void 0?u:!1,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,l){return this.headers=new Headers(this.headers),this.headers.set(o,l),this}then(o,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let c=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var h,p,v,y;let b=null,k=null,E=null,C=f.status,_=f.statusText;if(f.ok){if(this.method!=="HEAD"){const A=await f.text();A===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((h=this.headers.get("Accept"))===null||h===void 0)&&h.includes("application/vnd.pgrst.plan+text"))?k=A:k=JSON.parse(A))}const I=(p=this.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),O=(v=f.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");I&&O&&O.length>1&&(E=parseInt(O[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(k)&&(k.length>1?(b={code:"PGRST116",details:`Results contain ${k.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},k=null,E=null,C=406,_="Not Acceptable"):k.length===1?k=k[0]:k=null)}else{const I=await f.text();try{b=JSON.parse(I),Array.isArray(b)&&f.status===404&&(k=[],b=null,C=200,_="OK")}catch{f.status===404&&I===""?(C=204,_="No Content"):b={message:I}}if(b&&this.isMaybeSingle&&(!((y=b==null?void 0:b.details)===null||y===void 0)&&y.includes("0 rows"))&&(b=null,C=200,_="OK"),b&&this.shouldThrowOnError)throw new n.default(b)}return{error:b,data:k,count:E,status:C,statusText:_}});return this.shouldThrowOnError||(c=c.catch(f=>{var h,p,v;return{error:{message:`${(h=f==null?void 0:f.name)!==null&&h!==void 0?h:"FetchError"}: ${f==null?void 0:f.message}`,details:`${(p=f==null?void 0:f.stack)!==null&&p!==void 0?p:""}`,hint:"",code:`${(v=f==null?void 0:f.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),c.then(o,l)}returns(){return this}overrideTypes(){return this}}return no.default=r,no}var gx;function Hb(){if(gx)return to;gx=1;var e=to&&to.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(to,"__esModule",{value:!0});const t=e(Wb());class n extends t.default{select(i){let o=!1;const l=(i??"*").split("").map(u=>/\s/.test(u)&&!o?"":(u==='"'&&(o=!o),u)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:o=!0,nullsFirst:l,foreignTable:u,referencedTable:c=u}={}){const f=c?`${c}.order`:"order",h=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${h?`${h},`:""}${i}.${o?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:o,referencedTable:l=o}={}){const u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${i}`),this}range(i,o,{foreignTable:l,referencedTable:u=l}={}){const c=typeof u>"u"?"offset":`${u}.offset`,f=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(c,`${i}`),this.url.searchParams.set(f,`${o-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:o=!1,settings:l=!1,buffers:u=!1,wal:c=!1,format:f="text"}={}){var h;const p=[i?"analyze":null,o?"verbose":null,l?"settings":null,u?"buffers":null,c?"wal":null].filter(Boolean).join("|"),v=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${f}; for="${v}"; options=${p};`),f==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return to.default=n,to}var yx;function Jp(){if(yx)return eo;yx=1;var e=eo&&eo.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(eo,"__esModule",{value:!0});const t=e(Hb());class n extends t.default{eq(i,o){return this.url.searchParams.append(i,`eq.${o}`),this}neq(i,o){return this.url.searchParams.append(i,`neq.${o}`),this}gt(i,o){return this.url.searchParams.append(i,`gt.${o}`),this}gte(i,o){return this.url.searchParams.append(i,`gte.${o}`),this}lt(i,o){return this.url.searchParams.append(i,`lt.${o}`),this}lte(i,o){return this.url.searchParams.append(i,`lte.${o}`),this}like(i,o){return this.url.searchParams.append(i,`like.${o}`),this}likeAllOf(i,o){return this.url.searchParams.append(i,`like(all).{${o.join(",")}}`),this}likeAnyOf(i,o){return this.url.searchParams.append(i,`like(any).{${o.join(",")}}`),this}ilike(i,o){return this.url.searchParams.append(i,`ilike.${o}`),this}ilikeAllOf(i,o){return this.url.searchParams.append(i,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(i,o){return this.url.searchParams.append(i,`ilike(any).{${o.join(",")}}`),this}is(i,o){return this.url.searchParams.append(i,`is.${o}`),this}in(i,o){const l=Array.from(new Set(o)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(i,`in.(${l})`),this}contains(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cs.{${o.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(o)}`),this}containedBy(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cd.{${o.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(o)}`),this}rangeGt(i,o){return this.url.searchParams.append(i,`sr.${o}`),this}rangeGte(i,o){return this.url.searchParams.append(i,`nxl.${o}`),this}rangeLt(i,o){return this.url.searchParams.append(i,`sl.${o}`),this}rangeLte(i,o){return this.url.searchParams.append(i,`nxr.${o}`),this}rangeAdjacent(i,o){return this.url.searchParams.append(i,`adj.${o}`),this}overlaps(i,o){return typeof o=="string"?this.url.searchParams.append(i,`ov.${o}`):this.url.searchParams.append(i,`ov.{${o.join(",")}}`),this}textSearch(i,o,{config:l,type:u}={}){let c="";u==="plain"?c="pl":u==="phrase"?c="ph":u==="websearch"&&(c="w");const f=l===void 0?"":`(${l})`;return this.url.searchParams.append(i,`${c}fts${f}.${o}`),this}match(i){return Object.entries(i).forEach(([o,l])=>{this.url.searchParams.append(o,`eq.${l}`)}),this}not(i,o,l){return this.url.searchParams.append(i,`not.${o}.${l}`),this}or(i,{foreignTable:o,referencedTable:l=o}={}){const u=l?`${l}.or`:"or";return this.url.searchParams.append(u,`(${i})`),this}filter(i,o,l){return this.url.searchParams.append(i,`${o}.${l}`),this}}return eo.default=n,eo}var vx;function Vb(){if(vx)return Zs;vx=1;var e=Zs&&Zs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Zs,"__esModule",{value:!0});const t=e(Jp());class n{constructor(i,{headers:o={},schema:l,fetch:u}){this.url=i,this.headers=new Headers(o),this.schema=l,this.fetch=u}select(i,o){const{head:l=!1,count:u}=o??{},c=l?"HEAD":"GET";let f=!1;const h=(i??"*").split("").map(p=>/\s/.test(p)&&!f?"":(p==='"'&&(f=!f),p)).join("");return this.url.searchParams.set("select",h),u&&this.headers.append("Prefer",`count=${u}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:o,defaultToNull:l=!0}={}){var u;const c="POST";if(o&&this.headers.append("Prefer",`count=${o}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const f=i.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(f.length>0){const h=[...new Set(f)].map(p=>`"${p}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}upsert(i,{onConflict:o,ignoreDuplicates:l=!1,count:u,defaultToNull:c=!0}={}){var f;const h="POST";if(this.headers.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),u&&this.headers.append("Prefer",`count=${u}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const p=i.reduce((v,y)=>v.concat(Object.keys(y)),[]);if(p.length>0){const v=[...new Set(p)].map(y=>`"${y}"`);this.url.searchParams.set("columns",v.join(","))}}return new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}update(i,{count:o}={}){var l;const u="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:i}={}){var o;const l="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}}return Zs.default=n,Zs}var xx;function GI(){if(xx)return Xs;xx=1;var e=Xs&&Xs.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Xs,"__esModule",{value:!0});const t=e(Vb()),n=e(Jp());class r{constructor(o,{headers:l={},schema:u,fetch:c}={}){this.url=o,this.headers=new Headers(l),this.schemaName=u,this.fetch=c}from(o){const l=new URL(`${this.url}/${o}`);return new t.default(l,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new r(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,l={},{head:u=!1,get:c=!1,count:f}={}){var h;let p;const v=new URL(`${this.url}/rpc/${o}`);let y;u||c?(p=u?"HEAD":"GET",Object.entries(l).filter(([k,E])=>E!==void 0).map(([k,E])=>[k,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([k,E])=>{v.searchParams.append(k,E)})):(p="POST",y=l);const b=new Headers(this.headers);return f&&b.set("Prefer",`count=${f}`),new n.default({method:p,url:v,headers:b,schema:this.schemaName,body:y,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}}return Xs.default=r,Xs}var wx;function JI(){if(wx)return en;wx=1;var e=en&&en.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(en,"__esModule",{value:!0}),en.PostgrestError=en.PostgrestBuilder=en.PostgrestTransformBuilder=en.PostgrestFilterBuilder=en.PostgrestQueryBuilder=en.PostgrestClient=void 0;const t=e(GI());en.PostgrestClient=t.default;const n=e(Vb());en.PostgrestQueryBuilder=n.default;const r=e(Jp());en.PostgrestFilterBuilder=r.default;const i=e(Hb());en.PostgrestTransformBuilder=i.default;const o=e(Wb());en.PostgrestBuilder=o.default;const l=e(Ub());return en.PostgrestError=l.default,en.default={PostgrestClient:t.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:o.default,PostgrestError:l.default},en}var QI=JI();const XI=Ro(QI),{PostgrestClient:ZI,PostgrestQueryBuilder:E5,PostgrestFilterBuilder:_5,PostgrestTransformBuilder:C5,PostgrestBuilder:j5,PostgrestError:N5}=XI;class eP{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const tP="2.75.0",nP=`realtime-js/${tP}`,rP="1.0.0",Gh=1e4,iP=1e3,sP=100;var $a;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})($a||($a={}));var Gt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Gt||(Gt={}));var wr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(wr||(wr={}));var Jh;(function(e){e.websocket="websocket"})(Jh||(Jh={}));var fs;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(fs||(fs={}));class oP{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const i=n.getUint8(1),o=n.getUint8(2);let l=this.HEADER_LENGTH+2;const u=r.decode(t.slice(l,l+i));l=l+i;const c=r.decode(t.slice(l,l+o));l=l+o;const f=JSON.parse(r.decode(t.slice(l,t.byteLength)));return{ref:null,topic:u,event:c,payload:f}}}class qb{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var St;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(St||(St={}));const bx=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((o,l)=>(o[l]=aP(l,e,t,i),o),{}):{}},aP=(e,t,n,r)=>{const i=t.find(u=>u.name===e),o=i==null?void 0:i.type,l=n[e];return o&&!r.includes(o)?Kb(o,l):Qh(l)},Kb=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return dP(t,n)}switch(e){case St.bool:return lP(t);case St.float4:case St.float8:case St.int2:case St.int4:case St.int8:case St.numeric:case St.oid:return uP(t);case St.json:case St.jsonb:return cP(t);case St.timestamp:return fP(t);case St.abstime:case St.date:case St.daterange:case St.int4range:case St.int8range:case St.money:case St.reltime:case St.text:case St.time:case St.timestamptz:case St.timetz:case St.tsrange:case St.tstzrange:return Qh(t);default:return Qh(t)}},Qh=e=>e,lP=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},uP=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},cP=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},dP=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let o;const l=e.slice(1,n);try{o=JSON.parse("["+l+"]")}catch{o=l?l.split(","):[]}return o.map(u=>Kb(t,u))}return e},fP=e=>typeof e=="string"?e.replace(" ","T"):e,Yb=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Gf{constructor(t,n,r={},i=Gh){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var kx;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(kx||(kx={}));class Fa{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Fa.syncState(this.state,i,o,l),this.pendingDiffs.forEach(c=>{this.state=Fa.syncDiff(this.state,c,o,l)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},i=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Fa.syncDiff(this.state,i,o,l),u())}),this.onJoin((i,o,l)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:l})}),this.onLeave((i,o,l)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const o=this.cloneDeep(t),l=this.transformState(n),u={},c={};return this.map(o,(f,h)=>{l[f]||(c[f]=h)}),this.map(l,(f,h)=>{const p=o[f];if(p){const v=h.map(E=>E.presence_ref),y=p.map(E=>E.presence_ref),b=h.filter(E=>y.indexOf(E.presence_ref)<0),k=p.filter(E=>v.indexOf(E.presence_ref)<0);b.length>0&&(u[f]=b),k.length>0&&(c[f]=k)}else u[f]=h}),this.syncDiff(o,{joins:u,leaves:c},r,i)}static syncDiff(t,n,r,i){const{joins:o,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(u,c)=>{var f;const h=(f=t[u])!==null&&f!==void 0?f:[];if(t[u]=this.cloneDeep(c),h.length>0){const p=t[u].map(y=>y.presence_ref),v=h.filter(y=>p.indexOf(y.presence_ref)<0);t[u].unshift(...v)}r(u,h,c)}),this.map(l,(u,c)=>{let f=t[u];if(!f)return;const h=c.map(p=>p.presence_ref);f=f.filter(p=>h.indexOf(p.presence_ref)<0),t[u]=f,i(u,f,c),f.length===0&&delete t[u]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Sx;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Sx||(Sx={}));var za;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(za||(za={}));var Zr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Zr||(Zr={}));class Qp{constructor(t,n={config:{}},r){var i,o;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Gt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Gf(this,wr.join,this.params,this.timeout),this.rejoinTimer=new qb(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Gt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Gt.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Gt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Gt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Gt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(wr.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new Fa(this),this.broadcastEndpointURL=Yb(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Gt.closed){const{config:{broadcast:l,presence:u,private:c}}=this.params,f=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(y=>y.filter))!==null&&i!==void 0?i:[],h=!!this.bindings[za.PRESENCE]&&this.bindings[za.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,p={},v={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:h}),postgres_changes:f,private:c};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(y=>t==null?void 0:t(Zr.CHANNEL_ERROR,y)),this._onClose(()=>t==null?void 0:t(Zr.CLOSED)),this.updateJoinPayload(Object.assign({config:v},p)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:y})=>{var b;if(this.socket.setAuth(),y===void 0){t==null||t(Zr.SUBSCRIBED);return}else{const k=this.bindings.postgres_changes,E=(b=k==null?void 0:k.length)!==null&&b!==void 0?b:0,C=[];for(let _=0;_<E;_++){const j=k[_],{filter:{event:I,schema:O,table:A,filter:$}}=j,ie=y&&y[_];if(ie&&ie.event===I&&ie.schema===O&&ie.table===A&&ie.filter===$)C.push(Object.assign(Object.assign({},j),{id:ie.id}));else{this.unsubscribe(),this.state=Gt.errored,t==null||t(Zr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,t&&t(Zr.SUBSCRIBED);return}}).receive("error",y=>{this.state=Gt.errored,t==null||t(Zr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Zr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Gt.joined&&t===za.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){const{event:o,payload:l}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:l,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=f.body)===null||i===void 0?void 0:i.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var l,u,c;const f=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),f.receive("ok",()=>o("ok")),f.receive("error",()=>o("error")),f.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Gt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(wr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Gf(this,wr.leave,{},t),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Gt.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const i=new AbortController,o=setTimeout(()=>i.abort(),r),l=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(o),l}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Gf(this,t,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>sP){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,o;const l=t.toLocaleLowerCase(),{close:u,error:c,leave:f,join:h}=wr;if(r&&[u,c,f,h].indexOf(l)>=0&&r!==this._joinRef())return;let v=this._onMessage(l,n,r);if(n&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(y=>{var b,k,E;return((b=y.filter)===null||b===void 0?void 0:b.event)==="*"||((E=(k=y.filter)===null||k===void 0?void 0:k.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===l}).map(y=>y.callback(v,r)):(o=this.bindings[l])===null||o===void 0||o.filter(y=>{var b,k,E,C,_,j;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in y){const I=y.id,O=(b=y.filter)===null||b===void 0?void 0:b.event;return I&&((k=n.ids)===null||k===void 0?void 0:k.includes(I))&&(O==="*"||(O==null?void 0:O.toLocaleLowerCase())===((E=n.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const I=(_=(C=y==null?void 0:y.filter)===null||C===void 0?void 0:C.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return I==="*"||I===((j=n==null?void 0:n.event)===null||j===void 0?void 0:j.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===l}).map(y=>{if(typeof v=="object"&&"ids"in v){const b=v.data,{schema:k,table:E,commit_timestamp:C,type:_,errors:j}=b;v=Object.assign(Object.assign({},{schema:k,table:E,commit_timestamp:C,eventType:_,new:{},old:{},errors:j}),this._getPayloadRecords(b))}y.callback(v,r)})}_isClosed(){return this.state===Gt.closed}_isJoined(){return this.state===Gt.joined}_isJoining(){return this.state===Gt.joining}_isLeaving(){return this.state===Gt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),o={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&Qp.isEqual(i.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(wr.close,{},t)}_onError(t){this._on(wr.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Gt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=bx(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=bx(t.columns,t.old_record)),n}}const Jf=()=>{},Au={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},hP=[1e3,2e3,5e3,1e4],pP=1e4,mP=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class gP{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Gh,this.transport=null,this.heartbeatIntervalMs=Au.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Jf,this.ref=0,this.reconnectTimer=null,this.logger=Jf,this.conn=null,this.sendBuffer=[],this.serializer=new oP,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>fl(async()=>{const{default:u}=await Promise.resolve().then(()=>Fo);return{default:u}},void 0).then(({default:u})=>u(...l)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...l)=>o(...l)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Jh.websocket}`,this.httpEndpoint=Yb(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=eP.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:rP}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case $a.connecting:return fs.Connecting;case $a.open:return fs.Open;case $a.closing:return fs.Closing;default:return fs.Closed}}isConnected(){return this.connectionState()===fs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{const o=new Qp(`realtime:${t}`,n,this);return this.channels.push(o),o}}push(t){const{topic:n,event:r,payload:i,ref:o}=t,l=()=>{this.encode(t,u=>{var c;(c=this.conn)===null||c===void 0||c.send(u)})};this.log("push",`${n} ${r} (${o})`,i),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(iP,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Au.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:o,ref:l}=n,u=l?`(${l})`:"",c=o.status||"";this.log("receive",`${c} ${r} ${i} ${u}`.trim(),o),this.channels.filter(f=>f._isMember(r)).forEach(f=>f._trigger(i,o,l)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(wr.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([mP],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:nP};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(wr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new qb(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Au.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,i,o,l,u,c,f,h;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Gh,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:Au.HEARTBEAT_INTERVAL,this.worker=(o=t==null?void 0:t.worker)!==null&&o!==void 0?o:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=t==null?void 0:t.heartbeatCallback)!==null&&u!==void 0?u:Jf,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:(p=>hP[p-1]||pP),this.encode=(f=t==null?void 0:t.encode)!==null&&f!==void 0?f:((p,v)=>v(JSON.stringify(p))),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Xp extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Ut(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class yP extends Xp{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Xh extends Xp{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var vP=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};const Gb=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>fl(async()=>{const{default:r}=await Promise.resolve().then(()=>Fo);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},xP=()=>vP(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield fl(()=>Promise.resolve().then(()=>Fo),void 0)).Response:Response}),Zh=e=>{if(Array.isArray(e))return e.map(n=>Zh(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[i]=Zh(r)}),t},wP=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Ns=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};const Qf=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),bP=(e,t,n)=>Ns(void 0,void 0,void 0,function*(){const r=yield xP();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(i=>{const o=e.status||500,l=(i==null?void 0:i.statusCode)||o+"";t(new yP(Qf(i),o,l))}).catch(i=>{t(new Xh(Qf(i),i))}):t(new Xh(Qf(e),e))}),kP=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?i:(wP(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(r)):i.body=r,t!=null&&t.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),n))};function hl(e,t,n,r,i,o){return Ns(this,void 0,void 0,function*(){return new Promise((l,u)=>{e(n,kP(t,r,i,o)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>l(c)).catch(c=>bP(c,u,r))})})}function lc(e,t,n,r){return Ns(this,void 0,void 0,function*(){return hl(e,"GET",t,n,r)})}function Rr(e,t,n,r,i){return Ns(this,void 0,void 0,function*(){return hl(e,"POST",t,r,i,n)})}function ep(e,t,n,r,i){return Ns(this,void 0,void 0,function*(){return hl(e,"PUT",t,r,i,n)})}function SP(e,t,n,r){return Ns(this,void 0,void 0,function*(){return hl(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Jb(e,t,n,r,i){return Ns(this,void 0,void 0,function*(){return hl(e,"DELETE",t,r,i,n)})}var EP=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};class _P{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return EP(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ut(t))return{data:null,error:t};throw t}})}}var CP=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};class jP{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}asStream(){return new _P(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.execute().then(t,n)}execute(){return CP(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ut(t))return{data:null,error:t};throw t}})}}var An=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};const NP={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ex={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class TP{constructor(t,n={},r,i){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=Gb(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,i){return An(this,void 0,void 0,function*(){try{let o;const l=Object.assign(Object.assign({},Ex),i);let u=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const c=l.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",l.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",l.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=r,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,c&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i!=null&&i.headers&&(u=Object.assign(Object.assign({},u),i.headers));const f=this._removeEmptyFolders(n),h=this._getFinalPath(f),p=yield(t=="PUT"?ep:Rr)(this.fetch,`${this.url}/object/${h}`,o,Object.assign({headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:f,id:p.Id,fullPath:p.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ut(o))return{data:null,error:o};throw o}})}upload(t,n,r){return An(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,i){return An(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),l=this._getFinalPath(o),u=new URL(this.url+`/object/upload/sign/${l}`);u.searchParams.set("token",n);try{let c;const f=Object.assign({upsert:Ex.upsert},i),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",f.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",f.cacheControl)):(c=r,h["cache-control"]=`max-age=${f.cacheControl}`,h["content-type"]=f.contentType);const p=yield ep(this.fetch,u.toString(),c,{headers:h});return{data:{path:o,fullPath:p.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ut(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return An(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const o=yield Rr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),l=new URL(this.url+o.url),u=l.searchParams.get("token");if(!u)throw new Xp("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:u},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ut(r))return{data:null,error:r};throw r}})}update(t,n,r){return An(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return An(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ut(i))return{data:null,error:i};throw i}})}copy(t,n,r){return An(this,void 0,void 0,function*(){try{return{data:{path:(yield Rr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ut(i))return{data:null,error:i};throw i}})}createSignedUrl(t,n,r){return An(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),o=yield Rr(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const l=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${l}`)},{data:o,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ut(i))return{data:null,error:i};throw i}})}createSignedUrls(t,n,r){return An(this,void 0,void 0,function*(){try{const i=yield Rr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${o}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ut(i))return{data:null,error:i};throw i}})}download(t,n){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),l=o?`?${o}`:"",u=this._getFinalPath(t),c=()=>lc(this.fetch,`${this.url}/${i}/${u}${l}`,{headers:this.headers,noResolveJson:!0});return new jP(c,this.shouldThrowOnError)}info(t){return An(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield lc(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Zh(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ut(r))return{data:null,error:r};throw r}})}exists(t){return An(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield SP(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ut(r)&&r instanceof Xh){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),i=[],o=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&i.push(o);const u=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&i.push(c);let f=i.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${r}${f}`)}}}remove(t){return An(this,void 0,void 0,function*(){try{return{data:yield Jb(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ut(n))return{data:null,error:n};throw n}})}list(t,n,r){return An(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},NP),n),{prefix:t||""});return{data:yield Rr(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ut(i))return{data:null,error:i};throw i}})}listV2(t,n){return An(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield Rr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ut(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const IP="2.75.0",PP={"X-Client-Info":`storage-js/${IP}`};var ro=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};class AP{constructor(t,n={},r,i){this.shouldThrowOnError=!1;const o=new URL(t);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},PP),n),this.fetch=Gb(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return ro(this,void 0,void 0,function*(){try{return{data:yield lc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ut(t))return{data:null,error:t};throw t}})}getBucket(t){return ro(this,void 0,void 0,function*(){try{return{data:yield lc(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ut(n))return{data:null,error:n};throw n}})}createBucket(t){return ro(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield Rr(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ut(i))return{data:null,error:i};throw i}})}updateBucket(t,n){return ro(this,void 0,void 0,function*(){try{return{data:yield ep(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ut(r))return{data:null,error:r};throw r}})}emptyBucket(t){return ro(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ut(n))return{data:null,error:n};throw n}})}deleteBucket(t){return ro(this,void 0,void 0,function*(){try{return{data:yield Jb(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ut(n))return{data:null,error:n};throw n}})}}class RP extends AP{constructor(t,n={},r,i){super(t,n,r,i)}from(t){return new TP(this.url,this.headers,t,this.fetch)}}const OP="2.75.0";let Ra="";typeof Deno<"u"?Ra="deno":typeof document<"u"?Ra="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ra="react-native":Ra="node";const MP={"X-Client-Info":`supabase-js-${Ra}/${OP}`},DP={headers:MP},LP={schema:"public"},$P={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},FP={};var zP=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};const BP=e=>{let t;return e?t=e:typeof fetch>"u"?t=zb:t=fetch,(...n)=>t(...n)},UP=()=>typeof Headers>"u"?Bb:Headers,WP=(e,t,n)=>{const r=BP(n),i=UP();return(o,l)=>zP(void 0,void 0,void 0,function*(){var u;const c=(u=yield t())!==null&&u!==void 0?u:e;let f=new i(l==null?void 0:l.headers);return f.has("apikey")||f.set("apikey",e),f.has("Authorization")||f.set("Authorization",`Bearer ${c}`),r(o,Object.assign(Object.assign({},l),{headers:f}))})};var HP=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};function VP(e){return e.endsWith("/")?e:e+"/"}function qP(e,t){var n,r;const{db:i,auth:o,realtime:l,global:u}=e,{db:c,auth:f,realtime:h,global:p}=t,v={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},f),o),realtime:Object.assign(Object.assign({},h),l),storage:{},global:Object.assign(Object.assign(Object.assign({},p),u),{headers:Object.assign(Object.assign({},(n=p==null?void 0:p.headers)!==null&&n!==void 0?n:{}),(r=u==null?void 0:u.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>HP(this,void 0,void 0,function*(){return""})};return e.accessToken?v.accessToken=e.accessToken:delete v.accessToken,v}function KP(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(VP(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Qb="2.75.0",ho=30*1e3,tp=3,Xf=tp*ho,YP="http://localhost:9999",GP="supabase.auth.token",JP={"X-Client-Info":`gotrue-js/${Qb}`},np="X-Supabase-Api-Version",Xb={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},QP=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,XP=600*1e3;class el extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Ge(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class ZP extends el{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function eA(e){return Ge(e)&&e.name==="AuthApiError"}class hs extends el{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Wi extends el{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}}class ji extends Wi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function tA(e){return Ge(e)&&e.name==="AuthSessionMissingError"}class io extends Wi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ru extends Wi{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Ou extends Wi{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function nA(e){return Ge(e)&&e.name==="AuthImplicitGrantRedirectError"}class _x extends Wi{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class rp extends Wi{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Zf(e){return Ge(e)&&e.name==="AuthRetryableFetchError"}class Cx extends Wi{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class ip extends Wi{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const uc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),jx=` 	
\r=`.split(""),rA=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<jx.length;t+=1)e[jx[t].charCodeAt(0)]=-2;for(let t=0;t<uc.length;t+=1)e[uc[t].charCodeAt(0)]=t;return e})();function Nx(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(uc[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(uc[r]),t.queuedBits-=6}}function Zb(e,t,n){const r=rA[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Tx(e){const t=[],n=l=>{t.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=l=>{oA(l,r,n)};for(let l=0;l<e.length;l+=1)Zb(e.charCodeAt(l),i,o);return t.join("")}function iA(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function sA(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}iA(r,t)}}function oA(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if((e>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function ko(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)Zb(e.charCodeAt(i),n,r);return new Uint8Array(t)}function aA(e){const t=[];return sA(e,n=>t.push(n)),new Uint8Array(t)}function vs(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};return e.forEach(i=>Nx(i,n,r)),Nx(null,n,r),t.join("")}function lA(e){return Math.round(Date.now()/1e3)+e}function uA(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const qn=()=>typeof window<"u"&&typeof document<"u",is={tested:!1,writable:!1},ek=()=>{if(!qn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(is.tested)return is.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),is.tested=!0,is.writable=!0}catch{is.tested=!0,is.writable=!1}return is.writable};function cA(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,o)=>{t[o]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const tk=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>fl(async()=>{const{default:r}=await Promise.resolve().then(()=>Fo);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},dA=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",po=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},ss=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},_i=async(e,t)=>{await e.removeItem(t)};class Fc{constructor(){this.promise=new Fc.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Fc.promiseConstructor=Promise;function eh(e){const t=e.split(".");if(t.length!==3)throw new ip("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!QP.test(t[r]))throw new ip("JWT not in base64url format");return{header:JSON.parse(Tx(t[0])),payload:JSON.parse(Tx(t[1])),signature:ko(t[2]),raw:{header:t[0],payload:t[1]}}}async function fA(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function hA(e,t){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const l=await e(o);if(!t(o,null,l)){r(l);return}}catch(l){if(!t(o,l)){i(l);return}}})()})}function pA(e){return("0"+e.toString(16)).substr(-2)}function mA(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let o=0;o<56;o++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,pA).join("")}async function gA(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function yA(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await gA(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function so(e,t,n=!1){const r=mA();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await po(e,`${t}-code-verifier`,i);const o=await yA(r);return[o,r===o?"plain":"s256"]}const vA=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function xA(e){const t=e.headers.get(np);if(!t||!t.match(vA))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function wA(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function bA(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const kA=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function oo(e){if(!kA.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function th(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Ix(e){return JSON.parse(JSON.stringify(e))}var SA=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const ls=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),EA=[502,503,504];async function Px(e){var t;if(!dA(e))throw new rp(ls(e),0);if(EA.includes(e.status))throw new rp(ls(e),e.status);let n;try{n=await e.json()}catch(o){throw new hs(ls(o),o)}let r;const i=xA(e);if(i&&i.getTime()>=Xb["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Cx(ls(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new ji}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,l)=>o&&typeof l=="string",!0))throw new Cx(ls(n),e.status,n.weak_password.reasons);throw new ZP(ls(n),e.status||500,r)}const _A=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function it(e,t,n,r){var i;const o=Object.assign({},r==null?void 0:r.headers);o[np]||(o[np]=Xb["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const l=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(l.redirect_to=r.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",c=await CA(e,t,n+u,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function CA(e,t,n,r,i,o){const l=_A(t,r,i,o);let u;try{u=await e(n,Object.assign({},l))}catch(c){throw console.error(c),new rp(ls(c),0)}if(u.ok||await Px(u),r!=null&&r.noResolveJson)return u;try{return await u.json()}catch(c){await Px(c)}}function vr(e){var t;let n=null;TA(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=lA(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Ax(e){const t=vr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ai(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function jA(e){return{data:e,error:null}}function NA(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o}=e,l=SA(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o},c=Object.assign({},l);return{data:{properties:u,user:c},error:null}}function Rx(e){return e}function TA(e){return e.access_token&&e.refresh_token&&e.expires_in}const nh=["global","local","others"];var IA=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class PA{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=tk(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=nh[0]){if(nh.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${nh.join(", ")}`);try{return await it(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ge(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await it(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ai})}catch(r){if(Ge(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=IA(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await it(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:NA,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ge(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await it(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ai})}catch(n){if(Ge(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,o,l,u,c;try{const f={nextPage:null,lastPage:0,total:0},h=await it(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Rx});if(h.error)throw h.error;const p=await h.json(),v=(l=h.headers.get("x-total-count"))!==null&&l!==void 0?l:0,y=(c=(u=h.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&c!==void 0?c:[];return y.length>0&&(y.forEach(b=>{const k=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(b.split(";")[1].split("=")[1]);f[`${E}Page`]=k}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},p),f),error:null}}catch(f){if(Ge(f))return{data:{users:[]},error:f};throw f}}async getUserById(t){oo(t);try{return await it(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ai})}catch(n){if(Ge(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){oo(t);try{return await it(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Ai})}catch(r){if(Ge(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){oo(t);try{return await it(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ai})}catch(r){if(Ge(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){oo(t.userId);try{const{data:n,error:r}=await it(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(Ge(n))return{data:null,error:n};throw n}}async _deleteFactor(t){oo(t.userId),oo(t.id);try{return{data:await it(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Ge(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,i,o,l,u,c;try{const f={nextPage:null,lastPage:0,total:0},h=await it(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Rx});if(h.error)throw h.error;const p=await h.json(),v=(l=h.headers.get("x-total-count"))!==null&&l!==void 0?l:0,y=(c=(u=h.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&c!==void 0?c:[];return y.length>0&&(y.forEach(b=>{const k=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(b.split(";")[1].split("=")[1]);f[`${E}Page`]=k}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},p),f),error:null}}catch(f){if(Ge(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(t){try{return await it(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ge(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await it(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ge(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await it(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ge(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await it(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ge(n))return{data:null,error:n};throw n}}}function Ox(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const ao={debug:!!(globalThis&&ek()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class nk extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class AA extends nk{}async function RA(e,t,n){ao.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),ao.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){ao.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{ao.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw ao.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new AA(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ao.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function OA(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function rk(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function MA(e){return parseInt(e,16)}function DA(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function LA(e){var t;const{chainId:n,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:l,notBefore:u,requestId:c,resources:f,scheme:h,uri:p,version:v}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const y=rk(e.address),b=h?`${h}://${r}`:r,k=e.statement?`${e.statement}
`:"",E=`${b} wants you to sign in with your Ethereum account:
${y}

${k}`;let C=`URI: ${p}
Version: ${v}
Chain ID: ${n}${l?`
Nonce: ${l}`:""}
Issued At: ${o.toISOString()}`;if(i&&(C+=`
Expiration Time: ${i.toISOString()}`),u&&(C+=`
Not Before: ${u.toISOString()}`),c&&(C+=`
Request ID: ${c}`),f){let _=`
Resources:`;for(const j of f){if(!j||typeof j!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${j}`);_+=`
- ${j}`}C+=_}return`${E}
${C}`}class Bt extends Error{constructor({message:t,code:n,cause:r,name:i}){var o;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class cc extends Bt{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function $A({error:e,options:t}){var n,r,i;const{publicKey:o}=t;if(!o)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Bt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Bt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Bt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Bt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Bt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Bt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return o.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new Bt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Bt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const l=window.location.hostname;if(sk(l)){if(o.rp.id!==l)return new Bt({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Bt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Bt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Bt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Bt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function FA({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Bt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Bt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(sk(r)){if(n.rpId!==r)return new Bt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Bt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Bt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Bt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var ik=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class zA{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const BA=new zA;function UA(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,i=ik(e,["challenge","user","excludeCredentials"]),o=ko(t).buffer,l=Object.assign(Object.assign({},n),{id:ko(n.id).buffer}),u=Object.assign(Object.assign({},i),{challenge:o,user:l});if(r&&r.length>0){u.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const f=r[c];u.excludeCredentials[c]=Object.assign(Object.assign({},f),{id:ko(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return u}function WA(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=ik(e,["challenge","allowCredentials"]),i=ko(t).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const u=n[l];o.allowCredentials[l]=Object.assign(Object.assign({},u),{id:ko(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function HA(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:vs(new Uint8Array(e.response.attestationObject)),clientDataJSON:vs(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function VA(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:vs(new Uint8Array(i.authenticatorData)),clientDataJSON:vs(new Uint8Array(i.clientDataJSON)),signature:vs(new Uint8Array(i.signature)),userHandle:i.userHandle?vs(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function sk(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Mx(){var e,t;return!!(qn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function qA(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new cc("Browser returned unexpected credential type",t)}:{data:null,error:new cc("Empty credential response",t)}}catch(t){return{data:null,error:$A({error:t,options:e})}}}async function KA(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new cc("Browser returned unexpected credential type",t)}:{data:null,error:new cc("Empty credential response",t)}}catch(t){return{data:null,error:FA({error:t,options:e})}}}const YA={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},GA={userVerification:"preferred",hints:["security-key"]};function dc(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of e)if(i)for(const o in i){const l=i[o];if(l!==void 0)if(Array.isArray(l))r[o]=l;else if(n(l))r[o]=l;else if(t(l)){const u=r[o];t(u)?r[o]=dc(u,l):r[o]=dc(l)}else r[o]=l}return r}function JA(e,t){return dc(YA,e,t||{})}function QA(e,t){return dc(GA,e,t||{})}class XA{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:i},o){try{const{data:l,error:u}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!l)return{data:null,error:u};const c=i??BA.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:f}=l.webauthn.credential_options.publicKey;f.name||(f.name=`${f.id}:${r}`),f.displayName||(f.displayName=f.name)}switch(l.webauthn.type){case"create":{const f=JA(l.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:h,error:p}=await qA({publicKey:f,signal:c});return h?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:h}},error:null}:{data:null,error:p}}case"request":{const f=QA(l.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:h,error:p}=await KA(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:f,signal:c}));return h?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:h}},error:null}:{data:null,error:p}}}}catch(l){return Ge(l)?{data:null,error:l}:{data:null,error:new hs("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}},o){if(!n)return{data:null,error:new el("rpId is required for WebAuthn authentication")};try{if(!Mx())return{data:null,error:new hs("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:o});if(!l)return{data:null,error:u};const{webauthn:c}=l;return this._verify({factorId:t,challengeId:l.challengeId,webauthn:{type:c.type,rpId:n,rpOrigins:r,credential_response:c.credential_response}})}catch(l){return Ge(l)?{data:null,error:l}:{data:null,error:new hs("Unexpected error in authenticate",l)}}}async _register({friendlyName:t,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i},o){if(!n)return{data:null,error:new el("rpId is required for WebAuthn registration")};try{if(!Mx())return{data:null,error:new hs("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this._enroll({friendlyName:t});if(!l)return await this.client.mfa.listFactors().then(h=>{var p;return(p=h.data)===null||p===void 0?void 0:p.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===t&&v.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:u};const{data:c,error:f}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:o});return c?this._verify({factorId:l.id,challengeId:c.challengeId,webauthn:{rpId:n,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:f}}catch(l){return Ge(l)?{data:null,error:l}:{data:null,error:new hs("Unexpected error in register",l)}}}}OA();const ZA={url:YP,storageKey:GP,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:JP,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Dx(e,t,n){return await n()}const lo={};class tl{get jwks(){var t,n;return(n=(t=lo[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){lo[this.storageKey]=Object.assign(Object.assign({},lo[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=lo[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){lo[this.storageKey]=Object.assign(Object.assign({},lo[this.storageKey]),{cachedAt:t})}constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=tl.nextInstanceID,tl.nextInstanceID+=1,this.instanceID>0&&qn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},ZA),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new PA({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=tk(i.fetch),this.lock=i.lock||Dx,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:qn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=RA:this.lock=Dx,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new XA(this)},this.persistSession?(i.storage?this.storage=i.storage:ek()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ox(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Ox(this.memoryStorage)),qn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Qb}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=cA(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),qn()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),nA(o)){const c=(t=o.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:l,redirectType:u}=i;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ge(n)?{error:n}:{error:new hs("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,i;try{const o=await it(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:vr}),{data:l,error:u}=o;if(u||!l)return{data:{user:null,session:null},error:u};const c=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(o){if(Ge(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(t){var n,r,i;try{let o;if("email"in t){const{email:h,password:p,options:v}=t;let y=null,b=null;this.flowType==="pkce"&&([y,b]=await so(this.storage,this.storageKey)),o=await it(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:h,password:p,data:(n=v==null?void 0:v.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:y,code_challenge_method:b},xform:vr})}else if("phone"in t){const{phone:h,password:p,options:v}=t;o=await it(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:p,data:(r=v==null?void 0:v.data)!==null&&r!==void 0?r:{},channel:(i=v==null?void 0:v.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:vr})}else throw new Ru("You must provide either an email or phone number and a password");const{data:l,error:u}=o;if(u||!l)return{data:{user:null,session:null},error:u};const c=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(o){if(Ge(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(t){try{let n;if("email"in t){const{email:o,password:l,options:u}=t;n=await it(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Ax})}else if("phone"in t){const{phone:o,password:l,options:u}=t;n=await it(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Ax})}else throw new Ru("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new io}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(Ge(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,i,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,i,o,l,u,c,f,h,p,v;let y,b;if("message"in t)y=t.message,b=t.signature;else{const{chain:k,wallet:E,statement:C,options:_}=t;let j;if(qn())if(typeof E=="object")j=E;else{const U=window;if("ethereum"in U&&typeof U.ethereum=="object"&&"request"in U.ethereum&&typeof U.ethereum.request=="function")j=U.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=E}const I=new URL((n=_==null?void 0:_.url)!==null&&n!==void 0?n:window.location.href),O=await j.request({method:"eth_requestAccounts"}).then(U=>U).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!O||O.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const A=rk(O[0]);let $=(r=_==null?void 0:_.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!$){const U=await j.request({method:"eth_chainId"});$=MA(U)}const ie={domain:I.host,address:A,statement:C,uri:I.href,version:"1",chainId:$,nonce:(i=_==null?void 0:_.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(l=(o=_==null?void 0:_.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(u=_==null?void 0:_.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(c=_==null?void 0:_.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(f=_==null?void 0:_.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(h=_==null?void 0:_.signInWithEthereum)===null||h===void 0?void 0:h.resources};y=LA(ie),b=await j.request({method:"personal_sign",params:[DA(y),A]})}try{const{data:k,error:E}=await it(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:y,signature:b},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:vr});if(E)throw E;return!k||!k.session||!k.user?{data:{user:null,session:null},error:new io}:(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),{data:Object.assign({},k),error:E})}catch(k){if(Ge(k))return{data:{user:null,session:null},error:k};throw k}}async signInWithSolana(t){var n,r,i,o,l,u,c,f,h,p,v,y;let b,k;if("message"in t)b=t.message,k=t.signature;else{const{chain:E,wallet:C,statement:_,options:j}=t;let I;if(qn())if(typeof C=="object")I=C;else{const A=window;if("solana"in A&&typeof A.solana=="object"&&("signIn"in A.solana&&typeof A.solana.signIn=="function"||"signMessage"in A.solana&&typeof A.solana.signMessage=="function"))I=A.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!(j!=null&&j.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");I=C}const O=new URL((n=j==null?void 0:j.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in I&&I.signIn){const A=await I.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},j==null?void 0:j.signInWithSolana),{version:"1",domain:O.host,uri:O.href}),_?{statement:_}:null));let $;if(Array.isArray(A)&&A[0]&&typeof A[0]=="object")$=A[0];else if(A&&typeof A=="object"&&"signedMessage"in A&&"signature"in A)$=A;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in $&&"signature"in $&&(typeof $.signedMessage=="string"||$.signedMessage instanceof Uint8Array)&&$.signature instanceof Uint8Array)b=typeof $.signedMessage=="string"?$.signedMessage:new TextDecoder().decode($.signedMessage),k=$.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in I)||typeof I.signMessage!="function"||!("publicKey"in I)||typeof I!="object"||!I.publicKey||!("toBase58"in I.publicKey)||typeof I.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${O.host} wants you to sign in with your Solana account:`,I.publicKey.toBase58(),..._?["",_,""]:[""],"Version: 1",`URI: ${O.href}`,`Issued At: ${(i=(r=j==null?void 0:j.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=j==null?void 0:j.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${j.signInWithSolana.notBefore}`]:[],...!((l=j==null?void 0:j.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${j.signInWithSolana.expirationTime}`]:[],...!((u=j==null?void 0:j.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${j.signInWithSolana.chainId}`]:[],...!((c=j==null?void 0:j.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${j.signInWithSolana.nonce}`]:[],...!((f=j==null?void 0:j.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${j.signInWithSolana.requestId}`]:[],...!((p=(h=j==null?void 0:j.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||p===void 0)&&p.length?["Resources",...j.signInWithSolana.resources.map($=>`- ${$}`)]:[]].join(`
`);const A=await I.signMessage(new TextEncoder().encode(b),"utf8");if(!A||!(A instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");k=A}}try{const{data:E,error:C}=await it(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:vs(k)},!((v=t.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:vr});if(C)throw C;return!E||!E.session||!E.user?{data:{user:null,session:null},error:new io}:(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),{data:Object.assign({},E),error:C})}catch(E){if(Ge(E))return{data:{user:null,session:null},error:E};throw E}}async _exchangeCodeForSession(t){const n=await ss(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:o,error:l}=await it(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:vr});if(await _i(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new io}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:l})}catch(o){if(Ge(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(t){try{const{options:n,provider:r,token:i,access_token:o,nonce:l}=t,u=await it(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:o,nonce:l,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:vr}),{data:c,error:f}=u;return f?{data:{user:null,session:null},error:f}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new io}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:f})}catch(n){if(Ge(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,i,o,l;try{if("email"in t){const{email:u,options:c}=t;let f=null,h=null;this.flowType==="pkce"&&([f,h]=await so(this.storage,this.storageKey));const{error:p}=await it(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:f,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in t){const{phone:u,options:c}=t,{data:f,error:h}=await it(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(l=c==null?void 0:c.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:h}}throw new Ru("You must provide either an email or phone number.")}catch(u){if(Ge(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(t){var n,r;try{let i,o;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,o=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:u}=await it(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:vr});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const c=l.session,f=l.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(i){if(Ge(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var n,r,i;try{let o=null,l=null;return this.flowType==="pkce"&&([o,l]=await so(this.storage,this.storageKey)),await it(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:jA})}catch(o){if(Ge(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new ji;const{error:i}=await it(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(Ge(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:o}=t,{error:l}=await it(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){const{phone:r,type:i,options:o}=t,{data:l,error:u}=await it(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new Ru("You must provide either an email or phone number and a type")}catch(n){if(Ge(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await ss(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<Xf:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const l=await ss(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=th()}if(this.storage.isServer&&t.user){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,f,h)=>(!l&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,f,h))})}return{data:{session:t},error:null}}const{data:i,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await it(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ai}):await this._useSession(async n=>{var r,i,o;const{data:l,error:u}=n;if(u)throw u;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ji}:await it(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:Ai})})}catch(n){if(Ge(n))return tA(n)&&(await this._removeSession(),await _i(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:i,error:o}=r;if(o)throw o;if(!i.session)throw new ji;const l=i.session;let u=null,c=null;this.flowType==="pkce"&&t.email!=null&&([u,c]=await so(this.storage,this.storageKey));const{data:f,error:h}=await it(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:u,code_challenge_method:c}),jwt:l.access_token,xform:Ai});if(h)throw h;return l.user=f.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(r){if(Ge(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new ji;const n=Date.now()/1e3;let r=n,i=!0,o=null;const{payload:l}=eh(t.access_token);if(l.exp&&(r=l.exp,i=r<=n),i){const{data:u,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!u)return{data:{user:null,session:null},error:null};o=u}else{const{data:u,error:c}=await this._getUser(t.access_token);if(c)throw c;o={access_token:t.access_token,refresh_token:t.refresh_token,user:u.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(n){if(Ge(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:l,error:u}=n;if(u)throw u;t=(r=l.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new ji;const{data:i,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Ge(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!qn())throw new Ou("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Ou(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new _x("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ou("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new _x("No code detected.");const{data:_,error:j}=await this._exchangeCodeForSession(t.code);if(j)throw j;const I=new URL(window.location.href);return I.searchParams.delete("code"),window.history.replaceState(window.history.state,"",I.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:o,refresh_token:l,expires_in:u,expires_at:c,token_type:f}=t;if(!o||!u||!l||!f)throw new Ou("No session defined in URL");const h=Math.round(Date.now()/1e3),p=parseInt(u);let v=h+p;c&&(v=parseInt(c));const y=v-h;y*1e3<=ho&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${p}s`);const b=v-p;h-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,v,h):h-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,v,h);const{data:k,error:E}=await this._getUser(o);if(E)throw E;const C={provider_token:r,provider_refresh_token:i,access_token:o,expires_in:p,expires_at:v,refresh_token:l,token_type:f,user:k.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:C,redirectType:t.type},error:null}}catch(r){if(Ge(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await ss(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return{error:o};const l=(r=i.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:u}=await this.admin.signOut(l,t);if(u&&!(eA(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return t!=="others"&&(await this._removeSession(),await _i(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=uA(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,i;try{const{data:{session:o},error:l}=n;if(l)throw l;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await so(this.storage,this.storageKey,!0));try{return await it(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(Ge(o))return{data:null,error:o};throw o}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(Ge(n))return{data:null,error:n};throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:i}=await this._useSession(async o=>{var l,u,c,f,h;const{data:p,error:v}=o;if(v)throw v;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=t.options)===null||u===void 0?void 0:u.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await it(this.fetch,"GET",y,{headers:this.headers,jwt:(h=(f=p.session)===null||f===void 0?void 0:f.access_token)!==null&&h!==void 0?h:void 0})});if(i)throw i;return qn()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Ge(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:o}}=n;if(i)throw i;const{options:l,provider:u,token:c,access_token:f,nonce:h}=t,p=await it(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o==null?void 0:o.access_token)!==null&&r!==void 0?r:void 0,body:{provider:u,id_token:c,access_token:f,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:vr}),{data:v,error:y}=p;return y?{data:{user:null,session:null},error:y}:!v||!v.session||!v.user?{data:{user:null,session:null},error:new io}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),{data:v,error:y})}catch(i){if(Ge(i))return{data:{user:null,session:null},error:i};throw i}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,i;const{data:o,error:l}=n;if(l)throw l;return await it(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Ge(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await hA(async i=>(i>0&&await fA(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await it(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:vr})),(i,o)=>{const l=200*Math.pow(2,i);return o&&Zf(o)&&Date.now()+l-r<ho})}catch(r){if(this._debug(n,"error",r),Ge(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),qn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await ss(this.storage,this.storageKey);if(i&&this.userStorage){let l=await ss(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:i.user},await po(this.userStorage,this.storageKey+"-user",l)),i.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:th()}else if(i&&!i.user&&!i.user){const l=await ss(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(i.user=l.user,await _i(this.storage,this.storageKey+"-user"),await po(this.storage,this.storageKey,i)):i.user=th()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const o=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Xf;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${Xf}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:l}=await this._callRefreshToken(i.refresh_token);l&&(console.error(l),Zf(l)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(i.access_token);!u&&(l!=null&&l.user)?(i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(r,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new ji;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Fc;const{data:o,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!o.session)throw new ji;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const u={data:o.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(o){if(this._debug(i,"error",o),Ge(o)){const l={data:null,error:o};return Zf(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,r=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const o=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(t,n)}catch(c){o.push(c)}});if(await Promise.all(l),o.length>0){for(let u=0;u<o.length;u+=1)console.error(o[u]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await po(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const o=Ix(i);await po(this.storage,this.storageKey,o)}else{const i=Ix(n);await po(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await _i(this.storage,this.storageKey),await _i(this.storage,this.storageKey+"-code-verifier"),await _i(this.storage,this.storageKey+"-user"),this.userStorage&&await _i(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&qn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ho);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-t)/ho);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${ho}ms, refresh threshold is ${tp} ticks`),i<=tp&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof nk)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!qn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,l]=await so(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(l)}`});i.push(u.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);i.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;return o?{data:null,error:o}:await it(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ge(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,i;const{data:o,error:l}=n;if(l)return{data:null,error:l};const u=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:f}=await it(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return f?{data:null,error:f}:(t.factorType==="totp"&&c.type==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(Ge(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return{data:null,error:o};const l=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?HA(t.webauthn.credential_response):VA(t.webauthn.credential_response)})}:{code:t.code}),{data:u,error:c}=await it(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:c})})}catch(n){if(Ge(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return{data:null,error:o};const l=await it(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(l.error)return l;const{data:u}=l;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:UA(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:WA(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Ge(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const o of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])i.all.push(o),o.status==="verified"&&i[o.factor_type].push(o);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:i},error:o}=t;if(o)return{data:null,error:o};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=eh(i.access_token);let u=null;l.aal&&(u=l.aal);let c=u;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(p=>p.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const h=l.amr||[];return{data:{currentLevel:u,nextLevel:c,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(u=>u.kid===t);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(u=>u.kid===t),r&&this.jwks_cached_at+XP>i)return r;const{data:o,error:l}=await it(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,r=o.keys.find(u=>u.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:y,error:b}=await this.getSession();if(b||!y.session)return{data:null,error:b};r=y.session.access_token}const{header:i,payload:o,signature:l,raw:{header:u,payload:c}}=eh(r);n!=null&&n.allowExpired||wA(o.exp);const f=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!f){const{error:y}=await this.getUser(r);if(y)throw y;return{data:{claims:o,header:i,signature:l},error:null}}const h=bA(i.alg),p=await crypto.subtle.importKey("jwk",f,h,!0,["verify"]);if(!await crypto.subtle.verify(h,p,l,aA(`${u}.${c}`)))throw new ip("Invalid JWT signature");return{data:{claims:o,header:i,signature:l},error:null}}catch(r){if(Ge(r))return{data:null,error:r};throw r}}}tl.nextInstanceID=0;const eR=tl;class tR extends eR{constructor(t){super(t)}}var nR=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};class rR{constructor(t,n,r){var i,o,l;this.supabaseUrl=t,this.supabaseKey=n;const u=KP(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const c=`sb-${u.hostname.split(".")[0]}-auth-token`,f={db:LP,realtime:FP,auth:Object.assign(Object.assign({},$P),{storageKey:c}),global:DP},h=qP(r??{},f);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=h.global.headers)!==null&&o!==void 0?o:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(p,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=h.auth)!==null&&l!==void 0?l:{},this.headers,h.global.fetch),this.fetch=WP(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new ZI(new URL("rest/v1",u).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new RP(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new WI(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return nR(this,void 0,void 0,function*(){var t,n;if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:o,storageKey:l,flowType:u,lock:c,debug:f},h,p){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new tR({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),h),storageKey:l,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:o,flowType:u,lock:c,debug:f,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new gP(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const iR=(e,t,n)=>new rR(e,t,n);function sR(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}sR()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const oR="https://kjsdmygqhxaryvfmnhqr.supabase.co",aR="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imtqc2RteWdxaHhhcnl2Zm1uaHFyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAwMTAxMDEsImV4cCI6MjA3NTU4NjEwMX0.kXL7Dgum6CepvcrS8LVY1v_EHnpyUQOFcqndUQWPrkM",Ht=iR(oR,aR,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),Lx=e=>{let t;const n=new Set,r=(f,h)=>{const p=typeof f=="function"?f(t):f;if(!Object.is(p,t)){const v=t;t=h??(typeof p!="object"||p===null)?p:Object.assign({},t,p),n.forEach(y=>y(t,v))}},i=()=>t,u={setState:r,getState:i,getInitialState:()=>c,subscribe:f=>(n.add(f),()=>n.delete(f))},c=t=e(r,i,u);return u},lR=(e=>e?Lx(e):Lx),uR=e=>e;function cR(e,t=uR){const n=Oe.useSyncExternalStore(e.subscribe,Oe.useCallback(()=>t(e.getState()),[e,t]),Oe.useCallback(()=>t(e.getInitialState()),[e,t]));return Oe.useDebugValue(n),n}const $x=e=>{const t=lR(e),n=r=>cR(t,r);return Object.assign(n,t),n},dR=(e=>e?$x(e):$x),fR="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let $t=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=fR[n[e]&63];return t};var Vu={exports:{}},hR=Vu.exports,Fx;function ok(){return Fx||(Fx=1,(function(e,t){(function(n,r){e.exports=r()})(hR,(function(){var n=1e3,r=6e4,i=36e5,o="millisecond",l="second",u="minute",c="hour",f="day",h="week",p="month",v="quarter",y="year",b="date",k="Invalid Date",E=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,C=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(K){var V=["th","st","nd","rd"],X=K%100;return"["+K+(V[(X-20)%10]||V[X]||V[0])+"]"}},j=function(K,V,X){var W=String(K);return!W||W.length>=V?K:""+Array(V+1-W.length).join(X)+K},I={s:j,z:function(K){var V=-K.utcOffset(),X=Math.abs(V),W=Math.floor(X/60),M=X%60;return(V<=0?"+":"-")+j(W,2,"0")+":"+j(M,2,"0")},m:function K(V,X){if(V.date()<X.date())return-K(X,V);var W=12*(X.year()-V.year())+(X.month()-V.month()),M=V.clone().add(W,p),ee=X-M<0,T=V.clone().add(W+(ee?-1:1),p);return+(-(W+(X-M)/(ee?M-T:T-M))||0)},a:function(K){return K<0?Math.ceil(K)||0:Math.floor(K)},p:function(K){return{M:p,y,w:h,d:f,D:b,h:c,m:u,s:l,ms:o,Q:v}[K]||String(K||"").toLowerCase().replace(/s$/,"")},u:function(K){return K===void 0}},O="en",A={};A[O]=_;var $="$isDayjsObject",ie=function(K){return K instanceof Z||!(!K||!K[$])},U=function K(V,X,W){var M;if(!V)return O;if(typeof V=="string"){var ee=V.toLowerCase();A[ee]&&(M=ee),X&&(A[ee]=X,M=ee);var T=V.split("-");if(!M&&T.length>1)return K(T[0])}else{var F=V.name;A[F]=V,M=F}return!W&&M&&(O=M),M||!W&&O},R=function(K,V){if(ie(K))return K.clone();var X=typeof V=="object"?V:{};return X.date=K,X.args=arguments,new Z(X)},D=I;D.l=U,D.i=ie,D.w=function(K,V){return R(K,{locale:V.$L,utc:V.$u,x:V.$x,$offset:V.$offset})};var Z=(function(){function K(X){this.$L=U(X.locale,null,!0),this.parse(X),this.$x=this.$x||X.x||{},this[$]=!0}var V=K.prototype;return V.parse=function(X){this.$d=(function(W){var M=W.date,ee=W.utc;if(M===null)return new Date(NaN);if(D.u(M))return new Date;if(M instanceof Date)return new Date(M);if(typeof M=="string"&&!/Z$/i.test(M)){var T=M.match(E);if(T){var F=T[2]-1||0,G=(T[7]||"0").substring(0,3);return ee?new Date(Date.UTC(T[1],F,T[3]||1,T[4]||0,T[5]||0,T[6]||0,G)):new Date(T[1],F,T[3]||1,T[4]||0,T[5]||0,T[6]||0,G)}}return new Date(M)})(X),this.init()},V.init=function(){var X=this.$d;this.$y=X.getFullYear(),this.$M=X.getMonth(),this.$D=X.getDate(),this.$W=X.getDay(),this.$H=X.getHours(),this.$m=X.getMinutes(),this.$s=X.getSeconds(),this.$ms=X.getMilliseconds()},V.$utils=function(){return D},V.isValid=function(){return this.$d.toString()!==k},V.isSame=function(X,W){var M=R(X);return this.startOf(W)<=M&&M<=this.endOf(W)},V.isAfter=function(X,W){return R(X)<this.startOf(W)},V.isBefore=function(X,W){return this.endOf(W)<R(X)},V.$g=function(X,W,M){return D.u(X)?this[W]:this.set(M,X)},V.unix=function(){return Math.floor(this.valueOf()/1e3)},V.valueOf=function(){return this.$d.getTime()},V.startOf=function(X,W){var M=this,ee=!!D.u(W)||W,T=D.p(X),F=function(Re,Pe){var te=D.w(M.$u?Date.UTC(M.$y,Pe,Re):new Date(M.$y,Pe,Re),M);return ee?te:te.endOf(f)},G=function(Re,Pe){return D.w(M.toDate()[Re].apply(M.toDate("s"),(ee?[0,0,0,0]:[23,59,59,999]).slice(Pe)),M)},P=this.$W,be=this.$M,ge=this.$D,me="set"+(this.$u?"UTC":"");switch(T){case y:return ee?F(1,0):F(31,11);case p:return ee?F(1,be):F(0,be+1);case h:var ye=this.$locale().weekStart||0,Ce=(P<ye?P+7:P)-ye;return F(ee?ge-Ce:ge+(6-Ce),be);case f:case b:return G(me+"Hours",0);case c:return G(me+"Minutes",1);case u:return G(me+"Seconds",2);case l:return G(me+"Milliseconds",3);default:return this.clone()}},V.endOf=function(X){return this.startOf(X,!1)},V.$set=function(X,W){var M,ee=D.p(X),T="set"+(this.$u?"UTC":""),F=(M={},M[f]=T+"Date",M[b]=T+"Date",M[p]=T+"Month",M[y]=T+"FullYear",M[c]=T+"Hours",M[u]=T+"Minutes",M[l]=T+"Seconds",M[o]=T+"Milliseconds",M)[ee],G=ee===f?this.$D+(W-this.$W):W;if(ee===p||ee===y){var P=this.clone().set(b,1);P.$d[F](G),P.init(),this.$d=P.set(b,Math.min(this.$D,P.daysInMonth())).$d}else F&&this.$d[F](G);return this.init(),this},V.set=function(X,W){return this.clone().$set(X,W)},V.get=function(X){return this[D.p(X)]()},V.add=function(X,W){var M,ee=this;X=Number(X);var T=D.p(W),F=function(be){var ge=R(ee);return D.w(ge.date(ge.date()+Math.round(be*X)),ee)};if(T===p)return this.set(p,this.$M+X);if(T===y)return this.set(y,this.$y+X);if(T===f)return F(1);if(T===h)return F(7);var G=(M={},M[u]=r,M[c]=i,M[l]=n,M)[T]||1,P=this.$d.getTime()+X*G;return D.w(P,this)},V.subtract=function(X,W){return this.add(-1*X,W)},V.format=function(X){var W=this,M=this.$locale();if(!this.isValid())return M.invalidDate||k;var ee=X||"YYYY-MM-DDTHH:mm:ssZ",T=D.z(this),F=this.$H,G=this.$m,P=this.$M,be=M.weekdays,ge=M.months,me=M.meridiem,ye=function(Pe,te,Ne,Be){return Pe&&(Pe[te]||Pe(W,ee))||Ne[te].slice(0,Be)},Ce=function(Pe){return D.s(F%12||12,Pe,"0")},Re=me||function(Pe,te,Ne){var Be=Pe<12?"AM":"PM";return Ne?Be.toLowerCase():Be};return ee.replace(C,(function(Pe,te){return te||(function(Ne){switch(Ne){case"YY":return String(W.$y).slice(-2);case"YYYY":return D.s(W.$y,4,"0");case"M":return P+1;case"MM":return D.s(P+1,2,"0");case"MMM":return ye(M.monthsShort,P,ge,3);case"MMMM":return ye(ge,P);case"D":return W.$D;case"DD":return D.s(W.$D,2,"0");case"d":return String(W.$W);case"dd":return ye(M.weekdaysMin,W.$W,be,2);case"ddd":return ye(M.weekdaysShort,W.$W,be,3);case"dddd":return be[W.$W];case"H":return String(F);case"HH":return D.s(F,2,"0");case"h":return Ce(1);case"hh":return Ce(2);case"a":return Re(F,G,!0);case"A":return Re(F,G,!1);case"m":return String(G);case"mm":return D.s(G,2,"0");case"s":return String(W.$s);case"ss":return D.s(W.$s,2,"0");case"SSS":return D.s(W.$ms,3,"0");case"Z":return T}return null})(Pe)||T.replace(":","")}))},V.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},V.diff=function(X,W,M){var ee,T=this,F=D.p(W),G=R(X),P=(G.utcOffset()-this.utcOffset())*r,be=this-G,ge=function(){return D.m(T,G)};switch(F){case y:ee=ge()/12;break;case p:ee=ge();break;case v:ee=ge()/3;break;case h:ee=(be-P)/6048e5;break;case f:ee=(be-P)/864e5;break;case c:ee=be/i;break;case u:ee=be/r;break;case l:ee=be/n;break;default:ee=be}return M?ee:D.a(ee)},V.daysInMonth=function(){return this.endOf(p).$D},V.$locale=function(){return A[this.$L]},V.locale=function(X,W){if(!X)return this.$L;var M=this.clone(),ee=U(X,W,!0);return ee&&(M.$L=ee),M},V.clone=function(){return D.w(this.$d,this)},V.toDate=function(){return new Date(this.valueOf())},V.toJSON=function(){return this.isValid()?this.toISOString():null},V.toISOString=function(){return this.$d.toISOString()},V.toString=function(){return this.$d.toUTCString()},K})(),H=Z.prototype;return R.prototype=H,[["$ms",o],["$s",l],["$m",u],["$H",c],["$W",f],["$M",p],["$y",y],["$D",b]].forEach((function(K){H[K[1]]=function(V){return this.$g(V,K[0],K[1])}})),R.extend=function(K,V){return K.$i||(K(V,Z,R),K.$i=!0),R},R.locale=U,R.isDayjs=ie,R.unix=function(K){return R(1e3*K)},R.en=A[O],R.Ls=A,R.p={},R}))})(Vu)),Vu.exports}var pR=ok();const Xe=Ro(pR);function rh(e){return e.trim().toLowerCase().normalize("NFKD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,"").replace(/-{2,}/g,"-")}const So=`
  id,
  name,
  subtitle,
  objective_id,
  parent_work_id,
  node_type,
  schedule_kind,
  schedule_number,
  tags,
  order_hint,
  next_work_id,
  variant_of_work_id,
  description_markdown,
  estimated_minutes,
  notes,
  video_urls,
  visibility,
  owner_id,
  owner_email,
  created_at,
  updated_at,
  work_collaborators (
    id,
    email,
    role,
    user_id,
    created_at
  )
`,ak=e=>Array.from(new Set(e.map(t=>t.trim().toLowerCase()).filter(t=>t.length>0))),mR=e=>Array.isArray(e)?e.map(t=>typeof t=="string"?t.trim():"").filter(t=>t.length>0):[],Zp=e=>Array.isArray(e)?Array.from(new Set(e.map(t=>typeof t=="string"?t.trim().toLowerCase():"").filter(t=>t.length>0))):[],gR=e=>e==="day_of_year"||e==="day_of_month"||e==="day_of_week",yR=(e,t)=>{if(!gR(e))return;const n=typeof t=="number"?t:Number(t);if(Number.isFinite(n))return{kind:e,number:Math.trunc(n)}},lk=e=>(e??[]).map(t=>({id:`${t.id}`,email:t.email.toLowerCase(),role:t.role,userId:t.user_id??void 0,createdAt:t.created_at})),em=(e,t)=>{var u,c;const n=lk(e.work_collaborators),r=n.map(f=>f.email),i=((u=t==null?void 0:t.actorEmail)==null?void 0:u.toLowerCase())??"",o=t?e.owner_id===t.actorId:!1,l=o||r.includes(i);return{id:e.id,name:e.name,subtitle:e.subtitle??void 0,objectiveId:e.objective_id,parentWorkId:e.parent_work_id??null,nodeType:e.node_type??void 0,schedule:yR(e.schedule_kind,e.schedule_number),tags:Zp(e.tags),orderHint:typeof e.order_hint=="number"?e.order_hint:void 0,nextWorkId:e.next_work_id??null,variantOfWorkId:e.variant_of_work_id??null,descriptionMarkdown:e.description_markdown??"",estimatedMinutes:e.estimated_minutes??0,notes:e.notes??void 0,videoUrls:mR(e.video_urls),visibility:e.visibility??"private",ownerId:e.owner_id,ownerEmail:((c=e.owner_email)==null?void 0:c.toLowerCase())??"",collaborators:n,collaboratorEmails:r,createdAt:e.created_at,updatedAt:e.updated_at,canEdit:l,isOwner:o}};async function vR(e){const{data:t,error:n}=await Ht.from("works").select(So).order("name");if(n)throw console.error("No se pudieron cargar los trabajos compartidos",n),n;return t.map(r=>em(r,e))}async function zx(e,t){var E;const n=e.id??$t(),r=ak(e.collaboratorEmails),i=t.actorEmail.trim().toLowerCase(),o=(E=e.nodeType)!=null&&E.trim()?e.nodeType.trim():null,l=e.scheduleKind??null,u=typeof e.scheduleNumber=="number"&&Number.isFinite(e.scheduleNumber)?Math.trunc(e.scheduleNumber):null,c=Zp(e.tags??[]),f=typeof e.orderHint=="number"&&Number.isFinite(e.orderHint)?e.orderHint:null,h=e.nextWorkId??null,p=e.variantOfWorkId??null,{data:v,error:y}=await Ht.from("works").insert({id:n,name:e.name,subtitle:e.subtitle??null,objective_id:e.objectiveId,parent_work_id:e.parentWorkId??null,node_type:o,schedule_kind:l,schedule_number:u,tags:c,order_hint:f,next_work_id:h,variant_of_work_id:p,description_markdown:e.descriptionMarkdown,estimated_minutes:e.estimatedMinutes,notes:e.notes??null,video_urls:e.videoUrls,visibility:e.visibility,owner_id:t.actorId,owner_email:i,updated_at:new Date().toISOString()}).select(So).maybeSingle();if(y||!v)throw console.error("No se pudo crear el trabajo",y),y??new Error("Falta respuesta al crear trabajo");if(r.length>0){const C=r.map(j=>({work_id:v.id,email:j})),{error:_}=await Ht.from("work_collaborators").insert(C);if(_)throw console.error("No se pudieron guardar los colaboradores",_),_}const{data:b,error:k}=await Ht.from("works").select(So).eq("id",v.id).maybeSingle();if(k||!b)throw console.error("No se pudo refrescar el trabajo creado",k),k??new Error("No se pudo cargar el trabajo creado");return em(b,t)}async function xR(e,t,n){const r={};t.name!==void 0&&(r.name=t.name),t.subtitle!==void 0&&(r.subtitle=t.subtitle),t.objectiveId!==void 0&&(r.objective_id=t.objectiveId),t.parentWorkId!==void 0&&(r.parent_work_id=t.parentWorkId),t.nodeType!==void 0&&(r.node_type=t.nodeType),t.scheduleKind!==void 0&&(r.schedule_kind=t.scheduleKind),t.scheduleNumber!==void 0&&(r.schedule_number=t.scheduleNumber),t.tags!==void 0&&(r.tags=Zp(t.tags)),t.orderHint!==void 0&&(r.order_hint=t.orderHint),t.nextWorkId!==void 0&&(r.next_work_id=t.nextWorkId),t.variantOfWorkId!==void 0&&(r.variant_of_work_id=t.variantOfWorkId),t.descriptionMarkdown!==void 0&&(r.description_markdown=t.descriptionMarkdown),t.estimatedMinutes!==void 0&&(r.estimated_minutes=t.estimatedMinutes),t.notes!==void 0&&(r.notes=t.notes),t.videoUrls!==void 0&&(r.video_urls=t.videoUrls),t.visibility!==void 0&&(r.visibility=t.visibility),r.updated_at=new Date().toISOString();let i=null;if(Object.keys(r).length>0){const{data:o,error:l}=await Ht.from("works").update(r).eq("id",e).select(So).maybeSingle();if(l||!o)throw console.error("No se pudo actualizar el trabajo",l),l??new Error("Falta respuesta al actualizar trabajo");i=o}else{const{data:o,error:l}=await Ht.from("works").select(So).eq("id",e).maybeSingle();if(l||!o)throw l??new Error("Trabajo no encontrado");i=o}if(t.collaboratorEmails){const o=ak(t.collaboratorEmails),l=lk(i.work_collaborators),u=l.map(v=>v.email),c=o.filter(v=>!u.includes(v)),f=l.filter(v=>!o.includes(v.email));if(c.length>0){const v=c.map(b=>({work_id:e,email:b})),{error:y}=await Ht.from("work_collaborators").insert(v);if(y)throw console.error("No se pudieron aadir los colaboradores",y),y}if(f.length>0){const v=f.map(b=>b.email),{error:y}=await Ht.from("work_collaborators").delete().eq("work_id",e).in("email",v);if(y)throw console.error("No se pudieron eliminar colaboradores",y),y}const{data:h,error:p}=await Ht.from("works").select(So).eq("id",e).maybeSingle();if(p||!h)throw p??new Error("Error al refrescar colaboradores");i=h}return em(i,n)}async function wR(e){const{error:t}=await Ht.from("works").delete().eq("id",e);if(t)throw console.error("No se pudo eliminar el trabajo",t),t}const xt={objectives:"sport-planner-objetivos",works:"sport-planner-trabajos",sessions:"sport-planner-sesiones",assistants:"sport-planner-asistentes",plans:"sport-planner-plans",kungfuPrograms:"sport-planner-kungfu-programs",kungfuCadence:"sport-planner-kungfu-cadence",kungfuTodayPlan:"sport-planner-kungfu-today-plan",workTaxonomy:"sport-planner-work-taxonomy"},uk=typeof window<"u",yt=()=>new Date().toISOString(),us="18:30",ps="classes",Di="personal-kungfu",ms=[{id:"default",name:"Kung Fu  activo",enabled:!0,include:[{byTags:["kungfu"]}],exclude:[]}],Ti={targetsDays:{work:7,technique:5,segment:8,form:10,drill:7},overrides:[]},ln={limitMode:"count",maxItems:12,minutesBudget:30,template:{totalMinutes:30,focusMinutes:18,rouletteMinutes:10,recapMinutes:2},defaultMinutesByNodeType:{work:3,technique:1.5,segment:6,form:15,drill:4,reading:5,link:2},focusSelectors:[],rouletteSelectors:[],groups:[{id:"formas",name:"Formas",enabled:!0,order:1,type:"work",limitMode:"minutes",minutesBudget:18,strategy:"overdue",hierarchyRule:"prefer_leaves",include:[{byNodeTypes:["segment","form"]}],exclude:[]},{id:"tecnicas",name:"Tcnicas",enabled:!0,order:2,type:"work",limitMode:"minutes",minutesBudget:10,strategy:"weighted",hierarchyRule:"allow_all",include:[{byNodeTypes:["technique"]},{byTags:["roulette"]}],exclude:[]},{id:"recap",name:"Recap",enabled:!0,order:99,type:"note",limitMode:"minutes",minutesBudget:2}]},Ri={nodeTypes:[{key:"form",label:"Form"},{key:"segment",label:"Segment"},{key:"application",label:"Application"},{key:"technique",label:"Technique"},{key:"drill",label:"Drill"},{key:"reading",label:"Reading"},{key:"work",label:"Work"},{key:"link",label:"Link"},{key:"style",label:"Style"}],tags:[]},bR=e=>e==="class"||e==="personal",kR=(e,t)=>{if(!e||typeof e!="object")return t;const n=e,r=String(n.id??"").trim();if(!r)return t;const i=bR(n.kind)?n.kind:t.kind,o=String(n.name??"").trim()||t.name,l=typeof n.enabled=="boolean"?n.enabled:t.enabled,u=String(n.createdAt??"").trim()||t.createdAt,c=String(n.updatedAt??"").trim()||t.updatedAt;return{...t,id:r,kind:i,name:o,enabled:l,cadence:n.cadence??t.cadence,todayPlan:n.todayPlan??t.todayPlan,createdAt:u,updatedAt:c}},ck=(e,t,n)=>[{id:ps,name:"Clases",kind:"class",enabled:!0,createdAt:e,updatedAt:e},{id:Di,name:"Personal Kung Fu",kind:"personal",enabled:!0,cadence:t,todayPlan:n,createdAt:e,updatedAt:e}],cs=(e,t,n,r)=>{const i=ck(r,t,n),l=(Array.isArray(e)?e:[]).map(f=>{const h=String((f==null?void 0:f.id)??"").trim(),p=i.find(v=>v.id===h)??{id:h||$t(),name:"Plan",kind:"personal",enabled:!0,cadence:t,todayPlan:n,createdAt:r,updatedAt:r};return kR(f,p)}).filter(f=>f.id.length>0),u=new Map;l.forEach(f=>{u.set(f.id,f)}),i.forEach(f=>{u.has(f.id)||u.set(f.id,f)});const c=u.get(Di);return c&&u.set(Di,{...c,cadence:c.cadence??t,todayPlan:c.todayPlan??n}),Array.from(u.values()).sort((f,h)=>{const p=f.kind===h.kind?0:f.kind==="class"?-1:1;return p!==0?p:f.name.localeCompare(h.name,"es",{sensitivity:"base"})})},SR=e=>{const n=(Array.isArray(e)?e:[]).map(i=>{if(!i||typeof i!="object")return null;const o=i,l=String(o.key??"").trim().toLowerCase(),u=String(o.label??"").trim();return l?{key:l,label:u||l}:null}).filter(Boolean),r=new Map;return n.forEach(i=>{r.set(i.key,i)}),Ri.nodeTypes.forEach(i=>{r.has(i.key)||r.set(i.key,i)}),Array.from(r.values()).sort((i,o)=>i.label.localeCompare(o.label,"en",{sensitivity:"base"}))},ER=e=>{const n=(Array.isArray(e)?e:[]).map(i=>{if(typeof i=="string"){const u=i.trim().toLowerCase();return u?{name:u}:null}if(!i||typeof i!="object")return null;const l=String(i.name??"").trim().toLowerCase();return l?{name:l}:null}).filter(Boolean),r=new Map;return n.forEach(i=>r.set(i.name,i)),Array.from(r.values()).sort((i,o)=>i.name.localeCompare(o.name,"en",{sensitivity:"base"}))},Hn=(e,t)=>{const n=(e&&typeof e=="object"?e:{})??{},r=SR(n.nodeTypes),i=ER(n.tags),o=new Map(r.map(u=>[u.key,u])),l=new Map(i.map(u=>[u.name,u]));return t.forEach(u=>{const c=(u.nodeType??"").trim().toLowerCase();c&&!o.has(c)&&o.set(c,{key:c,label:c}),(u.tags??[]).forEach(f=>{const h=String(f??"").trim().toLowerCase();h&&!l.has(h)&&l.set(h,{name:h})})}),{nodeTypes:Array.from(o.values()).sort((u,c)=>u.label.localeCompare(c.label,"en",{sensitivity:"base"})),tags:Array.from(l.values()).sort((u,c)=>u.name.localeCompare(c.name,"en",{sensitivity:"base"}))}},Bx=e=>Array.from(new Set((Array.isArray(e)?e:[]).map(t=>String(t??"").trim().toLowerCase()).filter(t=>t.length>0))),_R=e=>Array.from(new Set((Array.isArray(e)?e:[]).map(t=>String(t??"").trim()).filter(t=>t.length>0))),dk=e=>e==="count"||e==="minutes"||e==="both",CR=e=>e==="work"||e==="note",jR=e=>e==="overdue"||e==="weighted",NR=e=>e==="allow_all"||e==="prefer_leaves",TR=e=>{const t={},n=Bx(e.byTags),r=Bx(e.byNodeTypes),i=_R(e.byWorkIds);return n.length>0&&(t.byTags=n),r.length>0&&(t.byNodeTypes=r),i.length>0&&(t.byWorkIds=i),t},Io=e=>(e??[]).map(TR).filter(t=>Object.keys(t).length>0),IR=e=>{if(!Array.isArray(e))return[];const t=e.map(n=>Number(n)).filter(n=>Number.isFinite(n)).map(n=>Math.round(n)).filter(n=>n>=0&&n<=6);return Array.from(new Set(t)).sort((n,r)=>n-r)},PR=e=>{const t={};return!e||typeof e!="object"?{...ln.defaultMinutesByNodeType}:(Object.entries(e).forEach(([n,r])=>{const i=n.trim().toLowerCase(),o=Number(r);i&&Number.isFinite(o)&&(t[i]=Math.max(.25,o))}),Object.keys(t).length>0?t:{...ln.defaultMinutesByNodeType})},AR=(e,t)=>{const n=String(e.id??"").trim()||$t(),r=CR(e.type)?e.type:"work",i=typeof e.enabled=="boolean"?e.enabled:!0,o=String(e.name??"").trim()||(r==="note"?"Recap":"Grupo"),l=Number.isFinite(Number(e.order))?Number(e.order):t,u=IR(e.daysOfWeek),c=dk(e.limitMode)?e.limitMode:"minutes",f=Number.isFinite(Number(e.maxItems))?Math.max(0,Math.round(Number(e.maxItems))):void 0,h=Number.isFinite(Number(e.minutesBudget))?Math.max(0,Number(e.minutesBudget)):void 0,p=jR(e.strategy)?e.strategy:"overdue",v=NR(e.hierarchyRule)?e.hierarchyRule:"allow_all",y=Io(e.include),b=Io(e.exclude);return{id:n,name:o,enabled:i,order:l,type:r,daysOfWeek:u,limitMode:c,maxItems:f,minutesBudget:h,strategy:p,hierarchyRule:v,include:y,exclude:b}},RR=e=>{var f,h,p;const t=Math.max(0,Number((f=e.template)==null?void 0:f.focusMinutes)||0),n=Math.max(0,Number((h=e.template)==null?void 0:h.rouletteMinutes)||0),r=Math.max(0,Number((p=e.template)==null?void 0:p.recapMinutes)||0),i=Io(e.focusSelectors),o=Io(e.rouletteSelectors),l=i.length>0?i:[{byNodeTypes:["segment","form"]}],u=o.length>0?o:[{byNodeTypes:["technique"]},{byTags:["roulette"]}],c=[{id:"formas",name:"Formas",enabled:!0,order:1,type:"work",limitMode:"minutes",minutesBudget:t>0?t:18,strategy:"overdue",hierarchyRule:"prefer_leaves",include:l,exclude:[]},{id:"tecnicas",name:"Tcnicas",enabled:!0,order:2,type:"work",limitMode:"minutes",minutesBudget:n>0?n:10,strategy:"weighted",hierarchyRule:"allow_all",include:u,exclude:[]}];return r>0&&c.push({id:"recap",name:"Recap",enabled:!0,order:99,type:"note",limitMode:"minutes",minutesBudget:r}),c},qu=e=>{var b,k,E;const t=e??ln,n=dk(t.limitMode)?t.limitMode:ln.limitMode,r=Math.max(1,Math.round(Number(t.maxItems)||ln.maxItems)),i=Math.max(1,Number(t.minutesBudget)||ln.minutesBudget),o=Math.max(0,Number((b=t.template)==null?void 0:b.focusMinutes)||ln.template.focusMinutes),l=Math.max(0,Number((k=t.template)==null?void 0:k.rouletteMinutes)||ln.template.rouletteMinutes),u=Math.max(0,Number((E=t.template)==null?void 0:E.recapMinutes)||ln.template.recapMinutes),c=Math.max(0,o+l+u),f=PR(t.defaultMinutesByNodeType),h=Io(t.focusSelectors),p=Io(t.rouletteSelectors),y=((t.groups??[]).length>0?t.groups??[]:RR(t)).map((C,_)=>AR(C,_+1)).sort((C,_)=>C.order-_.order).map((C,_)=>({...C,order:_+1}));return{...t,limitMode:n,maxItems:r,minutesBudget:i,template:{totalMinutes:c,focusMinutes:o,rouletteMinutes:l,recapMinutes:u},defaultMinutesByNodeType:f,focusSelectors:h,rouletteSelectors:p,groups:y}},On=e=>{if(!e)return null;const t=e.trim();return t.length>0?t:null},Ku=e=>Array.from(new Set((e??[]).map(t=>(t??"").trim().toLowerCase()).filter(t=>t.length>0))),xr=e=>{if(!e)return;const t=e.trim();return t.length>0?t:void 0},OR=e=>e==="day_of_year"||e==="day_of_month"||e==="day_of_week",sp=e=>Array.from(new Set((e??[]).map(t=>(t??"").trim().toLowerCase()).filter(t=>t.length>0))),Ni=e=>{var k,E,C;const t=yt(),n=On(e.parentWorkId??null),r=On(e.nextWorkId??null),i=On(e.variantOfWorkId??null),o=xr(e.nodeType??void 0),l=Ku(e.tags),u=OR((k=e.schedule)==null?void 0:k.kind)?(E=e.schedule)==null?void 0:E.kind:void 0,c=(C=e.schedule)==null?void 0:C.number,f=typeof c=="number"&&Number.isFinite(c)?Math.trunc(c):void 0,h=u&&typeof f=="number"?{kind:u,number:f}:void 0,p=typeof e.orderHint=="number"&&Number.isFinite(e.orderHint)?e.orderHint:void 0,v=(e.collaborators??[]).map((_,j)=>({id:_.id??`${e.id}-collab-${j}`,email:(_.email??"").trim().toLowerCase(),role:_.role??"editor",userId:_.userId??null,createdAt:_.createdAt??t})),y=sp([...e.collaboratorEmails??[],...v.map(_=>_.email)]),b=Array.isArray(e.videoUrls)?e.videoUrls.map(_=>typeof _=="string"?_.trim():"").filter(Boolean):[];return{id:e.id,name:e.name??"Trabajo sin nombre",subtitle:xr(e.subtitle),objectiveId:e.objectiveId??"",parentWorkId:n,nodeType:o,schedule:h,tags:l,orderHint:p,nextWorkId:r,variantOfWorkId:i,descriptionMarkdown:e.descriptionMarkdown??"",estimatedMinutes:e.estimatedMinutes??0,notes:xr(e.notes),videoUrls:b,createdAt:e.createdAt??t,updatedAt:e.updatedAt??t,visibility:e.visibility??"private",ownerId:e.ownerId??"local-owner",ownerEmail:(e.ownerEmail??"").trim().toLowerCase(),collaborators:v,collaboratorEmails:y,canEdit:e.canEdit??!0,isOwner:e.isOwner??!0}},MR=(e,t,n)=>{var o;if(!n)return!1;if(n===t)return!0;const r=new Set;let i=n;for(;i;){if(i===t)return!0;if(r.has(i))break;r.add(i),i=((o=e.find(u=>u.id===i))==null?void 0:o.parentWorkId)??null}return!1},nn=(e,t)=>{if(!uk)return t;try{const n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(n){return console.warn(`No se pudo cargar ${e} desde localStorage`,n),t}},fk=e=>e==="present"||e==="absent"||e==="pending",hk=e=>e==="present"||e==="absent",op=e=>(e??[]).map(t=>{const n=fk(t.status)?t.status:"pending",r=hk(t.actualStatus)?t.actualStatus:void 0;return{assistantId:t.assistantId,status:n,actualStatus:r,notes:t.notes,actualNotes:t.actualNotes}}),lt=e=>{if(!uk)return;const t={objectives:nn(xt.objectives,[]),works:nn(xt.works,[]),sessions:nn(xt.sessions,[]),assistants:nn(xt.assistants,[]),plans:nn(xt.plans,[]),kungfuPrograms:nn(xt.kungfuPrograms,ms),kungfuCadence:nn(xt.kungfuCadence,Ti),kungfuTodayPlan:nn(xt.kungfuTodayPlan,ln),workTaxonomy:nn(xt.workTaxonomy,Ri)},n=ap({...t,...e});window.localStorage.setItem(xt.objectives,JSON.stringify(n.objectives)),window.localStorage.setItem(xt.works,JSON.stringify(n.works)),window.localStorage.setItem(xt.sessions,JSON.stringify(n.sessions)),window.localStorage.setItem(xt.assistants,JSON.stringify(n.assistants)),window.localStorage.setItem(xt.plans,JSON.stringify(n.plans)),window.localStorage.setItem(xt.kungfuPrograms,JSON.stringify(n.kungfuPrograms)),window.localStorage.setItem(xt.kungfuCadence,JSON.stringify(n.kungfuCadence)),window.localStorage.setItem(xt.kungfuTodayPlan,JSON.stringify(n.kungfuTodayPlan)),window.localStorage.setItem(xt.workTaxonomy,JSON.stringify(n.workTaxonomy))},ap=e=>{const t=yt(),n=(e.works??[]).map(u=>{const c=u.parent_work_id;return Ni({...u,id:u.id,parentWorkId:On(u.parentWorkId??c??null)})}),r=Hn(e.workTaxonomy??Ri,n),i=e.kungfuCadence??Ti,o=qu(e.kungfuTodayPlan??ln),l=cs(e.plans,i,o,t);return{objectives:e.objectives??[],works:n,sessions:(e.sessions??[]).map(u=>({...u,planId:(u.planId??"").trim()||((u.kind??"class")==="personal"?Di:ps),kind:u.kind??"class",startTime:u.startTime??us,workItems:(u.workItems??[]).map(c=>({...c,focusLabel:c.focusLabel,completed:c.completed??!1})),attendance:op(u.attendance)})),assistants:e.assistants??[],plans:l,kungfuPrograms:e.kungfuPrograms??ms,kungfuCadence:i,kungfuTodayPlan:o,workTaxonomy:r}},Ie=dR((e,t)=>({ready:!1,objectives:[],works:[],worksLoading:!1,sessions:[],assistants:[],plans:ck(yt(),Ti,ln),kungfuPrograms:ms,kungfuCadence:Ti,kungfuTodayPlan:ln,workTaxonomy:Ri,hydrate:()=>{if(t().ready)return;const n=nn(xt.objectives,[]),r=nn(xt.works,[]).map(b=>{const k=b.parent_work_id;return Ni({...b,id:b.id,parentWorkId:On(b.parentWorkId??k??null)})}),i=nn(xt.workTaxonomy,Ri),o=Hn(i,r),l=nn(xt.sessions,[]).map(b=>({...b,planId:(b.planId??"").trim()||((b.kind??"class")==="personal"?Di:ps),kind:b.kind??"class",startTime:b.startTime??us,workItems:(b.workItems??[]).map(k=>({...k,focusLabel:k.focusLabel,completed:k.completed??!1})),attendance:op(b.attendance)})),u=nn(xt.assistants,[]),c=nn(xt.kungfuPrograms,ms),f=nn(xt.kungfuCadence,Ti),h=nn(xt.kungfuTodayPlan,ln),p=qu(h),v=nn(xt.plans,[]),y=cs(v,f,p,yt());e({objectives:n,works:r,sessions:l,assistants:u,plans:y,kungfuPrograms:c,kungfuCadence:f,kungfuTodayPlan:p,workTaxonomy:o,ready:!0})},setCollections:n=>{e(r=>{const i=ap({objectives:n.objectives??r.objectives,works:n.works??r.works,sessions:n.sessions??r.sessions,assistants:n.assistants??r.assistants,plans:n.plans??r.plans,kungfuPrograms:n.kungfuPrograms??r.kungfuPrograms,kungfuCadence:n.kungfuCadence??r.kungfuCadence,kungfuTodayPlan:n.kungfuTodayPlan??r.kungfuTodayPlan,workTaxonomy:n.workTaxonomy??r.workTaxonomy}),o={...r,...i,ready:!0};return lt(i),o})},setWorks:n=>{const r=n.map(i=>Ni(i));e(i=>{const o=Hn(i.workTaxonomy,r),l={...i,works:r,workTaxonomy:o};return lt({works:r}),l})},loadWorks:async n=>{e({worksLoading:!0});try{const i=(await vR(n)).map(p=>Ni(p)),o=t().works,l=new Set(i.map(p=>p.id)),u=o.filter(p=>!l.has(p.id)&&(!p.ownerId||p.ownerId==="local-owner"||p.ownerId===n.actorId)),c=[];for(const p of u)try{const v=await zx({id:p.id,name:p.name,subtitle:p.subtitle,objectiveId:p.objectiveId,parentWorkId:p.parentWorkId??null,nodeType:p.nodeType,tags:p.tags,orderHint:p.orderHint,nextWorkId:p.nextWorkId??null,variantOfWorkId:p.variantOfWorkId??null,descriptionMarkdown:p.descriptionMarkdown,estimatedMinutes:p.estimatedMinutes,notes:p.notes,videoUrls:p.videoUrls,visibility:p.visibility??"private",collaboratorEmails:p.collaboratorEmails??[]},n),y=Ni(v);c.push(y),l.add(y.id)}catch(v){console.error(`No se pudo migrar el trabajo legacy ${p.id}`,v)}const f=[...i];c.forEach(p=>{if(!l.has(p.id))l.add(p.id),f.push(p);else{const v=f.findIndex(y=>y.id===p.id);v>=0?f[v]=p:f.push(p)}});const h=f.map(p=>Ni(p)).sort((p,v)=>p.name.localeCompare(v.name,"es",{sensitivity:"base"}));e(p=>{const v=Hn(p.workTaxonomy,h),y={...p,works:h,workTaxonomy:v};return lt({works:h}),y})}finally{e({worksLoading:!1})}},reset:()=>{e(n=>{const r=ap({objectives:[],works:[],sessions:[],assistants:[],kungfuPrograms:ms,kungfuCadence:Ti,kungfuTodayPlan:ln,workTaxonomy:Ri}),i={...n,...r,ready:!0,worksLoading:!1};return lt(i),i})},setKungfuPrograms:n=>{const r=Array.isArray(n)?n:ms;e(i=>{const o={...i,kungfuPrograms:r};return lt(o),o})},setKungfuCadence:n=>{const r=n??Ti;e(i=>{const o={...i,kungfuCadence:r};return lt(o),o})},setKungfuTodayPlan:n=>{const r=qu(n??ln);e(i=>{const o={...i,kungfuTodayPlan:r};return lt(o),o})},setWorkTaxonomy:n=>{e(r=>{const i=Hn(n??Ri,r.works),o={...r,workTaxonomy:i};return lt(o),o})},addPlan:({name:n,kind:r})=>{const i=yt(),o={id:$t(),name:n.trim()||(r==="class"?"Clases":"Personal"),kind:r,enabled:!0,cadence:r==="personal"?t().kungfuCadence:void 0,todayPlan:r==="personal"?t().kungfuTodayPlan:void 0,createdAt:i,updatedAt:i};return e(l=>{const u=cs([...l.plans,o],l.kungfuCadence,l.kungfuTodayPlan,i),c={...l,plans:u};return lt(c),c}),o},updatePlan:(n,r)=>{const i=yt();e(o=>{const l=cs(o.plans.map(c=>c.id===n?{...c,...r,updatedAt:i}:c),o.kungfuCadence,o.kungfuTodayPlan,i),u={...o,plans:l};return lt(u),u})},duplicatePlan:n=>{const r=t().plans.find(l=>l.id===n);if(!r)return;const i=yt(),o={...r,id:$t(),name:`${r.name} (copia)`,createdAt:i,updatedAt:i};return e(l=>{const u=cs([...l.plans,o],l.kungfuCadence,l.kungfuTodayPlan,i),c={...l,plans:u};return lt(c),c}),o},deletePlan:n=>{const r=t();return n===ps||n===Di||r.sessions.some(o=>(o.planId??"")===n)?!1:(e(o=>{const l=yt(),u=cs(o.plans.filter(f=>f.id!==n),o.kungfuCadence,o.kungfuTodayPlan,l),c={...o,plans:u};return lt(c),c}),!0)},upsertNodeType:n=>{const r=rh(n);if(!r)return null;const i=n.trim()||r;return e(o=>{const l=o.workTaxonomy.nodeTypes??[],u=l.some(h=>h.key===r)?l.map(h=>h.key===r?{...h,label:i}:h):[...l,{key:r,label:i}],c=Hn({...o.workTaxonomy,nodeTypes:u},o.works),f={...o,workTaxonomy:c};return lt(f),f}),r},removeNodeType:n=>{const r=(n??"").trim().toLowerCase();return!r||t().works.some(o=>(o.nodeType??"").trim().toLowerCase()===r)?!1:(e(o=>{const l=(o.workTaxonomy.nodeTypes??[]).filter(f=>f.key!==r),u=Hn({...o.workTaxonomy,nodeTypes:l},o.works),c={...o,workTaxonomy:u};return lt(c),c}),!0)},upsertTag:n=>{const r=rh(n);return r?(e(i=>{const o=i.workTaxonomy.tags??[],l=o.some(f=>f.name===r)?o:[...o,{name:r}],u=Hn({...i.workTaxonomy,tags:l},i.works),c={...i,workTaxonomy:u};return lt(c),c}),r):null},removeTag:n=>{const r=rh(n??"");return!r||t().works.some(o=>(o.tags??[]).includes(r))?!1:(e(o=>{const l=(o.workTaxonomy.tags??[]).filter(f=>f.name!==r),u=Hn({...o.workTaxonomy,tags:l},o.works),c={...o,workTaxonomy:u};return lt(c),c}),!0)},addObjective:n=>{const r={id:$t(),name:n.name,colorHex:n.colorHex,descriptionMarkdown:n.descriptionMarkdown,createdAt:yt(),updatedAt:yt()};return e(i=>{const o={objectives:[...i.objectives,r]},l={...i,...o};return lt(l),l}),r},updateObjective:(n,r)=>{e(i=>{const o=i.objectives.map(u=>u.id===n?{...u,...r,updatedAt:yt()}:u),l={...i,objectives:o};return lt(l),l})},deleteObjective:n=>t().works.some(i=>i.objectiveId===n)?!1:(e(i=>{const o=i.objectives.filter(u=>u.id!==n),l={...i,objectives:o};return lt(l),l}),!0),addWork:async(n,r)=>{const i=t(),o=On(n.parentWorkId),l=o&&i.works.some(h=>h.id===o)?o:null,u={name:n.name,subtitle:xr(n.subtitle),objectiveId:n.objectiveId,parentWorkId:l,nodeType:xr(n.nodeType)??void 0,tags:Ku(n.tags),orderHint:typeof n.orderHint=="number"&&Number.isFinite(n.orderHint)?n.orderHint:void 0,nextWorkId:On(n.nextWorkId??null),variantOfWorkId:On(n.variantOfWorkId??null),descriptionMarkdown:n.descriptionMarkdown,estimatedMinutes:n.estimatedMinutes,notes:xr(n.notes),videoUrls:(n.videoUrls??[]).map(h=>h.trim()).filter(h=>h.length>0),visibility:n.visibility??"private",collaboratorEmails:sp(n.collaboratorEmails??[])},c=await zx(u,r),f=Ni(c);return e(h=>{const p=[...h.works.filter(y=>y.id!==f.id),f],v=Hn(h.workTaxonomy,p);return lt({works:p,workTaxonomy:v}),{...h,works:p,workTaxonomy:v}}),f},updateWork:async(n,r,i)=>{const o=t(),l=o.works.find(p=>p.id===n);if(!l)throw new Error("Trabajo no encontrado");let u=l.parentWorkId??null;if(r.parentWorkId!==void 0){const p=On(r.parentWorkId);p&&(!o.works.some(v=>v.id===p)||MR(o.works,n,p))?u=null:u=p}const c={...r,subtitle:r.subtitle!==void 0?xr(r.subtitle)??null:void 0,parentWorkId:u,nodeType:r.nodeType!==void 0?xr(r.nodeType??void 0)??null:void 0,tags:r.tags?Ku(r.tags):void 0,orderHint:r.orderHint!==void 0?typeof r.orderHint=="number"&&Number.isFinite(r.orderHint)?r.orderHint:null:void 0,nextWorkId:r.nextWorkId!==void 0?On(r.nextWorkId??null):void 0,variantOfWorkId:r.variantOfWorkId!==void 0?On(r.variantOfWorkId??null):void 0,notes:r.notes!==void 0?xr(r.notes)??null:void 0,videoUrls:r.videoUrls?r.videoUrls.map(p=>p.trim()).filter(p=>p.length>0):void 0,collaboratorEmails:r.collaboratorEmails?sp(r.collaboratorEmails):void 0},f=await xR(n,c,i),h=Ni(f);return e(p=>{const v=p.works.map(b=>b.id===h.id?h:b),y=Hn(p.workTaxonomy,v);return lt({works:v,workTaxonomy:y}),{...p,works:v,workTaxonomy:y}}),h},deleteWork:async(n,r)=>t().sessions.some(l=>l.workItems.some(u=>u.workId===n))||t().works.some(l=>l.parentWorkId===n)?!1:(await wR(n),e(l=>{const u=l.works.filter(f=>f.id!==n),c=Hn(l.workTaxonomy,u);return lt({works:u,workTaxonomy:c}),{...l,works:u,workTaxonomy:c}}),!0),addSession:n=>{var o;const r=(n.planId??"").trim()||((n.kind??"class")==="personal"?Di:ps),i={id:$t(),planId:r,date:n.date,kind:n.kind??((o=t().plans.find(l=>l.id===r))==null?void 0:o.kind)??"class",title:n.title,description:n.description,notes:n.notes,notesByGroupId:n.notesByGroupId,workItems:[],attendance:[],startTime:n.startTime??us,createdAt:yt(),updatedAt:yt()};return e(l=>{const u=[...l.sessions,i],c={...l,sessions:u};return lt(c),c}),i},duplicateSession:(n,r)=>{const i=t().sessions.find(u=>u.id===n);if(!i)return;const o=yt(),l={...i,id:$t(),date:r,startTime:i.startTime??us,createdAt:o,updatedAt:o,title:`${i.title} (copia)`};return l.workItems=i.workItems.slice().sort((u,c)=>u.order-c.order).map((u,c)=>({...u,id:$t(),order:c,completed:!1})),l.attendance=i.attendance.map(u=>({assistantId:u.assistantId,status:"pending",notes:u.notes,actualStatus:void 0,actualNotes:void 0})),e(u=>{const c=[...u.sessions,l],f={...u,sessions:c};return lt(f),f}),l},updateSession:(n,r)=>{e(i=>{const o=i.sessions.map(u=>u.id===n?{...u,...r,updatedAt:yt()}:u),l={...i,sessions:o};return lt(l),l})},deleteSession:n=>{e(r=>{const i=r.sessions.filter(l=>l.id!==n),o={...r,sessions:i};return lt(o),o})},updateSessionWorkItems:(n,r)=>{e(i=>{const o=i.sessions.map(u=>u.id===n?{...u,workItems:r.map((c,f)=>({...c,order:f})),updatedAt:yt()}:u),l={...i,sessions:o};return lt(l),l})},addWorkToSession:(n,r)=>{const i=t().sessions.find(u=>u.id===n);if(!i)return;const o={id:$t(),workId:r.workId,customDescriptionMarkdown:r.customDescriptionMarkdown,customDurationMinutes:r.customDurationMinutes,notes:r.notes,focusLabel:r.focusLabel,completed:!1,order:i.workItems.length},l={...i,workItems:[...i.workItems,o],updatedAt:yt()};return e(u=>{const c=u.sessions.map(h=>h.id===n?l:h),f={...u,sessions:c};return lt(f),f}),o},duplicateSessionWork:(n,r)=>{let i,o=!1;return e(l=>{const u=l.sessions.map(f=>{if(f.id!==n)return f;const h=f.workItems.findIndex(k=>k.id===r);if(h===-1)return f;o=!0;const v={...f.workItems[h],id:$t(),completed:!1},y=[...f.workItems];y.splice(h+1,0,v);const b=y.map((k,E)=>{const C={...k,order:E};return k.id===v.id&&(i=C),C});return{...f,workItems:b,updatedAt:yt()}});if(!o)return l;const c={...l,sessions:u};return lt(c),c}),i},removeWorkFromSession:(n,r)=>{e(i=>{const o=i.sessions.map(u=>{if(u.id!==n)return u;const c=u.workItems.filter(f=>f.id!==r).map((f,h)=>({...f,order:h}));return{...u,workItems:c,updatedAt:yt()}}),l={...i,sessions:o};return lt(l),l})},toggleSessionWorkCompletion:(n,r,i)=>{e(o=>{const l=o.sessions.map(c=>c.id!==n?c:{...c,workItems:c.workItems.map(f=>f.id===r?{...f,completed:i}:f),updatedAt:yt()}),u={...o,sessions:l};return lt(u),u})},reorderSessionWork:(n,r,i)=>{e(o=>{const l=o.sessions.map(c=>{if(c.id!==n)return c;const f=[...c.workItems],[h]=f.splice(r,1);return f.splice(i,0,h),{...c,workItems:f.map((p,v)=>({...p,order:v})),updatedAt:yt()}}),u={...o,sessions:l};return lt(u),u})},updateSessionWorkDetails:(n,r,i)=>{e(o=>{const l=o.sessions.map(c=>c.id!==n?c:{...c,workItems:c.workItems.map(f=>f.id===r?{...f,...i}:f),updatedAt:yt()}),u={...o,sessions:l};return lt(u),u})},replaceSessionWork:(n,r,i)=>{t().works.some(o=>o.id===i)&&e(o=>{const l=o.sessions.map(c=>{if(c.id!==n)return c;const f=c.workItems.map(h=>h.id!==r?h:{...h,workId:i,customDescriptionMarkdown:void 0,customDurationMinutes:void 0,notes:void 0,focusLabel:void 0,completed:!1});return{...c,workItems:f,updatedAt:yt()}}),u={...o,sessions:l};return lt(u),u})},setAttendanceActualStatus:(n,r,i,o)=>{e(l=>{const u=l.sessions.map(f=>{if(f.id!==n)return f;const h=f.attendance.find(v=>v.assistantId===r);let p;if(h)p=f.attendance.map(v=>{if(v.assistantId!==r)return v;const y={...v,actualStatus:i};return typeof o<"u"&&(y.actualNotes=o),y});else{const v={assistantId:r,status:"pending",actualStatus:i};typeof o<"u"&&(v.actualNotes=o),p=[...f.attendance,v]}return{...f,attendance:p,updatedAt:yt()}}),c={...l,sessions:u};return lt(c),c})},setAttendanceStatus:(n,r,i,o)=>{e(l=>{const u=l.sessions.map(f=>{if(f.id!==n)return f;const h=f.attendance.find(v=>v.assistantId===r);let p;return h?p=f.attendance.map(v=>v.assistantId===r?{...v,status:i,notes:o}:v):p=[...f.attendance,{assistantId:r,status:i,notes:o}],{...f,attendance:p,updatedAt:yt()}}),c={...l,sessions:u};return lt(c),c})},addAssistant:n=>{const r={id:$t(),name:n.name,notes:n.notes,active:n.active??!0,createdAt:yt(),updatedAt:yt()};return e(i=>{const o=[...i.assistants,r],l={...i,assistants:o};return lt(l),l}),r},updateAssistant:(n,r)=>{e(i=>{const o=i.assistants.map(u=>u.id===n?{...u,...r,updatedAt:yt()}:u),l={...i,assistants:o};return lt(l),l})},deleteAssistant:n=>{e(r=>{const i=r.assistants.filter(u=>u.id!==n),o=r.sessions.map(u=>({...u,attendance:u.attendance.filter(c=>c.assistantId!==n)})),l={...r,assistants:i,sessions:o};return lt(l),l})},importBackup:n=>{if((n.version??1)!==1)throw new Error("Versin de backup no soportada");const i=yt(),o=(n.objetivos??[]).map(_=>({..._,createdAt:_.createdAt??i,updatedAt:_.updatedAt??i})),l=(n.trabajos??[]).map(_=>{const j=_.parent_work_id,I=_.node_type,O=_.tags,A=_.order_hint,$=_.next_work_id,ie=_.variant_of_work_id;return{..._,subtitle:xr(_.subtitle),parentWorkId:On(_.parentWorkId??j??null),nodeType:xr(_.nodeType??I??void 0),tags:Ku(Array.isArray(_.tags)?_.tags:Array.isArray(O)?O:[]),orderHint:typeof _.orderHint=="number"?_.orderHint:typeof A=="number"?A:void 0,nextWorkId:On(_.nextWorkId??$??null),variantOfWorkId:On(_.variantOfWorkId??ie??null),createdAt:_.createdAt??i,updatedAt:_.updatedAt??i,videoUrls:_.videoUrls??[]}}),u=(n.asistentes??[]).map(_=>({..._,createdAt:_.createdAt??i,updatedAt:_.updatedAt??i,active:_.active??!0})),c=n.kungfuPrograms??ms,f=n.kungfuCadence??Ti,h=n.kungfuTodayPlan??ln,p=Hn(n.workTaxonomy??Ri,l),v=cs(n.plans,f,qu(h),i),y=new Map;(n.sesiones??[]).forEach(_=>{const j=_.id??$t(),I=_.notesByGroupId??void 0,O={id:j,planId:(_.planId??"").trim()||((_.kind??"class")==="personal"?Di:ps),date:_.date??Xe().format("YYYY-MM-DD"),kind:_.kind??"class",title:_.title??"Sesin importada",description:_.description,notes:_.notes,notesByGroupId:I??void 0,workItems:(_.workItems??[]).map((A,$)=>({id:A.id??$t(),workId:A.workId,order:A.order??$,customDescriptionMarkdown:A.customDescriptionMarkdown,customDurationMinutes:A.customDurationMinutes,notes:A.notes,focusLabel:A.focusLabel,completed:A.completed??!1,result:A.result,effort:A.effort})),attendance:op(_.attendance),startTime:_.startTime??us,createdAt:_.createdAt??i,updatedAt:_.updatedAt??i};O.workItems=O.workItems.sort((A,$)=>A.order-$.order).map((A,$)=>({...A,order:$})),y.set(j,O)}),(n.sesiones_trabajos??[]).forEach(_=>{const j=_.session_id;if(!j)return;y.has(j)||y.set(j,{id:j,planId:ps,date:_.fecha?Xe(_.fecha).format("YYYY-MM-DD"):Xe().format("YYYY-MM-DD"),kind:"class",title:_.titulo??"Sesin importada",description:_.descripcion,notes:_.notasSesion??_.notas,workItems:[],attendance:[],startTime:us,createdAt:i,updatedAt:i});const I=y.get(j);I.workItems.push({id:_.id??$t(),workId:_.trabajo_id,order:_.orden??I.workItems.length,customDescriptionMarkdown:_.descripcionPersonalizada,customDurationMinutes:_.duracionPersonalizada,notes:_.notas,focusLabel:_.focusLabel??_.foco,completed:_.completed??!1,result:_.result??_.resultado,effort:_.effort??_.esfuerzo})}),y.forEach(_=>{_.workItems=_.workItems.sort((j,I)=>j.order-I.order).map((j,I)=>({...j,order:I})),_.startTime=_.startTime??us});const b=new Map,k=_=>fk(_)?_:void 0,E=_=>hk(_)?_:void 0;(n.sesiones_asistencias??[]).forEach(_=>{const j=_.session_id;if(!j)return;const I=_.assistantId??_.asistente_id;if(!I)return;const O=k(_.status??_.estado)??"pending",A=E(_.actualStatus??_.estado_real),$={assistantId:I,status:O,notes:_.notes??_.notas,actualStatus:A,actualNotes:_.actualNotes??_.notas_reales},ie=b.get(j)??[];ie.push($),b.set(j,ie)}),b.forEach((_,j)=>{const I=y.get(j);I&&(I.attendance=_)});const C=Array.from(y.values());e({objectives:o,works:l,sessions:C,assistants:u,plans:v,kungfuPrograms:c,kungfuCadence:f,kungfuTodayPlan:h,workTaxonomy:p,ready:!0}),lt({objectives:o,works:l,sessions:C,assistants:u,plans:v,kungfuPrograms:c,kungfuCadence:f,kungfuTodayPlan:h,workTaxonomy:p})},exportBackup:()=>{const n=t(),r=n.sessions.flatMap(u=>u.workItems.map(c=>({id:c.id,session_id:u.id,trabajo_id:c.workId,orden:c.order,descripcionPersonalizada:c.customDescriptionMarkdown,duracionPersonalizada:c.customDurationMinutes,notas:c.notes,foco:c.focusLabel,focusLabel:c.focusLabel,completed:c.completed??!1,result:c.result,effort:c.effort}))),i=n.sessions.flatMap(u=>u.attendance.map(c=>({session_id:u.id,assistantId:c.assistantId,estado:c.status,notas:c.notes,...c.actualStatus?{actualStatus:c.actualStatus,estado_real:c.actualStatus}:{},...c.actualNotes?{actualNotes:c.actualNotes,notas_reales:c.actualNotes}:{}}))),o=n.sessions.map(u=>({id:u.id,planId:u.planId,date:u.date,kind:u.kind,title:u.title,description:u.description,notes:u.notes,notesByGroupId:u.notesByGroupId,startTime:u.startTime,createdAt:u.createdAt,updatedAt:u.updatedAt}));return{version:1,usuarios:[],objetivos:n.objectives,trabajos:n.works,sesiones:o,sesiones_trabajos:r,asistentes:n.assistants,sesiones_asistencias:i,plans:n.plans,kungfuPrograms:n.kungfuPrograms,kungfuCadence:n.kungfuCadence,kungfuTodayPlan:n.kungfuTodayPlan,workTaxonomy:n.workTaxonomy}}})),Ux=1,DR=[{id:"default",name:"Kung Fu  activo",enabled:!0,include:[{byTags:["kungfu"]}],exclude:[]}],LR={targetsDays:{work:7,technique:5,segment:8,form:10,drill:7},overrides:[]},$R={limitMode:"count",maxItems:12,minutesBudget:30,template:{totalMinutes:30,focusMinutes:18,rouletteMinutes:10,recapMinutes:2},defaultMinutesByNodeType:{work:3,technique:1.5,segment:6,form:15,drill:4,reading:5,link:2},focusSelectors:[],rouletteSelectors:[],groups:[{id:"formas",name:"Formas",enabled:!0,order:1,type:"work",limitMode:"minutes",minutesBudget:18,strategy:"overdue",hierarchyRule:"prefer_leaves",include:[{byNodeTypes:["segment","form"]}],exclude:[]},{id:"tecnicas",name:"Tcnicas",enabled:!0,order:2,type:"work",limitMode:"minutes",minutesBudget:10,strategy:"weighted",hierarchyRule:"allow_all",include:[{byNodeTypes:["technique"]},{byTags:["roulette"]}],exclude:[]},{id:"recap",name:"Recap",enabled:!0,order:99,type:"note",limitMode:"minutes",minutesBudget:2}]},FR={nodeTypes:[{key:"form",label:"Form"},{key:"segment",label:"Segment"},{key:"application",label:"Application"},{key:"technique",label:"Technique"},{key:"drill",label:"Drill"},{key:"reading",label:"Reading"},{key:"work",label:"Work"},{key:"link",label:"Link"},{key:"style",label:"Style"}],tags:[]},Mu=e=>({objectives:e.objectives,works:e.works,sessions:e.sessions,assistants:e.assistants,plans:e.plans,kungfuPrograms:e.kungfuPrograms,kungfuCadence:e.kungfuCadence,kungfuTodayPlan:e.kungfuTodayPlan,workTaxonomy:e.workTaxonomy}),zR=e=>({objectives:e.objectives??[],works:e.works??[],sessions:(e.sessions??[]).map(t=>({...t,planId:(t.planId??"").trim()||void 0,kind:t.kind??"class",workItems:t.workItems??[],attendance:t.attendance??[]})),assistants:e.assistants??[],plans:e.plans??[],kungfuPrograms:e.kungfuPrograms??DR,kungfuCadence:e.kungfuCadence??LR,kungfuTodayPlan:e.kungfuTodayPlan??$R,workTaxonomy:e.workTaxonomy??FR}),BR=(e,t)=>e.objectives!==t.objectives||e.works!==t.works||e.sessions!==t.sessions||e.assistants!==t.assistants||e.plans!==t.plans||e.kungfuPrograms!==t.kungfuPrograms||e.kungfuCadence!==t.kungfuCadence||e.kungfuTodayPlan!==t.kungfuTodayPlan||e.workTaxonomy!==t.workTaxonomy;function UR(){const{user:e}=js(),t=Ie(f=>f.setCollections),n=Ie(f=>f.reset),r=Ie(f=>f.ready),i=w.useRef(!1),o=w.useRef(null),l=w.useRef(null),u=w.useRef(null),c=w.useRef(Mu(Ie.getState()));w.useEffect(()=>()=>{o.current&&(window.clearTimeout(o.current),o.current=null)},[]),w.useEffect(()=>{e||(n(),u.current=null,l.current=null,i.current=!1,c.current=Mu(Ie.getState()),o.current&&(window.clearTimeout(o.current),o.current=null))},[e,n]),w.useEffect(()=>{if(!e)return;let f=!0;(async()=>{const{data:v,error:y}=await Ht.from("planner_states").select("data, updated_at").eq("user_id",e.id).maybeSingle();if(!f)return;if(y&&y.code!=="PGRST116"){console.error("No se pudo cargar el estado remoto",y);return}const b=v;if(b!=null&&b.data){const k=zR(b.data??{});i.current=!0,u.current=b.updated_at,c.current=k,t(k)}else if(r){const k=Mu(Ie.getState());l.current=null;const{error:E,data:C}=await Ht.from("planner_states").upsert({user_id:e.id,data:{version:Ux,...k}},{onConflict:"user_id"}).select("updated_at").maybeSingle(),_=C;E?console.error("No se pudo inicializar el estado remoto",E):_&&(u.current=_.updated_at)}})();const p=Ie.subscribe(v=>{if(!f)return;const y=Mu(v);if(i.current){i.current=!1,c.current=y,l.current=null;return}const b=c.current;BR(y,b)&&(c.current=y,l.current=y,o.current&&window.clearTimeout(o.current),o.current=window.setTimeout(()=>{if(!l.current)return;const k=l.current;l.current=null,(async()=>{const{error:E,data:C}=await Ht.from("planner_states").upsert({user_id:e.id,data:{version:Ux,...k}},{onConflict:"user_id"}).select("updated_at").maybeSingle(),_=C;E?console.error("No se pudo guardar el estado remoto",E):_&&(u.current=_.updated_at)})()},600))});return()=>{f=!1,p(),o.current&&(window.clearTimeout(o.current),o.current=null)}},[e,r,t])}function WR(){const{user:e}=js(),t=Ie(r=>r.loadWorks),n=Ie(r=>r.setWorks);w.useEffect(()=>{if(!e){n([]);return}const r={actorId:e.id,actorEmail:e.email??""},i=async()=>{try{await t(r)}catch(l){console.error("No se pudieron sincronizar los trabajos colaborativos",l)}};i();const o=Ht.channel("works-collaboration").on("postgres_changes",{event:"*",schema:"public",table:"works"},()=>{i()}).on("postgres_changes",{event:"*",schema:"public",table:"work_collaborators"},()=>{i()}).subscribe();return()=>{Ht.removeChannel(o)}},[e,t,n])}var Yu={exports:{}},HR=Yu.exports,Wx;function VR(){return Wx||(Wx=1,(function(e,t){(function(n,r){e.exports=r(ok())})(HR,(function(n){function r(l){return l&&typeof l=="object"&&"default"in l?l:{default:l}}var i=r(n),o={name:"es",monthsShort:"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),weekStart:1,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},ordinal:function(l){return l+""}};return i.default.locale(o,null,!0),o}))})(Yu)),Yu.exports}VR();function Bi({objective:e,size:t="md"}){if(!e)return null;const n=t==="sm"?"text-xs px-2 py-1":"text-sm px-3 py-1.5";return m.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full font-medium text-slate-950 shadow shadow-black/30 ${n}`,style:{backgroundColor:e.colorHex},children:[m.jsx("span",{className:"h-2.5 w-2.5 rounded-full border border-black/20 bg-white/70"}),e.name]})}function qR(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const KR=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,YR=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,GR={};function Hx(e,t){return(GR.jsx?YR:KR).test(e)}const JR=/[ \t\n\f\r]/g;function QR(e){return typeof e=="object"?e.type==="text"?Vx(e.value):!1:Vx(e)}function Vx(e){return e.replace(JR,"")===""}class pl{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}pl.prototype.normal={};pl.prototype.property={};pl.prototype.space=void 0;function pk(e,t){const n={},r={};for(const i of e)Object.assign(n,i.property),Object.assign(r,i.normal);return new pl(n,r,t)}function lp(e){return e.toLowerCase()}class Dn{constructor(t,n){this.attribute=n,this.property=t}}Dn.prototype.attribute="";Dn.prototype.booleanish=!1;Dn.prototype.boolean=!1;Dn.prototype.commaOrSpaceSeparated=!1;Dn.prototype.commaSeparated=!1;Dn.prototype.defined=!1;Dn.prototype.mustUseProperty=!1;Dn.prototype.number=!1;Dn.prototype.overloadedBoolean=!1;Dn.prototype.property="";Dn.prototype.spaceSeparated=!1;Dn.prototype.space=void 0;let XR=0;const ot=Ts(),zt=Ts(),up=Ts(),_e=Ts(),Et=Ts(),Eo=Ts(),Vn=Ts();function Ts(){return 2**++XR}const cp=Object.freeze(Object.defineProperty({__proto__:null,boolean:ot,booleanish:zt,commaOrSpaceSeparated:Vn,commaSeparated:Eo,number:_e,overloadedBoolean:up,spaceSeparated:Et},Symbol.toStringTag,{value:"Module"})),ih=Object.keys(cp);class tm extends Dn{constructor(t,n,r,i){let o=-1;if(super(t,n),qx(this,"space",i),typeof r=="number")for(;++o<ih.length;){const l=ih[o];qx(this,ih[o],(r&cp[l])===cp[l])}}}tm.prototype.defined=!0;function qx(e,t,n){n&&(e[t]=n)}function zo(e){const t={},n={};for(const[r,i]of Object.entries(e.properties)){const o=new tm(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(o.mustUseProperty=!0),t[r]=o,n[lp(r)]=r,n[lp(o.attribute)]=r}return new pl(t,n,e.space)}const mk=zo({properties:{ariaActiveDescendant:null,ariaAtomic:zt,ariaAutoComplete:null,ariaBusy:zt,ariaChecked:zt,ariaColCount:_e,ariaColIndex:_e,ariaColSpan:_e,ariaControls:Et,ariaCurrent:null,ariaDescribedBy:Et,ariaDetails:null,ariaDisabled:zt,ariaDropEffect:Et,ariaErrorMessage:null,ariaExpanded:zt,ariaFlowTo:Et,ariaGrabbed:zt,ariaHasPopup:null,ariaHidden:zt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Et,ariaLevel:_e,ariaLive:null,ariaModal:zt,ariaMultiLine:zt,ariaMultiSelectable:zt,ariaOrientation:null,ariaOwns:Et,ariaPlaceholder:null,ariaPosInSet:_e,ariaPressed:zt,ariaReadOnly:zt,ariaRelevant:null,ariaRequired:zt,ariaRoleDescription:Et,ariaRowCount:_e,ariaRowIndex:_e,ariaRowSpan:_e,ariaSelected:zt,ariaSetSize:_e,ariaSort:null,ariaValueMax:_e,ariaValueMin:_e,ariaValueNow:_e,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function gk(e,t){return t in e?e[t]:t}function yk(e,t){return gk(e,t.toLowerCase())}const ZR=zo({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Eo,acceptCharset:Et,accessKey:Et,action:null,allow:null,allowFullScreen:ot,allowPaymentRequest:ot,allowUserMedia:ot,alt:null,as:null,async:ot,autoCapitalize:null,autoComplete:Et,autoFocus:ot,autoPlay:ot,blocking:Et,capture:null,charSet:null,checked:ot,cite:null,className:Et,cols:_e,colSpan:null,content:null,contentEditable:zt,controls:ot,controlsList:Et,coords:_e|Eo,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ot,defer:ot,dir:null,dirName:null,disabled:ot,download:up,draggable:zt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ot,formTarget:null,headers:Et,height:_e,hidden:up,high:_e,href:null,hrefLang:null,htmlFor:Et,httpEquiv:Et,id:null,imageSizes:null,imageSrcSet:null,inert:ot,inputMode:null,integrity:null,is:null,isMap:ot,itemId:null,itemProp:Et,itemRef:Et,itemScope:ot,itemType:Et,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ot,low:_e,manifest:null,max:null,maxLength:_e,media:null,method:null,min:null,minLength:_e,multiple:ot,muted:ot,name:null,nonce:null,noModule:ot,noValidate:ot,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ot,optimum:_e,pattern:null,ping:Et,placeholder:null,playsInline:ot,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ot,referrerPolicy:null,rel:Et,required:ot,reversed:ot,rows:_e,rowSpan:_e,sandbox:Et,scope:null,scoped:ot,seamless:ot,selected:ot,shadowRootClonable:ot,shadowRootDelegatesFocus:ot,shadowRootMode:null,shape:null,size:_e,sizes:null,slot:null,span:_e,spellCheck:zt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:_e,step:null,style:null,tabIndex:_e,target:null,title:null,translate:null,type:null,typeMustMatch:ot,useMap:null,value:zt,width:_e,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Et,axis:null,background:null,bgColor:null,border:_e,borderColor:null,bottomMargin:_e,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ot,declare:ot,event:null,face:null,frame:null,frameBorder:null,hSpace:_e,leftMargin:_e,link:null,longDesc:null,lowSrc:null,marginHeight:_e,marginWidth:_e,noResize:ot,noHref:ot,noShade:ot,noWrap:ot,object:null,profile:null,prompt:null,rev:null,rightMargin:_e,rules:null,scheme:null,scrolling:zt,standby:null,summary:null,text:null,topMargin:_e,valueType:null,version:null,vAlign:null,vLink:null,vSpace:_e,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ot,disableRemotePlayback:ot,prefix:null,property:null,results:_e,security:null,unselectable:null},space:"html",transform:yk}),eO=zo({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Vn,accentHeight:_e,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:_e,amplitude:_e,arabicForm:null,ascent:_e,attributeName:null,attributeType:null,azimuth:_e,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:_e,by:null,calcMode:null,capHeight:_e,className:Et,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:_e,diffuseConstant:_e,direction:null,display:null,dur:null,divisor:_e,dominantBaseline:null,download:ot,dx:null,dy:null,edgeMode:null,editable:null,elevation:_e,enableBackground:null,end:null,event:null,exponent:_e,externalResourcesRequired:null,fill:null,fillOpacity:_e,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Eo,g2:Eo,glyphName:Eo,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:_e,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:_e,horizOriginX:_e,horizOriginY:_e,id:null,ideographic:_e,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:_e,k:_e,k1:_e,k2:_e,k3:_e,k4:_e,kernelMatrix:Vn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:_e,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:_e,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:_e,overlineThickness:_e,paintOrder:null,panose1:null,path:null,pathLength:_e,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Et,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:_e,pointsAtY:_e,pointsAtZ:_e,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Vn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Vn,rev:Vn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Vn,requiredFeatures:Vn,requiredFonts:Vn,requiredFormats:Vn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:_e,specularExponent:_e,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:_e,strikethroughThickness:_e,string:null,stroke:null,strokeDashArray:Vn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:_e,strokeOpacity:_e,strokeWidth:null,style:null,surfaceScale:_e,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Vn,tabIndex:_e,tableValues:null,target:null,targetX:_e,targetY:_e,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Vn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:_e,underlineThickness:_e,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:_e,values:null,vAlphabetic:_e,vMathematical:_e,vectorEffect:null,vHanging:_e,vIdeographic:_e,version:null,vertAdvY:_e,vertOriginX:_e,vertOriginY:_e,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:_e,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:gk}),vk=zo({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),xk=zo({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:yk}),wk=zo({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),tO={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},nO=/[A-Z]/g,Kx=/-[a-z]/g,rO=/^data[-\w.:]+$/i;function iO(e,t){const n=lp(t);let r=t,i=Dn;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&rO.test(t)){if(t.charAt(4)==="-"){const o=t.slice(5).replace(Kx,oO);r="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=t.slice(4);if(!Kx.test(o)){let l=o.replace(nO,sO);l.charAt(0)!=="-"&&(l="-"+l),t="data"+l}}i=tm}return new i(r,t)}function sO(e){return"-"+e.toLowerCase()}function oO(e){return e.charAt(1).toUpperCase()}const aO=pk([mk,ZR,vk,xk,wk],"html"),nm=pk([mk,eO,vk,xk,wk],"svg");function lO(e){return e.join(" ").trim()}var uo={},sh,Yx;function uO(){if(Yx)return sh;Yx=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,l=/^[;\s]*/,u=/^\s+|\s+$/g,c=`
`,f="/",h="*",p="",v="comment",y="declaration";sh=function(k,E){if(typeof k!="string")throw new TypeError("First argument must be a string");if(!k)return[];E=E||{};var C=1,_=1;function j(H){var K=H.match(t);K&&(C+=K.length);var V=H.lastIndexOf(c);_=~V?H.length-V:_+H.length}function I(){var H={line:C,column:_};return function(K){return K.position=new O(H),ie(),K}}function O(H){this.start=H,this.end={line:C,column:_},this.source=E.source}O.prototype.content=k;function A(H){var K=new Error(E.source+":"+C+":"+_+": "+H);if(K.reason=H,K.filename=E.source,K.line=C,K.column=_,K.source=k,!E.silent)throw K}function $(H){var K=H.exec(k);if(K){var V=K[0];return j(V),k=k.slice(V.length),K}}function ie(){$(n)}function U(H){var K;for(H=H||[];K=R();)K!==!1&&H.push(K);return H}function R(){var H=I();if(!(f!=k.charAt(0)||h!=k.charAt(1))){for(var K=2;p!=k.charAt(K)&&(h!=k.charAt(K)||f!=k.charAt(K+1));)++K;if(K+=2,p===k.charAt(K-1))return A("End of comment missing");var V=k.slice(2,K-2);return _+=2,j(V),k=k.slice(K),_+=2,H({type:v,comment:V})}}function D(){var H=I(),K=$(r);if(K){if(R(),!$(i))return A("property missing ':'");var V=$(o),X=H({type:y,property:b(K[0].replace(e,p)),value:V?b(V[0].replace(e,p)):p});return $(l),X}}function Z(){var H=[];U(H);for(var K;K=D();)K!==!1&&(H.push(K),U(H));return H}return ie(),Z()};function b(k){return k?k.replace(u,p):p}return sh}var Gx;function cO(){if(Gx)return uo;Gx=1;var e=uo&&uo.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(uo,"__esModule",{value:!0}),uo.default=n;var t=e(uO());function n(r,i){var o=null;if(!r||typeof r!="string")return o;var l=(0,t.default)(r),u=typeof i=="function";return l.forEach(function(c){if(c.type==="declaration"){var f=c.property,h=c.value;u?i(f,h,c):h&&(o=o||{},o[f]=h)}}),o}return uo}var Ca={},Jx;function dO(){if(Jx)return Ca;Jx=1,Object.defineProperty(Ca,"__esModule",{value:!0}),Ca.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,o=function(f){return!f||n.test(f)||e.test(f)},l=function(f,h){return h.toUpperCase()},u=function(f,h){return"".concat(h,"-")},c=function(f,h){return h===void 0&&(h={}),o(f)?f:(f=f.toLowerCase(),h.reactCompat?f=f.replace(i,u):f=f.replace(r,u),f.replace(t,l))};return Ca.camelCase=c,Ca}var ja,Qx;function fO(){if(Qx)return ja;Qx=1;var e=ja&&ja.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},t=e(cO()),n=dO();function r(i,o){var l={};return!i||typeof i!="string"||(0,t.default)(i,function(u,c){u&&c&&(l[(0,n.camelCase)(u,o)]=c)}),l}return r.default=r,ja=r,ja}var hO=fO();const pO=Ro(hO),bk=kk("end"),rm=kk("start");function kk(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function mO(e){const t=rm(e),n=bk(e);if(t&&n)return{start:t,end:n}}function Ba(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Xx(e.position):"start"in e||"end"in e?Xx(e):"line"in e||"column"in e?dp(e):""}function dp(e){return Zx(e&&e.line)+":"+Zx(e&&e.column)}function Xx(e){return dp(e&&e.start)+"-"+dp(e&&e.end)}function Zx(e){return e&&typeof e=="number"?e:1}class vn extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",o={},l=!1;if(n&&("line"in n&&"column"in n?o={place:n}:"start"in n&&"end"in n?o={place:n}:"type"in n?o={ancestors:[n],place:n.position}:o={...n}),typeof t=="string"?i=t:!o.cause&&t&&(l=!0,i=t.message,o.cause=t),!o.ruleId&&!o.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?o.ruleId=r:(o.source=r.slice(0,c),o.ruleId=r.slice(c+1))}if(!o.place&&o.ancestors&&o.ancestors){const c=o.ancestors[o.ancestors.length-1];c&&(o.place=c.position)}const u=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=u?u.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=u?u.line:void 0,this.name=Ba(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=l&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}vn.prototype.file="";vn.prototype.name="";vn.prototype.reason="";vn.prototype.message="";vn.prototype.stack="";vn.prototype.column=void 0;vn.prototype.line=void 0;vn.prototype.ancestors=void 0;vn.prototype.cause=void 0;vn.prototype.fatal=void 0;vn.prototype.place=void 0;vn.prototype.ruleId=void 0;vn.prototype.source=void 0;const im={}.hasOwnProperty,gO=new Map,yO=/[A-Z]/g,vO=new Set(["table","tbody","thead","tfoot","tr"]),xO=new Set(["td","th"]),Sk="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function wO(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=NO(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=jO(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?nm:aO,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},o=Ek(i,e,void 0);return o&&typeof o!="string"?o:i.create(e,i.Fragment,{children:o||void 0},void 0)}function Ek(e,t,n){if(t.type==="element")return bO(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return kO(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return EO(e,t,n);if(t.type==="mdxjsEsm")return SO(e,t);if(t.type==="root")return _O(e,t,n);if(t.type==="text")return CO(e,t)}function bO(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=nm,e.schema=i),e.ancestors.push(t);const o=Ck(e,t.tagName,!1),l=TO(e,t);let u=om(e,t);return vO.has(t.tagName)&&(u=u.filter(function(c){return typeof c=="string"?!QR(c):!0})),_k(e,l,o,t),sm(l,u),e.ancestors.pop(),e.schema=r,e.create(t,o,l,n)}function kO(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}nl(e,t.position)}function SO(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);nl(e,t.position)}function EO(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=nm,e.schema=i),e.ancestors.push(t);const o=t.name===null?e.Fragment:Ck(e,t.name,!0),l=IO(e,t),u=om(e,t);return _k(e,l,o,t),sm(l,u),e.ancestors.pop(),e.schema=r,e.create(t,o,l,n)}function _O(e,t,n){const r={};return sm(r,om(e,t)),e.create(t,e.Fragment,r,n)}function CO(e,t){return t.value}function _k(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function sm(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function jO(e,t,n){return r;function r(i,o,l,u){const f=Array.isArray(l.children)?n:t;return u?f(o,l,u):f(o,l)}}function NO(e,t){return n;function n(r,i,o,l){const u=Array.isArray(o.children),c=rm(r);return t(i,o,l,u,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function TO(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&im.call(t.properties,i)){const o=PO(e,i,t.properties[i]);if(o){const[l,u]=o;e.tableCellAlignToStyle&&l==="align"&&typeof u=="string"&&xO.has(t.tagName)?r=u:n[l]=u}}if(r){const o=n.style||(n.style={});o[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function IO(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const o=r.data.estree.body[0];o.type;const l=o.expression;l.type;const u=l.properties[0];u.type,Object.assign(n,e.evaluater.evaluateExpression(u.argument))}else nl(e,t.position);else{const i=r.name;let o;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const u=r.value.data.estree.body[0];u.type,o=e.evaluater.evaluateExpression(u.expression)}else nl(e,t.position);else o=r.value===null?!0:r.value;n[i]=o}return n}function om(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:gO;for(;++r<t.children.length;){const o=t.children[r];let l;if(e.passKeys){const c=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(c){const f=i.get(c)||0;l=c+"-"+f,i.set(c,f+1)}}const u=Ek(e,o,l);u!==void 0&&n.push(u)}return n}function PO(e,t,n){const r=iO(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?qR(n):lO(n)),r.property==="style"){let i=typeof n=="object"?n:AO(e,String(n));return e.stylePropertyNameCase==="css"&&(i=RO(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?tO[r.property]||r.property:r.attribute,n]}}function AO(e,t){try{return pO(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,i=new vn("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=Sk+"#cannot-parse-style-attribute",i}}function Ck(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let o=-1,l;for(;++o<i.length;){const u=Hx(i[o])?{type:"Identifier",name:i[o]}:{type:"Literal",value:i[o]};l=l?{type:"MemberExpression",object:l,property:u,computed:!!(o&&u.type==="Literal"),optional:!1}:u}r=l}else r=Hx(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return im.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);nl(e)}function nl(e,t){const n=new vn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Sk+"#cannot-handle-mdx-estrees-without-createevaluater",n}function RO(e){const t={};let n;for(n in e)im.call(e,n)&&(t[OO(n)]=e[n]);return t}function OO(e){let t=e.replace(yO,MO);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function MO(e){return"-"+e.toLowerCase()}const oh={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},DO={};function am(e,t){const n=DO,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return jk(e,r,i)}function jk(e,t,n){if(LO(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return e0(e.children,t,n)}return Array.isArray(e)?e0(e,t,n):""}function e0(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=jk(e[i],t,n);return r.join("")}function LO(e){return!!(e&&typeof e=="object")}const t0=document.createElement("i");function lm(e){const t="&"+e+";";t0.innerHTML=t;const n=t0.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Gn(e,t,n,r){const i=e.length;let o=0,l;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)l=Array.from(r),l.unshift(t,n),e.splice(...l);else for(n&&e.splice(t,n);o<r.length;)l=r.slice(o,o+1e4),l.unshift(t,0),e.splice(...l),o+=1e4,t+=1e4}function ar(e,t){return e.length>0?(Gn(e,e.length,0,t),e):t}const n0={}.hasOwnProperty;function Nk(e){const t={};let n=-1;for(;++n<e.length;)$O(t,e[n]);return t}function $O(e,t){let n;for(n in t){const i=(n0.call(e,n)?e[n]:void 0)||(e[n]={}),o=t[n];let l;if(o)for(l in o){n0.call(i,l)||(i[l]=[]);const u=o[l];FO(i[l],Array.isArray(u)?u:u?[u]:[])}}}function FO(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Gn(e,0,0,r)}function Tk(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function kr(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const kn=Hi(/[A-Za-z]/),yn=Hi(/[\dA-Za-z]/),zO=Hi(/[#-'*+\--9=?A-Z^-~]/);function fc(e){return e!==null&&(e<32||e===127)}const fp=Hi(/\d/),BO=Hi(/[\dA-Fa-f]/),UO=Hi(/[!-/:-@[-`{-~]/);function Je(e){return e!==null&&e<-2}function bt(e){return e!==null&&(e<0||e===32)}function dt(e){return e===-2||e===-1||e===32}const zc=Hi(new RegExp("\\p{P}|\\p{S}","u")),ks=Hi(/\s/);function Hi(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Bo(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const o=e.charCodeAt(n);let l="";if(o===37&&yn(e.charCodeAt(n+1))&&yn(e.charCodeAt(n+2)))i=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(l=String.fromCharCode(o));else if(o>55295&&o<57344){const u=e.charCodeAt(n+1);o<56320&&u>56319&&u<57344?(l=String.fromCharCode(o,u),i=1):l=""}else l=String.fromCharCode(o);l&&(t.push(e.slice(r,n),encodeURIComponent(l)),r=n+i+1,l=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function ft(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let o=0;return l;function l(c){return dt(c)?(e.enter(n),u(c)):t(c)}function u(c){return dt(c)&&o++<i?(e.consume(c),u):(e.exit(n),t(c))}}const WO={tokenize:HO};function HO(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(u){if(u===null){e.consume(u);return}return e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),ft(e,t,"linePrefix")}function i(u){return e.enter("paragraph"),o(u)}function o(u){const c=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,l(u)}function l(u){if(u===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(u);return}return Je(u)?(e.consume(u),e.exit("chunkText"),o):(e.consume(u),l)}}const VO={tokenize:qO},r0={tokenize:KO};function qO(e){const t=this,n=[];let r=0,i,o,l;return u;function u(j){if(r<n.length){const I=n[r];return t.containerState=I[1],e.attempt(I[0].continuation,c,f)(j)}return f(j)}function c(j){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&_();const I=t.events.length;let O=I,A;for(;O--;)if(t.events[O][0]==="exit"&&t.events[O][1].type==="chunkFlow"){A=t.events[O][1].end;break}C(r);let $=I;for(;$<t.events.length;)t.events[$][1].end={...A},$++;return Gn(t.events,O+1,0,t.events.slice(I)),t.events.length=$,f(j)}return u(j)}function f(j){if(r===n.length){if(!i)return v(j);if(i.currentConstruct&&i.currentConstruct.concrete)return b(j);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(r0,h,p)(j)}function h(j){return i&&_(),C(r),v(j)}function p(j){return t.parser.lazy[t.now().line]=r!==n.length,l=t.now().offset,b(j)}function v(j){return t.containerState={},e.attempt(r0,y,b)(j)}function y(j){return r++,n.push([t.currentConstruct,t.containerState]),v(j)}function b(j){if(j===null){i&&_(),C(0),e.consume(j);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:o}),k(j)}function k(j){if(j===null){E(e.exit("chunkFlow"),!0),C(0),e.consume(j);return}return Je(j)?(e.consume(j),E(e.exit("chunkFlow")),r=0,t.interrupt=void 0,u):(e.consume(j),k)}function E(j,I){const O=t.sliceStream(j);if(I&&O.push(null),j.previous=o,o&&(o.next=j),o=j,i.defineSkip(j.start),i.write(O),t.parser.lazy[j.start.line]){let A=i.events.length;for(;A--;)if(i.events[A][1].start.offset<l&&(!i.events[A][1].end||i.events[A][1].end.offset>l))return;const $=t.events.length;let ie=$,U,R;for(;ie--;)if(t.events[ie][0]==="exit"&&t.events[ie][1].type==="chunkFlow"){if(U){R=t.events[ie][1].end;break}U=!0}for(C(r),A=$;A<t.events.length;)t.events[A][1].end={...R},A++;Gn(t.events,ie+1,0,t.events.slice($)),t.events.length=A}}function C(j){let I=n.length;for(;I-- >j;){const O=n[I];t.containerState=O[1],O[0].exit.call(t,e)}n.length=j}function _(){i.write([null]),o=void 0,i=void 0,t.containerState._closeFlow=void 0}}function KO(e,t,n){return ft(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Po(e){if(e===null||bt(e)||ks(e))return 1;if(zc(e))return 2}function Bc(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const o=e[i].resolveAll;o&&!r.includes(o)&&(t=o(t,n),r.push(o))}return t}const hp={name:"attention",resolveAll:YO,tokenize:GO};function YO(e,t){let n=-1,r,i,o,l,u,c,f,h;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const p={...e[r][1].end},v={...e[n][1].start};i0(p,-c),i0(v,c),l={type:c>1?"strongSequence":"emphasisSequence",start:p,end:{...e[r][1].end}},u={type:c>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:v},o={type:c>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},i={type:c>1?"strong":"emphasis",start:{...l.start},end:{...u.end}},e[r][1].end={...l.start},e[n][1].start={...u.end},f=[],e[r][1].end.offset-e[r][1].start.offset&&(f=ar(f,[["enter",e[r][1],t],["exit",e[r][1],t]])),f=ar(f,[["enter",i,t],["enter",l,t],["exit",l,t],["enter",o,t]]),f=ar(f,Bc(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),f=ar(f,[["exit",o,t],["enter",u,t],["exit",u,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(h=2,f=ar(f,[["enter",e[n][1],t],["exit",e[n][1],t]])):h=0,Gn(e,r-1,n-r+3,f),n=r+f.length-h-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function GO(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Po(r);let o;return l;function l(c){return o=c,e.enter("attentionSequence"),u(c)}function u(c){if(c===o)return e.consume(c),u;const f=e.exit("attentionSequence"),h=Po(c),p=!h||h===2&&i||n.includes(c),v=!i||i===2&&h||n.includes(r);return f._open=!!(o===42?p:p&&(i||!v)),f._close=!!(o===42?v:v&&(h||!p)),t(c)}}function i0(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const JO={name:"autolink",tokenize:QO};function QO(e,t,n){let r=0;return i;function i(y){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(y),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),o}function o(y){return kn(y)?(e.consume(y),l):y===64?n(y):f(y)}function l(y){return y===43||y===45||y===46||yn(y)?(r=1,u(y)):f(y)}function u(y){return y===58?(e.consume(y),r=0,c):(y===43||y===45||y===46||yn(y))&&r++<32?(e.consume(y),u):(r=0,f(y))}function c(y){return y===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(y),e.exit("autolinkMarker"),e.exit("autolink"),t):y===null||y===32||y===60||fc(y)?n(y):(e.consume(y),c)}function f(y){return y===64?(e.consume(y),h):zO(y)?(e.consume(y),f):n(y)}function h(y){return yn(y)?p(y):n(y)}function p(y){return y===46?(e.consume(y),r=0,h):y===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(y),e.exit("autolinkMarker"),e.exit("autolink"),t):v(y)}function v(y){if((y===45||yn(y))&&r++<63){const b=y===45?v:p;return e.consume(y),b}return n(y)}}const ml={partial:!0,tokenize:XO};function XO(e,t,n){return r;function r(o){return dt(o)?ft(e,i,"linePrefix")(o):i(o)}function i(o){return o===null||Je(o)?t(o):n(o)}}const Ik={continuation:{tokenize:eM},exit:tM,name:"blockQuote",tokenize:ZO};function ZO(e,t,n){const r=this;return i;function i(l){if(l===62){const u=r.containerState;return u.open||(e.enter("blockQuote",{_container:!0}),u.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(l),e.exit("blockQuoteMarker"),o}return n(l)}function o(l){return dt(l)?(e.enter("blockQuotePrefixWhitespace"),e.consume(l),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(l))}}function eM(e,t,n){const r=this;return i;function i(l){return dt(l)?ft(e,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):o(l)}function o(l){return e.attempt(Ik,t,n)(l)}}function tM(e){e.exit("blockQuote")}const Pk={name:"characterEscape",tokenize:nM};function nM(e,t,n){return r;function r(o){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(o),e.exit("escapeMarker"),i}function i(o){return UO(o)?(e.enter("characterEscapeValue"),e.consume(o),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(o)}}const Ak={name:"characterReference",tokenize:rM};function rM(e,t,n){const r=this;let i=0,o,l;return u;function u(p){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(p),e.exit("characterReferenceMarker"),c}function c(p){return p===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(p),e.exit("characterReferenceMarkerNumeric"),f):(e.enter("characterReferenceValue"),o=31,l=yn,h(p))}function f(p){return p===88||p===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(p),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),o=6,l=BO,h):(e.enter("characterReferenceValue"),o=7,l=fp,h(p))}function h(p){if(p===59&&i){const v=e.exit("characterReferenceValue");return l===yn&&!lm(r.sliceSerialize(v))?n(p):(e.enter("characterReferenceMarker"),e.consume(p),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return l(p)&&i++<o?(e.consume(p),h):n(p)}}const s0={partial:!0,tokenize:sM},o0={concrete:!0,name:"codeFenced",tokenize:iM};function iM(e,t,n){const r=this,i={partial:!0,tokenize:O};let o=0,l=0,u;return c;function c(A){return f(A)}function f(A){const $=r.events[r.events.length-1];return o=$&&$[1].type==="linePrefix"?$[2].sliceSerialize($[1],!0).length:0,u=A,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),h(A)}function h(A){return A===u?(l++,e.consume(A),h):l<3?n(A):(e.exit("codeFencedFenceSequence"),dt(A)?ft(e,p,"whitespace")(A):p(A))}function p(A){return A===null||Je(A)?(e.exit("codeFencedFence"),r.interrupt?t(A):e.check(s0,k,I)(A)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),v(A))}function v(A){return A===null||Je(A)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),p(A)):dt(A)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),ft(e,y,"whitespace")(A)):A===96&&A===u?n(A):(e.consume(A),v)}function y(A){return A===null||Je(A)?p(A):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),b(A))}function b(A){return A===null||Je(A)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),p(A)):A===96&&A===u?n(A):(e.consume(A),b)}function k(A){return e.attempt(i,I,E)(A)}function E(A){return e.enter("lineEnding"),e.consume(A),e.exit("lineEnding"),C}function C(A){return o>0&&dt(A)?ft(e,_,"linePrefix",o+1)(A):_(A)}function _(A){return A===null||Je(A)?e.check(s0,k,I)(A):(e.enter("codeFlowValue"),j(A))}function j(A){return A===null||Je(A)?(e.exit("codeFlowValue"),_(A)):(e.consume(A),j)}function I(A){return e.exit("codeFenced"),t(A)}function O(A,$,ie){let U=0;return R;function R(V){return A.enter("lineEnding"),A.consume(V),A.exit("lineEnding"),D}function D(V){return A.enter("codeFencedFence"),dt(V)?ft(A,Z,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(V):Z(V)}function Z(V){return V===u?(A.enter("codeFencedFenceSequence"),H(V)):ie(V)}function H(V){return V===u?(U++,A.consume(V),H):U>=l?(A.exit("codeFencedFenceSequence"),dt(V)?ft(A,K,"whitespace")(V):K(V)):ie(V)}function K(V){return V===null||Je(V)?(A.exit("codeFencedFence"),$(V)):ie(V)}}}function sM(e,t,n){const r=this;return i;function i(l){return l===null?n(l):(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),o)}function o(l){return r.parser.lazy[r.now().line]?n(l):t(l)}}const ah={name:"codeIndented",tokenize:aM},oM={partial:!0,tokenize:lM};function aM(e,t,n){const r=this;return i;function i(f){return e.enter("codeIndented"),ft(e,o,"linePrefix",5)(f)}function o(f){const h=r.events[r.events.length-1];return h&&h[1].type==="linePrefix"&&h[2].sliceSerialize(h[1],!0).length>=4?l(f):n(f)}function l(f){return f===null?c(f):Je(f)?e.attempt(oM,l,c)(f):(e.enter("codeFlowValue"),u(f))}function u(f){return f===null||Je(f)?(e.exit("codeFlowValue"),l(f)):(e.consume(f),u)}function c(f){return e.exit("codeIndented"),t(f)}}function lM(e,t,n){const r=this;return i;function i(l){return r.parser.lazy[r.now().line]?n(l):Je(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),i):ft(e,o,"linePrefix",5)(l)}function o(l){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?t(l):Je(l)?i(l):n(l)}}const uM={name:"codeText",previous:dM,resolve:cM,tokenize:fM};function cM(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function dM(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function fM(e,t,n){let r=0,i,o;return l;function l(p){return e.enter("codeText"),e.enter("codeTextSequence"),u(p)}function u(p){return p===96?(e.consume(p),r++,u):(e.exit("codeTextSequence"),c(p))}function c(p){return p===null?n(p):p===32?(e.enter("space"),e.consume(p),e.exit("space"),c):p===96?(o=e.enter("codeTextSequence"),i=0,h(p)):Je(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),c):(e.enter("codeTextData"),f(p))}function f(p){return p===null||p===32||p===96||Je(p)?(e.exit("codeTextData"),c(p)):(e.consume(p),f)}function h(p){return p===96?(e.consume(p),i++,h):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(p)):(o.type="codeTextData",f(p))}}class hM{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const o=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Na(this.left,r),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Na(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Na(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);Na(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Na(this.left,n.reverse())}}}function Na(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function Rk(e){const t={};let n=-1,r,i,o,l,u,c,f;const h=new hM(e);for(;++n<h.length;){for(;n in t;)n=t[n];if(r=h.get(n),n&&r[1].type==="chunkFlow"&&h.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,o=0,o<c.length&&c[o][1].type==="lineEndingBlank"&&(o+=2),o<c.length&&c[o][1].type==="content"))for(;++o<c.length&&c[o][1].type!=="content";)c[o][1].type==="chunkText"&&(c[o][1]._isInFirstContentOfListItem=!0,o++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,pM(h,n)),n=t[n],f=!0);else if(r[1]._container){for(o=n,i=void 0;o--;)if(l=h.get(o),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(i&&(h.get(i)[1].type="lineEndingBlank"),l[1].type="lineEnding",i=o);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;i&&(r[1].end={...h.get(i)[1].start},u=h.slice(i,n),u.unshift(r),h.splice(i,n-i+1,u))}}return Gn(e,0,Number.POSITIVE_INFINITY,h.slice(0)),!f}function pM(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const o=[];let l=n._tokenizer;l||(l=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const u=l.events,c=[],f={};let h,p,v=-1,y=n,b=0,k=0;const E=[k];for(;y;){for(;e.get(++i)[1]!==y;);o.push(i),y._tokenizer||(h=r.sliceStream(y),y.next||h.push(null),p&&l.defineSkip(y.start),y._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(h),y._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),p=y,y=y.next}for(y=n;++v<u.length;)u[v][0]==="exit"&&u[v-1][0]==="enter"&&u[v][1].type===u[v-1][1].type&&u[v][1].start.line!==u[v][1].end.line&&(k=v+1,E.push(k),y._tokenizer=void 0,y.previous=void 0,y=y.next);for(l.events=[],y?(y._tokenizer=void 0,y.previous=void 0):E.pop(),v=E.length;v--;){const C=u.slice(E[v],E[v+1]),_=o.pop();c.push([_,_+C.length-1]),e.splice(_,2,C)}for(c.reverse(),v=-1;++v<c.length;)f[b+c[v][0]]=b+c[v][1],b+=c[v][1]-c[v][0]-1;return f}const mM={resolve:yM,tokenize:vM},gM={partial:!0,tokenize:xM};function yM(e){return Rk(e),e}function vM(e,t){let n;return r;function r(u){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(u)}function i(u){return u===null?o(u):Je(u)?e.check(gM,l,o)(u):(e.consume(u),i)}function o(u){return e.exit("chunkContent"),e.exit("content"),t(u)}function l(u){return e.consume(u),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function xM(e,t,n){const r=this;return i;function i(l){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),ft(e,o,"linePrefix")}function o(l){if(l===null||Je(l))return n(l);const u=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?t(l):e.interrupt(r.parser.constructs.flow,n,t)(l)}}function Ok(e,t,n,r,i,o,l,u,c){const f=c||Number.POSITIVE_INFINITY;let h=0;return p;function p(C){return C===60?(e.enter(r),e.enter(i),e.enter(o),e.consume(C),e.exit(o),v):C===null||C===32||C===41||fc(C)?n(C):(e.enter(r),e.enter(l),e.enter(u),e.enter("chunkString",{contentType:"string"}),k(C))}function v(C){return C===62?(e.enter(o),e.consume(C),e.exit(o),e.exit(i),e.exit(r),t):(e.enter(u),e.enter("chunkString",{contentType:"string"}),y(C))}function y(C){return C===62?(e.exit("chunkString"),e.exit(u),v(C)):C===null||C===60||Je(C)?n(C):(e.consume(C),C===92?b:y)}function b(C){return C===60||C===62||C===92?(e.consume(C),y):y(C)}function k(C){return!h&&(C===null||C===41||bt(C))?(e.exit("chunkString"),e.exit(u),e.exit(l),e.exit(r),t(C)):h<f&&C===40?(e.consume(C),h++,k):C===41?(e.consume(C),h--,k):C===null||C===32||C===40||fc(C)?n(C):(e.consume(C),C===92?E:k)}function E(C){return C===40||C===41||C===92?(e.consume(C),k):k(C)}}function Mk(e,t,n,r,i,o){const l=this;let u=0,c;return f;function f(y){return e.enter(r),e.enter(i),e.consume(y),e.exit(i),e.enter(o),h}function h(y){return u>999||y===null||y===91||y===93&&!c||y===94&&!u&&"_hiddenFootnoteSupport"in l.parser.constructs?n(y):y===93?(e.exit(o),e.enter(i),e.consume(y),e.exit(i),e.exit(r),t):Je(y)?(e.enter("lineEnding"),e.consume(y),e.exit("lineEnding"),h):(e.enter("chunkString",{contentType:"string"}),p(y))}function p(y){return y===null||y===91||y===93||Je(y)||u++>999?(e.exit("chunkString"),h(y)):(e.consume(y),c||(c=!dt(y)),y===92?v:p)}function v(y){return y===91||y===92||y===93?(e.consume(y),u++,p):p(y)}}function Dk(e,t,n,r,i,o){let l;return u;function u(v){return v===34||v===39||v===40?(e.enter(r),e.enter(i),e.consume(v),e.exit(i),l=v===40?41:v,c):n(v)}function c(v){return v===l?(e.enter(i),e.consume(v),e.exit(i),e.exit(r),t):(e.enter(o),f(v))}function f(v){return v===l?(e.exit(o),c(l)):v===null?n(v):Je(v)?(e.enter("lineEnding"),e.consume(v),e.exit("lineEnding"),ft(e,f,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),h(v))}function h(v){return v===l||v===null||Je(v)?(e.exit("chunkString"),f(v)):(e.consume(v),v===92?p:h)}function p(v){return v===l||v===92?(e.consume(v),h):h(v)}}function Ua(e,t){let n;return r;function r(i){return Je(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):dt(i)?ft(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const wM={name:"definition",tokenize:kM},bM={partial:!0,tokenize:SM};function kM(e,t,n){const r=this;let i;return o;function o(y){return e.enter("definition"),l(y)}function l(y){return Mk.call(r,e,u,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(y)}function u(y){return i=kr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),y===58?(e.enter("definitionMarker"),e.consume(y),e.exit("definitionMarker"),c):n(y)}function c(y){return bt(y)?Ua(e,f)(y):f(y)}function f(y){return Ok(e,h,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(y)}function h(y){return e.attempt(bM,p,p)(y)}function p(y){return dt(y)?ft(e,v,"whitespace")(y):v(y)}function v(y){return y===null||Je(y)?(e.exit("definition"),r.parser.defined.push(i),t(y)):n(y)}}function SM(e,t,n){return r;function r(u){return bt(u)?Ua(e,i)(u):n(u)}function i(u){return Dk(e,o,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(u)}function o(u){return dt(u)?ft(e,l,"whitespace")(u):l(u)}function l(u){return u===null||Je(u)?t(u):n(u)}}const EM={name:"hardBreakEscape",tokenize:_M};function _M(e,t,n){return r;function r(o){return e.enter("hardBreakEscape"),e.consume(o),i}function i(o){return Je(o)?(e.exit("hardBreakEscape"),t(o)):n(o)}}const CM={name:"headingAtx",resolve:jM,tokenize:NM};function jM(e,t){let n=e.length-2,r=3,i,o;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},o={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Gn(e,r,n-r+1,[["enter",i,t],["enter",o,t],["exit",o,t],["exit",i,t]])),e}function NM(e,t,n){let r=0;return i;function i(h){return e.enter("atxHeading"),o(h)}function o(h){return e.enter("atxHeadingSequence"),l(h)}function l(h){return h===35&&r++<6?(e.consume(h),l):h===null||bt(h)?(e.exit("atxHeadingSequence"),u(h)):n(h)}function u(h){return h===35?(e.enter("atxHeadingSequence"),c(h)):h===null||Je(h)?(e.exit("atxHeading"),t(h)):dt(h)?ft(e,u,"whitespace")(h):(e.enter("atxHeadingText"),f(h))}function c(h){return h===35?(e.consume(h),c):(e.exit("atxHeadingSequence"),u(h))}function f(h){return h===null||h===35||bt(h)?(e.exit("atxHeadingText"),u(h)):(e.consume(h),f)}}const TM=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],a0=["pre","script","style","textarea"],IM={concrete:!0,name:"htmlFlow",resolveTo:RM,tokenize:OM},PM={partial:!0,tokenize:DM},AM={partial:!0,tokenize:MM};function RM(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function OM(e,t,n){const r=this;let i,o,l,u,c;return f;function f(P){return h(P)}function h(P){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(P),p}function p(P){return P===33?(e.consume(P),v):P===47?(e.consume(P),o=!0,k):P===63?(e.consume(P),i=3,r.interrupt?t:T):kn(P)?(e.consume(P),l=String.fromCharCode(P),E):n(P)}function v(P){return P===45?(e.consume(P),i=2,y):P===91?(e.consume(P),i=5,u=0,b):kn(P)?(e.consume(P),i=4,r.interrupt?t:T):n(P)}function y(P){return P===45?(e.consume(P),r.interrupt?t:T):n(P)}function b(P){const be="CDATA[";return P===be.charCodeAt(u++)?(e.consume(P),u===be.length?r.interrupt?t:Z:b):n(P)}function k(P){return kn(P)?(e.consume(P),l=String.fromCharCode(P),E):n(P)}function E(P){if(P===null||P===47||P===62||bt(P)){const be=P===47,ge=l.toLowerCase();return!be&&!o&&a0.includes(ge)?(i=1,r.interrupt?t(P):Z(P)):TM.includes(l.toLowerCase())?(i=6,be?(e.consume(P),C):r.interrupt?t(P):Z(P)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(P):o?_(P):j(P))}return P===45||yn(P)?(e.consume(P),l+=String.fromCharCode(P),E):n(P)}function C(P){return P===62?(e.consume(P),r.interrupt?t:Z):n(P)}function _(P){return dt(P)?(e.consume(P),_):R(P)}function j(P){return P===47?(e.consume(P),R):P===58||P===95||kn(P)?(e.consume(P),I):dt(P)?(e.consume(P),j):R(P)}function I(P){return P===45||P===46||P===58||P===95||yn(P)?(e.consume(P),I):O(P)}function O(P){return P===61?(e.consume(P),A):dt(P)?(e.consume(P),O):j(P)}function A(P){return P===null||P===60||P===61||P===62||P===96?n(P):P===34||P===39?(e.consume(P),c=P,$):dt(P)?(e.consume(P),A):ie(P)}function $(P){return P===c?(e.consume(P),c=null,U):P===null||Je(P)?n(P):(e.consume(P),$)}function ie(P){return P===null||P===34||P===39||P===47||P===60||P===61||P===62||P===96||bt(P)?O(P):(e.consume(P),ie)}function U(P){return P===47||P===62||dt(P)?j(P):n(P)}function R(P){return P===62?(e.consume(P),D):n(P)}function D(P){return P===null||Je(P)?Z(P):dt(P)?(e.consume(P),D):n(P)}function Z(P){return P===45&&i===2?(e.consume(P),X):P===60&&i===1?(e.consume(P),W):P===62&&i===4?(e.consume(P),F):P===63&&i===3?(e.consume(P),T):P===93&&i===5?(e.consume(P),ee):Je(P)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(PM,G,H)(P)):P===null||Je(P)?(e.exit("htmlFlowData"),H(P)):(e.consume(P),Z)}function H(P){return e.check(AM,K,G)(P)}function K(P){return e.enter("lineEnding"),e.consume(P),e.exit("lineEnding"),V}function V(P){return P===null||Je(P)?H(P):(e.enter("htmlFlowData"),Z(P))}function X(P){return P===45?(e.consume(P),T):Z(P)}function W(P){return P===47?(e.consume(P),l="",M):Z(P)}function M(P){if(P===62){const be=l.toLowerCase();return a0.includes(be)?(e.consume(P),F):Z(P)}return kn(P)&&l.length<8?(e.consume(P),l+=String.fromCharCode(P),M):Z(P)}function ee(P){return P===93?(e.consume(P),T):Z(P)}function T(P){return P===62?(e.consume(P),F):P===45&&i===2?(e.consume(P),T):Z(P)}function F(P){return P===null||Je(P)?(e.exit("htmlFlowData"),G(P)):(e.consume(P),F)}function G(P){return e.exit("htmlFlow"),t(P)}}function MM(e,t,n){const r=this;return i;function i(l){return Je(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),o):n(l)}function o(l){return r.parser.lazy[r.now().line]?n(l):t(l)}}function DM(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(ml,t,n)}}const LM={name:"htmlText",tokenize:$M};function $M(e,t,n){const r=this;let i,o,l;return u;function u(T){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(T),c}function c(T){return T===33?(e.consume(T),f):T===47?(e.consume(T),O):T===63?(e.consume(T),j):kn(T)?(e.consume(T),ie):n(T)}function f(T){return T===45?(e.consume(T),h):T===91?(e.consume(T),o=0,b):kn(T)?(e.consume(T),_):n(T)}function h(T){return T===45?(e.consume(T),y):n(T)}function p(T){return T===null?n(T):T===45?(e.consume(T),v):Je(T)?(l=p,W(T)):(e.consume(T),p)}function v(T){return T===45?(e.consume(T),y):p(T)}function y(T){return T===62?X(T):T===45?v(T):p(T)}function b(T){const F="CDATA[";return T===F.charCodeAt(o++)?(e.consume(T),o===F.length?k:b):n(T)}function k(T){return T===null?n(T):T===93?(e.consume(T),E):Je(T)?(l=k,W(T)):(e.consume(T),k)}function E(T){return T===93?(e.consume(T),C):k(T)}function C(T){return T===62?X(T):T===93?(e.consume(T),C):k(T)}function _(T){return T===null||T===62?X(T):Je(T)?(l=_,W(T)):(e.consume(T),_)}function j(T){return T===null?n(T):T===63?(e.consume(T),I):Je(T)?(l=j,W(T)):(e.consume(T),j)}function I(T){return T===62?X(T):j(T)}function O(T){return kn(T)?(e.consume(T),A):n(T)}function A(T){return T===45||yn(T)?(e.consume(T),A):$(T)}function $(T){return Je(T)?(l=$,W(T)):dt(T)?(e.consume(T),$):X(T)}function ie(T){return T===45||yn(T)?(e.consume(T),ie):T===47||T===62||bt(T)?U(T):n(T)}function U(T){return T===47?(e.consume(T),X):T===58||T===95||kn(T)?(e.consume(T),R):Je(T)?(l=U,W(T)):dt(T)?(e.consume(T),U):X(T)}function R(T){return T===45||T===46||T===58||T===95||yn(T)?(e.consume(T),R):D(T)}function D(T){return T===61?(e.consume(T),Z):Je(T)?(l=D,W(T)):dt(T)?(e.consume(T),D):U(T)}function Z(T){return T===null||T===60||T===61||T===62||T===96?n(T):T===34||T===39?(e.consume(T),i=T,H):Je(T)?(l=Z,W(T)):dt(T)?(e.consume(T),Z):(e.consume(T),K)}function H(T){return T===i?(e.consume(T),i=void 0,V):T===null?n(T):Je(T)?(l=H,W(T)):(e.consume(T),H)}function K(T){return T===null||T===34||T===39||T===60||T===61||T===96?n(T):T===47||T===62||bt(T)?U(T):(e.consume(T),K)}function V(T){return T===47||T===62||bt(T)?U(T):n(T)}function X(T){return T===62?(e.consume(T),e.exit("htmlTextData"),e.exit("htmlText"),t):n(T)}function W(T){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(T),e.exit("lineEnding"),M}function M(T){return dt(T)?ft(e,ee,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(T):ee(T)}function ee(T){return e.enter("htmlTextData"),l(T)}}const um={name:"labelEnd",resolveAll:UM,resolveTo:WM,tokenize:HM},FM={tokenize:VM},zM={tokenize:qM},BM={tokenize:KM};function UM(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",t+=i}}return e.length!==n.length&&Gn(e,0,e.length,n),e}function WM(e,t){let n=e.length,r=0,i,o,l,u;for(;n--;)if(i=e[n][1],o){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(l){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(o=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(l=n);const c={type:e[o][1].type==="labelLink"?"link":"image",start:{...e[o][1].start},end:{...e[e.length-1][1].end}},f={type:"label",start:{...e[o][1].start},end:{...e[l][1].end}},h={type:"labelText",start:{...e[o+r+2][1].end},end:{...e[l-2][1].start}};return u=[["enter",c,t],["enter",f,t]],u=ar(u,e.slice(o+1,o+r+3)),u=ar(u,[["enter",h,t]]),u=ar(u,Bc(t.parser.constructs.insideSpan.null,e.slice(o+r+4,l-3),t)),u=ar(u,[["exit",h,t],e[l-2],e[l-1],["exit",f,t]]),u=ar(u,e.slice(l+1)),u=ar(u,[["exit",c,t]]),Gn(e,o,e.length,u),e}function HM(e,t,n){const r=this;let i=r.events.length,o,l;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){o=r.events[i][1];break}return u;function u(v){return o?o._inactive?p(v):(l=r.parser.defined.includes(kr(r.sliceSerialize({start:o.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(v),e.exit("labelMarker"),e.exit("labelEnd"),c):n(v)}function c(v){return v===40?e.attempt(FM,h,l?h:p)(v):v===91?e.attempt(zM,h,l?f:p)(v):l?h(v):p(v)}function f(v){return e.attempt(BM,h,p)(v)}function h(v){return t(v)}function p(v){return o._balanced=!0,n(v)}}function VM(e,t,n){return r;function r(p){return e.enter("resource"),e.enter("resourceMarker"),e.consume(p),e.exit("resourceMarker"),i}function i(p){return bt(p)?Ua(e,o)(p):o(p)}function o(p){return p===41?h(p):Ok(e,l,u,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function l(p){return bt(p)?Ua(e,c)(p):h(p)}function u(p){return n(p)}function c(p){return p===34||p===39||p===40?Dk(e,f,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):h(p)}function f(p){return bt(p)?Ua(e,h)(p):h(p)}function h(p){return p===41?(e.enter("resourceMarker"),e.consume(p),e.exit("resourceMarker"),e.exit("resource"),t):n(p)}}function qM(e,t,n){const r=this;return i;function i(u){return Mk.call(r,e,o,l,"reference","referenceMarker","referenceString")(u)}function o(u){return r.parser.defined.includes(kr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(u):n(u)}function l(u){return n(u)}}function KM(e,t,n){return r;function r(o){return e.enter("reference"),e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),i}function i(o){return o===93?(e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),e.exit("reference"),t):n(o)}}const YM={name:"labelStartImage",resolveAll:um.resolveAll,tokenize:GM};function GM(e,t,n){const r=this;return i;function i(u){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(u),e.exit("labelImageMarker"),o}function o(u){return u===91?(e.enter("labelMarker"),e.consume(u),e.exit("labelMarker"),e.exit("labelImage"),l):n(u)}function l(u){return u===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(u):t(u)}}const JM={name:"labelStartLink",resolveAll:um.resolveAll,tokenize:QM};function QM(e,t,n){const r=this;return i;function i(l){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelLink"),o}function o(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):t(l)}}const lh={name:"lineEnding",tokenize:XM};function XM(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),ft(e,t,"linePrefix")}}const Gu={name:"thematicBreak",tokenize:ZM};function ZM(e,t,n){let r=0,i;return o;function o(f){return e.enter("thematicBreak"),l(f)}function l(f){return i=f,u(f)}function u(f){return f===i?(e.enter("thematicBreakSequence"),c(f)):r>=3&&(f===null||Je(f))?(e.exit("thematicBreak"),t(f)):n(f)}function c(f){return f===i?(e.consume(f),r++,c):(e.exit("thematicBreakSequence"),dt(f)?ft(e,u,"whitespace")(f):u(f))}}const Rn={continuation:{tokenize:r2},exit:s2,name:"list",tokenize:n2},e2={partial:!0,tokenize:o2},t2={partial:!0,tokenize:i2};function n2(e,t,n){const r=this,i=r.events[r.events.length-1];let o=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,l=0;return u;function u(y){const b=r.containerState.type||(y===42||y===43||y===45?"listUnordered":"listOrdered");if(b==="listUnordered"?!r.containerState.marker||y===r.containerState.marker:fp(y)){if(r.containerState.type||(r.containerState.type=b,e.enter(b,{_container:!0})),b==="listUnordered")return e.enter("listItemPrefix"),y===42||y===45?e.check(Gu,n,f)(y):f(y);if(!r.interrupt||y===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(y)}return n(y)}function c(y){return fp(y)&&++l<10?(e.consume(y),c):(!r.interrupt||l<2)&&(r.containerState.marker?y===r.containerState.marker:y===41||y===46)?(e.exit("listItemValue"),f(y)):n(y)}function f(y){return e.enter("listItemMarker"),e.consume(y),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||y,e.check(ml,r.interrupt?n:h,e.attempt(e2,v,p))}function h(y){return r.containerState.initialBlankLine=!0,o++,v(y)}function p(y){return dt(y)?(e.enter("listItemPrefixWhitespace"),e.consume(y),e.exit("listItemPrefixWhitespace"),v):n(y)}function v(y){return r.containerState.size=o+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(y)}}function r2(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(ml,i,o);function i(u){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,ft(e,t,"listItemIndent",r.containerState.size+1)(u)}function o(u){return r.containerState.furtherBlankLines||!dt(u)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,l(u)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(t2,t,l)(u))}function l(u){return r.containerState._closeFlow=!0,r.interrupt=void 0,ft(e,e.attempt(Rn,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u)}}function i2(e,t,n){const r=this;return ft(e,i,"listItemIndent",r.containerState.size+1);function i(o){const l=r.events[r.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===r.containerState.size?t(o):n(o)}}function s2(e){e.exit(this.containerState.type)}function o2(e,t,n){const r=this;return ft(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(o){const l=r.events[r.events.length-1];return!dt(o)&&l&&l[1].type==="listItemPrefixWhitespace"?t(o):n(o)}}const l0={name:"setextUnderline",resolveTo:a2,tokenize:l2};function a2(e,t){let n=e.length,r,i,o;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!o&&e[n][1].type==="definition"&&(o=n);const l={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[i][1].type="setextHeadingText",o?(e.splice(i,0,["enter",l,t]),e.splice(o+1,0,["exit",e[r][1],t]),e[r][1].end={...e[o][1].end}):e[r][1]=l,e.push(["exit",l,t]),e}function l2(e,t,n){const r=this;let i;return o;function o(f){let h=r.events.length,p;for(;h--;)if(r.events[h][1].type!=="lineEnding"&&r.events[h][1].type!=="linePrefix"&&r.events[h][1].type!=="content"){p=r.events[h][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||p)?(e.enter("setextHeadingLine"),i=f,l(f)):n(f)}function l(f){return e.enter("setextHeadingLineSequence"),u(f)}function u(f){return f===i?(e.consume(f),u):(e.exit("setextHeadingLineSequence"),dt(f)?ft(e,c,"lineSuffix")(f):c(f))}function c(f){return f===null||Je(f)?(e.exit("setextHeadingLine"),t(f)):n(f)}}const u2={tokenize:c2};function c2(e){const t=this,n=e.attempt(ml,r,e.attempt(this.parser.constructs.flowInitial,i,ft(e,e.attempt(this.parser.constructs.flow,i,e.attempt(mM,i)),"linePrefix")));return n;function r(o){if(o===null){e.consume(o);return}return e.enter("lineEndingBlank"),e.consume(o),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const d2={resolveAll:$k()},f2=Lk("string"),h2=Lk("text");function Lk(e){return{resolveAll:$k(e==="text"?p2:void 0),tokenize:t};function t(n){const r=this,i=this.parser.constructs[e],o=n.attempt(i,l,u);return l;function l(h){return f(h)?o(h):u(h)}function u(h){if(h===null){n.consume(h);return}return n.enter("data"),n.consume(h),c}function c(h){return f(h)?(n.exit("data"),o(h)):(n.consume(h),c)}function f(h){if(h===null)return!0;const p=i[h];let v=-1;if(p)for(;++v<p.length;){const y=p[v];if(!y.previous||y.previous.call(r,r.previous))return!0}return!1}}}function $k(e){return t;function t(n,r){let i=-1,o;for(;++i<=n.length;)o===void 0?n[i]&&n[i][1].type==="data"&&(o=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==o+2&&(n[o][1].end=n[i-1][1].end,n.splice(o+2,i-o-2),i=o+2),o=void 0);return e?e(n,r):n}}function p2(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let o=i.length,l=-1,u=0,c;for(;o--;){const f=i[o];if(typeof f=="string"){for(l=f.length;f.charCodeAt(l-1)===32;)u++,l--;if(l)break;l=-1}else if(f===-2)c=!0,u++;else if(f!==-1){o++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(u=0),u){const f={type:n===e.length||c||u<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?l:r.start._bufferIndex+l,_index:r.start._index+o,line:r.end.line,column:r.end.column-u,offset:r.end.offset-u},end:{...r.end}};r.end={...f.start},r.start.offset===r.end.offset?Object.assign(r,f):(e.splice(n,0,["enter",f,t],["exit",f,t]),n+=2)}n++}return e}const m2={42:Rn,43:Rn,45:Rn,48:Rn,49:Rn,50:Rn,51:Rn,52:Rn,53:Rn,54:Rn,55:Rn,56:Rn,57:Rn,62:Ik},g2={91:wM},y2={[-2]:ah,[-1]:ah,32:ah},v2={35:CM,42:Gu,45:[l0,Gu],60:IM,61:l0,95:Gu,96:o0,126:o0},x2={38:Ak,92:Pk},w2={[-5]:lh,[-4]:lh,[-3]:lh,33:YM,38:Ak,42:hp,60:[JO,LM],91:JM,92:[EM,Pk],93:um,95:hp,96:uM},b2={null:[hp,d2]},k2={null:[42,95]},S2={null:[]},E2=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:k2,contentInitial:g2,disable:S2,document:m2,flow:v2,flowInitial:y2,insideSpan:b2,string:x2,text:w2},Symbol.toStringTag,{value:"Module"}));function _2(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},o=[];let l=[],u=[];const c={attempt:$(O),check:$(A),consume:_,enter:j,exit:I,interrupt:$(A,{interrupt:!0})},f={code:null,containerState:{},defineSkip:k,events:[],now:b,parser:e,previous:null,sliceSerialize:v,sliceStream:y,write:p};let h=t.tokenize.call(f,c);return t.resolveAll&&o.push(t),f;function p(D){return l=ar(l,D),E(),l[l.length-1]!==null?[]:(ie(t,0),f.events=Bc(o,f.events,f),f.events)}function v(D,Z){return j2(y(D),Z)}function y(D){return C2(l,D)}function b(){const{_bufferIndex:D,_index:Z,line:H,column:K,offset:V}=r;return{_bufferIndex:D,_index:Z,line:H,column:K,offset:V}}function k(D){i[D.line]=D.column,R()}function E(){let D;for(;r._index<l.length;){const Z=l[r._index];if(typeof Z=="string")for(D=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===D&&r._bufferIndex<Z.length;)C(Z.charCodeAt(r._bufferIndex));else C(Z)}}function C(D){h=h(D)}function _(D){Je(D)?(r.line++,r.column=1,r.offset+=D===-3?2:1,R()):D!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===l[r._index].length&&(r._bufferIndex=-1,r._index++)),f.previous=D}function j(D,Z){const H=Z||{};return H.type=D,H.start=b(),f.events.push(["enter",H,f]),u.push(H),H}function I(D){const Z=u.pop();return Z.end=b(),f.events.push(["exit",Z,f]),Z}function O(D,Z){ie(D,Z.from)}function A(D,Z){Z.restore()}function $(D,Z){return H;function H(K,V,X){let W,M,ee,T;return Array.isArray(K)?G(K):"tokenize"in K?G([K]):F(K);function F(me){return ye;function ye(Ce){const Re=Ce!==null&&me[Ce],Pe=Ce!==null&&me.null,te=[...Array.isArray(Re)?Re:Re?[Re]:[],...Array.isArray(Pe)?Pe:Pe?[Pe]:[]];return G(te)(Ce)}}function G(me){return W=me,M=0,me.length===0?X:P(me[M])}function P(me){return ye;function ye(Ce){return T=U(),ee=me,me.partial||(f.currentConstruct=me),me.name&&f.parser.constructs.disable.null.includes(me.name)?ge():me.tokenize.call(Z?Object.assign(Object.create(f),Z):f,c,be,ge)(Ce)}}function be(me){return D(ee,T),V}function ge(me){return T.restore(),++M<W.length?P(W[M]):X}}}function ie(D,Z){D.resolveAll&&!o.includes(D)&&o.push(D),D.resolve&&Gn(f.events,Z,f.events.length-Z,D.resolve(f.events.slice(Z),f)),D.resolveTo&&(f.events=D.resolveTo(f.events,f))}function U(){const D=b(),Z=f.previous,H=f.currentConstruct,K=f.events.length,V=Array.from(u);return{from:K,restore:X};function X(){r=D,f.previous=Z,f.currentConstruct=H,f.events.length=K,u=V,R()}}function R(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function C2(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,o=t.end._bufferIndex;let l;if(n===i)l=[e[n].slice(r,o)];else{if(l=e.slice(n,i),r>-1){const u=l[0];typeof u=="string"?l[0]=u.slice(r):l.shift()}o>0&&l.push(e[i].slice(0,o))}return l}function j2(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const o=e[n];let l;if(typeof o=="string")l=o;else switch(o){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=t?" ":"	";break}case-1:{if(!t&&i)continue;l=" ";break}default:l=String.fromCharCode(o)}i=o===-2,r.push(l)}return r.join("")}function N2(e){const r={constructs:Nk([E2,...(e||{}).extensions||[]]),content:i(WO),defined:[],document:i(VO),flow:i(u2),lazy:{},string:i(f2),text:i(h2)};return r;function i(o){return l;function l(u){return _2(r,o,u)}}}function T2(e){for(;!Rk(e););return e}const u0=/[\0\t\n\r]/g;function I2(){let e=1,t="",n=!0,r;return i;function i(o,l,u){const c=[];let f,h,p,v,y;for(o=t+(typeof o=="string"?o.toString():new TextDecoder(l||void 0).decode(o)),p=0,t="",n&&(o.charCodeAt(0)===65279&&p++,n=void 0);p<o.length;){if(u0.lastIndex=p,f=u0.exec(o),v=f&&f.index!==void 0?f.index:o.length,y=o.charCodeAt(v),!f){t=o.slice(p);break}if(y===10&&p===v&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),p<v&&(c.push(o.slice(p,v)),e+=v-p),y){case 0:{c.push(65533),e++;break}case 9:{for(h=Math.ceil(e/4)*4,c.push(-2);e++<h;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:r=!0,e=1}p=v+1}return u&&(r&&c.push(-5),t&&c.push(t),c.push(null)),c}}const P2=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function A2(e){return e.replace(P2,R2)}function R2(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),o=i===120||i===88;return Tk(n.slice(o?2:1),o?16:10)}return lm(n)||e}const Fk={}.hasOwnProperty;function O2(e,t,n){return typeof t!="string"&&(n=t,t=void 0),M2(n)(T2(N2(n).document().write(I2()(e,t,!0))))}function M2(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(J),autolinkProtocol:U,autolinkEmail:U,atxHeading:o(rt),blockQuote:o(Pe),characterEscape:U,characterReference:U,codeFenced:o(te),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:o(te,l),codeText:o(Ne,l),codeTextData:U,data:U,codeFlowValue:U,definition:o(Be),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:o(We),hardBreakEscape:o(at),hardBreakTrailing:o(at),htmlFlow:o(Nt,l),htmlFlowData:U,htmlText:o(Nt,l),htmlTextData:U,image:o(qt),label:l,link:o(J),listItem:o(pe),listItemValue:v,listOrdered:o(de,p),listUnordered:o(de),paragraph:o(Ae),reference:P,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:o(rt),strong:o(Se),thematicBreak:o(Te)},exit:{atxHeading:c(),atxHeadingSequence:O,autolink:c(),autolinkEmail:Re,autolinkProtocol:Ce,blockQuote:c(),characterEscapeValue:R,characterReferenceMarkerHexadecimal:ge,characterReferenceMarkerNumeric:ge,characterReferenceValue:me,characterReference:ye,codeFenced:c(E),codeFencedFence:k,codeFencedFenceInfo:y,codeFencedFenceMeta:b,codeFlowValue:R,codeIndented:c(C),codeText:c(V),codeTextData:R,data:R,definition:c(),definitionDestinationString:I,definitionLabelString:_,definitionTitleString:j,emphasis:c(),hardBreakEscape:c(Z),hardBreakTrailing:c(Z),htmlFlow:c(H),htmlFlowData:R,htmlText:c(K),htmlTextData:R,image:c(W),label:ee,labelText:M,lineEnding:D,link:c(X),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:be,resourceDestinationString:T,resourceTitleString:F,resource:G,setextHeading:c(ie),setextHeadingLineSequence:$,setextHeadingText:A,strong:c(),thematicBreak:c()}};zk(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(L){let q={type:"root",children:[]};const ce={stack:[q],tokenStack:[],config:t,enter:u,exit:f,buffer:l,resume:h,data:n},le=[];let re=-1;for(;++re<L.length;)if(L[re][1].type==="listOrdered"||L[re][1].type==="listUnordered")if(L[re][0]==="enter")le.push(re);else{const fe=le.pop();re=i(L,fe,re)}for(re=-1;++re<L.length;){const fe=t[L[re][0]];Fk.call(fe,L[re][1].type)&&fe[L[re][1].type].call(Object.assign({sliceSerialize:L[re][2].sliceSerialize},ce),L[re][1])}if(ce.tokenStack.length>0){const fe=ce.tokenStack[ce.tokenStack.length-1];(fe[1]||c0).call(ce,void 0,fe[0])}for(q.position={start:Ci(L.length>0?L[0][1].start:{line:1,column:1,offset:0}),end:Ci(L.length>0?L[L.length-2][1].end:{line:1,column:1,offset:0})},re=-1;++re<t.transforms.length;)q=t.transforms[re](q)||q;return q}function i(L,q,ce){let le=q-1,re=-1,fe=!1,z,ne,he,we;for(;++le<=ce;){const Me=L[le];switch(Me[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Me[0]==="enter"?re++:re--,we=void 0;break}case"lineEndingBlank":{Me[0]==="enter"&&(z&&!we&&!re&&!he&&(he=le),we=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:we=void 0}if(!re&&Me[0]==="enter"&&Me[1].type==="listItemPrefix"||re===-1&&Me[0]==="exit"&&(Me[1].type==="listUnordered"||Me[1].type==="listOrdered")){if(z){let et=le;for(ne=void 0;et--;){const ve=L[et];if(ve[1].type==="lineEnding"||ve[1].type==="lineEndingBlank"){if(ve[0]==="exit")continue;ne&&(L[ne][1].type="lineEndingBlank",fe=!0),ve[1].type="lineEnding",ne=et}else if(!(ve[1].type==="linePrefix"||ve[1].type==="blockQuotePrefix"||ve[1].type==="blockQuotePrefixWhitespace"||ve[1].type==="blockQuoteMarker"||ve[1].type==="listItemIndent"))break}he&&(!ne||he<ne)&&(z._spread=!0),z.end=Object.assign({},ne?L[ne][1].start:Me[1].end),L.splice(ne||le,0,["exit",z,Me[2]]),le++,ce++}if(Me[1].type==="listItemPrefix"){const et={type:"listItem",_spread:!1,start:Object.assign({},Me[1].start),end:void 0};z=et,L.splice(le,0,["enter",et,Me[2]]),le++,ce++,he=void 0,we=!0}}}return L[q][1]._spread=fe,ce}function o(L,q){return ce;function ce(le){u.call(this,L(le),le),q&&q.call(this,le)}}function l(){this.stack.push({type:"fragment",children:[]})}function u(L,q,ce){this.stack[this.stack.length-1].children.push(L),this.stack.push(L),this.tokenStack.push([q,ce||void 0]),L.position={start:Ci(q.start),end:void 0}}function c(L){return q;function q(ce){L&&L.call(this,ce),f.call(this,ce)}}function f(L,q){const ce=this.stack.pop(),le=this.tokenStack.pop();if(le)le[0].type!==L.type&&(q?q.call(this,L,le[0]):(le[1]||c0).call(this,L,le[0]));else throw new Error("Cannot close `"+L.type+"` ("+Ba({start:L.start,end:L.end})+"): its not open");ce.position.end=Ci(L.end)}function h(){return am(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function v(L){if(this.data.expectingFirstListItemValue){const q=this.stack[this.stack.length-2];q.start=Number.parseInt(this.sliceSerialize(L),10),this.data.expectingFirstListItemValue=void 0}}function y(){const L=this.resume(),q=this.stack[this.stack.length-1];q.lang=L}function b(){const L=this.resume(),q=this.stack[this.stack.length-1];q.meta=L}function k(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function E(){const L=this.resume(),q=this.stack[this.stack.length-1];q.value=L.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function C(){const L=this.resume(),q=this.stack[this.stack.length-1];q.value=L.replace(/(\r?\n|\r)$/g,"")}function _(L){const q=this.resume(),ce=this.stack[this.stack.length-1];ce.label=q,ce.identifier=kr(this.sliceSerialize(L)).toLowerCase()}function j(){const L=this.resume(),q=this.stack[this.stack.length-1];q.title=L}function I(){const L=this.resume(),q=this.stack[this.stack.length-1];q.url=L}function O(L){const q=this.stack[this.stack.length-1];if(!q.depth){const ce=this.sliceSerialize(L).length;q.depth=ce}}function A(){this.data.setextHeadingSlurpLineEnding=!0}function $(L){const q=this.stack[this.stack.length-1];q.depth=this.sliceSerialize(L).codePointAt(0)===61?1:2}function ie(){this.data.setextHeadingSlurpLineEnding=void 0}function U(L){const ce=this.stack[this.stack.length-1].children;let le=ce[ce.length-1];(!le||le.type!=="text")&&(le=ue(),le.position={start:Ci(L.start),end:void 0},ce.push(le)),this.stack.push(le)}function R(L){const q=this.stack.pop();q.value+=this.sliceSerialize(L),q.position.end=Ci(L.end)}function D(L){const q=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ce=q.children[q.children.length-1];ce.position.end=Ci(L.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(q.type)&&(U.call(this,L),R.call(this,L))}function Z(){this.data.atHardBreak=!0}function H(){const L=this.resume(),q=this.stack[this.stack.length-1];q.value=L}function K(){const L=this.resume(),q=this.stack[this.stack.length-1];q.value=L}function V(){const L=this.resume(),q=this.stack[this.stack.length-1];q.value=L}function X(){const L=this.stack[this.stack.length-1];if(this.data.inReference){const q=this.data.referenceType||"shortcut";L.type+="Reference",L.referenceType=q,delete L.url,delete L.title}else delete L.identifier,delete L.label;this.data.referenceType=void 0}function W(){const L=this.stack[this.stack.length-1];if(this.data.inReference){const q=this.data.referenceType||"shortcut";L.type+="Reference",L.referenceType=q,delete L.url,delete L.title}else delete L.identifier,delete L.label;this.data.referenceType=void 0}function M(L){const q=this.sliceSerialize(L),ce=this.stack[this.stack.length-2];ce.label=A2(q),ce.identifier=kr(q).toLowerCase()}function ee(){const L=this.stack[this.stack.length-1],q=this.resume(),ce=this.stack[this.stack.length-1];if(this.data.inReference=!0,ce.type==="link"){const le=L.children;ce.children=le}else ce.alt=q}function T(){const L=this.resume(),q=this.stack[this.stack.length-1];q.url=L}function F(){const L=this.resume(),q=this.stack[this.stack.length-1];q.title=L}function G(){this.data.inReference=void 0}function P(){this.data.referenceType="collapsed"}function be(L){const q=this.resume(),ce=this.stack[this.stack.length-1];ce.label=q,ce.identifier=kr(this.sliceSerialize(L)).toLowerCase(),this.data.referenceType="full"}function ge(L){this.data.characterReferenceType=L.type}function me(L){const q=this.sliceSerialize(L),ce=this.data.characterReferenceType;let le;ce?(le=Tk(q,ce==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):le=lm(q);const re=this.stack[this.stack.length-1];re.value+=le}function ye(L){const q=this.stack.pop();q.position.end=Ci(L.end)}function Ce(L){R.call(this,L);const q=this.stack[this.stack.length-1];q.url=this.sliceSerialize(L)}function Re(L){R.call(this,L);const q=this.stack[this.stack.length-1];q.url="mailto:"+this.sliceSerialize(L)}function Pe(){return{type:"blockquote",children:[]}}function te(){return{type:"code",lang:null,meta:null,value:""}}function Ne(){return{type:"inlineCode",value:""}}function Be(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function We(){return{type:"emphasis",children:[]}}function rt(){return{type:"heading",depth:0,children:[]}}function at(){return{type:"break"}}function Nt(){return{type:"html",value:""}}function qt(){return{type:"image",title:null,url:"",alt:null}}function J(){return{type:"link",title:null,url:"",children:[]}}function de(L){return{type:"list",ordered:L.type==="listOrdered",start:null,spread:L._spread,children:[]}}function pe(L){return{type:"listItem",spread:L._spread,checked:null,children:[]}}function Ae(){return{type:"paragraph",children:[]}}function Se(){return{type:"strong",children:[]}}function ue(){return{type:"text",value:""}}function Te(){return{type:"thematicBreak"}}}function Ci(e){return{line:e.line,column:e.column,offset:e.offset}}function zk(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?zk(e,r):D2(e,r)}}function D2(e,t){let n;for(n in t)if(Fk.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function c0(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Ba({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Ba({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Ba({start:t.start,end:t.end})+") is still open")}function L2(e){const t=this;t.parser=n;function n(r){return O2(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function $2(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function F2(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function z2(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function B2(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function U2(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function W2(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=Bo(r.toLowerCase()),o=e.footnoteOrder.indexOf(r);let l,u=e.footnoteCounts.get(r);u===void 0?(u=0,e.footnoteOrder.push(r),l=e.footnoteOrder.length):l=o+1,u+=1,e.footnoteCounts.set(r,u);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(u>1?"-"+u:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(l)}]};e.patch(t,c);const f={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,f),e.applyData(t,f)}function H2(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function V2(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function Bk(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),o=i[0];o&&o.type==="text"?o.value="["+o.value:i.unshift({type:"text",value:"["});const l=i[i.length-1];return l&&l.type==="text"?l.value+=r:i.push({type:"text",value:r}),i}function q2(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Bk(e,t);const i={src:Bo(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const o={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,o),e.applyData(t,o)}function K2(e,t){const n={src:Bo(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function Y2(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function G2(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Bk(e,t);const i={href:Bo(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const o={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,o),e.applyData(t,o)}function J2(e,t){const n={href:Bo(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Q2(e,t,n){const r=e.all(t),i=n?X2(n):Uk(t),o={},l=[];if(typeof t.checked=="boolean"){const h=r[0];let p;h&&h.type==="element"&&h.tagName==="p"?p=h:(p={type:"element",tagName:"p",properties:{},children:[]},r.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let u=-1;for(;++u<r.length;){const h=r[u];(i||u!==0||h.type!=="element"||h.tagName!=="p")&&l.push({type:"text",value:`
`}),h.type==="element"&&h.tagName==="p"&&!i?l.push(...h.children):l.push(h)}const c=r[r.length-1];c&&(i||c.type!=="element"||c.tagName!=="p")&&l.push({type:"text",value:`
`});const f={type:"element",tagName:"li",properties:o,children:l};return e.patch(t,f),e.applyData(t,f)}function X2(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=Uk(n[r])}return t}function Uk(e){const t=e.spread;return t??e.children.length>1}function Z2(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const l=r[i];if(l.type==="element"&&l.tagName==="li"&&l.properties&&Array.isArray(l.properties.className)&&l.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,o),e.applyData(t,o)}function eD(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function tD(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function nD(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function rD(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const l={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],l),i.push(l)}if(n.length>0){const l={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},u=rm(t.children[1]),c=bk(t.children[t.children.length-1]);u&&c&&(l.position={start:u,end:c}),i.push(l)}const o={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,o),e.applyData(t,o)}function iD(e,t,n){const r=n?n.children:void 0,o=(r?r.indexOf(t):1)===0?"th":"td",l=n&&n.type==="table"?n.align:void 0,u=l?l.length:t.children.length;let c=-1;const f=[];for(;++c<u;){const p=t.children[c],v={},y=l?l[c]:void 0;y&&(v.align=y);let b={type:"element",tagName:o,properties:v,children:[]};p&&(b.children=e.all(p),e.patch(p,b),b=e.applyData(p,b)),f.push(b)}const h={type:"element",tagName:"tr",properties:{},children:e.wrap(f,!0)};return e.patch(t,h),e.applyData(t,h)}function sD(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const d0=9,f0=32;function oD(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const o=[];for(;r;)o.push(h0(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return o.push(h0(t.slice(i),i>0,!1)),o.join("")}function h0(e,t,n){let r=0,i=e.length;if(t){let o=e.codePointAt(r);for(;o===d0||o===f0;)r++,o=e.codePointAt(r)}if(n){let o=e.codePointAt(i-1);for(;o===d0||o===f0;)i--,o=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function aD(e,t){const n={type:"text",value:oD(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function lD(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const uD={blockquote:$2,break:F2,code:z2,delete:B2,emphasis:U2,footnoteReference:W2,heading:H2,html:V2,imageReference:q2,image:K2,inlineCode:Y2,linkReference:G2,link:J2,listItem:Q2,list:Z2,paragraph:eD,root:tD,strong:nD,table:rD,tableCell:sD,tableRow:iD,text:aD,thematicBreak:lD,toml:Du,yaml:Du,definition:Du,footnoteDefinition:Du};function Du(){}const Wk=-1,Uc=0,Wa=1,hc=2,cm=3,dm=4,fm=5,hm=6,Hk=7,Vk=8,p0=typeof self=="object"?self:globalThis,cD=(e,t)=>{const n=(i,o)=>(e.set(o,i),i),r=i=>{if(e.has(i))return e.get(i);const[o,l]=t[i];switch(o){case Uc:case Wk:return n(l,i);case Wa:{const u=n([],i);for(const c of l)u.push(r(c));return u}case hc:{const u=n({},i);for(const[c,f]of l)u[r(c)]=r(f);return u}case cm:return n(new Date(l),i);case dm:{const{source:u,flags:c}=l;return n(new RegExp(u,c),i)}case fm:{const u=n(new Map,i);for(const[c,f]of l)u.set(r(c),r(f));return u}case hm:{const u=n(new Set,i);for(const c of l)u.add(r(c));return u}case Hk:{const{name:u,message:c}=l;return n(new p0[u](c),i)}case Vk:return n(BigInt(l),i);case"BigInt":return n(Object(BigInt(l)),i);case"ArrayBuffer":return n(new Uint8Array(l).buffer,l);case"DataView":{const{buffer:u}=new Uint8Array(l);return n(new DataView(u),l)}}return n(new p0[o](l),i)};return r},m0=e=>cD(new Map,e)(0),co="",{toString:dD}={},{keys:fD}=Object,Ta=e=>{const t=typeof e;if(t!=="object"||!e)return[Uc,t];const n=dD.call(e).slice(8,-1);switch(n){case"Array":return[Wa,co];case"Object":return[hc,co];case"Date":return[cm,co];case"RegExp":return[dm,co];case"Map":return[fm,co];case"Set":return[hm,co];case"DataView":return[Wa,n]}return n.includes("Array")?[Wa,n]:n.includes("Error")?[Hk,n]:[hc,n]},Lu=([e,t])=>e===Uc&&(t==="function"||t==="symbol"),hD=(e,t,n,r)=>{const i=(l,u)=>{const c=r.push(l)-1;return n.set(u,c),c},o=l=>{if(n.has(l))return n.get(l);let[u,c]=Ta(l);switch(u){case Uc:{let h=l;switch(c){case"bigint":u=Vk,h=l.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);h=null;break;case"undefined":return i([Wk],l)}return i([u,h],l)}case Wa:{if(c){let v=l;return c==="DataView"?v=new Uint8Array(l.buffer):c==="ArrayBuffer"&&(v=new Uint8Array(l)),i([c,[...v]],l)}const h=[],p=i([u,h],l);for(const v of l)h.push(o(v));return p}case hc:{if(c)switch(c){case"BigInt":return i([c,l.toString()],l);case"Boolean":case"Number":case"String":return i([c,l.valueOf()],l)}if(t&&"toJSON"in l)return o(l.toJSON());const h=[],p=i([u,h],l);for(const v of fD(l))(e||!Lu(Ta(l[v])))&&h.push([o(v),o(l[v])]);return p}case cm:return i([u,l.toISOString()],l);case dm:{const{source:h,flags:p}=l;return i([u,{source:h,flags:p}],l)}case fm:{const h=[],p=i([u,h],l);for(const[v,y]of l)(e||!(Lu(Ta(v))||Lu(Ta(y))))&&h.push([o(v),o(y)]);return p}case hm:{const h=[],p=i([u,h],l);for(const v of l)(e||!Lu(Ta(v)))&&h.push(o(v));return p}}const{message:f}=l;return i([u,{name:c,message:f}],l)};return o},g0=(e,{json:t,lossy:n}={})=>{const r=[];return hD(!(t||n),!!t,new Map,r)(e),r},pc=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?m0(g0(e,t)):structuredClone(e):(e,t)=>m0(g0(e,t));function pD(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function mD(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function gD(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||pD,r=e.options.footnoteBackLabel||mD,i=e.options.footnoteLabel||"Footnotes",o=e.options.footnoteLabelTagName||"h2",l=e.options.footnoteLabelProperties||{className:["sr-only"]},u=[];let c=-1;for(;++c<e.footnoteOrder.length;){const f=e.footnoteById.get(e.footnoteOrder[c]);if(!f)continue;const h=e.all(f),p=String(f.identifier).toUpperCase(),v=Bo(p.toLowerCase());let y=0;const b=[],k=e.footnoteCounts.get(p);for(;k!==void 0&&++y<=k;){b.length>0&&b.push({type:"text",value:" "});let _=typeof n=="string"?n:n(c,y);typeof _=="string"&&(_={type:"text",value:_}),b.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+v+(y>1?"-"+y:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,y),className:["data-footnote-backref"]},children:Array.isArray(_)?_:[_]})}const E=h[h.length-1];if(E&&E.type==="element"&&E.tagName==="p"){const _=E.children[E.children.length-1];_&&_.type==="text"?_.value+=" ":E.children.push({type:"text",value:" "}),E.children.push(...b)}else h.push(...b);const C={type:"element",tagName:"li",properties:{id:t+"fn-"+v},children:e.wrap(h,!0)};e.patch(f,C),u.push(C)}if(u.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...pc(l),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(u,!0)},{type:"text",value:`
`}]}}const Wc=(function(e){if(e==null)return wD;if(typeof e=="function")return Hc(e);if(typeof e=="object")return Array.isArray(e)?yD(e):vD(e);if(typeof e=="string")return xD(e);throw new Error("Expected function, string, or object as test")});function yD(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Wc(e[n]);return Hc(r);function r(...i){let o=-1;for(;++o<t.length;)if(t[o].apply(this,i))return!0;return!1}}function vD(e){const t=e;return Hc(n);function n(r){const i=r;let o;for(o in e)if(i[o]!==t[o])return!1;return!0}}function xD(e){return Hc(t);function t(n){return n&&n.type===e}}function Hc(e){return t;function t(n,r,i){return!!(bD(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function wD(){return!0}function bD(e){return e!==null&&typeof e=="object"&&"type"in e}const qk=[],kD=!0,pp=!1,SD="skip";function Kk(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const o=Wc(i),l=r?-1:1;u(e,void 0,[])();function u(c,f,h){const p=c&&typeof c=="object"?c:{};if(typeof p.type=="string"){const y=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(v,"name",{value:"node ("+(c.type+(y?"<"+y+">":""))+")"})}return v;function v(){let y=qk,b,k,E;if((!t||o(c,f,h[h.length-1]||void 0))&&(y=ED(n(c,h)),y[0]===pp))return y;if("children"in c&&c.children){const C=c;if(C.children&&y[0]!==SD)for(k=(r?C.children.length:-1)+l,E=h.concat(C);k>-1&&k<C.children.length;){const _=C.children[k];if(b=u(_,k,E)(),b[0]===pp)return b;k=typeof b[1]=="number"?b[1]:k+l}}return y}}}function ED(e){return Array.isArray(e)?e:typeof e=="number"?[kD,e]:e==null?qk:[e]}function Vc(e,t,n,r){let i,o,l;typeof t=="function"&&typeof n!="function"?(o=void 0,l=t,i=n):(o=t,l=n,i=r),Kk(e,o,u,i);function u(c,f){const h=f[f.length-1],p=h?h.children.indexOf(c):void 0;return l(c,p,h)}}const mp={}.hasOwnProperty,_D={};function CD(e,t){const n=t||_D,r=new Map,i=new Map,o=new Map,l={...uD,...n.handlers},u={all:f,applyData:ND,definitionById:r,footnoteById:i,footnoteCounts:o,footnoteOrder:[],handlers:l,one:c,options:n,patch:jD,wrap:ID};return Vc(e,function(h){if(h.type==="definition"||h.type==="footnoteDefinition"){const p=h.type==="definition"?r:i,v=String(h.identifier).toUpperCase();p.has(v)||p.set(v,h)}}),u;function c(h,p){const v=h.type,y=u.handlers[v];if(mp.call(u.handlers,v)&&y)return y(u,h,p);if(u.options.passThrough&&u.options.passThrough.includes(v)){if("children"in h){const{children:k,...E}=h,C=pc(E);return C.children=u.all(h),C}return pc(h)}return(u.options.unknownHandler||TD)(u,h,p)}function f(h){const p=[];if("children"in h){const v=h.children;let y=-1;for(;++y<v.length;){const b=u.one(v[y],h);if(b){if(y&&v[y-1].type==="break"&&(!Array.isArray(b)&&b.type==="text"&&(b.value=y0(b.value)),!Array.isArray(b)&&b.type==="element")){const k=b.children[0];k&&k.type==="text"&&(k.value=y0(k.value))}Array.isArray(b)?p.push(...b):p.push(b)}}}return p}}function jD(e,t){e.position&&(t.position=mO(e))}function ND(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,o=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const l="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:l}}n.type==="element"&&o&&Object.assign(n.properties,pc(o)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function TD(e,t){const n=t.data||{},r="value"in t&&!(mp.call(n,"hProperties")||mp.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function ID(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function y0(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function v0(e,t){const n=CD(e,t),r=n.one(e,void 0),i=gD(n),o=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&o.children.push({type:"text",value:`
`},i),o}function PD(e,t){return e&&"run"in e?async function(n,r){const i=v0(n,{file:r,...t});await e.run(i,r)}:function(n,r){return v0(n,{file:r,...e||t})}}function x0(e){if(e)throw e}var uh,w0;function AD(){if(w0)return uh;w0=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(f){return typeof Array.isArray=="function"?Array.isArray(f):t.call(f)==="[object Array]"},o=function(f){if(!f||t.call(f)!=="[object Object]")return!1;var h=e.call(f,"constructor"),p=f.constructor&&f.constructor.prototype&&e.call(f.constructor.prototype,"isPrototypeOf");if(f.constructor&&!h&&!p)return!1;var v;for(v in f);return typeof v>"u"||e.call(f,v)},l=function(f,h){n&&h.name==="__proto__"?n(f,h.name,{enumerable:!0,configurable:!0,value:h.newValue,writable:!0}):f[h.name]=h.newValue},u=function(f,h){if(h==="__proto__")if(e.call(f,h)){if(r)return r(f,h).value}else return;return f[h]};return uh=function c(){var f,h,p,v,y,b,k=arguments[0],E=1,C=arguments.length,_=!1;for(typeof k=="boolean"&&(_=k,k=arguments[1]||{},E=2),(k==null||typeof k!="object"&&typeof k!="function")&&(k={});E<C;++E)if(f=arguments[E],f!=null)for(h in f)p=u(k,h),v=u(f,h),k!==v&&(_&&v&&(o(v)||(y=i(v)))?(y?(y=!1,b=p&&i(p)?p:[]):b=p&&o(p)?p:{},l(k,{name:h,newValue:c(_,b,v)})):typeof v<"u"&&l(k,{name:h,newValue:v}));return k},uh}var RD=AD();const ch=Ro(RD);function gp(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function OD(){const e=[],t={run:n,use:r};return t;function n(...i){let o=-1;const l=i.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);u(null,...i);function u(c,...f){const h=e[++o];let p=-1;if(c){l(c);return}for(;++p<i.length;)(f[p]===null||f[p]===void 0)&&(f[p]=i[p]);i=f,h?MD(h,u)(...f):l(null,...f)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function MD(e,t){let n;return r;function r(...l){const u=e.length>l.length;let c;u&&l.push(i);try{c=e.apply(this,l)}catch(f){const h=f;if(u&&n)throw h;return i(h)}u||(c&&c.then&&typeof c.then=="function"?c.then(o,i):c instanceof Error?i(c):o(c))}function i(l,...u){n||(n=!0,t(l,...u))}function o(l){i(null,l)}}const Or={basename:DD,dirname:LD,extname:$D,join:FD,sep:"/"};function DD(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');gl(e);let n=0,r=-1,i=e.length,o;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(o){n=i+1;break}}else r<0&&(o=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let l=-1,u=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(o){n=i+1;break}}else l<0&&(o=!0,l=i+1),u>-1&&(e.codePointAt(i)===t.codePointAt(u--)?u<0&&(r=i):(u=-1,r=l));return n===r?r=l:r<0&&(r=e.length),e.slice(n,r)}function LD(e){if(gl(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function $D(e){gl(e);let t=e.length,n=-1,r=0,i=-1,o=0,l;for(;t--;){const u=e.codePointAt(t);if(u===47){if(l){r=t+1;break}continue}n<0&&(l=!0,n=t+1),u===46?i<0?i=t:o!==1&&(o=1):i>-1&&(o=-1)}return i<0||n<0||o===0||o===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function FD(...e){let t=-1,n;for(;++t<e.length;)gl(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":zD(n)}function zD(e){gl(e);const t=e.codePointAt(0)===47;let n=BD(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function BD(e,t){let n="",r=0,i=-1,o=0,l=-1,u,c;for(;++l<=e.length;){if(l<e.length)u=e.codePointAt(l);else{if(u===47)break;u=47}if(u===47){if(!(i===l-1||o===1))if(i!==l-1&&o===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),i=l,o=0;continue}}else if(n.length>0){n="",r=0,i=l,o=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,l):n=e.slice(i+1,l),r=l-i-1;i=l,o=0}else u===46&&o>-1?o++:o=-1}return n}function gl(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const UD={cwd:WD};function WD(){return"/"}function yp(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function HD(e){if(typeof e=="string")e=new URL(e);else if(!yp(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return VD(e)}function VD(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const dh=["history","path","basename","stem","extname","dirname"];class Yk{constructor(t){let n;t?yp(t)?n={path:t}:typeof t=="string"||qD(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":UD.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<dh.length;){const o=dh[r];o in n&&n[o]!==void 0&&n[o]!==null&&(this[o]=o==="history"?[...n[o]]:n[o])}let i;for(i in n)dh.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Or.basename(this.path):void 0}set basename(t){hh(t,"basename"),fh(t,"basename"),this.path=Or.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Or.dirname(this.path):void 0}set dirname(t){b0(this.basename,"dirname"),this.path=Or.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Or.extname(this.path):void 0}set extname(t){if(fh(t,"extname"),b0(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Or.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){yp(t)&&(t=HD(t)),hh(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Or.basename(this.path,this.extname):void 0}set stem(t){hh(t,"stem"),fh(t,"stem"),this.path=Or.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new vn(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function fh(e,t){if(e&&e.includes(Or.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Or.sep+"`")}function hh(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function b0(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function qD(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const KD=(function(e){const r=this.constructor.prototype,i=r[e],o=function(){return i.apply(o,arguments)};return Object.setPrototypeOf(o,r),o}),YD={}.hasOwnProperty;class pm extends KD{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=OD()}copy(){const t=new pm;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(ch(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(gh("data",this.frozen),this.namespace[t]=n,this):YD.call(this.namespace,t)&&this.namespace[t]||void 0:t?(gh("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=$u(t),r=this.parser||this.Parser;return ph("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),ph("process",this.parser||this.Parser),mh("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(o,l){const u=$u(t),c=r.parse(u);r.run(c,u,function(h,p,v){if(h||!p||!v)return f(h);const y=p,b=r.stringify(y,v);QD(b)?v.value=b:v.result=b,f(h,v)});function f(h,p){h||!p?l(h):o?o(p):n(void 0,p)}}}processSync(t){let n=!1,r;return this.freeze(),ph("processSync",this.parser||this.Parser),mh("processSync",this.compiler||this.Compiler),this.process(t,i),S0("processSync","process",n),r;function i(o,l){n=!0,x0(o),r=l}}run(t,n,r){k0(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?o(void 0,r):new Promise(o);function o(l,u){const c=$u(n);i.run(t,c,f);function f(h,p,v){const y=p||t;h?u(h):l?l(y):r(void 0,y,v)}}}runSync(t,n){let r=!1,i;return this.run(t,n,o),S0("runSync","run",r),i;function o(l,u){x0(l),i=u,r=!0}}stringify(t,n){this.freeze();const r=$u(n),i=this.compiler||this.Compiler;return mh("stringify",i),k0(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(gh("use",this.frozen),t!=null)if(typeof t=="function")c(t,n);else if(typeof t=="object")Array.isArray(t)?u(t):l(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function o(f){if(typeof f=="function")c(f,[]);else if(typeof f=="object")if(Array.isArray(f)){const[h,...p]=f;c(h,p)}else l(f);else throw new TypeError("Expected usable value, not `"+f+"`")}function l(f){if(!("plugins"in f)&&!("settings"in f))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");u(f.plugins),f.settings&&(i.settings=ch(!0,i.settings,f.settings))}function u(f){let h=-1;if(f!=null)if(Array.isArray(f))for(;++h<f.length;){const p=f[h];o(p)}else throw new TypeError("Expected a list of plugins, not `"+f+"`")}function c(f,h){let p=-1,v=-1;for(;++p<r.length;)if(r[p][0]===f){v=p;break}if(v===-1)r.push([f,...h]);else if(h.length>0){let[y,...b]=h;const k=r[v][1];gp(k)&&gp(y)&&(y=ch(!0,k,y)),r[v]=[f,y,...b]}}}}const GD=new pm().freeze();function ph(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function mh(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function gh(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function k0(e){if(!gp(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function S0(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function $u(e){return JD(e)?e:new Yk(e)}function JD(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function QD(e){return typeof e=="string"||XD(e)}function XD(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const ZD="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",E0=[],_0={allowDangerousHtml:!0},eL=/^(https?|ircs?|mailto|xmpp)$/i,tL=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function nL(e){const t=rL(e),n=iL(e);return sL(t.runSync(t.parse(n),n),e)}function rL(e){const t=e.rehypePlugins||E0,n=e.remarkPlugins||E0,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,..._0}:_0;return GD().use(L2).use(n).use(PD,r).use(t)}function iL(e){const t=e.children||"",n=new Yk;return typeof t=="string"&&(n.value=t),n}function sL(e,t){const n=t.allowedElements,r=t.allowElement,i=t.components,o=t.disallowedElements,l=t.skipHtml,u=t.unwrapDisallowed,c=t.urlTransform||oL;for(const h of tL)Object.hasOwn(t,h.from)&&(""+h.from+(h.to?"use `"+h.to+"` instead":"remove it")+ZD+h.id,void 0);return t.className&&(e={type:"element",tagName:"div",properties:{className:t.className},children:e.type==="root"?e.children:[e]}),Vc(e,f),wO(e,{Fragment:m.Fragment,components:i,ignoreInvalidStyle:!0,jsx:m.jsx,jsxs:m.jsxs,passKeys:!0,passNode:!0});function f(h,p,v){if(h.type==="raw"&&v&&typeof p=="number")return l?v.children.splice(p,1):v.children[p]={type:"text",value:h.value},p;if(h.type==="element"){let y;for(y in oh)if(Object.hasOwn(oh,y)&&Object.hasOwn(h.properties,y)){const b=h.properties[y],k=oh[y];(k===null||k.includes(h.tagName))&&(h.properties[y]=c(String(b||""),y,h))}}if(h.type==="element"){let y=n?!n.includes(h.tagName):o?o.includes(h.tagName):!1;if(!y&&r&&typeof p=="number"&&(y=!r(h,p,v)),y&&v&&typeof p=="number")return u&&h.children?v.children.splice(p,1,...h.children):v.children.splice(p,1),p}}}function oL(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||n!==-1&&t>n||r!==-1&&t>r||eL.test(e.slice(0,t))?e:""}function C0(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(t);for(;i!==-1;)r++,i=n.indexOf(t,i+t.length);return r}function aL(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function lL(e,t,n){const i=Wc((n||{}).ignore||[]),o=uL(t);let l=-1;for(;++l<o.length;)Kk(e,"text",u);function u(f,h){let p=-1,v;for(;++p<h.length;){const y=h[p],b=v?v.children:void 0;if(i(y,b?b.indexOf(y):void 0,v))return;v=y}if(v)return c(f,h)}function c(f,h){const p=h[h.length-1],v=o[l][0],y=o[l][1];let b=0;const E=p.children.indexOf(f);let C=!1,_=[];v.lastIndex=0;let j=v.exec(f.value);for(;j;){const I=j.index,O={index:j.index,input:j.input,stack:[...h,f]};let A=y(...j,O);if(typeof A=="string"&&(A=A.length>0?{type:"text",value:A}:void 0),A===!1?v.lastIndex=I+1:(b!==I&&_.push({type:"text",value:f.value.slice(b,I)}),Array.isArray(A)?_.push(...A):A&&_.push(A),b=I+j[0].length,C=!0),!v.global)break;j=v.exec(f.value)}return C?(b<f.value.length&&_.push({type:"text",value:f.value.slice(b)}),p.children.splice(E,1,..._)):_=[f],E+_.length}}function uL(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const i=n[r];t.push([cL(i[0]),dL(i[1])])}return t}function cL(e){return typeof e=="string"?new RegExp(aL(e),"g"):e}function dL(e){return typeof e=="function"?e:function(){return e}}const yh="phrasing",vh=["autolink","link","image","label"];function fL(){return{transforms:[xL],enter:{literalAutolink:pL,literalAutolinkEmail:xh,literalAutolinkHttp:xh,literalAutolinkWww:xh},exit:{literalAutolink:vL,literalAutolinkEmail:yL,literalAutolinkHttp:mL,literalAutolinkWww:gL}}}function hL(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:yh,notInConstruct:vh},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:yh,notInConstruct:vh},{character:":",before:"[ps]",after:"\\/",inConstruct:yh,notInConstruct:vh}]}}function pL(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function xh(e){this.config.enter.autolinkProtocol.call(this,e)}function mL(e){this.config.exit.autolinkProtocol.call(this,e)}function gL(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function yL(e){this.config.exit.autolinkEmail.call(this,e)}function vL(e){this.exit(e)}function xL(e){lL(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,wL],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),bL]],{ignore:["link","linkReference"]})}function wL(e,t,n,r,i){let o="";if(!Gk(i)||(/^w/i.test(t)&&(n=t+n,t="",o="http://"),!kL(n)))return!1;const l=SL(n+r);if(!l[0])return!1;const u={type:"link",title:null,url:o+t+l[0],children:[{type:"text",value:t+l[0]}]};return l[1]?[u,{type:"text",value:l[1]}]:u}function bL(e,t,n,r){return!Gk(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function kL(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function SL(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const i=C0(e,"(");let o=C0(e,")");for(;r!==-1&&i>o;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),o++;return[e,n]}function Gk(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||ks(n)||zc(n))&&(!t||n!==47)}Jk.peek=AL;function EL(){this.buffer()}function _L(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function CL(){this.buffer()}function jL(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function NL(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=kr(this.sliceSerialize(e)).toLowerCase(),n.label=t}function TL(e){this.exit(e)}function IL(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=kr(this.sliceSerialize(e)).toLowerCase(),n.label=t}function PL(e){this.exit(e)}function AL(){return"["}function Jk(e,t,n,r){const i=n.createTracker(r);let o=i.move("[^");const l=n.enter("footnoteReference"),u=n.enter("reference");return o+=i.move(n.safe(n.associationId(e),{after:"]",before:o})),u(),l(),o+=i.move("]"),o}function RL(){return{enter:{gfmFootnoteCallString:EL,gfmFootnoteCall:_L,gfmFootnoteDefinitionLabelString:CL,gfmFootnoteDefinition:jL},exit:{gfmFootnoteCallString:NL,gfmFootnoteCall:TL,gfmFootnoteDefinitionLabelString:IL,gfmFootnoteDefinition:PL}}}function OL(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:Jk},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,o,l){const u=o.createTracker(l);let c=u.move("[^");const f=o.enter("footnoteDefinition"),h=o.enter("label");return c+=u.move(o.safe(o.associationId(r),{before:c,after:"]"})),h(),c+=u.move("]:"),r.children&&r.children.length>0&&(u.shift(4),c+=u.move((t?`
`:" ")+o.indentLines(o.containerFlow(r,u.current()),t?Qk:ML))),f(),c}}function ML(e,t,n){return t===0?e:Qk(e,t,n)}function Qk(e,t,n){return(n?"":"    ")+e}const DL=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];Xk.peek=BL;function LL(){return{canContainEols:["delete"],enter:{strikethrough:FL},exit:{strikethrough:zL}}}function $L(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:DL}],handlers:{delete:Xk}}}function FL(e){this.enter({type:"delete",children:[]},e)}function zL(e){this.exit(e)}function Xk(e,t,n,r){const i=n.createTracker(r),o=n.enter("strikethrough");let l=i.move("~~");return l+=n.containerPhrasing(e,{...i.current(),before:l,after:"~"}),l+=i.move("~~"),o(),l}function BL(){return"~"}function UL(e){return e.length}function WL(e,t){const n=t||{},r=(n.align||[]).concat(),i=n.stringLength||UL,o=[],l=[],u=[],c=[];let f=0,h=-1;for(;++h<e.length;){const k=[],E=[];let C=-1;for(e[h].length>f&&(f=e[h].length);++C<e[h].length;){const _=HL(e[h][C]);if(n.alignDelimiters!==!1){const j=i(_);E[C]=j,(c[C]===void 0||j>c[C])&&(c[C]=j)}k.push(_)}l[h]=k,u[h]=E}let p=-1;if(typeof r=="object"&&"length"in r)for(;++p<f;)o[p]=j0(r[p]);else{const k=j0(r);for(;++p<f;)o[p]=k}p=-1;const v=[],y=[];for(;++p<f;){const k=o[p];let E="",C="";k===99?(E=":",C=":"):k===108?E=":":k===114&&(C=":");let _=n.alignDelimiters===!1?1:Math.max(1,c[p]-E.length-C.length);const j=E+"-".repeat(_)+C;n.alignDelimiters!==!1&&(_=E.length+_+C.length,_>c[p]&&(c[p]=_),y[p]=_),v[p]=j}l.splice(1,0,v),u.splice(1,0,y),h=-1;const b=[];for(;++h<l.length;){const k=l[h],E=u[h];p=-1;const C=[];for(;++p<f;){const _=k[p]||"";let j="",I="";if(n.alignDelimiters!==!1){const O=c[p]-(E[p]||0),A=o[p];A===114?j=" ".repeat(O):A===99?O%2?(j=" ".repeat(O/2+.5),I=" ".repeat(O/2-.5)):(j=" ".repeat(O/2),I=j):I=" ".repeat(O)}n.delimiterStart!==!1&&!p&&C.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&_==="")&&(n.delimiterStart!==!1||p)&&C.push(" "),n.alignDelimiters!==!1&&C.push(j),C.push(_),n.alignDelimiters!==!1&&C.push(I),n.padding!==!1&&C.push(" "),(n.delimiterEnd!==!1||p!==f-1)&&C.push("|")}b.push(n.delimiterEnd===!1?C.join("").replace(/ +$/,""):C.join(""))}return b.join(`
`)}function HL(e){return e==null?"":String(e)}function j0(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function VL(e,t,n,r){const i=n.enter("blockquote"),o=n.createTracker(r);o.move("> "),o.shift(2);const l=n.indentLines(n.containerFlow(e,o.current()),qL);return i(),l}function qL(e,t,n){return">"+(n?"":" ")+e}function KL(e,t){return N0(e,t.inConstruct,!0)&&!N0(e,t.notInConstruct,!1)}function N0(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function T0(e,t,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&KL(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function YL(e,t){const n=String(e);let r=n.indexOf(t),i=r,o=0,l=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++o>l&&(l=o):o=1,i=r+t.length,r=n.indexOf(t,i);return l}function GL(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function JL(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function QL(e,t,n,r){const i=JL(n),o=e.value||"",l=i==="`"?"GraveAccent":"Tilde";if(GL(e,n)){const p=n.enter("codeIndented"),v=n.indentLines(o,XL);return p(),v}const u=n.createTracker(r),c=i.repeat(Math.max(YL(o,i)+1,3)),f=n.enter("codeFenced");let h=u.move(c);if(e.lang){const p=n.enter(`codeFencedLang${l}`);h+=u.move(n.safe(e.lang,{before:h,after:" ",encode:["`"],...u.current()})),p()}if(e.lang&&e.meta){const p=n.enter(`codeFencedMeta${l}`);h+=u.move(" "),h+=u.move(n.safe(e.meta,{before:h,after:`
`,encode:["`"],...u.current()})),p()}return h+=u.move(`
`),o&&(h+=u.move(o+`
`)),h+=u.move(c),f(),h}function XL(e,t,n){return(n?"":"    ")+e}function mm(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function ZL(e,t,n,r){const i=mm(n),o=i==='"'?"Quote":"Apostrophe",l=n.enter("definition");let u=n.enter("label");const c=n.createTracker(r);let f=c.move("[");return f+=c.move(n.safe(n.associationId(e),{before:f,after:"]",...c.current()})),f+=c.move("]: "),u(),!e.url||/[\0- \u007F]/.test(e.url)?(u=n.enter("destinationLiteral"),f+=c.move("<"),f+=c.move(n.safe(e.url,{before:f,after:">",...c.current()})),f+=c.move(">")):(u=n.enter("destinationRaw"),f+=c.move(n.safe(e.url,{before:f,after:e.title?" ":`
`,...c.current()}))),u(),e.title&&(u=n.enter(`title${o}`),f+=c.move(" "+i),f+=c.move(n.safe(e.title,{before:f,after:i,...c.current()})),f+=c.move(i),u()),l(),f}function e$(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function rl(e){return"&#x"+e.toString(16).toUpperCase()+";"}function mc(e,t,n){const r=Po(e),i=Po(t);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}Zk.peek=t$;function Zk(e,t,n,r){const i=e$(n),o=n.enter("emphasis"),l=n.createTracker(r),u=l.move(i);let c=l.move(n.containerPhrasing(e,{after:i,before:u,...l.current()}));const f=c.charCodeAt(0),h=mc(r.before.charCodeAt(r.before.length-1),f,i);h.inside&&(c=rl(f)+c.slice(1));const p=c.charCodeAt(c.length-1),v=mc(r.after.charCodeAt(0),p,i);v.inside&&(c=c.slice(0,-1)+rl(p));const y=l.move(i);return o(),n.attentionEncodeSurroundingInfo={after:v.outside,before:h.outside},u+c+y}function t$(e,t,n){return n.options.emphasis||"*"}function n$(e,t){let n=!1;return Vc(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,pp}),!!((!e.depth||e.depth<3)&&am(e)&&(t.options.setext||n))}function r$(e,t,n,r){const i=Math.max(Math.min(6,e.depth||1),1),o=n.createTracker(r);if(n$(e,n)){const h=n.enter("headingSetext"),p=n.enter("phrasing"),v=n.containerPhrasing(e,{...o.current(),before:`
`,after:`
`});return p(),h(),v+`
`+(i===1?"=":"-").repeat(v.length-(Math.max(v.lastIndexOf("\r"),v.lastIndexOf(`
`))+1))}const l="#".repeat(i),u=n.enter("headingAtx"),c=n.enter("phrasing");o.move(l+" ");let f=n.containerPhrasing(e,{before:"# ",after:`
`,...o.current()});return/^[\t ]/.test(f)&&(f=rl(f.charCodeAt(0))+f.slice(1)),f=f?l+" "+f:l,n.options.closeAtx&&(f+=" "+l),c(),u(),f}e1.peek=i$;function e1(e){return e.value||""}function i$(){return"<"}t1.peek=s$;function t1(e,t,n,r){const i=mm(n),o=i==='"'?"Quote":"Apostrophe",l=n.enter("image");let u=n.enter("label");const c=n.createTracker(r);let f=c.move("![");return f+=c.move(n.safe(e.alt,{before:f,after:"]",...c.current()})),f+=c.move("]("),u(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(u=n.enter("destinationLiteral"),f+=c.move("<"),f+=c.move(n.safe(e.url,{before:f,after:">",...c.current()})),f+=c.move(">")):(u=n.enter("destinationRaw"),f+=c.move(n.safe(e.url,{before:f,after:e.title?" ":")",...c.current()}))),u(),e.title&&(u=n.enter(`title${o}`),f+=c.move(" "+i),f+=c.move(n.safe(e.title,{before:f,after:i,...c.current()})),f+=c.move(i),u()),f+=c.move(")"),l(),f}function s$(){return"!"}n1.peek=o$;function n1(e,t,n,r){const i=e.referenceType,o=n.enter("imageReference");let l=n.enter("label");const u=n.createTracker(r);let c=u.move("![");const f=n.safe(e.alt,{before:c,after:"]",...u.current()});c+=u.move(f+"]["),l();const h=n.stack;n.stack=[],l=n.enter("reference");const p=n.safe(n.associationId(e),{before:c,after:"]",...u.current()});return l(),n.stack=h,o(),i==="full"||!f||f!==p?c+=u.move(p+"]"):i==="shortcut"?c=c.slice(0,-1):c+=u.move("]"),c}function o$(){return"!"}r1.peek=a$;function r1(e,t,n){let r=e.value||"",i="`",o=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++o<n.unsafe.length;){const l=n.unsafe[o],u=n.compilePattern(l);let c;if(l.atBreak)for(;c=u.exec(r);){let f=c.index;r.charCodeAt(f)===10&&r.charCodeAt(f-1)===13&&f--,r=r.slice(0,f)+" "+r.slice(c.index+1)}}return i+r+i}function a$(){return"`"}function i1(e,t){const n=am(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}s1.peek=l$;function s1(e,t,n,r){const i=mm(n),o=i==='"'?"Quote":"Apostrophe",l=n.createTracker(r);let u,c;if(i1(e,n)){const h=n.stack;n.stack=[],u=n.enter("autolink");let p=l.move("<");return p+=l.move(n.containerPhrasing(e,{before:p,after:">",...l.current()})),p+=l.move(">"),u(),n.stack=h,p}u=n.enter("link"),c=n.enter("label");let f=l.move("[");return f+=l.move(n.containerPhrasing(e,{before:f,after:"](",...l.current()})),f+=l.move("]("),c(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(c=n.enter("destinationLiteral"),f+=l.move("<"),f+=l.move(n.safe(e.url,{before:f,after:">",...l.current()})),f+=l.move(">")):(c=n.enter("destinationRaw"),f+=l.move(n.safe(e.url,{before:f,after:e.title?" ":")",...l.current()}))),c(),e.title&&(c=n.enter(`title${o}`),f+=l.move(" "+i),f+=l.move(n.safe(e.title,{before:f,after:i,...l.current()})),f+=l.move(i),c()),f+=l.move(")"),u(),f}function l$(e,t,n){return i1(e,n)?"<":"["}o1.peek=u$;function o1(e,t,n,r){const i=e.referenceType,o=n.enter("linkReference");let l=n.enter("label");const u=n.createTracker(r);let c=u.move("[");const f=n.containerPhrasing(e,{before:c,after:"]",...u.current()});c+=u.move(f+"]["),l();const h=n.stack;n.stack=[],l=n.enter("reference");const p=n.safe(n.associationId(e),{before:c,after:"]",...u.current()});return l(),n.stack=h,o(),i==="full"||!f||f!==p?c+=u.move(p+"]"):i==="shortcut"?c=c.slice(0,-1):c+=u.move("]"),c}function u$(){return"["}function gm(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function c$(e){const t=gm(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function d$(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function a1(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function f$(e,t,n,r){const i=n.enter("list"),o=n.bulletCurrent;let l=e.ordered?d$(n):gm(n);const u=e.ordered?l==="."?")":".":c$(n);let c=t&&n.bulletLastUsed?l===n.bulletLastUsed:!1;if(!e.ordered){const h=e.children?e.children[0]:void 0;if((l==="*"||l==="-")&&h&&(!h.children||!h.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),a1(n)===l&&h){let p=-1;for(;++p<e.children.length;){const v=e.children[p];if(v&&v.type==="listItem"&&v.children&&v.children[0]&&v.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(l=u),n.bulletCurrent=l;const f=n.containerFlow(e,r);return n.bulletLastUsed=l,n.bulletCurrent=o,i(),f}function h$(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function p$(e,t,n,r){const i=h$(n);let o=n.bulletCurrent||gm(n);t&&t.type==="list"&&t.ordered&&(o=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+o);let l=o.length+1;(i==="tab"||i==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(l=Math.ceil(l/4)*4);const u=n.createTracker(r);u.move(o+" ".repeat(l-o.length)),u.shift(l);const c=n.enter("listItem"),f=n.indentLines(n.containerFlow(e,u.current()),h);return c(),f;function h(p,v,y){return v?(y?"":" ".repeat(l))+p:(y?o:o+" ".repeat(l-o.length))+p}}function m$(e,t,n,r){const i=n.enter("paragraph"),o=n.enter("phrasing"),l=n.containerPhrasing(e,r);return o(),i(),l}const g$=Wc(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function y$(e,t,n,r){return(e.children.some(function(l){return g$(l)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function v$(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}l1.peek=x$;function l1(e,t,n,r){const i=v$(n),o=n.enter("strong"),l=n.createTracker(r),u=l.move(i+i);let c=l.move(n.containerPhrasing(e,{after:i,before:u,...l.current()}));const f=c.charCodeAt(0),h=mc(r.before.charCodeAt(r.before.length-1),f,i);h.inside&&(c=rl(f)+c.slice(1));const p=c.charCodeAt(c.length-1),v=mc(r.after.charCodeAt(0),p,i);v.inside&&(c=c.slice(0,-1)+rl(p));const y=l.move(i+i);return o(),n.attentionEncodeSurroundingInfo={after:v.outside,before:h.outside},u+c+y}function x$(e,t,n){return n.options.strong||"*"}function w$(e,t,n,r){return n.safe(e.value,r)}function b$(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function k$(e,t,n){const r=(a1(n)+(n.options.ruleSpaces?" ":"")).repeat(b$(n));return n.options.ruleSpaces?r.slice(0,-1):r}const u1={blockquote:VL,break:T0,code:QL,definition:ZL,emphasis:Zk,hardBreak:T0,heading:r$,html:e1,image:t1,imageReference:n1,inlineCode:r1,link:s1,linkReference:o1,list:f$,listItem:p$,paragraph:m$,root:y$,strong:l1,text:w$,thematicBreak:k$};function S$(){return{enter:{table:E$,tableData:I0,tableHeader:I0,tableRow:C$},exit:{codeText:j$,table:_$,tableData:wh,tableHeader:wh,tableRow:wh}}}function E$(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function _$(e){this.exit(e),this.data.inTable=void 0}function C$(e){this.enter({type:"tableRow",children:[]},e)}function wh(e){this.exit(e)}function I0(e){this.enter({type:"tableCell",children:[]},e)}function j$(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,N$));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function N$(e,t){return t==="|"?t:e}function T$(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,i=t.stringLength,o=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:v,table:l,tableCell:c,tableRow:u}};function l(y,b,k,E){return f(h(y,k,E),y.align)}function u(y,b,k,E){const C=p(y,k,E),_=f([C]);return _.slice(0,_.indexOf(`
`))}function c(y,b,k,E){const C=k.enter("tableCell"),_=k.enter("phrasing"),j=k.containerPhrasing(y,{...E,before:o,after:o});return _(),C(),j}function f(y,b){return WL(y,{align:b,alignDelimiters:r,padding:n,stringLength:i})}function h(y,b,k){const E=y.children;let C=-1;const _=[],j=b.enter("table");for(;++C<E.length;)_[C]=p(E[C],b,k);return j(),_}function p(y,b,k){const E=y.children;let C=-1;const _=[],j=b.enter("tableRow");for(;++C<E.length;)_[C]=c(E[C],y,b,k);return j(),_}function v(y,b,k){let E=u1.inlineCode(y,b,k);return k.stack.includes("tableCell")&&(E=E.replace(/\|/g,"\\$&")),E}}function I$(){return{exit:{taskListCheckValueChecked:P0,taskListCheckValueUnchecked:P0,paragraph:A$}}}function P$(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:R$}}}function P0(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function A$(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=t.children;let o=-1,l;for(;++o<i.length;){const u=i[o];if(u.type==="paragraph"){l=u;break}}l===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function R$(e,t,n,r){const i=e.children[0],o=typeof e.checked=="boolean"&&i&&i.type==="paragraph",l="["+(e.checked?"x":" ")+"] ",u=n.createTracker(r);o&&u.move(l);let c=u1.listItem(e,t,n,{...r,...u.current()});return o&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,f)),c;function f(h){return h+l}}function O$(){return[fL(),RL(),LL(),S$(),I$()]}function M$(e){return{extensions:[hL(),OL(e),$L(),T$(e),P$()]}}const D$={tokenize:U$,partial:!0},c1={tokenize:W$,partial:!0},d1={tokenize:H$,partial:!0},f1={tokenize:V$,partial:!0},L$={tokenize:q$,partial:!0},h1={name:"wwwAutolink",tokenize:z$,previous:m1},p1={name:"protocolAutolink",tokenize:B$,previous:g1},si={name:"emailAutolink",tokenize:F$,previous:y1},Wr={};function $$(){return{text:Wr}}let os=48;for(;os<123;)Wr[os]=si,os++,os===58?os=65:os===91&&(os=97);Wr[43]=si;Wr[45]=si;Wr[46]=si;Wr[95]=si;Wr[72]=[si,p1];Wr[104]=[si,p1];Wr[87]=[si,h1];Wr[119]=[si,h1];function F$(e,t,n){const r=this;let i,o;return l;function l(p){return!vp(p)||!y1.call(r,r.previous)||ym(r.events)?n(p):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),u(p))}function u(p){return vp(p)?(e.consume(p),u):p===64?(e.consume(p),c):n(p)}function c(p){return p===46?e.check(L$,h,f)(p):p===45||p===95||yn(p)?(o=!0,e.consume(p),c):h(p)}function f(p){return e.consume(p),i=!0,c}function h(p){return o&&i&&kn(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(p)):n(p)}}function z$(e,t,n){const r=this;return i;function i(l){return l!==87&&l!==119||!m1.call(r,r.previous)||ym(r.events)?n(l):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(D$,e.attempt(c1,e.attempt(d1,o),n),n)(l))}function o(l){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(l)}}function B$(e,t,n){const r=this;let i="",o=!1;return l;function l(p){return(p===72||p===104)&&g1.call(r,r.previous)&&!ym(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),i+=String.fromCodePoint(p),e.consume(p),u):n(p)}function u(p){if(kn(p)&&i.length<5)return i+=String.fromCodePoint(p),e.consume(p),u;if(p===58){const v=i.toLowerCase();if(v==="http"||v==="https")return e.consume(p),c}return n(p)}function c(p){return p===47?(e.consume(p),o?f:(o=!0,c)):n(p)}function f(p){return p===null||fc(p)||bt(p)||ks(p)||zc(p)?n(p):e.attempt(c1,e.attempt(d1,h),n)(p)}function h(p){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(p)}}function U$(e,t,n){let r=0;return i;function i(l){return(l===87||l===119)&&r<3?(r++,e.consume(l),i):l===46&&r===3?(e.consume(l),o):n(l)}function o(l){return l===null?n(l):t(l)}}function W$(e,t,n){let r,i,o;return l;function l(f){return f===46||f===95?e.check(f1,c,u)(f):f===null||bt(f)||ks(f)||f!==45&&zc(f)?c(f):(o=!0,e.consume(f),l)}function u(f){return f===95?r=!0:(i=r,r=void 0),e.consume(f),l}function c(f){return i||r||!o?n(f):t(f)}}function H$(e,t){let n=0,r=0;return i;function i(l){return l===40?(n++,e.consume(l),i):l===41&&r<n?o(l):l===33||l===34||l===38||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===60||l===63||l===93||l===95||l===126?e.check(f1,t,o)(l):l===null||bt(l)||ks(l)?t(l):(e.consume(l),i)}function o(l){return l===41&&r++,e.consume(l),i}}function V$(e,t,n){return r;function r(u){return u===33||u===34||u===39||u===41||u===42||u===44||u===46||u===58||u===59||u===63||u===95||u===126?(e.consume(u),r):u===38?(e.consume(u),o):u===93?(e.consume(u),i):u===60||u===null||bt(u)||ks(u)?t(u):n(u)}function i(u){return u===null||u===40||u===91||bt(u)||ks(u)?t(u):r(u)}function o(u){return kn(u)?l(u):n(u)}function l(u){return u===59?(e.consume(u),r):kn(u)?(e.consume(u),l):n(u)}}function q$(e,t,n){return r;function r(o){return e.consume(o),i}function i(o){return yn(o)?n(o):t(o)}}function m1(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||bt(e)}function g1(e){return!kn(e)}function y1(e){return!(e===47||vp(e))}function vp(e){return e===43||e===45||e===46||e===95||yn(e)}function ym(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const K$={tokenize:t4,partial:!0};function Y$(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:X$,continuation:{tokenize:Z$},exit:e4}},text:{91:{name:"gfmFootnoteCall",tokenize:Q$},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:G$,resolveTo:J$}}}}function G$(e,t,n){const r=this;let i=r.events.length;const o=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let l;for(;i--;){const c=r.events[i][1];if(c.type==="labelImage"){l=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return u;function u(c){if(!l||!l._balanced)return n(c);const f=kr(r.sliceSerialize({start:l.end,end:r.now()}));return f.codePointAt(0)!==94||!o.includes(f.slice(1))?n(c):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(c),e.exit("gfmFootnoteCallLabelMarker"),t(c))}}function J$(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const o={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},l={type:"chunkString",contentType:"string",start:Object.assign({},o.start),end:Object.assign({},o.end)},u=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",i,t],["exit",i,t],["enter",o,t],["enter",l,t],["exit",l,t],["exit",o,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...u),e}function Q$(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o=0,l;return u;function u(p){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(p),e.exit("gfmFootnoteCallLabelMarker"),c}function c(p){return p!==94?n(p):(e.enter("gfmFootnoteCallMarker"),e.consume(p),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",f)}function f(p){if(o>999||p===93&&!l||p===null||p===91||bt(p))return n(p);if(p===93){e.exit("chunkString");const v=e.exit("gfmFootnoteCallString");return i.includes(kr(r.sliceSerialize(v)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(p),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(p)}return bt(p)||(l=!0),o++,e.consume(p),p===92?h:f}function h(p){return p===91||p===92||p===93?(e.consume(p),o++,f):f(p)}}function X$(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o,l=0,u;return c;function c(b){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(b),e.exit("gfmFootnoteDefinitionLabelMarker"),f}function f(b){return b===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(b),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",h):n(b)}function h(b){if(l>999||b===93&&!u||b===null||b===91||bt(b))return n(b);if(b===93){e.exit("chunkString");const k=e.exit("gfmFootnoteDefinitionLabelString");return o=kr(r.sliceSerialize(k)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(b),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),v}return bt(b)||(u=!0),l++,e.consume(b),b===92?p:h}function p(b){return b===91||b===92||b===93?(e.consume(b),l++,h):h(b)}function v(b){return b===58?(e.enter("definitionMarker"),e.consume(b),e.exit("definitionMarker"),i.includes(o)||i.push(o),ft(e,y,"gfmFootnoteDefinitionWhitespace")):n(b)}function y(b){return t(b)}}function Z$(e,t,n){return e.check(ml,t,e.attempt(K$,t,n))}function e4(e){e.exit("gfmFootnoteDefinition")}function t4(e,t,n){const r=this;return ft(e,i,"gfmFootnoteDefinitionIndent",5);function i(o){const l=r.events[r.events.length-1];return l&&l[1].type==="gfmFootnoteDefinitionIndent"&&l[2].sliceSerialize(l[1],!0).length===4?t(o):n(o)}}function n4(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:o,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(l,u){let c=-1;for(;++c<l.length;)if(l[c][0]==="enter"&&l[c][1].type==="strikethroughSequenceTemporary"&&l[c][1]._close){let f=c;for(;f--;)if(l[f][0]==="exit"&&l[f][1].type==="strikethroughSequenceTemporary"&&l[f][1]._open&&l[c][1].end.offset-l[c][1].start.offset===l[f][1].end.offset-l[f][1].start.offset){l[c][1].type="strikethroughSequence",l[f][1].type="strikethroughSequence";const h={type:"strikethrough",start:Object.assign({},l[f][1].start),end:Object.assign({},l[c][1].end)},p={type:"strikethroughText",start:Object.assign({},l[f][1].end),end:Object.assign({},l[c][1].start)},v=[["enter",h,u],["enter",l[f][1],u],["exit",l[f][1],u],["enter",p,u]],y=u.parser.constructs.insideSpan.null;y&&Gn(v,v.length,0,Bc(y,l.slice(f+1,c),u)),Gn(v,v.length,0,[["exit",p,u],["enter",l[c][1],u],["exit",l[c][1],u],["exit",h,u]]),Gn(l,f-1,c-f+3,v),c=f+v.length-2;break}}for(c=-1;++c<l.length;)l[c][1].type==="strikethroughSequenceTemporary"&&(l[c][1].type="data");return l}function o(l,u,c){const f=this.previous,h=this.events;let p=0;return v;function v(b){return f===126&&h[h.length-1][1].type!=="characterEscape"?c(b):(l.enter("strikethroughSequenceTemporary"),y(b))}function y(b){const k=Po(f);if(b===126)return p>1?c(b):(l.consume(b),p++,y);if(p<2&&!n)return c(b);const E=l.exit("strikethroughSequenceTemporary"),C=Po(b);return E._open=!C||C===2&&!!k,E._close=!k||k===2&&!!C,u(b)}}}class r4{constructor(){this.map=[]}add(t,n,r){i4(this,t,n,r)}consume(t){if(this.map.sort(function(o,l){return o[0]-l[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let i=r.pop();for(;i;){for(const o of i)t.push(o);i=r.pop()}this.map.length=0}}function i4(e,t,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<e.map.length;){if(e.map[i][0]===t){e.map[i][1]+=n,e.map[i][2].push(...r);return}i+=1}e.map.push([t,n,r])}}function s4(e,t){let n=!1;const r=[];for(;t<e.length;){const i=e[t];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const o=r.length-1;r[o]=r[o]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function o4(){return{flow:{null:{name:"table",tokenize:a4,resolveAll:l4}}}}function a4(e,t,n){const r=this;let i=0,o=0,l;return u;function u(R){let D=r.events.length-1;for(;D>-1;){const K=r.events[D][1].type;if(K==="lineEnding"||K==="linePrefix")D--;else break}const Z=D>-1?r.events[D][1].type:null,H=Z==="tableHead"||Z==="tableRow"?A:c;return H===A&&r.parser.lazy[r.now().line]?n(R):H(R)}function c(R){return e.enter("tableHead"),e.enter("tableRow"),f(R)}function f(R){return R===124||(l=!0,o+=1),h(R)}function h(R){return R===null?n(R):Je(R)?o>1?(o=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(R),e.exit("lineEnding"),y):n(R):dt(R)?ft(e,h,"whitespace")(R):(o+=1,l&&(l=!1,i+=1),R===124?(e.enter("tableCellDivider"),e.consume(R),e.exit("tableCellDivider"),l=!0,h):(e.enter("data"),p(R)))}function p(R){return R===null||R===124||bt(R)?(e.exit("data"),h(R)):(e.consume(R),R===92?v:p)}function v(R){return R===92||R===124?(e.consume(R),p):p(R)}function y(R){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(R):(e.enter("tableDelimiterRow"),l=!1,dt(R)?ft(e,b,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(R):b(R))}function b(R){return R===45||R===58?E(R):R===124?(l=!0,e.enter("tableCellDivider"),e.consume(R),e.exit("tableCellDivider"),k):O(R)}function k(R){return dt(R)?ft(e,E,"whitespace")(R):E(R)}function E(R){return R===58?(o+=1,l=!0,e.enter("tableDelimiterMarker"),e.consume(R),e.exit("tableDelimiterMarker"),C):R===45?(o+=1,C(R)):R===null||Je(R)?I(R):O(R)}function C(R){return R===45?(e.enter("tableDelimiterFiller"),_(R)):O(R)}function _(R){return R===45?(e.consume(R),_):R===58?(l=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(R),e.exit("tableDelimiterMarker"),j):(e.exit("tableDelimiterFiller"),j(R))}function j(R){return dt(R)?ft(e,I,"whitespace")(R):I(R)}function I(R){return R===124?b(R):R===null||Je(R)?!l||i!==o?O(R):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(R)):O(R)}function O(R){return n(R)}function A(R){return e.enter("tableRow"),$(R)}function $(R){return R===124?(e.enter("tableCellDivider"),e.consume(R),e.exit("tableCellDivider"),$):R===null||Je(R)?(e.exit("tableRow"),t(R)):dt(R)?ft(e,$,"whitespace")(R):(e.enter("data"),ie(R))}function ie(R){return R===null||R===124||bt(R)?(e.exit("data"),$(R)):(e.consume(R),R===92?U:ie)}function U(R){return R===92||R===124?(e.consume(R),ie):ie(R)}}function l4(e,t){let n=-1,r=!0,i=0,o=[0,0,0,0],l=[0,0,0,0],u=!1,c=0,f,h,p;const v=new r4;for(;++n<e.length;){const y=e[n],b=y[1];y[0]==="enter"?b.type==="tableHead"?(u=!1,c!==0&&(A0(v,t,c,f,h),h=void 0,c=0),f={type:"table",start:Object.assign({},b.start),end:Object.assign({},b.end)},v.add(n,0,[["enter",f,t]])):b.type==="tableRow"||b.type==="tableDelimiterRow"?(r=!0,p=void 0,o=[0,0,0,0],l=[0,n+1,0,0],u&&(u=!1,h={type:"tableBody",start:Object.assign({},b.start),end:Object.assign({},b.end)},v.add(n,0,[["enter",h,t]])),i=b.type==="tableDelimiterRow"?2:h?3:1):i&&(b.type==="data"||b.type==="tableDelimiterMarker"||b.type==="tableDelimiterFiller")?(r=!1,l[2]===0&&(o[1]!==0&&(l[0]=l[1],p=Fu(v,t,o,i,void 0,p),o=[0,0,0,0]),l[2]=n)):b.type==="tableCellDivider"&&(r?r=!1:(o[1]!==0&&(l[0]=l[1],p=Fu(v,t,o,i,void 0,p)),o=l,l=[o[1],n,0,0])):b.type==="tableHead"?(u=!0,c=n):b.type==="tableRow"||b.type==="tableDelimiterRow"?(c=n,o[1]!==0?(l[0]=l[1],p=Fu(v,t,o,i,n,p)):l[1]!==0&&(p=Fu(v,t,l,i,n,p)),i=0):i&&(b.type==="data"||b.type==="tableDelimiterMarker"||b.type==="tableDelimiterFiller")&&(l[3]=n)}for(c!==0&&A0(v,t,c,f,h),v.consume(t.events),n=-1;++n<t.events.length;){const y=t.events[n];y[0]==="enter"&&y[1].type==="table"&&(y[1]._align=s4(t.events,n))}return e}function Fu(e,t,n,r,i,o){const l=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",u="tableContent";n[0]!==0&&(o.end=Object.assign({},mo(t.events,n[0])),e.add(n[0],0,[["exit",o,t]]));const c=mo(t.events,n[1]);if(o={type:l,start:Object.assign({},c),end:Object.assign({},c)},e.add(n[1],0,[["enter",o,t]]),n[2]!==0){const f=mo(t.events,n[2]),h=mo(t.events,n[3]),p={type:u,start:Object.assign({},f),end:Object.assign({},h)};if(e.add(n[2],0,[["enter",p,t]]),r!==2){const v=t.events[n[2]],y=t.events[n[3]];if(v[1].end=Object.assign({},y[1].end),v[1].type="chunkText",v[1].contentType="text",n[3]>n[2]+1){const b=n[2]+1,k=n[3]-n[2]-1;e.add(b,k,[])}}e.add(n[3]+1,0,[["exit",p,t]])}return i!==void 0&&(o.end=Object.assign({},mo(t.events,i)),e.add(i,0,[["exit",o,t]]),o=void 0),o}function A0(e,t,n,r,i){const o=[],l=mo(t.events,n);i&&(i.end=Object.assign({},l),o.push(["exit",i,t])),r.end=Object.assign({},l),o.push(["exit",r,t]),e.add(n+1,0,o)}function mo(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const u4={name:"tasklistCheck",tokenize:d4};function c4(){return{text:{91:u4}}}function d4(e,t,n){const r=this;return i;function i(c){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(c):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),o)}function o(c){return bt(c)?(e.enter("taskListCheckValueUnchecked"),e.consume(c),e.exit("taskListCheckValueUnchecked"),l):c===88||c===120?(e.enter("taskListCheckValueChecked"),e.consume(c),e.exit("taskListCheckValueChecked"),l):n(c)}function l(c){return c===93?(e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),u):n(c)}function u(c){return Je(c)?t(c):dt(c)?e.check({tokenize:f4},t,n)(c):n(c)}}function f4(e,t,n){return ft(e,r,"whitespace");function r(i){return i===null?n(i):t(i)}}function h4(e){return Nk([$$(),Y$(),n4(e),o4(),c4()])}const p4={};function m4(e){const t=this,n=e||p4,r=t.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),o=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),l=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(h4(n)),o.push(O$()),l.push(M$(n))}const g4=e=>e!=null;function y4(){const e=Ie(t=>t.works);return w.useMemo(()=>{const t=new Map;e.forEach(o=>{var c;const l=(c=o.name)==null?void 0:c.trim();if(!l)return;const u=t.get(l)??[];u.push(o),t.set(l,u)});const n=new Map,r=new Map;t.forEach((o,l)=>{o.length===1?n.set(l,o[0]):o.length>1&&r.set(l,o.filter(g4))});const i=Array.from(n.entries()).map(([o,l])=>({name:o,work:l}));return i.sort((o,l)=>l.name.length-o.name.length||o.name.localeCompare(l.name,"es")),{uniqueByName:n,duplicates:r,entries:i}},[e])}const v4=new RegExp("\\p{L}|\\p{N}","u"),R0=e=>e?v4.test(e):!1,x4=(e,t,n)=>{const r=t===0?void 0:e[t-1],i=n>=e.length?void 0:e[n];return!R0(r)&&!R0(i)},w4=(e,t)=>{const n=[];t.forEach(o=>{let l=0;for(;l<e.length;){const u=e.indexOf(o.name,l);if(u===-1)break;const c=u+o.name.length;x4(e,u,c)&&n.push({start:u,end:c,entry:o}),l=u+o.name.length}}),n.sort((o,l)=>o.start!==l.start?o.start-l.start:l.entry.name.length-o.entry.name.length);const r=[];let i=-1;return n.forEach(o=>{o.start<i||(r.push(o),i=o.end)}),r},b4=e=>e?new Set(["link","linkReference","definition","inlineCode","code"]).has(e.type):!0,k4=e=>{const t=(e==null?void 0:e.entries)??[];return t.length===0?()=>{}:n=>{Vc(n,"text",(r,i,o)=>{if(b4(o)||typeof i!="number"||!o)return;const u=r.value;if(!u)return;const c=w4(u,t);if(c.length===0)return;const f=[];let h=0;c.forEach(p=>{p.start>h&&f.push({type:"text",value:u.slice(h,p.start)}),f.push({type:"link",title:null,url:p.entry.href,children:[{type:"text",value:p.entry.name}]}),h=p.end}),h<u.length&&f.push({type:"text",value:u.slice(h)}),o.children.splice(i,1,...f)})}},S4=e=>{var f,h,p;const t="/sport-planner/".replace(/\/$/,""),r=`${t?`${t}/`:"/"}#/`,i=((f=e.href)==null?void 0:f.startsWith("#/"))??!1,o=((h=e.href)==null?void 0:h.startsWith(r))??!1,l=(((p=e.href)==null?void 0:p.startsWith("/"))??!1)||i||o,u=l?e.rel:e.rel??"noreferrer",c=l?e.target:e.target??"_blank";return m.jsx("a",{...e,className:"text-sky-300 underline decoration-dotted underline-offset-4 hover:text-sky-200",target:c,rel:u})},E4=e=>m.jsx("ul",{...e,className:ze("my-2 list-disc space-y-1 pl-6",e.className)}),_4=e=>m.jsx("ol",{...e,className:ze("my-2 list-decimal space-y-1 pl-6",e.className)}),C4=e=>m.jsx("li",{...e,className:ze("leading-relaxed",e.className)});function j4(e){const t=e.trim(),n=t.match(/^(["'])(.*)(["'])$/s);return n?n[2].trim():t}function N4(e){var l;const n=j4(e.trim()).match(/^\[!([^\]]+)\]([+-])?\s*(.*)$/i);if(!n)return null;const r=n[1].toLowerCase(),o=(((l=n[3])==null?void 0:l.trim())??"")||r;return{type:r,title:o}}function v1(e){return typeof e=="object"&&e!==null&&"props"in e&&"type"in e}function xp(e){return e==null||typeof e=="boolean"?"":typeof e=="string"||typeof e=="number"?String(e):Array.isArray(e)?e.map(xp).join(""):v1(e)?xp(e.props.children):""}const O0={danger:{icon:"",containerClassName:"border-rose-500/25 bg-rose-500/10",titleClassName:"text-rose-200"},warning:{icon:"",containerClassName:"border-amber-500/25 bg-amber-500/10",titleClassName:"text-amber-200"},info:{icon:"",containerClassName:"border-sky-500/25 bg-sky-500/10",titleClassName:"text-sky-200"},note:{icon:"",containerClassName:"border-indigo-500/25 bg-indigo-500/10",titleClassName:"text-indigo-200"},tip:{icon:"",containerClassName:"border-emerald-500/25 bg-emerald-500/10",titleClassName:"text-emerald-200"}},T4=e=>{const{node:t,children:n,...r}=e,i=Array.isArray(n)?n:[n],o=i.findIndex(p=>v1(p)&&p.type==="p"),l=o>=0?i[o]:void 0,u=xp(l).trim(),c=N4(u);if(!c)return m.jsx("blockquote",{...r,children:n});const f=O0[c.type]??O0.info,h=i.filter((p,v)=>v!==o);return m.jsxs("aside",{className:ze("my-4 rounded-2xl border p-5",f.containerClassName),children:[m.jsxs("div",{className:ze("flex items-center gap-2 text-lg font-semibold",f.titleClassName),children:[m.jsx("span",{"aria-hidden":"true",children:f.icon}),m.jsx("span",{children:c.title})]}),m.jsx("div",{className:"mt-3",children:h})]})},I4={a:S4,blockquote:T4,ul:E4,ol:_4,li:C4};function Ao({content:e,enableWorkLinks:t=!1}){const{entries:n}=y4(),r=w.useMemo(()=>{if(!t||n.length===0)return null;const o="/sport-planner/".replace(/\/$/,""),u=`${o?`${o}/`:"/"}#/catalog`;return{entries:n.map(({name:c,work:f})=>({name:c,href:`${u}?workId=${encodeURIComponent(f.id)}`}))}},[t,n]),i=w.useMemo(()=>{const o=[m4];return r&&o.push([k4,r]),o},[r]);return e?m.jsx("div",{className:"prose prose-invert max-w-none prose-headings:font-display prose-p:leading-relaxed prose-strong:text-white prose-a:text-sky-300",children:m.jsx(nL,{remarkPlugins:i,components:I4,children:e})}):null}function P4(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return w.useMemo(()=>r=>{t.forEach(i=>i(r))},t)}const qc=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Uo(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function vm(e){return"nodeType"in e}function Ln(e){var t,n;return e?Uo(e)?e:vm(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function xm(e){const{Document:t}=Ln(e);return e instanceof t}function yl(e){return Uo(e)?!1:e instanceof Ln(e).HTMLElement}function x1(e){return e instanceof Ln(e).SVGElement}function Wo(e){return e?Uo(e)?e.document:vm(e)?xm(e)?e:yl(e)||x1(e)?e.ownerDocument:document:document:document}const zr=qc?w.useLayoutEffect:w.useEffect;function wm(e){const t=w.useRef(e);return zr(()=>{t.current=e}),w.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function A4(){const e=w.useRef(null),t=w.useCallback((r,i)=>{e.current=setInterval(r,i)},[]),n=w.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function il(e,t){t===void 0&&(t=[e]);const n=w.useRef(e);return zr(()=>{n.current!==e&&(n.current=e)},t),n}function vl(e,t){const n=w.useRef();return w.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function gc(e){const t=wm(e),n=w.useRef(null),r=w.useCallback(i=>{i!==n.current&&(t==null||t(i,n.current)),n.current=i},[]);return[n,r]}function wp(e){const t=w.useRef();return w.useEffect(()=>{t.current=e},[e]),t.current}let bh={};function xl(e,t){return w.useMemo(()=>{if(t)return t;const n=bh[e]==null?0:bh[e]+1;return bh[e]=n,e+"-"+n},[e,t])}function w1(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((o,l)=>{const u=Object.entries(l);for(const[c,f]of u){const h=o[c];h!=null&&(o[c]=h+e*f)}return o},{...t})}}const _o=w1(1),yc=w1(-1);function R4(e){return"clientX"in e&&"clientY"in e}function bm(e){if(!e)return!1;const{KeyboardEvent:t}=Ln(e.target);return t&&e instanceof t}function O4(e){if(!e)return!1;const{TouchEvent:t}=Ln(e.target);return t&&e instanceof t}function bp(e){if(O4(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return R4(e)?{x:e.clientX,y:e.clientY}:null}const sl=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[sl.Translate.toString(e),sl.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),M0="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function M4(e){return e.matches(M0)?e:e.querySelector(M0)}const D4={display:"none"};function L4(e){let{id:t,value:n}=e;return Oe.createElement("div",{id:t,style:D4},n)}function $4(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Oe.createElement("div",{id:t,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function F4(){const[e,t]=w.useState("");return{announce:w.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const b1=w.createContext(null);function z4(e){const t=w.useContext(b1);w.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function B4(){const[e]=w.useState(()=>new Set),t=w.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[w.useCallback(r=>{let{type:i,event:o}=r;e.forEach(l=>{var u;return(u=l[i])==null?void 0:u.call(l,o)})},[e]),t]}const U4={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},W4={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function H4(e){let{announcements:t=W4,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=U4}=e;const{announce:o,announcement:l}=F4(),u=xl("DndLiveRegion"),[c,f]=w.useState(!1);if(w.useEffect(()=>{f(!0)},[]),z4(w.useMemo(()=>({onDragStart(p){let{active:v}=p;o(t.onDragStart({active:v}))},onDragMove(p){let{active:v,over:y}=p;t.onDragMove&&o(t.onDragMove({active:v,over:y}))},onDragOver(p){let{active:v,over:y}=p;o(t.onDragOver({active:v,over:y}))},onDragEnd(p){let{active:v,over:y}=p;o(t.onDragEnd({active:v,over:y}))},onDragCancel(p){let{active:v,over:y}=p;o(t.onDragCancel({active:v,over:y}))}}),[o,t])),!c)return null;const h=Oe.createElement(Oe.Fragment,null,Oe.createElement(L4,{id:r,value:i.draggable}),Oe.createElement($4,{id:u,announcement:l}));return n?Kn.createPortal(h,n):h}var Jt;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Jt||(Jt={}));function vc(){}const _r=Object.freeze({x:0,y:0});function V4(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function q4(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function K4(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function Y4(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function D0(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const G4=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=D0(t,t.left,t.top),o=[];for(const l of r){const{id:u}=l,c=n.get(u);if(c){const f=V4(D0(c),i);o.push({id:u,data:{droppableContainer:l,value:f}})}}return o.sort(q4)};function J4(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),l=i-r,u=o-n;if(r<i&&n<o){const c=t.width*t.height,f=e.width*e.height,h=l*u,p=h/(c+f-h);return Number(p.toFixed(4))}return 0}const Q4=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=[];for(const o of r){const{id:l}=o,u=n.get(l);if(u){const c=J4(u,t);c>0&&i.push({id:l,data:{droppableContainer:o,value:c}})}}return i.sort(K4)};function X4(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function k1(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:_r}function Z4(e){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i.reduce((l,u)=>({...l,top:l.top+e*u.y,bottom:l.bottom+e*u.y,left:l.left+e*u.x,right:l.right+e*u.x}),{...n})}}const eF=Z4(1);function tF(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function nF(e,t,n){const r=tF(t);if(!r)return e;const{scaleX:i,scaleY:o,x:l,y:u}=r,c=e.left-l-(1-i)*parseFloat(n),f=e.top-u-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),h=i?e.width/i:e.width,p=o?e.height/o:e.height;return{width:h,height:p,top:f,right:c+h,bottom:f+p,left:c}}const rF={ignoreTransform:!1};function Ho(e,t){t===void 0&&(t=rF);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:f,transformOrigin:h}=Ln(e).getComputedStyle(e);f&&(n=nF(n,f,h))}const{top:r,left:i,width:o,height:l,bottom:u,right:c}=n;return{top:r,left:i,width:o,height:l,bottom:u,right:c}}function L0(e){return Ho(e,{ignoreTransform:!0})}function iF(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function sF(e,t){return t===void 0&&(t=Ln(e).getComputedStyle(e)),t.position==="fixed"}function oF(e,t){t===void 0&&(t=Ln(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const o=t[i];return typeof o=="string"?n.test(o):!1})}function km(e,t){const n=[];function r(i){if(t!=null&&n.length>=t||!i)return n;if(xm(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!yl(i)||x1(i)||n.includes(i))return n;const o=Ln(e).getComputedStyle(i);return i!==e&&oF(i,o)&&n.push(i),sF(i,o)?n:r(i.parentNode)}return e?r(e):n}function S1(e){const[t]=km(e,1);return t??null}function kh(e){return!qc||!e?null:Uo(e)?e:vm(e)?xm(e)||e===Wo(e).scrollingElement?window:yl(e)?e:null:null}function E1(e){return Uo(e)?e.scrollX:e.scrollLeft}function _1(e){return Uo(e)?e.scrollY:e.scrollTop}function kp(e){return{x:E1(e),y:_1(e)}}var rn;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(rn||(rn={}));function C1(e){return!qc||!e?!1:e===document.scrollingElement}function j1(e){const t={x:0,y:0},n=C1(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},i=e.scrollTop<=t.y,o=e.scrollLeft<=t.x,l=e.scrollTop>=r.y,u=e.scrollLeft>=r.x;return{isTop:i,isLeft:o,isBottom:l,isRight:u,maxScroll:r,minScroll:t}}const aF={x:.2,y:.2};function lF(e,t,n,r,i){let{top:o,left:l,right:u,bottom:c}=n;r===void 0&&(r=10),i===void 0&&(i=aF);const{isTop:f,isBottom:h,isLeft:p,isRight:v}=j1(e),y={x:0,y:0},b={x:0,y:0},k={height:t.height*i.y,width:t.width*i.x};return!f&&o<=t.top+k.height?(y.y=rn.Backward,b.y=r*Math.abs((t.top+k.height-o)/k.height)):!h&&c>=t.bottom-k.height&&(y.y=rn.Forward,b.y=r*Math.abs((t.bottom-k.height-c)/k.height)),!v&&u>=t.right-k.width?(y.x=rn.Forward,b.x=r*Math.abs((t.right-k.width-u)/k.width)):!p&&l<=t.left+k.width&&(y.x=rn.Backward,b.x=r*Math.abs((t.left+k.width-l)/k.width)),{direction:y,speed:b}}function uF(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:l}=window;return{top:0,left:0,right:o,bottom:l,width:o,height:l}}const{top:t,left:n,right:r,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:i,width:e.clientWidth,height:e.clientHeight}}function N1(e){return e.reduce((t,n)=>_o(t,kp(n)),_r)}function cF(e){return e.reduce((t,n)=>t+E1(n),0)}function dF(e){return e.reduce((t,n)=>t+_1(n),0)}function fF(e,t){if(t===void 0&&(t=Ho),!e)return;const{top:n,left:r,bottom:i,right:o}=t(e);S1(e)&&(i<=0||o<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const hF=[["x",["left","right"],cF],["y",["top","bottom"],dF]];class Sm{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=km(n),i=N1(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,l,u]of hF)for(const c of l)Object.defineProperty(this,c,{get:()=>{const f=u(r),h=i[o]-f;return this.rect[c]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Ha{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var i;(i=this.target)==null||i.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function pF(e){const{EventTarget:t}=Ln(e);return e instanceof t?e:Wo(e)}function Sh(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var or;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(or||(or={}));function $0(e){e.preventDefault()}function mF(e){e.stopPropagation()}var mt;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(mt||(mt={}));const T1={start:[mt.Space,mt.Enter],cancel:[mt.Esc],end:[mt.Space,mt.Enter,mt.Tab]},gF=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case mt.Right:return{...n,x:n.x+25};case mt.Left:return{...n,x:n.x-25};case mt.Down:return{...n,y:n.y+25};case mt.Up:return{...n,y:n.y-25}}};class I1{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Ha(Wo(n)),this.windowListeners=new Ha(Ln(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(or.Resize,this.handleCancel),this.windowListeners.add(or.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(or.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&fF(r),n(_r)}handleKeyDown(t){if(bm(t)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:o=T1,coordinateGetter:l=gF,scrollBehavior:u="smooth"}=i,{code:c}=t;if(o.end.includes(c)){this.handleEnd(t);return}if(o.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:f}=r.current,h=f?{x:f.left,y:f.top}:_r;this.referenceCoordinates||(this.referenceCoordinates=h);const p=l(t,{active:n,context:r.current,currentCoordinates:h});if(p){const v=yc(p,h),y={x:0,y:0},{scrollableAncestors:b}=r.current;for(const k of b){const E=t.code,{isTop:C,isRight:_,isLeft:j,isBottom:I,maxScroll:O,minScroll:A}=j1(k),$=uF(k),ie={x:Math.min(E===mt.Right?$.right-$.width/2:$.right,Math.max(E===mt.Right?$.left:$.left+$.width/2,p.x)),y:Math.min(E===mt.Down?$.bottom-$.height/2:$.bottom,Math.max(E===mt.Down?$.top:$.top+$.height/2,p.y))},U=E===mt.Right&&!_||E===mt.Left&&!j,R=E===mt.Down&&!I||E===mt.Up&&!C;if(U&&ie.x!==p.x){const D=k.scrollLeft+v.x,Z=E===mt.Right&&D<=O.x||E===mt.Left&&D>=A.x;if(Z&&!v.y){k.scrollTo({left:D,behavior:u});return}Z?y.x=k.scrollLeft-D:y.x=E===mt.Right?k.scrollLeft-O.x:k.scrollLeft-A.x,y.x&&k.scrollBy({left:-y.x,behavior:u});break}else if(R&&ie.y!==p.y){const D=k.scrollTop+v.y,Z=E===mt.Down&&D<=O.y||E===mt.Up&&D>=A.y;if(Z&&!v.x){k.scrollTo({top:D,behavior:u});return}Z?y.y=k.scrollTop-D:y.y=E===mt.Down?k.scrollTop-O.y:k.scrollTop-A.y,y.y&&k.scrollBy({top:-y.y,behavior:u});break}}this.handleMove(t,_o(yc(p,this.referenceCoordinates),y))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}I1.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=T1,onActivation:i}=t,{active:o}=n;const{code:l}=e.nativeEvent;if(r.start.includes(l)){const u=o.activatorNode.current;return u&&e.target!==u?!1:(e.preventDefault(),i==null||i({event:e.nativeEvent}),!0)}return!1}}];function F0(e){return!!(e&&"distance"in e)}function z0(e){return!!(e&&"delay"in e)}class Em{constructor(t,n,r){var i;r===void 0&&(r=pF(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:o}=t,{target:l}=o;this.props=t,this.events=n,this.document=Wo(l),this.documentListeners=new Ha(this.document),this.listeners=new Ha(r),this.windowListeners=new Ha(Ln(l)),this.initialCoordinates=(i=bp(o))!=null?i:_r,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(or.Resize,this.handleCancel),this.windowListeners.add(or.DragStart,$0),this.windowListeners.add(or.VisibilityChange,this.handleCancel),this.windowListeners.add(or.ContextMenu,$0),this.documentListeners.add(or.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(z0(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(F0(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:i}=this.props;i(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(or.Click,mF,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(or.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:i,props:o}=this,{onMove:l,options:{activationConstraint:u}}=o;if(!i)return;const c=(n=bp(t))!=null?n:_r,f=yc(i,c);if(!r&&u){if(F0(u)){if(u.tolerance!=null&&Sh(f,u.tolerance))return this.handleCancel();if(Sh(f,u.distance))return this.handleStart()}if(z0(u)&&Sh(f,u.tolerance))return this.handleCancel();this.handlePending(u,f);return}t.cancelable&&t.preventDefault(),l(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===mt.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const yF={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class P1 extends Em{constructor(t){const{event:n}=t,r=Wo(n.target);super(t,yF,r)}}P1.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const vF={move:{name:"mousemove"},end:{name:"mouseup"}};var Sp;(function(e){e[e.RightClick=2]="RightClick"})(Sp||(Sp={}));class xF extends Em{constructor(t){super(t,vF,Wo(t.event.target))}}xF.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===Sp.RightClick?!1:(r==null||r({event:n}),!0)}}];const Eh={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class wF extends Em{constructor(t){super(t,Eh)}static setup(){return window.addEventListener(Eh.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Eh.move.name,t)};function t(){}}}wF.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var Va;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Va||(Va={}));var xc;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(xc||(xc={}));function bF(e){let{acceleration:t,activator:n=Va.Pointer,canScroll:r,draggingRect:i,enabled:o,interval:l=5,order:u=xc.TreeOrder,pointerCoordinates:c,scrollableAncestors:f,scrollableAncestorRects:h,delta:p,threshold:v}=e;const y=SF({delta:p,disabled:!o}),[b,k]=A4(),E=w.useRef({x:0,y:0}),C=w.useRef({x:0,y:0}),_=w.useMemo(()=>{switch(n){case Va.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Va.DraggableRect:return i}},[n,i,c]),j=w.useRef(null),I=w.useCallback(()=>{const A=j.current;if(!A)return;const $=E.current.x*C.current.x,ie=E.current.y*C.current.y;A.scrollBy($,ie)},[]),O=w.useMemo(()=>u===xc.TreeOrder?[...f].reverse():f,[u,f]);w.useEffect(()=>{if(!o||!f.length||!_){k();return}for(const A of O){if((r==null?void 0:r(A))===!1)continue;const $=f.indexOf(A),ie=h[$];if(!ie)continue;const{direction:U,speed:R}=lF(A,ie,_,t,v);for(const D of["x","y"])y[D][U[D]]||(R[D]=0,U[D]=0);if(R.x>0||R.y>0){k(),j.current=A,b(I,l),E.current=R,C.current=U;return}}E.current={x:0,y:0},C.current={x:0,y:0},k()},[t,I,r,k,o,l,JSON.stringify(_),JSON.stringify(y),b,f,O,h,JSON.stringify(v)])}const kF={x:{[rn.Backward]:!1,[rn.Forward]:!1},y:{[rn.Backward]:!1,[rn.Forward]:!1}};function SF(e){let{delta:t,disabled:n}=e;const r=wp(t);return vl(i=>{if(n||!r||!i)return kF;const o={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[rn.Backward]:i.x[rn.Backward]||o.x===-1,[rn.Forward]:i.x[rn.Forward]||o.x===1},y:{[rn.Backward]:i.y[rn.Backward]||o.y===-1,[rn.Forward]:i.y[rn.Forward]||o.y===1}}},[n,t,r])}function EF(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return vl(i=>{var o;return t==null?null:(o=r??i)!=null?o:null},[r,t])}function _F(e,t){return w.useMemo(()=>e.reduce((n,r)=>{const{sensor:i}=r,o=i.activators.map(l=>({eventName:l.eventName,handler:t(l.handler,r)}));return[...n,...o]},[]),[e,t])}var ol;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(ol||(ol={}));var Ep;(function(e){e.Optimized="optimized"})(Ep||(Ep={}));const B0=new Map;function CF(e,t){let{dragging:n,dependencies:r,config:i}=t;const[o,l]=w.useState(null),{frequency:u,measure:c,strategy:f}=i,h=w.useRef(e),p=E(),v=il(p),y=w.useCallback(function(C){C===void 0&&(C=[]),!v.current&&l(_=>_===null?C:_.concat(C.filter(j=>!_.includes(j))))},[v]),b=w.useRef(null),k=vl(C=>{if(p&&!n)return B0;if(!C||C===B0||h.current!==e||o!=null){const _=new Map;for(let j of e){if(!j)continue;if(o&&o.length>0&&!o.includes(j.id)&&j.rect.current){_.set(j.id,j.rect.current);continue}const I=j.node.current,O=I?new Sm(c(I),I):null;j.rect.current=O,O&&_.set(j.id,O)}return _}return C},[e,o,n,p,c]);return w.useEffect(()=>{h.current=e},[e]),w.useEffect(()=>{p||y()},[n,p]),w.useEffect(()=>{o&&o.length>0&&l(null)},[JSON.stringify(o)]),w.useEffect(()=>{p||typeof u!="number"||b.current!==null||(b.current=setTimeout(()=>{y(),b.current=null},u))},[u,p,y,...r]),{droppableRects:k,measureDroppableContainers:y,measuringScheduled:o!=null};function E(){switch(f){case ol.Always:return!1;case ol.BeforeDragging:return n;default:return!n}}}function A1(e,t){return vl(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function jF(e,t){return A1(e,t)}function NF(e){let{callback:t,disabled:n}=e;const r=wm(t),i=w.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(r)},[r,n]);return w.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Kc(e){let{callback:t,disabled:n}=e;const r=wm(t),i=w.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(r)},[n]);return w.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function TF(e){return new Sm(Ho(e),e)}function U0(e,t,n){t===void 0&&(t=TF);const[r,i]=w.useState(null);function o(){i(c=>{if(!e)return null;if(e.isConnected===!1){var f;return(f=c??n)!=null?f:null}const h=t(e);return JSON.stringify(c)===JSON.stringify(h)?c:h})}const l=NF({callback(c){if(e)for(const f of c){const{type:h,target:p}=f;if(h==="childList"&&p instanceof HTMLElement&&p.contains(e)){o();break}}}}),u=Kc({callback:o});return zr(()=>{o(),e?(u==null||u.observe(e),l==null||l.observe(document.body,{childList:!0,subtree:!0})):(u==null||u.disconnect(),l==null||l.disconnect())},[e]),r}function IF(e){const t=A1(e);return k1(e,t)}const W0=[];function PF(e){const t=w.useRef(e),n=vl(r=>e?r&&r!==W0&&e&&t.current&&e.parentNode===t.current.parentNode?r:km(e):W0,[e]);return w.useEffect(()=>{t.current=e},[e]),n}function AF(e){const[t,n]=w.useState(null),r=w.useRef(e),i=w.useCallback(o=>{const l=kh(o.target);l&&n(u=>u?(u.set(l,kp(l)),new Map(u)):null)},[]);return w.useEffect(()=>{const o=r.current;if(e!==o){l(o);const u=e.map(c=>{const f=kh(c);return f?(f.addEventListener("scroll",i,{passive:!0}),[f,kp(f)]):null}).filter(c=>c!=null);n(u.length?new Map(u):null),r.current=e}return()=>{l(e),l(o)};function l(u){u.forEach(c=>{const f=kh(c);f==null||f.removeEventListener("scroll",i)})}},[i,e]),w.useMemo(()=>e.length?t?Array.from(t.values()).reduce((o,l)=>_o(o,l),_r):N1(e):_r,[e,t])}function H0(e,t){t===void 0&&(t=[]);const n=w.useRef(null);return w.useEffect(()=>{n.current=null},t),w.useEffect(()=>{const r=e!==_r;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?yc(e,n.current):_r}function RF(e){w.useEffect(()=>{if(!qc)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function OF(e,t){return w.useMemo(()=>e.reduce((n,r)=>{let{eventName:i,handler:o}=r;return n[i]=l=>{o(l,t)},n},{}),[e,t])}function R1(e){return w.useMemo(()=>e?iF(e):null,[e])}const V0=[];function MF(e,t){t===void 0&&(t=Ho);const[n]=e,r=R1(n?Ln(n):null),[i,o]=w.useState(V0);function l(){o(()=>e.length?e.map(c=>C1(c)?r:new Sm(t(c),c)):V0)}const u=Kc({callback:l});return zr(()=>{u==null||u.disconnect(),l(),e.forEach(c=>u==null?void 0:u.observe(c))},[e]),i}function DF(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return yl(t)?t:e}function LF(e){let{measure:t}=e;const[n,r]=w.useState(null),i=w.useCallback(f=>{for(const{target:h}of f)if(yl(h)){r(p=>{const v=t(h);return p?{...p,width:v.width,height:v.height}:v});break}},[t]),o=Kc({callback:i}),l=w.useCallback(f=>{const h=DF(f);o==null||o.disconnect(),h&&(o==null||o.observe(h)),r(h?t(h):null)},[t,o]),[u,c]=gc(l);return w.useMemo(()=>({nodeRef:u,rect:n,setRef:c}),[n,u,c])}const $F=[{sensor:P1,options:{}},{sensor:I1,options:{}}],FF={current:{}},Ju={draggable:{measure:L0},droppable:{measure:L0,strategy:ol.WhileDragging,frequency:Ep.Optimized},dragOverlay:{measure:Ho}};class qa extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const zF={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new qa,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:vc},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ju,measureDroppableContainers:vc,windowRect:null,measuringScheduled:!1},BF={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:vc,draggableNodes:new Map,over:null,measureDroppableContainers:vc},Yc=w.createContext(BF),O1=w.createContext(zF);function UF(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new qa}}}function WF(e,t){switch(t.type){case Jt.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Jt.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Jt.DragEnd:case Jt.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Jt.RegisterDroppable:{const{element:n}=t,{id:r}=n,i=new qa(e.droppable.containers);return i.set(r,n),{...e,droppable:{...e.droppable,containers:i}}}case Jt.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const l=new qa(e.droppable.containers);return l.set(n,{...o,disabled:i}),{...e,droppable:{...e.droppable,containers:l}}}case Jt.UnregisterDroppable:{const{id:n,key:r}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const o=new qa(e.droppable.containers);return o.delete(n),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function HF(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:i}=w.useContext(Yc),o=wp(r),l=wp(n==null?void 0:n.id);return w.useEffect(()=>{if(!t&&!r&&o&&l!=null){if(!bm(o)||document.activeElement===o.target)return;const u=i.get(l);if(!u)return;const{activatorNode:c,node:f}=u;if(!c.current&&!f.current)return;requestAnimationFrame(()=>{for(const h of[c.current,f.current]){if(!h)continue;const p=M4(h);if(p){p.focus();break}}})}},[r,t,i,l,o]),null}function VF(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((i,o)=>o({transform:i,...r}),n):n}function qF(e){return w.useMemo(()=>({draggable:{...Ju.draggable,...e==null?void 0:e.draggable},droppable:{...Ju.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Ju.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function KF(e){let{activeNode:t,measure:n,initialRect:r,config:i=!0}=e;const o=w.useRef(!1),{x:l,y:u}=typeof i=="boolean"?{x:i,y:i}:i;zr(()=>{if(!l&&!u||!t){o.current=!1;return}if(o.current||!r)return;const f=t==null?void 0:t.node.current;if(!f||f.isConnected===!1)return;const h=n(f),p=k1(h,r);if(l||(p.x=0),u||(p.y=0),o.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const v=S1(f);v&&v.scrollBy({top:p.y,left:p.x})}},[t,l,u,r,n])}const M1=w.createContext({..._r,scaleX:1,scaleY:1});var Ii;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Ii||(Ii={}));const YF=w.memo(function(t){var n,r,i,o;let{id:l,accessibility:u,autoScroll:c=!0,children:f,sensors:h=$F,collisionDetection:p=Q4,measuring:v,modifiers:y,...b}=t;const k=w.useReducer(WF,void 0,UF),[E,C]=k,[_,j]=B4(),[I,O]=w.useState(Ii.Uninitialized),A=I===Ii.Initialized,{draggable:{active:$,nodes:ie,translate:U},droppable:{containers:R}}=E,D=$!=null?ie.get($):null,Z=w.useRef({initial:null,translated:null}),H=w.useMemo(()=>{var qe;return $!=null?{id:$,data:(qe=D==null?void 0:D.data)!=null?qe:FF,rect:Z}:null},[$,D]),K=w.useRef(null),[V,X]=w.useState(null),[W,M]=w.useState(null),ee=il(b,Object.values(b)),T=xl("DndDescribedBy",l),F=w.useMemo(()=>R.getEnabled(),[R]),G=qF(v),{droppableRects:P,measureDroppableContainers:be,measuringScheduled:ge}=CF(F,{dragging:A,dependencies:[U.x,U.y],config:G.droppable}),me=EF(ie,$),ye=w.useMemo(()=>W?bp(W):null,[W]),Ce=Qe(),Re=jF(me,G.draggable.measure);KF({activeNode:$!=null?ie.get($):null,config:Ce.layoutShiftCompensation,initialRect:Re,measure:G.draggable.measure});const Pe=U0(me,G.draggable.measure,Re),te=U0(me?me.parentElement:null),Ne=w.useRef({activatorEvent:null,active:null,activeNode:me,collisionRect:null,collisions:null,droppableRects:P,draggableNodes:ie,draggingNode:null,draggingNodeRect:null,droppableContainers:R,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Be=R.getNodeFor((n=Ne.current.over)==null?void 0:n.id),We=LF({measure:G.dragOverlay.measure}),rt=(r=We.nodeRef.current)!=null?r:me,at=A?(i=We.rect)!=null?i:Pe:null,Nt=!!(We.nodeRef.current&&We.rect),qt=IF(Nt?null:Pe),J=R1(rt?Ln(rt):null),de=PF(A?Be??me:null),pe=MF(de),Ae=VF(y,{transform:{x:U.x-qt.x,y:U.y-qt.y,scaleX:1,scaleY:1},activatorEvent:W,active:H,activeNodeRect:Pe,containerNodeRect:te,draggingNodeRect:at,over:Ne.current.over,overlayNodeRect:We.rect,scrollableAncestors:de,scrollableAncestorRects:pe,windowRect:J}),Se=ye?_o(ye,U):null,ue=AF(de),Te=H0(ue),L=H0(ue,[Pe]),q=_o(Ae,Te),ce=at?eF(at,Ae):null,le=H&&ce?p({active:H,collisionRect:ce,droppableRects:P,droppableContainers:F,pointerCoordinates:Se}):null,re=Y4(le,"id"),[fe,z]=w.useState(null),ne=Nt?Ae:_o(Ae,L),he=X4(ne,(o=fe==null?void 0:fe.rect)!=null?o:null,Pe),we=w.useRef(null),Me=w.useCallback((qe,$e)=>{let{sensor:st,options:ut}=$e;if(K.current==null)return;const vt=ie.get(K.current);if(!vt)return;const sn=qe.nativeEvent,xn=new st({active:K.current,activeNode:vt,event:sn,options:ut,context:Ne,onAbort(It){if(!ie.get(It))return;const{onDragAbort:un}=ee.current,ur={id:It};un==null||un(ur),_({type:"onDragAbort",event:ur})},onPending(It,Qn,un,ur){if(!ie.get(It))return;const{onDragPending:Cr}=ee.current,Fn={id:It,constraint:Qn,initialCoordinates:un,offset:ur};Cr==null||Cr(Fn),_({type:"onDragPending",event:Fn})},onStart(It){const Qn=K.current;if(Qn==null)return;const un=ie.get(Qn);if(!un)return;const{onDragStart:ur}=ee.current,cr={activatorEvent:sn,active:{id:Qn,data:un.data,rect:Z}};Kn.unstable_batchedUpdates(()=>{ur==null||ur(cr),O(Ii.Initializing),C({type:Jt.DragStart,initialCoordinates:It,active:Qn}),_({type:"onDragStart",event:cr}),X(we.current),M(sn)})},onMove(It){C({type:Jt.DragMove,coordinates:It})},onEnd:$n(Jt.DragEnd),onCancel:$n(Jt.DragCancel)});we.current=xn;function $n(It){return async function(){const{active:un,collisions:ur,over:cr,scrollAdjustedTranslate:Cr}=Ne.current;let Fn=null;if(un&&Cr){const{cancelDrop:Hr}=ee.current;Fn={activatorEvent:sn,active:un,collisions:ur,delta:Cr,over:cr},It===Jt.DragEnd&&typeof Hr=="function"&&await Promise.resolve(Hr(Fn))&&(It=Jt.DragCancel)}K.current=null,Kn.unstable_batchedUpdates(()=>{C({type:It}),O(Ii.Uninitialized),z(null),X(null),M(null),we.current=null;const Hr=It===Jt.DragEnd?"onDragEnd":"onDragCancel";if(Fn){const Vo=ee.current[Hr];Vo==null||Vo(Fn),_({type:Hr,event:Fn})}})}}},[ie]),et=w.useCallback((qe,$e)=>(st,ut)=>{const vt=st.nativeEvent,sn=ie.get(ut);if(K.current!==null||!sn||vt.dndKit||vt.defaultPrevented)return;const xn={active:sn};qe(st,$e.options,xn)===!0&&(vt.dndKit={capturedBy:$e.sensor},K.current=ut,Me(st,$e))},[ie,Me]),ve=_F(h,et);RF(h),zr(()=>{Pe&&I===Ii.Initializing&&O(Ii.Initialized)},[Pe,I]),w.useEffect(()=>{const{onDragMove:qe}=ee.current,{active:$e,activatorEvent:st,collisions:ut,over:vt}=Ne.current;if(!$e||!st)return;const sn={active:$e,activatorEvent:st,collisions:ut,delta:{x:q.x,y:q.y},over:vt};Kn.unstable_batchedUpdates(()=>{qe==null||qe(sn),_({type:"onDragMove",event:sn})})},[q.x,q.y]),w.useEffect(()=>{const{active:qe,activatorEvent:$e,collisions:st,droppableContainers:ut,scrollAdjustedTranslate:vt}=Ne.current;if(!qe||K.current==null||!$e||!vt)return;const{onDragOver:sn}=ee.current,xn=ut.get(re),$n=xn&&xn.rect.current?{id:xn.id,rect:xn.rect.current,data:xn.data,disabled:xn.disabled}:null,It={active:qe,activatorEvent:$e,collisions:st,delta:{x:vt.x,y:vt.y},over:$n};Kn.unstable_batchedUpdates(()=>{z($n),sn==null||sn(It),_({type:"onDragOver",event:It})})},[re]),zr(()=>{Ne.current={activatorEvent:W,active:H,activeNode:me,collisionRect:ce,collisions:le,droppableRects:P,draggableNodes:ie,draggingNode:rt,draggingNodeRect:at,droppableContainers:R,over:fe,scrollableAncestors:de,scrollAdjustedTranslate:q},Z.current={initial:at,translated:ce}},[H,me,le,ce,ie,rt,at,P,R,fe,de,q]),bF({...Ce,delta:U,draggingRect:ce,pointerCoordinates:Se,scrollableAncestors:de,scrollableAncestorRects:pe});const tt=w.useMemo(()=>({active:H,activeNode:me,activeNodeRect:Pe,activatorEvent:W,collisions:le,containerNodeRect:te,dragOverlay:We,draggableNodes:ie,droppableContainers:R,droppableRects:P,over:fe,measureDroppableContainers:be,scrollableAncestors:de,scrollableAncestorRects:pe,measuringConfiguration:G,measuringScheduled:ge,windowRect:J}),[H,me,Pe,W,le,te,We,ie,R,P,fe,be,de,pe,G,ge,J]),Ve=w.useMemo(()=>({activatorEvent:W,activators:ve,active:H,activeNodeRect:Pe,ariaDescribedById:{draggable:T},dispatch:C,draggableNodes:ie,over:fe,measureDroppableContainers:be}),[W,ve,H,Pe,C,T,ie,fe,be]);return Oe.createElement(b1.Provider,{value:j},Oe.createElement(Yc.Provider,{value:Ve},Oe.createElement(O1.Provider,{value:tt},Oe.createElement(M1.Provider,{value:he},f)),Oe.createElement(HF,{disabled:(u==null?void 0:u.restoreFocus)===!1})),Oe.createElement(H4,{...u,hiddenTextDescribedById:T}));function Qe(){const qe=(V==null?void 0:V.autoScrollEnabled)===!1,$e=typeof c=="object"?c.enabled===!1:c===!1,st=A&&!qe&&!$e;return typeof c=="object"?{...c,enabled:st}:{enabled:st}}}),GF=w.createContext(null),q0="button",JF="Draggable";function QF(e){let{id:t,data:n,disabled:r=!1,attributes:i}=e;const o=xl(JF),{activators:l,activatorEvent:u,active:c,activeNodeRect:f,ariaDescribedById:h,draggableNodes:p,over:v}=w.useContext(Yc),{role:y=q0,roleDescription:b="draggable",tabIndex:k=0}=i??{},E=(c==null?void 0:c.id)===t,C=w.useContext(E?M1:GF),[_,j]=gc(),[I,O]=gc(),A=OF(l,t),$=il(n);zr(()=>(p.set(t,{id:t,key:o,node:_,activatorNode:I,data:$}),()=>{const U=p.get(t);U&&U.key===o&&p.delete(t)}),[p,t]);const ie=w.useMemo(()=>({role:y,tabIndex:k,"aria-disabled":r,"aria-pressed":E&&y===q0?!0:void 0,"aria-roledescription":b,"aria-describedby":h.draggable}),[r,y,k,E,b,h.draggable]);return{active:c,activatorEvent:u,activeNodeRect:f,attributes:ie,isDragging:E,listeners:r?void 0:A,node:_,over:v,setNodeRef:j,setActivatorNodeRef:O,transform:C}}function XF(){return w.useContext(O1)}const ZF="Droppable",e3={timeout:25};function t3(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:i}=e;const o=xl(ZF),{active:l,dispatch:u,over:c,measureDroppableContainers:f}=w.useContext(Yc),h=w.useRef({disabled:n}),p=w.useRef(!1),v=w.useRef(null),y=w.useRef(null),{disabled:b,updateMeasurementsFor:k,timeout:E}={...e3,...i},C=il(k??r),_=w.useCallback(()=>{if(!p.current){p.current=!0;return}y.current!=null&&clearTimeout(y.current),y.current=setTimeout(()=>{f(Array.isArray(C.current)?C.current:[C.current]),y.current=null},E)},[E]),j=Kc({callback:_,disabled:b||!l}),I=w.useCallback((ie,U)=>{j&&(U&&(j.unobserve(U),p.current=!1),ie&&j.observe(ie))},[j]),[O,A]=gc(I),$=il(t);return w.useEffect(()=>{!j||!O.current||(j.disconnect(),p.current=!1,j.observe(O.current))},[O,j]),w.useEffect(()=>(u({type:Jt.RegisterDroppable,element:{id:r,key:o,disabled:n,node:O,rect:v,data:$}}),()=>u({type:Jt.UnregisterDroppable,key:o,id:r})),[r]),w.useEffect(()=>{n!==h.current.disabled&&(u({type:Jt.SetDroppableDisabled,id:r,key:o,disabled:n}),h.current.disabled=n)},[r,o,n,u]),{active:l,rect:v,isOver:(c==null?void 0:c.id)===r,node:O,over:c,setNodeRef:A}}function D1(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function n3(e,t){return e.reduce((n,r,i)=>{const o=t.get(r);return o&&(n[i]=o),n},Array(e.length))}function zu(e){return e!==null&&e>=0}function r3(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function i3(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const L1=e=>{let{rects:t,activeIndex:n,overIndex:r,index:i}=e;const o=D1(t,r,n),l=t[i],u=o[i];return!u||!l?null:{x:u.left-l.left,y:u.top-l.top,scaleX:u.width/l.width,scaleY:u.height/l.height}},Bu={scaleX:1,scaleY:1},s3=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:i,rects:o,overIndex:l}=e;const u=(t=o[n])!=null?t:r;if(!u)return null;if(i===n){const f=o[l];return f?{x:0,y:n<l?f.top+f.height-(u.top+u.height):f.top-u.top,...Bu}:null}const c=o3(o,i,n);return i>n&&i<=l?{x:0,y:-u.height-c,...Bu}:i<n&&i>=l?{x:0,y:u.height+c,...Bu}:{x:0,y:0,...Bu}};function o3(e,t,n){const r=e[t],i=e[t-1],o=e[t+1];return r?n<t?i?r.top-(i.top+i.height):o?o.top-(r.top+r.height):0:o?o.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const $1="Sortable",F1=Oe.createContext({activeIndex:-1,containerId:$1,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:L1,disabled:{draggable:!1,droppable:!1}});function a3(e){let{children:t,id:n,items:r,strategy:i=L1,disabled:o=!1}=e;const{active:l,dragOverlay:u,droppableRects:c,over:f,measureDroppableContainers:h}=XF(),p=xl($1,n),v=u.rect!==null,y=w.useMemo(()=>r.map(A=>typeof A=="object"&&"id"in A?A.id:A),[r]),b=l!=null,k=l?y.indexOf(l.id):-1,E=f?y.indexOf(f.id):-1,C=w.useRef(y),_=!r3(y,C.current),j=E!==-1&&k===-1||_,I=i3(o);zr(()=>{_&&b&&h(y)},[_,y,b,h]),w.useEffect(()=>{C.current=y},[y]);const O=w.useMemo(()=>({activeIndex:k,containerId:p,disabled:I,disableTransforms:j,items:y,overIndex:E,useDragOverlay:v,sortedRects:n3(y,c),strategy:i}),[k,p,I.draggable,I.droppable,j,y,E,c,v,i]);return Oe.createElement(F1.Provider,{value:O},t)}const l3=e=>{let{id:t,items:n,activeIndex:r,overIndex:i}=e;return D1(n,r,i).indexOf(t)},u3=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:i,items:o,newIndex:l,previousItems:u,previousContainerId:c,transition:f}=e;return!f||!r||u!==o&&i===l?!1:n?!0:l!==i&&t===c},c3={duration:200,easing:"ease"},z1="transform",d3=sl.Transition.toString({property:z1,duration:0,easing:"linear"}),f3={roleDescription:"sortable"};function h3(e){let{disabled:t,index:n,node:r,rect:i}=e;const[o,l]=w.useState(null),u=w.useRef(n);return zr(()=>{if(!t&&n!==u.current&&r.current){const c=i.current;if(c){const f=Ho(r.current,{ignoreTransform:!0}),h={x:c.left-f.left,y:c.top-f.top,scaleX:c.width/f.width,scaleY:c.height/f.height};(h.x||h.y)&&l(h)}}n!==u.current&&(u.current=n)},[t,n,r,i]),w.useEffect(()=>{o&&l(null)},[o]),o}function p3(e){let{animateLayoutChanges:t=u3,attributes:n,disabled:r,data:i,getNewIndex:o=l3,id:l,strategy:u,resizeObserverConfig:c,transition:f=c3}=e;const{items:h,containerId:p,activeIndex:v,disabled:y,disableTransforms:b,sortedRects:k,overIndex:E,useDragOverlay:C,strategy:_}=w.useContext(F1),j=m3(r,y),I=h.indexOf(l),O=w.useMemo(()=>({sortable:{containerId:p,index:I,items:h},...i}),[p,i,I,h]),A=w.useMemo(()=>h.slice(h.indexOf(l)),[h,l]),{rect:$,node:ie,isOver:U,setNodeRef:R}=t3({id:l,data:O,disabled:j.droppable,resizeObserverConfig:{updateMeasurementsFor:A,...c}}),{active:D,activatorEvent:Z,activeNodeRect:H,attributes:K,setNodeRef:V,listeners:X,isDragging:W,over:M,setActivatorNodeRef:ee,transform:T}=QF({id:l,data:O,attributes:{...f3,...n},disabled:j.draggable}),F=P4(R,V),G=!!D,P=G&&!b&&zu(v)&&zu(E),be=!C&&W,ge=be&&P?T:null,ye=P?ge??(u??_)({rects:k,activeNodeRect:H,activeIndex:v,overIndex:E,index:I}):null,Ce=zu(v)&&zu(E)?o({id:l,items:h,activeIndex:v,overIndex:E}):I,Re=D==null?void 0:D.id,Pe=w.useRef({activeId:Re,items:h,newIndex:Ce,containerId:p}),te=h!==Pe.current.items,Ne=t({active:D,containerId:p,isDragging:W,isSorting:G,id:l,index:I,items:h,newIndex:Pe.current.newIndex,previousItems:Pe.current.items,previousContainerId:Pe.current.containerId,transition:f,wasDragging:Pe.current.activeId!=null}),Be=h3({disabled:!Ne,index:I,node:ie,rect:$});return w.useEffect(()=>{G&&Pe.current.newIndex!==Ce&&(Pe.current.newIndex=Ce),p!==Pe.current.containerId&&(Pe.current.containerId=p),h!==Pe.current.items&&(Pe.current.items=h)},[G,Ce,p,h]),w.useEffect(()=>{if(Re===Pe.current.activeId)return;if(Re&&!Pe.current.activeId){Pe.current.activeId=Re;return}const rt=setTimeout(()=>{Pe.current.activeId=Re},50);return()=>clearTimeout(rt)},[Re]),{active:D,activeIndex:v,attributes:K,data:O,rect:$,index:I,newIndex:Ce,items:h,isOver:U,isSorting:G,isDragging:W,listeners:X,node:ie,overIndex:E,over:M,setNodeRef:F,setActivatorNodeRef:ee,setDroppableNodeRef:R,setDraggableNodeRef:V,transform:Be??ye,transition:We()};function We(){if(Be||te&&Pe.current.newIndex===I)return d3;if(!(be&&!bm(Z)||!f)&&(G||Ne))return sl.Transition.toString({...f,property:z1})}}function m3(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}mt.Down,mt.Right,mt.Up,mt.Left;function wc(e,t="18:30"){const n=(e??t).trim(),r=/^(\d{1,2}):(\d{2})$/.exec(n);if(!r)return wc(t,t);const i=Number(r[1]),o=Number(r[2]);return Number.isNaN(i)||Number.isNaN(o)?wc(t,t):(i*60+o)%1440}function _p(e){const t=(e%1440+1440)%1440,n=Math.floor(t/60),r=t%60,i=n.toString().padStart(2,"0"),o=r.toString().padStart(2,"0");return`${i}:${o}`}const K0={present:"Presente",absent:"Ausente",pending:"Pendiente"};function B1({work:e,objective:t,parentChain:n,onSelect:r}){const i=(e.subtitle??"").trim();return m.jsxs("button",{type:"button",onClick:()=>r(e.id),className:"flex w-full items-center justify-between gap-4 rounded-xl border border-white/10 bg-white/5 px-4 py-3 text-left transition hover:border-white/30",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-semibold text-white",children:e.name}),i?m.jsx("p",{className:"text-xs text-white/60",children:i}):null,m.jsxs("p",{className:"text-xs text-white/50",children:[e.estimatedMinutes," min"]}),n?m.jsxs("p",{className:"text-[11px] text-white/40",children:["Deriva de ",n]}):null]}),m.jsx(Bi,{objective:t,size:"sm"})]})}function g3({item:e,work:t,objective:n,expanded:r,isPersonal:i,onToggleExpanded:o,onRemove:l,onDuplicate:u,onUpdateDetails:c,onReplace:f,startTimeLabel:h,durationMinutes:p,works:v,objectiveMap:y,workPathById:b}){const{attributes:k,listeners:E,setNodeRef:C,transform:_,transition:j,isDragging:I}=p3({id:e.id}),[O,A]=w.useState(!1),[$,ie]=w.useState(""),U={transform:sl.Transform.toString(_),transition:j},D=(e.focusLabel??"").trim(),Z=D.length>0,H=e.customDescriptionMarkdown??(t==null?void 0:t.descriptionMarkdown)??"",K=H.trim().length>0,V=((t==null?void 0:t.videoUrls)??[]).map(ye=>ye.trim()).filter(Boolean),X=V.length>0,W=K||X,ee=(t!=null&&t.id?b.get(t.id)??(t==null?void 0:t.name)??"":"").split("  ").slice(0,-1).join("  "),T=((t==null?void 0:t.subtitle)??"").trim(),F=ye=>{const Ce=ye.target.value;c(e.id,{focusLabel:Ce===""?void 0:Ce})},G=$.trim().toLowerCase(),P=w.useMemo(()=>v.filter(ye=>ye.id!==(t==null?void 0:t.id)),[v,t==null?void 0:t.id]),be=w.useMemo(()=>G?P.filter(ye=>{var Be;const Ce=(ye.subtitle??"").toLowerCase(),Re=((Be=y.get(ye.objectiveId))==null?void 0:Be.name.toLowerCase())??"",Pe=(b.get(ye.id)??"").toLowerCase(),te=(ye.descriptionMarkdown??"").toLowerCase(),Ne=G;return ye.name.toLowerCase().includes(Ne)||Ce.includes(Ne)||te.includes(Ne)||Re.includes(Ne)||Pe.includes(Ne)}):[],[P,G,y,b]);w.useEffect(()=>{O||ie("")},[O]);const ge=P.length>0,me=e.result;return m.jsxs("article",{ref:C,style:U,className:ze("relative flex flex-col gap-3 rounded-3xl border border-white/10 bg-white/10 p-4 shadow-lg shadow-black/20 transition",I&&"ring-2 ring-sky-400/70"),children:[n?m.jsx("div",{className:"absolute inset-0 -z-[1] rounded-3xl opacity-30 blur-xl",style:{backgroundColor:n.colorHex}}):null,m.jsxs("div",{className:"flex items-start gap-4",children:[m.jsx("button",{type:"button",className:"mt-1 flex h-10 w-10 items-center justify-center rounded-full border border-white/20 text-white/70",...E,...k,"aria-label":"Reordenar trabajo",children:""}),m.jsx("div",{className:"flex-1 space-y-1",children:m.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsxs("p",{className:"text-lg font-semibold text-white",children:[(t==null?void 0:t.name)??"Trabajo eliminado",Z?m.jsxs("span",{className:"ml-2 text-sky-300",children:[" ",D]}):null]}),T?m.jsx("p",{className:"text-sm text-white/70",children:T}):null,ee?m.jsxs("p",{className:"text-xs text-white/50",children:["Deriva de ",ee]}):null,m.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm text-white/60",children:[m.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:h}),m.jsx("span",{className:"text-white/30",children:""}),m.jsxs("span",{children:[p," min"]})]}),m.jsxs("div",{className:"max-w-md",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Foco dentro del trabajo"}),m.jsx("input",{type:"text",value:e.focusLabel??"",onChange:F,placeholder:"Ej. 1/7  Apertura",className:"input-field mt-1"})]}),i?m.jsx("div",{className:"mt-3 flex flex-wrap items-center gap-3",children:m.jsx("div",{className:"flex flex-wrap items-center gap-2",children:["ok","doubt","fail"].map(ye=>m.jsx("button",{type:"button",onClick:()=>c(e.id,{result:ye,completed:!0}),className:ze("rounded-full border px-3 py-1 text-xs font-semibold transition",me===ye?ye==="ok"?"border-emerald-500/60 bg-emerald-500/20 text-emerald-200":ye==="doubt"?"border-amber-400/50 bg-amber-500/15 text-amber-200":"border-rose-500/60 bg-rose-500/15 text-rose-200":"border-white/10 text-white/60 hover:border-white/30 hover:text-white"),children:ye==="ok"?"OK":ye==="doubt"?"Dudosa":"Fallo"},ye))})}):null]}),m.jsxs("div",{className:"flex items-center gap-2",children:[W?m.jsxs("button",{type:"button",onClick:()=>o(e.id),className:ze("inline-flex items-center gap-2 rounded-full border border-white/20 px-3 py-1 text-xs font-semibold text-white/70 transition hover:border-white/40 hover:text-white",r&&"border-white/40 text-white"),children:[m.jsx("span",{className:ze("transition-transform",r?"rotate-90":"rotate-0"),children:""}),r?"Ocultar detalles":"Ver detalles"]}):null,m.jsx(Bi,{objective:n,size:"sm"})]})]})}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{type:"button",onClick:()=>A(ye=>!ye),disabled:!ge,className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-white/20 text-white/70 transition hover:border-sky-400/60 hover:text-white disabled:opacity-40","aria-label":"Intercambiar trabajo por otro de la misma categora","aria-expanded":O,children:""}),m.jsx("button",{type:"button",onClick:u,className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-white/20 text-white/70 transition hover:border-sky-400/60 hover:text-white","aria-label":"Duplicar trabajo en la sesin",children:"x2"}),m.jsx("button",{type:"button",onClick:l,className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-rose-500/40 text-rose-300 hover:border-rose-400 hover:text-rose-200","aria-label":"Eliminar trabajo de la sesin",children:""})]})]}),O?m.jsx("div",{className:"mt-3 space-y-3 rounded-2xl border border-white/10 bg-slate-950/70 p-3",children:m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Buscar en el catlogo"}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:"search",className:"input-field",placeholder:"Buscar en el catlogo",value:$,onChange:ye=>ie(ye.target.value)}),$?m.jsx("div",{className:"absolute top-14 z-10 max-h-60 w-full overflow-y-auto rounded-2xl border border-white/10 bg-slate-900/95 p-2 shadow-xl",children:be.length===0?m.jsx("p",{className:"p-3 text-sm text-white/50",children:"Sin resultados. Ajusta la bsqueda."}):m.jsx("div",{className:"space-y-2",children:be.map(ye=>{const Re=(b.get(ye.id)??ye.name).split("  ").slice(0,-1).join("  ");return m.jsx(B1,{work:ye,objective:y.get(ye.objectiveId),parentChain:Re,onSelect:Pe=>{f(Pe),A(!1),ie("")}},ye.id)})})}):null]}),$?null:m.jsx("p",{className:"rounded-2xl border border-dashed border-white/15 px-3 py-2 text-xs text-white/60",children:"Escribe para encontrar un reemplazo. Se mostrarn resultados coincidentes del catlogo."})]})}):null,W&&r?m.jsxs("div",{className:"grid gap-3 rounded-2xl border border-white/10 bg-slate-950/60 p-4",children:[K?m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Descripcin"}),m.jsx("div",{className:"rounded-2xl border border-white/10 bg-slate-950/70 p-3",children:m.jsx(Ao,{content:H,enableWorkLinks:!0})})]}):null,X?m.jsxs("div",{className:"space-y-2",children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-white/40",children:"Vdeos de referencia"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:V.map(ye=>m.jsxs("a",{href:ye,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-full border border-white/15 bg-white/5 px-3 py-1 text-xs font-medium text-white/80 transition hover:border-white/30 hover:text-white",children:[m.jsx("span",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-red-500/80 text-white shadow shadow-red-500/40",children:""}),"Ver vdeo"]},ye))})]}):null]}):null,m.jsx("span",{className:"absolute -left-4 top-4 flex h-8 w-8 items-center justify-center rounded-full border border-white/20 bg-slate-950/90 text-xs font-semibold text-white/60",children:e.order+1})]})}function _m({session:e,works:t,objectives:n,assistants:r,onDateChange:i}){const o=Ie(D=>D.updateSession),l=Ie(D=>D.addWorkToSession),u=Ie(D=>D.duplicateSessionWork),c=Ie(D=>D.removeWorkFromSession),f=Ie(D=>D.reorderSessionWork),h=Ie(D=>D.updateSessionWorkDetails),p=Ie(D=>D.replaceSessionWork),v=Ie(D=>D.setAttendanceStatus),y=e.kind==="personal",[b,k]=w.useState(""),[E,C]=w.useState(new Set),_=w.useMemo(()=>new Map(n.map(D=>[D.id,D])),[n]),j=w.useMemo(()=>new Map(t.map(D=>[D.id,D])),[t]),I=w.useMemo(()=>{const D=new Map,Z=(H,K)=>{if(D.has(H))return D.get(H);const V=j.get(H);if(!V)return"";const X=V.parentWorkId;if(!X||K.has(H))return D.set(H,V.name),V.name;K.add(H);const W=Z(X,K);K.delete(H);const M=W?`${W}  ${V.name}`:V.name;return D.set(H,M),M};return t.forEach(H=>Z(H.id,new Set)),D},[t,j]),O=w.useMemo(()=>{if(!b)return t;const D=b.toLowerCase();return t.filter(Z=>{const H=_.get(Z.objectiveId),K=I.get(Z.id)??"";return Z.name.toLowerCase().includes(D)||Z.descriptionMarkdown.toLowerCase().includes(D)||(H==null?void 0:H.name.toLowerCase().includes(D))||K.toLowerCase().includes(D)})},[t,b,_,I]),A=w.useCallback(D=>{const Z=I.get(D);if(!Z)return"";const H=Z.split("  ");return H.pop(),H.join("  ")},[I]),$=D=>{C(Z=>{const H=new Set(Z);return H.has(D)?H.delete(D):H.add(D),H})},ie=D=>{l(e.id,{workId:D}),k("")},U=D=>{const{active:Z,over:H}=D;if(!H||Z.id===H.id)return;const K=e.workItems.findIndex(X=>X.id===Z.id),V=e.workItems.findIndex(X=>X.id===H.id);K===-1||V===-1||f(e.id,K,V)},R=D=>Z=>{const H=Z.target.value;o(e.id,{[D]:H}),D==="date"&&i&&i(H)};return m.jsxs("div",{className:"space-y-6",children:[y?null:m.jsxs("div",{className:"grid gap-4 rounded-3xl border border-white/10 bg-white/5 p-6",children:[m.jsxs("div",{className:"grid gap-2 sm:grid-cols-3",children:[m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Ttulo"}),m.jsx("input",{type:"text",className:"input-field",value:e.title,onChange:R("title"),placeholder:"Nombre de la sesin"})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Fecha"}),m.jsx("input",{type:"date",className:"input-field",value:e.date,onChange:R("date")})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Hora de inicio"}),m.jsx("input",{type:"time",className:"input-field",value:e.startTime??"18:30",onChange:R("startTime")})]})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Descripcin"}),m.jsx("textarea",{className:"input-field min-h-[120px]",value:e.description??"",onChange:R("description"),placeholder:"Contexto general, objetivos o recordatorios"})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Notas privadas"}),m.jsx("textarea",{className:"input-field min-h-[100px]",value:e.notes??"",onChange:R("notes"),placeholder:"Notas para ti o recordatorios de material"})]})]}),m.jsxs("section",{className:"space-y-4",children:[m.jsxs("header",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-white",children:"Trabajos en la sesin"}),m.jsx("p",{className:"text-sm text-white/60",children:"Arrastra para reorganizar, pulsa  para ajustar detalles."})]}),m.jsxs("div",{className:"relative w-full sm:w-72",children:[m.jsx("input",{type:"search",className:"input-field",value:b,onChange:D=>k(D.target.value),placeholder:"Buscar en catlogo"}),b&&m.jsx("div",{className:"absolute top-12 z-10 max-h-72 w-full overflow-y-auto rounded-2xl border border-white/10 bg-slate-900/95 p-2 shadow-xl",children:O.length===0?m.jsx("p",{className:"p-4 text-sm text-white/50",children:"Sin resultados. Revisa el catlogo."}):m.jsx("div",{className:"space-y-2",children:O.map(D=>m.jsx(B1,{work:D,objective:_.get(D.objectiveId),parentChain:A(D.id),onSelect:ie},D.id))})})]})]}),m.jsx("div",{className:"space-y-4",children:m.jsx(YF,{collisionDetection:G4,onDragEnd:U,children:m.jsx(a3,{items:e.workItems.map(D=>D.id),strategy:s3,children:m.jsx("div",{className:"space-y-5",children:e.workItems.length===0?m.jsx("div",{className:"rounded-3xl border border-dashed border-white/20 p-10 text-center text-white/50",children:"Aade trabajos desde el catlogo con el buscador superior."}):(()=>{let D=0;const Z=wc(e.startTime,"18:30");return e.workItems.map(H=>{const K=j.get(H.workId),V=K?_.get(K.objectiveId):void 0,X=H.customDurationMinutes??(K==null?void 0:K.estimatedMinutes)??0,W=_p(Z+D);return D+=X,m.jsx(g3,{item:H,work:K,objective:V,expanded:E.has(H.id),isPersonal:y,onToggleExpanded:$,onRemove:()=>c(e.id,H.id),onDuplicate:()=>u(e.id,H.id),onUpdateDetails:(M,ee)=>h(e.id,M,ee),onReplace:M=>p(e.id,H.id,M),startTimeLabel:W,durationMinutes:X,works:t,objectiveMap:_,workPathById:I},H.id)})})()})})})})]}),y?null:m.jsxs("section",{className:"space-y-4",children:[m.jsx("header",{className:"flex flex-col gap-1 sm:flex-row sm:items-baseline sm:justify-between",children:m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-white",children:"Previsin de asistencia"}),m.jsx("p",{className:"text-sm text-white/60",children:"Indica quin esperas que asista. La asistencia real se marca durante la sesin desde la Home."})]})}),m.jsx("div",{className:"space-y-2 rounded-3xl border border-white/10 bg-white/5 p-4",children:r.length===0?m.jsx("p",{className:"text-sm text-white/60",children:"An no tienes asistentes definidos. Adelos desde la seccin correspondiente para empezar a registrar asistencia."}):r.map(D=>{const Z=e.attendance.find(V=>V.assistantId===D.id),H=(Z==null?void 0:Z.status)??"pending",K=Z==null?void 0:Z.actualStatus;return m.jsxs("div",{className:"flex flex-col gap-2 rounded-2xl border border-white/10 bg-slate-950/60 p-3 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-semibold text-white",children:D.name}),D.notes?m.jsx("p",{className:"text-xs text-white/50",children:D.notes}):null,K?m.jsxs("p",{className:"text-xs text-white/40",children:["ltimo registro real: ",K0[K]]}):null]}),m.jsx("div",{className:"flex items-center gap-2",children:["present","absent","pending"].map(V=>m.jsx("button",{type:"button",onClick:()=>v(e.id,D.id,V),className:ze("rounded-full px-3 py-1 text-xs font-semibold transition",H===V?V==="present"?"border border-emerald-500/60 bg-emerald-500/20 text-emerald-200":V==="absent"?"border border-rose-500/60 bg-rose-500/20 text-rose-200":"border border-white/30 bg-white/10 text-white":"border border-white/10 text-white/60 hover:border-white/30 hover:text-white"),children:K0[V]},V))})]},D.id)})})]})]})}function Y0(e){if(!e)return null;const t=e.trim().toLowerCase();if(!t)return null;if(/^\\d+(\\.\\d+)?$/.test(t))return Math.floor(Number(t));if(/^(\\d+:)+\\d+$/.test(t)){const r=t.split(":").map(i=>Number(i));return r.some(i=>Number.isNaN(i))?null:r.reduce((i,o)=>i*60+o,0)}const n=t.match(/^(?:(\\d+)h)?(?:(\\d+)m)?(?:(\\d+)s?)?$/i);if(n){const r=n[1]?Number(n[1]):0,i=n[2]?Number(n[2]):0,o=n[3]?Number(n[3]):0;if(r||i||o)return r*3600+i*60+o}return null}function y3(e){if(!e)return null;try{const t=new URL(e),n=t.hostname.replace("www.","");let r="";if(n==="youtu.be"?r=t.pathname.slice(1).split("/")[0]??"":n.endsWith("youtube.com")?t.searchParams.has("v")?r=t.searchParams.get("v")??"":(t.pathname.startsWith("/shorts/")||t.pathname.startsWith("/embed/"))&&(r=t.pathname.split("/")[2]??""):n==="youtube-nocookie.com"&&t.pathname.startsWith("/embed/")&&(r=t.pathname.split("/")[2]??""),!r)return null;const i=new URL(`https://www.youtube-nocookie.com/embed/${r}`),o=Y0(t.searchParams.get("start")??t.searchParams.get("t"));o!==null&&i.searchParams.set("start",String(o));const l=Y0(t.searchParams.get("end"));l!==null&&i.searchParams.set("end",String(l));const u=t.searchParams.get("list");return u&&i.searchParams.set("list",u),i.toString()}catch{return null}}function Cm({url:e,title:t,maxWidth:n=300,className:r}){const i=e.trim();if(!i)return null;const o=y3(i);return o?m.jsx("div",{className:ze("flex w-full justify-center",r),children:m.jsx("div",{className:"overflow-hidden rounded-2xl border border-white/10 bg-black shadow-inner shadow-black/50",style:{maxWidth:n},children:m.jsx("iframe",{src:o,title:t,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0,className:"block w-full",style:{aspectRatio:"16 / 9"}})})}):m.jsx("div",{className:ze("flex w-full justify-center",r),children:m.jsx("a",{href:i,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-full border border-amber-400/30 bg-amber-500/10 px-3 py-1 text-xs font-semibold text-amber-200 transition hover:border-amber-400 hover:text-white",children:"URL no reconocida, abrir enlace"})})}function v3(e){return Array.from(new Set((e??[]).map(t=>t.trim().toLowerCase()).filter(t=>t.length>0)))}function U1({title:e,titleExtra:t,subtitle:n,objective:r,checked:i,onCheckedChange:o,orderNumber:l,startLabel:u,durationMinutes:c,tags:f,statusPill:h,lastSeenLabel:p,descriptionMarkdown:v,notesMarkdown:y,videoUrls:b,isExpanded:k,onToggleExpanded:E,actions:C,detailsActions:_}){const j=(t??"").trim(),I=j.length>0,O=(n??"").trim(),A=(v??"").trim(),$=(y??"").trim(),ie=(b??[]).map(V=>V.trim()).filter(Boolean),U=v3(f),R=U.length>0,D=!!u||typeof c=="number"||!!p,Z=A.length>0||$.length>0||ie.length>0,H=!!_,K=()=>{Z&&E()};return m.jsxs("article",{role:Z?"button":void 0,tabIndex:Z?0:void 0,onClick:()=>K(),onKeyDown:V=>{Z&&(V.key==="Enter"||V.key===" ")&&(V.preventDefault(),K())},className:ze("flex flex-col gap-2.5 rounded-3xl border border-white/10 bg-white/5 p-2.5 shadow shadow-black/20 sm:gap-3 sm:p-4",Z&&"cursor-pointer hover:border-white/20"),style:r?{background:`linear-gradient(120deg, ${r.colorHex}1a, rgba(15,23,42,0.8))`}:void 0,children:[m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("label",{className:"mt-1 flex items-center gap-3 text-left",onClick:V=>V.stopPropagation(),onKeyDown:V=>V.stopPropagation(),children:m.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded-full border-2 border-white/30 bg-transparent text-sky-400 transition focus:ring-sky-400",checked:i,onChange:V=>o(V.target.checked)})}),m.jsxs("div",{className:"flex-1 space-y-2",children:[m.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[m.jsxs("p",{className:"text-lg font-semibold text-white",children:[e,I?m.jsxs("span",{className:"ml-2 text-sky-300",children:[" ",j]}):null]}),h?m.jsx("span",{className:ze("inline-flex items-center rounded-full border px-2 py-0.5 text-[11px] font-semibold",h.className),children:h.label}):null]}),O?m.jsx("p",{className:"text-sm text-white/70",children:O}):null,D?m.jsxs("p",{className:"text-sm text-white/60",children:[u?m.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:u}):null,u&&typeof c=="number"?m.jsx("span",{className:"mx-2 text-white/30",children:""}):null,typeof c=="number"?m.jsxs("span",{children:[c," min"]}):null,(u||typeof c=="number")&&p?m.jsx("span",{className:"mx-2 text-white/30",children:""}):null,p?m.jsxs("span",{className:"text-xs text-white/50",children:["ltima vez: ",p]}):null]}):null]}),m.jsx(Bi,{objective:r,size:"sm"})]}),R?m.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-[11px] uppercase tracking-wide text-white/40",children:[U.slice(0,8).map(V=>m.jsx("span",{className:"rounded-full border border-white/10 px-2 py-0.5",children:V},V)),U.length>8?m.jsxs("span",{className:"text-white/50",children:["+",U.length-8]}):null]}):null,Z?m.jsxs("div",{className:"flex items-center gap-3 text-xs text-white/50",children:[m.jsxs("button",{type:"button",onClick:V=>{V.stopPropagation(),K()},className:"inline-flex items-center gap-2 rounded-full border border-white/15 px-3 py-1 text-xs font-semibold text-white/70 transition hover:border-white/30 hover:text-white",children:[m.jsx("span",{className:ze("transition-transform",k?"rotate-90":"rotate-0"),children:""}),k?"Ocultar detalles":"Ver detalles"]}),ie.length>0?m.jsxs("span",{children:[ie.length," vdeo",ie.length>1?"s":""]}):null]}):null]}),m.jsx("div",{className:ze("mt-1 flex h-10 w-10 items-center justify-center rounded-full border border-white/10 text-xs font-semibold uppercase text-white/60",i?"bg-white/20 text-white":""),children:l})]}),C?m.jsx("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-end",onClick:V=>V.stopPropagation(),onKeyDown:V=>V.stopPropagation(),children:C}):null,Z&&k?m.jsxs("div",{className:"space-y-3 rounded-2xl border border-white/10 bg-slate-950/40 p-3 sm:p-4",onClick:V=>V.stopPropagation(),onKeyDown:V=>V.stopPropagation(),children:[A?m.jsx(Ao,{content:A,enableWorkLinks:!0}):null,$?m.jsxs("div",{className:"space-y-2",children:[m.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-white/40",children:"Notas"}),m.jsx(Ao,{content:$,enableWorkLinks:!0})]}):null,ie.length>0?m.jsxs("div",{className:"space-y-3",children:[m.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-white/40",children:"Vdeos"}),m.jsx("div",{className:"grid gap-4 lg:grid-cols-3",children:ie.map((V,X)=>m.jsxs("div",{className:"space-y-2",children:[m.jsx(Cm,{url:V,title:`${e} vdeo ${X+1}`}),m.jsx("a",{href:V,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-full border border-white/15 bg-white/5 px-3 py-1 text-xs font-medium text-white/80 transition hover:border-white/30 hover:text-white",children:"Abrir en YouTube"})]},`${e}-video-${X}`))})]}):null,H?m.jsx("div",{className:"flex flex-wrap items-center justify-end gap-2 pt-1",children:_}):null]}):null]})}function x3(e){const t=(e.day()+6)%7;return e.subtract(t,"day")}function w3(e){const t=x3(e.startOf("month"));return Array.from({length:6},(n,r)=>Array.from({length:7},(i,o)=>t.add(r*7+o,"day")))}function Uu(e,t){return Xe(e).format("YYYY-MM-DD")===Xe(t).format("YYYY-MM-DD")}Xe.locale("es");const b3={present:"Presente",absent:"Ausente",pending:"Pendiente"},k3={present:"border border-emerald-500/40 bg-emerald-500/10 text-emerald-100",absent:"border border-rose-500/40 bg-rose-500/10 text-rose-100",pending:"border border-white/20 bg-white/10 text-white/70"},S3=["present","absent"],E3={present:"Han venido",absent:"Faltan"},_3={present:"border border-emerald-500/60 bg-emerald-500/15 text-emerald-100 shadow shadow-emerald-500/15",absent:"border border-rose-500/60 bg-rose-500/10 text-rose-100 shadow shadow-rose-500/10"},C3="group inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-400/30 sm:text-sm",j3="border-emerald-500/60 bg-emerald-500/15 text-emerald-100 shadow-sm shadow-emerald-500/20 hover:border-emerald-400 hover:bg-emerald-500/20",N3="border-white/15 bg-white/5 text-white/60 hover:border-white/40 hover:text-white",T3="flex h-6 w-6 items-center justify-center rounded-full border text-[12px] transition sm:h-7 sm:w-7",I3="border-emerald-400 bg-emerald-400/20 text-emerald-100 shadow shadow-emerald-500/25",P3="border-white/25 text-white/40 group-hover:border-white/50 group-hover:text-white/80",A3=[];function R3(e){return Xe(e).locale("es").format("dddd, D [de] MMMM")}function O3(e){return Xe(e).format("MMMM YYYY")}function G0({mode:e,onChange:t}){return m.jsxs("div",{className:"flex items-center gap-2 rounded-full border border-white/10 bg-white/5 p-1",children:[m.jsx("button",{type:"button",className:ze("rounded-full px-4 py-2 text-sm font-semibold transition",e==="view"?"bg-white text-slate-900":"text-white/70 hover:text-white"),onClick:()=>{e!=="view"&&t("view")},children:"Vista"}),m.jsx("button",{type:"button",className:ze("rounded-full px-4 py-2 text-sm font-semibold transition",e==="edit"?"bg-white text-slate-900":"text-white/70 hover:text-white"),onClick:()=>{e!=="edit"&&t("edit")},children:"Editar"})]})}function M3({session:e,objectives:t,works:n,isActive:r,onSelect:i,onDuplicate:o,onDelete:l}){const u=w.useMemo(()=>new Map(t.map(p=>[p.id,p])),[t]),c=w.useMemo(()=>new Map(n.map(p=>[p.id,p])),[n]),f=w.useMemo(()=>{const p=e.workItems[0];if(!p)return;const v=c.get(p.workId);if(v)return u.get(v.objectiveId)},[e.workItems,c,u]),h=e.workItems.reduce((p,v)=>{const y=c.get(v.workId);return p+(v.customDurationMinutes??(y==null?void 0:y.estimatedMinutes)??0)},0);return m.jsxs("button",{type:"button",onClick:i,className:ze("group relative flex flex-col gap-3 rounded-3xl border border-white/10 bg-white/5 p-5 text-left transition hover:border-sky-400/50 hover:shadow-lg hover:shadow-sky-500/10",r&&"ring-2 ring-sky-400/70"),children:[f?m.jsx("div",{className:"absolute inset-0 -z-[1] rounded-3xl opacity-20 blur-2xl transition group-hover:opacity-40",style:{backgroundColor:f.colorHex}}):null,m.jsxs("div",{className:"flex items-start justify-between gap-2",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-lg font-semibold text-white",children:e.title||"Sesin sin ttulo"}),m.jsxs("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:[e.workItems.length," trabajos  ",h," min"]})]}),m.jsx(Bi,{objective:f,size:"sm"})]}),m.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-white/60",children:[e.workItems.slice(0,3).map(p=>{const v=c.get(p.workId),y=((v==null?void 0:v.subtitle)??"").trim();return m.jsx("span",{className:"rounded-full border border-white/10 px-3 py-1",children:y?`${(v==null?void 0:v.name)??"Trabajo"}  ${y}`:(v==null?void 0:v.name)??"Trabajo"},p.id)}),e.workItems.length>3?m.jsxs("span",{className:"rounded-full border border-white/10 px-3 py-1",children:["+",e.workItems.length-3]}):null]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(Bi,{objective:f,size:"sm"}),m.jsxs("div",{className:"ml-auto flex gap-2",children:[m.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),o()},className:"btn-secondary px-3 py-1 text-xs",children:"Duplicar"}),m.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),l()},className:"inline-flex items-center justify-center rounded-full border border-rose-500/40 px-3 py-1 text-xs font-semibold text-rose-300 transition hover:border-rose-400 hover:text-rose-200",children:"Eliminar"})]})]})]})}function D3(){const e=Ie(z=>z.sessions),t=Ie(z=>z.plans),n=Ie(z=>z.works),r=Ie(z=>z.objectives),i=Ie(z=>z.assistants),o=Ie(z=>z.addSession),l=Ie(z=>z.duplicateSession),u=Ie(z=>z.deleteSession),c=Ie(z=>z.setAttendanceActualStatus),f=Ie(z=>z.toggleSessionWorkCompletion),[h,p]=Mo(),v=(h.get("plan")??"").trim(),y=h.get("session")??void 0,b=h.get("mode")==="edit"?"edit":"view",k=w.useMemo(()=>t.filter(z=>z.kind==="class"&&z.enabled),[t]),E=w.useMemo(()=>k.length===0?void 0:k.find(ne=>ne.id===v)??k[0],[k,v]),C=(E==null?void 0:E.id)??"classes";w.useEffect(()=>{if(!E||v===E.id)return;const z=new URLSearchParams(h);z.set("plan",E.id),p(z,{replace:!0})},[E,v,h,p]);const _=w.useMemo(()=>e.filter(z=>z.kind==="class"&&(z.planId??"classes")===C),[e,C]),[j,I]=w.useState(()=>b==="edit"),[O,A]=w.useState(new Set),$=w.useMemo(()=>[..._].sort((z,ne)=>Xe(z.date).valueOf()-Xe(ne.date).valueOf()),[_]),ie=Xe().format("YYYY-MM-DD"),U=w.useMemo(()=>$.find(z=>z.date>=ie)??$[$.length-1],[$,ie]),[R,D]=w.useState(()=>y&&_.some(z=>z.id===y)?y:U==null?void 0:U.id),Z=z=>{const ne=new URLSearchParams(h);z==="edit"?ne.set("mode","edit"):ne.delete("mode"),p(ne,{replace:!0})};w.useEffect(()=>{y&&_.some(z=>z.id===y)&&D(y)},[y,_]),w.useEffect(()=>{if(!(R&&_.some(z=>z.id===R))){if(y&&_.some(z=>z.id===y)){D(y);return}D(U==null?void 0:U.id)}},[R,y,_,U]);const H=w.useMemo(()=>R?$.find(z=>z.id===R)??U:U,[$,R,U]),K=w.useMemo(()=>{const z=(H==null?void 0:H.workItems)??[],ne=z.length,he=z.filter(Me=>Me.completed??!1).length,we=ne>0?Math.round(he/ne*100):0;return{total:ne,done:he,percent:we}},[H==null?void 0:H.workItems]),V=w.useMemo(()=>{const z=new Map;return H&&$.forEach(ne=>{ne.date>=H.date||ne.workItems.forEach(he=>{he.workId&&z.set(he.workId,ne.date)})}),z},[$,H]),X=z=>{const ne=new URLSearchParams(h);z?ne.set("session",z):ne.delete("session"),p(ne,{replace:!0})},W=z=>{D(z),X(z)},M=(H==null?void 0:H.date)??ie,[ee,T]=w.useState(M),[F,G]=w.useState(Xe(M).startOf("month").format("YYYY-MM-DD"));w.useEffect(()=>{H&&(T(H.date),G(Xe(H.date).startOf("month").format("YYYY-MM-DD")))},[H]);const P=w.useMemo(()=>{const z=new Map;return _.forEach(ne=>{const he=Xe(ne.date).format("YYYY-MM-DD"),we=z.get(he)??[];we.push(ne),z.set(he,we)}),z.forEach(ne=>ne.sort((he,we)=>(he.title??"").localeCompare(we.title??"","es"))),z},[_]),be=w.useMemo(()=>P.get(ee)??[],[P,ee]),ge=w.useMemo(()=>w3(Xe(F)),[F]),me=w.useMemo(()=>{const z=Xe(F);return _.filter(ne=>{const he=Xe(ne.date);return he.year()===z.year()&&he.month()===z.month()}).sort((ne,he)=>Xe(ne.date).valueOf()-Xe(he.date).valueOf())},[_,F]),ye=w.useMemo(()=>{const z=new Map;return me.forEach(ne=>{const he=Xe(ne.date).format("YYYY-MM-DD"),we=z.get(he)??[];we.push(ne),z.set(he,we)}),Array.from(z.entries()).sort((ne,he)=>Xe(ne[0]).valueOf()-Xe(he[0]).valueOf()).map(([ne,he])=>({date:ne,sessions:he.slice().sort((we,Me)=>(we.title??"").localeCompare(Me.title??"","es"))}))},[me]),Ce=z=>{T(z),G(Xe(z).startOf("month").format("YYYY-MM-DD"));const ne=P.get(z)??[];ne.length>0?W(ne[0].id):W(void 0)},Re=()=>{const z=o({date:ee,planId:C,title:"Nueva sesin",description:"",notes:""});W(z.id)},Pe=z=>{const ne=l(z,ee);ne&&W(ne.id)},te=z=>{u(z),R===z&&W(void 0)},Ne=z=>{const ne=Xe(F).add(z,"month");G(ne.format("YYYY-MM-DD")),T(he=>{const we=Xe(he);return we.month()===ne.month()&&we.year()===ne.year()?he:ne.startOf("month").format("YYYY-MM-DD")})},Be=w.useMemo(()=>new Map(r.map(z=>[z.id,z])),[r]),We=w.useMemo(()=>new Map(n.map(z=>[z.id,z])),[n]),rt=$.length===0,at=w.useMemo(()=>i.filter(z=>z.active).slice().sort((z,ne)=>z.name.localeCompare(ne.name,"es",{sensitivity:"base"})),[i]),Nt=(H==null?void 0:H.attendance)??A3,qt=w.useMemo(()=>{const z=new Map;Nt.forEach(we=>{z.set(we.assistantId,we)});let ne=0;at.forEach(we=>{var Me;((Me=z.get(we.id))==null?void 0:Me.actualStatus)==="present"&&(ne+=1)});const he={present:ne,absent:Math.max(at.length-ne,0)};return{map:z,summary:he}},[Nt,at]),J=qt.map,de=qt.summary,pe=w.useMemo(()=>wc(H==null?void 0:H.startTime,"18:30"),[H==null?void 0:H.startTime]),Ae=w.useMemo(()=>{if(!H)return new Map;let z=0;const ne=new Map;return H.workItems.forEach(he=>{const we=We.get(he.workId),Me=he.customDurationMinutes??(we==null?void 0:we.estimatedMinutes)??0,et=_p(pe+z);ne.set(he.id,{startLabel:et,duration:Me}),z+=Me}),ne},[H,We,pe]),Se=H?$.findIndex(z=>z.id===H.id):-1,ue=Se>0,Te=Se>=0&&Se<$.length-1,L=()=>{ue&&W($[Se-1].id)},q=()=>{Te&&W($[Se+1].id)},ce=z=>{const ne=z.target.value;if(!ne)return;Ce(ne);const he=P.get(ne);he&&he.length>0&&W(he[0].id)},le=z=>{A(ne=>{const he=new Set(ne);return he.has(z)?he.delete(z):he.add(z),he})},re=(z,ne)=>{H&&c(H.id,z,ne)},fe=j?m.jsxs("section",{className:"glass-panel space-y-6 p-6",children:[m.jsxs("header",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:"Calendario"}),m.jsx("h2",{className:"text-xl font-semibold text-white",children:O3(F)})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>Ne(-1),children:" Mes anterior"}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>Ne(1),children:"Mes siguiente "})]})]}),m.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.3fr_1.7fr]",children:[m.jsxs("section",{className:"space-y-4",children:[m.jsx("div",{className:"grid grid-cols-7 gap-2 text-center text-xs font-semibold uppercase tracking-wide text-white/50",children:["L","M","X","J","V","S","D"].map(z=>m.jsx("div",{className:"rounded-full bg-white/5 py-2",children:z},z))}),m.jsx("div",{className:"grid grid-cols-7 gap-2",children:ge.flat().map(z=>{const ne=z.format("YYYY-MM-DD"),he=P.get(ne)??[],we=z.month()===Xe(F).month(),Me=Uu(ne,ie),et=Uu(ne,ee);return m.jsxs("button",{type:"button",onClick:()=>Ce(ne),className:ze("relative flex h-20 flex-col items-center justify-between rounded-2xl border p-2 text-sm transition",et?"border-sky-400/60 bg-sky-500/20 text-white shadow-lg shadow-sky-500/20":"border-white/10 bg-white/5 text-white/70 hover:border-white/30",!we&&"text-white/30"),children:[m.jsx("span",{className:ze("flex h-8 w-8 items-center justify-center rounded-full text-base font-semibold",Me?"bg-white text-slate-900":""),children:z.format("D")}),m.jsxs("div",{className:"flex w-full flex-wrap justify-center gap-1",children:[he.slice(0,3).map(ve=>{const tt=ve.workItems[0],Ve=tt?n.find(qe=>qe.id===tt.workId):void 0,Qe=Ve?r.find(qe=>qe.id===Ve.objectiveId):void 0;return m.jsx("span",{className:"h-2 w-6 rounded-full",style:{backgroundColor:(Qe==null?void 0:Qe.colorHex)??"rgba(255,255,255,0.4)"}},ve.id)}),he.length>3?m.jsx("span",{className:"h-2 w-2 rounded-full border border-white/40"}):null]})]},ne)})})]}),m.jsxs("section",{className:"space-y-4",children:[m.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:"Sesiones en"}),m.jsx("h3",{className:"text-2xl font-semibold text-white",children:Xe(ee).format("dddd, D [de] MMMM")})]}),m.jsx("div",{className:"flex gap-3",children:m.jsx("button",{type:"button",onClick:Re,className:"btn-primary",children:"+ Nueva sesin"})})]}),m.jsx("div",{className:"space-y-3",children:be.length===0?m.jsx("div",{className:"rounded-3xl border border-dashed border-white/15 p-10 text-center text-white/50",children:"An no hay sesiones planificadas este da. Crea una con el botn superior."}):be.map(z=>m.jsx(M3,{session:z,objectives:r,works:n,isActive:z.id===(H==null?void 0:H.id),onSelect:()=>W(z.id),onDuplicate:()=>Pe(z.id),onDelete:()=>te(z.id)},z.id))}),ye.length>0?m.jsxs("details",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[m.jsxs("summary",{className:"cursor-pointer text-sm font-semibold text-white/80",children:["Ver sesiones del mes (",me.length,")"]}),m.jsx("div",{className:"custom-scrollbar mt-3 max-h-[22rem] space-y-3 overflow-y-auto pr-1",children:ye.map(({date:z,sessions:ne})=>{const he=ne.length===1?"1 sesin":`${ne.length} sesiones`;return m.jsxs("div",{role:"button",tabIndex:0,onClick:()=>Ce(z),onKeyDown:we=>{(we.key==="Enter"||we.key===" ")&&(we.preventDefault(),Ce(z))},className:ze("cursor-pointer rounded-2xl border border-white/10 bg-white/5 p-3 text-sm transition hover:border-white/40 hover:bg-white/10",Uu(z,ee)&&"border-sky-400/50 bg-sky-500/10 shadow shadow-sky-500/10"),children:[m.jsxs("p",{className:"flex flex-wrap items-center gap-2 text-xs uppercase tracking-[0.3em] text-white/40",children:[m.jsx("span",{children:Xe(z).format("ddd  D MMM")}),m.jsx("span",{className:"rounded-full border border-white/15 px-2 py-0.5 text-[9px] font-semibold tracking-[0.2em] text-white/50",children:he})]}),m.jsx("div",{className:"mt-3 space-y-2 text-xs",children:ne.map(we=>{const Me=(we.description??"").trim(),et=we.workItems.reduce((ve,tt)=>{const Ve=n.find(Qe=>Qe.id===tt.workId);return ve+(tt.customDurationMinutes??(Ve==null?void 0:Ve.estimatedMinutes)??0)},0);return m.jsxs("button",{type:"button",onClick:ve=>{ve.stopPropagation(),Ce(z),W(we.id)},className:ze("flex w-full flex-col gap-1 rounded-xl border border-white/10 bg-slate-950/60 px-3 py-2 text-left transition hover:border-white/30 hover:text-white",we.id===(H==null?void 0:H.id)&&Uu(z,ee)&&"border-sky-400/60 text-white"),children:[m.jsxs("div",{className:"flex w-full items-center justify-between gap-3",children:[m.jsx("span",{className:"truncate font-medium",children:we.title||"Sesin sin ttulo"}),m.jsxs("span",{className:"text-[11px] uppercase tracking-wide text-white/40",children:[we.workItems.length,"  ",et," min"]})]}),Me?m.jsx("p",{className:"text-[11px] leading-relaxed text-white/60",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:Me}):null]},we.id)})})]},z)})})]}):null]})]})]}):null;return m.jsxs("div",{className:"space-y-6",children:[rt||!H?m.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-end",children:[m.jsx(G0,{mode:b,onChange:Z}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>I(z=>!z),children:j?"Ocultar calendario":"Abrir calendario"})]}):null,fe,rt?m.jsxs("section",{className:"glass-panel flex flex-col items-center justify-center gap-5 p-4 text-center sm:gap-6 sm:p-10",children:[m.jsx("div",{className:"grid h-28 w-28 place-items-center rounded-full bg-gradient-to-br from-sky-500/30 to-purple-500/30 shadow-lg shadow-sky-500/20 sm:h-32 sm:w-32",children:m.jsx("svg",{width:"52",height:"52",viewBox:"0 0 24 24",fill:"none",className:"text-white/80 sm:h-14 sm:w-14",children:m.jsx("path",{d:"M6 3v2M18 3v2M3.5 10h17M5 7h14a2 2 0 0 1 2 2v9a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3V9a2 2 0 0 1 2-2Z",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})})}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("p",{className:"text-lg font-semibold text-white sm:text-2xl",children:"An no hay sesiones"}),m.jsx("p",{className:"mx-auto max-w-md text-sm text-white/60 sm:text-base",children:"Crea tu primera sesin en el calendario y empieza a construir tu plan reutilizable."})]}),m.jsx("button",{type:"button",className:"btn-primary",onClick:()=>I(!0),children:"Abrir calendario"})]}):H?m.jsxs("section",{className:"glass-panel space-y-4 p-3 sm:space-y-6 sm:p-6 lg:p-8",children:[m.jsxs("header",{className:"space-y-3 sm:flex sm:items-start sm:justify-between sm:gap-6 sm:space-y-0",children:[m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs("div",{className:"flex items-center gap-2 text-xs uppercase tracking-[0.3em] text-white/40",children:[m.jsx("span",{className:"sm:hidden",children:"Sesin"}),m.jsx("span",{className:"hidden sm:inline",children:"Fecha"})]}),m.jsx("h2",{className:"font-display text-2xl font-semibold text-white sm:text-3xl",children:R3(H.date)}),m.jsx("p",{className:"text-sm font-medium text-white/80 sm:text-lg",children:H.title})]}),m.jsxs("div",{className:"flex flex-col gap-2.5 rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-sm text-white/70 sm:w-auto",children:[m.jsxs("div",{className:"flex items-center justify-between gap-4",children:[m.jsx("p",{className:"font-semibold text-white",children:"Duracin estimada"}),m.jsxs("span",{className:"rounded-full bg-white/10 px-3 py-1 text-xs text-white/80",children:[H.workItems.map(z=>{const ne=We.get(z.workId);return z.customDurationMinutes??(ne==null?void 0:ne.estimatedMinutes)??0}).reduce((z,ne)=>z+ne,0)||0," ","min"]})]}),m.jsxs("div",{children:[m.jsxs("p",{className:"mt-1 text-xs text-white/60",children:["Progreso: ",K.done,"/",K.total,"  ",K.percent,"%"]}),m.jsx("div",{className:"mt-2 h-2 w-full overflow-hidden rounded-full border border-white/10 bg-slate-950/50",children:m.jsx("div",{className:"h-full rounded-full bg-white/25",style:{width:`${Math.min(Math.max(K.percent,0),100)}%`}})})]}),m.jsxs("div",{className:"flex flex-col gap-2 sm:items-end",children:[m.jsx("label",{className:"text-[11px] uppercase tracking-wide text-white/40 sm:text-xs",children:"Ir a fecha"}),m.jsx("input",{type:"date",className:"input-field w-full sm:w-auto",value:H.date??ie,onChange:ce})]})]})]}),m.jsxs("div",{className:"flex flex-col gap-2.5 sm:flex-row sm:flex-wrap sm:items-center sm:justify-between",children:[m.jsxs("div",{className:"flex flex-wrap gap-2",children:[m.jsx("button",{type:"button",onClick:L,disabled:!ue,className:"btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold disabled:opacity-40 sm:h-10 sm:text-sm",children:" Anterior"}),m.jsx("button",{type:"button",onClick:q,disabled:!Te,className:"btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold disabled:opacity-40 sm:h-10 sm:text-sm",children:"Siguiente "})]}),m.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[m.jsx(G0,{mode:b,onChange:Z}),m.jsx("button",{type:"button",className:"btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold sm:h-10 sm:text-sm",onClick:()=>I(z=>!z),children:j?"Ocultar calendario":"Abrir calendario"})]})]}),b==="edit"?m.jsx("div",{className:"rounded-2xl border border-white/10 bg-slate-950/40 p-3 sm:p-4",children:m.jsx(_m,{session:H,works:n,objectives:r,assistants:i,onDateChange:z=>{T(z),G(Xe(z).startOf("month").format("YYYY-MM-DD"))}})}):m.jsxs(m.Fragment,{children:[H.description&&m.jsx("div",{className:"rounded-2xl border border-white/5 bg-white/5 p-3 sm:p-4",children:m.jsx(Ao,{content:H.description})}),m.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[m.jsx("h3",{className:"text-sm uppercase tracking-[0.3em] text-white/40",children:"Trabajos"}),m.jsx("div",{className:"space-y-3 sm:space-y-4",children:H.workItems.map(z=>{const ne=We.get(z.workId),he=ne?Be.get(ne.objectiveId):void 0,we=O.has(z.id),Me=Ae.get(z.id),et=(Me==null?void 0:Me.startLabel)??_p(pe),ve=(Me==null?void 0:Me.duration)??z.customDurationMinutes??(ne==null?void 0:ne.estimatedMinutes)??0,tt=(z.focusLabel??"").trim(),Ve=z.customDescriptionMarkdown??(ne==null?void 0:ne.descriptionMarkdown)??"",Qe=((ne==null?void 0:ne.videoUrls)??[]).map($e=>$e.trim()).filter(Boolean),qe=((ne==null?void 0:ne.subtitle)??"").trim();return m.jsx(U1,{title:(ne==null?void 0:ne.name)??"Trabajo eliminado",titleExtra:tt,subtitle:qe,objective:he,checked:z.completed??!1,onCheckedChange:$e=>f(H.id,z.id,$e),orderNumber:(z.order??0)+1,startLabel:et,durationMinutes:ve,tags:ne==null?void 0:ne.tags,lastSeenLabel:V.get(z.workId)?Xe(V.get(z.workId)).format("D MMM YYYY"):void 0,descriptionMarkdown:Ve,videoUrls:Qe,isExpanded:we,onToggleExpanded:()=>le(z.id)},z.id)})})]})]}),b==="view"?i.length===0?m.jsxs("div",{className:"rounded-2xl border border-dashed border-white/15 bg-white/5 p-3 text-xs text-white/70 sm:text-sm sm:p-4",children:[m.jsx("p",{className:"font-semibold text-white",children:"Quines participan?"}),m.jsx("p",{className:"mt-1",children:"Crea tu lista de asistentes para poder registrar quin ha venido a clase en tiempo real."}),m.jsx($i,{to:"/assistants",className:"btn-secondary mt-3 h-8 rounded-2xl px-3 text-xs",children:"Gestionar asistentes"})]}):at.length===0?m.jsxs("div",{className:"rounded-2xl border border-dashed border-white/15 bg-white/5 p-3 text-xs text-white/70 sm:text-sm sm:p-4",children:[m.jsx("p",{className:"font-semibold text-white",children:"Todos los asistentes estn inactivos."}),m.jsx("p",{className:"mt-1",children:"Activa al menos uno desde la seccin de asistentes para poder marcar su asistencia."}),m.jsx($i,{to:"/assistants",className:"btn-secondary mt-3 h-8 rounded-2xl px-3 text-xs",children:"Ir a asistentes"})]}):m.jsxs("div",{className:"space-y-3 rounded-2xl border border-white/10 bg-slate-950/60 p-3 sm:space-y-4 sm:p-5",children:[m.jsxs("div",{className:"flex flex-col gap-2.5 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:"Asistencia en vivo"}),m.jsx("p",{className:"text-xs text-white/50 sm:text-sm",children:"Marca quin est presente en la sesin actual."})]}),m.jsx("div",{className:"flex flex-wrap gap-2",children:S3.map(z=>m.jsxs("span",{className:ze("inline-flex items-center gap-2 rounded-full px-2.5 py-0.5 text-[11px] font-semibold sm:px-3 sm:py-1 sm:text-xs",_3[z]),children:[de[z]," ",E3[z]]},z))})]}),m.jsx("div",{className:"space-y-2",children:at.map(z=>{const ne=J.get(z.id),he=(ne==null?void 0:ne.status)??"pending",we=(ne==null?void 0:ne.actualStatus)==="present",Me=()=>re(z.id,we?"absent":"present");return m.jsx("article",{className:"rounded-2xl border border-white/10 bg-white/5 p-2.5 sm:p-4",children:m.jsxs("div",{className:"flex flex-col gap-2.5 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-semibold text-white",children:z.name}),m.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2 text-[11px] text-white/50 sm:text-xs",children:[m.jsx("span",{className:"uppercase tracking-wide text-white/40",children:"Previsin"}),m.jsx("span",{className:ze("inline-flex items-center gap-2 rounded-full px-2 py-0.5 font-semibold",k3[he]),children:b3[he]}),m.jsx("span",{className:"hidden text-white/30 sm:inline",children:""}),m.jsx("span",{className:"uppercase tracking-wide text-white/40",children:"Asistencia"}),m.jsx("span",{className:ze("font-semibold",we?"text-emerald-200":"text-white/60"),children:we?"Presente":"No asisti"})]})]}),m.jsxs("div",{className:"flex flex-col items-end gap-1 text-right sm:flex-row sm:items-center sm:gap-3",children:[m.jsxs("button",{type:"button",onClick:Me,"aria-pressed":we,"aria-label":`${we?"Desmarcar asistencia de":"Marcar asistencia de"} ${z.name}`,title:we?"Desmarcar asistencia":"Marcar como presente",className:ze(C3,we?j3:N3),children:[m.jsx("span",{className:ze(T3,we?I3:P3),children:we?m.jsx("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 sm:h-4 sm:w-4","aria-hidden":"true",children:m.jsx("path",{d:"M4 8.5 6.5 11l5-6",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}):m.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-white/30 transition group-hover:bg-white/60"})}),m.jsx("span",{children:we?"Ha asistido":"Marcar asistencia"})]}),m.jsx("span",{className:ze("text-[10px] font-medium uppercase tracking-[0.25em] sm:text-[11px]",we?"text-emerald-200":"text-white/40"),children:we?"PRESENTE":"AUSENTE"})]})]})},z.id)})})]}):null]}):m.jsx("div",{className:"glass-panel p-10 text-center text-white/60",children:"Selecciona una sesin desde el calendario."})]})}Xe.locale("es");const W1="personal-exclude",L3={ok:"OK",doubt:"Dudosa",fail:"Fallo"},$3={ok:"border-emerald-500/50 bg-emerald-500/15 text-emerald-100 hover:border-emerald-400",doubt:"border-amber-400/40 bg-amber-500/10 text-amber-200 hover:border-amber-300",fail:"border-rose-500/50 bg-rose-500/10 text-rose-200 hover:border-rose-400"};function Gc(e){return Array.from(new Set((e??[]).map(t=>t.trim().toLowerCase()).filter(t=>t.length>0)))}function vo(e,t){const n=Gc(e.tags),r=e.nodeType??"work";return!(t.byWorkIds&&t.byWorkIds.length>0&&!t.byWorkIds.includes(e.id)||t.byNodeTypes&&t.byNodeTypes.length>0&&!t.byNodeTypes.includes(r)||t.byTags&&t.byTags.length>0&&!t.byTags.map(o=>o.trim().toLowerCase()).filter(Boolean).every(o=>n.includes(o)))}function H1(e,t){const n=e.nodeType??"work",r=t.targetsDays[n]??t.targetsDays.work??7,i=Gc(e.tags),o=(t.overrides??[]).reduce((u,c)=>{var p,v;const f=((v=(p=c.match)==null?void 0:p.tagsAny)==null?void 0:v.map(y=>y.trim().toLowerCase()).filter(Boolean))??[];return f.length===0?u:f.some(y=>i.includes(y))?u*(c.multiplier||1):u},1);return Math.max(1,Math.round(r*o))}function F3(e){return(e.nodeType??"").trim().toLowerCase()!=="style"}function go(e,t){const n=typeof e.estimatedMinutes=="number"?e.estimatedMinutes:0;if(Number.isFinite(n)&&n>0)return n;const r=(e.nodeType??"work").trim().toLowerCase()||"work",i=t.defaultMinutesByNodeType[r]??t.defaultMinutesByNodeType.work??3;return Math.max(.25,Number(i)||3)}function z3(e){return e.startOf("day").diff(e.startOf("year"),"day")+1}function B3(e,t){const n=Xe(t),r=Math.trunc(Number(e.number));if(!Number.isFinite(r))return!1;switch(e.kind){case"day_of_year":return z3(n)===r;case"day_of_month":return n.date()===r;case"day_of_week":return n.day()===r;default:return!1}}function V1(e){var h,p,v;const t=e.groups??[];if(t.length>0)return[...t].sort((y,b)=>(y.order??0)-(b.order??0));const n=Math.max(0,Number((h=e.template)==null?void 0:h.focusMinutes)||18),r=Math.max(0,Number((p=e.template)==null?void 0:p.rouletteMinutes)||10),i=Math.max(0,Number((v=e.template)==null?void 0:v.recapMinutes)||0),o=e.focusSelectors??[],l=e.rouletteSelectors??[],u=o.length>0?o:[{byNodeTypes:["segment","form"]}],c=l.length>0?l:[{byNodeTypes:["technique"]},{byTags:["roulette"]}],f=[{id:"formas",name:"Formas",enabled:!0,order:1,type:"work",limitMode:"minutes",minutesBudget:n,strategy:"overdue",hierarchyRule:"prefer_leaves",include:u,exclude:[]},{id:"tecnicas",name:"Tcnicas",enabled:!0,order:2,type:"work",limitMode:"minutes",minutesBudget:r,strategy:"weighted",hierarchyRule:"allow_all",include:c,exclude:[]}];return i>0&&f.push({id:"recap",name:"Recap",enabled:!0,order:99,type:"note",limitMode:"minutes",minutesBudget:i}),f}function U3({mode:e,onChange:t}){return m.jsxs("div",{className:"flex items-center gap-2 rounded-full border border-white/10 bg-white/5 p-1",children:[m.jsx("button",{type:"button",className:ze("rounded-full px-4 py-2 text-sm font-semibold transition",e==="view"?"bg-white text-slate-900":"text-white/70 hover:text-white"),onClick:()=>{e!=="view"&&t("view")},children:"Vista"}),m.jsx("button",{type:"button",className:ze("rounded-full px-4 py-2 text-sm font-semibold transition",e==="edit"?"bg-white text-slate-900":"text-white/70 hover:text-white"),onClick:()=>{e!=="edit"&&t("edit")},children:"Editar"})]})}function W3(e){let t=2166136261;for(let n=0;n<e.length;n+=1)t^=e.charCodeAt(n),t=Math.imul(t,16777619);return t>>>0}function H3(e){let t=e>>>0;return()=>{t=t+1831565813>>>0;let n=Math.imul(t^t>>>15,1|t);return n^=n+Math.imul(n^n>>>7,61|n),((n^n>>>14)>>>0)/4294967296}}function V3(e,t,n){const r=H3(W3(n));return e.map(i=>{const o=Math.max(1e-4,t(i)),l=Math.max(1e-9,r()),u=-Math.log(l)/o;return{item:i,score:u}}).sort((i,o)=>i.score-o.score).map(({item:i})=>i)}function q3(e){const t=new Map;return e.forEach(n=>{n.workItems.forEach(r=>{if(!((r.completed??!1)||typeof r.result<"u"))return;const o=t.get(r.workId);(!o||Xe(n.date).isAfter(o.date))&&t.set(r.workId,{date:n.date,result:r.result,effort:r.effort})})}),t}function K3(e){const{works:t,personalSessions:n,cadence:r,today:i}=e,o=q3(n);return t.filter(l=>F3(l)).filter(l=>(l.nodeType??"").trim().toLowerCase()!=="reading"||!l.schedule?!0:B3(l.schedule,i)).filter(l=>!Gc(l.tags).includes(W1)).map(l=>{const u=o.get(l.id),c=H1(l,r);if(!u)return{work:l,targetDays:c,overdueScore:1e4};const f=Math.max(Xe(i).diff(Xe(u.date),"day"),0),h=Math.max(f-c,0);return{work:l,targetDays:c,lastSeen:u.date,daysSince:f,overdueScore:h,lastResult:u.result}}).sort((l,u)=>{if(u.overdueScore!==l.overdueScore)return u.overdueScore-l.overdueScore;const c=l.daysSince??1e4,f=u.daysSince??1e4;return f!==c?f-c:l.work.name.localeCompare(u.work.name,"es",{sensitivity:"base"})})}function Y3(e){return e?Xe(e).format("D MMM YYYY"):"Nunca"}function G3(e){const{dueList:t,plan:n,today:r,childCountByWorkId:i}=e,o=n.limitMode==="count"||n.limitMode==="both",l=n.limitMode==="minutes"||n.limitMode==="both",u=o?Math.max(1,Math.round(n.maxItems||12)):Number.POSITIVE_INFINITY,c=l?Math.max(0,Number(n.minutesBudget)||0):Number.POSITIVE_INFINITY,f=new Set([].filter(U=>(U.completed??!1)||typeof U.result<"u").map(U=>U.workId)),h=t.filter(U=>!f.has(U.work.id)),p=Xe(r).day(),v=V1(n).filter(U=>U.enabled).filter(U=>{const R=U.daysOfWeek??[];return R.length===0||R.includes(p)}).sort((U,R)=>(U.order??0)-(R.order??0)),y=v.filter(U=>(U.type??"work")==="note").reduce((U,R)=>R.limitMode==="minutes"||R.limitMode==="both"?U+Math.max(0,Number(R.minutesBudget)||0):U,0),b=Number.isFinite(c)?Math.max(0,c-y):Number.POSITIVE_INFINITY,k=`kungfu-${r}`,E=U=>{const R=U.overdueScore>=1e4?1e3:Math.max(0,U.overdueScore+1);return U.lastResult==="fail"?R*1.6:U.lastResult==="doubt"?R*1.25:R},C=U=>go(U.work,n),_=U=>{const R=(U.nodeType??"work").trim().toLowerCase()||"work";return{segment:30,drill:22,form:20,work:10,application:0,technique:0,link:0,style:-100}[R]??5},j=U=>[...U].sort((R,D)=>{if(D.overdueScore!==R.overdueScore)return D.overdueScore-R.overdueScore;const Z=R.daysSince??1e4,H=D.daysSince??1e4;if(H!==Z)return H-Z;const K=_(D.work)-_(R.work);return K!==0?K:R.work.name.localeCompare(D.work.name,"es",{sensitivity:"base"})}),I=new Set,O=[];let A=0,$=0;for(const U of v){if((U.type??"work")==="note"){O.push({group:U,items:[],plannedMinutes:0});continue}const D=U.include??[],Z=U.exclude??[];let H=h.filter(me=>I.has(me.work.id)||!(D.length===0?!0:D.some(Re=>vo(me.work,Re)))?!1:!Z.some(Re=>vo(me.work,Re)));if((U.hierarchyRule??"allow_all")==="prefer_leaves"){const me=new Set(H.map(ye=>ye.work.parentWorkId).filter(Boolean));H=H.filter(ye=>me.has(ye.work.id)?(i.get(ye.work.id)??0)===0:!0)}const X=(U.strategy??"overdue")==="weighted"?V3(H,E,`${k}-${U.id}`):j(H),W=U.limitMode??"minutes",M=W==="count"||W==="both",ee=W==="minutes"||W==="both",T=Number(U.maxItems),F=M&&Number.isFinite(T)&&T>0?Math.round(T):Number.POSITIVE_INFINITY,G=Number(U.minutesBudget),P=ee&&Number.isFinite(G)?Math.max(0,G):Number.POSITIVE_INFINITY,be=[];let ge=0;for(const me of X){if($>=u||be.length>=F)break;const ye=C(me);if(!(ge+ye>P)&&!(A+ye>b)&&(be.push(me),ge+=ye,A+=ye,$+=1,I.add(me.work.id),l&&A>=b))break}if(O.push({group:U,items:be,plannedMinutes:Math.round(ge*10)/10}),$>=u||l&&A>=b)break}const ie=Math.round((A+y)*10)/10;return{groups:O,plannedMinutes:{work:Math.round(A*10)/10,reserved:Math.round(y*10)/10,total:ie},totalItems:$}}function J3(){const e=Ie(L=>L.works),t=Ie(L=>L.sessions),n=Ie(L=>L.plans),r=Ie(L=>L.objectives),i=Ie(L=>L.assistants),o=Ie(L=>L.kungfuCadence),l=Ie(L=>L.kungfuTodayPlan);js();const u=Ie(L=>L.addSession),c=Ie(L=>L.addWorkToSession),f=Ie(L=>L.updateSessionWorkDetails),h=Ie(L=>L.updateSessionWorkItems),p=Ie(L=>L.updateSession),[v,y]=Mo(),b=(v.get("plan")??"").trim(),k=Xe().format("YYYY-MM-DD"),E=(v.get("date")??"").trim(),C=Xe(E,"YYYY-MM-DD",!0).isValid()?E:k,_=v.get("mode")==="edit"?"edit":"view",j=w.useMemo(()=>n.filter(L=>L.kind==="personal"&&L.enabled),[n]),I=w.useMemo(()=>j.length===0?void 0:j.find(q=>q.id===b)??j[0],[j,b]),O=(I==null?void 0:I.id)??"personal-kungfu";w.useEffect(()=>{if(!I||b===I.id)return;const L=new URLSearchParams(v);L.set("plan",I.id),y(L,{replace:!0})},[I,b,v,y]),w.useEffect(()=>{if(!!Xe(E,"YYYY-MM-DD",!0).isValid())return;const q=new URLSearchParams(v);q.set("date",C),y(q,{replace:!0})},[C,E,v,y]);const A=(I==null?void 0:I.cadence)??o,$=(I==null?void 0:I.todayPlan)??l,ie=w.useMemo(()=>t.filter(L=>L.kind==="personal"&&(L.planId??"personal-kungfu")===O),[t,O]),U=w.useMemo(()=>ie.find(L=>L.date===C),[ie,C]),R=w.useMemo(()=>K3({works:e,personalSessions:ie,cadence:A,today:C}),[e,ie,A,C]),D=w.useMemo(()=>{const L=new Map;return e.forEach(q=>{const ce=q.parentWorkId??"";ce&&L.set(ce,(L.get(ce)??0)+1)}),L},[e]),Z=w.useMemo(()=>new Map(e.map(L=>[L.id,L])),[e]),H=w.useMemo(()=>new Map(r.map(L=>[L.id,L])),[r]),[K,V]=w.useState(null),[X,W]=w.useState({}),[M,ee]=w.useState(new Set),T=w.useCallback(L=>{const q=(L??C).trim()||C,ce=ie.find(le=>le.date===q);return ce||u({date:q,kind:"personal",planId:O,title:(I==null?void 0:I.name)??"Entrenamiento personal",description:"",notes:""})},[C,u,ie,I==null?void 0:I.name,O]),F=w.useCallback(L=>{const q=(L??[]).slice().sort((re,fe)=>(re.order??0)-(fe.order??0)),ce=new Map,le=[];return q.forEach(re=>{const fe=re.workId;if(!fe)return;const z=ce.get(fe);if(!z){ce.set(fe,{...re}),le.push(fe);return}const ne={...z,customDescriptionMarkdown:z.customDescriptionMarkdown??re.customDescriptionMarkdown,customDurationMinutes:z.customDurationMinutes??re.customDurationMinutes,notes:z.notes??re.notes,focusLabel:z.focusLabel??re.focusLabel,completed:!!(z.completed??!1)||!!(re.completed??!1),result:z.result??re.result,effort:z.effort??re.effort};ce.set(fe,ne)}),le.map((re,fe)=>({...ce.get(re),order:fe}))},[]);w.useEffect(()=>{if(!U)return;const L=U.workItems??[],q=L.reduce((re,fe)=>{const z=fe.workId;return z&&re.set(z,(re.get(z)??0)+1),re},new Map);if(!Array.from(q.values()).some(re=>re>1))return;const le=F(L);le.length!==L.length&&h(U.id,le)},[U,h,F]);const G=w.useMemo(()=>{const L=Xe(C).day();return V1($).filter(q=>q.enabled).filter(q=>{const ce=q.daysOfWeek??[];return ce.length===0||ce.includes(L)}).sort((q,ce)=>(q.order??0)-(ce.order??0))},[$,C]);w.useEffect(()=>{var le;const L={},q=(U==null?void 0:U.notesByGroupId)??void 0;q&&Object.entries(q).forEach(([re,fe])=>{const z=(re??"").trim();z&&(L[z]=String(fe??""))});const ce=((U==null?void 0:U.notes)??"").toString();if(ce.trim().length>0){const re=((le=G.find(fe=>(fe.type??"work")==="note"))==null?void 0:le.id)??"note";L[re]||(L[re]=ce)}W(L)},[U==null?void 0:U.notes,U==null?void 0:U.notesByGroupId,G]);const P=w.useMemo(()=>{const L=new Map;return G.filter(q=>(q.type??"work")!=="note").forEach((q,ce)=>{L.set(q.name,ce)}),L},[G]),be=w.useCallback(L=>{const q=G.filter(ce=>(ce.type??"work")!=="note");for(const ce of q){const le=ce.include??[],re=ce.exclude??[];if(!(!(le.length===0||le.some(ne=>vo(L,ne)))||re.some(ne=>vo(L,ne))))return ce.name}return"Hoy"},[G]),ge=w.useMemo(()=>new Set(G.filter(L=>(L.type??"work")!=="note").map(L=>L.name).filter(Boolean)),[G]),me=w.useCallback((L,q)=>{const ce=(L.focusLabel??"").trim();return ce&&ge.has(ce)?ce:be(q)},[ge,be]),ye=w.useCallback(L=>{const q=Ie.getState().sessions.find(le=>le.id===L);if(!q)return null;const ce=(q.workItems??[]).map(le=>{const re=Z.get(le.workId);if(!re)return le;const fe=me(le,re);return fe===le.focusLabel?le:{...le,focusLabel:fe}});return ce.sort((le,re)=>{const fe=le.focusLabel??"Hoy",z=re.focusLabel??"Hoy",ne=P.get(fe)??999,he=P.get(z)??999;return ne!==he?ne-he:(le.order??0)-(re.order??0)}),ce},[P,Z,me]),[Ce,Re]=w.useState(!1),Pe=w.useCallback(L=>{if(!Ce&&R.length!==0){Re(!0);try{const q=U??T(),ce=q.workItems??[],le=new Set(ce.map(ve=>ve.workId));if(($.limitMode==="count"||$.limitMode==="both")&&le.size>=Math.max(1,Math.round($.maxItems||12))){L!=null&&L.includeDiagnostics&&(V({type:"success",text:"Plan ya est lleno por cantidad. Sube el mximo de tems en Ajustes."}),window.setTimeout(()=>V(null),2500));return}const fe=new Map;ce.forEach(ve=>{const tt=Z.get(ve.workId);if(!tt)return;const Ve=me(ve,tt),Qe=G.find(st=>st.name===Ve),qe=(Qe==null?void 0:Qe.id)??Ve,$e=fe.get(qe)??{minutes:0,items:0};fe.set(qe,{minutes:$e.minutes+go(tt,$),items:$e.items+1})});const z=ce.reduce((ve,tt)=>{const Ve=Z.get(tt.workId);return Ve?ve+go(Ve,$):ve},0),ne={...$,maxItems:Math.max(0,Math.round(($.maxItems??0)-le.size)),minutesBudget:Math.max(0,Number($.minutesBudget??0)-z),groups:G.map(ve=>{const tt=fe.get(ve.id),Ve={...ve};return tt&&(typeof ve.minutesBudget=="number"&&Number.isFinite(ve.minutesBudget)&&(Ve.minutesBudget=Math.max(0,ve.minutesBudget-tt.minutes)),typeof ve.maxItems=="number"&&Number.isFinite(ve.maxItems)&&(Ve.maxItems=Math.max(0,Math.round(ve.maxItems-tt.items)))),Ve})},he=R.filter(ve=>!le.has(ve.work.id)),we=G3({dueList:he,todaySession:void 0,plan:ne,today:C,childCountByWorkId:D});let Me=0;we.groups.filter(ve=>(ve.group.type??"work")!=="note").forEach(ve=>{ve.items.forEach(tt=>{c(q.id,{workId:tt.work.id,focusLabel:ve.group.name,customDurationMinutes:go(tt.work,$)}),Me+=1})});const et=ye(q.id);if(et&&h(q.id,F(et)),L!=null&&L.includeDiagnostics)if(Me>0)V({type:"success",text:`Plan actualizado: +${Me} tem${Me===1?"":"s"}.`}),window.setTimeout(()=>V(null),2e3);else{const ve=G.filter(tt=>(tt.type??"work")!=="note").map(tt=>{const Ve=tt.include??[],Qe=tt.exclude??[],qe=he.filter(vt=>(Ve.length===0?!0:Ve.some($n=>vo(vt.work,$n)))?!Qe.some($n=>vo(vt.work,$n)):!1),$e=tt.limitMode==="minutes"||tt.limitMode==="both"?Math.max(0,Number(tt.minutesBudget)||0):void 0,st=tt.limitMode==="count"||tt.limitMode==="both"?Math.max(0,Math.round(Number(tt.maxItems)||0)):void 0;return[`${tt.name}: ${qe.length} match`,typeof $e=="number"?`${$e}m`:null,typeof st=="number"?`${st} items`:null].filter(Boolean).join("  ")}).slice(0,3).join(" | ");V({type:"success",text:ve?`No hay nuevos tems para aadir. ${ve}`:"No hay nuevos tems para aadir con los lmites actuales."}),window.setTimeout(()=>V(null),4e3)}}finally{Re(!1)}}},[Ce,R,U,T,$,Z,G,C,D,c,h,F,ye,me]),te=w.useCallback(()=>{if(Ce||!window.confirm("Recrear sesin volver a planificar el da seleccionado. Mantendr los tems ya registrados (OK/Dudosa/Fallo) y las notas, pero quitar el resto. Continuar?"))return;const q=U??T(),ce=(q.workItems??[]).filter(le=>(le.completed??!1)||typeof le.result<"u").map(le=>{const re=Z.get(le.workId);return re?{...le,focusLabel:me(le,re)}:le}).sort((le,re)=>(le.order??0)-(re.order??0)).map((le,re)=>({...le,order:re}));h(q.id,F(ce)),window.setTimeout(()=>Pe({reason:"recreate",includeDiagnostics:!0}),0)},[F,T,Pe,Ce,me,U,h,Z]);w.useEffect(()=>{R.length===0||((U??T()).workItems??[]).some(le=>!!le.focusLabel)||Pe({reason:"initial-seed"})},[R,$,C,D,h,Z,G,P,be,U,T,Pe]);const Ne=U?U.workItems.filter(L=>(L.completed??!1)||typeof L.result<"u").length:0,Be=w.useMemo(()=>G.filter(L=>(L.type??"work")==="note"),[G]),We=w.useMemo(()=>{const L=(U==null?void 0:U.workItems)??[],q=L.length,ce=L.filter(he=>(he.completed??!1)||typeof he.result<"u").length,le=Be.length,re=Be.filter(he=>(X[he.id]??"").trim().length>0).length,fe=q+le,z=ce+re,ne=fe>0?Math.round(z/fe*100):0;return{total:fe,done:z,percent:ne,totalWorks:q,doneWorks:ce,totalNotes:le,doneNotes:re}},[X,Be,U==null?void 0:U.workItems]),rt=w.useMemo(()=>{const L=new Map,q=new Map;return((U==null?void 0:U.workItems)??[]).slice().sort((le,re)=>(le.order??0)-(re.order??0)).forEach(le=>{const re=R.find(ve=>ve.work.id===le.workId),fe=Z.get(le.workId);if(!fe)return;const z=(le.completed??!1)||typeof le.result<"u",ne={work:fe,targetDays:H1(fe,A),overdueScore:0,lastSeen:re==null?void 0:re.lastSeen,daysSince:re==null?void 0:re.daysSince,lastResult:re==null?void 0:re.lastResult},he=re??ne,we=me(le,fe),Me=L.get(we)??[];Me.push(he),L.set(we,Me);const et=q.get(we)??{total:0,done:0};et.total+=1,z&&(et.done+=1),q.set(we,et)}),Array.from(L.entries()).map(([le,re])=>{const fe=q.get(le)??{total:re.length,done:0};return{label:le,entries:re,total:fe.total,done:fe.done}}).sort((le,re)=>{const fe=P.get(le.label)??999,z=P.get(re.label)??999;return fe!==z?fe-z:le.label.localeCompare(re.label,"es",{sensitivity:"base"})})},[U==null?void 0:U.workItems,R,Z,A,P,me]),at=w.useMemo(()=>{const L=new Map(rt.map(le=>[le.label,le])),q=new Set,ce=[];return G.forEach(le=>{if((le.type??"work")==="note"){ce.push({kind:"note",group:le});return}const re=L.get(le.name);re&&(q.add(re.label),ce.push({kind:"work",...re}))}),rt.forEach(le=>{q.has(le.label)||ce.push({kind:"work",...le})}),ce},[G,rt]),Nt=L=>{const q=L.work,le=Gc(q.tags).filter(qe=>qe!==W1),re=M.has(q.id),fe=U==null?void 0:U.workItems.find(qe=>qe.workId===q.id),z=fe==null?void 0:fe.result,ne=!!((fe==null?void 0:fe.completed)??!1)||typeof(fe==null?void 0:fe.result)<"u",he=(q.videoUrls??[]).map(qe=>qe.trim()).filter(Boolean),we=H.get(q.objectiveId),Me=(fe==null?void 0:fe.customDurationMinutes)??q.estimatedMinutes??go(q,$),et=((fe==null?void 0:fe.focusLabel)??"").trim(),ve=et&&ge.has(et)?"":et,tt=z?{label:L3[z],className:$3[z]}:void 0,Ve=()=>ee(qe=>{const $e=new Set(qe);return $e.has(q.id)?$e.delete(q.id):$e.add(q.id),$e}),Qe=qe=>{const $e=T(),st=$e.workItems.find(ut=>ut.workId===q.id);if(!st){const ut=c($e.id,{workId:q.id,focusLabel:me({focusLabel:void 0},q),customDurationMinutes:Me});if(!ut)return;f($e.id,ut.id,{completed:qe,result:qe?"ok":void 0});return}qe?f($e.id,st.id,{completed:!0,result:st.result??"ok"}):f($e.id,st.id,{completed:!1,result:void 0})};return m.jsx(U1,{title:q.name,titleExtra:ve,subtitle:q.subtitle,objective:we,checked:ne,onCheckedChange:Qe,orderNumber:((fe==null?void 0:fe.order)??0)+1,durationMinutes:Me,tags:le,statusPill:tt,lastSeenLabel:Y3(L.lastSeen),descriptionMarkdown:q.descriptionMarkdown,notesMarkdown:q.notes,videoUrls:he,isExpanded:re,onToggleExpanded:Ve,detailsActions:m.jsx($i,{to:`/catalog?workId=${encodeURIComponent(q.id)}`,className:"btn-secondary",children:"Editar en catlogo"})},q.id)},qt=L=>{var ne;const q=T(),ce=(L??"").trim();if(!ce)return;const le=X[ce]??"",re=le.trim().length===0,fe={...q.notesByGroupId??{}};re?delete fe[ce]:fe[ce]=le;const z=((ne=G.find(he=>(he.type??"work")==="note"))==null?void 0:ne.id)??ce;p(q.id,{notesByGroupId:Object.keys(fe).length>0?fe:void 0,notes:fe[z]??""})};w.useEffect(()=>{U||T(C)},[C,U,T]);const J=w.useMemo(()=>{const L=(U==null?void 0:U.workItems)??[];return Math.round(L.reduce((q,ce)=>{const le=Z.get(ce.workId);if(!le)return q;const re=ce.customDurationMinutes??le.estimatedMinutes??go(le,$);return q+re},0))},[U==null?void 0:U.workItems,Z,$]),de=L=>{const q=new URLSearchParams(v);L==="edit"?q.set("mode","edit"):q.delete("mode"),y(q,{replace:!0})},pe=L=>{const q=new URLSearchParams(v);q.set("date",L),q.delete("session"),y(q,{replace:!0})},Ae=L=>{const q=L.target.value;q&&pe(Xe(q).format("YYYY-MM-DD"))},Se=()=>pe(Xe(C).subtract(1,"day").format("YYYY-MM-DD")),ue=()=>pe(Xe(C).add(1,"day").format("YYYY-MM-DD")),Te=()=>pe(k);return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("header",{className:"glass-panel space-y-4 p-3 sm:space-y-6 sm:p-6 lg:p-8",children:[m.jsxs("div",{className:"space-y-3 sm:flex sm:items-start sm:justify-between sm:gap-6 sm:space-y-0",children:[m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs("div",{className:"flex items-center gap-2 text-xs uppercase tracking-[0.3em] text-white/40",children:[m.jsx("span",{className:"sm:hidden",children:"Sesin"}),m.jsx("span",{className:"hidden sm:inline",children:"Fecha"})]}),m.jsx("h1",{className:"font-display text-2xl font-semibold text-white sm:text-3xl",children:Xe(C).format("dddd, D [de] MMMM")}),m.jsx("p",{className:"text-sm font-medium text-white/80 sm:text-lg",children:(U==null?void 0:U.title)??(I==null?void 0:I.name)??"Entrenamiento personal"})]}),m.jsxs("div",{className:"flex flex-col gap-2.5 rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-sm text-white/70 sm:w-auto",children:[m.jsxs("div",{className:"flex items-center justify-between gap-4",children:[m.jsx("p",{className:"font-semibold text-white",children:"Duracin estimada"}),m.jsxs("span",{className:"rounded-full bg-white/10 px-3 py-1 text-xs text-white/80",children:[J," min"]})]}),m.jsxs("div",{children:[m.jsxs("p",{className:"mt-1 text-xs text-white/50",children:[Ne," ",Ne===1?"tem registrado":"tems registrados"]}),m.jsxs("p",{className:"mt-2 text-xs text-white/60",children:["Progreso: ",We.done,"/",We.total,"  ",We.percent,"%"]}),m.jsx("div",{className:"mt-2 h-2 w-full overflow-hidden rounded-full border border-white/10 bg-slate-950/50",children:m.jsx("div",{className:"h-full rounded-full bg-white/25",style:{width:`${Math.min(Math.max(We.percent,0),100)}%`}})})]}),m.jsxs("div",{className:"flex flex-col gap-2 sm:items-end",children:[m.jsx("label",{className:"text-[11px] uppercase tracking-wide text-white/40 sm:text-xs",children:"Ir a fecha"}),m.jsx("input",{type:"date",className:"input-field w-full sm:w-auto",value:C,onChange:Ae})]})]})]}),m.jsxs("div",{className:"flex flex-col gap-2.5 sm:flex-row sm:flex-wrap sm:items-center sm:justify-between",children:[m.jsxs("div",{className:"flex flex-wrap gap-2",children:[m.jsx("button",{type:"button",onClick:Se,className:"btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold sm:h-10 sm:text-sm",children:" Anterior"}),m.jsx("button",{type:"button",onClick:Te,disabled:C===k,className:"btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold disabled:opacity-40 sm:h-10 sm:text-sm",children:"Hoy"}),m.jsx("button",{type:"button",onClick:ue,className:"btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold sm:h-10 sm:text-sm",children:"Siguiente "})]}),m.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[m.jsx(U3,{mode:_,onChange:de}),m.jsxs(sr,{as:"div",className:"relative",children:[m.jsx(sr.Button,{className:"btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold sm:h-10 sm:text-sm",children:"Plan "}),m.jsx(Db,{as:w.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:m.jsxs(sr.Items,{className:"absolute right-0 z-20 mt-2 w-60 rounded-2xl border border-white/10 bg-slate-950/95 p-1 shadow-xl shadow-black/40 focus:outline-none",children:[m.jsx(sr.Item,{children:({active:L})=>m.jsx("button",{type:"button",className:ze("w-full rounded-xl px-3 py-2 text-left text-sm font-medium transition",L?"bg-white/10 text-white":"text-white/80",(Ce||R.length===0)&&"opacity-50"),onClick:()=>Pe({reason:"manual-refresh",includeDiagnostics:!0}),disabled:Ce||R.length===0,title:"Aade tems si has cambiado la configuracin de grupos o lmites",children:Ce?"Actualizando":"Actualizar plan"})}),m.jsx(sr.Item,{children:({active:L})=>m.jsx("button",{type:"button",className:ze("w-full rounded-xl px-3 py-2 text-left text-sm font-medium transition",L?"bg-white/10 text-white":"text-white/80",Ce&&"opacity-50"),onClick:te,disabled:Ce,title:"Rehace la planificacin del da manteniendo lo registrado",children:"Recrear sesin"})})]})})]})]})]}),K&&m.jsx("div",{className:ze("mt-4 rounded-2xl border px-4 py-3 text-sm",K.type==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-rose-500/40 bg-rose-500/10 text-rose-200"),children:K.text})]}),R.length===0?m.jsxs("div",{className:"glass-panel p-10 text-center text-white/50",children:["No hay ningn trabajo incluido en tu programa activo. Aade la tag ",m.jsx("span",{className:"font-semibold text-white",children:"kungfu"})," a los trabajos que quieras entrenar."]}):_==="edit"?m.jsxs("section",{className:"space-y-4",children:[U?m.jsx("div",{className:"glass-panel p-3 sm:p-4",children:m.jsx(_m,{session:U,works:e,objectives:r,assistants:i})}):m.jsx("div",{className:"glass-panel p-10 text-center text-white/60",children:"Cargando sesin"}),at.filter(L=>L.kind==="note").map(L=>{const q=L.group.id,ce=X[q]??"",le=ce.trim().length>0;return m.jsxs("div",{className:"glass-panel space-y-3 p-6",children:[m.jsx("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between",children:m.jsxs("div",{children:[m.jsxs("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:[L.group.name," (",Math.max(0,Number(L.group.minutesBudget)||0)," min)"]}),m.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[m.jsx("span",{className:ze("rounded-full border px-3 py-1 text-xs font-semibold",le?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-white/15 bg-white/5 text-white/60"),children:le?"OK":"Pendiente"}),m.jsx("p",{className:"text-sm text-white/60",children:"Notas de la sesin  se guarda al salir del campo."})]})]})}),m.jsx("textarea",{className:"input-field min-h-[120px] w-full resize-y",value:ce,onChange:re=>W(fe=>({...fe,[q]:re.target.value})),onBlur:()=>qt(q),placeholder:"Escribe aqu"})]},L.group.id)})]}):m.jsx("section",{className:"space-y-4",children:m.jsxs("div",{className:"space-y-3",children:[rt.length===0?m.jsxs("div",{className:"glass-panel p-10 text-center text-white/50",children:["No hay tems planificados para hoy. Revisa ",m.jsx("span",{className:"font-semibold text-white",children:"Ajustes"})," o marca ms trabajos como entrenables."]}):null,at.map(L=>{if(L.kind==="note"){const re=L.group.id,fe=X[re]??"",z=fe.trim().length>0;return m.jsxs("div",{className:"glass-panel space-y-3 p-6",children:[m.jsx("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between",children:m.jsxs("div",{children:[m.jsxs("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:[L.group.name," (",Math.max(0,Number(L.group.minutesBudget)||0)," min)"]}),m.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[m.jsx("span",{className:ze("rounded-full border px-3 py-1 text-xs font-semibold",z?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-white/15 bg-white/5 text-white/60"),children:z?"OK":"Pendiente"}),m.jsx("p",{className:"text-sm text-white/60",children:"Notas de la sesin  se guarda al salir del campo."})]})]})}),m.jsx("textarea",{className:"input-field min-h-[120px] w-full resize-y",value:fe,onChange:ne=>W(he=>({...he,[re]:ne.target.value})),onBlur:()=>qt(re),placeholder:"Escribe aqu"})]},L.group.id)}const q=Math.max(0,L.total),ce=Math.min(Math.max(0,L.done),q),le=q>0?Math.round(ce/q*100):0;return m.jsxs("section",{className:"glass-panel space-y-4 p-3 sm:space-y-5 sm:p-6",children:[m.jsx("header",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:m.jsxs("div",{children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:L.label}),m.jsxs("p",{className:"mt-1 text-sm text-white/60",children:[ce,"/",q," tem",q===1?"":"s","  ",le,"% completado"]}),m.jsx("div",{className:"mt-2 h-2 w-full overflow-hidden rounded-full border border-white/10 bg-slate-950/50",children:m.jsx("div",{className:"h-full rounded-full bg-white/25",style:{width:`${Math.min(Math.max(le,0),100)}%`}})})]})}),m.jsx("div",{className:"space-y-3 sm:space-y-4",children:L.entries.map(Nt)})]},L.label)})]})})]})}function Q3(){const e=Ie(f=>f.plans),[t,n]=Mo(),r=(t.get("plan")??"").trim(),i=w.useMemo(()=>e.filter(f=>f.enabled),[e]),o=w.useMemo(()=>{const f=[...i];return f.sort((h,p)=>{const v=h.kind===p.kind?0:h.kind==="class"?-1:1;return v!==0?v:h.name.localeCompare(p.name,"es",{sensitivity:"base"})}),f},[i]),l=w.useMemo(()=>o.length===0?void 0:o.find(h=>h.id===r)??o[0],[o,r]),u=(l==null?void 0:l.id)??"classes";w.useEffect(()=>{if(!l||r===l.id)return;const f=new URLSearchParams(t);f.set("plan",l.id),n(f,{replace:!0})},[l,r,t,n]);const c=f=>{const h=new URLSearchParams(t);h.set("plan",f),h.delete("session"),n(h,{replace:!0})};return l?m.jsxs("div",{className:"space-y-6",children:[m.jsx("header",{className:"glass-panel p-6 sm:p-10",children:m.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold",children:"Sesiones"}),m.jsx("p",{className:"text-white/60",children:"Vista unificada por planes."})]}),m.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(f=>m.jsx("button",{type:"button",onClick:()=>c(f.id),className:ze("rounded-full border px-4 py-2 text-sm font-semibold transition",f.id===u?"border-sky-400/70 bg-sky-500/10 text-white":"border-white/10 bg-white/5 text-white/70 hover:border-white/30 hover:text-white"),title:f.kind==="class"?"Plan de clases":"Plan personal",children:f.name},f.id))})]})}),l.kind==="class"?m.jsx(D3,{}):m.jsx(J3,{})]}):m.jsx("div",{className:"glass-panel p-10 text-center text-white/60",children:"No hay planes activos. Ve a Ajustes y crea/activa uno."})}function X3(){return m.jsx(Q3,{})}function Z3(){const[e]=Mo(),t=new URLSearchParams(e);return t.set("mode","edit"),m.jsx(Ja,{to:{pathname:"/",search:`?${t.toString()}`},replace:!0})}function _h(e){return Array.from(new Set(e))}function Ka({options:e,value:t,onChange:n,disabled:r=!1,placeholder:i="Search",allowCreate:o=!1,onCreate:l,maxSelected:u}){const[c,f]=w.useState(""),h=w.useMemo(()=>_h(t.map(C=>C.trim()).filter(Boolean)),[t]),p=w.useMemo(()=>new Set(h),[h]),v=w.useMemo(()=>new Map(e.map(C=>[C.value,C])),[e]),y=w.useMemo(()=>{const C=c.trim().toLowerCase();return C?e.filter(_=>(_.label??_.value).toLowerCase().includes(C)||_.value.toLowerCase().includes(C)):e},[e,c]),b=typeof u=="number"?h.length<u:!0,k=c.trim(),E=o&&!!k&&typeof l=="function"&&!e.some(C=>C.value.toLowerCase()===k.toLowerCase())&&!e.some(C=>(C.label??"").toLowerCase()===k.toLowerCase());return m.jsxs("div",{className:ze("space-y-2",r&&"opacity-60"),children:[h.length>0?m.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[h.map(C=>{var j;const _=((j=v.get(C))==null?void 0:j.label)??C;return m.jsxs("button",{type:"button",disabled:r,className:"inline-flex items-center gap-2 rounded-full border border-sky-500/30 bg-sky-500/10 px-3 py-1 text-xs font-semibold text-sky-100 transition hover:border-sky-400/50",onClick:()=>n(h.filter(I=>I!==C)),title:"Remove",children:[_,m.jsx("span",{className:"text-sky-200/80",children:""})]},C)}),m.jsx("button",{type:"button",disabled:r,className:"rounded-full border border-white/15 bg-white/5 px-3 py-1 text-xs font-semibold text-white/70 transition hover:border-white/30 hover:text-white",onClick:()=>n([]),children:"Clear"})]}):null,m.jsx("input",{type:"text",className:"input-field",value:c,disabled:r,placeholder:i,onChange:C=>f(C.target.value)}),m.jsx("div",{className:"max-h-48 overflow-auto rounded-2xl border border-white/10 bg-white/5 p-2",children:m.jsxs("div",{className:"flex flex-wrap gap-2",children:[E?m.jsxs("button",{type:"button",disabled:r||!b,className:"rounded-full border border-emerald-500/30 bg-emerald-500/10 px-3 py-1 text-xs font-semibold text-emerald-100 transition hover:border-emerald-400/50 disabled:opacity-50",onClick:()=>{const C=(l==null?void 0:l(k))??null;if(!C)return;const _=_h([...h,C.createdValue]);n(_),f("")},title:"Create",children:["+ Create ",k,""]}):null,y.map(C=>{const _=C.label??C.value,j=p.has(C.value);return m.jsx("button",{type:"button",disabled:r||!j&&!b,className:ze("rounded-full border px-3 py-1 text-xs font-semibold transition disabled:opacity-50",j?"border-sky-500/40 bg-sky-500/10 text-sky-100":"border-white/15 bg-white/5 text-white/70 hover:border-white/30 hover:text-white"),onClick:()=>{const I=j?h.filter(O=>O!==C.value):_h([...h,C.value]);n(I)},children:_},C.value)})]})})]})}const J0={name:"",subtitle:"",objectiveId:"",parentWorkId:"",nodeType:"",scheduleKind:"",scheduleNumber:1,tags:[],orderHint:0,nextWorkId:"",variantOfWorkId:"",descriptionMarkdown:"",estimatedMinutes:10,notes:"",videoUrls:[""],visibility:"private",collaborators:[""]},e5=e=>Array.from(new Set((e??[]).map(t=>t.trim().toLowerCase()).filter(Boolean))),t5=e=>e==="day_of_year"||e==="day_of_month"||e==="day_of_week",Ch="__no_objective__",q1={private:"Privado",shared:"Compartido",public:"Pblico"},n5={private:"Solo t puedes ver y editar este trabajo.",shared:"Solo las personas que aadas pueden editarlo contigo.",public:"Cualquier persona con acceso al catlogo puede verlo. Solo tus editores pueden cambiarlo."},K1=5,Oa="personal-exclude";function r5({work:e,childCount:t,depth:n,expanded:r,isTreeCollapsed:i,isPersonalExcluded:o,canTogglePersonal:l,personalToggleBusy:u,nextLabel:c,variantLabel:f,onToggle:h,onToggleTree:p,onTogglePersonal:v,onEdit:y,onDuplicate:b,onCreateChild:k,onDelete:E}){var be;const C=(e.descriptionMarkdown??"").trim(),_=(e.subtitle??"").trim(),j=(e.notes??"").trim(),I=e.videoUrls.filter(ge=>ge.trim().length>0),O=C.length>0,A=_.length>0,$=j.length>0,ie=I.length>0,U=O||$||ie,R=t>0,D=n>0?{marginLeft:`${n*1.5}rem`}:void 0,Z=e.visibility??"private",H=q1[Z],K=((be=e.collaboratorEmails)==null?void 0:be.length)??0,V=e.canEdit??!1,X=e.isOwner??!1,W=(e.ownerEmail??"").trim(),M=(e.nodeType??"").trim(),ee=(e.tags??[]).filter(ge=>ge!==Oa),T=(M||"work").trim().toLowerCase(),F=Ie(ge=>{var me;return(me=ge.workTaxonomy.nodeTypes.find(ye=>ye.key===T))==null?void 0:me.label}),G=(()=>{const ge={form:"Forma",segment:"Segmento",application:"Aplicacin",technique:"Tcnica",drill:"Drill",reading:"Lectura",style:"Estilo",link:"Link",work:"Trabajo"},me={form:"border-indigo-500/40 bg-indigo-500/15 text-indigo-100",segment:"border-sky-500/40 bg-sky-500/15 text-sky-100",application:"border-amber-500/40 bg-amber-500/15 text-amber-100",technique:"border-emerald-500/40 bg-emerald-500/15 text-emerald-100",drill:"border-purple-500/40 bg-purple-500/15 text-purple-100",reading:"border-fuchsia-500/40 bg-fuchsia-500/15 text-fuchsia-100",style:"border-white/20 bg-white/10 text-white/70",link:"border-white/20 bg-white/10 text-white/70",work:"border-white/20 bg-white/10 text-white/70"},ye=F??ge[T]??(M||"Trabajo"),Ce=me[T]??me.work;return m.jsx("span",{className:ze("inline-flex items-center rounded-full border px-3 py-1 text-xs font-semibold",Ce),children:ye})})(),P=(()=>{const ge={form:"border-indigo-500/25",segment:"border-sky-500/25",application:"border-amber-500/25",technique:"border-emerald-500/25",drill:"border-purple-500/25",reading:"border-fuchsia-500/25",work:"border-white/10"},me={form:"bg-indigo-500",segment:"bg-sky-500",application:"bg-amber-500",technique:"bg-emerald-500",drill:"bg-purple-500",reading:"bg-fuchsia-500",work:""},ye={form:"bg-indigo-400/60",segment:"bg-sky-400/60",application:"bg-amber-400/60",technique:"bg-emerald-400/60",drill:"bg-purple-400/60",reading:"bg-fuchsia-400/60",work:"bg-white/10"},Ce=ge[T]??ge.work,Re=me[T]??me.work,Pe=ye[T]??ye.work;return{borderClassName:Ce,glowClassName:Re,barClassName:Pe}})();return m.jsxs("article",{id:`work-${e.id}`,className:ze("group relative space-y-4 rounded-xl border bg-white/5 p-4 pb-5 shadow shadow-black/30",P.borderClassName),style:D,children:[m.jsx("div",{className:ze("absolute inset-y-0 left-0 w-1 rounded-r-full",P.barClassName),"aria-hidden":!0}),P.glowClassName?m.jsx("div",{className:ze("absolute inset-0 -z-[1] rounded-xl opacity-10 blur-3xl",P.glowClassName)}):null,m.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[m.jsxs("div",{role:U?"button":void 0,tabIndex:U?0:void 0,onClick:()=>{U&&h()},onKeyDown:ge=>{U&&(ge.key==="Enter"||ge.key===" ")&&(ge.preventDefault(),h())},className:ze("flex flex-1 items-start gap-3 border border-transparent px-2 py-2 text-left transition",U?"cursor-pointer hover:border-white/10 hover:bg-white/5 focus-visible:border-white/20 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-500/40":"cursor-default"),"aria-expanded":U?r:void 0,children:[R?m.jsx("button",{type:"button",onClick:ge=>{ge.stopPropagation(),p()},className:ze("mt-1 inline-flex h-8 w-8 items-center justify-center rounded-full border border-white/15 bg-white/5 text-sm font-semibold text-white/70 transition hover:border-white/30 hover:text-white"),"aria-label":i?"Mostrar trabajos hijos":"Ocultar trabajos hijos",title:i?"Mostrar hijos":"Ocultar hijos",children:i?"":""}):null,U?m.jsx("span",{className:ze("mt-1 inline-flex h-8 w-8 items-center justify-center rounded-full border border-white/15 bg-white/5 text-sm font-semibold text-white/70 transition",r?"rotate-90 border-white/30 text-white":""),"aria-hidden":!0,children:""}):null,m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-white",children:e.name}),A?m.jsx("p",{className:"text-sm text-white/70",children:_}):null,m.jsxs("p",{className:"text-sm text-white/60",children:[e.estimatedMinutes," minutos"]}),m.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-[11px] uppercase tracking-wide text-white/40",children:[m.jsx("span",{className:"rounded-full border border-white/20 px-2 py-0.5 text-[10px] font-semibold text-white/70",children:H}),ee.slice(0,3).map(ge=>m.jsx("span",{className:"rounded-full border border-white/10 px-2 py-0.5 text-[10px] font-semibold text-white/60",children:ge},ge)),X?m.jsx("span",{children:"Propietario"}):W?m.jsx("span",{children:W}):null,K>0?m.jsxs("span",{children:["+",K," colaborador",K===1?"":"es"]}):null,f?m.jsxs("span",{className:"text-white/50",children:["Variante de: ",f]}):null,c?m.jsxs("span",{className:"text-white/50",children:["Siguiente: ",c]}):null,V?null:m.jsx("span",{className:"text-amber-300/80",children:"Solo lectura"})]})]})]}),m.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:justify-end",children:[G,m.jsx("button",{type:"button",onClick:ge=>{ge.stopPropagation(),v()},disabled:!l||u,className:ze("inline-flex items-center rounded-full border px-3 py-1 text-xs font-semibold transition disabled:opacity-50",o?"border-rose-500/40 bg-rose-500/10 text-rose-200 hover:border-rose-400":"border-emerald-500/40 bg-emerald-500/10 text-emerald-200 hover:border-emerald-400"),title:o?"Incluir en el plan personal":"Excluir del plan personal",children:u?"...":o?"Fuera":"En plan"}),m.jsxs(sr,{as:"div",className:"relative inline-flex",children:[m.jsxs(sr.Button,{className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-white/20 text-white/70 transition hover:border-white/40 hover:text-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-500/40",children:[m.jsx("span",{className:"sr-only",children:"Abrir acciones"}),m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",className:"h-5 w-5","aria-hidden":"true",children:[m.jsx("circle",{cx:"12",cy:"5",r:"1.5"}),m.jsx("circle",{cx:"12",cy:"12",r:"1.5"}),m.jsx("circle",{cx:"12",cy:"19",r:"1.5"})]})]}),m.jsxs(sr.Items,{className:"absolute right-0 z-10 mt-2 w-44 overflow-hidden rounded-2xl border border-white/10 bg-slate-900/95 p-1 text-sm text-white shadow-lg shadow-black/40 focus:outline-none",children:[m.jsx(sr.Item,{children:({active:ge})=>m.jsx("button",{type:"button",onClick:V?y:void 0,disabled:!V,className:ze("flex w-full items-center gap-2 rounded-xl px-3 py-2 text-left disabled:opacity-40",ge&&V?"bg-white/10 text-white":"text-white/70"),children:"Editar"})}),m.jsx(sr.Item,{children:({active:ge})=>m.jsx("button",{type:"button",onClick:V?b:void 0,disabled:!V,className:ze("flex w-full items-center gap-2 rounded-xl px-3 py-2 text-left disabled:opacity-40",ge&&V?"bg-white/10 text-white":"text-white/70"),children:"Duplicar"})}),m.jsx(sr.Item,{children:({active:ge})=>m.jsx("button",{type:"button",onClick:V?k:void 0,disabled:!V,className:ze("flex w-full items-center gap-2 rounded-xl px-3 py-2 text-left disabled:opacity-40",ge&&V?"bg-white/10 text-white":"text-white/70"),children:"Nuevo hijo"})}),m.jsx(sr.Item,{children:({active:ge})=>m.jsx("button",{type:"button",onClick:X?E:void 0,disabled:!X,className:ze("flex w-full items-center gap-2 rounded-xl px-3 py-2 text-left disabled:opacity-40",ge&&X?"bg-rose-500/20 text-rose-100":"text-rose-300"),children:"Eliminar"})})]})]})]})]}),U&&r&&m.jsxs("div",{className:"space-y-4 rounded-2xl border border-white/10 bg-slate-950/60 p-4",children:[O?m.jsx(Ao,{content:e.descriptionMarkdown,enableWorkLinks:!0}):null,$?m.jsx("div",{className:"rounded-2xl border border-dashed border-white/15 bg-white/5 p-3 text-sm text-white/70",children:e.notes}):null,ie?m.jsx("div",{className:"space-y-3",children:m.jsx("div",{className:"grid gap-4 lg:grid-cols-3",children:I.map((ge,me)=>m.jsxs("div",{className:"space-y-2",children:[m.jsx(Cm,{url:ge,title:`${e.name} vdeo ${me+1}`}),m.jsx("a",{href:ge,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-full border border-white/20 px-3 py-1 text-xs font-semibold text-white/70 transition hover:border-white/40 hover:text-white",children:"Abrir en YouTube"})]},`${e.id}-video-${me}`))})}):null]}),m.jsx("button",{type:"button",onClick:V?k:void 0,disabled:!V,className:ze("absolute bottom-0 left-1/2 flex -translate-x-1/2 translate-y-1/2 items-center justify-center rounded-full border border-dashed border-white/20 bg-slate-950/80 px-4 py-2 text-sm font-semibold text-white/80 opacity-0 transition hover:border-white/40 hover:text-white focus-visible:opacity-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-500/40 group-hover:opacity-100 pointer-events-none group-hover:pointer-events-auto focus-visible:pointer-events-auto",!V&&"opacity-30"),title:V?R?"Aadir trabajo hijo":"Crear primer trabajo hijo":"No tienes permisos para crear trabajos hijos","aria-label":"Crear trabajo hijo",children:"+"})]})}function i5({form:e,objectiveOptions:t,parentOptions:n,workOptions:r,nodeTypeOptions:i,tagOptions:o,onCreateNodeType:l,onCreateTag:u,depth:c,onFieldChange:f,onVideoChange:h,onAddVideo:p,onRemoveVideo:v,onCollaboratorChange:y,onAddCollaborator:b,onRemoveCollaborator:k,onSave:E,onCancel:C,isNew:_,canEditContent:j,canManageSharing:I,isSaving:O,isOwner:A,ownerEmail:$}){const ie=t.find(W=>W.id===e.objectiveId),U=n.find(W=>W.id===e.parentWorkId),R=r.find(W=>W.id===e.nextWorkId),D=r.find(W=>W.id===e.variantOfWorkId),Z=c>0?{marginLeft:`${c*1.5}rem`}:void 0,H=e.id?`work-name-${e.id}`:void 0,K=e.id?`work-subtitle-${e.id}`:void 0,X=(e.nodeType??"").trim().toLowerCase()==="reading"||e.scheduleKind.trim().length>0;return m.jsxs("article",{className:"space-y-5 rounded-3xl border border-sky-500/40 bg-slate-950/70 p-5 shadow-lg shadow-sky-500/15",style:Z,children:[m.jsxs("header",{className:"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between",children:[m.jsxs("div",{className:"flex-1 space-y-3",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:_?"Nuevo trabajo":"Editando trabajo"}),m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",htmlFor:H,children:"Nombre"}),m.jsx("input",{id:H,type:"text",className:"input-field w-full text-base font-semibold disabled:opacity-60",placeholder:"Nombre descriptivo",value:e.name,onChange:W=>f({name:W.target.value}),disabled:!j})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",htmlFor:K,children:"Subttulo (opcional)"}),m.jsx("input",{id:K,type:"text",className:"input-field w-full disabled:opacity-60",placeholder:"Aade un subttulo breve",value:e.subtitle,onChange:W=>f({subtitle:W.target.value}),disabled:!j})]})]}),m.jsx(Bi,{objective:ie,size:"sm"})]}),j?null:m.jsx("div",{className:"rounded-2xl border border-amber-400/40 bg-amber-500/10 p-3 text-xs text-amber-200",children:"No tienes permisos para editar el contenido de este trabajo. Puedes revisar la informacin y sugerir cambios al propietario."}),m.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Objetivo"}),m.jsxs("select",{className:"input-field disabled:opacity-60",value:e.objectiveId,onChange:W=>f({objectiveId:W.target.value}),disabled:!j,children:[m.jsx("option",{value:"",children:"Selecciona un objetivo"}),t.map(W=>m.jsx("option",{value:W.id,children:W.name},W.id))]})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Trabajo padre (opcional)"}),m.jsxs("select",{className:"input-field disabled:opacity-60",value:e.parentWorkId,onChange:W=>f({parentWorkId:W.target.value}),disabled:!j,children:[m.jsx("option",{value:"",children:"Sin trabajo padre"}),n.map(W=>m.jsx("option",{value:W.id,children:W.label},W.id))]}),e.parentWorkId&&U?m.jsxs("p",{className:"text-xs text-white/40",children:["Deriva de: ",U.label]}):null]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Duracin estimada (min)"}),m.jsx("input",{type:"number",min:0,className:"input-field disabled:opacity-60",value:e.estimatedMinutes,onChange:W=>f({estimatedMinutes:Number(W.target.value)}),disabled:!j})]})]}),m.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Node type (opcional)"}),m.jsx(Ka,{options:i,value:e.nodeType?[e.nodeType]:[],maxSelected:1,onChange:W=>f({nodeType:W[0]??""}),placeholder:"Search node types",disabled:!j,allowCreate:!0,onCreate:W=>{const M=l(W);return M?{createdValue:M,createdLabel:W.trim()}:null}})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Tags"}),m.jsx(Ka,{options:o,value:e.tags??[],onChange:W=>f({tags:W}),placeholder:"Search tags",disabled:!j,allowCreate:!0,onCreate:W=>{const M=u(W);return M?{createdValue:M,createdLabel:M}:null}})]}),X?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Schedule (para lecturas)"}),m.jsxs("select",{className:"input-field disabled:opacity-60",value:e.scheduleKind,onChange:W=>f({scheduleKind:W.target.value}),disabled:!j,children:[m.jsx("option",{value:"",children:"Sin schedule"}),m.jsx("option",{value:"day_of_year",children:"Da del ao (1-365)"}),m.jsx("option",{value:"day_of_month",children:"Da del mes (1-31)"}),m.jsx("option",{value:"day_of_week",children:"Da de la semana (0-6)"})]}),m.jsx("p",{className:"text-xs text-white/40",children:"Para `nodeType=reading`, el planificador solo propone esta lectura cuando el da coincide."})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Nmero"}),m.jsx("input",{type:"number",min:0,className:"input-field disabled:opacity-60",value:e.scheduleNumber,onChange:W=>f({scheduleNumber:Number(W.target.value)}),disabled:!j||!e.scheduleKind})]})]}):null,m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Order hint (opcional)"}),m.jsx("input",{type:"number",min:0,className:"input-field disabled:opacity-60",value:e.orderHint,onChange:W=>f({orderHint:Number(W.target.value)}),disabled:!j})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Siguiente (next)"}),m.jsxs("select",{className:"input-field disabled:opacity-60",value:e.nextWorkId,onChange:W=>f({nextWorkId:W.target.value}),disabled:!j,children:[m.jsx("option",{value:"",children:"Sin siguiente"}),r.filter(W=>W.id!==e.id).map(W=>m.jsx("option",{value:W.id,children:W.label},W.id))]}),e.nextWorkId&&R?m.jsxs("p",{className:"text-xs text-white/40",children:["Siguiente: ",R.label]}):null]}),m.jsxs("div",{className:"grid gap-2 sm:col-span-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Variante de (variant_of)"}),m.jsxs("select",{className:"input-field disabled:opacity-60",value:e.variantOfWorkId,onChange:W=>f({variantOfWorkId:W.target.value}),disabled:!j,children:[m.jsx("option",{value:"",children:"Sin base"}),r.filter(W=>W.id!==e.id).map(W=>m.jsx("option",{value:W.id,children:W.label},W.id))]}),e.variantOfWorkId&&D?m.jsxs("p",{className:"text-xs text-white/40",children:["Variante de: ",D.label]}):null]})]}),m.jsxs("section",{className:"space-y-3 rounded-3xl border border-white/10 bg-white/5 p-4",children:[m.jsxs("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-white/40",children:"Visibilidad"}),m.jsx("p",{className:"text-sm text-white/60",children:A?"Eres el propietario de este trabajo.":$?`Propietario: ${$}`:""})]}),I?null:m.jsx("p",{className:"text-xs text-amber-300/80",children:"Solo el propietario puede cambiar la visibilidad o los colaboradores."})]}),m.jsx("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:gap-3",children:["private","shared","public"].map(W=>m.jsxs("label",{className:ze("inline-flex items-center gap-2 rounded-2xl border px-3 py-2 text-sm transition",e.visibility===W?"border-sky-400/80 bg-sky-400/10 text-white":"border-white/15 text-white/70 hover:border-white/30 hover:text-white",!I&&"opacity-50"),children:[m.jsx("input",{type:"radio",className:"accent-sky-400",checked:e.visibility===W,onChange:()=>f({visibility:W}),disabled:!I}),q1[W]]},W))}),m.jsx("p",{className:"text-xs text-white/50",children:n5[e.visibility]}),e.visibility==="private"?null:m.jsxs("div",{className:"space-y-2 rounded-2xl border border-white/10 bg-white/5 p-3",children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-white/40",children:"Colaboradores (edicin)"}),m.jsx("p",{className:"text-xs text-white/50",children:"Aade hasta 5 direcciones de correo. Tendrn permisos de edicin completos."}),m.jsx("div",{className:"space-y-2",children:e.collaborators.map((W,M)=>m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("input",{type:"email",className:"input-field flex-1 disabled:opacity-60",placeholder:"colega@ejemplo.com",value:W,onChange:ee=>y(M,ee.target.value),disabled:!I}),e.collaborators.length>1?m.jsx("button",{type:"button",className:"inline-flex h-9 w-9 items-center justify-center rounded-full border border-rose-500/40 text-rose-300 transition hover:border-rose-400 hover:text-rose-200 disabled:opacity-40",onClick:()=>k(M),"aria-label":"Eliminar colaborador",disabled:!I,children:""}):null]},`collaborator-${M}`))}),m.jsx("button",{type:"button",className:"btn-secondary px-3 py-1 text-xs disabled:opacity-40",onClick:b,disabled:!I||e.collaborators.length>=K1,children:"+ Aadir colaborador"})]})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Descripcin (Markdown)"}),m.jsx("textarea",{className:"input-field min-h-[140px] disabled:opacity-60",value:e.descriptionMarkdown,onChange:W=>f({descriptionMarkdown:W.target.value}),placeholder:"Usa formato markdown para resaltar puntos importantes.",disabled:!j})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Notas opcionales"}),m.jsx("textarea",{className:"input-field min-h-[100px] disabled:opacity-60",value:e.notes,onChange:W=>f({notes:W.target.value}),disabled:!j})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Vdeos de YouTube"}),m.jsx("div",{className:"space-y-3",children:e.videoUrls.map((W,M)=>m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("input",{type:"url",className:"input-field flex-1 disabled:opacity-60",value:W,onChange:ee=>h(M,ee.target.value),placeholder:"https://www.youtube.com/watch?v=...",disabled:!j}),e.videoUrls.length>1?m.jsx("button",{type:"button",className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-rose-500/40 text-rose-300 transition hover:border-rose-400 hover:text-rose-200",onClick:()=>v(M),"aria-label":"Eliminar enlace de vdeo",disabled:!j,children:""}):null]}),m.jsx(Cm,{url:W,title:`Vista previa vdeo ${M+1}`})]},`video-field-${M}`))}),m.jsx("button",{type:"button",className:"btn-secondary px-3 py-1 text-xs disabled:opacity-50",onClick:p,disabled:!j,children:"+ Aadir vdeo"})]}),m.jsxs("div",{className:"flex flex-wrap gap-3 pt-2",children:[m.jsx("button",{type:"button",onClick:E,className:"btn-primary disabled:opacity-60",disabled:O,children:O?"Guardando":"Guardar"}),m.jsx("button",{type:"button",className:"btn-secondary disabled:opacity-50",onClick:C,disabled:O,children:"Cancelar"})]})]})}function s5(){var qt;const e=Ie(J=>J.works),t=Ie(J=>J.objectives),n=Ie(J=>J.workTaxonomy),r=Ie(J=>J.addWork),i=Ie(J=>J.updateWork),o=Ie(J=>J.deleteWork),l=Ie(J=>J.upsertNodeType),u=Ie(J=>J.upsertTag),c=Ie(J=>J.worksLoading),f=ii(),{user:h}=js(),p=w.useMemo(()=>h?{actorId:h.id,actorEmail:h.email??""}:null,[h]),[v,y]=w.useState(""),[b,k]=w.useState(null),[E,C]=w.useState(new Set),[_,j]=w.useState(new Set),[I,O]=w.useState(new Set),[A,$]=w.useState({}),[ie,U]=w.useState(null),[R,D]=w.useState(null),Z=w.useMemo(()=>new Map(t.map(J=>[J.id,J])),[t]),H=w.useMemo(()=>[...t].sort((J,de)=>(J.name??"").localeCompare(de.name??"","es")),[t]),K=w.useMemo(()=>(n.nodeTypes??[]).slice().sort((J,de)=>J.label.localeCompare(de.label,"en",{sensitivity:"base"})).map(J=>({value:J.key,label:J.label})),[n.nodeTypes]),V=w.useMemo(()=>(n.tags??[]).slice().sort((J,de)=>J.name.localeCompare(de.name,"en",{sensitivity:"base"})).map(J=>({value:J.name,label:J.name})),[n.tags]),X=w.useMemo(()=>new Map(e.map(J=>[J.id,J])),[e]),W=w.useMemo(()=>{const J=new Map;return e.forEach(de=>{const pe=de.parentWorkId;if(!pe)return;const Ae=J.get(pe)??[];Ae.push(de),J.set(pe,Ae)}),J.forEach(de=>{de.sort((pe,Ae)=>pe.name.localeCompare(Ae.name,"es",{sensitivity:"base"}))}),J},[e]),M=w.useMemo(()=>{const J=new Map,de=(pe,Ae)=>{if(J.has(pe))return J.get(pe);const Se=X.get(pe);if(!Se)return"";if(!Se.parentWorkId||Ae.has(pe))return J.set(pe,Se.name),Se.name;Ae.add(pe);const ue=de(Se.parentWorkId,Ae);Ae.delete(pe);const Te=ue?`${ue}  ${Se.name}`:Se.name;return J.set(pe,Te),Te};return e.forEach(pe=>{de(pe.id,new Set)}),J},[e,X]);w.useEffect(()=>{const J=f.hash,de="#work-";let pe=null;if(J.startsWith(de)&&(pe=J.slice(de.length)),!pe){const ue=new URLSearchParams(f.search);pe=ue.get("workId")??ue.get("work")}if(!pe)return;C(ue=>{if(ue.has(pe))return ue;const Te=new Set(ue);return Te.add(pe),Te});const Ae=document.getElementById(`work-${pe}`);if(!Ae)return;Ae.scrollIntoView({behavior:"smooth",block:"start"}),Ae.classList.add("ring-2","ring-sky-500/60");const Se=window.setTimeout(()=>{Ae.classList.remove("ring-2","ring-sky-500/60")},1500);return()=>{window.clearTimeout(Se),Ae.classList.remove("ring-2","ring-sky-500/60")}},[f.hash,f.search,e]);const ee=w.useMemo(()=>{const J=new Map,de=pe=>{if(J.has(pe))return J.get(pe);const Ae=new Set;return(W.get(pe)??[]).forEach(ue=>{Ae.add(ue.id),de(ue.id).forEach(Te=>Ae.add(Te))}),J.set(pe,Ae),Ae};return e.forEach(pe=>de(pe.id)),J},[e,W]),T=w.useCallback((J,de)=>{var Se,ue;const pe=new Set;J&&(pe.add(J),(Se=ee.get(J))==null||Se.forEach(Te=>pe.add(Te)));const Ae=e.filter(Te=>!pe.has(Te.id)).map(Te=>({id:Te.id,label:(()=>{var ce;const L=M.get(Te.id)??Te.name,q=(ce=Z.get(Te.objectiveId))==null?void 0:ce.name;return q?`${q}  ${L}`:L})()})).sort((Te,L)=>Te.label.localeCompare(L.label,"es",{sensitivity:"base"}));if(de&&de.length>0&&!Ae.some(Te=>Te.id===de)){const Te=X.get(de),L=M.get(de)??(Te==null?void 0:Te.name)??"Trabajo no disponible",q=Te?(ue=Z.get(Te.objectiveId))==null?void 0:ue.name:void 0,ce=q?`${q}  ${L}`:L;Ae.unshift({id:de,label:ce})}return Ae},[e,M,ee,X,Z]),F=w.useMemo(()=>e.map(J=>{var Se;const de=M.get(J.id)??J.name,pe=(Se=Z.get(J.objectiveId))==null?void 0:Se.name,Ae=pe?`${pe}  ${de}`:de;return{id:J.id,label:Ae}}).sort((J,de)=>J.label.localeCompare(de.label,"es",{sensitivity:"base"})),[e,M,Z]),G=w.useMemo(()=>{const J=v.trim().toLowerCase(),de=Se=>{var le;if(!J)return!0;const ue=((le=Z.get(Se.objectiveId))==null?void 0:le.name)??"",Te=Se.parentWorkId?M.get(Se.parentWorkId)??"":"",L=Se.id?M.get(Se.id)??"":"",q=(Se.nodeType??"").toLowerCase(),ce=Array.isArray(Se.tags)?Se.tags.join(" "):Se.tags??"";return Se.name.toLowerCase().includes(J)||(Se.subtitle??"").toLowerCase().includes(J)||Se.descriptionMarkdown.toLowerCase().includes(J)||ue.toLowerCase().includes(J)||Te.toLowerCase().includes(J)||L.toLowerCase().includes(J)||q.includes(J)||ce.toLowerCase().includes(J)},pe=[],Ae=Se=>{if(!Se)return 0;let ue=1,Te=X.get(Se);const L=new Set(Se?[Se]:[]);for(;Te&&Te.parentWorkId;){const q=Te.parentWorkId;if(!q||L.has(q))break;ue+=1,L.add(q),Te=X.get(q)}return ue};return e.forEach(Se=>{const ue=A[Se.id],Te=(ue==null?void 0:ue.data)??{id:Se.id,name:Se.name,subtitle:Se.subtitle??"",nodeType:Se.nodeType??"",tags:Se.tags??[],descriptionMarkdown:Se.descriptionMarkdown,objectiveId:Se.objectiveId,parentWorkId:Se.parentWorkId??""};!ue&&!de(Te)||pe.push({id:Se.id,objectiveId:Te.objectiveId,parentWorkId:Te.parentWorkId??"",depth:Ae(Te.parentWorkId),work:Se,isNew:!1,isEditing:!!ue,form:ue==null?void 0:ue.data})}),Object.entries(A).filter(([,Se])=>Se.isNew).forEach(([Se,ue])=>{de(ue.data)&&pe.push({id:Se,objectiveId:ue.data.objectiveId,parentWorkId:ue.data.parentWorkId,depth:Ae(ue.data.parentWorkId||void 0),work:void 0,isNew:!0,isEditing:!0,form:ue.data})}),pe},[e,X,A,Z,M,v]),P=w.useCallback(J=>{var Se;const de=(J.isEditing&&J.form?J.form.parentWorkId:J.parentWorkId)??"";if(!de)return!1;let pe=de;const Ae=new Set;for(;pe&&!Ae.has(pe);){if(Ae.add(pe),_.has(pe))return!0;pe=(((Se=X.get(pe))==null?void 0:Se.parentWorkId)??"")||""}return!1},[_,X]),be=w.useMemo(()=>{const J=new Map;G.forEach(ue=>{const Te=Z.has(ue.objectiveId)?ue.objectiveId:Ch,L=J.get(Te)??[];L.push(ue),J.set(Te,L)});const de=ue=>{var Te,L;if(ue.isEditing&&ue.form){const q=ue.form.name.trim()||(((Te=ue.work)==null?void 0:Te.name)??""),ce=ue.form.parentWorkId&&ue.form.parentWorkId.length>0?M.get(ue.form.parentWorkId)??((L=X.get(ue.form.parentWorkId))==null?void 0:L.name)??"":"";return ce?`${ce}  ${q}`:q}return ue.work?M.get(ue.work.id)??ue.work.name:ue.id},pe=(ue,Te)=>{const L=de(ue),q=de(Te);return L.localeCompare(q,"es",{sensitivity:"base"})},Ae=[];H.forEach(ue=>{const Te=J.get(ue.id);Te&&Te.length&&Ae.push({objective:ue,items:Te.slice().sort(pe)})});const Se=J.get(Ch);return Se&&Se.length&&Ae.push({objective:void 0,items:Se.slice().sort(pe)}),Ae},[G,Z,H,M,X]),ge=((qt=H[0])==null?void 0:qt.id)??"",me=(J,de)=>{$(pe=>{const Ae=pe[J];return Ae?{...pe,[J]:de(Ae)}:pe})},ye=J=>J.length>0?J:[""],Ce=J=>J.length>0?J:[""],Re=J=>{$(de=>{var pe,Ae;return de[J.id]?de:{...de,[J.id]:{data:{id:J.id,name:J.name,subtitle:J.subtitle??"",objectiveId:J.objectiveId,parentWorkId:J.parentWorkId??"",nodeType:J.nodeType??"",scheduleKind:((pe=J.schedule)==null?void 0:pe.kind)??"",scheduleNumber:((Ae=J.schedule)==null?void 0:Ae.number)??1,tags:J.tags??[],orderHint:J.orderHint??0,nextWorkId:J.nextWorkId??"",variantOfWorkId:J.variantOfWorkId??"",descriptionMarkdown:J.descriptionMarkdown,estimatedMinutes:J.estimatedMinutes,notes:J.notes??"",videoUrls:ye(J.videoUrls.slice()),visibility:J.visibility??"private",collaborators:Ce(J.collaboratorEmails??[])},isNew:!1,originalId:J.id}}}),C(de=>{const pe=new Set(de);return pe.add(J.id),pe})},Pe=()=>{const J=`draft-${$t()}`;$(de=>({...de,[J]:{data:{...J0,id:J,subtitle:"",objectiveId:ge},isNew:!0}})),C(de=>{const pe=new Set(de);return pe.add(J),pe})},te=J=>{const de=`draft-${$t()}`;$(pe=>{var Ae,Se;return{...pe,[de]:{data:{id:de,name:`${J.name} (copia)`,subtitle:J.subtitle??"",objectiveId:J.objectiveId,parentWorkId:J.parentWorkId??"",nodeType:J.nodeType??"",scheduleKind:((Ae=J.schedule)==null?void 0:Ae.kind)??"",scheduleNumber:((Se=J.schedule)==null?void 0:Se.number)??1,tags:J.tags??[],orderHint:J.orderHint??0,nextWorkId:"",variantOfWorkId:"",descriptionMarkdown:J.descriptionMarkdown,estimatedMinutes:J.estimatedMinutes,notes:J.notes??"",videoUrls:ye(J.videoUrls.slice()),visibility:"private",collaborators:[""]},isNew:!0}}}),C(pe=>{const Ae=new Set(pe);return Ae.add(de),Ae}),k({type:"success",text:"Duplicacin creada. Ajusta y guarda para confirmarla."})},Ne=J=>{const de=`draft-${$t()}`;$(pe=>({...pe,[de]:{data:{...J0,id:de,subtitle:"",objectiveId:J.objectiveId,parentWorkId:J.id,estimatedMinutes:J.estimatedMinutes,visibility:J.visibility??"private",collaborators:[""]},isNew:!0}})),C(pe=>{const Ae=new Set(pe);return Ae.add(de),Ae}),k({type:"success",text:`Creando un trabajo hijo para ${J.name}. Ajusta y guarda para confirmarlo.`})},Be=J=>{C(de=>{const pe=new Set(de);return pe.has(J)?pe.delete(J):pe.add(J),pe})},We=J=>{$(de=>{const pe={...de};return delete pe[J],pe}),J.startsWith("draft-")&&C(de=>{const pe=new Set(de);return pe.delete(J),pe})},rt=async J=>{const de=A[J];if(!de||ie)return;if(!p){k({type:"error",text:"Inicia sesin para guardar este trabajo."});return}const pe=(de.data.parentWorkId??"").trim(),Ae=pe.length>0?pe:void 0,Se=de.data.nodeType.trim(),ue=Se.length>0?Se:void 0,Te=(de.data.scheduleKind??"").trim(),L=Te.length>0?Te:void 0,q=t5(L)?L:void 0,ce=Number(de.data.scheduleNumber),le=Number.isFinite(ce)?Math.trunc(ce):void 0,re=(ue??"").trim().toLowerCase()==="reading"?q:void 0,fe=re?le:void 0,z=e5(de.data.tags??[]),ne=Number(de.data.orderHint)>0?Number(de.data.orderHint):void 0,he=(de.data.nextWorkId??"").trim(),we=he.length>0?he:void 0,Me=(de.data.variantOfWorkId??"").trim(),et=Me.length>0?Me:void 0,ve={name:de.data.name.trim(),subtitle:de.data.subtitle.trim()||void 0,objectiveId:de.data.objectiveId,nodeType:ue,scheduleKind:re,scheduleNumber:fe,tags:z,orderHint:ne,nextWorkId:we,variantOfWorkId:et,descriptionMarkdown:de.data.descriptionMarkdown,estimatedMinutes:Number(de.data.estimatedMinutes)||0,notes:de.data.notes.trim()||void 0,videoUrls:de.data.videoUrls.map(Qe=>Qe.trim()).filter(Boolean),parentWorkId:Ae,visibility:de.data.visibility,collaboratorEmails:Array.from(new Set(de.data.collaborators.map(Qe=>Qe.trim().toLowerCase()).filter(Qe=>Qe.length>0)))};if(!ve.name){k({type:"error",text:"El nombre es obligatorio."});return}if(!ve.objectiveId){k({type:"error",text:"Selecciona un objetivo para el trabajo."});return}if(ve.parentWorkId&&de.originalId){if(ve.parentWorkId===de.originalId){k({type:"error",text:"Un trabajo no puede ser su propio padre."});return}const Qe=ee.get(de.originalId);if(Qe&&Qe.has(ve.parentWorkId)){k({type:"error",text:"Selecciona un trabajo padre que no sea un descendiente."});return}}if(de.originalId&&ve.nextWorkId===de.originalId){k({type:"error",text:"Un trabajo no puede tenerse como siguiente."});return}if(de.originalId&&ve.variantOfWorkId===de.originalId){k({type:"error",text:"Un trabajo no puede ser variante de s mismo."});return}const tt=de.originalId?X.get(de.originalId):void 0,Ve=de.isNew||((tt==null?void 0:tt.isOwner)??!1);U(J);try{if(de.isNew){const Qe=await r({name:ve.name,subtitle:ve.subtitle,objectiveId:ve.objectiveId,parentWorkId:ve.parentWorkId,nodeType:ve.nodeType,scheduleKind:ve.scheduleKind,scheduleNumber:ve.scheduleNumber,tags:ve.tags,orderHint:ve.orderHint,nextWorkId:ve.nextWorkId,variantOfWorkId:ve.variantOfWorkId,descriptionMarkdown:ve.descriptionMarkdown,estimatedMinutes:ve.estimatedMinutes,notes:ve.notes,videoUrls:ve.videoUrls,visibility:ve.visibility,collaboratorEmails:ve.collaboratorEmails},p);k({type:"success",text:"Trabajo creado correctamente."}),C(qe=>{const $e=new Set(qe);return $e.delete(J),$e.add(Qe.id),$e})}else if(de.originalId){const Qe={name:ve.name,subtitle:ve.subtitle??null,objectiveId:ve.objectiveId,parentWorkId:ve.parentWorkId??null,nodeType:ve.nodeType??null,scheduleKind:ve.scheduleKind??null,scheduleNumber:ve.scheduleKind?ve.scheduleNumber??null:null,tags:ve.tags,orderHint:ve.orderHint??null,nextWorkId:ve.nextWorkId??null,variantOfWorkId:ve.variantOfWorkId??null,descriptionMarkdown:ve.descriptionMarkdown,estimatedMinutes:ve.estimatedMinutes,notes:ve.notes??null,videoUrls:ve.videoUrls};Ve&&(Qe.visibility=ve.visibility,Qe.collaboratorEmails=ve.collaboratorEmails),await i(de.originalId,Qe,p),k({type:"success",text:"Trabajo actualizado."})}$(Qe=>{const qe={...Qe};return delete qe[J],qe})}catch(Qe){console.error("No se pudo guardar el trabajo",Qe),k({type:"error",text:"No se han podido guardar los cambios. Comprueba tus permisos e intntalo de nuevo."})}finally{U(null)}},at=async J=>{var pe;if(!p){k({type:"error",text:"Inicia sesin para eliminar trabajos."});return}const de=(((pe=ee.get(J))==null?void 0:pe.size)??0)>0;try{if(!await o(J,p)){k({type:"error",text:de?"No se puede eliminar porque tiene trabajos hijos.":"No se puede eliminar porque est siendo usado en alguna sesin."});return}k({type:"success",text:"Trabajo eliminado."}),$(Se=>{const ue={...Se};return delete ue[J],ue}),C(Se=>{const ue=new Set(Se);return ue.delete(J),ue})}catch(Ae){console.error("No se pudo eliminar el trabajo",Ae),k({type:"error",text:"No tienes permisos para eliminar este trabajo o se ha producido un error."})}},Nt=async J=>{if(!p){k({type:"error",text:"Inicia sesin para editar trabajos."});return}if(!(J.canEdit??!1)||(J.nodeType??"").trim().toLowerCase()==="style")return;const de=(J.tags??[]).map(Se=>Se.trim().toLowerCase()).filter(Boolean),pe=de.includes(Oa),Ae=pe?de.filter(Se=>Se!==Oa):Array.from(new Set([...de,Oa]));D(J.id);try{await i(J.id,{tags:Ae},p),k({type:"success",text:pe?"Incluido en el plan personal.":"Excluido del plan personal."}),window.setTimeout(()=>k(null),1800)}catch(Se){console.error("No se pudo actualizar el trabajo",Se),k({type:"error",text:"No se han podido guardar los cambios. Comprueba tus permisos e intntalo de nuevo."})}finally{D(null)}};return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("header",{className:"glass-panel space-y-4 p-6 sm:p-10",children:[m.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold",children:"Trabajos"}),m.jsx("p",{className:"max-w-2xl text-white/60",children:"Gestiona los ejercicios reutilizables por objetivo. Duplica, edita y ajusta los detalles sin salir del listado."})]}),m.jsxs("div",{className:"flex w-full flex-col gap-3 sm:w-auto sm:flex-row sm:items-center",children:[m.jsx("input",{type:"search",className:"input-field w-full sm:w-72",value:v,onChange:J=>y(J.target.value),placeholder:"Buscar por nombre, descripcin u objetivo"}),m.jsx($i,{to:"/catalog/taxonomy",className:"btn-secondary",children:"Taxonomy"}),m.jsx("button",{type:"button",className:"btn-primary",onClick:Pe,children:"Nuevo trabajo"}),c?m.jsx("span",{className:"text-xs text-white/60 sm:ml-3",children:"Sincronizando trabajos"}):null]})]}),b&&m.jsx("div",{className:ze("rounded-2xl border px-4 py-3 text-sm",b.type==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-rose-500/40 bg-rose-500/10 text-rose-200"),children:b.text})]}),m.jsx("section",{className:"space-y-6",children:be.length===0?c?m.jsx("div",{className:"glass-panel p-10 text-center text-white/60",children:"Sincronizando trabajos"}):m.jsx("div",{className:"glass-panel p-10 text-center text-white/50",children:"An no hay trabajos guardados. Empieza creando uno con el botn Nuevo trabajo."}):be.map(({objective:J,items:de})=>{const pe=J?J.name:"Sin objetivo asignado",Ae=(J==null?void 0:J.id)??Ch,Se=I.has(Ae);return m.jsxs("div",{className:"glass-panel space-y-4 p-6",children:[m.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("button",{type:"button",onClick:()=>O(ue=>{const Te=new Set(ue);return Te.has(Ae)?Te.delete(Ae):Te.add(Ae),Te}),className:"inline-flex h-8 w-8 items-center justify-center rounded-full border border-white/15 bg-white/5 text-sm font-semibold text-white/70 transition hover:border-white/30 hover:text-white","aria-label":Se?"Expandir grupo":"Colapsar grupo",title:Se?"Expandir":"Colapsar",children:Se?"":""}),m.jsx("h3",{className:"text-lg font-semibold text-white",children:pe}),m.jsx(Bi,{objective:J,size:"sm"})]}),m.jsxs("span",{className:"rounded-full border border-white/10 px-3 py-1 text-xs text-white/60",children:[de.length," trabajo",de.length===1?"":"s"]})]}),Se?null:m.jsx("div",{className:"space-y-4",children:de.filter(ue=>!P(ue)).map(ue=>{var ne,he,we,Me,et,ve,tt;const Te=E.has(ue.id),L=(ue.isEditing&&ue.form?ue.form.parentWorkId:ue.parentWorkId)??"",q=ue.isEditing?T((ne=ue.work)==null?void 0:ne.id,L):[],le=(ue.work?W.get(ue.work.id)??[]:[]).length,re=_.has(ue.id);if(ue.isEditing&&ue.form){const Ve=ue.isNew||(((he=ue.work)==null?void 0:he.canEdit)??!1),Qe=ue.isNew||(((we=ue.work)==null?void 0:we.isOwner)??!1),qe=ue.isNew||(((Me=ue.work)==null?void 0:Me.isOwner)??!1);return m.jsx(i5,{form:ue.form,objectiveOptions:H,parentOptions:q,workOptions:F,nodeTypeOptions:K,tagOptions:V,onCreateNodeType:l,onCreateTag:u,depth:ue.depth,onFieldChange:$e=>me(ue.id,st=>{const ut={...st.data,...$e};if($e.parentWorkId!==void 0&&$e.parentWorkId.length>0){const vt=X.get($e.parentWorkId);vt&&(ut.objectiveId=vt.objectiveId)}return $e.visibility==="private"&&(ut.collaborators=[""]),{...st,data:ut}}),onVideoChange:($e,st)=>me(ue.id,ut=>{const vt=ut.data.videoUrls.slice();return vt[$e]=st,{...ut,data:{...ut.data,videoUrls:vt}}}),onAddVideo:()=>me(ue.id,$e=>({...$e,data:{...$e.data,videoUrls:[...$e.data.videoUrls,""]}})),onRemoveVideo:$e=>me(ue.id,st=>{const ut=st.data.videoUrls.slice();return ut.splice($e,1),{...st,data:{...st.data,videoUrls:ut.length?ut:[""]}}}),onCollaboratorChange:($e,st)=>me(ue.id,ut=>{const vt=ut.data.collaborators.slice();return vt[$e]=st,{...ut,data:{...ut.data,collaborators:vt}}}),onAddCollaborator:()=>me(ue.id,$e=>$e.data.collaborators.length>=K1?$e:{...$e,data:{...$e.data,collaborators:[...$e.data.collaborators,""]}}),onRemoveCollaborator:$e=>me(ue.id,st=>{const ut=st.data.collaborators.slice();return ut.splice($e,1),ut.length||ut.push(""),{...st,data:{...st.data,collaborators:ut}}}),onSave:()=>void rt(ue.id),onCancel:()=>We(ue.id),isNew:ue.isNew,canEditContent:Ve,canManageSharing:Qe,isSaving:ie===ue.id,isOwner:qe,ownerEmail:(et=ue.work)==null?void 0:et.ownerEmail},ue.id)}if(!ue.work)return null;const fe=ue.work.nextWorkId?M.get(ue.work.nextWorkId)??((ve=X.get(ue.work.nextWorkId))==null?void 0:ve.name):void 0,z=ue.work.variantOfWorkId?M.get(ue.work.variantOfWorkId)??((tt=X.get(ue.work.variantOfWorkId))==null?void 0:tt.name):void 0;return m.jsx(r5,{work:ue.work,childCount:le,depth:ue.depth,expanded:Te,isTreeCollapsed:re,isPersonalExcluded:(ue.work.tags??[]).map(Ve=>Ve.trim().toLowerCase()).includes(Oa),canTogglePersonal:(ue.work.canEdit??!1)&&(ue.work.nodeType??"").trim().toLowerCase()!=="style",personalToggleBusy:R===ue.id,nextLabel:fe,variantLabel:z,onToggle:()=>Be(ue.id),onToggleTree:()=>j(Ve=>{const Qe=new Set(Ve);return Qe.has(ue.id)?Qe.delete(ue.id):Qe.add(ue.id),Qe}),onTogglePersonal:()=>{ue.work&&Nt(ue.work)},onEdit:()=>{const Ve=ue.work;Ve&&(Ve.canEdit??!1)&&Re(Ve)},onDuplicate:()=>{const Ve=ue.work;Ve&&(Ve.canEdit??!1)&&te(Ve)},onCreateChild:()=>{const Ve=ue.work;Ve&&(Ve.canEdit??!1)&&Ne(Ve)},onDelete:()=>{const Ve=ue.work;Ve&&(Ve.isOwner??!1)&&at(Ve.id)}},ue.id)})})]},(J==null?void 0:J.id)??"sin-objetivo")})})]})}function Q0(e){return e.reduce((t,n)=>(t[n]=(t[n]??0)+1,t),{})}function o5(){const{works:e,workTaxonomy:t,upsertNodeType:n,removeNodeType:r,upsertTag:i,removeTag:o}=Ie(E=>({works:E.works,workTaxonomy:E.workTaxonomy,upsertNodeType:E.upsertNodeType,removeNodeType:E.removeNodeType,upsertTag:E.upsertTag,removeTag:E.removeTag})),[l,u]=w.useState(""),[c,f]=w.useState(""),[h,p]=w.useState(null),v=w.useMemo(()=>{const E=e.map(C=>(C.nodeType??"").trim().toLowerCase()).filter(Boolean);return Q0(E)},[e]),y=w.useMemo(()=>{const E=e.flatMap(C=>(C.tags??[]).map(_=>_.trim().toLowerCase()).filter(Boolean));return Q0(E)},[e]),b=t.nodeTypes.slice().sort((E,C)=>E.label.localeCompare(C.label,"en",{sensitivity:"base"})),k=t.tags.slice().sort((E,C)=>E.name.localeCompare(C.name,"en",{sensitivity:"base"}));return m.jsxs("div",{className:"space-y-6",children:[m.jsx("header",{className:"flex flex-wrap items-start justify-between gap-4 rounded-3xl border border-white/10 bg-white/5 px-6 py-5",children:m.jsxs("div",{children:[m.jsx("p",{className:"font-display text-2xl font-semibold",children:"Taxonomy"}),m.jsx("p",{className:"mt-1 text-sm text-white/60",children:"Node types and tags used across the catalog and personal planning."}),m.jsx("p",{className:"mt-2 text-sm",children:m.jsx($i,{to:"/catalog",className:"text-sky-300 hover:text-sky-200",children:" Back to Catalog"})})]})}),h?m.jsx("div",{className:`rounded-2xl border px-4 py-3 text-sm ${h.type==="success"?"border-emerald-500/30 bg-emerald-500/10 text-emerald-100":"border-rose-500/30 bg-rose-500/10 text-rose-100"}`,children:h.text}):null,m.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[m.jsxs("section",{className:"rounded-3xl border border-white/10 bg-white/5 p-6",children:[m.jsx("div",{className:"flex items-start justify-between gap-4",children:m.jsxs("div",{children:[m.jsx("h2",{className:"text-lg font-semibold",children:"Node types"}),m.jsx("p",{className:"mt-1 text-sm text-white/60",children:"Used by works and group rules. Keys are stored in works."})]})}),m.jsxs("div",{className:"mt-5 flex flex-col gap-3 sm:flex-row sm:items-end",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-white/50",children:"New node type"}),m.jsx("input",{className:"input-field mt-2",value:l,onChange:E=>u(E.target.value),placeholder:"e.g. Dance figures"})]}),m.jsx("button",{type:"button",className:"btn-primary",onClick:()=>{const E=n(l);if(!E){p({type:"error",text:"Please enter a valid node type."});return}u(""),p({type:"success",text:`Node type created: ${E}`})},children:"Add"})]}),m.jsxs("div",{className:"mt-6 space-y-2",children:[b.map(E=>{const C=(v[E.key]??0)>0;return m.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 rounded-2xl border border-white/10 bg-slate-950/30 px-4 py-3",children:[m.jsxs("div",{children:[m.jsx("p",{className:"font-semibold text-white",children:E.label}),m.jsxs("p",{className:"text-xs text-white/50",children:["key: ",m.jsx("span",{className:"font-mono",children:E.key}),"  used by ",v[E.key]??0," works"]})]}),m.jsx("button",{type:"button",disabled:C,className:"rounded-full border border-white/15 bg-white/5 px-3 py-2 text-xs font-semibold text-white/70 transition hover:border-white/30 hover:text-white disabled:opacity-50",title:C?"Cannot delete: in use":"Delete",onClick:()=>{const _=r(E.key);p(_?{type:"success",text:`Node type removed: ${E.key}`}:{type:"error",text:"Cannot remove node type (it may be in use)."})},children:"Delete"})]},E.key)}),b.length===0?m.jsx("p",{className:"text-sm text-white/60",children:"No node types yet."}):null]})]}),m.jsxs("section",{className:"rounded-3xl border border-white/10 bg-white/5 p-6",children:[m.jsx("div",{className:"flex items-start justify-between gap-4",children:m.jsxs("div",{children:[m.jsx("h2",{className:"text-lg font-semibold",children:"Tags"}),m.jsx("p",{className:"mt-1 text-sm text-white/60",children:"Lowercase slugs (spaces become hyphens). Deleting is blocked if used."})]})}),m.jsxs("div",{className:"mt-5 flex flex-col gap-3 sm:flex-row sm:items-end",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-white/50",children:"New tag"}),m.jsx("input",{className:"input-field mt-2",value:c,onChange:E=>f(E.target.value),placeholder:"e.g. bei-shaolin"})]}),m.jsx("button",{type:"button",className:"btn-primary",onClick:()=>{const E=i(c);if(!E){p({type:"error",text:"Please enter a valid tag."});return}f(""),p({type:"success",text:`Tag created: ${E}`})},children:"Add"})]}),m.jsxs("div",{className:"mt-6 space-y-2",children:[k.map(E=>{const C=(y[E.name]??0)>0;return m.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 rounded-2xl border border-white/10 bg-slate-950/30 px-4 py-3",children:[m.jsxs("div",{children:[m.jsx("p",{className:"font-semibold text-white",children:E.name}),m.jsxs("p",{className:"text-xs text-white/50",children:["used by ",y[E.name]??0," works"]})]}),m.jsx("button",{type:"button",disabled:C,className:"rounded-full border border-white/15 bg-white/5 px-3 py-2 text-xs font-semibold text-white/70 transition hover:border-white/30 hover:text-white disabled:opacity-50",title:C?"Cannot delete: in use":"Delete",onClick:()=>{const _=o(E.name);p(_?{type:"success",text:`Tag removed: ${E.name}`}:{type:"error",text:"Cannot remove tag (it may be in use)."})},children:"Delete"})]},E.name)}),k.length===0?m.jsx("p",{className:"text-sm text-white/60",children:"No tags yet."}):null]})]})]})]})}const jh={name:"",colorHex:"#60a5fa",descriptionMarkdown:""},X0=["#F97316","#FB7185","#F43F5E","#EC4899","#D946EF","#A855F7","#8B5CF6","#6366F1","#4F46E5","#3B82F6","#38BDF8","#0EA5E9","#06B6D4","#14B8A6","#0D9488","#10B981","#22C55E","#65A30D","#84CC16","#A3E635","#FACC15","#FBBF24","#F59E0B","#EA580C","#C2410C","#E11D48","#EF4444","#F87171","#FB923C","#F472B6","#FDE047","#7C3AED"];function a5(){const e=Ie(k=>k.objectives),t=Ie(k=>k.addObjective),n=Ie(k=>k.updateObjective),r=Ie(k=>k.deleteObjective),i=Ie(k=>k.works),[o,l]=w.useState(jh),[u,c]=w.useState(null),f=w.useMemo(()=>{const k=new Map;return i.forEach(E=>{k.set(E.objectiveId,(k.get(E.objectiveId)??0)+1)}),k},[i]),h=w.useMemo(()=>[...e].sort((k,E)=>(k.name??"").localeCompare(E.name??"","es")),[e]),p=k=>{if(k.preventDefault(),!o.name.trim()){c({type:"error",text:"El nombre es obligatorio."});return}const E={name:o.name.trim(),colorHex:o.colorHex,descriptionMarkdown:o.descriptionMarkdown};o.id?(n(o.id,E),c({type:"success",text:"Objetivo actualizado."})):(t(E),c({type:"success",text:"Objetivo creado."})),l(jh)},v=k=>{l({id:k.id,name:k.name,colorHex:k.colorHex,descriptionMarkdown:k.descriptionMarkdown})},y=k=>{const E=r(k);c(E?{type:"success",text:"Objetivo eliminado."}:{type:"error",text:"No se puede eliminar porque tiene trabajos asociados."})},b=()=>{if(e.length===0){c({type:"error",text:"No hay objetivos a los que asignar colores."});return}const k=[...X0];e.map((C,_)=>{const j=k[_%k.length];return{id:C.id,colorHex:j}}).forEach(({id:C,colorHex:_})=>n(C,{colorHex:_})),c({type:"success",text:"Colores repartidos equitativamente entre los objetivos."})};return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("header",{className:"glass-panel p-6 sm:p-10",children:[m.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold",children:"Objetivos"}),m.jsx("p",{className:"text-white/60",children:"Define categoras de trabajo con color y contexto para identificar visualmente cada ejercicio."})]}),m.jsx("div",{className:"flex flex-wrap gap-3",children:m.jsx("button",{type:"button",className:"btn-secondary",onClick:b,children:"Repartir colores"})})]}),u&&m.jsx("div",{className:`mt-4 rounded-2xl border px-4 py-3 text-sm ${u.type==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-rose-500/40 bg-rose-500/10 text-rose-200"}`,children:u.text})]}),m.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.1fr_1.5fr]",children:[m.jsxs("section",{className:"glass-panel p-6",children:[m.jsx("h2",{className:"text-xl font-semibold text-white",children:o.id?"Editar objetivo":"Nuevo objetivo"}),m.jsxs("form",{className:"mt-4 space-y-4",onSubmit:p,children:[m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Nombre"}),m.jsx("input",{type:"text",className:"input-field",value:o.name,onChange:k=>l(E=>({...E,name:k.target.value})),placeholder:"Ej. Resistencia, Tcnica, Juego",required:!0})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Color identificativo"}),m.jsxs("div",{className:"flex flex-wrap gap-3",children:[m.jsx("input",{type:"color",className:"h-12 w-12 cursor-pointer rounded-full border border-white/20 bg-transparent",value:o.colorHex,onChange:k=>l(E=>({...E,colorHex:k.target.value})),"aria-label":"Elegir color personalizado"}),m.jsx("input",{type:"text",className:"input-field max-w-[140px]",value:o.colorHex,onChange:k=>l(E=>({...E,colorHex:k.target.value})),placeholder:"#60a5fa","aria-label":"Cdigo hex del color"})]}),m.jsx("div",{className:"grid grid-cols-8 gap-2 rounded-3xl border border-white/10 bg-white/5 p-3",children:X0.map(k=>m.jsx("button",{type:"button",onClick:()=>l(E=>({...E,colorHex:k})),className:ze("relative flex h-9 w-9 items-center justify-center rounded-full border border-white/20 transition hover:scale-105 focus:outline-none focus:ring-2 focus:ring-white/60",o.colorHex.toLowerCase()===k.toLowerCase()&&"ring-2 ring-white/80 ring-offset-2 ring-offset-slate-900"),style:{backgroundColor:k},"aria-label":`Seleccionar color ${k}`,children:o.colorHex.toLowerCase()===k.toLowerCase()&&m.jsx("span",{className:"text-xs font-semibold text-slate-900",children:""})},k))})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Descripcin (Markdown)"}),m.jsx("textarea",{className:"input-field min-h-[140px]",value:o.descriptionMarkdown,onChange:k=>l(E=>({...E,descriptionMarkdown:k.target.value})),placeholder:"Explica cundo usar este tipo de trabajo, objetivos pedaggicos, etc."})]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("button",{type:"submit",className:"btn-primary",children:o.id?"Guardar objetivo":"Crear objetivo"}),o.id&&m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>l(jh),children:"Cancelar edicin"})]})]})]}),m.jsx("section",{className:"space-y-6",children:h.length===0?m.jsx("div",{className:"glass-panel p-10 text-center text-white/50",children:"An no has creado objetivos. Crea uno con el formulario para clasificarlos por color y descripcin."}):h.map(k=>m.jsxs("div",{className:"glass-panel space-y-4 p-6",children:[m.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[m.jsx(Bi,{objective:k}),m.jsxs("div",{className:"flex items-center gap-3 text-xs text-white/60",children:[m.jsxs("span",{children:[f.get(k.id)??0," trabajos"]}),m.jsx("button",{type:"button",className:"btn-secondary px-3 py-1 text-xs",onClick:()=>v(k),children:"Editar"}),m.jsx("button",{type:"button",className:"inline-flex items-center justify-center rounded-full border border-rose-500/40 px-3 py-1 text-xs font-semibold text-rose-300",onClick:()=>y(k.id),children:"Eliminar"})]})]}),m.jsx(Ao,{content:k.descriptionMarkdown})]},k.id))})]})]})}const Nh={name:"",notes:"",active:!0};function l5(){const e=Ie(h=>h.assistants),t=Ie(h=>h.addAssistant),n=Ie(h=>h.updateAssistant),r=Ie(h=>h.deleteAssistant),[i,o]=w.useState(Nh),[l,u]=w.useState(null),c=h=>{if(h.preventDefault(),!i.name.trim()){u({type:"error",text:"El nombre es obligatorio."});return}const p={name:i.name.trim(),notes:i.notes,active:i.active};i.id?(n(i.id,p),u({type:"success",text:"Asistente actualizado."})):(t(p),u({type:"success",text:"Asistente aadido."})),o(Nh)},f=h=>{o({id:h.id,name:h.name,notes:h.notes??"",active:h.active})};return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("header",{className:"glass-panel p-6 sm:p-10",children:[m.jsx("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold",children:"Asistentes"}),m.jsx("p",{className:"text-white/60",children:"Mantn una lista base de alumnado para registrar asistencia rpidamente durante cada sesin."})]})}),l&&m.jsx("div",{className:ze("mt-4 rounded-2xl border px-4 py-3 text-sm",l.type==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-rose-500/40 bg-rose-500/10 text-rose-200"),children:l.text})]}),m.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.1fr_1.5fr]",children:[m.jsxs("section",{className:"glass-panel p-6",children:[m.jsx("h2",{className:"text-xl font-semibold text-white",children:i.id?"Editar asistente":"Nuevo asistente"}),m.jsxs("form",{className:"mt-4 space-y-4",onSubmit:c,children:[m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Nombre"}),m.jsx("input",{type:"text",className:"input-field",value:i.name,onChange:h=>o(p=>({...p,name:h.target.value})),placeholder:"Nombre y apellidos",required:!0})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Notas"}),m.jsx("textarea",{className:"input-field min-h-[120px]",value:i.notes,onChange:h=>o(p=>({...p,notes:h.target.value})),placeholder:"Observaciones, nivel, lesiones, etc."})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("input",{id:"assistant-active",type:"checkbox",className:"h-5 w-5 rounded border border-white/20 bg-white/10 text-sky-400",checked:i.active,onChange:h=>o(p=>({...p,active:h.target.checked}))}),m.jsx("label",{htmlFor:"assistant-active",className:"text-sm text-white/70",children:"Activo (aparecer en los listados de asistencia)"})]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("button",{type:"submit",className:"btn-primary",children:i.id?"Guardar asistente":"Aadir asistente"}),i.id&&m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>o(Nh),children:"Cancelar edicin"})]})]})]}),m.jsx("section",{className:"space-y-4",children:e.length===0?m.jsx("div",{className:"glass-panel p-10 text-center text-white/50",children:"Todava no tienes asistentes guardados. Crea uno desde el formulario para empezar a marcar asistencia en sesiones."}):e.map(h=>m.jsxs("div",{className:"glass-panel flex flex-col gap-4 p-6 sm:flex-row sm:items-start sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-lg font-semibold text-white",children:h.name}),h.notes?m.jsx("p",{className:"text-sm text-white/60",children:h.notes}):null]}),m.jsxs("div",{className:"flex flex-col items-start gap-3 sm:items-end",children:[m.jsx("span",{className:ze("rounded-full border px-3 py-1 text-xs font-semibold",h.active?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-white/20 bg-white/5 text-white/60"),children:h.active?"Activo":"Inactivo"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{type:"button",className:"btn-secondary px-3 py-1 text-xs",onClick:()=>f(h),children:"Editar"}),m.jsx("button",{type:"button",className:"inline-flex items-center justify-center rounded-full border border-rose-500/40 px-3 py-1 text-xs font-semibold text-rose-300",onClick:()=>r(h.id),children:"Eliminar"})]})]})]},h.id))})]})]})}function fo(e,t){return m.jsxs("div",{className:"flex items-center justify-between rounded-2xl border border-white/10 bg-white/5 px-4 py-2 text-sm text-white/70",children:[m.jsx("span",{children:e}),m.jsx("span",{className:"font-semibold text-white",children:t})]},e)}function u5(){var c,f,h,p,v,y;const e=Ie(b=>b.exportBackup),t=Ie(b=>b.importBackup),[n,r]=w.useState(null),[i,o]=w.useState(null),l=()=>{try{const b=e(),k=new Blob([JSON.stringify(b,null,2)],{type:"application/json"}),E=URL.createObjectURL(k),C=document.createElement("a");C.href=E,C.download=`sport-planner-backup-${new Date().toISOString().slice(0,10)}.json`,C.click(),URL.revokeObjectURL(E),r({type:"success",text:"Backup exportado correctamente."})}catch(b){console.error(b),r({type:"error",text:"No se pudo exportar el backup."})}},u=async b=>{var E;const k=(E=b.target.files)==null?void 0:E[0];if(k)try{const C=await k.text(),_=JSON.parse(C);t(_),o(_),r({type:"success",text:"Datos importados correctamente."})}catch(C){console.error(C),r({type:"error",text:"No se pudo importar el archivo. Revisa que sea un JSON vlido."})}finally{b.target.value=""}};return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("header",{className:"glass-panel p-6 sm:p-10",children:[m.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold",children:"Backups"}),m.jsx("p",{className:"text-white/60",children:"Exporta e importa toda tu informacin en JSON versionado para compartir o restaurar en cualquier momento."})]}),m.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row",children:[m.jsx("button",{type:"button",className:"btn-primary",onClick:l,children:"Descargar backup"}),m.jsxs("label",{className:"btn-secondary cursor-pointer",children:["Importar backup",m.jsx("input",{type:"file",accept:"application/json",className:"hidden",onChange:u})]})]})]}),n&&m.jsx("div",{className:`mt-4 rounded-2xl border px-4 py-3 text-sm ${n.type==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-rose-500/40 bg-rose-500/10 text-rose-200"}`,children:n.text})]}),i&&m.jsxs("section",{className:"glass-panel space-y-4 p-6",children:[m.jsx("h2",{className:"text-xl font-semibold text-white",children:"ltima importacin"}),m.jsxs("p",{className:"text-sm text-white/60",children:["Versin del backup: ",i.version]}),m.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[fo("Objetivos",((c=i.objetivos)==null?void 0:c.length)??0),fo("Trabajos",((f=i.trabajos)==null?void 0:f.length)??0),fo("Sesiones",((h=i.sesiones)==null?void 0:h.length)??0),fo("Asistentes",((p=i.asistentes)==null?void 0:p.length)??0),fo("Sesiones  Trabajos",((v=i.sesiones_trabajos)==null?void 0:v.length)??0),fo("Sesiones  Asistencias",((y=i.sesiones_asistencias)==null?void 0:y.length)??0)]})]}),m.jsxs("section",{className:"glass-panel space-y-3 p-6 text-sm text-white/70",children:[m.jsx("h2",{className:"text-lg font-semibold text-white",children:"Consejos"}),m.jsxs("ul",{className:"list-disc space-y-2 pl-5",children:[m.jsx("li",{children:"Guarda tus backups en un servicio en la nube para poder restaurarlos desde cualquier dispositivo."}),m.jsx("li",{children:"Antes de importar, realiza una exportacin por seguridad. La restauracin sobrescribe los datos actuales sin posibilidad de deshacer."}),m.jsx("li",{children:"Los backups mantienen los IDs, as que puedes sincronizar manualmente varias instalaciones si lo necesitas."})]})]})]})}function c5(){const{signInWithPassword:e,signUpWithPassword:t,session:n,loading:r}=js(),[i,o]=w.useState("login"),[l,u]=w.useState(""),[c,f]=w.useState(""),[h,p]=w.useState(""),[v,y]=w.useState(!1),[b,k]=w.useState(null),[E,C]=w.useState(null);if(!r&&n)return m.jsx(Ja,{to:"/",replace:!0});const _=async I=>{if(I.preventDefault(),k(null),C(null),!l||!c){k("Introduce tu email y contrasea.");return}if(i==="register"&&c!==h){k("Las contraseas no coinciden.");return}try{y(!0),i==="login"?await e(l,c):(await t(l,c),C("Revisa tu correo para confirmar la cuenta y vuelve a iniciar sesin."))}catch(O){const A=O instanceof Error?O.message:"No se pudo completar la operacin.";k(A)}finally{y(!1)}},j=()=>{o(I=>I==="login"?"register":"login"),k(null),C(null),f(""),p("")};return m.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-950 px-4 py-12",children:m.jsxs("div",{className:"w-full max-w-md rounded-3xl border border-white/10 bg-slate-900/80 p-8 shadow-2xl backdrop-blur",children:[m.jsxs("header",{className:"mb-8 text-center",children:[m.jsx("div",{className:"mx-auto mb-4 flex h-14 w-14 items-center justify-center rounded-full bg-gradient-to-br from-sky-500 to-indigo-500 text-xl font-bold text-white",children:"SP"}),m.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-white",children:i==="login"?"Inicia sesin":"Crea tu cuenta"}),m.jsx("p",{className:"mt-2 text-sm text-white/60",children:"Accede a tus planes desde cualquier dispositivo con Supabase."})]}),m.jsxs("form",{className:"space-y-5",onSubmit:_,children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"email",className:"block text-xs font-semibold uppercase tracking-wide text-white/50",children:"Email"}),m.jsx("input",{id:"email",type:"email",required:!0,className:"input-field w-full",value:l,onChange:I=>u(I.target.value),placeholder:"tu@correo.com",autoComplete:"email"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"password",className:"block text-xs font-semibold uppercase tracking-wide text-white/50",children:"Contrasea"}),m.jsx("input",{id:"password",type:"password",required:!0,className:"input-field w-full",value:c,onChange:I=>f(I.target.value),autoComplete:i==="login"?"current-password":"new-password"})]}),i==="register"&&m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"confirmPassword",className:"block text-xs font-semibold uppercase tracking-wide text-white/50",children:"Confirmar contrasea"}),m.jsx("input",{id:"confirmPassword",type:"password",required:!0,className:"input-field w-full",value:h,onChange:I=>p(I.target.value),autoComplete:"new-password"})]}),b&&m.jsx("div",{className:"rounded-xl border border-red-500/30 bg-red-500/10 px-4 py-3 text-sm text-red-200",children:b}),E&&m.jsx("div",{className:"rounded-xl border border-emerald-500/30 bg-emerald-500/10 px-4 py-3 text-sm text-emerald-200",children:E}),m.jsx("button",{type:"submit",className:"btn-primary w-full justify-center",disabled:v,children:v?"Procesando":i==="login"?"Entrar":"Crear cuenta"})]}),m.jsx("footer",{className:"mt-6 text-center text-sm text-white/60",children:i==="login"?m.jsx("button",{type:"button",className:"text-sky-300 hover:text-sky-200",onClick:j,children:"No tienes cuenta? Regstrate"}):m.jsx("button",{type:"button",className:"text-sky-300 hover:text-sky-200",onClick:j,children:"Ya tienes cuenta? Inicia sesin"})})]})})}Xe.locale("es");function d5(){const e=Ie(I=>I.plans),[t,n]=Mo(),r=(t.get("plan")??"").trim(),i=w.useMemo(()=>e.filter(I=>I.kind==="personal"&&I.enabled),[e]),o=w.useMemo(()=>i.length===0?void 0:i.find(O=>O.id===r)??i[0],[i,r]),l=(o==null?void 0:o.id)??"personal-kungfu";w.useEffect(()=>{if(!o||r===o.id)return;const I=new URLSearchParams(t);I.set("plan",o.id),n(I,{replace:!0})},[o,r,t,n]);const u=Ie(I=>I.sessions).filter(I=>I.kind==="personal"&&(I.planId??"personal-kungfu")===l),c=Ie(I=>I.works),f=Ie(I=>I.objectives),h=Ie(I=>I.assistants),p=Ie(I=>I.addSession),v=w.useMemo(()=>[...u].sort((I,O)=>Xe(O.date).valueOf()-Xe(I.date).valueOf()),[u]),y=t.get("session")??void 0,b=y?u.find(I=>I.id===y):void 0,[k,E]=w.useState(b==null?void 0:b.id);w.useEffect(()=>{if(y&&!u.some(I=>I.id===y)){E(void 0);const I=new URLSearchParams(t);I.delete("session"),n(I,{replace:!0})}},[y,u,t,n]);const C=k?u.find(I=>I.id===k):void 0,_=I=>{E(I);const O=new URLSearchParams(t);O.set("session",I),O.set("plan",l),n(O,{replace:!0})},j=()=>{const I=Xe().format("YYYY-MM-DD"),O=u.find($=>$.date===I);if(O){_(O.id);return}const A=p({date:I,kind:"personal",planId:l,title:(o==null?void 0:o.name)??"Entrenamiento personal",description:"",notes:""});_(A.id)};return m.jsxs("div",{className:"space-y-6",children:[m.jsx("header",{className:"glass-panel p-6 sm:p-10",children:m.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsxs("h1",{className:"text-3xl font-bold",children:[(o==null?void 0:o.name)??"Personal","  Sesiones"]}),m.jsx("p",{className:"text-white/60",children:"Histrico y edicin de sesiones para este plan."})]}),m.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row",children:[m.jsx($i,{to:`/personal?plan=${encodeURIComponent(l)}`,className:"btn-secondary",children:"Volver a hoy"}),m.jsx($i,{to:`/settings?plan=${encodeURIComponent(l)}`,className:"btn-secondary",children:"Ajustes"}),m.jsx("button",{type:"button",className:"btn-primary",onClick:j,children:"Crear/abrir hoy"})]})]})}),m.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.1fr_1.9fr]",children:[m.jsxs("section",{className:"glass-panel space-y-3 p-6",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("h2",{className:"text-lg font-semibold text-white",children:"Sesiones"}),m.jsx("span",{className:"rounded-full border border-white/10 px-3 py-1 text-xs text-white/60",children:v.length})]}),v.length===0?m.jsx("div",{className:"rounded-2xl border border-dashed border-white/15 bg-white/5 p-6 text-sm text-white/50",children:"No hay sesiones personales todava. Crea la sesin de hoy para empezar a registrar tu entrenamiento."}):m.jsx("div",{className:"space-y-2",children:v.map(I=>{const O=I.workItems.filter(A=>(A.completed??!1)||typeof A.result<"u").length;return m.jsxs("button",{type:"button",onClick:()=>_(I.id),className:ze("flex w-full flex-col gap-1 rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-left transition hover:border-white/30 hover:bg-white/10",I.id===k&&"border-sky-400/60 bg-sky-500/10 shadow shadow-sky-500/10"),children:[m.jsx("p",{className:"text-sm font-semibold text-white",children:I.title||"Sesin sin ttulo"}),m.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:Xe(I.date).format("ddd  D MMM YYYY")}),m.jsxs("p",{className:"text-xs text-white/60",children:[O,"/",I.workItems.length," registrados"]})]},I.id)})})]}),m.jsx("section",{className:"glass-panel p-6",children:C?m.jsx(_m,{session:C,works:c,objectives:f,assistants:h}):m.jsx("div",{className:"rounded-2xl border border-dashed border-white/15 bg-white/5 p-10 text-center text-white/50",children:"Selecciona una sesin para verla y editarla."})})]})]})}const Cp=e=>Array.from(new Set((e??[]).map(t=>t.trim().toLowerCase()).filter(Boolean))),Y1=e=>Array.from(new Set(e.split(",").map(t=>t.trim()).filter(Boolean))),G1=e=>(e??[]).join(", ");function Z0(e){const t=Cp(e.byTags),n=Cp(e.byNodeTypes),r=Y1(G1(e.byWorkIds)),i={};return t&&t.length>0&&(i.byTags=t),n&&n.length>0&&(i.byNodeTypes=n),r&&r.length>0&&(i.byWorkIds=r),i}function f5(e){const t={};Object.entries(e.targetsDays??{}).forEach(([r,i])=>{const o=r.trim().toLowerCase(),l=Number(i);o&&Number.isFinite(l)&&(t[o]=Math.max(1,Math.round(l)))});const n=(e.overrides??[]).map(r=>{var i;return{match:{tagsAny:Cp(((i=r.match)==null?void 0:i.tagsAny)??[])},multiplier:Math.max(.1,Number(r.multiplier)||1)}}).filter(r=>r.match.tagsAny.length>0);return{targetsDays:t,overrides:n}}function h5(e){var _,j,I;const t=Math.max(1,Math.round(Number(e.maxItems)||12)),n=Math.max(1,Number(e.minutesBudget)||30),r={};Object.entries(e.defaultMinutesByNodeType??{}).forEach(([O,A])=>{const $=O.trim().toLowerCase(),ie=Number(A);$&&Number.isFinite(ie)&&(r[$]=Math.max(.25,ie))});const i=O=>O==="count"||O==="minutes"||O==="both",o=O=>O==="work"||O==="note",l=O=>O==="overdue"||O==="weighted",u=O=>O==="allow_all"||O==="prefer_leaves",c=O=>{if(!Array.isArray(O))return[];const A=O.map($=>Number($)).filter($=>Number.isFinite($)).map($=>Math.round($)).filter($=>$>=0&&$<=6);return Array.from(new Set(A)).sort(($,ie)=>$-ie)},f=(O,A)=>{const $=(O.id??"").trim()||$t(),ie=o(O.type)?O.type:"work",U=typeof O.enabled=="boolean"?O.enabled:!0,R=Number.isFinite(Number(O.order))?Number(O.order):A,D=(O.name??"").trim()||(ie==="note"?"Recap":"Grupo"),Z=i(O.limitMode)?O.limitMode:"minutes",H=Number.isFinite(Number(O.maxItems))?Math.max(0,Math.round(Number(O.maxItems))):void 0,K=Number.isFinite(Number(O.minutesBudget))?Math.max(0,Number(O.minutesBudget)):void 0,V=l(O.strategy)?O.strategy:"overdue",X=u(O.hierarchyRule)?O.hierarchyRule:"allow_all",W=(O.include??[]).map(Z0).filter(ee=>Object.keys(ee).length>0),M=(O.exclude??[]).map(Z0).filter(ee=>Object.keys(ee).length>0);return{id:$,name:D,enabled:U,order:R,type:ie,daysOfWeek:c(O.daysOfWeek),limitMode:Z,maxItems:H,minutesBudget:K,strategy:V,hierarchyRule:X,include:W,exclude:M}},p=((e.groups??[]).length>0?e.groups??[]:[{id:"formas",name:"Formas",enabled:!0,order:1,type:"work",limitMode:"minutes",minutesBudget:18,strategy:"overdue",hierarchyRule:"prefer_leaves",include:[{byNodeTypes:["segment","form"]}],exclude:[]},{id:"tecnicas",name:"Tcnicas",enabled:!0,order:2,type:"work",limitMode:"minutes",minutesBudget:10,strategy:"weighted",hierarchyRule:"allow_all",include:[{byNodeTypes:["technique"]},{byTags:["roulette"]}],exclude:[]},{id:"recap",name:"Recap",enabled:!0,order:99,type:"note",limitMode:"minutes",minutesBudget:2}]).map((O,A)=>f(O,A+1)).sort((O,A)=>O.order-A.order).map((O,A)=>({...O,order:A+1})),v=p.filter(O=>(O.type??"work")!=="note"),y=p.filter(O=>O.type==="note"),b=Math.max(0,Number((_=v[0])==null?void 0:_.minutesBudget)||0),k=Math.max(0,Number((j=v[1])==null?void 0:j.minutesBudget)||0),E=Math.max(0,Number((I=y[0])==null?void 0:I.minutesBudget)||0),C=Math.max(0,b+k+E);return{limitMode:e.limitMode,maxItems:t,minutesBudget:n,template:{totalMinutes:C,focusMinutes:b,rouletteMinutes:k,recapMinutes:E},defaultMinutesByNodeType:r,focusSelectors:[],rouletteSelectors:[],groups:p}}const p5={},ew=[{label:"L",value:1},{label:"M",value:2},{label:"X",value:3},{label:"J",value:4},{label:"V",value:5},{label:"S",value:6},{label:"D",value:0}];function tw(){const e=Ie(te=>te.kungfuCadence),t=Ie(te=>te.kungfuTodayPlan),n=Ie(te=>te.plans),r=Ie(te=>te.workTaxonomy),i=Ie(te=>te.upsertNodeType),o=Ie(te=>te.upsertTag),l=Ie(te=>te.addPlan),u=Ie(te=>te.updatePlan),c=Ie(te=>te.duplicatePlan),f=Ie(te=>te.deletePlan),h=Ie(te=>te.setKungfuCadence),p=Ie(te=>te.setKungfuTodayPlan),[v,y]=Mo(),b=(v.get("plan")??"").trim(),k=w.useMemo(()=>{const te=[...n];return te.sort((Ne,Be)=>{const We=Ne.kind===Be.kind?0:Ne.kind==="class"?-1:1;return We!==0?We:Ne.name.localeCompare(Be.name,"es",{sensitivity:"base"})}),te},[n]),E=w.useMemo(()=>k.length===0?void 0:k.find(Ne=>Ne.id===b)??k[0],[k,b]),C=(E==null?void 0:E.id)??"personal-kungfu",_=(E==null?void 0:E.cadence)??e,j=(E==null?void 0:E.todayPlan)??t,[I,O]=w.useState((E==null?void 0:E.name)??"Plan"),[A,$]=w.useState((E==null?void 0:E.enabled)??!0),[ie,U]=w.useState(_),[R,D]=w.useState(j),[Z,H]=w.useState(null),[K,V]=w.useState([]),[X,W]=w.useState("personal");w.useEffect(()=>{if(E){if(b!==E.id){const te=new URLSearchParams(v);te.set("plan",E.id),y(te,{replace:!0})}O(E.name),$(E.enabled),E.kind==="personal"?(U(E.cadence??e),D(E.todayPlan??t)):(U(e),D(t))}},[E,b,v,y,e,t]);const M=w.useMemo(()=>{if(!E)return!1;const te=E.name!==I||E.enabled!==A;return E.kind!=="personal"?te:te||JSON.stringify(_)!==JSON.stringify(ie)||JSON.stringify(j)!==JSON.stringify(R)},[E,_,j,I,A,ie,R]),ee=te=>{H(te),te&&window.setTimeout(()=>H(null),te.type==="success"?1800:2600)},T=()=>{try{const te={name:I.trim()||(E==null?void 0:E.name)||"Plan",enabled:A};if((E==null?void 0:E.kind)==="personal"){const Ne=f5(ie),Be=h5(R);u(C,{...te,cadence:Ne,todayPlan:Be}),C==="personal-kungfu"&&(h(Ne),p(Be))}else u(C,te);ee({type:"success",text:"Guardado."})}catch(te){const Ne=te instanceof Error?te.message:"No se pudo guardar.";ee({type:"error",text:Ne})}},F=()=>{E&&(O(E.name),$(E.enabled)),U(_),D(j),ee({type:"success",text:"Cambios descartados."})},G=w.useMemo(()=>(r.nodeTypes??[]).slice().sort((te,Ne)=>te.label.localeCompare(Ne.label,"en",{sensitivity:"base"})).map(te=>({value:te.key,label:te.label})),[r.nodeTypes]),P=w.useMemo(()=>(r.tags??[]).slice().sort((te,Ne)=>te.name.localeCompare(Ne.name,"en",{sensitivity:"base"})).map(te=>({value:te.name,label:te.name})),[r.tags]),be=w.useMemo(()=>new Map(ew.map(te=>[te.value,te.label])),[]),ge=w.useCallback((te,Ne)=>{V(Be=>{const We=Be.includes(te),rt=typeof Ne=="boolean"?Ne:!We;return rt===We?Be:rt?[...Be,te]:Be.filter(at=>at!==te)})},[]),me=w.useCallback(()=>{const te=$t();D(Ne=>{const Be=[...Ne.groups??[]].sort((at,Nt)=>(at.order??0)-(Nt.order??0)),We={id:te,name:"Nuevo grupo",enabled:!0,order:Be.length+1,type:"work",daysOfWeek:[],limitMode:"minutes",maxItems:12,minutesBudget:5,strategy:"overdue",hierarchyRule:"allow_all",include:[],exclude:[]},rt=[...Be,We].map((at,Nt)=>({...at,order:Nt+1}));return{...Ne,groups:rt}}),ge(te,!0)},[ge]),ye=te=>{const Ne=new URLSearchParams(v);Ne.set("plan",te),y(Ne,{replace:!0})},Ce=()=>{const te=l({kind:X,name:X==="class"?"Clases":"Personal"});ye(te.id),ee({type:"success",text:"Plan creado."})},Re=()=>{if(!E)return;const te=c(E.id);if(!te){ee({type:"error",text:"No se pudo duplicar el plan."});return}ye(te.id),ee({type:"success",text:"Plan duplicado."})},Pe=()=>{if(!E||!window.confirm(`Eliminar el plan "${E.name}"? (No se borrarn sesiones)`))return;if(!f(E.id)){ee({type:"error",text:"No se pudo eliminar. Puede ser un plan protegido o tener sesiones asociadas."});return}const Be=k.find(We=>We.id!==E.id);Be&&ye(Be.id),ee({type:"success",text:"Plan eliminado."})};return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("header",{className:"glass-panel p-6 sm:p-10",children:[m.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold",children:"Ajustes  Planes"}),m.jsx("p",{className:"text-white/60",children:"Configura planes (personales y clases) y sus reglas."})]}),m.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-end",children:[m.jsxs("div",{className:"flex flex-wrap items-center justify-end gap-2",children:[m.jsxs("select",{className:"input-field h-10 w-[9.5rem] rounded-2xl px-3 text-sm",value:X,onChange:te=>W(te.target.value),title:"Tipo del nuevo plan",children:[m.jsx("option",{value:"personal",children:"Personal"}),m.jsx("option",{value:"class",children:"Clases"})]}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:Ce,children:"Nuevo"}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:Re,disabled:!E,children:"Duplicar"}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:Pe,disabled:!E,children:"Eliminar"})]}),m.jsxs("div",{className:"flex gap-3",children:[M?m.jsx("button",{type:"button",className:"btn-secondary",onClick:F,children:"Descartar"}):null,m.jsx("button",{type:"button",className:"btn-primary",onClick:T,disabled:!M,children:"Guardar"})]})]})]}),m.jsx("div",{className:"mt-5 flex flex-wrap gap-2",children:k.map(te=>m.jsx("button",{type:"button",onClick:()=>ye(te.id),className:ze("rounded-full border px-4 py-2 text-sm font-semibold transition",te.id===(E==null?void 0:E.id)?"border-sky-400/70 bg-sky-500/10 text-white":"border-white/10 bg-white/5 text-white/70 hover:border-white/30 hover:text-white"),title:te.kind==="class"?"Plan de clases":"Plan personal",children:te.name},te.id))}),Z?m.jsx("div",{className:ze("mt-4 rounded-2xl border px-4 py-3 text-sm",Z.type==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-rose-500/40 bg-rose-500/10 text-rose-200"),children:Z.text}):null]}),m.jsxs("section",{className:"glass-panel space-y-5 p-6",children:[m.jsxs("div",{className:"grid gap-4 sm:grid-cols-[1fr_auto] sm:items-end",children:[m.jsxs("label",{className:"grid gap-2",children:[m.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:"Nombre del plan"}),m.jsx("input",{type:"text",className:"input-field",value:I,onChange:te=>O(te.target.value)})]}),m.jsxs("label",{className:"flex items-center justify-between gap-3 rounded-2xl border border-white/10 bg-white/5 px-4 py-3",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-semibold text-white/80",children:"Plan activo"}),m.jsx("p",{className:"text-xs text-white/50",children:(E==null?void 0:E.kind)==="class"?"Clases":"Personal"})]}),m.jsx("input",{type:"checkbox",className:"h-5 w-5 accent-sky-400",checked:A,onChange:te=>$(te.target.checked)})]})]}),(E==null?void 0:E.kind)==="class"?m.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 text-sm text-white/70",children:[m.jsx("p",{className:"font-semibold text-white/80",children:"Este plan es de tipo Clases."}),m.jsxs("p",{className:"mt-1 text-white/60",children:["Por ahora, los grupos automticos (cadencias + Plan de hoy) solo aplican a planes personales. Para clases, planifica desde ",m.jsx("span",{className:"font-semibold text-white",children:"Sesiones"})," en modo Editar."]})]}):null]}),(E==null?void 0:E.kind)!=="personal"?null:m.jsxs(m.Fragment,{children:[m.jsxs("section",{className:"glass-panel space-y-5 p-6",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-semibold text-white",children:"Plan de hoy"}),m.jsx("p",{className:"text-sm text-white/60",children:"Controla cuntos tems se sugieren y el presupuesto de minutos."})]}),m.jsxs("div",{className:"grid gap-4 sm:grid-cols-3",children:[m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Modo de lmite"}),m.jsxs("select",{className:"input-field",value:R.limitMode,onChange:te=>D(Ne=>({...Ne,limitMode:te.target.value})),children:[m.jsx("option",{value:"count",children:"Por cantidad"}),m.jsx("option",{value:"minutes",children:"Por minutos"}),m.jsx("option",{value:"both",children:"Cantidad y minutos"})]})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Mx. tems"}),m.jsx("input",{type:"number",min:1,className:"input-field",value:R.maxItems,onChange:te=>D(Ne=>({...Ne,maxItems:Number(te.target.value)}))})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Presupuesto (min)"}),m.jsx("input",{type:"number",min:1,className:"input-field",value:R.minutesBudget,onChange:te=>D(Ne=>({...Ne,minutesBudget:Number(te.target.value)}))})]})]}),m.jsxs("div",{className:"space-y-4 rounded-3xl border border-white/10 bg-white/5 p-5",children:[m.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-white",children:"Grupos"}),m.jsx("p",{className:"text-sm text-white/60",children:"Define bloques con reglas, das de la semana y lmites."})]}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:me,children:"+ Grupo"})]}),m.jsx("div",{className:"space-y-4",children:[...R.groups??[]].sort((te,Ne)=>(te.order??0)-(Ne.order??0)).map((te,Ne,Be)=>{const We=te.type??"work",rt=te.daysOfWeek??[],at=rt.length===0,Nt=te.limitMode??"minutes",qt=te.strategy??"overdue",J=te.hierarchyRule??"allow_all",de=K.includes(te.id),pe=at?"Todos":rt.map(re=>be.get(re)??String(re)).filter(Boolean).join(" "),Ae=(()=>{const re=Math.max(0,Math.round(Number(te.maxItems??0))),fe=Math.max(0,Number(te.minutesBudget??0));return Nt==="count"?`${re} tems`:Nt==="minutes"?`${fe} min`:`${re} tems  ${fe} min`})(),Se=(te.include??[]).length,ue=(te.exclude??[]).length,Te=re=>{D(fe=>{const ne=[...fe.groups??[]].sort((he,we)=>(he.order??0)-(we.order??0)).map(he=>he.id===te.id?{...he,...re}:he).map((he,we)=>({...he,order:we+1}));return{...fe,groups:ne}})},L=re=>{D(fe=>{const z=[...fe.groups??[]].sort((et,ve)=>(et.order??0)-(ve.order??0)),ne=z.findIndex(et=>et.id===te.id),he=ne+re;if(ne<0||he<0||he>=z.length)return fe;const we=z.slice(),Me=we[ne];return we[ne]=we[he],we[he]=Me,{...fe,groups:we.map((et,ve)=>({...et,order:ve+1}))}})},q=()=>{D(re=>{const z=[...re.groups??[]].sort((ne,he)=>(ne.order??0)-(he.order??0)).filter(ne=>ne.id!==te.id).map((ne,he)=>({...ne,order:he+1}));return{...re,groups:z.length>0?z:re.groups}}),V(re=>re.filter(fe=>fe!==te.id))},ce=()=>{const re=$t();D(fe=>{const z=[...fe.groups??[]].sort((et,ve)=>(et.order??0)-(ve.order??0)),ne=z.findIndex(et=>et.id===te.id);if(ne<0)return fe;const he=(te.name??"").trim()||"Grupo",we={...te,id:re,name:`${he} (copia)`},Me=z.slice();return Me.splice(ne+1,0,we),{...fe,groups:Me.map((et,ve)=>({...et,order:ve+1}))}}),ge(re,!0)},le=(re,fe)=>{const z=te[re]??[];Te({[re]:fe(z)})};return m.jsxs("div",{className:"rounded-3xl border border-white/10 bg-slate-950/40",children:[m.jsxs("div",{className:"flex flex-col gap-3 p-4 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{className:"flex flex-1 flex-wrap items-center gap-3",children:[m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>ge(te.id),"aria-expanded":de,title:de?"Colapsar":"Expandir",children:de?"":""}),m.jsxs("div",{className:"min-w-[240px] flex-1",children:[m.jsx("p",{className:"text-sm font-semibold text-white",children:(te.name??"").trim()||"Grupo"}),m.jsxs("p",{className:"text-xs text-white/50",children:[We==="note"?"Nota":"Trabajos","  ",pe,"  ",Ae,We==="work"?`  ${qt==="weighted"?"Ruleta":"Cadencia"}`:"",We==="work"?`  Incluye:${Se||""} Excluye:${ue||""}`:""]})]}),m.jsx("span",{className:ze("rounded-full border px-3 py-1 text-xs font-semibold",te.enabled?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-white/15 bg-white/5 text-white/60"),children:te.enabled?"Enabled":"Disabled"})]}),m.jsxs("div",{className:"flex items-center justify-end gap-2",children:[m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>L(-1),disabled:Ne===0,title:"Subir",children:""}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>L(1),disabled:Ne===Be.length-1,title:"Bajar",children:""}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:ce,title:"Duplicar",children:"Duplicar"}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:q,disabled:Be.length<=1,children:"Eliminar"})]})]}),de?m.jsx("div",{className:"border-t border-white/10 p-5",children:m.jsx("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:m.jsxs("div",{className:"flex flex-1 flex-col gap-3",children:[m.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[m.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-white/70",children:[m.jsx("input",{type:"checkbox",className:"accent-sky-400",checked:te.enabled,onChange:re=>Te({enabled:re.target.checked})}),"Enabled"]}),m.jsx("input",{type:"text",className:"input-field flex-1",value:te.name,onChange:re=>Te({name:re.target.value}),placeholder:"Nombre del grupo"}),m.jsxs("select",{className:"input-field w-36",value:We,onChange:re=>Te({type:re.target.value}),children:[m.jsx("option",{value:"work",children:"Trabajos"}),m.jsx("option",{value:"note",children:"Nota"})]})]}),m.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:"Das"}),m.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[m.jsx("button",{type:"button",className:ze("rounded-full border px-3 py-1 text-xs font-semibold transition",at?"border-sky-500/40 bg-sky-500/10 text-sky-100":"border-white/15 bg-white/5 text-white/70 hover:border-white/30 hover:text-white"),onClick:()=>Te({daysOfWeek:[]}),title:"Vaco = todos los das",children:"Todos"}),ew.map(re=>{const fe=at?!0:rt.includes(re.value);return m.jsx("button",{type:"button",className:ze("h-8 w-8 rounded-full border text-xs font-semibold transition",fe?"border-emerald-500/40 bg-emerald-500/10 text-emerald-100":"border-white/15 bg-white/5 text-white/70 hover:border-white/30 hover:text-white"),onClick:()=>{const z=at?[re.value]:rt.includes(re.value)?rt.filter(ne=>ne!==re.value):[...rt,re.value];Te({daysOfWeek:z.sort((ne,he)=>ne-he)})},title:fe?"Activo":"Inactivo",children:re.label},re.value)})]}),m.jsx("p",{className:"text-xs text-white/50",children:"Si eliges das especficos, solo aparecer esos das."})]}),m.jsxs("div",{className:"grid gap-3 sm:grid-cols-3",children:[m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:"Lmite"}),m.jsxs("select",{className:"input-field",value:Nt,onChange:re=>Te({limitMode:re.target.value}),children:[m.jsx("option",{value:"count",children:"Cantidad"}),m.jsx("option",{value:"minutes",children:"Minutos"}),m.jsx("option",{value:"both",children:"Ambos"})]})]}),m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:"Mx tems"}),m.jsx("input",{type:"number",min:0,className:"input-field",value:te.maxItems??0,onChange:re=>Te({maxItems:Number(re.target.value)})})]}),m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:"Mx min"}),m.jsx("input",{type:"number",min:0,className:"input-field",value:te.minutesBudget??0,onChange:re=>Te({minutesBudget:Number(re.target.value)})})]})]})]}),We==="work"?m.jsxs("div",{className:"mt-2 grid gap-4 lg:grid-cols-2",children:[m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:"Estrategia"}),m.jsxs("select",{className:"input-field",value:qt,onChange:re=>Te({strategy:re.target.value}),children:[m.jsx("option",{value:"overdue",children:"Vencido (cadencia)"}),m.jsx("option",{value:"weighted",children:"Ponderado (ruleta)"})]})]}),m.jsxs("label",{className:"flex items-center gap-2 text-sm text-white/70",children:[m.jsx("input",{type:"checkbox",className:"accent-sky-400",checked:J==="prefer_leaves",onChange:re=>Te({hierarchyRule:re.target.checked?"prefer_leaves":"allow_all"})}),"Preferir hijos (evita padres cuando existan)"]})]}):null,We==="work"?m.jsx("div",{className:"mt-4 grid gap-5 lg:grid-cols-2",children:["include","exclude"].map(re=>m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("p",{className:"text-sm font-semibold text-white/80",children:re==="include"?"Include (OR)":"Exclude (OR)"}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>le(re,fe=>[...fe,{...p5}]),children:"+ Regla"})]}),(te[re]??[]).length===0?m.jsx("p",{className:"text-xs text-white/50",children:re==="include"?"Vaco = incluye todo (se aplican excludes).":"Vaco = no excluye nada."}):null,(te[re]??[]).map((fe,z)=>m.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:["Regla ",z+1]}),m.jsx("button",{type:"button",className:"text-xs font-semibold text-rose-200 hover:text-rose-100",onClick:()=>le(re,ne=>ne.filter((he,we)=>we!==z)),children:"Quitar"})]}),m.jsxs("div",{className:"mt-3 grid gap-3",children:[m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs text-white/50",children:"Tags (AND)"}),m.jsx(Ka,{options:P,value:fe.byTags??[],onChange:ne=>le(re,he=>{const we=[...he];return we[z]={...we[z],byTags:ne},we}),placeholder:"Search tags",allowCreate:!0,onCreate:ne=>{const he=o(ne);return he?{createdValue:he,createdLabel:he}:null}})]}),m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs text-white/50",children:"Node types"}),m.jsx(Ka,{options:G,value:fe.byNodeTypes??[],onChange:ne=>le(re,he=>{const we=[...he];return we[z]={...we[z],byNodeTypes:ne},we}),placeholder:"Search node types",allowCreate:!0,onCreate:ne=>{const he=i(ne);return he?{createdValue:he,createdLabel:ne.trim()}:null}})]}),m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs text-white/50",children:"Work IDs"}),m.jsx("input",{type:"text",className:"input-field",value:G1(fe.byWorkIds),placeholder:"id1, id2",onChange:ne=>{const he=Y1(ne.target.value);le(re,we=>{const Me=[...we];return Me[z]={...Me[z],byWorkIds:he},Me})}})]})]})]},`${re}-${te.id}-${z}`))]},`${te.id}-${re}`))}):null]})})}):null]},te.id)})})]}),m.jsxs("details",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[m.jsx("summary",{className:"cursor-pointer text-sm font-semibold text-white/80",children:"Estimacin de minutos por tipo"}),m.jsx("div",{className:"mt-3 grid gap-3 sm:grid-cols-2",children:Object.entries(R.defaultMinutesByNodeType).sort(([te],[Ne])=>te.localeCompare(Ne,"es",{sensitivity:"base"})).map(([te,Ne])=>m.jsxs("label",{className:"grid gap-2",children:[m.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:te}),m.jsx("input",{type:"number",min:.25,step:.25,className:"input-field",value:Ne,onChange:Be=>D(We=>({...We,defaultMinutesByNodeType:{...We.defaultMinutesByNodeType,[te]:Number(Be.target.value)}}))})]},te))})]})]}),m.jsxs("section",{className:"glass-panel space-y-5 p-6",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-semibold text-white",children:"Cadencias"}),m.jsx("p",{className:"text-sm text-white/60",children:"Objetivo de das por tipo, con overrides por tags."})]}),m.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:Array.from(new Set([...Object.keys(ie.targetsDays??{}),...(r.nodeTypes??[]).map(te=>te.key)])).map(te=>te.trim().toLowerCase()).filter(Boolean).sort((te,Ne)=>te.localeCompare(Ne,"en",{sensitivity:"base"})).map(te=>{var We;const Ne=((We=(r.nodeTypes??[]).find(rt=>rt.key===te))==null?void 0:We.label)??te,Be=(ie.targetsDays??{})[te]??(ie.targetsDays??{}).work??7;return m.jsxs("label",{className:"grid gap-2",children:[m.jsxs("span",{className:"text-xs uppercase tracking-wide text-white/40",children:[Ne," ",m.jsxs("span",{className:"text-white/30",children:["(",te,")"]})]}),m.jsx("input",{type:"number",min:1,className:"input-field",value:Be,onChange:rt=>U(at=>({...at,targetsDays:{...at.targetsDays,[te]:Number(rt.target.value)}}))})]},te)})}),m.jsxs("details",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[m.jsx("summary",{className:"cursor-pointer text-sm font-semibold text-white/80",children:"Overrides"}),m.jsxs("div",{className:"mt-3 space-y-3",children:[(ie.overrides??[]).map((te,Ne)=>m.jsxs("div",{className:"rounded-2xl border border-white/10 bg-slate-950/40 p-4",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:["Override ",Ne+1]}),m.jsx("button",{type:"button",className:"text-xs font-semibold text-rose-200 hover:text-rose-100",onClick:()=>U(Be=>({...Be,overrides:(Be.overrides??[]).filter((We,rt)=>rt!==Ne)})),children:"Quitar"})]}),m.jsxs("div",{className:"mt-3 grid gap-3 sm:grid-cols-2",children:[m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs text-white/50",children:"Tags (ANY)"}),m.jsx(Ka,{options:P,value:te.match.tagsAny??[],onChange:Be=>U(We=>{const rt=[...We.overrides??[]];return rt[Ne]={...te,match:{tagsAny:Be}},{...We,overrides:rt}}),placeholder:"Search tags",allowCreate:!0,onCreate:Be=>{const We=o(Be);return We?{createdValue:We,createdLabel:We}:null}})]}),m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs text-white/50",children:"Multiplier"}),m.jsx("input",{type:"number",min:.1,step:.1,className:"input-field",value:te.multiplier,onChange:Be=>{const We=Number(Be.target.value);U(rt=>{const at=[...rt.overrides??[]];return at[Ne]={...te,multiplier:We},{...rt,overrides:at}})}})]})]})]},`override-${Ne}`)),m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>U(te=>({...te,overrides:[...te.overrides??[],{match:{tagsAny:[]},multiplier:1}]})),children:"+ Aadir override"})]})]})]})]})]})}const nw=[{to:"/",label:"Sesiones"},{to:"/catalog",label:"Trabajos"},{to:"/settings",label:"Ajustes"},{to:"/objectives",label:"Objetivos"},{to:"/assistants",label:"Asistentes"},{to:"/backups",label:"Backups"}];function m5(){const[e,t]=w.useState(!1),[n,r]=w.useState(!1),{user:i,signOut:o}=js(),l=async()=>{try{r(!0),await o()}catch(u){console.error("No se pudo cerrar sesin",u)}finally{r(!1),t(!1)}};return m.jsxs("header",{className:"sticky top-0 z-50 border-b border-white/10 bg-slate-950/80 backdrop-blur-xl",children:[m.jsxs("div",{className:"mx-auto flex max-w-6xl items-center justify-between px-3 py-3 sm:px-4 sm:py-4",children:[m.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[m.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-gradient-to-br from-sky-500 to-indigo-500 text-base font-bold sm:h-10 sm:w-10 sm:text-lg",children:"SP"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-display text-lg font-semibold sm:text-xl",children:"Sport Planner"}),m.jsx("p",{className:"text-[11px] text-white/50 sm:text-xs",children:"Planifica sesiones increbles"})]})]}),m.jsxs("div",{className:"hidden items-center gap-4 md:flex",children:[m.jsx("nav",{className:"flex items-center gap-2",children:nw.map(u=>m.jsx(xv,{to:u.to,className:({isActive:c})=>`rounded-full px-4 py-2 text-sm font-medium transition ${c?"bg-white text-slate-900 shadow-lg shadow-sky-400/30":"text-white/70 hover:text-white hover:bg-white/10"}`,children:u.label},u.to))}),m.jsxs("div",{className:"flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-4 py-2",children:[m.jsxs("div",{className:"text-right",children:[m.jsx("p",{className:"text-xs text-white/50",children:"Sesin iniciada"}),m.jsx("p",{className:"text-sm font-semibold text-white",children:(i==null?void 0:i.email)??"Cuenta"})]}),m.jsx("button",{type:"button",onClick:()=>{l()},disabled:n,className:"inline-flex items-center rounded-full border border-white/20 px-3 py-1 text-xs font-semibold text-white/80 transition hover:bg-white/10 disabled:opacity-60",children:n?"Saliendo":"Cerrar sesin"})]})]}),m.jsx("button",{type:"button",className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-white/20 text-white/80 md:hidden",onClick:()=>t(!0),"aria-label":"Abrir navegacin",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"h-6 w-6",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 6h16M4 12h16M4 18h16"})})})]}),m.jsxs(sx,{open:e,onClose:t,className:"md:hidden",children:[m.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm","aria-hidden":"true"}),m.jsxs(sx.Panel,{className:"fixed inset-y-4 right-3 flex w-[17rem] flex-col rounded-3xl border border-white/10 bg-slate-900/95 p-6 shadow-2xl",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("p",{className:"text-lg font-semibold text-white",children:"Navegacin"}),m.jsx("button",{type:"button",className:"inline-flex h-9 w-9 items-center justify-center rounded-full border border-white/20 text-white/80",onClick:()=>t(!1),"aria-label":"Cerrar navegacin",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"h-5 w-5",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]}),m.jsx("div",{className:"mt-6 flex flex-col gap-2",children:nw.map(u=>m.jsx(xv,{to:u.to,className:({isActive:c})=>`rounded-2xl px-4 py-3 text-sm font-semibold transition ${c?"bg-white text-slate-900 shadow shadow-sky-400/40":"text-white/80 hover:bg-white/10"}`,onClick:()=>t(!1),children:u.label},u.to))}),m.jsxs("div",{className:"mt-auto rounded-2xl border border-white/10 bg-white/5 p-4",children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-white/40",children:"Sesin iniciada"}),m.jsx("p",{className:"mt-1 text-sm font-semibold text-white",children:(i==null?void 0:i.email)??"Cuenta"}),m.jsx("button",{type:"button",onClick:()=>{l()},disabled:n,className:"mt-3 w-full rounded-full border border-white/20 px-3 py-2 text-sm font-semibold text-white/80 transition hover:bg-white/10 disabled:opacity-60",children:n?"Saliendo":"Cerrar sesin"})]})]})]})]})}function g5(){return UR(),WR(),m.jsxs("div",{className:"min-h-screen pb-16",children:[m.jsx(m5,{}),m.jsx("main",{className:"mx-auto w-full max-w-6xl px-3 py-5 sm:px-6 sm:py-10",children:m.jsx(hw,{})})]})}function y5(){return m.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-950",children:m.jsxs("div",{className:"flex flex-col items-center gap-4",children:[m.jsx("div",{className:"h-12 w-12 animate-spin rounded-full border-2 border-white/20 border-t-sky-400"}),m.jsx("p",{className:"text-sm font-medium text-white/60",children:"Cargando Sport Planner"})]})})}function v5(){const{session:e,loading:t}=js(),n=ii();return t?m.jsx(y5,{}):e?m.jsx(hw,{}):m.jsx(Ja,{to:"/login",replace:!0,state:{from:n}})}function x5(){return m.jsx(X_,{children:m.jsxs(W_,{children:[m.jsx(pn,{path:"/login",element:m.jsx(c5,{})}),m.jsx(pn,{element:m.jsx(v5,{}),children:m.jsxs(pn,{element:m.jsx(g5,{}),children:[m.jsx(pn,{index:!0,element:m.jsx(X3,{})}),m.jsx(pn,{path:"personal",element:m.jsx(Ja,{to:"/?plan=personal-kungfu",replace:!0})}),m.jsx(pn,{path:"personal/sessions",element:m.jsx(d5,{})}),m.jsx(pn,{path:"personal/settings",element:m.jsx(tw,{})}),m.jsx(pn,{path:"settings",element:m.jsx(tw,{})}),m.jsx(pn,{path:"plan",element:m.jsx(Z3,{})}),m.jsx(pn,{path:"catalog",element:m.jsx(s5,{})}),m.jsx(pn,{path:"catalog/taxonomy",element:m.jsx(o5,{})}),m.jsx(pn,{path:"objectives",element:m.jsx(a5,{})}),m.jsx(pn,{path:"assistants",element:m.jsx(l5,{})}),m.jsx(pn,{path:"backups",element:m.jsx(u5,{})})]})}),m.jsx(pn,{path:"*",element:m.jsx(Ja,{to:"/",replace:!0})})]})})}function w5({children:e}){const[t,n]=w.useState(null),[r,i]=w.useState(null),[o,l]=w.useState(!0);w.useEffect(()=>{let c=!0;(async()=>{l(!0);const{data:{session:p}}=await Ht.auth.getSession();c&&(n(p),i((p==null?void 0:p.user)??null),l(!1))})();const{data:{subscription:h}}=Ht.auth.onAuthStateChange((p,v)=>{c&&(n(v),i((v==null?void 0:v.user)??null),l(!1))});return()=>{c=!1,h.unsubscribe()}},[]);const u=w.useMemo(()=>({session:t,user:r,loading:o,signInWithPassword:async(c,f)=>{const{error:h}=await Ht.auth.signInWithPassword({email:c,password:f});if(h)throw h},signUpWithPassword:async(c,f)=>{const p=typeof window<"u"?`${window.location.origin}/sport-planner/`:void 0,{error:v}=await Ht.auth.signUp({email:c,password:f,options:{emailRedirectTo:p}});if(v)throw v},signOut:async()=>{const{error:c}=await Ht.auth.signOut();if(c)throw c}}),[o,t,r]);return m.jsx(Fb.Provider,{value:u,children:e})}Ie.getState().hydrate();XE.createRoot(document.getElementById("root")).render(m.jsx(Oe.StrictMode,{children:m.jsx(w5,{children:m.jsx(x5,{})})}));
