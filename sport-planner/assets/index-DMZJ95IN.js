function WE(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Ao(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function HE(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var Rf={exports:{}},Ea={},Of={exports:{}},ot={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sv;function VE(){if(sv)return ot;sv=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function v(B){return B===null||typeof B!="object"?null:(B=p&&B[p]||B["@@iterator"],typeof B=="function"?B:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,E={};function k(B,te,A){this.props=B,this.context=te,this.refs=E,this.updater=A||y}k.prototype.isReactComponent={},k.prototype.setState=function(B,te){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,te,"setState")},k.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function C(){}C.prototype=k.prototype;function _(B,te,A){this.props=B,this.context=te,this.refs=E,this.updater=A||y}var j=_.prototype=new C;j.constructor=_,S(j,k.prototype),j.isPureReactComponent=!0;var I=Array.isArray,O=Object.prototype.hasOwnProperty,P={current:null},$={key:!0,ref:!0,__self:!0,__source:!0};function oe(B,te,A){var pe,fe={},ge=null,Ie=null;if(te!=null)for(pe in te.ref!==void 0&&(Ie=te.ref),te.key!==void 0&&(ge=""+te.key),te)O.call(te,pe)&&!$.hasOwnProperty(pe)&&(fe[pe]=te[pe]);var ve=arguments.length-2;if(ve===1)fe.children=A;else if(1<ve){for(var Ae=Array(ve),_e=0;_e<ve;_e++)Ae[_e]=arguments[_e+2];fe.children=Ae}if(B&&B.defaultProps)for(pe in ve=B.defaultProps,ve)fe[pe]===void 0&&(fe[pe]=ve[pe]);return{$$typeof:e,type:B,key:ge,ref:Ie,props:fe,_owner:P.current}}function X(B,te){return{$$typeof:e,type:B.type,key:te,ref:B.ref,props:B.props,_owner:B._owner}}function R(B){return typeof B=="object"&&B!==null&&B.$$typeof===e}function D(B){var te={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(A){return te[A]})}var re=/\/+/g;function W(B,te){return typeof B=="object"&&B!==null&&B.key!=null?D(""+B.key):te.toString(36)}function Y(B,te,A,pe,fe){var ge=typeof B;(ge==="undefined"||ge==="boolean")&&(B=null);var Ie=!1;if(B===null)Ie=!0;else switch(ge){case"string":case"number":Ie=!0;break;case"object":switch(B.$$typeof){case e:case t:Ie=!0}}if(Ie)return Ie=B,fe=fe(Ie),B=pe===""?"."+W(Ie,0):pe,I(fe)?(A="",B!=null&&(A=B.replace(re,"$&/")+"/"),Y(fe,te,A,"",function(_e){return _e})):fe!=null&&(R(fe)&&(fe=X(fe,A+(!fe.key||Ie&&Ie.key===fe.key?"":(""+fe.key).replace(re,"$&/")+"/")+B)),te.push(fe)),1;if(Ie=0,pe=pe===""?".":pe+":",I(B))for(var ve=0;ve<B.length;ve++){ge=B[ve];var Ae=pe+W(ge,ve);Ie+=Y(ge,te,A,Ae,fe)}else if(Ae=v(B),typeof Ae=="function")for(B=Ae.call(B),ve=0;!(ge=B.next()).done;)ge=ge.value,Ae=pe+W(ge,ve++),Ie+=Y(ge,te,A,Ae,fe);else if(ge==="object")throw te=String(B),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.");return Ie}function M(B,te,A){if(B==null)return B;var pe=[],fe=0;return Y(B,pe,"","",function(ge){return te.call(A,ge,fe++)}),pe}function G(B){if(B._status===-1){var te=B._result;te=te(),te.then(function(A){(B._status===0||B._status===-1)&&(B._status=1,B._result=A)},function(A){(B._status===0||B._status===-1)&&(B._status=2,B._result=A)}),B._status===-1&&(B._status=0,B._result=te)}if(B._status===1)return B._result.default;throw B._result}var ae={current:null},F={transition:null},ee={ReactCurrentDispatcher:ae,ReactCurrentBatchConfig:F,ReactCurrentOwner:P};function T(){throw Error("act(...) is not supported in production builds of React.")}return ot.Children={map:M,forEach:function(B,te,A){M(B,function(){te.apply(this,arguments)},A)},count:function(B){var te=0;return M(B,function(){te++}),te},toArray:function(B){return M(B,function(te){return te})||[]},only:function(B){if(!R(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},ot.Component=k,ot.Fragment=n,ot.Profiler=i,ot.PureComponent=_,ot.StrictMode=r,ot.Suspense=c,ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ee,ot.act=T,ot.cloneElement=function(B,te,A){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var pe=S({},B.props),fe=B.key,ge=B.ref,Ie=B._owner;if(te!=null){if(te.ref!==void 0&&(ge=te.ref,Ie=P.current),te.key!==void 0&&(fe=""+te.key),B.type&&B.type.defaultProps)var ve=B.type.defaultProps;for(Ae in te)O.call(te,Ae)&&!$.hasOwnProperty(Ae)&&(pe[Ae]=te[Ae]===void 0&&ve!==void 0?ve[Ae]:te[Ae])}var Ae=arguments.length-2;if(Ae===1)pe.children=A;else if(1<Ae){ve=Array(Ae);for(var _e=0;_e<Ae;_e++)ve[_e]=arguments[_e+2];pe.children=ve}return{$$typeof:e,type:B.type,key:fe,ref:ge,props:pe,_owner:Ie}},ot.createContext=function(B){return B={$$typeof:l,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:o,_context:B},B.Consumer=B},ot.createElement=oe,ot.createFactory=function(B){var te=oe.bind(null,B);return te.type=B,te},ot.createRef=function(){return{current:null}},ot.forwardRef=function(B){return{$$typeof:u,render:B}},ot.isValidElement=R,ot.lazy=function(B){return{$$typeof:h,_payload:{_status:-1,_result:B},_init:G}},ot.memo=function(B,te){return{$$typeof:f,type:B,compare:te===void 0?null:te}},ot.startTransition=function(B){var te=F.transition;F.transition={};try{B()}finally{F.transition=te}},ot.unstable_act=T,ot.useCallback=function(B,te){return ae.current.useCallback(B,te)},ot.useContext=function(B){return ae.current.useContext(B)},ot.useDebugValue=function(){},ot.useDeferredValue=function(B){return ae.current.useDeferredValue(B)},ot.useEffect=function(B,te){return ae.current.useEffect(B,te)},ot.useId=function(){return ae.current.useId()},ot.useImperativeHandle=function(B,te,A){return ae.current.useImperativeHandle(B,te,A)},ot.useInsertionEffect=function(B,te){return ae.current.useInsertionEffect(B,te)},ot.useLayoutEffect=function(B,te){return ae.current.useLayoutEffect(B,te)},ot.useMemo=function(B,te){return ae.current.useMemo(B,te)},ot.useReducer=function(B,te,A){return ae.current.useReducer(B,te,A)},ot.useRef=function(B){return ae.current.useRef(B)},ot.useState=function(B){return ae.current.useState(B)},ot.useSyncExternalStore=function(B,te,A){return ae.current.useSyncExternalStore(B,te,A)},ot.useTransition=function(){return ae.current.useTransition()},ot.version="18.3.1",ot}var ov;function kc(){return ov||(ov=1,Of.exports=VE()),Of.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var av;function qE(){if(av)return Ea;av=1;var e=kc(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,c,f){var h,p={},v=null,y=null;f!==void 0&&(v=""+f),c.key!==void 0&&(v=""+c.key),c.ref!==void 0&&(y=c.ref);for(h in c)r.call(c,h)&&!o.hasOwnProperty(h)&&(p[h]=c[h]);if(u&&u.defaultProps)for(h in c=u.defaultProps,c)p[h]===void 0&&(p[h]=c[h]);return{$$typeof:t,type:u,key:v,ref:y,props:p,_owner:i.current}}return Ea.Fragment=n,Ea.jsx=l,Ea.jsxs=l,Ea}var lv;function YE(){return lv||(lv=1,Rf.exports=qE()),Rf.exports}var g=YE(),w=kc();const Re=Ao(w),Xu=WE({__proto__:null,default:Re},[w]);var Eu={},Mf={exports:{}},Pn={},Lf={exports:{}},Df={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uv;function GE(){return uv||(uv=1,(function(e){function t(F,ee){var T=F.length;F.push(ee);e:for(;0<T;){var B=T-1>>>1,te=F[B];if(0<i(te,ee))F[B]=ee,F[T]=te,T=B;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var ee=F[0],T=F.pop();if(T!==ee){F[0]=T;e:for(var B=0,te=F.length,A=te>>>1;B<A;){var pe=2*(B+1)-1,fe=F[pe],ge=pe+1,Ie=F[ge];if(0>i(fe,T))ge<te&&0>i(Ie,fe)?(F[B]=Ie,F[ge]=T,B=ge):(F[B]=fe,F[pe]=T,B=pe);else if(ge<te&&0>i(Ie,T))F[B]=Ie,F[ge]=T,B=ge;else break e}}return ee}function i(F,ee){var T=F.sortIndex-ee.sortIndex;return T!==0?T:F.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var c=[],f=[],h=1,p=null,v=3,y=!1,S=!1,E=!1,k=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(F){for(var ee=n(f);ee!==null;){if(ee.callback===null)r(f);else if(ee.startTime<=F)r(f),ee.sortIndex=ee.expirationTime,t(c,ee);else break;ee=n(f)}}function I(F){if(E=!1,j(F),!S)if(n(c)!==null)S=!0,G(O);else{var ee=n(f);ee!==null&&ae(I,ee.startTime-F)}}function O(F,ee){S=!1,E&&(E=!1,C(oe),oe=-1),y=!0;var T=v;try{for(j(ee),p=n(c);p!==null&&(!(p.expirationTime>ee)||F&&!D());){var B=p.callback;if(typeof B=="function"){p.callback=null,v=p.priorityLevel;var te=B(p.expirationTime<=ee);ee=e.unstable_now(),typeof te=="function"?p.callback=te:p===n(c)&&r(c),j(ee)}else r(c);p=n(c)}if(p!==null)var A=!0;else{var pe=n(f);pe!==null&&ae(I,pe.startTime-ee),A=!1}return A}finally{p=null,v=T,y=!1}}var P=!1,$=null,oe=-1,X=5,R=-1;function D(){return!(e.unstable_now()-R<X)}function re(){if($!==null){var F=e.unstable_now();R=F;var ee=!0;try{ee=$(!0,F)}finally{ee?W():(P=!1,$=null)}}else P=!1}var W;if(typeof _=="function")W=function(){_(re)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,M=Y.port2;Y.port1.onmessage=re,W=function(){M.postMessage(null)}}else W=function(){k(re,0)};function G(F){$=F,P||(P=!0,W())}function ae(F,ee){oe=k(function(){F(e.unstable_now())},ee)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(F){F.callback=null},e.unstable_continueExecution=function(){S||y||(S=!0,G(O))},e.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<F?Math.floor(1e3/F):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(F){switch(v){case 1:case 2:case 3:var ee=3;break;default:ee=v}var T=v;v=ee;try{return F()}finally{v=T}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(F,ee){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var T=v;v=F;try{return ee()}finally{v=T}},e.unstable_scheduleCallback=function(F,ee,T){var B=e.unstable_now();switch(typeof T=="object"&&T!==null?(T=T.delay,T=typeof T=="number"&&0<T?B+T:B):T=B,F){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=T+te,F={id:h++,callback:ee,priorityLevel:F,startTime:T,expirationTime:te,sortIndex:-1},T>B?(F.sortIndex=T,t(f,F),n(c)===null&&F===n(f)&&(E?(C(oe),oe=-1):E=!0,ae(I,T-B))):(F.sortIndex=te,t(c,F),S||y||(S=!0,G(O))),F},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(F){var ee=v;return function(){var T=v;v=ee;try{return F.apply(this,arguments)}finally{v=T}}}})(Df)),Df}var cv;function KE(){return cv||(cv=1,Lf.exports=GE()),Lf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dv;function JE(){if(dv)return Pn;dv=1;var e=kc(),t=KE();function n(s){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+s,d=1;d<arguments.length;d++)a+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(s,a){l(s,a),l(s+"Capture",a)}function l(s,a){for(i[s]=a,s=0;s<a.length;s++)r.add(a[s])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function v(s){return c.call(p,s)?!0:c.call(h,s)?!1:f.test(s)?p[s]=!0:(h[s]=!0,!1)}function y(s,a,d,m){if(d!==null&&d.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return m?!1:d!==null?!d.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function S(s,a,d,m){if(a===null||typeof a>"u"||y(s,a,d,m))return!0;if(m)return!1;if(d!==null)switch(d.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function E(s,a,d,m,x,b,N){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=m,this.attributeNamespace=x,this.mustUseProperty=d,this.propertyName=s,this.type=a,this.sanitizeURL=b,this.removeEmptyString=N}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){k[s]=new E(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var a=s[0];k[a]=new E(a,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){k[s]=new E(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){k[s]=new E(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){k[s]=new E(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){k[s]=new E(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){k[s]=new E(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){k[s]=new E(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){k[s]=new E(s,5,!1,s.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function _(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var a=s.replace(C,_);k[a]=new E(a,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var a=s.replace(C,_);k[a]=new E(a,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var a=s.replace(C,_);k[a]=new E(a,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){k[s]=new E(s,1,!1,s.toLowerCase(),null,!1,!1)}),k.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){k[s]=new E(s,1,!1,s.toLowerCase(),null,!0,!0)});function j(s,a,d,m){var x=k.hasOwnProperty(a)?k[a]:null;(x!==null?x.type!==0:m||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(S(a,d,x,m)&&(d=null),m||x===null?v(a)&&(d===null?s.removeAttribute(a):s.setAttribute(a,""+d)):x.mustUseProperty?s[x.propertyName]=d===null?x.type===3?!1:"":d:(a=x.attributeName,m=x.attributeNamespace,d===null?s.removeAttribute(a):(x=x.type,d=x===3||x===4&&d===!0?"":""+d,m?s.setAttributeNS(m,a,d):s.setAttribute(a,d))))}var I=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,O=Symbol.for("react.element"),P=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),oe=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),D=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),ae=Symbol.for("react.offscreen"),F=Symbol.iterator;function ee(s){return s===null||typeof s!="object"?null:(s=F&&s[F]||s["@@iterator"],typeof s=="function"?s:null)}var T=Object.assign,B;function te(s){if(B===void 0)try{throw Error()}catch(d){var a=d.stack.trim().match(/\n( *(at )?)/);B=a&&a[1]||""}return`
`+B+s}var A=!1;function pe(s,a){if(!s||A)return"";A=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(ce){var m=ce}Reflect.construct(s,[],a)}else{try{a.call()}catch(ce){m=ce}s.call(a.prototype)}else{try{throw Error()}catch(ce){m=ce}s()}}catch(ce){if(ce&&m&&typeof ce.stack=="string"){for(var x=ce.stack.split(`
`),b=m.stack.split(`
`),N=x.length-1,z=b.length-1;1<=N&&0<=z&&x[N]!==b[z];)z--;for(;1<=N&&0<=z;N--,z--)if(x[N]!==b[z]){if(N!==1||z!==1)do if(N--,z--,0>z||x[N]!==b[z]){var V=`
`+x[N].replace(" at new "," at ");return s.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",s.displayName)),V}while(1<=N&&0<=z);break}}}finally{A=!1,Error.prepareStackTrace=d}return(s=s?s.displayName||s.name:"")?te(s):""}function fe(s){switch(s.tag){case 5:return te(s.type);case 16:return te("Lazy");case 13:return te("Suspense");case 19:return te("SuspenseList");case 0:case 2:case 15:return s=pe(s.type,!1),s;case 11:return s=pe(s.type.render,!1),s;case 1:return s=pe(s.type,!0),s;default:return""}}function ge(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case $:return"Fragment";case P:return"Portal";case X:return"Profiler";case oe:return"StrictMode";case W:return"Suspense";case Y:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case D:return(s.displayName||"Context")+".Consumer";case R:return(s._context.displayName||"Context")+".Provider";case re:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case M:return a=s.displayName||null,a!==null?a:ge(s.type)||"Memo";case G:a=s._payload,s=s._init;try{return ge(s(a))}catch{}}return null}function Ie(s){var a=s.type;switch(s.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=a.render,s=s.displayName||s.name||"",a.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ge(a);case 8:return a===oe?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function ve(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ae(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function _e(s){var a=Ae(s)?"checked":"value",d=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),m=""+s[a];if(!s.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var x=d.get,b=d.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return x.call(this)},set:function(N){m=""+N,b.call(this,N)}}),Object.defineProperty(s,a,{enumerable:d.enumerable}),{getValue:function(){return m},setValue:function(N){m=""+N},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function Z(s){s._valueTracker||(s._valueTracker=_e(s))}function je(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var d=a.getValue(),m="";return s&&(m=Ae(s)?s.checked?"true":"false":s.value),s=m,s!==d?(a.setValue(s),!0):!1}function $e(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Be(s,a){var d=a.checked;return T({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??s._wrapperState.initialChecked})}function Qe(s,a){var d=a.defaultValue==null?"":a.defaultValue,m=a.checked!=null?a.checked:a.defaultChecked;d=ve(a.value!=null?a.value:d),s._wrapperState={initialChecked:m,initialValue:d,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function st(s,a){a=a.checked,a!=null&&j(s,"checked",a,!1)}function bt(s,a){st(s,a);var d=ve(a.value),m=a.type;if(d!=null)m==="number"?(d===0&&s.value===""||s.value!=d)&&(s.value=""+d):s.value!==""+d&&(s.value=""+d);else if(m==="submit"||m==="reset"){s.removeAttribute("value");return}a.hasOwnProperty("value")?J(s,a.type,d):a.hasOwnProperty("defaultValue")&&J(s,a.type,ve(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(s.defaultChecked=!!a.defaultChecked)}function Ft(s,a,d){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var m=a.type;if(!(m!=="submit"&&m!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+s._wrapperState.initialValue,d||a===s.value||(s.value=a),s.defaultValue=a}d=s.name,d!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,d!==""&&(s.name=d)}function J(s,a,d){(a!=="number"||$e(s.ownerDocument)!==s)&&(d==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+d&&(s.defaultValue=""+d))}var de=Array.isArray;function me(s,a,d,m){if(s=s.options,a){a={};for(var x=0;x<d.length;x++)a["$"+d[x]]=!0;for(d=0;d<s.length;d++)x=a.hasOwnProperty("$"+s[d].value),s[d].selected!==x&&(s[d].selected=x),x&&m&&(s[d].defaultSelected=!0)}else{for(d=""+ve(d),a=null,x=0;x<s.length;x++){if(s[x].value===d){s[x].selected=!0,m&&(s[x].defaultSelected=!0);return}a!==null||s[x].disabled||(a=s[x])}a!==null&&(a.selected=!0)}}function K(s,a){if(a.dangerouslySetInnerHTML!=null)throw Error(n(91));return T({},a,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function ne(s,a){var d=a.value;if(d==null){if(d=a.children,a=a.defaultValue,d!=null){if(a!=null)throw Error(n(92));if(de(d)){if(1<d.length)throw Error(n(93));d=d[0]}a=d}a==null&&(a=""),d=a}s._wrapperState={initialValue:ve(d)}}function H(s,a){var d=ve(a.value),m=ve(a.defaultValue);d!=null&&(d=""+d,d!==s.value&&(s.value=d),a.defaultValue==null&&s.defaultValue!==d&&(s.defaultValue=d)),m!=null&&(s.defaultValue=""+m)}function ie(s){var a=s.textContent;a===s._wrapperState.initialValue&&a!==""&&a!==null&&(s.value=a)}function U(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(s,a){return s==null||s==="http://www.w3.org/1999/xhtml"?U(a):s==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var xe,Ne=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,d,m,x){MSApp.execUnsafeLocalFunction(function(){return s(a,d,m,x)})}:s})(function(s,a){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=a;else{for(xe=xe||document.createElement("div"),xe.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=xe.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;a.firstChild;)s.appendChild(a.firstChild)}});function L(s,a){if(a){var d=s.firstChild;if(d&&d===s.lastChild&&d.nodeType===3){d.nodeValue=a;return}}s.textContent=a}var q={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},be=["Webkit","ms","Moz","O"];Object.keys(q).forEach(function(s){be.forEach(function(a){a=a+s.charAt(0).toUpperCase()+s.substring(1),q[a]=q[s]})});function ye(s,a,d){return a==null||typeof a=="boolean"||a===""?"":d||typeof a!="number"||a===0||q.hasOwnProperty(s)&&q[s]?(""+a).trim():a+"px"}function he(s,a){s=s.style;for(var d in a)if(a.hasOwnProperty(d)){var m=d.indexOf("--")===0,x=ye(d,a[d],m);d==="float"&&(d="cssFloat"),m?s.setProperty(d,x):s[d]=x}}var Pe=T({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ue(s,a){if(a){if(Pe[s]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(n(137,s));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(n(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(n(61))}if(a.style!=null&&typeof a.style!="object")throw Error(n(62))}}function Xe(s,a){if(s.indexOf("-")===-1)return typeof a.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Me=null;function ht(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var it=null,Mt=null,ct=null;function Je(s){if(s=ua(s)){if(typeof it!="function")throw Error(n(280));var a=s.stateNode;a&&(a=Fl(a),it(s.stateNode,s.type,a))}}function lt(s){Mt?ct?ct.push(s):ct=[s]:Mt=s}function et(){if(Mt){var s=Mt,a=ct;if(ct=Mt=null,Je(s),a)for(s=0;s<a.length;s++)Je(a[s])}}function yt(s,a){return s(a)}function ln(){}var _n=!1;function Hr(s,a,d){if(_n)return s(a,d);_n=!0;try{return yt(s,a,d)}finally{_n=!1,(Mt!==null||ct!==null)&&(ln(),et())}}function Tt(s,a){var d=s.stateNode;if(d===null)return null;var m=Fl(d);if(m===null)return null;d=m[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(s=s.type,m=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!m;break e;default:s=!1}if(s)return null;if(d&&typeof d!="function")throw Error(n(231,a,typeof d));return d}var Jn=!1;if(u)try{var un={};Object.defineProperty(un,"passive",{get:function(){Jn=!0}}),window.addEventListener("test",un,un),window.removeEventListener("test",un,un)}catch{Jn=!1}function ur(s,a,d,m,x,b,N,z,V){var ce=Array.prototype.slice.call(arguments,3);try{a.apply(d,ce)}catch(ke){this.onError(ke)}}var cr=!1,Cr=null,$n=!1,Vr=null,Ho={onError:function(s){cr=!0,Cr=s}};function Q1(s,a,d,m,x,b,N,z,V){cr=!1,Cr=null,ur.apply(Ho,arguments)}function X1(s,a,d,m,x,b,N,z,V){if(Q1.apply(this,arguments),cr){if(cr){var ce=Cr;cr=!1,Cr=null}else throw Error(n(198));$n||($n=!0,Vr=ce)}}function Vi(s){var a=s,d=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(d=a.return),s=a.return;while(s)}return a.tag===3?d:null}function Nm(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function Tm(s){if(Vi(s)!==s)throw Error(n(188))}function Z1(s){var a=s.alternate;if(!a){if(a=Vi(s),a===null)throw Error(n(188));return a!==s?null:s}for(var d=s,m=a;;){var x=d.return;if(x===null)break;var b=x.alternate;if(b===null){if(m=x.return,m!==null){d=m;continue}break}if(x.child===b.child){for(b=x.child;b;){if(b===d)return Tm(x),s;if(b===m)return Tm(x),a;b=b.sibling}throw Error(n(188))}if(d.return!==m.return)d=x,m=b;else{for(var N=!1,z=x.child;z;){if(z===d){N=!0,d=x,m=b;break}if(z===m){N=!0,m=x,d=b;break}z=z.sibling}if(!N){for(z=b.child;z;){if(z===d){N=!0,d=b,m=x;break}if(z===m){N=!0,m=b,d=x;break}z=z.sibling}if(!N)throw Error(n(189))}}if(d.alternate!==m)throw Error(n(190))}if(d.tag!==3)throw Error(n(188));return d.stateNode.current===d?s:a}function Im(s){return s=Z1(s),s!==null?Pm(s):null}function Pm(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var a=Pm(s);if(a!==null)return a;s=s.sibling}return null}var Am=t.unstable_scheduleCallback,Rm=t.unstable_cancelCallback,eS=t.unstable_shouldYield,tS=t.unstable_requestPaint,Lt=t.unstable_now,nS=t.unstable_getCurrentPriorityLevel,Xc=t.unstable_ImmediatePriority,Om=t.unstable_UserBlockingPriority,xl=t.unstable_NormalPriority,rS=t.unstable_LowPriority,Mm=t.unstable_IdlePriority,wl=null,jr=null;function iS(s){if(jr&&typeof jr.onCommitFiberRoot=="function")try{jr.onCommitFiberRoot(wl,s,void 0,(s.current.flags&128)===128)}catch{}}var dr=Math.clz32?Math.clz32:aS,sS=Math.log,oS=Math.LN2;function aS(s){return s>>>=0,s===0?32:31-(sS(s)/oS|0)|0}var bl=64,kl=4194304;function Vo(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Sl(s,a){var d=s.pendingLanes;if(d===0)return 0;var m=0,x=s.suspendedLanes,b=s.pingedLanes,N=d&268435455;if(N!==0){var z=N&~x;z!==0?m=Vo(z):(b&=N,b!==0&&(m=Vo(b)))}else N=d&~x,N!==0?m=Vo(N):b!==0&&(m=Vo(b));if(m===0)return 0;if(a!==0&&a!==m&&(a&x)===0&&(x=m&-m,b=a&-a,x>=b||x===16&&(b&4194240)!==0))return a;if((m&4)!==0&&(m|=d&16),a=s.entangledLanes,a!==0)for(s=s.entanglements,a&=m;0<a;)d=31-dr(a),x=1<<d,m|=s[d],a&=~x;return m}function lS(s,a){switch(s){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uS(s,a){for(var d=s.suspendedLanes,m=s.pingedLanes,x=s.expirationTimes,b=s.pendingLanes;0<b;){var N=31-dr(b),z=1<<N,V=x[N];V===-1?((z&d)===0||(z&m)!==0)&&(x[N]=lS(z,a)):V<=a&&(s.expiredLanes|=z),b&=~z}}function Zc(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Lm(){var s=bl;return bl<<=1,(bl&4194240)===0&&(bl=64),s}function ed(s){for(var a=[],d=0;31>d;d++)a.push(s);return a}function qo(s,a,d){s.pendingLanes|=a,a!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,a=31-dr(a),s[a]=d}function cS(s,a){var d=s.pendingLanes&~a;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=a,s.mutableReadLanes&=a,s.entangledLanes&=a,a=s.entanglements;var m=s.eventTimes;for(s=s.expirationTimes;0<d;){var x=31-dr(d),b=1<<x;a[x]=0,m[x]=-1,s[x]=-1,d&=~b}}function td(s,a){var d=s.entangledLanes|=a;for(s=s.entanglements;d;){var m=31-dr(d),x=1<<m;x&a|s[m]&a&&(s[m]|=a),d&=~x}}var mt=0;function Dm(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var $m,nd,Fm,zm,Bm,rd=!1,El=[],ai=null,li=null,ui=null,Yo=new Map,Go=new Map,ci=[],dS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Um(s,a){switch(s){case"focusin":case"focusout":ai=null;break;case"dragenter":case"dragleave":li=null;break;case"mouseover":case"mouseout":ui=null;break;case"pointerover":case"pointerout":Yo.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Go.delete(a.pointerId)}}function Ko(s,a,d,m,x,b){return s===null||s.nativeEvent!==b?(s={blockedOn:a,domEventName:d,eventSystemFlags:m,nativeEvent:b,targetContainers:[x]},a!==null&&(a=ua(a),a!==null&&nd(a)),s):(s.eventSystemFlags|=m,a=s.targetContainers,x!==null&&a.indexOf(x)===-1&&a.push(x),s)}function fS(s,a,d,m,x){switch(a){case"focusin":return ai=Ko(ai,s,a,d,m,x),!0;case"dragenter":return li=Ko(li,s,a,d,m,x),!0;case"mouseover":return ui=Ko(ui,s,a,d,m,x),!0;case"pointerover":var b=x.pointerId;return Yo.set(b,Ko(Yo.get(b)||null,s,a,d,m,x)),!0;case"gotpointercapture":return b=x.pointerId,Go.set(b,Ko(Go.get(b)||null,s,a,d,m,x)),!0}return!1}function Wm(s){var a=qi(s.target);if(a!==null){var d=Vi(a);if(d!==null){if(a=d.tag,a===13){if(a=Nm(d),a!==null){s.blockedOn=a,Bm(s.priority,function(){Fm(d)});return}}else if(a===3&&d.stateNode.current.memoizedState.isDehydrated){s.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}s.blockedOn=null}function _l(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var d=sd(s.domEventName,s.eventSystemFlags,a[0],s.nativeEvent);if(d===null){d=s.nativeEvent;var m=new d.constructor(d.type,d);Me=m,d.target.dispatchEvent(m),Me=null}else return a=ua(d),a!==null&&nd(a),s.blockedOn=d,!1;a.shift()}return!0}function Hm(s,a,d){_l(s)&&d.delete(a)}function hS(){rd=!1,ai!==null&&_l(ai)&&(ai=null),li!==null&&_l(li)&&(li=null),ui!==null&&_l(ui)&&(ui=null),Yo.forEach(Hm),Go.forEach(Hm)}function Jo(s,a){s.blockedOn===a&&(s.blockedOn=null,rd||(rd=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,hS)))}function Qo(s){function a(x){return Jo(x,s)}if(0<El.length){Jo(El[0],s);for(var d=1;d<El.length;d++){var m=El[d];m.blockedOn===s&&(m.blockedOn=null)}}for(ai!==null&&Jo(ai,s),li!==null&&Jo(li,s),ui!==null&&Jo(ui,s),Yo.forEach(a),Go.forEach(a),d=0;d<ci.length;d++)m=ci[d],m.blockedOn===s&&(m.blockedOn=null);for(;0<ci.length&&(d=ci[0],d.blockedOn===null);)Wm(d),d.blockedOn===null&&ci.shift()}var Ps=I.ReactCurrentBatchConfig,Cl=!0;function pS(s,a,d,m){var x=mt,b=Ps.transition;Ps.transition=null;try{mt=1,id(s,a,d,m)}finally{mt=x,Ps.transition=b}}function mS(s,a,d,m){var x=mt,b=Ps.transition;Ps.transition=null;try{mt=4,id(s,a,d,m)}finally{mt=x,Ps.transition=b}}function id(s,a,d,m){if(Cl){var x=sd(s,a,d,m);if(x===null)kd(s,a,m,jl,d),Um(s,m);else if(fS(x,s,a,d,m))m.stopPropagation();else if(Um(s,m),a&4&&-1<dS.indexOf(s)){for(;x!==null;){var b=ua(x);if(b!==null&&$m(b),b=sd(s,a,d,m),b===null&&kd(s,a,m,jl,d),b===x)break;x=b}x!==null&&m.stopPropagation()}else kd(s,a,m,null,d)}}var jl=null;function sd(s,a,d,m){if(jl=null,s=ht(m),s=qi(s),s!==null)if(a=Vi(s),a===null)s=null;else if(d=a.tag,d===13){if(s=Nm(a),s!==null)return s;s=null}else if(d===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null);return jl=s,null}function Vm(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nS()){case Xc:return 1;case Om:return 4;case xl:case rS:return 16;case Mm:return 536870912;default:return 16}default:return 16}}var di=null,od=null,Nl=null;function qm(){if(Nl)return Nl;var s,a=od,d=a.length,m,x="value"in di?di.value:di.textContent,b=x.length;for(s=0;s<d&&a[s]===x[s];s++);var N=d-s;for(m=1;m<=N&&a[d-m]===x[b-m];m++);return Nl=x.slice(s,1<m?1-m:void 0)}function Tl(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Il(){return!0}function Ym(){return!1}function Fn(s){function a(d,m,x,b,N){this._reactName=d,this._targetInst=x,this.type=m,this.nativeEvent=b,this.target=N,this.currentTarget=null;for(var z in s)s.hasOwnProperty(z)&&(d=s[z],this[z]=d?d(b):b[z]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Il:Ym,this.isPropagationStopped=Ym,this}return T(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Il)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Il)},persist:function(){},isPersistent:Il}),a}var As={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ad=Fn(As),Xo=T({},As,{view:0,detail:0}),gS=Fn(Xo),ld,ud,Zo,Pl=T({},Xo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dd,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Zo&&(Zo&&s.type==="mousemove"?(ld=s.screenX-Zo.screenX,ud=s.screenY-Zo.screenY):ud=ld=0,Zo=s),ld)},movementY:function(s){return"movementY"in s?s.movementY:ud}}),Gm=Fn(Pl),yS=T({},Pl,{dataTransfer:0}),vS=Fn(yS),xS=T({},Xo,{relatedTarget:0}),cd=Fn(xS),wS=T({},As,{animationName:0,elapsedTime:0,pseudoElement:0}),bS=Fn(wS),kS=T({},As,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),SS=Fn(kS),ES=T({},As,{data:0}),Km=Fn(ES),_S={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},CS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function NS(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=jS[s])?!!a[s]:!1}function dd(){return NS}var TS=T({},Xo,{key:function(s){if(s.key){var a=_S[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=Tl(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?CS[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dd,charCode:function(s){return s.type==="keypress"?Tl(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Tl(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),IS=Fn(TS),PS=T({},Pl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jm=Fn(PS),AS=T({},Xo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dd}),RS=Fn(AS),OS=T({},As,{propertyName:0,elapsedTime:0,pseudoElement:0}),MS=Fn(OS),LS=T({},Pl,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),DS=Fn(LS),$S=[9,13,27,32],fd=u&&"CompositionEvent"in window,ea=null;u&&"documentMode"in document&&(ea=document.documentMode);var FS=u&&"TextEvent"in window&&!ea,Qm=u&&(!fd||ea&&8<ea&&11>=ea),Xm=" ",Zm=!1;function eg(s,a){switch(s){case"keyup":return $S.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tg(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Rs=!1;function zS(s,a){switch(s){case"compositionend":return tg(a);case"keypress":return a.which!==32?null:(Zm=!0,Xm);case"textInput":return s=a.data,s===Xm&&Zm?null:s;default:return null}}function BS(s,a){if(Rs)return s==="compositionend"||!fd&&eg(s,a)?(s=qm(),Nl=od=di=null,Rs=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Qm&&a.locale!=="ko"?null:a.data;default:return null}}var US={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ng(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!US[s.type]:a==="textarea"}function rg(s,a,d,m){lt(m),a=Ll(a,"onChange"),0<a.length&&(d=new ad("onChange","change",null,d,m),s.push({event:d,listeners:a}))}var ta=null,na=null;function WS(s){bg(s,0)}function Al(s){var a=$s(s);if(je(a))return s}function HS(s,a){if(s==="change")return a}var ig=!1;if(u){var hd;if(u){var pd="oninput"in document;if(!pd){var sg=document.createElement("div");sg.setAttribute("oninput","return;"),pd=typeof sg.oninput=="function"}hd=pd}else hd=!1;ig=hd&&(!document.documentMode||9<document.documentMode)}function og(){ta&&(ta.detachEvent("onpropertychange",ag),na=ta=null)}function ag(s){if(s.propertyName==="value"&&Al(na)){var a=[];rg(a,na,s,ht(s)),Hr(WS,a)}}function VS(s,a,d){s==="focusin"?(og(),ta=a,na=d,ta.attachEvent("onpropertychange",ag)):s==="focusout"&&og()}function qS(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Al(na)}function YS(s,a){if(s==="click")return Al(a)}function GS(s,a){if(s==="input"||s==="change")return Al(a)}function KS(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var fr=typeof Object.is=="function"?Object.is:KS;function ra(s,a){if(fr(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var d=Object.keys(s),m=Object.keys(a);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var x=d[m];if(!c.call(a,x)||!fr(s[x],a[x]))return!1}return!0}function lg(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function ug(s,a){var d=lg(s);s=0;for(var m;d;){if(d.nodeType===3){if(m=s+d.textContent.length,s<=a&&m>=a)return{node:d,offset:a-s};s=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=lg(d)}}function cg(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?cg(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function dg(){for(var s=window,a=$e();a instanceof s.HTMLIFrameElement;){try{var d=typeof a.contentWindow.location.href=="string"}catch{d=!1}if(d)s=a.contentWindow;else break;a=$e(s.document)}return a}function md(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}function JS(s){var a=dg(),d=s.focusedElem,m=s.selectionRange;if(a!==d&&d&&d.ownerDocument&&cg(d.ownerDocument.documentElement,d)){if(m!==null&&md(d)){if(a=m.start,s=m.end,s===void 0&&(s=a),"selectionStart"in d)d.selectionStart=a,d.selectionEnd=Math.min(s,d.value.length);else if(s=(a=d.ownerDocument||document)&&a.defaultView||window,s.getSelection){s=s.getSelection();var x=d.textContent.length,b=Math.min(m.start,x);m=m.end===void 0?b:Math.min(m.end,x),!s.extend&&b>m&&(x=m,m=b,b=x),x=ug(d,b);var N=ug(d,m);x&&N&&(s.rangeCount!==1||s.anchorNode!==x.node||s.anchorOffset!==x.offset||s.focusNode!==N.node||s.focusOffset!==N.offset)&&(a=a.createRange(),a.setStart(x.node,x.offset),s.removeAllRanges(),b>m?(s.addRange(a),s.extend(N.node,N.offset)):(a.setEnd(N.node,N.offset),s.addRange(a)))}}for(a=[],s=d;s=s.parentNode;)s.nodeType===1&&a.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<a.length;d++)s=a[d],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var QS=u&&"documentMode"in document&&11>=document.documentMode,Os=null,gd=null,ia=null,yd=!1;function fg(s,a,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;yd||Os==null||Os!==$e(m)||(m=Os,"selectionStart"in m&&md(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),ia&&ra(ia,m)||(ia=m,m=Ll(gd,"onSelect"),0<m.length&&(a=new ad("onSelect","select",null,a,d),s.push({event:a,listeners:m}),a.target=Os)))}function Rl(s,a){var d={};return d[s.toLowerCase()]=a.toLowerCase(),d["Webkit"+s]="webkit"+a,d["Moz"+s]="moz"+a,d}var Ms={animationend:Rl("Animation","AnimationEnd"),animationiteration:Rl("Animation","AnimationIteration"),animationstart:Rl("Animation","AnimationStart"),transitionend:Rl("Transition","TransitionEnd")},vd={},hg={};u&&(hg=document.createElement("div").style,"AnimationEvent"in window||(delete Ms.animationend.animation,delete Ms.animationiteration.animation,delete Ms.animationstart.animation),"TransitionEvent"in window||delete Ms.transitionend.transition);function Ol(s){if(vd[s])return vd[s];if(!Ms[s])return s;var a=Ms[s],d;for(d in a)if(a.hasOwnProperty(d)&&d in hg)return vd[s]=a[d];return s}var pg=Ol("animationend"),mg=Ol("animationiteration"),gg=Ol("animationstart"),yg=Ol("transitionend"),vg=new Map,xg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fi(s,a){vg.set(s,a),o(a,[s])}for(var xd=0;xd<xg.length;xd++){var wd=xg[xd],XS=wd.toLowerCase(),ZS=wd[0].toUpperCase()+wd.slice(1);fi(XS,"on"+ZS)}fi(pg,"onAnimationEnd"),fi(mg,"onAnimationIteration"),fi(gg,"onAnimationStart"),fi("dblclick","onDoubleClick"),fi("focusin","onFocus"),fi("focusout","onBlur"),fi(yg,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eE=new Set("cancel close invalid load scroll toggle".split(" ").concat(sa));function wg(s,a,d){var m=s.type||"unknown-event";s.currentTarget=d,X1(m,a,void 0,s),s.currentTarget=null}function bg(s,a){a=(a&4)!==0;for(var d=0;d<s.length;d++){var m=s[d],x=m.event;m=m.listeners;e:{var b=void 0;if(a)for(var N=m.length-1;0<=N;N--){var z=m[N],V=z.instance,ce=z.currentTarget;if(z=z.listener,V!==b&&x.isPropagationStopped())break e;wg(x,z,ce),b=V}else for(N=0;N<m.length;N++){if(z=m[N],V=z.instance,ce=z.currentTarget,z=z.listener,V!==b&&x.isPropagationStopped())break e;wg(x,z,ce),b=V}}}if($n)throw s=Vr,$n=!1,Vr=null,s}function _t(s,a){var d=a[Nd];d===void 0&&(d=a[Nd]=new Set);var m=s+"__bubble";d.has(m)||(kg(a,s,2,!1),d.add(m))}function bd(s,a,d){var m=0;a&&(m|=4),kg(d,s,m,a)}var Ml="_reactListening"+Math.random().toString(36).slice(2);function oa(s){if(!s[Ml]){s[Ml]=!0,r.forEach(function(d){d!=="selectionchange"&&(eE.has(d)||bd(d,!1,s),bd(d,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Ml]||(a[Ml]=!0,bd("selectionchange",!1,a))}}function kg(s,a,d,m){switch(Vm(a)){case 1:var x=pS;break;case 4:x=mS;break;default:x=id}d=x.bind(null,a,d,s),x=void 0,!Jn||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(x=!0),m?x!==void 0?s.addEventListener(a,d,{capture:!0,passive:x}):s.addEventListener(a,d,!0):x!==void 0?s.addEventListener(a,d,{passive:x}):s.addEventListener(a,d,!1)}function kd(s,a,d,m,x){var b=m;if((a&1)===0&&(a&2)===0&&m!==null)e:for(;;){if(m===null)return;var N=m.tag;if(N===3||N===4){var z=m.stateNode.containerInfo;if(z===x||z.nodeType===8&&z.parentNode===x)break;if(N===4)for(N=m.return;N!==null;){var V=N.tag;if((V===3||V===4)&&(V=N.stateNode.containerInfo,V===x||V.nodeType===8&&V.parentNode===x))return;N=N.return}for(;z!==null;){if(N=qi(z),N===null)return;if(V=N.tag,V===5||V===6){m=b=N;continue e}z=z.parentNode}}m=m.return}Hr(function(){var ce=b,ke=ht(d),Se=[];e:{var we=vg.get(s);if(we!==void 0){var Oe=ad,Fe=s;switch(s){case"keypress":if(Tl(d)===0)break e;case"keydown":case"keyup":Oe=IS;break;case"focusin":Fe="focus",Oe=cd;break;case"focusout":Fe="blur",Oe=cd;break;case"beforeblur":case"afterblur":Oe=cd;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Oe=Gm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Oe=vS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Oe=RS;break;case pg:case mg:case gg:Oe=bS;break;case yg:Oe=MS;break;case"scroll":Oe=gS;break;case"wheel":Oe=DS;break;case"copy":case"cut":case"paste":Oe=SS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Oe=Jm}var ze=(a&4)!==0,Dt=!ze&&s==="scroll",le=ze?we!==null?we+"Capture":null:we;ze=[];for(var Q=ce,ue;Q!==null;){ue=Q;var Ce=ue.stateNode;if(ue.tag===5&&Ce!==null&&(ue=Ce,le!==null&&(Ce=Tt(Q,le),Ce!=null&&ze.push(aa(Q,Ce,ue)))),Dt)break;Q=Q.return}0<ze.length&&(we=new Oe(we,Fe,null,d,ke),Se.push({event:we,listeners:ze}))}}if((a&7)===0){e:{if(we=s==="mouseover"||s==="pointerover",Oe=s==="mouseout"||s==="pointerout",we&&d!==Me&&(Fe=d.relatedTarget||d.fromElement)&&(qi(Fe)||Fe[qr]))break e;if((Oe||we)&&(we=ke.window===ke?ke:(we=ke.ownerDocument)?we.defaultView||we.parentWindow:window,Oe?(Fe=d.relatedTarget||d.toElement,Oe=ce,Fe=Fe?qi(Fe):null,Fe!==null&&(Dt=Vi(Fe),Fe!==Dt||Fe.tag!==5&&Fe.tag!==6)&&(Fe=null)):(Oe=null,Fe=ce),Oe!==Fe)){if(ze=Gm,Ce="onMouseLeave",le="onMouseEnter",Q="mouse",(s==="pointerout"||s==="pointerover")&&(ze=Jm,Ce="onPointerLeave",le="onPointerEnter",Q="pointer"),Dt=Oe==null?we:$s(Oe),ue=Fe==null?we:$s(Fe),we=new ze(Ce,Q+"leave",Oe,d,ke),we.target=Dt,we.relatedTarget=ue,Ce=null,qi(ke)===ce&&(ze=new ze(le,Q+"enter",Fe,d,ke),ze.target=ue,ze.relatedTarget=Dt,Ce=ze),Dt=Ce,Oe&&Fe)t:{for(ze=Oe,le=Fe,Q=0,ue=ze;ue;ue=Ls(ue))Q++;for(ue=0,Ce=le;Ce;Ce=Ls(Ce))ue++;for(;0<Q-ue;)ze=Ls(ze),Q--;for(;0<ue-Q;)le=Ls(le),ue--;for(;Q--;){if(ze===le||le!==null&&ze===le.alternate)break t;ze=Ls(ze),le=Ls(le)}ze=null}else ze=null;Oe!==null&&Sg(Se,we,Oe,ze,!1),Fe!==null&&Dt!==null&&Sg(Se,Dt,Fe,ze,!0)}}e:{if(we=ce?$s(ce):window,Oe=we.nodeName&&we.nodeName.toLowerCase(),Oe==="select"||Oe==="input"&&we.type==="file")var We=HS;else if(ng(we))if(ig)We=GS;else{We=qS;var He=VS}else(Oe=we.nodeName)&&Oe.toLowerCase()==="input"&&(we.type==="checkbox"||we.type==="radio")&&(We=YS);if(We&&(We=We(s,ce))){rg(Se,We,d,ke);break e}He&&He(s,we,ce),s==="focusout"&&(He=we._wrapperState)&&He.controlled&&we.type==="number"&&J(we,"number",we.value)}switch(He=ce?$s(ce):window,s){case"focusin":(ng(He)||He.contentEditable==="true")&&(Os=He,gd=ce,ia=null);break;case"focusout":ia=gd=Os=null;break;case"mousedown":yd=!0;break;case"contextmenu":case"mouseup":case"dragend":yd=!1,fg(Se,d,ke);break;case"selectionchange":if(QS)break;case"keydown":case"keyup":fg(Se,d,ke)}var Ve;if(fd)e:{switch(s){case"compositionstart":var Ke="onCompositionStart";break e;case"compositionend":Ke="onCompositionEnd";break e;case"compositionupdate":Ke="onCompositionUpdate";break e}Ke=void 0}else Rs?eg(s,d)&&(Ke="onCompositionEnd"):s==="keydown"&&d.keyCode===229&&(Ke="onCompositionStart");Ke&&(Qm&&d.locale!=="ko"&&(Rs||Ke!=="onCompositionStart"?Ke==="onCompositionEnd"&&Rs&&(Ve=qm()):(di=ke,od="value"in di?di.value:di.textContent,Rs=!0)),He=Ll(ce,Ke),0<He.length&&(Ke=new Km(Ke,s,null,d,ke),Se.push({event:Ke,listeners:He}),Ve?Ke.data=Ve:(Ve=tg(d),Ve!==null&&(Ke.data=Ve)))),(Ve=FS?zS(s,d):BS(s,d))&&(ce=Ll(ce,"onBeforeInput"),0<ce.length&&(ke=new Km("onBeforeInput","beforeinput",null,d,ke),Se.push({event:ke,listeners:ce}),ke.data=Ve))}bg(Se,a)})}function aa(s,a,d){return{instance:s,listener:a,currentTarget:d}}function Ll(s,a){for(var d=a+"Capture",m=[];s!==null;){var x=s,b=x.stateNode;x.tag===5&&b!==null&&(x=b,b=Tt(s,d),b!=null&&m.unshift(aa(s,b,x)),b=Tt(s,a),b!=null&&m.push(aa(s,b,x))),s=s.return}return m}function Ls(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Sg(s,a,d,m,x){for(var b=a._reactName,N=[];d!==null&&d!==m;){var z=d,V=z.alternate,ce=z.stateNode;if(V!==null&&V===m)break;z.tag===5&&ce!==null&&(z=ce,x?(V=Tt(d,b),V!=null&&N.unshift(aa(d,V,z))):x||(V=Tt(d,b),V!=null&&N.push(aa(d,V,z)))),d=d.return}N.length!==0&&s.push({event:a,listeners:N})}var tE=/\r\n?/g,nE=/\u0000|\uFFFD/g;function Eg(s){return(typeof s=="string"?s:""+s).replace(tE,`
`).replace(nE,"")}function Dl(s,a,d){if(a=Eg(a),Eg(s)!==a&&d)throw Error(n(425))}function $l(){}var Sd=null,Ed=null;function _d(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Cd=typeof setTimeout=="function"?setTimeout:void 0,rE=typeof clearTimeout=="function"?clearTimeout:void 0,_g=typeof Promise=="function"?Promise:void 0,iE=typeof queueMicrotask=="function"?queueMicrotask:typeof _g<"u"?function(s){return _g.resolve(null).then(s).catch(sE)}:Cd;function sE(s){setTimeout(function(){throw s})}function jd(s,a){var d=a,m=0;do{var x=d.nextSibling;if(s.removeChild(d),x&&x.nodeType===8)if(d=x.data,d==="/$"){if(m===0){s.removeChild(x),Qo(a);return}m--}else d!=="$"&&d!=="$?"&&d!=="$!"||m++;d=x}while(d);Qo(a)}function hi(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return s}function Cg(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var d=s.data;if(d==="$"||d==="$!"||d==="$?"){if(a===0)return s;a--}else d==="/$"&&a++}s=s.previousSibling}return null}var Ds=Math.random().toString(36).slice(2),Nr="__reactFiber$"+Ds,la="__reactProps$"+Ds,qr="__reactContainer$"+Ds,Nd="__reactEvents$"+Ds,oE="__reactListeners$"+Ds,aE="__reactHandles$"+Ds;function qi(s){var a=s[Nr];if(a)return a;for(var d=s.parentNode;d;){if(a=d[qr]||d[Nr]){if(d=a.alternate,a.child!==null||d!==null&&d.child!==null)for(s=Cg(s);s!==null;){if(d=s[Nr])return d;s=Cg(s)}return a}s=d,d=s.parentNode}return null}function ua(s){return s=s[Nr]||s[qr],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function $s(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(n(33))}function Fl(s){return s[la]||null}var Td=[],Fs=-1;function pi(s){return{current:s}}function Ct(s){0>Fs||(s.current=Td[Fs],Td[Fs]=null,Fs--)}function kt(s,a){Fs++,Td[Fs]=s.current,s.current=a}var mi={},cn=pi(mi),Cn=pi(!1),Yi=mi;function zs(s,a){var d=s.type.contextTypes;if(!d)return mi;var m=s.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===a)return m.__reactInternalMemoizedMaskedChildContext;var x={},b;for(b in d)x[b]=a[b];return m&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=a,s.__reactInternalMemoizedMaskedChildContext=x),x}function jn(s){return s=s.childContextTypes,s!=null}function zl(){Ct(Cn),Ct(cn)}function jg(s,a,d){if(cn.current!==mi)throw Error(n(168));kt(cn,a),kt(Cn,d)}function Ng(s,a,d){var m=s.stateNode;if(a=a.childContextTypes,typeof m.getChildContext!="function")return d;m=m.getChildContext();for(var x in m)if(!(x in a))throw Error(n(108,Ie(s)||"Unknown",x));return T({},d,m)}function Bl(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||mi,Yi=cn.current,kt(cn,s),kt(Cn,Cn.current),!0}function Tg(s,a,d){var m=s.stateNode;if(!m)throw Error(n(169));d?(s=Ng(s,a,Yi),m.__reactInternalMemoizedMergedChildContext=s,Ct(Cn),Ct(cn),kt(cn,s)):Ct(Cn),kt(Cn,d)}var Yr=null,Ul=!1,Id=!1;function Ig(s){Yr===null?Yr=[s]:Yr.push(s)}function lE(s){Ul=!0,Ig(s)}function gi(){if(!Id&&Yr!==null){Id=!0;var s=0,a=mt;try{var d=Yr;for(mt=1;s<d.length;s++){var m=d[s];do m=m(!0);while(m!==null)}Yr=null,Ul=!1}catch(x){throw Yr!==null&&(Yr=Yr.slice(s+1)),Am(Xc,gi),x}finally{mt=a,Id=!1}}return null}var Bs=[],Us=0,Wl=null,Hl=0,Qn=[],Xn=0,Gi=null,Gr=1,Kr="";function Ki(s,a){Bs[Us++]=Hl,Bs[Us++]=Wl,Wl=s,Hl=a}function Pg(s,a,d){Qn[Xn++]=Gr,Qn[Xn++]=Kr,Qn[Xn++]=Gi,Gi=s;var m=Gr;s=Kr;var x=32-dr(m)-1;m&=~(1<<x),d+=1;var b=32-dr(a)+x;if(30<b){var N=x-x%5;b=(m&(1<<N)-1).toString(32),m>>=N,x-=N,Gr=1<<32-dr(a)+x|d<<x|m,Kr=b+s}else Gr=1<<b|d<<x|m,Kr=s}function Pd(s){s.return!==null&&(Ki(s,1),Pg(s,1,0))}function Ad(s){for(;s===Wl;)Wl=Bs[--Us],Bs[Us]=null,Hl=Bs[--Us],Bs[Us]=null;for(;s===Gi;)Gi=Qn[--Xn],Qn[Xn]=null,Kr=Qn[--Xn],Qn[Xn]=null,Gr=Qn[--Xn],Qn[Xn]=null}var zn=null,Bn=null,Nt=!1,hr=null;function Ag(s,a){var d=nr(5,null,null,0);d.elementType="DELETED",d.stateNode=a,d.return=s,a=s.deletions,a===null?(s.deletions=[d],s.flags|=16):a.push(d)}function Rg(s,a){switch(s.tag){case 5:var d=s.type;return a=a.nodeType!==1||d.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(s.stateNode=a,zn=s,Bn=hi(a.firstChild),!0):!1;case 6:return a=s.pendingProps===""||a.nodeType!==3?null:a,a!==null?(s.stateNode=a,zn=s,Bn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(d=Gi!==null?{id:Gr,overflow:Kr}:null,s.memoizedState={dehydrated:a,treeContext:d,retryLane:1073741824},d=nr(18,null,null,0),d.stateNode=a,d.return=s,s.child=d,zn=s,Bn=null,!0):!1;default:return!1}}function Rd(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Od(s){if(Nt){var a=Bn;if(a){var d=a;if(!Rg(s,a)){if(Rd(s))throw Error(n(418));a=hi(d.nextSibling);var m=zn;a&&Rg(s,a)?Ag(m,d):(s.flags=s.flags&-4097|2,Nt=!1,zn=s)}}else{if(Rd(s))throw Error(n(418));s.flags=s.flags&-4097|2,Nt=!1,zn=s}}}function Og(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;zn=s}function Vl(s){if(s!==zn)return!1;if(!Nt)return Og(s),Nt=!0,!1;var a;if((a=s.tag!==3)&&!(a=s.tag!==5)&&(a=s.type,a=a!=="head"&&a!=="body"&&!_d(s.type,s.memoizedProps)),a&&(a=Bn)){if(Rd(s))throw Mg(),Error(n(418));for(;a;)Ag(s,a),a=hi(a.nextSibling)}if(Og(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8){var d=s.data;if(d==="/$"){if(a===0){Bn=hi(s.nextSibling);break e}a--}else d!=="$"&&d!=="$!"&&d!=="$?"||a++}s=s.nextSibling}Bn=null}}else Bn=zn?hi(s.stateNode.nextSibling):null;return!0}function Mg(){for(var s=Bn;s;)s=hi(s.nextSibling)}function Ws(){Bn=zn=null,Nt=!1}function Md(s){hr===null?hr=[s]:hr.push(s)}var uE=I.ReactCurrentBatchConfig;function ca(s,a,d){if(s=d.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(n(309));var m=d.stateNode}if(!m)throw Error(n(147,s));var x=m,b=""+s;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===b?a.ref:(a=function(N){var z=x.refs;N===null?delete z[b]:z[b]=N},a._stringRef=b,a)}if(typeof s!="string")throw Error(n(284));if(!d._owner)throw Error(n(290,s))}return s}function ql(s,a){throw s=Object.prototype.toString.call(a),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s))}function Lg(s){var a=s._init;return a(s._payload)}function Dg(s){function a(le,Q){if(s){var ue=le.deletions;ue===null?(le.deletions=[Q],le.flags|=16):ue.push(Q)}}function d(le,Q){if(!s)return null;for(;Q!==null;)a(le,Q),Q=Q.sibling;return null}function m(le,Q){for(le=new Map;Q!==null;)Q.key!==null?le.set(Q.key,Q):le.set(Q.index,Q),Q=Q.sibling;return le}function x(le,Q){return le=Ei(le,Q),le.index=0,le.sibling=null,le}function b(le,Q,ue){return le.index=ue,s?(ue=le.alternate,ue!==null?(ue=ue.index,ue<Q?(le.flags|=2,Q):ue):(le.flags|=2,Q)):(le.flags|=1048576,Q)}function N(le){return s&&le.alternate===null&&(le.flags|=2),le}function z(le,Q,ue,Ce){return Q===null||Q.tag!==6?(Q=jf(ue,le.mode,Ce),Q.return=le,Q):(Q=x(Q,ue),Q.return=le,Q)}function V(le,Q,ue,Ce){var We=ue.type;return We===$?ke(le,Q,ue.props.children,Ce,ue.key):Q!==null&&(Q.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===G&&Lg(We)===Q.type)?(Ce=x(Q,ue.props),Ce.ref=ca(le,Q,ue),Ce.return=le,Ce):(Ce=gu(ue.type,ue.key,ue.props,null,le.mode,Ce),Ce.ref=ca(le,Q,ue),Ce.return=le,Ce)}function ce(le,Q,ue,Ce){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==ue.containerInfo||Q.stateNode.implementation!==ue.implementation?(Q=Nf(ue,le.mode,Ce),Q.return=le,Q):(Q=x(Q,ue.children||[]),Q.return=le,Q)}function ke(le,Q,ue,Ce,We){return Q===null||Q.tag!==7?(Q=rs(ue,le.mode,Ce,We),Q.return=le,Q):(Q=x(Q,ue),Q.return=le,Q)}function Se(le,Q,ue){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Q=jf(""+Q,le.mode,ue),Q.return=le,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case O:return ue=gu(Q.type,Q.key,Q.props,null,le.mode,ue),ue.ref=ca(le,null,Q),ue.return=le,ue;case P:return Q=Nf(Q,le.mode,ue),Q.return=le,Q;case G:var Ce=Q._init;return Se(le,Ce(Q._payload),ue)}if(de(Q)||ee(Q))return Q=rs(Q,le.mode,ue,null),Q.return=le,Q;ql(le,Q)}return null}function we(le,Q,ue,Ce){var We=Q!==null?Q.key:null;if(typeof ue=="string"&&ue!==""||typeof ue=="number")return We!==null?null:z(le,Q,""+ue,Ce);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case O:return ue.key===We?V(le,Q,ue,Ce):null;case P:return ue.key===We?ce(le,Q,ue,Ce):null;case G:return We=ue._init,we(le,Q,We(ue._payload),Ce)}if(de(ue)||ee(ue))return We!==null?null:ke(le,Q,ue,Ce,null);ql(le,ue)}return null}function Oe(le,Q,ue,Ce,We){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number")return le=le.get(ue)||null,z(Q,le,""+Ce,We);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case O:return le=le.get(Ce.key===null?ue:Ce.key)||null,V(Q,le,Ce,We);case P:return le=le.get(Ce.key===null?ue:Ce.key)||null,ce(Q,le,Ce,We);case G:var He=Ce._init;return Oe(le,Q,ue,He(Ce._payload),We)}if(de(Ce)||ee(Ce))return le=le.get(ue)||null,ke(Q,le,Ce,We,null);ql(Q,Ce)}return null}function Fe(le,Q,ue,Ce){for(var We=null,He=null,Ve=Q,Ke=Q=0,Zt=null;Ve!==null&&Ke<ue.length;Ke++){Ve.index>Ke?(Zt=Ve,Ve=null):Zt=Ve.sibling;var ft=we(le,Ve,ue[Ke],Ce);if(ft===null){Ve===null&&(Ve=Zt);break}s&&Ve&&ft.alternate===null&&a(le,Ve),Q=b(ft,Q,Ke),He===null?We=ft:He.sibling=ft,He=ft,Ve=Zt}if(Ke===ue.length)return d(le,Ve),Nt&&Ki(le,Ke),We;if(Ve===null){for(;Ke<ue.length;Ke++)Ve=Se(le,ue[Ke],Ce),Ve!==null&&(Q=b(Ve,Q,Ke),He===null?We=Ve:He.sibling=Ve,He=Ve);return Nt&&Ki(le,Ke),We}for(Ve=m(le,Ve);Ke<ue.length;Ke++)Zt=Oe(Ve,le,Ke,ue[Ke],Ce),Zt!==null&&(s&&Zt.alternate!==null&&Ve.delete(Zt.key===null?Ke:Zt.key),Q=b(Zt,Q,Ke),He===null?We=Zt:He.sibling=Zt,He=Zt);return s&&Ve.forEach(function(_i){return a(le,_i)}),Nt&&Ki(le,Ke),We}function ze(le,Q,ue,Ce){var We=ee(ue);if(typeof We!="function")throw Error(n(150));if(ue=We.call(ue),ue==null)throw Error(n(151));for(var He=We=null,Ve=Q,Ke=Q=0,Zt=null,ft=ue.next();Ve!==null&&!ft.done;Ke++,ft=ue.next()){Ve.index>Ke?(Zt=Ve,Ve=null):Zt=Ve.sibling;var _i=we(le,Ve,ft.value,Ce);if(_i===null){Ve===null&&(Ve=Zt);break}s&&Ve&&_i.alternate===null&&a(le,Ve),Q=b(_i,Q,Ke),He===null?We=_i:He.sibling=_i,He=_i,Ve=Zt}if(ft.done)return d(le,Ve),Nt&&Ki(le,Ke),We;if(Ve===null){for(;!ft.done;Ke++,ft=ue.next())ft=Se(le,ft.value,Ce),ft!==null&&(Q=b(ft,Q,Ke),He===null?We=ft:He.sibling=ft,He=ft);return Nt&&Ki(le,Ke),We}for(Ve=m(le,Ve);!ft.done;Ke++,ft=ue.next())ft=Oe(Ve,le,Ke,ft.value,Ce),ft!==null&&(s&&ft.alternate!==null&&Ve.delete(ft.key===null?Ke:ft.key),Q=b(ft,Q,Ke),He===null?We=ft:He.sibling=ft,He=ft);return s&&Ve.forEach(function(UE){return a(le,UE)}),Nt&&Ki(le,Ke),We}function Dt(le,Q,ue,Ce){if(typeof ue=="object"&&ue!==null&&ue.type===$&&ue.key===null&&(ue=ue.props.children),typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case O:e:{for(var We=ue.key,He=Q;He!==null;){if(He.key===We){if(We=ue.type,We===$){if(He.tag===7){d(le,He.sibling),Q=x(He,ue.props.children),Q.return=le,le=Q;break e}}else if(He.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===G&&Lg(We)===He.type){d(le,He.sibling),Q=x(He,ue.props),Q.ref=ca(le,He,ue),Q.return=le,le=Q;break e}d(le,He);break}else a(le,He);He=He.sibling}ue.type===$?(Q=rs(ue.props.children,le.mode,Ce,ue.key),Q.return=le,le=Q):(Ce=gu(ue.type,ue.key,ue.props,null,le.mode,Ce),Ce.ref=ca(le,Q,ue),Ce.return=le,le=Ce)}return N(le);case P:e:{for(He=ue.key;Q!==null;){if(Q.key===He)if(Q.tag===4&&Q.stateNode.containerInfo===ue.containerInfo&&Q.stateNode.implementation===ue.implementation){d(le,Q.sibling),Q=x(Q,ue.children||[]),Q.return=le,le=Q;break e}else{d(le,Q);break}else a(le,Q);Q=Q.sibling}Q=Nf(ue,le.mode,Ce),Q.return=le,le=Q}return N(le);case G:return He=ue._init,Dt(le,Q,He(ue._payload),Ce)}if(de(ue))return Fe(le,Q,ue,Ce);if(ee(ue))return ze(le,Q,ue,Ce);ql(le,ue)}return typeof ue=="string"&&ue!==""||typeof ue=="number"?(ue=""+ue,Q!==null&&Q.tag===6?(d(le,Q.sibling),Q=x(Q,ue),Q.return=le,le=Q):(d(le,Q),Q=jf(ue,le.mode,Ce),Q.return=le,le=Q),N(le)):d(le,Q)}return Dt}var Hs=Dg(!0),$g=Dg(!1),Yl=pi(null),Gl=null,Vs=null,Ld=null;function Dd(){Ld=Vs=Gl=null}function $d(s){var a=Yl.current;Ct(Yl),s._currentValue=a}function Fd(s,a,d){for(;s!==null;){var m=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,m!==null&&(m.childLanes|=a)):m!==null&&(m.childLanes&a)!==a&&(m.childLanes|=a),s===d)break;s=s.return}}function qs(s,a){Gl=s,Ld=Vs=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&a)!==0&&(Nn=!0),s.firstContext=null)}function Zn(s){var a=s._currentValue;if(Ld!==s)if(s={context:s,memoizedValue:a,next:null},Vs===null){if(Gl===null)throw Error(n(308));Vs=s,Gl.dependencies={lanes:0,firstContext:s}}else Vs=Vs.next=s;return a}var Ji=null;function zd(s){Ji===null?Ji=[s]:Ji.push(s)}function Fg(s,a,d,m){var x=a.interleaved;return x===null?(d.next=d,zd(a)):(d.next=x.next,x.next=d),a.interleaved=d,Jr(s,m)}function Jr(s,a){s.lanes|=a;var d=s.alternate;for(d!==null&&(d.lanes|=a),d=s,s=s.return;s!==null;)s.childLanes|=a,d=s.alternate,d!==null&&(d.childLanes|=a),d=s,s=s.return;return d.tag===3?d.stateNode:null}var yi=!1;function Bd(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zg(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Qr(s,a){return{eventTime:s,lane:a,tag:0,payload:null,callback:null,next:null}}function vi(s,a,d){var m=s.updateQueue;if(m===null)return null;if(m=m.shared,(dt&2)!==0){var x=m.pending;return x===null?a.next=a:(a.next=x.next,x.next=a),m.pending=a,Jr(s,d)}return x=m.interleaved,x===null?(a.next=a,zd(m)):(a.next=x.next,x.next=a),m.interleaved=a,Jr(s,d)}function Kl(s,a,d){if(a=a.updateQueue,a!==null&&(a=a.shared,(d&4194240)!==0)){var m=a.lanes;m&=s.pendingLanes,d|=m,a.lanes=d,td(s,d)}}function Bg(s,a){var d=s.updateQueue,m=s.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var x=null,b=null;if(d=d.firstBaseUpdate,d!==null){do{var N={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};b===null?x=b=N:b=b.next=N,d=d.next}while(d!==null);b===null?x=b=a:b=b.next=a}else x=b=a;d={baseState:m.baseState,firstBaseUpdate:x,lastBaseUpdate:b,shared:m.shared,effects:m.effects},s.updateQueue=d;return}s=d.lastBaseUpdate,s===null?d.firstBaseUpdate=a:s.next=a,d.lastBaseUpdate=a}function Jl(s,a,d,m){var x=s.updateQueue;yi=!1;var b=x.firstBaseUpdate,N=x.lastBaseUpdate,z=x.shared.pending;if(z!==null){x.shared.pending=null;var V=z,ce=V.next;V.next=null,N===null?b=ce:N.next=ce,N=V;var ke=s.alternate;ke!==null&&(ke=ke.updateQueue,z=ke.lastBaseUpdate,z!==N&&(z===null?ke.firstBaseUpdate=ce:z.next=ce,ke.lastBaseUpdate=V))}if(b!==null){var Se=x.baseState;N=0,ke=ce=V=null,z=b;do{var we=z.lane,Oe=z.eventTime;if((m&we)===we){ke!==null&&(ke=ke.next={eventTime:Oe,lane:0,tag:z.tag,payload:z.payload,callback:z.callback,next:null});e:{var Fe=s,ze=z;switch(we=a,Oe=d,ze.tag){case 1:if(Fe=ze.payload,typeof Fe=="function"){Se=Fe.call(Oe,Se,we);break e}Se=Fe;break e;case 3:Fe.flags=Fe.flags&-65537|128;case 0:if(Fe=ze.payload,we=typeof Fe=="function"?Fe.call(Oe,Se,we):Fe,we==null)break e;Se=T({},Se,we);break e;case 2:yi=!0}}z.callback!==null&&z.lane!==0&&(s.flags|=64,we=x.effects,we===null?x.effects=[z]:we.push(z))}else Oe={eventTime:Oe,lane:we,tag:z.tag,payload:z.payload,callback:z.callback,next:null},ke===null?(ce=ke=Oe,V=Se):ke=ke.next=Oe,N|=we;if(z=z.next,z===null){if(z=x.shared.pending,z===null)break;we=z,z=we.next,we.next=null,x.lastBaseUpdate=we,x.shared.pending=null}}while(!0);if(ke===null&&(V=Se),x.baseState=V,x.firstBaseUpdate=ce,x.lastBaseUpdate=ke,a=x.shared.interleaved,a!==null){x=a;do N|=x.lane,x=x.next;while(x!==a)}else b===null&&(x.shared.lanes=0);Zi|=N,s.lanes=N,s.memoizedState=Se}}function Ug(s,a,d){if(s=a.effects,a.effects=null,s!==null)for(a=0;a<s.length;a++){var m=s[a],x=m.callback;if(x!==null){if(m.callback=null,m=d,typeof x!="function")throw Error(n(191,x));x.call(m)}}}var da={},Tr=pi(da),fa=pi(da),ha=pi(da);function Qi(s){if(s===da)throw Error(n(174));return s}function Ud(s,a){switch(kt(ha,a),kt(fa,s),kt(Tr,da),s=a.nodeType,s){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:se(null,"");break;default:s=s===8?a.parentNode:a,a=s.namespaceURI||null,s=s.tagName,a=se(a,s)}Ct(Tr),kt(Tr,a)}function Ys(){Ct(Tr),Ct(fa),Ct(ha)}function Wg(s){Qi(ha.current);var a=Qi(Tr.current),d=se(a,s.type);a!==d&&(kt(fa,s),kt(Tr,d))}function Wd(s){fa.current===s&&(Ct(Tr),Ct(fa))}var It=pi(0);function Ql(s){for(var a=s;a!==null;){if(a.tag===13){var d=a.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Hd=[];function Vd(){for(var s=0;s<Hd.length;s++)Hd[s]._workInProgressVersionPrimary=null;Hd.length=0}var Xl=I.ReactCurrentDispatcher,qd=I.ReactCurrentBatchConfig,Xi=0,Pt=null,Yt=null,Qt=null,Zl=!1,pa=!1,ma=0,cE=0;function dn(){throw Error(n(321))}function Yd(s,a){if(a===null)return!1;for(var d=0;d<a.length&&d<s.length;d++)if(!fr(s[d],a[d]))return!1;return!0}function Gd(s,a,d,m,x,b){if(Xi=b,Pt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Xl.current=s===null||s.memoizedState===null?pE:mE,s=d(m,x),pa){b=0;do{if(pa=!1,ma=0,25<=b)throw Error(n(301));b+=1,Qt=Yt=null,a.updateQueue=null,Xl.current=gE,s=d(m,x)}while(pa)}if(Xl.current=nu,a=Yt!==null&&Yt.next!==null,Xi=0,Qt=Yt=Pt=null,Zl=!1,a)throw Error(n(300));return s}function Kd(){var s=ma!==0;return ma=0,s}function Ir(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qt===null?Pt.memoizedState=Qt=s:Qt=Qt.next=s,Qt}function er(){if(Yt===null){var s=Pt.alternate;s=s!==null?s.memoizedState:null}else s=Yt.next;var a=Qt===null?Pt.memoizedState:Qt.next;if(a!==null)Qt=a,Yt=s;else{if(s===null)throw Error(n(310));Yt=s,s={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},Qt===null?Pt.memoizedState=Qt=s:Qt=Qt.next=s}return Qt}function ga(s,a){return typeof a=="function"?a(s):a}function Jd(s){var a=er(),d=a.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=s;var m=Yt,x=m.baseQueue,b=d.pending;if(b!==null){if(x!==null){var N=x.next;x.next=b.next,b.next=N}m.baseQueue=x=b,d.pending=null}if(x!==null){b=x.next,m=m.baseState;var z=N=null,V=null,ce=b;do{var ke=ce.lane;if((Xi&ke)===ke)V!==null&&(V=V.next={lane:0,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null}),m=ce.hasEagerState?ce.eagerState:s(m,ce.action);else{var Se={lane:ke,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null};V===null?(z=V=Se,N=m):V=V.next=Se,Pt.lanes|=ke,Zi|=ke}ce=ce.next}while(ce!==null&&ce!==b);V===null?N=m:V.next=z,fr(m,a.memoizedState)||(Nn=!0),a.memoizedState=m,a.baseState=N,a.baseQueue=V,d.lastRenderedState=m}if(s=d.interleaved,s!==null){x=s;do b=x.lane,Pt.lanes|=b,Zi|=b,x=x.next;while(x!==s)}else x===null&&(d.lanes=0);return[a.memoizedState,d.dispatch]}function Qd(s){var a=er(),d=a.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=s;var m=d.dispatch,x=d.pending,b=a.memoizedState;if(x!==null){d.pending=null;var N=x=x.next;do b=s(b,N.action),N=N.next;while(N!==x);fr(b,a.memoizedState)||(Nn=!0),a.memoizedState=b,a.baseQueue===null&&(a.baseState=b),d.lastRenderedState=b}return[b,m]}function Hg(){}function Vg(s,a){var d=Pt,m=er(),x=a(),b=!fr(m.memoizedState,x);if(b&&(m.memoizedState=x,Nn=!0),m=m.queue,Xd(Gg.bind(null,d,m,s),[s]),m.getSnapshot!==a||b||Qt!==null&&Qt.memoizedState.tag&1){if(d.flags|=2048,ya(9,Yg.bind(null,d,m,x,a),void 0,null),Xt===null)throw Error(n(349));(Xi&30)!==0||qg(d,a,x)}return x}function qg(s,a,d){s.flags|=16384,s={getSnapshot:a,value:d},a=Pt.updateQueue,a===null?(a={lastEffect:null,stores:null},Pt.updateQueue=a,a.stores=[s]):(d=a.stores,d===null?a.stores=[s]:d.push(s))}function Yg(s,a,d,m){a.value=d,a.getSnapshot=m,Kg(a)&&Jg(s)}function Gg(s,a,d){return d(function(){Kg(a)&&Jg(s)})}function Kg(s){var a=s.getSnapshot;s=s.value;try{var d=a();return!fr(s,d)}catch{return!0}}function Jg(s){var a=Jr(s,1);a!==null&&yr(a,s,1,-1)}function Qg(s){var a=Ir();return typeof s=="function"&&(s=s()),a.memoizedState=a.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:s},a.queue=s,s=s.dispatch=hE.bind(null,Pt,s),[a.memoizedState,s]}function ya(s,a,d,m){return s={tag:s,create:a,destroy:d,deps:m,next:null},a=Pt.updateQueue,a===null?(a={lastEffect:null,stores:null},Pt.updateQueue=a,a.lastEffect=s.next=s):(d=a.lastEffect,d===null?a.lastEffect=s.next=s:(m=d.next,d.next=s,s.next=m,a.lastEffect=s)),s}function Xg(){return er().memoizedState}function eu(s,a,d,m){var x=Ir();Pt.flags|=s,x.memoizedState=ya(1|a,d,void 0,m===void 0?null:m)}function tu(s,a,d,m){var x=er();m=m===void 0?null:m;var b=void 0;if(Yt!==null){var N=Yt.memoizedState;if(b=N.destroy,m!==null&&Yd(m,N.deps)){x.memoizedState=ya(a,d,b,m);return}}Pt.flags|=s,x.memoizedState=ya(1|a,d,b,m)}function Zg(s,a){return eu(8390656,8,s,a)}function Xd(s,a){return tu(2048,8,s,a)}function ey(s,a){return tu(4,2,s,a)}function ty(s,a){return tu(4,4,s,a)}function ny(s,a){if(typeof a=="function")return s=s(),a(s),function(){a(null)};if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function ry(s,a,d){return d=d!=null?d.concat([s]):null,tu(4,4,ny.bind(null,a,s),d)}function Zd(){}function iy(s,a){var d=er();a=a===void 0?null:a;var m=d.memoizedState;return m!==null&&a!==null&&Yd(a,m[1])?m[0]:(d.memoizedState=[s,a],s)}function sy(s,a){var d=er();a=a===void 0?null:a;var m=d.memoizedState;return m!==null&&a!==null&&Yd(a,m[1])?m[0]:(s=s(),d.memoizedState=[s,a],s)}function oy(s,a,d){return(Xi&21)===0?(s.baseState&&(s.baseState=!1,Nn=!0),s.memoizedState=d):(fr(d,a)||(d=Lm(),Pt.lanes|=d,Zi|=d,s.baseState=!0),a)}function dE(s,a){var d=mt;mt=d!==0&&4>d?d:4,s(!0);var m=qd.transition;qd.transition={};try{s(!1),a()}finally{mt=d,qd.transition=m}}function ay(){return er().memoizedState}function fE(s,a,d){var m=ki(s);if(d={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null},ly(s))uy(a,d);else if(d=Fg(s,a,d,m),d!==null){var x=wn();yr(d,s,m,x),cy(d,a,m)}}function hE(s,a,d){var m=ki(s),x={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null};if(ly(s))uy(a,x);else{var b=s.alternate;if(s.lanes===0&&(b===null||b.lanes===0)&&(b=a.lastRenderedReducer,b!==null))try{var N=a.lastRenderedState,z=b(N,d);if(x.hasEagerState=!0,x.eagerState=z,fr(z,N)){var V=a.interleaved;V===null?(x.next=x,zd(a)):(x.next=V.next,V.next=x),a.interleaved=x;return}}catch{}finally{}d=Fg(s,a,x,m),d!==null&&(x=wn(),yr(d,s,m,x),cy(d,a,m))}}function ly(s){var a=s.alternate;return s===Pt||a!==null&&a===Pt}function uy(s,a){pa=Zl=!0;var d=s.pending;d===null?a.next=a:(a.next=d.next,d.next=a),s.pending=a}function cy(s,a,d){if((d&4194240)!==0){var m=a.lanes;m&=s.pendingLanes,d|=m,a.lanes=d,td(s,d)}}var nu={readContext:Zn,useCallback:dn,useContext:dn,useEffect:dn,useImperativeHandle:dn,useInsertionEffect:dn,useLayoutEffect:dn,useMemo:dn,useReducer:dn,useRef:dn,useState:dn,useDebugValue:dn,useDeferredValue:dn,useTransition:dn,useMutableSource:dn,useSyncExternalStore:dn,useId:dn,unstable_isNewReconciler:!1},pE={readContext:Zn,useCallback:function(s,a){return Ir().memoizedState=[s,a===void 0?null:a],s},useContext:Zn,useEffect:Zg,useImperativeHandle:function(s,a,d){return d=d!=null?d.concat([s]):null,eu(4194308,4,ny.bind(null,a,s),d)},useLayoutEffect:function(s,a){return eu(4194308,4,s,a)},useInsertionEffect:function(s,a){return eu(4,2,s,a)},useMemo:function(s,a){var d=Ir();return a=a===void 0?null:a,s=s(),d.memoizedState=[s,a],s},useReducer:function(s,a,d){var m=Ir();return a=d!==void 0?d(a):a,m.memoizedState=m.baseState=a,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:a},m.queue=s,s=s.dispatch=fE.bind(null,Pt,s),[m.memoizedState,s]},useRef:function(s){var a=Ir();return s={current:s},a.memoizedState=s},useState:Qg,useDebugValue:Zd,useDeferredValue:function(s){return Ir().memoizedState=s},useTransition:function(){var s=Qg(!1),a=s[0];return s=dE.bind(null,s[1]),Ir().memoizedState=s,[a,s]},useMutableSource:function(){},useSyncExternalStore:function(s,a,d){var m=Pt,x=Ir();if(Nt){if(d===void 0)throw Error(n(407));d=d()}else{if(d=a(),Xt===null)throw Error(n(349));(Xi&30)!==0||qg(m,a,d)}x.memoizedState=d;var b={value:d,getSnapshot:a};return x.queue=b,Zg(Gg.bind(null,m,b,s),[s]),m.flags|=2048,ya(9,Yg.bind(null,m,b,d,a),void 0,null),d},useId:function(){var s=Ir(),a=Xt.identifierPrefix;if(Nt){var d=Kr,m=Gr;d=(m&~(1<<32-dr(m)-1)).toString(32)+d,a=":"+a+"R"+d,d=ma++,0<d&&(a+="H"+d.toString(32)),a+=":"}else d=cE++,a=":"+a+"r"+d.toString(32)+":";return s.memoizedState=a},unstable_isNewReconciler:!1},mE={readContext:Zn,useCallback:iy,useContext:Zn,useEffect:Xd,useImperativeHandle:ry,useInsertionEffect:ey,useLayoutEffect:ty,useMemo:sy,useReducer:Jd,useRef:Xg,useState:function(){return Jd(ga)},useDebugValue:Zd,useDeferredValue:function(s){var a=er();return oy(a,Yt.memoizedState,s)},useTransition:function(){var s=Jd(ga)[0],a=er().memoizedState;return[s,a]},useMutableSource:Hg,useSyncExternalStore:Vg,useId:ay,unstable_isNewReconciler:!1},gE={readContext:Zn,useCallback:iy,useContext:Zn,useEffect:Xd,useImperativeHandle:ry,useInsertionEffect:ey,useLayoutEffect:ty,useMemo:sy,useReducer:Qd,useRef:Xg,useState:function(){return Qd(ga)},useDebugValue:Zd,useDeferredValue:function(s){var a=er();return Yt===null?a.memoizedState=s:oy(a,Yt.memoizedState,s)},useTransition:function(){var s=Qd(ga)[0],a=er().memoizedState;return[s,a]},useMutableSource:Hg,useSyncExternalStore:Vg,useId:ay,unstable_isNewReconciler:!1};function pr(s,a){if(s&&s.defaultProps){a=T({},a),s=s.defaultProps;for(var d in s)a[d]===void 0&&(a[d]=s[d]);return a}return a}function ef(s,a,d,m){a=s.memoizedState,d=d(m,a),d=d==null?a:T({},a,d),s.memoizedState=d,s.lanes===0&&(s.updateQueue.baseState=d)}var ru={isMounted:function(s){return(s=s._reactInternals)?Vi(s)===s:!1},enqueueSetState:function(s,a,d){s=s._reactInternals;var m=wn(),x=ki(s),b=Qr(m,x);b.payload=a,d!=null&&(b.callback=d),a=vi(s,b,x),a!==null&&(yr(a,s,x,m),Kl(a,s,x))},enqueueReplaceState:function(s,a,d){s=s._reactInternals;var m=wn(),x=ki(s),b=Qr(m,x);b.tag=1,b.payload=a,d!=null&&(b.callback=d),a=vi(s,b,x),a!==null&&(yr(a,s,x,m),Kl(a,s,x))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var d=wn(),m=ki(s),x=Qr(d,m);x.tag=2,a!=null&&(x.callback=a),a=vi(s,x,m),a!==null&&(yr(a,s,m,d),Kl(a,s,m))}};function dy(s,a,d,m,x,b,N){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(m,b,N):a.prototype&&a.prototype.isPureReactComponent?!ra(d,m)||!ra(x,b):!0}function fy(s,a,d){var m=!1,x=mi,b=a.contextType;return typeof b=="object"&&b!==null?b=Zn(b):(x=jn(a)?Yi:cn.current,m=a.contextTypes,b=(m=m!=null)?zs(s,x):mi),a=new a(d,b),s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=ru,s.stateNode=a,a._reactInternals=s,m&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=x,s.__reactInternalMemoizedMaskedChildContext=b),a}function hy(s,a,d,m){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(d,m),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(d,m),a.state!==s&&ru.enqueueReplaceState(a,a.state,null)}function tf(s,a,d,m){var x=s.stateNode;x.props=d,x.state=s.memoizedState,x.refs={},Bd(s);var b=a.contextType;typeof b=="object"&&b!==null?x.context=Zn(b):(b=jn(a)?Yi:cn.current,x.context=zs(s,b)),x.state=s.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(ef(s,a,b,d),x.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(a=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),a!==x.state&&ru.enqueueReplaceState(x,x.state,null),Jl(s,d,x,m),x.state=s.memoizedState),typeof x.componentDidMount=="function"&&(s.flags|=4194308)}function Gs(s,a){try{var d="",m=a;do d+=fe(m),m=m.return;while(m);var x=d}catch(b){x=`
Error generating stack: `+b.message+`
`+b.stack}return{value:s,source:a,stack:x,digest:null}}function nf(s,a,d){return{value:s,source:null,stack:d??null,digest:a??null}}function rf(s,a){try{console.error(a.value)}catch(d){setTimeout(function(){throw d})}}var yE=typeof WeakMap=="function"?WeakMap:Map;function py(s,a,d){d=Qr(-1,d),d.tag=3,d.payload={element:null};var m=a.value;return d.callback=function(){cu||(cu=!0,xf=m),rf(s,a)},d}function my(s,a,d){d=Qr(-1,d),d.tag=3;var m=s.type.getDerivedStateFromError;if(typeof m=="function"){var x=a.value;d.payload=function(){return m(x)},d.callback=function(){rf(s,a)}}var b=s.stateNode;return b!==null&&typeof b.componentDidCatch=="function"&&(d.callback=function(){rf(s,a),typeof m!="function"&&(wi===null?wi=new Set([this]):wi.add(this));var N=a.stack;this.componentDidCatch(a.value,{componentStack:N!==null?N:""})}),d}function gy(s,a,d){var m=s.pingCache;if(m===null){m=s.pingCache=new yE;var x=new Set;m.set(a,x)}else x=m.get(a),x===void 0&&(x=new Set,m.set(a,x));x.has(d)||(x.add(d),s=PE.bind(null,s,a,d),a.then(s,s))}function yy(s){do{var a;if((a=s.tag===13)&&(a=s.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return s;s=s.return}while(s!==null);return null}function vy(s,a,d,m,x){return(s.mode&1)===0?(s===a?s.flags|=65536:(s.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(a=Qr(-1,1),a.tag=2,vi(d,a,1))),d.lanes|=1),s):(s.flags|=65536,s.lanes=x,s)}var vE=I.ReactCurrentOwner,Nn=!1;function xn(s,a,d,m){a.child=s===null?$g(a,null,d,m):Hs(a,s.child,d,m)}function xy(s,a,d,m,x){d=d.render;var b=a.ref;return qs(a,x),m=Gd(s,a,d,m,b,x),d=Kd(),s!==null&&!Nn?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~x,Xr(s,a,x)):(Nt&&d&&Pd(a),a.flags|=1,xn(s,a,m,x),a.child)}function wy(s,a,d,m,x){if(s===null){var b=d.type;return typeof b=="function"&&!Cf(b)&&b.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(a.tag=15,a.type=b,by(s,a,b,m,x)):(s=gu(d.type,null,m,a,a.mode,x),s.ref=a.ref,s.return=a,a.child=s)}if(b=s.child,(s.lanes&x)===0){var N=b.memoizedProps;if(d=d.compare,d=d!==null?d:ra,d(N,m)&&s.ref===a.ref)return Xr(s,a,x)}return a.flags|=1,s=Ei(b,m),s.ref=a.ref,s.return=a,a.child=s}function by(s,a,d,m,x){if(s!==null){var b=s.memoizedProps;if(ra(b,m)&&s.ref===a.ref)if(Nn=!1,a.pendingProps=m=b,(s.lanes&x)!==0)(s.flags&131072)!==0&&(Nn=!0);else return a.lanes=s.lanes,Xr(s,a,x)}return sf(s,a,d,m,x)}function ky(s,a,d){var m=a.pendingProps,x=m.children,b=s!==null?s.memoizedState:null;if(m.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},kt(Js,Un),Un|=d;else{if((d&1073741824)===0)return s=b!==null?b.baseLanes|d:d,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:s,cachePool:null,transitions:null},a.updateQueue=null,kt(Js,Un),Un|=s,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=b!==null?b.baseLanes:d,kt(Js,Un),Un|=m}else b!==null?(m=b.baseLanes|d,a.memoizedState=null):m=d,kt(Js,Un),Un|=m;return xn(s,a,x,d),a.child}function Sy(s,a){var d=a.ref;(s===null&&d!==null||s!==null&&s.ref!==d)&&(a.flags|=512,a.flags|=2097152)}function sf(s,a,d,m,x){var b=jn(d)?Yi:cn.current;return b=zs(a,b),qs(a,x),d=Gd(s,a,d,m,b,x),m=Kd(),s!==null&&!Nn?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~x,Xr(s,a,x)):(Nt&&m&&Pd(a),a.flags|=1,xn(s,a,d,x),a.child)}function Ey(s,a,d,m,x){if(jn(d)){var b=!0;Bl(a)}else b=!1;if(qs(a,x),a.stateNode===null)su(s,a),fy(a,d,m),tf(a,d,m,x),m=!0;else if(s===null){var N=a.stateNode,z=a.memoizedProps;N.props=z;var V=N.context,ce=d.contextType;typeof ce=="object"&&ce!==null?ce=Zn(ce):(ce=jn(d)?Yi:cn.current,ce=zs(a,ce));var ke=d.getDerivedStateFromProps,Se=typeof ke=="function"||typeof N.getSnapshotBeforeUpdate=="function";Se||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(z!==m||V!==ce)&&hy(a,N,m,ce),yi=!1;var we=a.memoizedState;N.state=we,Jl(a,m,N,x),V=a.memoizedState,z!==m||we!==V||Cn.current||yi?(typeof ke=="function"&&(ef(a,d,ke,m),V=a.memoizedState),(z=yi||dy(a,d,z,m,we,V,ce))?(Se||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(a.flags|=4194308)):(typeof N.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=m,a.memoizedState=V),N.props=m,N.state=V,N.context=ce,m=z):(typeof N.componentDidMount=="function"&&(a.flags|=4194308),m=!1)}else{N=a.stateNode,zg(s,a),z=a.memoizedProps,ce=a.type===a.elementType?z:pr(a.type,z),N.props=ce,Se=a.pendingProps,we=N.context,V=d.contextType,typeof V=="object"&&V!==null?V=Zn(V):(V=jn(d)?Yi:cn.current,V=zs(a,V));var Oe=d.getDerivedStateFromProps;(ke=typeof Oe=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(z!==Se||we!==V)&&hy(a,N,m,V),yi=!1,we=a.memoizedState,N.state=we,Jl(a,m,N,x);var Fe=a.memoizedState;z!==Se||we!==Fe||Cn.current||yi?(typeof Oe=="function"&&(ef(a,d,Oe,m),Fe=a.memoizedState),(ce=yi||dy(a,d,ce,m,we,Fe,V)||!1)?(ke||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(m,Fe,V),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(m,Fe,V)),typeof N.componentDidUpdate=="function"&&(a.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof N.componentDidUpdate!="function"||z===s.memoizedProps&&we===s.memoizedState||(a.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||z===s.memoizedProps&&we===s.memoizedState||(a.flags|=1024),a.memoizedProps=m,a.memoizedState=Fe),N.props=m,N.state=Fe,N.context=V,m=ce):(typeof N.componentDidUpdate!="function"||z===s.memoizedProps&&we===s.memoizedState||(a.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||z===s.memoizedProps&&we===s.memoizedState||(a.flags|=1024),m=!1)}return of(s,a,d,m,b,x)}function of(s,a,d,m,x,b){Sy(s,a);var N=(a.flags&128)!==0;if(!m&&!N)return x&&Tg(a,d,!1),Xr(s,a,b);m=a.stateNode,vE.current=a;var z=N&&typeof d.getDerivedStateFromError!="function"?null:m.render();return a.flags|=1,s!==null&&N?(a.child=Hs(a,s.child,null,b),a.child=Hs(a,null,z,b)):xn(s,a,z,b),a.memoizedState=m.state,x&&Tg(a,d,!0),a.child}function _y(s){var a=s.stateNode;a.pendingContext?jg(s,a.pendingContext,a.pendingContext!==a.context):a.context&&jg(s,a.context,!1),Ud(s,a.containerInfo)}function Cy(s,a,d,m,x){return Ws(),Md(x),a.flags|=256,xn(s,a,d,m),a.child}var af={dehydrated:null,treeContext:null,retryLane:0};function lf(s){return{baseLanes:s,cachePool:null,transitions:null}}function jy(s,a,d){var m=a.pendingProps,x=It.current,b=!1,N=(a.flags&128)!==0,z;if((z=N)||(z=s!==null&&s.memoizedState===null?!1:(x&2)!==0),z?(b=!0,a.flags&=-129):(s===null||s.memoizedState!==null)&&(x|=1),kt(It,x&1),s===null)return Od(a),s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((a.mode&1)===0?a.lanes=1:s.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(N=m.children,s=m.fallback,b?(m=a.mode,b=a.child,N={mode:"hidden",children:N},(m&1)===0&&b!==null?(b.childLanes=0,b.pendingProps=N):b=yu(N,m,0,null),s=rs(s,m,d,null),b.return=a,s.return=a,b.sibling=s,a.child=b,a.child.memoizedState=lf(d),a.memoizedState=af,s):uf(a,N));if(x=s.memoizedState,x!==null&&(z=x.dehydrated,z!==null))return xE(s,a,N,m,z,x,d);if(b){b=m.fallback,N=a.mode,x=s.child,z=x.sibling;var V={mode:"hidden",children:m.children};return(N&1)===0&&a.child!==x?(m=a.child,m.childLanes=0,m.pendingProps=V,a.deletions=null):(m=Ei(x,V),m.subtreeFlags=x.subtreeFlags&14680064),z!==null?b=Ei(z,b):(b=rs(b,N,d,null),b.flags|=2),b.return=a,m.return=a,m.sibling=b,a.child=m,m=b,b=a.child,N=s.child.memoizedState,N=N===null?lf(d):{baseLanes:N.baseLanes|d,cachePool:null,transitions:N.transitions},b.memoizedState=N,b.childLanes=s.childLanes&~d,a.memoizedState=af,m}return b=s.child,s=b.sibling,m=Ei(b,{mode:"visible",children:m.children}),(a.mode&1)===0&&(m.lanes=d),m.return=a,m.sibling=null,s!==null&&(d=a.deletions,d===null?(a.deletions=[s],a.flags|=16):d.push(s)),a.child=m,a.memoizedState=null,m}function uf(s,a){return a=yu({mode:"visible",children:a},s.mode,0,null),a.return=s,s.child=a}function iu(s,a,d,m){return m!==null&&Md(m),Hs(a,s.child,null,d),s=uf(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function xE(s,a,d,m,x,b,N){if(d)return a.flags&256?(a.flags&=-257,m=nf(Error(n(422))),iu(s,a,N,m)):a.memoizedState!==null?(a.child=s.child,a.flags|=128,null):(b=m.fallback,x=a.mode,m=yu({mode:"visible",children:m.children},x,0,null),b=rs(b,x,N,null),b.flags|=2,m.return=a,b.return=a,m.sibling=b,a.child=m,(a.mode&1)!==0&&Hs(a,s.child,null,N),a.child.memoizedState=lf(N),a.memoizedState=af,b);if((a.mode&1)===0)return iu(s,a,N,null);if(x.data==="$!"){if(m=x.nextSibling&&x.nextSibling.dataset,m)var z=m.dgst;return m=z,b=Error(n(419)),m=nf(b,m,void 0),iu(s,a,N,m)}if(z=(N&s.childLanes)!==0,Nn||z){if(m=Xt,m!==null){switch(N&-N){case 4:x=2;break;case 16:x=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:x=32;break;case 536870912:x=268435456;break;default:x=0}x=(x&(m.suspendedLanes|N))!==0?0:x,x!==0&&x!==b.retryLane&&(b.retryLane=x,Jr(s,x),yr(m,s,x,-1))}return _f(),m=nf(Error(n(421))),iu(s,a,N,m)}return x.data==="$?"?(a.flags|=128,a.child=s.child,a=AE.bind(null,s),x._reactRetry=a,null):(s=b.treeContext,Bn=hi(x.nextSibling),zn=a,Nt=!0,hr=null,s!==null&&(Qn[Xn++]=Gr,Qn[Xn++]=Kr,Qn[Xn++]=Gi,Gr=s.id,Kr=s.overflow,Gi=a),a=uf(a,m.children),a.flags|=4096,a)}function Ny(s,a,d){s.lanes|=a;var m=s.alternate;m!==null&&(m.lanes|=a),Fd(s.return,a,d)}function cf(s,a,d,m,x){var b=s.memoizedState;b===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:x}:(b.isBackwards=a,b.rendering=null,b.renderingStartTime=0,b.last=m,b.tail=d,b.tailMode=x)}function Ty(s,a,d){var m=a.pendingProps,x=m.revealOrder,b=m.tail;if(xn(s,a,m.children,d),m=It.current,(m&2)!==0)m=m&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Ny(s,d,a);else if(s.tag===19)Ny(s,d,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}m&=1}if(kt(It,m),(a.mode&1)===0)a.memoizedState=null;else switch(x){case"forwards":for(d=a.child,x=null;d!==null;)s=d.alternate,s!==null&&Ql(s)===null&&(x=d),d=d.sibling;d=x,d===null?(x=a.child,a.child=null):(x=d.sibling,d.sibling=null),cf(a,!1,x,d,b);break;case"backwards":for(d=null,x=a.child,a.child=null;x!==null;){if(s=x.alternate,s!==null&&Ql(s)===null){a.child=x;break}s=x.sibling,x.sibling=d,d=x,x=s}cf(a,!0,d,null,b);break;case"together":cf(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function su(s,a){(a.mode&1)===0&&s!==null&&(s.alternate=null,a.alternate=null,a.flags|=2)}function Xr(s,a,d){if(s!==null&&(a.dependencies=s.dependencies),Zi|=a.lanes,(d&a.childLanes)===0)return null;if(s!==null&&a.child!==s.child)throw Error(n(153));if(a.child!==null){for(s=a.child,d=Ei(s,s.pendingProps),a.child=d,d.return=a;s.sibling!==null;)s=s.sibling,d=d.sibling=Ei(s,s.pendingProps),d.return=a;d.sibling=null}return a.child}function wE(s,a,d){switch(a.tag){case 3:_y(a),Ws();break;case 5:Wg(a);break;case 1:jn(a.type)&&Bl(a);break;case 4:Ud(a,a.stateNode.containerInfo);break;case 10:var m=a.type._context,x=a.memoizedProps.value;kt(Yl,m._currentValue),m._currentValue=x;break;case 13:if(m=a.memoizedState,m!==null)return m.dehydrated!==null?(kt(It,It.current&1),a.flags|=128,null):(d&a.child.childLanes)!==0?jy(s,a,d):(kt(It,It.current&1),s=Xr(s,a,d),s!==null?s.sibling:null);kt(It,It.current&1);break;case 19:if(m=(d&a.childLanes)!==0,(s.flags&128)!==0){if(m)return Ty(s,a,d);a.flags|=128}if(x=a.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),kt(It,It.current),m)break;return null;case 22:case 23:return a.lanes=0,ky(s,a,d)}return Xr(s,a,d)}var Iy,df,Py,Ay;Iy=function(s,a){for(var d=a.child;d!==null;){if(d.tag===5||d.tag===6)s.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},df=function(){},Py=function(s,a,d,m){var x=s.memoizedProps;if(x!==m){s=a.stateNode,Qi(Tr.current);var b=null;switch(d){case"input":x=Be(s,x),m=Be(s,m),b=[];break;case"select":x=T({},x,{value:void 0}),m=T({},m,{value:void 0}),b=[];break;case"textarea":x=K(s,x),m=K(s,m),b=[];break;default:typeof x.onClick!="function"&&typeof m.onClick=="function"&&(s.onclick=$l)}Ue(d,m);var N;d=null;for(ce in x)if(!m.hasOwnProperty(ce)&&x.hasOwnProperty(ce)&&x[ce]!=null)if(ce==="style"){var z=x[ce];for(N in z)z.hasOwnProperty(N)&&(d||(d={}),d[N]="")}else ce!=="dangerouslySetInnerHTML"&&ce!=="children"&&ce!=="suppressContentEditableWarning"&&ce!=="suppressHydrationWarning"&&ce!=="autoFocus"&&(i.hasOwnProperty(ce)?b||(b=[]):(b=b||[]).push(ce,null));for(ce in m){var V=m[ce];if(z=x!=null?x[ce]:void 0,m.hasOwnProperty(ce)&&V!==z&&(V!=null||z!=null))if(ce==="style")if(z){for(N in z)!z.hasOwnProperty(N)||V&&V.hasOwnProperty(N)||(d||(d={}),d[N]="");for(N in V)V.hasOwnProperty(N)&&z[N]!==V[N]&&(d||(d={}),d[N]=V[N])}else d||(b||(b=[]),b.push(ce,d)),d=V;else ce==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,z=z?z.__html:void 0,V!=null&&z!==V&&(b=b||[]).push(ce,V)):ce==="children"?typeof V!="string"&&typeof V!="number"||(b=b||[]).push(ce,""+V):ce!=="suppressContentEditableWarning"&&ce!=="suppressHydrationWarning"&&(i.hasOwnProperty(ce)?(V!=null&&ce==="onScroll"&&_t("scroll",s),b||z===V||(b=[])):(b=b||[]).push(ce,V))}d&&(b=b||[]).push("style",d);var ce=b;(a.updateQueue=ce)&&(a.flags|=4)}},Ay=function(s,a,d,m){d!==m&&(a.flags|=4)};function va(s,a){if(!Nt)switch(s.tailMode){case"hidden":a=s.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?s.tail=null:d.sibling=null;break;case"collapsed":d=s.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:m.sibling=null}}function fn(s){var a=s.alternate!==null&&s.alternate.child===s.child,d=0,m=0;if(a)for(var x=s.child;x!==null;)d|=x.lanes|x.childLanes,m|=x.subtreeFlags&14680064,m|=x.flags&14680064,x.return=s,x=x.sibling;else for(x=s.child;x!==null;)d|=x.lanes|x.childLanes,m|=x.subtreeFlags,m|=x.flags,x.return=s,x=x.sibling;return s.subtreeFlags|=m,s.childLanes=d,a}function bE(s,a,d){var m=a.pendingProps;switch(Ad(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fn(a),null;case 1:return jn(a.type)&&zl(),fn(a),null;case 3:return m=a.stateNode,Ys(),Ct(Cn),Ct(cn),Vd(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(s===null||s.child===null)&&(Vl(a)?a.flags|=4:s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,hr!==null&&(kf(hr),hr=null))),df(s,a),fn(a),null;case 5:Wd(a);var x=Qi(ha.current);if(d=a.type,s!==null&&a.stateNode!=null)Py(s,a,d,m,x),s.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!m){if(a.stateNode===null)throw Error(n(166));return fn(a),null}if(s=Qi(Tr.current),Vl(a)){m=a.stateNode,d=a.type;var b=a.memoizedProps;switch(m[Nr]=a,m[la]=b,s=(a.mode&1)!==0,d){case"dialog":_t("cancel",m),_t("close",m);break;case"iframe":case"object":case"embed":_t("load",m);break;case"video":case"audio":for(x=0;x<sa.length;x++)_t(sa[x],m);break;case"source":_t("error",m);break;case"img":case"image":case"link":_t("error",m),_t("load",m);break;case"details":_t("toggle",m);break;case"input":Qe(m,b),_t("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!b.multiple},_t("invalid",m);break;case"textarea":ne(m,b),_t("invalid",m)}Ue(d,b),x=null;for(var N in b)if(b.hasOwnProperty(N)){var z=b[N];N==="children"?typeof z=="string"?m.textContent!==z&&(b.suppressHydrationWarning!==!0&&Dl(m.textContent,z,s),x=["children",z]):typeof z=="number"&&m.textContent!==""+z&&(b.suppressHydrationWarning!==!0&&Dl(m.textContent,z,s),x=["children",""+z]):i.hasOwnProperty(N)&&z!=null&&N==="onScroll"&&_t("scroll",m)}switch(d){case"input":Z(m),Ft(m,b,!0);break;case"textarea":Z(m),ie(m);break;case"select":case"option":break;default:typeof b.onClick=="function"&&(m.onclick=$l)}m=x,a.updateQueue=m,m!==null&&(a.flags|=4)}else{N=x.nodeType===9?x:x.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=U(d)),s==="http://www.w3.org/1999/xhtml"?d==="script"?(s=N.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof m.is=="string"?s=N.createElement(d,{is:m.is}):(s=N.createElement(d),d==="select"&&(N=s,m.multiple?N.multiple=!0:m.size&&(N.size=m.size))):s=N.createElementNS(s,d),s[Nr]=a,s[la]=m,Iy(s,a,!1,!1),a.stateNode=s;e:{switch(N=Xe(d,m),d){case"dialog":_t("cancel",s),_t("close",s),x=m;break;case"iframe":case"object":case"embed":_t("load",s),x=m;break;case"video":case"audio":for(x=0;x<sa.length;x++)_t(sa[x],s);x=m;break;case"source":_t("error",s),x=m;break;case"img":case"image":case"link":_t("error",s),_t("load",s),x=m;break;case"details":_t("toggle",s),x=m;break;case"input":Qe(s,m),x=Be(s,m),_t("invalid",s);break;case"option":x=m;break;case"select":s._wrapperState={wasMultiple:!!m.multiple},x=T({},m,{value:void 0}),_t("invalid",s);break;case"textarea":ne(s,m),x=K(s,m),_t("invalid",s);break;default:x=m}Ue(d,x),z=x;for(b in z)if(z.hasOwnProperty(b)){var V=z[b];b==="style"?he(s,V):b==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,V!=null&&Ne(s,V)):b==="children"?typeof V=="string"?(d!=="textarea"||V!=="")&&L(s,V):typeof V=="number"&&L(s,""+V):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(i.hasOwnProperty(b)?V!=null&&b==="onScroll"&&_t("scroll",s):V!=null&&j(s,b,V,N))}switch(d){case"input":Z(s),Ft(s,m,!1);break;case"textarea":Z(s),ie(s);break;case"option":m.value!=null&&s.setAttribute("value",""+ve(m.value));break;case"select":s.multiple=!!m.multiple,b=m.value,b!=null?me(s,!!m.multiple,b,!1):m.defaultValue!=null&&me(s,!!m.multiple,m.defaultValue,!0);break;default:typeof x.onClick=="function"&&(s.onclick=$l)}switch(d){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return fn(a),null;case 6:if(s&&a.stateNode!=null)Ay(s,a,s.memoizedProps,m);else{if(typeof m!="string"&&a.stateNode===null)throw Error(n(166));if(d=Qi(ha.current),Qi(Tr.current),Vl(a)){if(m=a.stateNode,d=a.memoizedProps,m[Nr]=a,(b=m.nodeValue!==d)&&(s=zn,s!==null))switch(s.tag){case 3:Dl(m.nodeValue,d,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Dl(m.nodeValue,d,(s.mode&1)!==0)}b&&(a.flags|=4)}else m=(d.nodeType===9?d:d.ownerDocument).createTextNode(m),m[Nr]=a,a.stateNode=m}return fn(a),null;case 13:if(Ct(It),m=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(Nt&&Bn!==null&&(a.mode&1)!==0&&(a.flags&128)===0)Mg(),Ws(),a.flags|=98560,b=!1;else if(b=Vl(a),m!==null&&m.dehydrated!==null){if(s===null){if(!b)throw Error(n(318));if(b=a.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(n(317));b[Nr]=a}else Ws(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;fn(a),b=!1}else hr!==null&&(kf(hr),hr=null),b=!0;if(!b)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=d,a):(m=m!==null,m!==(s!==null&&s.memoizedState!==null)&&m&&(a.child.flags|=8192,(a.mode&1)!==0&&(s===null||(It.current&1)!==0?Gt===0&&(Gt=3):_f())),a.updateQueue!==null&&(a.flags|=4),fn(a),null);case 4:return Ys(),df(s,a),s===null&&oa(a.stateNode.containerInfo),fn(a),null;case 10:return $d(a.type._context),fn(a),null;case 17:return jn(a.type)&&zl(),fn(a),null;case 19:if(Ct(It),b=a.memoizedState,b===null)return fn(a),null;if(m=(a.flags&128)!==0,N=b.rendering,N===null)if(m)va(b,!1);else{if(Gt!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(N=Ql(s),N!==null){for(a.flags|=128,va(b,!1),m=N.updateQueue,m!==null&&(a.updateQueue=m,a.flags|=4),a.subtreeFlags=0,m=d,d=a.child;d!==null;)b=d,s=m,b.flags&=14680066,N=b.alternate,N===null?(b.childLanes=0,b.lanes=s,b.child=null,b.subtreeFlags=0,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=N.childLanes,b.lanes=N.lanes,b.child=N.child,b.subtreeFlags=0,b.deletions=null,b.memoizedProps=N.memoizedProps,b.memoizedState=N.memoizedState,b.updateQueue=N.updateQueue,b.type=N.type,s=N.dependencies,b.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),d=d.sibling;return kt(It,It.current&1|2),a.child}s=s.sibling}b.tail!==null&&Lt()>Qs&&(a.flags|=128,m=!0,va(b,!1),a.lanes=4194304)}else{if(!m)if(s=Ql(N),s!==null){if(a.flags|=128,m=!0,d=s.updateQueue,d!==null&&(a.updateQueue=d,a.flags|=4),va(b,!0),b.tail===null&&b.tailMode==="hidden"&&!N.alternate&&!Nt)return fn(a),null}else 2*Lt()-b.renderingStartTime>Qs&&d!==1073741824&&(a.flags|=128,m=!0,va(b,!1),a.lanes=4194304);b.isBackwards?(N.sibling=a.child,a.child=N):(d=b.last,d!==null?d.sibling=N:a.child=N,b.last=N)}return b.tail!==null?(a=b.tail,b.rendering=a,b.tail=a.sibling,b.renderingStartTime=Lt(),a.sibling=null,d=It.current,kt(It,m?d&1|2:d&1),a):(fn(a),null);case 22:case 23:return Ef(),m=a.memoizedState!==null,s!==null&&s.memoizedState!==null!==m&&(a.flags|=8192),m&&(a.mode&1)!==0?(Un&1073741824)!==0&&(fn(a),a.subtreeFlags&6&&(a.flags|=8192)):fn(a),null;case 24:return null;case 25:return null}throw Error(n(156,a.tag))}function kE(s,a){switch(Ad(a),a.tag){case 1:return jn(a.type)&&zl(),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return Ys(),Ct(Cn),Ct(cn),Vd(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 5:return Wd(a),null;case 13:if(Ct(It),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(n(340));Ws()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return Ct(It),null;case 4:return Ys(),null;case 10:return $d(a.type._context),null;case 22:case 23:return Ef(),null;case 24:return null;default:return null}}var ou=!1,hn=!1,SE=typeof WeakSet=="function"?WeakSet:Set,Le=null;function Ks(s,a){var d=s.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(m){Rt(s,a,m)}else d.current=null}function ff(s,a,d){try{d()}catch(m){Rt(s,a,m)}}var Ry=!1;function EE(s,a){if(Sd=Cl,s=dg(),md(s)){if("selectionStart"in s)var d={start:s.selectionStart,end:s.selectionEnd};else e:{d=(d=s.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var x=m.anchorOffset,b=m.focusNode;m=m.focusOffset;try{d.nodeType,b.nodeType}catch{d=null;break e}var N=0,z=-1,V=-1,ce=0,ke=0,Se=s,we=null;t:for(;;){for(var Oe;Se!==d||x!==0&&Se.nodeType!==3||(z=N+x),Se!==b||m!==0&&Se.nodeType!==3||(V=N+m),Se.nodeType===3&&(N+=Se.nodeValue.length),(Oe=Se.firstChild)!==null;)we=Se,Se=Oe;for(;;){if(Se===s)break t;if(we===d&&++ce===x&&(z=N),we===b&&++ke===m&&(V=N),(Oe=Se.nextSibling)!==null)break;Se=we,we=Se.parentNode}Se=Oe}d=z===-1||V===-1?null:{start:z,end:V}}else d=null}d=d||{start:0,end:0}}else d=null;for(Ed={focusedElem:s,selectionRange:d},Cl=!1,Le=a;Le!==null;)if(a=Le,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,Le=s;else for(;Le!==null;){a=Le;try{var Fe=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(Fe!==null){var ze=Fe.memoizedProps,Dt=Fe.memoizedState,le=a.stateNode,Q=le.getSnapshotBeforeUpdate(a.elementType===a.type?ze:pr(a.type,ze),Dt);le.__reactInternalSnapshotBeforeUpdate=Q}break;case 3:var ue=a.stateNode.containerInfo;ue.nodeType===1?ue.textContent="":ue.nodeType===9&&ue.documentElement&&ue.removeChild(ue.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Ce){Rt(a,a.return,Ce)}if(s=a.sibling,s!==null){s.return=a.return,Le=s;break}Le=a.return}return Fe=Ry,Ry=!1,Fe}function xa(s,a,d){var m=a.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var x=m=m.next;do{if((x.tag&s)===s){var b=x.destroy;x.destroy=void 0,b!==void 0&&ff(a,d,b)}x=x.next}while(x!==m)}}function au(s,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var d=a=a.next;do{if((d.tag&s)===s){var m=d.create;d.destroy=m()}d=d.next}while(d!==a)}}function hf(s){var a=s.ref;if(a!==null){var d=s.stateNode;switch(s.tag){case 5:s=d;break;default:s=d}typeof a=="function"?a(s):a.current=s}}function Oy(s){var a=s.alternate;a!==null&&(s.alternate=null,Oy(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&(delete a[Nr],delete a[la],delete a[Nd],delete a[oE],delete a[aE])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function My(s){return s.tag===5||s.tag===3||s.tag===4}function Ly(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||My(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function pf(s,a,d){var m=s.tag;if(m===5||m===6)s=s.stateNode,a?d.nodeType===8?d.parentNode.insertBefore(s,a):d.insertBefore(s,a):(d.nodeType===8?(a=d.parentNode,a.insertBefore(s,d)):(a=d,a.appendChild(s)),d=d._reactRootContainer,d!=null||a.onclick!==null||(a.onclick=$l));else if(m!==4&&(s=s.child,s!==null))for(pf(s,a,d),s=s.sibling;s!==null;)pf(s,a,d),s=s.sibling}function mf(s,a,d){var m=s.tag;if(m===5||m===6)s=s.stateNode,a?d.insertBefore(s,a):d.appendChild(s);else if(m!==4&&(s=s.child,s!==null))for(mf(s,a,d),s=s.sibling;s!==null;)mf(s,a,d),s=s.sibling}var sn=null,mr=!1;function xi(s,a,d){for(d=d.child;d!==null;)Dy(s,a,d),d=d.sibling}function Dy(s,a,d){if(jr&&typeof jr.onCommitFiberUnmount=="function")try{jr.onCommitFiberUnmount(wl,d)}catch{}switch(d.tag){case 5:hn||Ks(d,a);case 6:var m=sn,x=mr;sn=null,xi(s,a,d),sn=m,mr=x,sn!==null&&(mr?(s=sn,d=d.stateNode,s.nodeType===8?s.parentNode.removeChild(d):s.removeChild(d)):sn.removeChild(d.stateNode));break;case 18:sn!==null&&(mr?(s=sn,d=d.stateNode,s.nodeType===8?jd(s.parentNode,d):s.nodeType===1&&jd(s,d),Qo(s)):jd(sn,d.stateNode));break;case 4:m=sn,x=mr,sn=d.stateNode.containerInfo,mr=!0,xi(s,a,d),sn=m,mr=x;break;case 0:case 11:case 14:case 15:if(!hn&&(m=d.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){x=m=m.next;do{var b=x,N=b.destroy;b=b.tag,N!==void 0&&((b&2)!==0||(b&4)!==0)&&ff(d,a,N),x=x.next}while(x!==m)}xi(s,a,d);break;case 1:if(!hn&&(Ks(d,a),m=d.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=d.memoizedProps,m.state=d.memoizedState,m.componentWillUnmount()}catch(z){Rt(d,a,z)}xi(s,a,d);break;case 21:xi(s,a,d);break;case 22:d.mode&1?(hn=(m=hn)||d.memoizedState!==null,xi(s,a,d),hn=m):xi(s,a,d);break;default:xi(s,a,d)}}function $y(s){var a=s.updateQueue;if(a!==null){s.updateQueue=null;var d=s.stateNode;d===null&&(d=s.stateNode=new SE),a.forEach(function(m){var x=RE.bind(null,s,m);d.has(m)||(d.add(m),m.then(x,x))})}}function gr(s,a){var d=a.deletions;if(d!==null)for(var m=0;m<d.length;m++){var x=d[m];try{var b=s,N=a,z=N;e:for(;z!==null;){switch(z.tag){case 5:sn=z.stateNode,mr=!1;break e;case 3:sn=z.stateNode.containerInfo,mr=!0;break e;case 4:sn=z.stateNode.containerInfo,mr=!0;break e}z=z.return}if(sn===null)throw Error(n(160));Dy(b,N,x),sn=null,mr=!1;var V=x.alternate;V!==null&&(V.return=null),x.return=null}catch(ce){Rt(x,a,ce)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)Fy(a,s),a=a.sibling}function Fy(s,a){var d=s.alternate,m=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(gr(a,s),Pr(s),m&4){try{xa(3,s,s.return),au(3,s)}catch(ze){Rt(s,s.return,ze)}try{xa(5,s,s.return)}catch(ze){Rt(s,s.return,ze)}}break;case 1:gr(a,s),Pr(s),m&512&&d!==null&&Ks(d,d.return);break;case 5:if(gr(a,s),Pr(s),m&512&&d!==null&&Ks(d,d.return),s.flags&32){var x=s.stateNode;try{L(x,"")}catch(ze){Rt(s,s.return,ze)}}if(m&4&&(x=s.stateNode,x!=null)){var b=s.memoizedProps,N=d!==null?d.memoizedProps:b,z=s.type,V=s.updateQueue;if(s.updateQueue=null,V!==null)try{z==="input"&&b.type==="radio"&&b.name!=null&&st(x,b),Xe(z,N);var ce=Xe(z,b);for(N=0;N<V.length;N+=2){var ke=V[N],Se=V[N+1];ke==="style"?he(x,Se):ke==="dangerouslySetInnerHTML"?Ne(x,Se):ke==="children"?L(x,Se):j(x,ke,Se,ce)}switch(z){case"input":bt(x,b);break;case"textarea":H(x,b);break;case"select":var we=x._wrapperState.wasMultiple;x._wrapperState.wasMultiple=!!b.multiple;var Oe=b.value;Oe!=null?me(x,!!b.multiple,Oe,!1):we!==!!b.multiple&&(b.defaultValue!=null?me(x,!!b.multiple,b.defaultValue,!0):me(x,!!b.multiple,b.multiple?[]:"",!1))}x[la]=b}catch(ze){Rt(s,s.return,ze)}}break;case 6:if(gr(a,s),Pr(s),m&4){if(s.stateNode===null)throw Error(n(162));x=s.stateNode,b=s.memoizedProps;try{x.nodeValue=b}catch(ze){Rt(s,s.return,ze)}}break;case 3:if(gr(a,s),Pr(s),m&4&&d!==null&&d.memoizedState.isDehydrated)try{Qo(a.containerInfo)}catch(ze){Rt(s,s.return,ze)}break;case 4:gr(a,s),Pr(s);break;case 13:gr(a,s),Pr(s),x=s.child,x.flags&8192&&(b=x.memoizedState!==null,x.stateNode.isHidden=b,!b||x.alternate!==null&&x.alternate.memoizedState!==null||(vf=Lt())),m&4&&$y(s);break;case 22:if(ke=d!==null&&d.memoizedState!==null,s.mode&1?(hn=(ce=hn)||ke,gr(a,s),hn=ce):gr(a,s),Pr(s),m&8192){if(ce=s.memoizedState!==null,(s.stateNode.isHidden=ce)&&!ke&&(s.mode&1)!==0)for(Le=s,ke=s.child;ke!==null;){for(Se=Le=ke;Le!==null;){switch(we=Le,Oe=we.child,we.tag){case 0:case 11:case 14:case 15:xa(4,we,we.return);break;case 1:Ks(we,we.return);var Fe=we.stateNode;if(typeof Fe.componentWillUnmount=="function"){m=we,d=we.return;try{a=m,Fe.props=a.memoizedProps,Fe.state=a.memoizedState,Fe.componentWillUnmount()}catch(ze){Rt(m,d,ze)}}break;case 5:Ks(we,we.return);break;case 22:if(we.memoizedState!==null){Uy(Se);continue}}Oe!==null?(Oe.return=we,Le=Oe):Uy(Se)}ke=ke.sibling}e:for(ke=null,Se=s;;){if(Se.tag===5){if(ke===null){ke=Se;try{x=Se.stateNode,ce?(b=x.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none"):(z=Se.stateNode,V=Se.memoizedProps.style,N=V!=null&&V.hasOwnProperty("display")?V.display:null,z.style.display=ye("display",N))}catch(ze){Rt(s,s.return,ze)}}}else if(Se.tag===6){if(ke===null)try{Se.stateNode.nodeValue=ce?"":Se.memoizedProps}catch(ze){Rt(s,s.return,ze)}}else if((Se.tag!==22&&Se.tag!==23||Se.memoizedState===null||Se===s)&&Se.child!==null){Se.child.return=Se,Se=Se.child;continue}if(Se===s)break e;for(;Se.sibling===null;){if(Se.return===null||Se.return===s)break e;ke===Se&&(ke=null),Se=Se.return}ke===Se&&(ke=null),Se.sibling.return=Se.return,Se=Se.sibling}}break;case 19:gr(a,s),Pr(s),m&4&&$y(s);break;case 21:break;default:gr(a,s),Pr(s)}}function Pr(s){var a=s.flags;if(a&2){try{e:{for(var d=s.return;d!==null;){if(My(d)){var m=d;break e}d=d.return}throw Error(n(160))}switch(m.tag){case 5:var x=m.stateNode;m.flags&32&&(L(x,""),m.flags&=-33);var b=Ly(s);mf(s,b,x);break;case 3:case 4:var N=m.stateNode.containerInfo,z=Ly(s);pf(s,z,N);break;default:throw Error(n(161))}}catch(V){Rt(s,s.return,V)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function _E(s,a,d){Le=s,zy(s)}function zy(s,a,d){for(var m=(s.mode&1)!==0;Le!==null;){var x=Le,b=x.child;if(x.tag===22&&m){var N=x.memoizedState!==null||ou;if(!N){var z=x.alternate,V=z!==null&&z.memoizedState!==null||hn;z=ou;var ce=hn;if(ou=N,(hn=V)&&!ce)for(Le=x;Le!==null;)N=Le,V=N.child,N.tag===22&&N.memoizedState!==null?Wy(x):V!==null?(V.return=N,Le=V):Wy(x);for(;b!==null;)Le=b,zy(b),b=b.sibling;Le=x,ou=z,hn=ce}By(s)}else(x.subtreeFlags&8772)!==0&&b!==null?(b.return=x,Le=b):By(s)}}function By(s){for(;Le!==null;){var a=Le;if((a.flags&8772)!==0){var d=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:hn||au(5,a);break;case 1:var m=a.stateNode;if(a.flags&4&&!hn)if(d===null)m.componentDidMount();else{var x=a.elementType===a.type?d.memoizedProps:pr(a.type,d.memoizedProps);m.componentDidUpdate(x,d.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var b=a.updateQueue;b!==null&&Ug(a,b,m);break;case 3:var N=a.updateQueue;if(N!==null){if(d=null,a.child!==null)switch(a.child.tag){case 5:d=a.child.stateNode;break;case 1:d=a.child.stateNode}Ug(a,N,d)}break;case 5:var z=a.stateNode;if(d===null&&a.flags&4){d=z;var V=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":V.autoFocus&&d.focus();break;case"img":V.src&&(d.src=V.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var ce=a.alternate;if(ce!==null){var ke=ce.memoizedState;if(ke!==null){var Se=ke.dehydrated;Se!==null&&Qo(Se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}hn||a.flags&512&&hf(a)}catch(we){Rt(a,a.return,we)}}if(a===s){Le=null;break}if(d=a.sibling,d!==null){d.return=a.return,Le=d;break}Le=a.return}}function Uy(s){for(;Le!==null;){var a=Le;if(a===s){Le=null;break}var d=a.sibling;if(d!==null){d.return=a.return,Le=d;break}Le=a.return}}function Wy(s){for(;Le!==null;){var a=Le;try{switch(a.tag){case 0:case 11:case 15:var d=a.return;try{au(4,a)}catch(V){Rt(a,d,V)}break;case 1:var m=a.stateNode;if(typeof m.componentDidMount=="function"){var x=a.return;try{m.componentDidMount()}catch(V){Rt(a,x,V)}}var b=a.return;try{hf(a)}catch(V){Rt(a,b,V)}break;case 5:var N=a.return;try{hf(a)}catch(V){Rt(a,N,V)}}}catch(V){Rt(a,a.return,V)}if(a===s){Le=null;break}var z=a.sibling;if(z!==null){z.return=a.return,Le=z;break}Le=a.return}}var CE=Math.ceil,lu=I.ReactCurrentDispatcher,gf=I.ReactCurrentOwner,tr=I.ReactCurrentBatchConfig,dt=0,Xt=null,zt=null,on=0,Un=0,Js=pi(0),Gt=0,wa=null,Zi=0,uu=0,yf=0,ba=null,Tn=null,vf=0,Qs=1/0,Zr=null,cu=!1,xf=null,wi=null,du=!1,bi=null,fu=0,ka=0,wf=null,hu=-1,pu=0;function wn(){return(dt&6)!==0?Lt():hu!==-1?hu:hu=Lt()}function ki(s){return(s.mode&1)===0?1:(dt&2)!==0&&on!==0?on&-on:uE.transition!==null?(pu===0&&(pu=Lm()),pu):(s=mt,s!==0||(s=window.event,s=s===void 0?16:Vm(s.type)),s)}function yr(s,a,d,m){if(50<ka)throw ka=0,wf=null,Error(n(185));qo(s,d,m),((dt&2)===0||s!==Xt)&&(s===Xt&&((dt&2)===0&&(uu|=d),Gt===4&&Si(s,on)),In(s,m),d===1&&dt===0&&(a.mode&1)===0&&(Qs=Lt()+500,Ul&&gi()))}function In(s,a){var d=s.callbackNode;uS(s,a);var m=Sl(s,s===Xt?on:0);if(m===0)d!==null&&Rm(d),s.callbackNode=null,s.callbackPriority=0;else if(a=m&-m,s.callbackPriority!==a){if(d!=null&&Rm(d),a===1)s.tag===0?lE(Vy.bind(null,s)):Ig(Vy.bind(null,s)),iE(function(){(dt&6)===0&&gi()}),d=null;else{switch(Dm(m)){case 1:d=Xc;break;case 4:d=Om;break;case 16:d=xl;break;case 536870912:d=Mm;break;default:d=xl}d=Zy(d,Hy.bind(null,s))}s.callbackPriority=a,s.callbackNode=d}}function Hy(s,a){if(hu=-1,pu=0,(dt&6)!==0)throw Error(n(327));var d=s.callbackNode;if(Xs()&&s.callbackNode!==d)return null;var m=Sl(s,s===Xt?on:0);if(m===0)return null;if((m&30)!==0||(m&s.expiredLanes)!==0||a)a=mu(s,m);else{a=m;var x=dt;dt|=2;var b=Yy();(Xt!==s||on!==a)&&(Zr=null,Qs=Lt()+500,ts(s,a));do try{TE();break}catch(z){qy(s,z)}while(!0);Dd(),lu.current=b,dt=x,zt!==null?a=0:(Xt=null,on=0,a=Gt)}if(a!==0){if(a===2&&(x=Zc(s),x!==0&&(m=x,a=bf(s,x))),a===1)throw d=wa,ts(s,0),Si(s,m),In(s,Lt()),d;if(a===6)Si(s,m);else{if(x=s.current.alternate,(m&30)===0&&!jE(x)&&(a=mu(s,m),a===2&&(b=Zc(s),b!==0&&(m=b,a=bf(s,b))),a===1))throw d=wa,ts(s,0),Si(s,m),In(s,Lt()),d;switch(s.finishedWork=x,s.finishedLanes=m,a){case 0:case 1:throw Error(n(345));case 2:ns(s,Tn,Zr);break;case 3:if(Si(s,m),(m&130023424)===m&&(a=vf+500-Lt(),10<a)){if(Sl(s,0)!==0)break;if(x=s.suspendedLanes,(x&m)!==m){wn(),s.pingedLanes|=s.suspendedLanes&x;break}s.timeoutHandle=Cd(ns.bind(null,s,Tn,Zr),a);break}ns(s,Tn,Zr);break;case 4:if(Si(s,m),(m&4194240)===m)break;for(a=s.eventTimes,x=-1;0<m;){var N=31-dr(m);b=1<<N,N=a[N],N>x&&(x=N),m&=~b}if(m=x,m=Lt()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*CE(m/1960))-m,10<m){s.timeoutHandle=Cd(ns.bind(null,s,Tn,Zr),m);break}ns(s,Tn,Zr);break;case 5:ns(s,Tn,Zr);break;default:throw Error(n(329))}}}return In(s,Lt()),s.callbackNode===d?Hy.bind(null,s):null}function bf(s,a){var d=ba;return s.current.memoizedState.isDehydrated&&(ts(s,a).flags|=256),s=mu(s,a),s!==2&&(a=Tn,Tn=d,a!==null&&kf(a)),s}function kf(s){Tn===null?Tn=s:Tn.push.apply(Tn,s)}function jE(s){for(var a=s;;){if(a.flags&16384){var d=a.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var m=0;m<d.length;m++){var x=d[m],b=x.getSnapshot;x=x.value;try{if(!fr(b(),x))return!1}catch{return!1}}}if(d=a.child,a.subtreeFlags&16384&&d!==null)d.return=a,a=d;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Si(s,a){for(a&=~yf,a&=~uu,s.suspendedLanes|=a,s.pingedLanes&=~a,s=s.expirationTimes;0<a;){var d=31-dr(a),m=1<<d;s[d]=-1,a&=~m}}function Vy(s){if((dt&6)!==0)throw Error(n(327));Xs();var a=Sl(s,0);if((a&1)===0)return In(s,Lt()),null;var d=mu(s,a);if(s.tag!==0&&d===2){var m=Zc(s);m!==0&&(a=m,d=bf(s,m))}if(d===1)throw d=wa,ts(s,0),Si(s,a),In(s,Lt()),d;if(d===6)throw Error(n(345));return s.finishedWork=s.current.alternate,s.finishedLanes=a,ns(s,Tn,Zr),In(s,Lt()),null}function Sf(s,a){var d=dt;dt|=1;try{return s(a)}finally{dt=d,dt===0&&(Qs=Lt()+500,Ul&&gi())}}function es(s){bi!==null&&bi.tag===0&&(dt&6)===0&&Xs();var a=dt;dt|=1;var d=tr.transition,m=mt;try{if(tr.transition=null,mt=1,s)return s()}finally{mt=m,tr.transition=d,dt=a,(dt&6)===0&&gi()}}function Ef(){Un=Js.current,Ct(Js)}function ts(s,a){s.finishedWork=null,s.finishedLanes=0;var d=s.timeoutHandle;if(d!==-1&&(s.timeoutHandle=-1,rE(d)),zt!==null)for(d=zt.return;d!==null;){var m=d;switch(Ad(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&zl();break;case 3:Ys(),Ct(Cn),Ct(cn),Vd();break;case 5:Wd(m);break;case 4:Ys();break;case 13:Ct(It);break;case 19:Ct(It);break;case 10:$d(m.type._context);break;case 22:case 23:Ef()}d=d.return}if(Xt=s,zt=s=Ei(s.current,null),on=Un=a,Gt=0,wa=null,yf=uu=Zi=0,Tn=ba=null,Ji!==null){for(a=0;a<Ji.length;a++)if(d=Ji[a],m=d.interleaved,m!==null){d.interleaved=null;var x=m.next,b=d.pending;if(b!==null){var N=b.next;b.next=x,m.next=N}d.pending=m}Ji=null}return s}function qy(s,a){do{var d=zt;try{if(Dd(),Xl.current=nu,Zl){for(var m=Pt.memoizedState;m!==null;){var x=m.queue;x!==null&&(x.pending=null),m=m.next}Zl=!1}if(Xi=0,Qt=Yt=Pt=null,pa=!1,ma=0,gf.current=null,d===null||d.return===null){Gt=1,wa=a,zt=null;break}e:{var b=s,N=d.return,z=d,V=a;if(a=on,z.flags|=32768,V!==null&&typeof V=="object"&&typeof V.then=="function"){var ce=V,ke=z,Se=ke.tag;if((ke.mode&1)===0&&(Se===0||Se===11||Se===15)){var we=ke.alternate;we?(ke.updateQueue=we.updateQueue,ke.memoizedState=we.memoizedState,ke.lanes=we.lanes):(ke.updateQueue=null,ke.memoizedState=null)}var Oe=yy(N);if(Oe!==null){Oe.flags&=-257,vy(Oe,N,z,b,a),Oe.mode&1&&gy(b,ce,a),a=Oe,V=ce;var Fe=a.updateQueue;if(Fe===null){var ze=new Set;ze.add(V),a.updateQueue=ze}else Fe.add(V);break e}else{if((a&1)===0){gy(b,ce,a),_f();break e}V=Error(n(426))}}else if(Nt&&z.mode&1){var Dt=yy(N);if(Dt!==null){(Dt.flags&65536)===0&&(Dt.flags|=256),vy(Dt,N,z,b,a),Md(Gs(V,z));break e}}b=V=Gs(V,z),Gt!==4&&(Gt=2),ba===null?ba=[b]:ba.push(b),b=N;do{switch(b.tag){case 3:b.flags|=65536,a&=-a,b.lanes|=a;var le=py(b,V,a);Bg(b,le);break e;case 1:z=V;var Q=b.type,ue=b.stateNode;if((b.flags&128)===0&&(typeof Q.getDerivedStateFromError=="function"||ue!==null&&typeof ue.componentDidCatch=="function"&&(wi===null||!wi.has(ue)))){b.flags|=65536,a&=-a,b.lanes|=a;var Ce=my(b,z,a);Bg(b,Ce);break e}}b=b.return}while(b!==null)}Ky(d)}catch(We){a=We,zt===d&&d!==null&&(zt=d=d.return);continue}break}while(!0)}function Yy(){var s=lu.current;return lu.current=nu,s===null?nu:s}function _f(){(Gt===0||Gt===3||Gt===2)&&(Gt=4),Xt===null||(Zi&268435455)===0&&(uu&268435455)===0||Si(Xt,on)}function mu(s,a){var d=dt;dt|=2;var m=Yy();(Xt!==s||on!==a)&&(Zr=null,ts(s,a));do try{NE();break}catch(x){qy(s,x)}while(!0);if(Dd(),dt=d,lu.current=m,zt!==null)throw Error(n(261));return Xt=null,on=0,Gt}function NE(){for(;zt!==null;)Gy(zt)}function TE(){for(;zt!==null&&!eS();)Gy(zt)}function Gy(s){var a=Xy(s.alternate,s,Un);s.memoizedProps=s.pendingProps,a===null?Ky(s):zt=a,gf.current=null}function Ky(s){var a=s;do{var d=a.alternate;if(s=a.return,(a.flags&32768)===0){if(d=bE(d,a,Un),d!==null){zt=d;return}}else{if(d=kE(d,a),d!==null){d.flags&=32767,zt=d;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Gt=6,zt=null;return}}if(a=a.sibling,a!==null){zt=a;return}zt=a=s}while(a!==null);Gt===0&&(Gt=5)}function ns(s,a,d){var m=mt,x=tr.transition;try{tr.transition=null,mt=1,IE(s,a,d,m)}finally{tr.transition=x,mt=m}return null}function IE(s,a,d,m){do Xs();while(bi!==null);if((dt&6)!==0)throw Error(n(327));d=s.finishedWork;var x=s.finishedLanes;if(d===null)return null;if(s.finishedWork=null,s.finishedLanes=0,d===s.current)throw Error(n(177));s.callbackNode=null,s.callbackPriority=0;var b=d.lanes|d.childLanes;if(cS(s,b),s===Xt&&(zt=Xt=null,on=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||du||(du=!0,Zy(xl,function(){return Xs(),null})),b=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||b){b=tr.transition,tr.transition=null;var N=mt;mt=1;var z=dt;dt|=4,gf.current=null,EE(s,d),Fy(d,s),JS(Ed),Cl=!!Sd,Ed=Sd=null,s.current=d,_E(d),tS(),dt=z,mt=N,tr.transition=b}else s.current=d;if(du&&(du=!1,bi=s,fu=x),b=s.pendingLanes,b===0&&(wi=null),iS(d.stateNode),In(s,Lt()),a!==null)for(m=s.onRecoverableError,d=0;d<a.length;d++)x=a[d],m(x.value,{componentStack:x.stack,digest:x.digest});if(cu)throw cu=!1,s=xf,xf=null,s;return(fu&1)!==0&&s.tag!==0&&Xs(),b=s.pendingLanes,(b&1)!==0?s===wf?ka++:(ka=0,wf=s):ka=0,gi(),null}function Xs(){if(bi!==null){var s=Dm(fu),a=tr.transition,d=mt;try{if(tr.transition=null,mt=16>s?16:s,bi===null)var m=!1;else{if(s=bi,bi=null,fu=0,(dt&6)!==0)throw Error(n(331));var x=dt;for(dt|=4,Le=s.current;Le!==null;){var b=Le,N=b.child;if((Le.flags&16)!==0){var z=b.deletions;if(z!==null){for(var V=0;V<z.length;V++){var ce=z[V];for(Le=ce;Le!==null;){var ke=Le;switch(ke.tag){case 0:case 11:case 15:xa(8,ke,b)}var Se=ke.child;if(Se!==null)Se.return=ke,Le=Se;else for(;Le!==null;){ke=Le;var we=ke.sibling,Oe=ke.return;if(Oy(ke),ke===ce){Le=null;break}if(we!==null){we.return=Oe,Le=we;break}Le=Oe}}}var Fe=b.alternate;if(Fe!==null){var ze=Fe.child;if(ze!==null){Fe.child=null;do{var Dt=ze.sibling;ze.sibling=null,ze=Dt}while(ze!==null)}}Le=b}}if((b.subtreeFlags&2064)!==0&&N!==null)N.return=b,Le=N;else e:for(;Le!==null;){if(b=Le,(b.flags&2048)!==0)switch(b.tag){case 0:case 11:case 15:xa(9,b,b.return)}var le=b.sibling;if(le!==null){le.return=b.return,Le=le;break e}Le=b.return}}var Q=s.current;for(Le=Q;Le!==null;){N=Le;var ue=N.child;if((N.subtreeFlags&2064)!==0&&ue!==null)ue.return=N,Le=ue;else e:for(N=Q;Le!==null;){if(z=Le,(z.flags&2048)!==0)try{switch(z.tag){case 0:case 11:case 15:au(9,z)}}catch(We){Rt(z,z.return,We)}if(z===N){Le=null;break e}var Ce=z.sibling;if(Ce!==null){Ce.return=z.return,Le=Ce;break e}Le=z.return}}if(dt=x,gi(),jr&&typeof jr.onPostCommitFiberRoot=="function")try{jr.onPostCommitFiberRoot(wl,s)}catch{}m=!0}return m}finally{mt=d,tr.transition=a}}return!1}function Jy(s,a,d){a=Gs(d,a),a=py(s,a,1),s=vi(s,a,1),a=wn(),s!==null&&(qo(s,1,a),In(s,a))}function Rt(s,a,d){if(s.tag===3)Jy(s,s,d);else for(;a!==null;){if(a.tag===3){Jy(a,s,d);break}else if(a.tag===1){var m=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(wi===null||!wi.has(m))){s=Gs(d,s),s=my(a,s,1),a=vi(a,s,1),s=wn(),a!==null&&(qo(a,1,s),In(a,s));break}}a=a.return}}function PE(s,a,d){var m=s.pingCache;m!==null&&m.delete(a),a=wn(),s.pingedLanes|=s.suspendedLanes&d,Xt===s&&(on&d)===d&&(Gt===4||Gt===3&&(on&130023424)===on&&500>Lt()-vf?ts(s,0):yf|=d),In(s,a)}function Qy(s,a){a===0&&((s.mode&1)===0?a=1:(a=kl,kl<<=1,(kl&130023424)===0&&(kl=4194304)));var d=wn();s=Jr(s,a),s!==null&&(qo(s,a,d),In(s,d))}function AE(s){var a=s.memoizedState,d=0;a!==null&&(d=a.retryLane),Qy(s,d)}function RE(s,a){var d=0;switch(s.tag){case 13:var m=s.stateNode,x=s.memoizedState;x!==null&&(d=x.retryLane);break;case 19:m=s.stateNode;break;default:throw Error(n(314))}m!==null&&m.delete(a),Qy(s,d)}var Xy;Xy=function(s,a,d){if(s!==null)if(s.memoizedProps!==a.pendingProps||Cn.current)Nn=!0;else{if((s.lanes&d)===0&&(a.flags&128)===0)return Nn=!1,wE(s,a,d);Nn=(s.flags&131072)!==0}else Nn=!1,Nt&&(a.flags&1048576)!==0&&Pg(a,Hl,a.index);switch(a.lanes=0,a.tag){case 2:var m=a.type;su(s,a),s=a.pendingProps;var x=zs(a,cn.current);qs(a,d),x=Gd(null,a,m,s,x,d);var b=Kd();return a.flags|=1,typeof x=="object"&&x!==null&&typeof x.render=="function"&&x.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,jn(m)?(b=!0,Bl(a)):b=!1,a.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,Bd(a),x.updater=ru,a.stateNode=x,x._reactInternals=a,tf(a,m,s,d),a=of(null,a,m,!0,b,d)):(a.tag=0,Nt&&b&&Pd(a),xn(null,a,x,d),a=a.child),a;case 16:m=a.elementType;e:{switch(su(s,a),s=a.pendingProps,x=m._init,m=x(m._payload),a.type=m,x=a.tag=ME(m),s=pr(m,s),x){case 0:a=sf(null,a,m,s,d);break e;case 1:a=Ey(null,a,m,s,d);break e;case 11:a=xy(null,a,m,s,d);break e;case 14:a=wy(null,a,m,pr(m.type,s),d);break e}throw Error(n(306,m,""))}return a;case 0:return m=a.type,x=a.pendingProps,x=a.elementType===m?x:pr(m,x),sf(s,a,m,x,d);case 1:return m=a.type,x=a.pendingProps,x=a.elementType===m?x:pr(m,x),Ey(s,a,m,x,d);case 3:e:{if(_y(a),s===null)throw Error(n(387));m=a.pendingProps,b=a.memoizedState,x=b.element,zg(s,a),Jl(a,m,null,d);var N=a.memoizedState;if(m=N.element,b.isDehydrated)if(b={element:m,isDehydrated:!1,cache:N.cache,pendingSuspenseBoundaries:N.pendingSuspenseBoundaries,transitions:N.transitions},a.updateQueue.baseState=b,a.memoizedState=b,a.flags&256){x=Gs(Error(n(423)),a),a=Cy(s,a,m,d,x);break e}else if(m!==x){x=Gs(Error(n(424)),a),a=Cy(s,a,m,d,x);break e}else for(Bn=hi(a.stateNode.containerInfo.firstChild),zn=a,Nt=!0,hr=null,d=$g(a,null,m,d),a.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Ws(),m===x){a=Xr(s,a,d);break e}xn(s,a,m,d)}a=a.child}return a;case 5:return Wg(a),s===null&&Od(a),m=a.type,x=a.pendingProps,b=s!==null?s.memoizedProps:null,N=x.children,_d(m,x)?N=null:b!==null&&_d(m,b)&&(a.flags|=32),Sy(s,a),xn(s,a,N,d),a.child;case 6:return s===null&&Od(a),null;case 13:return jy(s,a,d);case 4:return Ud(a,a.stateNode.containerInfo),m=a.pendingProps,s===null?a.child=Hs(a,null,m,d):xn(s,a,m,d),a.child;case 11:return m=a.type,x=a.pendingProps,x=a.elementType===m?x:pr(m,x),xy(s,a,m,x,d);case 7:return xn(s,a,a.pendingProps,d),a.child;case 8:return xn(s,a,a.pendingProps.children,d),a.child;case 12:return xn(s,a,a.pendingProps.children,d),a.child;case 10:e:{if(m=a.type._context,x=a.pendingProps,b=a.memoizedProps,N=x.value,kt(Yl,m._currentValue),m._currentValue=N,b!==null)if(fr(b.value,N)){if(b.children===x.children&&!Cn.current){a=Xr(s,a,d);break e}}else for(b=a.child,b!==null&&(b.return=a);b!==null;){var z=b.dependencies;if(z!==null){N=b.child;for(var V=z.firstContext;V!==null;){if(V.context===m){if(b.tag===1){V=Qr(-1,d&-d),V.tag=2;var ce=b.updateQueue;if(ce!==null){ce=ce.shared;var ke=ce.pending;ke===null?V.next=V:(V.next=ke.next,ke.next=V),ce.pending=V}}b.lanes|=d,V=b.alternate,V!==null&&(V.lanes|=d),Fd(b.return,d,a),z.lanes|=d;break}V=V.next}}else if(b.tag===10)N=b.type===a.type?null:b.child;else if(b.tag===18){if(N=b.return,N===null)throw Error(n(341));N.lanes|=d,z=N.alternate,z!==null&&(z.lanes|=d),Fd(N,d,a),N=b.sibling}else N=b.child;if(N!==null)N.return=b;else for(N=b;N!==null;){if(N===a){N=null;break}if(b=N.sibling,b!==null){b.return=N.return,N=b;break}N=N.return}b=N}xn(s,a,x.children,d),a=a.child}return a;case 9:return x=a.type,m=a.pendingProps.children,qs(a,d),x=Zn(x),m=m(x),a.flags|=1,xn(s,a,m,d),a.child;case 14:return m=a.type,x=pr(m,a.pendingProps),x=pr(m.type,x),wy(s,a,m,x,d);case 15:return by(s,a,a.type,a.pendingProps,d);case 17:return m=a.type,x=a.pendingProps,x=a.elementType===m?x:pr(m,x),su(s,a),a.tag=1,jn(m)?(s=!0,Bl(a)):s=!1,qs(a,d),fy(a,m,x),tf(a,m,x,d),of(null,a,m,!0,s,d);case 19:return Ty(s,a,d);case 22:return ky(s,a,d)}throw Error(n(156,a.tag))};function Zy(s,a){return Am(s,a)}function OE(s,a,d,m){this.tag=s,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nr(s,a,d,m){return new OE(s,a,d,m)}function Cf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ME(s){if(typeof s=="function")return Cf(s)?1:0;if(s!=null){if(s=s.$$typeof,s===re)return 11;if(s===M)return 14}return 2}function Ei(s,a){var d=s.alternate;return d===null?(d=nr(s.tag,a,s.key,s.mode),d.elementType=s.elementType,d.type=s.type,d.stateNode=s.stateNode,d.alternate=s,s.alternate=d):(d.pendingProps=a,d.type=s.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=s.flags&14680064,d.childLanes=s.childLanes,d.lanes=s.lanes,d.child=s.child,d.memoizedProps=s.memoizedProps,d.memoizedState=s.memoizedState,d.updateQueue=s.updateQueue,a=s.dependencies,d.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},d.sibling=s.sibling,d.index=s.index,d.ref=s.ref,d}function gu(s,a,d,m,x,b){var N=2;if(m=s,typeof s=="function")Cf(s)&&(N=1);else if(typeof s=="string")N=5;else e:switch(s){case $:return rs(d.children,x,b,a);case oe:N=8,x|=8;break;case X:return s=nr(12,d,a,x|2),s.elementType=X,s.lanes=b,s;case W:return s=nr(13,d,a,x),s.elementType=W,s.lanes=b,s;case Y:return s=nr(19,d,a,x),s.elementType=Y,s.lanes=b,s;case ae:return yu(d,x,b,a);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case R:N=10;break e;case D:N=9;break e;case re:N=11;break e;case M:N=14;break e;case G:N=16,m=null;break e}throw Error(n(130,s==null?s:typeof s,""))}return a=nr(N,d,a,x),a.elementType=s,a.type=m,a.lanes=b,a}function rs(s,a,d,m){return s=nr(7,s,m,a),s.lanes=d,s}function yu(s,a,d,m){return s=nr(22,s,m,a),s.elementType=ae,s.lanes=d,s.stateNode={isHidden:!1},s}function jf(s,a,d){return s=nr(6,s,null,a),s.lanes=d,s}function Nf(s,a,d){return a=nr(4,s.children!==null?s.children:[],s.key,a),a.lanes=d,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}function LE(s,a,d,m,x){this.tag=a,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ed(0),this.expirationTimes=ed(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ed(0),this.identifierPrefix=m,this.onRecoverableError=x,this.mutableSourceEagerHydrationData=null}function Tf(s,a,d,m,x,b,N,z,V){return s=new LE(s,a,d,z,V),a===1?(a=1,b===!0&&(a|=8)):a=0,b=nr(3,null,null,a),s.current=b,b.stateNode=s,b.memoizedState={element:m,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bd(b),s}function DE(s,a,d){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:P,key:m==null?null:""+m,children:s,containerInfo:a,implementation:d}}function ev(s){if(!s)return mi;s=s._reactInternals;e:{if(Vi(s)!==s||s.tag!==1)throw Error(n(170));var a=s;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(jn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(n(171))}if(s.tag===1){var d=s.type;if(jn(d))return Ng(s,d,a)}return a}function tv(s,a,d,m,x,b,N,z,V){return s=Tf(d,m,!0,s,x,b,N,z,V),s.context=ev(null),d=s.current,m=wn(),x=ki(d),b=Qr(m,x),b.callback=a??null,vi(d,b,x),s.current.lanes=x,qo(s,x,m),In(s,m),s}function vu(s,a,d,m){var x=a.current,b=wn(),N=ki(x);return d=ev(d),a.context===null?a.context=d:a.pendingContext=d,a=Qr(b,N),a.payload={element:s},m=m===void 0?null:m,m!==null&&(a.callback=m),s=vi(x,a,N),s!==null&&(yr(s,x,N,b),Kl(s,x,N)),N}function xu(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function nv(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var d=s.retryLane;s.retryLane=d!==0&&d<a?d:a}}function If(s,a){nv(s,a),(s=s.alternate)&&nv(s,a)}function $E(){return null}var rv=typeof reportError=="function"?reportError:function(s){console.error(s)};function Pf(s){this._internalRoot=s}wu.prototype.render=Pf.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(n(409));vu(s,a,null,null)},wu.prototype.unmount=Pf.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;es(function(){vu(null,s,null,null)}),a[qr]=null}};function wu(s){this._internalRoot=s}wu.prototype.unstable_scheduleHydration=function(s){if(s){var a=zm();s={blockedOn:null,target:s,priority:a};for(var d=0;d<ci.length&&a!==0&&a<ci[d].priority;d++);ci.splice(d,0,s),d===0&&Wm(s)}};function Af(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function bu(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function iv(){}function FE(s,a,d,m,x){if(x){if(typeof m=="function"){var b=m;m=function(){var ce=xu(N);b.call(ce)}}var N=tv(a,m,s,0,null,!1,!1,"",iv);return s._reactRootContainer=N,s[qr]=N.current,oa(s.nodeType===8?s.parentNode:s),es(),N}for(;x=s.lastChild;)s.removeChild(x);if(typeof m=="function"){var z=m;m=function(){var ce=xu(V);z.call(ce)}}var V=Tf(s,0,!1,null,null,!1,!1,"",iv);return s._reactRootContainer=V,s[qr]=V.current,oa(s.nodeType===8?s.parentNode:s),es(function(){vu(a,V,d,m)}),V}function ku(s,a,d,m,x){var b=d._reactRootContainer;if(b){var N=b;if(typeof x=="function"){var z=x;x=function(){var V=xu(N);z.call(V)}}vu(a,N,s,x)}else N=FE(d,a,s,x,m);return xu(N)}$m=function(s){switch(s.tag){case 3:var a=s.stateNode;if(a.current.memoizedState.isDehydrated){var d=Vo(a.pendingLanes);d!==0&&(td(a,d|1),In(a,Lt()),(dt&6)===0&&(Qs=Lt()+500,gi()))}break;case 13:es(function(){var m=Jr(s,1);if(m!==null){var x=wn();yr(m,s,1,x)}}),If(s,1)}},nd=function(s){if(s.tag===13){var a=Jr(s,134217728);if(a!==null){var d=wn();yr(a,s,134217728,d)}If(s,134217728)}},Fm=function(s){if(s.tag===13){var a=ki(s),d=Jr(s,a);if(d!==null){var m=wn();yr(d,s,a,m)}If(s,a)}},zm=function(){return mt},Bm=function(s,a){var d=mt;try{return mt=s,a()}finally{mt=d}},it=function(s,a,d){switch(a){case"input":if(bt(s,d),a=d.name,d.type==="radio"&&a!=null){for(d=s;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<d.length;a++){var m=d[a];if(m!==s&&m.form===s.form){var x=Fl(m);if(!x)throw Error(n(90));je(m),bt(m,x)}}}break;case"textarea":H(s,d);break;case"select":a=d.value,a!=null&&me(s,!!d.multiple,a,!1)}},yt=Sf,ln=es;var zE={usingClientEntryPoint:!1,Events:[ua,$s,Fl,lt,et,Sf]},Sa={findFiberByHostInstance:qi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},BE={bundleType:Sa.bundleType,version:Sa.version,rendererPackageName:Sa.rendererPackageName,rendererConfig:Sa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Im(s),s===null?null:s.stateNode},findFiberByHostInstance:Sa.findFiberByHostInstance||$E,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Su=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Su.isDisabled&&Su.supportsFiber)try{wl=Su.inject(BE),jr=Su}catch{}}return Pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zE,Pn.createPortal=function(s,a){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Af(a))throw Error(n(200));return DE(s,a,null,d)},Pn.createRoot=function(s,a){if(!Af(s))throw Error(n(299));var d=!1,m="",x=rv;return a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),a=Tf(s,1,!1,null,null,d,!1,m,x),s[qr]=a.current,oa(s.nodeType===8?s.parentNode:s),new Pf(a)},Pn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=Im(a),s=s===null?null:s.stateNode,s},Pn.flushSync=function(s){return es(s)},Pn.hydrate=function(s,a,d){if(!bu(a))throw Error(n(200));return ku(null,s,a,!0,d)},Pn.hydrateRoot=function(s,a,d){if(!Af(s))throw Error(n(405));var m=d!=null&&d.hydratedSources||null,x=!1,b="",N=rv;if(d!=null&&(d.unstable_strictMode===!0&&(x=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onRecoverableError!==void 0&&(N=d.onRecoverableError)),a=tv(a,null,s,1,d??null,x,!1,b,N),s[qr]=a.current,oa(s),m)for(s=0;s<m.length;s++)d=m[s],x=d._getVersion,x=x(d._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[d,x]:a.mutableSourceEagerHydrationData.push(d,x);return new wu(a)},Pn.render=function(s,a,d){if(!bu(a))throw Error(n(200));return ku(null,s,a,!1,d)},Pn.unmountComponentAtNode=function(s){if(!bu(s))throw Error(n(40));return s._reactRootContainer?(es(function(){ku(null,null,s,!1,function(){s._reactRootContainer=null,s[qr]=null})}),!0):!1},Pn.unstable_batchedUpdates=Sf,Pn.unstable_renderSubtreeIntoContainer=function(s,a,d,m){if(!bu(d))throw Error(n(200));if(s==null||s._reactInternals===void 0)throw Error(n(38));return ku(s,a,d,!1,m)},Pn.version="18.3.1-next-f1338f8080-20240426",Pn}var fv;function sw(){if(fv)return Mf.exports;fv=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Mf.exports=JE(),Mf.exports}var hv;function QE(){if(hv)return Eu;hv=1;var e=sw();return Eu.createRoot=e.createRoot,Eu.hydrateRoot=e.hydrateRoot,Eu}var XE=QE();const ZE=Ao(XE);var qn=sw();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ya(){return Ya=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ya.apply(this,arguments)}var Mi;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Mi||(Mi={}));const pv="popstate";function e_(e){e===void 0&&(e={});function t(i,o){let{pathname:l="/",search:u="",hash:c=""}=Es(i.location.hash.substr(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),Ah("",{pathname:l,search:u,hash:c},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){let l=i.document.querySelector("base"),u="";if(l&&l.getAttribute("href")){let c=i.location.href,f=c.indexOf("#");u=f===-1?c:c.slice(0,f)}return u+"#"+(typeof o=="string"?o:Zu(o))}function r(i,o){Ip(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return n_(t,n,r,e)}function At(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ip(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function t_(){return Math.random().toString(36).substr(2,8)}function mv(e,t){return{usr:e.state,key:e.key,idx:t}}function Ah(e,t,n,r){return n===void 0&&(n=null),Ya({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Es(t):t,{state:n,key:t&&t.key||r||t_()})}function Zu(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Es(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function n_(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,l=i.history,u=Mi.Pop,c=null,f=h();f==null&&(f=0,l.replaceState(Ya({},l.state,{idx:f}),""));function h(){return(l.state||{idx:null}).idx}function p(){u=Mi.Pop;let k=h(),C=k==null?null:k-f;f=k,c&&c({action:u,location:E.location,delta:C})}function v(k,C){u=Mi.Push;let _=Ah(E.location,k,C);n&&n(_,k),f=h()+1;let j=mv(_,f),I=E.createHref(_);try{l.pushState(j,"",I)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(I)}o&&c&&c({action:u,location:E.location,delta:1})}function y(k,C){u=Mi.Replace;let _=Ah(E.location,k,C);n&&n(_,k),f=h();let j=mv(_,f),I=E.createHref(_);l.replaceState(j,"",I),o&&c&&c({action:u,location:E.location,delta:0})}function S(k){let C=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof k=="string"?k:Zu(k);return _=_.replace(/ $/,"%20"),At(C,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,C)}let E={get action(){return u},get location(){return e(i,l)},listen(k){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(pv,p),c=k,()=>{i.removeEventListener(pv,p),c=null}},createHref(k){return t(i,k)},createURL:S,encodeLocation(k){let C=S(k);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:v,replace:y,go(k){return l.go(k)}};return E}var gv;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(gv||(gv={}));function r_(e,t,n){return n===void 0&&(n="/"),i_(e,t,n)}function i_(e,t,n,r){let i=typeof t=="string"?Es(t):t,o=Co(i.pathname||"/",n);if(o==null)return null;let l=ow(e);s_(l);let u=null;for(let c=0;u==null&&c<l.length;++c){let f=g_(o);u=p_(l[c],f)}return u}function ow(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,l,u)=>{let c={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};c.relativePath.startsWith("/")&&(At(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let f=$i([r,c.relativePath]),h=n.concat(c);o.children&&o.children.length>0&&(At(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),ow(o.children,t,h,f)),!(o.path==null&&!o.index)&&t.push({path:f,score:f_(f,o.index),routesMeta:h})};return e.forEach((o,l)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))i(o,l);else for(let c of aw(o.path))i(o,l,c)}),t}function aw(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let l=aw(r.join("/")),u=[];return u.push(...l.map(c=>c===""?o:[o,c].join("/"))),i&&u.push(...l),u.map(c=>e.startsWith("/")&&c===""?"/":c)}function s_(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:h_(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const o_=/^:[\w-]+$/,a_=3,l_=2,u_=1,c_=10,d_=-2,yv=e=>e==="*";function f_(e,t){let n=e.split("/"),r=n.length;return n.some(yv)&&(r+=d_),t&&(r+=l_),n.filter(i=>!yv(i)).reduce((i,o)=>i+(o_.test(o)?a_:o===""?u_:c_),r)}function h_(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function p_(e,t,n){let{routesMeta:r}=e,i={},o="/",l=[];for(let u=0;u<r.length;++u){let c=r[u],f=u===r.length-1,h=o==="/"?t:t.slice(o.length)||"/",p=Rh({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},h),v=c.route;if(!p)return null;Object.assign(i,p.params),l.push({params:i,pathname:$i([o,p.pathname]),pathnameBase:w_($i([o,p.pathnameBase])),route:v}),p.pathnameBase!=="/"&&(o=$i([o,p.pathnameBase]))}return l}function Rh(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=m_(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],l=o.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((f,h,p)=>{let{paramName:v,isOptional:y}=h;if(v==="*"){let E=u[p]||"";l=o.slice(0,o.length-E.length).replace(/(.)\/+$/,"$1")}const S=u[p];return y&&!S?f[v]=void 0:f[v]=(S||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:e}}function m_(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Ip(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,c)=>(r.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function g_(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ip(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Co(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function y_(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Es(e):e;return{pathname:n?n.startsWith("/")?n:v_(n,t):t,search:b_(r),hash:k_(i)}}function v_(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function $f(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function x_(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Pp(e,t){let n=x_(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Ap(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=Es(e):(i=Ya({},e),At(!i.pathname||!i.pathname.includes("?"),$f("?","pathname","search",i)),At(!i.pathname||!i.pathname.includes("#"),$f("#","pathname","hash",i)),At(!i.search||!i.search.includes("#"),$f("#","search","hash",i)));let o=e===""||i.pathname==="",l=o?"/":i.pathname,u;if(l==null)u=n;else{let p=t.length-1;if(!r&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),p-=1;i.pathname=v.join("/")}u=p>=0?t[p]:"/"}let c=y_(i,u),f=l&&l!=="/"&&l.endsWith("/"),h=(o||l===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(f||h)&&(c.pathname+="/"),c}const $i=e=>e.join("/").replace(/\/\/+/g,"/"),w_=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),b_=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,k_=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function S_(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const lw=["post","put","patch","delete"];new Set(lw);const E_=["get",...lw];new Set(E_);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ga(){return Ga=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ga.apply(this,arguments)}const Sc=w.createContext(null),uw=w.createContext(null),ri=w.createContext(null),Ec=w.createContext(null),ii=w.createContext({outlet:null,matches:[],isDataRoute:!1}),cw=w.createContext(null);function __(e,t){let{relative:n}=t===void 0?{}:t;Ro()||At(!1);let{basename:r,navigator:i}=w.useContext(ri),{hash:o,pathname:l,search:u}=_c(e,{relative:n}),c=l;return r!=="/"&&(c=l==="/"?r:$i([r,l])),i.createHref({pathname:c,search:u,hash:o})}function Ro(){return w.useContext(Ec)!=null}function si(){return Ro()||At(!1),w.useContext(Ec).location}function dw(e){w.useContext(ri).static||w.useLayoutEffect(e)}function Rp(){let{isDataRoute:e}=w.useContext(ii);return e?z_():C_()}function C_(){Ro()||At(!1);let e=w.useContext(Sc),{basename:t,future:n,navigator:r}=w.useContext(ri),{matches:i}=w.useContext(ii),{pathname:o}=si(),l=JSON.stringify(Pp(i,n.v7_relativeSplatPath)),u=w.useRef(!1);return dw(()=>{u.current=!0}),w.useCallback(function(f,h){if(h===void 0&&(h={}),!u.current)return;if(typeof f=="number"){r.go(f);return}let p=Ap(f,JSON.parse(l),o,h.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:$i([t,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[t,r,l,o,e])}const j_=w.createContext(null);function N_(e){let t=w.useContext(ii).outlet;return t&&w.createElement(j_.Provider,{value:e},t)}function _c(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=w.useContext(ri),{matches:i}=w.useContext(ii),{pathname:o}=si(),l=JSON.stringify(Pp(i,r.v7_relativeSplatPath));return w.useMemo(()=>Ap(e,JSON.parse(l),o,n==="path"),[e,l,o,n])}function T_(e,t){return I_(e,t)}function I_(e,t,n,r){Ro()||At(!1);let{navigator:i}=w.useContext(ri),{matches:o}=w.useContext(ii),l=o[o.length-1],u=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let f=si(),h;if(t){var p;let k=typeof t=="string"?Es(t):t;c==="/"||(p=k.pathname)!=null&&p.startsWith(c)||At(!1),h=k}else h=f;let v=h.pathname||"/",y=v;if(c!=="/"){let k=c.replace(/^\//,"").split("/");y="/"+v.replace(/^\//,"").split("/").slice(k.length).join("/")}let S=r_(e,{pathname:y}),E=M_(S&&S.map(k=>Object.assign({},k,{params:Object.assign({},u,k.params),pathname:$i([c,i.encodeLocation?i.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?c:$i([c,i.encodeLocation?i.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),o,n,r);return t&&E?w.createElement(Ec.Provider,{value:{location:Ga({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Mi.Pop}},E):E}function P_(){let e=F_(),t=S_(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},t),n?w.createElement("pre",{style:i},n):null,null)}const A_=w.createElement(P_,null);class R_ extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?w.createElement(ii.Provider,{value:this.props.routeContext},w.createElement(cw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function O_(e){let{routeContext:t,match:n,children:r}=e,i=w.useContext(Sc);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),w.createElement(ii.Provider,{value:t},r)}function M_(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let l=e,u=(i=n)==null?void 0:i.errors;if(u!=null){let h=l.findIndex(p=>p.route.id&&(u==null?void 0:u[p.route.id])!==void 0);h>=0||At(!1),l=l.slice(0,Math.min(l.length,h+1))}let c=!1,f=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<l.length;h++){let p=l[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(f=h),p.route.id){let{loaderData:v,errors:y}=n,S=p.route.loader&&v[p.route.id]===void 0&&(!y||y[p.route.id]===void 0);if(p.route.lazy||S){c=!0,f>=0?l=l.slice(0,f+1):l=[l[0]];break}}}return l.reduceRight((h,p,v)=>{let y,S=!1,E=null,k=null;n&&(y=u&&p.route.id?u[p.route.id]:void 0,E=p.route.errorElement||A_,c&&(f<0&&v===0?(B_("route-fallback"),S=!0,k=null):f===v&&(S=!0,k=p.route.hydrateFallbackElement||null)));let C=t.concat(l.slice(0,v+1)),_=()=>{let j;return y?j=E:S?j=k:p.route.Component?j=w.createElement(p.route.Component,null):p.route.element?j=p.route.element:j=h,w.createElement(O_,{match:p,routeContext:{outlet:h,matches:C,isDataRoute:n!=null},children:j})};return n&&(p.route.ErrorBoundary||p.route.errorElement||v===0)?w.createElement(R_,{location:n.location,revalidation:n.revalidation,component:E,error:y,children:_(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):_()},null)}var fw=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(fw||{}),hw=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(hw||{});function L_(e){let t=w.useContext(Sc);return t||At(!1),t}function D_(e){let t=w.useContext(uw);return t||At(!1),t}function $_(e){let t=w.useContext(ii);return t||At(!1),t}function pw(e){let t=$_(),n=t.matches[t.matches.length-1];return n.route.id||At(!1),n.route.id}function F_(){var e;let t=w.useContext(cw),n=D_(),r=pw();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function z_(){let{router:e}=L_(fw.UseNavigateStable),t=pw(hw.UseNavigateStable),n=w.useRef(!1);return dw(()=>{n.current=!0}),w.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,Ga({fromRouteId:t},o)))},[e,t])}const vv={};function B_(e,t,n){vv[e]||(vv[e]=!0)}function U_(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Ka(e){let{to:t,replace:n,state:r,relative:i}=e;Ro()||At(!1);let{future:o,static:l}=w.useContext(ri),{matches:u}=w.useContext(ii),{pathname:c}=si(),f=Rp(),h=Ap(t,Pp(u,o.v7_relativeSplatPath),c,i==="path"),p=JSON.stringify(h);return w.useEffect(()=>f(JSON.parse(p),{replace:n,state:r,relative:i}),[f,p,i,n,r]),null}function mw(e){return N_(e.context)}function pn(e){At(!1)}function W_(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Mi.Pop,navigator:o,static:l=!1,future:u}=e;Ro()&&At(!1);let c=t.replace(/^\/*/,"/"),f=w.useMemo(()=>({basename:c,navigator:o,static:l,future:Ga({v7_relativeSplatPath:!1},u)}),[c,u,o,l]);typeof r=="string"&&(r=Es(r));let{pathname:h="/",search:p="",hash:v="",state:y=null,key:S="default"}=r,E=w.useMemo(()=>{let k=Co(h,c);return k==null?null:{location:{pathname:k,search:p,hash:v,state:y,key:S},navigationType:i}},[c,h,p,v,y,S,i]);return E==null?null:w.createElement(ri.Provider,{value:f},w.createElement(Ec.Provider,{children:n,value:E}))}function H_(e){let{children:t,location:n}=e;return T_(Oh(t),n)}new Promise(()=>{});function Oh(e,t){t===void 0&&(t=[]);let n=[];return w.Children.forEach(e,(r,i)=>{if(!w.isValidElement(r))return;let o=[...t,i];if(r.type===w.Fragment){n.push.apply(n,Oh(r.props.children,o));return}r.type!==pn&&At(!1),!r.props.index||!r.props.children||At(!1);let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Oh(r.props.children,o)),n.push(l)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ec(){return ec=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ec.apply(this,arguments)}function gw(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function V_(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function q_(e,t){return e.button===0&&(!t||t==="_self")&&!V_(e)}function Mh(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function Y_(e,t){let n=Mh(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(o=>{n.append(i,o)})}),n}const G_=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],K_=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],J_="6";try{window.__reactRouterVersion=J_}catch{}const Q_=w.createContext({isTransitioning:!1}),X_="startTransition",xv=Xu[X_];function Z_(e){let{basename:t,children:n,future:r,window:i}=e,o=w.useRef();o.current==null&&(o.current=e_({window:i,v5Compat:!0}));let l=o.current,[u,c]=w.useState({action:l.action,location:l.location}),{v7_startTransition:f}=r||{},h=w.useCallback(p=>{f&&xv?xv(()=>c(p)):c(p)},[c,f]);return w.useLayoutEffect(()=>l.listen(h),[l,h]),w.useEffect(()=>U_(r),[r]),w.createElement(W_,{basename:t,children:n,location:u.location,navigationType:u.action,navigator:l,future:r})}const eC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",tC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ar=w.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:o,replace:l,state:u,target:c,to:f,preventScrollReset:h,viewTransition:p}=t,v=gw(t,G_),{basename:y}=w.useContext(ri),S,E=!1;if(typeof f=="string"&&tC.test(f)&&(S=f,eC))try{let j=new URL(window.location.href),I=f.startsWith("//")?new URL(j.protocol+f):new URL(f),O=Co(I.pathname,y);I.origin===j.origin&&O!=null?f=O+I.search+I.hash:E=!0}catch{}let k=__(f,{relative:i}),C=rC(f,{replace:l,state:u,target:c,preventScrollReset:h,relative:i,viewTransition:p});function _(j){r&&r(j),j.defaultPrevented||C(j)}return w.createElement("a",ec({},v,{href:S||k,onClick:E||o?r:_,ref:n,target:c}))}),wv=w.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:i=!1,className:o="",end:l=!1,style:u,to:c,viewTransition:f,children:h}=t,p=gw(t,K_),v=_c(c,{relative:p.relative}),y=si(),S=w.useContext(uw),{navigator:E,basename:k}=w.useContext(ri),C=S!=null&&iC(v)&&f===!0,_=E.encodeLocation?E.encodeLocation(v).pathname:v.pathname,j=y.pathname,I=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;i||(j=j.toLowerCase(),I=I?I.toLowerCase():null,_=_.toLowerCase()),I&&k&&(I=Co(I,k)||I);const O=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let P=j===_||!l&&j.startsWith(_)&&j.charAt(O)==="/",$=I!=null&&(I===_||!l&&I.startsWith(_)&&I.charAt(_.length)==="/"),oe={isActive:P,isPending:$,isTransitioning:C},X=P?r:void 0,R;typeof o=="function"?R=o(oe):R=[o,P?"active":null,$?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let D=typeof u=="function"?u(oe):u;return w.createElement(ar,ec({},p,{"aria-current":X,className:R,ref:n,style:D,to:c,viewTransition:f}),typeof h=="function"?h(oe):h)});var Lh;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Lh||(Lh={}));var bv;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(bv||(bv={}));function nC(e){let t=w.useContext(Sc);return t||At(!1),t}function rC(e,t){let{target:n,replace:r,state:i,preventScrollReset:o,relative:l,viewTransition:u}=t===void 0?{}:t,c=Rp(),f=si(),h=_c(e,{relative:l});return w.useCallback(p=>{if(q_(p,n)){p.preventDefault();let v=r!==void 0?r:Zu(f)===Zu(h);c(e,{replace:v,state:i,preventScrollReset:o,relative:l,viewTransition:u})}},[f,c,h,r,i,n,e,o,l,u])}function Oo(e){let t=w.useRef(Mh(e)),n=w.useRef(!1),r=si(),i=w.useMemo(()=>Y_(r.search,n.current?null:t.current),[r.search]),o=Rp(),l=w.useCallback((u,c)=>{const f=Mh(typeof u=="function"?u(i):u);n.current=!0,o("?"+f,c)},[o,i]);return[i,l]}function iC(e,t){t===void 0&&(t={});let n=w.useContext(Q_);n==null&&At(!1);let{basename:r}=nC(Lh.useViewTransitionState),i=_c(e,{relative:t.relative});if(!n.isTransitioning)return!1;let o=Co(n.currentLocation.pathname,r)||n.currentLocation.pathname,l=Co(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Rh(i.pathname,l)!=null||Rh(i.pathname,o)!=null}const yw=typeof document<"u"?Re.useLayoutEffect:()=>{};var Ff;const sC=(Ff=Re.useInsertionEffect)!==null&&Ff!==void 0?Ff:yw;function oC(e){const t=w.useRef(null);return sC(()=>{t.current=e},[e]),w.useCallback((...n)=>{const r=t.current;return r==null?void 0:r(...n)},[])}const Ui=e=>{var t;return(t=e==null?void 0:e.ownerDocument)!==null&&t!==void 0?t:document},gs=e=>e&&"window"in e&&e.window===e?e:Ui(e).defaultView||window;function aC(e){return e!==null&&typeof e=="object"&&"nodeType"in e&&typeof e.nodeType=="number"}function lC(e){return aC(e)&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in e}let uC=!1;function Op(){return uC}function vw(e,t){if(!Op())return t&&e?e.contains(t):!1;if(!e||!t)return!1;let n=t;for(;n!==null;){if(n===e)return!0;n.tagName==="SLOT"&&n.assignedSlot?n=n.assignedSlot.parentNode:lC(n)?n=n.host:n=n.parentNode}return!1}const Dh=(e=document)=>{var t;if(!Op())return e.activeElement;let n=e.activeElement;for(;n&&"shadowRoot"in n&&(!((t=n.shadowRoot)===null||t===void 0)&&t.activeElement);)n=n.shadowRoot.activeElement;return n};function xw(e){return Op()&&e.target.shadowRoot&&e.composedPath?e.composedPath()[0]:e.target}function ww(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=ww(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function De(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=ww(e))&&(r&&(r+=" "),r+=t);return r}function cC(e){var t;if(typeof window>"u"||window.navigator==null)return!1;let n=(t=window.navigator.userAgentData)===null||t===void 0?void 0:t.brands;return Array.isArray(n)&&n.some(r=>e.test(r.brand))||e.test(window.navigator.userAgent)}function dC(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function bw(e){let t=null;return()=>(t==null&&(t=e()),t)}const fC=bw(function(){return dC(/^Mac/i)}),hC=bw(function(){return cC(/Android/i)});function kw(){let e=w.useRef(new Map),t=w.useCallback((i,o,l,u)=>{let c=u!=null&&u.once?(...f)=>{e.current.delete(l),l(...f)}:l;e.current.set(l,{type:o,eventTarget:i,fn:c,options:u}),i.addEventListener(o,c,u)},[]),n=w.useCallback((i,o,l,u)=>{var c;let f=((c=e.current.get(l))===null||c===void 0?void 0:c.fn)||l;i.removeEventListener(o,f,u),e.current.delete(l)},[]),r=w.useCallback(()=>{e.current.forEach((i,o)=>{n(i.eventTarget,i.type,o,i.options)})},[n]);return w.useEffect(()=>r,[r]),{addGlobalListener:t,removeGlobalListener:n,removeAllGlobalListeners:r}}function pC(e){return e.pointerType===""&&e.isTrusted?!0:hC()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function Sw(e){let t=e;return t.nativeEvent=e,t.isDefaultPrevented=()=>t.defaultPrevented,t.isPropagationStopped=()=>t.cancelBubble,t.persist=()=>{},t}function mC(e,t){Object.defineProperty(e,"target",{value:t}),Object.defineProperty(e,"currentTarget",{value:t})}function Ew(e){let t=w.useRef({isFocused:!1,observer:null});yw(()=>{const r=t.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]);let n=oC(r=>{e==null||e(r)});return w.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){t.current.isFocused=!0;let i=r.target,o=l=>{if(t.current.isFocused=!1,i.disabled){let u=Sw(l);n(u)}t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)};i.addEventListener("focusout",o,{once:!0}),t.current.observer=new MutationObserver(()=>{if(t.current.isFocused&&i.disabled){var l;(l=t.current.observer)===null||l===void 0||l.disconnect();let u=i===document.activeElement?null:document.activeElement;i.dispatchEvent(new FocusEvent("blur",{relatedTarget:u})),i.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:u}))}}),t.current.observer.observe(i,{attributes:!0,attributeFilter:["disabled"]})}},[n])}let gC=!1,ol=null,$h=new Set,Oa=new Map,xs=!1,Fh=!1;const yC={Tab:!0,Escape:!0};function Mp(e,t){for(let n of $h)n(e,t)}function vC(e){return!(e.metaKey||!fC()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function tc(e){xs=!0,vC(e)&&(ol="keyboard",Mp("keyboard",e))}function xo(e){ol="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(xs=!0,Mp("pointer",e))}function _w(e){pC(e)&&(xs=!0,ol="virtual")}function Cw(e){e.target===window||e.target===document||gC||!e.isTrusted||(!xs&&!Fh&&(ol="virtual",Mp("virtual",e)),xs=!1,Fh=!1)}function jw(){xs=!1,Fh=!0}function zh(e){if(typeof window>"u"||typeof document>"u"||Oa.get(gs(e)))return;const t=gs(e),n=Ui(e);let r=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){xs=!0,r.apply(this,arguments)},n.addEventListener("keydown",tc,!0),n.addEventListener("keyup",tc,!0),n.addEventListener("click",_w,!0),t.addEventListener("focus",Cw,!0),t.addEventListener("blur",jw,!1),typeof PointerEvent<"u"&&(n.addEventListener("pointerdown",xo,!0),n.addEventListener("pointermove",xo,!0),n.addEventListener("pointerup",xo,!0)),t.addEventListener("beforeunload",()=>{Nw(e)},{once:!0}),Oa.set(t,{focus:r})}const Nw=(e,t)=>{const n=gs(e),r=Ui(e);t&&r.removeEventListener("DOMContentLoaded",t),Oa.has(n)&&(n.HTMLElement.prototype.focus=Oa.get(n).focus,r.removeEventListener("keydown",tc,!0),r.removeEventListener("keyup",tc,!0),r.removeEventListener("click",_w,!0),n.removeEventListener("focus",Cw,!0),n.removeEventListener("blur",jw,!1),typeof PointerEvent<"u"&&(r.removeEventListener("pointerdown",xo,!0),r.removeEventListener("pointermove",xo,!0),r.removeEventListener("pointerup",xo,!0)),Oa.delete(n))};function xC(e){const t=Ui(e);let n;return t.readyState!=="loading"?zh(e):(n=()=>{zh(e)},t.addEventListener("DOMContentLoaded",n)),()=>Nw(e,n)}typeof document<"u"&&xC();function Tw(){return ol!=="pointer"}const wC=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function bC(e,t,n){let r=Ui(n==null?void 0:n.target);const i=typeof window<"u"?gs(n==null?void 0:n.target).HTMLInputElement:HTMLInputElement,o=typeof window<"u"?gs(n==null?void 0:n.target).HTMLTextAreaElement:HTMLTextAreaElement,l=typeof window<"u"?gs(n==null?void 0:n.target).HTMLElement:HTMLElement,u=typeof window<"u"?gs(n==null?void 0:n.target).KeyboardEvent:KeyboardEvent;return e=e||r.activeElement instanceof i&&!wC.has(r.activeElement.type)||r.activeElement instanceof o||r.activeElement instanceof l&&r.activeElement.isContentEditable,!(e&&t==="keyboard"&&n instanceof u&&!yC[n.key])}function kC(e,t,n){zh(),w.useEffect(()=>{let r=(i,o)=>{bC(!!(n!=null&&n.isTextInput),i,o)&&e(Tw())};return $h.add(r),()=>{$h.delete(r)}},t)}function SC(e){let{isDisabled:t,onFocus:n,onBlur:r,onFocusChange:i}=e;const o=w.useCallback(c=>{if(c.target===c.currentTarget)return r&&r(c),i&&i(!1),!0},[r,i]),l=Ew(o),u=w.useCallback(c=>{const f=Ui(c.target),h=f?Dh(f):Dh();c.target===c.currentTarget&&h===xw(c.nativeEvent)&&(n&&n(c),i&&i(!0),l(c))},[i,n,l]);return{focusProps:{onFocus:!t&&(n||i||r)?u:void 0,onBlur:!t&&(r||i)?o:void 0}}}function EC(e){let{isDisabled:t,onBlurWithin:n,onFocusWithin:r,onFocusWithinChange:i}=e,o=w.useRef({isFocusWithin:!1}),{addGlobalListener:l,removeAllGlobalListeners:u}=kw(),c=w.useCallback(p=>{p.currentTarget.contains(p.target)&&o.current.isFocusWithin&&!p.currentTarget.contains(p.relatedTarget)&&(o.current.isFocusWithin=!1,u(),n&&n(p),i&&i(!1))},[n,i,o,u]),f=Ew(c),h=w.useCallback(p=>{if(!p.currentTarget.contains(p.target))return;const v=Ui(p.target),y=Dh(v);if(!o.current.isFocusWithin&&y===xw(p.nativeEvent)){r&&r(p),i&&i(!0),o.current.isFocusWithin=!0,f(p);let S=p.currentTarget;l(v,"focus",E=>{if(o.current.isFocusWithin&&!vw(S,E.target)){let k=new v.defaultView.FocusEvent("blur",{relatedTarget:E.target});mC(k,S);let C=Sw(k);c(C)}},{capture:!0})}},[r,i,f,l,c]);return t?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:h,onBlur:c}}}let Bh=!1,_u=0;function _C(){Bh=!0,setTimeout(()=>{Bh=!1},50)}function kv(e){e.pointerType==="touch"&&_C()}function CC(){if(!(typeof document>"u"))return _u===0&&typeof PointerEvent<"u"&&document.addEventListener("pointerup",kv),_u++,()=>{_u--,!(_u>0)&&typeof PointerEvent<"u"&&document.removeEventListener("pointerup",kv)}}function jC(e){let{onHoverStart:t,onHoverChange:n,onHoverEnd:r,isDisabled:i}=e,[o,l]=w.useState(!1),u=w.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;w.useEffect(CC,[]);let{addGlobalListener:c,removeAllGlobalListeners:f}=kw(),{hoverProps:h,triggerHoverEnd:p}=w.useMemo(()=>{let v=(E,k)=>{if(u.pointerType=k,i||k==="touch"||u.isHovered||!E.currentTarget.contains(E.target))return;u.isHovered=!0;let C=E.currentTarget;u.target=C,c(Ui(E.target),"pointerover",_=>{u.isHovered&&u.target&&!vw(u.target,_.target)&&y(_,_.pointerType)},{capture:!0}),t&&t({type:"hoverstart",target:C,pointerType:k}),n&&n(!0),l(!0)},y=(E,k)=>{let C=u.target;u.pointerType="",u.target=null,!(k==="touch"||!u.isHovered||!C)&&(u.isHovered=!1,f(),r&&r({type:"hoverend",target:C,pointerType:k}),n&&n(!1),l(!1))},S={};return typeof PointerEvent<"u"&&(S.onPointerEnter=E=>{Bh&&E.pointerType==="mouse"||v(E,E.pointerType)},S.onPointerLeave=E=>{!i&&E.currentTarget.contains(E.target)&&y(E,E.pointerType)}),{hoverProps:S,triggerHoverEnd:y}},[t,n,r,i,u,c,f]);return w.useEffect(()=>{i&&p({currentTarget:u.target},u.pointerType)},[i]),{hoverProps:h,isHovered:o}}function NC(e={}){let{autoFocus:t=!1,isTextInput:n,within:r}=e,i=w.useRef({isFocused:!1,isFocusVisible:t||Tw()}),[o,l]=w.useState(!1),[u,c]=w.useState(()=>i.current.isFocused&&i.current.isFocusVisible),f=w.useCallback(()=>c(i.current.isFocused&&i.current.isFocusVisible),[]),h=w.useCallback(y=>{i.current.isFocused=y,l(y),f()},[f]);kC(y=>{i.current.isFocusVisible=y,f()},[],{isTextInput:n});let{focusProps:p}=SC({isDisabled:r,onFocusChange:h}),{focusWithinProps:v}=EC({isDisabled:!r,onFocusWithinChange:h});return{isFocused:o,isFocusVisible:u,focusProps:r?v:p}}var TC=Object.defineProperty,IC=(e,t,n)=>t in e?TC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zf=(e,t,n)=>(IC(e,typeof t!="symbol"?t+"":t,n),n);let PC=class{constructor(){zf(this,"current",this.detect()),zf(this,"handoffState","pending"),zf(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Lr=new PC;function _s(e){var t;return Lr.isServer?null:e==null?document:(t=e==null?void 0:e.ownerDocument)!=null?t:document}function nc(e){var t,n;return Lr.isServer?null:e==null?document:(n=(t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))!=null?n:document}function Lp(e){var t,n;return(n=(t=nc(e))==null?void 0:t.activeElement)!=null?n:null}function Iw(e){return Lp(e)===e}function Cc(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Mn(){let e=[],t={addEventListener(n,r,i,o){return n.addEventListener(r,i,o),t.add(()=>n.removeEventListener(r,i,o))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return Cc(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},style(n,r,i){let o=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:i}),this.add(()=>{Object.assign(n.style,{[r]:o})})},group(n){let r=Mn();return n(r),this.add(()=>r.dispose())},add(n){return e.includes(n)||e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let i of e.splice(r,1))i()}},dispose(){for(let n of e.splice(0))n()}};return t}function Cs(){let[e]=w.useState(Mn);return w.useEffect(()=>()=>e.dispose(),[e]),e}let jt=(e,t)=>{Lr.isServer?w.useEffect(e,t):w.useLayoutEffect(e,t)};function js(e){let t=w.useRef(e);return jt(()=>{t.current=e},[e]),t}let Ge=function(e){let t=js(e);return Re.useCallback((...n)=>t.current(...n),[t])};function AC(e){let t=e.width/2,n=e.height/2;return{top:e.clientY-n,right:e.clientX+t,bottom:e.clientY+n,left:e.clientX-t}}function RC(e,t){return!(!e||!t||e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom)}function OC({disabled:e=!1}={}){let t=w.useRef(null),[n,r]=w.useState(!1),i=Cs(),o=Ge(()=>{t.current=null,r(!1),i.dispose()}),l=Ge(u=>{if(i.dispose(),t.current===null){t.current=u.currentTarget,r(!0);{let c=_s(u.currentTarget);i.addEventListener(c,"pointerup",o,!1),i.addEventListener(c,"pointermove",f=>{if(t.current){let h=AC(f);r(RC(h,t.current.getBoundingClientRect()))}},!1),i.addEventListener(c,"pointercancel",o,!1)}}});return{pressed:n,pressProps:e?{}:{onPointerDown:l,onPointerUp:o,onClick:o}}}function Br(e){return w.useMemo(()=>e,Object.values(e))}let MC=w.createContext(void 0);function Pw(){return w.useContext(MC)}function Uh(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function Sr(e,t,...n){if(e in t){let i=t[e];return typeof i=="function"?i(...n):i}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(i=>`"${i}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Sr),r}var jo=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(jo||{}),Li=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Li||{});function qt(){let e=DC();return w.useCallback(t=>LC({mergeRefs:e,...t}),[e])}function LC({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:i,visible:o=!0,name:l,mergeRefs:u}){u=u??$C;let c=Aw(t,e);if(o)return Cu(c,n,r,l,u);let f=i??0;if(f&2){let{static:h=!1,...p}=c;if(h)return Cu(p,n,r,l,u)}if(f&1){let{unmount:h=!0,...p}=c;return Sr(h?0:1,{0(){return null},1(){return Cu({...p,hidden:!0,style:{display:"none"}},n,r,l,u)}})}return Cu(c,n,r,l,u)}function Cu(e,t={},n,r,i){let{as:o=n,children:l,refName:u="ref",...c}=Bf(e,["unmount","static"]),f=e.ref!==void 0?{[u]:e.ref}:{},h=typeof l=="function"?l(t):l;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(t)),c["aria-labelledby"]&&c["aria-labelledby"]===c.id&&(c["aria-labelledby"]=void 0);let p={};if(t){let v=!1,y=[];for(let[S,E]of Object.entries(t))typeof E=="boolean"&&(v=!0),E===!0&&y.push(S.replace(/([A-Z])/g,k=>`-${k.toLowerCase()}`));if(v){p["data-headlessui-state"]=y.join(" ");for(let S of y)p[`data-${S}`]=""}}if(Ma(o)&&(Object.keys(as(c)).length>0||Object.keys(as(p)).length>0))if(!w.isValidElement(h)||Array.isArray(h)&&h.length>1||zC(h)){if(Object.keys(as(c)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(as(c)).concat(Object.keys(as(p))).map(v=>`  - ${v}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(v=>`  - ${v}`).join(`
`)].join(`
`))}else{let v=h.props,y=v==null?void 0:v.className,S=typeof y=="function"?(...C)=>Uh(y(...C),c.className):Uh(y,c.className),E=S?{className:S}:{},k=Aw(h.props,as(Bf(c,["ref"])));for(let C in p)C in k&&delete p[C];return w.cloneElement(h,Object.assign({},k,p,f,{ref:i(FC(h),f.ref)},E))}return w.createElement(o,Object.assign({},Bf(c,["ref"]),!Ma(o)&&f,!Ma(o)&&p),h)}function DC(){let e=w.useRef([]),t=w.useCallback(n=>{for(let r of e.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return e.current=n,t}}function $C(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function Aw(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):t[i]=r[i];if(t.disabled||t["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[i=>{var o;return(o=i==null?void 0:i.preventDefault)==null?void 0:o.call(i)}]);for(let r in n)Object.assign(t,{[r](i,...o){let l=n[r];for(let u of l){if((i instanceof Event||(i==null?void 0:i.nativeEvent)instanceof Event)&&i.defaultPrevented)return;u(i,...o)}}});return t}function Rw(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):t[i]=r[i];for(let r in n)Object.assign(t,{[r](...i){let o=n[r];for(let l of o)l==null||l(...i)}});return t}function Ot(e){var t;return Object.assign(w.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function as(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function Bf(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function FC(e){return Re.version.split(".")[0]>="19"?e.props.ref:e.ref}function Ma(e){return e===w.Fragment||e===Symbol.for("react.fragment")}function zC(e){return Ma(e.type)}let BC="span";var rc=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(rc||{});function UC(e,t){var n;let{features:r=1,...i}=e,o={ref:t,"aria-hidden":(r&2)===2?!0:(n=i["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return qt()({ourProps:o,theirProps:i,slot:{},defaultTag:BC,name:"Hidden"})}let Wh=Ot(UC),WC=w.createContext(void 0);function HC(){return w.useContext(WC)}function Ow(e){return typeof e!="object"||e===null?!1:"nodeType"in e}function ni(e){return Ow(e)&&"tagName"in e}function Kn(e){return ni(e)&&"accessKey"in e}function Mr(e){return ni(e)&&"tabIndex"in e}function VC(e){return ni(e)&&"style"in e}function qC(e){return Kn(e)&&e.nodeName==="IFRAME"}function Mw(e){return Kn(e)&&e.nodeName==="INPUT"}function Sv(e){return Kn(e)&&e.nodeName==="LABEL"}function YC(e){return Kn(e)&&e.nodeName==="FIELDSET"}function Lw(e){return Kn(e)&&e.nodeName==="LEGEND"}function GC(e){return ni(e)?e.matches('a[href],audio[controls],button,details,embed,iframe,img[usemap],input:not([type="hidden"]),label,select,textarea,video[controls]'):!1}function Ev(e){let t=e.parentElement,n=null;for(;t&&!YC(t);)Lw(t)&&(n=t),t=t.parentElement;let r=(t==null?void 0:t.getAttribute("disabled"))==="";return r&&KC(n)?!1:r}function KC(e){if(!e)return!1;let t=e.previousElementSibling;for(;t!==null;){if(Lw(t))return!1;t=t.previousElementSibling}return!0}let Dw=Symbol();function JC(e,t=!0){return Object.assign(e,{[Dw]:t})}function En(...e){let t=w.useRef(e);w.useEffect(()=>{t.current=e},[e]);let n=Ge(r=>{for(let i of t.current)i!=null&&(typeof i=="function"?i(r):i.current=r)});return e.every(r=>r==null||(r==null?void 0:r[Dw]))?void 0:n}let Dp=w.createContext(null);Dp.displayName="DescriptionContext";function $w(){let e=w.useContext(Dp);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,$w),t}return e}function Fw(){let[e,t]=w.useState([]);return[e.length>0?e.join(" "):void 0,w.useMemo(()=>function(n){let r=Ge(o=>(t(l=>[...l,o]),()=>t(l=>{let u=l.slice(),c=u.indexOf(o);return c!==-1&&u.splice(c,1),u}))),i=w.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return Re.createElement(Dp.Provider,{value:i},n.children)},[t])]}let QC="p";function XC(e,t){let n=w.useId(),r=Pw(),{id:i=`headlessui-description-${n}`,...o}=e,l=$w(),u=En(t);jt(()=>l.register(i),[i,l.register]);let c=Br({...l.slot,disabled:r||!1}),f={ref:u,...l.props,id:i};return qt()({ourProps:f,theirProps:o,slot:c,defaultTag:QC,name:l.name||"Description"})}let ZC=Ot(XC),ej=Object.assign(ZC,{});var tn=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(tn||{});let jc=w.createContext(null);jc.displayName="LabelContext";function $p(){let e=w.useContext(jc);if(e===null){let t=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,$p),t}return e}function tj(e){var t,n,r;let i=(n=(t=w.useContext(jc))==null?void 0:t.value)!=null?n:void 0;return((r=void 0)!=null?r:0)>0?[i,...e].filter(Boolean).join(" "):i}function zw({inherit:e=!1}={}){let t=tj(),[n,r]=w.useState([]),i=e?[t,...n].filter(Boolean):n;return[i.length>0?i.join(" "):void 0,w.useMemo(()=>function(o){let l=Ge(c=>(r(f=>[...f,c]),()=>r(f=>{let h=f.slice(),p=h.indexOf(c);return p!==-1&&h.splice(p,1),h}))),u=w.useMemo(()=>({register:l,slot:o.slot,name:o.name,props:o.props,value:o.value}),[l,o.slot,o.name,o.props,o.value]);return Re.createElement(jc.Provider,{value:u},o.children)},[r])]}let nj="label";function rj(e,t){var n;let r=w.useId(),i=$p(),o=HC(),l=Pw(),{id:u=`headlessui-label-${r}`,htmlFor:c=o??((n=i.props)==null?void 0:n.htmlFor),passive:f=!1,...h}=e,p=En(t);jt(()=>i.register(u),[u,i.register]);let v=Ge(E=>{let k=E.currentTarget;if(!(E.target!==E.currentTarget&&GC(E.target))&&(Sv(k)&&E.preventDefault(),i.props&&"onClick"in i.props&&typeof i.props.onClick=="function"&&i.props.onClick(E),Sv(k))){let C=document.getElementById(k.htmlFor);if(C){let _=C.getAttribute("disabled");if(_==="true"||_==="")return;let j=C.getAttribute("aria-disabled");if(j==="true"||j==="")return;(Mw(C)&&(C.type==="file"||C.type==="radio"||C.type==="checkbox")||C.role==="radio"||C.role==="checkbox"||C.role==="switch")&&C.click(),C.focus({preventScroll:!0})}}}),y=Br({...i.slot,disabled:l||!1}),S={ref:p,...i.props,id:u,htmlFor:c,onClick:v};return f&&("onClick"in S&&(delete S.htmlFor,delete S.onClick),"onClick"in h&&delete h.onClick),qt()({ourProps:S,theirProps:h,slot:y,defaultTag:c?nj:"div",name:i.name||"Label"})}let ij=Ot(rj);Object.assign(ij,{});let sj=w.createContext(()=>{});function oj({value:e,children:t}){return Re.createElement(sj.Provider,{value:e},t)}function _v(e){if(e===null)return{width:0,height:0};let{width:t,height:n}=e.getBoundingClientRect();return{width:t,height:n}}function aj(e,t,n=!1){let[r,i]=w.useState(()=>_v(t));return jt(()=>{if(!t||!e)return;let o=Mn();return o.requestAnimationFrame(function l(){o.requestAnimationFrame(l),i(u=>{let c=_v(t);return c.width===u.width&&c.height===u.height?u:c})}),()=>{o.dispose()}},[t,e]),n?{width:`${r.width}px`,height:`${r.height}px`}:r}var Bw=(e=>(e[e.Left=0]="Left",e[e.Right=2]="Right",e))(Bw||{});function lj(e){let t=w.useRef(null),n=Ge(i=>{t.current=i.pointerType,!Ev(i.currentTarget)&&i.pointerType==="mouse"&&i.button===Bw.Left&&(i.preventDefault(),e(i))}),r=Ge(i=>{t.current!=="mouse"&&(Ev(i.currentTarget)||e(i))});return{onPointerDown:n,onClick:r}}let Uw=class extends Map{constructor(t){super(),this.factory=t}get(t){let n=super.get(t);return n===void 0&&(n=this.factory(t),this.set(t,n)),n}};var uj=Object.defineProperty,cj=(e,t,n)=>t in e?uj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dj=(e,t,n)=>(cj(e,t+"",n),n),Ww=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},rr=(e,t,n)=>(Ww(e,t,"read from private field"),n?n.call(e):t.get(e)),Uf=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Cv=(e,t,n,r)=>(Ww(e,t,"write to private field"),t.set(e,n),n),Ar,Ta,Ia;let Hw=class{constructor(t){Uf(this,Ar,{}),Uf(this,Ta,new Uw(()=>new Set)),Uf(this,Ia,new Set),dj(this,"disposables",Mn()),Cv(this,Ar,t),Lr.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return rr(this,Ar)}subscribe(t,n){if(Lr.isServer)return()=>{};let r={selector:t,callback:n,current:t(rr(this,Ar))};return rr(this,Ia).add(r),this.disposables.add(()=>{rr(this,Ia).delete(r)})}on(t,n){return Lr.isServer?()=>{}:(rr(this,Ta).get(t).add(n),this.disposables.add(()=>{rr(this,Ta).get(t).delete(n)}))}send(t){let n=this.reduce(rr(this,Ar),t);if(n!==rr(this,Ar)){Cv(this,Ar,n);for(let r of rr(this,Ia)){let i=r.selector(rr(this,Ar));Vw(r.current,i)||(r.current=i,r.callback(i))}for(let r of rr(this,Ta).get(t.type))r(rr(this,Ar),t)}}};Ar=new WeakMap,Ta=new WeakMap,Ia=new WeakMap;function Vw(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:Array.isArray(e)&&Array.isArray(t)?e.length!==t.length?!1:Wf(e[Symbol.iterator](),t[Symbol.iterator]()):e instanceof Map&&t instanceof Map||e instanceof Set&&t instanceof Set?e.size!==t.size?!1:Wf(e.entries(),t.entries()):jv(e)&&jv(t)?Wf(Object.entries(e)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()):!1}function Wf(e,t){do{let n=e.next(),r=t.next();if(n.done&&r.done)return!0;if(n.done||r.done||!Object.is(n.value,r.value))return!1}while(!0)}function jv(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||Object.getPrototypeOf(t)===null}function Nv(e){let[t,n]=e(),r=Mn();return(...i)=>{t(...i),r.dispose(),r.microTask(n)}}var fj=Object.defineProperty,hj=(e,t,n)=>t in e?fj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tv=(e,t,n)=>(hj(e,typeof t!="symbol"?t+"":t,n),n),qw=(e=>(e[e.Push=0]="Push",e[e.Pop=1]="Pop",e))(qw||{});let pj={0(e,t){let n=t.id,r=e.stack,i=e.stack.indexOf(n);if(i!==-1){let o=e.stack.slice();return o.splice(i,1),o.push(n),r=o,{...e,stack:r}}return{...e,stack:[...e.stack,n]}},1(e,t){let n=t.id,r=e.stack.indexOf(n);if(r===-1)return e;let i=e.stack.slice();return i.splice(r,1),{...e,stack:i}}},mj=class Yw extends Hw{constructor(){super(...arguments),Tv(this,"actions",{push:t=>this.send({type:0,id:t}),pop:t=>this.send({type:1,id:t})}),Tv(this,"selectors",{isTop:(t,n)=>t.stack[t.stack.length-1]===n,inStack:(t,n)=>t.stack.includes(n)})}static new(){return new Yw({stack:[]})}reduce(t,n){return Sr(n.type,pj,t,n)}};const Nc=new Uw(()=>mj.new());var Hf={exports:{}},Vf={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iv;function gj(){if(Iv)return Vf;Iv=1;var e=kc();function t(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,o=e.useEffect,l=e.useMemo,u=e.useDebugValue;return Vf.useSyncExternalStoreWithSelector=function(c,f,h,p,v){var y=i(null);if(y.current===null){var S={hasValue:!1,value:null};y.current=S}else S=y.current;y=l(function(){function k(O){if(!C){if(C=!0,_=O,O=p(O),v!==void 0&&S.hasValue){var P=S.value;if(v(P,O))return j=P}return j=O}if(P=j,n(_,O))return P;var $=p(O);return v!==void 0&&v(P,$)?(_=O,P):(_=O,j=$)}var C=!1,_,j,I=h===void 0?null:h;return[function(){return k(f())},I===null?void 0:function(){return k(I())}]},[f,h,p,v]);var E=r(c,y[0],y[1]);return o(function(){S.hasValue=!0,S.value=E},[E]),u(E),E},Vf}var Pv;function yj(){return Pv||(Pv=1,Hf.exports=gj()),Hf.exports}var vj=yj();function lr(e,t,n=Vw){return vj.useSyncExternalStoreWithSelector(Ge(r=>e.subscribe(xj,r)),Ge(()=>e.state),Ge(()=>e.state),Ge(t),n)}function xj(e){return e}function al(e,t){let n=w.useId(),r=Nc.get(t),[i,o]=lr(r,w.useCallback(l=>[r.selectors.isTop(l,n),r.selectors.inStack(l,n)],[r,n]));return jt(()=>{if(e)return r.actions.push(n),()=>r.actions.pop(n)},[r,e,n]),e?o?i:!0:!1}let Hh=new Map,La=new Map;function Av(e){var t;let n=(t=La.get(e))!=null?t:0;return La.set(e,n+1),n!==0?()=>Rv(e):(Hh.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>Rv(e))}function Rv(e){var t;let n=(t=La.get(e))!=null?t:1;if(n===1?La.delete(e):La.set(e,n-1),n!==1)return;let r=Hh.get(e);r&&(r["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r["aria-hidden"]),e.inert=r.inert,Hh.delete(e))}function Gw(e,{allowed:t,disallowed:n}={}){let r=al(e,"inert-others");jt(()=>{var i,o;if(!r)return;let l=Mn();for(let c of(i=n==null?void 0:n())!=null?i:[])c&&l.add(Av(c));let u=(o=t==null?void 0:t())!=null?o:[];for(let c of u){if(!c)continue;let f=_s(c);if(!f)continue;let h=c.parentElement;for(;h&&h!==f.body;){for(let p of h.children)u.some(v=>p.contains(v))||l.add(Av(p));h=h.parentElement}}return l.dispose},[r,t,n])}function Kw(e,t,n){let r=js(i=>{let o=i.getBoundingClientRect();o.x===0&&o.y===0&&o.width===0&&o.height===0&&n()});w.useEffect(()=>{if(!e)return;let i=t===null?null:Kn(t)?t:t.current;if(!i)return;let o=Mn();if(typeof ResizeObserver<"u"){let l=new ResizeObserver(()=>r.current(i));l.observe(i),o.add(()=>l.disconnect())}if(typeof IntersectionObserver<"u"){let l=new IntersectionObserver(()=>r.current(i));l.observe(i),o.add(()=>l.disconnect())}return()=>o.dispose()},[t,r,e])}let ic=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","details>summary","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),wj=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var br=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(br||{}),Vh=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Vh||{}),bj=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(bj||{});function Jw(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(ic)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function kj(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(wj)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var Fp=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(Fp||{});function zp(e,t=0){var n;return e===((n=_s(e))==null?void 0:n.body)?!1:Sr(t,{0(){return e.matches(ic)},1(){let r=e;for(;r!==null;){if(r.matches(ic))return!0;r=r.parentElement}return!1}})}function Qw(e){Mn().nextFrame(()=>{let t=Lp(e);t&&Mr(t)&&!zp(t,0)&&Dr(e)})}var Sj=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(Sj||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Dr(e){e==null||e.focus({preventScroll:!0})}let Ej=["textarea","input"].join(",");function _j(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,Ej))!=null?n:!1}function Xw(e,t=n=>n){return e.slice().sort((n,r)=>{let i=t(n),o=t(r);if(i===null||o===null)return 0;let l=i.compareDocumentPosition(o);return l&Node.DOCUMENT_POSITION_FOLLOWING?-1:l&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Cj(e,t,n=e===null?document.body:nc(e)){return wo(Jw(n),t,{relativeTo:e})}function wo(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:i=[]}={}){let o=Array.isArray(e)?e.length>0?nc(e[0]):document:nc(e),l=Array.isArray(e)?n?Xw(e):e:t&64?kj(e):Jw(e);i.length>0&&l.length>1&&(l=l.filter(y=>!i.some(S=>S!=null&&"current"in S?(S==null?void 0:S.current)===y:S===y))),r=r??(o==null?void 0:o.activeElement);let u=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,l.indexOf(r))-1;if(t&4)return Math.max(0,l.indexOf(r))+1;if(t&8)return l.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),f=t&32?{preventScroll:!0}:{},h=0,p=l.length,v;do{if(h>=p||h+p<=0)return 0;let y=c+h;if(t&16)y=(y+p)%p;else{if(y<0)return 3;if(y>=p)return 1}v=l[y],v==null||v.focus(f),h+=u}while(v!==Lp(v));return t&6&&_j(v)&&v.select(),2}function Zw(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function jj(){return/Android/gi.test(window.navigator.userAgent)}function Ov(){return Zw()||jj()}function yo(e,t,n,r){let i=js(n);w.useEffect(()=>{if(!e)return;function o(l){i.current(l)}return document.addEventListener(t,o,r),()=>document.removeEventListener(t,o,r)},[e,t,r])}function eb(e,t,n,r){let i=js(n);w.useEffect(()=>{if(!e)return;function o(l){i.current(l)}return window.addEventListener(t,o,r),()=>window.removeEventListener(t,o,r)},[e,t,r])}const Mv=30;function tb(e,t,n){let r=js(n),i=w.useCallback(function(u,c){if(u.defaultPrevented)return;let f=c(u);if(f===null||!f.getRootNode().contains(f)||!f.isConnected)return;let h=(function p(v){return typeof v=="function"?p(v()):Array.isArray(v)||v instanceof Set?v:[v]})(t);for(let p of h)if(p!==null&&(p.contains(f)||u.composed&&u.composedPath().includes(p)))return;return!zp(f,Fp.Loose)&&f.tabIndex!==-1&&u.preventDefault(),r.current(u,f)},[r,t]),o=w.useRef(null);yo(e,"pointerdown",u=>{var c,f;Ov()||(o.current=((f=(c=u.composedPath)==null?void 0:c.call(u))==null?void 0:f[0])||u.target)},!0),yo(e,"pointerup",u=>{if(Ov()||!o.current)return;let c=o.current;return o.current=null,i(u,()=>c)},!0);let l=w.useRef({x:0,y:0});yo(e,"touchstart",u=>{l.current.x=u.touches[0].clientX,l.current.y=u.touches[0].clientY},!0),yo(e,"touchend",u=>{let c={x:u.changedTouches[0].clientX,y:u.changedTouches[0].clientY};if(!(Math.abs(c.x-l.current.x)>=Mv||Math.abs(c.y-l.current.y)>=Mv))return i(u,()=>Mr(u.target)?u.target:null)},!0),eb(e,"blur",u=>i(u,()=>qC(window.document.activeElement)?window.document.activeElement:null),!0)}function Ja(...e){return w.useMemo(()=>_s(...e),[...e])}var Nj=(e=>(e[e.Ignore=0]="Ignore",e[e.Select=1]="Select",e[e.Close=2]="Close",e))(Nj||{});const ju={Ignore:{kind:0},Select:e=>({kind:1,target:e}),Close:{kind:2}},Tj=200,Lv=5;function Ij(e,{trigger:t,action:n,close:r,select:i}){let o=w.useRef(null),l=w.useRef(null),u=w.useRef(null);yo(e&&t!==null,"pointerdown",c=>{Ow(c==null?void 0:c.target)&&t!=null&&t.contains(c.target)&&(l.current=c.x,u.current=c.y,o.current=c.timeStamp)}),yo(e&&t!==null,"pointerup",c=>{var f,h;let p=o.current;if(p===null||(o.current=null,!Mr(c.target))||Math.abs(c.x-((f=l.current)!=null?f:c.x))<Lv&&Math.abs(c.y-((h=u.current)!=null?h:c.y))<Lv)return;let v=n(c);switch(v.kind){case 0:return;case 1:{c.timeStamp-p>Tj&&(i(v.target),r());break}case 2:{r();break}}},{capture:!0})}function nb(e,t,n,r){let i=js(n);w.useEffect(()=>{e=e??window;function o(l){i.current(l)}return e.addEventListener(t,o,r),()=>e.removeEventListener(t,o,r)},[e,t,r])}function Pj(e,t){return w.useMemo(()=>{var n;if(e.type)return e.type;let r=(n=e.as)!=null?n:"button";if(typeof r=="string"&&r.toLowerCase()==="button"||(t==null?void 0:t.tagName)==="BUTTON"&&!t.hasAttribute("type"))return"button"},[e.type,e.as,t])}function Aj(e){return w.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}function Rj(e,t){let n=e(),r=new Set;return{getSnapshot(){return n},subscribe(i){return r.add(i),()=>r.delete(i)},dispatch(i,...o){let l=t[i].call(n,...o);l&&(n=l,r.forEach(u=>u()))}}}function Oj(){let e;return{before({doc:t}){var n;let r=t.documentElement,i=(n=t.defaultView)!=null?n:window;e=Math.max(0,i.innerWidth-r.clientWidth)},after({doc:t,d:n}){let r=t.documentElement,i=Math.max(0,r.clientWidth-r.offsetWidth),o=Math.max(0,e-i);n.style(r,"paddingRight",`${o}px`)}}}function Mj(){return Zw()?{before({doc:e,d:t,meta:n}){function r(i){for(let o of n().containers)for(let l of o())if(l.contains(i))return!0;return!1}t.microTask(()=>{var i;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let u=Mn();u.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>u.dispose()))}let o=(i=window.scrollY)!=null?i:window.pageYOffset,l=null;t.addEventListener(e,"click",u=>{if(Mr(u.target))try{let c=u.target.closest("a");if(!c)return;let{hash:f}=new URL(c.href),h=e.querySelector(f);Mr(h)&&!r(h)&&(l=h)}catch{}},!0),t.group(u=>{t.addEventListener(e,"touchstart",c=>{if(u.dispose(),Mr(c.target)&&VC(c.target))if(r(c.target)){let f=c.target;for(;f.parentElement&&r(f.parentElement);)f=f.parentElement;u.style(f,"overscrollBehavior","contain")}else u.style(c.target,"touchAction","none")})}),t.addEventListener(e,"touchmove",u=>{if(Mr(u.target)){if(Mw(u.target))return;if(r(u.target)){let c=u.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&u.preventDefault()}else u.preventDefault()}},{passive:!1}),t.add(()=>{var u;let c=(u=window.scrollY)!=null?u:window.pageYOffset;o!==c&&window.scrollTo(0,o),l&&l.isConnected&&(l.scrollIntoView({block:"nearest"}),l=null)})})}}:{}}function Lj(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function Dv(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let ys=Rj(()=>new Map,{PUSH(e,t){var n;let r=(n=this.get(e))!=null?n:{doc:e,count:0,d:Mn(),meta:new Set,computedMeta:{}};return r.count++,r.meta.add(t),r.computedMeta=Dv(r.meta),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t),n.computedMeta=Dv(n.meta)),this},SCROLL_PREVENT(e){let t={doc:e.doc,d:e.d,meta(){return e.computedMeta}},n=[Mj(),Oj(),Lj()];n.forEach(({before:r})=>r==null?void 0:r(t)),n.forEach(({after:r})=>r==null?void 0:r(t))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});ys.subscribe(()=>{let e=ys.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let r=t.get(n.doc)==="hidden",i=n.count!==0;(i&&!r||!i&&r)&&ys.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&ys.dispatch("TEARDOWN",n)}});function Dj(e,t,n=()=>({containers:[]})){let r=Aj(ys),i=t?r.get(t):void 0,o=i?i.count>0:!1;return jt(()=>{if(!(!t||!e))return ys.dispatch("PUSH",t,n),()=>ys.dispatch("POP",t,n)},[e,t]),o}function rb(e,t,n=()=>[document.body]){let r=al(e,"scroll-lock");Dj(r,t,i=>{var o;return{containers:[...(o=i.containers)!=null?o:[],n]}})}function $v(e){return[e.screenX,e.screenY]}function $j(){let e=w.useRef([-1,-1]);return{wasMoved(t){let n=$v(t);return e.current[0]===n[0]&&e.current[1]===n[1]?!1:(e.current=n,!0)},update(t){e.current=$v(t)}}}function Fj(e=0){let[t,n]=w.useState(e),r=w.useCallback(c=>n(c),[]),i=w.useCallback(c=>n(f=>f|c),[]),o=w.useCallback(c=>(t&c)===c,[t]),l=w.useCallback(c=>n(f=>f&~c),[]),u=w.useCallback(c=>n(f=>f^c),[]);return{flags:t,setFlag:r,addFlag:i,hasFlag:o,removeFlag:l,toggleFlag:u}}var zj={},Fv,zv;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((Fv=process==null?void 0:zj)==null?void 0:Fv.NODE_ENV)==="test"&&typeof((zv=Element==null?void 0:Element.prototype)==null?void 0:zv.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var Bj=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(Bj||{});function ib(e){let t={};for(let n in e)e[n]===!0&&(t[`data-${n}`]="");return t}function sb(e,t,n,r){let[i,o]=w.useState(n),{hasFlag:l,addFlag:u,removeFlag:c}=Fj(e&&i?3:0),f=w.useRef(!1),h=w.useRef(!1),p=Cs();return jt(()=>{var v;if(e){if(n&&o(!0),!t){n&&u(3);return}return(v=r==null?void 0:r.start)==null||v.call(r,n),Uj(t,{inFlight:f,prepare(){h.current?h.current=!1:h.current=f.current,f.current=!0,!h.current&&(n?(u(3),c(4)):(u(4),c(2)))},run(){h.current?n?(c(3),u(4)):(c(4),u(3)):n?c(1):u(1)},done(){var y;h.current&&Vj(t)||(f.current=!1,c(7),n||o(!1),(y=r==null?void 0:r.end)==null||y.call(r,n))}})}},[e,n,t,p]),e?[i,{closed:l(1),enter:l(2),leave:l(4),transition:l(2)||l(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function Uj(e,{prepare:t,run:n,done:r,inFlight:i}){let o=Mn();return Hj(e,{prepare:t,inFlight:i}),o.nextFrame(()=>{n(),o.requestAnimationFrame(()=>{o.add(Wj(e,r))})}),o.dispose}function Wj(e,t){var n,r;let i=Mn();if(!e)return i.dispose;let o=!1;i.add(()=>{o=!0});let l=(r=(n=e.getAnimations)==null?void 0:n.call(e).filter(u=>u instanceof CSSTransition))!=null?r:[];return l.length===0?(t(),i.dispose):(Promise.allSettled(l.map(u=>u.finished)).then(()=>{o||t()}),i.dispose)}function Hj(e,{inFlight:t,prepare:n}){if(t!=null&&t.current){n();return}let r=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=r}function Vj(e){var t,n;return((n=(t=e.getAnimations)==null?void 0:t.call(e))!=null?n:[]).some(r=>r instanceof CSSTransition&&r.playState!=="finished")}function qj(e,{container:t,accept:n,walk:r}){let i=w.useRef(n),o=w.useRef(r);w.useEffect(()=>{i.current=n,o.current=r},[n,r]),jt(()=>{if(!t||!e)return;let l=_s(t);if(!l)return;let u=i.current,c=o.current,f=Object.assign(p=>u(p),{acceptNode:u}),h=l.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,f,!1);for(;h.nextNode();)c(h.currentNode)},[t,e,i,o])}function Bp(e,t){let n=w.useRef([]),r=Ge(e);w.useEffect(()=>{let i=[...n.current];for(let[o,l]of t.entries())if(n.current[o]!==l){let u=r(t,i);return n.current=t,u}},[r,...t])}function Tc(){return typeof window<"u"}function Mo(e){return ob(e)?(e.nodeName||"").toLowerCase():"#document"}function Yn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ur(e){var t;return(t=(ob(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function ob(e){return Tc()?e instanceof Node||e instanceof Yn(e).Node:!1}function kn(e){return Tc()?e instanceof Element||e instanceof Yn(e).Element:!1}function Fr(e){return Tc()?e instanceof HTMLElement||e instanceof Yn(e).HTMLElement:!1}function Bv(e){return!Tc()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Yn(e).ShadowRoot}const Yj=new Set(["inline","contents"]);function ll(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Er(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!Yj.has(i)}const Gj=new Set(["table","td","th"]);function Kj(e){return Gj.has(Mo(e))}const Jj=[":popover-open",":modal"];function Ic(e){return Jj.some(t=>{try{return e.matches(t)}catch{return!1}})}const Qj=["transform","translate","scale","rotate","perspective"],Xj=["transform","translate","scale","rotate","perspective","filter"],Zj=["paint","layout","strict","content"];function Up(e){const t=Wp(),n=kn(e)?Er(e):e;return Qj.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||Xj.some(r=>(n.willChange||"").includes(r))||Zj.some(r=>(n.contain||"").includes(r))}function eN(e){let t=Fi(e);for(;Fr(t)&&!No(t);){if(Up(t))return t;if(Ic(t))return null;t=Fi(t)}return null}function Wp(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const tN=new Set(["html","body","#document"]);function No(e){return tN.has(Mo(e))}function Er(e){return Yn(e).getComputedStyle(e)}function Pc(e){return kn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Fi(e){if(Mo(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Bv(e)&&e.host||Ur(e);return Bv(t)?t.host:t}function ab(e){const t=Fi(e);return No(t)?e.ownerDocument?e.ownerDocument.body:e.body:Fr(t)&&ll(t)?t:ab(t)}function Qa(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=ab(e),o=i===((r=e.ownerDocument)==null?void 0:r.body),l=Yn(i);if(o){const u=qh(l);return t.concat(l,l.visualViewport||[],ll(i)?i:[],u&&n?Qa(u):[])}return t.concat(i,Qa(i,[],n))}function qh(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function nN(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}const ws=Math.min,gn=Math.max,Xa=Math.round,Nu=Math.floor,$r=e=>({x:e,y:e}),rN={left:"right",right:"left",bottom:"top",top:"bottom"},iN={start:"end",end:"start"};function Uv(e,t,n){return gn(e,ws(t,n))}function Lo(e,t){return typeof e=="function"?e(t):e}function zi(e){return e.split("-")[0]}function ul(e){return e.split("-")[1]}function lb(e){return e==="x"?"y":"x"}function ub(e){return e==="y"?"height":"width"}const sN=new Set(["top","bottom"]);function ti(e){return sN.has(zi(e))?"y":"x"}function cb(e){return lb(ti(e))}function oN(e,t,n){n===void 0&&(n=!1);const r=ul(e),i=cb(e),o=ub(i);let l=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(l=sc(l)),[l,sc(l)]}function aN(e){const t=sc(e);return[Yh(e),t,Yh(t)]}function Yh(e){return e.replace(/start|end/g,t=>iN[t])}const Wv=["left","right"],Hv=["right","left"],lN=["top","bottom"],uN=["bottom","top"];function cN(e,t,n){switch(e){case"top":case"bottom":return n?t?Hv:Wv:t?Wv:Hv;case"left":case"right":return t?lN:uN;default:return[]}}function dN(e,t,n,r){const i=ul(e);let o=cN(zi(e),n==="start",r);return i&&(o=o.map(l=>l+"-"+i),t&&(o=o.concat(o.map(Yh)))),o}function sc(e){return e.replace(/left|right|bottom|top/g,t=>rN[t])}function fN(e){return{top:0,right:0,bottom:0,left:0,...e}}function hN(e){return typeof e!="number"?fN(e):{top:e,right:e,bottom:e,left:e}}function oc(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function Vv(e,t,n){let{reference:r,floating:i}=e;const o=ti(t),l=cb(t),u=ub(l),c=zi(t),f=o==="y",h=r.x+r.width/2-i.width/2,p=r.y+r.height/2-i.height/2,v=r[u]/2-i[u]/2;let y;switch(c){case"top":y={x:h,y:r.y-i.height};break;case"bottom":y={x:h,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:p};break;case"left":y={x:r.x-i.width,y:p};break;default:y={x:r.x,y:r.y}}switch(ul(t)){case"start":y[l]-=v*(n&&f?-1:1);break;case"end":y[l]+=v*(n&&f?-1:1);break}return y}const pN=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:l}=n,u=o.filter(Boolean),c=await(l.isRTL==null?void 0:l.isRTL(t));let f=await l.getElementRects({reference:e,floating:t,strategy:i}),{x:h,y:p}=Vv(f,r,c),v=r,y={},S=0;for(let E=0;E<u.length;E++){const{name:k,fn:C}=u[E],{x:_,y:j,data:I,reset:O}=await C({x:h,y:p,initialPlacement:r,placement:v,strategy:i,middlewareData:y,rects:f,platform:l,elements:{reference:e,floating:t}});h=_??h,p=j??p,y={...y,[k]:{...y[k],...I}},O&&S<=50&&(S++,typeof O=="object"&&(O.placement&&(v=O.placement),O.rects&&(f=O.rects===!0?await l.getElementRects({reference:e,floating:t,strategy:i}):O.rects),{x:h,y:p}=Vv(f,v,c)),E=-1)}return{x:h,y:p,placement:v,strategy:i,middlewareData:y}};async function Ac(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:o,rects:l,elements:u,strategy:c}=e,{boundary:f="clippingAncestors",rootBoundary:h="viewport",elementContext:p="floating",altBoundary:v=!1,padding:y=0}=Lo(t,e),S=hN(y),k=u[v?p==="floating"?"reference":"floating":p],C=oc(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(k)))==null||n?k:k.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(u.floating)),boundary:f,rootBoundary:h,strategy:c})),_=p==="floating"?{x:r,y:i,width:l.floating.width,height:l.floating.height}:l.reference,j=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u.floating)),I=await(o.isElement==null?void 0:o.isElement(j))?await(o.getScale==null?void 0:o.getScale(j))||{x:1,y:1}:{x:1,y:1},O=oc(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:_,offsetParent:j,strategy:c}):_);return{top:(C.top-O.top+S.top)/I.y,bottom:(O.bottom-C.bottom+S.bottom)/I.y,left:(C.left-O.left+S.left)/I.x,right:(O.right-C.right+S.right)/I.x}}const mN=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:o,rects:l,initialPlacement:u,platform:c,elements:f}=t,{mainAxis:h=!0,crossAxis:p=!0,fallbackPlacements:v,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:E=!0,...k}=Lo(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const C=zi(i),_=ti(u),j=zi(u)===u,I=await(c.isRTL==null?void 0:c.isRTL(f.floating)),O=v||(j||!E?[sc(u)]:aN(u)),P=S!=="none";!v&&P&&O.push(...dN(u,E,S,I));const $=[u,...O],oe=await Ac(t,k),X=[];let R=((r=o.flip)==null?void 0:r.overflows)||[];if(h&&X.push(oe[C]),p){const Y=oN(i,l,I);X.push(oe[Y[0]],oe[Y[1]])}if(R=[...R,{placement:i,overflows:X}],!X.every(Y=>Y<=0)){var D,re;const Y=(((D=o.flip)==null?void 0:D.index)||0)+1,M=$[Y];if(M&&(!(p==="alignment"?_!==ti(M):!1)||R.every(F=>ti(F.placement)===_?F.overflows[0]>0:!0)))return{data:{index:Y,overflows:R},reset:{placement:M}};let G=(re=R.filter(ae=>ae.overflows[0]<=0).sort((ae,F)=>ae.overflows[1]-F.overflows[1])[0])==null?void 0:re.placement;if(!G)switch(y){case"bestFit":{var W;const ae=(W=R.filter(F=>{if(P){const ee=ti(F.placement);return ee===_||ee==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(ee=>ee>0).reduce((ee,T)=>ee+T,0)]).sort((F,ee)=>F[1]-ee[1])[0])==null?void 0:W[0];ae&&(G=ae);break}case"initialPlacement":G=u;break}if(i!==G)return{reset:{placement:G}}}return{}}}},gN=new Set(["left","top"]);async function yN(e,t){const{placement:n,platform:r,elements:i}=e,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),l=zi(n),u=ul(n),c=ti(n)==="y",f=gN.has(l)?-1:1,h=o&&c?-1:1,p=Lo(t,e);let{mainAxis:v,crossAxis:y,alignmentAxis:S}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return u&&typeof S=="number"&&(y=u==="end"?S*-1:S),c?{x:y*h,y:v*f}:{x:v*f,y:y*h}}const vN=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:o,placement:l,middlewareData:u}=t,c=await yN(t,e);return l===((n=u.offset)==null?void 0:n.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:o+c.y,data:{...c,placement:l}}}}},xN=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:l=!1,limiter:u={fn:k=>{let{x:C,y:_}=k;return{x:C,y:_}}},...c}=Lo(e,t),f={x:n,y:r},h=await Ac(t,c),p=ti(zi(i)),v=lb(p);let y=f[v],S=f[p];if(o){const k=v==="y"?"top":"left",C=v==="y"?"bottom":"right",_=y+h[k],j=y-h[C];y=Uv(_,y,j)}if(l){const k=p==="y"?"top":"left",C=p==="y"?"bottom":"right",_=S+h[k],j=S-h[C];S=Uv(_,S,j)}const E=u.fn({...t,[v]:y,[p]:S});return{...E,data:{x:E.x-n,y:E.y-r,enabled:{[v]:o,[p]:l}}}}}},wN=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:o,platform:l,elements:u}=t,{apply:c=()=>{},...f}=Lo(e,t),h=await Ac(t,f),p=zi(i),v=ul(i),y=ti(i)==="y",{width:S,height:E}=o.floating;let k,C;p==="top"||p==="bottom"?(k=p,C=v===(await(l.isRTL==null?void 0:l.isRTL(u.floating))?"start":"end")?"left":"right"):(C=p,k=v==="end"?"top":"bottom");const _=E-h.top-h.bottom,j=S-h.left-h.right,I=ws(E-h[k],_),O=ws(S-h[C],j),P=!t.middlewareData.shift;let $=I,oe=O;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(oe=j),(r=t.middlewareData.shift)!=null&&r.enabled.y&&($=_),P&&!v){const R=gn(h.left,0),D=gn(h.right,0),re=gn(h.top,0),W=gn(h.bottom,0);y?oe=S-2*(R!==0||D!==0?R+D:gn(h.left,h.right)):$=E-2*(re!==0||W!==0?re+W:gn(h.top,h.bottom))}await c({...t,availableWidth:oe,availableHeight:$});const X=await l.getDimensions(u.floating);return S!==X.width||E!==X.height?{reset:{rects:!0}}:{}}}};function db(e){const t=Er(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Fr(e),o=i?e.offsetWidth:n,l=i?e.offsetHeight:r,u=Xa(n)!==o||Xa(r)!==l;return u&&(n=o,r=l),{width:n,height:r,$:u}}function Hp(e){return kn(e)?e:e.contextElement}function bo(e){const t=Hp(e);if(!Fr(t))return $r(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=db(t);let l=(o?Xa(n.width):n.width)/r,u=(o?Xa(n.height):n.height)/i;return(!l||!Number.isFinite(l))&&(l=1),(!u||!Number.isFinite(u))&&(u=1),{x:l,y:u}}const bN=$r(0);function fb(e){const t=Yn(e);return!Wp()||!t.visualViewport?bN:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function kN(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Yn(e)?!1:t}function bs(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),o=Hp(e);let l=$r(1);t&&(r?kn(r)&&(l=bo(r)):l=bo(e));const u=kN(o,n,r)?fb(o):$r(0);let c=(i.left+u.x)/l.x,f=(i.top+u.y)/l.y,h=i.width/l.x,p=i.height/l.y;if(o){const v=Yn(o),y=r&&kn(r)?Yn(r):r;let S=v,E=qh(S);for(;E&&r&&y!==S;){const k=bo(E),C=E.getBoundingClientRect(),_=Er(E),j=C.left+(E.clientLeft+parseFloat(_.paddingLeft))*k.x,I=C.top+(E.clientTop+parseFloat(_.paddingTop))*k.y;c*=k.x,f*=k.y,h*=k.x,p*=k.y,c+=j,f+=I,S=Yn(E),E=qh(S)}}return oc({width:h,height:p,x:c,y:f})}function Rc(e,t){const n=Pc(e).scrollLeft;return t?t.left+n:bs(Ur(e)).left+n}function hb(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-Rc(e,n),i=n.top+t.scrollTop;return{x:r,y:i}}function SN(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const o=i==="fixed",l=Ur(r),u=t?Ic(t.floating):!1;if(r===l||u&&o)return n;let c={scrollLeft:0,scrollTop:0},f=$r(1);const h=$r(0),p=Fr(r);if((p||!p&&!o)&&((Mo(r)!=="body"||ll(l))&&(c=Pc(r)),Fr(r))){const y=bs(r);f=bo(r),h.x=y.x+r.clientLeft,h.y=y.y+r.clientTop}const v=l&&!p&&!o?hb(l,c):$r(0);return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-c.scrollLeft*f.x+h.x+v.x,y:n.y*f.y-c.scrollTop*f.y+h.y+v.y}}function EN(e){return Array.from(e.getClientRects())}function _N(e){const t=Ur(e),n=Pc(e),r=e.ownerDocument.body,i=gn(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=gn(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let l=-n.scrollLeft+Rc(e);const u=-n.scrollTop;return Er(r).direction==="rtl"&&(l+=gn(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:l,y:u}}const qv=25;function CN(e,t){const n=Yn(e),r=Ur(e),i=n.visualViewport;let o=r.clientWidth,l=r.clientHeight,u=0,c=0;if(i){o=i.width,l=i.height;const h=Wp();(!h||h&&t==="fixed")&&(u=i.offsetLeft,c=i.offsetTop)}const f=Rc(r);if(f<=0){const h=r.ownerDocument,p=h.body,v=getComputedStyle(p),y=h.compatMode==="CSS1Compat"&&parseFloat(v.marginLeft)+parseFloat(v.marginRight)||0,S=Math.abs(r.clientWidth-p.clientWidth-y);S<=qv&&(o-=S)}else f<=qv&&(o+=f);return{width:o,height:l,x:u,y:c}}const jN=new Set(["absolute","fixed"]);function NN(e,t){const n=bs(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=Fr(e)?bo(e):$r(1),l=e.clientWidth*o.x,u=e.clientHeight*o.y,c=i*o.x,f=r*o.y;return{width:l,height:u,x:c,y:f}}function Yv(e,t,n){let r;if(t==="viewport")r=CN(e,n);else if(t==="document")r=_N(Ur(e));else if(kn(t))r=NN(t,n);else{const i=fb(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return oc(r)}function pb(e,t){const n=Fi(e);return n===t||!kn(n)||No(n)?!1:Er(n).position==="fixed"||pb(n,t)}function TN(e,t){const n=t.get(e);if(n)return n;let r=Qa(e,[],!1).filter(u=>kn(u)&&Mo(u)!=="body"),i=null;const o=Er(e).position==="fixed";let l=o?Fi(e):e;for(;kn(l)&&!No(l);){const u=Er(l),c=Up(l);!c&&u.position==="fixed"&&(i=null),(o?!c&&!i:!c&&u.position==="static"&&!!i&&jN.has(i.position)||ll(l)&&!c&&pb(e,l))?r=r.filter(h=>h!==l):i=u,l=Fi(l)}return t.set(e,r),r}function IN(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const l=[...n==="clippingAncestors"?Ic(t)?[]:TN(t,this._c):[].concat(n),r],u=l[0],c=l.reduce((f,h)=>{const p=Yv(t,h,i);return f.top=gn(p.top,f.top),f.right=ws(p.right,f.right),f.bottom=ws(p.bottom,f.bottom),f.left=gn(p.left,f.left),f},Yv(t,u,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function PN(e){const{width:t,height:n}=db(e);return{width:t,height:n}}function AN(e,t,n){const r=Fr(t),i=Ur(t),o=n==="fixed",l=bs(e,!0,o,t);let u={scrollLeft:0,scrollTop:0};const c=$r(0);function f(){c.x=Rc(i)}if(r||!r&&!o)if((Mo(t)!=="body"||ll(i))&&(u=Pc(t)),r){const y=bs(t,!0,o,t);c.x=y.x+t.clientLeft,c.y=y.y+t.clientTop}else i&&f();o&&!r&&i&&f();const h=i&&!r&&!o?hb(i,u):$r(0),p=l.left+u.scrollLeft-c.x-h.x,v=l.top+u.scrollTop-c.y-h.y;return{x:p,y:v,width:l.width,height:l.height}}function qf(e){return Er(e).position==="static"}function Gv(e,t){if(!Fr(e)||Er(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Ur(e)===n&&(n=n.ownerDocument.body),n}function mb(e,t){const n=Yn(e);if(Ic(e))return n;if(!Fr(e)){let i=Fi(e);for(;i&&!No(i);){if(kn(i)&&!qf(i))return i;i=Fi(i)}return n}let r=Gv(e,t);for(;r&&Kj(r)&&qf(r);)r=Gv(r,t);return r&&No(r)&&qf(r)&&!Up(r)?n:r||eN(e)||n}const RN=async function(e){const t=this.getOffsetParent||mb,n=this.getDimensions,r=await n(e.floating);return{reference:AN(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function ON(e){return Er(e).direction==="rtl"}const MN={convertOffsetParentRelativeRectToViewportRelativeRect:SN,getDocumentElement:Ur,getClippingRect:IN,getOffsetParent:mb,getElementRects:RN,getClientRects:EN,getDimensions:PN,getScale:bo,isElement:kn,isRTL:ON};function gb(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function LN(e,t){let n=null,r;const i=Ur(e);function o(){var u;clearTimeout(r),(u=n)==null||u.disconnect(),n=null}function l(u,c){u===void 0&&(u=!1),c===void 0&&(c=1),o();const f=e.getBoundingClientRect(),{left:h,top:p,width:v,height:y}=f;if(u||t(),!v||!y)return;const S=Nu(p),E=Nu(i.clientWidth-(h+v)),k=Nu(i.clientHeight-(p+y)),C=Nu(h),j={rootMargin:-S+"px "+-E+"px "+-k+"px "+-C+"px",threshold:gn(0,ws(1,c))||1};let I=!0;function O(P){const $=P[0].intersectionRatio;if($!==c){if(!I)return l();$?l(!1,$):r=setTimeout(()=>{l(!1,1e-7)},1e3)}$===1&&!gb(f,e.getBoundingClientRect())&&l(),I=!1}try{n=new IntersectionObserver(O,{...j,root:i.ownerDocument})}catch{n=new IntersectionObserver(O,j)}n.observe(e)}return l(!0),o}function DN(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,f=Hp(e),h=i||o?[...f?Qa(f):[],...Qa(t)]:[];h.forEach(C=>{i&&C.addEventListener("scroll",n,{passive:!0}),o&&C.addEventListener("resize",n)});const p=f&&u?LN(f,n):null;let v=-1,y=null;l&&(y=new ResizeObserver(C=>{let[_]=C;_&&_.target===f&&y&&(y.unobserve(t),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var j;(j=y)==null||j.observe(t)})),n()}),f&&!c&&y.observe(f),y.observe(t));let S,E=c?bs(e):null;c&&k();function k(){const C=bs(e);E&&!gb(E,C)&&n(),E=C,S=requestAnimationFrame(k)}return n(),()=>{var C;h.forEach(_=>{i&&_.removeEventListener("scroll",n),o&&_.removeEventListener("resize",n)}),p==null||p(),(C=y)==null||C.disconnect(),y=null,c&&cancelAnimationFrame(S)}}const Yf=Ac,$N=vN,FN=xN,zN=mN,BN=wN,UN=(e,t,n)=>{const r=new Map,i={platform:MN,...n},o={...i.platform,_c:r};return pN(e,t,{...i,platform:o})};var WN=typeof document<"u",HN=function(){},Uu=WN?w.useLayoutEffect:HN;function ac(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!ac(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&e.$$typeof)&&!ac(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function yb(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Kv(e,t){const n=yb(e);return Math.round(t*n)/n}function Gf(e){const t=w.useRef(e);return Uu(()=>{t.current=e}),t}function VN(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:l}={},transform:u=!0,whileElementsMounted:c,open:f}=e,[h,p]=w.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[v,y]=w.useState(r);ac(v,r)||y(r);const[S,E]=w.useState(null),[k,C]=w.useState(null),_=w.useCallback(F=>{F!==P.current&&(P.current=F,E(F))},[]),j=w.useCallback(F=>{F!==$.current&&($.current=F,C(F))},[]),I=o||S,O=l||k,P=w.useRef(null),$=w.useRef(null),oe=w.useRef(h),X=c!=null,R=Gf(c),D=Gf(i),re=Gf(f),W=w.useCallback(()=>{if(!P.current||!$.current)return;const F={placement:t,strategy:n,middleware:v};D.current&&(F.platform=D.current),UN(P.current,$.current,F).then(ee=>{const T={...ee,isPositioned:re.current!==!1};Y.current&&!ac(oe.current,T)&&(oe.current=T,qn.flushSync(()=>{p(T)}))})},[v,t,n,D,re]);Uu(()=>{f===!1&&oe.current.isPositioned&&(oe.current.isPositioned=!1,p(F=>({...F,isPositioned:!1})))},[f]);const Y=w.useRef(!1);Uu(()=>(Y.current=!0,()=>{Y.current=!1}),[]),Uu(()=>{if(I&&(P.current=I),O&&($.current=O),I&&O){if(R.current)return R.current(I,O,W);W()}},[I,O,W,R,X]);const M=w.useMemo(()=>({reference:P,floating:$,setReference:_,setFloating:j}),[_,j]),G=w.useMemo(()=>({reference:I,floating:O}),[I,O]),ae=w.useMemo(()=>{const F={position:n,left:0,top:0};if(!G.floating)return F;const ee=Kv(G.floating,h.x),T=Kv(G.floating,h.y);return u?{...F,transform:"translate("+ee+"px, "+T+"px)",...yb(G.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ee,top:T}},[n,u,G.floating,h.x,h.y]);return w.useMemo(()=>({...h,update:W,refs:M,elements:G,floatingStyles:ae}),[h,W,M,G,ae])}const vb=(e,t)=>({...$N(e),options:[e,t]}),qN=(e,t)=>({...FN(e),options:[e,t]}),YN=(e,t)=>({...zN(e),options:[e,t]}),GN=(e,t)=>({...BN(e),options:[e,t]}),xb={...Xu},KN=xb.useInsertionEffect,JN=KN||(e=>e());function wb(e){const t=w.useRef(()=>{});return JN(()=>{t.current=e}),w.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var Gh=typeof document<"u"?w.useLayoutEffect:w.useEffect;let Jv=!1,QN=0;const Qv=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+QN++;function XN(){const[e,t]=w.useState(()=>Jv?Qv():void 0);return Gh(()=>{e==null&&t(Qv())},[]),w.useEffect(()=>{Jv=!0},[]),e}const ZN=xb.useId,eT=ZN||XN;function tT(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const nT=w.createContext(null),rT=w.createContext(null),iT=()=>{var e;return((e=w.useContext(nT))==null?void 0:e.id)||null},sT=()=>w.useContext(rT),oT="data-floating-ui-focusable";function aT(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=eT(),o=w.useRef({}),[l]=w.useState(()=>tT()),u=iT()!=null,[c,f]=w.useState(r.reference),h=wb((y,S,E)=>{o.current.openEvent=y?S:void 0,l.emit("openchange",{open:y,event:S,reason:E,nested:u}),n==null||n(y,S,E)}),p=w.useMemo(()=>({setPositionReference:f}),[]),v=w.useMemo(()=>({reference:c||r.reference||null,floating:r.floating||null,domReference:r.reference}),[c,r.reference,r.floating]);return w.useMemo(()=>({dataRef:o,open:t,onOpenChange:h,elements:v,events:l,floatingId:i,refs:p}),[t,h,v,l,i,p])}function lT(e){e===void 0&&(e={});const{nodeId:t}=e,n=aT({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[o,l]=w.useState(null),[u,c]=w.useState(null),h=(i==null?void 0:i.domReference)||o,p=w.useRef(null),v=sT();Gh(()=>{h&&(p.current=h)},[h]);const y=VN({...e,elements:{...i,...u&&{reference:u}}}),S=w.useCallback(j=>{const I=kn(j)?{getBoundingClientRect:()=>j.getBoundingClientRect(),contextElement:j}:j;c(I),y.refs.setReference(I)},[y.refs]),E=w.useCallback(j=>{(kn(j)||j===null)&&(p.current=j,l(j)),(kn(y.refs.reference.current)||y.refs.reference.current===null||j!==null&&!kn(j))&&y.refs.setReference(j)},[y.refs]),k=w.useMemo(()=>({...y.refs,setReference:E,setPositionReference:S,domReference:p}),[y.refs,E,S]),C=w.useMemo(()=>({...y.elements,domReference:h}),[y.elements,h]),_=w.useMemo(()=>({...y,...r,refs:k,elements:C,nodeId:t}),[y,k,C,t,r]);return Gh(()=>{r.dataRef.current.floatingContext=_;const j=v==null?void 0:v.nodesRef.current.find(I=>I.id===t);j&&(j.context=_)}),w.useMemo(()=>({...y,context:_,refs:k,elements:C}),[y,k,C,_])}const Xv="active",Zv="selected";function Kf(e,t,n){const r=new Map,i=n==="item";let o=e;if(i&&e){const{[Xv]:l,[Zv]:u,...c}=e;o=c}return{...n==="floating"&&{tabIndex:-1,[oT]:""},...o,...t.map(l=>{const u=l?l[n]:null;return typeof u=="function"?e?u(e):null:u}).concat(e).reduce((l,u)=>(u&&Object.entries(u).forEach(c=>{let[f,h]=c;if(!(i&&[Xv,Zv].includes(f)))if(f.indexOf("on")===0){if(r.has(f)||r.set(f,[]),typeof h=="function"){var p;(p=r.get(f))==null||p.push(h),l[f]=function(){for(var v,y=arguments.length,S=new Array(y),E=0;E<y;E++)S[E]=arguments[E];return(v=r.get(f))==null?void 0:v.map(k=>k(...S)).find(k=>k!==void 0)}}}else l[f]=h}),l),{})}}function uT(e){e===void 0&&(e=[]);const t=e.map(u=>u==null?void 0:u.reference),n=e.map(u=>u==null?void 0:u.floating),r=e.map(u=>u==null?void 0:u.item),i=w.useCallback(u=>Kf(u,e,"reference"),t),o=w.useCallback(u=>Kf(u,e,"floating"),n),l=w.useCallback(u=>Kf(u,e,"item"),r);return w.useMemo(()=>({getReferenceProps:i,getFloatingProps:o,getItemProps:l}),[i,o,l])}function ex(e,t){return{...e,rects:{...e.rects,floating:{...e.rects.floating,height:t}}}}const cT=e=>({name:"inner",options:e,async fn(t){const{listRef:n,overflowRef:r,onFallbackChange:i,offset:o=0,index:l=0,minItemsVisible:u=4,referenceOverflowThreshold:c=0,scrollRef:f,...h}=Lo(e,t),{rects:p,elements:{floating:v}}=t,y=n.current[l],S=(f==null?void 0:f.current)||v,E=v.clientTop||S.clientTop,k=v.clientTop!==0,C=S.clientTop!==0,_=v===S;if(!y)return{};const j={...t,...await vb(-y.offsetTop-v.clientTop-p.reference.height/2-y.offsetHeight/2-o).fn(t)},I=await Yf(ex(j,S.scrollHeight+E+v.clientTop),h),O=await Yf(j,{...h,elementContext:"reference"}),P=gn(0,I.top),$=j.y+P,R=(S.scrollHeight>S.clientHeight?D=>D:Xa)(gn(0,S.scrollHeight+(k&&_||C?E*2:0)-P-gn(0,I.bottom)));if(S.style.maxHeight=R+"px",S.scrollTop=P,i){const D=S.offsetHeight<y.offsetHeight*ws(u,n.current.length)-1||O.top>=-c||O.bottom>=-c;qn.flushSync(()=>i(D))}return r&&(r.current=await Yf(ex({...j,y:$},S.offsetHeight+E+v.clientTop),h)),{y:$}}});function dT(e,t){const{open:n,elements:r}=e,{enabled:i=!0,overflowRef:o,scrollRef:l,onChange:u}=t,c=wb(u),f=w.useRef(!1),h=w.useRef(null),p=w.useRef(null);w.useEffect(()=>{if(!i)return;function y(E){if(E.ctrlKey||!S||o.current==null)return;const k=E.deltaY,C=o.current.top>=-.5,_=o.current.bottom>=-.5,j=S.scrollHeight-S.clientHeight,I=k<0?-1:1,O=k<0?"max":"min";S.scrollHeight<=S.clientHeight||(!C&&k>0||!_&&k<0?(E.preventDefault(),qn.flushSync(()=>{c(P=>P+Math[O](k,j*I))})):/firefox/i.test(nN())&&(S.scrollTop+=k))}const S=(l==null?void 0:l.current)||r.floating;if(n&&S)return S.addEventListener("wheel",y),requestAnimationFrame(()=>{h.current=S.scrollTop,o.current!=null&&(p.current={...o.current})}),()=>{h.current=null,p.current=null,S.removeEventListener("wheel",y)}},[i,n,r.floating,o,l,c]);const v=w.useMemo(()=>({onKeyDown(){f.current=!0},onWheel(){f.current=!1},onPointerMove(){f.current=!1},onScroll(){const y=(l==null?void 0:l.current)||r.floating;if(!(!o.current||!y||!f.current)){if(h.current!==null){const S=y.scrollTop-h.current;(o.current.bottom<-.5&&S<-1||o.current.top<-.5&&S>1)&&qn.flushSync(()=>c(E=>E+S))}requestAnimationFrame(()=>{h.current=y.scrollTop})}}}),[r.floating,c,o,l]);return w.useMemo(()=>i?{floating:v}:{},[i,v])}let Do=w.createContext({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});Do.displayName="FloatingContext";let Vp=w.createContext(null);Vp.displayName="PlacementContext";function fT(e){return w.useMemo(()=>e?typeof e=="string"?{to:e}:e:null,[e])}function hT(){return w.useContext(Do).setReference}function pT(){return w.useContext(Do).getReferenceProps}function mT(){let{getFloatingProps:e,slot:t}=w.useContext(Do);return w.useCallback((...n)=>Object.assign({},e(...n),{"data-anchor":t.anchor}),[e,t])}function gT(e=null){e===!1&&(e=null),typeof e=="string"&&(e={to:e});let t=w.useContext(Vp),n=w.useMemo(()=>e,[JSON.stringify(e,(i,o)=>{var l;return(l=o==null?void 0:o.outerHTML)!=null?l:o})]);jt(()=>{t==null||t(n??null)},[t,n]);let r=w.useContext(Do);return w.useMemo(()=>[r.setFloating,e?r.styles:{}],[r.setFloating,e,r.styles])}let tx=4;function yT({children:e,enabled:t=!0}){let[n,r]=w.useState(null),[i,o]=w.useState(0),l=w.useRef(null),[u,c]=w.useState(null);vT(u);let f=t&&n!==null&&u!==null,{to:h="bottom",gap:p=0,offset:v=0,padding:y=0,inner:S}=xT(n,u),[E,k="center"]=h.split(" ");jt(()=>{f&&o(0)},[f]);let{refs:C,floatingStyles:_,context:j}=lT({open:f,placement:E==="selection"?k==="center"?"bottom":`bottom-${k}`:k==="center"?`${E}`:`${E}-${k}`,strategy:"absolute",transform:!1,middleware:[vb({mainAxis:E==="selection"?0:p,crossAxis:v}),qN({padding:y}),E!=="selection"&&YN({padding:y}),E==="selection"&&S?cT({...S,padding:y,overflowRef:l,offset:i,minItemsVisible:tx,referenceOverflowThreshold:y,onFallbackChange(D){var re,W;if(!D)return;let Y=j.elements.floating;if(!Y)return;let M=parseFloat(getComputedStyle(Y).scrollPaddingBottom)||0,G=Math.min(tx,Y.childElementCount),ae=0,F=0;for(let ee of(W=(re=j.elements.floating)==null?void 0:re.childNodes)!=null?W:[])if(Kn(ee)){let T=ee.offsetTop,B=T+ee.clientHeight+M,te=Y.scrollTop,A=te+Y.clientHeight;if(T>=te&&B<=A)G--;else{F=Math.max(0,Math.min(B,A)-Math.max(T,te)),ae=ee.clientHeight;break}}G>=1&&o(ee=>{let T=ae*G-F+M;return ee>=T?ee:T})}}):null,GN({padding:y,apply({availableWidth:D,availableHeight:re,elements:W}){Object.assign(W.floating.style,{overflow:"auto",maxWidth:`${D}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${re}px)`})}})].filter(Boolean),whileElementsMounted:DN}),[I=E,O=k]=j.placement.split("-");E==="selection"&&(I="selection");let P=w.useMemo(()=>({anchor:[I,O].filter(Boolean).join(" ")}),[I,O]),$=dT(j,{overflowRef:l,onChange:o}),{getReferenceProps:oe,getFloatingProps:X}=uT([$]),R=Ge(D=>{c(D),C.setFloating(D)});return w.createElement(Vp.Provider,{value:r},w.createElement(Do.Provider,{value:{setFloating:R,setReference:C.setReference,styles:_,getReferenceProps:oe,getFloatingProps:X,slot:P}},e))}function vT(e){jt(()=>{if(!e)return;let t=new MutationObserver(()=>{let n=window.getComputedStyle(e).maxHeight,r=parseFloat(n);if(isNaN(r))return;let i=parseInt(n);isNaN(i)||r!==i&&(e.style.maxHeight=`${Math.ceil(r)}px`)});return t.observe(e,{attributes:!0,attributeFilter:["style"]}),()=>{t.disconnect()}},[e])}function xT(e,t){var n,r,i;let o=Jf((n=e==null?void 0:e.gap)!=null?n:"var(--anchor-gap, 0)",t),l=Jf((r=e==null?void 0:e.offset)!=null?r:"var(--anchor-offset, 0)",t),u=Jf((i=e==null?void 0:e.padding)!=null?i:"var(--anchor-padding, 0)",t);return{...e,gap:o,offset:l,padding:u}}function Jf(e,t,n=void 0){let r=Cs(),i=Ge((c,f)=>{if(c==null)return[n,null];if(typeof c=="number")return[c,null];if(typeof c=="string"){if(!f)return[n,null];let h=nx(c,f);return[h,p=>{let v=bb(c);{let y=v.map(S=>window.getComputedStyle(f).getPropertyValue(S));r.requestAnimationFrame(function S(){r.nextFrame(S);let E=!1;for(let[C,_]of v.entries()){let j=window.getComputedStyle(f).getPropertyValue(_);if(y[C]!==j){y[C]=j,E=!0;break}}if(!E)return;let k=nx(c,f);h!==k&&(p(k),h=k)})}return r.dispose}]}return[n,null]}),o=w.useMemo(()=>i(e,t)[0],[e,t]),[l=o,u]=w.useState();return jt(()=>{let[c,f]=i(e,t);if(u(c),!!f)return f(u)},[e,t]),l}function bb(e){let t=/var\((.*)\)/.exec(e);if(t){let n=t[1].indexOf(",");if(n===-1)return[t[1]];let r=t[1].slice(0,n).trim(),i=t[1].slice(n+1).trim();return i?[r,...bb(i)]:[r]}return[]}function nx(e,t){let n=document.createElement("div");t.appendChild(n),n.style.setProperty("margin-top","0px","important"),n.style.setProperty("margin-top",e,"important");let r=parseFloat(window.getComputedStyle(n).marginTop)||0;return t.removeChild(n),r}let Oc=w.createContext(null);Oc.displayName="OpenClosedContext";var Sn=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Sn||{});function cl(){return w.useContext(Oc)}function kb({value:e,children:t}){return Re.createElement(Oc.Provider,{value:e},t)}function wT({children:e}){return Re.createElement(Oc.Provider,{value:null},e)}function bT(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Ai=[];bT(()=>{function e(t){if(!Mr(t.target)||t.target===document.body||Ai[0]===t.target)return;let n=t.target;n=n.closest(ic),Ai.unshift(n??t.target),Ai=Ai.filter(r=>r!=null&&r.isConnected),Ai.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function kT(e){throw new Error("Unexpected object: "+e)}var Ht=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(Ht||{});function Tu(e,t){let n=t.resolveItems();if(n.length<=0)return null;let r=t.resolveActiveIndex(),i=r??-1;switch(e.focus){case 0:{for(let o=0;o<n.length;++o)if(!t.resolveDisabled(n[o],o,n))return o;return r}case 1:{i===-1&&(i=n.length);for(let o=i-1;o>=0;--o)if(!t.resolveDisabled(n[o],o,n))return o;return r}case 2:{for(let o=i+1;o<n.length;++o)if(!t.resolveDisabled(n[o],o,n))return o;return r}case 3:{for(let o=n.length-1;o>=0;--o)if(!t.resolveDisabled(n[o],o,n))return o;return r}case 4:{for(let o=0;o<n.length;++o)if(t.resolveId(n[o],o,n)===e.id)return o;return r}case 5:return null;default:kT(e)}}function qp(e){let t=Ge(e),n=w.useRef(!1);w.useEffect(()=>(n.current=!1,()=>{n.current=!0,Cc(()=>{n.current&&t()})}),[t])}let Sb=w.createContext(!1);function ST(){return w.useContext(Sb)}function rx(e){return Re.createElement(Sb.Provider,{value:e.force},e.children)}function ET(e){let t=ST(),n=w.useContext(_b),[r,i]=w.useState(()=>{var o;if(!t&&n!==null)return(o=n.current)!=null?o:null;if(Lr.isServer)return null;let l=e==null?void 0:e.getElementById("headlessui-portal-root");if(l)return l;if(e===null)return null;let u=e.createElement("div");return u.setAttribute("id","headlessui-portal-root"),e.body.appendChild(u)});return w.useEffect(()=>{r!==null&&(e!=null&&e.body.contains(r)||e==null||e.body.appendChild(r))},[r,e]),w.useEffect(()=>{t||n!==null&&i(n.current)},[n,i,t]),r}let Eb=w.Fragment,_T=Ot(function(e,t){let{ownerDocument:n=null,...r}=e,i=w.useRef(null),o=En(JC(v=>{i.current=v}),t),l=Ja(i.current),u=n??l,c=ET(u),f=w.useContext(Kh),h=Cs(),p=qt();return qp(()=>{var v;c&&c.childNodes.length<=0&&((v=c.parentElement)==null||v.removeChild(c))}),c?qn.createPortal(Re.createElement("div",{"data-headlessui-portal":"",ref:v=>{h.dispose(),f&&v&&h.add(f.register(v))}},p({ourProps:{ref:o},theirProps:r,slot:{},defaultTag:Eb,name:"Portal"})),c):null});function CT(e,t){let n=En(t),{enabled:r=!0,ownerDocument:i,...o}=e,l=qt();return r?Re.createElement(_T,{...o,ownerDocument:i,ref:n}):l({ourProps:{ref:n},theirProps:o,slot:{},defaultTag:Eb,name:"Portal"})}let jT=w.Fragment,_b=w.createContext(null);function NT(e,t){let{target:n,...r}=e,i={ref:En(t)},o=qt();return Re.createElement(_b.Provider,{value:n},o({ourProps:i,theirProps:r,defaultTag:jT,name:"Popover.Group"}))}let Kh=w.createContext(null);function TT(){let e=w.useContext(Kh),t=w.useRef([]),n=Ge(o=>(t.current.push(o),e&&e.register(o),()=>r(o))),r=Ge(o=>{let l=t.current.indexOf(o);l!==-1&&t.current.splice(l,1),e&&e.unregister(o)}),i=w.useMemo(()=>({register:n,unregister:r,portals:t}),[n,r,t]);return[t,w.useMemo(()=>function({children:o}){return Re.createElement(Kh.Provider,{value:i},o)},[i])]}let IT=Ot(CT),Cb=Ot(NT),jb=Object.assign(IT,{Group:Cb});const Wu={Idle:{kind:"Idle"},Tracked:e=>({kind:"Tracked",position:e}),Moved:{kind:"Moved"}};function Nb(e){let t=e.getBoundingClientRect();return`${t.x},${t.y}`}function PT(e,t,n){let r=Mn();if(t.kind==="Tracked"){let i=function(){o!==Nb(e)&&(r.dispose(),n())},{position:o}=t,l=new ResizeObserver(i);l.observe(e),r.add(()=>l.disconnect()),r.addEventListener(window,"scroll",i,{passive:!0}),r.addEventListener(window,"resize",i)}return()=>r.dispose()}function AT(e,t=typeof document<"u"?document.defaultView:null,n){let r=al(e,"escape");nb(t,"keydown",i=>{r&&(i.defaultPrevented||i.key===tn.Escape&&n(i))})}function RT(){var e;let[t]=w.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,r]=w.useState((e=t==null?void 0:t.matches)!=null?e:!1);return jt(()=>{if(!t)return;function i(o){r(o.matches)}return t.addEventListener("change",i),()=>t.removeEventListener("change",i)},[t]),n}function OT({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let r=Ge(()=>{var i,o;let l=_s(n),u=[];for(let c of e)c!==null&&(ni(c)?u.push(c):"current"in c&&ni(c.current)&&u.push(c.current));if(t!=null&&t.current)for(let c of t.current)u.push(c);for(let c of(i=l==null?void 0:l.querySelectorAll("html > *, body > *"))!=null?i:[])c!==document.body&&c!==document.head&&ni(c)&&c.id!=="headlessui-portal-root"&&(n&&(c.contains(n)||c.contains((o=n==null?void 0:n.getRootNode())==null?void 0:o.host))||u.some(f=>c.contains(f))||u.push(c));return u});return{resolveContainers:r,contains:Ge(i=>r().some(o=>o.contains(i)))}}let Tb=w.createContext(null);function ix({children:e,node:t}){let[n,r]=w.useState(null),i=Ib(t??n);return Re.createElement(Tb.Provider,{value:i},e,i===null&&Re.createElement(Wh,{features:rc.Hidden,ref:o=>{var l,u;if(o){for(let c of(u=(l=_s(o))==null?void 0:l.querySelectorAll("html > *, body > *"))!=null?u:[])if(c!==document.body&&c!==document.head&&ni(c)&&c!=null&&c.contains(o)){r(c);break}}}}))}function Ib(e=null){var t;return(t=w.useContext(Tb))!=null?t:e}function MT(){let e=typeof document>"u";return"useSyncExternalStore"in Xu?(t=>t.useSyncExternalStore)(Xu)(()=>()=>{},()=>!1,()=>!e):!1}function Mc(){let e=MT(),[t,n]=w.useState(Lr.isHandoffComplete);return t&&Lr.isHandoffComplete===!1&&n(!1),w.useEffect(()=>{t!==!0&&n(!0)},[t]),w.useEffect(()=>Lr.handoff(),[]),e?!1:t}function Yp(){let e=w.useRef(!1);return jt(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var Pa=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Pa||{});function LT(){let e=w.useRef(0);return eb(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function Pb(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)ni(n.current)&&t.add(n.current);return t}let DT="div";var ds=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(ds||{});function $T(e,t){let n=w.useRef(null),r=En(n,t),{initialFocus:i,initialFocusFallback:o,containers:l,features:u=15,...c}=e;Mc()||(u=0);let f=Ja(n.current);UT(u,{ownerDocument:f});let h=WT(u,{ownerDocument:f,container:n,initialFocus:i,initialFocusFallback:o});HT(u,{ownerDocument:f,container:n,containers:l,previousActiveElement:h});let p=LT(),v=Ge(_=>{if(!Kn(n.current))return;let j=n.current;(I=>I())(()=>{Sr(p.current,{[Pa.Forwards]:()=>{wo(j,br.First,{skipElements:[_.relatedTarget,o]})},[Pa.Backwards]:()=>{wo(j,br.Last,{skipElements:[_.relatedTarget,o]})}})})}),y=al(!!(u&2),"focus-trap#tab-lock"),S=Cs(),E=w.useRef(!1),k={ref:r,onKeyDown(_){_.key=="Tab"&&(E.current=!0,S.requestAnimationFrame(()=>{E.current=!1}))},onBlur(_){if(!(u&4))return;let j=Pb(l);Kn(n.current)&&j.add(n.current);let I=_.relatedTarget;Mr(I)&&I.dataset.headlessuiFocusGuard!=="true"&&(Ab(j,I)||(E.current?wo(n.current,Sr(p.current,{[Pa.Forwards]:()=>br.Next,[Pa.Backwards]:()=>br.Previous})|br.WrapAround,{relativeTo:_.target}):Mr(_.target)&&Dr(_.target)))}},C=qt();return Re.createElement(Re.Fragment,null,y&&Re.createElement(Wh,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:v,features:rc.Focusable}),C({ourProps:k,theirProps:c,defaultTag:DT,name:"FocusTrap"}),y&&Re.createElement(Wh,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:v,features:rc.Focusable}))}let FT=Ot($T),zT=Object.assign(FT,{features:ds});function BT(e=!0){let t=w.useRef(Ai.slice());return Bp(([n],[r])=>{r===!0&&n===!1&&Cc(()=>{t.current.splice(0)}),r===!1&&n===!0&&(t.current=Ai.slice())},[e,Ai,t]),Ge(()=>{var n;return(n=t.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function UT(e,{ownerDocument:t}){let n=!!(e&8),r=BT(n);Bp(()=>{n||Iw(t==null?void 0:t.body)&&Dr(r())},[n]),qp(()=>{n&&Dr(r())})}function WT(e,{ownerDocument:t,container:n,initialFocus:r,initialFocusFallback:i}){let o=w.useRef(null),l=al(!!(e&1),"focus-trap#initial-focus"),u=Yp();return Bp(()=>{if(e===0)return;if(!l){i!=null&&i.current&&Dr(i.current);return}let c=n.current;c&&Cc(()=>{if(!u.current)return;let f=t==null?void 0:t.activeElement;if(r!=null&&r.current){if((r==null?void 0:r.current)===f){o.current=f;return}}else if(c.contains(f)){o.current=f;return}if(r!=null&&r.current)Dr(r.current);else{if(e&16){if(wo(c,br.First|br.AutoFocus)!==Vh.Error)return}else if(wo(c,br.First)!==Vh.Error)return;if(i!=null&&i.current&&(Dr(i.current),(t==null?void 0:t.activeElement)===i.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}o.current=t==null?void 0:t.activeElement})},[i,l,e]),o}function HT(e,{ownerDocument:t,container:n,containers:r,previousActiveElement:i}){let o=Yp(),l=!!(e&4);nb(t==null?void 0:t.defaultView,"focus",u=>{if(!l||!o.current)return;let c=Pb(r);Kn(n.current)&&c.add(n.current);let f=i.current;if(!f)return;let h=u.target;Kn(h)?Ab(c,h)?(i.current=h,Dr(h)):(u.preventDefault(),u.stopPropagation(),Dr(f)):Dr(i.current)},!0)}function Ab(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function Rb(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||!Ma((t=e.as)!=null?t:Mb)||Re.Children.count(e.children)===1}let Lc=w.createContext(null);Lc.displayName="TransitionContext";var VT=(e=>(e.Visible="visible",e.Hidden="hidden",e))(VT||{});function qT(){let e=w.useContext(Lc);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function YT(){let e=w.useContext(Dc);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let Dc=w.createContext(null);Dc.displayName="NestingContext";function $c(e){return"children"in e?$c(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function Ob(e,t){let n=js(e),r=w.useRef([]),i=Yp(),o=Cs(),l=Ge((y,S=Li.Hidden)=>{let E=r.current.findIndex(({el:k})=>k===y);E!==-1&&(Sr(S,{[Li.Unmount](){r.current.splice(E,1)},[Li.Hidden](){r.current[E].state="hidden"}}),o.microTask(()=>{var k;!$c(r)&&i.current&&((k=n.current)==null||k.call(n))}))}),u=Ge(y=>{let S=r.current.find(({el:E})=>E===y);return S?S.state!=="visible"&&(S.state="visible"):r.current.push({el:y,state:"visible"}),()=>l(y,Li.Unmount)}),c=w.useRef([]),f=w.useRef(Promise.resolve()),h=w.useRef({enter:[],leave:[]}),p=Ge((y,S,E)=>{c.current.splice(0),t&&(t.chains.current[S]=t.chains.current[S].filter(([k])=>k!==y)),t==null||t.chains.current[S].push([y,new Promise(k=>{c.current.push(k)})]),t==null||t.chains.current[S].push([y,new Promise(k=>{Promise.all(h.current[S].map(([C,_])=>_)).then(()=>k())})]),S==="enter"?f.current=f.current.then(()=>t==null?void 0:t.wait.current).then(()=>E(S)):E(S)}),v=Ge((y,S,E)=>{Promise.all(h.current[S].splice(0).map(([k,C])=>C)).then(()=>{var k;(k=c.current.shift())==null||k()}).then(()=>E(S))});return w.useMemo(()=>({children:r,register:u,unregister:l,onStart:p,onStop:v,wait:f,chains:h}),[u,l,r,p,v,h,f])}let Mb=w.Fragment,Lb=jo.RenderStrategy;function GT(e,t){var n,r;let{transition:i=!0,beforeEnter:o,afterEnter:l,beforeLeave:u,afterLeave:c,enter:f,enterFrom:h,enterTo:p,entered:v,leave:y,leaveFrom:S,leaveTo:E,...k}=e,[C,_]=w.useState(null),j=w.useRef(null),I=Rb(e),O=En(...I?[j,t,_]:t===null?[]:[t]),P=(n=k.unmount)==null||n?Li.Unmount:Li.Hidden,{show:$,appear:oe,initial:X}=qT(),[R,D]=w.useState($?"visible":"hidden"),re=YT(),{register:W,unregister:Y}=re;jt(()=>W(j),[W,j]),jt(()=>{if(P===Li.Hidden&&j.current){if($&&R!=="visible"){D("visible");return}return Sr(R,{hidden:()=>Y(j),visible:()=>W(j)})}},[R,j,W,Y,$,P]);let M=Mc();jt(()=>{if(I&&M&&R==="visible"&&j.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[j,R,M,I]);let G=X&&!oe,ae=oe&&$&&X,F=w.useRef(!1),ee=Ob(()=>{F.current||(D("hidden"),Y(j))},re),T=Ge(Ie=>{F.current=!0;let ve=Ie?"enter":"leave";ee.onStart(j,ve,Ae=>{Ae==="enter"?o==null||o():Ae==="leave"&&(u==null||u())})}),B=Ge(Ie=>{let ve=Ie?"enter":"leave";F.current=!1,ee.onStop(j,ve,Ae=>{Ae==="enter"?l==null||l():Ae==="leave"&&(c==null||c())}),ve==="leave"&&!$c(ee)&&(D("hidden"),Y(j))});w.useEffect(()=>{I&&i||(T($),B($))},[$,I,i]);let te=!(!i||!I||!M||G),[,A]=sb(te,C,$,{start:T,end:B}),pe=as({ref:O,className:((r=Uh(k.className,ae&&f,ae&&h,A.enter&&f,A.enter&&A.closed&&h,A.enter&&!A.closed&&p,A.leave&&y,A.leave&&!A.closed&&S,A.leave&&A.closed&&E,!A.transition&&$&&v))==null?void 0:r.trim())||void 0,...ib(A)}),fe=0;R==="visible"&&(fe|=Sn.Open),R==="hidden"&&(fe|=Sn.Closed),$&&R==="hidden"&&(fe|=Sn.Opening),!$&&R==="visible"&&(fe|=Sn.Closing);let ge=qt();return Re.createElement(Dc.Provider,{value:ee},Re.createElement(kb,{value:fe},ge({ourProps:pe,theirProps:k,defaultTag:Mb,features:Lb,visible:R==="visible",name:"Transition.Child"})))}function KT(e,t){let{show:n,appear:r=!1,unmount:i=!0,...o}=e,l=w.useRef(null),u=Rb(e),c=En(...u?[l,t]:t===null?[]:[t]);Mc();let f=cl();if(n===void 0&&f!==null&&(n=(f&Sn.Open)===Sn.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[h,p]=w.useState(n?"visible":"hidden"),v=Ob(()=>{n||p("hidden")}),[y,S]=w.useState(!0),E=w.useRef([n]);jt(()=>{y!==!1&&E.current[E.current.length-1]!==n&&(E.current.push(n),S(!1))},[E,n]);let k=w.useMemo(()=>({show:n,appear:r,initial:y}),[n,r,y]);jt(()=>{n?p("visible"):!$c(v)&&l.current!==null&&p("hidden")},[n,v]);let C={unmount:i},_=Ge(()=>{var O;y&&S(!1),(O=e.beforeEnter)==null||O.call(e)}),j=Ge(()=>{var O;y&&S(!1),(O=e.beforeLeave)==null||O.call(e)}),I=qt();return Re.createElement(Dc.Provider,{value:v},Re.createElement(Lc.Provider,{value:k},I({ourProps:{...C,as:w.Fragment,children:Re.createElement(Db,{ref:c,...C,...o,beforeEnter:_,beforeLeave:j})},theirProps:{},defaultTag:w.Fragment,features:Lb,visible:h==="visible",name:"Transition"})))}function JT(e,t){let n=w.useContext(Lc)!==null,r=cl()!==null;return Re.createElement(Re.Fragment,null,!n&&r?Re.createElement(Jh,{ref:t,...e}):Re.createElement(Db,{ref:t,...e}))}let Jh=Ot(KT),Db=Ot(GT),Gp=Ot(JT),$b=Object.assign(Jh,{Child:Gp,Root:Jh});var QT=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(QT||{}),XT=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(XT||{});let ZT={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},Kp=w.createContext(null);Kp.displayName="DialogContext";function Fc(e){let t=w.useContext(Kp);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Fc),n}return t}function eI(e,t){return Sr(t.type,ZT,e,t)}let sx=Ot(function(e,t){let n=w.useId(),{id:r=`headlessui-dialog-${n}`,open:i,onClose:o,initialFocus:l,role:u="dialog",autoFocus:c=!0,__demoMode:f=!1,unmount:h=!1,...p}=e,v=w.useRef(!1);u=(function(){return u==="dialog"||u==="alertdialog"?u:(v.current||(v.current=!0,console.warn(`Invalid role [${u}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")})();let y=cl();i===void 0&&y!==null&&(i=(y&Sn.Open)===Sn.Open);let S=w.useRef(null),E=En(S,t),k=Ja(S.current),C=i?0:1,[_,j]=w.useReducer(eI,{titleId:null,descriptionId:null,panelRef:w.createRef()}),I=Ge(()=>o(!1)),O=Ge(A=>j({type:0,id:A})),P=Mc()?C===0:!1,[$,oe]=TT(),X={get current(){var A;return(A=_.panelRef.current)!=null?A:S.current}},R=Ib(),{resolveContainers:D}=OT({mainTreeNode:R,portals:$,defaultContainers:[X]}),re=y!==null?(y&Sn.Closing)===Sn.Closing:!1;Gw(f||re?!1:P,{allowed:Ge(()=>{var A,pe;return[(pe=(A=S.current)==null?void 0:A.closest("[data-headlessui-portal]"))!=null?pe:null]}),disallowed:Ge(()=>{var A;return[(A=R==null?void 0:R.closest("body > *:not(#headlessui-portal-root)"))!=null?A:null]})});let W=Nc.get(null);jt(()=>{if(P)return W.actions.push(r),()=>W.actions.pop(r)},[W,r,P]);let Y=lr(W,w.useCallback(A=>W.selectors.isTop(A,r),[W,r]));tb(Y,D,A=>{A.preventDefault(),I()}),AT(Y,k==null?void 0:k.defaultView,A=>{A.preventDefault(),A.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),I()}),rb(f||re?!1:P,k,D),Kw(P,S,I);let[M,G]=Fw(),ae=w.useMemo(()=>[{dialogState:C,close:I,setTitleId:O,unmount:h},_],[C,I,O,h,_]),F=Br({open:C===0}),ee={ref:E,id:r,role:u,tabIndex:-1,"aria-modal":f?void 0:C===0?!0:void 0,"aria-labelledby":_.titleId,"aria-describedby":M,unmount:h},T=!RT(),B=ds.None;P&&!f&&(B|=ds.RestoreFocus,B|=ds.TabLock,c&&(B|=ds.AutoFocus),T&&(B|=ds.InitialFocus));let te=qt();return Re.createElement(wT,null,Re.createElement(rx,{force:!0},Re.createElement(jb,null,Re.createElement(Kp.Provider,{value:ae},Re.createElement(Cb,{target:S},Re.createElement(rx,{force:!1},Re.createElement(G,{slot:F},Re.createElement(oe,null,Re.createElement(zT,{initialFocus:l,initialFocusFallback:S,containers:D,features:B},Re.createElement(oj,{value:I},te({ourProps:ee,theirProps:p,slot:F,defaultTag:tI,features:nI,visible:C===0,name:"Dialog"})))))))))))}),tI="div",nI=jo.RenderStrategy|jo.Static;function rI(e,t){let{transition:n=!1,open:r,...i}=e,o=cl(),l=e.hasOwnProperty("open")||o!==null,u=e.hasOwnProperty("onClose");if(!l&&!u)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!l)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!u)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!o&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(r!==void 0||n)&&!i.static?Re.createElement(ix,null,Re.createElement($b,{show:r,transition:n,unmount:i.unmount},Re.createElement(sx,{ref:t,...i}))):Re.createElement(ix,null,Re.createElement(sx,{ref:t,open:r,...i}))}let iI="div";function sI(e,t){let n=w.useId(),{id:r=`headlessui-dialog-panel-${n}`,transition:i=!1,...o}=e,[{dialogState:l,unmount:u},c]=Fc("Dialog.Panel"),f=En(t,c.panelRef),h=Br({open:l===0}),p=Ge(k=>{k.stopPropagation()}),v={ref:f,id:r,onClick:p},y=i?Gp:w.Fragment,S=i?{unmount:u}:{},E=qt();return Re.createElement(y,{...S},E({ourProps:v,theirProps:o,slot:h,defaultTag:iI,name:"Dialog.Panel"}))}let oI="div";function aI(e,t){let{transition:n=!1,...r}=e,[{dialogState:i,unmount:o}]=Fc("Dialog.Backdrop"),l=Br({open:i===0}),u={ref:t,"aria-hidden":!0},c=n?Gp:w.Fragment,f=n?{unmount:o}:{},h=qt();return Re.createElement(c,{...f},h({ourProps:u,theirProps:r,slot:l,defaultTag:oI,name:"Dialog.Backdrop"}))}let lI="h2";function uI(e,t){let n=w.useId(),{id:r=`headlessui-dialog-title-${n}`,...i}=e,[{dialogState:o,setTitleId:l}]=Fc("Dialog.Title"),u=En(t);w.useEffect(()=>(l(r),()=>l(null)),[r,l]);let c=Br({open:o===0}),f={ref:u,id:r};return qt()({ourProps:f,theirProps:i,slot:c,defaultTag:lI,name:"Dialog.Title"})}let cI=Ot(rI),dI=Ot(sI);Ot(aI);let fI=Ot(uI),ox=Object.assign(cI,{Panel:dI,Title:fI,Description:ej}),ax=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function lx(e){var t,n;let r=(t=e.innerText)!=null?t:"",i=e.cloneNode(!0);if(!Kn(i))return r;let o=!1;for(let u of i.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))u.remove(),o=!0;let l=o?(n=i.innerText)!=null?n:"":r;return ax.test(l)&&(l=l.replace(ax,"")),l}function hI(e){let t=e.getAttribute("aria-label");if(typeof t=="string")return t.trim();let n=e.getAttribute("aria-labelledby");if(n){let r=n.split(" ").map(i=>{let o=document.getElementById(i);if(o){let l=o.getAttribute("aria-label");return typeof l=="string"?l.trim():lx(o).trim()}return null}).filter(Boolean);if(r.length>0)return r.join(", ")}return lx(e).trim()}function pI(e){let t=w.useRef(""),n=w.useRef("");return Ge(()=>{let r=e.current;if(!r)return"";let i=r.innerText;if(t.current===i)return n.current;let o=hI(r).trim().toLowerCase();return t.current=i,n.current=o,o})}var mI=Object.defineProperty,gI=(e,t,n)=>t in e?mI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ux=(e,t,n)=>(gI(e,typeof t!="symbol"?t+"":t,n),n),mn=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(mn||{}),lc=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(lc||{}),xt=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItems=5]="RegisterItems",e[e.UnregisterItems=6]="UnregisterItems",e[e.SetButtonElement=7]="SetButtonElement",e[e.SetItemsElement=8]="SetItemsElement",e[e.SortItems=9]="SortItems",e[e.MarkButtonAsMoved=10]="MarkButtonAsMoved",e))(xt||{});function cx(e,t=n=>n){let n=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,r=Xw(t(e.items.slice()),o=>o.dataRef.current.domRef.current),i=n?r.indexOf(n):null;return i===-1&&(i=null),{items:r,activeItemIndex:i}}let yI={1(e){if(e.menuState===1)return e;let t=e.buttonElement?Wu.Tracked(Nb(e.buttonElement)):e.buttonPositionState;return{...e,activeItemIndex:null,pendingFocus:{focus:Ht.Nothing},menuState:1,buttonPositionState:t}},0(e,t){return e.menuState===0?e:{...e,__demoMode:!1,pendingFocus:t.focus,menuState:0,buttonPositionState:Wu.Idle}},2:(e,t)=>{var n,r,i,o,l;if(e.menuState===1)return e;let u={...e,searchQuery:"",activationTrigger:(n=t.trigger)!=null?n:1,__demoMode:!1};if(t.focus===Ht.Nothing)return{...u,activeItemIndex:null};if(t.focus===Ht.Specific)return{...u,activeItemIndex:e.items.findIndex(h=>h.id===t.id)};if(t.focus===Ht.Previous){let h=e.activeItemIndex;if(h!==null){let p=e.items[h].dataRef.current.domRef,v=Tu(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:y=>y.id,resolveDisabled:y=>y.dataRef.current.disabled});if(v!==null){let y=e.items[v].dataRef.current.domRef;if(((r=p.current)==null?void 0:r.previousElementSibling)===y.current||((i=y.current)==null?void 0:i.previousElementSibling)===null)return{...u,activeItemIndex:v}}}}else if(t.focus===Ht.Next){let h=e.activeItemIndex;if(h!==null){let p=e.items[h].dataRef.current.domRef,v=Tu(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:y=>y.id,resolveDisabled:y=>y.dataRef.current.disabled});if(v!==null){let y=e.items[v].dataRef.current.domRef;if(((o=p.current)==null?void 0:o.nextElementSibling)===y.current||((l=y.current)==null?void 0:l.nextElementSibling)===null)return{...u,activeItemIndex:v}}}}let c=cx(e),f=Tu(t,{resolveItems:()=>c.items,resolveActiveIndex:()=>c.activeItemIndex,resolveId:h=>h.id,resolveDisabled:h=>h.dataRef.current.disabled});return{...u,...c,activeItemIndex:f}},3:(e,t)=>{let n=e.searchQuery!==""?0:1,r=e.searchQuery+t.value.toLowerCase(),i=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+n).concat(e.items.slice(0,e.activeItemIndex+n)):e.items).find(l=>{var u;return((u=l.dataRef.current.textValue)==null?void 0:u.startsWith(r))&&!l.dataRef.current.disabled}),o=i?e.items.indexOf(i):-1;return o===-1||o===e.activeItemIndex?{...e,searchQuery:r}:{...e,searchQuery:r,activeItemIndex:o,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,t)=>{let n=e.items.concat(t.items.map(i=>i)),r=e.activeItemIndex;return e.pendingFocus.focus!==Ht.Nothing&&(r=Tu(e.pendingFocus,{resolveItems:()=>n,resolveActiveIndex:()=>e.activeItemIndex,resolveId:i=>i.id,resolveDisabled:i=>i.dataRef.current.disabled})),{...e,items:n,activeItemIndex:r,pendingFocus:{focus:Ht.Nothing},pendingShouldSort:!0}},6:(e,t)=>{let n=e.items,r=[],i=new Set(t.items);for(let[o,l]of n.entries())if(i.has(l.id)&&(r.push(o),i.delete(l.id),i.size===0))break;if(r.length>0){n=n.slice();for(let o of r.reverse())n.splice(o,1)}return{...e,items:n,activationTrigger:1}},7:(e,t)=>e.buttonElement===t.element?e:{...e,buttonElement:t.element},8:(e,t)=>e.itemsElement===t.element?e:{...e,itemsElement:t.element},9:e=>e.pendingShouldSort?{...e,...cx(e),pendingShouldSort:!1}:e,10(e){return e.buttonPositionState.kind!=="Tracked"?e:{...e,buttonPositionState:Wu.Moved}}};class Jp extends Hw{constructor(t){super(t),ux(this,"actions",{registerItem:Nv(()=>{let n=[],r=new Set;return[(i,o)=>{r.has(o)||(r.add(o),n.push({id:i,dataRef:o}))},()=>(r.clear(),this.send({type:5,items:n.splice(0)}))]}),unregisterItem:Nv(()=>{let n=[];return[r=>n.push(r),()=>this.send({type:6,items:n.splice(0)})]})}),ux(this,"selectors",{activeDescendantId(n){var r;let i=n.activeItemIndex,o=n.items;return i===null||(r=o[i])==null?void 0:r.id},isActive(n,r){var i;let o=n.activeItemIndex,l=n.items;return o!==null?((i=l[o])==null?void 0:i.id)===r:!1},shouldScrollIntoView(n,r){return n.__demoMode||n.menuState!==0||n.activationTrigger===0?!1:this.isActive(n,r)},didButtonMove(n){return n.buttonPositionState.kind==="Moved"}}),this.on(5,()=>{this.disposables.requestAnimationFrame(()=>{this.send({type:9})})});{let n=this.state.id,r=Nc.get(null);this.disposables.add(r.on(qw.Push,i=>{!r.selectors.isTop(i,n)&&this.state.menuState===0&&this.send({type:1})})),this.on(0,()=>r.actions.push(n)),this.on(1,()=>r.actions.pop(n))}this.disposables.group(n=>{this.on(1,r=>{r.buttonElement&&(n.dispose(),n.add(PT(r.buttonElement,r.buttonPositionState,()=>{this.send({type:10})})))})})}static new({id:t,__demoMode:n=!1}){return new Jp({id:t,__demoMode:n,menuState:n?0:1,buttonElement:null,itemsElement:null,items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1,pendingShouldSort:!1,pendingFocus:{focus:Ht.Nothing},buttonPositionState:Wu.Idle})}reduce(t,n){return Sr(n.type,yI,t,n)}}const Fb=w.createContext(null);function Qp(e){let t=w.useContext(Fb);if(t===null){let n=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,zb),n}return t}function zb({id:e,__demoMode:t=!1}){let n=w.useMemo(()=>Jp.new({id:e,__demoMode:t}),[]);return qp(()=>n.dispose()),n}let vI=w.Fragment;function xI(e,t){let n=w.useId(),{__demoMode:r=!1,...i}=e,o=zb({id:n,__demoMode:r}),[l,u,c]=lr(o,k=>[k.menuState,k.itemsElement,k.buttonElement]),f=En(t),h=Nc.get(null),p=lr(h,w.useCallback(k=>h.selectors.isTop(k,n),[h,n]));tb(p,[c,u],(k,C)=>{var _;o.send({type:xt.CloseMenu}),zp(C,Fp.Loose)||(k.preventDefault(),(_=o.state.buttonElement)==null||_.focus())});let v=Ge(()=>{o.send({type:xt.CloseMenu})}),y=Br({open:l===mn.Open,close:v}),S={ref:f},E=qt();return Re.createElement(yT,null,Re.createElement(Fb.Provider,{value:o},Re.createElement(kb,{value:Sr(l,{[mn.Open]:Sn.Open,[mn.Closed]:Sn.Closed})},E({ourProps:S,theirProps:i,slot:y,defaultTag:vI,name:"Menu"}))))}let wI="button";function bI(e,t){let n=Qp("Menu.Button"),r=w.useId(),{id:i=`headlessui-menu-button-${r}`,disabled:o=!1,autoFocus:l=!1,...u}=e,c=w.useRef(null),f=pT(),h=En(t,c,hT(),Ge(R=>n.send({type:xt.SetButtonElement,element:R}))),p=Ge(R=>{switch(R.key){case tn.Space:case tn.Enter:case tn.ArrowDown:R.preventDefault(),R.stopPropagation(),n.send({type:xt.OpenMenu,focus:{focus:Ht.First}});break;case tn.ArrowUp:R.preventDefault(),R.stopPropagation(),n.send({type:xt.OpenMenu,focus:{focus:Ht.Last}});break}}),v=Ge(R=>{switch(R.key){case tn.Space:R.preventDefault();break}}),[y,S,E]=lr(n,R=>[R.menuState,R.buttonElement,R.itemsElement]),k=y===mn.Open;Ij(k,{trigger:S,action:w.useCallback(R=>{if(S!=null&&S.contains(R.target))return ju.Ignore;let D=R.target.closest('[role="menuitem"]:not([data-disabled])');return Kn(D)?ju.Select(D):E!=null&&E.contains(R.target)?ju.Ignore:ju.Close},[S,E]),close:w.useCallback(()=>n.send({type:xt.CloseMenu}),[]),select:w.useCallback(R=>R.click(),[])});let C=lj(R=>{var D;o||(y===mn.Open?(qn.flushSync(()=>n.send({type:xt.CloseMenu})),(D=c.current)==null||D.focus({preventScroll:!0})):(R.preventDefault(),n.send({type:xt.OpenMenu,focus:{focus:Ht.Nothing},trigger:lc.Pointer})))}),{isFocusVisible:_,focusProps:j}=NC({autoFocus:l}),{isHovered:I,hoverProps:O}=jC({isDisabled:o}),{pressed:P,pressProps:$}=OC({disabled:o}),oe=Br({open:y===mn.Open,active:P||y===mn.Open,disabled:o,hover:I,focus:_,autofocus:l}),X=Rw(f(),{ref:h,id:i,type:Pj(e,c.current),"aria-haspopup":"menu","aria-controls":E==null?void 0:E.id,"aria-expanded":y===mn.Open,disabled:o||void 0,autoFocus:l,onKeyDown:p,onKeyUp:v},C,j,O,$);return qt()({ourProps:X,theirProps:u,slot:oe,defaultTag:wI,name:"Menu.Button"})}let kI="div",SI=jo.RenderStrategy|jo.Static;function EI(e,t){let n=w.useId(),{id:r=`headlessui-menu-items-${n}`,anchor:i,portal:o=!1,modal:l=!0,transition:u=!1,...c}=e,f=fT(i),h=Qp("Menu.Items"),[p,v]=gT(f),y=mT(),[S,E]=w.useState(null),k=En(t,f?p:null,Ge(F=>h.send({type:xt.SetItemsElement,element:F})),E),[C,_]=lr(h,F=>[F.menuState,F.buttonElement]),j=Ja(_),I=Ja(S);f&&(o=!0);let O=cl(),[P,$]=sb(u,S,O!==null?(O&Sn.Open)===Sn.Open:C===mn.Open);Kw(P,_,()=>{h.send({type:xt.CloseMenu})});let oe=lr(h,F=>F.__demoMode),X=oe?!1:l&&C===mn.Open;rb(X,I);let R=oe?!1:l&&C===mn.Open;Gw(R,{allowed:w.useCallback(()=>[_,S],[_,S])});let D=lr(h,h.selectors.didButtonMove)?!1:P;w.useEffect(()=>{let F=S;F&&C===mn.Open&&(Iw(F)||F.focus({preventScroll:!0}))},[C,S]),qj(C===mn.Open,{container:S,accept(F){return F.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:F.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(F){F.setAttribute("role","none")}});let re=Cs(),W=Ge(F=>{var ee,T,B;switch(re.dispose(),F.key){case tn.Space:if(h.state.searchQuery!=="")return F.preventDefault(),F.stopPropagation(),h.send({type:xt.Search,value:F.key});case tn.Enter:if(F.preventDefault(),F.stopPropagation(),h.state.activeItemIndex!==null){let{dataRef:te}=h.state.items[h.state.activeItemIndex];(T=(ee=te.current)==null?void 0:ee.domRef.current)==null||T.click()}h.send({type:xt.CloseMenu}),Qw(h.state.buttonElement);break;case tn.ArrowDown:return F.preventDefault(),F.stopPropagation(),h.send({type:xt.GoToItem,focus:Ht.Next});case tn.ArrowUp:return F.preventDefault(),F.stopPropagation(),h.send({type:xt.GoToItem,focus:Ht.Previous});case tn.Home:case tn.PageUp:return F.preventDefault(),F.stopPropagation(),h.send({type:xt.GoToItem,focus:Ht.First});case tn.End:case tn.PageDown:return F.preventDefault(),F.stopPropagation(),h.send({type:xt.GoToItem,focus:Ht.Last});case tn.Escape:F.preventDefault(),F.stopPropagation(),qn.flushSync(()=>h.send({type:xt.CloseMenu})),(B=h.state.buttonElement)==null||B.focus({preventScroll:!0});break;case tn.Tab:F.preventDefault(),F.stopPropagation(),qn.flushSync(()=>h.send({type:xt.CloseMenu})),Cj(h.state.buttonElement,F.shiftKey?br.Previous:br.Next);break;default:F.key.length===1&&(h.send({type:xt.Search,value:F.key}),re.setTimeout(()=>h.send({type:xt.ClearSearch}),350));break}}),Y=Ge(F=>{switch(F.key){case tn.Space:F.preventDefault();break}}),M=Br({open:C===mn.Open}),G=Rw(f?y():{},{"aria-activedescendant":lr(h,h.selectors.activeDescendantId),"aria-labelledby":lr(h,F=>{var ee;return(ee=F.buttonElement)==null?void 0:ee.id}),id:r,onKeyDown:W,onKeyUp:Y,role:"menu",tabIndex:C===mn.Open?0:void 0,ref:k,style:{...c.style,...v,"--button-width":aj(P,_,!0).width},...ib($)}),ae=qt();return Re.createElement(jb,{enabled:o?e.static||P:!1,ownerDocument:j},ae({ourProps:G,theirProps:c,slot:M,defaultTag:kI,features:SI,visible:D,name:"Menu.Items"}))}let _I=w.Fragment;function CI(e,t){let n=w.useId(),{id:r=`headlessui-menu-item-${n}`,disabled:i=!1,...o}=e,l=Qp("Menu.Item"),u=lr(l,D=>l.selectors.isActive(D,r)),c=w.useRef(null),f=En(t,c),h=lr(l,D=>l.selectors.shouldScrollIntoView(D,r));jt(()=>{if(h)return Mn().requestAnimationFrame(()=>{var D,re;(re=(D=c.current)==null?void 0:D.scrollIntoView)==null||re.call(D,{block:"nearest"})})},[h,c]);let p=pI(c),v=w.useRef({disabled:i,domRef:c,get textValue(){return p()}});jt(()=>{v.current.disabled=i},[v,i]),jt(()=>(l.actions.registerItem(r,v),()=>l.actions.unregisterItem(r)),[v,r]);let y=Ge(()=>{l.send({type:xt.CloseMenu})}),S=Ge(D=>{if(i)return D.preventDefault();l.send({type:xt.CloseMenu}),Qw(l.state.buttonElement)}),E=Ge(()=>{if(i)return l.send({type:xt.GoToItem,focus:Ht.Nothing});l.send({type:xt.GoToItem,focus:Ht.Specific,id:r})}),k=$j(),C=Ge(D=>k.update(D)),_=Ge(D=>{k.wasMoved(D)&&(i||u||l.send({type:xt.GoToItem,focus:Ht.Specific,id:r,trigger:lc.Pointer}))}),j=Ge(D=>{k.wasMoved(D)&&(i||u&&l.state.activationTrigger===lc.Pointer&&l.send({type:xt.GoToItem,focus:Ht.Nothing}))}),[I,O]=zw(),[P,$]=Fw(),oe=Br({active:u,focus:u,disabled:i,close:y}),X={id:r,ref:f,role:"menuitem",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,"aria-labelledby":I,"aria-describedby":P,disabled:void 0,onClick:S,onFocus:E,onPointerEnter:C,onMouseEnter:C,onPointerMove:_,onMouseMove:_,onPointerLeave:j,onMouseLeave:j},R=qt();return Re.createElement(O,null,Re.createElement($,null,R({ourProps:X,theirProps:o,slot:oe,defaultTag:_I,name:"Menu.Item"})))}let jI="div";function NI(e,t){let[n,r]=zw(),i=e,o={ref:t,"aria-labelledby":n,role:"group"},l=qt();return Re.createElement(r,null,l({ourProps:o,theirProps:i,slot:{},defaultTag:jI,name:"Menu.Section"}))}let TI="header";function II(e,t){let n=w.useId(),{id:r=`headlessui-menu-heading-${n}`,...i}=e,o=$p();jt(()=>o.register(r),[r,o.register]);let l={id:r,ref:t,role:"presentation",...o.props};return qt()({ourProps:l,theirProps:i,slot:{},defaultTag:TI,name:"Menu.Heading"})}let PI="div";function AI(e,t){let n=e,r={ref:t,role:"separator"};return qt()({ourProps:r,theirProps:n,slot:{},defaultTag:PI,name:"Menu.Separator"})}let RI=Ot(xI),OI=Ot(bI),MI=Ot(EI),LI=Ot(CI),DI=Ot(NI),$I=Ot(II),FI=Ot(AI),ir=Object.assign(RI,{Button:OI,Items:MI,Item:LI,Section:DI,Heading:$I,Separator:FI});const Bb=w.createContext(void 0);function Ns(){const e=w.useContext(Bb);if(!e)throw new Error("useAuth debe usarse dentro de un AuthProvider");return e}const zI="modulepreload",BI=function(e){return"/sport-planner/"+e},dx={},dl=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let l=function(f){return Promise.all(f.map(h=>Promise.resolve(h).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),c=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));i=l(n.map(f=>{if(f=BI(f),f in dx)return;dx[f]=!0;const h=f.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${p}`))return;const v=document.createElement("link");if(v.rel=h?"stylesheet":zI,h||(v.as="script"),v.crossOrigin="",v.href=f,c&&v.setAttribute("nonce",c),document.head.appendChild(v),h)return new Promise((y,S)=>{v.addEventListener("load",y),v.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return i.then(l=>{for(const u of l||[])u.status==="rejected"&&o(u.reason);return t().catch(o)})},UI=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>dl(async()=>{const{default:r}=await Promise.resolve().then(()=>$o);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class Xp extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class fx extends Xp{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class hx extends Xp{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class px extends Xp{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Qh;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Qh||(Qh={}));var WI=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};class HI{constructor(t,{headers:n={},customFetch:r,region:i=Qh.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=UI(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return WI(this,arguments,void 0,function*(n,r={}){var i;try{const{headers:o,method:l,body:u,signal:c}=r;let f={},{region:h}=r;h||(h=this.region);const p=new URL(`${this.url}/${n}`);h&&h!=="any"&&(f["x-region"]=h,p.searchParams.set("forceFunctionRegion",h));let v;u&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",v=u):typeof u=="string"?(f["Content-Type"]="text/plain",v=u):typeof FormData<"u"&&u instanceof FormData?v=u:(f["Content-Type"]="application/json",v=JSON.stringify(u)));const y=yield this.fetch(p.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),o),body:v,signal:c}).catch(C=>{throw C.name==="AbortError"?C:new fx(C)}),S=y.headers.get("x-relay-error");if(S&&S==="true")throw new hx(y);if(!y.ok)throw new px(y);let E=((i=y.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),k;return E==="application/json"?k=yield y.json():E==="application/octet-stream"?k=yield y.blob():E==="text/event-stream"?k=y:E==="multipart/form-data"?k=yield y.formData():k=yield y.text(),{data:k,error:null,response:y}}catch(o){return o instanceof Error&&o.name==="AbortError"?{data:null,error:new fx(o)}:{data:null,error:o,response:o instanceof px||o instanceof hx?o.context:void 0}}})}}var en={},Zs={},eo={},to={},no={},ro={},VI=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},To=VI();const qI=To.fetch,Ub=To.fetch.bind(To),Wb=To.Headers,YI=To.Request,GI=To.Response,$o=Object.freeze(Object.defineProperty({__proto__:null,Headers:Wb,Request:YI,Response:GI,default:Ub,fetch:qI},Symbol.toStringTag,{value:"Module"})),KI=HE($o);var Iu={},mx;function Hb(){if(mx)return Iu;mx=1,Object.defineProperty(Iu,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Iu.default=e,Iu}var gx;function Vb(){if(gx)return ro;gx=1;var e=ro&&ro.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ro,"__esModule",{value:!0});const t=e(KI),n=e(Hb());class r{constructor(o){var l,u;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(l=o.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=o.signal,this.isMaybeSingle=(u=o.isMaybeSingle)!==null&&u!==void 0?u:!1,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,l){return this.headers=new Headers(this.headers),this.headers.set(o,l),this}then(o,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let c=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var h,p,v,y;let S=null,E=null,k=null,C=f.status,_=f.statusText;if(f.ok){if(this.method!=="HEAD"){const P=await f.text();P===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((h=this.headers.get("Accept"))===null||h===void 0)&&h.includes("application/vnd.pgrst.plan+text"))?E=P:E=JSON.parse(P))}const I=(p=this.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),O=(v=f.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");I&&O&&O.length>1&&(k=parseInt(O[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(E)&&(E.length>1?(S={code:"PGRST116",details:`Results contain ${E.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},E=null,k=null,C=406,_="Not Acceptable"):E.length===1?E=E[0]:E=null)}else{const I=await f.text();try{S=JSON.parse(I),Array.isArray(S)&&f.status===404&&(E=[],S=null,C=200,_="OK")}catch{f.status===404&&I===""?(C=204,_="No Content"):S={message:I}}if(S&&this.isMaybeSingle&&(!((y=S==null?void 0:S.details)===null||y===void 0)&&y.includes("0 rows"))&&(S=null,C=200,_="OK"),S&&this.shouldThrowOnError)throw new n.default(S)}return{error:S,data:E,count:k,status:C,statusText:_}});return this.shouldThrowOnError||(c=c.catch(f=>{var h,p,v;return{error:{message:`${(h=f==null?void 0:f.name)!==null&&h!==void 0?h:"FetchError"}: ${f==null?void 0:f.message}`,details:`${(p=f==null?void 0:f.stack)!==null&&p!==void 0?p:""}`,hint:"",code:`${(v=f==null?void 0:f.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),c.then(o,l)}returns(){return this}overrideTypes(){return this}}return ro.default=r,ro}var yx;function qb(){if(yx)return no;yx=1;var e=no&&no.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(no,"__esModule",{value:!0});const t=e(Vb());class n extends t.default{select(i){let o=!1;const l=(i??"*").split("").map(u=>/\s/.test(u)&&!o?"":(u==='"'&&(o=!o),u)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:o=!0,nullsFirst:l,foreignTable:u,referencedTable:c=u}={}){const f=c?`${c}.order`:"order",h=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${h?`${h},`:""}${i}.${o?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:o,referencedTable:l=o}={}){const u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${i}`),this}range(i,o,{foreignTable:l,referencedTable:u=l}={}){const c=typeof u>"u"?"offset":`${u}.offset`,f=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(c,`${i}`),this.url.searchParams.set(f,`${o-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:o=!1,settings:l=!1,buffers:u=!1,wal:c=!1,format:f="text"}={}){var h;const p=[i?"analyze":null,o?"verbose":null,l?"settings":null,u?"buffers":null,c?"wal":null].filter(Boolean).join("|"),v=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${f}; for="${v}"; options=${p};`),f==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return no.default=n,no}var vx;function Zp(){if(vx)return to;vx=1;var e=to&&to.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(to,"__esModule",{value:!0});const t=e(qb());class n extends t.default{eq(i,o){return this.url.searchParams.append(i,`eq.${o}`),this}neq(i,o){return this.url.searchParams.append(i,`neq.${o}`),this}gt(i,o){return this.url.searchParams.append(i,`gt.${o}`),this}gte(i,o){return this.url.searchParams.append(i,`gte.${o}`),this}lt(i,o){return this.url.searchParams.append(i,`lt.${o}`),this}lte(i,o){return this.url.searchParams.append(i,`lte.${o}`),this}like(i,o){return this.url.searchParams.append(i,`like.${o}`),this}likeAllOf(i,o){return this.url.searchParams.append(i,`like(all).{${o.join(",")}}`),this}likeAnyOf(i,o){return this.url.searchParams.append(i,`like(any).{${o.join(",")}}`),this}ilike(i,o){return this.url.searchParams.append(i,`ilike.${o}`),this}ilikeAllOf(i,o){return this.url.searchParams.append(i,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(i,o){return this.url.searchParams.append(i,`ilike(any).{${o.join(",")}}`),this}is(i,o){return this.url.searchParams.append(i,`is.${o}`),this}in(i,o){const l=Array.from(new Set(o)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(i,`in.(${l})`),this}contains(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cs.{${o.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(o)}`),this}containedBy(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cd.{${o.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(o)}`),this}rangeGt(i,o){return this.url.searchParams.append(i,`sr.${o}`),this}rangeGte(i,o){return this.url.searchParams.append(i,`nxl.${o}`),this}rangeLt(i,o){return this.url.searchParams.append(i,`sl.${o}`),this}rangeLte(i,o){return this.url.searchParams.append(i,`nxr.${o}`),this}rangeAdjacent(i,o){return this.url.searchParams.append(i,`adj.${o}`),this}overlaps(i,o){return typeof o=="string"?this.url.searchParams.append(i,`ov.${o}`):this.url.searchParams.append(i,`ov.{${o.join(",")}}`),this}textSearch(i,o,{config:l,type:u}={}){let c="";u==="plain"?c="pl":u==="phrase"?c="ph":u==="websearch"&&(c="w");const f=l===void 0?"":`(${l})`;return this.url.searchParams.append(i,`${c}fts${f}.${o}`),this}match(i){return Object.entries(i).forEach(([o,l])=>{this.url.searchParams.append(o,`eq.${l}`)}),this}not(i,o,l){return this.url.searchParams.append(i,`not.${o}.${l}`),this}or(i,{foreignTable:o,referencedTable:l=o}={}){const u=l?`${l}.or`:"or";return this.url.searchParams.append(u,`(${i})`),this}filter(i,o,l){return this.url.searchParams.append(i,`${o}.${l}`),this}}return to.default=n,to}var xx;function Yb(){if(xx)return eo;xx=1;var e=eo&&eo.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(eo,"__esModule",{value:!0});const t=e(Zp());class n{constructor(i,{headers:o={},schema:l,fetch:u}){this.url=i,this.headers=new Headers(o),this.schema=l,this.fetch=u}select(i,o){const{head:l=!1,count:u}=o??{},c=l?"HEAD":"GET";let f=!1;const h=(i??"*").split("").map(p=>/\s/.test(p)&&!f?"":(p==='"'&&(f=!f),p)).join("");return this.url.searchParams.set("select",h),u&&this.headers.append("Prefer",`count=${u}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:o,defaultToNull:l=!0}={}){var u;const c="POST";if(o&&this.headers.append("Prefer",`count=${o}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const f=i.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(f.length>0){const h=[...new Set(f)].map(p=>`"${p}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}upsert(i,{onConflict:o,ignoreDuplicates:l=!1,count:u,defaultToNull:c=!0}={}){var f;const h="POST";if(this.headers.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),u&&this.headers.append("Prefer",`count=${u}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const p=i.reduce((v,y)=>v.concat(Object.keys(y)),[]);if(p.length>0){const v=[...new Set(p)].map(y=>`"${y}"`);this.url.searchParams.set("columns",v.join(","))}}return new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}update(i,{count:o}={}){var l;const u="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:i}={}){var o;const l="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}}return eo.default=n,eo}var wx;function JI(){if(wx)return Zs;wx=1;var e=Zs&&Zs.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Zs,"__esModule",{value:!0});const t=e(Yb()),n=e(Zp());class r{constructor(o,{headers:l={},schema:u,fetch:c}={}){this.url=o,this.headers=new Headers(l),this.schemaName=u,this.fetch=c}from(o){const l=new URL(`${this.url}/${o}`);return new t.default(l,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new r(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,l={},{head:u=!1,get:c=!1,count:f}={}){var h;let p;const v=new URL(`${this.url}/rpc/${o}`);let y;u||c?(p=u?"HEAD":"GET",Object.entries(l).filter(([E,k])=>k!==void 0).map(([E,k])=>[E,Array.isArray(k)?`{${k.join(",")}}`:`${k}`]).forEach(([E,k])=>{v.searchParams.append(E,k)})):(p="POST",y=l);const S=new Headers(this.headers);return f&&S.set("Prefer",`count=${f}`),new n.default({method:p,url:v,headers:S,schema:this.schemaName,body:y,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}}return Zs.default=r,Zs}var bx;function QI(){if(bx)return en;bx=1;var e=en&&en.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(en,"__esModule",{value:!0}),en.PostgrestError=en.PostgrestBuilder=en.PostgrestTransformBuilder=en.PostgrestFilterBuilder=en.PostgrestQueryBuilder=en.PostgrestClient=void 0;const t=e(JI());en.PostgrestClient=t.default;const n=e(Yb());en.PostgrestQueryBuilder=n.default;const r=e(Zp());en.PostgrestFilterBuilder=r.default;const i=e(qb());en.PostgrestTransformBuilder=i.default;const o=e(Vb());en.PostgrestBuilder=o.default;const l=e(Hb());return en.PostgrestError=l.default,en.default={PostgrestClient:t.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:o.default,PostgrestError:l.default},en}var XI=QI();const ZI=Ao(XI),{PostgrestClient:eP,PostgrestQueryBuilder:g5,PostgrestFilterBuilder:y5,PostgrestTransformBuilder:v5,PostgrestBuilder:x5,PostgrestError:w5}=ZI;class tP{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const nP="2.75.0",rP=`realtime-js/${nP}`,iP="1.0.0",Xh=1e4,sP=1e3,oP=100;var Da;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Da||(Da={}));var Kt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Kt||(Kt={}));var wr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(wr||(wr={}));var Zh;(function(e){e.websocket="websocket"})(Zh||(Zh={}));var fs;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(fs||(fs={}));class aP{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const i=n.getUint8(1),o=n.getUint8(2);let l=this.HEADER_LENGTH+2;const u=r.decode(t.slice(l,l+i));l=l+i;const c=r.decode(t.slice(l,l+o));l=l+o;const f=JSON.parse(r.decode(t.slice(l,t.byteLength)));return{ref:null,topic:u,event:c,payload:f}}}class Gb{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var St;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(St||(St={}));const kx=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((o,l)=>(o[l]=lP(l,e,t,i),o),{}):{}},lP=(e,t,n,r)=>{const i=t.find(u=>u.name===e),o=i==null?void 0:i.type,l=n[e];return o&&!r.includes(o)?Kb(o,l):ep(l)},Kb=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return fP(t,n)}switch(e){case St.bool:return uP(t);case St.float4:case St.float8:case St.int2:case St.int4:case St.int8:case St.numeric:case St.oid:return cP(t);case St.json:case St.jsonb:return dP(t);case St.timestamp:return hP(t);case St.abstime:case St.date:case St.daterange:case St.int4range:case St.int8range:case St.money:case St.reltime:case St.text:case St.time:case St.timestamptz:case St.timetz:case St.tsrange:case St.tstzrange:return ep(t);default:return ep(t)}},ep=e=>e,uP=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},cP=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},dP=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},fP=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let o;const l=e.slice(1,n);try{o=JSON.parse("["+l+"]")}catch{o=l?l.split(","):[]}return o.map(u=>Kb(t,u))}return e},hP=e=>typeof e=="string"?e.replace(" ","T"):e,Jb=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Qf{constructor(t,n,r={},i=Xh){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Sx;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Sx||(Sx={}));class $a{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=$a.syncState(this.state,i,o,l),this.pendingDiffs.forEach(c=>{this.state=$a.syncDiff(this.state,c,o,l)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},i=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=$a.syncDiff(this.state,i,o,l),u())}),this.onJoin((i,o,l)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:l})}),this.onLeave((i,o,l)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const o=this.cloneDeep(t),l=this.transformState(n),u={},c={};return this.map(o,(f,h)=>{l[f]||(c[f]=h)}),this.map(l,(f,h)=>{const p=o[f];if(p){const v=h.map(k=>k.presence_ref),y=p.map(k=>k.presence_ref),S=h.filter(k=>y.indexOf(k.presence_ref)<0),E=p.filter(k=>v.indexOf(k.presence_ref)<0);S.length>0&&(u[f]=S),E.length>0&&(c[f]=E)}else u[f]=h}),this.syncDiff(o,{joins:u,leaves:c},r,i)}static syncDiff(t,n,r,i){const{joins:o,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(u,c)=>{var f;const h=(f=t[u])!==null&&f!==void 0?f:[];if(t[u]=this.cloneDeep(c),h.length>0){const p=t[u].map(y=>y.presence_ref),v=h.filter(y=>p.indexOf(y.presence_ref)<0);t[u].unshift(...v)}r(u,h,c)}),this.map(l,(u,c)=>{let f=t[u];if(!f)return;const h=c.map(p=>p.presence_ref);f=f.filter(p=>h.indexOf(p.presence_ref)<0),t[u]=f,i(u,f,c),f.length===0&&delete t[u]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ex;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Ex||(Ex={}));var Fa;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Fa||(Fa={}));var ei;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ei||(ei={}));class em{constructor(t,n={config:{}},r){var i,o;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Kt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Qf(this,wr.join,this.params,this.timeout),this.rejoinTimer=new Gb(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Kt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Kt.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Kt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Kt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Kt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(wr.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new $a(this),this.broadcastEndpointURL=Jb(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Kt.closed){const{config:{broadcast:l,presence:u,private:c}}=this.params,f=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(y=>y.filter))!==null&&i!==void 0?i:[],h=!!this.bindings[Fa.PRESENCE]&&this.bindings[Fa.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,p={},v={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:h}),postgres_changes:f,private:c};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(y=>t==null?void 0:t(ei.CHANNEL_ERROR,y)),this._onClose(()=>t==null?void 0:t(ei.CLOSED)),this.updateJoinPayload(Object.assign({config:v},p)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:y})=>{var S;if(this.socket.setAuth(),y===void 0){t==null||t(ei.SUBSCRIBED);return}else{const E=this.bindings.postgres_changes,k=(S=E==null?void 0:E.length)!==null&&S!==void 0?S:0,C=[];for(let _=0;_<k;_++){const j=E[_],{filter:{event:I,schema:O,table:P,filter:$}}=j,oe=y&&y[_];if(oe&&oe.event===I&&oe.schema===O&&oe.table===P&&oe.filter===$)C.push(Object.assign(Object.assign({},j),{id:oe.id}));else{this.unsubscribe(),this.state=Kt.errored,t==null||t(ei.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,t&&t(ei.SUBSCRIBED);return}}).receive("error",y=>{this.state=Kt.errored,t==null||t(ei.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ei.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Kt.joined&&t===Fa.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){const{event:o,payload:l}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:l,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=f.body)===null||i===void 0?void 0:i.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var l,u,c;const f=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),f.receive("ok",()=>o("ok")),f.receive("error",()=>o("error")),f.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Kt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(wr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Qf(this,wr.leave,{},t),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Kt.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const i=new AbortController,o=setTimeout(()=>i.abort(),r),l=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(o),l}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Qf(this,t,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>oP){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,o;const l=t.toLocaleLowerCase(),{close:u,error:c,leave:f,join:h}=wr;if(r&&[u,c,f,h].indexOf(l)>=0&&r!==this._joinRef())return;let v=this._onMessage(l,n,r);if(n&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(y=>{var S,E,k;return((S=y.filter)===null||S===void 0?void 0:S.event)==="*"||((k=(E=y.filter)===null||E===void 0?void 0:E.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===l}).map(y=>y.callback(v,r)):(o=this.bindings[l])===null||o===void 0||o.filter(y=>{var S,E,k,C,_,j;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in y){const I=y.id,O=(S=y.filter)===null||S===void 0?void 0:S.event;return I&&((E=n.ids)===null||E===void 0?void 0:E.includes(I))&&(O==="*"||(O==null?void 0:O.toLocaleLowerCase())===((k=n.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const I=(_=(C=y==null?void 0:y.filter)===null||C===void 0?void 0:C.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return I==="*"||I===((j=n==null?void 0:n.event)===null||j===void 0?void 0:j.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===l}).map(y=>{if(typeof v=="object"&&"ids"in v){const S=v.data,{schema:E,table:k,commit_timestamp:C,type:_,errors:j}=S;v=Object.assign(Object.assign({},{schema:E,table:k,commit_timestamp:C,eventType:_,new:{},old:{},errors:j}),this._getPayloadRecords(S))}y.callback(v,r)})}_isClosed(){return this.state===Kt.closed}_isJoined(){return this.state===Kt.joined}_isJoining(){return this.state===Kt.joining}_isLeaving(){return this.state===Kt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),o={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&em.isEqual(i.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(wr.close,{},t)}_onError(t){this._on(wr.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Kt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=kx(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=kx(t.columns,t.old_record)),n}}const Xf=()=>{},Pu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},pP=[1e3,2e3,5e3,1e4],mP=1e4,gP=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class yP{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Xh,this.transport=null,this.heartbeatIntervalMs=Pu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Xf,this.ref=0,this.reconnectTimer=null,this.logger=Xf,this.conn=null,this.sendBuffer=[],this.serializer=new aP,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>dl(async()=>{const{default:u}=await Promise.resolve().then(()=>$o);return{default:u}},void 0).then(({default:u})=>u(...l)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...l)=>o(...l)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Zh.websocket}`,this.httpEndpoint=Jb(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=tP.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:iP}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Da.connecting:return fs.Connecting;case Da.open:return fs.Open;case Da.closing:return fs.Closing;default:return fs.Closed}}isConnected(){return this.connectionState()===fs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{const o=new em(`realtime:${t}`,n,this);return this.channels.push(o),o}}push(t){const{topic:n,event:r,payload:i,ref:o}=t,l=()=>{this.encode(t,u=>{var c;(c=this.conn)===null||c===void 0||c.send(u)})};this.log("push",`${n} ${r} (${o})`,i),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(sP,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Pu.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:o,ref:l}=n,u=l?`(${l})`:"",c=o.status||"";this.log("receive",`${c} ${r} ${i} ${u}`.trim(),o),this.channels.filter(f=>f._isMember(r)).forEach(f=>f._trigger(i,o,l)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(wr.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([gP],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:rP};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(wr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Gb(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Pu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,i,o,l,u,c,f,h;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Xh,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:Pu.HEARTBEAT_INTERVAL,this.worker=(o=t==null?void 0:t.worker)!==null&&o!==void 0?o:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=t==null?void 0:t.heartbeatCallback)!==null&&u!==void 0?u:Xf,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:(p=>pP[p-1]||mP),this.encode=(f=t==null?void 0:t.encode)!==null&&f!==void 0?f:((p,v)=>v(JSON.stringify(p))),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class tm extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Wt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class vP extends tm{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class tp extends tm{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var xP=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};const Qb=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>dl(async()=>{const{default:r}=await Promise.resolve().then(()=>$o);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},wP=()=>xP(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield dl(()=>Promise.resolve().then(()=>$o),void 0)).Response:Response}),np=e=>{if(Array.isArray(e))return e.map(n=>np(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[i]=np(r)}),t},bP=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Ts=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};const Zf=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),kP=(e,t,n)=>Ts(void 0,void 0,void 0,function*(){const r=yield wP();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(i=>{const o=e.status||500,l=(i==null?void 0:i.statusCode)||o+"";t(new vP(Zf(i),o,l))}).catch(i=>{t(new tp(Zf(i),i))}):t(new tp(Zf(e),e))}),SP=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?i:(bP(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(r)):i.body=r,t!=null&&t.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),n))};function fl(e,t,n,r,i,o){return Ts(this,void 0,void 0,function*(){return new Promise((l,u)=>{e(n,SP(t,r,i,o)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>l(c)).catch(c=>kP(c,u,r))})})}function uc(e,t,n,r){return Ts(this,void 0,void 0,function*(){return fl(e,"GET",t,n,r)})}function Rr(e,t,n,r,i){return Ts(this,void 0,void 0,function*(){return fl(e,"POST",t,r,i,n)})}function rp(e,t,n,r,i){return Ts(this,void 0,void 0,function*(){return fl(e,"PUT",t,r,i,n)})}function EP(e,t,n,r){return Ts(this,void 0,void 0,function*(){return fl(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Xb(e,t,n,r,i){return Ts(this,void 0,void 0,function*(){return fl(e,"DELETE",t,r,i,n)})}var _P=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};class CP{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return _P(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Wt(t))return{data:null,error:t};throw t}})}}var jP=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};class NP{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}asStream(){return new CP(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.execute().then(t,n)}execute(){return jP(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Wt(t))return{data:null,error:t};throw t}})}}var An=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};const TP={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},_x={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class IP{constructor(t,n={},r,i){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=Qb(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,i){return An(this,void 0,void 0,function*(){try{let o;const l=Object.assign(Object.assign({},_x),i);let u=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const c=l.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",l.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",l.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=r,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,c&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i!=null&&i.headers&&(u=Object.assign(Object.assign({},u),i.headers));const f=this._removeEmptyFolders(n),h=this._getFinalPath(f),p=yield(t=="PUT"?rp:Rr)(this.fetch,`${this.url}/object/${h}`,o,Object.assign({headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:f,id:p.Id,fullPath:p.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Wt(o))return{data:null,error:o};throw o}})}upload(t,n,r){return An(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,i){return An(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),l=this._getFinalPath(o),u=new URL(this.url+`/object/upload/sign/${l}`);u.searchParams.set("token",n);try{let c;const f=Object.assign({upsert:_x.upsert},i),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",f.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",f.cacheControl)):(c=r,h["cache-control"]=`max-age=${f.cacheControl}`,h["content-type"]=f.contentType);const p=yield rp(this.fetch,u.toString(),c,{headers:h});return{data:{path:o,fullPath:p.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Wt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return An(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const o=yield Rr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),l=new URL(this.url+o.url),u=l.searchParams.get("token");if(!u)throw new tm("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:u},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Wt(r))return{data:null,error:r};throw r}})}update(t,n,r){return An(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return An(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Wt(i))return{data:null,error:i};throw i}})}copy(t,n,r){return An(this,void 0,void 0,function*(){try{return{data:{path:(yield Rr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Wt(i))return{data:null,error:i};throw i}})}createSignedUrl(t,n,r){return An(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),o=yield Rr(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const l=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${l}`)},{data:o,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Wt(i))return{data:null,error:i};throw i}})}createSignedUrls(t,n,r){return An(this,void 0,void 0,function*(){try{const i=yield Rr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${o}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Wt(i))return{data:null,error:i};throw i}})}download(t,n){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),l=o?`?${o}`:"",u=this._getFinalPath(t),c=()=>uc(this.fetch,`${this.url}/${i}/${u}${l}`,{headers:this.headers,noResolveJson:!0});return new NP(c,this.shouldThrowOnError)}info(t){return An(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield uc(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:np(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Wt(r))return{data:null,error:r};throw r}})}exists(t){return An(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield EP(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Wt(r)&&r instanceof tp){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),i=[],o=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&i.push(o);const u=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&i.push(c);let f=i.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${r}${f}`)}}}remove(t){return An(this,void 0,void 0,function*(){try{return{data:yield Xb(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Wt(n))return{data:null,error:n};throw n}})}list(t,n,r){return An(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},TP),n),{prefix:t||""});return{data:yield Rr(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Wt(i))return{data:null,error:i};throw i}})}listV2(t,n){return An(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield Rr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Wt(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const PP="2.75.0",AP={"X-Client-Info":`storage-js/${PP}`};var io=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};class RP{constructor(t,n={},r,i){this.shouldThrowOnError=!1;const o=new URL(t);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},AP),n),this.fetch=Qb(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return io(this,void 0,void 0,function*(){try{return{data:yield uc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Wt(t))return{data:null,error:t};throw t}})}getBucket(t){return io(this,void 0,void 0,function*(){try{return{data:yield uc(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Wt(n))return{data:null,error:n};throw n}})}createBucket(t){return io(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield Rr(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Wt(i))return{data:null,error:i};throw i}})}updateBucket(t,n){return io(this,void 0,void 0,function*(){try{return{data:yield rp(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Wt(r))return{data:null,error:r};throw r}})}emptyBucket(t){return io(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Wt(n))return{data:null,error:n};throw n}})}deleteBucket(t){return io(this,void 0,void 0,function*(){try{return{data:yield Xb(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Wt(n))return{data:null,error:n};throw n}})}}class OP extends RP{constructor(t,n={},r,i){super(t,n,r,i)}from(t){return new IP(this.url,this.headers,t,this.fetch)}}const MP="2.75.0";let Aa="";typeof Deno<"u"?Aa="deno":typeof document<"u"?Aa="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Aa="react-native":Aa="node";const LP={"X-Client-Info":`supabase-js-${Aa}/${MP}`},DP={headers:LP},$P={schema:"public"},FP={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},zP={};var BP=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};const UP=e=>{let t;return e?t=e:typeof fetch>"u"?t=Ub:t=fetch,(...n)=>t(...n)},WP=()=>typeof Headers>"u"?Wb:Headers,HP=(e,t,n)=>{const r=UP(n),i=WP();return(o,l)=>BP(void 0,void 0,void 0,function*(){var u;const c=(u=yield t())!==null&&u!==void 0?u:e;let f=new i(l==null?void 0:l.headers);return f.has("apikey")||f.set("apikey",e),f.has("Authorization")||f.set("Authorization",`Bearer ${c}`),r(o,Object.assign(Object.assign({},l),{headers:f}))})};var VP=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};function qP(e){return e.endsWith("/")?e:e+"/"}function YP(e,t){var n,r;const{db:i,auth:o,realtime:l,global:u}=e,{db:c,auth:f,realtime:h,global:p}=t,v={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},f),o),realtime:Object.assign(Object.assign({},h),l),storage:{},global:Object.assign(Object.assign(Object.assign({},p),u),{headers:Object.assign(Object.assign({},(n=p==null?void 0:p.headers)!==null&&n!==void 0?n:{}),(r=u==null?void 0:u.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>VP(this,void 0,void 0,function*(){return""})};return e.accessToken?v.accessToken=e.accessToken:delete v.accessToken,v}function GP(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(qP(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Zb="2.75.0",po=30*1e3,ip=3,eh=ip*po,KP="http://localhost:9999",JP="supabase.auth.token",QP={"X-Client-Info":`gotrue-js/${Zb}`},sp="X-Supabase-Api-Version",ek={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},XP=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ZP=600*1e3;class Za extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function qe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class eA extends Za{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function tA(e){return qe(e)&&e.name==="AuthApiError"}class hs extends Za{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Wi extends Za{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}}class Ni extends Wi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function nA(e){return qe(e)&&e.name==="AuthSessionMissingError"}class so extends Wi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Au extends Wi{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Ru extends Wi{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function rA(e){return qe(e)&&e.name==="AuthImplicitGrantRedirectError"}class Cx extends Wi{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class op extends Wi{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function th(e){return qe(e)&&e.name==="AuthRetryableFetchError"}class jx extends Wi{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class ap extends Wi{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const cc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Nx=` 	
\r=`.split(""),iA=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Nx.length;t+=1)e[Nx[t].charCodeAt(0)]=-2;for(let t=0;t<cc.length;t+=1)e[cc[t].charCodeAt(0)]=t;return e})();function Tx(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(cc[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(cc[r]),t.queuedBits-=6}}function tk(e,t,n){const r=iA[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Ix(e){const t=[],n=l=>{t.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=l=>{aA(l,r,n)};for(let l=0;l<e.length;l+=1)tk(e.charCodeAt(l),i,o);return t.join("")}function sA(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function oA(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}sA(r,t)}}function aA(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if((e>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function ko(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)tk(e.charCodeAt(i),n,r);return new Uint8Array(t)}function lA(e){const t=[];return oA(e,n=>t.push(n)),new Uint8Array(t)}function vs(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};return e.forEach(i=>Tx(i,n,r)),Tx(null,n,r),t.join("")}function uA(e){return Math.round(Date.now()/1e3)+e}function cA(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Vn=()=>typeof window<"u"&&typeof document<"u",is={tested:!1,writable:!1},nk=()=>{if(!Vn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(is.tested)return is.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),is.tested=!0,is.writable=!0}catch{is.tested=!0,is.writable=!1}return is.writable};function dA(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,o)=>{t[o]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const rk=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>dl(async()=>{const{default:r}=await Promise.resolve().then(()=>$o);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},fA=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",mo=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},ss=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ci=async(e,t)=>{await e.removeItem(t)};class zc{constructor(){this.promise=new zc.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}zc.promiseConstructor=Promise;function nh(e){const t=e.split(".");if(t.length!==3)throw new ap("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!XP.test(t[r]))throw new ap("JWT not in base64url format");return{header:JSON.parse(Ix(t[0])),payload:JSON.parse(Ix(t[1])),signature:ko(t[2]),raw:{header:t[0],payload:t[1]}}}async function hA(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function pA(e,t){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const l=await e(o);if(!t(o,null,l)){r(l);return}}catch(l){if(!t(o,l)){i(l);return}}})()})}function mA(e){return("0"+e.toString(16)).substr(-2)}function gA(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let o=0;o<56;o++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,mA).join("")}async function yA(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function vA(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await yA(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function oo(e,t,n=!1){const r=gA();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await mo(e,`${t}-code-verifier`,i);const o=await vA(r);return[o,r===o?"plain":"s256"]}const xA=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function wA(e){const t=e.headers.get(sp);if(!t||!t.match(xA))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function bA(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function kA(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const SA=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ao(e){if(!SA.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function rh(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Px(e){return JSON.parse(JSON.stringify(e))}var EA=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const ls=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),_A=[502,503,504];async function Ax(e){var t;if(!fA(e))throw new op(ls(e),0);if(_A.includes(e.status))throw new op(ls(e),e.status);let n;try{n=await e.json()}catch(o){throw new hs(ls(o),o)}let r;const i=wA(e);if(i&&i.getTime()>=ek["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new jx(ls(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Ni}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,l)=>o&&typeof l=="string",!0))throw new jx(ls(n),e.status,n.weak_password.reasons);throw new eA(ls(n),e.status||500,r)}const CA=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function Ze(e,t,n,r){var i;const o=Object.assign({},r==null?void 0:r.headers);o[sp]||(o[sp]=ek["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const l=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(l.redirect_to=r.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",c=await jA(e,t,n+u,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function jA(e,t,n,r,i,o){const l=CA(t,r,i,o);let u;try{u=await e(n,Object.assign({},l))}catch(c){throw console.error(c),new op(ls(c),0)}if(u.ok||await Ax(u),r!=null&&r.noResolveJson)return u;try{return await u.json()}catch(c){await Ax(c)}}function vr(e){var t;let n=null;IA(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=uA(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Rx(e){const t=vr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ri(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function NA(e){return{data:e,error:null}}function TA(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o}=e,l=EA(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o},c=Object.assign({},l);return{data:{properties:u,user:c},error:null}}function Ox(e){return e}function IA(e){return e.access_token&&e.refresh_token&&e.expires_in}const ih=["global","local","others"];var PA=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class AA{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=rk(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=ih[0]){if(ih.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ih.join(", ")}`);try{return await Ze(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(qe(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await Ze(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ri})}catch(r){if(qe(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=PA(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await Ze(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:TA,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(qe(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Ze(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ri})}catch(n){if(qe(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,o,l,u,c;try{const f={nextPage:null,lastPage:0,total:0},h=await Ze(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Ox});if(h.error)throw h.error;const p=await h.json(),v=(l=h.headers.get("x-total-count"))!==null&&l!==void 0?l:0,y=(c=(u=h.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&c!==void 0?c:[];return y.length>0&&(y.forEach(S=>{const E=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(S.split(";")[1].split("=")[1]);f[`${k}Page`]=E}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},p),f),error:null}}catch(f){if(qe(f))return{data:{users:[]},error:f};throw f}}async getUserById(t){ao(t);try{return await Ze(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ri})}catch(n){if(qe(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){ao(t);try{return await Ze(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Ri})}catch(r){if(qe(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){ao(t);try{return await Ze(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ri})}catch(r){if(qe(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){ao(t.userId);try{const{data:n,error:r}=await Ze(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(qe(n))return{data:null,error:n};throw n}}async _deleteFactor(t){ao(t.userId),ao(t.id);try{return{data:await Ze(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(qe(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,i,o,l,u,c;try{const f={nextPage:null,lastPage:0,total:0},h=await Ze(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Ox});if(h.error)throw h.error;const p=await h.json(),v=(l=h.headers.get("x-total-count"))!==null&&l!==void 0?l:0,y=(c=(u=h.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&c!==void 0?c:[];return y.length>0&&(y.forEach(S=>{const E=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(S.split(";")[1].split("=")[1]);f[`${k}Page`]=E}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},p),f),error:null}}catch(f){if(qe(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(t){try{return await Ze(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(qe(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await Ze(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(qe(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await Ze(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(qe(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await Ze(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(qe(n))return{data:null,error:n};throw n}}}function Mx(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const lo={debug:!!(globalThis&&nk()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ik extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class RA extends ik{}async function OA(e,t,n){lo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),lo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){lo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{lo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw lo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new RA(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(lo.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function MA(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function sk(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function LA(e){return parseInt(e,16)}function DA(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function $A(e){var t;const{chainId:n,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:l,notBefore:u,requestId:c,resources:f,scheme:h,uri:p,version:v}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const y=sk(e.address),S=h?`${h}://${r}`:r,E=e.statement?`${e.statement}
`:"",k=`${S} wants you to sign in with your Ethereum account:
${y}

${E}`;let C=`URI: ${p}
Version: ${v}
Chain ID: ${n}${l?`
Nonce: ${l}`:""}
Issued At: ${o.toISOString()}`;if(i&&(C+=`
Expiration Time: ${i.toISOString()}`),u&&(C+=`
Not Before: ${u.toISOString()}`),c&&(C+=`
Request ID: ${c}`),f){let _=`
Resources:`;for(const j of f){if(!j||typeof j!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${j}`);_+=`
- ${j}`}C+=_}return`${k}
${C}`}class Ut extends Error{constructor({message:t,code:n,cause:r,name:i}){var o;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class dc extends Ut{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function FA({error:e,options:t}){var n,r,i;const{publicKey:o}=t;if(!o)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ut({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Ut({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Ut({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Ut({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Ut({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Ut({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return o.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new Ut({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Ut({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const l=window.location.hostname;if(ak(l)){if(o.rp.id!==l)return new Ut({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Ut({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Ut({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Ut({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Ut({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function zA({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ut({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Ut({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(ak(r)){if(n.rpId!==r)return new Ut({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Ut({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Ut({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Ut({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var ok=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class BA{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const UA=new BA;function WA(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,i=ok(e,["challenge","user","excludeCredentials"]),o=ko(t).buffer,l=Object.assign(Object.assign({},n),{id:ko(n.id).buffer}),u=Object.assign(Object.assign({},i),{challenge:o,user:l});if(r&&r.length>0){u.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const f=r[c];u.excludeCredentials[c]=Object.assign(Object.assign({},f),{id:ko(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return u}function HA(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=ok(e,["challenge","allowCredentials"]),i=ko(t).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const u=n[l];o.allowCredentials[l]=Object.assign(Object.assign({},u),{id:ko(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function VA(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:vs(new Uint8Array(e.response.attestationObject)),clientDataJSON:vs(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function qA(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:vs(new Uint8Array(i.authenticatorData)),clientDataJSON:vs(new Uint8Array(i.clientDataJSON)),signature:vs(new Uint8Array(i.signature)),userHandle:i.userHandle?vs(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function ak(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Lx(){var e,t;return!!(Vn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function YA(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new dc("Browser returned unexpected credential type",t)}:{data:null,error:new dc("Empty credential response",t)}}catch(t){return{data:null,error:FA({error:t,options:e})}}}async function GA(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new dc("Browser returned unexpected credential type",t)}:{data:null,error:new dc("Empty credential response",t)}}catch(t){return{data:null,error:zA({error:t,options:e})}}}const KA={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},JA={userVerification:"preferred",hints:["security-key"]};function fc(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of e)if(i)for(const o in i){const l=i[o];if(l!==void 0)if(Array.isArray(l))r[o]=l;else if(n(l))r[o]=l;else if(t(l)){const u=r[o];t(u)?r[o]=fc(u,l):r[o]=fc(l)}else r[o]=l}return r}function QA(e,t){return fc(KA,e,t||{})}function XA(e,t){return fc(JA,e,t||{})}class ZA{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:i},o){try{const{data:l,error:u}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!l)return{data:null,error:u};const c=i??UA.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:f}=l.webauthn.credential_options.publicKey;f.name||(f.name=`${f.id}:${r}`),f.displayName||(f.displayName=f.name)}switch(l.webauthn.type){case"create":{const f=QA(l.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:h,error:p}=await YA({publicKey:f,signal:c});return h?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:h}},error:null}:{data:null,error:p}}case"request":{const f=XA(l.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:h,error:p}=await GA(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:f,signal:c}));return h?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:h}},error:null}:{data:null,error:p}}}}catch(l){return qe(l)?{data:null,error:l}:{data:null,error:new hs("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}},o){if(!n)return{data:null,error:new Za("rpId is required for WebAuthn authentication")};try{if(!Lx())return{data:null,error:new hs("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:o});if(!l)return{data:null,error:u};const{webauthn:c}=l;return this._verify({factorId:t,challengeId:l.challengeId,webauthn:{type:c.type,rpId:n,rpOrigins:r,credential_response:c.credential_response}})}catch(l){return qe(l)?{data:null,error:l}:{data:null,error:new hs("Unexpected error in authenticate",l)}}}async _register({friendlyName:t,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i},o){if(!n)return{data:null,error:new Za("rpId is required for WebAuthn registration")};try{if(!Lx())return{data:null,error:new hs("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this._enroll({friendlyName:t});if(!l)return await this.client.mfa.listFactors().then(h=>{var p;return(p=h.data)===null||p===void 0?void 0:p.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===t&&v.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:u};const{data:c,error:f}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:o});return c?this._verify({factorId:l.id,challengeId:c.challengeId,webauthn:{rpId:n,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:f}}catch(l){return qe(l)?{data:null,error:l}:{data:null,error:new hs("Unexpected error in register",l)}}}}MA();const eR={url:KP,storageKey:JP,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:QP,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Dx(e,t,n){return await n()}const uo={};class el{get jwks(){var t,n;return(n=(t=uo[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){uo[this.storageKey]=Object.assign(Object.assign({},uo[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=uo[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){uo[this.storageKey]=Object.assign(Object.assign({},uo[this.storageKey]),{cachedAt:t})}constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=el.nextInstanceID,el.nextInstanceID+=1,this.instanceID>0&&Vn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},eR),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new AA({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=rk(i.fetch),this.lock=i.lock||Dx,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Vn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=OA:this.lock=Dx,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new ZA(this)},this.persistSession?(i.storage?this.storage=i.storage:nk()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Mx(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Mx(this.memoryStorage)),Vn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Zb}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=dA(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Vn()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),rA(o)){const c=(t=o.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:l,redirectType:u}=i;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return qe(n)?{error:n}:{error:new hs("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,i;try{const o=await Ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:vr}),{data:l,error:u}=o;if(u||!l)return{data:{user:null,session:null},error:u};const c=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(o){if(qe(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(t){var n,r,i;try{let o;if("email"in t){const{email:h,password:p,options:v}=t;let y=null,S=null;this.flowType==="pkce"&&([y,S]=await oo(this.storage,this.storageKey)),o=await Ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:h,password:p,data:(n=v==null?void 0:v.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:y,code_challenge_method:S},xform:vr})}else if("phone"in t){const{phone:h,password:p,options:v}=t;o=await Ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:p,data:(r=v==null?void 0:v.data)!==null&&r!==void 0?r:{},channel:(i=v==null?void 0:v.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:vr})}else throw new Au("You must provide either an email or phone number and a password");const{data:l,error:u}=o;if(u||!l)return{data:{user:null,session:null},error:u};const c=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(o){if(qe(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(t){try{let n;if("email"in t){const{email:o,password:l,options:u}=t;n=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Rx})}else if("phone"in t){const{phone:o,password:l,options:u}=t;n=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Rx})}else throw new Au("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new so}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(qe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,i,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,i,o,l,u,c,f,h,p,v;let y,S;if("message"in t)y=t.message,S=t.signature;else{const{chain:E,wallet:k,statement:C,options:_}=t;let j;if(Vn())if(typeof k=="object")j=k;else{const X=window;if("ethereum"in X&&typeof X.ethereum=="object"&&"request"in X.ethereum&&typeof X.ethereum.request=="function")j=X.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=k}const I=new URL((n=_==null?void 0:_.url)!==null&&n!==void 0?n:window.location.href),O=await j.request({method:"eth_requestAccounts"}).then(X=>X).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!O||O.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const P=sk(O[0]);let $=(r=_==null?void 0:_.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!$){const X=await j.request({method:"eth_chainId"});$=LA(X)}const oe={domain:I.host,address:P,statement:C,uri:I.href,version:"1",chainId:$,nonce:(i=_==null?void 0:_.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(l=(o=_==null?void 0:_.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(u=_==null?void 0:_.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(c=_==null?void 0:_.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(f=_==null?void 0:_.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(h=_==null?void 0:_.signInWithEthereum)===null||h===void 0?void 0:h.resources};y=$A(oe),S=await j.request({method:"personal_sign",params:[DA(y),P]})}try{const{data:E,error:k}=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:y,signature:S},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:vr});if(k)throw k;return!E||!E.session||!E.user?{data:{user:null,session:null},error:new so}:(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),{data:Object.assign({},E),error:k})}catch(E){if(qe(E))return{data:{user:null,session:null},error:E};throw E}}async signInWithSolana(t){var n,r,i,o,l,u,c,f,h,p,v,y;let S,E;if("message"in t)S=t.message,E=t.signature;else{const{chain:k,wallet:C,statement:_,options:j}=t;let I;if(Vn())if(typeof C=="object")I=C;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))I=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!(j!=null&&j.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");I=C}const O=new URL((n=j==null?void 0:j.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in I&&I.signIn){const P=await I.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},j==null?void 0:j.signInWithSolana),{version:"1",domain:O.host,uri:O.href}),_?{statement:_}:null));let $;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")$=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)$=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in $&&"signature"in $&&(typeof $.signedMessage=="string"||$.signedMessage instanceof Uint8Array)&&$.signature instanceof Uint8Array)S=typeof $.signedMessage=="string"?$.signedMessage:new TextDecoder().decode($.signedMessage),E=$.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in I)||typeof I.signMessage!="function"||!("publicKey"in I)||typeof I!="object"||!I.publicKey||!("toBase58"in I.publicKey)||typeof I.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${O.host} wants you to sign in with your Solana account:`,I.publicKey.toBase58(),..._?["",_,""]:[""],"Version: 1",`URI: ${O.href}`,`Issued At: ${(i=(r=j==null?void 0:j.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=j==null?void 0:j.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${j.signInWithSolana.notBefore}`]:[],...!((l=j==null?void 0:j.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${j.signInWithSolana.expirationTime}`]:[],...!((u=j==null?void 0:j.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${j.signInWithSolana.chainId}`]:[],...!((c=j==null?void 0:j.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${j.signInWithSolana.nonce}`]:[],...!((f=j==null?void 0:j.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${j.signInWithSolana.requestId}`]:[],...!((p=(h=j==null?void 0:j.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||p===void 0)&&p.length?["Resources",...j.signInWithSolana.resources.map($=>`- ${$}`)]:[]].join(`
`);const P=await I.signMessage(new TextEncoder().encode(S),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");E=P}}try{const{data:k,error:C}=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:vs(E)},!((v=t.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:vr});if(C)throw C;return!k||!k.session||!k.user?{data:{user:null,session:null},error:new so}:(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),{data:Object.assign({},k),error:C})}catch(k){if(qe(k))return{data:{user:null,session:null},error:k};throw k}}async _exchangeCodeForSession(t){const n=await ss(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:o,error:l}=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:vr});if(await Ci(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new so}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:l})}catch(o){if(qe(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(t){try{const{options:n,provider:r,token:i,access_token:o,nonce:l}=t,u=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:o,nonce:l,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:vr}),{data:c,error:f}=u;return f?{data:{user:null,session:null},error:f}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new so}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:f})}catch(n){if(qe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,i,o,l;try{if("email"in t){const{email:u,options:c}=t;let f=null,h=null;this.flowType==="pkce"&&([f,h]=await oo(this.storage,this.storageKey));const{error:p}=await Ze(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:f,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in t){const{phone:u,options:c}=t,{data:f,error:h}=await Ze(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(l=c==null?void 0:c.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:h}}throw new Au("You must provide either an email or phone number.")}catch(u){if(qe(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(t){var n,r;try{let i,o;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,o=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:u}=await Ze(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:vr});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const c=l.session,f=l.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(i){if(qe(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var n,r,i;try{let o=null,l=null;return this.flowType==="pkce"&&([o,l]=await oo(this.storage,this.storageKey)),await Ze(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:NA})}catch(o){if(qe(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Ni;const{error:i}=await Ze(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(qe(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:o}=t,{error:l}=await Ze(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){const{phone:r,type:i,options:o}=t,{data:l,error:u}=await Ze(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new Au("You must provide either an email or phone number and a type")}catch(n){if(qe(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await ss(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<eh:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const l=await ss(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=rh()}if(this.storage.isServer&&t.user){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,f,h)=>(!l&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,f,h))})}return{data:{session:t},error:null}}const{data:i,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Ze(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ri}):await this._useSession(async n=>{var r,i,o;const{data:l,error:u}=n;if(u)throw u;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ni}:await Ze(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:Ri})})}catch(n){if(qe(n))return nA(n)&&(await this._removeSession(),await Ci(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:i,error:o}=r;if(o)throw o;if(!i.session)throw new Ni;const l=i.session;let u=null,c=null;this.flowType==="pkce"&&t.email!=null&&([u,c]=await oo(this.storage,this.storageKey));const{data:f,error:h}=await Ze(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:u,code_challenge_method:c}),jwt:l.access_token,xform:Ri});if(h)throw h;return l.user=f.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(r){if(qe(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ni;const n=Date.now()/1e3;let r=n,i=!0,o=null;const{payload:l}=nh(t.access_token);if(l.exp&&(r=l.exp,i=r<=n),i){const{data:u,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!u)return{data:{user:null,session:null},error:null};o=u}else{const{data:u,error:c}=await this._getUser(t.access_token);if(c)throw c;o={access_token:t.access_token,refresh_token:t.refresh_token,user:u.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(n){if(qe(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:l,error:u}=n;if(u)throw u;t=(r=l.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Ni;const{data:i,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(qe(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!Vn())throw new Ru("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Ru(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Cx("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ru("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Cx("No code detected.");const{data:_,error:j}=await this._exchangeCodeForSession(t.code);if(j)throw j;const I=new URL(window.location.href);return I.searchParams.delete("code"),window.history.replaceState(window.history.state,"",I.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:o,refresh_token:l,expires_in:u,expires_at:c,token_type:f}=t;if(!o||!u||!l||!f)throw new Ru("No session defined in URL");const h=Math.round(Date.now()/1e3),p=parseInt(u);let v=h+p;c&&(v=parseInt(c));const y=v-h;y*1e3<=po&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${p}s`);const S=v-p;h-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,v,h):h-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,v,h);const{data:E,error:k}=await this._getUser(o);if(k)throw k;const C={provider_token:r,provider_refresh_token:i,access_token:o,expires_in:p,expires_at:v,refresh_token:l,token_type:f,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:C,redirectType:t.type},error:null}}catch(r){if(qe(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await ss(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return{error:o};const l=(r=i.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:u}=await this.admin.signOut(l,t);if(u&&!(tA(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return t!=="others"&&(await this._removeSession(),await Ci(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=cA(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,i;try{const{data:{session:o},error:l}=n;if(l)throw l;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await oo(this.storage,this.storageKey,!0));try{return await Ze(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(qe(o))return{data:null,error:o};throw o}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(qe(n))return{data:null,error:n};throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:i}=await this._useSession(async o=>{var l,u,c,f,h;const{data:p,error:v}=o;if(v)throw v;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=t.options)===null||u===void 0?void 0:u.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Ze(this.fetch,"GET",y,{headers:this.headers,jwt:(h=(f=p.session)===null||f===void 0?void 0:f.access_token)!==null&&h!==void 0?h:void 0})});if(i)throw i;return Vn()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(qe(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:o}}=n;if(i)throw i;const{options:l,provider:u,token:c,access_token:f,nonce:h}=t,p=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o==null?void 0:o.access_token)!==null&&r!==void 0?r:void 0,body:{provider:u,id_token:c,access_token:f,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:vr}),{data:v,error:y}=p;return y?{data:{user:null,session:null},error:y}:!v||!v.session||!v.user?{data:{user:null,session:null},error:new so}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),{data:v,error:y})}catch(i){if(qe(i))return{data:{user:null,session:null},error:i};throw i}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,i;const{data:o,error:l}=n;if(l)throw l;return await Ze(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(qe(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await pA(async i=>(i>0&&await hA(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await Ze(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:vr})),(i,o)=>{const l=200*Math.pow(2,i);return o&&th(o)&&Date.now()+l-r<po})}catch(r){if(this._debug(n,"error",r),qe(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Vn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await ss(this.storage,this.storageKey);if(i&&this.userStorage){let l=await ss(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:i.user},await mo(this.userStorage,this.storageKey+"-user",l)),i.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:rh()}else if(i&&!i.user&&!i.user){const l=await ss(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(i.user=l.user,await Ci(this.storage,this.storageKey+"-user"),await mo(this.storage,this.storageKey,i)):i.user=rh()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const o=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<eh;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${eh}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:l}=await this._callRefreshToken(i.refresh_token);l&&(console.error(l),th(l)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(i.access_token);!u&&(l!=null&&l.user)?(i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(r,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Ni;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new zc;const{data:o,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!o.session)throw new Ni;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const u={data:o.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(o){if(this._debug(i,"error",o),qe(o)){const l={data:null,error:o};return th(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,r=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const o=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(t,n)}catch(c){o.push(c)}});if(await Promise.all(l),o.length>0){for(let u=0;u<o.length;u+=1)console.error(o[u]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await mo(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const o=Px(i);await mo(this.storage,this.storageKey,o)}else{const i=Px(n);await mo(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Ci(this.storage,this.storageKey),await Ci(this.storage,this.storageKey+"-code-verifier"),await Ci(this.storage,this.storageKey+"-user"),this.userStorage&&await Ci(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Vn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),po);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-t)/po);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${po}ms, refresh threshold is ${ip} ticks`),i<=ip&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof ik)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Vn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,l]=await oo(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(l)}`});i.push(u.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);i.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;return o?{data:null,error:o}:await Ze(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(qe(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,i;const{data:o,error:l}=n;if(l)return{data:null,error:l};const u=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:f}=await Ze(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return f?{data:null,error:f}:(t.factorType==="totp"&&c.type==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(qe(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return{data:null,error:o};const l=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?VA(t.webauthn.credential_response):qA(t.webauthn.credential_response)})}:{code:t.code}),{data:u,error:c}=await Ze(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:c})})}catch(n){if(qe(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return{data:null,error:o};const l=await Ze(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(l.error)return l;const{data:u}=l;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:WA(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:HA(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(qe(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const o of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])i.all.push(o),o.status==="verified"&&i[o.factor_type].push(o);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:i},error:o}=t;if(o)return{data:null,error:o};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=nh(i.access_token);let u=null;l.aal&&(u=l.aal);let c=u;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(p=>p.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const h=l.amr||[];return{data:{currentLevel:u,nextLevel:c,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(u=>u.kid===t);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(u=>u.kid===t),r&&this.jwks_cached_at+ZP>i)return r;const{data:o,error:l}=await Ze(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,r=o.keys.find(u=>u.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:y,error:S}=await this.getSession();if(S||!y.session)return{data:null,error:S};r=y.session.access_token}const{header:i,payload:o,signature:l,raw:{header:u,payload:c}}=nh(r);n!=null&&n.allowExpired||bA(o.exp);const f=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!f){const{error:y}=await this.getUser(r);if(y)throw y;return{data:{claims:o,header:i,signature:l},error:null}}const h=kA(i.alg),p=await crypto.subtle.importKey("jwk",f,h,!0,["verify"]);if(!await crypto.subtle.verify(h,p,l,lA(`${u}.${c}`)))throw new ap("Invalid JWT signature");return{data:{claims:o,header:i,signature:l},error:null}}catch(r){if(qe(r))return{data:null,error:r};throw r}}}el.nextInstanceID=0;const tR=el;class nR extends tR{constructor(t){super(t)}}var rR=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};class iR{constructor(t,n,r){var i,o,l;this.supabaseUrl=t,this.supabaseKey=n;const u=GP(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const c=`sb-${u.hostname.split(".")[0]}-auth-token`,f={db:$P,realtime:zP,auth:Object.assign(Object.assign({},FP),{storageKey:c}),global:DP},h=YP(r??{},f);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=h.global.headers)!==null&&o!==void 0?o:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(p,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=h.auth)!==null&&l!==void 0?l:{},this.headers,h.global.fetch),this.fetch=HP(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new eP(new URL("rest/v1",u).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new OP(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new HI(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return rR(this,void 0,void 0,function*(){var t,n;if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:o,storageKey:l,flowType:u,lock:c,debug:f},h,p){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new nR({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),h),storageKey:l,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:o,flowType:u,lock:c,debug:f,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new yP(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const sR=(e,t,n)=>new iR(e,t,n);function oR(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}oR()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const aR="https://kjsdmygqhxaryvfmnhqr.supabase.co",lR="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imtqc2RteWdxaHhhcnl2Zm1uaHFyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAwMTAxMDEsImV4cCI6MjA3NTU4NjEwMX0.kXL7Dgum6CepvcrS8LVY1v_EHnpyUQOFcqndUQWPrkM",Vt=sR(aR,lR,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),$x=e=>{let t;const n=new Set,r=(f,h)=>{const p=typeof f=="function"?f(t):f;if(!Object.is(p,t)){const v=t;t=h??(typeof p!="object"||p===null)?p:Object.assign({},t,p),n.forEach(y=>y(t,v))}},i=()=>t,u={setState:r,getState:i,getInitialState:()=>c,subscribe:f=>(n.add(f),()=>n.delete(f))},c=t=e(r,i,u);return u},uR=(e=>e?$x(e):$x),cR=e=>e;function dR(e,t=cR){const n=Re.useSyncExternalStore(e.subscribe,Re.useCallback(()=>t(e.getState()),[e,t]),Re.useCallback(()=>t(e.getInitialState()),[e,t]));return Re.useDebugValue(n),n}const Fx=e=>{const t=uR(e),n=r=>dR(t,r);return Object.assign(n,t),n},fR=(e=>e?Fx(e):Fx),hR="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let $t=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=hR[n[e]&63];return t};var Hu={exports:{}},pR=Hu.exports,zx;function lk(){return zx||(zx=1,(function(e,t){(function(n,r){e.exports=r()})(pR,(function(){var n=1e3,r=6e4,i=36e5,o="millisecond",l="second",u="minute",c="hour",f="day",h="week",p="month",v="quarter",y="year",S="date",E="Invalid Date",k=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,C=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Y){var M=["th","st","nd","rd"],G=Y%100;return"["+Y+(M[(G-20)%10]||M[G]||M[0])+"]"}},j=function(Y,M,G){var ae=String(Y);return!ae||ae.length>=M?Y:""+Array(M+1-ae.length).join(G)+Y},I={s:j,z:function(Y){var M=-Y.utcOffset(),G=Math.abs(M),ae=Math.floor(G/60),F=G%60;return(M<=0?"+":"-")+j(ae,2,"0")+":"+j(F,2,"0")},m:function Y(M,G){if(M.date()<G.date())return-Y(G,M);var ae=12*(G.year()-M.year())+(G.month()-M.month()),F=M.clone().add(ae,p),ee=G-F<0,T=M.clone().add(ae+(ee?-1:1),p);return+(-(ae+(G-F)/(ee?F-T:T-F))||0)},a:function(Y){return Y<0?Math.ceil(Y)||0:Math.floor(Y)},p:function(Y){return{M:p,y,w:h,d:f,D:S,h:c,m:u,s:l,ms:o,Q:v}[Y]||String(Y||"").toLowerCase().replace(/s$/,"")},u:function(Y){return Y===void 0}},O="en",P={};P[O]=_;var $="$isDayjsObject",oe=function(Y){return Y instanceof re||!(!Y||!Y[$])},X=function Y(M,G,ae){var F;if(!M)return O;if(typeof M=="string"){var ee=M.toLowerCase();P[ee]&&(F=ee),G&&(P[ee]=G,F=ee);var T=M.split("-");if(!F&&T.length>1)return Y(T[0])}else{var B=M.name;P[B]=M,F=B}return!ae&&F&&(O=F),F||!ae&&O},R=function(Y,M){if(oe(Y))return Y.clone();var G=typeof M=="object"?M:{};return G.date=Y,G.args=arguments,new re(G)},D=I;D.l=X,D.i=oe,D.w=function(Y,M){return R(Y,{locale:M.$L,utc:M.$u,x:M.$x,$offset:M.$offset})};var re=(function(){function Y(G){this.$L=X(G.locale,null,!0),this.parse(G),this.$x=this.$x||G.x||{},this[$]=!0}var M=Y.prototype;return M.parse=function(G){this.$d=(function(ae){var F=ae.date,ee=ae.utc;if(F===null)return new Date(NaN);if(D.u(F))return new Date;if(F instanceof Date)return new Date(F);if(typeof F=="string"&&!/Z$/i.test(F)){var T=F.match(k);if(T){var B=T[2]-1||0,te=(T[7]||"0").substring(0,3);return ee?new Date(Date.UTC(T[1],B,T[3]||1,T[4]||0,T[5]||0,T[6]||0,te)):new Date(T[1],B,T[3]||1,T[4]||0,T[5]||0,T[6]||0,te)}}return new Date(F)})(G),this.init()},M.init=function(){var G=this.$d;this.$y=G.getFullYear(),this.$M=G.getMonth(),this.$D=G.getDate(),this.$W=G.getDay(),this.$H=G.getHours(),this.$m=G.getMinutes(),this.$s=G.getSeconds(),this.$ms=G.getMilliseconds()},M.$utils=function(){return D},M.isValid=function(){return this.$d.toString()!==E},M.isSame=function(G,ae){var F=R(G);return this.startOf(ae)<=F&&F<=this.endOf(ae)},M.isAfter=function(G,ae){return R(G)<this.startOf(ae)},M.isBefore=function(G,ae){return this.endOf(ae)<R(G)},M.$g=function(G,ae,F){return D.u(G)?this[ae]:this.set(F,G)},M.unix=function(){return Math.floor(this.valueOf()/1e3)},M.valueOf=function(){return this.$d.getTime()},M.startOf=function(G,ae){var F=this,ee=!!D.u(ae)||ae,T=D.p(G),B=function(Ae,_e){var Z=D.w(F.$u?Date.UTC(F.$y,_e,Ae):new Date(F.$y,_e,Ae),F);return ee?Z:Z.endOf(f)},te=function(Ae,_e){return D.w(F.toDate()[Ae].apply(F.toDate("s"),(ee?[0,0,0,0]:[23,59,59,999]).slice(_e)),F)},A=this.$W,pe=this.$M,fe=this.$D,ge="set"+(this.$u?"UTC":"");switch(T){case y:return ee?B(1,0):B(31,11);case p:return ee?B(1,pe):B(0,pe+1);case h:var Ie=this.$locale().weekStart||0,ve=(A<Ie?A+7:A)-Ie;return B(ee?fe-ve:fe+(6-ve),pe);case f:case S:return te(ge+"Hours",0);case c:return te(ge+"Minutes",1);case u:return te(ge+"Seconds",2);case l:return te(ge+"Milliseconds",3);default:return this.clone()}},M.endOf=function(G){return this.startOf(G,!1)},M.$set=function(G,ae){var F,ee=D.p(G),T="set"+(this.$u?"UTC":""),B=(F={},F[f]=T+"Date",F[S]=T+"Date",F[p]=T+"Month",F[y]=T+"FullYear",F[c]=T+"Hours",F[u]=T+"Minutes",F[l]=T+"Seconds",F[o]=T+"Milliseconds",F)[ee],te=ee===f?this.$D+(ae-this.$W):ae;if(ee===p||ee===y){var A=this.clone().set(S,1);A.$d[B](te),A.init(),this.$d=A.set(S,Math.min(this.$D,A.daysInMonth())).$d}else B&&this.$d[B](te);return this.init(),this},M.set=function(G,ae){return this.clone().$set(G,ae)},M.get=function(G){return this[D.p(G)]()},M.add=function(G,ae){var F,ee=this;G=Number(G);var T=D.p(ae),B=function(pe){var fe=R(ee);return D.w(fe.date(fe.date()+Math.round(pe*G)),ee)};if(T===p)return this.set(p,this.$M+G);if(T===y)return this.set(y,this.$y+G);if(T===f)return B(1);if(T===h)return B(7);var te=(F={},F[u]=r,F[c]=i,F[l]=n,F)[T]||1,A=this.$d.getTime()+G*te;return D.w(A,this)},M.subtract=function(G,ae){return this.add(-1*G,ae)},M.format=function(G){var ae=this,F=this.$locale();if(!this.isValid())return F.invalidDate||E;var ee=G||"YYYY-MM-DDTHH:mm:ssZ",T=D.z(this),B=this.$H,te=this.$m,A=this.$M,pe=F.weekdays,fe=F.months,ge=F.meridiem,Ie=function(_e,Z,je,$e){return _e&&(_e[Z]||_e(ae,ee))||je[Z].slice(0,$e)},ve=function(_e){return D.s(B%12||12,_e,"0")},Ae=ge||function(_e,Z,je){var $e=_e<12?"AM":"PM";return je?$e.toLowerCase():$e};return ee.replace(C,(function(_e,Z){return Z||(function(je){switch(je){case"YY":return String(ae.$y).slice(-2);case"YYYY":return D.s(ae.$y,4,"0");case"M":return A+1;case"MM":return D.s(A+1,2,"0");case"MMM":return Ie(F.monthsShort,A,fe,3);case"MMMM":return Ie(fe,A);case"D":return ae.$D;case"DD":return D.s(ae.$D,2,"0");case"d":return String(ae.$W);case"dd":return Ie(F.weekdaysMin,ae.$W,pe,2);case"ddd":return Ie(F.weekdaysShort,ae.$W,pe,3);case"dddd":return pe[ae.$W];case"H":return String(B);case"HH":return D.s(B,2,"0");case"h":return ve(1);case"hh":return ve(2);case"a":return Ae(B,te,!0);case"A":return Ae(B,te,!1);case"m":return String(te);case"mm":return D.s(te,2,"0");case"s":return String(ae.$s);case"ss":return D.s(ae.$s,2,"0");case"SSS":return D.s(ae.$ms,3,"0");case"Z":return T}return null})(_e)||T.replace(":","")}))},M.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},M.diff=function(G,ae,F){var ee,T=this,B=D.p(ae),te=R(G),A=(te.utcOffset()-this.utcOffset())*r,pe=this-te,fe=function(){return D.m(T,te)};switch(B){case y:ee=fe()/12;break;case p:ee=fe();break;case v:ee=fe()/3;break;case h:ee=(pe-A)/6048e5;break;case f:ee=(pe-A)/864e5;break;case c:ee=pe/i;break;case u:ee=pe/r;break;case l:ee=pe/n;break;default:ee=pe}return F?ee:D.a(ee)},M.daysInMonth=function(){return this.endOf(p).$D},M.$locale=function(){return P[this.$L]},M.locale=function(G,ae){if(!G)return this.$L;var F=this.clone(),ee=X(G,ae,!0);return ee&&(F.$L=ee),F},M.clone=function(){return D.w(this.$d,this)},M.toDate=function(){return new Date(this.valueOf())},M.toJSON=function(){return this.isValid()?this.toISOString():null},M.toISOString=function(){return this.$d.toISOString()},M.toString=function(){return this.$d.toUTCString()},Y})(),W=re.prototype;return R.prototype=W,[["$ms",o],["$s",l],["$m",u],["$H",c],["$W",f],["$M",p],["$y",y],["$D",S]].forEach((function(Y){W[Y[1]]=function(M){return this.$g(M,Y[0],Y[1])}})),R.extend=function(Y,M){return Y.$i||(Y(M,re,R),Y.$i=!0),R},R.locale=X,R.isDayjs=oe,R.unix=function(Y){return R(1e3*Y)},R.en=P[O],R.Ls=P,R.p={},R}))})(Hu)),Hu.exports}var mR=lk();const tt=Ao(mR);function sh(e){return e.trim().toLowerCase().normalize("NFKD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,"").replace(/-{2,}/g,"-")}const So=`
  id,
  name,
  subtitle,
  objective_id,
  parent_work_id,
  node_type,
  tags,
  order_hint,
  next_work_id,
  variant_of_work_id,
  description_markdown,
  estimated_minutes,
  notes,
  video_urls,
  visibility,
  owner_id,
  owner_email,
  created_at,
  updated_at,
  work_collaborators (
    id,
    email,
    role,
    user_id,
    created_at
  )
`,uk=e=>Array.from(new Set(e.map(t=>t.trim().toLowerCase()).filter(t=>t.length>0))),gR=e=>Array.isArray(e)?e.map(t=>typeof t=="string"?t.trim():"").filter(t=>t.length>0):[],nm=e=>Array.isArray(e)?Array.from(new Set(e.map(t=>typeof t=="string"?t.trim().toLowerCase():"").filter(t=>t.length>0))):[],ck=e=>(e??[]).map(t=>({id:`${t.id}`,email:t.email.toLowerCase(),role:t.role,userId:t.user_id??void 0,createdAt:t.created_at})),rm=(e,t)=>{var u,c;const n=ck(e.work_collaborators),r=n.map(f=>f.email),i=((u=t==null?void 0:t.actorEmail)==null?void 0:u.toLowerCase())??"",o=t?e.owner_id===t.actorId:!1,l=o||r.includes(i);return{id:e.id,name:e.name,subtitle:e.subtitle??void 0,objectiveId:e.objective_id,parentWorkId:e.parent_work_id??null,nodeType:e.node_type??void 0,tags:nm(e.tags),orderHint:typeof e.order_hint=="number"?e.order_hint:void 0,nextWorkId:e.next_work_id??null,variantOfWorkId:e.variant_of_work_id??null,descriptionMarkdown:e.description_markdown??"",estimatedMinutes:e.estimated_minutes??0,notes:e.notes??void 0,videoUrls:gR(e.video_urls),visibility:e.visibility??"private",ownerId:e.owner_id,ownerEmail:((c=e.owner_email)==null?void 0:c.toLowerCase())??"",collaborators:n,collaboratorEmails:r,createdAt:e.created_at,updatedAt:e.updated_at,canEdit:l,isOwner:o}};async function yR(e){const{data:t,error:n}=await Vt.from("works").select(So).order("name");if(n)throw console.error("No se pudieron cargar los trabajos compartidos",n),n;return t.map(r=>rm(r,e))}async function Bx(e,t){var S;const n=e.id??$t(),r=uk(e.collaboratorEmails),i=t.actorEmail.trim().toLowerCase(),o=(S=e.nodeType)!=null&&S.trim()?e.nodeType.trim():null,l=nm(e.tags??[]),u=typeof e.orderHint=="number"&&Number.isFinite(e.orderHint)?e.orderHint:null,c=e.nextWorkId??null,f=e.variantOfWorkId??null,{data:h,error:p}=await Vt.from("works").insert({id:n,name:e.name,subtitle:e.subtitle??null,objective_id:e.objectiveId,parent_work_id:e.parentWorkId??null,node_type:o,tags:l,order_hint:u,next_work_id:c,variant_of_work_id:f,description_markdown:e.descriptionMarkdown,estimated_minutes:e.estimatedMinutes,notes:e.notes??null,video_urls:e.videoUrls,visibility:e.visibility,owner_id:t.actorId,owner_email:i,updated_at:new Date().toISOString()}).select(So).maybeSingle();if(p||!h)throw console.error("No se pudo crear el trabajo",p),p??new Error("Falta respuesta al crear trabajo");if(r.length>0){const E=r.map(C=>({work_id:h.id,email:C})),{error:k}=await Vt.from("work_collaborators").insert(E);if(k)throw console.error("No se pudieron guardar los colaboradores",k),k}const{data:v,error:y}=await Vt.from("works").select(So).eq("id",h.id).maybeSingle();if(y||!v)throw console.error("No se pudo refrescar el trabajo creado",y),y??new Error("No se pudo cargar el trabajo creado");return rm(v,t)}async function vR(e,t,n){const r={};t.name!==void 0&&(r.name=t.name),t.subtitle!==void 0&&(r.subtitle=t.subtitle),t.objectiveId!==void 0&&(r.objective_id=t.objectiveId),t.parentWorkId!==void 0&&(r.parent_work_id=t.parentWorkId),t.nodeType!==void 0&&(r.node_type=t.nodeType),t.tags!==void 0&&(r.tags=nm(t.tags)),t.orderHint!==void 0&&(r.order_hint=t.orderHint),t.nextWorkId!==void 0&&(r.next_work_id=t.nextWorkId),t.variantOfWorkId!==void 0&&(r.variant_of_work_id=t.variantOfWorkId),t.descriptionMarkdown!==void 0&&(r.description_markdown=t.descriptionMarkdown),t.estimatedMinutes!==void 0&&(r.estimated_minutes=t.estimatedMinutes),t.notes!==void 0&&(r.notes=t.notes),t.videoUrls!==void 0&&(r.video_urls=t.videoUrls),t.visibility!==void 0&&(r.visibility=t.visibility),r.updated_at=new Date().toISOString();let i=null;if(Object.keys(r).length>0){const{data:o,error:l}=await Vt.from("works").update(r).eq("id",e).select(So).maybeSingle();if(l||!o)throw console.error("No se pudo actualizar el trabajo",l),l??new Error("Falta respuesta al actualizar trabajo");i=o}else{const{data:o,error:l}=await Vt.from("works").select(So).eq("id",e).maybeSingle();if(l||!o)throw l??new Error("Trabajo no encontrado");i=o}if(t.collaboratorEmails){const o=uk(t.collaboratorEmails),l=ck(i.work_collaborators),u=l.map(v=>v.email),c=o.filter(v=>!u.includes(v)),f=l.filter(v=>!o.includes(v.email));if(c.length>0){const v=c.map(S=>({work_id:e,email:S})),{error:y}=await Vt.from("work_collaborators").insert(v);if(y)throw console.error("No se pudieron aadir los colaboradores",y),y}if(f.length>0){const v=f.map(S=>S.email),{error:y}=await Vt.from("work_collaborators").delete().eq("work_id",e).in("email",v);if(y)throw console.error("No se pudieron eliminar colaboradores",y),y}const{data:h,error:p}=await Vt.from("works").select(So).eq("id",e).maybeSingle();if(p||!h)throw p??new Error("Error al refrescar colaboradores");i=h}return rm(i,n)}async function xR(e){const{error:t}=await Vt.from("works").delete().eq("id",e);if(t)throw console.error("No se pudo eliminar el trabajo",t),t}const vt={objectives:"sport-planner-objetivos",works:"sport-planner-trabajos",sessions:"sport-planner-sesiones",assistants:"sport-planner-asistentes",plans:"sport-planner-plans",kungfuPrograms:"sport-planner-kungfu-programs",kungfuCadence:"sport-planner-kungfu-cadence",kungfuTodayPlan:"sport-planner-kungfu-today-plan",workTaxonomy:"sport-planner-work-taxonomy"},dk=typeof window<"u",gt=()=>new Date().toISOString(),us="18:30",ps="classes",Di="personal-kungfu",ms=[{id:"default",name:"Kung Fu  activo",enabled:!0,include:[{byTags:["kungfu"]}],exclude:[]}],Ii={targetsDays:{work:7,technique:5,segment:8,form:10,drill:7},overrides:[]},an={limitMode:"count",maxItems:12,minutesBudget:30,template:{totalMinutes:30,focusMinutes:18,rouletteMinutes:10,recapMinutes:2},defaultMinutesByNodeType:{work:3,technique:1.5,segment:6,form:15,drill:4,link:2},focusSelectors:[],rouletteSelectors:[],groups:[{id:"formas",name:"Formas",enabled:!0,order:1,type:"work",limitMode:"minutes",minutesBudget:18,strategy:"overdue",hierarchyRule:"prefer_leaves",include:[{byNodeTypes:["segment","form"]}],exclude:[]},{id:"tecnicas",name:"Tcnicas",enabled:!0,order:2,type:"work",limitMode:"minutes",minutesBudget:10,strategy:"weighted",hierarchyRule:"allow_all",include:[{byNodeTypes:["technique"]},{byTags:["roulette"]}],exclude:[]},{id:"recap",name:"Recap",enabled:!0,order:99,type:"note",limitMode:"minutes",minutesBudget:2}]},Oi={nodeTypes:[{key:"form",label:"Form"},{key:"segment",label:"Segment"},{key:"application",label:"Application"},{key:"technique",label:"Technique"},{key:"drill",label:"Drill"},{key:"work",label:"Work"},{key:"link",label:"Link"},{key:"style",label:"Style"}],tags:[]},wR=e=>e==="class"||e==="personal",bR=(e,t)=>{if(!e||typeof e!="object")return t;const n=e,r=String(n.id??"").trim();if(!r)return t;const i=wR(n.kind)?n.kind:t.kind,o=String(n.name??"").trim()||t.name,l=typeof n.enabled=="boolean"?n.enabled:t.enabled,u=String(n.createdAt??"").trim()||t.createdAt,c=String(n.updatedAt??"").trim()||t.updatedAt;return{...t,id:r,kind:i,name:o,enabled:l,cadence:n.cadence??t.cadence,todayPlan:n.todayPlan??t.todayPlan,createdAt:u,updatedAt:c}},fk=(e,t,n)=>[{id:ps,name:"Clases",kind:"class",enabled:!0,createdAt:e,updatedAt:e},{id:Di,name:"Personal Kung Fu",kind:"personal",enabled:!0,cadence:t,todayPlan:n,createdAt:e,updatedAt:e}],cs=(e,t,n,r)=>{const i=fk(r,t,n),l=(Array.isArray(e)?e:[]).map(f=>{const h=String((f==null?void 0:f.id)??"").trim(),p=i.find(v=>v.id===h)??{id:h||$t(),name:"Plan",kind:"personal",enabled:!0,cadence:t,todayPlan:n,createdAt:r,updatedAt:r};return bR(f,p)}).filter(f=>f.id.length>0),u=new Map;l.forEach(f=>{u.set(f.id,f)}),i.forEach(f=>{u.has(f.id)||u.set(f.id,f)});const c=u.get(Di);return c&&u.set(Di,{...c,cadence:c.cadence??t,todayPlan:c.todayPlan??n}),Array.from(u.values()).sort((f,h)=>{const p=f.kind===h.kind?0:f.kind==="class"?-1:1;return p!==0?p:f.name.localeCompare(h.name,"es",{sensitivity:"base"})})},kR=e=>{const n=(Array.isArray(e)?e:[]).map(i=>{if(!i||typeof i!="object")return null;const o=i,l=String(o.key??"").trim().toLowerCase(),u=String(o.label??"").trim();return l?{key:l,label:u||l}:null}).filter(Boolean),r=new Map;return n.forEach(i=>{r.set(i.key,i)}),Oi.nodeTypes.forEach(i=>{r.has(i.key)||r.set(i.key,i)}),Array.from(r.values()).sort((i,o)=>i.label.localeCompare(o.label,"en",{sensitivity:"base"}))},SR=e=>{const n=(Array.isArray(e)?e:[]).map(i=>{if(typeof i=="string"){const u=i.trim().toLowerCase();return u?{name:u}:null}if(!i||typeof i!="object")return null;const l=String(i.name??"").trim().toLowerCase();return l?{name:l}:null}).filter(Boolean),r=new Map;return n.forEach(i=>r.set(i.name,i)),Array.from(r.values()).sort((i,o)=>i.name.localeCompare(o.name,"en",{sensitivity:"base"}))},Wn=(e,t)=>{const n=(e&&typeof e=="object"?e:{})??{},r=kR(n.nodeTypes),i=SR(n.tags),o=new Map(r.map(u=>[u.key,u])),l=new Map(i.map(u=>[u.name,u]));return t.forEach(u=>{const c=(u.nodeType??"").trim().toLowerCase();c&&!o.has(c)&&o.set(c,{key:c,label:c}),(u.tags??[]).forEach(f=>{const h=String(f??"").trim().toLowerCase();h&&!l.has(h)&&l.set(h,{name:h})})}),{nodeTypes:Array.from(o.values()).sort((u,c)=>u.label.localeCompare(c.label,"en",{sensitivity:"base"})),tags:Array.from(l.values()).sort((u,c)=>u.name.localeCompare(c.name,"en",{sensitivity:"base"}))}},Ux=e=>Array.from(new Set((Array.isArray(e)?e:[]).map(t=>String(t??"").trim().toLowerCase()).filter(t=>t.length>0))),ER=e=>Array.from(new Set((Array.isArray(e)?e:[]).map(t=>String(t??"").trim()).filter(t=>t.length>0))),hk=e=>e==="count"||e==="minutes"||e==="both",_R=e=>e==="work"||e==="note",CR=e=>e==="overdue"||e==="weighted",jR=e=>e==="allow_all"||e==="prefer_leaves",NR=e=>{const t={},n=Ux(e.byTags),r=Ux(e.byNodeTypes),i=ER(e.byWorkIds);return n.length>0&&(t.byTags=n),r.length>0&&(t.byNodeTypes=r),i.length>0&&(t.byWorkIds=i),t},Io=e=>(e??[]).map(NR).filter(t=>Object.keys(t).length>0),TR=e=>{if(!Array.isArray(e))return[];const t=e.map(n=>Number(n)).filter(n=>Number.isFinite(n)).map(n=>Math.round(n)).filter(n=>n>=0&&n<=6);return Array.from(new Set(t)).sort((n,r)=>n-r)},IR=e=>{const t={};return!e||typeof e!="object"?{...an.defaultMinutesByNodeType}:(Object.entries(e).forEach(([n,r])=>{const i=n.trim().toLowerCase(),o=Number(r);i&&Number.isFinite(o)&&(t[i]=Math.max(.25,o))}),Object.keys(t).length>0?t:{...an.defaultMinutesByNodeType})},PR=(e,t)=>{const n=String(e.id??"").trim()||$t(),r=_R(e.type)?e.type:"work",i=typeof e.enabled=="boolean"?e.enabled:!0,o=String(e.name??"").trim()||(r==="note"?"Recap":"Grupo"),l=Number.isFinite(Number(e.order))?Number(e.order):t,u=TR(e.daysOfWeek),c=hk(e.limitMode)?e.limitMode:"minutes",f=Number.isFinite(Number(e.maxItems))?Math.max(0,Math.round(Number(e.maxItems))):void 0,h=Number.isFinite(Number(e.minutesBudget))?Math.max(0,Number(e.minutesBudget)):void 0,p=CR(e.strategy)?e.strategy:"overdue",v=jR(e.hierarchyRule)?e.hierarchyRule:"allow_all",y=Io(e.include),S=Io(e.exclude);return{id:n,name:o,enabled:i,order:l,type:r,daysOfWeek:u,limitMode:c,maxItems:f,minutesBudget:h,strategy:p,hierarchyRule:v,include:y,exclude:S}},AR=e=>{var f,h,p;const t=Math.max(0,Number((f=e.template)==null?void 0:f.focusMinutes)||0),n=Math.max(0,Number((h=e.template)==null?void 0:h.rouletteMinutes)||0),r=Math.max(0,Number((p=e.template)==null?void 0:p.recapMinutes)||0),i=Io(e.focusSelectors),o=Io(e.rouletteSelectors),l=i.length>0?i:[{byNodeTypes:["segment","form"]}],u=o.length>0?o:[{byNodeTypes:["technique"]},{byTags:["roulette"]}],c=[{id:"formas",name:"Formas",enabled:!0,order:1,type:"work",limitMode:"minutes",minutesBudget:t>0?t:18,strategy:"overdue",hierarchyRule:"prefer_leaves",include:l,exclude:[]},{id:"tecnicas",name:"Tcnicas",enabled:!0,order:2,type:"work",limitMode:"minutes",minutesBudget:n>0?n:10,strategy:"weighted",hierarchyRule:"allow_all",include:u,exclude:[]}];return r>0&&c.push({id:"recap",name:"Recap",enabled:!0,order:99,type:"note",limitMode:"minutes",minutesBudget:r}),c},Vu=e=>{var S,E,k;const t=e??an,n=hk(t.limitMode)?t.limitMode:an.limitMode,r=Math.max(1,Math.round(Number(t.maxItems)||an.maxItems)),i=Math.max(1,Number(t.minutesBudget)||an.minutesBudget),o=Math.max(0,Number((S=t.template)==null?void 0:S.focusMinutes)||an.template.focusMinutes),l=Math.max(0,Number((E=t.template)==null?void 0:E.rouletteMinutes)||an.template.rouletteMinutes),u=Math.max(0,Number((k=t.template)==null?void 0:k.recapMinutes)||an.template.recapMinutes),c=Math.max(0,o+l+u),f=IR(t.defaultMinutesByNodeType),h=Io(t.focusSelectors),p=Io(t.rouletteSelectors),y=((t.groups??[]).length>0?t.groups??[]:AR(t)).map((C,_)=>PR(C,_+1)).sort((C,_)=>C.order-_.order).map((C,_)=>({...C,order:_+1}));return{...t,limitMode:n,maxItems:r,minutesBudget:i,template:{totalMinutes:c,focusMinutes:o,rouletteMinutes:l,recapMinutes:u},defaultMinutesByNodeType:f,focusSelectors:h,rouletteSelectors:p,groups:y}},On=e=>{if(!e)return null;const t=e.trim();return t.length>0?t:null},qu=e=>Array.from(new Set((e??[]).map(t=>(t??"").trim().toLowerCase()).filter(t=>t.length>0))),xr=e=>{if(!e)return;const t=e.trim();return t.length>0?t:void 0},lp=e=>Array.from(new Set((e??[]).map(t=>(t??"").trim().toLowerCase()).filter(t=>t.length>0))),Ti=e=>{const t=gt(),n=On(e.parentWorkId??null),r=On(e.nextWorkId??null),i=On(e.variantOfWorkId??null),o=xr(e.nodeType??void 0),l=qu(e.tags),u=typeof e.orderHint=="number"&&Number.isFinite(e.orderHint)?e.orderHint:void 0,c=(e.collaborators??[]).map((p,v)=>({id:p.id??`${e.id}-collab-${v}`,email:(p.email??"").trim().toLowerCase(),role:p.role??"editor",userId:p.userId??null,createdAt:p.createdAt??t})),f=lp([...e.collaboratorEmails??[],...c.map(p=>p.email)]),h=Array.isArray(e.videoUrls)?e.videoUrls.map(p=>typeof p=="string"?p.trim():"").filter(Boolean):[];return{id:e.id,name:e.name??"Trabajo sin nombre",subtitle:xr(e.subtitle),objectiveId:e.objectiveId??"",parentWorkId:n,nodeType:o,tags:l,orderHint:u,nextWorkId:r,variantOfWorkId:i,descriptionMarkdown:e.descriptionMarkdown??"",estimatedMinutes:e.estimatedMinutes??0,notes:xr(e.notes),videoUrls:h,createdAt:e.createdAt??t,updatedAt:e.updatedAt??t,visibility:e.visibility??"private",ownerId:e.ownerId??"local-owner",ownerEmail:(e.ownerEmail??"").trim().toLowerCase(),collaborators:c,collaboratorEmails:f,canEdit:e.canEdit??!0,isOwner:e.isOwner??!0}},RR=(e,t,n)=>{var o;if(!n)return!1;if(n===t)return!0;const r=new Set;let i=n;for(;i;){if(i===t)return!0;if(r.has(i))break;r.add(i),i=((o=e.find(u=>u.id===i))==null?void 0:o.parentWorkId)??null}return!1},nn=(e,t)=>{if(!dk)return t;try{const n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(n){return console.warn(`No se pudo cargar ${e} desde localStorage`,n),t}},pk=e=>e==="present"||e==="absent"||e==="pending",mk=e=>e==="present"||e==="absent",up=e=>(e??[]).map(t=>{const n=pk(t.status)?t.status:"pending",r=mk(t.actualStatus)?t.actualStatus:void 0;return{assistantId:t.assistantId,status:n,actualStatus:r,notes:t.notes,actualNotes:t.actualNotes}}),rt=e=>{if(!dk)return;const t={objectives:nn(vt.objectives,[]),works:nn(vt.works,[]),sessions:nn(vt.sessions,[]),assistants:nn(vt.assistants,[]),plans:nn(vt.plans,[]),kungfuPrograms:nn(vt.kungfuPrograms,ms),kungfuCadence:nn(vt.kungfuCadence,Ii),kungfuTodayPlan:nn(vt.kungfuTodayPlan,an),workTaxonomy:nn(vt.workTaxonomy,Oi)},n=cp({...t,...e});window.localStorage.setItem(vt.objectives,JSON.stringify(n.objectives)),window.localStorage.setItem(vt.works,JSON.stringify(n.works)),window.localStorage.setItem(vt.sessions,JSON.stringify(n.sessions)),window.localStorage.setItem(vt.assistants,JSON.stringify(n.assistants)),window.localStorage.setItem(vt.plans,JSON.stringify(n.plans)),window.localStorage.setItem(vt.kungfuPrograms,JSON.stringify(n.kungfuPrograms)),window.localStorage.setItem(vt.kungfuCadence,JSON.stringify(n.kungfuCadence)),window.localStorage.setItem(vt.kungfuTodayPlan,JSON.stringify(n.kungfuTodayPlan)),window.localStorage.setItem(vt.workTaxonomy,JSON.stringify(n.workTaxonomy))},cp=e=>{const t=gt(),n=(e.works??[]).map(u=>{const c=u.parent_work_id;return Ti({...u,id:u.id,parentWorkId:On(u.parentWorkId??c??null)})}),r=Wn(e.workTaxonomy??Oi,n),i=e.kungfuCadence??Ii,o=Vu(e.kungfuTodayPlan??an),l=cs(e.plans,i,o,t);return{objectives:e.objectives??[],works:n,sessions:(e.sessions??[]).map(u=>({...u,planId:(u.planId??"").trim()||((u.kind??"class")==="personal"?Di:ps),kind:u.kind??"class",startTime:u.startTime??us,workItems:(u.workItems??[]).map(c=>({...c,focusLabel:c.focusLabel,completed:c.completed??!1})),attendance:up(u.attendance)})),assistants:e.assistants??[],plans:l,kungfuPrograms:e.kungfuPrograms??ms,kungfuCadence:i,kungfuTodayPlan:o,workTaxonomy:r}},Te=fR((e,t)=>({ready:!1,objectives:[],works:[],worksLoading:!1,sessions:[],assistants:[],plans:fk(gt(),Ii,an),kungfuPrograms:ms,kungfuCadence:Ii,kungfuTodayPlan:an,workTaxonomy:Oi,hydrate:()=>{if(t().ready)return;const n=nn(vt.objectives,[]),r=nn(vt.works,[]).map(S=>{const E=S.parent_work_id;return Ti({...S,id:S.id,parentWorkId:On(S.parentWorkId??E??null)})}),i=nn(vt.workTaxonomy,Oi),o=Wn(i,r),l=nn(vt.sessions,[]).map(S=>({...S,planId:(S.planId??"").trim()||((S.kind??"class")==="personal"?Di:ps),kind:S.kind??"class",startTime:S.startTime??us,workItems:(S.workItems??[]).map(E=>({...E,focusLabel:E.focusLabel,completed:E.completed??!1})),attendance:up(S.attendance)})),u=nn(vt.assistants,[]),c=nn(vt.kungfuPrograms,ms),f=nn(vt.kungfuCadence,Ii),h=nn(vt.kungfuTodayPlan,an),p=Vu(h),v=nn(vt.plans,[]),y=cs(v,f,p,gt());e({objectives:n,works:r,sessions:l,assistants:u,plans:y,kungfuPrograms:c,kungfuCadence:f,kungfuTodayPlan:p,workTaxonomy:o,ready:!0})},setCollections:n=>{e(r=>{const i=cp({objectives:n.objectives??r.objectives,works:n.works??r.works,sessions:n.sessions??r.sessions,assistants:n.assistants??r.assistants,plans:n.plans??r.plans,kungfuPrograms:n.kungfuPrograms??r.kungfuPrograms,kungfuCadence:n.kungfuCadence??r.kungfuCadence,kungfuTodayPlan:n.kungfuTodayPlan??r.kungfuTodayPlan,workTaxonomy:n.workTaxonomy??r.workTaxonomy}),o={...r,...i,ready:!0};return rt(i),o})},setWorks:n=>{const r=n.map(i=>Ti(i));e(i=>{const o=Wn(i.workTaxonomy,r),l={...i,works:r,workTaxonomy:o};return rt({works:r}),l})},loadWorks:async n=>{e({worksLoading:!0});try{const i=(await yR(n)).map(p=>Ti(p)),o=t().works,l=new Set(i.map(p=>p.id)),u=o.filter(p=>!l.has(p.id)&&(!p.ownerId||p.ownerId==="local-owner"||p.ownerId===n.actorId)),c=[];for(const p of u)try{const v=await Bx({id:p.id,name:p.name,subtitle:p.subtitle,objectiveId:p.objectiveId,parentWorkId:p.parentWorkId??null,nodeType:p.nodeType,tags:p.tags,orderHint:p.orderHint,nextWorkId:p.nextWorkId??null,variantOfWorkId:p.variantOfWorkId??null,descriptionMarkdown:p.descriptionMarkdown,estimatedMinutes:p.estimatedMinutes,notes:p.notes,videoUrls:p.videoUrls,visibility:p.visibility??"private",collaboratorEmails:p.collaboratorEmails??[]},n),y=Ti(v);c.push(y),l.add(y.id)}catch(v){console.error(`No se pudo migrar el trabajo legacy ${p.id}`,v)}const f=[...i];c.forEach(p=>{if(!l.has(p.id))l.add(p.id),f.push(p);else{const v=f.findIndex(y=>y.id===p.id);v>=0?f[v]=p:f.push(p)}});const h=f.map(p=>Ti(p)).sort((p,v)=>p.name.localeCompare(v.name,"es",{sensitivity:"base"}));e(p=>{const v=Wn(p.workTaxonomy,h),y={...p,works:h,workTaxonomy:v};return rt({works:h}),y})}finally{e({worksLoading:!1})}},reset:()=>{e(n=>{const r=cp({objectives:[],works:[],sessions:[],assistants:[],kungfuPrograms:ms,kungfuCadence:Ii,kungfuTodayPlan:an,workTaxonomy:Oi}),i={...n,...r,ready:!0,worksLoading:!1};return rt(i),i})},setKungfuPrograms:n=>{const r=Array.isArray(n)?n:ms;e(i=>{const o={...i,kungfuPrograms:r};return rt(o),o})},setKungfuCadence:n=>{const r=n??Ii;e(i=>{const o={...i,kungfuCadence:r};return rt(o),o})},setKungfuTodayPlan:n=>{const r=Vu(n??an);e(i=>{const o={...i,kungfuTodayPlan:r};return rt(o),o})},setWorkTaxonomy:n=>{e(r=>{const i=Wn(n??Oi,r.works),o={...r,workTaxonomy:i};return rt(o),o})},addPlan:({name:n,kind:r})=>{const i=gt(),o={id:$t(),name:n.trim()||(r==="class"?"Clases":"Personal"),kind:r,enabled:!0,cadence:r==="personal"?t().kungfuCadence:void 0,todayPlan:r==="personal"?t().kungfuTodayPlan:void 0,createdAt:i,updatedAt:i};return e(l=>{const u=cs([...l.plans,o],l.kungfuCadence,l.kungfuTodayPlan,i),c={...l,plans:u};return rt(c),c}),o},updatePlan:(n,r)=>{const i=gt();e(o=>{const l=cs(o.plans.map(c=>c.id===n?{...c,...r,updatedAt:i}:c),o.kungfuCadence,o.kungfuTodayPlan,i),u={...o,plans:l};return rt(u),u})},duplicatePlan:n=>{const r=t().plans.find(l=>l.id===n);if(!r)return;const i=gt(),o={...r,id:$t(),name:`${r.name} (copia)`,createdAt:i,updatedAt:i};return e(l=>{const u=cs([...l.plans,o],l.kungfuCadence,l.kungfuTodayPlan,i),c={...l,plans:u};return rt(c),c}),o},deletePlan:n=>{const r=t();return n===ps||n===Di||r.sessions.some(o=>(o.planId??"")===n)?!1:(e(o=>{const l=gt(),u=cs(o.plans.filter(f=>f.id!==n),o.kungfuCadence,o.kungfuTodayPlan,l),c={...o,plans:u};return rt(c),c}),!0)},upsertNodeType:n=>{const r=sh(n);if(!r)return null;const i=n.trim()||r;return e(o=>{const l=o.workTaxonomy.nodeTypes??[],u=l.some(h=>h.key===r)?l.map(h=>h.key===r?{...h,label:i}:h):[...l,{key:r,label:i}],c=Wn({...o.workTaxonomy,nodeTypes:u},o.works),f={...o,workTaxonomy:c};return rt(f),f}),r},removeNodeType:n=>{const r=(n??"").trim().toLowerCase();return!r||t().works.some(o=>(o.nodeType??"").trim().toLowerCase()===r)?!1:(e(o=>{const l=(o.workTaxonomy.nodeTypes??[]).filter(f=>f.key!==r),u=Wn({...o.workTaxonomy,nodeTypes:l},o.works),c={...o,workTaxonomy:u};return rt(c),c}),!0)},upsertTag:n=>{const r=sh(n);return r?(e(i=>{const o=i.workTaxonomy.tags??[],l=o.some(f=>f.name===r)?o:[...o,{name:r}],u=Wn({...i.workTaxonomy,tags:l},i.works),c={...i,workTaxonomy:u};return rt(c),c}),r):null},removeTag:n=>{const r=sh(n??"");return!r||t().works.some(o=>(o.tags??[]).includes(r))?!1:(e(o=>{const l=(o.workTaxonomy.tags??[]).filter(f=>f.name!==r),u=Wn({...o.workTaxonomy,tags:l},o.works),c={...o,workTaxonomy:u};return rt(c),c}),!0)},addObjective:n=>{const r={id:$t(),name:n.name,colorHex:n.colorHex,descriptionMarkdown:n.descriptionMarkdown,createdAt:gt(),updatedAt:gt()};return e(i=>{const o={objectives:[...i.objectives,r]},l={...i,...o};return rt(l),l}),r},updateObjective:(n,r)=>{e(i=>{const o=i.objectives.map(u=>u.id===n?{...u,...r,updatedAt:gt()}:u),l={...i,objectives:o};return rt(l),l})},deleteObjective:n=>t().works.some(i=>i.objectiveId===n)?!1:(e(i=>{const o=i.objectives.filter(u=>u.id!==n),l={...i,objectives:o};return rt(l),l}),!0),addWork:async(n,r)=>{const i=t(),o=On(n.parentWorkId),l=o&&i.works.some(h=>h.id===o)?o:null,u={name:n.name,subtitle:xr(n.subtitle),objectiveId:n.objectiveId,parentWorkId:l,nodeType:xr(n.nodeType)??void 0,tags:qu(n.tags),orderHint:typeof n.orderHint=="number"&&Number.isFinite(n.orderHint)?n.orderHint:void 0,nextWorkId:On(n.nextWorkId??null),variantOfWorkId:On(n.variantOfWorkId??null),descriptionMarkdown:n.descriptionMarkdown,estimatedMinutes:n.estimatedMinutes,notes:xr(n.notes),videoUrls:(n.videoUrls??[]).map(h=>h.trim()).filter(h=>h.length>0),visibility:n.visibility??"private",collaboratorEmails:lp(n.collaboratorEmails??[])},c=await Bx(u,r),f=Ti(c);return e(h=>{const p=[...h.works.filter(y=>y.id!==f.id),f],v=Wn(h.workTaxonomy,p);return rt({works:p,workTaxonomy:v}),{...h,works:p,workTaxonomy:v}}),f},updateWork:async(n,r,i)=>{const o=t(),l=o.works.find(p=>p.id===n);if(!l)throw new Error("Trabajo no encontrado");let u=l.parentWorkId??null;if(r.parentWorkId!==void 0){const p=On(r.parentWorkId);p&&(!o.works.some(v=>v.id===p)||RR(o.works,n,p))?u=null:u=p}const c={...r,subtitle:r.subtitle!==void 0?xr(r.subtitle)??null:void 0,parentWorkId:u,nodeType:r.nodeType!==void 0?xr(r.nodeType??void 0)??null:void 0,tags:r.tags?qu(r.tags):void 0,orderHint:r.orderHint!==void 0?typeof r.orderHint=="number"&&Number.isFinite(r.orderHint)?r.orderHint:null:void 0,nextWorkId:r.nextWorkId!==void 0?On(r.nextWorkId??null):void 0,variantOfWorkId:r.variantOfWorkId!==void 0?On(r.variantOfWorkId??null):void 0,notes:r.notes!==void 0?xr(r.notes)??null:void 0,videoUrls:r.videoUrls?r.videoUrls.map(p=>p.trim()).filter(p=>p.length>0):void 0,collaboratorEmails:r.collaboratorEmails?lp(r.collaboratorEmails):void 0},f=await vR(n,c,i),h=Ti(f);return e(p=>{const v=p.works.map(S=>S.id===h.id?h:S),y=Wn(p.workTaxonomy,v);return rt({works:v,workTaxonomy:y}),{...p,works:v,workTaxonomy:y}}),h},deleteWork:async(n,r)=>t().sessions.some(l=>l.workItems.some(u=>u.workId===n))||t().works.some(l=>l.parentWorkId===n)?!1:(await xR(n),e(l=>{const u=l.works.filter(f=>f.id!==n),c=Wn(l.workTaxonomy,u);return rt({works:u,workTaxonomy:c}),{...l,works:u,workTaxonomy:c}}),!0),addSession:n=>{var o;const r=(n.planId??"").trim()||((n.kind??"class")==="personal"?Di:ps),i={id:$t(),planId:r,date:n.date,kind:n.kind??((o=t().plans.find(l=>l.id===r))==null?void 0:o.kind)??"class",title:n.title,description:n.description,notes:n.notes,notesByGroupId:n.notesByGroupId,workItems:[],attendance:[],startTime:n.startTime??us,createdAt:gt(),updatedAt:gt()};return e(l=>{const u=[...l.sessions,i],c={...l,sessions:u};return rt(c),c}),i},duplicateSession:(n,r)=>{const i=t().sessions.find(u=>u.id===n);if(!i)return;const o=gt(),l={...i,id:$t(),date:r,startTime:i.startTime??us,createdAt:o,updatedAt:o,title:`${i.title} (copia)`};return l.workItems=i.workItems.slice().sort((u,c)=>u.order-c.order).map((u,c)=>({...u,id:$t(),order:c,completed:!1})),l.attendance=i.attendance.map(u=>({assistantId:u.assistantId,status:"pending",notes:u.notes,actualStatus:void 0,actualNotes:void 0})),e(u=>{const c=[...u.sessions,l],f={...u,sessions:c};return rt(f),f}),l},updateSession:(n,r)=>{e(i=>{const o=i.sessions.map(u=>u.id===n?{...u,...r,updatedAt:gt()}:u),l={...i,sessions:o};return rt(l),l})},deleteSession:n=>{e(r=>{const i=r.sessions.filter(l=>l.id!==n),o={...r,sessions:i};return rt(o),o})},updateSessionWorkItems:(n,r)=>{e(i=>{const o=i.sessions.map(u=>u.id===n?{...u,workItems:r.map((c,f)=>({...c,order:f})),updatedAt:gt()}:u),l={...i,sessions:o};return rt(l),l})},addWorkToSession:(n,r)=>{const i=t().sessions.find(u=>u.id===n);if(!i)return;const o={id:$t(),workId:r.workId,customDescriptionMarkdown:r.customDescriptionMarkdown,customDurationMinutes:r.customDurationMinutes,notes:r.notes,focusLabel:r.focusLabel,completed:!1,order:i.workItems.length},l={...i,workItems:[...i.workItems,o],updatedAt:gt()};return e(u=>{const c=u.sessions.map(h=>h.id===n?l:h),f={...u,sessions:c};return rt(f),f}),o},duplicateSessionWork:(n,r)=>{let i,o=!1;return e(l=>{const u=l.sessions.map(f=>{if(f.id!==n)return f;const h=f.workItems.findIndex(E=>E.id===r);if(h===-1)return f;o=!0;const v={...f.workItems[h],id:$t(),completed:!1},y=[...f.workItems];y.splice(h+1,0,v);const S=y.map((E,k)=>{const C={...E,order:k};return E.id===v.id&&(i=C),C});return{...f,workItems:S,updatedAt:gt()}});if(!o)return l;const c={...l,sessions:u};return rt(c),c}),i},removeWorkFromSession:(n,r)=>{e(i=>{const o=i.sessions.map(u=>{if(u.id!==n)return u;const c=u.workItems.filter(f=>f.id!==r).map((f,h)=>({...f,order:h}));return{...u,workItems:c,updatedAt:gt()}}),l={...i,sessions:o};return rt(l),l})},toggleSessionWorkCompletion:(n,r,i)=>{e(o=>{const l=o.sessions.map(c=>c.id!==n?c:{...c,workItems:c.workItems.map(f=>f.id===r?{...f,completed:i}:f),updatedAt:gt()}),u={...o,sessions:l};return rt(u),u})},reorderSessionWork:(n,r,i)=>{e(o=>{const l=o.sessions.map(c=>{if(c.id!==n)return c;const f=[...c.workItems],[h]=f.splice(r,1);return f.splice(i,0,h),{...c,workItems:f.map((p,v)=>({...p,order:v})),updatedAt:gt()}}),u={...o,sessions:l};return rt(u),u})},updateSessionWorkDetails:(n,r,i)=>{e(o=>{const l=o.sessions.map(c=>c.id!==n?c:{...c,workItems:c.workItems.map(f=>f.id===r?{...f,...i}:f),updatedAt:gt()}),u={...o,sessions:l};return rt(u),u})},replaceSessionWork:(n,r,i)=>{t().works.some(o=>o.id===i)&&e(o=>{const l=o.sessions.map(c=>{if(c.id!==n)return c;const f=c.workItems.map(h=>h.id!==r?h:{...h,workId:i,customDescriptionMarkdown:void 0,customDurationMinutes:void 0,notes:void 0,focusLabel:void 0,completed:!1});return{...c,workItems:f,updatedAt:gt()}}),u={...o,sessions:l};return rt(u),u})},setAttendanceActualStatus:(n,r,i,o)=>{e(l=>{const u=l.sessions.map(f=>{if(f.id!==n)return f;const h=f.attendance.find(v=>v.assistantId===r);let p;if(h)p=f.attendance.map(v=>{if(v.assistantId!==r)return v;const y={...v,actualStatus:i};return typeof o<"u"&&(y.actualNotes=o),y});else{const v={assistantId:r,status:"pending",actualStatus:i};typeof o<"u"&&(v.actualNotes=o),p=[...f.attendance,v]}return{...f,attendance:p,updatedAt:gt()}}),c={...l,sessions:u};return rt(c),c})},setAttendanceStatus:(n,r,i,o)=>{e(l=>{const u=l.sessions.map(f=>{if(f.id!==n)return f;const h=f.attendance.find(v=>v.assistantId===r);let p;return h?p=f.attendance.map(v=>v.assistantId===r?{...v,status:i,notes:o}:v):p=[...f.attendance,{assistantId:r,status:i,notes:o}],{...f,attendance:p,updatedAt:gt()}}),c={...l,sessions:u};return rt(c),c})},addAssistant:n=>{const r={id:$t(),name:n.name,notes:n.notes,active:n.active??!0,createdAt:gt(),updatedAt:gt()};return e(i=>{const o=[...i.assistants,r],l={...i,assistants:o};return rt(l),l}),r},updateAssistant:(n,r)=>{e(i=>{const o=i.assistants.map(u=>u.id===n?{...u,...r,updatedAt:gt()}:u),l={...i,assistants:o};return rt(l),l})},deleteAssistant:n=>{e(r=>{const i=r.assistants.filter(u=>u.id!==n),o=r.sessions.map(u=>({...u,attendance:u.attendance.filter(c=>c.assistantId!==n)})),l={...r,assistants:i,sessions:o};return rt(l),l})},importBackup:n=>{if((n.version??1)!==1)throw new Error("Versin de backup no soportada");const i=gt(),o=(n.objetivos??[]).map(_=>({..._,createdAt:_.createdAt??i,updatedAt:_.updatedAt??i})),l=(n.trabajos??[]).map(_=>{const j=_.parent_work_id,I=_.node_type,O=_.tags,P=_.order_hint,$=_.next_work_id,oe=_.variant_of_work_id;return{..._,subtitle:xr(_.subtitle),parentWorkId:On(_.parentWorkId??j??null),nodeType:xr(_.nodeType??I??void 0),tags:qu(Array.isArray(_.tags)?_.tags:Array.isArray(O)?O:[]),orderHint:typeof _.orderHint=="number"?_.orderHint:typeof P=="number"?P:void 0,nextWorkId:On(_.nextWorkId??$??null),variantOfWorkId:On(_.variantOfWorkId??oe??null),createdAt:_.createdAt??i,updatedAt:_.updatedAt??i,videoUrls:_.videoUrls??[]}}),u=(n.asistentes??[]).map(_=>({..._,createdAt:_.createdAt??i,updatedAt:_.updatedAt??i,active:_.active??!0})),c=n.kungfuPrograms??ms,f=n.kungfuCadence??Ii,h=n.kungfuTodayPlan??an,p=Wn(n.workTaxonomy??Oi,l),v=cs(n.plans,f,Vu(h),i),y=new Map;(n.sesiones??[]).forEach(_=>{const j=_.id??$t(),I=_.notesByGroupId??void 0,O={id:j,planId:(_.planId??"").trim()||((_.kind??"class")==="personal"?Di:ps),date:_.date??tt().format("YYYY-MM-DD"),kind:_.kind??"class",title:_.title??"Sesin importada",description:_.description,notes:_.notes,notesByGroupId:I??void 0,workItems:(_.workItems??[]).map((P,$)=>({id:P.id??$t(),workId:P.workId,order:P.order??$,customDescriptionMarkdown:P.customDescriptionMarkdown,customDurationMinutes:P.customDurationMinutes,notes:P.notes,focusLabel:P.focusLabel,completed:P.completed??!1,result:P.result,effort:P.effort})),attendance:up(_.attendance),startTime:_.startTime??us,createdAt:_.createdAt??i,updatedAt:_.updatedAt??i};O.workItems=O.workItems.sort((P,$)=>P.order-$.order).map((P,$)=>({...P,order:$})),y.set(j,O)}),(n.sesiones_trabajos??[]).forEach(_=>{const j=_.session_id;if(!j)return;y.has(j)||y.set(j,{id:j,planId:ps,date:_.fecha?tt(_.fecha).format("YYYY-MM-DD"):tt().format("YYYY-MM-DD"),kind:"class",title:_.titulo??"Sesin importada",description:_.descripcion,notes:_.notasSesion??_.notas,workItems:[],attendance:[],startTime:us,createdAt:i,updatedAt:i});const I=y.get(j);I.workItems.push({id:_.id??$t(),workId:_.trabajo_id,order:_.orden??I.workItems.length,customDescriptionMarkdown:_.descripcionPersonalizada,customDurationMinutes:_.duracionPersonalizada,notes:_.notas,focusLabel:_.focusLabel??_.foco,completed:_.completed??!1,result:_.result??_.resultado,effort:_.effort??_.esfuerzo})}),y.forEach(_=>{_.workItems=_.workItems.sort((j,I)=>j.order-I.order).map((j,I)=>({...j,order:I})),_.startTime=_.startTime??us});const S=new Map,E=_=>pk(_)?_:void 0,k=_=>mk(_)?_:void 0;(n.sesiones_asistencias??[]).forEach(_=>{const j=_.session_id;if(!j)return;const I=_.assistantId??_.asistente_id;if(!I)return;const O=E(_.status??_.estado)??"pending",P=k(_.actualStatus??_.estado_real),$={assistantId:I,status:O,notes:_.notes??_.notas,actualStatus:P,actualNotes:_.actualNotes??_.notas_reales},oe=S.get(j)??[];oe.push($),S.set(j,oe)}),S.forEach((_,j)=>{const I=y.get(j);I&&(I.attendance=_)});const C=Array.from(y.values());e({objectives:o,works:l,sessions:C,assistants:u,plans:v,kungfuPrograms:c,kungfuCadence:f,kungfuTodayPlan:h,workTaxonomy:p,ready:!0}),rt({objectives:o,works:l,sessions:C,assistants:u,plans:v,kungfuPrograms:c,kungfuCadence:f,kungfuTodayPlan:h,workTaxonomy:p})},exportBackup:()=>{const n=t(),r=n.sessions.flatMap(u=>u.workItems.map(c=>({id:c.id,session_id:u.id,trabajo_id:c.workId,orden:c.order,descripcionPersonalizada:c.customDescriptionMarkdown,duracionPersonalizada:c.customDurationMinutes,notas:c.notes,foco:c.focusLabel,focusLabel:c.focusLabel,completed:c.completed??!1,result:c.result,effort:c.effort}))),i=n.sessions.flatMap(u=>u.attendance.map(c=>({session_id:u.id,assistantId:c.assistantId,estado:c.status,notas:c.notes,...c.actualStatus?{actualStatus:c.actualStatus,estado_real:c.actualStatus}:{},...c.actualNotes?{actualNotes:c.actualNotes,notas_reales:c.actualNotes}:{}}))),o=n.sessions.map(u=>({id:u.id,planId:u.planId,date:u.date,kind:u.kind,title:u.title,description:u.description,notes:u.notes,notesByGroupId:u.notesByGroupId,startTime:u.startTime,createdAt:u.createdAt,updatedAt:u.updatedAt}));return{version:1,usuarios:[],objetivos:n.objectives,trabajos:n.works,sesiones:o,sesiones_trabajos:r,asistentes:n.assistants,sesiones_asistencias:i,plans:n.plans,kungfuPrograms:n.kungfuPrograms,kungfuCadence:n.kungfuCadence,kungfuTodayPlan:n.kungfuTodayPlan,workTaxonomy:n.workTaxonomy}}})),Wx=1,OR=[{id:"default",name:"Kung Fu  activo",enabled:!0,include:[{byTags:["kungfu"]}],exclude:[]}],MR={targetsDays:{work:7,technique:5,segment:8,form:10,drill:7},overrides:[]},LR={limitMode:"count",maxItems:12,minutesBudget:30,template:{totalMinutes:30,focusMinutes:18,rouletteMinutes:10,recapMinutes:2},defaultMinutesByNodeType:{work:3,technique:1.5,segment:6,form:15,drill:4,link:2},focusSelectors:[],rouletteSelectors:[],groups:[{id:"formas",name:"Formas",enabled:!0,order:1,type:"work",limitMode:"minutes",minutesBudget:18,strategy:"overdue",hierarchyRule:"prefer_leaves",include:[{byNodeTypes:["segment","form"]}],exclude:[]},{id:"tecnicas",name:"Tcnicas",enabled:!0,order:2,type:"work",limitMode:"minutes",minutesBudget:10,strategy:"weighted",hierarchyRule:"allow_all",include:[{byNodeTypes:["technique"]},{byTags:["roulette"]}],exclude:[]},{id:"recap",name:"Recap",enabled:!0,order:99,type:"note",limitMode:"minutes",minutesBudget:2}]},DR={nodeTypes:[{key:"form",label:"Form"},{key:"segment",label:"Segment"},{key:"application",label:"Application"},{key:"technique",label:"Technique"},{key:"drill",label:"Drill"},{key:"work",label:"Work"},{key:"link",label:"Link"},{key:"style",label:"Style"}],tags:[]},Ou=e=>({objectives:e.objectives,works:e.works,sessions:e.sessions,assistants:e.assistants,plans:e.plans,kungfuPrograms:e.kungfuPrograms,kungfuCadence:e.kungfuCadence,kungfuTodayPlan:e.kungfuTodayPlan,workTaxonomy:e.workTaxonomy}),$R=e=>({objectives:e.objectives??[],works:e.works??[],sessions:(e.sessions??[]).map(t=>({...t,planId:(t.planId??"").trim()||void 0,kind:t.kind??"class",workItems:t.workItems??[],attendance:t.attendance??[]})),assistants:e.assistants??[],plans:e.plans??[],kungfuPrograms:e.kungfuPrograms??OR,kungfuCadence:e.kungfuCadence??MR,kungfuTodayPlan:e.kungfuTodayPlan??LR,workTaxonomy:e.workTaxonomy??DR}),FR=(e,t)=>e.objectives!==t.objectives||e.works!==t.works||e.sessions!==t.sessions||e.assistants!==t.assistants||e.plans!==t.plans||e.kungfuPrograms!==t.kungfuPrograms||e.kungfuCadence!==t.kungfuCadence||e.kungfuTodayPlan!==t.kungfuTodayPlan||e.workTaxonomy!==t.workTaxonomy;function zR(){const{user:e}=Ns(),t=Te(f=>f.setCollections),n=Te(f=>f.reset),r=Te(f=>f.ready),i=w.useRef(!1),o=w.useRef(null),l=w.useRef(null),u=w.useRef(null),c=w.useRef(Ou(Te.getState()));w.useEffect(()=>()=>{o.current&&(window.clearTimeout(o.current),o.current=null)},[]),w.useEffect(()=>{e||(n(),u.current=null,l.current=null,i.current=!1,c.current=Ou(Te.getState()),o.current&&(window.clearTimeout(o.current),o.current=null))},[e,n]),w.useEffect(()=>{if(!e)return;let f=!0;(async()=>{const{data:v,error:y}=await Vt.from("planner_states").select("data, updated_at").eq("user_id",e.id).maybeSingle();if(!f)return;if(y&&y.code!=="PGRST116"){console.error("No se pudo cargar el estado remoto",y);return}const S=v;if(S!=null&&S.data){const E=$R(S.data??{});i.current=!0,u.current=S.updated_at,c.current=E,t(E)}else if(r){const E=Ou(Te.getState());l.current=null;const{error:k,data:C}=await Vt.from("planner_states").upsert({user_id:e.id,data:{version:Wx,...E}},{onConflict:"user_id"}).select("updated_at").maybeSingle(),_=C;k?console.error("No se pudo inicializar el estado remoto",k):_&&(u.current=_.updated_at)}})();const p=Te.subscribe(v=>{if(!f)return;const y=Ou(v);if(i.current){i.current=!1,c.current=y,l.current=null;return}const S=c.current;FR(y,S)&&(c.current=y,l.current=y,o.current&&window.clearTimeout(o.current),o.current=window.setTimeout(()=>{if(!l.current)return;const E=l.current;l.current=null,(async()=>{const{error:k,data:C}=await Vt.from("planner_states").upsert({user_id:e.id,data:{version:Wx,...E}},{onConflict:"user_id"}).select("updated_at").maybeSingle(),_=C;k?console.error("No se pudo guardar el estado remoto",k):_&&(u.current=_.updated_at)})()},600))});return()=>{f=!1,p(),o.current&&(window.clearTimeout(o.current),o.current=null)}},[e,r,t])}function BR(){const{user:e}=Ns(),t=Te(r=>r.loadWorks),n=Te(r=>r.setWorks);w.useEffect(()=>{if(!e){n([]);return}const r={actorId:e.id,actorEmail:e.email??""},i=async()=>{try{await t(r)}catch(l){console.error("No se pudieron sincronizar los trabajos colaborativos",l)}};i();const o=Vt.channel("works-collaboration").on("postgres_changes",{event:"*",schema:"public",table:"works"},()=>{i()}).on("postgres_changes",{event:"*",schema:"public",table:"work_collaborators"},()=>{i()}).subscribe();return()=>{Vt.removeChannel(o)}},[e,t,n])}var Yu={exports:{}},UR=Yu.exports,Hx;function WR(){return Hx||(Hx=1,(function(e,t){(function(n,r){e.exports=r(lk())})(UR,(function(n){function r(l){return l&&typeof l=="object"&&"default"in l?l:{default:l}}var i=r(n),o={name:"es",monthsShort:"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),weekStart:1,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},ordinal:function(l){return l+""}};return i.default.locale(o,null,!0),o}))})(Yu)),Yu.exports}WR();function Bi({objective:e,size:t="md"}){if(!e)return null;const n=t==="sm"?"text-xs px-2 py-1":"text-sm px-3 py-1.5";return g.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full font-medium text-slate-950 shadow shadow-black/30 ${n}`,style:{backgroundColor:e.colorHex},children:[g.jsx("span",{className:"h-2.5 w-2.5 rounded-full border border-black/20 bg-white/70"}),e.name]})}function HR(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const VR=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,qR=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,YR={};function Vx(e,t){return(YR.jsx?qR:VR).test(e)}const GR=/[ \t\n\f\r]/g;function KR(e){return typeof e=="object"?e.type==="text"?qx(e.value):!1:qx(e)}function qx(e){return e.replace(GR,"")===""}class hl{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}hl.prototype.normal={};hl.prototype.property={};hl.prototype.space=void 0;function gk(e,t){const n={},r={};for(const i of e)Object.assign(n,i.property),Object.assign(r,i.normal);return new hl(n,r,t)}function dp(e){return e.toLowerCase()}class Ln{constructor(t,n){this.attribute=n,this.property=t}}Ln.prototype.attribute="";Ln.prototype.booleanish=!1;Ln.prototype.boolean=!1;Ln.prototype.commaOrSpaceSeparated=!1;Ln.prototype.commaSeparated=!1;Ln.prototype.defined=!1;Ln.prototype.mustUseProperty=!1;Ln.prototype.number=!1;Ln.prototype.overloadedBoolean=!1;Ln.prototype.property="";Ln.prototype.spaceSeparated=!1;Ln.prototype.space=void 0;let JR=0;const nt=Is(),Bt=Is(),fp=Is(),Ee=Is(),Et=Is(),Eo=Is(),Hn=Is();function Is(){return 2**++JR}const hp=Object.freeze(Object.defineProperty({__proto__:null,boolean:nt,booleanish:Bt,commaOrSpaceSeparated:Hn,commaSeparated:Eo,number:Ee,overloadedBoolean:fp,spaceSeparated:Et},Symbol.toStringTag,{value:"Module"})),oh=Object.keys(hp);class im extends Ln{constructor(t,n,r,i){let o=-1;if(super(t,n),Yx(this,"space",i),typeof r=="number")for(;++o<oh.length;){const l=oh[o];Yx(this,oh[o],(r&hp[l])===hp[l])}}}im.prototype.defined=!0;function Yx(e,t,n){n&&(e[t]=n)}function Fo(e){const t={},n={};for(const[r,i]of Object.entries(e.properties)){const o=new im(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(o.mustUseProperty=!0),t[r]=o,n[dp(r)]=r,n[dp(o.attribute)]=r}return new hl(t,n,e.space)}const yk=Fo({properties:{ariaActiveDescendant:null,ariaAtomic:Bt,ariaAutoComplete:null,ariaBusy:Bt,ariaChecked:Bt,ariaColCount:Ee,ariaColIndex:Ee,ariaColSpan:Ee,ariaControls:Et,ariaCurrent:null,ariaDescribedBy:Et,ariaDetails:null,ariaDisabled:Bt,ariaDropEffect:Et,ariaErrorMessage:null,ariaExpanded:Bt,ariaFlowTo:Et,ariaGrabbed:Bt,ariaHasPopup:null,ariaHidden:Bt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Et,ariaLevel:Ee,ariaLive:null,ariaModal:Bt,ariaMultiLine:Bt,ariaMultiSelectable:Bt,ariaOrientation:null,ariaOwns:Et,ariaPlaceholder:null,ariaPosInSet:Ee,ariaPressed:Bt,ariaReadOnly:Bt,ariaRelevant:null,ariaRequired:Bt,ariaRoleDescription:Et,ariaRowCount:Ee,ariaRowIndex:Ee,ariaRowSpan:Ee,ariaSelected:Bt,ariaSetSize:Ee,ariaSort:null,ariaValueMax:Ee,ariaValueMin:Ee,ariaValueNow:Ee,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function vk(e,t){return t in e?e[t]:t}function xk(e,t){return vk(e,t.toLowerCase())}const QR=Fo({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Eo,acceptCharset:Et,accessKey:Et,action:null,allow:null,allowFullScreen:nt,allowPaymentRequest:nt,allowUserMedia:nt,alt:null,as:null,async:nt,autoCapitalize:null,autoComplete:Et,autoFocus:nt,autoPlay:nt,blocking:Et,capture:null,charSet:null,checked:nt,cite:null,className:Et,cols:Ee,colSpan:null,content:null,contentEditable:Bt,controls:nt,controlsList:Et,coords:Ee|Eo,crossOrigin:null,data:null,dateTime:null,decoding:null,default:nt,defer:nt,dir:null,dirName:null,disabled:nt,download:fp,draggable:Bt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:nt,formTarget:null,headers:Et,height:Ee,hidden:fp,high:Ee,href:null,hrefLang:null,htmlFor:Et,httpEquiv:Et,id:null,imageSizes:null,imageSrcSet:null,inert:nt,inputMode:null,integrity:null,is:null,isMap:nt,itemId:null,itemProp:Et,itemRef:Et,itemScope:nt,itemType:Et,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:nt,low:Ee,manifest:null,max:null,maxLength:Ee,media:null,method:null,min:null,minLength:Ee,multiple:nt,muted:nt,name:null,nonce:null,noModule:nt,noValidate:nt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:nt,optimum:Ee,pattern:null,ping:Et,placeholder:null,playsInline:nt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:nt,referrerPolicy:null,rel:Et,required:nt,reversed:nt,rows:Ee,rowSpan:Ee,sandbox:Et,scope:null,scoped:nt,seamless:nt,selected:nt,shadowRootClonable:nt,shadowRootDelegatesFocus:nt,shadowRootMode:null,shape:null,size:Ee,sizes:null,slot:null,span:Ee,spellCheck:Bt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ee,step:null,style:null,tabIndex:Ee,target:null,title:null,translate:null,type:null,typeMustMatch:nt,useMap:null,value:Bt,width:Ee,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Et,axis:null,background:null,bgColor:null,border:Ee,borderColor:null,bottomMargin:Ee,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:nt,declare:nt,event:null,face:null,frame:null,frameBorder:null,hSpace:Ee,leftMargin:Ee,link:null,longDesc:null,lowSrc:null,marginHeight:Ee,marginWidth:Ee,noResize:nt,noHref:nt,noShade:nt,noWrap:nt,object:null,profile:null,prompt:null,rev:null,rightMargin:Ee,rules:null,scheme:null,scrolling:Bt,standby:null,summary:null,text:null,topMargin:Ee,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ee,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:nt,disableRemotePlayback:nt,prefix:null,property:null,results:Ee,security:null,unselectable:null},space:"html",transform:xk}),XR=Fo({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Hn,accentHeight:Ee,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ee,amplitude:Ee,arabicForm:null,ascent:Ee,attributeName:null,attributeType:null,azimuth:Ee,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ee,by:null,calcMode:null,capHeight:Ee,className:Et,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ee,diffuseConstant:Ee,direction:null,display:null,dur:null,divisor:Ee,dominantBaseline:null,download:nt,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ee,enableBackground:null,end:null,event:null,exponent:Ee,externalResourcesRequired:null,fill:null,fillOpacity:Ee,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Eo,g2:Eo,glyphName:Eo,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ee,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ee,horizOriginX:Ee,horizOriginY:Ee,id:null,ideographic:Ee,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ee,k:Ee,k1:Ee,k2:Ee,k3:Ee,k4:Ee,kernelMatrix:Hn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ee,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ee,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ee,overlineThickness:Ee,paintOrder:null,panose1:null,path:null,pathLength:Ee,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Et,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ee,pointsAtY:Ee,pointsAtZ:Ee,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Hn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Hn,rev:Hn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Hn,requiredFeatures:Hn,requiredFonts:Hn,requiredFormats:Hn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ee,specularExponent:Ee,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ee,strikethroughThickness:Ee,string:null,stroke:null,strokeDashArray:Hn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ee,strokeOpacity:Ee,strokeWidth:null,style:null,surfaceScale:Ee,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Hn,tabIndex:Ee,tableValues:null,target:null,targetX:Ee,targetY:Ee,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Hn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Ee,underlineThickness:Ee,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ee,values:null,vAlphabetic:Ee,vMathematical:Ee,vectorEffect:null,vHanging:Ee,vIdeographic:Ee,version:null,vertAdvY:Ee,vertOriginX:Ee,vertOriginY:Ee,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ee,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:vk}),wk=Fo({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),bk=Fo({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:xk}),kk=Fo({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),ZR={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},eO=/[A-Z]/g,Gx=/-[a-z]/g,tO=/^data[-\w.:]+$/i;function nO(e,t){const n=dp(t);let r=t,i=Ln;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&tO.test(t)){if(t.charAt(4)==="-"){const o=t.slice(5).replace(Gx,iO);r="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=t.slice(4);if(!Gx.test(o)){let l=o.replace(eO,rO);l.charAt(0)!=="-"&&(l="-"+l),t="data"+l}}i=im}return new i(r,t)}function rO(e){return"-"+e.toLowerCase()}function iO(e){return e.charAt(1).toUpperCase()}const sO=gk([yk,QR,wk,bk,kk],"html"),sm=gk([yk,XR,wk,bk,kk],"svg");function oO(e){return e.join(" ").trim()}var co={},ah,Kx;function aO(){if(Kx)return ah;Kx=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,l=/^[;\s]*/,u=/^\s+|\s+$/g,c=`
`,f="/",h="*",p="",v="comment",y="declaration";ah=function(E,k){if(typeof E!="string")throw new TypeError("First argument must be a string");if(!E)return[];k=k||{};var C=1,_=1;function j(W){var Y=W.match(t);Y&&(C+=Y.length);var M=W.lastIndexOf(c);_=~M?W.length-M:_+W.length}function I(){var W={line:C,column:_};return function(Y){return Y.position=new O(W),oe(),Y}}function O(W){this.start=W,this.end={line:C,column:_},this.source=k.source}O.prototype.content=E;function P(W){var Y=new Error(k.source+":"+C+":"+_+": "+W);if(Y.reason=W,Y.filename=k.source,Y.line=C,Y.column=_,Y.source=E,!k.silent)throw Y}function $(W){var Y=W.exec(E);if(Y){var M=Y[0];return j(M),E=E.slice(M.length),Y}}function oe(){$(n)}function X(W){var Y;for(W=W||[];Y=R();)Y!==!1&&W.push(Y);return W}function R(){var W=I();if(!(f!=E.charAt(0)||h!=E.charAt(1))){for(var Y=2;p!=E.charAt(Y)&&(h!=E.charAt(Y)||f!=E.charAt(Y+1));)++Y;if(Y+=2,p===E.charAt(Y-1))return P("End of comment missing");var M=E.slice(2,Y-2);return _+=2,j(M),E=E.slice(Y),_+=2,W({type:v,comment:M})}}function D(){var W=I(),Y=$(r);if(Y){if(R(),!$(i))return P("property missing ':'");var M=$(o),G=W({type:y,property:S(Y[0].replace(e,p)),value:M?S(M[0].replace(e,p)):p});return $(l),G}}function re(){var W=[];X(W);for(var Y;Y=D();)Y!==!1&&(W.push(Y),X(W));return W}return oe(),re()};function S(E){return E?E.replace(u,p):p}return ah}var Jx;function lO(){if(Jx)return co;Jx=1;var e=co&&co.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(co,"__esModule",{value:!0}),co.default=n;var t=e(aO());function n(r,i){var o=null;if(!r||typeof r!="string")return o;var l=(0,t.default)(r),u=typeof i=="function";return l.forEach(function(c){if(c.type==="declaration"){var f=c.property,h=c.value;u?i(f,h,c):h&&(o=o||{},o[f]=h)}}),o}return co}var _a={},Qx;function uO(){if(Qx)return _a;Qx=1,Object.defineProperty(_a,"__esModule",{value:!0}),_a.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,o=function(f){return!f||n.test(f)||e.test(f)},l=function(f,h){return h.toUpperCase()},u=function(f,h){return"".concat(h,"-")},c=function(f,h){return h===void 0&&(h={}),o(f)?f:(f=f.toLowerCase(),h.reactCompat?f=f.replace(i,u):f=f.replace(r,u),f.replace(t,l))};return _a.camelCase=c,_a}var Ca,Xx;function cO(){if(Xx)return Ca;Xx=1;var e=Ca&&Ca.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},t=e(lO()),n=uO();function r(i,o){var l={};return!i||typeof i!="string"||(0,t.default)(i,function(u,c){u&&c&&(l[(0,n.camelCase)(u,o)]=c)}),l}return r.default=r,Ca=r,Ca}var dO=cO();const fO=Ao(dO),Sk=Ek("end"),om=Ek("start");function Ek(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function hO(e){const t=om(e),n=Sk(e);if(t&&n)return{start:t,end:n}}function za(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Zx(e.position):"start"in e||"end"in e?Zx(e):"line"in e||"column"in e?pp(e):""}function pp(e){return e0(e&&e.line)+":"+e0(e&&e.column)}function Zx(e){return pp(e&&e.start)+"-"+pp(e&&e.end)}function e0(e){return e&&typeof e=="number"?e:1}class vn extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",o={},l=!1;if(n&&("line"in n&&"column"in n?o={place:n}:"start"in n&&"end"in n?o={place:n}:"type"in n?o={ancestors:[n],place:n.position}:o={...n}),typeof t=="string"?i=t:!o.cause&&t&&(l=!0,i=t.message,o.cause=t),!o.ruleId&&!o.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?o.ruleId=r:(o.source=r.slice(0,c),o.ruleId=r.slice(c+1))}if(!o.place&&o.ancestors&&o.ancestors){const c=o.ancestors[o.ancestors.length-1];c&&(o.place=c.position)}const u=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=u?u.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=u?u.line:void 0,this.name=za(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=l&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}vn.prototype.file="";vn.prototype.name="";vn.prototype.reason="";vn.prototype.message="";vn.prototype.stack="";vn.prototype.column=void 0;vn.prototype.line=void 0;vn.prototype.ancestors=void 0;vn.prototype.cause=void 0;vn.prototype.fatal=void 0;vn.prototype.place=void 0;vn.prototype.ruleId=void 0;vn.prototype.source=void 0;const am={}.hasOwnProperty,pO=new Map,mO=/[A-Z]/g,gO=new Set(["table","tbody","thead","tfoot","tr"]),yO=new Set(["td","th"]),_k="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function vO(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=CO(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=_O(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?sm:sO,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},o=Ck(i,e,void 0);return o&&typeof o!="string"?o:i.create(e,i.Fragment,{children:o||void 0},void 0)}function Ck(e,t,n){if(t.type==="element")return xO(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return wO(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return kO(e,t,n);if(t.type==="mdxjsEsm")return bO(e,t);if(t.type==="root")return SO(e,t,n);if(t.type==="text")return EO(e,t)}function xO(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=sm,e.schema=i),e.ancestors.push(t);const o=Nk(e,t.tagName,!1),l=jO(e,t);let u=um(e,t);return gO.has(t.tagName)&&(u=u.filter(function(c){return typeof c=="string"?!KR(c):!0})),jk(e,l,o,t),lm(l,u),e.ancestors.pop(),e.schema=r,e.create(t,o,l,n)}function wO(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}tl(e,t.position)}function bO(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);tl(e,t.position)}function kO(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=sm,e.schema=i),e.ancestors.push(t);const o=t.name===null?e.Fragment:Nk(e,t.name,!0),l=NO(e,t),u=um(e,t);return jk(e,l,o,t),lm(l,u),e.ancestors.pop(),e.schema=r,e.create(t,o,l,n)}function SO(e,t,n){const r={};return lm(r,um(e,t)),e.create(t,e.Fragment,r,n)}function EO(e,t){return t.value}function jk(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function lm(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function _O(e,t,n){return r;function r(i,o,l,u){const f=Array.isArray(l.children)?n:t;return u?f(o,l,u):f(o,l)}}function CO(e,t){return n;function n(r,i,o,l){const u=Array.isArray(o.children),c=om(r);return t(i,o,l,u,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function jO(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&am.call(t.properties,i)){const o=TO(e,i,t.properties[i]);if(o){const[l,u]=o;e.tableCellAlignToStyle&&l==="align"&&typeof u=="string"&&yO.has(t.tagName)?r=u:n[l]=u}}if(r){const o=n.style||(n.style={});o[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function NO(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const o=r.data.estree.body[0];o.type;const l=o.expression;l.type;const u=l.properties[0];u.type,Object.assign(n,e.evaluater.evaluateExpression(u.argument))}else tl(e,t.position);else{const i=r.name;let o;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const u=r.value.data.estree.body[0];u.type,o=e.evaluater.evaluateExpression(u.expression)}else tl(e,t.position);else o=r.value===null?!0:r.value;n[i]=o}return n}function um(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:pO;for(;++r<t.children.length;){const o=t.children[r];let l;if(e.passKeys){const c=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(c){const f=i.get(c)||0;l=c+"-"+f,i.set(c,f+1)}}const u=Ck(e,o,l);u!==void 0&&n.push(u)}return n}function TO(e,t,n){const r=nO(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?HR(n):oO(n)),r.property==="style"){let i=typeof n=="object"?n:IO(e,String(n));return e.stylePropertyNameCase==="css"&&(i=PO(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?ZR[r.property]||r.property:r.attribute,n]}}function IO(e,t){try{return fO(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,i=new vn("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=_k+"#cannot-parse-style-attribute",i}}function Nk(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let o=-1,l;for(;++o<i.length;){const u=Vx(i[o])?{type:"Identifier",name:i[o]}:{type:"Literal",value:i[o]};l=l?{type:"MemberExpression",object:l,property:u,computed:!!(o&&u.type==="Literal"),optional:!1}:u}r=l}else r=Vx(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return am.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);tl(e)}function tl(e,t){const n=new vn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=_k+"#cannot-handle-mdx-estrees-without-createevaluater",n}function PO(e){const t={};let n;for(n in e)am.call(e,n)&&(t[AO(n)]=e[n]);return t}function AO(e){let t=e.replace(mO,RO);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function RO(e){return"-"+e.toLowerCase()}const lh={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},OO={};function cm(e,t){const n=OO,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Tk(e,r,i)}function Tk(e,t,n){if(MO(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return t0(e.children,t,n)}return Array.isArray(e)?t0(e,t,n):""}function t0(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=Tk(e[i],t,n);return r.join("")}function MO(e){return!!(e&&typeof e=="object")}const n0=document.createElement("i");function dm(e){const t="&"+e+";";n0.innerHTML=t;const n=n0.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Gn(e,t,n,r){const i=e.length;let o=0,l;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)l=Array.from(r),l.unshift(t,n),e.splice(...l);else for(n&&e.splice(t,n);o<r.length;)l=r.slice(o,o+1e4),l.unshift(t,0),e.splice(...l),o+=1e4,t+=1e4}function or(e,t){return e.length>0?(Gn(e,e.length,0,t),e):t}const r0={}.hasOwnProperty;function Ik(e){const t={};let n=-1;for(;++n<e.length;)LO(t,e[n]);return t}function LO(e,t){let n;for(n in t){const i=(r0.call(e,n)?e[n]:void 0)||(e[n]={}),o=t[n];let l;if(o)for(l in o){r0.call(i,l)||(i[l]=[]);const u=o[l];DO(i[l],Array.isArray(u)?u:u?[u]:[])}}}function DO(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Gn(e,0,0,r)}function Pk(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function kr(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const bn=Hi(/[A-Za-z]/),yn=Hi(/[\dA-Za-z]/),$O=Hi(/[#-'*+\--9=?A-Z^-~]/);function hc(e){return e!==null&&(e<32||e===127)}const mp=Hi(/\d/),FO=Hi(/[\dA-Fa-f]/),zO=Hi(/[!-/:-@[-`{-~]/);function Ye(e){return e!==null&&e<-2}function wt(e){return e!==null&&(e<0||e===32)}function at(e){return e===-2||e===-1||e===32}const Bc=Hi(new RegExp("\\p{P}|\\p{S}","u")),ks=Hi(/\s/);function Hi(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function zo(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const o=e.charCodeAt(n);let l="";if(o===37&&yn(e.charCodeAt(n+1))&&yn(e.charCodeAt(n+2)))i=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(l=String.fromCharCode(o));else if(o>55295&&o<57344){const u=e.charCodeAt(n+1);o<56320&&u>56319&&u<57344?(l=String.fromCharCode(o,u),i=1):l=""}else l=String.fromCharCode(o);l&&(t.push(e.slice(r,n),encodeURIComponent(l)),r=n+i+1,l=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function ut(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let o=0;return l;function l(c){return at(c)?(e.enter(n),u(c)):t(c)}function u(c){return at(c)&&o++<i?(e.consume(c),u):(e.exit(n),t(c))}}const BO={tokenize:UO};function UO(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(u){if(u===null){e.consume(u);return}return e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),ut(e,t,"linePrefix")}function i(u){return e.enter("paragraph"),o(u)}function o(u){const c=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,l(u)}function l(u){if(u===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(u);return}return Ye(u)?(e.consume(u),e.exit("chunkText"),o):(e.consume(u),l)}}const WO={tokenize:HO},i0={tokenize:VO};function HO(e){const t=this,n=[];let r=0,i,o,l;return u;function u(j){if(r<n.length){const I=n[r];return t.containerState=I[1],e.attempt(I[0].continuation,c,f)(j)}return f(j)}function c(j){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&_();const I=t.events.length;let O=I,P;for(;O--;)if(t.events[O][0]==="exit"&&t.events[O][1].type==="chunkFlow"){P=t.events[O][1].end;break}C(r);let $=I;for(;$<t.events.length;)t.events[$][1].end={...P},$++;return Gn(t.events,O+1,0,t.events.slice(I)),t.events.length=$,f(j)}return u(j)}function f(j){if(r===n.length){if(!i)return v(j);if(i.currentConstruct&&i.currentConstruct.concrete)return S(j);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(i0,h,p)(j)}function h(j){return i&&_(),C(r),v(j)}function p(j){return t.parser.lazy[t.now().line]=r!==n.length,l=t.now().offset,S(j)}function v(j){return t.containerState={},e.attempt(i0,y,S)(j)}function y(j){return r++,n.push([t.currentConstruct,t.containerState]),v(j)}function S(j){if(j===null){i&&_(),C(0),e.consume(j);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:o}),E(j)}function E(j){if(j===null){k(e.exit("chunkFlow"),!0),C(0),e.consume(j);return}return Ye(j)?(e.consume(j),k(e.exit("chunkFlow")),r=0,t.interrupt=void 0,u):(e.consume(j),E)}function k(j,I){const O=t.sliceStream(j);if(I&&O.push(null),j.previous=o,o&&(o.next=j),o=j,i.defineSkip(j.start),i.write(O),t.parser.lazy[j.start.line]){let P=i.events.length;for(;P--;)if(i.events[P][1].start.offset<l&&(!i.events[P][1].end||i.events[P][1].end.offset>l))return;const $=t.events.length;let oe=$,X,R;for(;oe--;)if(t.events[oe][0]==="exit"&&t.events[oe][1].type==="chunkFlow"){if(X){R=t.events[oe][1].end;break}X=!0}for(C(r),P=$;P<t.events.length;)t.events[P][1].end={...R},P++;Gn(t.events,oe+1,0,t.events.slice($)),t.events.length=P}}function C(j){let I=n.length;for(;I-- >j;){const O=n[I];t.containerState=O[1],O[0].exit.call(t,e)}n.length=j}function _(){i.write([null]),o=void 0,i=void 0,t.containerState._closeFlow=void 0}}function VO(e,t,n){return ut(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Po(e){if(e===null||wt(e)||ks(e))return 1;if(Bc(e))return 2}function Uc(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const o=e[i].resolveAll;o&&!r.includes(o)&&(t=o(t,n),r.push(o))}return t}const gp={name:"attention",resolveAll:qO,tokenize:YO};function qO(e,t){let n=-1,r,i,o,l,u,c,f,h;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const p={...e[r][1].end},v={...e[n][1].start};s0(p,-c),s0(v,c),l={type:c>1?"strongSequence":"emphasisSequence",start:p,end:{...e[r][1].end}},u={type:c>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:v},o={type:c>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},i={type:c>1?"strong":"emphasis",start:{...l.start},end:{...u.end}},e[r][1].end={...l.start},e[n][1].start={...u.end},f=[],e[r][1].end.offset-e[r][1].start.offset&&(f=or(f,[["enter",e[r][1],t],["exit",e[r][1],t]])),f=or(f,[["enter",i,t],["enter",l,t],["exit",l,t],["enter",o,t]]),f=or(f,Uc(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),f=or(f,[["exit",o,t],["enter",u,t],["exit",u,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(h=2,f=or(f,[["enter",e[n][1],t],["exit",e[n][1],t]])):h=0,Gn(e,r-1,n-r+3,f),n=r+f.length-h-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function YO(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Po(r);let o;return l;function l(c){return o=c,e.enter("attentionSequence"),u(c)}function u(c){if(c===o)return e.consume(c),u;const f=e.exit("attentionSequence"),h=Po(c),p=!h||h===2&&i||n.includes(c),v=!i||i===2&&h||n.includes(r);return f._open=!!(o===42?p:p&&(i||!v)),f._close=!!(o===42?v:v&&(h||!p)),t(c)}}function s0(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const GO={name:"autolink",tokenize:KO};function KO(e,t,n){let r=0;return i;function i(y){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(y),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),o}function o(y){return bn(y)?(e.consume(y),l):y===64?n(y):f(y)}function l(y){return y===43||y===45||y===46||yn(y)?(r=1,u(y)):f(y)}function u(y){return y===58?(e.consume(y),r=0,c):(y===43||y===45||y===46||yn(y))&&r++<32?(e.consume(y),u):(r=0,f(y))}function c(y){return y===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(y),e.exit("autolinkMarker"),e.exit("autolink"),t):y===null||y===32||y===60||hc(y)?n(y):(e.consume(y),c)}function f(y){return y===64?(e.consume(y),h):$O(y)?(e.consume(y),f):n(y)}function h(y){return yn(y)?p(y):n(y)}function p(y){return y===46?(e.consume(y),r=0,h):y===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(y),e.exit("autolinkMarker"),e.exit("autolink"),t):v(y)}function v(y){if((y===45||yn(y))&&r++<63){const S=y===45?v:p;return e.consume(y),S}return n(y)}}const pl={partial:!0,tokenize:JO};function JO(e,t,n){return r;function r(o){return at(o)?ut(e,i,"linePrefix")(o):i(o)}function i(o){return o===null||Ye(o)?t(o):n(o)}}const Ak={continuation:{tokenize:XO},exit:ZO,name:"blockQuote",tokenize:QO};function QO(e,t,n){const r=this;return i;function i(l){if(l===62){const u=r.containerState;return u.open||(e.enter("blockQuote",{_container:!0}),u.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(l),e.exit("blockQuoteMarker"),o}return n(l)}function o(l){return at(l)?(e.enter("blockQuotePrefixWhitespace"),e.consume(l),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(l))}}function XO(e,t,n){const r=this;return i;function i(l){return at(l)?ut(e,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):o(l)}function o(l){return e.attempt(Ak,t,n)(l)}}function ZO(e){e.exit("blockQuote")}const Rk={name:"characterEscape",tokenize:eM};function eM(e,t,n){return r;function r(o){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(o),e.exit("escapeMarker"),i}function i(o){return zO(o)?(e.enter("characterEscapeValue"),e.consume(o),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(o)}}const Ok={name:"characterReference",tokenize:tM};function tM(e,t,n){const r=this;let i=0,o,l;return u;function u(p){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(p),e.exit("characterReferenceMarker"),c}function c(p){return p===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(p),e.exit("characterReferenceMarkerNumeric"),f):(e.enter("characterReferenceValue"),o=31,l=yn,h(p))}function f(p){return p===88||p===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(p),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),o=6,l=FO,h):(e.enter("characterReferenceValue"),o=7,l=mp,h(p))}function h(p){if(p===59&&i){const v=e.exit("characterReferenceValue");return l===yn&&!dm(r.sliceSerialize(v))?n(p):(e.enter("characterReferenceMarker"),e.consume(p),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return l(p)&&i++<o?(e.consume(p),h):n(p)}}const o0={partial:!0,tokenize:rM},a0={concrete:!0,name:"codeFenced",tokenize:nM};function nM(e,t,n){const r=this,i={partial:!0,tokenize:O};let o=0,l=0,u;return c;function c(P){return f(P)}function f(P){const $=r.events[r.events.length-1];return o=$&&$[1].type==="linePrefix"?$[2].sliceSerialize($[1],!0).length:0,u=P,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),h(P)}function h(P){return P===u?(l++,e.consume(P),h):l<3?n(P):(e.exit("codeFencedFenceSequence"),at(P)?ut(e,p,"whitespace")(P):p(P))}function p(P){return P===null||Ye(P)?(e.exit("codeFencedFence"),r.interrupt?t(P):e.check(o0,E,I)(P)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),v(P))}function v(P){return P===null||Ye(P)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),p(P)):at(P)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),ut(e,y,"whitespace")(P)):P===96&&P===u?n(P):(e.consume(P),v)}function y(P){return P===null||Ye(P)?p(P):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),S(P))}function S(P){return P===null||Ye(P)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),p(P)):P===96&&P===u?n(P):(e.consume(P),S)}function E(P){return e.attempt(i,I,k)(P)}function k(P){return e.enter("lineEnding"),e.consume(P),e.exit("lineEnding"),C}function C(P){return o>0&&at(P)?ut(e,_,"linePrefix",o+1)(P):_(P)}function _(P){return P===null||Ye(P)?e.check(o0,E,I)(P):(e.enter("codeFlowValue"),j(P))}function j(P){return P===null||Ye(P)?(e.exit("codeFlowValue"),_(P)):(e.consume(P),j)}function I(P){return e.exit("codeFenced"),t(P)}function O(P,$,oe){let X=0;return R;function R(M){return P.enter("lineEnding"),P.consume(M),P.exit("lineEnding"),D}function D(M){return P.enter("codeFencedFence"),at(M)?ut(P,re,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(M):re(M)}function re(M){return M===u?(P.enter("codeFencedFenceSequence"),W(M)):oe(M)}function W(M){return M===u?(X++,P.consume(M),W):X>=l?(P.exit("codeFencedFenceSequence"),at(M)?ut(P,Y,"whitespace")(M):Y(M)):oe(M)}function Y(M){return M===null||Ye(M)?(P.exit("codeFencedFence"),$(M)):oe(M)}}}function rM(e,t,n){const r=this;return i;function i(l){return l===null?n(l):(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),o)}function o(l){return r.parser.lazy[r.now().line]?n(l):t(l)}}const uh={name:"codeIndented",tokenize:sM},iM={partial:!0,tokenize:oM};function sM(e,t,n){const r=this;return i;function i(f){return e.enter("codeIndented"),ut(e,o,"linePrefix",5)(f)}function o(f){const h=r.events[r.events.length-1];return h&&h[1].type==="linePrefix"&&h[2].sliceSerialize(h[1],!0).length>=4?l(f):n(f)}function l(f){return f===null?c(f):Ye(f)?e.attempt(iM,l,c)(f):(e.enter("codeFlowValue"),u(f))}function u(f){return f===null||Ye(f)?(e.exit("codeFlowValue"),l(f)):(e.consume(f),u)}function c(f){return e.exit("codeIndented"),t(f)}}function oM(e,t,n){const r=this;return i;function i(l){return r.parser.lazy[r.now().line]?n(l):Ye(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),i):ut(e,o,"linePrefix",5)(l)}function o(l){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?t(l):Ye(l)?i(l):n(l)}}const aM={name:"codeText",previous:uM,resolve:lM,tokenize:cM};function lM(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function uM(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function cM(e,t,n){let r=0,i,o;return l;function l(p){return e.enter("codeText"),e.enter("codeTextSequence"),u(p)}function u(p){return p===96?(e.consume(p),r++,u):(e.exit("codeTextSequence"),c(p))}function c(p){return p===null?n(p):p===32?(e.enter("space"),e.consume(p),e.exit("space"),c):p===96?(o=e.enter("codeTextSequence"),i=0,h(p)):Ye(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),c):(e.enter("codeTextData"),f(p))}function f(p){return p===null||p===32||p===96||Ye(p)?(e.exit("codeTextData"),c(p)):(e.consume(p),f)}function h(p){return p===96?(e.consume(p),i++,h):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(p)):(o.type="codeTextData",f(p))}}class dM{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const o=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&ja(this.left,r),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),ja(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),ja(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);ja(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);ja(this.left,n.reverse())}}}function ja(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function Mk(e){const t={};let n=-1,r,i,o,l,u,c,f;const h=new dM(e);for(;++n<h.length;){for(;n in t;)n=t[n];if(r=h.get(n),n&&r[1].type==="chunkFlow"&&h.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,o=0,o<c.length&&c[o][1].type==="lineEndingBlank"&&(o+=2),o<c.length&&c[o][1].type==="content"))for(;++o<c.length&&c[o][1].type!=="content";)c[o][1].type==="chunkText"&&(c[o][1]._isInFirstContentOfListItem=!0,o++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,fM(h,n)),n=t[n],f=!0);else if(r[1]._container){for(o=n,i=void 0;o--;)if(l=h.get(o),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(i&&(h.get(i)[1].type="lineEndingBlank"),l[1].type="lineEnding",i=o);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;i&&(r[1].end={...h.get(i)[1].start},u=h.slice(i,n),u.unshift(r),h.splice(i,n-i+1,u))}}return Gn(e,0,Number.POSITIVE_INFINITY,h.slice(0)),!f}function fM(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const o=[];let l=n._tokenizer;l||(l=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const u=l.events,c=[],f={};let h,p,v=-1,y=n,S=0,E=0;const k=[E];for(;y;){for(;e.get(++i)[1]!==y;);o.push(i),y._tokenizer||(h=r.sliceStream(y),y.next||h.push(null),p&&l.defineSkip(y.start),y._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(h),y._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),p=y,y=y.next}for(y=n;++v<u.length;)u[v][0]==="exit"&&u[v-1][0]==="enter"&&u[v][1].type===u[v-1][1].type&&u[v][1].start.line!==u[v][1].end.line&&(E=v+1,k.push(E),y._tokenizer=void 0,y.previous=void 0,y=y.next);for(l.events=[],y?(y._tokenizer=void 0,y.previous=void 0):k.pop(),v=k.length;v--;){const C=u.slice(k[v],k[v+1]),_=o.pop();c.push([_,_+C.length-1]),e.splice(_,2,C)}for(c.reverse(),v=-1;++v<c.length;)f[S+c[v][0]]=S+c[v][1],S+=c[v][1]-c[v][0]-1;return f}const hM={resolve:mM,tokenize:gM},pM={partial:!0,tokenize:yM};function mM(e){return Mk(e),e}function gM(e,t){let n;return r;function r(u){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(u)}function i(u){return u===null?o(u):Ye(u)?e.check(pM,l,o)(u):(e.consume(u),i)}function o(u){return e.exit("chunkContent"),e.exit("content"),t(u)}function l(u){return e.consume(u),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function yM(e,t,n){const r=this;return i;function i(l){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),ut(e,o,"linePrefix")}function o(l){if(l===null||Ye(l))return n(l);const u=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?t(l):e.interrupt(r.parser.constructs.flow,n,t)(l)}}function Lk(e,t,n,r,i,o,l,u,c){const f=c||Number.POSITIVE_INFINITY;let h=0;return p;function p(C){return C===60?(e.enter(r),e.enter(i),e.enter(o),e.consume(C),e.exit(o),v):C===null||C===32||C===41||hc(C)?n(C):(e.enter(r),e.enter(l),e.enter(u),e.enter("chunkString",{contentType:"string"}),E(C))}function v(C){return C===62?(e.enter(o),e.consume(C),e.exit(o),e.exit(i),e.exit(r),t):(e.enter(u),e.enter("chunkString",{contentType:"string"}),y(C))}function y(C){return C===62?(e.exit("chunkString"),e.exit(u),v(C)):C===null||C===60||Ye(C)?n(C):(e.consume(C),C===92?S:y)}function S(C){return C===60||C===62||C===92?(e.consume(C),y):y(C)}function E(C){return!h&&(C===null||C===41||wt(C))?(e.exit("chunkString"),e.exit(u),e.exit(l),e.exit(r),t(C)):h<f&&C===40?(e.consume(C),h++,E):C===41?(e.consume(C),h--,E):C===null||C===32||C===40||hc(C)?n(C):(e.consume(C),C===92?k:E)}function k(C){return C===40||C===41||C===92?(e.consume(C),E):E(C)}}function Dk(e,t,n,r,i,o){const l=this;let u=0,c;return f;function f(y){return e.enter(r),e.enter(i),e.consume(y),e.exit(i),e.enter(o),h}function h(y){return u>999||y===null||y===91||y===93&&!c||y===94&&!u&&"_hiddenFootnoteSupport"in l.parser.constructs?n(y):y===93?(e.exit(o),e.enter(i),e.consume(y),e.exit(i),e.exit(r),t):Ye(y)?(e.enter("lineEnding"),e.consume(y),e.exit("lineEnding"),h):(e.enter("chunkString",{contentType:"string"}),p(y))}function p(y){return y===null||y===91||y===93||Ye(y)||u++>999?(e.exit("chunkString"),h(y)):(e.consume(y),c||(c=!at(y)),y===92?v:p)}function v(y){return y===91||y===92||y===93?(e.consume(y),u++,p):p(y)}}function $k(e,t,n,r,i,o){let l;return u;function u(v){return v===34||v===39||v===40?(e.enter(r),e.enter(i),e.consume(v),e.exit(i),l=v===40?41:v,c):n(v)}function c(v){return v===l?(e.enter(i),e.consume(v),e.exit(i),e.exit(r),t):(e.enter(o),f(v))}function f(v){return v===l?(e.exit(o),c(l)):v===null?n(v):Ye(v)?(e.enter("lineEnding"),e.consume(v),e.exit("lineEnding"),ut(e,f,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),h(v))}function h(v){return v===l||v===null||Ye(v)?(e.exit("chunkString"),f(v)):(e.consume(v),v===92?p:h)}function p(v){return v===l||v===92?(e.consume(v),h):h(v)}}function Ba(e,t){let n;return r;function r(i){return Ye(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):at(i)?ut(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const vM={name:"definition",tokenize:wM},xM={partial:!0,tokenize:bM};function wM(e,t,n){const r=this;let i;return o;function o(y){return e.enter("definition"),l(y)}function l(y){return Dk.call(r,e,u,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(y)}function u(y){return i=kr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),y===58?(e.enter("definitionMarker"),e.consume(y),e.exit("definitionMarker"),c):n(y)}function c(y){return wt(y)?Ba(e,f)(y):f(y)}function f(y){return Lk(e,h,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(y)}function h(y){return e.attempt(xM,p,p)(y)}function p(y){return at(y)?ut(e,v,"whitespace")(y):v(y)}function v(y){return y===null||Ye(y)?(e.exit("definition"),r.parser.defined.push(i),t(y)):n(y)}}function bM(e,t,n){return r;function r(u){return wt(u)?Ba(e,i)(u):n(u)}function i(u){return $k(e,o,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(u)}function o(u){return at(u)?ut(e,l,"whitespace")(u):l(u)}function l(u){return u===null||Ye(u)?t(u):n(u)}}const kM={name:"hardBreakEscape",tokenize:SM};function SM(e,t,n){return r;function r(o){return e.enter("hardBreakEscape"),e.consume(o),i}function i(o){return Ye(o)?(e.exit("hardBreakEscape"),t(o)):n(o)}}const EM={name:"headingAtx",resolve:_M,tokenize:CM};function _M(e,t){let n=e.length-2,r=3,i,o;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},o={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Gn(e,r,n-r+1,[["enter",i,t],["enter",o,t],["exit",o,t],["exit",i,t]])),e}function CM(e,t,n){let r=0;return i;function i(h){return e.enter("atxHeading"),o(h)}function o(h){return e.enter("atxHeadingSequence"),l(h)}function l(h){return h===35&&r++<6?(e.consume(h),l):h===null||wt(h)?(e.exit("atxHeadingSequence"),u(h)):n(h)}function u(h){return h===35?(e.enter("atxHeadingSequence"),c(h)):h===null||Ye(h)?(e.exit("atxHeading"),t(h)):at(h)?ut(e,u,"whitespace")(h):(e.enter("atxHeadingText"),f(h))}function c(h){return h===35?(e.consume(h),c):(e.exit("atxHeadingSequence"),u(h))}function f(h){return h===null||h===35||wt(h)?(e.exit("atxHeadingText"),u(h)):(e.consume(h),f)}}const jM=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],l0=["pre","script","style","textarea"],NM={concrete:!0,name:"htmlFlow",resolveTo:PM,tokenize:AM},TM={partial:!0,tokenize:OM},IM={partial:!0,tokenize:RM};function PM(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function AM(e,t,n){const r=this;let i,o,l,u,c;return f;function f(A){return h(A)}function h(A){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(A),p}function p(A){return A===33?(e.consume(A),v):A===47?(e.consume(A),o=!0,E):A===63?(e.consume(A),i=3,r.interrupt?t:T):bn(A)?(e.consume(A),l=String.fromCharCode(A),k):n(A)}function v(A){return A===45?(e.consume(A),i=2,y):A===91?(e.consume(A),i=5,u=0,S):bn(A)?(e.consume(A),i=4,r.interrupt?t:T):n(A)}function y(A){return A===45?(e.consume(A),r.interrupt?t:T):n(A)}function S(A){const pe="CDATA[";return A===pe.charCodeAt(u++)?(e.consume(A),u===pe.length?r.interrupt?t:re:S):n(A)}function E(A){return bn(A)?(e.consume(A),l=String.fromCharCode(A),k):n(A)}function k(A){if(A===null||A===47||A===62||wt(A)){const pe=A===47,fe=l.toLowerCase();return!pe&&!o&&l0.includes(fe)?(i=1,r.interrupt?t(A):re(A)):jM.includes(l.toLowerCase())?(i=6,pe?(e.consume(A),C):r.interrupt?t(A):re(A)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(A):o?_(A):j(A))}return A===45||yn(A)?(e.consume(A),l+=String.fromCharCode(A),k):n(A)}function C(A){return A===62?(e.consume(A),r.interrupt?t:re):n(A)}function _(A){return at(A)?(e.consume(A),_):R(A)}function j(A){return A===47?(e.consume(A),R):A===58||A===95||bn(A)?(e.consume(A),I):at(A)?(e.consume(A),j):R(A)}function I(A){return A===45||A===46||A===58||A===95||yn(A)?(e.consume(A),I):O(A)}function O(A){return A===61?(e.consume(A),P):at(A)?(e.consume(A),O):j(A)}function P(A){return A===null||A===60||A===61||A===62||A===96?n(A):A===34||A===39?(e.consume(A),c=A,$):at(A)?(e.consume(A),P):oe(A)}function $(A){return A===c?(e.consume(A),c=null,X):A===null||Ye(A)?n(A):(e.consume(A),$)}function oe(A){return A===null||A===34||A===39||A===47||A===60||A===61||A===62||A===96||wt(A)?O(A):(e.consume(A),oe)}function X(A){return A===47||A===62||at(A)?j(A):n(A)}function R(A){return A===62?(e.consume(A),D):n(A)}function D(A){return A===null||Ye(A)?re(A):at(A)?(e.consume(A),D):n(A)}function re(A){return A===45&&i===2?(e.consume(A),G):A===60&&i===1?(e.consume(A),ae):A===62&&i===4?(e.consume(A),B):A===63&&i===3?(e.consume(A),T):A===93&&i===5?(e.consume(A),ee):Ye(A)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(TM,te,W)(A)):A===null||Ye(A)?(e.exit("htmlFlowData"),W(A)):(e.consume(A),re)}function W(A){return e.check(IM,Y,te)(A)}function Y(A){return e.enter("lineEnding"),e.consume(A),e.exit("lineEnding"),M}function M(A){return A===null||Ye(A)?W(A):(e.enter("htmlFlowData"),re(A))}function G(A){return A===45?(e.consume(A),T):re(A)}function ae(A){return A===47?(e.consume(A),l="",F):re(A)}function F(A){if(A===62){const pe=l.toLowerCase();return l0.includes(pe)?(e.consume(A),B):re(A)}return bn(A)&&l.length<8?(e.consume(A),l+=String.fromCharCode(A),F):re(A)}function ee(A){return A===93?(e.consume(A),T):re(A)}function T(A){return A===62?(e.consume(A),B):A===45&&i===2?(e.consume(A),T):re(A)}function B(A){return A===null||Ye(A)?(e.exit("htmlFlowData"),te(A)):(e.consume(A),B)}function te(A){return e.exit("htmlFlow"),t(A)}}function RM(e,t,n){const r=this;return i;function i(l){return Ye(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),o):n(l)}function o(l){return r.parser.lazy[r.now().line]?n(l):t(l)}}function OM(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(pl,t,n)}}const MM={name:"htmlText",tokenize:LM};function LM(e,t,n){const r=this;let i,o,l;return u;function u(T){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(T),c}function c(T){return T===33?(e.consume(T),f):T===47?(e.consume(T),O):T===63?(e.consume(T),j):bn(T)?(e.consume(T),oe):n(T)}function f(T){return T===45?(e.consume(T),h):T===91?(e.consume(T),o=0,S):bn(T)?(e.consume(T),_):n(T)}function h(T){return T===45?(e.consume(T),y):n(T)}function p(T){return T===null?n(T):T===45?(e.consume(T),v):Ye(T)?(l=p,ae(T)):(e.consume(T),p)}function v(T){return T===45?(e.consume(T),y):p(T)}function y(T){return T===62?G(T):T===45?v(T):p(T)}function S(T){const B="CDATA[";return T===B.charCodeAt(o++)?(e.consume(T),o===B.length?E:S):n(T)}function E(T){return T===null?n(T):T===93?(e.consume(T),k):Ye(T)?(l=E,ae(T)):(e.consume(T),E)}function k(T){return T===93?(e.consume(T),C):E(T)}function C(T){return T===62?G(T):T===93?(e.consume(T),C):E(T)}function _(T){return T===null||T===62?G(T):Ye(T)?(l=_,ae(T)):(e.consume(T),_)}function j(T){return T===null?n(T):T===63?(e.consume(T),I):Ye(T)?(l=j,ae(T)):(e.consume(T),j)}function I(T){return T===62?G(T):j(T)}function O(T){return bn(T)?(e.consume(T),P):n(T)}function P(T){return T===45||yn(T)?(e.consume(T),P):$(T)}function $(T){return Ye(T)?(l=$,ae(T)):at(T)?(e.consume(T),$):G(T)}function oe(T){return T===45||yn(T)?(e.consume(T),oe):T===47||T===62||wt(T)?X(T):n(T)}function X(T){return T===47?(e.consume(T),G):T===58||T===95||bn(T)?(e.consume(T),R):Ye(T)?(l=X,ae(T)):at(T)?(e.consume(T),X):G(T)}function R(T){return T===45||T===46||T===58||T===95||yn(T)?(e.consume(T),R):D(T)}function D(T){return T===61?(e.consume(T),re):Ye(T)?(l=D,ae(T)):at(T)?(e.consume(T),D):X(T)}function re(T){return T===null||T===60||T===61||T===62||T===96?n(T):T===34||T===39?(e.consume(T),i=T,W):Ye(T)?(l=re,ae(T)):at(T)?(e.consume(T),re):(e.consume(T),Y)}function W(T){return T===i?(e.consume(T),i=void 0,M):T===null?n(T):Ye(T)?(l=W,ae(T)):(e.consume(T),W)}function Y(T){return T===null||T===34||T===39||T===60||T===61||T===96?n(T):T===47||T===62||wt(T)?X(T):(e.consume(T),Y)}function M(T){return T===47||T===62||wt(T)?X(T):n(T)}function G(T){return T===62?(e.consume(T),e.exit("htmlTextData"),e.exit("htmlText"),t):n(T)}function ae(T){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(T),e.exit("lineEnding"),F}function F(T){return at(T)?ut(e,ee,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(T):ee(T)}function ee(T){return e.enter("htmlTextData"),l(T)}}const fm={name:"labelEnd",resolveAll:zM,resolveTo:BM,tokenize:UM},DM={tokenize:WM},$M={tokenize:HM},FM={tokenize:VM};function zM(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",t+=i}}return e.length!==n.length&&Gn(e,0,e.length,n),e}function BM(e,t){let n=e.length,r=0,i,o,l,u;for(;n--;)if(i=e[n][1],o){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(l){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(o=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(l=n);const c={type:e[o][1].type==="labelLink"?"link":"image",start:{...e[o][1].start},end:{...e[e.length-1][1].end}},f={type:"label",start:{...e[o][1].start},end:{...e[l][1].end}},h={type:"labelText",start:{...e[o+r+2][1].end},end:{...e[l-2][1].start}};return u=[["enter",c,t],["enter",f,t]],u=or(u,e.slice(o+1,o+r+3)),u=or(u,[["enter",h,t]]),u=or(u,Uc(t.parser.constructs.insideSpan.null,e.slice(o+r+4,l-3),t)),u=or(u,[["exit",h,t],e[l-2],e[l-1],["exit",f,t]]),u=or(u,e.slice(l+1)),u=or(u,[["exit",c,t]]),Gn(e,o,e.length,u),e}function UM(e,t,n){const r=this;let i=r.events.length,o,l;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){o=r.events[i][1];break}return u;function u(v){return o?o._inactive?p(v):(l=r.parser.defined.includes(kr(r.sliceSerialize({start:o.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(v),e.exit("labelMarker"),e.exit("labelEnd"),c):n(v)}function c(v){return v===40?e.attempt(DM,h,l?h:p)(v):v===91?e.attempt($M,h,l?f:p)(v):l?h(v):p(v)}function f(v){return e.attempt(FM,h,p)(v)}function h(v){return t(v)}function p(v){return o._balanced=!0,n(v)}}function WM(e,t,n){return r;function r(p){return e.enter("resource"),e.enter("resourceMarker"),e.consume(p),e.exit("resourceMarker"),i}function i(p){return wt(p)?Ba(e,o)(p):o(p)}function o(p){return p===41?h(p):Lk(e,l,u,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function l(p){return wt(p)?Ba(e,c)(p):h(p)}function u(p){return n(p)}function c(p){return p===34||p===39||p===40?$k(e,f,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):h(p)}function f(p){return wt(p)?Ba(e,h)(p):h(p)}function h(p){return p===41?(e.enter("resourceMarker"),e.consume(p),e.exit("resourceMarker"),e.exit("resource"),t):n(p)}}function HM(e,t,n){const r=this;return i;function i(u){return Dk.call(r,e,o,l,"reference","referenceMarker","referenceString")(u)}function o(u){return r.parser.defined.includes(kr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(u):n(u)}function l(u){return n(u)}}function VM(e,t,n){return r;function r(o){return e.enter("reference"),e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),i}function i(o){return o===93?(e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),e.exit("reference"),t):n(o)}}const qM={name:"labelStartImage",resolveAll:fm.resolveAll,tokenize:YM};function YM(e,t,n){const r=this;return i;function i(u){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(u),e.exit("labelImageMarker"),o}function o(u){return u===91?(e.enter("labelMarker"),e.consume(u),e.exit("labelMarker"),e.exit("labelImage"),l):n(u)}function l(u){return u===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(u):t(u)}}const GM={name:"labelStartLink",resolveAll:fm.resolveAll,tokenize:KM};function KM(e,t,n){const r=this;return i;function i(l){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelLink"),o}function o(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):t(l)}}const ch={name:"lineEnding",tokenize:JM};function JM(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),ut(e,t,"linePrefix")}}const Gu={name:"thematicBreak",tokenize:QM};function QM(e,t,n){let r=0,i;return o;function o(f){return e.enter("thematicBreak"),l(f)}function l(f){return i=f,u(f)}function u(f){return f===i?(e.enter("thematicBreakSequence"),c(f)):r>=3&&(f===null||Ye(f))?(e.exit("thematicBreak"),t(f)):n(f)}function c(f){return f===i?(e.consume(f),r++,c):(e.exit("thematicBreakSequence"),at(f)?ut(e,u,"whitespace")(f):u(f))}}const Rn={continuation:{tokenize:t2},exit:r2,name:"list",tokenize:e2},XM={partial:!0,tokenize:i2},ZM={partial:!0,tokenize:n2};function e2(e,t,n){const r=this,i=r.events[r.events.length-1];let o=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,l=0;return u;function u(y){const S=r.containerState.type||(y===42||y===43||y===45?"listUnordered":"listOrdered");if(S==="listUnordered"?!r.containerState.marker||y===r.containerState.marker:mp(y)){if(r.containerState.type||(r.containerState.type=S,e.enter(S,{_container:!0})),S==="listUnordered")return e.enter("listItemPrefix"),y===42||y===45?e.check(Gu,n,f)(y):f(y);if(!r.interrupt||y===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(y)}return n(y)}function c(y){return mp(y)&&++l<10?(e.consume(y),c):(!r.interrupt||l<2)&&(r.containerState.marker?y===r.containerState.marker:y===41||y===46)?(e.exit("listItemValue"),f(y)):n(y)}function f(y){return e.enter("listItemMarker"),e.consume(y),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||y,e.check(pl,r.interrupt?n:h,e.attempt(XM,v,p))}function h(y){return r.containerState.initialBlankLine=!0,o++,v(y)}function p(y){return at(y)?(e.enter("listItemPrefixWhitespace"),e.consume(y),e.exit("listItemPrefixWhitespace"),v):n(y)}function v(y){return r.containerState.size=o+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(y)}}function t2(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(pl,i,o);function i(u){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,ut(e,t,"listItemIndent",r.containerState.size+1)(u)}function o(u){return r.containerState.furtherBlankLines||!at(u)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,l(u)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(ZM,t,l)(u))}function l(u){return r.containerState._closeFlow=!0,r.interrupt=void 0,ut(e,e.attempt(Rn,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u)}}function n2(e,t,n){const r=this;return ut(e,i,"listItemIndent",r.containerState.size+1);function i(o){const l=r.events[r.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===r.containerState.size?t(o):n(o)}}function r2(e){e.exit(this.containerState.type)}function i2(e,t,n){const r=this;return ut(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(o){const l=r.events[r.events.length-1];return!at(o)&&l&&l[1].type==="listItemPrefixWhitespace"?t(o):n(o)}}const u0={name:"setextUnderline",resolveTo:s2,tokenize:o2};function s2(e,t){let n=e.length,r,i,o;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!o&&e[n][1].type==="definition"&&(o=n);const l={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[i][1].type="setextHeadingText",o?(e.splice(i,0,["enter",l,t]),e.splice(o+1,0,["exit",e[r][1],t]),e[r][1].end={...e[o][1].end}):e[r][1]=l,e.push(["exit",l,t]),e}function o2(e,t,n){const r=this;let i;return o;function o(f){let h=r.events.length,p;for(;h--;)if(r.events[h][1].type!=="lineEnding"&&r.events[h][1].type!=="linePrefix"&&r.events[h][1].type!=="content"){p=r.events[h][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||p)?(e.enter("setextHeadingLine"),i=f,l(f)):n(f)}function l(f){return e.enter("setextHeadingLineSequence"),u(f)}function u(f){return f===i?(e.consume(f),u):(e.exit("setextHeadingLineSequence"),at(f)?ut(e,c,"lineSuffix")(f):c(f))}function c(f){return f===null||Ye(f)?(e.exit("setextHeadingLine"),t(f)):n(f)}}const a2={tokenize:l2};function l2(e){const t=this,n=e.attempt(pl,r,e.attempt(this.parser.constructs.flowInitial,i,ut(e,e.attempt(this.parser.constructs.flow,i,e.attempt(hM,i)),"linePrefix")));return n;function r(o){if(o===null){e.consume(o);return}return e.enter("lineEndingBlank"),e.consume(o),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const u2={resolveAll:zk()},c2=Fk("string"),d2=Fk("text");function Fk(e){return{resolveAll:zk(e==="text"?f2:void 0),tokenize:t};function t(n){const r=this,i=this.parser.constructs[e],o=n.attempt(i,l,u);return l;function l(h){return f(h)?o(h):u(h)}function u(h){if(h===null){n.consume(h);return}return n.enter("data"),n.consume(h),c}function c(h){return f(h)?(n.exit("data"),o(h)):(n.consume(h),c)}function f(h){if(h===null)return!0;const p=i[h];let v=-1;if(p)for(;++v<p.length;){const y=p[v];if(!y.previous||y.previous.call(r,r.previous))return!0}return!1}}}function zk(e){return t;function t(n,r){let i=-1,o;for(;++i<=n.length;)o===void 0?n[i]&&n[i][1].type==="data"&&(o=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==o+2&&(n[o][1].end=n[i-1][1].end,n.splice(o+2,i-o-2),i=o+2),o=void 0);return e?e(n,r):n}}function f2(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let o=i.length,l=-1,u=0,c;for(;o--;){const f=i[o];if(typeof f=="string"){for(l=f.length;f.charCodeAt(l-1)===32;)u++,l--;if(l)break;l=-1}else if(f===-2)c=!0,u++;else if(f!==-1){o++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(u=0),u){const f={type:n===e.length||c||u<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?l:r.start._bufferIndex+l,_index:r.start._index+o,line:r.end.line,column:r.end.column-u,offset:r.end.offset-u},end:{...r.end}};r.end={...f.start},r.start.offset===r.end.offset?Object.assign(r,f):(e.splice(n,0,["enter",f,t],["exit",f,t]),n+=2)}n++}return e}const h2={42:Rn,43:Rn,45:Rn,48:Rn,49:Rn,50:Rn,51:Rn,52:Rn,53:Rn,54:Rn,55:Rn,56:Rn,57:Rn,62:Ak},p2={91:vM},m2={[-2]:uh,[-1]:uh,32:uh},g2={35:EM,42:Gu,45:[u0,Gu],60:NM,61:u0,95:Gu,96:a0,126:a0},y2={38:Ok,92:Rk},v2={[-5]:ch,[-4]:ch,[-3]:ch,33:qM,38:Ok,42:gp,60:[GO,MM],91:GM,92:[kM,Rk],93:fm,95:gp,96:aM},x2={null:[gp,u2]},w2={null:[42,95]},b2={null:[]},k2=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:w2,contentInitial:p2,disable:b2,document:h2,flow:g2,flowInitial:m2,insideSpan:x2,string:y2,text:v2},Symbol.toStringTag,{value:"Module"}));function S2(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},o=[];let l=[],u=[];const c={attempt:$(O),check:$(P),consume:_,enter:j,exit:I,interrupt:$(P,{interrupt:!0})},f={code:null,containerState:{},defineSkip:E,events:[],now:S,parser:e,previous:null,sliceSerialize:v,sliceStream:y,write:p};let h=t.tokenize.call(f,c);return t.resolveAll&&o.push(t),f;function p(D){return l=or(l,D),k(),l[l.length-1]!==null?[]:(oe(t,0),f.events=Uc(o,f.events,f),f.events)}function v(D,re){return _2(y(D),re)}function y(D){return E2(l,D)}function S(){const{_bufferIndex:D,_index:re,line:W,column:Y,offset:M}=r;return{_bufferIndex:D,_index:re,line:W,column:Y,offset:M}}function E(D){i[D.line]=D.column,R()}function k(){let D;for(;r._index<l.length;){const re=l[r._index];if(typeof re=="string")for(D=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===D&&r._bufferIndex<re.length;)C(re.charCodeAt(r._bufferIndex));else C(re)}}function C(D){h=h(D)}function _(D){Ye(D)?(r.line++,r.column=1,r.offset+=D===-3?2:1,R()):D!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===l[r._index].length&&(r._bufferIndex=-1,r._index++)),f.previous=D}function j(D,re){const W=re||{};return W.type=D,W.start=S(),f.events.push(["enter",W,f]),u.push(W),W}function I(D){const re=u.pop();return re.end=S(),f.events.push(["exit",re,f]),re}function O(D,re){oe(D,re.from)}function P(D,re){re.restore()}function $(D,re){return W;function W(Y,M,G){let ae,F,ee,T;return Array.isArray(Y)?te(Y):"tokenize"in Y?te([Y]):B(Y);function B(ge){return Ie;function Ie(ve){const Ae=ve!==null&&ge[ve],_e=ve!==null&&ge.null,Z=[...Array.isArray(Ae)?Ae:Ae?[Ae]:[],...Array.isArray(_e)?_e:_e?[_e]:[]];return te(Z)(ve)}}function te(ge){return ae=ge,F=0,ge.length===0?G:A(ge[F])}function A(ge){return Ie;function Ie(ve){return T=X(),ee=ge,ge.partial||(f.currentConstruct=ge),ge.name&&f.parser.constructs.disable.null.includes(ge.name)?fe():ge.tokenize.call(re?Object.assign(Object.create(f),re):f,c,pe,fe)(ve)}}function pe(ge){return D(ee,T),M}function fe(ge){return T.restore(),++F<ae.length?A(ae[F]):G}}}function oe(D,re){D.resolveAll&&!o.includes(D)&&o.push(D),D.resolve&&Gn(f.events,re,f.events.length-re,D.resolve(f.events.slice(re),f)),D.resolveTo&&(f.events=D.resolveTo(f.events,f))}function X(){const D=S(),re=f.previous,W=f.currentConstruct,Y=f.events.length,M=Array.from(u);return{from:Y,restore:G};function G(){r=D,f.previous=re,f.currentConstruct=W,f.events.length=Y,u=M,R()}}function R(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function E2(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,o=t.end._bufferIndex;let l;if(n===i)l=[e[n].slice(r,o)];else{if(l=e.slice(n,i),r>-1){const u=l[0];typeof u=="string"?l[0]=u.slice(r):l.shift()}o>0&&l.push(e[i].slice(0,o))}return l}function _2(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const o=e[n];let l;if(typeof o=="string")l=o;else switch(o){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=t?" ":"	";break}case-1:{if(!t&&i)continue;l=" ";break}default:l=String.fromCharCode(o)}i=o===-2,r.push(l)}return r.join("")}function C2(e){const r={constructs:Ik([k2,...(e||{}).extensions||[]]),content:i(BO),defined:[],document:i(WO),flow:i(a2),lazy:{},string:i(c2),text:i(d2)};return r;function i(o){return l;function l(u){return S2(r,o,u)}}}function j2(e){for(;!Mk(e););return e}const c0=/[\0\t\n\r]/g;function N2(){let e=1,t="",n=!0,r;return i;function i(o,l,u){const c=[];let f,h,p,v,y;for(o=t+(typeof o=="string"?o.toString():new TextDecoder(l||void 0).decode(o)),p=0,t="",n&&(o.charCodeAt(0)===65279&&p++,n=void 0);p<o.length;){if(c0.lastIndex=p,f=c0.exec(o),v=f&&f.index!==void 0?f.index:o.length,y=o.charCodeAt(v),!f){t=o.slice(p);break}if(y===10&&p===v&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),p<v&&(c.push(o.slice(p,v)),e+=v-p),y){case 0:{c.push(65533),e++;break}case 9:{for(h=Math.ceil(e/4)*4,c.push(-2);e++<h;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:r=!0,e=1}p=v+1}return u&&(r&&c.push(-5),t&&c.push(t),c.push(null)),c}}const T2=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function I2(e){return e.replace(T2,P2)}function P2(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),o=i===120||i===88;return Pk(n.slice(o?2:1),o?16:10)}return dm(n)||e}const Bk={}.hasOwnProperty;function A2(e,t,n){return typeof t!="string"&&(n=t,t=void 0),R2(n)(j2(C2(n).document().write(N2()(e,t,!0))))}function R2(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(J),autolinkProtocol:X,autolinkEmail:X,atxHeading:o(Qe),blockQuote:o(_e),characterEscape:X,characterReference:X,codeFenced:o(Z),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:o(Z,l),codeText:o(je,l),codeTextData:X,data:X,codeFlowValue:X,definition:o($e),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:o(Be),hardBreakEscape:o(st),hardBreakTrailing:o(st),htmlFlow:o(bt,l),htmlFlowData:X,htmlText:o(bt,l),htmlTextData:X,image:o(Ft),label:l,link:o(J),listItem:o(me),listItemValue:v,listOrdered:o(de,p),listUnordered:o(de),paragraph:o(K),reference:A,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:o(Qe),strong:o(ne),thematicBreak:o(ie)},exit:{atxHeading:c(),atxHeadingSequence:O,autolink:c(),autolinkEmail:Ae,autolinkProtocol:ve,blockQuote:c(),characterEscapeValue:R,characterReferenceMarkerHexadecimal:fe,characterReferenceMarkerNumeric:fe,characterReferenceValue:ge,characterReference:Ie,codeFenced:c(k),codeFencedFence:E,codeFencedFenceInfo:y,codeFencedFenceMeta:S,codeFlowValue:R,codeIndented:c(C),codeText:c(M),codeTextData:R,data:R,definition:c(),definitionDestinationString:I,definitionLabelString:_,definitionTitleString:j,emphasis:c(),hardBreakEscape:c(re),hardBreakTrailing:c(re),htmlFlow:c(W),htmlFlowData:R,htmlText:c(Y),htmlTextData:R,image:c(ae),label:ee,labelText:F,lineEnding:D,link:c(G),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:pe,resourceDestinationString:T,resourceTitleString:B,resource:te,setextHeading:c(oe),setextHeadingLineSequence:$,setextHeadingText:P,strong:c(),thematicBreak:c()}};Uk(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(U){let se={type:"root",children:[]};const xe={stack:[se],tokenStack:[],config:t,enter:u,exit:f,buffer:l,resume:h,data:n},Ne=[];let L=-1;for(;++L<U.length;)if(U[L][1].type==="listOrdered"||U[L][1].type==="listUnordered")if(U[L][0]==="enter")Ne.push(L);else{const q=Ne.pop();L=i(U,q,L)}for(L=-1;++L<U.length;){const q=t[U[L][0]];Bk.call(q,U[L][1].type)&&q[U[L][1].type].call(Object.assign({sliceSerialize:U[L][2].sliceSerialize},xe),U[L][1])}if(xe.tokenStack.length>0){const q=xe.tokenStack[xe.tokenStack.length-1];(q[1]||d0).call(xe,void 0,q[0])}for(se.position={start:ji(U.length>0?U[0][1].start:{line:1,column:1,offset:0}),end:ji(U.length>0?U[U.length-2][1].end:{line:1,column:1,offset:0})},L=-1;++L<t.transforms.length;)se=t.transforms[L](se)||se;return se}function i(U,se,xe){let Ne=se-1,L=-1,q=!1,be,ye,he,Pe;for(;++Ne<=xe;){const Ue=U[Ne];switch(Ue[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Ue[0]==="enter"?L++:L--,Pe=void 0;break}case"lineEndingBlank":{Ue[0]==="enter"&&(be&&!Pe&&!L&&!he&&(he=Ne),Pe=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Pe=void 0}if(!L&&Ue[0]==="enter"&&Ue[1].type==="listItemPrefix"||L===-1&&Ue[0]==="exit"&&(Ue[1].type==="listUnordered"||Ue[1].type==="listOrdered")){if(be){let Xe=Ne;for(ye=void 0;Xe--;){const Me=U[Xe];if(Me[1].type==="lineEnding"||Me[1].type==="lineEndingBlank"){if(Me[0]==="exit")continue;ye&&(U[ye][1].type="lineEndingBlank",q=!0),Me[1].type="lineEnding",ye=Xe}else if(!(Me[1].type==="linePrefix"||Me[1].type==="blockQuotePrefix"||Me[1].type==="blockQuotePrefixWhitespace"||Me[1].type==="blockQuoteMarker"||Me[1].type==="listItemIndent"))break}he&&(!ye||he<ye)&&(be._spread=!0),be.end=Object.assign({},ye?U[ye][1].start:Ue[1].end),U.splice(ye||Ne,0,["exit",be,Ue[2]]),Ne++,xe++}if(Ue[1].type==="listItemPrefix"){const Xe={type:"listItem",_spread:!1,start:Object.assign({},Ue[1].start),end:void 0};be=Xe,U.splice(Ne,0,["enter",Xe,Ue[2]]),Ne++,xe++,he=void 0,Pe=!0}}}return U[se][1]._spread=q,xe}function o(U,se){return xe;function xe(Ne){u.call(this,U(Ne),Ne),se&&se.call(this,Ne)}}function l(){this.stack.push({type:"fragment",children:[]})}function u(U,se,xe){this.stack[this.stack.length-1].children.push(U),this.stack.push(U),this.tokenStack.push([se,xe||void 0]),U.position={start:ji(se.start),end:void 0}}function c(U){return se;function se(xe){U&&U.call(this,xe),f.call(this,xe)}}function f(U,se){const xe=this.stack.pop(),Ne=this.tokenStack.pop();if(Ne)Ne[0].type!==U.type&&(se?se.call(this,U,Ne[0]):(Ne[1]||d0).call(this,U,Ne[0]));else throw new Error("Cannot close `"+U.type+"` ("+za({start:U.start,end:U.end})+"): its not open");xe.position.end=ji(U.end)}function h(){return cm(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function v(U){if(this.data.expectingFirstListItemValue){const se=this.stack[this.stack.length-2];se.start=Number.parseInt(this.sliceSerialize(U),10),this.data.expectingFirstListItemValue=void 0}}function y(){const U=this.resume(),se=this.stack[this.stack.length-1];se.lang=U}function S(){const U=this.resume(),se=this.stack[this.stack.length-1];se.meta=U}function E(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function k(){const U=this.resume(),se=this.stack[this.stack.length-1];se.value=U.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function C(){const U=this.resume(),se=this.stack[this.stack.length-1];se.value=U.replace(/(\r?\n|\r)$/g,"")}function _(U){const se=this.resume(),xe=this.stack[this.stack.length-1];xe.label=se,xe.identifier=kr(this.sliceSerialize(U)).toLowerCase()}function j(){const U=this.resume(),se=this.stack[this.stack.length-1];se.title=U}function I(){const U=this.resume(),se=this.stack[this.stack.length-1];se.url=U}function O(U){const se=this.stack[this.stack.length-1];if(!se.depth){const xe=this.sliceSerialize(U).length;se.depth=xe}}function P(){this.data.setextHeadingSlurpLineEnding=!0}function $(U){const se=this.stack[this.stack.length-1];se.depth=this.sliceSerialize(U).codePointAt(0)===61?1:2}function oe(){this.data.setextHeadingSlurpLineEnding=void 0}function X(U){const xe=this.stack[this.stack.length-1].children;let Ne=xe[xe.length-1];(!Ne||Ne.type!=="text")&&(Ne=H(),Ne.position={start:ji(U.start),end:void 0},xe.push(Ne)),this.stack.push(Ne)}function R(U){const se=this.stack.pop();se.value+=this.sliceSerialize(U),se.position.end=ji(U.end)}function D(U){const se=this.stack[this.stack.length-1];if(this.data.atHardBreak){const xe=se.children[se.children.length-1];xe.position.end=ji(U.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(se.type)&&(X.call(this,U),R.call(this,U))}function re(){this.data.atHardBreak=!0}function W(){const U=this.resume(),se=this.stack[this.stack.length-1];se.value=U}function Y(){const U=this.resume(),se=this.stack[this.stack.length-1];se.value=U}function M(){const U=this.resume(),se=this.stack[this.stack.length-1];se.value=U}function G(){const U=this.stack[this.stack.length-1];if(this.data.inReference){const se=this.data.referenceType||"shortcut";U.type+="Reference",U.referenceType=se,delete U.url,delete U.title}else delete U.identifier,delete U.label;this.data.referenceType=void 0}function ae(){const U=this.stack[this.stack.length-1];if(this.data.inReference){const se=this.data.referenceType||"shortcut";U.type+="Reference",U.referenceType=se,delete U.url,delete U.title}else delete U.identifier,delete U.label;this.data.referenceType=void 0}function F(U){const se=this.sliceSerialize(U),xe=this.stack[this.stack.length-2];xe.label=I2(se),xe.identifier=kr(se).toLowerCase()}function ee(){const U=this.stack[this.stack.length-1],se=this.resume(),xe=this.stack[this.stack.length-1];if(this.data.inReference=!0,xe.type==="link"){const Ne=U.children;xe.children=Ne}else xe.alt=se}function T(){const U=this.resume(),se=this.stack[this.stack.length-1];se.url=U}function B(){const U=this.resume(),se=this.stack[this.stack.length-1];se.title=U}function te(){this.data.inReference=void 0}function A(){this.data.referenceType="collapsed"}function pe(U){const se=this.resume(),xe=this.stack[this.stack.length-1];xe.label=se,xe.identifier=kr(this.sliceSerialize(U)).toLowerCase(),this.data.referenceType="full"}function fe(U){this.data.characterReferenceType=U.type}function ge(U){const se=this.sliceSerialize(U),xe=this.data.characterReferenceType;let Ne;xe?(Ne=Pk(se,xe==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Ne=dm(se);const L=this.stack[this.stack.length-1];L.value+=Ne}function Ie(U){const se=this.stack.pop();se.position.end=ji(U.end)}function ve(U){R.call(this,U);const se=this.stack[this.stack.length-1];se.url=this.sliceSerialize(U)}function Ae(U){R.call(this,U);const se=this.stack[this.stack.length-1];se.url="mailto:"+this.sliceSerialize(U)}function _e(){return{type:"blockquote",children:[]}}function Z(){return{type:"code",lang:null,meta:null,value:""}}function je(){return{type:"inlineCode",value:""}}function $e(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Be(){return{type:"emphasis",children:[]}}function Qe(){return{type:"heading",depth:0,children:[]}}function st(){return{type:"break"}}function bt(){return{type:"html",value:""}}function Ft(){return{type:"image",title:null,url:"",alt:null}}function J(){return{type:"link",title:null,url:"",children:[]}}function de(U){return{type:"list",ordered:U.type==="listOrdered",start:null,spread:U._spread,children:[]}}function me(U){return{type:"listItem",spread:U._spread,checked:null,children:[]}}function K(){return{type:"paragraph",children:[]}}function ne(){return{type:"strong",children:[]}}function H(){return{type:"text",value:""}}function ie(){return{type:"thematicBreak"}}}function ji(e){return{line:e.line,column:e.column,offset:e.offset}}function Uk(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?Uk(e,r):O2(e,r)}}function O2(e,t){let n;for(n in t)if(Bk.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function d0(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+za({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+za({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+za({start:t.start,end:t.end})+") is still open")}function M2(e){const t=this;t.parser=n;function n(r){return A2(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function L2(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function D2(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function $2(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function F2(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function z2(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function B2(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=zo(r.toLowerCase()),o=e.footnoteOrder.indexOf(r);let l,u=e.footnoteCounts.get(r);u===void 0?(u=0,e.footnoteOrder.push(r),l=e.footnoteOrder.length):l=o+1,u+=1,e.footnoteCounts.set(r,u);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(u>1?"-"+u:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(l)}]};e.patch(t,c);const f={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,f),e.applyData(t,f)}function U2(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function W2(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function Wk(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),o=i[0];o&&o.type==="text"?o.value="["+o.value:i.unshift({type:"text",value:"["});const l=i[i.length-1];return l&&l.type==="text"?l.value+=r:i.push({type:"text",value:r}),i}function H2(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Wk(e,t);const i={src:zo(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const o={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,o),e.applyData(t,o)}function V2(e,t){const n={src:zo(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function q2(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function Y2(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Wk(e,t);const i={href:zo(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const o={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,o),e.applyData(t,o)}function G2(e,t){const n={href:zo(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function K2(e,t,n){const r=e.all(t),i=n?J2(n):Hk(t),o={},l=[];if(typeof t.checked=="boolean"){const h=r[0];let p;h&&h.type==="element"&&h.tagName==="p"?p=h:(p={type:"element",tagName:"p",properties:{},children:[]},r.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let u=-1;for(;++u<r.length;){const h=r[u];(i||u!==0||h.type!=="element"||h.tagName!=="p")&&l.push({type:"text",value:`
`}),h.type==="element"&&h.tagName==="p"&&!i?l.push(...h.children):l.push(h)}const c=r[r.length-1];c&&(i||c.type!=="element"||c.tagName!=="p")&&l.push({type:"text",value:`
`});const f={type:"element",tagName:"li",properties:o,children:l};return e.patch(t,f),e.applyData(t,f)}function J2(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=Hk(n[r])}return t}function Hk(e){const t=e.spread;return t??e.children.length>1}function Q2(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const l=r[i];if(l.type==="element"&&l.tagName==="li"&&l.properties&&Array.isArray(l.properties.className)&&l.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,o),e.applyData(t,o)}function X2(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Z2(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function eL(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function tL(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const l={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],l),i.push(l)}if(n.length>0){const l={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},u=om(t.children[1]),c=Sk(t.children[t.children.length-1]);u&&c&&(l.position={start:u,end:c}),i.push(l)}const o={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,o),e.applyData(t,o)}function nL(e,t,n){const r=n?n.children:void 0,o=(r?r.indexOf(t):1)===0?"th":"td",l=n&&n.type==="table"?n.align:void 0,u=l?l.length:t.children.length;let c=-1;const f=[];for(;++c<u;){const p=t.children[c],v={},y=l?l[c]:void 0;y&&(v.align=y);let S={type:"element",tagName:o,properties:v,children:[]};p&&(S.children=e.all(p),e.patch(p,S),S=e.applyData(p,S)),f.push(S)}const h={type:"element",tagName:"tr",properties:{},children:e.wrap(f,!0)};return e.patch(t,h),e.applyData(t,h)}function rL(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const f0=9,h0=32;function iL(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const o=[];for(;r;)o.push(p0(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return o.push(p0(t.slice(i),i>0,!1)),o.join("")}function p0(e,t,n){let r=0,i=e.length;if(t){let o=e.codePointAt(r);for(;o===f0||o===h0;)r++,o=e.codePointAt(r)}if(n){let o=e.codePointAt(i-1);for(;o===f0||o===h0;)i--,o=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function sL(e,t){const n={type:"text",value:iL(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function oL(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const aL={blockquote:L2,break:D2,code:$2,delete:F2,emphasis:z2,footnoteReference:B2,heading:U2,html:W2,imageReference:H2,image:V2,inlineCode:q2,linkReference:Y2,link:G2,listItem:K2,list:Q2,paragraph:X2,root:Z2,strong:eL,table:tL,tableCell:rL,tableRow:nL,text:sL,thematicBreak:oL,toml:Mu,yaml:Mu,definition:Mu,footnoteDefinition:Mu};function Mu(){}const Vk=-1,Wc=0,Ua=1,pc=2,hm=3,pm=4,mm=5,gm=6,qk=7,Yk=8,m0=typeof self=="object"?self:globalThis,lL=(e,t)=>{const n=(i,o)=>(e.set(o,i),i),r=i=>{if(e.has(i))return e.get(i);const[o,l]=t[i];switch(o){case Wc:case Vk:return n(l,i);case Ua:{const u=n([],i);for(const c of l)u.push(r(c));return u}case pc:{const u=n({},i);for(const[c,f]of l)u[r(c)]=r(f);return u}case hm:return n(new Date(l),i);case pm:{const{source:u,flags:c}=l;return n(new RegExp(u,c),i)}case mm:{const u=n(new Map,i);for(const[c,f]of l)u.set(r(c),r(f));return u}case gm:{const u=n(new Set,i);for(const c of l)u.add(r(c));return u}case qk:{const{name:u,message:c}=l;return n(new m0[u](c),i)}case Yk:return n(BigInt(l),i);case"BigInt":return n(Object(BigInt(l)),i);case"ArrayBuffer":return n(new Uint8Array(l).buffer,l);case"DataView":{const{buffer:u}=new Uint8Array(l);return n(new DataView(u),l)}}return n(new m0[o](l),i)};return r},g0=e=>lL(new Map,e)(0),fo="",{toString:uL}={},{keys:cL}=Object,Na=e=>{const t=typeof e;if(t!=="object"||!e)return[Wc,t];const n=uL.call(e).slice(8,-1);switch(n){case"Array":return[Ua,fo];case"Object":return[pc,fo];case"Date":return[hm,fo];case"RegExp":return[pm,fo];case"Map":return[mm,fo];case"Set":return[gm,fo];case"DataView":return[Ua,n]}return n.includes("Array")?[Ua,n]:n.includes("Error")?[qk,n]:[pc,n]},Lu=([e,t])=>e===Wc&&(t==="function"||t==="symbol"),dL=(e,t,n,r)=>{const i=(l,u)=>{const c=r.push(l)-1;return n.set(u,c),c},o=l=>{if(n.has(l))return n.get(l);let[u,c]=Na(l);switch(u){case Wc:{let h=l;switch(c){case"bigint":u=Yk,h=l.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);h=null;break;case"undefined":return i([Vk],l)}return i([u,h],l)}case Ua:{if(c){let v=l;return c==="DataView"?v=new Uint8Array(l.buffer):c==="ArrayBuffer"&&(v=new Uint8Array(l)),i([c,[...v]],l)}const h=[],p=i([u,h],l);for(const v of l)h.push(o(v));return p}case pc:{if(c)switch(c){case"BigInt":return i([c,l.toString()],l);case"Boolean":case"Number":case"String":return i([c,l.valueOf()],l)}if(t&&"toJSON"in l)return o(l.toJSON());const h=[],p=i([u,h],l);for(const v of cL(l))(e||!Lu(Na(l[v])))&&h.push([o(v),o(l[v])]);return p}case hm:return i([u,l.toISOString()],l);case pm:{const{source:h,flags:p}=l;return i([u,{source:h,flags:p}],l)}case mm:{const h=[],p=i([u,h],l);for(const[v,y]of l)(e||!(Lu(Na(v))||Lu(Na(y))))&&h.push([o(v),o(y)]);return p}case gm:{const h=[],p=i([u,h],l);for(const v of l)(e||!Lu(Na(v)))&&h.push(o(v));return p}}const{message:f}=l;return i([u,{name:c,message:f}],l)};return o},y0=(e,{json:t,lossy:n}={})=>{const r=[];return dL(!(t||n),!!t,new Map,r)(e),r},mc=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?g0(y0(e,t)):structuredClone(e):(e,t)=>g0(y0(e,t));function fL(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function hL(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function pL(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||fL,r=e.options.footnoteBackLabel||hL,i=e.options.footnoteLabel||"Footnotes",o=e.options.footnoteLabelTagName||"h2",l=e.options.footnoteLabelProperties||{className:["sr-only"]},u=[];let c=-1;for(;++c<e.footnoteOrder.length;){const f=e.footnoteById.get(e.footnoteOrder[c]);if(!f)continue;const h=e.all(f),p=String(f.identifier).toUpperCase(),v=zo(p.toLowerCase());let y=0;const S=[],E=e.footnoteCounts.get(p);for(;E!==void 0&&++y<=E;){S.length>0&&S.push({type:"text",value:" "});let _=typeof n=="string"?n:n(c,y);typeof _=="string"&&(_={type:"text",value:_}),S.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+v+(y>1?"-"+y:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,y),className:["data-footnote-backref"]},children:Array.isArray(_)?_:[_]})}const k=h[h.length-1];if(k&&k.type==="element"&&k.tagName==="p"){const _=k.children[k.children.length-1];_&&_.type==="text"?_.value+=" ":k.children.push({type:"text",value:" "}),k.children.push(...S)}else h.push(...S);const C={type:"element",tagName:"li",properties:{id:t+"fn-"+v},children:e.wrap(h,!0)};e.patch(f,C),u.push(C)}if(u.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...mc(l),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(u,!0)},{type:"text",value:`
`}]}}const Hc=(function(e){if(e==null)return vL;if(typeof e=="function")return Vc(e);if(typeof e=="object")return Array.isArray(e)?mL(e):gL(e);if(typeof e=="string")return yL(e);throw new Error("Expected function, string, or object as test")});function mL(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Hc(e[n]);return Vc(r);function r(...i){let o=-1;for(;++o<t.length;)if(t[o].apply(this,i))return!0;return!1}}function gL(e){const t=e;return Vc(n);function n(r){const i=r;let o;for(o in e)if(i[o]!==t[o])return!1;return!0}}function yL(e){return Vc(t);function t(n){return n&&n.type===e}}function Vc(e){return t;function t(n,r,i){return!!(xL(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function vL(){return!0}function xL(e){return e!==null&&typeof e=="object"&&"type"in e}const Gk=[],wL=!0,yp=!1,bL="skip";function Kk(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const o=Hc(i),l=r?-1:1;u(e,void 0,[])();function u(c,f,h){const p=c&&typeof c=="object"?c:{};if(typeof p.type=="string"){const y=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(v,"name",{value:"node ("+(c.type+(y?"<"+y+">":""))+")"})}return v;function v(){let y=Gk,S,E,k;if((!t||o(c,f,h[h.length-1]||void 0))&&(y=kL(n(c,h)),y[0]===yp))return y;if("children"in c&&c.children){const C=c;if(C.children&&y[0]!==bL)for(E=(r?C.children.length:-1)+l,k=h.concat(C);E>-1&&E<C.children.length;){const _=C.children[E];if(S=u(_,E,k)(),S[0]===yp)return S;E=typeof S[1]=="number"?S[1]:E+l}}return y}}}function kL(e){return Array.isArray(e)?e:typeof e=="number"?[wL,e]:e==null?Gk:[e]}function qc(e,t,n,r){let i,o,l;typeof t=="function"&&typeof n!="function"?(o=void 0,l=t,i=n):(o=t,l=n,i=r),Kk(e,o,u,i);function u(c,f){const h=f[f.length-1],p=h?h.children.indexOf(c):void 0;return l(c,p,h)}}const vp={}.hasOwnProperty,SL={};function EL(e,t){const n=t||SL,r=new Map,i=new Map,o=new Map,l={...aL,...n.handlers},u={all:f,applyData:CL,definitionById:r,footnoteById:i,footnoteCounts:o,footnoteOrder:[],handlers:l,one:c,options:n,patch:_L,wrap:NL};return qc(e,function(h){if(h.type==="definition"||h.type==="footnoteDefinition"){const p=h.type==="definition"?r:i,v=String(h.identifier).toUpperCase();p.has(v)||p.set(v,h)}}),u;function c(h,p){const v=h.type,y=u.handlers[v];if(vp.call(u.handlers,v)&&y)return y(u,h,p);if(u.options.passThrough&&u.options.passThrough.includes(v)){if("children"in h){const{children:E,...k}=h,C=mc(k);return C.children=u.all(h),C}return mc(h)}return(u.options.unknownHandler||jL)(u,h,p)}function f(h){const p=[];if("children"in h){const v=h.children;let y=-1;for(;++y<v.length;){const S=u.one(v[y],h);if(S){if(y&&v[y-1].type==="break"&&(!Array.isArray(S)&&S.type==="text"&&(S.value=v0(S.value)),!Array.isArray(S)&&S.type==="element")){const E=S.children[0];E&&E.type==="text"&&(E.value=v0(E.value))}Array.isArray(S)?p.push(...S):p.push(S)}}}return p}}function _L(e,t){e.position&&(t.position=hO(e))}function CL(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,o=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const l="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:l}}n.type==="element"&&o&&Object.assign(n.properties,mc(o)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function jL(e,t){const n=t.data||{},r="value"in t&&!(vp.call(n,"hProperties")||vp.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function NL(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function v0(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function x0(e,t){const n=EL(e,t),r=n.one(e,void 0),i=pL(n),o=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&o.children.push({type:"text",value:`
`},i),o}function TL(e,t){return e&&"run"in e?async function(n,r){const i=x0(n,{file:r,...t});await e.run(i,r)}:function(n,r){return x0(n,{file:r,...e||t})}}function w0(e){if(e)throw e}var dh,b0;function IL(){if(b0)return dh;b0=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(f){return typeof Array.isArray=="function"?Array.isArray(f):t.call(f)==="[object Array]"},o=function(f){if(!f||t.call(f)!=="[object Object]")return!1;var h=e.call(f,"constructor"),p=f.constructor&&f.constructor.prototype&&e.call(f.constructor.prototype,"isPrototypeOf");if(f.constructor&&!h&&!p)return!1;var v;for(v in f);return typeof v>"u"||e.call(f,v)},l=function(f,h){n&&h.name==="__proto__"?n(f,h.name,{enumerable:!0,configurable:!0,value:h.newValue,writable:!0}):f[h.name]=h.newValue},u=function(f,h){if(h==="__proto__")if(e.call(f,h)){if(r)return r(f,h).value}else return;return f[h]};return dh=function c(){var f,h,p,v,y,S,E=arguments[0],k=1,C=arguments.length,_=!1;for(typeof E=="boolean"&&(_=E,E=arguments[1]||{},k=2),(E==null||typeof E!="object"&&typeof E!="function")&&(E={});k<C;++k)if(f=arguments[k],f!=null)for(h in f)p=u(E,h),v=u(f,h),E!==v&&(_&&v&&(o(v)||(y=i(v)))?(y?(y=!1,S=p&&i(p)?p:[]):S=p&&o(p)?p:{},l(E,{name:h,newValue:c(_,S,v)})):typeof v<"u"&&l(E,{name:h,newValue:v}));return E},dh}var PL=IL();const fh=Ao(PL);function xp(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function AL(){const e=[],t={run:n,use:r};return t;function n(...i){let o=-1;const l=i.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);u(null,...i);function u(c,...f){const h=e[++o];let p=-1;if(c){l(c);return}for(;++p<i.length;)(f[p]===null||f[p]===void 0)&&(f[p]=i[p]);i=f,h?RL(h,u)(...f):l(null,...f)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function RL(e,t){let n;return r;function r(...l){const u=e.length>l.length;let c;u&&l.push(i);try{c=e.apply(this,l)}catch(f){const h=f;if(u&&n)throw h;return i(h)}u||(c&&c.then&&typeof c.then=="function"?c.then(o,i):c instanceof Error?i(c):o(c))}function i(l,...u){n||(n=!0,t(l,...u))}function o(l){i(null,l)}}const Or={basename:OL,dirname:ML,extname:LL,join:DL,sep:"/"};function OL(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');ml(e);let n=0,r=-1,i=e.length,o;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(o){n=i+1;break}}else r<0&&(o=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let l=-1,u=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(o){n=i+1;break}}else l<0&&(o=!0,l=i+1),u>-1&&(e.codePointAt(i)===t.codePointAt(u--)?u<0&&(r=i):(u=-1,r=l));return n===r?r=l:r<0&&(r=e.length),e.slice(n,r)}function ML(e){if(ml(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function LL(e){ml(e);let t=e.length,n=-1,r=0,i=-1,o=0,l;for(;t--;){const u=e.codePointAt(t);if(u===47){if(l){r=t+1;break}continue}n<0&&(l=!0,n=t+1),u===46?i<0?i=t:o!==1&&(o=1):i>-1&&(o=-1)}return i<0||n<0||o===0||o===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function DL(...e){let t=-1,n;for(;++t<e.length;)ml(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":$L(n)}function $L(e){ml(e);const t=e.codePointAt(0)===47;let n=FL(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function FL(e,t){let n="",r=0,i=-1,o=0,l=-1,u,c;for(;++l<=e.length;){if(l<e.length)u=e.codePointAt(l);else{if(u===47)break;u=47}if(u===47){if(!(i===l-1||o===1))if(i!==l-1&&o===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),i=l,o=0;continue}}else if(n.length>0){n="",r=0,i=l,o=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,l):n=e.slice(i+1,l),r=l-i-1;i=l,o=0}else u===46&&o>-1?o++:o=-1}return n}function ml(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const zL={cwd:BL};function BL(){return"/"}function wp(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function UL(e){if(typeof e=="string")e=new URL(e);else if(!wp(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return WL(e)}function WL(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const hh=["history","path","basename","stem","extname","dirname"];class Jk{constructor(t){let n;t?wp(t)?n={path:t}:typeof t=="string"||HL(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":zL.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<hh.length;){const o=hh[r];o in n&&n[o]!==void 0&&n[o]!==null&&(this[o]=o==="history"?[...n[o]]:n[o])}let i;for(i in n)hh.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Or.basename(this.path):void 0}set basename(t){mh(t,"basename"),ph(t,"basename"),this.path=Or.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Or.dirname(this.path):void 0}set dirname(t){k0(this.basename,"dirname"),this.path=Or.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Or.extname(this.path):void 0}set extname(t){if(ph(t,"extname"),k0(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Or.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){wp(t)&&(t=UL(t)),mh(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Or.basename(this.path,this.extname):void 0}set stem(t){mh(t,"stem"),ph(t,"stem"),this.path=Or.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new vn(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function ph(e,t){if(e&&e.includes(Or.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Or.sep+"`")}function mh(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function k0(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function HL(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const VL=(function(e){const r=this.constructor.prototype,i=r[e],o=function(){return i.apply(o,arguments)};return Object.setPrototypeOf(o,r),o}),qL={}.hasOwnProperty;class ym extends VL{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=AL()}copy(){const t=new ym;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(fh(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(vh("data",this.frozen),this.namespace[t]=n,this):qL.call(this.namespace,t)&&this.namespace[t]||void 0:t?(vh("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=Du(t),r=this.parser||this.Parser;return gh("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),gh("process",this.parser||this.Parser),yh("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(o,l){const u=Du(t),c=r.parse(u);r.run(c,u,function(h,p,v){if(h||!p||!v)return f(h);const y=p,S=r.stringify(y,v);KL(S)?v.value=S:v.result=S,f(h,v)});function f(h,p){h||!p?l(h):o?o(p):n(void 0,p)}}}processSync(t){let n=!1,r;return this.freeze(),gh("processSync",this.parser||this.Parser),yh("processSync",this.compiler||this.Compiler),this.process(t,i),E0("processSync","process",n),r;function i(o,l){n=!0,w0(o),r=l}}run(t,n,r){S0(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?o(void 0,r):new Promise(o);function o(l,u){const c=Du(n);i.run(t,c,f);function f(h,p,v){const y=p||t;h?u(h):l?l(y):r(void 0,y,v)}}}runSync(t,n){let r=!1,i;return this.run(t,n,o),E0("runSync","run",r),i;function o(l,u){w0(l),i=u,r=!0}}stringify(t,n){this.freeze();const r=Du(n),i=this.compiler||this.Compiler;return yh("stringify",i),S0(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(vh("use",this.frozen),t!=null)if(typeof t=="function")c(t,n);else if(typeof t=="object")Array.isArray(t)?u(t):l(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function o(f){if(typeof f=="function")c(f,[]);else if(typeof f=="object")if(Array.isArray(f)){const[h,...p]=f;c(h,p)}else l(f);else throw new TypeError("Expected usable value, not `"+f+"`")}function l(f){if(!("plugins"in f)&&!("settings"in f))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");u(f.plugins),f.settings&&(i.settings=fh(!0,i.settings,f.settings))}function u(f){let h=-1;if(f!=null)if(Array.isArray(f))for(;++h<f.length;){const p=f[h];o(p)}else throw new TypeError("Expected a list of plugins, not `"+f+"`")}function c(f,h){let p=-1,v=-1;for(;++p<r.length;)if(r[p][0]===f){v=p;break}if(v===-1)r.push([f,...h]);else if(h.length>0){let[y,...S]=h;const E=r[v][1];xp(E)&&xp(y)&&(y=fh(!0,E,y)),r[v]=[f,y,...S]}}}}const YL=new ym().freeze();function gh(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function yh(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function vh(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function S0(e){if(!xp(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function E0(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Du(e){return GL(e)?e:new Jk(e)}function GL(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function KL(e){return typeof e=="string"||JL(e)}function JL(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const QL="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",_0=[],C0={allowDangerousHtml:!0},XL=/^(https?|ircs?|mailto|xmpp)$/i,ZL=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function eD(e){const t=tD(e),n=nD(e);return rD(t.runSync(t.parse(n),n),e)}function tD(e){const t=e.rehypePlugins||_0,n=e.remarkPlugins||_0,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...C0}:C0;return YL().use(M2).use(n).use(TL,r).use(t)}function nD(e){const t=e.children||"",n=new Jk;return typeof t=="string"&&(n.value=t),n}function rD(e,t){const n=t.allowedElements,r=t.allowElement,i=t.components,o=t.disallowedElements,l=t.skipHtml,u=t.unwrapDisallowed,c=t.urlTransform||iD;for(const h of ZL)Object.hasOwn(t,h.from)&&(""+h.from+(h.to?"use `"+h.to+"` instead":"remove it")+QL+h.id,void 0);return t.className&&(e={type:"element",tagName:"div",properties:{className:t.className},children:e.type==="root"?e.children:[e]}),qc(e,f),vO(e,{Fragment:g.Fragment,components:i,ignoreInvalidStyle:!0,jsx:g.jsx,jsxs:g.jsxs,passKeys:!0,passNode:!0});function f(h,p,v){if(h.type==="raw"&&v&&typeof p=="number")return l?v.children.splice(p,1):v.children[p]={type:"text",value:h.value},p;if(h.type==="element"){let y;for(y in lh)if(Object.hasOwn(lh,y)&&Object.hasOwn(h.properties,y)){const S=h.properties[y],E=lh[y];(E===null||E.includes(h.tagName))&&(h.properties[y]=c(String(S||""),y,h))}}if(h.type==="element"){let y=n?!n.includes(h.tagName):o?o.includes(h.tagName):!1;if(!y&&r&&typeof p=="number"&&(y=!r(h,p,v)),y&&v&&typeof p=="number")return u&&h.children?v.children.splice(p,1,...h.children):v.children.splice(p,1),p}}}function iD(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||n!==-1&&t>n||r!==-1&&t>r||XL.test(e.slice(0,t))?e:""}function j0(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(t);for(;i!==-1;)r++,i=n.indexOf(t,i+t.length);return r}function sD(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function oD(e,t,n){const i=Hc((n||{}).ignore||[]),o=aD(t);let l=-1;for(;++l<o.length;)Kk(e,"text",u);function u(f,h){let p=-1,v;for(;++p<h.length;){const y=h[p],S=v?v.children:void 0;if(i(y,S?S.indexOf(y):void 0,v))return;v=y}if(v)return c(f,h)}function c(f,h){const p=h[h.length-1],v=o[l][0],y=o[l][1];let S=0;const k=p.children.indexOf(f);let C=!1,_=[];v.lastIndex=0;let j=v.exec(f.value);for(;j;){const I=j.index,O={index:j.index,input:j.input,stack:[...h,f]};let P=y(...j,O);if(typeof P=="string"&&(P=P.length>0?{type:"text",value:P}:void 0),P===!1?v.lastIndex=I+1:(S!==I&&_.push({type:"text",value:f.value.slice(S,I)}),Array.isArray(P)?_.push(...P):P&&_.push(P),S=I+j[0].length,C=!0),!v.global)break;j=v.exec(f.value)}return C?(S<f.value.length&&_.push({type:"text",value:f.value.slice(S)}),p.children.splice(k,1,..._)):_=[f],k+_.length}}function aD(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const i=n[r];t.push([lD(i[0]),uD(i[1])])}return t}function lD(e){return typeof e=="string"?new RegExp(sD(e),"g"):e}function uD(e){return typeof e=="function"?e:function(){return e}}const xh="phrasing",wh=["autolink","link","image","label"];function cD(){return{transforms:[yD],enter:{literalAutolink:fD,literalAutolinkEmail:bh,literalAutolinkHttp:bh,literalAutolinkWww:bh},exit:{literalAutolink:gD,literalAutolinkEmail:mD,literalAutolinkHttp:hD,literalAutolinkWww:pD}}}function dD(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:xh,notInConstruct:wh},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:xh,notInConstruct:wh},{character:":",before:"[ps]",after:"\\/",inConstruct:xh,notInConstruct:wh}]}}function fD(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function bh(e){this.config.enter.autolinkProtocol.call(this,e)}function hD(e){this.config.exit.autolinkProtocol.call(this,e)}function pD(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function mD(e){this.config.exit.autolinkEmail.call(this,e)}function gD(e){this.exit(e)}function yD(e){oD(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,vD],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),xD]],{ignore:["link","linkReference"]})}function vD(e,t,n,r,i){let o="";if(!Qk(i)||(/^w/i.test(t)&&(n=t+n,t="",o="http://"),!wD(n)))return!1;const l=bD(n+r);if(!l[0])return!1;const u={type:"link",title:null,url:o+t+l[0],children:[{type:"text",value:t+l[0]}]};return l[1]?[u,{type:"text",value:l[1]}]:u}function xD(e,t,n,r){return!Qk(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function wD(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function bD(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const i=j0(e,"(");let o=j0(e,")");for(;r!==-1&&i>o;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),o++;return[e,n]}function Qk(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||ks(n)||Bc(n))&&(!t||n!==47)}Xk.peek=ID;function kD(){this.buffer()}function SD(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function ED(){this.buffer()}function _D(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function CD(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=kr(this.sliceSerialize(e)).toLowerCase(),n.label=t}function jD(e){this.exit(e)}function ND(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=kr(this.sliceSerialize(e)).toLowerCase(),n.label=t}function TD(e){this.exit(e)}function ID(){return"["}function Xk(e,t,n,r){const i=n.createTracker(r);let o=i.move("[^");const l=n.enter("footnoteReference"),u=n.enter("reference");return o+=i.move(n.safe(n.associationId(e),{after:"]",before:o})),u(),l(),o+=i.move("]"),o}function PD(){return{enter:{gfmFootnoteCallString:kD,gfmFootnoteCall:SD,gfmFootnoteDefinitionLabelString:ED,gfmFootnoteDefinition:_D},exit:{gfmFootnoteCallString:CD,gfmFootnoteCall:jD,gfmFootnoteDefinitionLabelString:ND,gfmFootnoteDefinition:TD}}}function AD(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:Xk},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,o,l){const u=o.createTracker(l);let c=u.move("[^");const f=o.enter("footnoteDefinition"),h=o.enter("label");return c+=u.move(o.safe(o.associationId(r),{before:c,after:"]"})),h(),c+=u.move("]:"),r.children&&r.children.length>0&&(u.shift(4),c+=u.move((t?`
`:" ")+o.indentLines(o.containerFlow(r,u.current()),t?Zk:RD))),f(),c}}function RD(e,t,n){return t===0?e:Zk(e,t,n)}function Zk(e,t,n){return(n?"":"    ")+e}const OD=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];e1.peek=FD;function MD(){return{canContainEols:["delete"],enter:{strikethrough:DD},exit:{strikethrough:$D}}}function LD(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:OD}],handlers:{delete:e1}}}function DD(e){this.enter({type:"delete",children:[]},e)}function $D(e){this.exit(e)}function e1(e,t,n,r){const i=n.createTracker(r),o=n.enter("strikethrough");let l=i.move("~~");return l+=n.containerPhrasing(e,{...i.current(),before:l,after:"~"}),l+=i.move("~~"),o(),l}function FD(){return"~"}function zD(e){return e.length}function BD(e,t){const n=t||{},r=(n.align||[]).concat(),i=n.stringLength||zD,o=[],l=[],u=[],c=[];let f=0,h=-1;for(;++h<e.length;){const E=[],k=[];let C=-1;for(e[h].length>f&&(f=e[h].length);++C<e[h].length;){const _=UD(e[h][C]);if(n.alignDelimiters!==!1){const j=i(_);k[C]=j,(c[C]===void 0||j>c[C])&&(c[C]=j)}E.push(_)}l[h]=E,u[h]=k}let p=-1;if(typeof r=="object"&&"length"in r)for(;++p<f;)o[p]=N0(r[p]);else{const E=N0(r);for(;++p<f;)o[p]=E}p=-1;const v=[],y=[];for(;++p<f;){const E=o[p];let k="",C="";E===99?(k=":",C=":"):E===108?k=":":E===114&&(C=":");let _=n.alignDelimiters===!1?1:Math.max(1,c[p]-k.length-C.length);const j=k+"-".repeat(_)+C;n.alignDelimiters!==!1&&(_=k.length+_+C.length,_>c[p]&&(c[p]=_),y[p]=_),v[p]=j}l.splice(1,0,v),u.splice(1,0,y),h=-1;const S=[];for(;++h<l.length;){const E=l[h],k=u[h];p=-1;const C=[];for(;++p<f;){const _=E[p]||"";let j="",I="";if(n.alignDelimiters!==!1){const O=c[p]-(k[p]||0),P=o[p];P===114?j=" ".repeat(O):P===99?O%2?(j=" ".repeat(O/2+.5),I=" ".repeat(O/2-.5)):(j=" ".repeat(O/2),I=j):I=" ".repeat(O)}n.delimiterStart!==!1&&!p&&C.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&_==="")&&(n.delimiterStart!==!1||p)&&C.push(" "),n.alignDelimiters!==!1&&C.push(j),C.push(_),n.alignDelimiters!==!1&&C.push(I),n.padding!==!1&&C.push(" "),(n.delimiterEnd!==!1||p!==f-1)&&C.push("|")}S.push(n.delimiterEnd===!1?C.join("").replace(/ +$/,""):C.join(""))}return S.join(`
`)}function UD(e){return e==null?"":String(e)}function N0(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function WD(e,t,n,r){const i=n.enter("blockquote"),o=n.createTracker(r);o.move("> "),o.shift(2);const l=n.indentLines(n.containerFlow(e,o.current()),HD);return i(),l}function HD(e,t,n){return">"+(n?"":" ")+e}function VD(e,t){return T0(e,t.inConstruct,!0)&&!T0(e,t.notInConstruct,!1)}function T0(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function I0(e,t,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&VD(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function qD(e,t){const n=String(e);let r=n.indexOf(t),i=r,o=0,l=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++o>l&&(l=o):o=1,i=r+t.length,r=n.indexOf(t,i);return l}function YD(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function GD(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function KD(e,t,n,r){const i=GD(n),o=e.value||"",l=i==="`"?"GraveAccent":"Tilde";if(YD(e,n)){const p=n.enter("codeIndented"),v=n.indentLines(o,JD);return p(),v}const u=n.createTracker(r),c=i.repeat(Math.max(qD(o,i)+1,3)),f=n.enter("codeFenced");let h=u.move(c);if(e.lang){const p=n.enter(`codeFencedLang${l}`);h+=u.move(n.safe(e.lang,{before:h,after:" ",encode:["`"],...u.current()})),p()}if(e.lang&&e.meta){const p=n.enter(`codeFencedMeta${l}`);h+=u.move(" "),h+=u.move(n.safe(e.meta,{before:h,after:`
`,encode:["`"],...u.current()})),p()}return h+=u.move(`
`),o&&(h+=u.move(o+`
`)),h+=u.move(c),f(),h}function JD(e,t,n){return(n?"":"    ")+e}function vm(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function QD(e,t,n,r){const i=vm(n),o=i==='"'?"Quote":"Apostrophe",l=n.enter("definition");let u=n.enter("label");const c=n.createTracker(r);let f=c.move("[");return f+=c.move(n.safe(n.associationId(e),{before:f,after:"]",...c.current()})),f+=c.move("]: "),u(),!e.url||/[\0- \u007F]/.test(e.url)?(u=n.enter("destinationLiteral"),f+=c.move("<"),f+=c.move(n.safe(e.url,{before:f,after:">",...c.current()})),f+=c.move(">")):(u=n.enter("destinationRaw"),f+=c.move(n.safe(e.url,{before:f,after:e.title?" ":`
`,...c.current()}))),u(),e.title&&(u=n.enter(`title${o}`),f+=c.move(" "+i),f+=c.move(n.safe(e.title,{before:f,after:i,...c.current()})),f+=c.move(i),u()),l(),f}function XD(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function nl(e){return"&#x"+e.toString(16).toUpperCase()+";"}function gc(e,t,n){const r=Po(e),i=Po(t);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}t1.peek=ZD;function t1(e,t,n,r){const i=XD(n),o=n.enter("emphasis"),l=n.createTracker(r),u=l.move(i);let c=l.move(n.containerPhrasing(e,{after:i,before:u,...l.current()}));const f=c.charCodeAt(0),h=gc(r.before.charCodeAt(r.before.length-1),f,i);h.inside&&(c=nl(f)+c.slice(1));const p=c.charCodeAt(c.length-1),v=gc(r.after.charCodeAt(0),p,i);v.inside&&(c=c.slice(0,-1)+nl(p));const y=l.move(i);return o(),n.attentionEncodeSurroundingInfo={after:v.outside,before:h.outside},u+c+y}function ZD(e,t,n){return n.options.emphasis||"*"}function e$(e,t){let n=!1;return qc(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,yp}),!!((!e.depth||e.depth<3)&&cm(e)&&(t.options.setext||n))}function t$(e,t,n,r){const i=Math.max(Math.min(6,e.depth||1),1),o=n.createTracker(r);if(e$(e,n)){const h=n.enter("headingSetext"),p=n.enter("phrasing"),v=n.containerPhrasing(e,{...o.current(),before:`
`,after:`
`});return p(),h(),v+`
`+(i===1?"=":"-").repeat(v.length-(Math.max(v.lastIndexOf("\r"),v.lastIndexOf(`
`))+1))}const l="#".repeat(i),u=n.enter("headingAtx"),c=n.enter("phrasing");o.move(l+" ");let f=n.containerPhrasing(e,{before:"# ",after:`
`,...o.current()});return/^[\t ]/.test(f)&&(f=nl(f.charCodeAt(0))+f.slice(1)),f=f?l+" "+f:l,n.options.closeAtx&&(f+=" "+l),c(),u(),f}n1.peek=n$;function n1(e){return e.value||""}function n$(){return"<"}r1.peek=r$;function r1(e,t,n,r){const i=vm(n),o=i==='"'?"Quote":"Apostrophe",l=n.enter("image");let u=n.enter("label");const c=n.createTracker(r);let f=c.move("![");return f+=c.move(n.safe(e.alt,{before:f,after:"]",...c.current()})),f+=c.move("]("),u(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(u=n.enter("destinationLiteral"),f+=c.move("<"),f+=c.move(n.safe(e.url,{before:f,after:">",...c.current()})),f+=c.move(">")):(u=n.enter("destinationRaw"),f+=c.move(n.safe(e.url,{before:f,after:e.title?" ":")",...c.current()}))),u(),e.title&&(u=n.enter(`title${o}`),f+=c.move(" "+i),f+=c.move(n.safe(e.title,{before:f,after:i,...c.current()})),f+=c.move(i),u()),f+=c.move(")"),l(),f}function r$(){return"!"}i1.peek=i$;function i1(e,t,n,r){const i=e.referenceType,o=n.enter("imageReference");let l=n.enter("label");const u=n.createTracker(r);let c=u.move("![");const f=n.safe(e.alt,{before:c,after:"]",...u.current()});c+=u.move(f+"]["),l();const h=n.stack;n.stack=[],l=n.enter("reference");const p=n.safe(n.associationId(e),{before:c,after:"]",...u.current()});return l(),n.stack=h,o(),i==="full"||!f||f!==p?c+=u.move(p+"]"):i==="shortcut"?c=c.slice(0,-1):c+=u.move("]"),c}function i$(){return"!"}s1.peek=s$;function s1(e,t,n){let r=e.value||"",i="`",o=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++o<n.unsafe.length;){const l=n.unsafe[o],u=n.compilePattern(l);let c;if(l.atBreak)for(;c=u.exec(r);){let f=c.index;r.charCodeAt(f)===10&&r.charCodeAt(f-1)===13&&f--,r=r.slice(0,f)+" "+r.slice(c.index+1)}}return i+r+i}function s$(){return"`"}function o1(e,t){const n=cm(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}a1.peek=o$;function a1(e,t,n,r){const i=vm(n),o=i==='"'?"Quote":"Apostrophe",l=n.createTracker(r);let u,c;if(o1(e,n)){const h=n.stack;n.stack=[],u=n.enter("autolink");let p=l.move("<");return p+=l.move(n.containerPhrasing(e,{before:p,after:">",...l.current()})),p+=l.move(">"),u(),n.stack=h,p}u=n.enter("link"),c=n.enter("label");let f=l.move("[");return f+=l.move(n.containerPhrasing(e,{before:f,after:"](",...l.current()})),f+=l.move("]("),c(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(c=n.enter("destinationLiteral"),f+=l.move("<"),f+=l.move(n.safe(e.url,{before:f,after:">",...l.current()})),f+=l.move(">")):(c=n.enter("destinationRaw"),f+=l.move(n.safe(e.url,{before:f,after:e.title?" ":")",...l.current()}))),c(),e.title&&(c=n.enter(`title${o}`),f+=l.move(" "+i),f+=l.move(n.safe(e.title,{before:f,after:i,...l.current()})),f+=l.move(i),c()),f+=l.move(")"),u(),f}function o$(e,t,n){return o1(e,n)?"<":"["}l1.peek=a$;function l1(e,t,n,r){const i=e.referenceType,o=n.enter("linkReference");let l=n.enter("label");const u=n.createTracker(r);let c=u.move("[");const f=n.containerPhrasing(e,{before:c,after:"]",...u.current()});c+=u.move(f+"]["),l();const h=n.stack;n.stack=[],l=n.enter("reference");const p=n.safe(n.associationId(e),{before:c,after:"]",...u.current()});return l(),n.stack=h,o(),i==="full"||!f||f!==p?c+=u.move(p+"]"):i==="shortcut"?c=c.slice(0,-1):c+=u.move("]"),c}function a$(){return"["}function xm(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function l$(e){const t=xm(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function u$(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function u1(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function c$(e,t,n,r){const i=n.enter("list"),o=n.bulletCurrent;let l=e.ordered?u$(n):xm(n);const u=e.ordered?l==="."?")":".":l$(n);let c=t&&n.bulletLastUsed?l===n.bulletLastUsed:!1;if(!e.ordered){const h=e.children?e.children[0]:void 0;if((l==="*"||l==="-")&&h&&(!h.children||!h.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),u1(n)===l&&h){let p=-1;for(;++p<e.children.length;){const v=e.children[p];if(v&&v.type==="listItem"&&v.children&&v.children[0]&&v.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(l=u),n.bulletCurrent=l;const f=n.containerFlow(e,r);return n.bulletLastUsed=l,n.bulletCurrent=o,i(),f}function d$(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function f$(e,t,n,r){const i=d$(n);let o=n.bulletCurrent||xm(n);t&&t.type==="list"&&t.ordered&&(o=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+o);let l=o.length+1;(i==="tab"||i==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(l=Math.ceil(l/4)*4);const u=n.createTracker(r);u.move(o+" ".repeat(l-o.length)),u.shift(l);const c=n.enter("listItem"),f=n.indentLines(n.containerFlow(e,u.current()),h);return c(),f;function h(p,v,y){return v?(y?"":" ".repeat(l))+p:(y?o:o+" ".repeat(l-o.length))+p}}function h$(e,t,n,r){const i=n.enter("paragraph"),o=n.enter("phrasing"),l=n.containerPhrasing(e,r);return o(),i(),l}const p$=Hc(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function m$(e,t,n,r){return(e.children.some(function(l){return p$(l)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function g$(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}c1.peek=y$;function c1(e,t,n,r){const i=g$(n),o=n.enter("strong"),l=n.createTracker(r),u=l.move(i+i);let c=l.move(n.containerPhrasing(e,{after:i,before:u,...l.current()}));const f=c.charCodeAt(0),h=gc(r.before.charCodeAt(r.before.length-1),f,i);h.inside&&(c=nl(f)+c.slice(1));const p=c.charCodeAt(c.length-1),v=gc(r.after.charCodeAt(0),p,i);v.inside&&(c=c.slice(0,-1)+nl(p));const y=l.move(i+i);return o(),n.attentionEncodeSurroundingInfo={after:v.outside,before:h.outside},u+c+y}function y$(e,t,n){return n.options.strong||"*"}function v$(e,t,n,r){return n.safe(e.value,r)}function x$(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function w$(e,t,n){const r=(u1(n)+(n.options.ruleSpaces?" ":"")).repeat(x$(n));return n.options.ruleSpaces?r.slice(0,-1):r}const d1={blockquote:WD,break:I0,code:KD,definition:QD,emphasis:t1,hardBreak:I0,heading:t$,html:n1,image:r1,imageReference:i1,inlineCode:s1,link:a1,linkReference:l1,list:c$,listItem:f$,paragraph:h$,root:m$,strong:c1,text:v$,thematicBreak:w$};function b$(){return{enter:{table:k$,tableData:P0,tableHeader:P0,tableRow:E$},exit:{codeText:_$,table:S$,tableData:kh,tableHeader:kh,tableRow:kh}}}function k$(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function S$(e){this.exit(e),this.data.inTable=void 0}function E$(e){this.enter({type:"tableRow",children:[]},e)}function kh(e){this.exit(e)}function P0(e){this.enter({type:"tableCell",children:[]},e)}function _$(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,C$));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function C$(e,t){return t==="|"?t:e}function j$(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,i=t.stringLength,o=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:v,table:l,tableCell:c,tableRow:u}};function l(y,S,E,k){return f(h(y,E,k),y.align)}function u(y,S,E,k){const C=p(y,E,k),_=f([C]);return _.slice(0,_.indexOf(`
`))}function c(y,S,E,k){const C=E.enter("tableCell"),_=E.enter("phrasing"),j=E.containerPhrasing(y,{...k,before:o,after:o});return _(),C(),j}function f(y,S){return BD(y,{align:S,alignDelimiters:r,padding:n,stringLength:i})}function h(y,S,E){const k=y.children;let C=-1;const _=[],j=S.enter("table");for(;++C<k.length;)_[C]=p(k[C],S,E);return j(),_}function p(y,S,E){const k=y.children;let C=-1;const _=[],j=S.enter("tableRow");for(;++C<k.length;)_[C]=c(k[C],y,S,E);return j(),_}function v(y,S,E){let k=d1.inlineCode(y,S,E);return E.stack.includes("tableCell")&&(k=k.replace(/\|/g,"\\$&")),k}}function N$(){return{exit:{taskListCheckValueChecked:A0,taskListCheckValueUnchecked:A0,paragraph:I$}}}function T$(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:P$}}}function A0(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function I$(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=t.children;let o=-1,l;for(;++o<i.length;){const u=i[o];if(u.type==="paragraph"){l=u;break}}l===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function P$(e,t,n,r){const i=e.children[0],o=typeof e.checked=="boolean"&&i&&i.type==="paragraph",l="["+(e.checked?"x":" ")+"] ",u=n.createTracker(r);o&&u.move(l);let c=d1.listItem(e,t,n,{...r,...u.current()});return o&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,f)),c;function f(h){return h+l}}function A$(){return[cD(),PD(),MD(),b$(),N$()]}function R$(e){return{extensions:[dD(),AD(e),LD(),j$(e),T$()]}}const O$={tokenize:z$,partial:!0},f1={tokenize:B$,partial:!0},h1={tokenize:U$,partial:!0},p1={tokenize:W$,partial:!0},M$={tokenize:H$,partial:!0},m1={name:"wwwAutolink",tokenize:$$,previous:y1},g1={name:"protocolAutolink",tokenize:F$,previous:v1},oi={name:"emailAutolink",tokenize:D$,previous:x1},Wr={};function L$(){return{text:Wr}}let os=48;for(;os<123;)Wr[os]=oi,os++,os===58?os=65:os===91&&(os=97);Wr[43]=oi;Wr[45]=oi;Wr[46]=oi;Wr[95]=oi;Wr[72]=[oi,g1];Wr[104]=[oi,g1];Wr[87]=[oi,m1];Wr[119]=[oi,m1];function D$(e,t,n){const r=this;let i,o;return l;function l(p){return!bp(p)||!x1.call(r,r.previous)||wm(r.events)?n(p):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),u(p))}function u(p){return bp(p)?(e.consume(p),u):p===64?(e.consume(p),c):n(p)}function c(p){return p===46?e.check(M$,h,f)(p):p===45||p===95||yn(p)?(o=!0,e.consume(p),c):h(p)}function f(p){return e.consume(p),i=!0,c}function h(p){return o&&i&&bn(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(p)):n(p)}}function $$(e,t,n){const r=this;return i;function i(l){return l!==87&&l!==119||!y1.call(r,r.previous)||wm(r.events)?n(l):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(O$,e.attempt(f1,e.attempt(h1,o),n),n)(l))}function o(l){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(l)}}function F$(e,t,n){const r=this;let i="",o=!1;return l;function l(p){return(p===72||p===104)&&v1.call(r,r.previous)&&!wm(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),i+=String.fromCodePoint(p),e.consume(p),u):n(p)}function u(p){if(bn(p)&&i.length<5)return i+=String.fromCodePoint(p),e.consume(p),u;if(p===58){const v=i.toLowerCase();if(v==="http"||v==="https")return e.consume(p),c}return n(p)}function c(p){return p===47?(e.consume(p),o?f:(o=!0,c)):n(p)}function f(p){return p===null||hc(p)||wt(p)||ks(p)||Bc(p)?n(p):e.attempt(f1,e.attempt(h1,h),n)(p)}function h(p){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(p)}}function z$(e,t,n){let r=0;return i;function i(l){return(l===87||l===119)&&r<3?(r++,e.consume(l),i):l===46&&r===3?(e.consume(l),o):n(l)}function o(l){return l===null?n(l):t(l)}}function B$(e,t,n){let r,i,o;return l;function l(f){return f===46||f===95?e.check(p1,c,u)(f):f===null||wt(f)||ks(f)||f!==45&&Bc(f)?c(f):(o=!0,e.consume(f),l)}function u(f){return f===95?r=!0:(i=r,r=void 0),e.consume(f),l}function c(f){return i||r||!o?n(f):t(f)}}function U$(e,t){let n=0,r=0;return i;function i(l){return l===40?(n++,e.consume(l),i):l===41&&r<n?o(l):l===33||l===34||l===38||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===60||l===63||l===93||l===95||l===126?e.check(p1,t,o)(l):l===null||wt(l)||ks(l)?t(l):(e.consume(l),i)}function o(l){return l===41&&r++,e.consume(l),i}}function W$(e,t,n){return r;function r(u){return u===33||u===34||u===39||u===41||u===42||u===44||u===46||u===58||u===59||u===63||u===95||u===126?(e.consume(u),r):u===38?(e.consume(u),o):u===93?(e.consume(u),i):u===60||u===null||wt(u)||ks(u)?t(u):n(u)}function i(u){return u===null||u===40||u===91||wt(u)||ks(u)?t(u):r(u)}function o(u){return bn(u)?l(u):n(u)}function l(u){return u===59?(e.consume(u),r):bn(u)?(e.consume(u),l):n(u)}}function H$(e,t,n){return r;function r(o){return e.consume(o),i}function i(o){return yn(o)?n(o):t(o)}}function y1(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||wt(e)}function v1(e){return!bn(e)}function x1(e){return!(e===47||bp(e))}function bp(e){return e===43||e===45||e===46||e===95||yn(e)}function wm(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const V$={tokenize:Z$,partial:!0};function q$(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:J$,continuation:{tokenize:Q$},exit:X$}},text:{91:{name:"gfmFootnoteCall",tokenize:K$},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:Y$,resolveTo:G$}}}}function Y$(e,t,n){const r=this;let i=r.events.length;const o=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let l;for(;i--;){const c=r.events[i][1];if(c.type==="labelImage"){l=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return u;function u(c){if(!l||!l._balanced)return n(c);const f=kr(r.sliceSerialize({start:l.end,end:r.now()}));return f.codePointAt(0)!==94||!o.includes(f.slice(1))?n(c):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(c),e.exit("gfmFootnoteCallLabelMarker"),t(c))}}function G$(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const o={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},l={type:"chunkString",contentType:"string",start:Object.assign({},o.start),end:Object.assign({},o.end)},u=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",i,t],["exit",i,t],["enter",o,t],["enter",l,t],["exit",l,t],["exit",o,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...u),e}function K$(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o=0,l;return u;function u(p){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(p),e.exit("gfmFootnoteCallLabelMarker"),c}function c(p){return p!==94?n(p):(e.enter("gfmFootnoteCallMarker"),e.consume(p),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",f)}function f(p){if(o>999||p===93&&!l||p===null||p===91||wt(p))return n(p);if(p===93){e.exit("chunkString");const v=e.exit("gfmFootnoteCallString");return i.includes(kr(r.sliceSerialize(v)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(p),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(p)}return wt(p)||(l=!0),o++,e.consume(p),p===92?h:f}function h(p){return p===91||p===92||p===93?(e.consume(p),o++,f):f(p)}}function J$(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o,l=0,u;return c;function c(S){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(S),e.exit("gfmFootnoteDefinitionLabelMarker"),f}function f(S){return S===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(S),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",h):n(S)}function h(S){if(l>999||S===93&&!u||S===null||S===91||wt(S))return n(S);if(S===93){e.exit("chunkString");const E=e.exit("gfmFootnoteDefinitionLabelString");return o=kr(r.sliceSerialize(E)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(S),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),v}return wt(S)||(u=!0),l++,e.consume(S),S===92?p:h}function p(S){return S===91||S===92||S===93?(e.consume(S),l++,h):h(S)}function v(S){return S===58?(e.enter("definitionMarker"),e.consume(S),e.exit("definitionMarker"),i.includes(o)||i.push(o),ut(e,y,"gfmFootnoteDefinitionWhitespace")):n(S)}function y(S){return t(S)}}function Q$(e,t,n){return e.check(pl,t,e.attempt(V$,t,n))}function X$(e){e.exit("gfmFootnoteDefinition")}function Z$(e,t,n){const r=this;return ut(e,i,"gfmFootnoteDefinitionIndent",5);function i(o){const l=r.events[r.events.length-1];return l&&l[1].type==="gfmFootnoteDefinitionIndent"&&l[2].sliceSerialize(l[1],!0).length===4?t(o):n(o)}}function e4(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:o,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(l,u){let c=-1;for(;++c<l.length;)if(l[c][0]==="enter"&&l[c][1].type==="strikethroughSequenceTemporary"&&l[c][1]._close){let f=c;for(;f--;)if(l[f][0]==="exit"&&l[f][1].type==="strikethroughSequenceTemporary"&&l[f][1]._open&&l[c][1].end.offset-l[c][1].start.offset===l[f][1].end.offset-l[f][1].start.offset){l[c][1].type="strikethroughSequence",l[f][1].type="strikethroughSequence";const h={type:"strikethrough",start:Object.assign({},l[f][1].start),end:Object.assign({},l[c][1].end)},p={type:"strikethroughText",start:Object.assign({},l[f][1].end),end:Object.assign({},l[c][1].start)},v=[["enter",h,u],["enter",l[f][1],u],["exit",l[f][1],u],["enter",p,u]],y=u.parser.constructs.insideSpan.null;y&&Gn(v,v.length,0,Uc(y,l.slice(f+1,c),u)),Gn(v,v.length,0,[["exit",p,u],["enter",l[c][1],u],["exit",l[c][1],u],["exit",h,u]]),Gn(l,f-1,c-f+3,v),c=f+v.length-2;break}}for(c=-1;++c<l.length;)l[c][1].type==="strikethroughSequenceTemporary"&&(l[c][1].type="data");return l}function o(l,u,c){const f=this.previous,h=this.events;let p=0;return v;function v(S){return f===126&&h[h.length-1][1].type!=="characterEscape"?c(S):(l.enter("strikethroughSequenceTemporary"),y(S))}function y(S){const E=Po(f);if(S===126)return p>1?c(S):(l.consume(S),p++,y);if(p<2&&!n)return c(S);const k=l.exit("strikethroughSequenceTemporary"),C=Po(S);return k._open=!C||C===2&&!!E,k._close=!E||E===2&&!!C,u(S)}}}class t4{constructor(){this.map=[]}add(t,n,r){n4(this,t,n,r)}consume(t){if(this.map.sort(function(o,l){return o[0]-l[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let i=r.pop();for(;i;){for(const o of i)t.push(o);i=r.pop()}this.map.length=0}}function n4(e,t,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<e.map.length;){if(e.map[i][0]===t){e.map[i][1]+=n,e.map[i][2].push(...r);return}i+=1}e.map.push([t,n,r])}}function r4(e,t){let n=!1;const r=[];for(;t<e.length;){const i=e[t];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const o=r.length-1;r[o]=r[o]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function i4(){return{flow:{null:{name:"table",tokenize:s4,resolveAll:o4}}}}function s4(e,t,n){const r=this;let i=0,o=0,l;return u;function u(R){let D=r.events.length-1;for(;D>-1;){const Y=r.events[D][1].type;if(Y==="lineEnding"||Y==="linePrefix")D--;else break}const re=D>-1?r.events[D][1].type:null,W=re==="tableHead"||re==="tableRow"?P:c;return W===P&&r.parser.lazy[r.now().line]?n(R):W(R)}function c(R){return e.enter("tableHead"),e.enter("tableRow"),f(R)}function f(R){return R===124||(l=!0,o+=1),h(R)}function h(R){return R===null?n(R):Ye(R)?o>1?(o=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(R),e.exit("lineEnding"),y):n(R):at(R)?ut(e,h,"whitespace")(R):(o+=1,l&&(l=!1,i+=1),R===124?(e.enter("tableCellDivider"),e.consume(R),e.exit("tableCellDivider"),l=!0,h):(e.enter("data"),p(R)))}function p(R){return R===null||R===124||wt(R)?(e.exit("data"),h(R)):(e.consume(R),R===92?v:p)}function v(R){return R===92||R===124?(e.consume(R),p):p(R)}function y(R){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(R):(e.enter("tableDelimiterRow"),l=!1,at(R)?ut(e,S,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(R):S(R))}function S(R){return R===45||R===58?k(R):R===124?(l=!0,e.enter("tableCellDivider"),e.consume(R),e.exit("tableCellDivider"),E):O(R)}function E(R){return at(R)?ut(e,k,"whitespace")(R):k(R)}function k(R){return R===58?(o+=1,l=!0,e.enter("tableDelimiterMarker"),e.consume(R),e.exit("tableDelimiterMarker"),C):R===45?(o+=1,C(R)):R===null||Ye(R)?I(R):O(R)}function C(R){return R===45?(e.enter("tableDelimiterFiller"),_(R)):O(R)}function _(R){return R===45?(e.consume(R),_):R===58?(l=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(R),e.exit("tableDelimiterMarker"),j):(e.exit("tableDelimiterFiller"),j(R))}function j(R){return at(R)?ut(e,I,"whitespace")(R):I(R)}function I(R){return R===124?S(R):R===null||Ye(R)?!l||i!==o?O(R):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(R)):O(R)}function O(R){return n(R)}function P(R){return e.enter("tableRow"),$(R)}function $(R){return R===124?(e.enter("tableCellDivider"),e.consume(R),e.exit("tableCellDivider"),$):R===null||Ye(R)?(e.exit("tableRow"),t(R)):at(R)?ut(e,$,"whitespace")(R):(e.enter("data"),oe(R))}function oe(R){return R===null||R===124||wt(R)?(e.exit("data"),$(R)):(e.consume(R),R===92?X:oe)}function X(R){return R===92||R===124?(e.consume(R),oe):oe(R)}}function o4(e,t){let n=-1,r=!0,i=0,o=[0,0,0,0],l=[0,0,0,0],u=!1,c=0,f,h,p;const v=new t4;for(;++n<e.length;){const y=e[n],S=y[1];y[0]==="enter"?S.type==="tableHead"?(u=!1,c!==0&&(R0(v,t,c,f,h),h=void 0,c=0),f={type:"table",start:Object.assign({},S.start),end:Object.assign({},S.end)},v.add(n,0,[["enter",f,t]])):S.type==="tableRow"||S.type==="tableDelimiterRow"?(r=!0,p=void 0,o=[0,0,0,0],l=[0,n+1,0,0],u&&(u=!1,h={type:"tableBody",start:Object.assign({},S.start),end:Object.assign({},S.end)},v.add(n,0,[["enter",h,t]])),i=S.type==="tableDelimiterRow"?2:h?3:1):i&&(S.type==="data"||S.type==="tableDelimiterMarker"||S.type==="tableDelimiterFiller")?(r=!1,l[2]===0&&(o[1]!==0&&(l[0]=l[1],p=$u(v,t,o,i,void 0,p),o=[0,0,0,0]),l[2]=n)):S.type==="tableCellDivider"&&(r?r=!1:(o[1]!==0&&(l[0]=l[1],p=$u(v,t,o,i,void 0,p)),o=l,l=[o[1],n,0,0])):S.type==="tableHead"?(u=!0,c=n):S.type==="tableRow"||S.type==="tableDelimiterRow"?(c=n,o[1]!==0?(l[0]=l[1],p=$u(v,t,o,i,n,p)):l[1]!==0&&(p=$u(v,t,l,i,n,p)),i=0):i&&(S.type==="data"||S.type==="tableDelimiterMarker"||S.type==="tableDelimiterFiller")&&(l[3]=n)}for(c!==0&&R0(v,t,c,f,h),v.consume(t.events),n=-1;++n<t.events.length;){const y=t.events[n];y[0]==="enter"&&y[1].type==="table"&&(y[1]._align=r4(t.events,n))}return e}function $u(e,t,n,r,i,o){const l=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",u="tableContent";n[0]!==0&&(o.end=Object.assign({},go(t.events,n[0])),e.add(n[0],0,[["exit",o,t]]));const c=go(t.events,n[1]);if(o={type:l,start:Object.assign({},c),end:Object.assign({},c)},e.add(n[1],0,[["enter",o,t]]),n[2]!==0){const f=go(t.events,n[2]),h=go(t.events,n[3]),p={type:u,start:Object.assign({},f),end:Object.assign({},h)};if(e.add(n[2],0,[["enter",p,t]]),r!==2){const v=t.events[n[2]],y=t.events[n[3]];if(v[1].end=Object.assign({},y[1].end),v[1].type="chunkText",v[1].contentType="text",n[3]>n[2]+1){const S=n[2]+1,E=n[3]-n[2]-1;e.add(S,E,[])}}e.add(n[3]+1,0,[["exit",p,t]])}return i!==void 0&&(o.end=Object.assign({},go(t.events,i)),e.add(i,0,[["exit",o,t]]),o=void 0),o}function R0(e,t,n,r,i){const o=[],l=go(t.events,n);i&&(i.end=Object.assign({},l),o.push(["exit",i,t])),r.end=Object.assign({},l),o.push(["exit",r,t]),e.add(n+1,0,o)}function go(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const a4={name:"tasklistCheck",tokenize:u4};function l4(){return{text:{91:a4}}}function u4(e,t,n){const r=this;return i;function i(c){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(c):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),o)}function o(c){return wt(c)?(e.enter("taskListCheckValueUnchecked"),e.consume(c),e.exit("taskListCheckValueUnchecked"),l):c===88||c===120?(e.enter("taskListCheckValueChecked"),e.consume(c),e.exit("taskListCheckValueChecked"),l):n(c)}function l(c){return c===93?(e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),u):n(c)}function u(c){return Ye(c)?t(c):at(c)?e.check({tokenize:c4},t,n)(c):n(c)}}function c4(e,t,n){return ut(e,r,"whitespace");function r(i){return i===null?n(i):t(i)}}function d4(e){return Ik([L$(),q$(),e4(e),i4(),l4()])}const f4={};function h4(e){const t=this,n=e||f4,r=t.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),o=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),l=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(d4(n)),o.push(A$()),l.push(R$(n))}const p4=e=>e!=null;function m4(){const e=Te(t=>t.works);return w.useMemo(()=>{const t=new Map;e.forEach(o=>{var c;const l=(c=o.name)==null?void 0:c.trim();if(!l)return;const u=t.get(l)??[];u.push(o),t.set(l,u)});const n=new Map,r=new Map;t.forEach((o,l)=>{o.length===1?n.set(l,o[0]):o.length>1&&r.set(l,o.filter(p4))});const i=Array.from(n.entries()).map(([o,l])=>({name:o,work:l}));return i.sort((o,l)=>l.name.length-o.name.length||o.name.localeCompare(l.name,"es")),{uniqueByName:n,duplicates:r,entries:i}},[e])}const g4=new RegExp("\\p{L}|\\p{N}","u"),O0=e=>e?g4.test(e):!1,y4=(e,t,n)=>{const r=t===0?void 0:e[t-1],i=n>=e.length?void 0:e[n];return!O0(r)&&!O0(i)},v4=(e,t)=>{const n=[];t.forEach(o=>{let l=0;for(;l<e.length;){const u=e.indexOf(o.name,l);if(u===-1)break;const c=u+o.name.length;y4(e,u,c)&&n.push({start:u,end:c,entry:o}),l=u+o.name.length}}),n.sort((o,l)=>o.start!==l.start?o.start-l.start:l.entry.name.length-o.entry.name.length);const r=[];let i=-1;return n.forEach(o=>{o.start<i||(r.push(o),i=o.end)}),r},x4=e=>e?new Set(["link","linkReference","definition","inlineCode","code"]).has(e.type):!0,w4=e=>{const t=(e==null?void 0:e.entries)??[];return t.length===0?()=>{}:n=>{qc(n,"text",(r,i,o)=>{if(x4(o)||typeof i!="number"||!o)return;const u=r.value;if(!u)return;const c=v4(u,t);if(c.length===0)return;const f=[];let h=0;c.forEach(p=>{p.start>h&&f.push({type:"text",value:u.slice(h,p.start)}),f.push({type:"link",title:null,url:p.entry.href,children:[{type:"text",value:p.entry.name}]}),h=p.end}),h<u.length&&f.push({type:"text",value:u.slice(h)}),o.children.splice(i,1,...f)})}},b4=e=>{var f,h,p;const t="/sport-planner/".replace(/\/$/,""),r=`${t?`${t}/`:"/"}#/`,i=((f=e.href)==null?void 0:f.startsWith("#/"))??!1,o=((h=e.href)==null?void 0:h.startsWith(r))??!1,l=(((p=e.href)==null?void 0:p.startsWith("/"))??!1)||i||o,u=l?e.rel:e.rel??"noreferrer",c=l?e.target:e.target??"_blank";return g.jsx("a",{...e,className:"text-sky-300 underline decoration-dotted underline-offset-4 hover:text-sky-200",target:c,rel:u})},k4=e=>g.jsx("ul",{...e,className:De("my-2 list-disc space-y-1 pl-6",e.className)}),S4=e=>g.jsx("ol",{...e,className:De("my-2 list-decimal space-y-1 pl-6",e.className)}),E4=e=>g.jsx("li",{...e,className:De("leading-relaxed",e.className)});function _4(e){const t=e.trim(),n=t.match(/^(["'])(.*)(["'])$/s);return n?n[2].trim():t}function C4(e){var l;const n=_4(e.trim()).match(/^\[!([^\]]+)\]([+-])?\s*(.*)$/i);if(!n)return null;const r=n[1].toLowerCase(),o=(((l=n[3])==null?void 0:l.trim())??"")||r;return{type:r,title:o}}function w1(e){return typeof e=="object"&&e!==null&&"props"in e&&"type"in e}function kp(e){return e==null||typeof e=="boolean"?"":typeof e=="string"||typeof e=="number"?String(e):Array.isArray(e)?e.map(kp).join(""):w1(e)?kp(e.props.children):""}const M0={danger:{icon:"",containerClassName:"border-rose-500/25 bg-rose-500/10",titleClassName:"text-rose-200"},warning:{icon:"",containerClassName:"border-amber-500/25 bg-amber-500/10",titleClassName:"text-amber-200"},info:{icon:"",containerClassName:"border-sky-500/25 bg-sky-500/10",titleClassName:"text-sky-200"},note:{icon:"",containerClassName:"border-indigo-500/25 bg-indigo-500/10",titleClassName:"text-indigo-200"},tip:{icon:"",containerClassName:"border-emerald-500/25 bg-emerald-500/10",titleClassName:"text-emerald-200"}},j4=e=>{const{node:t,children:n,...r}=e,i=Array.isArray(n)?n:[n],o=i.findIndex(p=>w1(p)&&p.type==="p"),l=o>=0?i[o]:void 0,u=kp(l).trim(),c=C4(u);if(!c)return g.jsx("blockquote",{...r,children:n});const f=M0[c.type]??M0.info,h=i.filter((p,v)=>v!==o);return g.jsxs("aside",{className:De("my-4 rounded-2xl border p-5",f.containerClassName),children:[g.jsxs("div",{className:De("flex items-center gap-2 text-lg font-semibold",f.titleClassName),children:[g.jsx("span",{"aria-hidden":"true",children:f.icon}),g.jsx("span",{children:c.title})]}),g.jsx("div",{className:"mt-3",children:h})]})},N4={a:b4,blockquote:j4,ul:k4,ol:S4,li:E4};function Ss({content:e,enableWorkLinks:t=!1}){const{entries:n}=m4(),r=w.useMemo(()=>{if(!t||n.length===0)return null;const o="/sport-planner/".replace(/\/$/,""),u=`${o?`${o}/`:"/"}#/catalog`;return{entries:n.map(({name:c,work:f})=>({name:c,href:`${u}?workId=${encodeURIComponent(f.id)}`}))}},[t,n]),i=w.useMemo(()=>{const o=[h4];return r&&o.push([w4,r]),o},[r]);return e?g.jsx("div",{className:"prose prose-invert max-w-none prose-headings:font-display prose-p:leading-relaxed prose-strong:text-white prose-a:text-sky-300",children:g.jsx(eD,{remarkPlugins:i,components:N4,children:e})}):null}function L0(e){if(!e)return null;const t=e.trim().toLowerCase();if(!t)return null;if(/^\\d+(\\.\\d+)?$/.test(t))return Math.floor(Number(t));if(/^(\\d+:)+\\d+$/.test(t)){const r=t.split(":").map(i=>Number(i));return r.some(i=>Number.isNaN(i))?null:r.reduce((i,o)=>i*60+o,0)}const n=t.match(/^(?:(\\d+)h)?(?:(\\d+)m)?(?:(\\d+)s?)?$/i);if(n){const r=n[1]?Number(n[1]):0,i=n[2]?Number(n[2]):0,o=n[3]?Number(n[3]):0;if(r||i||o)return r*3600+i*60+o}return null}function T4(e){if(!e)return null;try{const t=new URL(e),n=t.hostname.replace("www.","");let r="";if(n==="youtu.be"?r=t.pathname.slice(1).split("/")[0]??"":n.endsWith("youtube.com")?t.searchParams.has("v")?r=t.searchParams.get("v")??"":(t.pathname.startsWith("/shorts/")||t.pathname.startsWith("/embed/"))&&(r=t.pathname.split("/")[2]??""):n==="youtube-nocookie.com"&&t.pathname.startsWith("/embed/")&&(r=t.pathname.split("/")[2]??""),!r)return null;const i=new URL(`https://www.youtube-nocookie.com/embed/${r}`),o=L0(t.searchParams.get("start")??t.searchParams.get("t"));o!==null&&i.searchParams.set("start",String(o));const l=L0(t.searchParams.get("end"));l!==null&&i.searchParams.set("end",String(l));const u=t.searchParams.get("list");return u&&i.searchParams.set("list",u),i.toString()}catch{return null}}function Yc({url:e,title:t,maxWidth:n=300,className:r}){const i=e.trim();if(!i)return null;const o=T4(i);return o?g.jsx("div",{className:De("flex w-full justify-center",r),children:g.jsx("div",{className:"overflow-hidden rounded-2xl border border-white/10 bg-black shadow-inner shadow-black/50",style:{maxWidth:n},children:g.jsx("iframe",{src:o,title:t,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0,className:"block w-full",style:{aspectRatio:"16 / 9"}})})}):g.jsx("div",{className:De("flex w-full justify-center",r),children:g.jsx("a",{href:i,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-full border border-amber-400/30 bg-amber-500/10 px-3 py-1 text-xs font-semibold text-amber-200 transition hover:border-amber-400 hover:text-white",children:"URL no reconocida, abrir enlace"})})}function I4(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return w.useMemo(()=>r=>{t.forEach(i=>i(r))},t)}const Gc=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Bo(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function bm(e){return"nodeType"in e}function Dn(e){var t,n;return e?Bo(e)?e:bm(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function km(e){const{Document:t}=Dn(e);return e instanceof t}function gl(e){return Bo(e)?!1:e instanceof Dn(e).HTMLElement}function b1(e){return e instanceof Dn(e).SVGElement}function Uo(e){return e?Bo(e)?e.document:bm(e)?km(e)?e:gl(e)||b1(e)?e.ownerDocument:document:document:document}const zr=Gc?w.useLayoutEffect:w.useEffect;function Sm(e){const t=w.useRef(e);return zr(()=>{t.current=e}),w.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function P4(){const e=w.useRef(null),t=w.useCallback((r,i)=>{e.current=setInterval(r,i)},[]),n=w.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function rl(e,t){t===void 0&&(t=[e]);const n=w.useRef(e);return zr(()=>{n.current!==e&&(n.current=e)},t),n}function yl(e,t){const n=w.useRef();return w.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function yc(e){const t=Sm(e),n=w.useRef(null),r=w.useCallback(i=>{i!==n.current&&(t==null||t(i,n.current)),n.current=i},[]);return[n,r]}function Sp(e){const t=w.useRef();return w.useEffect(()=>{t.current=e},[e]),t.current}let Sh={};function vl(e,t){return w.useMemo(()=>{if(t)return t;const n=Sh[e]==null?0:Sh[e]+1;return Sh[e]=n,e+"-"+n},[e,t])}function k1(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((o,l)=>{const u=Object.entries(l);for(const[c,f]of u){const h=o[c];h!=null&&(o[c]=h+e*f)}return o},{...t})}}const _o=k1(1),vc=k1(-1);function A4(e){return"clientX"in e&&"clientY"in e}function Em(e){if(!e)return!1;const{KeyboardEvent:t}=Dn(e.target);return t&&e instanceof t}function R4(e){if(!e)return!1;const{TouchEvent:t}=Dn(e.target);return t&&e instanceof t}function Ep(e){if(R4(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return A4(e)?{x:e.clientX,y:e.clientY}:null}const il=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[il.Translate.toString(e),il.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),D0="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function O4(e){return e.matches(D0)?e:e.querySelector(D0)}const M4={display:"none"};function L4(e){let{id:t,value:n}=e;return Re.createElement("div",{id:t,style:M4},n)}function D4(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Re.createElement("div",{id:t,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function $4(){const[e,t]=w.useState("");return{announce:w.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const S1=w.createContext(null);function F4(e){const t=w.useContext(S1);w.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function z4(){const[e]=w.useState(()=>new Set),t=w.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[w.useCallback(r=>{let{type:i,event:o}=r;e.forEach(l=>{var u;return(u=l[i])==null?void 0:u.call(l,o)})},[e]),t]}const B4={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},U4={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function W4(e){let{announcements:t=U4,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=B4}=e;const{announce:o,announcement:l}=$4(),u=vl("DndLiveRegion"),[c,f]=w.useState(!1);if(w.useEffect(()=>{f(!0)},[]),F4(w.useMemo(()=>({onDragStart(p){let{active:v}=p;o(t.onDragStart({active:v}))},onDragMove(p){let{active:v,over:y}=p;t.onDragMove&&o(t.onDragMove({active:v,over:y}))},onDragOver(p){let{active:v,over:y}=p;o(t.onDragOver({active:v,over:y}))},onDragEnd(p){let{active:v,over:y}=p;o(t.onDragEnd({active:v,over:y}))},onDragCancel(p){let{active:v,over:y}=p;o(t.onDragCancel({active:v,over:y}))}}),[o,t])),!c)return null;const h=Re.createElement(Re.Fragment,null,Re.createElement(L4,{id:r,value:i.draggable}),Re.createElement(D4,{id:u,announcement:l}));return n?qn.createPortal(h,n):h}var Jt;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Jt||(Jt={}));function xc(){}const _r=Object.freeze({x:0,y:0});function H4(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function V4(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function q4(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function Y4(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function $0(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const G4=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=$0(t,t.left,t.top),o=[];for(const l of r){const{id:u}=l,c=n.get(u);if(c){const f=H4($0(c),i);o.push({id:u,data:{droppableContainer:l,value:f}})}}return o.sort(V4)};function K4(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),l=i-r,u=o-n;if(r<i&&n<o){const c=t.width*t.height,f=e.width*e.height,h=l*u,p=h/(c+f-h);return Number(p.toFixed(4))}return 0}const J4=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=[];for(const o of r){const{id:l}=o,u=n.get(l);if(u){const c=K4(u,t);c>0&&i.push({id:l,data:{droppableContainer:o,value:c}})}}return i.sort(q4)};function Q4(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function E1(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:_r}function X4(e){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i.reduce((l,u)=>({...l,top:l.top+e*u.y,bottom:l.bottom+e*u.y,left:l.left+e*u.x,right:l.right+e*u.x}),{...n})}}const Z4=X4(1);function eF(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function tF(e,t,n){const r=eF(t);if(!r)return e;const{scaleX:i,scaleY:o,x:l,y:u}=r,c=e.left-l-(1-i)*parseFloat(n),f=e.top-u-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),h=i?e.width/i:e.width,p=o?e.height/o:e.height;return{width:h,height:p,top:f,right:c+h,bottom:f+p,left:c}}const nF={ignoreTransform:!1};function Wo(e,t){t===void 0&&(t=nF);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:f,transformOrigin:h}=Dn(e).getComputedStyle(e);f&&(n=tF(n,f,h))}const{top:r,left:i,width:o,height:l,bottom:u,right:c}=n;return{top:r,left:i,width:o,height:l,bottom:u,right:c}}function F0(e){return Wo(e,{ignoreTransform:!0})}function rF(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function iF(e,t){return t===void 0&&(t=Dn(e).getComputedStyle(e)),t.position==="fixed"}function sF(e,t){t===void 0&&(t=Dn(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const o=t[i];return typeof o=="string"?n.test(o):!1})}function _m(e,t){const n=[];function r(i){if(t!=null&&n.length>=t||!i)return n;if(km(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!gl(i)||b1(i)||n.includes(i))return n;const o=Dn(e).getComputedStyle(i);return i!==e&&sF(i,o)&&n.push(i),iF(i,o)?n:r(i.parentNode)}return e?r(e):n}function _1(e){const[t]=_m(e,1);return t??null}function Eh(e){return!Gc||!e?null:Bo(e)?e:bm(e)?km(e)||e===Uo(e).scrollingElement?window:gl(e)?e:null:null}function C1(e){return Bo(e)?e.scrollX:e.scrollLeft}function j1(e){return Bo(e)?e.scrollY:e.scrollTop}function _p(e){return{x:C1(e),y:j1(e)}}var rn;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(rn||(rn={}));function N1(e){return!Gc||!e?!1:e===document.scrollingElement}function T1(e){const t={x:0,y:0},n=N1(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},i=e.scrollTop<=t.y,o=e.scrollLeft<=t.x,l=e.scrollTop>=r.y,u=e.scrollLeft>=r.x;return{isTop:i,isLeft:o,isBottom:l,isRight:u,maxScroll:r,minScroll:t}}const oF={x:.2,y:.2};function aF(e,t,n,r,i){let{top:o,left:l,right:u,bottom:c}=n;r===void 0&&(r=10),i===void 0&&(i=oF);const{isTop:f,isBottom:h,isLeft:p,isRight:v}=T1(e),y={x:0,y:0},S={x:0,y:0},E={height:t.height*i.y,width:t.width*i.x};return!f&&o<=t.top+E.height?(y.y=rn.Backward,S.y=r*Math.abs((t.top+E.height-o)/E.height)):!h&&c>=t.bottom-E.height&&(y.y=rn.Forward,S.y=r*Math.abs((t.bottom-E.height-c)/E.height)),!v&&u>=t.right-E.width?(y.x=rn.Forward,S.x=r*Math.abs((t.right-E.width-u)/E.width)):!p&&l<=t.left+E.width&&(y.x=rn.Backward,S.x=r*Math.abs((t.left+E.width-l)/E.width)),{direction:y,speed:S}}function lF(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:l}=window;return{top:0,left:0,right:o,bottom:l,width:o,height:l}}const{top:t,left:n,right:r,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:i,width:e.clientWidth,height:e.clientHeight}}function I1(e){return e.reduce((t,n)=>_o(t,_p(n)),_r)}function uF(e){return e.reduce((t,n)=>t+C1(n),0)}function cF(e){return e.reduce((t,n)=>t+j1(n),0)}function dF(e,t){if(t===void 0&&(t=Wo),!e)return;const{top:n,left:r,bottom:i,right:o}=t(e);_1(e)&&(i<=0||o<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const fF=[["x",["left","right"],uF],["y",["top","bottom"],cF]];class Cm{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=_m(n),i=I1(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,l,u]of fF)for(const c of l)Object.defineProperty(this,c,{get:()=>{const f=u(r),h=i[o]-f;return this.rect[c]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Wa{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var i;(i=this.target)==null||i.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function hF(e){const{EventTarget:t}=Dn(e);return e instanceof t?e:Uo(e)}function _h(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var sr;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(sr||(sr={}));function z0(e){e.preventDefault()}function pF(e){e.stopPropagation()}var pt;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(pt||(pt={}));const P1={start:[pt.Space,pt.Enter],cancel:[pt.Esc],end:[pt.Space,pt.Enter,pt.Tab]},mF=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case pt.Right:return{...n,x:n.x+25};case pt.Left:return{...n,x:n.x-25};case pt.Down:return{...n,y:n.y+25};case pt.Up:return{...n,y:n.y-25}}};class A1{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Wa(Uo(n)),this.windowListeners=new Wa(Dn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(sr.Resize,this.handleCancel),this.windowListeners.add(sr.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(sr.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&dF(r),n(_r)}handleKeyDown(t){if(Em(t)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:o=P1,coordinateGetter:l=mF,scrollBehavior:u="smooth"}=i,{code:c}=t;if(o.end.includes(c)){this.handleEnd(t);return}if(o.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:f}=r.current,h=f?{x:f.left,y:f.top}:_r;this.referenceCoordinates||(this.referenceCoordinates=h);const p=l(t,{active:n,context:r.current,currentCoordinates:h});if(p){const v=vc(p,h),y={x:0,y:0},{scrollableAncestors:S}=r.current;for(const E of S){const k=t.code,{isTop:C,isRight:_,isLeft:j,isBottom:I,maxScroll:O,minScroll:P}=T1(E),$=lF(E),oe={x:Math.min(k===pt.Right?$.right-$.width/2:$.right,Math.max(k===pt.Right?$.left:$.left+$.width/2,p.x)),y:Math.min(k===pt.Down?$.bottom-$.height/2:$.bottom,Math.max(k===pt.Down?$.top:$.top+$.height/2,p.y))},X=k===pt.Right&&!_||k===pt.Left&&!j,R=k===pt.Down&&!I||k===pt.Up&&!C;if(X&&oe.x!==p.x){const D=E.scrollLeft+v.x,re=k===pt.Right&&D<=O.x||k===pt.Left&&D>=P.x;if(re&&!v.y){E.scrollTo({left:D,behavior:u});return}re?y.x=E.scrollLeft-D:y.x=k===pt.Right?E.scrollLeft-O.x:E.scrollLeft-P.x,y.x&&E.scrollBy({left:-y.x,behavior:u});break}else if(R&&oe.y!==p.y){const D=E.scrollTop+v.y,re=k===pt.Down&&D<=O.y||k===pt.Up&&D>=P.y;if(re&&!v.x){E.scrollTo({top:D,behavior:u});return}re?y.y=E.scrollTop-D:y.y=k===pt.Down?E.scrollTop-O.y:E.scrollTop-P.y,y.y&&E.scrollBy({top:-y.y,behavior:u});break}}this.handleMove(t,_o(vc(p,this.referenceCoordinates),y))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}A1.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=P1,onActivation:i}=t,{active:o}=n;const{code:l}=e.nativeEvent;if(r.start.includes(l)){const u=o.activatorNode.current;return u&&e.target!==u?!1:(e.preventDefault(),i==null||i({event:e.nativeEvent}),!0)}return!1}}];function B0(e){return!!(e&&"distance"in e)}function U0(e){return!!(e&&"delay"in e)}class jm{constructor(t,n,r){var i;r===void 0&&(r=hF(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:o}=t,{target:l}=o;this.props=t,this.events=n,this.document=Uo(l),this.documentListeners=new Wa(this.document),this.listeners=new Wa(r),this.windowListeners=new Wa(Dn(l)),this.initialCoordinates=(i=Ep(o))!=null?i:_r,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(sr.Resize,this.handleCancel),this.windowListeners.add(sr.DragStart,z0),this.windowListeners.add(sr.VisibilityChange,this.handleCancel),this.windowListeners.add(sr.ContextMenu,z0),this.documentListeners.add(sr.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(U0(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(B0(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:i}=this.props;i(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(sr.Click,pF,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(sr.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:i,props:o}=this,{onMove:l,options:{activationConstraint:u}}=o;if(!i)return;const c=(n=Ep(t))!=null?n:_r,f=vc(i,c);if(!r&&u){if(B0(u)){if(u.tolerance!=null&&_h(f,u.tolerance))return this.handleCancel();if(_h(f,u.distance))return this.handleStart()}if(U0(u)&&_h(f,u.tolerance))return this.handleCancel();this.handlePending(u,f);return}t.cancelable&&t.preventDefault(),l(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===pt.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const gF={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class R1 extends jm{constructor(t){const{event:n}=t,r=Uo(n.target);super(t,gF,r)}}R1.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const yF={move:{name:"mousemove"},end:{name:"mouseup"}};var Cp;(function(e){e[e.RightClick=2]="RightClick"})(Cp||(Cp={}));class vF extends jm{constructor(t){super(t,yF,Uo(t.event.target))}}vF.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===Cp.RightClick?!1:(r==null||r({event:n}),!0)}}];const Ch={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class xF extends jm{constructor(t){super(t,Ch)}static setup(){return window.addEventListener(Ch.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Ch.move.name,t)};function t(){}}}xF.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var Ha;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Ha||(Ha={}));var wc;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(wc||(wc={}));function wF(e){let{acceleration:t,activator:n=Ha.Pointer,canScroll:r,draggingRect:i,enabled:o,interval:l=5,order:u=wc.TreeOrder,pointerCoordinates:c,scrollableAncestors:f,scrollableAncestorRects:h,delta:p,threshold:v}=e;const y=kF({delta:p,disabled:!o}),[S,E]=P4(),k=w.useRef({x:0,y:0}),C=w.useRef({x:0,y:0}),_=w.useMemo(()=>{switch(n){case Ha.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Ha.DraggableRect:return i}},[n,i,c]),j=w.useRef(null),I=w.useCallback(()=>{const P=j.current;if(!P)return;const $=k.current.x*C.current.x,oe=k.current.y*C.current.y;P.scrollBy($,oe)},[]),O=w.useMemo(()=>u===wc.TreeOrder?[...f].reverse():f,[u,f]);w.useEffect(()=>{if(!o||!f.length||!_){E();return}for(const P of O){if((r==null?void 0:r(P))===!1)continue;const $=f.indexOf(P),oe=h[$];if(!oe)continue;const{direction:X,speed:R}=aF(P,oe,_,t,v);for(const D of["x","y"])y[D][X[D]]||(R[D]=0,X[D]=0);if(R.x>0||R.y>0){E(),j.current=P,S(I,l),k.current=R,C.current=X;return}}k.current={x:0,y:0},C.current={x:0,y:0},E()},[t,I,r,E,o,l,JSON.stringify(_),JSON.stringify(y),S,f,O,h,JSON.stringify(v)])}const bF={x:{[rn.Backward]:!1,[rn.Forward]:!1},y:{[rn.Backward]:!1,[rn.Forward]:!1}};function kF(e){let{delta:t,disabled:n}=e;const r=Sp(t);return yl(i=>{if(n||!r||!i)return bF;const o={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[rn.Backward]:i.x[rn.Backward]||o.x===-1,[rn.Forward]:i.x[rn.Forward]||o.x===1},y:{[rn.Backward]:i.y[rn.Backward]||o.y===-1,[rn.Forward]:i.y[rn.Forward]||o.y===1}}},[n,t,r])}function SF(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return yl(i=>{var o;return t==null?null:(o=r??i)!=null?o:null},[r,t])}function EF(e,t){return w.useMemo(()=>e.reduce((n,r)=>{const{sensor:i}=r,o=i.activators.map(l=>({eventName:l.eventName,handler:t(l.handler,r)}));return[...n,...o]},[]),[e,t])}var sl;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(sl||(sl={}));var jp;(function(e){e.Optimized="optimized"})(jp||(jp={}));const W0=new Map;function _F(e,t){let{dragging:n,dependencies:r,config:i}=t;const[o,l]=w.useState(null),{frequency:u,measure:c,strategy:f}=i,h=w.useRef(e),p=k(),v=rl(p),y=w.useCallback(function(C){C===void 0&&(C=[]),!v.current&&l(_=>_===null?C:_.concat(C.filter(j=>!_.includes(j))))},[v]),S=w.useRef(null),E=yl(C=>{if(p&&!n)return W0;if(!C||C===W0||h.current!==e||o!=null){const _=new Map;for(let j of e){if(!j)continue;if(o&&o.length>0&&!o.includes(j.id)&&j.rect.current){_.set(j.id,j.rect.current);continue}const I=j.node.current,O=I?new Cm(c(I),I):null;j.rect.current=O,O&&_.set(j.id,O)}return _}return C},[e,o,n,p,c]);return w.useEffect(()=>{h.current=e},[e]),w.useEffect(()=>{p||y()},[n,p]),w.useEffect(()=>{o&&o.length>0&&l(null)},[JSON.stringify(o)]),w.useEffect(()=>{p||typeof u!="number"||S.current!==null||(S.current=setTimeout(()=>{y(),S.current=null},u))},[u,p,y,...r]),{droppableRects:E,measureDroppableContainers:y,measuringScheduled:o!=null};function k(){switch(f){case sl.Always:return!1;case sl.BeforeDragging:return n;default:return!n}}}function O1(e,t){return yl(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function CF(e,t){return O1(e,t)}function jF(e){let{callback:t,disabled:n}=e;const r=Sm(t),i=w.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(r)},[r,n]);return w.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Kc(e){let{callback:t,disabled:n}=e;const r=Sm(t),i=w.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(r)},[n]);return w.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function NF(e){return new Cm(Wo(e),e)}function H0(e,t,n){t===void 0&&(t=NF);const[r,i]=w.useState(null);function o(){i(c=>{if(!e)return null;if(e.isConnected===!1){var f;return(f=c??n)!=null?f:null}const h=t(e);return JSON.stringify(c)===JSON.stringify(h)?c:h})}const l=jF({callback(c){if(e)for(const f of c){const{type:h,target:p}=f;if(h==="childList"&&p instanceof HTMLElement&&p.contains(e)){o();break}}}}),u=Kc({callback:o});return zr(()=>{o(),e?(u==null||u.observe(e),l==null||l.observe(document.body,{childList:!0,subtree:!0})):(u==null||u.disconnect(),l==null||l.disconnect())},[e]),r}function TF(e){const t=O1(e);return E1(e,t)}const V0=[];function IF(e){const t=w.useRef(e),n=yl(r=>e?r&&r!==V0&&e&&t.current&&e.parentNode===t.current.parentNode?r:_m(e):V0,[e]);return w.useEffect(()=>{t.current=e},[e]),n}function PF(e){const[t,n]=w.useState(null),r=w.useRef(e),i=w.useCallback(o=>{const l=Eh(o.target);l&&n(u=>u?(u.set(l,_p(l)),new Map(u)):null)},[]);return w.useEffect(()=>{const o=r.current;if(e!==o){l(o);const u=e.map(c=>{const f=Eh(c);return f?(f.addEventListener("scroll",i,{passive:!0}),[f,_p(f)]):null}).filter(c=>c!=null);n(u.length?new Map(u):null),r.current=e}return()=>{l(e),l(o)};function l(u){u.forEach(c=>{const f=Eh(c);f==null||f.removeEventListener("scroll",i)})}},[i,e]),w.useMemo(()=>e.length?t?Array.from(t.values()).reduce((o,l)=>_o(o,l),_r):I1(e):_r,[e,t])}function q0(e,t){t===void 0&&(t=[]);const n=w.useRef(null);return w.useEffect(()=>{n.current=null},t),w.useEffect(()=>{const r=e!==_r;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?vc(e,n.current):_r}function AF(e){w.useEffect(()=>{if(!Gc)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function RF(e,t){return w.useMemo(()=>e.reduce((n,r)=>{let{eventName:i,handler:o}=r;return n[i]=l=>{o(l,t)},n},{}),[e,t])}function M1(e){return w.useMemo(()=>e?rF(e):null,[e])}const Y0=[];function OF(e,t){t===void 0&&(t=Wo);const[n]=e,r=M1(n?Dn(n):null),[i,o]=w.useState(Y0);function l(){o(()=>e.length?e.map(c=>N1(c)?r:new Cm(t(c),c)):Y0)}const u=Kc({callback:l});return zr(()=>{u==null||u.disconnect(),l(),e.forEach(c=>u==null?void 0:u.observe(c))},[e]),i}function MF(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return gl(t)?t:e}function LF(e){let{measure:t}=e;const[n,r]=w.useState(null),i=w.useCallback(f=>{for(const{target:h}of f)if(gl(h)){r(p=>{const v=t(h);return p?{...p,width:v.width,height:v.height}:v});break}},[t]),o=Kc({callback:i}),l=w.useCallback(f=>{const h=MF(f);o==null||o.disconnect(),h&&(o==null||o.observe(h)),r(h?t(h):null)},[t,o]),[u,c]=yc(l);return w.useMemo(()=>({nodeRef:u,rect:n,setRef:c}),[n,u,c])}const DF=[{sensor:R1,options:{}},{sensor:A1,options:{}}],$F={current:{}},Ku={draggable:{measure:F0},droppable:{measure:F0,strategy:sl.WhileDragging,frequency:jp.Optimized},dragOverlay:{measure:Wo}};class Va extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const FF={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Va,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:xc},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ku,measureDroppableContainers:xc,windowRect:null,measuringScheduled:!1},zF={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:xc,draggableNodes:new Map,over:null,measureDroppableContainers:xc},Jc=w.createContext(zF),L1=w.createContext(FF);function BF(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Va}}}function UF(e,t){switch(t.type){case Jt.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Jt.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Jt.DragEnd:case Jt.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Jt.RegisterDroppable:{const{element:n}=t,{id:r}=n,i=new Va(e.droppable.containers);return i.set(r,n),{...e,droppable:{...e.droppable,containers:i}}}case Jt.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const l=new Va(e.droppable.containers);return l.set(n,{...o,disabled:i}),{...e,droppable:{...e.droppable,containers:l}}}case Jt.UnregisterDroppable:{const{id:n,key:r}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const o=new Va(e.droppable.containers);return o.delete(n),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function WF(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:i}=w.useContext(Jc),o=Sp(r),l=Sp(n==null?void 0:n.id);return w.useEffect(()=>{if(!t&&!r&&o&&l!=null){if(!Em(o)||document.activeElement===o.target)return;const u=i.get(l);if(!u)return;const{activatorNode:c,node:f}=u;if(!c.current&&!f.current)return;requestAnimationFrame(()=>{for(const h of[c.current,f.current]){if(!h)continue;const p=O4(h);if(p){p.focus();break}}})}},[r,t,i,l,o]),null}function HF(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((i,o)=>o({transform:i,...r}),n):n}function VF(e){return w.useMemo(()=>({draggable:{...Ku.draggable,...e==null?void 0:e.draggable},droppable:{...Ku.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Ku.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function qF(e){let{activeNode:t,measure:n,initialRect:r,config:i=!0}=e;const o=w.useRef(!1),{x:l,y:u}=typeof i=="boolean"?{x:i,y:i}:i;zr(()=>{if(!l&&!u||!t){o.current=!1;return}if(o.current||!r)return;const f=t==null?void 0:t.node.current;if(!f||f.isConnected===!1)return;const h=n(f),p=E1(h,r);if(l||(p.x=0),u||(p.y=0),o.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const v=_1(f);v&&v.scrollBy({top:p.y,left:p.x})}},[t,l,u,r,n])}const D1=w.createContext({..._r,scaleX:1,scaleY:1});var Pi;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Pi||(Pi={}));const YF=w.memo(function(t){var n,r,i,o;let{id:l,accessibility:u,autoScroll:c=!0,children:f,sensors:h=DF,collisionDetection:p=J4,measuring:v,modifiers:y,...S}=t;const E=w.useReducer(UF,void 0,BF),[k,C]=E,[_,j]=z4(),[I,O]=w.useState(Pi.Uninitialized),P=I===Pi.Initialized,{draggable:{active:$,nodes:oe,translate:X},droppable:{containers:R}}=k,D=$!=null?oe.get($):null,re=w.useRef({initial:null,translated:null}),W=w.useMemo(()=>{var ct;return $!=null?{id:$,data:(ct=D==null?void 0:D.data)!=null?ct:$F,rect:re}:null},[$,D]),Y=w.useRef(null),[M,G]=w.useState(null),[ae,F]=w.useState(null),ee=rl(S,Object.values(S)),T=vl("DndDescribedBy",l),B=w.useMemo(()=>R.getEnabled(),[R]),te=VF(v),{droppableRects:A,measureDroppableContainers:pe,measuringScheduled:fe}=_F(B,{dragging:P,dependencies:[X.x,X.y],config:te.droppable}),ge=SF(oe,$),Ie=w.useMemo(()=>ae?Ep(ae):null,[ae]),ve=Mt(),Ae=CF(ge,te.draggable.measure);qF({activeNode:$!=null?oe.get($):null,config:ve.layoutShiftCompensation,initialRect:Ae,measure:te.draggable.measure});const _e=H0(ge,te.draggable.measure,Ae),Z=H0(ge?ge.parentElement:null),je=w.useRef({activatorEvent:null,active:null,activeNode:ge,collisionRect:null,collisions:null,droppableRects:A,draggableNodes:oe,draggingNode:null,draggingNodeRect:null,droppableContainers:R,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),$e=R.getNodeFor((n=je.current.over)==null?void 0:n.id),Be=LF({measure:te.dragOverlay.measure}),Qe=(r=Be.nodeRef.current)!=null?r:ge,st=P?(i=Be.rect)!=null?i:_e:null,bt=!!(Be.nodeRef.current&&Be.rect),Ft=TF(bt?null:_e),J=M1(Qe?Dn(Qe):null),de=IF(P?$e??ge:null),me=OF(de),K=HF(y,{transform:{x:X.x-Ft.x,y:X.y-Ft.y,scaleX:1,scaleY:1},activatorEvent:ae,active:W,activeNodeRect:_e,containerNodeRect:Z,draggingNodeRect:st,over:je.current.over,overlayNodeRect:Be.rect,scrollableAncestors:de,scrollableAncestorRects:me,windowRect:J}),ne=Ie?_o(Ie,X):null,H=PF(de),ie=q0(H),U=q0(H,[_e]),se=_o(K,ie),xe=st?Z4(st,K):null,Ne=W&&xe?p({active:W,collisionRect:xe,droppableRects:A,droppableContainers:B,pointerCoordinates:ne}):null,L=Y4(Ne,"id"),[q,be]=w.useState(null),ye=bt?K:_o(K,U),he=Q4(ye,(o=q==null?void 0:q.rect)!=null?o:null,_e),Pe=w.useRef(null),Ue=w.useCallback((ct,Je)=>{let{sensor:lt,options:et}=Je;if(Y.current==null)return;const yt=oe.get(Y.current);if(!yt)return;const ln=ct.nativeEvent,_n=new lt({active:Y.current,activeNode:yt,event:ln,options:et,context:je,onAbort(Tt){if(!oe.get(Tt))return;const{onDragAbort:un}=ee.current,ur={id:Tt};un==null||un(ur),_({type:"onDragAbort",event:ur})},onPending(Tt,Jn,un,ur){if(!oe.get(Tt))return;const{onDragPending:Cr}=ee.current,$n={id:Tt,constraint:Jn,initialCoordinates:un,offset:ur};Cr==null||Cr($n),_({type:"onDragPending",event:$n})},onStart(Tt){const Jn=Y.current;if(Jn==null)return;const un=oe.get(Jn);if(!un)return;const{onDragStart:ur}=ee.current,cr={activatorEvent:ln,active:{id:Jn,data:un.data,rect:re}};qn.unstable_batchedUpdates(()=>{ur==null||ur(cr),O(Pi.Initializing),C({type:Jt.DragStart,initialCoordinates:Tt,active:Jn}),_({type:"onDragStart",event:cr}),G(Pe.current),F(ln)})},onMove(Tt){C({type:Jt.DragMove,coordinates:Tt})},onEnd:Hr(Jt.DragEnd),onCancel:Hr(Jt.DragCancel)});Pe.current=_n;function Hr(Tt){return async function(){const{active:un,collisions:ur,over:cr,scrollAdjustedTranslate:Cr}=je.current;let $n=null;if(un&&Cr){const{cancelDrop:Vr}=ee.current;$n={activatorEvent:ln,active:un,collisions:ur,delta:Cr,over:cr},Tt===Jt.DragEnd&&typeof Vr=="function"&&await Promise.resolve(Vr($n))&&(Tt=Jt.DragCancel)}Y.current=null,qn.unstable_batchedUpdates(()=>{C({type:Tt}),O(Pi.Uninitialized),be(null),G(null),F(null),Pe.current=null;const Vr=Tt===Jt.DragEnd?"onDragEnd":"onDragCancel";if($n){const Ho=ee.current[Vr];Ho==null||Ho($n),_({type:Vr,event:$n})}})}}},[oe]),Xe=w.useCallback((ct,Je)=>(lt,et)=>{const yt=lt.nativeEvent,ln=oe.get(et);if(Y.current!==null||!ln||yt.dndKit||yt.defaultPrevented)return;const _n={active:ln};ct(lt,Je.options,_n)===!0&&(yt.dndKit={capturedBy:Je.sensor},Y.current=et,Ue(lt,Je))},[oe,Ue]),Me=EF(h,Xe);AF(h),zr(()=>{_e&&I===Pi.Initializing&&O(Pi.Initialized)},[_e,I]),w.useEffect(()=>{const{onDragMove:ct}=ee.current,{active:Je,activatorEvent:lt,collisions:et,over:yt}=je.current;if(!Je||!lt)return;const ln={active:Je,activatorEvent:lt,collisions:et,delta:{x:se.x,y:se.y},over:yt};qn.unstable_batchedUpdates(()=>{ct==null||ct(ln),_({type:"onDragMove",event:ln})})},[se.x,se.y]),w.useEffect(()=>{const{active:ct,activatorEvent:Je,collisions:lt,droppableContainers:et,scrollAdjustedTranslate:yt}=je.current;if(!ct||Y.current==null||!Je||!yt)return;const{onDragOver:ln}=ee.current,_n=et.get(L),Hr=_n&&_n.rect.current?{id:_n.id,rect:_n.rect.current,data:_n.data,disabled:_n.disabled}:null,Tt={active:ct,activatorEvent:Je,collisions:lt,delta:{x:yt.x,y:yt.y},over:Hr};qn.unstable_batchedUpdates(()=>{be(Hr),ln==null||ln(Tt),_({type:"onDragOver",event:Tt})})},[L]),zr(()=>{je.current={activatorEvent:ae,active:W,activeNode:ge,collisionRect:xe,collisions:Ne,droppableRects:A,draggableNodes:oe,draggingNode:Qe,draggingNodeRect:st,droppableContainers:R,over:q,scrollableAncestors:de,scrollAdjustedTranslate:se},re.current={initial:st,translated:xe}},[W,ge,Ne,xe,oe,Qe,st,A,R,q,de,se]),wF({...ve,delta:X,draggingRect:xe,pointerCoordinates:ne,scrollableAncestors:de,scrollableAncestorRects:me});const ht=w.useMemo(()=>({active:W,activeNode:ge,activeNodeRect:_e,activatorEvent:ae,collisions:Ne,containerNodeRect:Z,dragOverlay:Be,draggableNodes:oe,droppableContainers:R,droppableRects:A,over:q,measureDroppableContainers:pe,scrollableAncestors:de,scrollableAncestorRects:me,measuringConfiguration:te,measuringScheduled:fe,windowRect:J}),[W,ge,_e,ae,Ne,Z,Be,oe,R,A,q,pe,de,me,te,fe,J]),it=w.useMemo(()=>({activatorEvent:ae,activators:Me,active:W,activeNodeRect:_e,ariaDescribedById:{draggable:T},dispatch:C,draggableNodes:oe,over:q,measureDroppableContainers:pe}),[ae,Me,W,_e,C,T,oe,q,pe]);return Re.createElement(S1.Provider,{value:j},Re.createElement(Jc.Provider,{value:it},Re.createElement(L1.Provider,{value:ht},Re.createElement(D1.Provider,{value:he},f)),Re.createElement(WF,{disabled:(u==null?void 0:u.restoreFocus)===!1})),Re.createElement(W4,{...u,hiddenTextDescribedById:T}));function Mt(){const ct=(M==null?void 0:M.autoScrollEnabled)===!1,Je=typeof c=="object"?c.enabled===!1:c===!1,lt=P&&!ct&&!Je;return typeof c=="object"?{...c,enabled:lt}:{enabled:lt}}}),GF=w.createContext(null),G0="button",KF="Draggable";function JF(e){let{id:t,data:n,disabled:r=!1,attributes:i}=e;const o=vl(KF),{activators:l,activatorEvent:u,active:c,activeNodeRect:f,ariaDescribedById:h,draggableNodes:p,over:v}=w.useContext(Jc),{role:y=G0,roleDescription:S="draggable",tabIndex:E=0}=i??{},k=(c==null?void 0:c.id)===t,C=w.useContext(k?D1:GF),[_,j]=yc(),[I,O]=yc(),P=RF(l,t),$=rl(n);zr(()=>(p.set(t,{id:t,key:o,node:_,activatorNode:I,data:$}),()=>{const X=p.get(t);X&&X.key===o&&p.delete(t)}),[p,t]);const oe=w.useMemo(()=>({role:y,tabIndex:E,"aria-disabled":r,"aria-pressed":k&&y===G0?!0:void 0,"aria-roledescription":S,"aria-describedby":h.draggable}),[r,y,E,k,S,h.draggable]);return{active:c,activatorEvent:u,activeNodeRect:f,attributes:oe,isDragging:k,listeners:r?void 0:P,node:_,over:v,setNodeRef:j,setActivatorNodeRef:O,transform:C}}function QF(){return w.useContext(L1)}const XF="Droppable",ZF={timeout:25};function e3(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:i}=e;const o=vl(XF),{active:l,dispatch:u,over:c,measureDroppableContainers:f}=w.useContext(Jc),h=w.useRef({disabled:n}),p=w.useRef(!1),v=w.useRef(null),y=w.useRef(null),{disabled:S,updateMeasurementsFor:E,timeout:k}={...ZF,...i},C=rl(E??r),_=w.useCallback(()=>{if(!p.current){p.current=!0;return}y.current!=null&&clearTimeout(y.current),y.current=setTimeout(()=>{f(Array.isArray(C.current)?C.current:[C.current]),y.current=null},k)},[k]),j=Kc({callback:_,disabled:S||!l}),I=w.useCallback((oe,X)=>{j&&(X&&(j.unobserve(X),p.current=!1),oe&&j.observe(oe))},[j]),[O,P]=yc(I),$=rl(t);return w.useEffect(()=>{!j||!O.current||(j.disconnect(),p.current=!1,j.observe(O.current))},[O,j]),w.useEffect(()=>(u({type:Jt.RegisterDroppable,element:{id:r,key:o,disabled:n,node:O,rect:v,data:$}}),()=>u({type:Jt.UnregisterDroppable,key:o,id:r})),[r]),w.useEffect(()=>{n!==h.current.disabled&&(u({type:Jt.SetDroppableDisabled,id:r,key:o,disabled:n}),h.current.disabled=n)},[r,o,n,u]),{active:l,rect:v,isOver:(c==null?void 0:c.id)===r,node:O,over:c,setNodeRef:P}}function $1(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function t3(e,t){return e.reduce((n,r,i)=>{const o=t.get(r);return o&&(n[i]=o),n},Array(e.length))}function Fu(e){return e!==null&&e>=0}function n3(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function r3(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const F1=e=>{let{rects:t,activeIndex:n,overIndex:r,index:i}=e;const o=$1(t,r,n),l=t[i],u=o[i];return!u||!l?null:{x:u.left-l.left,y:u.top-l.top,scaleX:u.width/l.width,scaleY:u.height/l.height}},zu={scaleX:1,scaleY:1},i3=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:i,rects:o,overIndex:l}=e;const u=(t=o[n])!=null?t:r;if(!u)return null;if(i===n){const f=o[l];return f?{x:0,y:n<l?f.top+f.height-(u.top+u.height):f.top-u.top,...zu}:null}const c=s3(o,i,n);return i>n&&i<=l?{x:0,y:-u.height-c,...zu}:i<n&&i>=l?{x:0,y:u.height+c,...zu}:{x:0,y:0,...zu}};function s3(e,t,n){const r=e[t],i=e[t-1],o=e[t+1];return r?n<t?i?r.top-(i.top+i.height):o?o.top-(r.top+r.height):0:o?o.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const z1="Sortable",B1=Re.createContext({activeIndex:-1,containerId:z1,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:F1,disabled:{draggable:!1,droppable:!1}});function o3(e){let{children:t,id:n,items:r,strategy:i=F1,disabled:o=!1}=e;const{active:l,dragOverlay:u,droppableRects:c,over:f,measureDroppableContainers:h}=QF(),p=vl(z1,n),v=u.rect!==null,y=w.useMemo(()=>r.map(P=>typeof P=="object"&&"id"in P?P.id:P),[r]),S=l!=null,E=l?y.indexOf(l.id):-1,k=f?y.indexOf(f.id):-1,C=w.useRef(y),_=!n3(y,C.current),j=k!==-1&&E===-1||_,I=r3(o);zr(()=>{_&&S&&h(y)},[_,y,S,h]),w.useEffect(()=>{C.current=y},[y]);const O=w.useMemo(()=>({activeIndex:E,containerId:p,disabled:I,disableTransforms:j,items:y,overIndex:k,useDragOverlay:v,sortedRects:t3(y,c),strategy:i}),[E,p,I.draggable,I.droppable,j,y,k,c,v,i]);return Re.createElement(B1.Provider,{value:O},t)}const a3=e=>{let{id:t,items:n,activeIndex:r,overIndex:i}=e;return $1(n,r,i).indexOf(t)},l3=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:i,items:o,newIndex:l,previousItems:u,previousContainerId:c,transition:f}=e;return!f||!r||u!==o&&i===l?!1:n?!0:l!==i&&t===c},u3={duration:200,easing:"ease"},U1="transform",c3=il.Transition.toString({property:U1,duration:0,easing:"linear"}),d3={roleDescription:"sortable"};function f3(e){let{disabled:t,index:n,node:r,rect:i}=e;const[o,l]=w.useState(null),u=w.useRef(n);return zr(()=>{if(!t&&n!==u.current&&r.current){const c=i.current;if(c){const f=Wo(r.current,{ignoreTransform:!0}),h={x:c.left-f.left,y:c.top-f.top,scaleX:c.width/f.width,scaleY:c.height/f.height};(h.x||h.y)&&l(h)}}n!==u.current&&(u.current=n)},[t,n,r,i]),w.useEffect(()=>{o&&l(null)},[o]),o}function h3(e){let{animateLayoutChanges:t=l3,attributes:n,disabled:r,data:i,getNewIndex:o=a3,id:l,strategy:u,resizeObserverConfig:c,transition:f=u3}=e;const{items:h,containerId:p,activeIndex:v,disabled:y,disableTransforms:S,sortedRects:E,overIndex:k,useDragOverlay:C,strategy:_}=w.useContext(B1),j=p3(r,y),I=h.indexOf(l),O=w.useMemo(()=>({sortable:{containerId:p,index:I,items:h},...i}),[p,i,I,h]),P=w.useMemo(()=>h.slice(h.indexOf(l)),[h,l]),{rect:$,node:oe,isOver:X,setNodeRef:R}=e3({id:l,data:O,disabled:j.droppable,resizeObserverConfig:{updateMeasurementsFor:P,...c}}),{active:D,activatorEvent:re,activeNodeRect:W,attributes:Y,setNodeRef:M,listeners:G,isDragging:ae,over:F,setActivatorNodeRef:ee,transform:T}=JF({id:l,data:O,attributes:{...d3,...n},disabled:j.draggable}),B=I4(R,M),te=!!D,A=te&&!S&&Fu(v)&&Fu(k),pe=!C&&ae,fe=pe&&A?T:null,Ie=A?fe??(u??_)({rects:E,activeNodeRect:W,activeIndex:v,overIndex:k,index:I}):null,ve=Fu(v)&&Fu(k)?o({id:l,items:h,activeIndex:v,overIndex:k}):I,Ae=D==null?void 0:D.id,_e=w.useRef({activeId:Ae,items:h,newIndex:ve,containerId:p}),Z=h!==_e.current.items,je=t({active:D,containerId:p,isDragging:ae,isSorting:te,id:l,index:I,items:h,newIndex:_e.current.newIndex,previousItems:_e.current.items,previousContainerId:_e.current.containerId,transition:f,wasDragging:_e.current.activeId!=null}),$e=f3({disabled:!je,index:I,node:oe,rect:$});return w.useEffect(()=>{te&&_e.current.newIndex!==ve&&(_e.current.newIndex=ve),p!==_e.current.containerId&&(_e.current.containerId=p),h!==_e.current.items&&(_e.current.items=h)},[te,ve,p,h]),w.useEffect(()=>{if(Ae===_e.current.activeId)return;if(Ae&&!_e.current.activeId){_e.current.activeId=Ae;return}const Qe=setTimeout(()=>{_e.current.activeId=Ae},50);return()=>clearTimeout(Qe)},[Ae]),{active:D,activeIndex:v,attributes:Y,data:O,rect:$,index:I,newIndex:ve,items:h,isOver:X,isSorting:te,isDragging:ae,listeners:G,node:oe,overIndex:k,over:F,setNodeRef:B,setActivatorNodeRef:ee,setDroppableNodeRef:R,setDraggableNodeRef:M,transform:$e??Ie,transition:Be()};function Be(){if($e||Z&&_e.current.newIndex===I)return c3;if(!(pe&&!Em(re)||!f)&&(te||je))return il.Transition.toString({...f,property:U1})}}function p3(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}pt.Down,pt.Right,pt.Up,pt.Left;function bc(e,t="18:30"){const n=(e??t).trim(),r=/^(\d{1,2}):(\d{2})$/.exec(n);if(!r)return bc(t,t);const i=Number(r[1]),o=Number(r[2]);return Number.isNaN(i)||Number.isNaN(o)?bc(t,t):(i*60+o)%1440}function Np(e){const t=(e%1440+1440)%1440,n=Math.floor(t/60),r=t%60,i=n.toString().padStart(2,"0"),o=r.toString().padStart(2,"0");return`${i}:${o}`}const K0={present:"Presente",absent:"Ausente",pending:"Pendiente"};function W1({work:e,objective:t,parentChain:n,onSelect:r}){const i=(e.subtitle??"").trim();return g.jsxs("button",{type:"button",onClick:()=>r(e.id),className:"flex w-full items-center justify-between gap-4 rounded-xl border border-white/10 bg-white/5 px-4 py-3 text-left transition hover:border-white/30",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm font-semibold text-white",children:e.name}),i?g.jsx("p",{className:"text-xs text-white/60",children:i}):null,g.jsxs("p",{className:"text-xs text-white/50",children:[e.estimatedMinutes," min"]}),n?g.jsxs("p",{className:"text-[11px] text-white/40",children:["Deriva de ",n]}):null]}),g.jsx(Bi,{objective:t,size:"sm"})]})}function m3({item:e,work:t,objective:n,expanded:r,isPersonal:i,onToggleExpanded:o,onRemove:l,onDuplicate:u,onUpdateDetails:c,onReplace:f,startTimeLabel:h,durationMinutes:p,works:v,objectiveMap:y,workPathById:S}){const{attributes:E,listeners:k,setNodeRef:C,transform:_,transition:j,isDragging:I}=h3({id:e.id}),[O,P]=w.useState(!1),[$,oe]=w.useState(""),X={transform:il.Transform.toString(_),transition:j},D=(e.focusLabel??"").trim(),re=D.length>0,W=e.customDescriptionMarkdown??(t==null?void 0:t.descriptionMarkdown)??"",Y=W.trim().length>0,M=((t==null?void 0:t.videoUrls)??[]).map(ve=>ve.trim()).filter(Boolean),G=M.length>0,ae=Y||G,ee=(t!=null&&t.id?S.get(t.id)??(t==null?void 0:t.name)??"":"").split("  ").slice(0,-1).join("  "),T=((t==null?void 0:t.subtitle)??"").trim(),B=ve=>{const Ae=ve.target.value;c(e.id,{focusLabel:Ae===""?void 0:Ae})},te=$.trim().toLowerCase(),A=w.useMemo(()=>v.filter(ve=>ve.id!==(t==null?void 0:t.id)),[v,t==null?void 0:t.id]),pe=w.useMemo(()=>te?A.filter(ve=>{var Be;const Ae=(ve.subtitle??"").toLowerCase(),_e=((Be=y.get(ve.objectiveId))==null?void 0:Be.name.toLowerCase())??"",Z=(S.get(ve.id)??"").toLowerCase(),je=(ve.descriptionMarkdown??"").toLowerCase(),$e=te;return ve.name.toLowerCase().includes($e)||Ae.includes($e)||je.includes($e)||_e.includes($e)||Z.includes($e)}):[],[A,te,y,S]);w.useEffect(()=>{O||oe("")},[O]);const fe=A.length>0,ge=e.effort??6,Ie=e.result;return g.jsxs("article",{ref:C,style:X,className:De("relative flex flex-col gap-3 rounded-3xl border border-white/10 bg-white/10 p-4 shadow-lg shadow-black/20 transition",I&&"ring-2 ring-sky-400/70"),children:[n?g.jsx("div",{className:"absolute inset-0 -z-[1] rounded-3xl opacity-30 blur-xl",style:{backgroundColor:n.colorHex}}):null,g.jsxs("div",{className:"flex items-start gap-4",children:[g.jsx("button",{type:"button",className:"mt-1 flex h-10 w-10 items-center justify-center rounded-full border border-white/20 text-white/70",...k,...E,"aria-label":"Reordenar trabajo",children:""}),g.jsx("div",{className:"flex-1 space-y-1",children:g.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsxs("p",{className:"text-lg font-semibold text-white",children:[(t==null?void 0:t.name)??"Trabajo eliminado",re?g.jsxs("span",{className:"ml-2 text-sky-300",children:[" ",D]}):null]}),T?g.jsx("p",{className:"text-sm text-white/70",children:T}):null,ee?g.jsxs("p",{className:"text-xs text-white/50",children:["Deriva de ",ee]}):null,g.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm text-white/60",children:[g.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:h}),g.jsx("span",{className:"text-white/30",children:""}),g.jsxs("span",{children:[p," min"]})]}),g.jsxs("div",{className:"max-w-md",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Foco dentro del trabajo"}),g.jsx("input",{type:"text",value:e.focusLabel??"",onChange:B,placeholder:"Ej. 1/7  Apertura",className:"input-field mt-1"})]}),i?g.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-3",children:[g.jsx("div",{className:"flex flex-wrap items-center gap-2",children:["ok","doubt","fail"].map(ve=>g.jsx("button",{type:"button",onClick:()=>c(e.id,{result:ve,completed:!0}),className:De("rounded-full border px-3 py-1 text-xs font-semibold transition",Ie===ve?ve==="ok"?"border-emerald-500/60 bg-emerald-500/20 text-emerald-200":ve==="doubt"?"border-amber-400/50 bg-amber-500/15 text-amber-200":"border-rose-500/60 bg-rose-500/15 text-rose-200":"border-white/10 text-white/60 hover:border-white/30 hover:text-white"),children:ve==="ok"?"OK":ve==="doubt"?"Dudosa":"Fallo"},ve))}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"RPE"}),g.jsx("input",{type:"number",min:1,max:10,value:ge,onChange:ve=>{const Ae=Number(ve.target.value),_e=Number.isFinite(Ae)?Math.min(Math.max(Ae,1),10):6;c(e.id,{effort:_e,completed:!0})},className:"input-field w-20 text-center"})]})]}):null]}),g.jsxs("div",{className:"flex items-center gap-2",children:[ae?g.jsxs("button",{type:"button",onClick:()=>o(e.id),className:De("inline-flex items-center gap-2 rounded-full border border-white/20 px-3 py-1 text-xs font-semibold text-white/70 transition hover:border-white/40 hover:text-white",r&&"border-white/40 text-white"),children:[g.jsx("span",{className:De("transition-transform",r?"rotate-90":"rotate-0"),children:""}),r?"Ocultar detalles":"Ver detalles"]}):null,g.jsx(Bi,{objective:n,size:"sm"})]})]})}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{type:"button",onClick:()=>P(ve=>!ve),disabled:!fe,className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-white/20 text-white/70 transition hover:border-sky-400/60 hover:text-white disabled:opacity-40","aria-label":"Intercambiar trabajo por otro de la misma categora","aria-expanded":O,children:""}),g.jsx("button",{type:"button",onClick:u,className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-white/20 text-white/70 transition hover:border-sky-400/60 hover:text-white","aria-label":"Duplicar trabajo en la sesin",children:"x2"}),g.jsx("button",{type:"button",onClick:l,className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-rose-500/40 text-rose-300 hover:border-rose-400 hover:text-rose-200","aria-label":"Eliminar trabajo de la sesin",children:""})]})]}),O?g.jsx("div",{className:"mt-3 space-y-3 rounded-2xl border border-white/10 bg-slate-950/70 p-3",children:g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Buscar en el catlogo"}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:"search",className:"input-field",placeholder:"Buscar en el catlogo",value:$,onChange:ve=>oe(ve.target.value)}),$?g.jsx("div",{className:"absolute top-14 z-10 max-h-60 w-full overflow-y-auto rounded-2xl border border-white/10 bg-slate-900/95 p-2 shadow-xl",children:pe.length===0?g.jsx("p",{className:"p-3 text-sm text-white/50",children:"Sin resultados. Ajusta la bsqueda."}):g.jsx("div",{className:"space-y-2",children:pe.map(ve=>{const _e=(S.get(ve.id)??ve.name).split("  ").slice(0,-1).join("  ");return g.jsx(W1,{work:ve,objective:y.get(ve.objectiveId),parentChain:_e,onSelect:Z=>{f(Z),P(!1),oe("")}},ve.id)})})}):null]}),$?null:g.jsx("p",{className:"rounded-2xl border border-dashed border-white/15 px-3 py-2 text-xs text-white/60",children:"Escribe para encontrar un reemplazo. Se mostrarn resultados coincidentes del catlogo."})]})}):null,ae&&r?g.jsxs("div",{className:"grid gap-3 rounded-2xl border border-white/10 bg-slate-950/60 p-4",children:[Y?g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Descripcin"}),g.jsx("div",{className:"rounded-2xl border border-white/10 bg-slate-950/70 p-3",children:g.jsx(Ss,{content:W,enableWorkLinks:!0})})]}):null,G?g.jsxs("div",{className:"space-y-2",children:[g.jsx("p",{className:"text-xs uppercase tracking-wide text-white/40",children:"Vdeos de referencia"}),g.jsx("div",{className:"flex flex-wrap gap-2",children:M.map(ve=>g.jsxs("a",{href:ve,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-full border border-white/15 bg-white/5 px-3 py-1 text-xs font-medium text-white/80 transition hover:border-white/30 hover:text-white",children:[g.jsx("span",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-red-500/80 text-white shadow shadow-red-500/40",children:""}),"Ver vdeo"]},ve))})]}):null]}):null,g.jsx("span",{className:"absolute -left-4 top-4 flex h-8 w-8 items-center justify-center rounded-full border border-white/20 bg-slate-950/90 text-xs font-semibold text-white/60",children:e.order+1})]})}function H1({session:e,works:t,objectives:n,assistants:r,onDateChange:i}){const o=Te(D=>D.updateSession),l=Te(D=>D.addWorkToSession),u=Te(D=>D.duplicateSessionWork),c=Te(D=>D.removeWorkFromSession),f=Te(D=>D.reorderSessionWork),h=Te(D=>D.updateSessionWorkDetails),p=Te(D=>D.replaceSessionWork),v=Te(D=>D.setAttendanceStatus),y=e.kind==="personal",[S,E]=w.useState(""),[k,C]=w.useState(new Set),_=w.useMemo(()=>new Map(n.map(D=>[D.id,D])),[n]),j=w.useMemo(()=>new Map(t.map(D=>[D.id,D])),[t]),I=w.useMemo(()=>{const D=new Map,re=(W,Y)=>{if(D.has(W))return D.get(W);const M=j.get(W);if(!M)return"";const G=M.parentWorkId;if(!G||Y.has(W))return D.set(W,M.name),M.name;Y.add(W);const ae=re(G,Y);Y.delete(W);const F=ae?`${ae}  ${M.name}`:M.name;return D.set(W,F),F};return t.forEach(W=>re(W.id,new Set)),D},[t,j]),O=w.useMemo(()=>{if(!S)return t;const D=S.toLowerCase();return t.filter(re=>{const W=_.get(re.objectiveId),Y=I.get(re.id)??"";return re.name.toLowerCase().includes(D)||re.descriptionMarkdown.toLowerCase().includes(D)||(W==null?void 0:W.name.toLowerCase().includes(D))||Y.toLowerCase().includes(D)})},[t,S,_,I]),P=w.useCallback(D=>{const re=I.get(D);if(!re)return"";const W=re.split("  ");return W.pop(),W.join("  ")},[I]),$=D=>{C(re=>{const W=new Set(re);return W.has(D)?W.delete(D):W.add(D),W})},oe=D=>{l(e.id,{workId:D}),E("")},X=D=>{const{active:re,over:W}=D;if(!W||re.id===W.id)return;const Y=e.workItems.findIndex(G=>G.id===re.id),M=e.workItems.findIndex(G=>G.id===W.id);Y===-1||M===-1||f(e.id,Y,M)},R=D=>re=>{const W=re.target.value;o(e.id,{[D]:W}),D==="date"&&i&&i(W)};return g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"grid gap-4 rounded-3xl border border-white/10 bg-white/5 p-6",children:[g.jsxs("div",{className:"grid gap-2 sm:grid-cols-3",children:[g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Ttulo"}),g.jsx("input",{type:"text",className:"input-field",value:e.title,onChange:R("title"),placeholder:"Nombre de la sesin"})]}),g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Fecha"}),g.jsx("input",{type:"date",className:"input-field",value:e.date,onChange:R("date")})]}),g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Hora de inicio"}),g.jsx("input",{type:"time",className:"input-field",value:e.startTime??"18:30",onChange:R("startTime")})]})]}),g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Descripcin"}),g.jsx("textarea",{className:"input-field min-h-[120px]",value:e.description??"",onChange:R("description"),placeholder:"Contexto general, objetivos o recordatorios"})]}),g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Notas privadas"}),g.jsx("textarea",{className:"input-field min-h-[100px]",value:e.notes??"",onChange:R("notes"),placeholder:"Notas para ti o recordatorios de material"})]})]}),g.jsxs("section",{className:"space-y-4",children:[g.jsxs("header",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-semibold text-white",children:"Trabajos en la sesin"}),g.jsx("p",{className:"text-sm text-white/60",children:"Arrastra para reorganizar, pulsa  para ajustar detalles."})]}),g.jsxs("div",{className:"relative w-full sm:w-72",children:[g.jsx("input",{type:"search",className:"input-field",value:S,onChange:D=>E(D.target.value),placeholder:"Buscar en catlogo"}),S&&g.jsx("div",{className:"absolute top-12 z-10 max-h-72 w-full overflow-y-auto rounded-2xl border border-white/10 bg-slate-900/95 p-2 shadow-xl",children:O.length===0?g.jsx("p",{className:"p-4 text-sm text-white/50",children:"Sin resultados. Revisa el catlogo."}):g.jsx("div",{className:"space-y-2",children:O.map(D=>g.jsx(W1,{work:D,objective:_.get(D.objectiveId),parentChain:P(D.id),onSelect:oe},D.id))})})]})]}),g.jsx("div",{className:"space-y-4",children:g.jsx(YF,{collisionDetection:G4,onDragEnd:X,children:g.jsx(o3,{items:e.workItems.map(D=>D.id),strategy:i3,children:g.jsx("div",{className:"space-y-5",children:e.workItems.length===0?g.jsx("div",{className:"rounded-3xl border border-dashed border-white/20 p-10 text-center text-white/50",children:"Aade trabajos desde el catlogo con el buscador superior."}):(()=>{let D=0;const re=bc(e.startTime,"18:30");return e.workItems.map(W=>{const Y=j.get(W.workId),M=Y?_.get(Y.objectiveId):void 0,G=W.customDurationMinutes??(Y==null?void 0:Y.estimatedMinutes)??0,ae=Np(re+D);return D+=G,g.jsx(m3,{item:W,work:Y,objective:M,expanded:k.has(W.id),isPersonal:y,onToggleExpanded:$,onRemove:()=>c(e.id,W.id),onDuplicate:()=>u(e.id,W.id),onUpdateDetails:(F,ee)=>h(e.id,F,ee),onReplace:F=>p(e.id,W.id,F),startTimeLabel:ae,durationMinutes:G,works:t,objectiveMap:_,workPathById:I},W.id)})})()})})})})]}),y?null:g.jsxs("section",{className:"space-y-4",children:[g.jsx("header",{className:"flex flex-col gap-1 sm:flex-row sm:items-baseline sm:justify-between",children:g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-semibold text-white",children:"Previsin de asistencia"}),g.jsx("p",{className:"text-sm text-white/60",children:"Indica quin esperas que asista. La asistencia real se marca durante la sesin desde la Home."})]})}),g.jsx("div",{className:"space-y-2 rounded-3xl border border-white/10 bg-white/5 p-4",children:r.length===0?g.jsx("p",{className:"text-sm text-white/60",children:"An no tienes asistentes definidos. Adelos desde la seccin correspondiente para empezar a registrar asistencia."}):r.map(D=>{const re=e.attendance.find(M=>M.assistantId===D.id),W=(re==null?void 0:re.status)??"pending",Y=re==null?void 0:re.actualStatus;return g.jsxs("div",{className:"flex flex-col gap-2 rounded-2xl border border-white/10 bg-slate-950/60 p-3 sm:flex-row sm:items-center sm:justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm font-semibold text-white",children:D.name}),D.notes?g.jsx("p",{className:"text-xs text-white/50",children:D.notes}):null,Y?g.jsxs("p",{className:"text-xs text-white/40",children:["ltimo registro real: ",K0[Y]]}):null]}),g.jsx("div",{className:"flex items-center gap-2",children:["present","absent","pending"].map(M=>g.jsx("button",{type:"button",onClick:()=>v(e.id,D.id,M),className:De("rounded-full px-3 py-1 text-xs font-semibold transition",W===M?M==="present"?"border border-emerald-500/60 bg-emerald-500/20 text-emerald-200":M==="absent"?"border border-rose-500/60 bg-rose-500/20 text-rose-200":"border border-white/30 bg-white/10 text-white":"border border-white/10 text-white/60 hover:border-white/30 hover:text-white"),children:K0[M]},M))})]},D.id)})})]})]})}function g3(e){const t=(e.day()+6)%7;return e.subtract(t,"day")}function y3(e){const t=g3(e.startOf("month"));return Array.from({length:6},(n,r)=>Array.from({length:7},(i,o)=>t.add(r*7+o,"day")))}function Bu(e,t){return tt(e).format("YYYY-MM-DD")===tt(t).format("YYYY-MM-DD")}tt.locale("es");const v3={present:"Presente",absent:"Ausente",pending:"Pendiente"},x3={present:"border border-emerald-500/40 bg-emerald-500/10 text-emerald-100",absent:"border border-rose-500/40 bg-rose-500/10 text-rose-100",pending:"border border-white/20 bg-white/10 text-white/70"},w3=["present","absent"],b3={present:"Han venido",absent:"Faltan"},k3={present:"border border-emerald-500/60 bg-emerald-500/15 text-emerald-100 shadow shadow-emerald-500/15",absent:"border border-rose-500/60 bg-rose-500/10 text-rose-100 shadow shadow-rose-500/10"},S3="group inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-400/30 sm:text-sm",E3="border-emerald-500/60 bg-emerald-500/15 text-emerald-100 shadow-sm shadow-emerald-500/20 hover:border-emerald-400 hover:bg-emerald-500/20",_3="border-white/15 bg-white/5 text-white/60 hover:border-white/40 hover:text-white",C3="flex h-6 w-6 items-center justify-center rounded-full border text-[12px] transition sm:h-7 sm:w-7",j3="border-emerald-400 bg-emerald-400/20 text-emerald-100 shadow shadow-emerald-500/25",N3="border-white/25 text-white/40 group-hover:border-white/50 group-hover:text-white/80",T3=[];function I3(e){return tt(e).locale("es").format("dddd, D [de] MMMM")}function P3(e){return tt(e).format("MMMM YYYY")}function J0({mode:e,onChange:t}){return g.jsxs("div",{className:"flex items-center gap-2 rounded-full border border-white/10 bg-white/5 p-1",children:[g.jsx("button",{type:"button",className:De("rounded-full px-4 py-2 text-sm font-semibold transition",e==="view"?"bg-white text-slate-900":"text-white/70 hover:text-white"),onClick:()=>{e!=="view"&&t("view")},children:"Vista"}),g.jsx("button",{type:"button",className:De("rounded-full px-4 py-2 text-sm font-semibold transition",e==="edit"?"bg-white text-slate-900":"text-white/70 hover:text-white"),onClick:()=>{e!=="edit"&&t("edit")},children:"Editar"})]})}function A3({session:e,objectives:t,works:n,isActive:r,onSelect:i,onDuplicate:o,onDelete:l}){const u=w.useMemo(()=>new Map(t.map(p=>[p.id,p])),[t]),c=w.useMemo(()=>new Map(n.map(p=>[p.id,p])),[n]),f=w.useMemo(()=>{const p=e.workItems[0];if(!p)return;const v=c.get(p.workId);if(v)return u.get(v.objectiveId)},[e.workItems,c,u]),h=e.workItems.reduce((p,v)=>{const y=c.get(v.workId);return p+(v.customDurationMinutes??(y==null?void 0:y.estimatedMinutes)??0)},0);return g.jsxs("button",{type:"button",onClick:i,className:De("group relative flex flex-col gap-3 rounded-3xl border border-white/10 bg-white/5 p-5 text-left transition hover:border-sky-400/50 hover:shadow-lg hover:shadow-sky-500/10",r&&"ring-2 ring-sky-400/70"),children:[f?g.jsx("div",{className:"absolute inset-0 -z-[1] rounded-3xl opacity-20 blur-2xl transition group-hover:opacity-40",style:{backgroundColor:f.colorHex}}):null,g.jsxs("div",{className:"flex items-start justify-between gap-2",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-lg font-semibold text-white",children:e.title||"Sesin sin ttulo"}),g.jsxs("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:[e.workItems.length," trabajos  ",h," min"]})]}),g.jsx(Bi,{objective:f,size:"sm"})]}),g.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-white/60",children:[e.workItems.slice(0,3).map(p=>{const v=c.get(p.workId),y=((v==null?void 0:v.subtitle)??"").trim();return g.jsx("span",{className:"rounded-full border border-white/10 px-3 py-1",children:y?`${(v==null?void 0:v.name)??"Trabajo"}  ${y}`:(v==null?void 0:v.name)??"Trabajo"},p.id)}),e.workItems.length>3?g.jsxs("span",{className:"rounded-full border border-white/10 px-3 py-1",children:["+",e.workItems.length-3]}):null]}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx(Bi,{objective:f,size:"sm"}),g.jsxs("div",{className:"ml-auto flex gap-2",children:[g.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),o()},className:"btn-secondary px-3 py-1 text-xs",children:"Duplicar"}),g.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),l()},className:"inline-flex items-center justify-center rounded-full border border-rose-500/40 px-3 py-1 text-xs font-semibold text-rose-300 transition hover:border-rose-400 hover:text-rose-200",children:"Eliminar"})]})]})]})}function R3(){const e=Te(L=>L.sessions),t=Te(L=>L.plans),n=Te(L=>L.works),r=Te(L=>L.objectives),i=Te(L=>L.assistants),o=Te(L=>L.addSession),l=Te(L=>L.duplicateSession),u=Te(L=>L.deleteSession),c=Te(L=>L.setAttendanceActualStatus),f=Te(L=>L.toggleSessionWorkCompletion),[h,p]=Oo(),v=(h.get("plan")??"").trim(),y=h.get("session")??void 0,S=h.get("mode")==="edit"?"edit":"view",E=w.useMemo(()=>t.filter(L=>L.kind==="class"&&L.enabled),[t]),k=w.useMemo(()=>E.length===0?void 0:E.find(q=>q.id===v)??E[0],[E,v]),C=(k==null?void 0:k.id)??"classes";w.useEffect(()=>{if(!k||v===k.id)return;const L=new URLSearchParams(h);L.set("plan",k.id),p(L,{replace:!0})},[k,v,h,p]);const _=w.useMemo(()=>e.filter(L=>L.kind==="class"&&(L.planId??"classes")===C),[e,C]),[j,I]=w.useState(()=>S==="edit"),[O,P]=w.useState(new Set),$=w.useMemo(()=>[..._].sort((L,q)=>tt(L.date).valueOf()-tt(q.date).valueOf()),[_]),oe=tt().format("YYYY-MM-DD"),X=w.useMemo(()=>$.find(L=>L.date>=oe)??$[$.length-1],[$,oe]),[R,D]=w.useState(()=>y&&_.some(L=>L.id===y)?y:X==null?void 0:X.id),re=L=>{const q=new URLSearchParams(h);L==="edit"?q.set("mode","edit"):q.delete("mode"),p(q,{replace:!0})};w.useEffect(()=>{y&&_.some(L=>L.id===y)&&D(y)},[y,_]),w.useEffect(()=>{if(!(R&&_.some(L=>L.id===R))){if(y&&_.some(L=>L.id===y)){D(y);return}D(X==null?void 0:X.id)}},[R,y,_,X]);const W=w.useMemo(()=>R?$.find(L=>L.id===R)??X:X,[$,R,X]),Y=L=>{const q=new URLSearchParams(h);L?q.set("session",L):q.delete("session"),p(q,{replace:!0})},M=L=>{D(L),Y(L)},G=(W==null?void 0:W.date)??oe,[ae,F]=w.useState(G),[ee,T]=w.useState(tt(G).startOf("month").format("YYYY-MM-DD"));w.useEffect(()=>{W&&(F(W.date),T(tt(W.date).startOf("month").format("YYYY-MM-DD")))},[W]);const B=w.useMemo(()=>{const L=new Map;return _.forEach(q=>{const be=tt(q.date).format("YYYY-MM-DD"),ye=L.get(be)??[];ye.push(q),L.set(be,ye)}),L.forEach(q=>q.sort((be,ye)=>(be.title??"").localeCompare(ye.title??"","es"))),L},[_]),te=w.useMemo(()=>B.get(ae)??[],[B,ae]),A=w.useMemo(()=>y3(tt(ee)),[ee]),pe=w.useMemo(()=>{const L=tt(ee);return _.filter(q=>{const be=tt(q.date);return be.year()===L.year()&&be.month()===L.month()}).sort((q,be)=>tt(q.date).valueOf()-tt(be.date).valueOf())},[_,ee]),fe=w.useMemo(()=>{const L=new Map;return pe.forEach(q=>{const be=tt(q.date).format("YYYY-MM-DD"),ye=L.get(be)??[];ye.push(q),L.set(be,ye)}),Array.from(L.entries()).sort((q,be)=>tt(q[0]).valueOf()-tt(be[0]).valueOf()).map(([q,be])=>({date:q,sessions:be.slice().sort((ye,he)=>(ye.title??"").localeCompare(he.title??"","es"))}))},[pe]),ge=L=>{F(L),T(tt(L).startOf("month").format("YYYY-MM-DD"));const q=B.get(L)??[];q.length>0?M(q[0].id):M(void 0)},Ie=()=>{const L=o({date:ae,planId:C,title:"Nueva sesin",description:"",notes:""});M(L.id)},ve=L=>{const q=l(L,ae);q&&M(q.id)},Ae=L=>{u(L),R===L&&M(void 0)},_e=L=>{const q=tt(ee).add(L,"month");T(q.format("YYYY-MM-DD")),F(be=>{const ye=tt(be);return ye.month()===q.month()&&ye.year()===q.year()?be:q.startOf("month").format("YYYY-MM-DD")})},Z=w.useMemo(()=>new Map(r.map(L=>[L.id,L])),[r]),je=w.useMemo(()=>new Map(n.map(L=>[L.id,L])),[n]),$e=$.length===0,Be=w.useMemo(()=>i.filter(L=>L.active).slice().sort((L,q)=>L.name.localeCompare(q.name,"es",{sensitivity:"base"})),[i]),Qe=(W==null?void 0:W.attendance)??T3,st=w.useMemo(()=>{const L=new Map;Qe.forEach(ye=>{L.set(ye.assistantId,ye)});let q=0;Be.forEach(ye=>{var he;((he=L.get(ye.id))==null?void 0:he.actualStatus)==="present"&&(q+=1)});const be={present:q,absent:Math.max(Be.length-q,0)};return{map:L,summary:be}},[Qe,Be]),bt=st.map,Ft=st.summary,J=w.useMemo(()=>bc(W==null?void 0:W.startTime,"18:30"),[W==null?void 0:W.startTime]),de=w.useMemo(()=>{if(!W)return new Map;let L=0;const q=new Map;return W.workItems.forEach(be=>{const ye=je.get(be.workId),he=be.customDurationMinutes??(ye==null?void 0:ye.estimatedMinutes)??0,Pe=Np(J+L);q.set(be.id,{startLabel:Pe,duration:he}),L+=he}),q},[W,je,J]),me=W?$.findIndex(L=>L.id===W.id):-1,K=me>0,ne=me>=0&&me<$.length-1,H=()=>{K&&M($[me-1].id)},ie=()=>{ne&&M($[me+1].id)},U=L=>{const q=L.target.value;if(!q)return;ge(q);const be=B.get(q);be&&be.length>0&&M(be[0].id)},se=L=>{P(q=>{const be=new Set(q);return be.has(L)?be.delete(L):be.add(L),be})},xe=(L,q)=>{W&&c(W.id,L,q)},Ne=j?g.jsxs("section",{className:"glass-panel space-y-6 p-6",children:[g.jsxs("header",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:"Calendario"}),g.jsx("h2",{className:"text-xl font-semibold text-white",children:P3(ee)})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>_e(-1),children:" Mes anterior"}),g.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>_e(1),children:"Mes siguiente "})]})]}),g.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.3fr_1.7fr]",children:[g.jsxs("section",{className:"space-y-4",children:[g.jsx("div",{className:"grid grid-cols-7 gap-2 text-center text-xs font-semibold uppercase tracking-wide text-white/50",children:["L","M","X","J","V","S","D"].map(L=>g.jsx("div",{className:"rounded-full bg-white/5 py-2",children:L},L))}),g.jsx("div",{className:"grid grid-cols-7 gap-2",children:A.flat().map(L=>{const q=L.format("YYYY-MM-DD"),be=B.get(q)??[],ye=L.month()===tt(ee).month(),he=Bu(q,oe),Pe=Bu(q,ae);return g.jsxs("button",{type:"button",onClick:()=>ge(q),className:De("relative flex h-20 flex-col items-center justify-between rounded-2xl border p-2 text-sm transition",Pe?"border-sky-400/60 bg-sky-500/20 text-white shadow-lg shadow-sky-500/20":"border-white/10 bg-white/5 text-white/70 hover:border-white/30",!ye&&"text-white/30"),children:[g.jsx("span",{className:De("flex h-8 w-8 items-center justify-center rounded-full text-base font-semibold",he?"bg-white text-slate-900":""),children:L.format("D")}),g.jsxs("div",{className:"flex w-full flex-wrap justify-center gap-1",children:[be.slice(0,3).map(Ue=>{const Xe=Ue.workItems[0],Me=Xe?n.find(it=>it.id===Xe.workId):void 0,ht=Me?r.find(it=>it.id===Me.objectiveId):void 0;return g.jsx("span",{className:"h-2 w-6 rounded-full",style:{backgroundColor:(ht==null?void 0:ht.colorHex)??"rgba(255,255,255,0.4)"}},Ue.id)}),be.length>3?g.jsx("span",{className:"h-2 w-2 rounded-full border border-white/40"}):null]})]},q)})})]}),g.jsxs("section",{className:"space-y-4",children:[g.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:"Sesiones en"}),g.jsx("h3",{className:"text-2xl font-semibold text-white",children:tt(ae).format("dddd, D [de] MMMM")})]}),g.jsx("div",{className:"flex gap-3",children:g.jsx("button",{type:"button",onClick:Ie,className:"btn-primary",children:"+ Nueva sesin"})})]}),g.jsx("div",{className:"space-y-3",children:te.length===0?g.jsx("div",{className:"rounded-3xl border border-dashed border-white/15 p-10 text-center text-white/50",children:"An no hay sesiones planificadas este da. Crea una con el botn superior."}):te.map(L=>g.jsx(A3,{session:L,objectives:r,works:n,isActive:L.id===(W==null?void 0:W.id),onSelect:()=>M(L.id),onDuplicate:()=>ve(L.id),onDelete:()=>Ae(L.id)},L.id))}),fe.length>0?g.jsxs("details",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[g.jsxs("summary",{className:"cursor-pointer text-sm font-semibold text-white/80",children:["Ver sesiones del mes (",pe.length,")"]}),g.jsx("div",{className:"custom-scrollbar mt-3 max-h-[22rem] space-y-3 overflow-y-auto pr-1",children:fe.map(({date:L,sessions:q})=>{const be=q.length===1?"1 sesin":`${q.length} sesiones`;return g.jsxs("div",{role:"button",tabIndex:0,onClick:()=>ge(L),onKeyDown:ye=>{(ye.key==="Enter"||ye.key===" ")&&(ye.preventDefault(),ge(L))},className:De("cursor-pointer rounded-2xl border border-white/10 bg-white/5 p-3 text-sm transition hover:border-white/40 hover:bg-white/10",Bu(L,ae)&&"border-sky-400/50 bg-sky-500/10 shadow shadow-sky-500/10"),children:[g.jsxs("p",{className:"flex flex-wrap items-center gap-2 text-xs uppercase tracking-[0.3em] text-white/40",children:[g.jsx("span",{children:tt(L).format("ddd  D MMM")}),g.jsx("span",{className:"rounded-full border border-white/15 px-2 py-0.5 text-[9px] font-semibold tracking-[0.2em] text-white/50",children:be})]}),g.jsx("div",{className:"mt-3 space-y-2 text-xs",children:q.map(ye=>{const he=(ye.description??"").trim(),Pe=ye.workItems.reduce((Ue,Xe)=>{const Me=n.find(ht=>ht.id===Xe.workId);return Ue+(Xe.customDurationMinutes??(Me==null?void 0:Me.estimatedMinutes)??0)},0);return g.jsxs("button",{type:"button",onClick:Ue=>{Ue.stopPropagation(),ge(L),M(ye.id)},className:De("flex w-full flex-col gap-1 rounded-xl border border-white/10 bg-slate-950/60 px-3 py-2 text-left transition hover:border-white/30 hover:text-white",ye.id===(W==null?void 0:W.id)&&Bu(L,ae)&&"border-sky-400/60 text-white"),children:[g.jsxs("div",{className:"flex w-full items-center justify-between gap-3",children:[g.jsx("span",{className:"truncate font-medium",children:ye.title||"Sesin sin ttulo"}),g.jsxs("span",{className:"text-[11px] uppercase tracking-wide text-white/40",children:[ye.workItems.length,"  ",Pe," min"]})]}),he?g.jsx("p",{className:"text-[11px] leading-relaxed text-white/60",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:he}):null]},ye.id)})})]},L)})})]}):null]})]})]}):null;return g.jsxs("div",{className:"space-y-6",children:[$e||!W?g.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-end",children:[g.jsx(J0,{mode:S,onChange:re}),g.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>I(L=>!L),children:j?"Ocultar calendario":"Abrir calendario"})]}):null,Ne,$e?g.jsxs("section",{className:"glass-panel flex flex-col items-center justify-center gap-5 p-4 text-center sm:gap-6 sm:p-10",children:[g.jsx("div",{className:"grid h-28 w-28 place-items-center rounded-full bg-gradient-to-br from-sky-500/30 to-purple-500/30 shadow-lg shadow-sky-500/20 sm:h-32 sm:w-32",children:g.jsx("svg",{width:"52",height:"52",viewBox:"0 0 24 24",fill:"none",className:"text-white/80 sm:h-14 sm:w-14",children:g.jsx("path",{d:"M6 3v2M18 3v2M3.5 10h17M5 7h14a2 2 0 0 1 2 2v9a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3V9a2 2 0 0 1 2-2Z",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})})}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("p",{className:"text-lg font-semibold text-white sm:text-2xl",children:"An no hay sesiones"}),g.jsx("p",{className:"mx-auto max-w-md text-sm text-white/60 sm:text-base",children:"Crea tu primera sesin en el calendario y empieza a construir tu plan reutilizable."})]}),g.jsx("button",{type:"button",className:"btn-primary",onClick:()=>I(!0),children:"Abrir calendario"})]}):W?g.jsxs("section",{className:"glass-panel space-y-4 p-3 sm:space-y-6 sm:p-6 lg:p-8",children:[g.jsxs("header",{className:"space-y-3 sm:flex sm:items-start sm:justify-between sm:gap-6 sm:space-y-0",children:[g.jsxs("div",{className:"space-y-1.5",children:[g.jsxs("div",{className:"flex items-center gap-2 text-xs uppercase tracking-[0.3em] text-white/40",children:[g.jsx("span",{className:"sm:hidden",children:"Sesin"}),g.jsx("span",{className:"hidden sm:inline",children:"Fecha"})]}),g.jsx("h2",{className:"font-display text-2xl font-semibold text-white sm:text-3xl",children:I3(W.date)}),g.jsx("p",{className:"text-sm font-medium text-white/80 sm:text-lg",children:W.title})]}),g.jsxs("div",{className:"flex flex-col gap-2.5 rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-sm text-white/70 sm:w-auto",children:[g.jsxs("div",{className:"flex items-center justify-between gap-4",children:[g.jsx("p",{className:"font-semibold text-white",children:"Duracin estimada"}),g.jsxs("span",{className:"rounded-full bg-white/10 px-3 py-1 text-xs text-white/80",children:[W.workItems.map(L=>{const q=je.get(L.workId);return L.customDurationMinutes??(q==null?void 0:q.estimatedMinutes)??0}).reduce((L,q)=>L+q,0)||0," ","min"]})]}),g.jsxs("div",{className:"flex flex-col gap-2 sm:items-end",children:[g.jsx("label",{className:"text-[11px] uppercase tracking-wide text-white/40 sm:text-xs",children:"Ir a fecha"}),g.jsx("input",{type:"date",className:"input-field w-full sm:w-auto",value:W.date??oe,onChange:U})]})]})]}),g.jsxs("div",{className:"flex flex-col gap-2.5 sm:flex-row sm:flex-wrap sm:items-center sm:justify-between",children:[g.jsxs("div",{className:"flex flex-wrap gap-2",children:[g.jsx("button",{type:"button",onClick:H,disabled:!K,className:"btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold disabled:opacity-40 sm:h-10 sm:text-sm",children:" Anterior"}),g.jsx("button",{type:"button",onClick:ie,disabled:!ne,className:"btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold disabled:opacity-40 sm:h-10 sm:text-sm",children:"Siguiente "})]}),g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsx(J0,{mode:S,onChange:re}),g.jsx("button",{type:"button",className:"btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold sm:h-10 sm:text-sm",onClick:()=>I(L=>!L),children:j?"Ocultar calendario":"Abrir calendario"})]})]}),S==="edit"?g.jsx("div",{className:"rounded-2xl border border-white/10 bg-slate-950/40 p-3 sm:p-4",children:g.jsx(H1,{session:W,works:n,objectives:r,assistants:i,onDateChange:L=>{F(L),T(tt(L).startOf("month").format("YYYY-MM-DD"))}})}):g.jsxs(g.Fragment,{children:[W.description&&g.jsx("div",{className:"rounded-2xl border border-white/5 bg-white/5 p-3 sm:p-4",children:g.jsx(Ss,{content:W.description})}),g.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[g.jsx("h3",{className:"text-sm uppercase tracking-[0.3em] text-white/40",children:"Trabajos"}),g.jsx("div",{className:"space-y-3 sm:space-y-4",children:W.workItems.map(L=>{const q=je.get(L.workId),be=q?Z.get(q.objectiveId):void 0,ye=O.has(L.id),he=de.get(L.id),Pe=(he==null?void 0:he.startLabel)??Np(J),Ue=(he==null?void 0:he.duration)??L.customDurationMinutes??(q==null?void 0:q.estimatedMinutes)??0,Xe=(L.focusLabel??"").trim(),Me=Xe.length>0,ht=L.customDescriptionMarkdown??(q==null?void 0:q.descriptionMarkdown)??"",it=ht.trim().length>0,Mt=((q==null?void 0:q.videoUrls)??[]).map(et=>et.trim()).filter(Boolean),ct=Mt.length>0,Je=it||ct,lt=((q==null?void 0:q.subtitle)??"").trim();return g.jsxs("article",{className:"flex flex-col gap-2.5 rounded-3xl border border-white/10 bg-white/5 p-2.5 shadow shadow-black/20 sm:gap-3 sm:p-4",style:be?{background:`linear-gradient(120deg, ${be.colorHex}1a, rgba(15,23,42,0.8))`}:void 0,children:[g.jsxs("div",{className:"flex items-start gap-3",children:[g.jsx("label",{className:"mt-1 flex items-center gap-3 text-left",children:g.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded-full border-2 border-white/30 bg-transparent text-sky-400 transition focus:ring-sky-400",checked:L.completed??!1,onChange:et=>f(W.id,L.id,et.target.checked)})}),g.jsxs("div",{className:"flex-1 space-y-2",children:[g.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[g.jsxs("div",{children:[g.jsxs("p",{className:"text-lg font-semibold text-white",children:[(q==null?void 0:q.name)??"Trabajo eliminado",Me?g.jsxs("span",{className:"ml-2 text-sky-300",children:[" ",Xe]}):null]}),lt?g.jsx("p",{className:"text-sm text-white/70",children:lt}):null,g.jsxs("p",{className:"text-sm text-white/60",children:[g.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:Pe}),g.jsx("span",{className:"mx-2 text-white/30",children:""}),g.jsxs("span",{children:[Ue," min"]})]})]}),g.jsx(Bi,{objective:be,size:"sm"})]}),(Je||ct)&&g.jsxs("div",{className:"flex items-center gap-3 text-xs text-white/50",children:[Je?g.jsxs("button",{type:"button",onClick:()=>se(L.id),className:"inline-flex items-center gap-2 rounded-full border border-white/15 px-3 py-1 text-xs font-semibold text-white/70 transition hover:border-white/30 hover:text-white",children:[g.jsx("span",{className:De("transition-transform",ye?"rotate-90":"rotate-0"),children:""}),ye?"Ocultar detalles":"Ver detalles"]}):null,ct?g.jsxs("span",{children:[Mt.length," vdeo",Mt.length>1?"s":""]}):null]})]}),g.jsx("div",{className:De("mt-1 flex h-10 w-10 items-center justify-center rounded-full border border-white/10 text-xs font-semibold uppercase text-white/60",L.completed?"bg-white/20 text-white":""),children:L.order+1})]}),Je&&ye&&g.jsxs("div",{className:"space-y-3 rounded-2xl border border-white/10 bg-slate-950/60 p-4",children:[it?g.jsx(Ss,{content:ht,enableWorkLinks:!0}):null,ct?g.jsx("div",{className:"space-y-3",children:Mt.map((et,yt)=>g.jsxs("div",{className:"space-y-2",children:[g.jsx(Yc,{url:et,title:`${(q==null?void 0:q.name)??"Trabajo"} vdeo ${yt+1}`}),g.jsx("a",{href:et,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-full border border-white/15 bg-white/5 px-3 py-1 text-xs font-medium text-white/80 transition hover:border-white/30 hover:text-white",children:"Abrir en YouTube"})]},`${L.id}-video-${yt}`))}):null]})]},L.id)})})]})]}),S==="view"?i.length===0?g.jsxs("div",{className:"rounded-2xl border border-dashed border-white/15 bg-white/5 p-3 text-xs text-white/70 sm:text-sm sm:p-4",children:[g.jsx("p",{className:"font-semibold text-white",children:"Quines participan?"}),g.jsx("p",{className:"mt-1",children:"Crea tu lista de asistentes para poder registrar quin ha venido a clase en tiempo real."}),g.jsx(ar,{to:"/assistants",className:"btn-secondary mt-3 h-8 rounded-2xl px-3 text-xs",children:"Gestionar asistentes"})]}):Be.length===0?g.jsxs("div",{className:"rounded-2xl border border-dashed border-white/15 bg-white/5 p-3 text-xs text-white/70 sm:text-sm sm:p-4",children:[g.jsx("p",{className:"font-semibold text-white",children:"Todos los asistentes estn inactivos."}),g.jsx("p",{className:"mt-1",children:"Activa al menos uno desde la seccin de asistentes para poder marcar su asistencia."}),g.jsx(ar,{to:"/assistants",className:"btn-secondary mt-3 h-8 rounded-2xl px-3 text-xs",children:"Ir a asistentes"})]}):g.jsxs("div",{className:"space-y-3 rounded-2xl border border-white/10 bg-slate-950/60 p-3 sm:space-y-4 sm:p-5",children:[g.jsxs("div",{className:"flex flex-col gap-2.5 sm:flex-row sm:items-center sm:justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:"Asistencia en vivo"}),g.jsx("p",{className:"text-xs text-white/50 sm:text-sm",children:"Marca quin est presente en la sesin actual."})]}),g.jsx("div",{className:"flex flex-wrap gap-2",children:w3.map(L=>g.jsxs("span",{className:De("inline-flex items-center gap-2 rounded-full px-2.5 py-0.5 text-[11px] font-semibold sm:px-3 sm:py-1 sm:text-xs",k3[L]),children:[Ft[L]," ",b3[L]]},L))})]}),g.jsx("div",{className:"space-y-2",children:Be.map(L=>{const q=bt.get(L.id),be=(q==null?void 0:q.status)??"pending",ye=(q==null?void 0:q.actualStatus)==="present",he=()=>xe(L.id,ye?"absent":"present");return g.jsx("article",{className:"rounded-2xl border border-white/10 bg-white/5 p-2.5 sm:p-4",children:g.jsxs("div",{className:"flex flex-col gap-2.5 sm:flex-row sm:items-center sm:justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm font-semibold text-white",children:L.name}),g.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2 text-[11px] text-white/50 sm:text-xs",children:[g.jsx("span",{className:"uppercase tracking-wide text-white/40",children:"Previsin"}),g.jsx("span",{className:De("inline-flex items-center gap-2 rounded-full px-2 py-0.5 font-semibold",x3[be]),children:v3[be]}),g.jsx("span",{className:"hidden text-white/30 sm:inline",children:""}),g.jsx("span",{className:"uppercase tracking-wide text-white/40",children:"Asistencia"}),g.jsx("span",{className:De("font-semibold",ye?"text-emerald-200":"text-white/60"),children:ye?"Presente":"No asisti"})]})]}),g.jsxs("div",{className:"flex flex-col items-end gap-1 text-right sm:flex-row sm:items-center sm:gap-3",children:[g.jsxs("button",{type:"button",onClick:he,"aria-pressed":ye,"aria-label":`${ye?"Desmarcar asistencia de":"Marcar asistencia de"} ${L.name}`,title:ye?"Desmarcar asistencia":"Marcar como presente",className:De(S3,ye?E3:_3),children:[g.jsx("span",{className:De(C3,ye?j3:N3),children:ye?g.jsx("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 sm:h-4 sm:w-4","aria-hidden":"true",children:g.jsx("path",{d:"M4 8.5 6.5 11l5-6",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}):g.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-white/30 transition group-hover:bg-white/60"})}),g.jsx("span",{children:ye?"Ha asistido":"Marcar asistencia"})]}),g.jsx("span",{className:De("text-[10px] font-medium uppercase tracking-[0.25em] sm:text-[11px]",ye?"text-emerald-200":"text-white/40"),children:ye?"PRESENTE":"AUSENTE"})]})]})},L.id)})})]}):null]}):g.jsx("div",{className:"glass-panel p-10 text-center text-white/60",children:"Selecciona una sesin desde el calendario."})]})}tt.locale("es");const Ju="personal-exclude",jh={ok:"OK",doubt:"Dudosa",fail:"Fallo"},Q0={ok:"border-emerald-500/50 bg-emerald-500/15 text-emerald-100 hover:border-emerald-400",doubt:"border-amber-400/40 bg-amber-500/10 text-amber-200 hover:border-amber-300",fail:"border-rose-500/50 bg-rose-500/10 text-rose-200 hover:border-rose-400"},O3={ok:"border-emerald-500/25 bg-emerald-500/10",doubt:"border-amber-400/25 bg-amber-500/10",fail:"border-rose-500/25 bg-rose-500/10"};function Qc(e){return Array.from(new Set((e??[]).map(t=>t.trim().toLowerCase()).filter(t=>t.length>0)))}function vo(e,t){const n=Qc(e.tags),r=e.nodeType??"work";return!(t.byWorkIds&&t.byWorkIds.length>0&&!t.byWorkIds.includes(e.id)||t.byNodeTypes&&t.byNodeTypes.length>0&&!t.byNodeTypes.includes(r)||t.byTags&&t.byTags.length>0&&!t.byTags.map(o=>o.trim().toLowerCase()).filter(Boolean).every(o=>n.includes(o)))}function V1(e,t){const n=e.nodeType??"work",r=t.targetsDays[n]??t.targetsDays.work??7,i=Qc(e.tags),o=(t.overrides??[]).reduce((u,c)=>{var p,v;const f=((v=(p=c.match)==null?void 0:p.tagsAny)==null?void 0:v.map(y=>y.trim().toLowerCase()).filter(Boolean))??[];return f.length===0?u:f.some(y=>i.includes(y))?u*(c.multiplier||1):u},1);return Math.max(1,Math.round(r*o))}function M3(e){return(e.nodeType??"").trim().toLowerCase()!=="style"}function Qu(e,t){const n=typeof e.estimatedMinutes=="number"?e.estimatedMinutes:0;if(Number.isFinite(n)&&n>0)return n;const r=(e.nodeType??"work").trim().toLowerCase()||"work",i=t.defaultMinutesByNodeType[r]??t.defaultMinutesByNodeType.work??3;return Math.max(.25,Number(i)||3)}function q1(e){var h,p,v;const t=e.groups??[];if(t.length>0)return[...t].sort((y,S)=>(y.order??0)-(S.order??0));const n=Math.max(0,Number((h=e.template)==null?void 0:h.focusMinutes)||18),r=Math.max(0,Number((p=e.template)==null?void 0:p.rouletteMinutes)||10),i=Math.max(0,Number((v=e.template)==null?void 0:v.recapMinutes)||0),o=e.focusSelectors??[],l=e.rouletteSelectors??[],u=o.length>0?o:[{byNodeTypes:["segment","form"]}],c=l.length>0?l:[{byNodeTypes:["technique"]},{byTags:["roulette"]}],f=[{id:"formas",name:"Formas",enabled:!0,order:1,type:"work",limitMode:"minutes",minutesBudget:n,strategy:"overdue",hierarchyRule:"prefer_leaves",include:u,exclude:[]},{id:"tecnicas",name:"Tcnicas",enabled:!0,order:2,type:"work",limitMode:"minutes",minutesBudget:r,strategy:"weighted",hierarchyRule:"allow_all",include:c,exclude:[]}];return i>0&&f.push({id:"recap",name:"Recap",enabled:!0,order:99,type:"note",limitMode:"minutes",minutesBudget:i}),f}function L3(e){let t=2166136261;for(let n=0;n<e.length;n+=1)t^=e.charCodeAt(n),t=Math.imul(t,16777619);return t>>>0}function D3(e){let t=e>>>0;return()=>{t=t+1831565813>>>0;let n=Math.imul(t^t>>>15,1|t);return n^=n+Math.imul(n^n>>>7,61|n),((n^n>>>14)>>>0)/4294967296}}function $3(e,t,n){const r=D3(L3(n));return e.map(i=>{const o=Math.max(1e-4,t(i)),l=Math.max(1e-9,r()),u=-Math.log(l)/o;return{item:i,score:u}}).sort((i,o)=>i.score-o.score).map(({item:i})=>i)}function F3(e){const t=new Map;return e.forEach(n=>{n.workItems.forEach(r=>{if(!((r.completed??!1)||typeof r.result<"u"))return;const o=t.get(r.workId);(!o||tt(n.date).isAfter(o.date))&&t.set(r.workId,{date:n.date,result:r.result,effort:r.effort})})}),t}function z3(e){const{works:t,personalSessions:n,cadence:r,today:i}=e,o=F3(n);return t.filter(l=>M3(l)).filter(l=>!Qc(l.tags).includes(Ju)).map(l=>{const u=o.get(l.id),c=V1(l,r);if(!u)return{work:l,targetDays:c,overdueScore:1e4};const f=Math.max(tt(i).diff(tt(u.date),"day"),0),h=Math.max(f-c,0);return{work:l,targetDays:c,lastSeen:u.date,daysSince:f,overdueScore:h,lastResult:u.result}}).sort((l,u)=>{if(u.overdueScore!==l.overdueScore)return u.overdueScore-l.overdueScore;const c=l.daysSince??1e4,f=u.daysSince??1e4;return f!==c?f-c:l.work.name.localeCompare(u.work.name,"es",{sensitivity:"base"})})}function B3(e){return e?tt(e).format("D MMM YYYY"):"Nunca"}function U3(e){const{dueList:t,plan:n,today:r,childCountByWorkId:i}=e,o=n.limitMode==="count"||n.limitMode==="both",l=n.limitMode==="minutes"||n.limitMode==="both",u=o?Math.max(1,Math.round(n.maxItems||12)):Number.POSITIVE_INFINITY,c=l?Math.max(0,Number(n.minutesBudget)||0):Number.POSITIVE_INFINITY,f=new Set([].filter(X=>(X.completed??!1)||typeof X.result<"u").map(X=>X.workId)),h=t.filter(X=>!f.has(X.work.id)),p=tt(r).day(),v=q1(n).filter(X=>X.enabled).filter(X=>{const R=X.daysOfWeek??[];return R.length===0||R.includes(p)}).sort((X,R)=>(X.order??0)-(R.order??0)),y=v.filter(X=>(X.type??"work")==="note").reduce((X,R)=>R.limitMode==="minutes"||R.limitMode==="both"?X+Math.max(0,Number(R.minutesBudget)||0):X,0),S=Number.isFinite(c)?Math.max(0,c-y):Number.POSITIVE_INFINITY,E=`kungfu-${r}`,k=X=>{const R=X.overdueScore>=1e4?1e3:Math.max(0,X.overdueScore+1);return X.lastResult==="fail"?R*1.6:X.lastResult==="doubt"?R*1.25:R},C=X=>Qu(X.work,n),_=X=>{const R=(X.nodeType??"work").trim().toLowerCase()||"work";return{segment:30,drill:22,form:20,work:10,application:0,technique:0,link:0,style:-100}[R]??5},j=X=>[...X].sort((R,D)=>{if(D.overdueScore!==R.overdueScore)return D.overdueScore-R.overdueScore;const re=R.daysSince??1e4,W=D.daysSince??1e4;if(W!==re)return W-re;const Y=_(D.work)-_(R.work);return Y!==0?Y:R.work.name.localeCompare(D.work.name,"es",{sensitivity:"base"})}),I=new Set,O=[];let P=0,$=0;for(const X of v){if((X.type??"work")==="note"){O.push({group:X,items:[],plannedMinutes:0});continue}const D=X.include??[],re=X.exclude??[];let W=h.filter(ge=>I.has(ge.work.id)||!(D.length===0?!0:D.some(Ae=>vo(ge.work,Ae)))?!1:!re.some(Ae=>vo(ge.work,Ae)));if((X.hierarchyRule??"allow_all")==="prefer_leaves"){const ge=new Set(W.map(Ie=>Ie.work.parentWorkId).filter(Boolean));W=W.filter(Ie=>ge.has(Ie.work.id)?(i.get(Ie.work.id)??0)===0:!0)}const G=(X.strategy??"overdue")==="weighted"?$3(W,k,`${E}-${X.id}`):j(W),ae=X.limitMode??"minutes",F=ae==="count"||ae==="both",ee=ae==="minutes"||ae==="both",T=Number(X.maxItems),B=F&&Number.isFinite(T)&&T>0?Math.round(T):Number.POSITIVE_INFINITY,te=Number(X.minutesBudget),A=ee&&Number.isFinite(te)?Math.max(0,te):Number.POSITIVE_INFINITY,pe=[];let fe=0;for(const ge of G){if($>=u||pe.length>=B)break;const Ie=C(ge);if(!(fe+Ie>A)&&!(P+Ie>S)&&(pe.push(ge),fe+=Ie,P+=Ie,$+=1,I.add(ge.work.id),l&&P>=S))break}if(O.push({group:X,items:pe,plannedMinutes:Math.round(fe*10)/10}),$>=u||l&&P>=S)break}const oe=Math.round((P+y)*10)/10;return{groups:O,plannedMinutes:{work:Math.round(P*10)/10,reserved:Math.round(y*10)/10,total:oe},totalItems:$}}function W3(){const e=Te(K=>K.works),t=Te(K=>K.sessions),n=Te(K=>K.plans),r=Te(K=>K.kungfuCadence),i=Te(K=>K.kungfuTodayPlan),o=Te(K=>K.updateWork),{user:l}=Ns(),u=Te(K=>K.addSession),c=Te(K=>K.addWorkToSession),f=Te(K=>K.updateSessionWorkDetails),h=Te(K=>K.updateSessionWorkItems),p=Te(K=>K.updateSession),v=Te(K=>K.removeWorkFromSession),[y,S]=Oo(),E=(y.get("plan")??"").trim(),k=tt().format("YYYY-MM-DD"),C=w.useMemo(()=>n.filter(K=>K.kind==="personal"&&K.enabled),[n]),_=w.useMemo(()=>C.length===0?void 0:C.find(ne=>ne.id===E)??C[0],[C,E]),j=(_==null?void 0:_.id)??"personal-kungfu";w.useEffect(()=>{if(!_||E===_.id)return;const K=new URLSearchParams(y);K.set("plan",_.id),S(K,{replace:!0})},[_,E,y,S]);const I=(_==null?void 0:_.cadence)??r,O=(_==null?void 0:_.todayPlan)??i,P=w.useMemo(()=>t.filter(K=>K.kind==="personal"&&(K.planId??"personal-kungfu")===j),[t,j]),$=w.useMemo(()=>P.find(K=>K.date===k),[P,k]),oe=w.useMemo(()=>{var ne;return(ne=P.filter(H=>H.date<k).slice().sort((H,ie)=>H.date<ie.date?1:H.date>ie.date?-1:0)[0])==null?void 0:ne.id},[P,k]),X=w.useMemo(()=>{var ne;return(ne=P.filter(H=>H.date>k).slice().sort((H,ie)=>H.date>ie.date?1:H.date<ie.date?-1:0)[0])==null?void 0:ne.id},[P,k]),R=w.useMemo(()=>z3({works:e,personalSessions:P,cadence:I,today:k}),[e,P,I,k]),D=w.useMemo(()=>{const K=new Map;return e.forEach(ne=>{const H=ne.parentWorkId??"";H&&K.set(H,(K.get(H)??0)+1)}),K},[e]),re=w.useMemo(()=>new Map(e.map(K=>[K.id,K])),[e]),W=w.useMemo(()=>l?{actorId:l.id,actorEmail:l.email??""}:null,[l]),[Y,M]=w.useState(null),[G,ae]=w.useState({}),[F,ee]=w.useState(null),[T,B]=w.useState(new Set),te=w.useCallback(()=>$||u({date:k,kind:"personal",planId:j,title:(_==null?void 0:_.name)??"Entrenamiento personal",description:"",notes:""}),[u,_==null?void 0:_.name,j,k,$]),A=w.useCallback(K=>{const ne=(K??[]).slice().sort((U,se)=>(U.order??0)-(se.order??0)),H=new Map,ie=[];return ne.forEach(U=>{const se=U.workId;if(!se)return;const xe=H.get(se);if(!xe){H.set(se,{...U}),ie.push(se);return}const Ne={...xe,customDescriptionMarkdown:xe.customDescriptionMarkdown??U.customDescriptionMarkdown,customDurationMinutes:xe.customDurationMinutes??U.customDurationMinutes,notes:xe.notes??U.notes,focusLabel:xe.focusLabel??U.focusLabel,completed:!!(xe.completed??!1)||!!(U.completed??!1),result:xe.result??U.result,effort:xe.effort??U.effort};H.set(se,Ne)}),ie.map((U,se)=>({...H.get(U),order:se}))},[]);w.useEffect(()=>{if(!$)return;const K=$.workItems??[],ne=K.reduce((U,se)=>{const xe=se.workId;return xe&&U.set(xe,(U.get(xe)??0)+1),U},new Map);if(!Array.from(ne.values()).some(U=>U>1))return;const ie=A(K);ie.length!==K.length&&h($.id,ie)},[$,h,A]);const pe=w.useMemo(()=>{const K=tt(k).day();return q1(O).filter(ne=>ne.enabled).filter(ne=>{const H=ne.daysOfWeek??[];return H.length===0||H.includes(K)}).sort((ne,H)=>(ne.order??0)-(H.order??0))},[O,k]);w.useEffect(()=>{var ie;const K={},ne=($==null?void 0:$.notesByGroupId)??void 0;ne&&Object.entries(ne).forEach(([U,se])=>{const xe=(U??"").trim();xe&&(K[xe]=String(se??""))});const H=(($==null?void 0:$.notes)??"").toString();if(H.trim().length>0){const U=((ie=pe.find(se=>(se.type??"work")==="note"))==null?void 0:ie.id)??"note";K[U]||(K[U]=H)}ae(K)},[$==null?void 0:$.notes,$==null?void 0:$.notesByGroupId,pe]);const fe=w.useMemo(()=>{const K=new Map;return pe.filter(ne=>(ne.type??"work")!=="note").forEach((ne,H)=>{K.set(ne.name,H)}),K},[pe]),ge=w.useCallback(K=>{const ne=pe.filter(H=>(H.type??"work")!=="note");for(const H of ne){const ie=H.include??[],U=H.exclude??[];if(!(!(ie.length===0||ie.some(Ne=>vo(K,Ne)))||U.some(Ne=>vo(K,Ne))))return H.name}return"Hoy"},[pe]),Ie=w.useMemo(()=>new Set(pe.filter(K=>(K.type??"work")!=="note").map(K=>K.name).filter(Boolean)),[pe]),ve=w.useCallback((K,ne)=>{const H=(K.focusLabel??"").trim();return H&&Ie.has(H)?H:ge(ne)},[Ie,ge]),Ae=w.useCallback(K=>{const ne=Te.getState().sessions.find(ie=>ie.id===K);if(!ne)return null;const H=(ne.workItems??[]).map(ie=>{const U=re.get(ie.workId);if(!U)return ie;const se=ve(ie,U);return se===ie.focusLabel?ie:{...ie,focusLabel:se}});return H.sort((ie,U)=>{const se=ie.focusLabel??"Hoy",xe=U.focusLabel??"Hoy",Ne=fe.get(se)??999,L=fe.get(xe)??999;return Ne!==L?Ne-L:(ie.order??0)-(U.order??0)}),H},[fe,re,ve]),[_e,Z]=w.useState(!1),je=w.useCallback(K=>{if(!_e&&R.length!==0){Z(!0);try{const ne=$??te(),H=ne.workItems??[],ie=new Set(H.map(he=>he.workId));if((O.limitMode==="count"||O.limitMode==="both")&&ie.size>=Math.max(1,Math.round(O.maxItems||12))){K!=null&&K.includeDiagnostics&&(M({type:"success",text:"Plan ya est lleno por cantidad. Sube el mximo de tems en Ajustes."}),window.setTimeout(()=>M(null),2500));return}const se=new Map;H.forEach(he=>{const Pe=re.get(he.workId);if(!Pe)return;const Ue=ve(he,Pe),Xe=pe.find(it=>it.name===Ue),Me=(Xe==null?void 0:Xe.id)??Ue,ht=se.get(Me)??{minutes:0,items:0};se.set(Me,{minutes:ht.minutes+Qu(Pe,O),items:ht.items+1})});const xe=H.reduce((he,Pe)=>{const Ue=re.get(Pe.workId);return Ue?he+Qu(Ue,O):he},0),Ne={...O,maxItems:Math.max(0,Math.round((O.maxItems??0)-ie.size)),minutesBudget:Math.max(0,Number(O.minutesBudget??0)-xe),groups:pe.map(he=>{const Pe=se.get(he.id),Ue={...he};return Pe&&(typeof he.minutesBudget=="number"&&Number.isFinite(he.minutesBudget)&&(Ue.minutesBudget=Math.max(0,he.minutesBudget-Pe.minutes)),typeof he.maxItems=="number"&&Number.isFinite(he.maxItems)&&(Ue.maxItems=Math.max(0,Math.round(he.maxItems-Pe.items)))),Ue})},L=R.filter(he=>!ie.has(he.work.id)),q=U3({dueList:L,todaySession:void 0,plan:Ne,today:k,childCountByWorkId:D});let be=0;q.groups.filter(he=>(he.group.type??"work")!=="note").forEach(he=>{he.items.forEach(Pe=>{c(ne.id,{workId:Pe.work.id,focusLabel:he.group.name,customDurationMinutes:Qu(Pe.work,O)}),be+=1})});const ye=Ae(ne.id);if(ye&&h(ne.id,A(ye)),K!=null&&K.includeDiagnostics)if(be>0)M({type:"success",text:`Plan actualizado: +${be} tem${be===1?"":"s"}.`}),window.setTimeout(()=>M(null),2e3);else{const he=pe.filter(Pe=>(Pe.type??"work")!=="note").map(Pe=>{const Ue=Pe.include??[],Xe=Pe.exclude??[],Me=L.filter(ct=>(Ue.length===0?!0:Ue.some(et=>vo(ct.work,et)))?!Xe.some(et=>vo(ct.work,et)):!1),ht=Pe.limitMode==="minutes"||Pe.limitMode==="both"?Math.max(0,Number(Pe.minutesBudget)||0):void 0,it=Pe.limitMode==="count"||Pe.limitMode==="both"?Math.max(0,Math.round(Number(Pe.maxItems)||0)):void 0;return[`${Pe.name}: ${Me.length} match`,typeof ht=="number"?`${ht}m`:null,typeof it=="number"?`${it} items`:null].filter(Boolean).join("  ")}).slice(0,3).join(" | ");M({type:"success",text:he?`No hay nuevos tems para aadir. ${he}`:"No hay nuevos tems para aadir con los lmites actuales."}),window.setTimeout(()=>M(null),4e3)}}finally{Z(!1)}}},[_e,R,$,te,O,re,pe,k,D,c,h,A,Ae,ve]),$e=w.useCallback(()=>{if(_e||!window.confirm("Recrear sesin volver a planificar el da de hoy. Mantendr los tems ya registrados (OK/Dudosa/Fallo) y las notas, pero quitar el resto. Continuar?"))return;const ne=$??te(),H=(ne.workItems??[]).filter(ie=>(ie.completed??!1)||typeof ie.result<"u").map(ie=>{const U=re.get(ie.workId);return U?{...ie,focusLabel:ve(ie,U)}:ie}).sort((ie,U)=>(ie.order??0)-(U.order??0)).map((ie,U)=>({...ie,order:U}));h(ne.id,A(H)),window.setTimeout(()=>je({reason:"recreate",includeDiagnostics:!0}),0)},[A,te,je,_e,ve,$,h,re]);w.useEffect(()=>{R.length===0||(($??te()).workItems??[]).some(ie=>!!ie.focusLabel)||je({reason:"initial-seed"})},[R,$,O,k,D,h,re,pe,fe,ge,te,je]);const Be=(K,ne)=>{try{const H=te(),ie=H.workItems.find(U=>U.workId===K);if(ie)f(H.id,ie.id,{result:ne,completed:!0});else{const U=c(H.id,{workId:K});if(!U)throw new Error("No se pudo aadir el trabajo a la sesin.");f(H.id,U.id,{result:ne,completed:!0})}M({type:"success",text:"Registrado."}),window.setTimeout(()=>M(null),1800)}catch(H){const ie=H instanceof Error?H.message:"No se pudo registrar.";M({type:"error",text:ie}),window.setTimeout(()=>M(null),2500)}},Qe=$?$.workItems.filter(K=>(K.completed??!1)||typeof K.result<"u").length:0,st=w.useMemo(()=>pe.filter(K=>(K.type??"work")==="note"),[pe]),bt=w.useMemo(()=>{const K=($==null?void 0:$.workItems)??[],ne=K.length,H=K.filter(L=>(L.completed??!1)||typeof L.result<"u").length,ie=st.length,U=st.filter(L=>(G[L.id]??"").trim().length>0).length,se=ne+ie,xe=H+U,Ne=se>0?Math.round(xe/se*100):0;return{total:se,done:xe,percent:Ne,totalWorks:ne,doneWorks:H,totalNotes:ie,doneNotes:U}},[G,st,$==null?void 0:$.workItems]),Ft=w.useMemo(()=>{const K=new Map,ne=new Map;return(($==null?void 0:$.workItems)??[]).slice().sort((ie,U)=>(ie.order??0)-(U.order??0)).forEach(ie=>{const U=R.find(he=>he.work.id===ie.workId),se=re.get(ie.workId);if(!se)return;const xe=(ie.completed??!1)||typeof ie.result<"u",Ne={work:se,targetDays:V1(se,I),overdueScore:0,lastSeen:U==null?void 0:U.lastSeen,daysSince:U==null?void 0:U.daysSince,lastResult:U==null?void 0:U.lastResult},L=U??Ne,q=ve(ie,se),be=K.get(q)??[];be.push(L),K.set(q,be);const ye=ne.get(q)??{total:0,done:0};ye.total+=1,xe&&(ye.done+=1),ne.set(q,ye)}),Array.from(K.entries()).map(([ie,U])=>{const se=ne.get(ie)??{total:U.length,done:0};return{label:ie,entries:U,total:se.total,done:se.done}}).sort((ie,U)=>{const se=fe.get(ie.label)??999,xe=fe.get(U.label)??999;return se!==xe?se-xe:ie.label.localeCompare(U.label,"es",{sensitivity:"base"})})},[$==null?void 0:$.workItems,R,re,I,fe,ve]),J=w.useMemo(()=>{const K=new Map(Ft.map(ie=>[ie.label,ie])),ne=new Set,H=[];return pe.forEach(ie=>{if((ie.type??"work")==="note"){H.push({kind:"note",group:ie});return}const U=K.get(ie.name);U&&(ne.add(U.label),H.push({kind:"work",...U}))}),Ft.forEach(ie=>{ne.has(ie.label)||H.push({kind:"work",...ie})}),H},[pe,Ft]),de=K=>{const ne=K.work,H=Qc(ne.tags),ie=H.includes(Ju),U=H.filter(Me=>Me!==Ju),se=(ne.canEdit??!1)&&(ne.nodeType??"").trim().toLowerCase()!=="style",xe=F===ne.id,Ne=T.has(ne.id),L=$==null?void 0:$.workItems.find(Me=>Me.workId===ne.id),q=L==null?void 0:L.result,be=!!((L==null?void 0:L.completed)??!1)||typeof(L==null?void 0:L.result)<"u",ye=(ne.descriptionMarkdown??"").trim(),he=(ne.notes??"").trim(),Pe=(ne.videoUrls??[]).map(Me=>Me.trim()).filter(Boolean),Ue=ye.length>0||he.length>0||Pe.length>0,Xe=async()=>{if(!W){M({type:"error",text:"Inicia sesin para editar trabajos."}),window.setTimeout(()=>M(null),2500);return}if(se){ee(ne.id);try{const Me=ie?U:Array.from(new Set([...U,Ju]));await o(ne.id,{tags:Me},W),M({type:"success",text:ie?"Incluido en el plan personal.":"Excluido del plan personal."}),window.setTimeout(()=>M(null),1800)}catch(Me){console.error("No se pudo actualizar el trabajo",Me),M({type:"error",text:"No se pudo actualizar el trabajo."}),window.setTimeout(()=>M(null),2500)}finally{ee(null)}}};return g.jsxs("article",{className:De("flex flex-col gap-3 rounded-3xl border p-4 shadow shadow-black/15",q?O3[q]:"border-white/10 bg-white/5"),children:[g.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[g.jsxs("div",{className:"space-y-1",children:[g.jsxs("div",{className:"flex items-start gap-3",children:[Ue?g.jsx("button",{type:"button",onClick:()=>B(Me=>{const ht=new Set(Me);return ht.has(ne.id)?ht.delete(ne.id):ht.add(ne.id),ht}),className:De("mt-0.5 inline-flex h-8 w-8 items-center justify-center rounded-full border border-white/15 bg-white/5 text-sm font-semibold text-white/70 transition hover:border-white/30 hover:text-white",Ne?"rotate-90 border-white/30 text-white":""),"aria-label":Ne?"Ocultar detalles":"Ver detalles",title:Ne?"Ocultar detalles":"Ver detalles",children:""}):null,g.jsxs("div",{children:[g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsx("p",{className:"text-lg font-semibold text-white",children:ne.name}),q?g.jsx("span",{className:De("inline-flex items-center rounded-full border px-2 py-0.5 text-[11px] font-semibold",Q0[q]),children:jh[q]}):null]}),ne.subtitle?g.jsx("p",{className:"text-sm text-white/70",children:ne.subtitle}):null]})]}),g.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-[11px] uppercase tracking-wide text-white/40",children:[g.jsx("span",{className:"rounded-full border border-white/15 bg-white/5 px-2 py-0.5 text-[10px] font-semibold text-white/70",children:ne.nodeType??"work"}),U.slice(0,6).map(Me=>g.jsx("span",{className:"rounded-full border border-white/10 px-2 py-0.5",children:Me},Me)),U.length>6?g.jsxs("span",{className:"text-white/50",children:["+",U.length-6]}):null]})]}),g.jsx("div",{className:"flex flex-col items-start gap-2 sm:items-end",children:g.jsxs("div",{className:"rounded-2xl border border-white/10 bg-slate-950/60 px-4 py-3 text-sm text-white/70",children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:"ltima vez"}),g.jsx("p",{className:"mt-1 font-semibold text-white",children:B3(K.lastSeen)}),g.jsxs("p",{className:"mt-1 text-xs text-white/50",children:["Objetivo: ",K.targetDays," da",K.targetDays===1?"":"s"," "," ",K.overdueScore>=1e4?"Nuevo":`${K.overdueScore} vencido`]})]})})]}),Ue&&Ne?g.jsxs("div",{className:"space-y-3 rounded-2xl border border-white/10 bg-slate-950/60 p-4",children:[ye.length>0?g.jsx(Ss,{content:ye,enableWorkLinks:!0}):null,he.length>0?g.jsxs("div",{className:"space-y-2",children:[g.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-white/40",children:"Notas"}),g.jsx(Ss,{content:he,enableWorkLinks:!0})]}):null,Pe.length>0?g.jsxs("div",{className:"space-y-3",children:[g.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-white/40",children:"Vdeos"}),g.jsx("div",{className:"grid gap-4 lg:grid-cols-3",children:Pe.map((Me,ht)=>g.jsxs("div",{className:"space-y-2",children:[g.jsx(Yc,{url:Me,title:`${ne.name} vdeo ${ht+1}`}),g.jsx("a",{href:Me,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-full border border-white/15 bg-white/5 px-3 py-1 text-xs font-medium text-white/80 transition hover:border-white/30 hover:text-white",children:"Abrir en YouTube"})]},`${ne.id}-video-${ht}`))})]}):null]}):null,g.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[g.jsx("div",{className:"flex flex-wrap items-center gap-2",children:Object.keys(jh).map(Me=>g.jsx("button",{type:"button",className:De("inline-flex items-center justify-center rounded-full border px-3 py-1 text-xs font-semibold transition",Q0[Me],q===Me?"ring-2 ring-white/30":"opacity-90 hover:opacity-100"),onClick:()=>Be(ne.id,Me),children:jh[Me]},Me))}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx(ar,{to:`/catalog?workId=${encodeURIComponent(ne.id)}`,className:"btn-secondary",children:"Ver en catlogo"}),$&&L?g.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>{be&&!window.confirm("Este tem ya est marcado/registrado hoy. Quieres quitarlo igualmente de la sesin?")||(v($.id,L.id),M({type:"success",text:"Quitado de la sesin de hoy."}),window.setTimeout(()=>M(null),1800))},title:"Quitar de la sesin de hoy",children:"Quitar"}):null,g.jsx("button",{type:"button",onClick:Xe,disabled:!se||xe,className:De("inline-flex items-center rounded-full border px-4 py-2 text-xs font-semibold transition disabled:opacity-50",ie?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200 hover:border-emerald-400":"border-rose-500/40 bg-rose-500/10 text-rose-200 hover:border-rose-400"),title:ie?"Incluir en el plan personal":"Excluir del plan personal",children:xe?"...":ie?"Incluir":"Excluir"})]})]})]},ne.id)},me=K=>{var Ne;const ne=te(),H=(K??"").trim();if(!H)return;const ie=G[H]??"",U=ie.trim().length===0,se={...ne.notesByGroupId??{}};U?delete se[H]:se[H]=ie;const xe=((Ne=pe.find(L=>(L.type??"work")==="note"))==null?void 0:Ne.id)??H;p(ne.id,{notesByGroupId:Object.keys(se).length>0?se:void 0,notes:se[xe]??""})};return g.jsxs("div",{className:"space-y-6",children:[g.jsxs("header",{className:"glass-panel p-6 sm:p-10",children:[g.jsxs("div",{className:"space-y-3 sm:flex sm:items-start sm:justify-between sm:gap-6 sm:space-y-0",children:[g.jsxs("div",{children:[g.jsx("div",{className:"flex items-center gap-2 text-xs uppercase tracking-[0.3em] text-white/40",children:g.jsx("span",{children:"Fecha"})}),g.jsx("h1",{className:"font-display text-2xl font-semibold text-white sm:text-3xl",children:tt(k).format("dddd, D [de] MMMM")}),g.jsx("p",{className:"text-sm font-medium text-white/80 sm:text-lg",children:($==null?void 0:$.title)??"Entrenamiento personal"})]}),g.jsx("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:g.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-sm text-white/70",children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:"Sesin"}),g.jsxs("p",{className:"mt-1 text-xs text-white/50",children:[Qe," ",Qe===1?"tem registrado":"tems registrados"]}),g.jsxs("p",{className:"mt-2 text-xs text-white/60",children:["Progreso: ",bt.done,"/",bt.total,"  ",bt.percent,"%"]}),g.jsx("div",{className:"mt-2 h-2 w-full overflow-hidden rounded-full border border-white/10 bg-slate-950/50",children:g.jsx("div",{className:"h-full rounded-full bg-white/25",style:{width:`${Math.min(Math.max(bt.percent,0),100)}%`}})})]})})]}),g.jsxs("div",{className:"mt-4 flex flex-col gap-2.5 sm:flex-row sm:flex-wrap sm:items-center sm:justify-between",children:[g.jsxs("div",{className:"flex flex-wrap gap-2",children:[g.jsx(ar,{to:oe?`/personal/sessions?plan=${encodeURIComponent(j)}&session=${encodeURIComponent(oe)}`:"#",className:De("btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold sm:h-10 sm:text-sm",!oe&&"pointer-events-none opacity-40"),"aria-disabled":!oe,tabIndex:oe?0:-1,children:" Anterior"}),g.jsx(ar,{to:X?`/personal/sessions?plan=${encodeURIComponent(j)}&session=${encodeURIComponent(X)}`:"#",className:De("btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold sm:h-10 sm:text-sm",!X&&"pointer-events-none opacity-40"),"aria-disabled":!X,tabIndex:X?0:-1,children:"Siguiente "})]}),g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsx(ar,{to:`/personal/sessions?plan=${encodeURIComponent(j)}`,className:"btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold sm:h-10 sm:text-sm",children:"Ver sesiones"}),g.jsxs(ir,{as:"div",className:"relative",children:[g.jsx(ir.Button,{className:"btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold sm:h-10 sm:text-sm",children:"Plan "}),g.jsx($b,{as:w.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:g.jsxs(ir.Items,{className:"absolute right-0 z-20 mt-2 w-60 rounded-2xl border border-white/10 bg-slate-950/95 p-1 shadow-xl shadow-black/40 focus:outline-none",children:[g.jsx(ir.Item,{children:({active:K})=>g.jsx("button",{type:"button",className:De("w-full rounded-xl px-3 py-2 text-left text-sm font-medium transition",K?"bg-white/10 text-white":"text-white/80",(_e||R.length===0)&&"opacity-50"),onClick:()=>je({reason:"manual-refresh",includeDiagnostics:!0}),disabled:_e||R.length===0,title:"Aade tems si has cambiado la configuracin de grupos o lmites",children:_e?"Actualizando":"Actualizar plan"})}),g.jsx(ir.Item,{children:({active:K})=>g.jsx("button",{type:"button",className:De("w-full rounded-xl px-3 py-2 text-left text-sm font-medium transition",K?"bg-white/10 text-white":"text-white/80",_e&&"opacity-50"),onClick:$e,disabled:_e,title:"Rehace la planificacin de hoy manteniendo lo registrado",children:"Recrear sesin"})})]})})]}),g.jsx(ar,{to:`/settings?plan=${encodeURIComponent(j)}`,className:"btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold sm:h-10 sm:text-sm",children:"Ajustes"})]})]}),Y&&g.jsx("div",{className:De("mt-4 rounded-2xl border px-4 py-3 text-sm",Y.type==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-rose-500/40 bg-rose-500/10 text-rose-200"),children:Y.text})]}),R.length===0?g.jsxs("div",{className:"glass-panel p-10 text-center text-white/50",children:["No hay ningn trabajo incluido en tu programa activo. Aade la tag ",g.jsx("span",{className:"font-semibold text-white",children:"kungfu"})," a los trabajos que quieras entrenar."]}):g.jsx("section",{className:"space-y-4",children:g.jsxs("div",{className:"space-y-3",children:[Ft.length===0?g.jsxs("div",{className:"glass-panel p-10 text-center text-white/50",children:["No hay tems planificados para hoy. Revisa ",g.jsx("span",{className:"font-semibold text-white",children:"Ajustes"})," o marca ms trabajos como entrenables."]}):null,J.map(K=>{if(K.kind==="note"){const U=K.group.id,se=G[U]??"",xe=se.trim().length>0;return g.jsxs("div",{className:"glass-panel space-y-3 p-6",children:[g.jsx("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between",children:g.jsxs("div",{children:[g.jsxs("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:[K.group.name," (",Math.max(0,Number(K.group.minutesBudget)||0)," min)"]}),g.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[g.jsx("span",{className:De("rounded-full border px-3 py-1 text-xs font-semibold",xe?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-white/15 bg-white/5 text-white/60"),children:xe?"OK":"Pendiente"}),g.jsx("p",{className:"text-sm text-white/60",children:"Notas de la sesin  se guarda al salir del campo."})]})]})}),g.jsx("textarea",{className:"input-field min-h-[120px] w-full resize-y",value:se,onChange:Ne=>ae(L=>({...L,[U]:Ne.target.value})),onBlur:()=>me(U),placeholder:"Escribe aqu"})]},K.group.id)}const ne=Math.max(0,K.total),H=Math.min(Math.max(0,K.done),ne),ie=ne>0?Math.round(H/ne*100):0;return g.jsxs("section",{className:"glass-panel space-y-4 p-3 sm:space-y-5 sm:p-6",children:[g.jsx("header",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:g.jsxs("div",{children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:K.label}),g.jsxs("p",{className:"mt-1 text-sm text-white/60",children:[H,"/",ne," tem",ne===1?"":"s","  ",ie,"% completado"]}),g.jsx("div",{className:"mt-2 h-2 w-full overflow-hidden rounded-full border border-white/10 bg-slate-950/50",children:g.jsx("div",{className:"h-full rounded-full bg-white/25",style:{width:`${Math.min(Math.max(ie,0),100)}%`}})})]})}),g.jsx("div",{className:"space-y-3 sm:space-y-4",children:K.entries.map(de)})]},K.label)})]})})]})}function H3(){const e=Te(f=>f.plans),[t,n]=Oo(),r=(t.get("plan")??"").trim(),i=w.useMemo(()=>e.filter(f=>f.enabled),[e]),o=w.useMemo(()=>{const f=[...i];return f.sort((h,p)=>{const v=h.kind===p.kind?0:h.kind==="class"?-1:1;return v!==0?v:h.name.localeCompare(p.name,"es",{sensitivity:"base"})}),f},[i]),l=w.useMemo(()=>o.length===0?void 0:o.find(h=>h.id===r)??o[0],[o,r]),u=(l==null?void 0:l.id)??"classes";w.useEffect(()=>{if(!l||r===l.id)return;const f=new URLSearchParams(t);f.set("plan",l.id),n(f,{replace:!0})},[l,r,t,n]);const c=f=>{const h=new URLSearchParams(t);h.set("plan",f),h.delete("session"),n(h,{replace:!0})};return l?g.jsxs("div",{className:"space-y-6",children:[g.jsx("header",{className:"glass-panel p-6 sm:p-10",children:g.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-3xl font-bold",children:"Sesiones"}),g.jsx("p",{className:"text-white/60",children:"Vista unificada por planes."})]}),g.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(f=>g.jsx("button",{type:"button",onClick:()=>c(f.id),className:De("rounded-full border px-4 py-2 text-sm font-semibold transition",f.id===u?"border-sky-400/70 bg-sky-500/10 text-white":"border-white/10 bg-white/5 text-white/70 hover:border-white/30 hover:text-white"),title:f.kind==="class"?"Plan de clases":"Plan personal",children:f.name},f.id))})]})}),l.kind==="class"?g.jsx(R3,{}):g.jsx(W3,{})]}):g.jsx("div",{className:"glass-panel p-10 text-center text-white/60",children:"No hay planes activos. Ve a Ajustes y crea/activa uno."})}function V3(){return g.jsx(H3,{})}function q3(){const[e]=Oo(),t=new URLSearchParams(e);return t.set("mode","edit"),g.jsx(Ka,{to:{pathname:"/",search:`?${t.toString()}`},replace:!0})}function Nh(e){return Array.from(new Set(e))}function qa({options:e,value:t,onChange:n,disabled:r=!1,placeholder:i="Search",allowCreate:o=!1,onCreate:l,maxSelected:u}){const[c,f]=w.useState(""),h=w.useMemo(()=>Nh(t.map(C=>C.trim()).filter(Boolean)),[t]),p=w.useMemo(()=>new Set(h),[h]),v=w.useMemo(()=>new Map(e.map(C=>[C.value,C])),[e]),y=w.useMemo(()=>{const C=c.trim().toLowerCase();return C?e.filter(_=>(_.label??_.value).toLowerCase().includes(C)||_.value.toLowerCase().includes(C)):e},[e,c]),S=typeof u=="number"?h.length<u:!0,E=c.trim(),k=o&&!!E&&typeof l=="function"&&!e.some(C=>C.value.toLowerCase()===E.toLowerCase())&&!e.some(C=>(C.label??"").toLowerCase()===E.toLowerCase());return g.jsxs("div",{className:De("space-y-2",r&&"opacity-60"),children:[h.length>0?g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[h.map(C=>{var j;const _=((j=v.get(C))==null?void 0:j.label)??C;return g.jsxs("button",{type:"button",disabled:r,className:"inline-flex items-center gap-2 rounded-full border border-sky-500/30 bg-sky-500/10 px-3 py-1 text-xs font-semibold text-sky-100 transition hover:border-sky-400/50",onClick:()=>n(h.filter(I=>I!==C)),title:"Remove",children:[_,g.jsx("span",{className:"text-sky-200/80",children:""})]},C)}),g.jsx("button",{type:"button",disabled:r,className:"rounded-full border border-white/15 bg-white/5 px-3 py-1 text-xs font-semibold text-white/70 transition hover:border-white/30 hover:text-white",onClick:()=>n([]),children:"Clear"})]}):null,g.jsx("input",{type:"text",className:"input-field",value:c,disabled:r,placeholder:i,onChange:C=>f(C.target.value)}),g.jsx("div",{className:"max-h-48 overflow-auto rounded-2xl border border-white/10 bg-white/5 p-2",children:g.jsxs("div",{className:"flex flex-wrap gap-2",children:[k?g.jsxs("button",{type:"button",disabled:r||!S,className:"rounded-full border border-emerald-500/30 bg-emerald-500/10 px-3 py-1 text-xs font-semibold text-emerald-100 transition hover:border-emerald-400/50 disabled:opacity-50",onClick:()=>{const C=(l==null?void 0:l(E))??null;if(!C)return;const _=Nh([...h,C.createdValue]);n(_),f("")},title:"Create",children:["+ Create ",E,""]}):null,y.map(C=>{const _=C.label??C.value,j=p.has(C.value);return g.jsx("button",{type:"button",disabled:r||!j&&!S,className:De("rounded-full border px-3 py-1 text-xs font-semibold transition disabled:opacity-50",j?"border-sky-500/40 bg-sky-500/10 text-sky-100":"border-white/15 bg-white/5 text-white/70 hover:border-white/30 hover:text-white"),onClick:()=>{const I=j?h.filter(O=>O!==C.value):Nh([...h,C.value]);n(I)},children:_},C.value)})]})})]})}const X0={name:"",subtitle:"",objectiveId:"",parentWorkId:"",nodeType:"",tags:[],orderHint:0,nextWorkId:"",variantOfWorkId:"",descriptionMarkdown:"",estimatedMinutes:10,notes:"",videoUrls:[""],visibility:"private",collaborators:[""]},Y3=e=>Array.from(new Set((e??[]).map(t=>t.trim().toLowerCase()).filter(Boolean))),Th="__no_objective__",Y1={private:"Privado",shared:"Compartido",public:"Pblico"},G3={private:"Solo t puedes ver y editar este trabajo.",shared:"Solo las personas que aadas pueden editarlo contigo.",public:"Cualquier persona con acceso al catlogo puede verlo. Solo tus editores pueden cambiarlo."},G1=5,Ra="personal-exclude";function K3({work:e,childCount:t,depth:n,expanded:r,isTreeCollapsed:i,isPersonalExcluded:o,canTogglePersonal:l,personalToggleBusy:u,nextLabel:c,variantLabel:f,onToggle:h,onToggleTree:p,onTogglePersonal:v,onEdit:y,onDuplicate:S,onCreateChild:E,onDelete:k}){var pe;const C=(e.descriptionMarkdown??"").trim(),_=(e.subtitle??"").trim(),j=(e.notes??"").trim(),I=e.videoUrls.filter(fe=>fe.trim().length>0),O=C.length>0,P=_.length>0,$=j.length>0,oe=I.length>0,X=O||$||oe,R=t>0,D=n>0?{marginLeft:`${n*1.5}rem`}:void 0,re=e.visibility??"private",W=Y1[re],Y=((pe=e.collaboratorEmails)==null?void 0:pe.length)??0,M=e.canEdit??!1,G=e.isOwner??!1,ae=(e.ownerEmail??"").trim(),F=(e.nodeType??"").trim(),ee=(e.tags??[]).filter(fe=>fe!==Ra),T=(F||"work").trim().toLowerCase(),B=Te(fe=>{var ge;return(ge=fe.workTaxonomy.nodeTypes.find(Ie=>Ie.key===T))==null?void 0:ge.label}),te=(()=>{const fe={form:"Forma",segment:"Segmento",application:"Aplicacin",technique:"Tcnica",drill:"Drill",style:"Estilo",link:"Link",work:"Trabajo"},ge={form:"border-indigo-500/40 bg-indigo-500/15 text-indigo-100",segment:"border-sky-500/40 bg-sky-500/15 text-sky-100",application:"border-amber-500/40 bg-amber-500/15 text-amber-100",technique:"border-emerald-500/40 bg-emerald-500/15 text-emerald-100",drill:"border-purple-500/40 bg-purple-500/15 text-purple-100",style:"border-white/20 bg-white/10 text-white/70",link:"border-white/20 bg-white/10 text-white/70",work:"border-white/20 bg-white/10 text-white/70"},Ie=B??fe[T]??(F||"Trabajo"),ve=ge[T]??ge.work;return g.jsx("span",{className:De("inline-flex items-center rounded-full border px-3 py-1 text-xs font-semibold",ve),children:Ie})})(),A=(()=>{const fe={form:"border-indigo-500/25",segment:"border-sky-500/25",application:"border-amber-500/25",technique:"border-emerald-500/25",drill:"border-purple-500/25",work:"border-white/10"},ge={form:"bg-indigo-500",segment:"bg-sky-500",application:"bg-amber-500",technique:"bg-emerald-500",drill:"bg-purple-500",work:""},Ie={form:"bg-indigo-400/60",segment:"bg-sky-400/60",application:"bg-amber-400/60",technique:"bg-emerald-400/60",drill:"bg-purple-400/60",work:"bg-white/10"},ve=fe[T]??fe.work,Ae=ge[T]??ge.work,_e=Ie[T]??Ie.work;return{borderClassName:ve,glowClassName:Ae,barClassName:_e}})();return g.jsxs("article",{id:`work-${e.id}`,className:De("group relative space-y-4 rounded-xl border bg-white/5 p-4 pb-5 shadow shadow-black/30",A.borderClassName),style:D,children:[g.jsx("div",{className:De("absolute inset-y-0 left-0 w-1 rounded-r-full",A.barClassName),"aria-hidden":!0}),A.glowClassName?g.jsx("div",{className:De("absolute inset-0 -z-[1] rounded-xl opacity-10 blur-3xl",A.glowClassName)}):null,g.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[g.jsxs("div",{role:X?"button":void 0,tabIndex:X?0:void 0,onClick:()=>{X&&h()},onKeyDown:fe=>{X&&(fe.key==="Enter"||fe.key===" ")&&(fe.preventDefault(),h())},className:De("flex flex-1 items-start gap-3 border border-transparent px-2 py-2 text-left transition",X?"cursor-pointer hover:border-white/10 hover:bg-white/5 focus-visible:border-white/20 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-500/40":"cursor-default"),"aria-expanded":X?r:void 0,children:[R?g.jsx("button",{type:"button",onClick:fe=>{fe.stopPropagation(),p()},className:De("mt-1 inline-flex h-8 w-8 items-center justify-center rounded-full border border-white/15 bg-white/5 text-sm font-semibold text-white/70 transition hover:border-white/30 hover:text-white"),"aria-label":i?"Mostrar trabajos hijos":"Ocultar trabajos hijos",title:i?"Mostrar hijos":"Ocultar hijos",children:i?"":""}):null,X?g.jsx("span",{className:De("mt-1 inline-flex h-8 w-8 items-center justify-center rounded-full border border-white/15 bg-white/5 text-sm font-semibold text-white/70 transition",r?"rotate-90 border-white/30 text-white":""),"aria-hidden":!0,children:""}):null,g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-semibold text-white",children:e.name}),P?g.jsx("p",{className:"text-sm text-white/70",children:_}):null,g.jsxs("p",{className:"text-sm text-white/60",children:[e.estimatedMinutes," minutos"]}),g.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-[11px] uppercase tracking-wide text-white/40",children:[g.jsx("span",{className:"rounded-full border border-white/20 px-2 py-0.5 text-[10px] font-semibold text-white/70",children:W}),ee.slice(0,3).map(fe=>g.jsx("span",{className:"rounded-full border border-white/10 px-2 py-0.5 text-[10px] font-semibold text-white/60",children:fe},fe)),G?g.jsx("span",{children:"Propietario"}):ae?g.jsx("span",{children:ae}):null,Y>0?g.jsxs("span",{children:["+",Y," colaborador",Y===1?"":"es"]}):null,f?g.jsxs("span",{className:"text-white/50",children:["Variante de: ",f]}):null,c?g.jsxs("span",{className:"text-white/50",children:["Siguiente: ",c]}):null,M?null:g.jsx("span",{className:"text-amber-300/80",children:"Solo lectura"})]})]})]}),g.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:justify-end",children:[te,g.jsx("button",{type:"button",onClick:fe=>{fe.stopPropagation(),v()},disabled:!l||u,className:De("inline-flex items-center rounded-full border px-3 py-1 text-xs font-semibold transition disabled:opacity-50",o?"border-rose-500/40 bg-rose-500/10 text-rose-200 hover:border-rose-400":"border-emerald-500/40 bg-emerald-500/10 text-emerald-200 hover:border-emerald-400"),title:o?"Incluir en el plan personal":"Excluir del plan personal",children:u?"...":o?"Fuera":"En plan"}),g.jsxs(ir,{as:"div",className:"relative inline-flex",children:[g.jsxs(ir.Button,{className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-white/20 text-white/70 transition hover:border-white/40 hover:text-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-500/40",children:[g.jsx("span",{className:"sr-only",children:"Abrir acciones"}),g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",className:"h-5 w-5","aria-hidden":"true",children:[g.jsx("circle",{cx:"12",cy:"5",r:"1.5"}),g.jsx("circle",{cx:"12",cy:"12",r:"1.5"}),g.jsx("circle",{cx:"12",cy:"19",r:"1.5"})]})]}),g.jsxs(ir.Items,{className:"absolute right-0 z-10 mt-2 w-44 overflow-hidden rounded-2xl border border-white/10 bg-slate-900/95 p-1 text-sm text-white shadow-lg shadow-black/40 focus:outline-none",children:[g.jsx(ir.Item,{children:({active:fe})=>g.jsx("button",{type:"button",onClick:M?y:void 0,disabled:!M,className:De("flex w-full items-center gap-2 rounded-xl px-3 py-2 text-left disabled:opacity-40",fe&&M?"bg-white/10 text-white":"text-white/70"),children:"Editar"})}),g.jsx(ir.Item,{children:({active:fe})=>g.jsx("button",{type:"button",onClick:M?S:void 0,disabled:!M,className:De("flex w-full items-center gap-2 rounded-xl px-3 py-2 text-left disabled:opacity-40",fe&&M?"bg-white/10 text-white":"text-white/70"),children:"Duplicar"})}),g.jsx(ir.Item,{children:({active:fe})=>g.jsx("button",{type:"button",onClick:M?E:void 0,disabled:!M,className:De("flex w-full items-center gap-2 rounded-xl px-3 py-2 text-left disabled:opacity-40",fe&&M?"bg-white/10 text-white":"text-white/70"),children:"Nuevo hijo"})}),g.jsx(ir.Item,{children:({active:fe})=>g.jsx("button",{type:"button",onClick:G?k:void 0,disabled:!G,className:De("flex w-full items-center gap-2 rounded-xl px-3 py-2 text-left disabled:opacity-40",fe&&G?"bg-rose-500/20 text-rose-100":"text-rose-300"),children:"Eliminar"})})]})]})]})]}),X&&r&&g.jsxs("div",{className:"space-y-4 rounded-2xl border border-white/10 bg-slate-950/60 p-4",children:[O?g.jsx(Ss,{content:e.descriptionMarkdown,enableWorkLinks:!0}):null,$?g.jsx("div",{className:"rounded-2xl border border-dashed border-white/15 bg-white/5 p-3 text-sm text-white/70",children:e.notes}):null,oe?g.jsx("div",{className:"space-y-3",children:g.jsx("div",{className:"grid gap-4 lg:grid-cols-3",children:I.map((fe,ge)=>g.jsxs("div",{className:"space-y-2",children:[g.jsx(Yc,{url:fe,title:`${e.name} vdeo ${ge+1}`}),g.jsx("a",{href:fe,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-full border border-white/20 px-3 py-1 text-xs font-semibold text-white/70 transition hover:border-white/40 hover:text-white",children:"Abrir en YouTube"})]},`${e.id}-video-${ge}`))})}):null]}),g.jsx("button",{type:"button",onClick:M?E:void 0,disabled:!M,className:De("absolute bottom-0 left-1/2 flex -translate-x-1/2 translate-y-1/2 items-center justify-center rounded-full border border-dashed border-white/20 bg-slate-950/80 px-4 py-2 text-sm font-semibold text-white/80 opacity-0 transition hover:border-white/40 hover:text-white focus-visible:opacity-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-500/40 group-hover:opacity-100 pointer-events-none group-hover:pointer-events-auto focus-visible:pointer-events-auto",!M&&"opacity-30"),title:M?R?"Aadir trabajo hijo":"Crear primer trabajo hijo":"No tienes permisos para crear trabajos hijos","aria-label":"Crear trabajo hijo",children:"+"})]})}function J3({form:e,objectiveOptions:t,parentOptions:n,workOptions:r,nodeTypeOptions:i,tagOptions:o,onCreateNodeType:l,onCreateTag:u,depth:c,onFieldChange:f,onVideoChange:h,onAddVideo:p,onRemoveVideo:v,onCollaboratorChange:y,onAddCollaborator:S,onRemoveCollaborator:E,onSave:k,onCancel:C,isNew:_,canEditContent:j,canManageSharing:I,isSaving:O,isOwner:P,ownerEmail:$}){const oe=t.find(M=>M.id===e.objectiveId),X=n.find(M=>M.id===e.parentWorkId),R=r.find(M=>M.id===e.nextWorkId),D=r.find(M=>M.id===e.variantOfWorkId),re=c>0?{marginLeft:`${c*1.5}rem`}:void 0,W=e.id?`work-name-${e.id}`:void 0,Y=e.id?`work-subtitle-${e.id}`:void 0;return g.jsxs("article",{className:"space-y-5 rounded-3xl border border-sky-500/40 bg-slate-950/70 p-5 shadow-lg shadow-sky-500/15",style:re,children:[g.jsxs("header",{className:"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between",children:[g.jsxs("div",{className:"flex-1 space-y-3",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:_?"Nuevo trabajo":"Editando trabajo"}),g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",htmlFor:W,children:"Nombre"}),g.jsx("input",{id:W,type:"text",className:"input-field w-full text-base font-semibold disabled:opacity-60",placeholder:"Nombre descriptivo",value:e.name,onChange:M=>f({name:M.target.value}),disabled:!j})]}),g.jsxs("div",{className:"space-y-1",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",htmlFor:Y,children:"Subttulo (opcional)"}),g.jsx("input",{id:Y,type:"text",className:"input-field w-full disabled:opacity-60",placeholder:"Aade un subttulo breve",value:e.subtitle,onChange:M=>f({subtitle:M.target.value}),disabled:!j})]})]}),g.jsx(Bi,{objective:oe,size:"sm"})]}),j?null:g.jsx("div",{className:"rounded-2xl border border-amber-400/40 bg-amber-500/10 p-3 text-xs text-amber-200",children:"No tienes permisos para editar el contenido de este trabajo. Puedes revisar la informacin y sugerir cambios al propietario."}),g.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Objetivo"}),g.jsxs("select",{className:"input-field disabled:opacity-60",value:e.objectiveId,onChange:M=>f({objectiveId:M.target.value}),disabled:!j,children:[g.jsx("option",{value:"",children:"Selecciona un objetivo"}),t.map(M=>g.jsx("option",{value:M.id,children:M.name},M.id))]})]}),g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Trabajo padre (opcional)"}),g.jsxs("select",{className:"input-field disabled:opacity-60",value:e.parentWorkId,onChange:M=>f({parentWorkId:M.target.value}),disabled:!j,children:[g.jsx("option",{value:"",children:"Sin trabajo padre"}),n.map(M=>g.jsx("option",{value:M.id,children:M.label},M.id))]}),e.parentWorkId&&X?g.jsxs("p",{className:"text-xs text-white/40",children:["Deriva de: ",X.label]}):null]}),g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Duracin estimada (min)"}),g.jsx("input",{type:"number",min:0,className:"input-field disabled:opacity-60",value:e.estimatedMinutes,onChange:M=>f({estimatedMinutes:Number(M.target.value)}),disabled:!j})]})]}),g.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Node type (opcional)"}),g.jsx(qa,{options:i,value:e.nodeType?[e.nodeType]:[],maxSelected:1,onChange:M=>f({nodeType:M[0]??""}),placeholder:"Search node types",disabled:!j,allowCreate:!0,onCreate:M=>{const G=l(M);return G?{createdValue:G,createdLabel:M.trim()}:null}})]}),g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Tags"}),g.jsx(qa,{options:o,value:e.tags??[],onChange:M=>f({tags:M}),placeholder:"Search tags",disabled:!j,allowCreate:!0,onCreate:M=>{const G=u(M);return G?{createdValue:G,createdLabel:G}:null}})]}),g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Order hint (opcional)"}),g.jsx("input",{type:"number",min:0,className:"input-field disabled:opacity-60",value:e.orderHint,onChange:M=>f({orderHint:Number(M.target.value)}),disabled:!j})]}),g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Siguiente (next)"}),g.jsxs("select",{className:"input-field disabled:opacity-60",value:e.nextWorkId,onChange:M=>f({nextWorkId:M.target.value}),disabled:!j,children:[g.jsx("option",{value:"",children:"Sin siguiente"}),r.filter(M=>M.id!==e.id).map(M=>g.jsx("option",{value:M.id,children:M.label},M.id))]}),e.nextWorkId&&R?g.jsxs("p",{className:"text-xs text-white/40",children:["Siguiente: ",R.label]}):null]}),g.jsxs("div",{className:"grid gap-2 sm:col-span-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Variante de (variant_of)"}),g.jsxs("select",{className:"input-field disabled:opacity-60",value:e.variantOfWorkId,onChange:M=>f({variantOfWorkId:M.target.value}),disabled:!j,children:[g.jsx("option",{value:"",children:"Sin base"}),r.filter(M=>M.id!==e.id).map(M=>g.jsx("option",{value:M.id,children:M.label},M.id))]}),e.variantOfWorkId&&D?g.jsxs("p",{className:"text-xs text-white/40",children:["Variante de: ",D.label]}):null]})]}),g.jsxs("section",{className:"space-y-3 rounded-3xl border border-white/10 bg-white/5 p-4",children:[g.jsxs("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-xs uppercase tracking-wide text-white/40",children:"Visibilidad"}),g.jsx("p",{className:"text-sm text-white/60",children:P?"Eres el propietario de este trabajo.":$?`Propietario: ${$}`:""})]}),I?null:g.jsx("p",{className:"text-xs text-amber-300/80",children:"Solo el propietario puede cambiar la visibilidad o los colaboradores."})]}),g.jsx("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:gap-3",children:["private","shared","public"].map(M=>g.jsxs("label",{className:De("inline-flex items-center gap-2 rounded-2xl border px-3 py-2 text-sm transition",e.visibility===M?"border-sky-400/80 bg-sky-400/10 text-white":"border-white/15 text-white/70 hover:border-white/30 hover:text-white",!I&&"opacity-50"),children:[g.jsx("input",{type:"radio",className:"accent-sky-400",checked:e.visibility===M,onChange:()=>f({visibility:M}),disabled:!I}),Y1[M]]},M))}),g.jsx("p",{className:"text-xs text-white/50",children:G3[e.visibility]}),e.visibility==="private"?null:g.jsxs("div",{className:"space-y-2 rounded-2xl border border-white/10 bg-white/5 p-3",children:[g.jsx("p",{className:"text-xs uppercase tracking-wide text-white/40",children:"Colaboradores (edicin)"}),g.jsx("p",{className:"text-xs text-white/50",children:"Aade hasta 5 direcciones de correo. Tendrn permisos de edicin completos."}),g.jsx("div",{className:"space-y-2",children:e.collaborators.map((M,G)=>g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"email",className:"input-field flex-1 disabled:opacity-60",placeholder:"colega@ejemplo.com",value:M,onChange:ae=>y(G,ae.target.value),disabled:!I}),e.collaborators.length>1?g.jsx("button",{type:"button",className:"inline-flex h-9 w-9 items-center justify-center rounded-full border border-rose-500/40 text-rose-300 transition hover:border-rose-400 hover:text-rose-200 disabled:opacity-40",onClick:()=>E(G),"aria-label":"Eliminar colaborador",disabled:!I,children:""}):null]},`collaborator-${G}`))}),g.jsx("button",{type:"button",className:"btn-secondary px-3 py-1 text-xs disabled:opacity-40",onClick:S,disabled:!I||e.collaborators.length>=G1,children:"+ Aadir colaborador"})]})]}),g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Descripcin (Markdown)"}),g.jsx("textarea",{className:"input-field min-h-[140px] disabled:opacity-60",value:e.descriptionMarkdown,onChange:M=>f({descriptionMarkdown:M.target.value}),placeholder:"Usa formato markdown para resaltar puntos importantes.",disabled:!j})]}),g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Notas opcionales"}),g.jsx("textarea",{className:"input-field min-h-[100px] disabled:opacity-60",value:e.notes,onChange:M=>f({notes:M.target.value}),disabled:!j})]}),g.jsxs("div",{className:"space-y-3",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Vdeos de YouTube"}),g.jsx("div",{className:"space-y-3",children:e.videoUrls.map((M,G)=>g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"url",className:"input-field flex-1 disabled:opacity-60",value:M,onChange:ae=>h(G,ae.target.value),placeholder:"https://www.youtube.com/watch?v=...",disabled:!j}),e.videoUrls.length>1?g.jsx("button",{type:"button",className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-rose-500/40 text-rose-300 transition hover:border-rose-400 hover:text-rose-200",onClick:()=>v(G),"aria-label":"Eliminar enlace de vdeo",disabled:!j,children:""}):null]}),g.jsx(Yc,{url:M,title:`Vista previa vdeo ${G+1}`})]},`video-field-${G}`))}),g.jsx("button",{type:"button",className:"btn-secondary px-3 py-1 text-xs disabled:opacity-50",onClick:p,disabled:!j,children:"+ Aadir vdeo"})]}),g.jsxs("div",{className:"flex flex-wrap gap-3 pt-2",children:[g.jsx("button",{type:"button",onClick:k,className:"btn-primary disabled:opacity-60",disabled:O,children:O?"Guardando":"Guardar"}),g.jsx("button",{type:"button",className:"btn-secondary disabled:opacity-50",onClick:C,disabled:O,children:"Cancelar"})]})]})}function Q3(){var Ft;const e=Te(J=>J.works),t=Te(J=>J.objectives),n=Te(J=>J.workTaxonomy),r=Te(J=>J.addWork),i=Te(J=>J.updateWork),o=Te(J=>J.deleteWork),l=Te(J=>J.upsertNodeType),u=Te(J=>J.upsertTag),c=Te(J=>J.worksLoading),f=si(),{user:h}=Ns(),p=w.useMemo(()=>h?{actorId:h.id,actorEmail:h.email??""}:null,[h]),[v,y]=w.useState(""),[S,E]=w.useState(null),[k,C]=w.useState(new Set),[_,j]=w.useState(new Set),[I,O]=w.useState(new Set),[P,$]=w.useState({}),[oe,X]=w.useState(null),[R,D]=w.useState(null),re=w.useMemo(()=>new Map(t.map(J=>[J.id,J])),[t]),W=w.useMemo(()=>[...t].sort((J,de)=>(J.name??"").localeCompare(de.name??"","es")),[t]),Y=w.useMemo(()=>(n.nodeTypes??[]).slice().sort((J,de)=>J.label.localeCompare(de.label,"en",{sensitivity:"base"})).map(J=>({value:J.key,label:J.label})),[n.nodeTypes]),M=w.useMemo(()=>(n.tags??[]).slice().sort((J,de)=>J.name.localeCompare(de.name,"en",{sensitivity:"base"})).map(J=>({value:J.name,label:J.name})),[n.tags]),G=w.useMemo(()=>new Map(e.map(J=>[J.id,J])),[e]),ae=w.useMemo(()=>{const J=new Map;return e.forEach(de=>{const me=de.parentWorkId;if(!me)return;const K=J.get(me)??[];K.push(de),J.set(me,K)}),J.forEach(de=>{de.sort((me,K)=>me.name.localeCompare(K.name,"es",{sensitivity:"base"}))}),J},[e]),F=w.useMemo(()=>{const J=new Map,de=(me,K)=>{if(J.has(me))return J.get(me);const ne=G.get(me);if(!ne)return"";if(!ne.parentWorkId||K.has(me))return J.set(me,ne.name),ne.name;K.add(me);const H=de(ne.parentWorkId,K);K.delete(me);const ie=H?`${H}  ${ne.name}`:ne.name;return J.set(me,ie),ie};return e.forEach(me=>{de(me.id,new Set)}),J},[e,G]);w.useEffect(()=>{const J=f.hash,de="#work-";let me=null;if(J.startsWith(de)&&(me=J.slice(de.length)),!me){const H=new URLSearchParams(f.search);me=H.get("workId")??H.get("work")}if(!me)return;C(H=>{if(H.has(me))return H;const ie=new Set(H);return ie.add(me),ie});const K=document.getElementById(`work-${me}`);if(!K)return;K.scrollIntoView({behavior:"smooth",block:"start"}),K.classList.add("ring-2","ring-sky-500/60");const ne=window.setTimeout(()=>{K.classList.remove("ring-2","ring-sky-500/60")},1500);return()=>{window.clearTimeout(ne),K.classList.remove("ring-2","ring-sky-500/60")}},[f.hash,f.search,e]);const ee=w.useMemo(()=>{const J=new Map,de=me=>{if(J.has(me))return J.get(me);const K=new Set;return(ae.get(me)??[]).forEach(H=>{K.add(H.id),de(H.id).forEach(ie=>K.add(ie))}),J.set(me,K),K};return e.forEach(me=>de(me.id)),J},[e,ae]),T=w.useCallback((J,de)=>{var ne,H;const me=new Set;J&&(me.add(J),(ne=ee.get(J))==null||ne.forEach(ie=>me.add(ie)));const K=e.filter(ie=>!me.has(ie.id)).map(ie=>({id:ie.id,label:(()=>{var xe;const U=F.get(ie.id)??ie.name,se=(xe=re.get(ie.objectiveId))==null?void 0:xe.name;return se?`${se}  ${U}`:U})()})).sort((ie,U)=>ie.label.localeCompare(U.label,"es",{sensitivity:"base"}));if(de&&de.length>0&&!K.some(ie=>ie.id===de)){const ie=G.get(de),U=F.get(de)??(ie==null?void 0:ie.name)??"Trabajo no disponible",se=ie?(H=re.get(ie.objectiveId))==null?void 0:H.name:void 0,xe=se?`${se}  ${U}`:U;K.unshift({id:de,label:xe})}return K},[e,F,ee,G,re]),B=w.useMemo(()=>e.map(J=>{var ne;const de=F.get(J.id)??J.name,me=(ne=re.get(J.objectiveId))==null?void 0:ne.name,K=me?`${me}  ${de}`:de;return{id:J.id,label:K}}).sort((J,de)=>J.label.localeCompare(de.label,"es",{sensitivity:"base"})),[e,F,re]),te=w.useMemo(()=>{const J=v.trim().toLowerCase(),de=ne=>{var Ne;if(!J)return!0;const H=((Ne=re.get(ne.objectiveId))==null?void 0:Ne.name)??"",ie=ne.parentWorkId?F.get(ne.parentWorkId)??"":"",U=ne.id?F.get(ne.id)??"":"",se=(ne.nodeType??"").toLowerCase(),xe=Array.isArray(ne.tags)?ne.tags.join(" "):ne.tags??"";return ne.name.toLowerCase().includes(J)||(ne.subtitle??"").toLowerCase().includes(J)||ne.descriptionMarkdown.toLowerCase().includes(J)||H.toLowerCase().includes(J)||ie.toLowerCase().includes(J)||U.toLowerCase().includes(J)||se.includes(J)||xe.toLowerCase().includes(J)},me=[],K=ne=>{if(!ne)return 0;let H=1,ie=G.get(ne);const U=new Set(ne?[ne]:[]);for(;ie&&ie.parentWorkId;){const se=ie.parentWorkId;if(!se||U.has(se))break;H+=1,U.add(se),ie=G.get(se)}return H};return e.forEach(ne=>{const H=P[ne.id],ie=(H==null?void 0:H.data)??{id:ne.id,name:ne.name,subtitle:ne.subtitle??"",nodeType:ne.nodeType??"",tags:ne.tags??[],descriptionMarkdown:ne.descriptionMarkdown,objectiveId:ne.objectiveId,parentWorkId:ne.parentWorkId??""};!H&&!de(ie)||me.push({id:ne.id,objectiveId:ie.objectiveId,parentWorkId:ie.parentWorkId??"",depth:K(ie.parentWorkId),work:ne,isNew:!1,isEditing:!!H,form:H==null?void 0:H.data})}),Object.entries(P).filter(([,ne])=>ne.isNew).forEach(([ne,H])=>{de(H.data)&&me.push({id:ne,objectiveId:H.data.objectiveId,parentWorkId:H.data.parentWorkId,depth:K(H.data.parentWorkId||void 0),work:void 0,isNew:!0,isEditing:!0,form:H.data})}),me},[e,G,P,re,F,v]),A=w.useCallback(J=>{var ne;const de=(J.isEditing&&J.form?J.form.parentWorkId:J.parentWorkId)??"";if(!de)return!1;let me=de;const K=new Set;for(;me&&!K.has(me);){if(K.add(me),_.has(me))return!0;me=(((ne=G.get(me))==null?void 0:ne.parentWorkId)??"")||""}return!1},[_,G]),pe=w.useMemo(()=>{const J=new Map;te.forEach(H=>{const ie=re.has(H.objectiveId)?H.objectiveId:Th,U=J.get(ie)??[];U.push(H),J.set(ie,U)});const de=H=>{var ie,U;if(H.isEditing&&H.form){const se=H.form.name.trim()||(((ie=H.work)==null?void 0:ie.name)??""),xe=H.form.parentWorkId&&H.form.parentWorkId.length>0?F.get(H.form.parentWorkId)??((U=G.get(H.form.parentWorkId))==null?void 0:U.name)??"":"";return xe?`${xe}  ${se}`:se}return H.work?F.get(H.work.id)??H.work.name:H.id},me=(H,ie)=>{const U=de(H),se=de(ie);return U.localeCompare(se,"es",{sensitivity:"base"})},K=[];W.forEach(H=>{const ie=J.get(H.id);ie&&ie.length&&K.push({objective:H,items:ie.slice().sort(me)})});const ne=J.get(Th);return ne&&ne.length&&K.push({objective:void 0,items:ne.slice().sort(me)}),K},[te,re,W,F,G]),fe=((Ft=W[0])==null?void 0:Ft.id)??"",ge=(J,de)=>{$(me=>{const K=me[J];return K?{...me,[J]:de(K)}:me})},Ie=J=>J.length>0?J:[""],ve=J=>J.length>0?J:[""],Ae=J=>{$(de=>de[J.id]?de:{...de,[J.id]:{data:{id:J.id,name:J.name,subtitle:J.subtitle??"",objectiveId:J.objectiveId,parentWorkId:J.parentWorkId??"",nodeType:J.nodeType??"",tags:J.tags??[],orderHint:J.orderHint??0,nextWorkId:J.nextWorkId??"",variantOfWorkId:J.variantOfWorkId??"",descriptionMarkdown:J.descriptionMarkdown,estimatedMinutes:J.estimatedMinutes,notes:J.notes??"",videoUrls:Ie(J.videoUrls.slice()),visibility:J.visibility??"private",collaborators:ve(J.collaboratorEmails??[])},isNew:!1,originalId:J.id}}),C(de=>{const me=new Set(de);return me.add(J.id),me})},_e=()=>{const J=`draft-${$t()}`;$(de=>({...de,[J]:{data:{...X0,id:J,subtitle:"",objectiveId:fe},isNew:!0}})),C(de=>{const me=new Set(de);return me.add(J),me})},Z=J=>{const de=`draft-${$t()}`;$(me=>({...me,[de]:{data:{id:de,name:`${J.name} (copia)`,subtitle:J.subtitle??"",objectiveId:J.objectiveId,parentWorkId:J.parentWorkId??"",nodeType:J.nodeType??"",tags:J.tags??[],orderHint:J.orderHint??0,nextWorkId:"",variantOfWorkId:"",descriptionMarkdown:J.descriptionMarkdown,estimatedMinutes:J.estimatedMinutes,notes:J.notes??"",videoUrls:Ie(J.videoUrls.slice()),visibility:"private",collaborators:[""]},isNew:!0}})),C(me=>{const K=new Set(me);return K.add(de),K}),E({type:"success",text:"Duplicacin creada. Ajusta y guarda para confirmarla."})},je=J=>{const de=`draft-${$t()}`;$(me=>({...me,[de]:{data:{...X0,id:de,subtitle:"",objectiveId:J.objectiveId,parentWorkId:J.id,estimatedMinutes:J.estimatedMinutes,visibility:J.visibility??"private",collaborators:[""]},isNew:!0}})),C(me=>{const K=new Set(me);return K.add(de),K}),E({type:"success",text:`Creando un trabajo hijo para ${J.name}. Ajusta y guarda para confirmarlo.`})},$e=J=>{C(de=>{const me=new Set(de);return me.has(J)?me.delete(J):me.add(J),me})},Be=J=>{$(de=>{const me={...de};return delete me[J],me}),J.startsWith("draft-")&&C(de=>{const me=new Set(de);return me.delete(J),me})},Qe=async J=>{const de=P[J];if(!de||oe)return;if(!p){E({type:"error",text:"Inicia sesin para guardar este trabajo."});return}const me=(de.data.parentWorkId??"").trim(),K=me.length>0?me:void 0,ne=de.data.nodeType.trim(),H=ne.length>0?ne:void 0,ie=Y3(de.data.tags??[]),U=Number(de.data.orderHint)>0?Number(de.data.orderHint):void 0,se=(de.data.nextWorkId??"").trim(),xe=se.length>0?se:void 0,Ne=(de.data.variantOfWorkId??"").trim(),L=Ne.length>0?Ne:void 0,q={name:de.data.name.trim(),subtitle:de.data.subtitle.trim()||void 0,objectiveId:de.data.objectiveId,nodeType:H,tags:ie,orderHint:U,nextWorkId:xe,variantOfWorkId:L,descriptionMarkdown:de.data.descriptionMarkdown,estimatedMinutes:Number(de.data.estimatedMinutes)||0,notes:de.data.notes.trim()||void 0,videoUrls:de.data.videoUrls.map(he=>he.trim()).filter(Boolean),parentWorkId:K,visibility:de.data.visibility,collaboratorEmails:Array.from(new Set(de.data.collaborators.map(he=>he.trim().toLowerCase()).filter(he=>he.length>0)))};if(!q.name){E({type:"error",text:"El nombre es obligatorio."});return}if(!q.objectiveId){E({type:"error",text:"Selecciona un objetivo para el trabajo."});return}if(q.parentWorkId&&de.originalId){if(q.parentWorkId===de.originalId){E({type:"error",text:"Un trabajo no puede ser su propio padre."});return}const he=ee.get(de.originalId);if(he&&he.has(q.parentWorkId)){E({type:"error",text:"Selecciona un trabajo padre que no sea un descendiente."});return}}if(de.originalId&&q.nextWorkId===de.originalId){E({type:"error",text:"Un trabajo no puede tenerse como siguiente."});return}if(de.originalId&&q.variantOfWorkId===de.originalId){E({type:"error",text:"Un trabajo no puede ser variante de s mismo."});return}const be=de.originalId?G.get(de.originalId):void 0,ye=de.isNew||((be==null?void 0:be.isOwner)??!1);X(J);try{if(de.isNew){const he=await r({name:q.name,subtitle:q.subtitle,objectiveId:q.objectiveId,parentWorkId:q.parentWorkId,nodeType:q.nodeType,tags:q.tags,orderHint:q.orderHint,nextWorkId:q.nextWorkId,variantOfWorkId:q.variantOfWorkId,descriptionMarkdown:q.descriptionMarkdown,estimatedMinutes:q.estimatedMinutes,notes:q.notes,videoUrls:q.videoUrls,visibility:q.visibility,collaboratorEmails:q.collaboratorEmails},p);E({type:"success",text:"Trabajo creado correctamente."}),C(Pe=>{const Ue=new Set(Pe);return Ue.delete(J),Ue.add(he.id),Ue})}else if(de.originalId){const he={name:q.name,subtitle:q.subtitle??null,objectiveId:q.objectiveId,parentWorkId:q.parentWorkId??null,nodeType:q.nodeType??null,tags:q.tags,orderHint:q.orderHint??null,nextWorkId:q.nextWorkId??null,variantOfWorkId:q.variantOfWorkId??null,descriptionMarkdown:q.descriptionMarkdown,estimatedMinutes:q.estimatedMinutes,notes:q.notes??null,videoUrls:q.videoUrls};ye&&(he.visibility=q.visibility,he.collaboratorEmails=q.collaboratorEmails),await i(de.originalId,he,p),E({type:"success",text:"Trabajo actualizado."})}$(he=>{const Pe={...he};return delete Pe[J],Pe})}catch(he){console.error("No se pudo guardar el trabajo",he),E({type:"error",text:"No se han podido guardar los cambios. Comprueba tus permisos e intntalo de nuevo."})}finally{X(null)}},st=async J=>{var me;if(!p){E({type:"error",text:"Inicia sesin para eliminar trabajos."});return}const de=(((me=ee.get(J))==null?void 0:me.size)??0)>0;try{if(!await o(J,p)){E({type:"error",text:de?"No se puede eliminar porque tiene trabajos hijos.":"No se puede eliminar porque est siendo usado en alguna sesin."});return}E({type:"success",text:"Trabajo eliminado."}),$(ne=>{const H={...ne};return delete H[J],H}),C(ne=>{const H=new Set(ne);return H.delete(J),H})}catch(K){console.error("No se pudo eliminar el trabajo",K),E({type:"error",text:"No tienes permisos para eliminar este trabajo o se ha producido un error."})}},bt=async J=>{if(!p){E({type:"error",text:"Inicia sesin para editar trabajos."});return}if(!(J.canEdit??!1)||(J.nodeType??"").trim().toLowerCase()==="style")return;const de=(J.tags??[]).map(ne=>ne.trim().toLowerCase()).filter(Boolean),me=de.includes(Ra),K=me?de.filter(ne=>ne!==Ra):Array.from(new Set([...de,Ra]));D(J.id);try{await i(J.id,{tags:K},p),E({type:"success",text:me?"Incluido en el plan personal.":"Excluido del plan personal."}),window.setTimeout(()=>E(null),1800)}catch(ne){console.error("No se pudo actualizar el trabajo",ne),E({type:"error",text:"No se han podido guardar los cambios. Comprueba tus permisos e intntalo de nuevo."})}finally{D(null)}};return g.jsxs("div",{className:"space-y-6",children:[g.jsxs("header",{className:"glass-panel space-y-4 p-6 sm:p-10",children:[g.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-3xl font-bold",children:"Trabajos"}),g.jsx("p",{className:"max-w-2xl text-white/60",children:"Gestiona los ejercicios reutilizables por objetivo. Duplica, edita y ajusta los detalles sin salir del listado."})]}),g.jsxs("div",{className:"flex w-full flex-col gap-3 sm:w-auto sm:flex-row sm:items-center",children:[g.jsx("input",{type:"search",className:"input-field w-full sm:w-72",value:v,onChange:J=>y(J.target.value),placeholder:"Buscar por nombre, descripcin u objetivo"}),g.jsx(ar,{to:"/catalog/taxonomy",className:"btn-secondary",children:"Taxonomy"}),g.jsx("button",{type:"button",className:"btn-primary",onClick:_e,children:"Nuevo trabajo"}),c?g.jsx("span",{className:"text-xs text-white/60 sm:ml-3",children:"Sincronizando trabajos"}):null]})]}),S&&g.jsx("div",{className:De("rounded-2xl border px-4 py-3 text-sm",S.type==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-rose-500/40 bg-rose-500/10 text-rose-200"),children:S.text})]}),g.jsx("section",{className:"space-y-6",children:pe.length===0?c?g.jsx("div",{className:"glass-panel p-10 text-center text-white/60",children:"Sincronizando trabajos"}):g.jsx("div",{className:"glass-panel p-10 text-center text-white/50",children:"An no hay trabajos guardados. Empieza creando uno con el botn Nuevo trabajo."}):pe.map(({objective:J,items:de})=>{const me=J?J.name:"Sin objetivo asignado",K=(J==null?void 0:J.id)??Th,ne=I.has(K);return g.jsxs("div",{className:"glass-panel space-y-4 p-6",children:[g.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("button",{type:"button",onClick:()=>O(H=>{const ie=new Set(H);return ie.has(K)?ie.delete(K):ie.add(K),ie}),className:"inline-flex h-8 w-8 items-center justify-center rounded-full border border-white/15 bg-white/5 text-sm font-semibold text-white/70 transition hover:border-white/30 hover:text-white","aria-label":ne?"Expandir grupo":"Colapsar grupo",title:ne?"Expandir":"Colapsar",children:ne?"":""}),g.jsx("h3",{className:"text-lg font-semibold text-white",children:me}),g.jsx(Bi,{objective:J,size:"sm"})]}),g.jsxs("span",{className:"rounded-full border border-white/10 px-3 py-1 text-xs text-white/60",children:[de.length," trabajo",de.length===1?"":"s"]})]}),ne?null:g.jsx("div",{className:"space-y-4",children:de.filter(H=>!A(H)).map(H=>{var ye,he,Pe,Ue,Xe,Me,ht;const ie=k.has(H.id),U=(H.isEditing&&H.form?H.form.parentWorkId:H.parentWorkId)??"",se=H.isEditing?T((ye=H.work)==null?void 0:ye.id,U):[],Ne=(H.work?ae.get(H.work.id)??[]:[]).length,L=_.has(H.id);if(H.isEditing&&H.form){const it=H.isNew||(((he=H.work)==null?void 0:he.canEdit)??!1),Mt=H.isNew||(((Pe=H.work)==null?void 0:Pe.isOwner)??!1),ct=H.isNew||(((Ue=H.work)==null?void 0:Ue.isOwner)??!1);return g.jsx(J3,{form:H.form,objectiveOptions:W,parentOptions:se,workOptions:B,nodeTypeOptions:Y,tagOptions:M,onCreateNodeType:l,onCreateTag:u,depth:H.depth,onFieldChange:Je=>ge(H.id,lt=>{const et={...lt.data,...Je};if(Je.parentWorkId!==void 0&&Je.parentWorkId.length>0){const yt=G.get(Je.parentWorkId);yt&&(et.objectiveId=yt.objectiveId)}return Je.visibility==="private"&&(et.collaborators=[""]),{...lt,data:et}}),onVideoChange:(Je,lt)=>ge(H.id,et=>{const yt=et.data.videoUrls.slice();return yt[Je]=lt,{...et,data:{...et.data,videoUrls:yt}}}),onAddVideo:()=>ge(H.id,Je=>({...Je,data:{...Je.data,videoUrls:[...Je.data.videoUrls,""]}})),onRemoveVideo:Je=>ge(H.id,lt=>{const et=lt.data.videoUrls.slice();return et.splice(Je,1),{...lt,data:{...lt.data,videoUrls:et.length?et:[""]}}}),onCollaboratorChange:(Je,lt)=>ge(H.id,et=>{const yt=et.data.collaborators.slice();return yt[Je]=lt,{...et,data:{...et.data,collaborators:yt}}}),onAddCollaborator:()=>ge(H.id,Je=>Je.data.collaborators.length>=G1?Je:{...Je,data:{...Je.data,collaborators:[...Je.data.collaborators,""]}}),onRemoveCollaborator:Je=>ge(H.id,lt=>{const et=lt.data.collaborators.slice();return et.splice(Je,1),et.length||et.push(""),{...lt,data:{...lt.data,collaborators:et}}}),onSave:()=>void Qe(H.id),onCancel:()=>Be(H.id),isNew:H.isNew,canEditContent:it,canManageSharing:Mt,isSaving:oe===H.id,isOwner:ct,ownerEmail:(Xe=H.work)==null?void 0:Xe.ownerEmail},H.id)}if(!H.work)return null;const q=H.work.nextWorkId?F.get(H.work.nextWorkId)??((Me=G.get(H.work.nextWorkId))==null?void 0:Me.name):void 0,be=H.work.variantOfWorkId?F.get(H.work.variantOfWorkId)??((ht=G.get(H.work.variantOfWorkId))==null?void 0:ht.name):void 0;return g.jsx(K3,{work:H.work,childCount:Ne,depth:H.depth,expanded:ie,isTreeCollapsed:L,isPersonalExcluded:(H.work.tags??[]).map(it=>it.trim().toLowerCase()).includes(Ra),canTogglePersonal:(H.work.canEdit??!1)&&(H.work.nodeType??"").trim().toLowerCase()!=="style",personalToggleBusy:R===H.id,nextLabel:q,variantLabel:be,onToggle:()=>$e(H.id),onToggleTree:()=>j(it=>{const Mt=new Set(it);return Mt.has(H.id)?Mt.delete(H.id):Mt.add(H.id),Mt}),onTogglePersonal:()=>{H.work&&bt(H.work)},onEdit:()=>{const it=H.work;it&&(it.canEdit??!1)&&Ae(it)},onDuplicate:()=>{const it=H.work;it&&(it.canEdit??!1)&&Z(it)},onCreateChild:()=>{const it=H.work;it&&(it.canEdit??!1)&&je(it)},onDelete:()=>{const it=H.work;it&&(it.isOwner??!1)&&st(it.id)}},H.id)})})]},(J==null?void 0:J.id)??"sin-objetivo")})})]})}function Z0(e){return e.reduce((t,n)=>(t[n]=(t[n]??0)+1,t),{})}function X3(){const{works:e,workTaxonomy:t,upsertNodeType:n,removeNodeType:r,upsertTag:i,removeTag:o}=Te(k=>({works:k.works,workTaxonomy:k.workTaxonomy,upsertNodeType:k.upsertNodeType,removeNodeType:k.removeNodeType,upsertTag:k.upsertTag,removeTag:k.removeTag})),[l,u]=w.useState(""),[c,f]=w.useState(""),[h,p]=w.useState(null),v=w.useMemo(()=>{const k=e.map(C=>(C.nodeType??"").trim().toLowerCase()).filter(Boolean);return Z0(k)},[e]),y=w.useMemo(()=>{const k=e.flatMap(C=>(C.tags??[]).map(_=>_.trim().toLowerCase()).filter(Boolean));return Z0(k)},[e]),S=t.nodeTypes.slice().sort((k,C)=>k.label.localeCompare(C.label,"en",{sensitivity:"base"})),E=t.tags.slice().sort((k,C)=>k.name.localeCompare(C.name,"en",{sensitivity:"base"}));return g.jsxs("div",{className:"space-y-6",children:[g.jsx("header",{className:"flex flex-wrap items-start justify-between gap-4 rounded-3xl border border-white/10 bg-white/5 px-6 py-5",children:g.jsxs("div",{children:[g.jsx("p",{className:"font-display text-2xl font-semibold",children:"Taxonomy"}),g.jsx("p",{className:"mt-1 text-sm text-white/60",children:"Node types and tags used across the catalog and personal planning."}),g.jsx("p",{className:"mt-2 text-sm",children:g.jsx(ar,{to:"/catalog",className:"text-sky-300 hover:text-sky-200",children:" Back to Catalog"})})]})}),h?g.jsx("div",{className:`rounded-2xl border px-4 py-3 text-sm ${h.type==="success"?"border-emerald-500/30 bg-emerald-500/10 text-emerald-100":"border-rose-500/30 bg-rose-500/10 text-rose-100"}`,children:h.text}):null,g.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[g.jsxs("section",{className:"rounded-3xl border border-white/10 bg-white/5 p-6",children:[g.jsx("div",{className:"flex items-start justify-between gap-4",children:g.jsxs("div",{children:[g.jsx("h2",{className:"text-lg font-semibold",children:"Node types"}),g.jsx("p",{className:"mt-1 text-sm text-white/60",children:"Used by works and group rules. Keys are stored in works."})]})}),g.jsxs("div",{className:"mt-5 flex flex-col gap-3 sm:flex-row sm:items-end",children:[g.jsxs("div",{className:"flex-1",children:[g.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-white/50",children:"New node type"}),g.jsx("input",{className:"input-field mt-2",value:l,onChange:k=>u(k.target.value),placeholder:"e.g. Dance figures"})]}),g.jsx("button",{type:"button",className:"btn-primary",onClick:()=>{const k=n(l);if(!k){p({type:"error",text:"Please enter a valid node type."});return}u(""),p({type:"success",text:`Node type created: ${k}`})},children:"Add"})]}),g.jsxs("div",{className:"mt-6 space-y-2",children:[S.map(k=>{const C=(v[k.key]??0)>0;return g.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 rounded-2xl border border-white/10 bg-slate-950/30 px-4 py-3",children:[g.jsxs("div",{children:[g.jsx("p",{className:"font-semibold text-white",children:k.label}),g.jsxs("p",{className:"text-xs text-white/50",children:["key: ",g.jsx("span",{className:"font-mono",children:k.key}),"  used by ",v[k.key]??0," works"]})]}),g.jsx("button",{type:"button",disabled:C,className:"rounded-full border border-white/15 bg-white/5 px-3 py-2 text-xs font-semibold text-white/70 transition hover:border-white/30 hover:text-white disabled:opacity-50",title:C?"Cannot delete: in use":"Delete",onClick:()=>{const _=r(k.key);p(_?{type:"success",text:`Node type removed: ${k.key}`}:{type:"error",text:"Cannot remove node type (it may be in use)."})},children:"Delete"})]},k.key)}),S.length===0?g.jsx("p",{className:"text-sm text-white/60",children:"No node types yet."}):null]})]}),g.jsxs("section",{className:"rounded-3xl border border-white/10 bg-white/5 p-6",children:[g.jsx("div",{className:"flex items-start justify-between gap-4",children:g.jsxs("div",{children:[g.jsx("h2",{className:"text-lg font-semibold",children:"Tags"}),g.jsx("p",{className:"mt-1 text-sm text-white/60",children:"Lowercase slugs (spaces become hyphens). Deleting is blocked if used."})]})}),g.jsxs("div",{className:"mt-5 flex flex-col gap-3 sm:flex-row sm:items-end",children:[g.jsxs("div",{className:"flex-1",children:[g.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-white/50",children:"New tag"}),g.jsx("input",{className:"input-field mt-2",value:c,onChange:k=>f(k.target.value),placeholder:"e.g. bei-shaolin"})]}),g.jsx("button",{type:"button",className:"btn-primary",onClick:()=>{const k=i(c);if(!k){p({type:"error",text:"Please enter a valid tag."});return}f(""),p({type:"success",text:`Tag created: ${k}`})},children:"Add"})]}),g.jsxs("div",{className:"mt-6 space-y-2",children:[E.map(k=>{const C=(y[k.name]??0)>0;return g.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 rounded-2xl border border-white/10 bg-slate-950/30 px-4 py-3",children:[g.jsxs("div",{children:[g.jsx("p",{className:"font-semibold text-white",children:k.name}),g.jsxs("p",{className:"text-xs text-white/50",children:["used by ",y[k.name]??0," works"]})]}),g.jsx("button",{type:"button",disabled:C,className:"rounded-full border border-white/15 bg-white/5 px-3 py-2 text-xs font-semibold text-white/70 transition hover:border-white/30 hover:text-white disabled:opacity-50",title:C?"Cannot delete: in use":"Delete",onClick:()=>{const _=o(k.name);p(_?{type:"success",text:`Tag removed: ${k.name}`}:{type:"error",text:"Cannot remove tag (it may be in use)."})},children:"Delete"})]},k.name)}),E.length===0?g.jsx("p",{className:"text-sm text-white/60",children:"No tags yet."}):null]})]})]})]})}const Ih={name:"",colorHex:"#60a5fa",descriptionMarkdown:""},ew=["#F97316","#FB7185","#F43F5E","#EC4899","#D946EF","#A855F7","#8B5CF6","#6366F1","#4F46E5","#3B82F6","#38BDF8","#0EA5E9","#06B6D4","#14B8A6","#0D9488","#10B981","#22C55E","#65A30D","#84CC16","#A3E635","#FACC15","#FBBF24","#F59E0B","#EA580C","#C2410C","#E11D48","#EF4444","#F87171","#FB923C","#F472B6","#FDE047","#7C3AED"];function Z3(){const e=Te(E=>E.objectives),t=Te(E=>E.addObjective),n=Te(E=>E.updateObjective),r=Te(E=>E.deleteObjective),i=Te(E=>E.works),[o,l]=w.useState(Ih),[u,c]=w.useState(null),f=w.useMemo(()=>{const E=new Map;return i.forEach(k=>{E.set(k.objectiveId,(E.get(k.objectiveId)??0)+1)}),E},[i]),h=w.useMemo(()=>[...e].sort((E,k)=>(E.name??"").localeCompare(k.name??"","es")),[e]),p=E=>{if(E.preventDefault(),!o.name.trim()){c({type:"error",text:"El nombre es obligatorio."});return}const k={name:o.name.trim(),colorHex:o.colorHex,descriptionMarkdown:o.descriptionMarkdown};o.id?(n(o.id,k),c({type:"success",text:"Objetivo actualizado."})):(t(k),c({type:"success",text:"Objetivo creado."})),l(Ih)},v=E=>{l({id:E.id,name:E.name,colorHex:E.colorHex,descriptionMarkdown:E.descriptionMarkdown})},y=E=>{const k=r(E);c(k?{type:"success",text:"Objetivo eliminado."}:{type:"error",text:"No se puede eliminar porque tiene trabajos asociados."})},S=()=>{if(e.length===0){c({type:"error",text:"No hay objetivos a los que asignar colores."});return}const E=[...ew];e.map((C,_)=>{const j=E[_%E.length];return{id:C.id,colorHex:j}}).forEach(({id:C,colorHex:_})=>n(C,{colorHex:_})),c({type:"success",text:"Colores repartidos equitativamente entre los objetivos."})};return g.jsxs("div",{className:"space-y-6",children:[g.jsxs("header",{className:"glass-panel p-6 sm:p-10",children:[g.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-3xl font-bold",children:"Objetivos"}),g.jsx("p",{className:"text-white/60",children:"Define categoras de trabajo con color y contexto para identificar visualmente cada ejercicio."})]}),g.jsx("div",{className:"flex flex-wrap gap-3",children:g.jsx("button",{type:"button",className:"btn-secondary",onClick:S,children:"Repartir colores"})})]}),u&&g.jsx("div",{className:`mt-4 rounded-2xl border px-4 py-3 text-sm ${u.type==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-rose-500/40 bg-rose-500/10 text-rose-200"}`,children:u.text})]}),g.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.1fr_1.5fr]",children:[g.jsxs("section",{className:"glass-panel p-6",children:[g.jsx("h2",{className:"text-xl font-semibold text-white",children:o.id?"Editar objetivo":"Nuevo objetivo"}),g.jsxs("form",{className:"mt-4 space-y-4",onSubmit:p,children:[g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Nombre"}),g.jsx("input",{type:"text",className:"input-field",value:o.name,onChange:E=>l(k=>({...k,name:E.target.value})),placeholder:"Ej. Resistencia, Tcnica, Juego",required:!0})]}),g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Color identificativo"}),g.jsxs("div",{className:"flex flex-wrap gap-3",children:[g.jsx("input",{type:"color",className:"h-12 w-12 cursor-pointer rounded-full border border-white/20 bg-transparent",value:o.colorHex,onChange:E=>l(k=>({...k,colorHex:E.target.value})),"aria-label":"Elegir color personalizado"}),g.jsx("input",{type:"text",className:"input-field max-w-[140px]",value:o.colorHex,onChange:E=>l(k=>({...k,colorHex:E.target.value})),placeholder:"#60a5fa","aria-label":"Cdigo hex del color"})]}),g.jsx("div",{className:"grid grid-cols-8 gap-2 rounded-3xl border border-white/10 bg-white/5 p-3",children:ew.map(E=>g.jsx("button",{type:"button",onClick:()=>l(k=>({...k,colorHex:E})),className:De("relative flex h-9 w-9 items-center justify-center rounded-full border border-white/20 transition hover:scale-105 focus:outline-none focus:ring-2 focus:ring-white/60",o.colorHex.toLowerCase()===E.toLowerCase()&&"ring-2 ring-white/80 ring-offset-2 ring-offset-slate-900"),style:{backgroundColor:E},"aria-label":`Seleccionar color ${E}`,children:o.colorHex.toLowerCase()===E.toLowerCase()&&g.jsx("span",{className:"text-xs font-semibold text-slate-900",children:""})},E))})]}),g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Descripcin (Markdown)"}),g.jsx("textarea",{className:"input-field min-h-[140px]",value:o.descriptionMarkdown,onChange:E=>l(k=>({...k,descriptionMarkdown:E.target.value})),placeholder:"Explica cundo usar este tipo de trabajo, objetivos pedaggicos, etc."})]}),g.jsxs("div",{className:"flex gap-3",children:[g.jsx("button",{type:"submit",className:"btn-primary",children:o.id?"Guardar objetivo":"Crear objetivo"}),o.id&&g.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>l(Ih),children:"Cancelar edicin"})]})]})]}),g.jsx("section",{className:"space-y-6",children:h.length===0?g.jsx("div",{className:"glass-panel p-10 text-center text-white/50",children:"An no has creado objetivos. Crea uno con el formulario para clasificarlos por color y descripcin."}):h.map(E=>g.jsxs("div",{className:"glass-panel space-y-4 p-6",children:[g.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[g.jsx(Bi,{objective:E}),g.jsxs("div",{className:"flex items-center gap-3 text-xs text-white/60",children:[g.jsxs("span",{children:[f.get(E.id)??0," trabajos"]}),g.jsx("button",{type:"button",className:"btn-secondary px-3 py-1 text-xs",onClick:()=>v(E),children:"Editar"}),g.jsx("button",{type:"button",className:"inline-flex items-center justify-center rounded-full border border-rose-500/40 px-3 py-1 text-xs font-semibold text-rose-300",onClick:()=>y(E.id),children:"Eliminar"})]})]}),g.jsx(Ss,{content:E.descriptionMarkdown})]},E.id))})]})]})}const Ph={name:"",notes:"",active:!0};function e5(){const e=Te(h=>h.assistants),t=Te(h=>h.addAssistant),n=Te(h=>h.updateAssistant),r=Te(h=>h.deleteAssistant),[i,o]=w.useState(Ph),[l,u]=w.useState(null),c=h=>{if(h.preventDefault(),!i.name.trim()){u({type:"error",text:"El nombre es obligatorio."});return}const p={name:i.name.trim(),notes:i.notes,active:i.active};i.id?(n(i.id,p),u({type:"success",text:"Asistente actualizado."})):(t(p),u({type:"success",text:"Asistente aadido."})),o(Ph)},f=h=>{o({id:h.id,name:h.name,notes:h.notes??"",active:h.active})};return g.jsxs("div",{className:"space-y-6",children:[g.jsxs("header",{className:"glass-panel p-6 sm:p-10",children:[g.jsx("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:g.jsxs("div",{children:[g.jsx("h1",{className:"text-3xl font-bold",children:"Asistentes"}),g.jsx("p",{className:"text-white/60",children:"Mantn una lista base de alumnado para registrar asistencia rpidamente durante cada sesin."})]})}),l&&g.jsx("div",{className:De("mt-4 rounded-2xl border px-4 py-3 text-sm",l.type==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-rose-500/40 bg-rose-500/10 text-rose-200"),children:l.text})]}),g.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.1fr_1.5fr]",children:[g.jsxs("section",{className:"glass-panel p-6",children:[g.jsx("h2",{className:"text-xl font-semibold text-white",children:i.id?"Editar asistente":"Nuevo asistente"}),g.jsxs("form",{className:"mt-4 space-y-4",onSubmit:c,children:[g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Nombre"}),g.jsx("input",{type:"text",className:"input-field",value:i.name,onChange:h=>o(p=>({...p,name:h.target.value})),placeholder:"Nombre y apellidos",required:!0})]}),g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Notas"}),g.jsx("textarea",{className:"input-field min-h-[120px]",value:i.notes,onChange:h=>o(p=>({...p,notes:h.target.value})),placeholder:"Observaciones, nivel, lesiones, etc."})]}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("input",{id:"assistant-active",type:"checkbox",className:"h-5 w-5 rounded border border-white/20 bg-white/10 text-sky-400",checked:i.active,onChange:h=>o(p=>({...p,active:h.target.checked}))}),g.jsx("label",{htmlFor:"assistant-active",className:"text-sm text-white/70",children:"Activo (aparecer en los listados de asistencia)"})]}),g.jsxs("div",{className:"flex gap-3",children:[g.jsx("button",{type:"submit",className:"btn-primary",children:i.id?"Guardar asistente":"Aadir asistente"}),i.id&&g.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>o(Ph),children:"Cancelar edicin"})]})]})]}),g.jsx("section",{className:"space-y-4",children:e.length===0?g.jsx("div",{className:"glass-panel p-10 text-center text-white/50",children:"Todava no tienes asistentes guardados. Crea uno desde el formulario para empezar a marcar asistencia en sesiones."}):e.map(h=>g.jsxs("div",{className:"glass-panel flex flex-col gap-4 p-6 sm:flex-row sm:items-start sm:justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-lg font-semibold text-white",children:h.name}),h.notes?g.jsx("p",{className:"text-sm text-white/60",children:h.notes}):null]}),g.jsxs("div",{className:"flex flex-col items-start gap-3 sm:items-end",children:[g.jsx("span",{className:De("rounded-full border px-3 py-1 text-xs font-semibold",h.active?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-white/20 bg-white/5 text-white/60"),children:h.active?"Activo":"Inactivo"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{type:"button",className:"btn-secondary px-3 py-1 text-xs",onClick:()=>f(h),children:"Editar"}),g.jsx("button",{type:"button",className:"inline-flex items-center justify-center rounded-full border border-rose-500/40 px-3 py-1 text-xs font-semibold text-rose-300",onClick:()=>r(h.id),children:"Eliminar"})]})]})]},h.id))})]})]})}function ho(e,t){return g.jsxs("div",{className:"flex items-center justify-between rounded-2xl border border-white/10 bg-white/5 px-4 py-2 text-sm text-white/70",children:[g.jsx("span",{children:e}),g.jsx("span",{className:"font-semibold text-white",children:t})]},e)}function t5(){var c,f,h,p,v,y;const e=Te(S=>S.exportBackup),t=Te(S=>S.importBackup),[n,r]=w.useState(null),[i,o]=w.useState(null),l=()=>{try{const S=e(),E=new Blob([JSON.stringify(S,null,2)],{type:"application/json"}),k=URL.createObjectURL(E),C=document.createElement("a");C.href=k,C.download=`sport-planner-backup-${new Date().toISOString().slice(0,10)}.json`,C.click(),URL.revokeObjectURL(k),r({type:"success",text:"Backup exportado correctamente."})}catch(S){console.error(S),r({type:"error",text:"No se pudo exportar el backup."})}},u=async S=>{var k;const E=(k=S.target.files)==null?void 0:k[0];if(E)try{const C=await E.text(),_=JSON.parse(C);t(_),o(_),r({type:"success",text:"Datos importados correctamente."})}catch(C){console.error(C),r({type:"error",text:"No se pudo importar el archivo. Revisa que sea un JSON vlido."})}finally{S.target.value=""}};return g.jsxs("div",{className:"space-y-6",children:[g.jsxs("header",{className:"glass-panel p-6 sm:p-10",children:[g.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-3xl font-bold",children:"Backups"}),g.jsx("p",{className:"text-white/60",children:"Exporta e importa toda tu informacin en JSON versionado para compartir o restaurar en cualquier momento."})]}),g.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row",children:[g.jsx("button",{type:"button",className:"btn-primary",onClick:l,children:"Descargar backup"}),g.jsxs("label",{className:"btn-secondary cursor-pointer",children:["Importar backup",g.jsx("input",{type:"file",accept:"application/json",className:"hidden",onChange:u})]})]})]}),n&&g.jsx("div",{className:`mt-4 rounded-2xl border px-4 py-3 text-sm ${n.type==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-rose-500/40 bg-rose-500/10 text-rose-200"}`,children:n.text})]}),i&&g.jsxs("section",{className:"glass-panel space-y-4 p-6",children:[g.jsx("h2",{className:"text-xl font-semibold text-white",children:"ltima importacin"}),g.jsxs("p",{className:"text-sm text-white/60",children:["Versin del backup: ",i.version]}),g.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[ho("Objetivos",((c=i.objetivos)==null?void 0:c.length)??0),ho("Trabajos",((f=i.trabajos)==null?void 0:f.length)??0),ho("Sesiones",((h=i.sesiones)==null?void 0:h.length)??0),ho("Asistentes",((p=i.asistentes)==null?void 0:p.length)??0),ho("Sesiones  Trabajos",((v=i.sesiones_trabajos)==null?void 0:v.length)??0),ho("Sesiones  Asistencias",((y=i.sesiones_asistencias)==null?void 0:y.length)??0)]})]}),g.jsxs("section",{className:"glass-panel space-y-3 p-6 text-sm text-white/70",children:[g.jsx("h2",{className:"text-lg font-semibold text-white",children:"Consejos"}),g.jsxs("ul",{className:"list-disc space-y-2 pl-5",children:[g.jsx("li",{children:"Guarda tus backups en un servicio en la nube para poder restaurarlos desde cualquier dispositivo."}),g.jsx("li",{children:"Antes de importar, realiza una exportacin por seguridad. La restauracin sobrescribe los datos actuales sin posibilidad de deshacer."}),g.jsx("li",{children:"Los backups mantienen los IDs, as que puedes sincronizar manualmente varias instalaciones si lo necesitas."})]})]})]})}function n5(){const{signInWithPassword:e,signUpWithPassword:t,session:n,loading:r}=Ns(),[i,o]=w.useState("login"),[l,u]=w.useState(""),[c,f]=w.useState(""),[h,p]=w.useState(""),[v,y]=w.useState(!1),[S,E]=w.useState(null),[k,C]=w.useState(null);if(!r&&n)return g.jsx(Ka,{to:"/",replace:!0});const _=async I=>{if(I.preventDefault(),E(null),C(null),!l||!c){E("Introduce tu email y contrasea.");return}if(i==="register"&&c!==h){E("Las contraseas no coinciden.");return}try{y(!0),i==="login"?await e(l,c):(await t(l,c),C("Revisa tu correo para confirmar la cuenta y vuelve a iniciar sesin."))}catch(O){const P=O instanceof Error?O.message:"No se pudo completar la operacin.";E(P)}finally{y(!1)}},j=()=>{o(I=>I==="login"?"register":"login"),E(null),C(null),f(""),p("")};return g.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-950 px-4 py-12",children:g.jsxs("div",{className:"w-full max-w-md rounded-3xl border border-white/10 bg-slate-900/80 p-8 shadow-2xl backdrop-blur",children:[g.jsxs("header",{className:"mb-8 text-center",children:[g.jsx("div",{className:"mx-auto mb-4 flex h-14 w-14 items-center justify-center rounded-full bg-gradient-to-br from-sky-500 to-indigo-500 text-xl font-bold text-white",children:"SP"}),g.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-white",children:i==="login"?"Inicia sesin":"Crea tu cuenta"}),g.jsx("p",{className:"mt-2 text-sm text-white/60",children:"Accede a tus planes desde cualquier dispositivo con Supabase."})]}),g.jsxs("form",{className:"space-y-5",onSubmit:_,children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{htmlFor:"email",className:"block text-xs font-semibold uppercase tracking-wide text-white/50",children:"Email"}),g.jsx("input",{id:"email",type:"email",required:!0,className:"input-field w-full",value:l,onChange:I=>u(I.target.value),placeholder:"tu@correo.com",autoComplete:"email"})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{htmlFor:"password",className:"block text-xs font-semibold uppercase tracking-wide text-white/50",children:"Contrasea"}),g.jsx("input",{id:"password",type:"password",required:!0,className:"input-field w-full",value:c,onChange:I=>f(I.target.value),autoComplete:i==="login"?"current-password":"new-password"})]}),i==="register"&&g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{htmlFor:"confirmPassword",className:"block text-xs font-semibold uppercase tracking-wide text-white/50",children:"Confirmar contrasea"}),g.jsx("input",{id:"confirmPassword",type:"password",required:!0,className:"input-field w-full",value:h,onChange:I=>p(I.target.value),autoComplete:"new-password"})]}),S&&g.jsx("div",{className:"rounded-xl border border-red-500/30 bg-red-500/10 px-4 py-3 text-sm text-red-200",children:S}),k&&g.jsx("div",{className:"rounded-xl border border-emerald-500/30 bg-emerald-500/10 px-4 py-3 text-sm text-emerald-200",children:k}),g.jsx("button",{type:"submit",className:"btn-primary w-full justify-center",disabled:v,children:v?"Procesando":i==="login"?"Entrar":"Crear cuenta"})]}),g.jsx("footer",{className:"mt-6 text-center text-sm text-white/60",children:i==="login"?g.jsx("button",{type:"button",className:"text-sky-300 hover:text-sky-200",onClick:j,children:"No tienes cuenta? Regstrate"}):g.jsx("button",{type:"button",className:"text-sky-300 hover:text-sky-200",onClick:j,children:"Ya tienes cuenta? Inicia sesin"})})]})})}tt.locale("es");function r5(){const e=Te(I=>I.plans),[t,n]=Oo(),r=(t.get("plan")??"").trim(),i=w.useMemo(()=>e.filter(I=>I.kind==="personal"&&I.enabled),[e]),o=w.useMemo(()=>i.length===0?void 0:i.find(O=>O.id===r)??i[0],[i,r]),l=(o==null?void 0:o.id)??"personal-kungfu";w.useEffect(()=>{if(!o||r===o.id)return;const I=new URLSearchParams(t);I.set("plan",o.id),n(I,{replace:!0})},[o,r,t,n]);const u=Te(I=>I.sessions).filter(I=>I.kind==="personal"&&(I.planId??"personal-kungfu")===l),c=Te(I=>I.works),f=Te(I=>I.objectives),h=Te(I=>I.assistants),p=Te(I=>I.addSession),v=w.useMemo(()=>[...u].sort((I,O)=>tt(O.date).valueOf()-tt(I.date).valueOf()),[u]),y=t.get("session")??void 0,S=y?u.find(I=>I.id===y):void 0,[E,k]=w.useState(S==null?void 0:S.id);w.useEffect(()=>{if(y&&!u.some(I=>I.id===y)){k(void 0);const I=new URLSearchParams(t);I.delete("session"),n(I,{replace:!0})}},[y,u,t,n]);const C=E?u.find(I=>I.id===E):void 0,_=I=>{k(I);const O=new URLSearchParams(t);O.set("session",I),O.set("plan",l),n(O,{replace:!0})},j=()=>{const I=tt().format("YYYY-MM-DD"),O=u.find($=>$.date===I);if(O){_(O.id);return}const P=p({date:I,kind:"personal",planId:l,title:(o==null?void 0:o.name)??"Entrenamiento personal",description:"",notes:""});_(P.id)};return g.jsxs("div",{className:"space-y-6",children:[g.jsx("header",{className:"glass-panel p-6 sm:p-10",children:g.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[g.jsxs("div",{children:[g.jsxs("h1",{className:"text-3xl font-bold",children:[(o==null?void 0:o.name)??"Personal","  Sesiones"]}),g.jsx("p",{className:"text-white/60",children:"Histrico y edicin de sesiones para este plan."})]}),g.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row",children:[g.jsx(ar,{to:`/personal?plan=${encodeURIComponent(l)}`,className:"btn-secondary",children:"Volver a hoy"}),g.jsx(ar,{to:`/settings?plan=${encodeURIComponent(l)}`,className:"btn-secondary",children:"Ajustes"}),g.jsx("button",{type:"button",className:"btn-primary",onClick:j,children:"Crear/abrir hoy"})]})]})}),g.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.1fr_1.9fr]",children:[g.jsxs("section",{className:"glass-panel space-y-3 p-6",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("h2",{className:"text-lg font-semibold text-white",children:"Sesiones"}),g.jsx("span",{className:"rounded-full border border-white/10 px-3 py-1 text-xs text-white/60",children:v.length})]}),v.length===0?g.jsx("div",{className:"rounded-2xl border border-dashed border-white/15 bg-white/5 p-6 text-sm text-white/50",children:"No hay sesiones personales todava. Crea la sesin de hoy para empezar a registrar tu entrenamiento."}):g.jsx("div",{className:"space-y-2",children:v.map(I=>{const O=I.workItems.filter(P=>(P.completed??!1)||typeof P.result<"u").length;return g.jsxs("button",{type:"button",onClick:()=>_(I.id),className:De("flex w-full flex-col gap-1 rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-left transition hover:border-white/30 hover:bg-white/10",I.id===E&&"border-sky-400/60 bg-sky-500/10 shadow shadow-sky-500/10"),children:[g.jsx("p",{className:"text-sm font-semibold text-white",children:I.title||"Sesin sin ttulo"}),g.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:tt(I.date).format("ddd  D MMM YYYY")}),g.jsxs("p",{className:"text-xs text-white/60",children:[O,"/",I.workItems.length," registrados"]})]},I.id)})})]}),g.jsx("section",{className:"glass-panel p-6",children:C?g.jsx(H1,{session:C,works:c,objectives:f,assistants:h}):g.jsx("div",{className:"rounded-2xl border border-dashed border-white/15 bg-white/5 p-10 text-center text-white/50",children:"Selecciona una sesin para verla y editarla."})})]})]})}const Tp=e=>Array.from(new Set((e??[]).map(t=>t.trim().toLowerCase()).filter(Boolean))),K1=e=>Array.from(new Set(e.split(",").map(t=>t.trim()).filter(Boolean))),J1=e=>(e??[]).join(", ");function tw(e){const t=Tp(e.byTags),n=Tp(e.byNodeTypes),r=K1(J1(e.byWorkIds)),i={};return t&&t.length>0&&(i.byTags=t),n&&n.length>0&&(i.byNodeTypes=n),r&&r.length>0&&(i.byWorkIds=r),i}function i5(e){const t={};Object.entries(e.targetsDays??{}).forEach(([r,i])=>{const o=r.trim().toLowerCase(),l=Number(i);o&&Number.isFinite(l)&&(t[o]=Math.max(1,Math.round(l)))});const n=(e.overrides??[]).map(r=>{var i;return{match:{tagsAny:Tp(((i=r.match)==null?void 0:i.tagsAny)??[])},multiplier:Math.max(.1,Number(r.multiplier)||1)}}).filter(r=>r.match.tagsAny.length>0);return{targetsDays:t,overrides:n}}function s5(e){var _,j,I;const t=Math.max(1,Math.round(Number(e.maxItems)||12)),n=Math.max(1,Number(e.minutesBudget)||30),r={};Object.entries(e.defaultMinutesByNodeType??{}).forEach(([O,P])=>{const $=O.trim().toLowerCase(),oe=Number(P);$&&Number.isFinite(oe)&&(r[$]=Math.max(.25,oe))});const i=O=>O==="count"||O==="minutes"||O==="both",o=O=>O==="work"||O==="note",l=O=>O==="overdue"||O==="weighted",u=O=>O==="allow_all"||O==="prefer_leaves",c=O=>{if(!Array.isArray(O))return[];const P=O.map($=>Number($)).filter($=>Number.isFinite($)).map($=>Math.round($)).filter($=>$>=0&&$<=6);return Array.from(new Set(P)).sort(($,oe)=>$-oe)},f=(O,P)=>{const $=(O.id??"").trim()||$t(),oe=o(O.type)?O.type:"work",X=typeof O.enabled=="boolean"?O.enabled:!0,R=Number.isFinite(Number(O.order))?Number(O.order):P,D=(O.name??"").trim()||(oe==="note"?"Recap":"Grupo"),re=i(O.limitMode)?O.limitMode:"minutes",W=Number.isFinite(Number(O.maxItems))?Math.max(0,Math.round(Number(O.maxItems))):void 0,Y=Number.isFinite(Number(O.minutesBudget))?Math.max(0,Number(O.minutesBudget)):void 0,M=l(O.strategy)?O.strategy:"overdue",G=u(O.hierarchyRule)?O.hierarchyRule:"allow_all",ae=(O.include??[]).map(tw).filter(ee=>Object.keys(ee).length>0),F=(O.exclude??[]).map(tw).filter(ee=>Object.keys(ee).length>0);return{id:$,name:D,enabled:X,order:R,type:oe,daysOfWeek:c(O.daysOfWeek),limitMode:re,maxItems:W,minutesBudget:Y,strategy:M,hierarchyRule:G,include:ae,exclude:F}},p=((e.groups??[]).length>0?e.groups??[]:[{id:"formas",name:"Formas",enabled:!0,order:1,type:"work",limitMode:"minutes",minutesBudget:18,strategy:"overdue",hierarchyRule:"prefer_leaves",include:[{byNodeTypes:["segment","form"]}],exclude:[]},{id:"tecnicas",name:"Tcnicas",enabled:!0,order:2,type:"work",limitMode:"minutes",minutesBudget:10,strategy:"weighted",hierarchyRule:"allow_all",include:[{byNodeTypes:["technique"]},{byTags:["roulette"]}],exclude:[]},{id:"recap",name:"Recap",enabled:!0,order:99,type:"note",limitMode:"minutes",minutesBudget:2}]).map((O,P)=>f(O,P+1)).sort((O,P)=>O.order-P.order).map((O,P)=>({...O,order:P+1})),v=p.filter(O=>(O.type??"work")!=="note"),y=p.filter(O=>O.type==="note"),S=Math.max(0,Number((_=v[0])==null?void 0:_.minutesBudget)||0),E=Math.max(0,Number((j=v[1])==null?void 0:j.minutesBudget)||0),k=Math.max(0,Number((I=y[0])==null?void 0:I.minutesBudget)||0),C=Math.max(0,S+E+k);return{limitMode:e.limitMode,maxItems:t,minutesBudget:n,template:{totalMinutes:C,focusMinutes:S,rouletteMinutes:E,recapMinutes:k},defaultMinutesByNodeType:r,focusSelectors:[],rouletteSelectors:[],groups:p}}const o5={},nw=[{label:"L",value:1},{label:"M",value:2},{label:"X",value:3},{label:"J",value:4},{label:"V",value:5},{label:"S",value:6},{label:"D",value:0}];function rw(){const e=Te(Z=>Z.kungfuCadence),t=Te(Z=>Z.kungfuTodayPlan),n=Te(Z=>Z.plans),r=Te(Z=>Z.workTaxonomy),i=Te(Z=>Z.upsertNodeType),o=Te(Z=>Z.upsertTag),l=Te(Z=>Z.addPlan),u=Te(Z=>Z.updatePlan),c=Te(Z=>Z.duplicatePlan),f=Te(Z=>Z.deletePlan),h=Te(Z=>Z.setKungfuCadence),p=Te(Z=>Z.setKungfuTodayPlan),[v,y]=Oo(),S=(v.get("plan")??"").trim(),E=w.useMemo(()=>{const Z=[...n];return Z.sort((je,$e)=>{const Be=je.kind===$e.kind?0:je.kind==="class"?-1:1;return Be!==0?Be:je.name.localeCompare($e.name,"es",{sensitivity:"base"})}),Z},[n]),k=w.useMemo(()=>E.length===0?void 0:E.find(je=>je.id===S)??E[0],[E,S]),C=(k==null?void 0:k.id)??"personal-kungfu",_=(k==null?void 0:k.cadence)??e,j=(k==null?void 0:k.todayPlan)??t,[I,O]=w.useState((k==null?void 0:k.name)??"Plan"),[P,$]=w.useState((k==null?void 0:k.enabled)??!0),[oe,X]=w.useState(_),[R,D]=w.useState(j),[re,W]=w.useState(null),[Y,M]=w.useState([]),[G,ae]=w.useState("personal");w.useEffect(()=>{if(k){if(S!==k.id){const Z=new URLSearchParams(v);Z.set("plan",k.id),y(Z,{replace:!0})}O(k.name),$(k.enabled),k.kind==="personal"?(X(k.cadence??e),D(k.todayPlan??t)):(X(e),D(t))}},[k,S,v,y,e,t]);const F=w.useMemo(()=>{if(!k)return!1;const Z=k.name!==I||k.enabled!==P;return k.kind!=="personal"?Z:Z||JSON.stringify(_)!==JSON.stringify(oe)||JSON.stringify(j)!==JSON.stringify(R)},[k,_,j,I,P,oe,R]),ee=Z=>{W(Z),Z&&window.setTimeout(()=>W(null),Z.type==="success"?1800:2600)},T=()=>{try{const Z={name:I.trim()||(k==null?void 0:k.name)||"Plan",enabled:P};if((k==null?void 0:k.kind)==="personal"){const je=i5(oe),$e=s5(R);u(C,{...Z,cadence:je,todayPlan:$e}),C==="personal-kungfu"&&(h(je),p($e))}else u(C,Z);ee({type:"success",text:"Guardado."})}catch(Z){const je=Z instanceof Error?Z.message:"No se pudo guardar.";ee({type:"error",text:je})}},B=()=>{k&&(O(k.name),$(k.enabled)),X(_),D(j),ee({type:"success",text:"Cambios descartados."})},te=w.useMemo(()=>(r.nodeTypes??[]).slice().sort((Z,je)=>Z.label.localeCompare(je.label,"en",{sensitivity:"base"})).map(Z=>({value:Z.key,label:Z.label})),[r.nodeTypes]),A=w.useMemo(()=>(r.tags??[]).slice().sort((Z,je)=>Z.name.localeCompare(je.name,"en",{sensitivity:"base"})).map(Z=>({value:Z.name,label:Z.name})),[r.tags]),pe=w.useMemo(()=>new Map(nw.map(Z=>[Z.value,Z.label])),[]),fe=w.useCallback((Z,je)=>{M($e=>{const Be=$e.includes(Z),Qe=typeof je=="boolean"?je:!Be;return Qe===Be?$e:Qe?[...$e,Z]:$e.filter(st=>st!==Z)})},[]),ge=w.useCallback(()=>{const Z=$t();D(je=>{const $e=[...je.groups??[]].sort((st,bt)=>(st.order??0)-(bt.order??0)),Be={id:Z,name:"Nuevo grupo",enabled:!0,order:$e.length+1,type:"work",daysOfWeek:[],limitMode:"minutes",maxItems:12,minutesBudget:5,strategy:"overdue",hierarchyRule:"allow_all",include:[],exclude:[]},Qe=[...$e,Be].map((st,bt)=>({...st,order:bt+1}));return{...je,groups:Qe}}),fe(Z,!0)},[fe]),Ie=Z=>{const je=new URLSearchParams(v);je.set("plan",Z),y(je,{replace:!0})},ve=()=>{const Z=l({kind:G,name:G==="class"?"Clases":"Personal"});Ie(Z.id),ee({type:"success",text:"Plan creado."})},Ae=()=>{if(!k)return;const Z=c(k.id);if(!Z){ee({type:"error",text:"No se pudo duplicar el plan."});return}Ie(Z.id),ee({type:"success",text:"Plan duplicado."})},_e=()=>{if(!k||!window.confirm(`Eliminar el plan "${k.name}"? (No se borrarn sesiones)`))return;if(!f(k.id)){ee({type:"error",text:"No se pudo eliminar. Puede ser un plan protegido o tener sesiones asociadas."});return}const $e=E.find(Be=>Be.id!==k.id);$e&&Ie($e.id),ee({type:"success",text:"Plan eliminado."})};return g.jsxs("div",{className:"space-y-6",children:[g.jsxs("header",{className:"glass-panel p-6 sm:p-10",children:[g.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-3xl font-bold",children:"Ajustes  Planes"}),g.jsx("p",{className:"text-white/60",children:"Configura planes (personales y clases) y sus reglas."})]}),g.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-end",children:[g.jsxs("div",{className:"flex flex-wrap items-center justify-end gap-2",children:[g.jsxs("select",{className:"input-field h-10 w-[9.5rem] rounded-2xl px-3 text-sm",value:G,onChange:Z=>ae(Z.target.value),title:"Tipo del nuevo plan",children:[g.jsx("option",{value:"personal",children:"Personal"}),g.jsx("option",{value:"class",children:"Clases"})]}),g.jsx("button",{type:"button",className:"btn-secondary",onClick:ve,children:"Nuevo"}),g.jsx("button",{type:"button",className:"btn-secondary",onClick:Ae,disabled:!k,children:"Duplicar"}),g.jsx("button",{type:"button",className:"btn-secondary",onClick:_e,disabled:!k,children:"Eliminar"})]}),g.jsxs("div",{className:"flex gap-3",children:[F?g.jsx("button",{type:"button",className:"btn-secondary",onClick:B,children:"Descartar"}):null,g.jsx("button",{type:"button",className:"btn-primary",onClick:T,disabled:!F,children:"Guardar"})]})]})]}),g.jsx("div",{className:"mt-5 flex flex-wrap gap-2",children:E.map(Z=>g.jsx("button",{type:"button",onClick:()=>Ie(Z.id),className:De("rounded-full border px-4 py-2 text-sm font-semibold transition",Z.id===(k==null?void 0:k.id)?"border-sky-400/70 bg-sky-500/10 text-white":"border-white/10 bg-white/5 text-white/70 hover:border-white/30 hover:text-white"),title:Z.kind==="class"?"Plan de clases":"Plan personal",children:Z.name},Z.id))}),re?g.jsx("div",{className:De("mt-4 rounded-2xl border px-4 py-3 text-sm",re.type==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-rose-500/40 bg-rose-500/10 text-rose-200"),children:re.text}):null]}),g.jsxs("section",{className:"glass-panel space-y-5 p-6",children:[g.jsxs("div",{className:"grid gap-4 sm:grid-cols-[1fr_auto] sm:items-end",children:[g.jsxs("label",{className:"grid gap-2",children:[g.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:"Nombre del plan"}),g.jsx("input",{type:"text",className:"input-field",value:I,onChange:Z=>O(Z.target.value)})]}),g.jsxs("label",{className:"flex items-center justify-between gap-3 rounded-2xl border border-white/10 bg-white/5 px-4 py-3",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm font-semibold text-white/80",children:"Plan activo"}),g.jsx("p",{className:"text-xs text-white/50",children:(k==null?void 0:k.kind)==="class"?"Clases":"Personal"})]}),g.jsx("input",{type:"checkbox",className:"h-5 w-5 accent-sky-400",checked:P,onChange:Z=>$(Z.target.checked)})]})]}),(k==null?void 0:k.kind)==="class"?g.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 text-sm text-white/70",children:[g.jsx("p",{className:"font-semibold text-white/80",children:"Este plan es de tipo Clases."}),g.jsxs("p",{className:"mt-1 text-white/60",children:["Por ahora, los grupos automticos (cadencias + Plan de hoy) solo aplican a planes personales. Para clases, planifica desde ",g.jsx("span",{className:"font-semibold text-white",children:"Sesiones"})," en modo Editar."]})]}):null]}),(k==null?void 0:k.kind)!=="personal"?null:g.jsxs(g.Fragment,{children:[g.jsxs("section",{className:"glass-panel space-y-5 p-6",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-xl font-semibold text-white",children:"Plan de hoy"}),g.jsx("p",{className:"text-sm text-white/60",children:"Controla cuntos tems se sugieren y el presupuesto de minutos."})]}),g.jsxs("div",{className:"grid gap-4 sm:grid-cols-3",children:[g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Modo de lmite"}),g.jsxs("select",{className:"input-field",value:R.limitMode,onChange:Z=>D(je=>({...je,limitMode:Z.target.value})),children:[g.jsx("option",{value:"count",children:"Por cantidad"}),g.jsx("option",{value:"minutes",children:"Por minutos"}),g.jsx("option",{value:"both",children:"Cantidad y minutos"})]})]}),g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Mx. tems"}),g.jsx("input",{type:"number",min:1,className:"input-field",value:R.maxItems,onChange:Z=>D(je=>({...je,maxItems:Number(Z.target.value)}))})]}),g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Presupuesto (min)"}),g.jsx("input",{type:"number",min:1,className:"input-field",value:R.minutesBudget,onChange:Z=>D(je=>({...je,minutesBudget:Number(Z.target.value)}))})]})]}),g.jsxs("div",{className:"space-y-4 rounded-3xl border border-white/10 bg-white/5 p-5",children:[g.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-semibold text-white",children:"Grupos"}),g.jsx("p",{className:"text-sm text-white/60",children:"Define bloques con reglas, das de la semana y lmites."})]}),g.jsx("button",{type:"button",className:"btn-secondary",onClick:ge,children:"+ Grupo"})]}),g.jsx("div",{className:"space-y-4",children:[...R.groups??[]].sort((Z,je)=>(Z.order??0)-(je.order??0)).map((Z,je,$e)=>{const Be=Z.type??"work",Qe=Z.daysOfWeek??[],st=Qe.length===0,bt=Z.limitMode??"minutes",Ft=Z.strategy??"overdue",J=Z.hierarchyRule??"allow_all",de=Y.includes(Z.id),me=st?"Todos":Qe.map(L=>pe.get(L)??String(L)).filter(Boolean).join(" "),K=(()=>{const L=Math.max(0,Math.round(Number(Z.maxItems??0))),q=Math.max(0,Number(Z.minutesBudget??0));return bt==="count"?`${L} tems`:bt==="minutes"?`${q} min`:`${L} tems  ${q} min`})(),ne=(Z.include??[]).length,H=(Z.exclude??[]).length,ie=L=>{D(q=>{const ye=[...q.groups??[]].sort((he,Pe)=>(he.order??0)-(Pe.order??0)).map(he=>he.id===Z.id?{...he,...L}:he).map((he,Pe)=>({...he,order:Pe+1}));return{...q,groups:ye}})},U=L=>{D(q=>{const be=[...q.groups??[]].sort((Xe,Me)=>(Xe.order??0)-(Me.order??0)),ye=be.findIndex(Xe=>Xe.id===Z.id),he=ye+L;if(ye<0||he<0||he>=be.length)return q;const Pe=be.slice(),Ue=Pe[ye];return Pe[ye]=Pe[he],Pe[he]=Ue,{...q,groups:Pe.map((Xe,Me)=>({...Xe,order:Me+1}))}})},se=()=>{D(L=>{const be=[...L.groups??[]].sort((ye,he)=>(ye.order??0)-(he.order??0)).filter(ye=>ye.id!==Z.id).map((ye,he)=>({...ye,order:he+1}));return{...L,groups:be.length>0?be:L.groups}}),M(L=>L.filter(q=>q!==Z.id))},xe=()=>{const L=$t();D(q=>{const be=[...q.groups??[]].sort((Xe,Me)=>(Xe.order??0)-(Me.order??0)),ye=be.findIndex(Xe=>Xe.id===Z.id);if(ye<0)return q;const he=(Z.name??"").trim()||"Grupo",Pe={...Z,id:L,name:`${he} (copia)`},Ue=be.slice();return Ue.splice(ye+1,0,Pe),{...q,groups:Ue.map((Xe,Me)=>({...Xe,order:Me+1}))}}),fe(L,!0)},Ne=(L,q)=>{const be=Z[L]??[];ie({[L]:q(be)})};return g.jsxs("div",{className:"rounded-3xl border border-white/10 bg-slate-950/40",children:[g.jsxs("div",{className:"flex flex-col gap-3 p-4 sm:flex-row sm:items-center sm:justify-between",children:[g.jsxs("div",{className:"flex flex-1 flex-wrap items-center gap-3",children:[g.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>fe(Z.id),"aria-expanded":de,title:de?"Colapsar":"Expandir",children:de?"":""}),g.jsxs("div",{className:"min-w-[240px] flex-1",children:[g.jsx("p",{className:"text-sm font-semibold text-white",children:(Z.name??"").trim()||"Grupo"}),g.jsxs("p",{className:"text-xs text-white/50",children:[Be==="note"?"Nota":"Trabajos","  ",me,"  ",K,Be==="work"?`  ${Ft==="weighted"?"Ruleta":"Cadencia"}`:"",Be==="work"?`  Incluye:${ne||""} Excluye:${H||""}`:""]})]}),g.jsx("span",{className:De("rounded-full border px-3 py-1 text-xs font-semibold",Z.enabled?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-white/15 bg-white/5 text-white/60"),children:Z.enabled?"Enabled":"Disabled"})]}),g.jsxs("div",{className:"flex items-center justify-end gap-2",children:[g.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>U(-1),disabled:je===0,title:"Subir",children:""}),g.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>U(1),disabled:je===$e.length-1,title:"Bajar",children:""}),g.jsx("button",{type:"button",className:"btn-secondary",onClick:xe,title:"Duplicar",children:"Duplicar"}),g.jsx("button",{type:"button",className:"btn-secondary",onClick:se,disabled:$e.length<=1,children:"Eliminar"})]})]}),de?g.jsx("div",{className:"border-t border-white/10 p-5",children:g.jsx("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:g.jsxs("div",{className:"flex flex-1 flex-col gap-3",children:[g.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[g.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-white/70",children:[g.jsx("input",{type:"checkbox",className:"accent-sky-400",checked:Z.enabled,onChange:L=>ie({enabled:L.target.checked})}),"Enabled"]}),g.jsx("input",{type:"text",className:"input-field flex-1",value:Z.name,onChange:L=>ie({name:L.target.value}),placeholder:"Nombre del grupo"}),g.jsxs("select",{className:"input-field w-36",value:Be,onChange:L=>ie({type:L.target.value}),children:[g.jsx("option",{value:"work",children:"Trabajos"}),g.jsx("option",{value:"note",children:"Nota"})]})]}),g.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:"Das"}),g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsx("button",{type:"button",className:De("rounded-full border px-3 py-1 text-xs font-semibold transition",st?"border-sky-500/40 bg-sky-500/10 text-sky-100":"border-white/15 bg-white/5 text-white/70 hover:border-white/30 hover:text-white"),onClick:()=>ie({daysOfWeek:[]}),title:"Vaco = todos los das",children:"Todos"}),nw.map(L=>{const q=st?!0:Qe.includes(L.value);return g.jsx("button",{type:"button",className:De("h-8 w-8 rounded-full border text-xs font-semibold transition",q?"border-emerald-500/40 bg-emerald-500/10 text-emerald-100":"border-white/15 bg-white/5 text-white/70 hover:border-white/30 hover:text-white"),onClick:()=>{const be=st?[L.value]:Qe.includes(L.value)?Qe.filter(ye=>ye!==L.value):[...Qe,L.value];ie({daysOfWeek:be.sort((ye,he)=>ye-he)})},title:q?"Activo":"Inactivo",children:L.label},L.value)})]}),g.jsx("p",{className:"text-xs text-white/50",children:"Si eliges das especficos, solo aparecer esos das."})]}),g.jsxs("div",{className:"grid gap-3 sm:grid-cols-3",children:[g.jsxs("label",{className:"grid gap-1",children:[g.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:"Lmite"}),g.jsxs("select",{className:"input-field",value:bt,onChange:L=>ie({limitMode:L.target.value}),children:[g.jsx("option",{value:"count",children:"Cantidad"}),g.jsx("option",{value:"minutes",children:"Minutos"}),g.jsx("option",{value:"both",children:"Ambos"})]})]}),g.jsxs("label",{className:"grid gap-1",children:[g.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:"Mx tems"}),g.jsx("input",{type:"number",min:0,className:"input-field",value:Z.maxItems??0,onChange:L=>ie({maxItems:Number(L.target.value)})})]}),g.jsxs("label",{className:"grid gap-1",children:[g.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:"Mx min"}),g.jsx("input",{type:"number",min:0,className:"input-field",value:Z.minutesBudget??0,onChange:L=>ie({minutesBudget:Number(L.target.value)})})]})]})]}),Be==="work"?g.jsxs("div",{className:"mt-2 grid gap-4 lg:grid-cols-2",children:[g.jsxs("label",{className:"grid gap-1",children:[g.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:"Estrategia"}),g.jsxs("select",{className:"input-field",value:Ft,onChange:L=>ie({strategy:L.target.value}),children:[g.jsx("option",{value:"overdue",children:"Vencido (cadencia)"}),g.jsx("option",{value:"weighted",children:"Ponderado (ruleta)"})]})]}),g.jsxs("label",{className:"flex items-center gap-2 text-sm text-white/70",children:[g.jsx("input",{type:"checkbox",className:"accent-sky-400",checked:J==="prefer_leaves",onChange:L=>ie({hierarchyRule:L.target.checked?"prefer_leaves":"allow_all"})}),"Preferir hijos (evita padres cuando existan)"]})]}):null,Be==="work"?g.jsx("div",{className:"mt-4 grid gap-5 lg:grid-cols-2",children:["include","exclude"].map(L=>g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("p",{className:"text-sm font-semibold text-white/80",children:L==="include"?"Include (OR)":"Exclude (OR)"}),g.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>Ne(L,q=>[...q,{...o5}]),children:"+ Regla"})]}),(Z[L]??[]).length===0?g.jsx("p",{className:"text-xs text-white/50",children:L==="include"?"Vaco = incluye todo (se aplican excludes).":"Vaco = no excluye nada."}):null,(Z[L]??[]).map((q,be)=>g.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:["Regla ",be+1]}),g.jsx("button",{type:"button",className:"text-xs font-semibold text-rose-200 hover:text-rose-100",onClick:()=>Ne(L,ye=>ye.filter((he,Pe)=>Pe!==be)),children:"Quitar"})]}),g.jsxs("div",{className:"mt-3 grid gap-3",children:[g.jsxs("label",{className:"grid gap-1",children:[g.jsx("span",{className:"text-xs text-white/50",children:"Tags (AND)"}),g.jsx(qa,{options:A,value:q.byTags??[],onChange:ye=>Ne(L,he=>{const Pe=[...he];return Pe[be]={...Pe[be],byTags:ye},Pe}),placeholder:"Search tags",allowCreate:!0,onCreate:ye=>{const he=o(ye);return he?{createdValue:he,createdLabel:he}:null}})]}),g.jsxs("label",{className:"grid gap-1",children:[g.jsx("span",{className:"text-xs text-white/50",children:"Node types"}),g.jsx(qa,{options:te,value:q.byNodeTypes??[],onChange:ye=>Ne(L,he=>{const Pe=[...he];return Pe[be]={...Pe[be],byNodeTypes:ye},Pe}),placeholder:"Search node types",allowCreate:!0,onCreate:ye=>{const he=i(ye);return he?{createdValue:he,createdLabel:ye.trim()}:null}})]}),g.jsxs("label",{className:"grid gap-1",children:[g.jsx("span",{className:"text-xs text-white/50",children:"Work IDs"}),g.jsx("input",{type:"text",className:"input-field",value:J1(q.byWorkIds),placeholder:"id1, id2",onChange:ye=>{const he=K1(ye.target.value);Ne(L,Pe=>{const Ue=[...Pe];return Ue[be]={...Ue[be],byWorkIds:he},Ue})}})]})]})]},`${L}-${Z.id}-${be}`))]},`${Z.id}-${L}`))}):null]})})}):null]},Z.id)})})]}),g.jsxs("details",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[g.jsx("summary",{className:"cursor-pointer text-sm font-semibold text-white/80",children:"Estimacin de minutos por tipo"}),g.jsx("div",{className:"mt-3 grid gap-3 sm:grid-cols-2",children:Object.entries(R.defaultMinutesByNodeType).sort(([Z],[je])=>Z.localeCompare(je,"es",{sensitivity:"base"})).map(([Z,je])=>g.jsxs("label",{className:"grid gap-2",children:[g.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:Z}),g.jsx("input",{type:"number",min:.25,step:.25,className:"input-field",value:je,onChange:$e=>D(Be=>({...Be,defaultMinutesByNodeType:{...Be.defaultMinutesByNodeType,[Z]:Number($e.target.value)}}))})]},Z))})]})]}),g.jsxs("section",{className:"glass-panel space-y-5 p-6",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-xl font-semibold text-white",children:"Cadencias"}),g.jsx("p",{className:"text-sm text-white/60",children:"Objetivo de das por tipo, con overrides por tags."})]}),g.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:Array.from(new Set([...Object.keys(oe.targetsDays??{}),...(r.nodeTypes??[]).map(Z=>Z.key)])).map(Z=>Z.trim().toLowerCase()).filter(Boolean).sort((Z,je)=>Z.localeCompare(je,"en",{sensitivity:"base"})).map(Z=>{var Be;const je=((Be=(r.nodeTypes??[]).find(Qe=>Qe.key===Z))==null?void 0:Be.label)??Z,$e=(oe.targetsDays??{})[Z]??(oe.targetsDays??{}).work??7;return g.jsxs("label",{className:"grid gap-2",children:[g.jsxs("span",{className:"text-xs uppercase tracking-wide text-white/40",children:[je," ",g.jsxs("span",{className:"text-white/30",children:["(",Z,")"]})]}),g.jsx("input",{type:"number",min:1,className:"input-field",value:$e,onChange:Qe=>X(st=>({...st,targetsDays:{...st.targetsDays,[Z]:Number(Qe.target.value)}}))})]},Z)})}),g.jsxs("details",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[g.jsx("summary",{className:"cursor-pointer text-sm font-semibold text-white/80",children:"Overrides"}),g.jsxs("div",{className:"mt-3 space-y-3",children:[(oe.overrides??[]).map((Z,je)=>g.jsxs("div",{className:"rounded-2xl border border-white/10 bg-slate-950/40 p-4",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:["Override ",je+1]}),g.jsx("button",{type:"button",className:"text-xs font-semibold text-rose-200 hover:text-rose-100",onClick:()=>X($e=>({...$e,overrides:($e.overrides??[]).filter((Be,Qe)=>Qe!==je)})),children:"Quitar"})]}),g.jsxs("div",{className:"mt-3 grid gap-3 sm:grid-cols-2",children:[g.jsxs("label",{className:"grid gap-1",children:[g.jsx("span",{className:"text-xs text-white/50",children:"Tags (ANY)"}),g.jsx(qa,{options:A,value:Z.match.tagsAny??[],onChange:$e=>X(Be=>{const Qe=[...Be.overrides??[]];return Qe[je]={...Z,match:{tagsAny:$e}},{...Be,overrides:Qe}}),placeholder:"Search tags",allowCreate:!0,onCreate:$e=>{const Be=o($e);return Be?{createdValue:Be,createdLabel:Be}:null}})]}),g.jsxs("label",{className:"grid gap-1",children:[g.jsx("span",{className:"text-xs text-white/50",children:"Multiplier"}),g.jsx("input",{type:"number",min:.1,step:.1,className:"input-field",value:Z.multiplier,onChange:$e=>{const Be=Number($e.target.value);X(Qe=>{const st=[...Qe.overrides??[]];return st[je]={...Z,multiplier:Be},{...Qe,overrides:st}})}})]})]})]},`override-${je}`)),g.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>X(Z=>({...Z,overrides:[...Z.overrides??[],{match:{tagsAny:[]},multiplier:1}]})),children:"+ Aadir override"})]})]})]})]})]})}const iw=[{to:"/",label:"Sesiones"},{to:"/catalog",label:"Trabajos"},{to:"/settings",label:"Ajustes"},{to:"/objectives",label:"Objetivos"},{to:"/assistants",label:"Asistentes"},{to:"/backups",label:"Backups"}];function a5(){const[e,t]=w.useState(!1),[n,r]=w.useState(!1),{user:i,signOut:o}=Ns(),l=async()=>{try{r(!0),await o()}catch(u){console.error("No se pudo cerrar sesin",u)}finally{r(!1),t(!1)}};return g.jsxs("header",{className:"sticky top-0 z-50 border-b border-white/10 bg-slate-950/80 backdrop-blur-xl",children:[g.jsxs("div",{className:"mx-auto flex max-w-6xl items-center justify-between px-3 py-3 sm:px-4 sm:py-4",children:[g.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[g.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-gradient-to-br from-sky-500 to-indigo-500 text-base font-bold sm:h-10 sm:w-10 sm:text-lg",children:"SP"}),g.jsxs("div",{children:[g.jsx("p",{className:"font-display text-lg font-semibold sm:text-xl",children:"Sport Planner"}),g.jsx("p",{className:"text-[11px] text-white/50 sm:text-xs",children:"Planifica sesiones increbles"})]})]}),g.jsxs("div",{className:"hidden items-center gap-4 md:flex",children:[g.jsx("nav",{className:"flex items-center gap-2",children:iw.map(u=>g.jsx(wv,{to:u.to,className:({isActive:c})=>`rounded-full px-4 py-2 text-sm font-medium transition ${c?"bg-white text-slate-900 shadow-lg shadow-sky-400/30":"text-white/70 hover:text-white hover:bg-white/10"}`,children:u.label},u.to))}),g.jsxs("div",{className:"flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-4 py-2",children:[g.jsxs("div",{className:"text-right",children:[g.jsx("p",{className:"text-xs text-white/50",children:"Sesin iniciada"}),g.jsx("p",{className:"text-sm font-semibold text-white",children:(i==null?void 0:i.email)??"Cuenta"})]}),g.jsx("button",{type:"button",onClick:()=>{l()},disabled:n,className:"inline-flex items-center rounded-full border border-white/20 px-3 py-1 text-xs font-semibold text-white/80 transition hover:bg-white/10 disabled:opacity-60",children:n?"Saliendo":"Cerrar sesin"})]})]}),g.jsx("button",{type:"button",className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-white/20 text-white/80 md:hidden",onClick:()=>t(!0),"aria-label":"Abrir navegacin",children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"h-6 w-6",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 6h16M4 12h16M4 18h16"})})})]}),g.jsxs(ox,{open:e,onClose:t,className:"md:hidden",children:[g.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm","aria-hidden":"true"}),g.jsxs(ox.Panel,{className:"fixed inset-y-4 right-3 flex w-[17rem] flex-col rounded-3xl border border-white/10 bg-slate-900/95 p-6 shadow-2xl",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("p",{className:"text-lg font-semibold text-white",children:"Navegacin"}),g.jsx("button",{type:"button",className:"inline-flex h-9 w-9 items-center justify-center rounded-full border border-white/20 text-white/80",onClick:()=>t(!1),"aria-label":"Cerrar navegacin",children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"h-5 w-5",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]}),g.jsx("div",{className:"mt-6 flex flex-col gap-2",children:iw.map(u=>g.jsx(wv,{to:u.to,className:({isActive:c})=>`rounded-2xl px-4 py-3 text-sm font-semibold transition ${c?"bg-white text-slate-900 shadow shadow-sky-400/40":"text-white/80 hover:bg-white/10"}`,onClick:()=>t(!1),children:u.label},u.to))}),g.jsxs("div",{className:"mt-auto rounded-2xl border border-white/10 bg-white/5 p-4",children:[g.jsx("p",{className:"text-xs uppercase tracking-wide text-white/40",children:"Sesin iniciada"}),g.jsx("p",{className:"mt-1 text-sm font-semibold text-white",children:(i==null?void 0:i.email)??"Cuenta"}),g.jsx("button",{type:"button",onClick:()=>{l()},disabled:n,className:"mt-3 w-full rounded-full border border-white/20 px-3 py-2 text-sm font-semibold text-white/80 transition hover:bg-white/10 disabled:opacity-60",children:n?"Saliendo":"Cerrar sesin"})]})]})]})]})}function l5(){return zR(),BR(),g.jsxs("div",{className:"min-h-screen pb-16",children:[g.jsx(a5,{}),g.jsx("main",{className:"mx-auto w-full max-w-6xl px-3 py-5 sm:px-6 sm:py-10",children:g.jsx(mw,{})})]})}function u5(){return g.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-950",children:g.jsxs("div",{className:"flex flex-col items-center gap-4",children:[g.jsx("div",{className:"h-12 w-12 animate-spin rounded-full border-2 border-white/20 border-t-sky-400"}),g.jsx("p",{className:"text-sm font-medium text-white/60",children:"Cargando Sport Planner"})]})})}function c5(){const{session:e,loading:t}=Ns(),n=si();return t?g.jsx(u5,{}):e?g.jsx(mw,{}):g.jsx(Ka,{to:"/login",replace:!0,state:{from:n}})}function d5(){return g.jsx(Z_,{children:g.jsxs(H_,{children:[g.jsx(pn,{path:"/login",element:g.jsx(n5,{})}),g.jsx(pn,{element:g.jsx(c5,{}),children:g.jsxs(pn,{element:g.jsx(l5,{}),children:[g.jsx(pn,{index:!0,element:g.jsx(V3,{})}),g.jsx(pn,{path:"personal",element:g.jsx(Ka,{to:"/?plan=personal-kungfu",replace:!0})}),g.jsx(pn,{path:"personal/sessions",element:g.jsx(r5,{})}),g.jsx(pn,{path:"personal/settings",element:g.jsx(rw,{})}),g.jsx(pn,{path:"settings",element:g.jsx(rw,{})}),g.jsx(pn,{path:"plan",element:g.jsx(q3,{})}),g.jsx(pn,{path:"catalog",element:g.jsx(Q3,{})}),g.jsx(pn,{path:"catalog/taxonomy",element:g.jsx(X3,{})}),g.jsx(pn,{path:"objectives",element:g.jsx(Z3,{})}),g.jsx(pn,{path:"assistants",element:g.jsx(e5,{})}),g.jsx(pn,{path:"backups",element:g.jsx(t5,{})})]})}),g.jsx(pn,{path:"*",element:g.jsx(Ka,{to:"/",replace:!0})})]})})}function f5({children:e}){const[t,n]=w.useState(null),[r,i]=w.useState(null),[o,l]=w.useState(!0);w.useEffect(()=>{let c=!0;(async()=>{l(!0);const{data:{session:p}}=await Vt.auth.getSession();c&&(n(p),i((p==null?void 0:p.user)??null),l(!1))})();const{data:{subscription:h}}=Vt.auth.onAuthStateChange((p,v)=>{c&&(n(v),i((v==null?void 0:v.user)??null),l(!1))});return()=>{c=!1,h.unsubscribe()}},[]);const u=w.useMemo(()=>({session:t,user:r,loading:o,signInWithPassword:async(c,f)=>{const{error:h}=await Vt.auth.signInWithPassword({email:c,password:f});if(h)throw h},signUpWithPassword:async(c,f)=>{const p=typeof window<"u"?`${window.location.origin}/sport-planner/`:void 0,{error:v}=await Vt.auth.signUp({email:c,password:f,options:{emailRedirectTo:p}});if(v)throw v},signOut:async()=>{const{error:c}=await Vt.auth.signOut();if(c)throw c}}),[o,t,r]);return g.jsx(Bb.Provider,{value:u,children:e})}Te.getState().hydrate();ZE.createRoot(document.getElementById("root")).render(g.jsx(Re.StrictMode,{children:g.jsx(f5,{children:g.jsx(d5,{})})}));
