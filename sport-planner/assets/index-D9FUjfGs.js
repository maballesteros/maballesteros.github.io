function a_(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Mo(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function l_(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var Lf={exports:{}},Ca={},$f={exports:{}},ut={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vv;function u_(){if(vv)return ut;vv=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),a=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function v(B){return B===null||typeof B!="object"?null:(B=p&&B[p]||B["@@iterator"],typeof B=="function"?B:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,S={};function k(B,ee,R){this.props=B,this.context=ee,this.refs=S,this.updater=R||y}k.prototype.isReactComponent={},k.prototype.setState=function(B,ee){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,ee,"setState")},k.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function _(){}_.prototype=k.prototype;function C(B,ee,R){this.props=B,this.context=ee,this.refs=S,this.updater=R||y}var j=C.prototype=new _;j.constructor=C,w(j,k.prototype),j.isPureReactComponent=!0;var I=Array.isArray,D=Object.prototype.hasOwnProperty,A={current:null},U={key:!0,ref:!0,__self:!0,__source:!0};function te(B,ee,R){var be,he={},ge=null,me=null;if(ee!=null)for(be in ee.ref!==void 0&&(me=ee.ref),ee.key!==void 0&&(ge=""+ee.key),ee)D.call(ee,be)&&!U.hasOwnProperty(be)&&(he[be]=ee[be]);var Ce=arguments.length-2;if(Ce===1)he.children=R;else if(1<Ce){for(var Te=Array(Ce),je=0;je<Ce;je++)Te[je]=arguments[je+2];he.children=Te}if(B&&B.defaultProps)for(be in Ce=B.defaultProps,Ce)he[be]===void 0&&(he[be]=Ce[be]);return{$$typeof:e,type:B,key:ge,ref:me,props:he,_owner:A.current}}function z(B,ee){return{$$typeof:e,type:B.type,key:ee,ref:B.ref,props:B.props,_owner:B._owner}}function M(B){return typeof B=="object"&&B!==null&&B.$$typeof===e}function $(B){var ee={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(R){return ee[R]})}var ne=/\/+/g;function H(B,ee){return typeof B=="object"&&B!==null&&B.key!=null?$(""+B.key):ee.toString(36)}function Y(B,ee,R,be,he){var ge=typeof B;(ge==="undefined"||ge==="boolean")&&(B=null);var me=!1;if(B===null)me=!0;else switch(ge){case"string":case"number":me=!0;break;case"object":switch(B.$$typeof){case e:case t:me=!0}}if(me)return me=B,he=he(me),B=be===""?"."+H(me,0):be,I(he)?(R="",B!=null&&(R=B.replace(ne,"$&/")+"/"),Y(he,ee,R,"",function(je){return je})):he!=null&&(M(he)&&(he=z(he,R+(!he.key||me&&me.key===he.key?"":(""+he.key).replace(ne,"$&/")+"/")+B)),ee.push(he)),1;if(me=0,be=be===""?".":be+":",I(B))for(var Ce=0;Ce<B.length;Ce++){ge=B[Ce];var Te=be+H(ge,Ce);me+=Y(ge,ee,R,Te,he)}else if(Te=v(B),typeof Te=="function")for(B=Te.call(B),Ce=0;!(ge=B.next()).done;)ge=ge.value,Te=be+H(ge,Ce++),me+=Y(ge,ee,R,Te,he);else if(ge==="object")throw ee=String(B),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.");return me}function K(B,ee,R){if(B==null)return B;var be=[],he=0;return Y(B,be,"","",function(ge){return ee.call(R,ge,he++)}),be}function se(B){if(B._status===-1){var ee=B._result;ee=ee(),ee.then(function(R){(B._status===0||B._status===-1)&&(B._status=1,B._result=R)},function(R){(B._status===0||B._status===-1)&&(B._status=2,B._result=R)}),B._status===-1&&(B._status=0,B._result=ee)}if(B._status===1)return B._result.default;throw B._result}var q={current:null},F={transition:null},L={ReactCurrentDispatcher:q,ReactCurrentBatchConfig:F,ReactCurrentOwner:A};function N(){throw Error("act(...) is not supported in production builds of React.")}return ut.Children={map:K,forEach:function(B,ee,R){K(B,function(){ee.apply(this,arguments)},R)},count:function(B){var ee=0;return K(B,function(){ee++}),ee},toArray:function(B){return K(B,function(ee){return ee})||[]},only:function(B){if(!M(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},ut.Component=k,ut.Fragment=n,ut.Profiler=i,ut.PureComponent=C,ut.StrictMode=r,ut.Suspense=c,ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,ut.act=N,ut.cloneElement=function(B,ee,R){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var be=w({},B.props),he=B.key,ge=B.ref,me=B._owner;if(ee!=null){if(ee.ref!==void 0&&(ge=ee.ref,me=A.current),ee.key!==void 0&&(he=""+ee.key),B.type&&B.type.defaultProps)var Ce=B.type.defaultProps;for(Te in ee)D.call(ee,Te)&&!U.hasOwnProperty(Te)&&(be[Te]=ee[Te]===void 0&&Ce!==void 0?Ce[Te]:ee[Te])}var Te=arguments.length-2;if(Te===1)be.children=R;else if(1<Te){Ce=Array(Te);for(var je=0;je<Te;je++)Ce[je]=arguments[je+2];be.children=Ce}return{$$typeof:e,type:B.type,key:he,ref:ge,props:be,_owner:me}},ut.createContext=function(B){return B={$$typeof:a,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:o,_context:B},B.Consumer=B},ut.createElement=te,ut.createFactory=function(B){var ee=te.bind(null,B);return ee.type=B,ee},ut.createRef=function(){return{current:null}},ut.forwardRef=function(B){return{$$typeof:u,render:B}},ut.isValidElement=M,ut.lazy=function(B){return{$$typeof:h,_payload:{_status:-1,_result:B},_init:se}},ut.memo=function(B,ee){return{$$typeof:f,type:B,compare:ee===void 0?null:ee}},ut.startTransition=function(B){var ee=F.transition;F.transition={};try{B()}finally{F.transition=ee}},ut.unstable_act=N,ut.useCallback=function(B,ee){return q.current.useCallback(B,ee)},ut.useContext=function(B){return q.current.useContext(B)},ut.useDebugValue=function(){},ut.useDeferredValue=function(B){return q.current.useDeferredValue(B)},ut.useEffect=function(B,ee){return q.current.useEffect(B,ee)},ut.useId=function(){return q.current.useId()},ut.useImperativeHandle=function(B,ee,R){return q.current.useImperativeHandle(B,ee,R)},ut.useInsertionEffect=function(B,ee){return q.current.useInsertionEffect(B,ee)},ut.useLayoutEffect=function(B,ee){return q.current.useLayoutEffect(B,ee)},ut.useMemo=function(B,ee){return q.current.useMemo(B,ee)},ut.useReducer=function(B,ee,R){return q.current.useReducer(B,ee,R)},ut.useRef=function(B){return q.current.useRef(B)},ut.useState=function(B){return q.current.useState(B)},ut.useSyncExternalStore=function(B,ee,R){return q.current.useSyncExternalStore(B,ee,R)},ut.useTransition=function(){return q.current.useTransition()},ut.version="18.3.1",ut}var xv;function Cc(){return xv||(xv=1,$f.exports=u_()),$f.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bv;function c_(){if(bv)return Ca;bv=1;var e=Cc(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function a(u,c,f){var h,p={},v=null,y=null;f!==void 0&&(v=""+f),c.key!==void 0&&(v=""+c.key),c.ref!==void 0&&(y=c.ref);for(h in c)r.call(c,h)&&!o.hasOwnProperty(h)&&(p[h]=c[h]);if(u&&u.defaultProps)for(h in c=u.defaultProps,c)p[h]===void 0&&(p[h]=c[h]);return{$$typeof:t,type:u,key:v,ref:y,props:p,_owner:i.current}}return Ca.Fragment=n,Ca.jsx=a,Ca.jsxs=a,Ca}var wv;function d_(){return wv||(wv=1,Lf.exports=c_()),Lf.exports}var m=d_(),b=Cc();const Ae=Mo(b),tc=a_({__proto__:null,default:Ae},[b]);var ju={},Ff={exports:{}},Dn={},Bf={exports:{}},zf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kv;function f_(){return kv||(kv=1,(function(e){function t(F,L){var N=F.length;F.push(L);e:for(;0<N;){var B=N-1>>>1,ee=F[B];if(0<i(ee,L))F[B]=L,F[N]=ee,N=B;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var L=F[0],N=F.pop();if(N!==L){F[0]=N;e:for(var B=0,ee=F.length,R=ee>>>1;B<R;){var be=2*(B+1)-1,he=F[be],ge=be+1,me=F[ge];if(0>i(he,N))ge<ee&&0>i(me,he)?(F[B]=me,F[ge]=N,B=ge):(F[B]=he,F[be]=N,B=be);else if(ge<ee&&0>i(me,N))F[B]=me,F[ge]=N,B=ge;else break e}}return L}function i(F,L){var N=F.sortIndex-L.sortIndex;return N!==0?N:F.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();e.unstable_now=function(){return a.now()-u}}var c=[],f=[],h=1,p=null,v=3,y=!1,w=!1,S=!1,k=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(F){for(var L=n(f);L!==null;){if(L.callback===null)r(f);else if(L.startTime<=F)r(f),L.sortIndex=L.expirationTime,t(c,L);else break;L=n(f)}}function I(F){if(S=!1,j(F),!w)if(n(c)!==null)w=!0,se(D);else{var L=n(f);L!==null&&q(I,L.startTime-F)}}function D(F,L){w=!1,S&&(S=!1,_(te),te=-1),y=!0;var N=v;try{for(j(L),p=n(c);p!==null&&(!(p.expirationTime>L)||F&&!$());){var B=p.callback;if(typeof B=="function"){p.callback=null,v=p.priorityLevel;var ee=B(p.expirationTime<=L);L=e.unstable_now(),typeof ee=="function"?p.callback=ee:p===n(c)&&r(c),j(L)}else r(c);p=n(c)}if(p!==null)var R=!0;else{var be=n(f);be!==null&&q(I,be.startTime-L),R=!1}return R}finally{p=null,v=N,y=!1}}var A=!1,U=null,te=-1,z=5,M=-1;function $(){return!(e.unstable_now()-M<z)}function ne(){if(U!==null){var F=e.unstable_now();M=F;var L=!0;try{L=U(!0,F)}finally{L?H():(A=!1,U=null)}}else A=!1}var H;if(typeof C=="function")H=function(){C(ne)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,K=Y.port2;Y.port1.onmessage=ne,H=function(){K.postMessage(null)}}else H=function(){k(ne,0)};function se(F){U=F,A||(A=!0,H())}function q(F,L){te=k(function(){F(e.unstable_now())},L)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(F){F.callback=null},e.unstable_continueExecution=function(){w||y||(w=!0,se(D))},e.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<F?Math.floor(1e3/F):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(F){switch(v){case 1:case 2:case 3:var L=3;break;default:L=v}var N=v;v=L;try{return F()}finally{v=N}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(F,L){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var N=v;v=F;try{return L()}finally{v=N}},e.unstable_scheduleCallback=function(F,L,N){var B=e.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?B+N:B):N=B,F){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=N+ee,F={id:h++,callback:L,priorityLevel:F,startTime:N,expirationTime:ee,sortIndex:-1},N>B?(F.sortIndex=N,t(f,F),n(c)===null&&F===n(f)&&(S?(_(te),te=-1):S=!0,q(I,N-B))):(F.sortIndex=ee,t(c,F),w||y||(w=!0,se(D))),F},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(F){var L=v;return function(){var N=v;v=L;try{return F.apply(this,arguments)}finally{v=N}}}})(zf)),zf}var Sv;function h_(){return Sv||(Sv=1,Bf.exports=f_()),Bf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ev;function p_(){if(Ev)return Dn;Ev=1;var e=Cc(),t=h_();function n(s){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+s,d=1;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(s,l){a(s,l),a(s+"Capture",l)}function a(s,l){for(i[s]=l,s=0;s<l.length;s++)r.add(l[s])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function v(s){return c.call(p,s)?!0:c.call(h,s)?!1:f.test(s)?p[s]=!0:(h[s]=!0,!1)}function y(s,l,d,g){if(d!==null&&d.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return g?!1:d!==null?!d.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function w(s,l,d,g){if(l===null||typeof l>"u"||y(s,l,d,g))return!0;if(g)return!1;if(d!==null)switch(d.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function S(s,l,d,g,x,E,T){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=g,this.attributeNamespace=x,this.mustUseProperty=d,this.propertyName=s,this.type=l,this.sanitizeURL=E,this.removeEmptyString=T}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){k[s]=new S(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var l=s[0];k[l]=new S(l,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){k[s]=new S(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){k[s]=new S(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){k[s]=new S(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){k[s]=new S(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){k[s]=new S(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){k[s]=new S(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){k[s]=new S(s,5,!1,s.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function C(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var l=s.replace(_,C);k[l]=new S(l,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var l=s.replace(_,C);k[l]=new S(l,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var l=s.replace(_,C);k[l]=new S(l,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){k[s]=new S(s,1,!1,s.toLowerCase(),null,!1,!1)}),k.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){k[s]=new S(s,1,!1,s.toLowerCase(),null,!0,!0)});function j(s,l,d,g){var x=k.hasOwnProperty(l)?k[l]:null;(x!==null?x.type!==0:g||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(w(l,d,x,g)&&(d=null),g||x===null?v(l)&&(d===null?s.removeAttribute(l):s.setAttribute(l,""+d)):x.mustUseProperty?s[x.propertyName]=d===null?x.type===3?!1:"":d:(l=x.attributeName,g=x.attributeNamespace,d===null?s.removeAttribute(l):(x=x.type,d=x===3||x===4&&d===!0?"":""+d,g?s.setAttributeNS(g,l,d):s.setAttribute(l,d))))}var I=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,D=Symbol.for("react.element"),A=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),te=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),$=Symbol.for("react.context"),ne=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),K=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),q=Symbol.for("react.offscreen"),F=Symbol.iterator;function L(s){return s===null||typeof s!="object"?null:(s=F&&s[F]||s["@@iterator"],typeof s=="function"?s:null)}var N=Object.assign,B;function ee(s){if(B===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);B=l&&l[1]||""}return`
`+B+s}var R=!1;function be(s,l){if(!s||R)return"";R=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(ce){var g=ce}Reflect.construct(s,[],l)}else{try{l.call()}catch(ce){g=ce}s.call(l.prototype)}else{try{throw Error()}catch(ce){g=ce}s()}}catch(ce){if(ce&&g&&typeof ce.stack=="string"){for(var x=ce.stack.split(`
`),E=g.stack.split(`
`),T=x.length-1,W=E.length-1;1<=T&&0<=W&&x[T]!==E[W];)W--;for(;1<=T&&0<=W;T--,W--)if(x[T]!==E[W]){if(T!==1||W!==1)do if(T--,W--,0>W||x[T]!==E[W]){var X=`
`+x[T].replace(" at new "," at ");return s.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",s.displayName)),X}while(1<=T&&0<=W);break}}}finally{R=!1,Error.prepareStackTrace=d}return(s=s?s.displayName||s.name:"")?ee(s):""}function he(s){switch(s.tag){case 5:return ee(s.type);case 16:return ee("Lazy");case 13:return ee("Suspense");case 19:return ee("SuspenseList");case 0:case 2:case 15:return s=be(s.type,!1),s;case 11:return s=be(s.type.render,!1),s;case 1:return s=be(s.type,!0),s;default:return""}}function ge(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case U:return"Fragment";case A:return"Portal";case z:return"Profiler";case te:return"StrictMode";case H:return"Suspense";case Y:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case $:return(s.displayName||"Context")+".Consumer";case M:return(s._context.displayName||"Context")+".Provider";case ne:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case K:return l=s.displayName||null,l!==null?l:ge(s.type)||"Memo";case se:l=s._payload,s=s._init;try{return ge(s(l))}catch{}}return null}function me(s){var l=s.type;switch(s.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=l.render,s=s.displayName||s.name||"",l.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ge(l);case 8:return l===te?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Ce(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Te(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function je(s){var l=Te(s)?"checked":"value",d=Object.getOwnPropertyDescriptor(s.constructor.prototype,l),g=""+s[l];if(!s.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var x=d.get,E=d.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return x.call(this)},set:function(T){g=""+T,E.call(this,T)}}),Object.defineProperty(s,l,{enumerable:d.enumerable}),{getValue:function(){return g},setValue:function(T){g=""+T},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function ie(s){s._valueTracker||(s._valueTracker=je(s))}function Ie(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var d=l.getValue(),g="";return s&&(g=Te(s)?s.checked?"true":"false":s.value),s=g,s!==d?(l.setValue(s),!0):!1}function He(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function qe(s,l){var d=l.checked;return N({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??s._wrapperState.initialChecked})}function rt(s,l){var d=l.defaultValue==null?"":l.defaultValue,g=l.checked!=null?l.checked:l.defaultChecked;d=Ce(l.value!=null?l.value:d),s._wrapperState={initialChecked:g,initialValue:d,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function st(s,l){l=l.checked,l!=null&&j(s,"checked",l,!1)}function St(s,l){st(s,l);var d=Ce(l.value),g=l.type;if(d!=null)g==="number"?(d===0&&s.value===""||s.value!=d)&&(s.value=""+d):s.value!==""+d&&(s.value=""+d);else if(g==="submit"||g==="reset"){s.removeAttribute("value");return}l.hasOwnProperty("value")?Xt(s,l.type,d):l.hasOwnProperty("defaultValue")&&Xt(s,l.type,Ce(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(s.defaultChecked=!!l.defaultChecked)}function fn(s,l,d){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var g=l.type;if(!(g!=="submit"&&g!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+s._wrapperState.initialValue,d||l===s.value||(s.value=l),s.defaultValue=l}d=s.name,d!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,d!==""&&(s.name=d)}function Xt(s,l,d){(l!=="number"||He(s.ownerDocument)!==s)&&(d==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+d&&(s.defaultValue=""+d))}var wt=Array.isArray;function Rt(s,l,d,g){if(s=s.options,l){l={};for(var x=0;x<d.length;x++)l["$"+d[x]]=!0;for(d=0;d<s.length;d++)x=l.hasOwnProperty("$"+s[d].value),s[d].selected!==x&&(s[d].selected=x),x&&g&&(s[d].defaultSelected=!0)}else{for(d=""+Ce(d),l=null,x=0;x<s.length;x++){if(s[x].value===d){s[x].selected=!0,g&&(s[x].defaultSelected=!0);return}l!==null||s[x].disabled||(l=s[x])}l!==null&&(l.selected=!0)}}function Q(s,l){if(l.dangerouslySetInnerHTML!=null)throw Error(n(91));return N({},l,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function fe(s,l){var d=l.value;if(d==null){if(d=l.children,l=l.defaultValue,d!=null){if(l!=null)throw Error(n(92));if(wt(d)){if(1<d.length)throw Error(n(93));d=d[0]}l=d}l==null&&(l=""),d=l}s._wrapperState={initialValue:Ce(d)}}function ye(s,l){var d=Ce(l.value),g=Ce(l.defaultValue);d!=null&&(d=""+d,d!==s.value&&(s.value=d),l.defaultValue==null&&s.defaultValue!==d&&(s.defaultValue=d)),g!=null&&(s.defaultValue=""+g)}function Ee(s){var l=s.textContent;l===s._wrapperState.initialValue&&l!==""&&l!==null&&(s.value=l)}function G(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function P(s,l){return s==null||s==="http://www.w3.org/1999/xhtml"?G(l):s==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var V,le=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,d,g,x){MSApp.execUnsafeLocalFunction(function(){return s(l,d,g,x)})}:s})(function(s,l){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=l;else{for(V=V||document.createElement("div"),V.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=V.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;l.firstChild;)s.appendChild(l.firstChild)}});function Z(s,l){if(l){var d=s.firstChild;if(d&&d===s.lastChild&&d.nodeType===3){d.nodeValue=l;return}}s.textContent=l}var ue={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},O=["Webkit","ms","Moz","O"];Object.keys(ue).forEach(function(s){O.forEach(function(l){l=l+s.charAt(0).toUpperCase()+s.substring(1),ue[l]=ue[s]})});function J(s,l,d){return l==null||typeof l=="boolean"||l===""?"":d||typeof l!="number"||l===0||ue.hasOwnProperty(s)&&ue[s]?(""+l).trim():l+"px"}function de(s,l){s=s.style;for(var d in l)if(l.hasOwnProperty(d)){var g=d.indexOf("--")===0,x=J(d,l[d],g);d==="float"&&(d="cssFloat"),g?s.setProperty(d,x):s[d]=x}}var pe=N({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Re(s,l){if(l){if(pe[s]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(n(137,s));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(n(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(n(61))}if(l.style!=null&&typeof l.style!="object")throw Error(n(62))}}function Pe(s,l){if(s.indexOf("-")===-1)return typeof l.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var De=null;function dt(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Fe=null,Ve=null,Ke=null;function Le(s){if(s=da(s)){if(typeof Fe!="function")throw Error(n(280));var l=s.stateNode;l&&(l=Ul(l),Fe(s.stateNode,s.type,l))}}function ot(s){Ve?Ke?Ke.push(s):Ke=[s]:Ve=s}function yt(){if(Ve){var s=Ve,l=Ke;if(Ke=Ve=null,Le(s),l)for(s=0;s<l.length;s++)Le(l[s])}}function Ye(s,l){return s(l)}function Ne(){}var Ge=!1;function vt(s,l,d){if(Ge)return s(l,d);Ge=!0;try{return Ye(s,l,d)}finally{Ge=!1,(Ve!==null||Ke!==null)&&(Ne(),yt())}}function tt(s,l){var d=s.stateNode;if(d===null)return null;var g=Ul(d);if(g===null)return null;d=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(s=s.type,g=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!g;break e;default:s=!1}if(s)return null;if(d&&typeof d!="function")throw Error(n(231,l,typeof d));return d}var At=!1;if(u)try{var ft={};Object.defineProperty(ft,"passive",{get:function(){At=!0}}),window.addEventListener("test",ft,ft),window.removeEventListener("test",ft,ft)}catch{At=!1}function $t(s,l,d,g,x,E,T,W,X){var ce=Array.prototype.slice.call(arguments,3);try{l.apply(d,ce)}catch(xe){this.onError(xe)}}var Ht=!1,Wn=null,Zt=!1,Hn=null,Hi={onError:function(s){Ht=!0,Wn=s}};function qo(s,l,d,g,x,E,T,W,X){Ht=!1,Wn=null,$t.apply(Hi,arguments)}function td(s,l,d,g,x,E,T,W,X){if(qo.apply(this,arguments),Ht){if(Ht){var ce=Wn;Ht=!1,Wn=null}else throw Error(n(198));Zt||(Zt=!0,Hn=ce)}}function Vi(s){var l=s,d=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(d=l.return),s=l.return;while(s)}return l.tag===3?d:null}function zm(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function Um(s){if(Vi(s)!==s)throw Error(n(188))}function yS(s){var l=s.alternate;if(!l){if(l=Vi(s),l===null)throw Error(n(188));return l!==s?null:s}for(var d=s,g=l;;){var x=d.return;if(x===null)break;var E=x.alternate;if(E===null){if(g=x.return,g!==null){d=g;continue}break}if(x.child===E.child){for(E=x.child;E;){if(E===d)return Um(x),s;if(E===g)return Um(x),l;E=E.sibling}throw Error(n(188))}if(d.return!==g.return)d=x,g=E;else{for(var T=!1,W=x.child;W;){if(W===d){T=!0,d=x,g=E;break}if(W===g){T=!0,g=x,d=E;break}W=W.sibling}if(!T){for(W=E.child;W;){if(W===d){T=!0,d=E,g=x;break}if(W===g){T=!0,g=E,d=x;break}W=W.sibling}if(!T)throw Error(n(189))}}if(d.alternate!==g)throw Error(n(190))}if(d.tag!==3)throw Error(n(188));return d.stateNode.current===d?s:l}function Wm(s){return s=yS(s),s!==null?Hm(s):null}function Hm(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var l=Hm(s);if(l!==null)return l;s=s.sibling}return null}var Vm=t.unstable_scheduleCallback,qm=t.unstable_cancelCallback,vS=t.unstable_shouldYield,xS=t.unstable_requestPaint,zt=t.unstable_now,bS=t.unstable_getCurrentPriorityLevel,nd=t.unstable_ImmediatePriority,Km=t.unstable_UserBlockingPriority,kl=t.unstable_NormalPriority,wS=t.unstable_LowPriority,Ym=t.unstable_IdlePriority,Sl=null,jr=null;function kS(s){if(jr&&typeof jr.onCommitFiberRoot=="function")try{jr.onCommitFiberRoot(Sl,s,void 0,(s.current.flags&128)===128)}catch{}}var fr=Math.clz32?Math.clz32:_S,SS=Math.log,ES=Math.LN2;function _S(s){return s>>>=0,s===0?32:31-(SS(s)/ES|0)|0}var El=64,_l=4194304;function Ko(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Cl(s,l){var d=s.pendingLanes;if(d===0)return 0;var g=0,x=s.suspendedLanes,E=s.pingedLanes,T=d&268435455;if(T!==0){var W=T&~x;W!==0?g=Ko(W):(E&=T,E!==0&&(g=Ko(E)))}else T=d&~x,T!==0?g=Ko(T):E!==0&&(g=Ko(E));if(g===0)return 0;if(l!==0&&l!==g&&(l&x)===0&&(x=g&-g,E=l&-l,x>=E||x===16&&(E&4194240)!==0))return l;if((g&4)!==0&&(g|=d&16),l=s.entangledLanes,l!==0)for(s=s.entanglements,l&=g;0<l;)d=31-fr(l),x=1<<d,g|=s[d],l&=~x;return g}function CS(s,l){switch(s){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jS(s,l){for(var d=s.suspendedLanes,g=s.pingedLanes,x=s.expirationTimes,E=s.pendingLanes;0<E;){var T=31-fr(E),W=1<<T,X=x[T];X===-1?((W&d)===0||(W&g)!==0)&&(x[T]=CS(W,l)):X<=l&&(s.expiredLanes|=W),E&=~W}}function rd(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Gm(){var s=El;return El<<=1,(El&4194240)===0&&(El=64),s}function id(s){for(var l=[],d=0;31>d;d++)l.push(s);return l}function Yo(s,l,d){s.pendingLanes|=l,l!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,l=31-fr(l),s[l]=d}function NS(s,l){var d=s.pendingLanes&~l;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=l,s.mutableReadLanes&=l,s.entangledLanes&=l,l=s.entanglements;var g=s.eventTimes;for(s=s.expirationTimes;0<d;){var x=31-fr(d),E=1<<x;l[x]=0,g[x]=-1,s[x]=-1,d&=~E}}function sd(s,l){var d=s.entangledLanes|=l;for(s=s.entanglements;d;){var g=31-fr(d),x=1<<g;x&l|s[g]&l&&(s[g]|=l),d&=~x}}var xt=0;function Jm(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var Qm,od,Xm,Zm,eg,ad=!1,jl=[],si=null,oi=null,ai=null,Go=new Map,Jo=new Map,li=[],TS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tg(s,l){switch(s){case"focusin":case"focusout":si=null;break;case"dragenter":case"dragleave":oi=null;break;case"mouseover":case"mouseout":ai=null;break;case"pointerover":case"pointerout":Go.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jo.delete(l.pointerId)}}function Qo(s,l,d,g,x,E){return s===null||s.nativeEvent!==E?(s={blockedOn:l,domEventName:d,eventSystemFlags:g,nativeEvent:E,targetContainers:[x]},l!==null&&(l=da(l),l!==null&&od(l)),s):(s.eventSystemFlags|=g,l=s.targetContainers,x!==null&&l.indexOf(x)===-1&&l.push(x),s)}function IS(s,l,d,g,x){switch(l){case"focusin":return si=Qo(si,s,l,d,g,x),!0;case"dragenter":return oi=Qo(oi,s,l,d,g,x),!0;case"mouseover":return ai=Qo(ai,s,l,d,g,x),!0;case"pointerover":var E=x.pointerId;return Go.set(E,Qo(Go.get(E)||null,s,l,d,g,x)),!0;case"gotpointercapture":return E=x.pointerId,Jo.set(E,Qo(Jo.get(E)||null,s,l,d,g,x)),!0}return!1}function ng(s){var l=qi(s.target);if(l!==null){var d=Vi(l);if(d!==null){if(l=d.tag,l===13){if(l=zm(d),l!==null){s.blockedOn=l,eg(s.priority,function(){Xm(d)});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){s.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Nl(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var d=ud(s.domEventName,s.eventSystemFlags,l[0],s.nativeEvent);if(d===null){d=s.nativeEvent;var g=new d.constructor(d.type,d);De=g,d.target.dispatchEvent(g),De=null}else return l=da(d),l!==null&&od(l),s.blockedOn=d,!1;l.shift()}return!0}function rg(s,l,d){Nl(s)&&d.delete(l)}function PS(){ad=!1,si!==null&&Nl(si)&&(si=null),oi!==null&&Nl(oi)&&(oi=null),ai!==null&&Nl(ai)&&(ai=null),Go.forEach(rg),Jo.forEach(rg)}function Xo(s,l){s.blockedOn===l&&(s.blockedOn=null,ad||(ad=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,PS)))}function Zo(s){function l(x){return Xo(x,s)}if(0<jl.length){Xo(jl[0],s);for(var d=1;d<jl.length;d++){var g=jl[d];g.blockedOn===s&&(g.blockedOn=null)}}for(si!==null&&Xo(si,s),oi!==null&&Xo(oi,s),ai!==null&&Xo(ai,s),Go.forEach(l),Jo.forEach(l),d=0;d<li.length;d++)g=li[d],g.blockedOn===s&&(g.blockedOn=null);for(;0<li.length&&(d=li[0],d.blockedOn===null);)ng(d),d.blockedOn===null&&li.shift()}var Rs=I.ReactCurrentBatchConfig,Tl=!0;function RS(s,l,d,g){var x=xt,E=Rs.transition;Rs.transition=null;try{xt=1,ld(s,l,d,g)}finally{xt=x,Rs.transition=E}}function AS(s,l,d,g){var x=xt,E=Rs.transition;Rs.transition=null;try{xt=4,ld(s,l,d,g)}finally{xt=x,Rs.transition=E}}function ld(s,l,d,g){if(Tl){var x=ud(s,l,d,g);if(x===null)Cd(s,l,g,Il,d),tg(s,g);else if(IS(x,s,l,d,g))g.stopPropagation();else if(tg(s,g),l&4&&-1<TS.indexOf(s)){for(;x!==null;){var E=da(x);if(E!==null&&Qm(E),E=ud(s,l,d,g),E===null&&Cd(s,l,g,Il,d),E===x)break;x=E}x!==null&&g.stopPropagation()}else Cd(s,l,g,null,d)}}var Il=null;function ud(s,l,d,g){if(Il=null,s=dt(g),s=qi(s),s!==null)if(l=Vi(s),l===null)s=null;else if(d=l.tag,d===13){if(s=zm(l),s!==null)return s;s=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null);return Il=s,null}function ig(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bS()){case nd:return 1;case Km:return 4;case kl:case wS:return 16;case Ym:return 536870912;default:return 16}default:return 16}}var ui=null,cd=null,Pl=null;function sg(){if(Pl)return Pl;var s,l=cd,d=l.length,g,x="value"in ui?ui.value:ui.textContent,E=x.length;for(s=0;s<d&&l[s]===x[s];s++);var T=d-s;for(g=1;g<=T&&l[d-g]===x[E-g];g++);return Pl=x.slice(s,1<g?1-g:void 0)}function Rl(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function Al(){return!0}function og(){return!1}function Vn(s){function l(d,g,x,E,T){this._reactName=d,this._targetInst=x,this.type=g,this.nativeEvent=E,this.target=T,this.currentTarget=null;for(var W in s)s.hasOwnProperty(W)&&(d=s[W],this[W]=d?d(E):E[W]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Al:og,this.isPropagationStopped=og,this}return N(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Al)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Al)},persist:function(){},isPersistent:Al}),l}var As={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dd=Vn(As),ea=N({},As,{view:0,detail:0}),MS=Vn(ea),fd,hd,ta,Ml=N({},ea,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:md,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ta&&(ta&&s.type==="mousemove"?(fd=s.screenX-ta.screenX,hd=s.screenY-ta.screenY):hd=fd=0,ta=s),fd)},movementY:function(s){return"movementY"in s?s.movementY:hd}}),ag=Vn(Ml),OS=N({},Ml,{dataTransfer:0}),DS=Vn(OS),LS=N({},ea,{relatedTarget:0}),pd=Vn(LS),$S=N({},As,{animationName:0,elapsedTime:0,pseudoElement:0}),FS=Vn($S),BS=N({},As,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),zS=Vn(BS),US=N({},As,{data:0}),lg=Vn(US),WS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},HS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},VS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qS(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=VS[s])?!!l[s]:!1}function md(){return qS}var KS=N({},ea,{key:function(s){if(s.key){var l=WS[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=Rl(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?HS[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:md,charCode:function(s){return s.type==="keypress"?Rl(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Rl(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),YS=Vn(KS),GS=N({},Ml,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ug=Vn(GS),JS=N({},ea,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:md}),QS=Vn(JS),XS=N({},As,{propertyName:0,elapsedTime:0,pseudoElement:0}),ZS=Vn(XS),eE=N({},Ml,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),tE=Vn(eE),nE=[9,13,27,32],gd=u&&"CompositionEvent"in window,na=null;u&&"documentMode"in document&&(na=document.documentMode);var rE=u&&"TextEvent"in window&&!na,cg=u&&(!gd||na&&8<na&&11>=na),dg=" ",fg=!1;function hg(s,l){switch(s){case"keyup":return nE.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pg(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Ms=!1;function iE(s,l){switch(s){case"compositionend":return pg(l);case"keypress":return l.which!==32?null:(fg=!0,dg);case"textInput":return s=l.data,s===dg&&fg?null:s;default:return null}}function sE(s,l){if(Ms)return s==="compositionend"||!gd&&hg(s,l)?(s=sg(),Pl=cd=ui=null,Ms=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return cg&&l.locale!=="ko"?null:l.data;default:return null}}var oE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mg(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!oE[s.type]:l==="textarea"}function gg(s,l,d,g){ot(g),l=Fl(l,"onChange"),0<l.length&&(d=new dd("onChange","change",null,d,g),s.push({event:d,listeners:l}))}var ra=null,ia=null;function aE(s){Mg(s,0)}function Ol(s){var l=Fs(s);if(Ie(l))return s}function lE(s,l){if(s==="change")return l}var yg=!1;if(u){var yd;if(u){var vd="oninput"in document;if(!vd){var vg=document.createElement("div");vg.setAttribute("oninput","return;"),vd=typeof vg.oninput=="function"}yd=vd}else yd=!1;yg=yd&&(!document.documentMode||9<document.documentMode)}function xg(){ra&&(ra.detachEvent("onpropertychange",bg),ia=ra=null)}function bg(s){if(s.propertyName==="value"&&Ol(ia)){var l=[];gg(l,ia,s,dt(s)),vt(aE,l)}}function uE(s,l,d){s==="focusin"?(xg(),ra=l,ia=d,ra.attachEvent("onpropertychange",bg)):s==="focusout"&&xg()}function cE(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Ol(ia)}function dE(s,l){if(s==="click")return Ol(l)}function fE(s,l){if(s==="input"||s==="change")return Ol(l)}function hE(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var hr=typeof Object.is=="function"?Object.is:hE;function sa(s,l){if(hr(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var d=Object.keys(s),g=Object.keys(l);if(d.length!==g.length)return!1;for(g=0;g<d.length;g++){var x=d[g];if(!c.call(l,x)||!hr(s[x],l[x]))return!1}return!0}function wg(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function kg(s,l){var d=wg(s);s=0;for(var g;d;){if(d.nodeType===3){if(g=s+d.textContent.length,s<=l&&g>=l)return{node:d,offset:l-s};s=g}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=wg(d)}}function Sg(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?Sg(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function Eg(){for(var s=window,l=He();l instanceof s.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)s=l.contentWindow;else break;l=He(s.document)}return l}function xd(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}function pE(s){var l=Eg(),d=s.focusedElem,g=s.selectionRange;if(l!==d&&d&&d.ownerDocument&&Sg(d.ownerDocument.documentElement,d)){if(g!==null&&xd(d)){if(l=g.start,s=g.end,s===void 0&&(s=l),"selectionStart"in d)d.selectionStart=l,d.selectionEnd=Math.min(s,d.value.length);else if(s=(l=d.ownerDocument||document)&&l.defaultView||window,s.getSelection){s=s.getSelection();var x=d.textContent.length,E=Math.min(g.start,x);g=g.end===void 0?E:Math.min(g.end,x),!s.extend&&E>g&&(x=g,g=E,E=x),x=kg(d,E);var T=kg(d,g);x&&T&&(s.rangeCount!==1||s.anchorNode!==x.node||s.anchorOffset!==x.offset||s.focusNode!==T.node||s.focusOffset!==T.offset)&&(l=l.createRange(),l.setStart(x.node,x.offset),s.removeAllRanges(),E>g?(s.addRange(l),s.extend(T.node,T.offset)):(l.setEnd(T.node,T.offset),s.addRange(l)))}}for(l=[],s=d;s=s.parentNode;)s.nodeType===1&&l.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<l.length;d++)s=l[d],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var mE=u&&"documentMode"in document&&11>=document.documentMode,Os=null,bd=null,oa=null,wd=!1;function _g(s,l,d){var g=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;wd||Os==null||Os!==He(g)||(g=Os,"selectionStart"in g&&xd(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),oa&&sa(oa,g)||(oa=g,g=Fl(bd,"onSelect"),0<g.length&&(l=new dd("onSelect","select",null,l,d),s.push({event:l,listeners:g}),l.target=Os)))}function Dl(s,l){var d={};return d[s.toLowerCase()]=l.toLowerCase(),d["Webkit"+s]="webkit"+l,d["Moz"+s]="moz"+l,d}var Ds={animationend:Dl("Animation","AnimationEnd"),animationiteration:Dl("Animation","AnimationIteration"),animationstart:Dl("Animation","AnimationStart"),transitionend:Dl("Transition","TransitionEnd")},kd={},Cg={};u&&(Cg=document.createElement("div").style,"AnimationEvent"in window||(delete Ds.animationend.animation,delete Ds.animationiteration.animation,delete Ds.animationstart.animation),"TransitionEvent"in window||delete Ds.transitionend.transition);function Ll(s){if(kd[s])return kd[s];if(!Ds[s])return s;var l=Ds[s],d;for(d in l)if(l.hasOwnProperty(d)&&d in Cg)return kd[s]=l[d];return s}var jg=Ll("animationend"),Ng=Ll("animationiteration"),Tg=Ll("animationstart"),Ig=Ll("transitionend"),Pg=new Map,Rg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ci(s,l){Pg.set(s,l),o(l,[s])}for(var Sd=0;Sd<Rg.length;Sd++){var Ed=Rg[Sd],gE=Ed.toLowerCase(),yE=Ed[0].toUpperCase()+Ed.slice(1);ci(gE,"on"+yE)}ci(jg,"onAnimationEnd"),ci(Ng,"onAnimationIteration"),ci(Tg,"onAnimationStart"),ci("dblclick","onDoubleClick"),ci("focusin","onFocus"),ci("focusout","onBlur"),ci(Ig,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var aa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vE=new Set("cancel close invalid load scroll toggle".split(" ").concat(aa));function Ag(s,l,d){var g=s.type||"unknown-event";s.currentTarget=d,td(g,l,void 0,s),s.currentTarget=null}function Mg(s,l){l=(l&4)!==0;for(var d=0;d<s.length;d++){var g=s[d],x=g.event;g=g.listeners;e:{var E=void 0;if(l)for(var T=g.length-1;0<=T;T--){var W=g[T],X=W.instance,ce=W.currentTarget;if(W=W.listener,X!==E&&x.isPropagationStopped())break e;Ag(x,W,ce),E=X}else for(T=0;T<g.length;T++){if(W=g[T],X=W.instance,ce=W.currentTarget,W=W.listener,X!==E&&x.isPropagationStopped())break e;Ag(x,W,ce),E=X}}}if(Zt)throw s=Hn,Zt=!1,Hn=null,s}function Tt(s,l){var d=l[Rd];d===void 0&&(d=l[Rd]=new Set);var g=s+"__bubble";d.has(g)||(Og(l,s,2,!1),d.add(g))}function _d(s,l,d){var g=0;l&&(g|=4),Og(d,s,g,l)}var $l="_reactListening"+Math.random().toString(36).slice(2);function la(s){if(!s[$l]){s[$l]=!0,r.forEach(function(d){d!=="selectionchange"&&(vE.has(d)||_d(d,!1,s),_d(d,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[$l]||(l[$l]=!0,_d("selectionchange",!1,l))}}function Og(s,l,d,g){switch(ig(l)){case 1:var x=RS;break;case 4:x=AS;break;default:x=ld}d=x.bind(null,l,d,s),x=void 0,!At||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(x=!0),g?x!==void 0?s.addEventListener(l,d,{capture:!0,passive:x}):s.addEventListener(l,d,!0):x!==void 0?s.addEventListener(l,d,{passive:x}):s.addEventListener(l,d,!1)}function Cd(s,l,d,g,x){var E=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var T=g.tag;if(T===3||T===4){var W=g.stateNode.containerInfo;if(W===x||W.nodeType===8&&W.parentNode===x)break;if(T===4)for(T=g.return;T!==null;){var X=T.tag;if((X===3||X===4)&&(X=T.stateNode.containerInfo,X===x||X.nodeType===8&&X.parentNode===x))return;T=T.return}for(;W!==null;){if(T=qi(W),T===null)return;if(X=T.tag,X===5||X===6){g=E=T;continue e}W=W.parentNode}}g=g.return}vt(function(){var ce=E,xe=dt(d),we=[];e:{var ve=Pg.get(s);if(ve!==void 0){var Me=dd,$e=s;switch(s){case"keypress":if(Rl(d)===0)break e;case"keydown":case"keyup":Me=YS;break;case"focusin":$e="focus",Me=pd;break;case"focusout":$e="blur",Me=pd;break;case"beforeblur":case"afterblur":Me=pd;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Me=ag;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Me=DS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Me=QS;break;case jg:case Ng:case Tg:Me=FS;break;case Ig:Me=ZS;break;case"scroll":Me=MS;break;case"wheel":Me=tE;break;case"copy":case"cut":case"paste":Me=zS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Me=ug}var ze=(l&4)!==0,Ut=!ze&&s==="scroll",oe=ze?ve!==null?ve+"Capture":null:ve;ze=[];for(var re=ce,ae;re!==null;){ae=re;var Se=ae.stateNode;if(ae.tag===5&&Se!==null&&(ae=Se,oe!==null&&(Se=tt(re,oe),Se!=null&&ze.push(ua(re,Se,ae)))),Ut)break;re=re.return}0<ze.length&&(ve=new Me(ve,$e,null,d,xe),we.push({event:ve,listeners:ze}))}}if((l&7)===0){e:{if(ve=s==="mouseover"||s==="pointerover",Me=s==="mouseout"||s==="pointerout",ve&&d!==De&&($e=d.relatedTarget||d.fromElement)&&(qi($e)||$e[Hr]))break e;if((Me||ve)&&(ve=xe.window===xe?xe:(ve=xe.ownerDocument)?ve.defaultView||ve.parentWindow:window,Me?($e=d.relatedTarget||d.toElement,Me=ce,$e=$e?qi($e):null,$e!==null&&(Ut=Vi($e),$e!==Ut||$e.tag!==5&&$e.tag!==6)&&($e=null)):(Me=null,$e=ce),Me!==$e)){if(ze=ag,Se="onMouseLeave",oe="onMouseEnter",re="mouse",(s==="pointerout"||s==="pointerover")&&(ze=ug,Se="onPointerLeave",oe="onPointerEnter",re="pointer"),Ut=Me==null?ve:Fs(Me),ae=$e==null?ve:Fs($e),ve=new ze(Se,re+"leave",Me,d,xe),ve.target=Ut,ve.relatedTarget=ae,Se=null,qi(xe)===ce&&(ze=new ze(oe,re+"enter",$e,d,xe),ze.target=ae,ze.relatedTarget=Ut,Se=ze),Ut=Se,Me&&$e)t:{for(ze=Me,oe=$e,re=0,ae=ze;ae;ae=Ls(ae))re++;for(ae=0,Se=oe;Se;Se=Ls(Se))ae++;for(;0<re-ae;)ze=Ls(ze),re--;for(;0<ae-re;)oe=Ls(oe),ae--;for(;re--;){if(ze===oe||oe!==null&&ze===oe.alternate)break t;ze=Ls(ze),oe=Ls(oe)}ze=null}else ze=null;Me!==null&&Dg(we,ve,Me,ze,!1),$e!==null&&Ut!==null&&Dg(we,Ut,$e,ze,!0)}}e:{if(ve=ce?Fs(ce):window,Me=ve.nodeName&&ve.nodeName.toLowerCase(),Me==="select"||Me==="input"&&ve.type==="file")var Ue=lE;else if(mg(ve))if(yg)Ue=fE;else{Ue=cE;var Je=uE}else(Me=ve.nodeName)&&Me.toLowerCase()==="input"&&(ve.type==="checkbox"||ve.type==="radio")&&(Ue=dE);if(Ue&&(Ue=Ue(s,ce))){gg(we,Ue,d,xe);break e}Je&&Je(s,ve,ce),s==="focusout"&&(Je=ve._wrapperState)&&Je.controlled&&ve.type==="number"&&Xt(ve,"number",ve.value)}switch(Je=ce?Fs(ce):window,s){case"focusin":(mg(Je)||Je.contentEditable==="true")&&(Os=Je,bd=ce,oa=null);break;case"focusout":oa=bd=Os=null;break;case"mousedown":wd=!0;break;case"contextmenu":case"mouseup":case"dragend":wd=!1,_g(we,d,xe);break;case"selectionchange":if(mE)break;case"keydown":case"keyup":_g(we,d,xe)}var Qe;if(gd)e:{switch(s){case"compositionstart":var nt="onCompositionStart";break e;case"compositionend":nt="onCompositionEnd";break e;case"compositionupdate":nt="onCompositionUpdate";break e}nt=void 0}else Ms?hg(s,d)&&(nt="onCompositionEnd"):s==="keydown"&&d.keyCode===229&&(nt="onCompositionStart");nt&&(cg&&d.locale!=="ko"&&(Ms||nt!=="onCompositionStart"?nt==="onCompositionEnd"&&Ms&&(Qe=sg()):(ui=xe,cd="value"in ui?ui.value:ui.textContent,Ms=!0)),Je=Fl(ce,nt),0<Je.length&&(nt=new lg(nt,s,null,d,xe),we.push({event:nt,listeners:Je}),Qe?nt.data=Qe:(Qe=pg(d),Qe!==null&&(nt.data=Qe)))),(Qe=rE?iE(s,d):sE(s,d))&&(ce=Fl(ce,"onBeforeInput"),0<ce.length&&(xe=new lg("onBeforeInput","beforeinput",null,d,xe),we.push({event:xe,listeners:ce}),xe.data=Qe))}Mg(we,l)})}function ua(s,l,d){return{instance:s,listener:l,currentTarget:d}}function Fl(s,l){for(var d=l+"Capture",g=[];s!==null;){var x=s,E=x.stateNode;x.tag===5&&E!==null&&(x=E,E=tt(s,d),E!=null&&g.unshift(ua(s,E,x)),E=tt(s,l),E!=null&&g.push(ua(s,E,x))),s=s.return}return g}function Ls(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Dg(s,l,d,g,x){for(var E=l._reactName,T=[];d!==null&&d!==g;){var W=d,X=W.alternate,ce=W.stateNode;if(X!==null&&X===g)break;W.tag===5&&ce!==null&&(W=ce,x?(X=tt(d,E),X!=null&&T.unshift(ua(d,X,W))):x||(X=tt(d,E),X!=null&&T.push(ua(d,X,W)))),d=d.return}T.length!==0&&s.push({event:l,listeners:T})}var xE=/\r\n?/g,bE=/\u0000|\uFFFD/g;function Lg(s){return(typeof s=="string"?s:""+s).replace(xE,`
`).replace(bE,"")}function Bl(s,l,d){if(l=Lg(l),Lg(s)!==l&&d)throw Error(n(425))}function zl(){}var jd=null,Nd=null;function Td(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Id=typeof setTimeout=="function"?setTimeout:void 0,wE=typeof clearTimeout=="function"?clearTimeout:void 0,$g=typeof Promise=="function"?Promise:void 0,kE=typeof queueMicrotask=="function"?queueMicrotask:typeof $g<"u"?function(s){return $g.resolve(null).then(s).catch(SE)}:Id;function SE(s){setTimeout(function(){throw s})}function Pd(s,l){var d=l,g=0;do{var x=d.nextSibling;if(s.removeChild(d),x&&x.nodeType===8)if(d=x.data,d==="/$"){if(g===0){s.removeChild(x),Zo(l);return}g--}else d!=="$"&&d!=="$?"&&d!=="$!"||g++;d=x}while(d);Zo(l)}function di(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return s}function Fg(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var d=s.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return s;l--}else d==="/$"&&l++}s=s.previousSibling}return null}var $s=Math.random().toString(36).slice(2),Nr="__reactFiber$"+$s,ca="__reactProps$"+$s,Hr="__reactContainer$"+$s,Rd="__reactEvents$"+$s,EE="__reactListeners$"+$s,_E="__reactHandles$"+$s;function qi(s){var l=s[Nr];if(l)return l;for(var d=s.parentNode;d;){if(l=d[Hr]||d[Nr]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(s=Fg(s);s!==null;){if(d=s[Nr])return d;s=Fg(s)}return l}s=d,d=s.parentNode}return null}function da(s){return s=s[Nr]||s[Hr],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Fs(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(n(33))}function Ul(s){return s[ca]||null}var Ad=[],Bs=-1;function fi(s){return{current:s}}function It(s){0>Bs||(s.current=Ad[Bs],Ad[Bs]=null,Bs--)}function Ct(s,l){Bs++,Ad[Bs]=s.current,s.current=l}var hi={},gn=fi(hi),Pn=fi(!1),Ki=hi;function zs(s,l){var d=s.type.contextTypes;if(!d)return hi;var g=s.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===l)return g.__reactInternalMemoizedMaskedChildContext;var x={},E;for(E in d)x[E]=l[E];return g&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=l,s.__reactInternalMemoizedMaskedChildContext=x),x}function Rn(s){return s=s.childContextTypes,s!=null}function Wl(){It(Pn),It(gn)}function Bg(s,l,d){if(gn.current!==hi)throw Error(n(168));Ct(gn,l),Ct(Pn,d)}function zg(s,l,d){var g=s.stateNode;if(l=l.childContextTypes,typeof g.getChildContext!="function")return d;g=g.getChildContext();for(var x in g)if(!(x in l))throw Error(n(108,me(s)||"Unknown",x));return N({},d,g)}function Hl(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||hi,Ki=gn.current,Ct(gn,s),Ct(Pn,Pn.current),!0}function Ug(s,l,d){var g=s.stateNode;if(!g)throw Error(n(169));d?(s=zg(s,l,Ki),g.__reactInternalMemoizedMergedChildContext=s,It(Pn),It(gn),Ct(gn,s)):It(Pn),Ct(Pn,d)}var Vr=null,Vl=!1,Md=!1;function Wg(s){Vr===null?Vr=[s]:Vr.push(s)}function CE(s){Vl=!0,Wg(s)}function pi(){if(!Md&&Vr!==null){Md=!0;var s=0,l=xt;try{var d=Vr;for(xt=1;s<d.length;s++){var g=d[s];do g=g(!0);while(g!==null)}Vr=null,Vl=!1}catch(x){throw Vr!==null&&(Vr=Vr.slice(s+1)),Vm(nd,pi),x}finally{xt=l,Md=!1}}return null}var Us=[],Ws=0,ql=null,Kl=0,nr=[],rr=0,Yi=null,qr=1,Kr="";function Gi(s,l){Us[Ws++]=Kl,Us[Ws++]=ql,ql=s,Kl=l}function Hg(s,l,d){nr[rr++]=qr,nr[rr++]=Kr,nr[rr++]=Yi,Yi=s;var g=qr;s=Kr;var x=32-fr(g)-1;g&=~(1<<x),d+=1;var E=32-fr(l)+x;if(30<E){var T=x-x%5;E=(g&(1<<T)-1).toString(32),g>>=T,x-=T,qr=1<<32-fr(l)+x|d<<x|g,Kr=E+s}else qr=1<<E|d<<x|g,Kr=s}function Od(s){s.return!==null&&(Gi(s,1),Hg(s,1,0))}function Dd(s){for(;s===ql;)ql=Us[--Ws],Us[Ws]=null,Kl=Us[--Ws],Us[Ws]=null;for(;s===Yi;)Yi=nr[--rr],nr[rr]=null,Kr=nr[--rr],nr[rr]=null,qr=nr[--rr],nr[rr]=null}var qn=null,Kn=null,Mt=!1,pr=null;function Vg(s,l){var d=ar(5,null,null,0);d.elementType="DELETED",d.stateNode=l,d.return=s,l=s.deletions,l===null?(s.deletions=[d],s.flags|=16):l.push(d)}function qg(s,l){switch(s.tag){case 5:var d=s.type;return l=l.nodeType!==1||d.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(s.stateNode=l,qn=s,Kn=di(l.firstChild),!0):!1;case 6:return l=s.pendingProps===""||l.nodeType!==3?null:l,l!==null?(s.stateNode=l,qn=s,Kn=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(d=Yi!==null?{id:qr,overflow:Kr}:null,s.memoizedState={dehydrated:l,treeContext:d,retryLane:1073741824},d=ar(18,null,null,0),d.stateNode=l,d.return=s,s.child=d,qn=s,Kn=null,!0):!1;default:return!1}}function Ld(s){return(s.mode&1)!==0&&(s.flags&128)===0}function $d(s){if(Mt){var l=Kn;if(l){var d=l;if(!qg(s,l)){if(Ld(s))throw Error(n(418));l=di(d.nextSibling);var g=qn;l&&qg(s,l)?Vg(g,d):(s.flags=s.flags&-4097|2,Mt=!1,qn=s)}}else{if(Ld(s))throw Error(n(418));s.flags=s.flags&-4097|2,Mt=!1,qn=s}}}function Kg(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;qn=s}function Yl(s){if(s!==qn)return!1;if(!Mt)return Kg(s),Mt=!0,!1;var l;if((l=s.tag!==3)&&!(l=s.tag!==5)&&(l=s.type,l=l!=="head"&&l!=="body"&&!Td(s.type,s.memoizedProps)),l&&(l=Kn)){if(Ld(s))throw Yg(),Error(n(418));for(;l;)Vg(s,l),l=di(l.nextSibling)}if(Kg(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));e:{for(s=s.nextSibling,l=0;s;){if(s.nodeType===8){var d=s.data;if(d==="/$"){if(l===0){Kn=di(s.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++}s=s.nextSibling}Kn=null}}else Kn=qn?di(s.stateNode.nextSibling):null;return!0}function Yg(){for(var s=Kn;s;)s=di(s.nextSibling)}function Hs(){Kn=qn=null,Mt=!1}function Fd(s){pr===null?pr=[s]:pr.push(s)}var jE=I.ReactCurrentBatchConfig;function fa(s,l,d){if(s=d.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(n(309));var g=d.stateNode}if(!g)throw Error(n(147,s));var x=g,E=""+s;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===E?l.ref:(l=function(T){var W=x.refs;T===null?delete W[E]:W[E]=T},l._stringRef=E,l)}if(typeof s!="string")throw Error(n(284));if(!d._owner)throw Error(n(290,s))}return s}function Gl(s,l){throw s=Object.prototype.toString.call(l),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s))}function Gg(s){var l=s._init;return l(s._payload)}function Jg(s){function l(oe,re){if(s){var ae=oe.deletions;ae===null?(oe.deletions=[re],oe.flags|=16):ae.push(re)}}function d(oe,re){if(!s)return null;for(;re!==null;)l(oe,re),re=re.sibling;return null}function g(oe,re){for(oe=new Map;re!==null;)re.key!==null?oe.set(re.key,re):oe.set(re.index,re),re=re.sibling;return oe}function x(oe,re){return oe=ki(oe,re),oe.index=0,oe.sibling=null,oe}function E(oe,re,ae){return oe.index=ae,s?(ae=oe.alternate,ae!==null?(ae=ae.index,ae<re?(oe.flags|=2,re):ae):(oe.flags|=2,re)):(oe.flags|=1048576,re)}function T(oe){return s&&oe.alternate===null&&(oe.flags|=2),oe}function W(oe,re,ae,Se){return re===null||re.tag!==6?(re=Pf(ae,oe.mode,Se),re.return=oe,re):(re=x(re,ae),re.return=oe,re)}function X(oe,re,ae,Se){var Ue=ae.type;return Ue===U?xe(oe,re,ae.props.children,Se,ae.key):re!==null&&(re.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===se&&Gg(Ue)===re.type)?(Se=x(re,ae.props),Se.ref=fa(oe,re,ae),Se.return=oe,Se):(Se=xu(ae.type,ae.key,ae.props,null,oe.mode,Se),Se.ref=fa(oe,re,ae),Se.return=oe,Se)}function ce(oe,re,ae,Se){return re===null||re.tag!==4||re.stateNode.containerInfo!==ae.containerInfo||re.stateNode.implementation!==ae.implementation?(re=Rf(ae,oe.mode,Se),re.return=oe,re):(re=x(re,ae.children||[]),re.return=oe,re)}function xe(oe,re,ae,Se,Ue){return re===null||re.tag!==7?(re=rs(ae,oe.mode,Se,Ue),re.return=oe,re):(re=x(re,ae),re.return=oe,re)}function we(oe,re,ae){if(typeof re=="string"&&re!==""||typeof re=="number")return re=Pf(""+re,oe.mode,ae),re.return=oe,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case D:return ae=xu(re.type,re.key,re.props,null,oe.mode,ae),ae.ref=fa(oe,null,re),ae.return=oe,ae;case A:return re=Rf(re,oe.mode,ae),re.return=oe,re;case se:var Se=re._init;return we(oe,Se(re._payload),ae)}if(wt(re)||L(re))return re=rs(re,oe.mode,ae,null),re.return=oe,re;Gl(oe,re)}return null}function ve(oe,re,ae,Se){var Ue=re!==null?re.key:null;if(typeof ae=="string"&&ae!==""||typeof ae=="number")return Ue!==null?null:W(oe,re,""+ae,Se);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case D:return ae.key===Ue?X(oe,re,ae,Se):null;case A:return ae.key===Ue?ce(oe,re,ae,Se):null;case se:return Ue=ae._init,ve(oe,re,Ue(ae._payload),Se)}if(wt(ae)||L(ae))return Ue!==null?null:xe(oe,re,ae,Se,null);Gl(oe,ae)}return null}function Me(oe,re,ae,Se,Ue){if(typeof Se=="string"&&Se!==""||typeof Se=="number")return oe=oe.get(ae)||null,W(re,oe,""+Se,Ue);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case D:return oe=oe.get(Se.key===null?ae:Se.key)||null,X(re,oe,Se,Ue);case A:return oe=oe.get(Se.key===null?ae:Se.key)||null,ce(re,oe,Se,Ue);case se:var Je=Se._init;return Me(oe,re,ae,Je(Se._payload),Ue)}if(wt(Se)||L(Se))return oe=oe.get(ae)||null,xe(re,oe,Se,Ue,null);Gl(re,Se)}return null}function $e(oe,re,ae,Se){for(var Ue=null,Je=null,Qe=re,nt=re=0,an=null;Qe!==null&&nt<ae.length;nt++){Qe.index>nt?(an=Qe,Qe=null):an=Qe.sibling;var mt=ve(oe,Qe,ae[nt],Se);if(mt===null){Qe===null&&(Qe=an);break}s&&Qe&&mt.alternate===null&&l(oe,Qe),re=E(mt,re,nt),Je===null?Ue=mt:Je.sibling=mt,Je=mt,Qe=an}if(nt===ae.length)return d(oe,Qe),Mt&&Gi(oe,nt),Ue;if(Qe===null){for(;nt<ae.length;nt++)Qe=we(oe,ae[nt],Se),Qe!==null&&(re=E(Qe,re,nt),Je===null?Ue=Qe:Je.sibling=Qe,Je=Qe);return Mt&&Gi(oe,nt),Ue}for(Qe=g(oe,Qe);nt<ae.length;nt++)an=Me(Qe,oe,nt,ae[nt],Se),an!==null&&(s&&an.alternate!==null&&Qe.delete(an.key===null?nt:an.key),re=E(an,re,nt),Je===null?Ue=an:Je.sibling=an,Je=an);return s&&Qe.forEach(function(Si){return l(oe,Si)}),Mt&&Gi(oe,nt),Ue}function ze(oe,re,ae,Se){var Ue=L(ae);if(typeof Ue!="function")throw Error(n(150));if(ae=Ue.call(ae),ae==null)throw Error(n(151));for(var Je=Ue=null,Qe=re,nt=re=0,an=null,mt=ae.next();Qe!==null&&!mt.done;nt++,mt=ae.next()){Qe.index>nt?(an=Qe,Qe=null):an=Qe.sibling;var Si=ve(oe,Qe,mt.value,Se);if(Si===null){Qe===null&&(Qe=an);break}s&&Qe&&Si.alternate===null&&l(oe,Qe),re=E(Si,re,nt),Je===null?Ue=Si:Je.sibling=Si,Je=Si,Qe=an}if(mt.done)return d(oe,Qe),Mt&&Gi(oe,nt),Ue;if(Qe===null){for(;!mt.done;nt++,mt=ae.next())mt=we(oe,mt.value,Se),mt!==null&&(re=E(mt,re,nt),Je===null?Ue=mt:Je.sibling=mt,Je=mt);return Mt&&Gi(oe,nt),Ue}for(Qe=g(oe,Qe);!mt.done;nt++,mt=ae.next())mt=Me(Qe,oe,nt,mt.value,Se),mt!==null&&(s&&mt.alternate!==null&&Qe.delete(mt.key===null?nt:mt.key),re=E(mt,re,nt),Je===null?Ue=mt:Je.sibling=mt,Je=mt);return s&&Qe.forEach(function(o_){return l(oe,o_)}),Mt&&Gi(oe,nt),Ue}function Ut(oe,re,ae,Se){if(typeof ae=="object"&&ae!==null&&ae.type===U&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case D:e:{for(var Ue=ae.key,Je=re;Je!==null;){if(Je.key===Ue){if(Ue=ae.type,Ue===U){if(Je.tag===7){d(oe,Je.sibling),re=x(Je,ae.props.children),re.return=oe,oe=re;break e}}else if(Je.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===se&&Gg(Ue)===Je.type){d(oe,Je.sibling),re=x(Je,ae.props),re.ref=fa(oe,Je,ae),re.return=oe,oe=re;break e}d(oe,Je);break}else l(oe,Je);Je=Je.sibling}ae.type===U?(re=rs(ae.props.children,oe.mode,Se,ae.key),re.return=oe,oe=re):(Se=xu(ae.type,ae.key,ae.props,null,oe.mode,Se),Se.ref=fa(oe,re,ae),Se.return=oe,oe=Se)}return T(oe);case A:e:{for(Je=ae.key;re!==null;){if(re.key===Je)if(re.tag===4&&re.stateNode.containerInfo===ae.containerInfo&&re.stateNode.implementation===ae.implementation){d(oe,re.sibling),re=x(re,ae.children||[]),re.return=oe,oe=re;break e}else{d(oe,re);break}else l(oe,re);re=re.sibling}re=Rf(ae,oe.mode,Se),re.return=oe,oe=re}return T(oe);case se:return Je=ae._init,Ut(oe,re,Je(ae._payload),Se)}if(wt(ae))return $e(oe,re,ae,Se);if(L(ae))return ze(oe,re,ae,Se);Gl(oe,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"?(ae=""+ae,re!==null&&re.tag===6?(d(oe,re.sibling),re=x(re,ae),re.return=oe,oe=re):(d(oe,re),re=Pf(ae,oe.mode,Se),re.return=oe,oe=re),T(oe)):d(oe,re)}return Ut}var Vs=Jg(!0),Qg=Jg(!1),Jl=fi(null),Ql=null,qs=null,Bd=null;function zd(){Bd=qs=Ql=null}function Ud(s){var l=Jl.current;It(Jl),s._currentValue=l}function Wd(s,l,d){for(;s!==null;){var g=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),s===d)break;s=s.return}}function Ks(s,l){Ql=s,Bd=qs=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&l)!==0&&(An=!0),s.firstContext=null)}function ir(s){var l=s._currentValue;if(Bd!==s)if(s={context:s,memoizedValue:l,next:null},qs===null){if(Ql===null)throw Error(n(308));qs=s,Ql.dependencies={lanes:0,firstContext:s}}else qs=qs.next=s;return l}var Ji=null;function Hd(s){Ji===null?Ji=[s]:Ji.push(s)}function Xg(s,l,d,g){var x=l.interleaved;return x===null?(d.next=d,Hd(l)):(d.next=x.next,x.next=d),l.interleaved=d,Yr(s,g)}function Yr(s,l){s.lanes|=l;var d=s.alternate;for(d!==null&&(d.lanes|=l),d=s,s=s.return;s!==null;)s.childLanes|=l,d=s.alternate,d!==null&&(d.childLanes|=l),d=s,s=s.return;return d.tag===3?d.stateNode:null}var mi=!1;function Vd(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zg(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Gr(s,l){return{eventTime:s,lane:l,tag:0,payload:null,callback:null,next:null}}function gi(s,l,d){var g=s.updateQueue;if(g===null)return null;if(g=g.shared,(pt&2)!==0){var x=g.pending;return x===null?l.next=l:(l.next=x.next,x.next=l),g.pending=l,Yr(s,d)}return x=g.interleaved,x===null?(l.next=l,Hd(g)):(l.next=x.next,x.next=l),g.interleaved=l,Yr(s,d)}function Xl(s,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194240)!==0)){var g=l.lanes;g&=s.pendingLanes,d|=g,l.lanes=d,sd(s,d)}}function ey(s,l){var d=s.updateQueue,g=s.alternate;if(g!==null&&(g=g.updateQueue,d===g)){var x=null,E=null;if(d=d.firstBaseUpdate,d!==null){do{var T={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};E===null?x=E=T:E=E.next=T,d=d.next}while(d!==null);E===null?x=E=l:E=E.next=l}else x=E=l;d={baseState:g.baseState,firstBaseUpdate:x,lastBaseUpdate:E,shared:g.shared,effects:g.effects},s.updateQueue=d;return}s=d.lastBaseUpdate,s===null?d.firstBaseUpdate=l:s.next=l,d.lastBaseUpdate=l}function Zl(s,l,d,g){var x=s.updateQueue;mi=!1;var E=x.firstBaseUpdate,T=x.lastBaseUpdate,W=x.shared.pending;if(W!==null){x.shared.pending=null;var X=W,ce=X.next;X.next=null,T===null?E=ce:T.next=ce,T=X;var xe=s.alternate;xe!==null&&(xe=xe.updateQueue,W=xe.lastBaseUpdate,W!==T&&(W===null?xe.firstBaseUpdate=ce:W.next=ce,xe.lastBaseUpdate=X))}if(E!==null){var we=x.baseState;T=0,xe=ce=X=null,W=E;do{var ve=W.lane,Me=W.eventTime;if((g&ve)===ve){xe!==null&&(xe=xe.next={eventTime:Me,lane:0,tag:W.tag,payload:W.payload,callback:W.callback,next:null});e:{var $e=s,ze=W;switch(ve=l,Me=d,ze.tag){case 1:if($e=ze.payload,typeof $e=="function"){we=$e.call(Me,we,ve);break e}we=$e;break e;case 3:$e.flags=$e.flags&-65537|128;case 0:if($e=ze.payload,ve=typeof $e=="function"?$e.call(Me,we,ve):$e,ve==null)break e;we=N({},we,ve);break e;case 2:mi=!0}}W.callback!==null&&W.lane!==0&&(s.flags|=64,ve=x.effects,ve===null?x.effects=[W]:ve.push(W))}else Me={eventTime:Me,lane:ve,tag:W.tag,payload:W.payload,callback:W.callback,next:null},xe===null?(ce=xe=Me,X=we):xe=xe.next=Me,T|=ve;if(W=W.next,W===null){if(W=x.shared.pending,W===null)break;ve=W,W=ve.next,ve.next=null,x.lastBaseUpdate=ve,x.shared.pending=null}}while(!0);if(xe===null&&(X=we),x.baseState=X,x.firstBaseUpdate=ce,x.lastBaseUpdate=xe,l=x.shared.interleaved,l!==null){x=l;do T|=x.lane,x=x.next;while(x!==l)}else E===null&&(x.shared.lanes=0);Zi|=T,s.lanes=T,s.memoizedState=we}}function ty(s,l,d){if(s=l.effects,l.effects=null,s!==null)for(l=0;l<s.length;l++){var g=s[l],x=g.callback;if(x!==null){if(g.callback=null,g=d,typeof x!="function")throw Error(n(191,x));x.call(g)}}}var ha={},Tr=fi(ha),pa=fi(ha),ma=fi(ha);function Qi(s){if(s===ha)throw Error(n(174));return s}function qd(s,l){switch(Ct(ma,l),Ct(pa,s),Ct(Tr,ha),s=l.nodeType,s){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:P(null,"");break;default:s=s===8?l.parentNode:l,l=s.namespaceURI||null,s=s.tagName,l=P(l,s)}It(Tr),Ct(Tr,l)}function Ys(){It(Tr),It(pa),It(ma)}function ny(s){Qi(ma.current);var l=Qi(Tr.current),d=P(l,s.type);l!==d&&(Ct(pa,s),Ct(Tr,d))}function Kd(s){pa.current===s&&(It(Tr),It(pa))}var Ot=fi(0);function eu(s){for(var l=s;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Yd=[];function Gd(){for(var s=0;s<Yd.length;s++)Yd[s]._workInProgressVersionPrimary=null;Yd.length=0}var tu=I.ReactCurrentDispatcher,Jd=I.ReactCurrentBatchConfig,Xi=0,Dt=null,en=null,sn=null,nu=!1,ga=!1,ya=0,NE=0;function yn(){throw Error(n(321))}function Qd(s,l){if(l===null)return!1;for(var d=0;d<l.length&&d<s.length;d++)if(!hr(s[d],l[d]))return!1;return!0}function Xd(s,l,d,g,x,E){if(Xi=E,Dt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,tu.current=s===null||s.memoizedState===null?RE:AE,s=d(g,x),ga){E=0;do{if(ga=!1,ya=0,25<=E)throw Error(n(301));E+=1,sn=en=null,l.updateQueue=null,tu.current=ME,s=d(g,x)}while(ga)}if(tu.current=su,l=en!==null&&en.next!==null,Xi=0,sn=en=Dt=null,nu=!1,l)throw Error(n(300));return s}function Zd(){var s=ya!==0;return ya=0,s}function Ir(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sn===null?Dt.memoizedState=sn=s:sn=sn.next=s,sn}function sr(){if(en===null){var s=Dt.alternate;s=s!==null?s.memoizedState:null}else s=en.next;var l=sn===null?Dt.memoizedState:sn.next;if(l!==null)sn=l,en=s;else{if(s===null)throw Error(n(310));en=s,s={memoizedState:en.memoizedState,baseState:en.baseState,baseQueue:en.baseQueue,queue:en.queue,next:null},sn===null?Dt.memoizedState=sn=s:sn=sn.next=s}return sn}function va(s,l){return typeof l=="function"?l(s):l}function ef(s){var l=sr(),d=l.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=s;var g=en,x=g.baseQueue,E=d.pending;if(E!==null){if(x!==null){var T=x.next;x.next=E.next,E.next=T}g.baseQueue=x=E,d.pending=null}if(x!==null){E=x.next,g=g.baseState;var W=T=null,X=null,ce=E;do{var xe=ce.lane;if((Xi&xe)===xe)X!==null&&(X=X.next={lane:0,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null}),g=ce.hasEagerState?ce.eagerState:s(g,ce.action);else{var we={lane:xe,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null};X===null?(W=X=we,T=g):X=X.next=we,Dt.lanes|=xe,Zi|=xe}ce=ce.next}while(ce!==null&&ce!==E);X===null?T=g:X.next=W,hr(g,l.memoizedState)||(An=!0),l.memoizedState=g,l.baseState=T,l.baseQueue=X,d.lastRenderedState=g}if(s=d.interleaved,s!==null){x=s;do E=x.lane,Dt.lanes|=E,Zi|=E,x=x.next;while(x!==s)}else x===null&&(d.lanes=0);return[l.memoizedState,d.dispatch]}function tf(s){var l=sr(),d=l.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=s;var g=d.dispatch,x=d.pending,E=l.memoizedState;if(x!==null){d.pending=null;var T=x=x.next;do E=s(E,T.action),T=T.next;while(T!==x);hr(E,l.memoizedState)||(An=!0),l.memoizedState=E,l.baseQueue===null&&(l.baseState=E),d.lastRenderedState=E}return[E,g]}function ry(){}function iy(s,l){var d=Dt,g=sr(),x=l(),E=!hr(g.memoizedState,x);if(E&&(g.memoizedState=x,An=!0),g=g.queue,nf(ay.bind(null,d,g,s),[s]),g.getSnapshot!==l||E||sn!==null&&sn.memoizedState.tag&1){if(d.flags|=2048,xa(9,oy.bind(null,d,g,x,l),void 0,null),on===null)throw Error(n(349));(Xi&30)!==0||sy(d,l,x)}return x}function sy(s,l,d){s.flags|=16384,s={getSnapshot:l,value:d},l=Dt.updateQueue,l===null?(l={lastEffect:null,stores:null},Dt.updateQueue=l,l.stores=[s]):(d=l.stores,d===null?l.stores=[s]:d.push(s))}function oy(s,l,d,g){l.value=d,l.getSnapshot=g,ly(l)&&uy(s)}function ay(s,l,d){return d(function(){ly(l)&&uy(s)})}function ly(s){var l=s.getSnapshot;s=s.value;try{var d=l();return!hr(s,d)}catch{return!0}}function uy(s){var l=Yr(s,1);l!==null&&vr(l,s,1,-1)}function cy(s){var l=Ir();return typeof s=="function"&&(s=s()),l.memoizedState=l.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:s},l.queue=s,s=s.dispatch=PE.bind(null,Dt,s),[l.memoizedState,s]}function xa(s,l,d,g){return s={tag:s,create:l,destroy:d,deps:g,next:null},l=Dt.updateQueue,l===null?(l={lastEffect:null,stores:null},Dt.updateQueue=l,l.lastEffect=s.next=s):(d=l.lastEffect,d===null?l.lastEffect=s.next=s:(g=d.next,d.next=s,s.next=g,l.lastEffect=s)),s}function dy(){return sr().memoizedState}function ru(s,l,d,g){var x=Ir();Dt.flags|=s,x.memoizedState=xa(1|l,d,void 0,g===void 0?null:g)}function iu(s,l,d,g){var x=sr();g=g===void 0?null:g;var E=void 0;if(en!==null){var T=en.memoizedState;if(E=T.destroy,g!==null&&Qd(g,T.deps)){x.memoizedState=xa(l,d,E,g);return}}Dt.flags|=s,x.memoizedState=xa(1|l,d,E,g)}function fy(s,l){return ru(8390656,8,s,l)}function nf(s,l){return iu(2048,8,s,l)}function hy(s,l){return iu(4,2,s,l)}function py(s,l){return iu(4,4,s,l)}function my(s,l){if(typeof l=="function")return s=s(),l(s),function(){l(null)};if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function gy(s,l,d){return d=d!=null?d.concat([s]):null,iu(4,4,my.bind(null,l,s),d)}function rf(){}function yy(s,l){var d=sr();l=l===void 0?null:l;var g=d.memoizedState;return g!==null&&l!==null&&Qd(l,g[1])?g[0]:(d.memoizedState=[s,l],s)}function vy(s,l){var d=sr();l=l===void 0?null:l;var g=d.memoizedState;return g!==null&&l!==null&&Qd(l,g[1])?g[0]:(s=s(),d.memoizedState=[s,l],s)}function xy(s,l,d){return(Xi&21)===0?(s.baseState&&(s.baseState=!1,An=!0),s.memoizedState=d):(hr(d,l)||(d=Gm(),Dt.lanes|=d,Zi|=d,s.baseState=!0),l)}function TE(s,l){var d=xt;xt=d!==0&&4>d?d:4,s(!0);var g=Jd.transition;Jd.transition={};try{s(!1),l()}finally{xt=d,Jd.transition=g}}function by(){return sr().memoizedState}function IE(s,l,d){var g=bi(s);if(d={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null},wy(s))ky(l,d);else if(d=Xg(s,l,d,g),d!==null){var x=Cn();vr(d,s,g,x),Sy(d,l,g)}}function PE(s,l,d){var g=bi(s),x={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null};if(wy(s))ky(l,x);else{var E=s.alternate;if(s.lanes===0&&(E===null||E.lanes===0)&&(E=l.lastRenderedReducer,E!==null))try{var T=l.lastRenderedState,W=E(T,d);if(x.hasEagerState=!0,x.eagerState=W,hr(W,T)){var X=l.interleaved;X===null?(x.next=x,Hd(l)):(x.next=X.next,X.next=x),l.interleaved=x;return}}catch{}finally{}d=Xg(s,l,x,g),d!==null&&(x=Cn(),vr(d,s,g,x),Sy(d,l,g))}}function wy(s){var l=s.alternate;return s===Dt||l!==null&&l===Dt}function ky(s,l){ga=nu=!0;var d=s.pending;d===null?l.next=l:(l.next=d.next,d.next=l),s.pending=l}function Sy(s,l,d){if((d&4194240)!==0){var g=l.lanes;g&=s.pendingLanes,d|=g,l.lanes=d,sd(s,d)}}var su={readContext:ir,useCallback:yn,useContext:yn,useEffect:yn,useImperativeHandle:yn,useInsertionEffect:yn,useLayoutEffect:yn,useMemo:yn,useReducer:yn,useRef:yn,useState:yn,useDebugValue:yn,useDeferredValue:yn,useTransition:yn,useMutableSource:yn,useSyncExternalStore:yn,useId:yn,unstable_isNewReconciler:!1},RE={readContext:ir,useCallback:function(s,l){return Ir().memoizedState=[s,l===void 0?null:l],s},useContext:ir,useEffect:fy,useImperativeHandle:function(s,l,d){return d=d!=null?d.concat([s]):null,ru(4194308,4,my.bind(null,l,s),d)},useLayoutEffect:function(s,l){return ru(4194308,4,s,l)},useInsertionEffect:function(s,l){return ru(4,2,s,l)},useMemo:function(s,l){var d=Ir();return l=l===void 0?null:l,s=s(),d.memoizedState=[s,l],s},useReducer:function(s,l,d){var g=Ir();return l=d!==void 0?d(l):l,g.memoizedState=g.baseState=l,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:l},g.queue=s,s=s.dispatch=IE.bind(null,Dt,s),[g.memoizedState,s]},useRef:function(s){var l=Ir();return s={current:s},l.memoizedState=s},useState:cy,useDebugValue:rf,useDeferredValue:function(s){return Ir().memoizedState=s},useTransition:function(){var s=cy(!1),l=s[0];return s=TE.bind(null,s[1]),Ir().memoizedState=s,[l,s]},useMutableSource:function(){},useSyncExternalStore:function(s,l,d){var g=Dt,x=Ir();if(Mt){if(d===void 0)throw Error(n(407));d=d()}else{if(d=l(),on===null)throw Error(n(349));(Xi&30)!==0||sy(g,l,d)}x.memoizedState=d;var E={value:d,getSnapshot:l};return x.queue=E,fy(ay.bind(null,g,E,s),[s]),g.flags|=2048,xa(9,oy.bind(null,g,E,d,l),void 0,null),d},useId:function(){var s=Ir(),l=on.identifierPrefix;if(Mt){var d=Kr,g=qr;d=(g&~(1<<32-fr(g)-1)).toString(32)+d,l=":"+l+"R"+d,d=ya++,0<d&&(l+="H"+d.toString(32)),l+=":"}else d=NE++,l=":"+l+"r"+d.toString(32)+":";return s.memoizedState=l},unstable_isNewReconciler:!1},AE={readContext:ir,useCallback:yy,useContext:ir,useEffect:nf,useImperativeHandle:gy,useInsertionEffect:hy,useLayoutEffect:py,useMemo:vy,useReducer:ef,useRef:dy,useState:function(){return ef(va)},useDebugValue:rf,useDeferredValue:function(s){var l=sr();return xy(l,en.memoizedState,s)},useTransition:function(){var s=ef(va)[0],l=sr().memoizedState;return[s,l]},useMutableSource:ry,useSyncExternalStore:iy,useId:by,unstable_isNewReconciler:!1},ME={readContext:ir,useCallback:yy,useContext:ir,useEffect:nf,useImperativeHandle:gy,useInsertionEffect:hy,useLayoutEffect:py,useMemo:vy,useReducer:tf,useRef:dy,useState:function(){return tf(va)},useDebugValue:rf,useDeferredValue:function(s){var l=sr();return en===null?l.memoizedState=s:xy(l,en.memoizedState,s)},useTransition:function(){var s=tf(va)[0],l=sr().memoizedState;return[s,l]},useMutableSource:ry,useSyncExternalStore:iy,useId:by,unstable_isNewReconciler:!1};function mr(s,l){if(s&&s.defaultProps){l=N({},l),s=s.defaultProps;for(var d in s)l[d]===void 0&&(l[d]=s[d]);return l}return l}function sf(s,l,d,g){l=s.memoizedState,d=d(g,l),d=d==null?l:N({},l,d),s.memoizedState=d,s.lanes===0&&(s.updateQueue.baseState=d)}var ou={isMounted:function(s){return(s=s._reactInternals)?Vi(s)===s:!1},enqueueSetState:function(s,l,d){s=s._reactInternals;var g=Cn(),x=bi(s),E=Gr(g,x);E.payload=l,d!=null&&(E.callback=d),l=gi(s,E,x),l!==null&&(vr(l,s,x,g),Xl(l,s,x))},enqueueReplaceState:function(s,l,d){s=s._reactInternals;var g=Cn(),x=bi(s),E=Gr(g,x);E.tag=1,E.payload=l,d!=null&&(E.callback=d),l=gi(s,E,x),l!==null&&(vr(l,s,x,g),Xl(l,s,x))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var d=Cn(),g=bi(s),x=Gr(d,g);x.tag=2,l!=null&&(x.callback=l),l=gi(s,x,g),l!==null&&(vr(l,s,g,d),Xl(l,s,g))}};function Ey(s,l,d,g,x,E,T){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(g,E,T):l.prototype&&l.prototype.isPureReactComponent?!sa(d,g)||!sa(x,E):!0}function _y(s,l,d){var g=!1,x=hi,E=l.contextType;return typeof E=="object"&&E!==null?E=ir(E):(x=Rn(l)?Ki:gn.current,g=l.contextTypes,E=(g=g!=null)?zs(s,x):hi),l=new l(d,E),s.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=ou,s.stateNode=l,l._reactInternals=s,g&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=x,s.__reactInternalMemoizedMaskedChildContext=E),l}function Cy(s,l,d,g){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,g),l.state!==s&&ou.enqueueReplaceState(l,l.state,null)}function of(s,l,d,g){var x=s.stateNode;x.props=d,x.state=s.memoizedState,x.refs={},Vd(s);var E=l.contextType;typeof E=="object"&&E!==null?x.context=ir(E):(E=Rn(l)?Ki:gn.current,x.context=zs(s,E)),x.state=s.memoizedState,E=l.getDerivedStateFromProps,typeof E=="function"&&(sf(s,l,E,d),x.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(l=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),l!==x.state&&ou.enqueueReplaceState(x,x.state,null),Zl(s,d,x,g),x.state=s.memoizedState),typeof x.componentDidMount=="function"&&(s.flags|=4194308)}function Gs(s,l){try{var d="",g=l;do d+=he(g),g=g.return;while(g);var x=d}catch(E){x=`
Error generating stack: `+E.message+`
`+E.stack}return{value:s,source:l,stack:x,digest:null}}function af(s,l,d){return{value:s,source:null,stack:d??null,digest:l??null}}function lf(s,l){try{console.error(l.value)}catch(d){setTimeout(function(){throw d})}}var OE=typeof WeakMap=="function"?WeakMap:Map;function jy(s,l,d){d=Gr(-1,d),d.tag=3,d.payload={element:null};var g=l.value;return d.callback=function(){hu||(hu=!0,Sf=g),lf(s,l)},d}function Ny(s,l,d){d=Gr(-1,d),d.tag=3;var g=s.type.getDerivedStateFromError;if(typeof g=="function"){var x=l.value;d.payload=function(){return g(x)},d.callback=function(){lf(s,l)}}var E=s.stateNode;return E!==null&&typeof E.componentDidCatch=="function"&&(d.callback=function(){lf(s,l),typeof g!="function"&&(vi===null?vi=new Set([this]):vi.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})}),d}function Ty(s,l,d){var g=s.pingCache;if(g===null){g=s.pingCache=new OE;var x=new Set;g.set(l,x)}else x=g.get(l),x===void 0&&(x=new Set,g.set(l,x));x.has(d)||(x.add(d),s=GE.bind(null,s,l,d),l.then(s,s))}function Iy(s){do{var l;if((l=s.tag===13)&&(l=s.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return s;s=s.return}while(s!==null);return null}function Py(s,l,d,g,x){return(s.mode&1)===0?(s===l?s.flags|=65536:(s.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(l=Gr(-1,1),l.tag=2,gi(d,l,1))),d.lanes|=1),s):(s.flags|=65536,s.lanes=x,s)}var DE=I.ReactCurrentOwner,An=!1;function _n(s,l,d,g){l.child=s===null?Qg(l,null,d,g):Vs(l,s.child,d,g)}function Ry(s,l,d,g,x){d=d.render;var E=l.ref;return Ks(l,x),g=Xd(s,l,d,g,E,x),d=Zd(),s!==null&&!An?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~x,Jr(s,l,x)):(Mt&&d&&Od(l),l.flags|=1,_n(s,l,g,x),l.child)}function Ay(s,l,d,g,x){if(s===null){var E=d.type;return typeof E=="function"&&!If(E)&&E.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(l.tag=15,l.type=E,My(s,l,E,g,x)):(s=xu(d.type,null,g,l,l.mode,x),s.ref=l.ref,s.return=l,l.child=s)}if(E=s.child,(s.lanes&x)===0){var T=E.memoizedProps;if(d=d.compare,d=d!==null?d:sa,d(T,g)&&s.ref===l.ref)return Jr(s,l,x)}return l.flags|=1,s=ki(E,g),s.ref=l.ref,s.return=l,l.child=s}function My(s,l,d,g,x){if(s!==null){var E=s.memoizedProps;if(sa(E,g)&&s.ref===l.ref)if(An=!1,l.pendingProps=g=E,(s.lanes&x)!==0)(s.flags&131072)!==0&&(An=!0);else return l.lanes=s.lanes,Jr(s,l,x)}return uf(s,l,d,g,x)}function Oy(s,l,d){var g=l.pendingProps,x=g.children,E=s!==null?s.memoizedState:null;if(g.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ct(Qs,Yn),Yn|=d;else{if((d&1073741824)===0)return s=E!==null?E.baseLanes|d:d,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:s,cachePool:null,transitions:null},l.updateQueue=null,Ct(Qs,Yn),Yn|=s,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=E!==null?E.baseLanes:d,Ct(Qs,Yn),Yn|=g}else E!==null?(g=E.baseLanes|d,l.memoizedState=null):g=d,Ct(Qs,Yn),Yn|=g;return _n(s,l,x,d),l.child}function Dy(s,l){var d=l.ref;(s===null&&d!==null||s!==null&&s.ref!==d)&&(l.flags|=512,l.flags|=2097152)}function uf(s,l,d,g,x){var E=Rn(d)?Ki:gn.current;return E=zs(l,E),Ks(l,x),d=Xd(s,l,d,g,E,x),g=Zd(),s!==null&&!An?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~x,Jr(s,l,x)):(Mt&&g&&Od(l),l.flags|=1,_n(s,l,d,x),l.child)}function Ly(s,l,d,g,x){if(Rn(d)){var E=!0;Hl(l)}else E=!1;if(Ks(l,x),l.stateNode===null)lu(s,l),_y(l,d,g),of(l,d,g,x),g=!0;else if(s===null){var T=l.stateNode,W=l.memoizedProps;T.props=W;var X=T.context,ce=d.contextType;typeof ce=="object"&&ce!==null?ce=ir(ce):(ce=Rn(d)?Ki:gn.current,ce=zs(l,ce));var xe=d.getDerivedStateFromProps,we=typeof xe=="function"||typeof T.getSnapshotBeforeUpdate=="function";we||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(W!==g||X!==ce)&&Cy(l,T,g,ce),mi=!1;var ve=l.memoizedState;T.state=ve,Zl(l,g,T,x),X=l.memoizedState,W!==g||ve!==X||Pn.current||mi?(typeof xe=="function"&&(sf(l,d,xe,g),X=l.memoizedState),(W=mi||Ey(l,d,W,g,ve,X,ce))?(we||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(l.flags|=4194308)):(typeof T.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=X),T.props=g,T.state=X,T.context=ce,g=W):(typeof T.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{T=l.stateNode,Zg(s,l),W=l.memoizedProps,ce=l.type===l.elementType?W:mr(l.type,W),T.props=ce,we=l.pendingProps,ve=T.context,X=d.contextType,typeof X=="object"&&X!==null?X=ir(X):(X=Rn(d)?Ki:gn.current,X=zs(l,X));var Me=d.getDerivedStateFromProps;(xe=typeof Me=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(W!==we||ve!==X)&&Cy(l,T,g,X),mi=!1,ve=l.memoizedState,T.state=ve,Zl(l,g,T,x);var $e=l.memoizedState;W!==we||ve!==$e||Pn.current||mi?(typeof Me=="function"&&(sf(l,d,Me,g),$e=l.memoizedState),(ce=mi||Ey(l,d,ce,g,ve,$e,X)||!1)?(xe||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(g,$e,X),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(g,$e,X)),typeof T.componentDidUpdate=="function"&&(l.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof T.componentDidUpdate!="function"||W===s.memoizedProps&&ve===s.memoizedState||(l.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||W===s.memoizedProps&&ve===s.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=$e),T.props=g,T.state=$e,T.context=X,g=ce):(typeof T.componentDidUpdate!="function"||W===s.memoizedProps&&ve===s.memoizedState||(l.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||W===s.memoizedProps&&ve===s.memoizedState||(l.flags|=1024),g=!1)}return cf(s,l,d,g,E,x)}function cf(s,l,d,g,x,E){Dy(s,l);var T=(l.flags&128)!==0;if(!g&&!T)return x&&Ug(l,d,!1),Jr(s,l,E);g=l.stateNode,DE.current=l;var W=T&&typeof d.getDerivedStateFromError!="function"?null:g.render();return l.flags|=1,s!==null&&T?(l.child=Vs(l,s.child,null,E),l.child=Vs(l,null,W,E)):_n(s,l,W,E),l.memoizedState=g.state,x&&Ug(l,d,!0),l.child}function $y(s){var l=s.stateNode;l.pendingContext?Bg(s,l.pendingContext,l.pendingContext!==l.context):l.context&&Bg(s,l.context,!1),qd(s,l.containerInfo)}function Fy(s,l,d,g,x){return Hs(),Fd(x),l.flags|=256,_n(s,l,d,g),l.child}var df={dehydrated:null,treeContext:null,retryLane:0};function ff(s){return{baseLanes:s,cachePool:null,transitions:null}}function By(s,l,d){var g=l.pendingProps,x=Ot.current,E=!1,T=(l.flags&128)!==0,W;if((W=T)||(W=s!==null&&s.memoizedState===null?!1:(x&2)!==0),W?(E=!0,l.flags&=-129):(s===null||s.memoizedState!==null)&&(x|=1),Ct(Ot,x&1),s===null)return $d(l),s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((l.mode&1)===0?l.lanes=1:s.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(T=g.children,s=g.fallback,E?(g=l.mode,E=l.child,T={mode:"hidden",children:T},(g&1)===0&&E!==null?(E.childLanes=0,E.pendingProps=T):E=bu(T,g,0,null),s=rs(s,g,d,null),E.return=l,s.return=l,E.sibling=s,l.child=E,l.child.memoizedState=ff(d),l.memoizedState=df,s):hf(l,T));if(x=s.memoizedState,x!==null&&(W=x.dehydrated,W!==null))return LE(s,l,T,g,W,x,d);if(E){E=g.fallback,T=l.mode,x=s.child,W=x.sibling;var X={mode:"hidden",children:g.children};return(T&1)===0&&l.child!==x?(g=l.child,g.childLanes=0,g.pendingProps=X,l.deletions=null):(g=ki(x,X),g.subtreeFlags=x.subtreeFlags&14680064),W!==null?E=ki(W,E):(E=rs(E,T,d,null),E.flags|=2),E.return=l,g.return=l,g.sibling=E,l.child=g,g=E,E=l.child,T=s.child.memoizedState,T=T===null?ff(d):{baseLanes:T.baseLanes|d,cachePool:null,transitions:T.transitions},E.memoizedState=T,E.childLanes=s.childLanes&~d,l.memoizedState=df,g}return E=s.child,s=E.sibling,g=ki(E,{mode:"visible",children:g.children}),(l.mode&1)===0&&(g.lanes=d),g.return=l,g.sibling=null,s!==null&&(d=l.deletions,d===null?(l.deletions=[s],l.flags|=16):d.push(s)),l.child=g,l.memoizedState=null,g}function hf(s,l){return l=bu({mode:"visible",children:l},s.mode,0,null),l.return=s,s.child=l}function au(s,l,d,g){return g!==null&&Fd(g),Vs(l,s.child,null,d),s=hf(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function LE(s,l,d,g,x,E,T){if(d)return l.flags&256?(l.flags&=-257,g=af(Error(n(422))),au(s,l,T,g)):l.memoizedState!==null?(l.child=s.child,l.flags|=128,null):(E=g.fallback,x=l.mode,g=bu({mode:"visible",children:g.children},x,0,null),E=rs(E,x,T,null),E.flags|=2,g.return=l,E.return=l,g.sibling=E,l.child=g,(l.mode&1)!==0&&Vs(l,s.child,null,T),l.child.memoizedState=ff(T),l.memoizedState=df,E);if((l.mode&1)===0)return au(s,l,T,null);if(x.data==="$!"){if(g=x.nextSibling&&x.nextSibling.dataset,g)var W=g.dgst;return g=W,E=Error(n(419)),g=af(E,g,void 0),au(s,l,T,g)}if(W=(T&s.childLanes)!==0,An||W){if(g=on,g!==null){switch(T&-T){case 4:x=2;break;case 16:x=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:x=32;break;case 536870912:x=268435456;break;default:x=0}x=(x&(g.suspendedLanes|T))!==0?0:x,x!==0&&x!==E.retryLane&&(E.retryLane=x,Yr(s,x),vr(g,s,x,-1))}return Tf(),g=af(Error(n(421))),au(s,l,T,g)}return x.data==="$?"?(l.flags|=128,l.child=s.child,l=JE.bind(null,s),x._reactRetry=l,null):(s=E.treeContext,Kn=di(x.nextSibling),qn=l,Mt=!0,pr=null,s!==null&&(nr[rr++]=qr,nr[rr++]=Kr,nr[rr++]=Yi,qr=s.id,Kr=s.overflow,Yi=l),l=hf(l,g.children),l.flags|=4096,l)}function zy(s,l,d){s.lanes|=l;var g=s.alternate;g!==null&&(g.lanes|=l),Wd(s.return,l,d)}function pf(s,l,d,g,x){var E=s.memoizedState;E===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:d,tailMode:x}:(E.isBackwards=l,E.rendering=null,E.renderingStartTime=0,E.last=g,E.tail=d,E.tailMode=x)}function Uy(s,l,d){var g=l.pendingProps,x=g.revealOrder,E=g.tail;if(_n(s,l,g.children,d),g=Ot.current,(g&2)!==0)g=g&1|2,l.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&zy(s,d,l);else if(s.tag===19)zy(s,d,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}g&=1}if(Ct(Ot,g),(l.mode&1)===0)l.memoizedState=null;else switch(x){case"forwards":for(d=l.child,x=null;d!==null;)s=d.alternate,s!==null&&eu(s)===null&&(x=d),d=d.sibling;d=x,d===null?(x=l.child,l.child=null):(x=d.sibling,d.sibling=null),pf(l,!1,x,d,E);break;case"backwards":for(d=null,x=l.child,l.child=null;x!==null;){if(s=x.alternate,s!==null&&eu(s)===null){l.child=x;break}s=x.sibling,x.sibling=d,d=x,x=s}pf(l,!0,d,null,E);break;case"together":pf(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function lu(s,l){(l.mode&1)===0&&s!==null&&(s.alternate=null,l.alternate=null,l.flags|=2)}function Jr(s,l,d){if(s!==null&&(l.dependencies=s.dependencies),Zi|=l.lanes,(d&l.childLanes)===0)return null;if(s!==null&&l.child!==s.child)throw Error(n(153));if(l.child!==null){for(s=l.child,d=ki(s,s.pendingProps),l.child=d,d.return=l;s.sibling!==null;)s=s.sibling,d=d.sibling=ki(s,s.pendingProps),d.return=l;d.sibling=null}return l.child}function $E(s,l,d){switch(l.tag){case 3:$y(l),Hs();break;case 5:ny(l);break;case 1:Rn(l.type)&&Hl(l);break;case 4:qd(l,l.stateNode.containerInfo);break;case 10:var g=l.type._context,x=l.memoizedProps.value;Ct(Jl,g._currentValue),g._currentValue=x;break;case 13:if(g=l.memoizedState,g!==null)return g.dehydrated!==null?(Ct(Ot,Ot.current&1),l.flags|=128,null):(d&l.child.childLanes)!==0?By(s,l,d):(Ct(Ot,Ot.current&1),s=Jr(s,l,d),s!==null?s.sibling:null);Ct(Ot,Ot.current&1);break;case 19:if(g=(d&l.childLanes)!==0,(s.flags&128)!==0){if(g)return Uy(s,l,d);l.flags|=128}if(x=l.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),Ct(Ot,Ot.current),g)break;return null;case 22:case 23:return l.lanes=0,Oy(s,l,d)}return Jr(s,l,d)}var Wy,mf,Hy,Vy;Wy=function(s,l){for(var d=l.child;d!==null;){if(d.tag===5||d.tag===6)s.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},mf=function(){},Hy=function(s,l,d,g){var x=s.memoizedProps;if(x!==g){s=l.stateNode,Qi(Tr.current);var E=null;switch(d){case"input":x=qe(s,x),g=qe(s,g),E=[];break;case"select":x=N({},x,{value:void 0}),g=N({},g,{value:void 0}),E=[];break;case"textarea":x=Q(s,x),g=Q(s,g),E=[];break;default:typeof x.onClick!="function"&&typeof g.onClick=="function"&&(s.onclick=zl)}Re(d,g);var T;d=null;for(ce in x)if(!g.hasOwnProperty(ce)&&x.hasOwnProperty(ce)&&x[ce]!=null)if(ce==="style"){var W=x[ce];for(T in W)W.hasOwnProperty(T)&&(d||(d={}),d[T]="")}else ce!=="dangerouslySetInnerHTML"&&ce!=="children"&&ce!=="suppressContentEditableWarning"&&ce!=="suppressHydrationWarning"&&ce!=="autoFocus"&&(i.hasOwnProperty(ce)?E||(E=[]):(E=E||[]).push(ce,null));for(ce in g){var X=g[ce];if(W=x!=null?x[ce]:void 0,g.hasOwnProperty(ce)&&X!==W&&(X!=null||W!=null))if(ce==="style")if(W){for(T in W)!W.hasOwnProperty(T)||X&&X.hasOwnProperty(T)||(d||(d={}),d[T]="");for(T in X)X.hasOwnProperty(T)&&W[T]!==X[T]&&(d||(d={}),d[T]=X[T])}else d||(E||(E=[]),E.push(ce,d)),d=X;else ce==="dangerouslySetInnerHTML"?(X=X?X.__html:void 0,W=W?W.__html:void 0,X!=null&&W!==X&&(E=E||[]).push(ce,X)):ce==="children"?typeof X!="string"&&typeof X!="number"||(E=E||[]).push(ce,""+X):ce!=="suppressContentEditableWarning"&&ce!=="suppressHydrationWarning"&&(i.hasOwnProperty(ce)?(X!=null&&ce==="onScroll"&&Tt("scroll",s),E||W===X||(E=[])):(E=E||[]).push(ce,X))}d&&(E=E||[]).push("style",d);var ce=E;(l.updateQueue=ce)&&(l.flags|=4)}},Vy=function(s,l,d,g){d!==g&&(l.flags|=4)};function ba(s,l){if(!Mt)switch(s.tailMode){case"hidden":l=s.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?s.tail=null:d.sibling=null;break;case"collapsed":d=s.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:g.sibling=null}}function vn(s){var l=s.alternate!==null&&s.alternate.child===s.child,d=0,g=0;if(l)for(var x=s.child;x!==null;)d|=x.lanes|x.childLanes,g|=x.subtreeFlags&14680064,g|=x.flags&14680064,x.return=s,x=x.sibling;else for(x=s.child;x!==null;)d|=x.lanes|x.childLanes,g|=x.subtreeFlags,g|=x.flags,x.return=s,x=x.sibling;return s.subtreeFlags|=g,s.childLanes=d,l}function FE(s,l,d){var g=l.pendingProps;switch(Dd(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vn(l),null;case 1:return Rn(l.type)&&Wl(),vn(l),null;case 3:return g=l.stateNode,Ys(),It(Pn),It(gn),Gd(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(s===null||s.child===null)&&(Yl(l)?l.flags|=4:s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,pr!==null&&(Cf(pr),pr=null))),mf(s,l),vn(l),null;case 5:Kd(l);var x=Qi(ma.current);if(d=l.type,s!==null&&l.stateNode!=null)Hy(s,l,d,g,x),s.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!g){if(l.stateNode===null)throw Error(n(166));return vn(l),null}if(s=Qi(Tr.current),Yl(l)){g=l.stateNode,d=l.type;var E=l.memoizedProps;switch(g[Nr]=l,g[ca]=E,s=(l.mode&1)!==0,d){case"dialog":Tt("cancel",g),Tt("close",g);break;case"iframe":case"object":case"embed":Tt("load",g);break;case"video":case"audio":for(x=0;x<aa.length;x++)Tt(aa[x],g);break;case"source":Tt("error",g);break;case"img":case"image":case"link":Tt("error",g),Tt("load",g);break;case"details":Tt("toggle",g);break;case"input":rt(g,E),Tt("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!E.multiple},Tt("invalid",g);break;case"textarea":fe(g,E),Tt("invalid",g)}Re(d,E),x=null;for(var T in E)if(E.hasOwnProperty(T)){var W=E[T];T==="children"?typeof W=="string"?g.textContent!==W&&(E.suppressHydrationWarning!==!0&&Bl(g.textContent,W,s),x=["children",W]):typeof W=="number"&&g.textContent!==""+W&&(E.suppressHydrationWarning!==!0&&Bl(g.textContent,W,s),x=["children",""+W]):i.hasOwnProperty(T)&&W!=null&&T==="onScroll"&&Tt("scroll",g)}switch(d){case"input":ie(g),fn(g,E,!0);break;case"textarea":ie(g),Ee(g);break;case"select":case"option":break;default:typeof E.onClick=="function"&&(g.onclick=zl)}g=x,l.updateQueue=g,g!==null&&(l.flags|=4)}else{T=x.nodeType===9?x:x.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=G(d)),s==="http://www.w3.org/1999/xhtml"?d==="script"?(s=T.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof g.is=="string"?s=T.createElement(d,{is:g.is}):(s=T.createElement(d),d==="select"&&(T=s,g.multiple?T.multiple=!0:g.size&&(T.size=g.size))):s=T.createElementNS(s,d),s[Nr]=l,s[ca]=g,Wy(s,l,!1,!1),l.stateNode=s;e:{switch(T=Pe(d,g),d){case"dialog":Tt("cancel",s),Tt("close",s),x=g;break;case"iframe":case"object":case"embed":Tt("load",s),x=g;break;case"video":case"audio":for(x=0;x<aa.length;x++)Tt(aa[x],s);x=g;break;case"source":Tt("error",s),x=g;break;case"img":case"image":case"link":Tt("error",s),Tt("load",s),x=g;break;case"details":Tt("toggle",s),x=g;break;case"input":rt(s,g),x=qe(s,g),Tt("invalid",s);break;case"option":x=g;break;case"select":s._wrapperState={wasMultiple:!!g.multiple},x=N({},g,{value:void 0}),Tt("invalid",s);break;case"textarea":fe(s,g),x=Q(s,g),Tt("invalid",s);break;default:x=g}Re(d,x),W=x;for(E in W)if(W.hasOwnProperty(E)){var X=W[E];E==="style"?de(s,X):E==="dangerouslySetInnerHTML"?(X=X?X.__html:void 0,X!=null&&le(s,X)):E==="children"?typeof X=="string"?(d!=="textarea"||X!=="")&&Z(s,X):typeof X=="number"&&Z(s,""+X):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(i.hasOwnProperty(E)?X!=null&&E==="onScroll"&&Tt("scroll",s):X!=null&&j(s,E,X,T))}switch(d){case"input":ie(s),fn(s,g,!1);break;case"textarea":ie(s),Ee(s);break;case"option":g.value!=null&&s.setAttribute("value",""+Ce(g.value));break;case"select":s.multiple=!!g.multiple,E=g.value,E!=null?Rt(s,!!g.multiple,E,!1):g.defaultValue!=null&&Rt(s,!!g.multiple,g.defaultValue,!0);break;default:typeof x.onClick=="function"&&(s.onclick=zl)}switch(d){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return vn(l),null;case 6:if(s&&l.stateNode!=null)Vy(s,l,s.memoizedProps,g);else{if(typeof g!="string"&&l.stateNode===null)throw Error(n(166));if(d=Qi(ma.current),Qi(Tr.current),Yl(l)){if(g=l.stateNode,d=l.memoizedProps,g[Nr]=l,(E=g.nodeValue!==d)&&(s=qn,s!==null))switch(s.tag){case 3:Bl(g.nodeValue,d,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Bl(g.nodeValue,d,(s.mode&1)!==0)}E&&(l.flags|=4)}else g=(d.nodeType===9?d:d.ownerDocument).createTextNode(g),g[Nr]=l,l.stateNode=g}return vn(l),null;case 13:if(It(Ot),g=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(Mt&&Kn!==null&&(l.mode&1)!==0&&(l.flags&128)===0)Yg(),Hs(),l.flags|=98560,E=!1;else if(E=Yl(l),g!==null&&g.dehydrated!==null){if(s===null){if(!E)throw Error(n(318));if(E=l.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(n(317));E[Nr]=l}else Hs(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;vn(l),E=!1}else pr!==null&&(Cf(pr),pr=null),E=!0;if(!E)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=d,l):(g=g!==null,g!==(s!==null&&s.memoizedState!==null)&&g&&(l.child.flags|=8192,(l.mode&1)!==0&&(s===null||(Ot.current&1)!==0?tn===0&&(tn=3):Tf())),l.updateQueue!==null&&(l.flags|=4),vn(l),null);case 4:return Ys(),mf(s,l),s===null&&la(l.stateNode.containerInfo),vn(l),null;case 10:return Ud(l.type._context),vn(l),null;case 17:return Rn(l.type)&&Wl(),vn(l),null;case 19:if(It(Ot),E=l.memoizedState,E===null)return vn(l),null;if(g=(l.flags&128)!==0,T=E.rendering,T===null)if(g)ba(E,!1);else{if(tn!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(T=eu(s),T!==null){for(l.flags|=128,ba(E,!1),g=T.updateQueue,g!==null&&(l.updateQueue=g,l.flags|=4),l.subtreeFlags=0,g=d,d=l.child;d!==null;)E=d,s=g,E.flags&=14680066,T=E.alternate,T===null?(E.childLanes=0,E.lanes=s,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=T.childLanes,E.lanes=T.lanes,E.child=T.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=T.memoizedProps,E.memoizedState=T.memoizedState,E.updateQueue=T.updateQueue,E.type=T.type,s=T.dependencies,E.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),d=d.sibling;return Ct(Ot,Ot.current&1|2),l.child}s=s.sibling}E.tail!==null&&zt()>Xs&&(l.flags|=128,g=!0,ba(E,!1),l.lanes=4194304)}else{if(!g)if(s=eu(T),s!==null){if(l.flags|=128,g=!0,d=s.updateQueue,d!==null&&(l.updateQueue=d,l.flags|=4),ba(E,!0),E.tail===null&&E.tailMode==="hidden"&&!T.alternate&&!Mt)return vn(l),null}else 2*zt()-E.renderingStartTime>Xs&&d!==1073741824&&(l.flags|=128,g=!0,ba(E,!1),l.lanes=4194304);E.isBackwards?(T.sibling=l.child,l.child=T):(d=E.last,d!==null?d.sibling=T:l.child=T,E.last=T)}return E.tail!==null?(l=E.tail,E.rendering=l,E.tail=l.sibling,E.renderingStartTime=zt(),l.sibling=null,d=Ot.current,Ct(Ot,g?d&1|2:d&1),l):(vn(l),null);case 22:case 23:return Nf(),g=l.memoizedState!==null,s!==null&&s.memoizedState!==null!==g&&(l.flags|=8192),g&&(l.mode&1)!==0?(Yn&1073741824)!==0&&(vn(l),l.subtreeFlags&6&&(l.flags|=8192)):vn(l),null;case 24:return null;case 25:return null}throw Error(n(156,l.tag))}function BE(s,l){switch(Dd(l),l.tag){case 1:return Rn(l.type)&&Wl(),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return Ys(),It(Pn),It(gn),Gd(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 5:return Kd(l),null;case 13:if(It(Ot),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(n(340));Hs()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return It(Ot),null;case 4:return Ys(),null;case 10:return Ud(l.type._context),null;case 22:case 23:return Nf(),null;case 24:return null;default:return null}}var uu=!1,xn=!1,zE=typeof WeakSet=="function"?WeakSet:Set,Oe=null;function Js(s,l){var d=s.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(g){Ft(s,l,g)}else d.current=null}function gf(s,l,d){try{d()}catch(g){Ft(s,l,g)}}var qy=!1;function UE(s,l){if(jd=Tl,s=Eg(),xd(s)){if("selectionStart"in s)var d={start:s.selectionStart,end:s.selectionEnd};else e:{d=(d=s.ownerDocument)&&d.defaultView||window;var g=d.getSelection&&d.getSelection();if(g&&g.rangeCount!==0){d=g.anchorNode;var x=g.anchorOffset,E=g.focusNode;g=g.focusOffset;try{d.nodeType,E.nodeType}catch{d=null;break e}var T=0,W=-1,X=-1,ce=0,xe=0,we=s,ve=null;t:for(;;){for(var Me;we!==d||x!==0&&we.nodeType!==3||(W=T+x),we!==E||g!==0&&we.nodeType!==3||(X=T+g),we.nodeType===3&&(T+=we.nodeValue.length),(Me=we.firstChild)!==null;)ve=we,we=Me;for(;;){if(we===s)break t;if(ve===d&&++ce===x&&(W=T),ve===E&&++xe===g&&(X=T),(Me=we.nextSibling)!==null)break;we=ve,ve=we.parentNode}we=Me}d=W===-1||X===-1?null:{start:W,end:X}}else d=null}d=d||{start:0,end:0}}else d=null;for(Nd={focusedElem:s,selectionRange:d},Tl=!1,Oe=l;Oe!==null;)if(l=Oe,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,Oe=s;else for(;Oe!==null;){l=Oe;try{var $e=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if($e!==null){var ze=$e.memoizedProps,Ut=$e.memoizedState,oe=l.stateNode,re=oe.getSnapshotBeforeUpdate(l.elementType===l.type?ze:mr(l.type,ze),Ut);oe.__reactInternalSnapshotBeforeUpdate=re}break;case 3:var ae=l.stateNode.containerInfo;ae.nodeType===1?ae.textContent="":ae.nodeType===9&&ae.documentElement&&ae.removeChild(ae.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Se){Ft(l,l.return,Se)}if(s=l.sibling,s!==null){s.return=l.return,Oe=s;break}Oe=l.return}return $e=qy,qy=!1,$e}function wa(s,l,d){var g=l.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var x=g=g.next;do{if((x.tag&s)===s){var E=x.destroy;x.destroy=void 0,E!==void 0&&gf(l,d,E)}x=x.next}while(x!==g)}}function cu(s,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var d=l=l.next;do{if((d.tag&s)===s){var g=d.create;d.destroy=g()}d=d.next}while(d!==l)}}function yf(s){var l=s.ref;if(l!==null){var d=s.stateNode;switch(s.tag){case 5:s=d;break;default:s=d}typeof l=="function"?l(s):l.current=s}}function Ky(s){var l=s.alternate;l!==null&&(s.alternate=null,Ky(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&(delete l[Nr],delete l[ca],delete l[Rd],delete l[EE],delete l[_E])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function Yy(s){return s.tag===5||s.tag===3||s.tag===4}function Gy(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Yy(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function vf(s,l,d){var g=s.tag;if(g===5||g===6)s=s.stateNode,l?d.nodeType===8?d.parentNode.insertBefore(s,l):d.insertBefore(s,l):(d.nodeType===8?(l=d.parentNode,l.insertBefore(s,d)):(l=d,l.appendChild(s)),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=zl));else if(g!==4&&(s=s.child,s!==null))for(vf(s,l,d),s=s.sibling;s!==null;)vf(s,l,d),s=s.sibling}function xf(s,l,d){var g=s.tag;if(g===5||g===6)s=s.stateNode,l?d.insertBefore(s,l):d.appendChild(s);else if(g!==4&&(s=s.child,s!==null))for(xf(s,l,d),s=s.sibling;s!==null;)xf(s,l,d),s=s.sibling}var hn=null,gr=!1;function yi(s,l,d){for(d=d.child;d!==null;)Jy(s,l,d),d=d.sibling}function Jy(s,l,d){if(jr&&typeof jr.onCommitFiberUnmount=="function")try{jr.onCommitFiberUnmount(Sl,d)}catch{}switch(d.tag){case 5:xn||Js(d,l);case 6:var g=hn,x=gr;hn=null,yi(s,l,d),hn=g,gr=x,hn!==null&&(gr?(s=hn,d=d.stateNode,s.nodeType===8?s.parentNode.removeChild(d):s.removeChild(d)):hn.removeChild(d.stateNode));break;case 18:hn!==null&&(gr?(s=hn,d=d.stateNode,s.nodeType===8?Pd(s.parentNode,d):s.nodeType===1&&Pd(s,d),Zo(s)):Pd(hn,d.stateNode));break;case 4:g=hn,x=gr,hn=d.stateNode.containerInfo,gr=!0,yi(s,l,d),hn=g,gr=x;break;case 0:case 11:case 14:case 15:if(!xn&&(g=d.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){x=g=g.next;do{var E=x,T=E.destroy;E=E.tag,T!==void 0&&((E&2)!==0||(E&4)!==0)&&gf(d,l,T),x=x.next}while(x!==g)}yi(s,l,d);break;case 1:if(!xn&&(Js(d,l),g=d.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=d.memoizedProps,g.state=d.memoizedState,g.componentWillUnmount()}catch(W){Ft(d,l,W)}yi(s,l,d);break;case 21:yi(s,l,d);break;case 22:d.mode&1?(xn=(g=xn)||d.memoizedState!==null,yi(s,l,d),xn=g):yi(s,l,d);break;default:yi(s,l,d)}}function Qy(s){var l=s.updateQueue;if(l!==null){s.updateQueue=null;var d=s.stateNode;d===null&&(d=s.stateNode=new zE),l.forEach(function(g){var x=QE.bind(null,s,g);d.has(g)||(d.add(g),g.then(x,x))})}}function yr(s,l){var d=l.deletions;if(d!==null)for(var g=0;g<d.length;g++){var x=d[g];try{var E=s,T=l,W=T;e:for(;W!==null;){switch(W.tag){case 5:hn=W.stateNode,gr=!1;break e;case 3:hn=W.stateNode.containerInfo,gr=!0;break e;case 4:hn=W.stateNode.containerInfo,gr=!0;break e}W=W.return}if(hn===null)throw Error(n(160));Jy(E,T,x),hn=null,gr=!1;var X=x.alternate;X!==null&&(X.return=null),x.return=null}catch(ce){Ft(x,l,ce)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)Xy(l,s),l=l.sibling}function Xy(s,l){var d=s.alternate,g=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(yr(l,s),Pr(s),g&4){try{wa(3,s,s.return),cu(3,s)}catch(ze){Ft(s,s.return,ze)}try{wa(5,s,s.return)}catch(ze){Ft(s,s.return,ze)}}break;case 1:yr(l,s),Pr(s),g&512&&d!==null&&Js(d,d.return);break;case 5:if(yr(l,s),Pr(s),g&512&&d!==null&&Js(d,d.return),s.flags&32){var x=s.stateNode;try{Z(x,"")}catch(ze){Ft(s,s.return,ze)}}if(g&4&&(x=s.stateNode,x!=null)){var E=s.memoizedProps,T=d!==null?d.memoizedProps:E,W=s.type,X=s.updateQueue;if(s.updateQueue=null,X!==null)try{W==="input"&&E.type==="radio"&&E.name!=null&&st(x,E),Pe(W,T);var ce=Pe(W,E);for(T=0;T<X.length;T+=2){var xe=X[T],we=X[T+1];xe==="style"?de(x,we):xe==="dangerouslySetInnerHTML"?le(x,we):xe==="children"?Z(x,we):j(x,xe,we,ce)}switch(W){case"input":St(x,E);break;case"textarea":ye(x,E);break;case"select":var ve=x._wrapperState.wasMultiple;x._wrapperState.wasMultiple=!!E.multiple;var Me=E.value;Me!=null?Rt(x,!!E.multiple,Me,!1):ve!==!!E.multiple&&(E.defaultValue!=null?Rt(x,!!E.multiple,E.defaultValue,!0):Rt(x,!!E.multiple,E.multiple?[]:"",!1))}x[ca]=E}catch(ze){Ft(s,s.return,ze)}}break;case 6:if(yr(l,s),Pr(s),g&4){if(s.stateNode===null)throw Error(n(162));x=s.stateNode,E=s.memoizedProps;try{x.nodeValue=E}catch(ze){Ft(s,s.return,ze)}}break;case 3:if(yr(l,s),Pr(s),g&4&&d!==null&&d.memoizedState.isDehydrated)try{Zo(l.containerInfo)}catch(ze){Ft(s,s.return,ze)}break;case 4:yr(l,s),Pr(s);break;case 13:yr(l,s),Pr(s),x=s.child,x.flags&8192&&(E=x.memoizedState!==null,x.stateNode.isHidden=E,!E||x.alternate!==null&&x.alternate.memoizedState!==null||(kf=zt())),g&4&&Qy(s);break;case 22:if(xe=d!==null&&d.memoizedState!==null,s.mode&1?(xn=(ce=xn)||xe,yr(l,s),xn=ce):yr(l,s),Pr(s),g&8192){if(ce=s.memoizedState!==null,(s.stateNode.isHidden=ce)&&!xe&&(s.mode&1)!==0)for(Oe=s,xe=s.child;xe!==null;){for(we=Oe=xe;Oe!==null;){switch(ve=Oe,Me=ve.child,ve.tag){case 0:case 11:case 14:case 15:wa(4,ve,ve.return);break;case 1:Js(ve,ve.return);var $e=ve.stateNode;if(typeof $e.componentWillUnmount=="function"){g=ve,d=ve.return;try{l=g,$e.props=l.memoizedProps,$e.state=l.memoizedState,$e.componentWillUnmount()}catch(ze){Ft(g,d,ze)}}break;case 5:Js(ve,ve.return);break;case 22:if(ve.memoizedState!==null){tv(we);continue}}Me!==null?(Me.return=ve,Oe=Me):tv(we)}xe=xe.sibling}e:for(xe=null,we=s;;){if(we.tag===5){if(xe===null){xe=we;try{x=we.stateNode,ce?(E=x.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none"):(W=we.stateNode,X=we.memoizedProps.style,T=X!=null&&X.hasOwnProperty("display")?X.display:null,W.style.display=J("display",T))}catch(ze){Ft(s,s.return,ze)}}}else if(we.tag===6){if(xe===null)try{we.stateNode.nodeValue=ce?"":we.memoizedProps}catch(ze){Ft(s,s.return,ze)}}else if((we.tag!==22&&we.tag!==23||we.memoizedState===null||we===s)&&we.child!==null){we.child.return=we,we=we.child;continue}if(we===s)break e;for(;we.sibling===null;){if(we.return===null||we.return===s)break e;xe===we&&(xe=null),we=we.return}xe===we&&(xe=null),we.sibling.return=we.return,we=we.sibling}}break;case 19:yr(l,s),Pr(s),g&4&&Qy(s);break;case 21:break;default:yr(l,s),Pr(s)}}function Pr(s){var l=s.flags;if(l&2){try{e:{for(var d=s.return;d!==null;){if(Yy(d)){var g=d;break e}d=d.return}throw Error(n(160))}switch(g.tag){case 5:var x=g.stateNode;g.flags&32&&(Z(x,""),g.flags&=-33);var E=Gy(s);xf(s,E,x);break;case 3:case 4:var T=g.stateNode.containerInfo,W=Gy(s);vf(s,W,T);break;default:throw Error(n(161))}}catch(X){Ft(s,s.return,X)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function WE(s,l,d){Oe=s,Zy(s)}function Zy(s,l,d){for(var g=(s.mode&1)!==0;Oe!==null;){var x=Oe,E=x.child;if(x.tag===22&&g){var T=x.memoizedState!==null||uu;if(!T){var W=x.alternate,X=W!==null&&W.memoizedState!==null||xn;W=uu;var ce=xn;if(uu=T,(xn=X)&&!ce)for(Oe=x;Oe!==null;)T=Oe,X=T.child,T.tag===22&&T.memoizedState!==null?nv(x):X!==null?(X.return=T,Oe=X):nv(x);for(;E!==null;)Oe=E,Zy(E),E=E.sibling;Oe=x,uu=W,xn=ce}ev(s)}else(x.subtreeFlags&8772)!==0&&E!==null?(E.return=x,Oe=E):ev(s)}}function ev(s){for(;Oe!==null;){var l=Oe;if((l.flags&8772)!==0){var d=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:xn||cu(5,l);break;case 1:var g=l.stateNode;if(l.flags&4&&!xn)if(d===null)g.componentDidMount();else{var x=l.elementType===l.type?d.memoizedProps:mr(l.type,d.memoizedProps);g.componentDidUpdate(x,d.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var E=l.updateQueue;E!==null&&ty(l,E,g);break;case 3:var T=l.updateQueue;if(T!==null){if(d=null,l.child!==null)switch(l.child.tag){case 5:d=l.child.stateNode;break;case 1:d=l.child.stateNode}ty(l,T,d)}break;case 5:var W=l.stateNode;if(d===null&&l.flags&4){d=W;var X=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":X.autoFocus&&d.focus();break;case"img":X.src&&(d.src=X.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var ce=l.alternate;if(ce!==null){var xe=ce.memoizedState;if(xe!==null){var we=xe.dehydrated;we!==null&&Zo(we)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}xn||l.flags&512&&yf(l)}catch(ve){Ft(l,l.return,ve)}}if(l===s){Oe=null;break}if(d=l.sibling,d!==null){d.return=l.return,Oe=d;break}Oe=l.return}}function tv(s){for(;Oe!==null;){var l=Oe;if(l===s){Oe=null;break}var d=l.sibling;if(d!==null){d.return=l.return,Oe=d;break}Oe=l.return}}function nv(s){for(;Oe!==null;){var l=Oe;try{switch(l.tag){case 0:case 11:case 15:var d=l.return;try{cu(4,l)}catch(X){Ft(l,d,X)}break;case 1:var g=l.stateNode;if(typeof g.componentDidMount=="function"){var x=l.return;try{g.componentDidMount()}catch(X){Ft(l,x,X)}}var E=l.return;try{yf(l)}catch(X){Ft(l,E,X)}break;case 5:var T=l.return;try{yf(l)}catch(X){Ft(l,T,X)}}}catch(X){Ft(l,l.return,X)}if(l===s){Oe=null;break}var W=l.sibling;if(W!==null){W.return=l.return,Oe=W;break}Oe=l.return}}var HE=Math.ceil,du=I.ReactCurrentDispatcher,bf=I.ReactCurrentOwner,or=I.ReactCurrentBatchConfig,pt=0,on=null,Vt=null,pn=0,Yn=0,Qs=fi(0),tn=0,ka=null,Zi=0,fu=0,wf=0,Sa=null,Mn=null,kf=0,Xs=1/0,Qr=null,hu=!1,Sf=null,vi=null,pu=!1,xi=null,mu=0,Ea=0,Ef=null,gu=-1,yu=0;function Cn(){return(pt&6)!==0?zt():gu!==-1?gu:gu=zt()}function bi(s){return(s.mode&1)===0?1:(pt&2)!==0&&pn!==0?pn&-pn:jE.transition!==null?(yu===0&&(yu=Gm()),yu):(s=xt,s!==0||(s=window.event,s=s===void 0?16:ig(s.type)),s)}function vr(s,l,d,g){if(50<Ea)throw Ea=0,Ef=null,Error(n(185));Yo(s,d,g),((pt&2)===0||s!==on)&&(s===on&&((pt&2)===0&&(fu|=d),tn===4&&wi(s,pn)),On(s,g),d===1&&pt===0&&(l.mode&1)===0&&(Xs=zt()+500,Vl&&pi()))}function On(s,l){var d=s.callbackNode;jS(s,l);var g=Cl(s,s===on?pn:0);if(g===0)d!==null&&qm(d),s.callbackNode=null,s.callbackPriority=0;else if(l=g&-g,s.callbackPriority!==l){if(d!=null&&qm(d),l===1)s.tag===0?CE(iv.bind(null,s)):Wg(iv.bind(null,s)),kE(function(){(pt&6)===0&&pi()}),d=null;else{switch(Jm(g)){case 1:d=nd;break;case 4:d=Km;break;case 16:d=kl;break;case 536870912:d=Ym;break;default:d=kl}d=fv(d,rv.bind(null,s))}s.callbackPriority=l,s.callbackNode=d}}function rv(s,l){if(gu=-1,yu=0,(pt&6)!==0)throw Error(n(327));var d=s.callbackNode;if(Zs()&&s.callbackNode!==d)return null;var g=Cl(s,s===on?pn:0);if(g===0)return null;if((g&30)!==0||(g&s.expiredLanes)!==0||l)l=vu(s,g);else{l=g;var x=pt;pt|=2;var E=ov();(on!==s||pn!==l)&&(Qr=null,Xs=zt()+500,ts(s,l));do try{KE();break}catch(W){sv(s,W)}while(!0);zd(),du.current=E,pt=x,Vt!==null?l=0:(on=null,pn=0,l=tn)}if(l!==0){if(l===2&&(x=rd(s),x!==0&&(g=x,l=_f(s,x))),l===1)throw d=ka,ts(s,0),wi(s,g),On(s,zt()),d;if(l===6)wi(s,g);else{if(x=s.current.alternate,(g&30)===0&&!VE(x)&&(l=vu(s,g),l===2&&(E=rd(s),E!==0&&(g=E,l=_f(s,E))),l===1))throw d=ka,ts(s,0),wi(s,g),On(s,zt()),d;switch(s.finishedWork=x,s.finishedLanes=g,l){case 0:case 1:throw Error(n(345));case 2:ns(s,Mn,Qr);break;case 3:if(wi(s,g),(g&130023424)===g&&(l=kf+500-zt(),10<l)){if(Cl(s,0)!==0)break;if(x=s.suspendedLanes,(x&g)!==g){Cn(),s.pingedLanes|=s.suspendedLanes&x;break}s.timeoutHandle=Id(ns.bind(null,s,Mn,Qr),l);break}ns(s,Mn,Qr);break;case 4:if(wi(s,g),(g&4194240)===g)break;for(l=s.eventTimes,x=-1;0<g;){var T=31-fr(g);E=1<<T,T=l[T],T>x&&(x=T),g&=~E}if(g=x,g=zt()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*HE(g/1960))-g,10<g){s.timeoutHandle=Id(ns.bind(null,s,Mn,Qr),g);break}ns(s,Mn,Qr);break;case 5:ns(s,Mn,Qr);break;default:throw Error(n(329))}}}return On(s,zt()),s.callbackNode===d?rv.bind(null,s):null}function _f(s,l){var d=Sa;return s.current.memoizedState.isDehydrated&&(ts(s,l).flags|=256),s=vu(s,l),s!==2&&(l=Mn,Mn=d,l!==null&&Cf(l)),s}function Cf(s){Mn===null?Mn=s:Mn.push.apply(Mn,s)}function VE(s){for(var l=s;;){if(l.flags&16384){var d=l.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var g=0;g<d.length;g++){var x=d[g],E=x.getSnapshot;x=x.value;try{if(!hr(E(),x))return!1}catch{return!1}}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function wi(s,l){for(l&=~wf,l&=~fu,s.suspendedLanes|=l,s.pingedLanes&=~l,s=s.expirationTimes;0<l;){var d=31-fr(l),g=1<<d;s[d]=-1,l&=~g}}function iv(s){if((pt&6)!==0)throw Error(n(327));Zs();var l=Cl(s,0);if((l&1)===0)return On(s,zt()),null;var d=vu(s,l);if(s.tag!==0&&d===2){var g=rd(s);g!==0&&(l=g,d=_f(s,g))}if(d===1)throw d=ka,ts(s,0),wi(s,l),On(s,zt()),d;if(d===6)throw Error(n(345));return s.finishedWork=s.current.alternate,s.finishedLanes=l,ns(s,Mn,Qr),On(s,zt()),null}function jf(s,l){var d=pt;pt|=1;try{return s(l)}finally{pt=d,pt===0&&(Xs=zt()+500,Vl&&pi())}}function es(s){xi!==null&&xi.tag===0&&(pt&6)===0&&Zs();var l=pt;pt|=1;var d=or.transition,g=xt;try{if(or.transition=null,xt=1,s)return s()}finally{xt=g,or.transition=d,pt=l,(pt&6)===0&&pi()}}function Nf(){Yn=Qs.current,It(Qs)}function ts(s,l){s.finishedWork=null,s.finishedLanes=0;var d=s.timeoutHandle;if(d!==-1&&(s.timeoutHandle=-1,wE(d)),Vt!==null)for(d=Vt.return;d!==null;){var g=d;switch(Dd(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&Wl();break;case 3:Ys(),It(Pn),It(gn),Gd();break;case 5:Kd(g);break;case 4:Ys();break;case 13:It(Ot);break;case 19:It(Ot);break;case 10:Ud(g.type._context);break;case 22:case 23:Nf()}d=d.return}if(on=s,Vt=s=ki(s.current,null),pn=Yn=l,tn=0,ka=null,wf=fu=Zi=0,Mn=Sa=null,Ji!==null){for(l=0;l<Ji.length;l++)if(d=Ji[l],g=d.interleaved,g!==null){d.interleaved=null;var x=g.next,E=d.pending;if(E!==null){var T=E.next;E.next=x,g.next=T}d.pending=g}Ji=null}return s}function sv(s,l){do{var d=Vt;try{if(zd(),tu.current=su,nu){for(var g=Dt.memoizedState;g!==null;){var x=g.queue;x!==null&&(x.pending=null),g=g.next}nu=!1}if(Xi=0,sn=en=Dt=null,ga=!1,ya=0,bf.current=null,d===null||d.return===null){tn=1,ka=l,Vt=null;break}e:{var E=s,T=d.return,W=d,X=l;if(l=pn,W.flags|=32768,X!==null&&typeof X=="object"&&typeof X.then=="function"){var ce=X,xe=W,we=xe.tag;if((xe.mode&1)===0&&(we===0||we===11||we===15)){var ve=xe.alternate;ve?(xe.updateQueue=ve.updateQueue,xe.memoizedState=ve.memoizedState,xe.lanes=ve.lanes):(xe.updateQueue=null,xe.memoizedState=null)}var Me=Iy(T);if(Me!==null){Me.flags&=-257,Py(Me,T,W,E,l),Me.mode&1&&Ty(E,ce,l),l=Me,X=ce;var $e=l.updateQueue;if($e===null){var ze=new Set;ze.add(X),l.updateQueue=ze}else $e.add(X);break e}else{if((l&1)===0){Ty(E,ce,l),Tf();break e}X=Error(n(426))}}else if(Mt&&W.mode&1){var Ut=Iy(T);if(Ut!==null){(Ut.flags&65536)===0&&(Ut.flags|=256),Py(Ut,T,W,E,l),Fd(Gs(X,W));break e}}E=X=Gs(X,W),tn!==4&&(tn=2),Sa===null?Sa=[E]:Sa.push(E),E=T;do{switch(E.tag){case 3:E.flags|=65536,l&=-l,E.lanes|=l;var oe=jy(E,X,l);ey(E,oe);break e;case 1:W=X;var re=E.type,ae=E.stateNode;if((E.flags&128)===0&&(typeof re.getDerivedStateFromError=="function"||ae!==null&&typeof ae.componentDidCatch=="function"&&(vi===null||!vi.has(ae)))){E.flags|=65536,l&=-l,E.lanes|=l;var Se=Ny(E,W,l);ey(E,Se);break e}}E=E.return}while(E!==null)}lv(d)}catch(Ue){l=Ue,Vt===d&&d!==null&&(Vt=d=d.return);continue}break}while(!0)}function ov(){var s=du.current;return du.current=su,s===null?su:s}function Tf(){(tn===0||tn===3||tn===2)&&(tn=4),on===null||(Zi&268435455)===0&&(fu&268435455)===0||wi(on,pn)}function vu(s,l){var d=pt;pt|=2;var g=ov();(on!==s||pn!==l)&&(Qr=null,ts(s,l));do try{qE();break}catch(x){sv(s,x)}while(!0);if(zd(),pt=d,du.current=g,Vt!==null)throw Error(n(261));return on=null,pn=0,tn}function qE(){for(;Vt!==null;)av(Vt)}function KE(){for(;Vt!==null&&!vS();)av(Vt)}function av(s){var l=dv(s.alternate,s,Yn);s.memoizedProps=s.pendingProps,l===null?lv(s):Vt=l,bf.current=null}function lv(s){var l=s;do{var d=l.alternate;if(s=l.return,(l.flags&32768)===0){if(d=FE(d,l,Yn),d!==null){Vt=d;return}}else{if(d=BE(d,l),d!==null){d.flags&=32767,Vt=d;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{tn=6,Vt=null;return}}if(l=l.sibling,l!==null){Vt=l;return}Vt=l=s}while(l!==null);tn===0&&(tn=5)}function ns(s,l,d){var g=xt,x=or.transition;try{or.transition=null,xt=1,YE(s,l,d,g)}finally{or.transition=x,xt=g}return null}function YE(s,l,d,g){do Zs();while(xi!==null);if((pt&6)!==0)throw Error(n(327));d=s.finishedWork;var x=s.finishedLanes;if(d===null)return null;if(s.finishedWork=null,s.finishedLanes=0,d===s.current)throw Error(n(177));s.callbackNode=null,s.callbackPriority=0;var E=d.lanes|d.childLanes;if(NS(s,E),s===on&&(Vt=on=null,pn=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||pu||(pu=!0,fv(kl,function(){return Zs(),null})),E=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||E){E=or.transition,or.transition=null;var T=xt;xt=1;var W=pt;pt|=4,bf.current=null,UE(s,d),Xy(d,s),pE(Nd),Tl=!!jd,Nd=jd=null,s.current=d,WE(d),xS(),pt=W,xt=T,or.transition=E}else s.current=d;if(pu&&(pu=!1,xi=s,mu=x),E=s.pendingLanes,E===0&&(vi=null),kS(d.stateNode),On(s,zt()),l!==null)for(g=s.onRecoverableError,d=0;d<l.length;d++)x=l[d],g(x.value,{componentStack:x.stack,digest:x.digest});if(hu)throw hu=!1,s=Sf,Sf=null,s;return(mu&1)!==0&&s.tag!==0&&Zs(),E=s.pendingLanes,(E&1)!==0?s===Ef?Ea++:(Ea=0,Ef=s):Ea=0,pi(),null}function Zs(){if(xi!==null){var s=Jm(mu),l=or.transition,d=xt;try{if(or.transition=null,xt=16>s?16:s,xi===null)var g=!1;else{if(s=xi,xi=null,mu=0,(pt&6)!==0)throw Error(n(331));var x=pt;for(pt|=4,Oe=s.current;Oe!==null;){var E=Oe,T=E.child;if((Oe.flags&16)!==0){var W=E.deletions;if(W!==null){for(var X=0;X<W.length;X++){var ce=W[X];for(Oe=ce;Oe!==null;){var xe=Oe;switch(xe.tag){case 0:case 11:case 15:wa(8,xe,E)}var we=xe.child;if(we!==null)we.return=xe,Oe=we;else for(;Oe!==null;){xe=Oe;var ve=xe.sibling,Me=xe.return;if(Ky(xe),xe===ce){Oe=null;break}if(ve!==null){ve.return=Me,Oe=ve;break}Oe=Me}}}var $e=E.alternate;if($e!==null){var ze=$e.child;if(ze!==null){$e.child=null;do{var Ut=ze.sibling;ze.sibling=null,ze=Ut}while(ze!==null)}}Oe=E}}if((E.subtreeFlags&2064)!==0&&T!==null)T.return=E,Oe=T;else e:for(;Oe!==null;){if(E=Oe,(E.flags&2048)!==0)switch(E.tag){case 0:case 11:case 15:wa(9,E,E.return)}var oe=E.sibling;if(oe!==null){oe.return=E.return,Oe=oe;break e}Oe=E.return}}var re=s.current;for(Oe=re;Oe!==null;){T=Oe;var ae=T.child;if((T.subtreeFlags&2064)!==0&&ae!==null)ae.return=T,Oe=ae;else e:for(T=re;Oe!==null;){if(W=Oe,(W.flags&2048)!==0)try{switch(W.tag){case 0:case 11:case 15:cu(9,W)}}catch(Ue){Ft(W,W.return,Ue)}if(W===T){Oe=null;break e}var Se=W.sibling;if(Se!==null){Se.return=W.return,Oe=Se;break e}Oe=W.return}}if(pt=x,pi(),jr&&typeof jr.onPostCommitFiberRoot=="function")try{jr.onPostCommitFiberRoot(Sl,s)}catch{}g=!0}return g}finally{xt=d,or.transition=l}}return!1}function uv(s,l,d){l=Gs(d,l),l=jy(s,l,1),s=gi(s,l,1),l=Cn(),s!==null&&(Yo(s,1,l),On(s,l))}function Ft(s,l,d){if(s.tag===3)uv(s,s,d);else for(;l!==null;){if(l.tag===3){uv(l,s,d);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(vi===null||!vi.has(g))){s=Gs(d,s),s=Ny(l,s,1),l=gi(l,s,1),s=Cn(),l!==null&&(Yo(l,1,s),On(l,s));break}}l=l.return}}function GE(s,l,d){var g=s.pingCache;g!==null&&g.delete(l),l=Cn(),s.pingedLanes|=s.suspendedLanes&d,on===s&&(pn&d)===d&&(tn===4||tn===3&&(pn&130023424)===pn&&500>zt()-kf?ts(s,0):wf|=d),On(s,l)}function cv(s,l){l===0&&((s.mode&1)===0?l=1:(l=_l,_l<<=1,(_l&130023424)===0&&(_l=4194304)));var d=Cn();s=Yr(s,l),s!==null&&(Yo(s,l,d),On(s,d))}function JE(s){var l=s.memoizedState,d=0;l!==null&&(d=l.retryLane),cv(s,d)}function QE(s,l){var d=0;switch(s.tag){case 13:var g=s.stateNode,x=s.memoizedState;x!==null&&(d=x.retryLane);break;case 19:g=s.stateNode;break;default:throw Error(n(314))}g!==null&&g.delete(l),cv(s,d)}var dv;dv=function(s,l,d){if(s!==null)if(s.memoizedProps!==l.pendingProps||Pn.current)An=!0;else{if((s.lanes&d)===0&&(l.flags&128)===0)return An=!1,$E(s,l,d);An=(s.flags&131072)!==0}else An=!1,Mt&&(l.flags&1048576)!==0&&Hg(l,Kl,l.index);switch(l.lanes=0,l.tag){case 2:var g=l.type;lu(s,l),s=l.pendingProps;var x=zs(l,gn.current);Ks(l,d),x=Xd(null,l,g,s,x,d);var E=Zd();return l.flags|=1,typeof x=="object"&&x!==null&&typeof x.render=="function"&&x.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,Rn(g)?(E=!0,Hl(l)):E=!1,l.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,Vd(l),x.updater=ou,l.stateNode=x,x._reactInternals=l,of(l,g,s,d),l=cf(null,l,g,!0,E,d)):(l.tag=0,Mt&&E&&Od(l),_n(null,l,x,d),l=l.child),l;case 16:g=l.elementType;e:{switch(lu(s,l),s=l.pendingProps,x=g._init,g=x(g._payload),l.type=g,x=l.tag=ZE(g),s=mr(g,s),x){case 0:l=uf(null,l,g,s,d);break e;case 1:l=Ly(null,l,g,s,d);break e;case 11:l=Ry(null,l,g,s,d);break e;case 14:l=Ay(null,l,g,mr(g.type,s),d);break e}throw Error(n(306,g,""))}return l;case 0:return g=l.type,x=l.pendingProps,x=l.elementType===g?x:mr(g,x),uf(s,l,g,x,d);case 1:return g=l.type,x=l.pendingProps,x=l.elementType===g?x:mr(g,x),Ly(s,l,g,x,d);case 3:e:{if($y(l),s===null)throw Error(n(387));g=l.pendingProps,E=l.memoizedState,x=E.element,Zg(s,l),Zl(l,g,null,d);var T=l.memoizedState;if(g=T.element,E.isDehydrated)if(E={element:g,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},l.updateQueue.baseState=E,l.memoizedState=E,l.flags&256){x=Gs(Error(n(423)),l),l=Fy(s,l,g,d,x);break e}else if(g!==x){x=Gs(Error(n(424)),l),l=Fy(s,l,g,d,x);break e}else for(Kn=di(l.stateNode.containerInfo.firstChild),qn=l,Mt=!0,pr=null,d=Qg(l,null,g,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Hs(),g===x){l=Jr(s,l,d);break e}_n(s,l,g,d)}l=l.child}return l;case 5:return ny(l),s===null&&$d(l),g=l.type,x=l.pendingProps,E=s!==null?s.memoizedProps:null,T=x.children,Td(g,x)?T=null:E!==null&&Td(g,E)&&(l.flags|=32),Dy(s,l),_n(s,l,T,d),l.child;case 6:return s===null&&$d(l),null;case 13:return By(s,l,d);case 4:return qd(l,l.stateNode.containerInfo),g=l.pendingProps,s===null?l.child=Vs(l,null,g,d):_n(s,l,g,d),l.child;case 11:return g=l.type,x=l.pendingProps,x=l.elementType===g?x:mr(g,x),Ry(s,l,g,x,d);case 7:return _n(s,l,l.pendingProps,d),l.child;case 8:return _n(s,l,l.pendingProps.children,d),l.child;case 12:return _n(s,l,l.pendingProps.children,d),l.child;case 10:e:{if(g=l.type._context,x=l.pendingProps,E=l.memoizedProps,T=x.value,Ct(Jl,g._currentValue),g._currentValue=T,E!==null)if(hr(E.value,T)){if(E.children===x.children&&!Pn.current){l=Jr(s,l,d);break e}}else for(E=l.child,E!==null&&(E.return=l);E!==null;){var W=E.dependencies;if(W!==null){T=E.child;for(var X=W.firstContext;X!==null;){if(X.context===g){if(E.tag===1){X=Gr(-1,d&-d),X.tag=2;var ce=E.updateQueue;if(ce!==null){ce=ce.shared;var xe=ce.pending;xe===null?X.next=X:(X.next=xe.next,xe.next=X),ce.pending=X}}E.lanes|=d,X=E.alternate,X!==null&&(X.lanes|=d),Wd(E.return,d,l),W.lanes|=d;break}X=X.next}}else if(E.tag===10)T=E.type===l.type?null:E.child;else if(E.tag===18){if(T=E.return,T===null)throw Error(n(341));T.lanes|=d,W=T.alternate,W!==null&&(W.lanes|=d),Wd(T,d,l),T=E.sibling}else T=E.child;if(T!==null)T.return=E;else for(T=E;T!==null;){if(T===l){T=null;break}if(E=T.sibling,E!==null){E.return=T.return,T=E;break}T=T.return}E=T}_n(s,l,x.children,d),l=l.child}return l;case 9:return x=l.type,g=l.pendingProps.children,Ks(l,d),x=ir(x),g=g(x),l.flags|=1,_n(s,l,g,d),l.child;case 14:return g=l.type,x=mr(g,l.pendingProps),x=mr(g.type,x),Ay(s,l,g,x,d);case 15:return My(s,l,l.type,l.pendingProps,d);case 17:return g=l.type,x=l.pendingProps,x=l.elementType===g?x:mr(g,x),lu(s,l),l.tag=1,Rn(g)?(s=!0,Hl(l)):s=!1,Ks(l,d),_y(l,g,x),of(l,g,x,d),cf(null,l,g,!0,s,d);case 19:return Uy(s,l,d);case 22:return Oy(s,l,d)}throw Error(n(156,l.tag))};function fv(s,l){return Vm(s,l)}function XE(s,l,d,g){this.tag=s,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ar(s,l,d,g){return new XE(s,l,d,g)}function If(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ZE(s){if(typeof s=="function")return If(s)?1:0;if(s!=null){if(s=s.$$typeof,s===ne)return 11;if(s===K)return 14}return 2}function ki(s,l){var d=s.alternate;return d===null?(d=ar(s.tag,l,s.key,s.mode),d.elementType=s.elementType,d.type=s.type,d.stateNode=s.stateNode,d.alternate=s,s.alternate=d):(d.pendingProps=l,d.type=s.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=s.flags&14680064,d.childLanes=s.childLanes,d.lanes=s.lanes,d.child=s.child,d.memoizedProps=s.memoizedProps,d.memoizedState=s.memoizedState,d.updateQueue=s.updateQueue,l=s.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=s.sibling,d.index=s.index,d.ref=s.ref,d}function xu(s,l,d,g,x,E){var T=2;if(g=s,typeof s=="function")If(s)&&(T=1);else if(typeof s=="string")T=5;else e:switch(s){case U:return rs(d.children,x,E,l);case te:T=8,x|=8;break;case z:return s=ar(12,d,l,x|2),s.elementType=z,s.lanes=E,s;case H:return s=ar(13,d,l,x),s.elementType=H,s.lanes=E,s;case Y:return s=ar(19,d,l,x),s.elementType=Y,s.lanes=E,s;case q:return bu(d,x,E,l);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case M:T=10;break e;case $:T=9;break e;case ne:T=11;break e;case K:T=14;break e;case se:T=16,g=null;break e}throw Error(n(130,s==null?s:typeof s,""))}return l=ar(T,d,l,x),l.elementType=s,l.type=g,l.lanes=E,l}function rs(s,l,d,g){return s=ar(7,s,g,l),s.lanes=d,s}function bu(s,l,d,g){return s=ar(22,s,g,l),s.elementType=q,s.lanes=d,s.stateNode={isHidden:!1},s}function Pf(s,l,d){return s=ar(6,s,null,l),s.lanes=d,s}function Rf(s,l,d){return l=ar(4,s.children!==null?s.children:[],s.key,l),l.lanes=d,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}function e_(s,l,d,g,x){this.tag=l,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=id(0),this.expirationTimes=id(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=id(0),this.identifierPrefix=g,this.onRecoverableError=x,this.mutableSourceEagerHydrationData=null}function Af(s,l,d,g,x,E,T,W,X){return s=new e_(s,l,d,W,X),l===1?(l=1,E===!0&&(l|=8)):l=0,E=ar(3,null,null,l),s.current=E,E.stateNode=s,E.memoizedState={element:g,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vd(E),s}function t_(s,l,d){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:A,key:g==null?null:""+g,children:s,containerInfo:l,implementation:d}}function hv(s){if(!s)return hi;s=s._reactInternals;e:{if(Vi(s)!==s||s.tag!==1)throw Error(n(170));var l=s;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Rn(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(n(171))}if(s.tag===1){var d=s.type;if(Rn(d))return zg(s,d,l)}return l}function pv(s,l,d,g,x,E,T,W,X){return s=Af(d,g,!0,s,x,E,T,W,X),s.context=hv(null),d=s.current,g=Cn(),x=bi(d),E=Gr(g,x),E.callback=l??null,gi(d,E,x),s.current.lanes=x,Yo(s,x,g),On(s,g),s}function wu(s,l,d,g){var x=l.current,E=Cn(),T=bi(x);return d=hv(d),l.context===null?l.context=d:l.pendingContext=d,l=Gr(E,T),l.payload={element:s},g=g===void 0?null:g,g!==null&&(l.callback=g),s=gi(x,l,T),s!==null&&(vr(s,x,T,E),Xl(s,x,T)),T}function ku(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function mv(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var d=s.retryLane;s.retryLane=d!==0&&d<l?d:l}}function Mf(s,l){mv(s,l),(s=s.alternate)&&mv(s,l)}function n_(){return null}var gv=typeof reportError=="function"?reportError:function(s){console.error(s)};function Of(s){this._internalRoot=s}Su.prototype.render=Of.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(n(409));wu(s,l,null,null)},Su.prototype.unmount=Of.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;es(function(){wu(null,s,null,null)}),l[Hr]=null}};function Su(s){this._internalRoot=s}Su.prototype.unstable_scheduleHydration=function(s){if(s){var l=Zm();s={blockedOn:null,target:s,priority:l};for(var d=0;d<li.length&&l!==0&&l<li[d].priority;d++);li.splice(d,0,s),d===0&&ng(s)}};function Df(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Eu(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function yv(){}function r_(s,l,d,g,x){if(x){if(typeof g=="function"){var E=g;g=function(){var ce=ku(T);E.call(ce)}}var T=pv(l,g,s,0,null,!1,!1,"",yv);return s._reactRootContainer=T,s[Hr]=T.current,la(s.nodeType===8?s.parentNode:s),es(),T}for(;x=s.lastChild;)s.removeChild(x);if(typeof g=="function"){var W=g;g=function(){var ce=ku(X);W.call(ce)}}var X=Af(s,0,!1,null,null,!1,!1,"",yv);return s._reactRootContainer=X,s[Hr]=X.current,la(s.nodeType===8?s.parentNode:s),es(function(){wu(l,X,d,g)}),X}function _u(s,l,d,g,x){var E=d._reactRootContainer;if(E){var T=E;if(typeof x=="function"){var W=x;x=function(){var X=ku(T);W.call(X)}}wu(l,T,s,x)}else T=r_(d,l,s,x,g);return ku(T)}Qm=function(s){switch(s.tag){case 3:var l=s.stateNode;if(l.current.memoizedState.isDehydrated){var d=Ko(l.pendingLanes);d!==0&&(sd(l,d|1),On(l,zt()),(pt&6)===0&&(Xs=zt()+500,pi()))}break;case 13:es(function(){var g=Yr(s,1);if(g!==null){var x=Cn();vr(g,s,1,x)}}),Mf(s,1)}},od=function(s){if(s.tag===13){var l=Yr(s,134217728);if(l!==null){var d=Cn();vr(l,s,134217728,d)}Mf(s,134217728)}},Xm=function(s){if(s.tag===13){var l=bi(s),d=Yr(s,l);if(d!==null){var g=Cn();vr(d,s,l,g)}Mf(s,l)}},Zm=function(){return xt},eg=function(s,l){var d=xt;try{return xt=s,l()}finally{xt=d}},Fe=function(s,l,d){switch(l){case"input":if(St(s,d),l=d.name,d.type==="radio"&&l!=null){for(d=s;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<d.length;l++){var g=d[l];if(g!==s&&g.form===s.form){var x=Ul(g);if(!x)throw Error(n(90));Ie(g),St(g,x)}}}break;case"textarea":ye(s,d);break;case"select":l=d.value,l!=null&&Rt(s,!!d.multiple,l,!1)}},Ye=jf,Ne=es;var i_={usingClientEntryPoint:!1,Events:[da,Fs,Ul,ot,yt,jf]},_a={findFiberByHostInstance:qi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},s_={bundleType:_a.bundleType,version:_a.version,rendererPackageName:_a.rendererPackageName,rendererConfig:_a.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Wm(s),s===null?null:s.stateNode},findFiberByHostInstance:_a.findFiberByHostInstance||n_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cu.isDisabled&&Cu.supportsFiber)try{Sl=Cu.inject(s_),jr=Cu}catch{}}return Dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=i_,Dn.createPortal=function(s,l){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Df(l))throw Error(n(200));return t_(s,l,null,d)},Dn.createRoot=function(s,l){if(!Df(s))throw Error(n(299));var d=!1,g="",x=gv;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onRecoverableError!==void 0&&(x=l.onRecoverableError)),l=Af(s,1,!1,null,null,d,!1,g,x),s[Hr]=l.current,la(s.nodeType===8?s.parentNode:s),new Of(l)},Dn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=Wm(l),s=s===null?null:s.stateNode,s},Dn.flushSync=function(s){return es(s)},Dn.hydrate=function(s,l,d){if(!Eu(l))throw Error(n(200));return _u(null,s,l,!0,d)},Dn.hydrateRoot=function(s,l,d){if(!Df(s))throw Error(n(405));var g=d!=null&&d.hydratedSources||null,x=!1,E="",T=gv;if(d!=null&&(d.unstable_strictMode===!0&&(x=!0),d.identifierPrefix!==void 0&&(E=d.identifierPrefix),d.onRecoverableError!==void 0&&(T=d.onRecoverableError)),l=pv(l,null,s,1,d??null,x,!1,E,T),s[Hr]=l.current,la(s),g)for(s=0;s<g.length;s++)d=g[s],x=d._getVersion,x=x(d._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[d,x]:l.mutableSourceEagerHydrationData.push(d,x);return new Su(l)},Dn.render=function(s,l,d){if(!Eu(l))throw Error(n(200));return _u(null,s,l,!1,d)},Dn.unmountComponentAtNode=function(s){if(!Eu(s))throw Error(n(40));return s._reactRootContainer?(es(function(){_u(null,null,s,!1,function(){s._reactRootContainer=null,s[Hr]=null})}),!0):!1},Dn.unstable_batchedUpdates=jf,Dn.unstable_renderSubtreeIntoContainer=function(s,l,d,g){if(!Eu(d))throw Error(n(200));if(s==null||s._reactInternals===void 0)throw Error(n(38));return _u(s,l,d,!1,g)},Dn.version="18.3.1-next-f1338f8080-20240426",Dn}var _v;function xb(){if(_v)return Ff.exports;_v=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Ff.exports=p_(),Ff.exports}var Cv;function m_(){if(Cv)return ju;Cv=1;var e=xb();return ju.createRoot=e.createRoot,ju.hydrateRoot=e.hydrateRoot,ju}var g_=m_();const y_=Mo(g_);var Xn=xb();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ja(){return Ja=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ja.apply(this,arguments)}var Ai;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ai||(Ai={}));const jv="popstate";function v_(e){e===void 0&&(e={});function t(i,o){let{pathname:a="/",search:u="",hash:c=""}=_s(i.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),Dh("",{pathname:a,search:u,hash:c},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){let a=i.document.querySelector("base"),u="";if(a&&a.getAttribute("href")){let c=i.location.href,f=c.indexOf("#");u=f===-1?c:c.slice(0,f)}return u+"#"+(typeof o=="string"?o:nc(o))}function r(i,o){Lp(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return b_(t,n,r,e)}function Lt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Lp(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function x_(){return Math.random().toString(36).substr(2,8)}function Nv(e,t){return{usr:e.state,key:e.key,idx:t}}function Dh(e,t,n,r){return n===void 0&&(n=null),Ja({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?_s(t):t,{state:n,key:t&&t.key||r||x_()})}function nc(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function _s(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function b_(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,u=Ai.Pop,c=null,f=h();f==null&&(f=0,a.replaceState(Ja({},a.state,{idx:f}),""));function h(){return(a.state||{idx:null}).idx}function p(){u=Ai.Pop;let k=h(),_=k==null?null:k-f;f=k,c&&c({action:u,location:S.location,delta:_})}function v(k,_){u=Ai.Push;let C=Dh(S.location,k,_);n&&n(C,k),f=h()+1;let j=Nv(C,f),I=S.createHref(C);try{a.pushState(j,"",I)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;i.location.assign(I)}o&&c&&c({action:u,location:S.location,delta:1})}function y(k,_){u=Ai.Replace;let C=Dh(S.location,k,_);n&&n(C,k),f=h();let j=Nv(C,f),I=S.createHref(C);a.replaceState(j,"",I),o&&c&&c({action:u,location:S.location,delta:0})}function w(k){let _=i.location.origin!=="null"?i.location.origin:i.location.href,C=typeof k=="string"?k:nc(k);return C=C.replace(/ $/,"%20"),Lt(_,"No window.location.(origin|href) available to create URL for href: "+C),new URL(C,_)}let S={get action(){return u},get location(){return e(i,a)},listen(k){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(jv,p),c=k,()=>{i.removeEventListener(jv,p),c=null}},createHref(k){return t(i,k)},createURL:w,encodeLocation(k){let _=w(k);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:v,replace:y,go(k){return a.go(k)}};return S}var Tv;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Tv||(Tv={}));function w_(e,t,n){return n===void 0&&(n="/"),k_(e,t,n)}function k_(e,t,n,r){let i=typeof t=="string"?_s(t):t,o=No(i.pathname||"/",n);if(o==null)return null;let a=bb(e);S_(a);let u=null;for(let c=0;u==null&&c<a.length;++c){let f=M_(o);u=R_(a[c],f)}return u}function bb(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,a,u)=>{let c={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};c.relativePath.startsWith("/")&&(Lt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let f=Di([r,c.relativePath]),h=n.concat(c);o.children&&o.children.length>0&&(Lt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),bb(o.children,t,h,f)),!(o.path==null&&!o.index)&&t.push({path:f,score:I_(f,o.index),routesMeta:h})};return e.forEach((o,a)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))i(o,a);else for(let c of wb(o.path))i(o,a,c)}),t}function wb(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let a=wb(r.join("/")),u=[];return u.push(...a.map(c=>c===""?o:[o,c].join("/"))),i&&u.push(...a),u.map(c=>e.startsWith("/")&&c===""?"/":c)}function S_(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:P_(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const E_=/^:[\w-]+$/,__=3,C_=2,j_=1,N_=10,T_=-2,Iv=e=>e==="*";function I_(e,t){let n=e.split("/"),r=n.length;return n.some(Iv)&&(r+=T_),t&&(r+=C_),n.filter(i=>!Iv(i)).reduce((i,o)=>i+(E_.test(o)?__:o===""?j_:N_),r)}function P_(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function R_(e,t,n){let{routesMeta:r}=e,i={},o="/",a=[];for(let u=0;u<r.length;++u){let c=r[u],f=u===r.length-1,h=o==="/"?t:t.slice(o.length)||"/",p=Lh({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},h),v=c.route;if(!p)return null;Object.assign(i,p.params),a.push({params:i,pathname:Di([o,p.pathname]),pathnameBase:$_(Di([o,p.pathnameBase])),route:v}),p.pathnameBase!=="/"&&(o=Di([o,p.pathnameBase]))}return a}function Lh(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=A_(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((f,h,p)=>{let{paramName:v,isOptional:y}=h;if(v==="*"){let S=u[p]||"";a=o.slice(0,o.length-S.length).replace(/(.)\/+$/,"$1")}const w=u[p];return y&&!w?f[v]=void 0:f[v]=(w||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:a,pattern:e}}function A_(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Lp(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,c)=>(r.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function M_(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Lp(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function No(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function O_(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?_s(e):e;return{pathname:n?n.startsWith("/")?n:D_(n,t):t,search:F_(r),hash:B_(i)}}function D_(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Uf(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function L_(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function $p(e,t){let n=L_(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Fp(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=_s(e):(i=Ja({},e),Lt(!i.pathname||!i.pathname.includes("?"),Uf("?","pathname","search",i)),Lt(!i.pathname||!i.pathname.includes("#"),Uf("#","pathname","hash",i)),Lt(!i.search||!i.search.includes("#"),Uf("#","search","hash",i)));let o=e===""||i.pathname==="",a=o?"/":i.pathname,u;if(a==null)u=n;else{let p=t.length-1;if(!r&&a.startsWith("..")){let v=a.split("/");for(;v[0]==="..";)v.shift(),p-=1;i.pathname=v.join("/")}u=p>=0?t[p]:"/"}let c=O_(i,u),f=a&&a!=="/"&&a.endsWith("/"),h=(o||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(f||h)&&(c.pathname+="/"),c}const Di=e=>e.join("/").replace(/\/\/+/g,"/"),$_=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),F_=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,B_=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function z_(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const kb=["post","put","patch","delete"];new Set(kb);const U_=["get",...kb];new Set(U_);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qa(){return Qa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qa.apply(this,arguments)}const jc=b.createContext(null),Sb=b.createContext(null),ti=b.createContext(null),Nc=b.createContext(null),ni=b.createContext({outlet:null,matches:[],isDataRoute:!1}),Eb=b.createContext(null);function W_(e,t){let{relative:n}=t===void 0?{}:t;Oo()||Lt(!1);let{basename:r,navigator:i}=b.useContext(ti),{hash:o,pathname:a,search:u}=Tc(e,{relative:n}),c=a;return r!=="/"&&(c=a==="/"?r:Di([r,a])),i.createHref({pathname:c,search:u,hash:o})}function Oo(){return b.useContext(Nc)!=null}function ri(){return Oo()||Lt(!1),b.useContext(Nc).location}function _b(e){b.useContext(ti).static||b.useLayoutEffect(e)}function Bp(){let{isDataRoute:e}=b.useContext(ni);return e?iC():H_()}function H_(){Oo()||Lt(!1);let e=b.useContext(jc),{basename:t,future:n,navigator:r}=b.useContext(ti),{matches:i}=b.useContext(ni),{pathname:o}=ri(),a=JSON.stringify($p(i,n.v7_relativeSplatPath)),u=b.useRef(!1);return _b(()=>{u.current=!0}),b.useCallback(function(f,h){if(h===void 0&&(h={}),!u.current)return;if(typeof f=="number"){r.go(f);return}let p=Fp(f,JSON.parse(a),o,h.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:Di([t,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[t,r,a,o,e])}const V_=b.createContext(null);function q_(e){let t=b.useContext(ni).outlet;return t&&b.createElement(V_.Provider,{value:e},t)}function Tc(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=b.useContext(ti),{matches:i}=b.useContext(ni),{pathname:o}=ri(),a=JSON.stringify($p(i,r.v7_relativeSplatPath));return b.useMemo(()=>Fp(e,JSON.parse(a),o,n==="path"),[e,a,o,n])}function K_(e,t){return Y_(e,t)}function Y_(e,t,n,r){Oo()||Lt(!1);let{navigator:i}=b.useContext(ti),{matches:o}=b.useContext(ni),a=o[o.length-1],u=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let f=ri(),h;if(t){var p;let k=typeof t=="string"?_s(t):t;c==="/"||(p=k.pathname)!=null&&p.startsWith(c)||Lt(!1),h=k}else h=f;let v=h.pathname||"/",y=v;if(c!=="/"){let k=c.replace(/^\//,"").split("/");y="/"+v.replace(/^\//,"").split("/").slice(k.length).join("/")}let w=w_(e,{pathname:y}),S=Z_(w&&w.map(k=>Object.assign({},k,{params:Object.assign({},u,k.params),pathname:Di([c,i.encodeLocation?i.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?c:Di([c,i.encodeLocation?i.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),o,n,r);return t&&S?b.createElement(Nc.Provider,{value:{location:Qa({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Ai.Pop}},S):S}function G_(){let e=rC(),t=z_(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},t),n?b.createElement("pre",{style:i},n):null,null)}const J_=b.createElement(G_,null);class Q_ extends b.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?b.createElement(ni.Provider,{value:this.props.routeContext},b.createElement(Eb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function X_(e){let{routeContext:t,match:n,children:r}=e,i=b.useContext(jc);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(ni.Provider,{value:t},r)}function Z_(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,u=(i=n)==null?void 0:i.errors;if(u!=null){let h=a.findIndex(p=>p.route.id&&(u==null?void 0:u[p.route.id])!==void 0);h>=0||Lt(!1),a=a.slice(0,Math.min(a.length,h+1))}let c=!1,f=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<a.length;h++){let p=a[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(f=h),p.route.id){let{loaderData:v,errors:y}=n,w=p.route.loader&&v[p.route.id]===void 0&&(!y||y[p.route.id]===void 0);if(p.route.lazy||w){c=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((h,p,v)=>{let y,w=!1,S=null,k=null;n&&(y=u&&p.route.id?u[p.route.id]:void 0,S=p.route.errorElement||J_,c&&(f<0&&v===0?(sC("route-fallback"),w=!0,k=null):f===v&&(w=!0,k=p.route.hydrateFallbackElement||null)));let _=t.concat(a.slice(0,v+1)),C=()=>{let j;return y?j=S:w?j=k:p.route.Component?j=b.createElement(p.route.Component,null):p.route.element?j=p.route.element:j=h,b.createElement(X_,{match:p,routeContext:{outlet:h,matches:_,isDataRoute:n!=null},children:j})};return n&&(p.route.ErrorBoundary||p.route.errorElement||v===0)?b.createElement(Q_,{location:n.location,revalidation:n.revalidation,component:S,error:y,children:C(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):C()},null)}var Cb=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(Cb||{}),jb=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(jb||{});function eC(e){let t=b.useContext(jc);return t||Lt(!1),t}function tC(e){let t=b.useContext(Sb);return t||Lt(!1),t}function nC(e){let t=b.useContext(ni);return t||Lt(!1),t}function Nb(e){let t=nC(),n=t.matches[t.matches.length-1];return n.route.id||Lt(!1),n.route.id}function rC(){var e;let t=b.useContext(Eb),n=tC(),r=Nb();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function iC(){let{router:e}=eC(Cb.UseNavigateStable),t=Nb(jb.UseNavigateStable),n=b.useRef(!1);return _b(()=>{n.current=!0}),b.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,Qa({fromRouteId:t},o)))},[e,t])}const Pv={};function sC(e,t,n){Pv[e]||(Pv[e]=!0)}function oC(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Xa(e){let{to:t,replace:n,state:r,relative:i}=e;Oo()||Lt(!1);let{future:o,static:a}=b.useContext(ti),{matches:u}=b.useContext(ni),{pathname:c}=ri(),f=Bp(),h=Fp(t,$p(u,o.v7_relativeSplatPath),c,i==="path"),p=JSON.stringify(h);return b.useEffect(()=>f(JSON.parse(p),{replace:n,state:r,relative:i}),[f,p,i,n,r]),null}function Tb(e){return q_(e.context)}function bn(e){Lt(!1)}function aC(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Ai.Pop,navigator:o,static:a=!1,future:u}=e;Oo()&&Lt(!1);let c=t.replace(/^\/*/,"/"),f=b.useMemo(()=>({basename:c,navigator:o,static:a,future:Qa({v7_relativeSplatPath:!1},u)}),[c,u,o,a]);typeof r=="string"&&(r=_s(r));let{pathname:h="/",search:p="",hash:v="",state:y=null,key:w="default"}=r,S=b.useMemo(()=>{let k=No(h,c);return k==null?null:{location:{pathname:k,search:p,hash:v,state:y,key:w},navigationType:i}},[c,h,p,v,y,w,i]);return S==null?null:b.createElement(ti.Provider,{value:f},b.createElement(Nc.Provider,{children:n,value:S}))}function lC(e){let{children:t,location:n}=e;return K_($h(t),n)}new Promise(()=>{});function $h(e,t){t===void 0&&(t=[]);let n=[];return b.Children.forEach(e,(r,i)=>{if(!b.isValidElement(r))return;let o=[...t,i];if(r.type===b.Fragment){n.push.apply(n,$h(r.props.children,o));return}r.type!==bn&&Lt(!1),!r.props.index||!r.props.children||Lt(!1);let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=$h(r.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rc(){return rc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rc.apply(this,arguments)}function Ib(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function uC(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function cC(e,t){return e.button===0&&(!t||t==="_self")&&!uC(e)}function Fh(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function dC(e,t){let n=Fh(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(o=>{n.append(i,o)})}),n}const fC=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],hC=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],pC="6";try{window.__reactRouterVersion=pC}catch{}const mC=b.createContext({isTransitioning:!1}),gC="startTransition",Rv=tc[gC];function yC(e){let{basename:t,children:n,future:r,window:i}=e,o=b.useRef();o.current==null&&(o.current=v_({window:i,v5Compat:!0}));let a=o.current,[u,c]=b.useState({action:a.action,location:a.location}),{v7_startTransition:f}=r||{},h=b.useCallback(p=>{f&&Rv?Rv(()=>c(p)):c(p)},[c,f]);return b.useLayoutEffect(()=>a.listen(h),[a,h]),b.useEffect(()=>oC(r),[r]),b.createElement(aC,{basename:t,children:n,location:u.location,navigationType:u.action,navigator:a,future:r})}const vC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",xC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Li=b.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:o,replace:a,state:u,target:c,to:f,preventScrollReset:h,viewTransition:p}=t,v=Ib(t,fC),{basename:y}=b.useContext(ti),w,S=!1;if(typeof f=="string"&&xC.test(f)&&(w=f,vC))try{let j=new URL(window.location.href),I=f.startsWith("//")?new URL(j.protocol+f):new URL(f),D=No(I.pathname,y);I.origin===j.origin&&D!=null?f=D+I.search+I.hash:S=!0}catch{}let k=W_(f,{relative:i}),_=wC(f,{replace:a,state:u,target:c,preventScrollReset:h,relative:i,viewTransition:p});function C(j){r&&r(j),j.defaultPrevented||_(j)}return b.createElement("a",rc({},v,{href:w||k,onClick:S||o?r:C,ref:n,target:c}))}),Av=b.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:i=!1,className:o="",end:a=!1,style:u,to:c,viewTransition:f,children:h}=t,p=Ib(t,hC),v=Tc(c,{relative:p.relative}),y=ri(),w=b.useContext(Sb),{navigator:S,basename:k}=b.useContext(ti),_=w!=null&&kC(v)&&f===!0,C=S.encodeLocation?S.encodeLocation(v).pathname:v.pathname,j=y.pathname,I=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;i||(j=j.toLowerCase(),I=I?I.toLowerCase():null,C=C.toLowerCase()),I&&k&&(I=No(I,k)||I);const D=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let A=j===C||!a&&j.startsWith(C)&&j.charAt(D)==="/",U=I!=null&&(I===C||!a&&I.startsWith(C)&&I.charAt(C.length)==="/"),te={isActive:A,isPending:U,isTransitioning:_},z=A?r:void 0,M;typeof o=="function"?M=o(te):M=[o,A?"active":null,U?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let $=typeof u=="function"?u(te):u;return b.createElement(Li,rc({},p,{"aria-current":z,className:M,ref:n,style:$,to:c,viewTransition:f}),typeof h=="function"?h(te):h)});var Bh;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Bh||(Bh={}));var Mv;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Mv||(Mv={}));function bC(e){let t=b.useContext(jc);return t||Lt(!1),t}function wC(e,t){let{target:n,replace:r,state:i,preventScrollReset:o,relative:a,viewTransition:u}=t===void 0?{}:t,c=Bp(),f=ri(),h=Tc(e,{relative:a});return b.useCallback(p=>{if(cC(p,n)){p.preventDefault();let v=r!==void 0?r:nc(f)===nc(h);c(e,{replace:v,state:i,preventScrollReset:o,relative:a,viewTransition:u})}},[f,c,h,r,i,n,e,o,a,u])}function Do(e){let t=b.useRef(Fh(e)),n=b.useRef(!1),r=ri(),i=b.useMemo(()=>dC(r.search,n.current?null:t.current),[r.search]),o=Bp(),a=b.useCallback((u,c)=>{const f=Fh(typeof u=="function"?u(i):u);n.current=!0,o("?"+f,c)},[o,i]);return[i,a]}function kC(e,t){t===void 0&&(t={});let n=b.useContext(mC);n==null&&Lt(!1);let{basename:r}=bC(Bh.useViewTransitionState),i=Tc(e,{relative:t.relative});if(!n.isTransitioning)return!1;let o=No(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=No(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Lh(i.pathname,a)!=null||Lh(i.pathname,o)!=null}const Pb=typeof document<"u"?Ae.useLayoutEffect:()=>{};var Wf;const SC=(Wf=Ae.useInsertionEffect)!==null&&Wf!==void 0?Wf:Pb;function EC(e){const t=b.useRef(null);return SC(()=>{t.current=e},[e]),b.useCallback((...n)=>{const r=t.current;return r==null?void 0:r(...n)},[])}const zi=e=>{var t;return(t=e==null?void 0:e.ownerDocument)!==null&&t!==void 0?t:document},ys=e=>e&&"window"in e&&e.window===e?e:zi(e).defaultView||window;function _C(e){return e!==null&&typeof e=="object"&&"nodeType"in e&&typeof e.nodeType=="number"}function CC(e){return _C(e)&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in e}let jC=!1;function zp(){return jC}function Rb(e,t){if(!zp())return t&&e?e.contains(t):!1;if(!e||!t)return!1;let n=t;for(;n!==null;){if(n===e)return!0;n.tagName==="SLOT"&&n.assignedSlot?n=n.assignedSlot.parentNode:CC(n)?n=n.host:n=n.parentNode}return!1}const zh=(e=document)=>{var t;if(!zp())return e.activeElement;let n=e.activeElement;for(;n&&"shadowRoot"in n&&(!((t=n.shadowRoot)===null||t===void 0)&&t.activeElement);)n=n.shadowRoot.activeElement;return n};function Ab(e){return zp()&&e.target.shadowRoot&&e.composedPath?e.composedPath()[0]:e.target}function Mb(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Mb(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Be(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Mb(e))&&(r&&(r+=" "),r+=t);return r}function NC(e){var t;if(typeof window>"u"||window.navigator==null)return!1;let n=(t=window.navigator.userAgentData)===null||t===void 0?void 0:t.brands;return Array.isArray(n)&&n.some(r=>e.test(r.brand))||e.test(window.navigator.userAgent)}function TC(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function Ob(e){let t=null;return()=>(t==null&&(t=e()),t)}const IC=Ob(function(){return TC(/^Mac/i)}),PC=Ob(function(){return NC(/Android/i)});function Db(){let e=b.useRef(new Map),t=b.useCallback((i,o,a,u)=>{let c=u!=null&&u.once?(...f)=>{e.current.delete(a),a(...f)}:a;e.current.set(a,{type:o,eventTarget:i,fn:c,options:u}),i.addEventListener(o,c,u)},[]),n=b.useCallback((i,o,a,u)=>{var c;let f=((c=e.current.get(a))===null||c===void 0?void 0:c.fn)||a;i.removeEventListener(o,f,u),e.current.delete(a)},[]),r=b.useCallback(()=>{e.current.forEach((i,o)=>{n(i.eventTarget,i.type,o,i.options)})},[n]);return b.useEffect(()=>r,[r]),{addGlobalListener:t,removeGlobalListener:n,removeAllGlobalListeners:r}}function RC(e){return e.pointerType===""&&e.isTrusted?!0:PC()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function Lb(e){let t=e;return t.nativeEvent=e,t.isDefaultPrevented=()=>t.defaultPrevented,t.isPropagationStopped=()=>t.cancelBubble,t.persist=()=>{},t}function AC(e,t){Object.defineProperty(e,"target",{value:t}),Object.defineProperty(e,"currentTarget",{value:t})}function $b(e){let t=b.useRef({isFocused:!1,observer:null});Pb(()=>{const r=t.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]);let n=EC(r=>{e==null||e(r)});return b.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){t.current.isFocused=!0;let i=r.target,o=a=>{if(t.current.isFocused=!1,i.disabled){let u=Lb(a);n(u)}t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)};i.addEventListener("focusout",o,{once:!0}),t.current.observer=new MutationObserver(()=>{if(t.current.isFocused&&i.disabled){var a;(a=t.current.observer)===null||a===void 0||a.disconnect();let u=i===document.activeElement?null:document.activeElement;i.dispatchEvent(new FocusEvent("blur",{relatedTarget:u})),i.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:u}))}}),t.current.observer.observe(i,{attributes:!0,attributeFilter:["disabled"]})}},[n])}let MC=!1,ul=null,Uh=new Set,La=new Map,bs=!1,Wh=!1;const OC={Tab:!0,Escape:!0};function Up(e,t){for(let n of Uh)n(e,t)}function DC(e){return!(e.metaKey||!IC()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function ic(e){bs=!0,DC(e)&&(ul="keyboard",Up("keyboard",e))}function wo(e){ul="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(bs=!0,Up("pointer",e))}function Fb(e){RC(e)&&(bs=!0,ul="virtual")}function Bb(e){e.target===window||e.target===document||MC||!e.isTrusted||(!bs&&!Wh&&(ul="virtual",Up("virtual",e)),bs=!1,Wh=!1)}function zb(){bs=!1,Wh=!0}function Hh(e){if(typeof window>"u"||typeof document>"u"||La.get(ys(e)))return;const t=ys(e),n=zi(e);let r=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){bs=!0,r.apply(this,arguments)},n.addEventListener("keydown",ic,!0),n.addEventListener("keyup",ic,!0),n.addEventListener("click",Fb,!0),t.addEventListener("focus",Bb,!0),t.addEventListener("blur",zb,!1),typeof PointerEvent<"u"&&(n.addEventListener("pointerdown",wo,!0),n.addEventListener("pointermove",wo,!0),n.addEventListener("pointerup",wo,!0)),t.addEventListener("beforeunload",()=>{Ub(e)},{once:!0}),La.set(t,{focus:r})}const Ub=(e,t)=>{const n=ys(e),r=zi(e);t&&r.removeEventListener("DOMContentLoaded",t),La.has(n)&&(n.HTMLElement.prototype.focus=La.get(n).focus,r.removeEventListener("keydown",ic,!0),r.removeEventListener("keyup",ic,!0),r.removeEventListener("click",Fb,!0),n.removeEventListener("focus",Bb,!0),n.removeEventListener("blur",zb,!1),typeof PointerEvent<"u"&&(r.removeEventListener("pointerdown",wo,!0),r.removeEventListener("pointermove",wo,!0),r.removeEventListener("pointerup",wo,!0)),La.delete(n))};function LC(e){const t=zi(e);let n;return t.readyState!=="loading"?Hh(e):(n=()=>{Hh(e)},t.addEventListener("DOMContentLoaded",n)),()=>Ub(e,n)}typeof document<"u"&&LC();function Wb(){return ul!=="pointer"}const $C=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function FC(e,t,n){let r=zi(n==null?void 0:n.target);const i=typeof window<"u"?ys(n==null?void 0:n.target).HTMLInputElement:HTMLInputElement,o=typeof window<"u"?ys(n==null?void 0:n.target).HTMLTextAreaElement:HTMLTextAreaElement,a=typeof window<"u"?ys(n==null?void 0:n.target).HTMLElement:HTMLElement,u=typeof window<"u"?ys(n==null?void 0:n.target).KeyboardEvent:KeyboardEvent;return e=e||r.activeElement instanceof i&&!$C.has(r.activeElement.type)||r.activeElement instanceof o||r.activeElement instanceof a&&r.activeElement.isContentEditable,!(e&&t==="keyboard"&&n instanceof u&&!OC[n.key])}function BC(e,t,n){Hh(),b.useEffect(()=>{let r=(i,o)=>{FC(!!(n!=null&&n.isTextInput),i,o)&&e(Wb())};return Uh.add(r),()=>{Uh.delete(r)}},t)}function zC(e){let{isDisabled:t,onFocus:n,onBlur:r,onFocusChange:i}=e;const o=b.useCallback(c=>{if(c.target===c.currentTarget)return r&&r(c),i&&i(!1),!0},[r,i]),a=$b(o),u=b.useCallback(c=>{const f=zi(c.target),h=f?zh(f):zh();c.target===c.currentTarget&&h===Ab(c.nativeEvent)&&(n&&n(c),i&&i(!0),a(c))},[i,n,a]);return{focusProps:{onFocus:!t&&(n||i||r)?u:void 0,onBlur:!t&&(r||i)?o:void 0}}}function UC(e){let{isDisabled:t,onBlurWithin:n,onFocusWithin:r,onFocusWithinChange:i}=e,o=b.useRef({isFocusWithin:!1}),{addGlobalListener:a,removeAllGlobalListeners:u}=Db(),c=b.useCallback(p=>{p.currentTarget.contains(p.target)&&o.current.isFocusWithin&&!p.currentTarget.contains(p.relatedTarget)&&(o.current.isFocusWithin=!1,u(),n&&n(p),i&&i(!1))},[n,i,o,u]),f=$b(c),h=b.useCallback(p=>{if(!p.currentTarget.contains(p.target))return;const v=zi(p.target),y=zh(v);if(!o.current.isFocusWithin&&y===Ab(p.nativeEvent)){r&&r(p),i&&i(!0),o.current.isFocusWithin=!0,f(p);let w=p.currentTarget;a(v,"focus",S=>{if(o.current.isFocusWithin&&!Rb(w,S.target)){let k=new v.defaultView.FocusEvent("blur",{relatedTarget:S.target});AC(k,w);let _=Lb(k);c(_)}},{capture:!0})}},[r,i,f,a,c]);return t?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:h,onBlur:c}}}let Vh=!1,Nu=0;function WC(){Vh=!0,setTimeout(()=>{Vh=!1},50)}function Ov(e){e.pointerType==="touch"&&WC()}function HC(){if(!(typeof document>"u"))return Nu===0&&typeof PointerEvent<"u"&&document.addEventListener("pointerup",Ov),Nu++,()=>{Nu--,!(Nu>0)&&typeof PointerEvent<"u"&&document.removeEventListener("pointerup",Ov)}}function VC(e){let{onHoverStart:t,onHoverChange:n,onHoverEnd:r,isDisabled:i}=e,[o,a]=b.useState(!1),u=b.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;b.useEffect(HC,[]);let{addGlobalListener:c,removeAllGlobalListeners:f}=Db(),{hoverProps:h,triggerHoverEnd:p}=b.useMemo(()=>{let v=(S,k)=>{if(u.pointerType=k,i||k==="touch"||u.isHovered||!S.currentTarget.contains(S.target))return;u.isHovered=!0;let _=S.currentTarget;u.target=_,c(zi(S.target),"pointerover",C=>{u.isHovered&&u.target&&!Rb(u.target,C.target)&&y(C,C.pointerType)},{capture:!0}),t&&t({type:"hoverstart",target:_,pointerType:k}),n&&n(!0),a(!0)},y=(S,k)=>{let _=u.target;u.pointerType="",u.target=null,!(k==="touch"||!u.isHovered||!_)&&(u.isHovered=!1,f(),r&&r({type:"hoverend",target:_,pointerType:k}),n&&n(!1),a(!1))},w={};return typeof PointerEvent<"u"&&(w.onPointerEnter=S=>{Vh&&S.pointerType==="mouse"||v(S,S.pointerType)},w.onPointerLeave=S=>{!i&&S.currentTarget.contains(S.target)&&y(S,S.pointerType)}),{hoverProps:w,triggerHoverEnd:y}},[t,n,r,i,u,c,f]);return b.useEffect(()=>{i&&p({currentTarget:u.target},u.pointerType)},[i]),{hoverProps:h,isHovered:o}}function qC(e={}){let{autoFocus:t=!1,isTextInput:n,within:r}=e,i=b.useRef({isFocused:!1,isFocusVisible:t||Wb()}),[o,a]=b.useState(!1),[u,c]=b.useState(()=>i.current.isFocused&&i.current.isFocusVisible),f=b.useCallback(()=>c(i.current.isFocused&&i.current.isFocusVisible),[]),h=b.useCallback(y=>{i.current.isFocused=y,a(y),f()},[f]);BC(y=>{i.current.isFocusVisible=y,f()},[],{isTextInput:n});let{focusProps:p}=zC({isDisabled:r,onFocusChange:h}),{focusWithinProps:v}=UC({isDisabled:!r,onFocusWithinChange:h});return{isFocused:o,isFocusVisible:u,focusProps:r?v:p}}var KC=Object.defineProperty,YC=(e,t,n)=>t in e?KC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Hf=(e,t,n)=>(YC(e,typeof t!="symbol"?t+"":t,n),n);let GC=class{constructor(){Hf(this,"current",this.detect()),Hf(this,"handoffState","pending"),Hf(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Dr=new GC;function Cs(e){var t;return Dr.isServer?null:e==null?document:(t=e==null?void 0:e.ownerDocument)!=null?t:document}function sc(e){var t,n;return Dr.isServer?null:e==null?document:(n=(t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))!=null?n:document}function Wp(e){var t,n;return(n=(t=sc(e))==null?void 0:t.activeElement)!=null?n:null}function Hb(e){return Wp(e)===e}function Ic(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Bn(){let e=[],t={addEventListener(n,r,i,o){return n.addEventListener(r,i,o),t.add(()=>n.removeEventListener(r,i,o))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return Ic(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},style(n,r,i){let o=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:i}),this.add(()=>{Object.assign(n.style,{[r]:o})})},group(n){let r=Bn();return n(r),this.add(()=>r.dispose())},add(n){return e.includes(n)||e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let i of e.splice(r,1))i()}},dispose(){for(let n of e.splice(0))n()}};return t}function js(){let[e]=b.useState(Bn);return b.useEffect(()=>()=>e.dispose(),[e]),e}let Pt=(e,t)=>{Dr.isServer?b.useEffect(e,t):b.useLayoutEffect(e,t)};function Ns(e){let t=b.useRef(e);return Pt(()=>{t.current=e},[e]),t}let et=function(e){let t=Ns(e);return Ae.useCallback((...n)=>t.current(...n),[t])};function JC(e){let t=e.width/2,n=e.height/2;return{top:e.clientY-n,right:e.clientX+t,bottom:e.clientY+n,left:e.clientX-t}}function QC(e,t){return!(!e||!t||e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom)}function XC({disabled:e=!1}={}){let t=b.useRef(null),[n,r]=b.useState(!1),i=js(),o=et(()=>{t.current=null,r(!1),i.dispose()}),a=et(u=>{if(i.dispose(),t.current===null){t.current=u.currentTarget,r(!0);{let c=Cs(u.currentTarget);i.addEventListener(c,"pointerup",o,!1),i.addEventListener(c,"pointermove",f=>{if(t.current){let h=JC(f);r(QC(h,t.current.getBoundingClientRect()))}},!1),i.addEventListener(c,"pointercancel",o,!1)}}});return{pressed:n,pressProps:e?{}:{onPointerDown:a,onPointerUp:o,onClick:o}}}function zr(e){return b.useMemo(()=>e,Object.values(e))}let ZC=b.createContext(void 0);function Vb(){return b.useContext(ZC)}function qh(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function Er(e,t,...n){if(e in t){let i=t[e];return typeof i=="function"?i(...n):i}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(i=>`"${i}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Er),r}var To=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(To||{}),Mi=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Mi||{});function Qt(){let e=tj();return b.useCallback(t=>ej({mergeRefs:e,...t}),[e])}function ej({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:i,visible:o=!0,name:a,mergeRefs:u}){u=u??nj;let c=qb(t,e);if(o)return Tu(c,n,r,a,u);let f=i??0;if(f&2){let{static:h=!1,...p}=c;if(h)return Tu(p,n,r,a,u)}if(f&1){let{unmount:h=!0,...p}=c;return Er(h?0:1,{0(){return null},1(){return Tu({...p,hidden:!0,style:{display:"none"}},n,r,a,u)}})}return Tu(c,n,r,a,u)}function Tu(e,t={},n,r,i){let{as:o=n,children:a,refName:u="ref",...c}=Vf(e,["unmount","static"]),f=e.ref!==void 0?{[u]:e.ref}:{},h=typeof a=="function"?a(t):a;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(t)),c["aria-labelledby"]&&c["aria-labelledby"]===c.id&&(c["aria-labelledby"]=void 0);let p={};if(t){let v=!1,y=[];for(let[w,S]of Object.entries(t))typeof S=="boolean"&&(v=!0),S===!0&&y.push(w.replace(/([A-Z])/g,k=>`-${k.toLowerCase()}`));if(v){p["data-headlessui-state"]=y.join(" ");for(let w of y)p[`data-${w}`]=""}}if($a(o)&&(Object.keys(ls(c)).length>0||Object.keys(ls(p)).length>0))if(!b.isValidElement(h)||Array.isArray(h)&&h.length>1||ij(h)){if(Object.keys(ls(c)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(ls(c)).concat(Object.keys(ls(p))).map(v=>`  - ${v}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(v=>`  - ${v}`).join(`
`)].join(`
`))}else{let v=h.props,y=v==null?void 0:v.className,w=typeof y=="function"?(..._)=>qh(y(..._),c.className):qh(y,c.className),S=w?{className:w}:{},k=qb(h.props,ls(Vf(c,["ref"])));for(let _ in p)_ in k&&delete p[_];return b.cloneElement(h,Object.assign({},k,p,f,{ref:i(rj(h),f.ref)},S))}return b.createElement(o,Object.assign({},Vf(c,["ref"]),!$a(o)&&f,!$a(o)&&p),h)}function tj(){let e=b.useRef([]),t=b.useCallback(n=>{for(let r of e.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return e.current=n,t}}function nj(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function qb(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):t[i]=r[i];if(t.disabled||t["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[i=>{var o;return(o=i==null?void 0:i.preventDefault)==null?void 0:o.call(i)}]);for(let r in n)Object.assign(t,{[r](i,...o){let a=n[r];for(let u of a){if((i instanceof Event||(i==null?void 0:i.nativeEvent)instanceof Event)&&i.defaultPrevented)return;u(i,...o)}}});return t}function Kb(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):t[i]=r[i];for(let r in n)Object.assign(t,{[r](...i){let o=n[r];for(let a of o)a==null||a(...i)}});return t}function Bt(e){var t;return Object.assign(b.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function ls(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function Vf(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function rj(e){return Ae.version.split(".")[0]>="19"?e.props.ref:e.ref}function $a(e){return e===b.Fragment||e===Symbol.for("react.fragment")}function ij(e){return $a(e.type)}let sj="span";var oc=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(oc||{});function oj(e,t){var n;let{features:r=1,...i}=e,o={ref:t,"aria-hidden":(r&2)===2?!0:(n=i["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return Qt()({ourProps:o,theirProps:i,slot:{},defaultTag:sj,name:"Hidden"})}let Kh=Bt(oj),aj=b.createContext(void 0);function lj(){return b.useContext(aj)}function Yb(e){return typeof e!="object"||e===null?!1:"nodeType"in e}function ei(e){return Yb(e)&&"tagName"in e}function tr(e){return ei(e)&&"accessKey"in e}function Or(e){return ei(e)&&"tabIndex"in e}function uj(e){return ei(e)&&"style"in e}function cj(e){return tr(e)&&e.nodeName==="IFRAME"}function Gb(e){return tr(e)&&e.nodeName==="INPUT"}function Dv(e){return tr(e)&&e.nodeName==="LABEL"}function dj(e){return tr(e)&&e.nodeName==="FIELDSET"}function Jb(e){return tr(e)&&e.nodeName==="LEGEND"}function fj(e){return ei(e)?e.matches('a[href],audio[controls],button,details,embed,iframe,img[usemap],input:not([type="hidden"]),label,select,textarea,video[controls]'):!1}function Lv(e){let t=e.parentElement,n=null;for(;t&&!dj(t);)Jb(t)&&(n=t),t=t.parentElement;let r=(t==null?void 0:t.getAttribute("disabled"))==="";return r&&hj(n)?!1:r}function hj(e){if(!e)return!1;let t=e.previousElementSibling;for(;t!==null;){if(Jb(t))return!1;t=t.previousElementSibling}return!0}let Qb=Symbol();function pj(e,t=!0){return Object.assign(e,{[Qb]:t})}function In(...e){let t=b.useRef(e);b.useEffect(()=>{t.current=e},[e]);let n=et(r=>{for(let i of t.current)i!=null&&(typeof i=="function"?i(r):i.current=r)});return e.every(r=>r==null||(r==null?void 0:r[Qb]))?void 0:n}let Hp=b.createContext(null);Hp.displayName="DescriptionContext";function Xb(){let e=b.useContext(Hp);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,Xb),t}return e}function Zb(){let[e,t]=b.useState([]);return[e.length>0?e.join(" "):void 0,b.useMemo(()=>function(n){let r=et(o=>(t(a=>[...a,o]),()=>t(a=>{let u=a.slice(),c=u.indexOf(o);return c!==-1&&u.splice(c,1),u}))),i=b.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return Ae.createElement(Hp.Provider,{value:i},n.children)},[t])]}let mj="p";function gj(e,t){let n=b.useId(),r=Vb(),{id:i=`headlessui-description-${n}`,...o}=e,a=Xb(),u=In(t);Pt(()=>a.register(i),[i,a.register]);let c=zr({...a.slot,disabled:r||!1}),f={ref:u,...a.props,id:i};return Qt()({ourProps:f,theirProps:o,slot:c,defaultTag:mj,name:a.name||"Description"})}let yj=Bt(gj),vj=Object.assign(yj,{});var un=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(un||{});let Pc=b.createContext(null);Pc.displayName="LabelContext";function Vp(){let e=b.useContext(Pc);if(e===null){let t=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,Vp),t}return e}function xj(e){var t,n,r;let i=(n=(t=b.useContext(Pc))==null?void 0:t.value)!=null?n:void 0;return((r=void 0)!=null?r:0)>0?[i,...e].filter(Boolean).join(" "):i}function ew({inherit:e=!1}={}){let t=xj(),[n,r]=b.useState([]),i=e?[t,...n].filter(Boolean):n;return[i.length>0?i.join(" "):void 0,b.useMemo(()=>function(o){let a=et(c=>(r(f=>[...f,c]),()=>r(f=>{let h=f.slice(),p=h.indexOf(c);return p!==-1&&h.splice(p,1),h}))),u=b.useMemo(()=>({register:a,slot:o.slot,name:o.name,props:o.props,value:o.value}),[a,o.slot,o.name,o.props,o.value]);return Ae.createElement(Pc.Provider,{value:u},o.children)},[r])]}let bj="label";function wj(e,t){var n;let r=b.useId(),i=Vp(),o=lj(),a=Vb(),{id:u=`headlessui-label-${r}`,htmlFor:c=o??((n=i.props)==null?void 0:n.htmlFor),passive:f=!1,...h}=e,p=In(t);Pt(()=>i.register(u),[u,i.register]);let v=et(S=>{let k=S.currentTarget;if(!(S.target!==S.currentTarget&&fj(S.target))&&(Dv(k)&&S.preventDefault(),i.props&&"onClick"in i.props&&typeof i.props.onClick=="function"&&i.props.onClick(S),Dv(k))){let _=document.getElementById(k.htmlFor);if(_){let C=_.getAttribute("disabled");if(C==="true"||C==="")return;let j=_.getAttribute("aria-disabled");if(j==="true"||j==="")return;(Gb(_)&&(_.type==="file"||_.type==="radio"||_.type==="checkbox")||_.role==="radio"||_.role==="checkbox"||_.role==="switch")&&_.click(),_.focus({preventScroll:!0})}}}),y=zr({...i.slot,disabled:a||!1}),w={ref:p,...i.props,id:u,htmlFor:c,onClick:v};return f&&("onClick"in w&&(delete w.htmlFor,delete w.onClick),"onClick"in h&&delete h.onClick),Qt()({ourProps:w,theirProps:h,slot:y,defaultTag:c?bj:"div",name:i.name||"Label"})}let kj=Bt(wj);Object.assign(kj,{});let Sj=b.createContext(()=>{});function Ej({value:e,children:t}){return Ae.createElement(Sj.Provider,{value:e},t)}function $v(e){if(e===null)return{width:0,height:0};let{width:t,height:n}=e.getBoundingClientRect();return{width:t,height:n}}function _j(e,t,n=!1){let[r,i]=b.useState(()=>$v(t));return Pt(()=>{if(!t||!e)return;let o=Bn();return o.requestAnimationFrame(function a(){o.requestAnimationFrame(a),i(u=>{let c=$v(t);return c.width===u.width&&c.height===u.height?u:c})}),()=>{o.dispose()}},[t,e]),n?{width:`${r.width}px`,height:`${r.height}px`}:r}var tw=(e=>(e[e.Left=0]="Left",e[e.Right=2]="Right",e))(tw||{});function Cj(e){let t=b.useRef(null),n=et(i=>{t.current=i.pointerType,!Lv(i.currentTarget)&&i.pointerType==="mouse"&&i.button===tw.Left&&(i.preventDefault(),e(i))}),r=et(i=>{t.current!=="mouse"&&(Lv(i.currentTarget)||e(i))});return{onPointerDown:n,onClick:r}}let nw=class extends Map{constructor(t){super(),this.factory=t}get(t){let n=super.get(t);return n===void 0&&(n=this.factory(t),this.set(t,n)),n}};var jj=Object.defineProperty,Nj=(e,t,n)=>t in e?jj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tj=(e,t,n)=>(Nj(e,t+"",n),n),rw=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},lr=(e,t,n)=>(rw(e,t,"read from private field"),n?n.call(e):t.get(e)),qf=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Fv=(e,t,n,r)=>(rw(e,t,"write to private field"),t.set(e,n),n),Rr,Ra,Aa;let iw=class{constructor(t){qf(this,Rr,{}),qf(this,Ra,new nw(()=>new Set)),qf(this,Aa,new Set),Tj(this,"disposables",Bn()),Fv(this,Rr,t),Dr.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return lr(this,Rr)}subscribe(t,n){if(Dr.isServer)return()=>{};let r={selector:t,callback:n,current:t(lr(this,Rr))};return lr(this,Aa).add(r),this.disposables.add(()=>{lr(this,Aa).delete(r)})}on(t,n){return Dr.isServer?()=>{}:(lr(this,Ra).get(t).add(n),this.disposables.add(()=>{lr(this,Ra).get(t).delete(n)}))}send(t){let n=this.reduce(lr(this,Rr),t);if(n!==lr(this,Rr)){Fv(this,Rr,n);for(let r of lr(this,Aa)){let i=r.selector(lr(this,Rr));sw(r.current,i)||(r.current=i,r.callback(i))}for(let r of lr(this,Ra).get(t.type))r(lr(this,Rr),t)}}};Rr=new WeakMap,Ra=new WeakMap,Aa=new WeakMap;function sw(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:Array.isArray(e)&&Array.isArray(t)?e.length!==t.length?!1:Kf(e[Symbol.iterator](),t[Symbol.iterator]()):e instanceof Map&&t instanceof Map||e instanceof Set&&t instanceof Set?e.size!==t.size?!1:Kf(e.entries(),t.entries()):Bv(e)&&Bv(t)?Kf(Object.entries(e)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()):!1}function Kf(e,t){do{let n=e.next(),r=t.next();if(n.done&&r.done)return!0;if(n.done||r.done||!Object.is(n.value,r.value))return!1}while(!0)}function Bv(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||Object.getPrototypeOf(t)===null}function zv(e){let[t,n]=e(),r=Bn();return(...i)=>{t(...i),r.dispose(),r.microTask(n)}}var Ij=Object.defineProperty,Pj=(e,t,n)=>t in e?Ij(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Uv=(e,t,n)=>(Pj(e,typeof t!="symbol"?t+"":t,n),n),ow=(e=>(e[e.Push=0]="Push",e[e.Pop=1]="Pop",e))(ow||{});let Rj={0(e,t){let n=t.id,r=e.stack,i=e.stack.indexOf(n);if(i!==-1){let o=e.stack.slice();return o.splice(i,1),o.push(n),r=o,{...e,stack:r}}return{...e,stack:[...e.stack,n]}},1(e,t){let n=t.id,r=e.stack.indexOf(n);if(r===-1)return e;let i=e.stack.slice();return i.splice(r,1),{...e,stack:i}}},Aj=class aw extends iw{constructor(){super(...arguments),Uv(this,"actions",{push:t=>this.send({type:0,id:t}),pop:t=>this.send({type:1,id:t})}),Uv(this,"selectors",{isTop:(t,n)=>t.stack[t.stack.length-1]===n,inStack:(t,n)=>t.stack.includes(n)})}static new(){return new aw({stack:[]})}reduce(t,n){return Er(n.type,Rj,t,n)}};const Rc=new nw(()=>Aj.new());var Yf={exports:{}},Gf={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wv;function Mj(){if(Wv)return Gf;Wv=1;var e=Cc();function t(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,o=e.useEffect,a=e.useMemo,u=e.useDebugValue;return Gf.useSyncExternalStoreWithSelector=function(c,f,h,p,v){var y=i(null);if(y.current===null){var w={hasValue:!1,value:null};y.current=w}else w=y.current;y=a(function(){function k(D){if(!_){if(_=!0,C=D,D=p(D),v!==void 0&&w.hasValue){var A=w.value;if(v(A,D))return j=A}return j=D}if(A=j,n(C,D))return A;var U=p(D);return v!==void 0&&v(A,U)?(C=D,A):(C=D,j=U)}var _=!1,C,j,I=h===void 0?null:h;return[function(){return k(f())},I===null?void 0:function(){return k(I())}]},[f,h,p,v]);var S=r(c,y[0],y[1]);return o(function(){w.hasValue=!0,w.value=S},[S]),u(S),S},Gf}var Hv;function Oj(){return Hv||(Hv=1,Yf.exports=Mj()),Yf.exports}var Dj=Oj();function dr(e,t,n=sw){return Dj.useSyncExternalStoreWithSelector(et(r=>e.subscribe(Lj,r)),et(()=>e.state),et(()=>e.state),et(t),n)}function Lj(e){return e}function cl(e,t){let n=b.useId(),r=Rc.get(t),[i,o]=dr(r,b.useCallback(a=>[r.selectors.isTop(a,n),r.selectors.inStack(a,n)],[r,n]));return Pt(()=>{if(e)return r.actions.push(n),()=>r.actions.pop(n)},[r,e,n]),e?o?i:!0:!1}let Yh=new Map,Fa=new Map;function Vv(e){var t;let n=(t=Fa.get(e))!=null?t:0;return Fa.set(e,n+1),n!==0?()=>qv(e):(Yh.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>qv(e))}function qv(e){var t;let n=(t=Fa.get(e))!=null?t:1;if(n===1?Fa.delete(e):Fa.set(e,n-1),n!==1)return;let r=Yh.get(e);r&&(r["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r["aria-hidden"]),e.inert=r.inert,Yh.delete(e))}function lw(e,{allowed:t,disallowed:n}={}){let r=cl(e,"inert-others");Pt(()=>{var i,o;if(!r)return;let a=Bn();for(let c of(i=n==null?void 0:n())!=null?i:[])c&&a.add(Vv(c));let u=(o=t==null?void 0:t())!=null?o:[];for(let c of u){if(!c)continue;let f=Cs(c);if(!f)continue;let h=c.parentElement;for(;h&&h!==f.body;){for(let p of h.children)u.some(v=>p.contains(v))||a.add(Vv(p));h=h.parentElement}}return a.dispose},[r,t,n])}function uw(e,t,n){let r=Ns(i=>{let o=i.getBoundingClientRect();o.x===0&&o.y===0&&o.width===0&&o.height===0&&n()});b.useEffect(()=>{if(!e)return;let i=t===null?null:tr(t)?t:t.current;if(!i)return;let o=Bn();if(typeof ResizeObserver<"u"){let a=new ResizeObserver(()=>r.current(i));a.observe(i),o.add(()=>a.disconnect())}if(typeof IntersectionObserver<"u"){let a=new IntersectionObserver(()=>r.current(i));a.observe(i),o.add(()=>a.disconnect())}return()=>o.dispose()},[t,r,e])}let ac=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","details>summary","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),$j=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var kr=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(kr||{}),Gh=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Gh||{}),Fj=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(Fj||{});function cw(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(ac)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function Bj(e=document.body){return e==null?[]:Array.from(e.querySelectorAll($j)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var qp=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(qp||{});function Kp(e,t=0){var n;return e===((n=Cs(e))==null?void 0:n.body)?!1:Er(t,{0(){return e.matches(ac)},1(){let r=e;for(;r!==null;){if(r.matches(ac))return!0;r=r.parentElement}return!1}})}function dw(e){Bn().nextFrame(()=>{let t=Wp(e);t&&Or(t)&&!Kp(t,0)&&Lr(e)})}var zj=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(zj||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Lr(e){e==null||e.focus({preventScroll:!0})}let Uj=["textarea","input"].join(",");function Wj(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,Uj))!=null?n:!1}function fw(e,t=n=>n){return e.slice().sort((n,r)=>{let i=t(n),o=t(r);if(i===null||o===null)return 0;let a=i.compareDocumentPosition(o);return a&Node.DOCUMENT_POSITION_FOLLOWING?-1:a&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Hj(e,t,n=e===null?document.body:sc(e)){return ko(cw(n),t,{relativeTo:e})}function ko(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:i=[]}={}){let o=Array.isArray(e)?e.length>0?sc(e[0]):document:sc(e),a=Array.isArray(e)?n?fw(e):e:t&64?Bj(e):cw(e);i.length>0&&a.length>1&&(a=a.filter(y=>!i.some(w=>w!=null&&"current"in w?(w==null?void 0:w.current)===y:w===y))),r=r??(o==null?void 0:o.activeElement);let u=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,a.indexOf(r))-1;if(t&4)return Math.max(0,a.indexOf(r))+1;if(t&8)return a.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),f=t&32?{preventScroll:!0}:{},h=0,p=a.length,v;do{if(h>=p||h+p<=0)return 0;let y=c+h;if(t&16)y=(y+p)%p;else{if(y<0)return 3;if(y>=p)return 1}v=a[y],v==null||v.focus(f),h+=u}while(v!==Wp(v));return t&6&&Wj(v)&&v.select(),2}function hw(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function Vj(){return/Android/gi.test(window.navigator.userAgent)}function Kv(){return hw()||Vj()}function xo(e,t,n,r){let i=Ns(n);b.useEffect(()=>{if(!e)return;function o(a){i.current(a)}return document.addEventListener(t,o,r),()=>document.removeEventListener(t,o,r)},[e,t,r])}function pw(e,t,n,r){let i=Ns(n);b.useEffect(()=>{if(!e)return;function o(a){i.current(a)}return window.addEventListener(t,o,r),()=>window.removeEventListener(t,o,r)},[e,t,r])}const Yv=30;function mw(e,t,n){let r=Ns(n),i=b.useCallback(function(u,c){if(u.defaultPrevented)return;let f=c(u);if(f===null||!f.getRootNode().contains(f)||!f.isConnected)return;let h=(function p(v){return typeof v=="function"?p(v()):Array.isArray(v)||v instanceof Set?v:[v]})(t);for(let p of h)if(p!==null&&(p.contains(f)||u.composed&&u.composedPath().includes(p)))return;return!Kp(f,qp.Loose)&&f.tabIndex!==-1&&u.preventDefault(),r.current(u,f)},[r,t]),o=b.useRef(null);xo(e,"pointerdown",u=>{var c,f;Kv()||(o.current=((f=(c=u.composedPath)==null?void 0:c.call(u))==null?void 0:f[0])||u.target)},!0),xo(e,"pointerup",u=>{if(Kv()||!o.current)return;let c=o.current;return o.current=null,i(u,()=>c)},!0);let a=b.useRef({x:0,y:0});xo(e,"touchstart",u=>{a.current.x=u.touches[0].clientX,a.current.y=u.touches[0].clientY},!0),xo(e,"touchend",u=>{let c={x:u.changedTouches[0].clientX,y:u.changedTouches[0].clientY};if(!(Math.abs(c.x-a.current.x)>=Yv||Math.abs(c.y-a.current.y)>=Yv))return i(u,()=>Or(u.target)?u.target:null)},!0),pw(e,"blur",u=>i(u,()=>cj(window.document.activeElement)?window.document.activeElement:null),!0)}function Za(...e){return b.useMemo(()=>Cs(...e),[...e])}var qj=(e=>(e[e.Ignore=0]="Ignore",e[e.Select=1]="Select",e[e.Close=2]="Close",e))(qj||{});const Iu={Ignore:{kind:0},Select:e=>({kind:1,target:e}),Close:{kind:2}},Kj=200,Gv=5;function Yj(e,{trigger:t,action:n,close:r,select:i}){let o=b.useRef(null),a=b.useRef(null),u=b.useRef(null);xo(e&&t!==null,"pointerdown",c=>{Yb(c==null?void 0:c.target)&&t!=null&&t.contains(c.target)&&(a.current=c.x,u.current=c.y,o.current=c.timeStamp)}),xo(e&&t!==null,"pointerup",c=>{var f,h;let p=o.current;if(p===null||(o.current=null,!Or(c.target))||Math.abs(c.x-((f=a.current)!=null?f:c.x))<Gv&&Math.abs(c.y-((h=u.current)!=null?h:c.y))<Gv)return;let v=n(c);switch(v.kind){case 0:return;case 1:{c.timeStamp-p>Kj&&(i(v.target),r());break}case 2:{r();break}}},{capture:!0})}function gw(e,t,n,r){let i=Ns(n);b.useEffect(()=>{e=e??window;function o(a){i.current(a)}return e.addEventListener(t,o,r),()=>e.removeEventListener(t,o,r)},[e,t,r])}function Gj(e,t){return b.useMemo(()=>{var n;if(e.type)return e.type;let r=(n=e.as)!=null?n:"button";if(typeof r=="string"&&r.toLowerCase()==="button"||(t==null?void 0:t.tagName)==="BUTTON"&&!t.hasAttribute("type"))return"button"},[e.type,e.as,t])}function Jj(e){return b.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}function Qj(e,t){let n=e(),r=new Set;return{getSnapshot(){return n},subscribe(i){return r.add(i),()=>r.delete(i)},dispatch(i,...o){let a=t[i].call(n,...o);a&&(n=a,r.forEach(u=>u()))}}}function Xj(){let e;return{before({doc:t}){var n;let r=t.documentElement,i=(n=t.defaultView)!=null?n:window;e=Math.max(0,i.innerWidth-r.clientWidth)},after({doc:t,d:n}){let r=t.documentElement,i=Math.max(0,r.clientWidth-r.offsetWidth),o=Math.max(0,e-i);n.style(r,"paddingRight",`${o}px`)}}}function Zj(){return hw()?{before({doc:e,d:t,meta:n}){function r(i){for(let o of n().containers)for(let a of o())if(a.contains(i))return!0;return!1}t.microTask(()=>{var i;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let u=Bn();u.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>u.dispose()))}let o=(i=window.scrollY)!=null?i:window.pageYOffset,a=null;t.addEventListener(e,"click",u=>{if(Or(u.target))try{let c=u.target.closest("a");if(!c)return;let{hash:f}=new URL(c.href),h=e.querySelector(f);Or(h)&&!r(h)&&(a=h)}catch{}},!0),t.group(u=>{t.addEventListener(e,"touchstart",c=>{if(u.dispose(),Or(c.target)&&uj(c.target))if(r(c.target)){let f=c.target;for(;f.parentElement&&r(f.parentElement);)f=f.parentElement;u.style(f,"overscrollBehavior","contain")}else u.style(c.target,"touchAction","none")})}),t.addEventListener(e,"touchmove",u=>{if(Or(u.target)){if(Gb(u.target))return;if(r(u.target)){let c=u.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&u.preventDefault()}else u.preventDefault()}},{passive:!1}),t.add(()=>{var u;let c=(u=window.scrollY)!=null?u:window.pageYOffset;o!==c&&window.scrollTo(0,o),a&&a.isConnected&&(a.scrollIntoView({block:"nearest"}),a=null)})})}}:{}}function eN(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function Jv(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let vs=Qj(()=>new Map,{PUSH(e,t){var n;let r=(n=this.get(e))!=null?n:{doc:e,count:0,d:Bn(),meta:new Set,computedMeta:{}};return r.count++,r.meta.add(t),r.computedMeta=Jv(r.meta),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t),n.computedMeta=Jv(n.meta)),this},SCROLL_PREVENT(e){let t={doc:e.doc,d:e.d,meta(){return e.computedMeta}},n=[Zj(),Xj(),eN()];n.forEach(({before:r})=>r==null?void 0:r(t)),n.forEach(({after:r})=>r==null?void 0:r(t))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});vs.subscribe(()=>{let e=vs.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let r=t.get(n.doc)==="hidden",i=n.count!==0;(i&&!r||!i&&r)&&vs.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&vs.dispatch("TEARDOWN",n)}});function tN(e,t,n=()=>({containers:[]})){let r=Jj(vs),i=t?r.get(t):void 0,o=i?i.count>0:!1;return Pt(()=>{if(!(!t||!e))return vs.dispatch("PUSH",t,n),()=>vs.dispatch("POP",t,n)},[e,t]),o}function yw(e,t,n=()=>[document.body]){let r=cl(e,"scroll-lock");tN(r,t,i=>{var o;return{containers:[...(o=i.containers)!=null?o:[],n]}})}function Qv(e){return[e.screenX,e.screenY]}function nN(){let e=b.useRef([-1,-1]);return{wasMoved(t){let n=Qv(t);return e.current[0]===n[0]&&e.current[1]===n[1]?!1:(e.current=n,!0)},update(t){e.current=Qv(t)}}}function rN(e=0){let[t,n]=b.useState(e),r=b.useCallback(c=>n(c),[]),i=b.useCallback(c=>n(f=>f|c),[]),o=b.useCallback(c=>(t&c)===c,[t]),a=b.useCallback(c=>n(f=>f&~c),[]),u=b.useCallback(c=>n(f=>f^c),[]);return{flags:t,setFlag:r,addFlag:i,hasFlag:o,removeFlag:a,toggleFlag:u}}var iN={},Xv,Zv;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((Xv=process==null?void 0:iN)==null?void 0:Xv.NODE_ENV)==="test"&&typeof((Zv=Element==null?void 0:Element.prototype)==null?void 0:Zv.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var sN=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(sN||{});function vw(e){let t={};for(let n in e)e[n]===!0&&(t[`data-${n}`]="");return t}function xw(e,t,n,r){let[i,o]=b.useState(n),{hasFlag:a,addFlag:u,removeFlag:c}=rN(e&&i?3:0),f=b.useRef(!1),h=b.useRef(!1),p=js();return Pt(()=>{var v;if(e){if(n&&o(!0),!t){n&&u(3);return}return(v=r==null?void 0:r.start)==null||v.call(r,n),oN(t,{inFlight:f,prepare(){h.current?h.current=!1:h.current=f.current,f.current=!0,!h.current&&(n?(u(3),c(4)):(u(4),c(2)))},run(){h.current?n?(c(3),u(4)):(c(4),u(3)):n?c(1):u(1)},done(){var y;h.current&&uN(t)||(f.current=!1,c(7),n||o(!1),(y=r==null?void 0:r.end)==null||y.call(r,n))}})}},[e,n,t,p]),e?[i,{closed:a(1),enter:a(2),leave:a(4),transition:a(2)||a(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function oN(e,{prepare:t,run:n,done:r,inFlight:i}){let o=Bn();return lN(e,{prepare:t,inFlight:i}),o.nextFrame(()=>{n(),o.requestAnimationFrame(()=>{o.add(aN(e,r))})}),o.dispose}function aN(e,t){var n,r;let i=Bn();if(!e)return i.dispose;let o=!1;i.add(()=>{o=!0});let a=(r=(n=e.getAnimations)==null?void 0:n.call(e).filter(u=>u instanceof CSSTransition))!=null?r:[];return a.length===0?(t(),i.dispose):(Promise.allSettled(a.map(u=>u.finished)).then(()=>{o||t()}),i.dispose)}function lN(e,{inFlight:t,prepare:n}){if(t!=null&&t.current){n();return}let r=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=r}function uN(e){var t,n;return((n=(t=e.getAnimations)==null?void 0:t.call(e))!=null?n:[]).some(r=>r instanceof CSSTransition&&r.playState!=="finished")}function cN(e,{container:t,accept:n,walk:r}){let i=b.useRef(n),o=b.useRef(r);b.useEffect(()=>{i.current=n,o.current=r},[n,r]),Pt(()=>{if(!t||!e)return;let a=Cs(t);if(!a)return;let u=i.current,c=o.current,f=Object.assign(p=>u(p),{acceptNode:u}),h=a.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,f,!1);for(;h.nextNode();)c(h.currentNode)},[t,e,i,o])}function Yp(e,t){let n=b.useRef([]),r=et(e);b.useEffect(()=>{let i=[...n.current];for(let[o,a]of t.entries())if(n.current[o]!==a){let u=r(t,i);return n.current=t,u}},[r,...t])}function Ac(){return typeof window<"u"}function Lo(e){return bw(e)?(e.nodeName||"").toLowerCase():"#document"}function Zn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ur(e){var t;return(t=(bw(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function bw(e){return Ac()?e instanceof Node||e instanceof Zn(e).Node:!1}function Nn(e){return Ac()?e instanceof Element||e instanceof Zn(e).Element:!1}function Fr(e){return Ac()?e instanceof HTMLElement||e instanceof Zn(e).HTMLElement:!1}function ex(e){return!Ac()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Zn(e).ShadowRoot}const dN=new Set(["inline","contents"]);function dl(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=_r(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!dN.has(i)}const fN=new Set(["table","td","th"]);function hN(e){return fN.has(Lo(e))}const pN=[":popover-open",":modal"];function Mc(e){return pN.some(t=>{try{return e.matches(t)}catch{return!1}})}const mN=["transform","translate","scale","rotate","perspective"],gN=["transform","translate","scale","rotate","perspective","filter"],yN=["paint","layout","strict","content"];function Gp(e){const t=Jp(),n=Nn(e)?_r(e):e;return mN.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||gN.some(r=>(n.willChange||"").includes(r))||yN.some(r=>(n.contain||"").includes(r))}function vN(e){let t=$i(e);for(;Fr(t)&&!Io(t);){if(Gp(t))return t;if(Mc(t))return null;t=$i(t)}return null}function Jp(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const xN=new Set(["html","body","#document"]);function Io(e){return xN.has(Lo(e))}function _r(e){return Zn(e).getComputedStyle(e)}function Oc(e){return Nn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function $i(e){if(Lo(e)==="html")return e;const t=e.assignedSlot||e.parentNode||ex(e)&&e.host||Ur(e);return ex(t)?t.host:t}function ww(e){const t=$i(e);return Io(t)?e.ownerDocument?e.ownerDocument.body:e.body:Fr(t)&&dl(t)?t:ww(t)}function el(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=ww(e),o=i===((r=e.ownerDocument)==null?void 0:r.body),a=Zn(i);if(o){const u=Jh(a);return t.concat(a,a.visualViewport||[],dl(i)?i:[],u&&n?el(u):[])}return t.concat(i,el(i,[],n))}function Jh(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function bN(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}const ws=Math.min,kn=Math.max,tl=Math.round,Pu=Math.floor,$r=e=>({x:e,y:e}),wN={left:"right",right:"left",bottom:"top",top:"bottom"},kN={start:"end",end:"start"};function tx(e,t,n){return kn(e,ws(t,n))}function $o(e,t){return typeof e=="function"?e(t):e}function Fi(e){return e.split("-")[0]}function fl(e){return e.split("-")[1]}function kw(e){return e==="x"?"y":"x"}function Sw(e){return e==="y"?"height":"width"}const SN=new Set(["top","bottom"]);function Zr(e){return SN.has(Fi(e))?"y":"x"}function Ew(e){return kw(Zr(e))}function EN(e,t,n){n===void 0&&(n=!1);const r=fl(e),i=Ew(e),o=Sw(i);let a=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(a=lc(a)),[a,lc(a)]}function _N(e){const t=lc(e);return[Qh(e),t,Qh(t)]}function Qh(e){return e.replace(/start|end/g,t=>kN[t])}const nx=["left","right"],rx=["right","left"],CN=["top","bottom"],jN=["bottom","top"];function NN(e,t,n){switch(e){case"top":case"bottom":return n?t?rx:nx:t?nx:rx;case"left":case"right":return t?CN:jN;default:return[]}}function TN(e,t,n,r){const i=fl(e);let o=NN(Fi(e),n==="start",r);return i&&(o=o.map(a=>a+"-"+i),t&&(o=o.concat(o.map(Qh)))),o}function lc(e){return e.replace(/left|right|bottom|top/g,t=>wN[t])}function IN(e){return{top:0,right:0,bottom:0,left:0,...e}}function PN(e){return typeof e!="number"?IN(e):{top:e,right:e,bottom:e,left:e}}function uc(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function ix(e,t,n){let{reference:r,floating:i}=e;const o=Zr(t),a=Ew(t),u=Sw(a),c=Fi(t),f=o==="y",h=r.x+r.width/2-i.width/2,p=r.y+r.height/2-i.height/2,v=r[u]/2-i[u]/2;let y;switch(c){case"top":y={x:h,y:r.y-i.height};break;case"bottom":y={x:h,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:p};break;case"left":y={x:r.x-i.width,y:p};break;default:y={x:r.x,y:r.y}}switch(fl(t)){case"start":y[a]-=v*(n&&f?-1:1);break;case"end":y[a]+=v*(n&&f?-1:1);break}return y}const RN=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:a}=n,u=o.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(t));let f=await a.getElementRects({reference:e,floating:t,strategy:i}),{x:h,y:p}=ix(f,r,c),v=r,y={},w=0;for(let S=0;S<u.length;S++){const{name:k,fn:_}=u[S],{x:C,y:j,data:I,reset:D}=await _({x:h,y:p,initialPlacement:r,placement:v,strategy:i,middlewareData:y,rects:f,platform:a,elements:{reference:e,floating:t}});h=C??h,p=j??p,y={...y,[k]:{...y[k],...I}},D&&w<=50&&(w++,typeof D=="object"&&(D.placement&&(v=D.placement),D.rects&&(f=D.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:i}):D.rects),{x:h,y:p}=ix(f,v,c)),S=-1)}return{x:h,y:p,placement:v,strategy:i,middlewareData:y}};async function Dc(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:o,rects:a,elements:u,strategy:c}=e,{boundary:f="clippingAncestors",rootBoundary:h="viewport",elementContext:p="floating",altBoundary:v=!1,padding:y=0}=$o(t,e),w=PN(y),k=u[v?p==="floating"?"reference":"floating":p],_=uc(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(k)))==null||n?k:k.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(u.floating)),boundary:f,rootBoundary:h,strategy:c})),C=p==="floating"?{x:r,y:i,width:a.floating.width,height:a.floating.height}:a.reference,j=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u.floating)),I=await(o.isElement==null?void 0:o.isElement(j))?await(o.getScale==null?void 0:o.getScale(j))||{x:1,y:1}:{x:1,y:1},D=uc(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:C,offsetParent:j,strategy:c}):C);return{top:(_.top-D.top+w.top)/I.y,bottom:(D.bottom-_.bottom+w.bottom)/I.y,left:(_.left-D.left+w.left)/I.x,right:(D.right-_.right+w.right)/I.x}}const AN=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:o,rects:a,initialPlacement:u,platform:c,elements:f}=t,{mainAxis:h=!0,crossAxis:p=!0,fallbackPlacements:v,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:S=!0,...k}=$o(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const _=Fi(i),C=Zr(u),j=Fi(u)===u,I=await(c.isRTL==null?void 0:c.isRTL(f.floating)),D=v||(j||!S?[lc(u)]:_N(u)),A=w!=="none";!v&&A&&D.push(...TN(u,S,w,I));const U=[u,...D],te=await Dc(t,k),z=[];let M=((r=o.flip)==null?void 0:r.overflows)||[];if(h&&z.push(te[_]),p){const Y=EN(i,a,I);z.push(te[Y[0]],te[Y[1]])}if(M=[...M,{placement:i,overflows:z}],!z.every(Y=>Y<=0)){var $,ne;const Y=((($=o.flip)==null?void 0:$.index)||0)+1,K=U[Y];if(K&&(!(p==="alignment"?C!==Zr(K):!1)||M.every(F=>Zr(F.placement)===C?F.overflows[0]>0:!0)))return{data:{index:Y,overflows:M},reset:{placement:K}};let se=(ne=M.filter(q=>q.overflows[0]<=0).sort((q,F)=>q.overflows[1]-F.overflows[1])[0])==null?void 0:ne.placement;if(!se)switch(y){case"bestFit":{var H;const q=(H=M.filter(F=>{if(A){const L=Zr(F.placement);return L===C||L==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(L=>L>0).reduce((L,N)=>L+N,0)]).sort((F,L)=>F[1]-L[1])[0])==null?void 0:H[0];q&&(se=q);break}case"initialPlacement":se=u;break}if(i!==se)return{reset:{placement:se}}}return{}}}},MN=new Set(["left","top"]);async function ON(e,t){const{placement:n,platform:r,elements:i}=e,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),a=Fi(n),u=fl(n),c=Zr(n)==="y",f=MN.has(a)?-1:1,h=o&&c?-1:1,p=$o(t,e);let{mainAxis:v,crossAxis:y,alignmentAxis:w}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return u&&typeof w=="number"&&(y=u==="end"?w*-1:w),c?{x:y*h,y:v*f}:{x:v*f,y:y*h}}const DN=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:o,placement:a,middlewareData:u}=t,c=await ON(t,e);return a===((n=u.offset)==null?void 0:n.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:o+c.y,data:{...c,placement:a}}}}},LN=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:a=!1,limiter:u={fn:k=>{let{x:_,y:C}=k;return{x:_,y:C}}},...c}=$o(e,t),f={x:n,y:r},h=await Dc(t,c),p=Zr(Fi(i)),v=kw(p);let y=f[v],w=f[p];if(o){const k=v==="y"?"top":"left",_=v==="y"?"bottom":"right",C=y+h[k],j=y-h[_];y=tx(C,y,j)}if(a){const k=p==="y"?"top":"left",_=p==="y"?"bottom":"right",C=w+h[k],j=w-h[_];w=tx(C,w,j)}const S=u.fn({...t,[v]:y,[p]:w});return{...S,data:{x:S.x-n,y:S.y-r,enabled:{[v]:o,[p]:a}}}}}},$N=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:o,platform:a,elements:u}=t,{apply:c=()=>{},...f}=$o(e,t),h=await Dc(t,f),p=Fi(i),v=fl(i),y=Zr(i)==="y",{width:w,height:S}=o.floating;let k,_;p==="top"||p==="bottom"?(k=p,_=v===(await(a.isRTL==null?void 0:a.isRTL(u.floating))?"start":"end")?"left":"right"):(_=p,k=v==="end"?"top":"bottom");const C=S-h.top-h.bottom,j=w-h.left-h.right,I=ws(S-h[k],C),D=ws(w-h[_],j),A=!t.middlewareData.shift;let U=I,te=D;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(te=j),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(U=C),A&&!v){const M=kn(h.left,0),$=kn(h.right,0),ne=kn(h.top,0),H=kn(h.bottom,0);y?te=w-2*(M!==0||$!==0?M+$:kn(h.left,h.right)):U=S-2*(ne!==0||H!==0?ne+H:kn(h.top,h.bottom))}await c({...t,availableWidth:te,availableHeight:U});const z=await a.getDimensions(u.floating);return w!==z.width||S!==z.height?{reset:{rects:!0}}:{}}}};function _w(e){const t=_r(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Fr(e),o=i?e.offsetWidth:n,a=i?e.offsetHeight:r,u=tl(n)!==o||tl(r)!==a;return u&&(n=o,r=a),{width:n,height:r,$:u}}function Qp(e){return Nn(e)?e:e.contextElement}function So(e){const t=Qp(e);if(!Fr(t))return $r(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=_w(t);let a=(o?tl(n.width):n.width)/r,u=(o?tl(n.height):n.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!u||!Number.isFinite(u))&&(u=1),{x:a,y:u}}const FN=$r(0);function Cw(e){const t=Zn(e);return!Jp()||!t.visualViewport?FN:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function BN(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Zn(e)?!1:t}function ks(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),o=Qp(e);let a=$r(1);t&&(r?Nn(r)&&(a=So(r)):a=So(e));const u=BN(o,n,r)?Cw(o):$r(0);let c=(i.left+u.x)/a.x,f=(i.top+u.y)/a.y,h=i.width/a.x,p=i.height/a.y;if(o){const v=Zn(o),y=r&&Nn(r)?Zn(r):r;let w=v,S=Jh(w);for(;S&&r&&y!==w;){const k=So(S),_=S.getBoundingClientRect(),C=_r(S),j=_.left+(S.clientLeft+parseFloat(C.paddingLeft))*k.x,I=_.top+(S.clientTop+parseFloat(C.paddingTop))*k.y;c*=k.x,f*=k.y,h*=k.x,p*=k.y,c+=j,f+=I,w=Zn(S),S=Jh(w)}}return uc({width:h,height:p,x:c,y:f})}function Lc(e,t){const n=Oc(e).scrollLeft;return t?t.left+n:ks(Ur(e)).left+n}function jw(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-Lc(e,n),i=n.top+t.scrollTop;return{x:r,y:i}}function zN(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const o=i==="fixed",a=Ur(r),u=t?Mc(t.floating):!1;if(r===a||u&&o)return n;let c={scrollLeft:0,scrollTop:0},f=$r(1);const h=$r(0),p=Fr(r);if((p||!p&&!o)&&((Lo(r)!=="body"||dl(a))&&(c=Oc(r)),Fr(r))){const y=ks(r);f=So(r),h.x=y.x+r.clientLeft,h.y=y.y+r.clientTop}const v=a&&!p&&!o?jw(a,c):$r(0);return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-c.scrollLeft*f.x+h.x+v.x,y:n.y*f.y-c.scrollTop*f.y+h.y+v.y}}function UN(e){return Array.from(e.getClientRects())}function WN(e){const t=Ur(e),n=Oc(e),r=e.ownerDocument.body,i=kn(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=kn(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+Lc(e);const u=-n.scrollTop;return _r(r).direction==="rtl"&&(a+=kn(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:a,y:u}}const sx=25;function HN(e,t){const n=Zn(e),r=Ur(e),i=n.visualViewport;let o=r.clientWidth,a=r.clientHeight,u=0,c=0;if(i){o=i.width,a=i.height;const h=Jp();(!h||h&&t==="fixed")&&(u=i.offsetLeft,c=i.offsetTop)}const f=Lc(r);if(f<=0){const h=r.ownerDocument,p=h.body,v=getComputedStyle(p),y=h.compatMode==="CSS1Compat"&&parseFloat(v.marginLeft)+parseFloat(v.marginRight)||0,w=Math.abs(r.clientWidth-p.clientWidth-y);w<=sx&&(o-=w)}else f<=sx&&(o+=f);return{width:o,height:a,x:u,y:c}}const VN=new Set(["absolute","fixed"]);function qN(e,t){const n=ks(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=Fr(e)?So(e):$r(1),a=e.clientWidth*o.x,u=e.clientHeight*o.y,c=i*o.x,f=r*o.y;return{width:a,height:u,x:c,y:f}}function ox(e,t,n){let r;if(t==="viewport")r=HN(e,n);else if(t==="document")r=WN(Ur(e));else if(Nn(t))r=qN(t,n);else{const i=Cw(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return uc(r)}function Nw(e,t){const n=$i(e);return n===t||!Nn(n)||Io(n)?!1:_r(n).position==="fixed"||Nw(n,t)}function KN(e,t){const n=t.get(e);if(n)return n;let r=el(e,[],!1).filter(u=>Nn(u)&&Lo(u)!=="body"),i=null;const o=_r(e).position==="fixed";let a=o?$i(e):e;for(;Nn(a)&&!Io(a);){const u=_r(a),c=Gp(a);!c&&u.position==="fixed"&&(i=null),(o?!c&&!i:!c&&u.position==="static"&&!!i&&VN.has(i.position)||dl(a)&&!c&&Nw(e,a))?r=r.filter(h=>h!==a):i=u,a=$i(a)}return t.set(e,r),r}function YN(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const a=[...n==="clippingAncestors"?Mc(t)?[]:KN(t,this._c):[].concat(n),r],u=a[0],c=a.reduce((f,h)=>{const p=ox(t,h,i);return f.top=kn(p.top,f.top),f.right=ws(p.right,f.right),f.bottom=ws(p.bottom,f.bottom),f.left=kn(p.left,f.left),f},ox(t,u,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function GN(e){const{width:t,height:n}=_w(e);return{width:t,height:n}}function JN(e,t,n){const r=Fr(t),i=Ur(t),o=n==="fixed",a=ks(e,!0,o,t);let u={scrollLeft:0,scrollTop:0};const c=$r(0);function f(){c.x=Lc(i)}if(r||!r&&!o)if((Lo(t)!=="body"||dl(i))&&(u=Oc(t)),r){const y=ks(t,!0,o,t);c.x=y.x+t.clientLeft,c.y=y.y+t.clientTop}else i&&f();o&&!r&&i&&f();const h=i&&!r&&!o?jw(i,u):$r(0),p=a.left+u.scrollLeft-c.x-h.x,v=a.top+u.scrollTop-c.y-h.y;return{x:p,y:v,width:a.width,height:a.height}}function Jf(e){return _r(e).position==="static"}function ax(e,t){if(!Fr(e)||_r(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Ur(e)===n&&(n=n.ownerDocument.body),n}function Tw(e,t){const n=Zn(e);if(Mc(e))return n;if(!Fr(e)){let i=$i(e);for(;i&&!Io(i);){if(Nn(i)&&!Jf(i))return i;i=$i(i)}return n}let r=ax(e,t);for(;r&&hN(r)&&Jf(r);)r=ax(r,t);return r&&Io(r)&&Jf(r)&&!Gp(r)?n:r||vN(e)||n}const QN=async function(e){const t=this.getOffsetParent||Tw,n=this.getDimensions,r=await n(e.floating);return{reference:JN(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function XN(e){return _r(e).direction==="rtl"}const ZN={convertOffsetParentRelativeRectToViewportRelativeRect:zN,getDocumentElement:Ur,getClippingRect:YN,getOffsetParent:Tw,getElementRects:QN,getClientRects:UN,getDimensions:GN,getScale:So,isElement:Nn,isRTL:XN};function Iw(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function eT(e,t){let n=null,r;const i=Ur(e);function o(){var u;clearTimeout(r),(u=n)==null||u.disconnect(),n=null}function a(u,c){u===void 0&&(u=!1),c===void 0&&(c=1),o();const f=e.getBoundingClientRect(),{left:h,top:p,width:v,height:y}=f;if(u||t(),!v||!y)return;const w=Pu(p),S=Pu(i.clientWidth-(h+v)),k=Pu(i.clientHeight-(p+y)),_=Pu(h),j={rootMargin:-w+"px "+-S+"px "+-k+"px "+-_+"px",threshold:kn(0,ws(1,c))||1};let I=!0;function D(A){const U=A[0].intersectionRatio;if(U!==c){if(!I)return a();U?a(!1,U):r=setTimeout(()=>{a(!1,1e-7)},1e3)}U===1&&!Iw(f,e.getBoundingClientRect())&&a(),I=!1}try{n=new IntersectionObserver(D,{...j,root:i.ownerDocument})}catch{n=new IntersectionObserver(D,j)}n.observe(e)}return a(!0),o}function tT(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,f=Qp(e),h=i||o?[...f?el(f):[],...el(t)]:[];h.forEach(_=>{i&&_.addEventListener("scroll",n,{passive:!0}),o&&_.addEventListener("resize",n)});const p=f&&u?eT(f,n):null;let v=-1,y=null;a&&(y=new ResizeObserver(_=>{let[C]=_;C&&C.target===f&&y&&(y.unobserve(t),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var j;(j=y)==null||j.observe(t)})),n()}),f&&!c&&y.observe(f),y.observe(t));let w,S=c?ks(e):null;c&&k();function k(){const _=ks(e);S&&!Iw(S,_)&&n(),S=_,w=requestAnimationFrame(k)}return n(),()=>{var _;h.forEach(C=>{i&&C.removeEventListener("scroll",n),o&&C.removeEventListener("resize",n)}),p==null||p(),(_=y)==null||_.disconnect(),y=null,c&&cancelAnimationFrame(w)}}const Qf=Dc,nT=DN,rT=LN,iT=AN,sT=$N,oT=(e,t,n)=>{const r=new Map,i={platform:ZN,...n},o={...i.platform,_c:r};return RN(e,t,{...i,platform:o})};var aT=typeof document<"u",lT=function(){},Ku=aT?b.useLayoutEffect:lT;function cc(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!cc(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&e.$$typeof)&&!cc(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function Pw(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function lx(e,t){const n=Pw(e);return Math.round(t*n)/n}function Xf(e){const t=b.useRef(e);return Ku(()=>{t.current=e}),t}function uT(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:a}={},transform:u=!0,whileElementsMounted:c,open:f}=e,[h,p]=b.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[v,y]=b.useState(r);cc(v,r)||y(r);const[w,S]=b.useState(null),[k,_]=b.useState(null),C=b.useCallback(F=>{F!==A.current&&(A.current=F,S(F))},[]),j=b.useCallback(F=>{F!==U.current&&(U.current=F,_(F))},[]),I=o||w,D=a||k,A=b.useRef(null),U=b.useRef(null),te=b.useRef(h),z=c!=null,M=Xf(c),$=Xf(i),ne=Xf(f),H=b.useCallback(()=>{if(!A.current||!U.current)return;const F={placement:t,strategy:n,middleware:v};$.current&&(F.platform=$.current),oT(A.current,U.current,F).then(L=>{const N={...L,isPositioned:ne.current!==!1};Y.current&&!cc(te.current,N)&&(te.current=N,Xn.flushSync(()=>{p(N)}))})},[v,t,n,$,ne]);Ku(()=>{f===!1&&te.current.isPositioned&&(te.current.isPositioned=!1,p(F=>({...F,isPositioned:!1})))},[f]);const Y=b.useRef(!1);Ku(()=>(Y.current=!0,()=>{Y.current=!1}),[]),Ku(()=>{if(I&&(A.current=I),D&&(U.current=D),I&&D){if(M.current)return M.current(I,D,H);H()}},[I,D,H,M,z]);const K=b.useMemo(()=>({reference:A,floating:U,setReference:C,setFloating:j}),[C,j]),se=b.useMemo(()=>({reference:I,floating:D}),[I,D]),q=b.useMemo(()=>{const F={position:n,left:0,top:0};if(!se.floating)return F;const L=lx(se.floating,h.x),N=lx(se.floating,h.y);return u?{...F,transform:"translate("+L+"px, "+N+"px)",...Pw(se.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:L,top:N}},[n,u,se.floating,h.x,h.y]);return b.useMemo(()=>({...h,update:H,refs:K,elements:se,floatingStyles:q}),[h,H,K,se,q])}const Rw=(e,t)=>({...nT(e),options:[e,t]}),cT=(e,t)=>({...rT(e),options:[e,t]}),dT=(e,t)=>({...iT(e),options:[e,t]}),fT=(e,t)=>({...sT(e),options:[e,t]}),Aw={...tc},hT=Aw.useInsertionEffect,pT=hT||(e=>e());function Mw(e){const t=b.useRef(()=>{});return pT(()=>{t.current=e}),b.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var Xh=typeof document<"u"?b.useLayoutEffect:b.useEffect;let ux=!1,mT=0;const cx=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+mT++;function gT(){const[e,t]=b.useState(()=>ux?cx():void 0);return Xh(()=>{e==null&&t(cx())},[]),b.useEffect(()=>{ux=!0},[]),e}const yT=Aw.useId,vT=yT||gT;function xT(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const bT=b.createContext(null),wT=b.createContext(null),kT=()=>{var e;return((e=b.useContext(bT))==null?void 0:e.id)||null},ST=()=>b.useContext(wT),ET="data-floating-ui-focusable";function _T(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=vT(),o=b.useRef({}),[a]=b.useState(()=>xT()),u=kT()!=null,[c,f]=b.useState(r.reference),h=Mw((y,w,S)=>{o.current.openEvent=y?w:void 0,a.emit("openchange",{open:y,event:w,reason:S,nested:u}),n==null||n(y,w,S)}),p=b.useMemo(()=>({setPositionReference:f}),[]),v=b.useMemo(()=>({reference:c||r.reference||null,floating:r.floating||null,domReference:r.reference}),[c,r.reference,r.floating]);return b.useMemo(()=>({dataRef:o,open:t,onOpenChange:h,elements:v,events:a,floatingId:i,refs:p}),[t,h,v,a,i,p])}function CT(e){e===void 0&&(e={});const{nodeId:t}=e,n=_T({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[o,a]=b.useState(null),[u,c]=b.useState(null),h=(i==null?void 0:i.domReference)||o,p=b.useRef(null),v=ST();Xh(()=>{h&&(p.current=h)},[h]);const y=uT({...e,elements:{...i,...u&&{reference:u}}}),w=b.useCallback(j=>{const I=Nn(j)?{getBoundingClientRect:()=>j.getBoundingClientRect(),contextElement:j}:j;c(I),y.refs.setReference(I)},[y.refs]),S=b.useCallback(j=>{(Nn(j)||j===null)&&(p.current=j,a(j)),(Nn(y.refs.reference.current)||y.refs.reference.current===null||j!==null&&!Nn(j))&&y.refs.setReference(j)},[y.refs]),k=b.useMemo(()=>({...y.refs,setReference:S,setPositionReference:w,domReference:p}),[y.refs,S,w]),_=b.useMemo(()=>({...y.elements,domReference:h}),[y.elements,h]),C=b.useMemo(()=>({...y,...r,refs:k,elements:_,nodeId:t}),[y,k,_,t,r]);return Xh(()=>{r.dataRef.current.floatingContext=C;const j=v==null?void 0:v.nodesRef.current.find(I=>I.id===t);j&&(j.context=C)}),b.useMemo(()=>({...y,context:C,refs:k,elements:_}),[y,k,_,C])}const dx="active",fx="selected";function Zf(e,t,n){const r=new Map,i=n==="item";let o=e;if(i&&e){const{[dx]:a,[fx]:u,...c}=e;o=c}return{...n==="floating"&&{tabIndex:-1,[ET]:""},...o,...t.map(a=>{const u=a?a[n]:null;return typeof u=="function"?e?u(e):null:u}).concat(e).reduce((a,u)=>(u&&Object.entries(u).forEach(c=>{let[f,h]=c;if(!(i&&[dx,fx].includes(f)))if(f.indexOf("on")===0){if(r.has(f)||r.set(f,[]),typeof h=="function"){var p;(p=r.get(f))==null||p.push(h),a[f]=function(){for(var v,y=arguments.length,w=new Array(y),S=0;S<y;S++)w[S]=arguments[S];return(v=r.get(f))==null?void 0:v.map(k=>k(...w)).find(k=>k!==void 0)}}}else a[f]=h}),a),{})}}function jT(e){e===void 0&&(e=[]);const t=e.map(u=>u==null?void 0:u.reference),n=e.map(u=>u==null?void 0:u.floating),r=e.map(u=>u==null?void 0:u.item),i=b.useCallback(u=>Zf(u,e,"reference"),t),o=b.useCallback(u=>Zf(u,e,"floating"),n),a=b.useCallback(u=>Zf(u,e,"item"),r);return b.useMemo(()=>({getReferenceProps:i,getFloatingProps:o,getItemProps:a}),[i,o,a])}function hx(e,t){return{...e,rects:{...e.rects,floating:{...e.rects.floating,height:t}}}}const NT=e=>({name:"inner",options:e,async fn(t){const{listRef:n,overflowRef:r,onFallbackChange:i,offset:o=0,index:a=0,minItemsVisible:u=4,referenceOverflowThreshold:c=0,scrollRef:f,...h}=$o(e,t),{rects:p,elements:{floating:v}}=t,y=n.current[a],w=(f==null?void 0:f.current)||v,S=v.clientTop||w.clientTop,k=v.clientTop!==0,_=w.clientTop!==0,C=v===w;if(!y)return{};const j={...t,...await Rw(-y.offsetTop-v.clientTop-p.reference.height/2-y.offsetHeight/2-o).fn(t)},I=await Qf(hx(j,w.scrollHeight+S+v.clientTop),h),D=await Qf(j,{...h,elementContext:"reference"}),A=kn(0,I.top),U=j.y+A,M=(w.scrollHeight>w.clientHeight?$=>$:tl)(kn(0,w.scrollHeight+(k&&C||_?S*2:0)-A-kn(0,I.bottom)));if(w.style.maxHeight=M+"px",w.scrollTop=A,i){const $=w.offsetHeight<y.offsetHeight*ws(u,n.current.length)-1||D.top>=-c||D.bottom>=-c;Xn.flushSync(()=>i($))}return r&&(r.current=await Qf(hx({...j,y:U},w.offsetHeight+S+v.clientTop),h)),{y:U}}});function TT(e,t){const{open:n,elements:r}=e,{enabled:i=!0,overflowRef:o,scrollRef:a,onChange:u}=t,c=Mw(u),f=b.useRef(!1),h=b.useRef(null),p=b.useRef(null);b.useEffect(()=>{if(!i)return;function y(S){if(S.ctrlKey||!w||o.current==null)return;const k=S.deltaY,_=o.current.top>=-.5,C=o.current.bottom>=-.5,j=w.scrollHeight-w.clientHeight,I=k<0?-1:1,D=k<0?"max":"min";w.scrollHeight<=w.clientHeight||(!_&&k>0||!C&&k<0?(S.preventDefault(),Xn.flushSync(()=>{c(A=>A+Math[D](k,j*I))})):/firefox/i.test(bN())&&(w.scrollTop+=k))}const w=(a==null?void 0:a.current)||r.floating;if(n&&w)return w.addEventListener("wheel",y),requestAnimationFrame(()=>{h.current=w.scrollTop,o.current!=null&&(p.current={...o.current})}),()=>{h.current=null,p.current=null,w.removeEventListener("wheel",y)}},[i,n,r.floating,o,a,c]);const v=b.useMemo(()=>({onKeyDown(){f.current=!0},onWheel(){f.current=!1},onPointerMove(){f.current=!1},onScroll(){const y=(a==null?void 0:a.current)||r.floating;if(!(!o.current||!y||!f.current)){if(h.current!==null){const w=y.scrollTop-h.current;(o.current.bottom<-.5&&w<-1||o.current.top<-.5&&w>1)&&Xn.flushSync(()=>c(S=>S+w))}requestAnimationFrame(()=>{h.current=y.scrollTop})}}}),[r.floating,c,o,a]);return b.useMemo(()=>i?{floating:v}:{},[i,v])}let Fo=b.createContext({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});Fo.displayName="FloatingContext";let Xp=b.createContext(null);Xp.displayName="PlacementContext";function IT(e){return b.useMemo(()=>e?typeof e=="string"?{to:e}:e:null,[e])}function PT(){return b.useContext(Fo).setReference}function RT(){return b.useContext(Fo).getReferenceProps}function AT(){let{getFloatingProps:e,slot:t}=b.useContext(Fo);return b.useCallback((...n)=>Object.assign({},e(...n),{"data-anchor":t.anchor}),[e,t])}function MT(e=null){e===!1&&(e=null),typeof e=="string"&&(e={to:e});let t=b.useContext(Xp),n=b.useMemo(()=>e,[JSON.stringify(e,(i,o)=>{var a;return(a=o==null?void 0:o.outerHTML)!=null?a:o})]);Pt(()=>{t==null||t(n??null)},[t,n]);let r=b.useContext(Fo);return b.useMemo(()=>[r.setFloating,e?r.styles:{}],[r.setFloating,e,r.styles])}let px=4;function OT({children:e,enabled:t=!0}){let[n,r]=b.useState(null),[i,o]=b.useState(0),a=b.useRef(null),[u,c]=b.useState(null);DT(u);let f=t&&n!==null&&u!==null,{to:h="bottom",gap:p=0,offset:v=0,padding:y=0,inner:w}=LT(n,u),[S,k="center"]=h.split(" ");Pt(()=>{f&&o(0)},[f]);let{refs:_,floatingStyles:C,context:j}=CT({open:f,placement:S==="selection"?k==="center"?"bottom":`bottom-${k}`:k==="center"?`${S}`:`${S}-${k}`,strategy:"absolute",transform:!1,middleware:[Rw({mainAxis:S==="selection"?0:p,crossAxis:v}),cT({padding:y}),S!=="selection"&&dT({padding:y}),S==="selection"&&w?NT({...w,padding:y,overflowRef:a,offset:i,minItemsVisible:px,referenceOverflowThreshold:y,onFallbackChange($){var ne,H;if(!$)return;let Y=j.elements.floating;if(!Y)return;let K=parseFloat(getComputedStyle(Y).scrollPaddingBottom)||0,se=Math.min(px,Y.childElementCount),q=0,F=0;for(let L of(H=(ne=j.elements.floating)==null?void 0:ne.childNodes)!=null?H:[])if(tr(L)){let N=L.offsetTop,B=N+L.clientHeight+K,ee=Y.scrollTop,R=ee+Y.clientHeight;if(N>=ee&&B<=R)se--;else{F=Math.max(0,Math.min(B,R)-Math.max(N,ee)),q=L.clientHeight;break}}se>=1&&o(L=>{let N=q*se-F+K;return L>=N?L:N})}}):null,fT({padding:y,apply({availableWidth:$,availableHeight:ne,elements:H}){Object.assign(H.floating.style,{overflow:"auto",maxWidth:`${$}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${ne}px)`})}})].filter(Boolean),whileElementsMounted:tT}),[I=S,D=k]=j.placement.split("-");S==="selection"&&(I="selection");let A=b.useMemo(()=>({anchor:[I,D].filter(Boolean).join(" ")}),[I,D]),U=TT(j,{overflowRef:a,onChange:o}),{getReferenceProps:te,getFloatingProps:z}=jT([U]),M=et($=>{c($),_.setFloating($)});return b.createElement(Xp.Provider,{value:r},b.createElement(Fo.Provider,{value:{setFloating:M,setReference:_.setReference,styles:C,getReferenceProps:te,getFloatingProps:z,slot:A}},e))}function DT(e){Pt(()=>{if(!e)return;let t=new MutationObserver(()=>{let n=window.getComputedStyle(e).maxHeight,r=parseFloat(n);if(isNaN(r))return;let i=parseInt(n);isNaN(i)||r!==i&&(e.style.maxHeight=`${Math.ceil(r)}px`)});return t.observe(e,{attributes:!0,attributeFilter:["style"]}),()=>{t.disconnect()}},[e])}function LT(e,t){var n,r,i;let o=eh((n=e==null?void 0:e.gap)!=null?n:"var(--anchor-gap, 0)",t),a=eh((r=e==null?void 0:e.offset)!=null?r:"var(--anchor-offset, 0)",t),u=eh((i=e==null?void 0:e.padding)!=null?i:"var(--anchor-padding, 0)",t);return{...e,gap:o,offset:a,padding:u}}function eh(e,t,n=void 0){let r=js(),i=et((c,f)=>{if(c==null)return[n,null];if(typeof c=="number")return[c,null];if(typeof c=="string"){if(!f)return[n,null];let h=mx(c,f);return[h,p=>{let v=Ow(c);{let y=v.map(w=>window.getComputedStyle(f).getPropertyValue(w));r.requestAnimationFrame(function w(){r.nextFrame(w);let S=!1;for(let[_,C]of v.entries()){let j=window.getComputedStyle(f).getPropertyValue(C);if(y[_]!==j){y[_]=j,S=!0;break}}if(!S)return;let k=mx(c,f);h!==k&&(p(k),h=k)})}return r.dispose}]}return[n,null]}),o=b.useMemo(()=>i(e,t)[0],[e,t]),[a=o,u]=b.useState();return Pt(()=>{let[c,f]=i(e,t);if(u(c),!!f)return f(u)},[e,t]),a}function Ow(e){let t=/var\((.*)\)/.exec(e);if(t){let n=t[1].indexOf(",");if(n===-1)return[t[1]];let r=t[1].slice(0,n).trim(),i=t[1].slice(n+1).trim();return i?[r,...Ow(i)]:[r]}return[]}function mx(e,t){let n=document.createElement("div");t.appendChild(n),n.style.setProperty("margin-top","0px","important"),n.style.setProperty("margin-top",e,"important");let r=parseFloat(window.getComputedStyle(n).marginTop)||0;return t.removeChild(n),r}let $c=b.createContext(null);$c.displayName="OpenClosedContext";var Tn=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Tn||{});function hl(){return b.useContext($c)}function Dw({value:e,children:t}){return Ae.createElement($c.Provider,{value:e},t)}function $T({children:e}){return Ae.createElement($c.Provider,{value:null},e)}function FT(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Ii=[];FT(()=>{function e(t){if(!Or(t.target)||t.target===document.body||Ii[0]===t.target)return;let n=t.target;n=n.closest(ac),Ii.unshift(n??t.target),Ii=Ii.filter(r=>r!=null&&r.isConnected),Ii.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function BT(e){throw new Error("Unexpected object: "+e)}var Gt=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(Gt||{});function Ru(e,t){let n=t.resolveItems();if(n.length<=0)return null;let r=t.resolveActiveIndex(),i=r??-1;switch(e.focus){case 0:{for(let o=0;o<n.length;++o)if(!t.resolveDisabled(n[o],o,n))return o;return r}case 1:{i===-1&&(i=n.length);for(let o=i-1;o>=0;--o)if(!t.resolveDisabled(n[o],o,n))return o;return r}case 2:{for(let o=i+1;o<n.length;++o)if(!t.resolveDisabled(n[o],o,n))return o;return r}case 3:{for(let o=n.length-1;o>=0;--o)if(!t.resolveDisabled(n[o],o,n))return o;return r}case 4:{for(let o=0;o<n.length;++o)if(t.resolveId(n[o],o,n)===e.id)return o;return r}case 5:return null;default:BT(e)}}function Zp(e){let t=et(e),n=b.useRef(!1);b.useEffect(()=>(n.current=!1,()=>{n.current=!0,Ic(()=>{n.current&&t()})}),[t])}let Lw=b.createContext(!1);function zT(){return b.useContext(Lw)}function gx(e){return Ae.createElement(Lw.Provider,{value:e.force},e.children)}function UT(e){let t=zT(),n=b.useContext(Fw),[r,i]=b.useState(()=>{var o;if(!t&&n!==null)return(o=n.current)!=null?o:null;if(Dr.isServer)return null;let a=e==null?void 0:e.getElementById("headlessui-portal-root");if(a)return a;if(e===null)return null;let u=e.createElement("div");return u.setAttribute("id","headlessui-portal-root"),e.body.appendChild(u)});return b.useEffect(()=>{r!==null&&(e!=null&&e.body.contains(r)||e==null||e.body.appendChild(r))},[r,e]),b.useEffect(()=>{t||n!==null&&i(n.current)},[n,i,t]),r}let $w=b.Fragment,WT=Bt(function(e,t){let{ownerDocument:n=null,...r}=e,i=b.useRef(null),o=In(pj(v=>{i.current=v}),t),a=Za(i.current),u=n??a,c=UT(u),f=b.useContext(Zh),h=js(),p=Qt();return Zp(()=>{var v;c&&c.childNodes.length<=0&&((v=c.parentElement)==null||v.removeChild(c))}),c?Xn.createPortal(Ae.createElement("div",{"data-headlessui-portal":"",ref:v=>{h.dispose(),f&&v&&h.add(f.register(v))}},p({ourProps:{ref:o},theirProps:r,slot:{},defaultTag:$w,name:"Portal"})),c):null});function HT(e,t){let n=In(t),{enabled:r=!0,ownerDocument:i,...o}=e,a=Qt();return r?Ae.createElement(WT,{...o,ownerDocument:i,ref:n}):a({ourProps:{ref:n},theirProps:o,slot:{},defaultTag:$w,name:"Portal"})}let VT=b.Fragment,Fw=b.createContext(null);function qT(e,t){let{target:n,...r}=e,i={ref:In(t)},o=Qt();return Ae.createElement(Fw.Provider,{value:n},o({ourProps:i,theirProps:r,defaultTag:VT,name:"Popover.Group"}))}let Zh=b.createContext(null);function KT(){let e=b.useContext(Zh),t=b.useRef([]),n=et(o=>(t.current.push(o),e&&e.register(o),()=>r(o))),r=et(o=>{let a=t.current.indexOf(o);a!==-1&&t.current.splice(a,1),e&&e.unregister(o)}),i=b.useMemo(()=>({register:n,unregister:r,portals:t}),[n,r,t]);return[t,b.useMemo(()=>function({children:o}){return Ae.createElement(Zh.Provider,{value:i},o)},[i])]}let YT=Bt(HT),Bw=Bt(qT),zw=Object.assign(YT,{Group:Bw});const Yu={Idle:{kind:"Idle"},Tracked:e=>({kind:"Tracked",position:e}),Moved:{kind:"Moved"}};function Uw(e){let t=e.getBoundingClientRect();return`${t.x},${t.y}`}function GT(e,t,n){let r=Bn();if(t.kind==="Tracked"){let i=function(){o!==Uw(e)&&(r.dispose(),n())},{position:o}=t,a=new ResizeObserver(i);a.observe(e),r.add(()=>a.disconnect()),r.addEventListener(window,"scroll",i,{passive:!0}),r.addEventListener(window,"resize",i)}return()=>r.dispose()}function JT(e,t=typeof document<"u"?document.defaultView:null,n){let r=cl(e,"escape");gw(t,"keydown",i=>{r&&(i.defaultPrevented||i.key===un.Escape&&n(i))})}function QT(){var e;let[t]=b.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,r]=b.useState((e=t==null?void 0:t.matches)!=null?e:!1);return Pt(()=>{if(!t)return;function i(o){r(o.matches)}return t.addEventListener("change",i),()=>t.removeEventListener("change",i)},[t]),n}function XT({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let r=et(()=>{var i,o;let a=Cs(n),u=[];for(let c of e)c!==null&&(ei(c)?u.push(c):"current"in c&&ei(c.current)&&u.push(c.current));if(t!=null&&t.current)for(let c of t.current)u.push(c);for(let c of(i=a==null?void 0:a.querySelectorAll("html > *, body > *"))!=null?i:[])c!==document.body&&c!==document.head&&ei(c)&&c.id!=="headlessui-portal-root"&&(n&&(c.contains(n)||c.contains((o=n==null?void 0:n.getRootNode())==null?void 0:o.host))||u.some(f=>c.contains(f))||u.push(c));return u});return{resolveContainers:r,contains:et(i=>r().some(o=>o.contains(i)))}}let Ww=b.createContext(null);function yx({children:e,node:t}){let[n,r]=b.useState(null),i=Hw(t??n);return Ae.createElement(Ww.Provider,{value:i},e,i===null&&Ae.createElement(Kh,{features:oc.Hidden,ref:o=>{var a,u;if(o){for(let c of(u=(a=Cs(o))==null?void 0:a.querySelectorAll("html > *, body > *"))!=null?u:[])if(c!==document.body&&c!==document.head&&ei(c)&&c!=null&&c.contains(o)){r(c);break}}}}))}function Hw(e=null){var t;return(t=b.useContext(Ww))!=null?t:e}function ZT(){let e=typeof document>"u";return"useSyncExternalStore"in tc?(t=>t.useSyncExternalStore)(tc)(()=>()=>{},()=>!1,()=>!e):!1}function Fc(){let e=ZT(),[t,n]=b.useState(Dr.isHandoffComplete);return t&&Dr.isHandoffComplete===!1&&n(!1),b.useEffect(()=>{t!==!0&&n(!0)},[t]),b.useEffect(()=>Dr.handoff(),[]),e?!1:t}function em(){let e=b.useRef(!1);return Pt(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var Ma=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Ma||{});function eI(){let e=b.useRef(0);return pw(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function Vw(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)ei(n.current)&&t.add(n.current);return t}let tI="div";var fs=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(fs||{});function nI(e,t){let n=b.useRef(null),r=In(n,t),{initialFocus:i,initialFocusFallback:o,containers:a,features:u=15,...c}=e;Fc()||(u=0);let f=Za(n.current);oI(u,{ownerDocument:f});let h=aI(u,{ownerDocument:f,container:n,initialFocus:i,initialFocusFallback:o});lI(u,{ownerDocument:f,container:n,containers:a,previousActiveElement:h});let p=eI(),v=et(C=>{if(!tr(n.current))return;let j=n.current;(I=>I())(()=>{Er(p.current,{[Ma.Forwards]:()=>{ko(j,kr.First,{skipElements:[C.relatedTarget,o]})},[Ma.Backwards]:()=>{ko(j,kr.Last,{skipElements:[C.relatedTarget,o]})}})})}),y=cl(!!(u&2),"focus-trap#tab-lock"),w=js(),S=b.useRef(!1),k={ref:r,onKeyDown(C){C.key=="Tab"&&(S.current=!0,w.requestAnimationFrame(()=>{S.current=!1}))},onBlur(C){if(!(u&4))return;let j=Vw(a);tr(n.current)&&j.add(n.current);let I=C.relatedTarget;Or(I)&&I.dataset.headlessuiFocusGuard!=="true"&&(qw(j,I)||(S.current?ko(n.current,Er(p.current,{[Ma.Forwards]:()=>kr.Next,[Ma.Backwards]:()=>kr.Previous})|kr.WrapAround,{relativeTo:C.target}):Or(C.target)&&Lr(C.target)))}},_=Qt();return Ae.createElement(Ae.Fragment,null,y&&Ae.createElement(Kh,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:v,features:oc.Focusable}),_({ourProps:k,theirProps:c,defaultTag:tI,name:"FocusTrap"}),y&&Ae.createElement(Kh,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:v,features:oc.Focusable}))}let rI=Bt(nI),iI=Object.assign(rI,{features:fs});function sI(e=!0){let t=b.useRef(Ii.slice());return Yp(([n],[r])=>{r===!0&&n===!1&&Ic(()=>{t.current.splice(0)}),r===!1&&n===!0&&(t.current=Ii.slice())},[e,Ii,t]),et(()=>{var n;return(n=t.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function oI(e,{ownerDocument:t}){let n=!!(e&8),r=sI(n);Yp(()=>{n||Hb(t==null?void 0:t.body)&&Lr(r())},[n]),Zp(()=>{n&&Lr(r())})}function aI(e,{ownerDocument:t,container:n,initialFocus:r,initialFocusFallback:i}){let o=b.useRef(null),a=cl(!!(e&1),"focus-trap#initial-focus"),u=em();return Yp(()=>{if(e===0)return;if(!a){i!=null&&i.current&&Lr(i.current);return}let c=n.current;c&&Ic(()=>{if(!u.current)return;let f=t==null?void 0:t.activeElement;if(r!=null&&r.current){if((r==null?void 0:r.current)===f){o.current=f;return}}else if(c.contains(f)){o.current=f;return}if(r!=null&&r.current)Lr(r.current);else{if(e&16){if(ko(c,kr.First|kr.AutoFocus)!==Gh.Error)return}else if(ko(c,kr.First)!==Gh.Error)return;if(i!=null&&i.current&&(Lr(i.current),(t==null?void 0:t.activeElement)===i.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}o.current=t==null?void 0:t.activeElement})},[i,a,e]),o}function lI(e,{ownerDocument:t,container:n,containers:r,previousActiveElement:i}){let o=em(),a=!!(e&4);gw(t==null?void 0:t.defaultView,"focus",u=>{if(!a||!o.current)return;let c=Vw(r);tr(n.current)&&c.add(n.current);let f=i.current;if(!f)return;let h=u.target;tr(h)?qw(c,h)?(i.current=h,Lr(h)):(u.preventDefault(),u.stopPropagation(),Lr(f)):Lr(i.current)},!0)}function qw(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function Kw(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||!$a((t=e.as)!=null?t:Gw)||Ae.Children.count(e.children)===1}let Bc=b.createContext(null);Bc.displayName="TransitionContext";var uI=(e=>(e.Visible="visible",e.Hidden="hidden",e))(uI||{});function cI(){let e=b.useContext(Bc);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function dI(){let e=b.useContext(zc);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let zc=b.createContext(null);zc.displayName="NestingContext";function Uc(e){return"children"in e?Uc(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function Yw(e,t){let n=Ns(e),r=b.useRef([]),i=em(),o=js(),a=et((y,w=Mi.Hidden)=>{let S=r.current.findIndex(({el:k})=>k===y);S!==-1&&(Er(w,{[Mi.Unmount](){r.current.splice(S,1)},[Mi.Hidden](){r.current[S].state="hidden"}}),o.microTask(()=>{var k;!Uc(r)&&i.current&&((k=n.current)==null||k.call(n))}))}),u=et(y=>{let w=r.current.find(({el:S})=>S===y);return w?w.state!=="visible"&&(w.state="visible"):r.current.push({el:y,state:"visible"}),()=>a(y,Mi.Unmount)}),c=b.useRef([]),f=b.useRef(Promise.resolve()),h=b.useRef({enter:[],leave:[]}),p=et((y,w,S)=>{c.current.splice(0),t&&(t.chains.current[w]=t.chains.current[w].filter(([k])=>k!==y)),t==null||t.chains.current[w].push([y,new Promise(k=>{c.current.push(k)})]),t==null||t.chains.current[w].push([y,new Promise(k=>{Promise.all(h.current[w].map(([_,C])=>C)).then(()=>k())})]),w==="enter"?f.current=f.current.then(()=>t==null?void 0:t.wait.current).then(()=>S(w)):S(w)}),v=et((y,w,S)=>{Promise.all(h.current[w].splice(0).map(([k,_])=>_)).then(()=>{var k;(k=c.current.shift())==null||k()}).then(()=>S(w))});return b.useMemo(()=>({children:r,register:u,unregister:a,onStart:p,onStop:v,wait:f,chains:h}),[u,a,r,p,v,h,f])}let Gw=b.Fragment,Jw=To.RenderStrategy;function fI(e,t){var n,r;let{transition:i=!0,beforeEnter:o,afterEnter:a,beforeLeave:u,afterLeave:c,enter:f,enterFrom:h,enterTo:p,entered:v,leave:y,leaveFrom:w,leaveTo:S,...k}=e,[_,C]=b.useState(null),j=b.useRef(null),I=Kw(e),D=In(...I?[j,t,C]:t===null?[]:[t]),A=(n=k.unmount)==null||n?Mi.Unmount:Mi.Hidden,{show:U,appear:te,initial:z}=cI(),[M,$]=b.useState(U?"visible":"hidden"),ne=dI(),{register:H,unregister:Y}=ne;Pt(()=>H(j),[H,j]),Pt(()=>{if(A===Mi.Hidden&&j.current){if(U&&M!=="visible"){$("visible");return}return Er(M,{hidden:()=>Y(j),visible:()=>H(j)})}},[M,j,H,Y,U,A]);let K=Fc();Pt(()=>{if(I&&K&&M==="visible"&&j.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[j,M,K,I]);let se=z&&!te,q=te&&U&&z,F=b.useRef(!1),L=Yw(()=>{F.current||($("hidden"),Y(j))},ne),N=et(me=>{F.current=!0;let Ce=me?"enter":"leave";L.onStart(j,Ce,Te=>{Te==="enter"?o==null||o():Te==="leave"&&(u==null||u())})}),B=et(me=>{let Ce=me?"enter":"leave";F.current=!1,L.onStop(j,Ce,Te=>{Te==="enter"?a==null||a():Te==="leave"&&(c==null||c())}),Ce==="leave"&&!Uc(L)&&($("hidden"),Y(j))});b.useEffect(()=>{I&&i||(N(U),B(U))},[U,I,i]);let ee=!(!i||!I||!K||se),[,R]=xw(ee,_,U,{start:N,end:B}),be=ls({ref:D,className:((r=qh(k.className,q&&f,q&&h,R.enter&&f,R.enter&&R.closed&&h,R.enter&&!R.closed&&p,R.leave&&y,R.leave&&!R.closed&&w,R.leave&&R.closed&&S,!R.transition&&U&&v))==null?void 0:r.trim())||void 0,...vw(R)}),he=0;M==="visible"&&(he|=Tn.Open),M==="hidden"&&(he|=Tn.Closed),U&&M==="hidden"&&(he|=Tn.Opening),!U&&M==="visible"&&(he|=Tn.Closing);let ge=Qt();return Ae.createElement(zc.Provider,{value:L},Ae.createElement(Dw,{value:he},ge({ourProps:be,theirProps:k,defaultTag:Gw,features:Jw,visible:M==="visible",name:"Transition.Child"})))}function hI(e,t){let{show:n,appear:r=!1,unmount:i=!0,...o}=e,a=b.useRef(null),u=Kw(e),c=In(...u?[a,t]:t===null?[]:[t]);Fc();let f=hl();if(n===void 0&&f!==null&&(n=(f&Tn.Open)===Tn.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[h,p]=b.useState(n?"visible":"hidden"),v=Yw(()=>{n||p("hidden")}),[y,w]=b.useState(!0),S=b.useRef([n]);Pt(()=>{y!==!1&&S.current[S.current.length-1]!==n&&(S.current.push(n),w(!1))},[S,n]);let k=b.useMemo(()=>({show:n,appear:r,initial:y}),[n,r,y]);Pt(()=>{n?p("visible"):!Uc(v)&&a.current!==null&&p("hidden")},[n,v]);let _={unmount:i},C=et(()=>{var D;y&&w(!1),(D=e.beforeEnter)==null||D.call(e)}),j=et(()=>{var D;y&&w(!1),(D=e.beforeLeave)==null||D.call(e)}),I=Qt();return Ae.createElement(zc.Provider,{value:v},Ae.createElement(Bc.Provider,{value:k},I({ourProps:{..._,as:b.Fragment,children:Ae.createElement(Qw,{ref:c,..._,...o,beforeEnter:C,beforeLeave:j})},theirProps:{},defaultTag:b.Fragment,features:Jw,visible:h==="visible",name:"Transition"})))}function pI(e,t){let n=b.useContext(Bc)!==null,r=hl()!==null;return Ae.createElement(Ae.Fragment,null,!n&&r?Ae.createElement(ep,{ref:t,...e}):Ae.createElement(Qw,{ref:t,...e}))}let ep=Bt(hI),Qw=Bt(fI),tm=Bt(pI),mI=Object.assign(ep,{Child:tm,Root:ep});var gI=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(gI||{}),yI=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(yI||{});let vI={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},nm=b.createContext(null);nm.displayName="DialogContext";function Wc(e){let t=b.useContext(nm);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Wc),n}return t}function xI(e,t){return Er(t.type,vI,e,t)}let vx=Bt(function(e,t){let n=b.useId(),{id:r=`headlessui-dialog-${n}`,open:i,onClose:o,initialFocus:a,role:u="dialog",autoFocus:c=!0,__demoMode:f=!1,unmount:h=!1,...p}=e,v=b.useRef(!1);u=(function(){return u==="dialog"||u==="alertdialog"?u:(v.current||(v.current=!0,console.warn(`Invalid role [${u}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")})();let y=hl();i===void 0&&y!==null&&(i=(y&Tn.Open)===Tn.Open);let w=b.useRef(null),S=In(w,t),k=Za(w.current),_=i?0:1,[C,j]=b.useReducer(xI,{titleId:null,descriptionId:null,panelRef:b.createRef()}),I=et(()=>o(!1)),D=et(R=>j({type:0,id:R})),A=Fc()?_===0:!1,[U,te]=KT(),z={get current(){var R;return(R=C.panelRef.current)!=null?R:w.current}},M=Hw(),{resolveContainers:$}=XT({mainTreeNode:M,portals:U,defaultContainers:[z]}),ne=y!==null?(y&Tn.Closing)===Tn.Closing:!1;lw(f||ne?!1:A,{allowed:et(()=>{var R,be;return[(be=(R=w.current)==null?void 0:R.closest("[data-headlessui-portal]"))!=null?be:null]}),disallowed:et(()=>{var R;return[(R=M==null?void 0:M.closest("body > *:not(#headlessui-portal-root)"))!=null?R:null]})});let H=Rc.get(null);Pt(()=>{if(A)return H.actions.push(r),()=>H.actions.pop(r)},[H,r,A]);let Y=dr(H,b.useCallback(R=>H.selectors.isTop(R,r),[H,r]));mw(Y,$,R=>{R.preventDefault(),I()}),JT(Y,k==null?void 0:k.defaultView,R=>{R.preventDefault(),R.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),I()}),yw(f||ne?!1:A,k,$),uw(A,w,I);let[K,se]=Zb(),q=b.useMemo(()=>[{dialogState:_,close:I,setTitleId:D,unmount:h},C],[_,I,D,h,C]),F=zr({open:_===0}),L={ref:S,id:r,role:u,tabIndex:-1,"aria-modal":f?void 0:_===0?!0:void 0,"aria-labelledby":C.titleId,"aria-describedby":K,unmount:h},N=!QT(),B=fs.None;A&&!f&&(B|=fs.RestoreFocus,B|=fs.TabLock,c&&(B|=fs.AutoFocus),N&&(B|=fs.InitialFocus));let ee=Qt();return Ae.createElement($T,null,Ae.createElement(gx,{force:!0},Ae.createElement(zw,null,Ae.createElement(nm.Provider,{value:q},Ae.createElement(Bw,{target:w},Ae.createElement(gx,{force:!1},Ae.createElement(se,{slot:F},Ae.createElement(te,null,Ae.createElement(iI,{initialFocus:a,initialFocusFallback:w,containers:$,features:B},Ae.createElement(Ej,{value:I},ee({ourProps:L,theirProps:p,slot:F,defaultTag:bI,features:wI,visible:_===0,name:"Dialog"})))))))))))}),bI="div",wI=To.RenderStrategy|To.Static;function kI(e,t){let{transition:n=!1,open:r,...i}=e,o=hl(),a=e.hasOwnProperty("open")||o!==null,u=e.hasOwnProperty("onClose");if(!a&&!u)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!a)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!u)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!o&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(r!==void 0||n)&&!i.static?Ae.createElement(yx,null,Ae.createElement(mI,{show:r,transition:n,unmount:i.unmount},Ae.createElement(vx,{ref:t,...i}))):Ae.createElement(yx,null,Ae.createElement(vx,{ref:t,open:r,...i}))}let SI="div";function EI(e,t){let n=b.useId(),{id:r=`headlessui-dialog-panel-${n}`,transition:i=!1,...o}=e,[{dialogState:a,unmount:u},c]=Wc("Dialog.Panel"),f=In(t,c.panelRef),h=zr({open:a===0}),p=et(k=>{k.stopPropagation()}),v={ref:f,id:r,onClick:p},y=i?tm:b.Fragment,w=i?{unmount:u}:{},S=Qt();return Ae.createElement(y,{...w},S({ourProps:v,theirProps:o,slot:h,defaultTag:SI,name:"Dialog.Panel"}))}let _I="div";function CI(e,t){let{transition:n=!1,...r}=e,[{dialogState:i,unmount:o}]=Wc("Dialog.Backdrop"),a=zr({open:i===0}),u={ref:t,"aria-hidden":!0},c=n?tm:b.Fragment,f=n?{unmount:o}:{},h=Qt();return Ae.createElement(c,{...f},h({ourProps:u,theirProps:r,slot:a,defaultTag:_I,name:"Dialog.Backdrop"}))}let jI="h2";function NI(e,t){let n=b.useId(),{id:r=`headlessui-dialog-title-${n}`,...i}=e,[{dialogState:o,setTitleId:a}]=Wc("Dialog.Title"),u=In(t);b.useEffect(()=>(a(r),()=>a(null)),[r,a]);let c=zr({open:o===0}),f={ref:u,id:r};return Qt()({ourProps:f,theirProps:i,slot:c,defaultTag:jI,name:"Dialog.Title"})}let TI=Bt(kI),II=Bt(EI);Bt(CI);let PI=Bt(NI),xx=Object.assign(TI,{Panel:II,Title:PI,Description:vj}),bx=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function wx(e){var t,n;let r=(t=e.innerText)!=null?t:"",i=e.cloneNode(!0);if(!tr(i))return r;let o=!1;for(let u of i.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))u.remove(),o=!0;let a=o?(n=i.innerText)!=null?n:"":r;return bx.test(a)&&(a=a.replace(bx,"")),a}function RI(e){let t=e.getAttribute("aria-label");if(typeof t=="string")return t.trim();let n=e.getAttribute("aria-labelledby");if(n){let r=n.split(" ").map(i=>{let o=document.getElementById(i);if(o){let a=o.getAttribute("aria-label");return typeof a=="string"?a.trim():wx(o).trim()}return null}).filter(Boolean);if(r.length>0)return r.join(", ")}return wx(e).trim()}function AI(e){let t=b.useRef(""),n=b.useRef("");return et(()=>{let r=e.current;if(!r)return"";let i=r.innerText;if(t.current===i)return n.current;let o=RI(r).trim().toLowerCase();return t.current=i,n.current=o,o})}var MI=Object.defineProperty,OI=(e,t,n)=>t in e?MI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kx=(e,t,n)=>(OI(e,typeof t!="symbol"?t+"":t,n),n),wn=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(wn||{}),dc=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(dc||{}),Et=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItems=5]="RegisterItems",e[e.UnregisterItems=6]="UnregisterItems",e[e.SetButtonElement=7]="SetButtonElement",e[e.SetItemsElement=8]="SetItemsElement",e[e.SortItems=9]="SortItems",e[e.MarkButtonAsMoved=10]="MarkButtonAsMoved",e))(Et||{});function Sx(e,t=n=>n){let n=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,r=fw(t(e.items.slice()),o=>o.dataRef.current.domRef.current),i=n?r.indexOf(n):null;return i===-1&&(i=null),{items:r,activeItemIndex:i}}let DI={1(e){if(e.menuState===1)return e;let t=e.buttonElement?Yu.Tracked(Uw(e.buttonElement)):e.buttonPositionState;return{...e,activeItemIndex:null,pendingFocus:{focus:Gt.Nothing},menuState:1,buttonPositionState:t}},0(e,t){return e.menuState===0?e:{...e,__demoMode:!1,pendingFocus:t.focus,menuState:0,buttonPositionState:Yu.Idle}},2:(e,t)=>{var n,r,i,o,a;if(e.menuState===1)return e;let u={...e,searchQuery:"",activationTrigger:(n=t.trigger)!=null?n:1,__demoMode:!1};if(t.focus===Gt.Nothing)return{...u,activeItemIndex:null};if(t.focus===Gt.Specific)return{...u,activeItemIndex:e.items.findIndex(h=>h.id===t.id)};if(t.focus===Gt.Previous){let h=e.activeItemIndex;if(h!==null){let p=e.items[h].dataRef.current.domRef,v=Ru(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:y=>y.id,resolveDisabled:y=>y.dataRef.current.disabled});if(v!==null){let y=e.items[v].dataRef.current.domRef;if(((r=p.current)==null?void 0:r.previousElementSibling)===y.current||((i=y.current)==null?void 0:i.previousElementSibling)===null)return{...u,activeItemIndex:v}}}}else if(t.focus===Gt.Next){let h=e.activeItemIndex;if(h!==null){let p=e.items[h].dataRef.current.domRef,v=Ru(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:y=>y.id,resolveDisabled:y=>y.dataRef.current.disabled});if(v!==null){let y=e.items[v].dataRef.current.domRef;if(((o=p.current)==null?void 0:o.nextElementSibling)===y.current||((a=y.current)==null?void 0:a.nextElementSibling)===null)return{...u,activeItemIndex:v}}}}let c=Sx(e),f=Ru(t,{resolveItems:()=>c.items,resolveActiveIndex:()=>c.activeItemIndex,resolveId:h=>h.id,resolveDisabled:h=>h.dataRef.current.disabled});return{...u,...c,activeItemIndex:f}},3:(e,t)=>{let n=e.searchQuery!==""?0:1,r=e.searchQuery+t.value.toLowerCase(),i=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+n).concat(e.items.slice(0,e.activeItemIndex+n)):e.items).find(a=>{var u;return((u=a.dataRef.current.textValue)==null?void 0:u.startsWith(r))&&!a.dataRef.current.disabled}),o=i?e.items.indexOf(i):-1;return o===-1||o===e.activeItemIndex?{...e,searchQuery:r}:{...e,searchQuery:r,activeItemIndex:o,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,t)=>{let n=e.items.concat(t.items.map(i=>i)),r=e.activeItemIndex;return e.pendingFocus.focus!==Gt.Nothing&&(r=Ru(e.pendingFocus,{resolveItems:()=>n,resolveActiveIndex:()=>e.activeItemIndex,resolveId:i=>i.id,resolveDisabled:i=>i.dataRef.current.disabled})),{...e,items:n,activeItemIndex:r,pendingFocus:{focus:Gt.Nothing},pendingShouldSort:!0}},6:(e,t)=>{let n=e.items,r=[],i=new Set(t.items);for(let[o,a]of n.entries())if(i.has(a.id)&&(r.push(o),i.delete(a.id),i.size===0))break;if(r.length>0){n=n.slice();for(let o of r.reverse())n.splice(o,1)}return{...e,items:n,activationTrigger:1}},7:(e,t)=>e.buttonElement===t.element?e:{...e,buttonElement:t.element},8:(e,t)=>e.itemsElement===t.element?e:{...e,itemsElement:t.element},9:e=>e.pendingShouldSort?{...e,...Sx(e),pendingShouldSort:!1}:e,10(e){return e.buttonPositionState.kind!=="Tracked"?e:{...e,buttonPositionState:Yu.Moved}}};class rm extends iw{constructor(t){super(t),kx(this,"actions",{registerItem:zv(()=>{let n=[],r=new Set;return[(i,o)=>{r.has(o)||(r.add(o),n.push({id:i,dataRef:o}))},()=>(r.clear(),this.send({type:5,items:n.splice(0)}))]}),unregisterItem:zv(()=>{let n=[];return[r=>n.push(r),()=>this.send({type:6,items:n.splice(0)})]})}),kx(this,"selectors",{activeDescendantId(n){var r;let i=n.activeItemIndex,o=n.items;return i===null||(r=o[i])==null?void 0:r.id},isActive(n,r){var i;let o=n.activeItemIndex,a=n.items;return o!==null?((i=a[o])==null?void 0:i.id)===r:!1},shouldScrollIntoView(n,r){return n.__demoMode||n.menuState!==0||n.activationTrigger===0?!1:this.isActive(n,r)},didButtonMove(n){return n.buttonPositionState.kind==="Moved"}}),this.on(5,()=>{this.disposables.requestAnimationFrame(()=>{this.send({type:9})})});{let n=this.state.id,r=Rc.get(null);this.disposables.add(r.on(ow.Push,i=>{!r.selectors.isTop(i,n)&&this.state.menuState===0&&this.send({type:1})})),this.on(0,()=>r.actions.push(n)),this.on(1,()=>r.actions.pop(n))}this.disposables.group(n=>{this.on(1,r=>{r.buttonElement&&(n.dispose(),n.add(GT(r.buttonElement,r.buttonPositionState,()=>{this.send({type:10})})))})})}static new({id:t,__demoMode:n=!1}){return new rm({id:t,__demoMode:n,menuState:n?0:1,buttonElement:null,itemsElement:null,items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1,pendingShouldSort:!1,pendingFocus:{focus:Gt.Nothing},buttonPositionState:Yu.Idle})}reduce(t,n){return Er(n.type,DI,t,n)}}const Xw=b.createContext(null);function im(e){let t=b.useContext(Xw);if(t===null){let n=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Zw),n}return t}function Zw({id:e,__demoMode:t=!1}){let n=b.useMemo(()=>rm.new({id:e,__demoMode:t}),[]);return Zp(()=>n.dispose()),n}let LI=b.Fragment;function $I(e,t){let n=b.useId(),{__demoMode:r=!1,...i}=e,o=Zw({id:n,__demoMode:r}),[a,u,c]=dr(o,k=>[k.menuState,k.itemsElement,k.buttonElement]),f=In(t),h=Rc.get(null),p=dr(h,b.useCallback(k=>h.selectors.isTop(k,n),[h,n]));mw(p,[c,u],(k,_)=>{var C;o.send({type:Et.CloseMenu}),Kp(_,qp.Loose)||(k.preventDefault(),(C=o.state.buttonElement)==null||C.focus())});let v=et(()=>{o.send({type:Et.CloseMenu})}),y=zr({open:a===wn.Open,close:v}),w={ref:f},S=Qt();return Ae.createElement(OT,null,Ae.createElement(Xw.Provider,{value:o},Ae.createElement(Dw,{value:Er(a,{[wn.Open]:Tn.Open,[wn.Closed]:Tn.Closed})},S({ourProps:w,theirProps:i,slot:y,defaultTag:LI,name:"Menu"}))))}let FI="button";function BI(e,t){let n=im("Menu.Button"),r=b.useId(),{id:i=`headlessui-menu-button-${r}`,disabled:o=!1,autoFocus:a=!1,...u}=e,c=b.useRef(null),f=RT(),h=In(t,c,PT(),et(M=>n.send({type:Et.SetButtonElement,element:M}))),p=et(M=>{switch(M.key){case un.Space:case un.Enter:case un.ArrowDown:M.preventDefault(),M.stopPropagation(),n.send({type:Et.OpenMenu,focus:{focus:Gt.First}});break;case un.ArrowUp:M.preventDefault(),M.stopPropagation(),n.send({type:Et.OpenMenu,focus:{focus:Gt.Last}});break}}),v=et(M=>{switch(M.key){case un.Space:M.preventDefault();break}}),[y,w,S]=dr(n,M=>[M.menuState,M.buttonElement,M.itemsElement]),k=y===wn.Open;Yj(k,{trigger:w,action:b.useCallback(M=>{if(w!=null&&w.contains(M.target))return Iu.Ignore;let $=M.target.closest('[role="menuitem"]:not([data-disabled])');return tr($)?Iu.Select($):S!=null&&S.contains(M.target)?Iu.Ignore:Iu.Close},[w,S]),close:b.useCallback(()=>n.send({type:Et.CloseMenu}),[]),select:b.useCallback(M=>M.click(),[])});let _=Cj(M=>{var $;o||(y===wn.Open?(Xn.flushSync(()=>n.send({type:Et.CloseMenu})),($=c.current)==null||$.focus({preventScroll:!0})):(M.preventDefault(),n.send({type:Et.OpenMenu,focus:{focus:Gt.Nothing},trigger:dc.Pointer})))}),{isFocusVisible:C,focusProps:j}=qC({autoFocus:a}),{isHovered:I,hoverProps:D}=VC({isDisabled:o}),{pressed:A,pressProps:U}=XC({disabled:o}),te=zr({open:y===wn.Open,active:A||y===wn.Open,disabled:o,hover:I,focus:C,autofocus:a}),z=Kb(f(),{ref:h,id:i,type:Gj(e,c.current),"aria-haspopup":"menu","aria-controls":S==null?void 0:S.id,"aria-expanded":y===wn.Open,disabled:o||void 0,autoFocus:a,onKeyDown:p,onKeyUp:v},_,j,D,U);return Qt()({ourProps:z,theirProps:u,slot:te,defaultTag:FI,name:"Menu.Button"})}let zI="div",UI=To.RenderStrategy|To.Static;function WI(e,t){let n=b.useId(),{id:r=`headlessui-menu-items-${n}`,anchor:i,portal:o=!1,modal:a=!0,transition:u=!1,...c}=e,f=IT(i),h=im("Menu.Items"),[p,v]=MT(f),y=AT(),[w,S]=b.useState(null),k=In(t,f?p:null,et(F=>h.send({type:Et.SetItemsElement,element:F})),S),[_,C]=dr(h,F=>[F.menuState,F.buttonElement]),j=Za(C),I=Za(w);f&&(o=!0);let D=hl(),[A,U]=xw(u,w,D!==null?(D&Tn.Open)===Tn.Open:_===wn.Open);uw(A,C,()=>{h.send({type:Et.CloseMenu})});let te=dr(h,F=>F.__demoMode),z=te?!1:a&&_===wn.Open;yw(z,I);let M=te?!1:a&&_===wn.Open;lw(M,{allowed:b.useCallback(()=>[C,w],[C,w])});let $=dr(h,h.selectors.didButtonMove)?!1:A;b.useEffect(()=>{let F=w;F&&_===wn.Open&&(Hb(F)||F.focus({preventScroll:!0}))},[_,w]),cN(_===wn.Open,{container:w,accept(F){return F.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:F.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(F){F.setAttribute("role","none")}});let ne=js(),H=et(F=>{var L,N,B;switch(ne.dispose(),F.key){case un.Space:if(h.state.searchQuery!=="")return F.preventDefault(),F.stopPropagation(),h.send({type:Et.Search,value:F.key});case un.Enter:if(F.preventDefault(),F.stopPropagation(),h.state.activeItemIndex!==null){let{dataRef:ee}=h.state.items[h.state.activeItemIndex];(N=(L=ee.current)==null?void 0:L.domRef.current)==null||N.click()}h.send({type:Et.CloseMenu}),dw(h.state.buttonElement);break;case un.ArrowDown:return F.preventDefault(),F.stopPropagation(),h.send({type:Et.GoToItem,focus:Gt.Next});case un.ArrowUp:return F.preventDefault(),F.stopPropagation(),h.send({type:Et.GoToItem,focus:Gt.Previous});case un.Home:case un.PageUp:return F.preventDefault(),F.stopPropagation(),h.send({type:Et.GoToItem,focus:Gt.First});case un.End:case un.PageDown:return F.preventDefault(),F.stopPropagation(),h.send({type:Et.GoToItem,focus:Gt.Last});case un.Escape:F.preventDefault(),F.stopPropagation(),Xn.flushSync(()=>h.send({type:Et.CloseMenu})),(B=h.state.buttonElement)==null||B.focus({preventScroll:!0});break;case un.Tab:F.preventDefault(),F.stopPropagation(),Xn.flushSync(()=>h.send({type:Et.CloseMenu})),Hj(h.state.buttonElement,F.shiftKey?kr.Previous:kr.Next);break;default:F.key.length===1&&(h.send({type:Et.Search,value:F.key}),ne.setTimeout(()=>h.send({type:Et.ClearSearch}),350));break}}),Y=et(F=>{switch(F.key){case un.Space:F.preventDefault();break}}),K=zr({open:_===wn.Open}),se=Kb(f?y():{},{"aria-activedescendant":dr(h,h.selectors.activeDescendantId),"aria-labelledby":dr(h,F=>{var L;return(L=F.buttonElement)==null?void 0:L.id}),id:r,onKeyDown:H,onKeyUp:Y,role:"menu",tabIndex:_===wn.Open?0:void 0,ref:k,style:{...c.style,...v,"--button-width":_j(A,C,!0).width},...vw(U)}),q=Qt();return Ae.createElement(zw,{enabled:o?e.static||A:!1,ownerDocument:j},q({ourProps:se,theirProps:c,slot:K,defaultTag:zI,features:UI,visible:$,name:"Menu.Items"}))}let HI=b.Fragment;function VI(e,t){let n=b.useId(),{id:r=`headlessui-menu-item-${n}`,disabled:i=!1,...o}=e,a=im("Menu.Item"),u=dr(a,$=>a.selectors.isActive($,r)),c=b.useRef(null),f=In(t,c),h=dr(a,$=>a.selectors.shouldScrollIntoView($,r));Pt(()=>{if(h)return Bn().requestAnimationFrame(()=>{var $,ne;(ne=($=c.current)==null?void 0:$.scrollIntoView)==null||ne.call($,{block:"nearest"})})},[h,c]);let p=AI(c),v=b.useRef({disabled:i,domRef:c,get textValue(){return p()}});Pt(()=>{v.current.disabled=i},[v,i]),Pt(()=>(a.actions.registerItem(r,v),()=>a.actions.unregisterItem(r)),[v,r]);let y=et(()=>{a.send({type:Et.CloseMenu})}),w=et($=>{if(i)return $.preventDefault();a.send({type:Et.CloseMenu}),dw(a.state.buttonElement)}),S=et(()=>{if(i)return a.send({type:Et.GoToItem,focus:Gt.Nothing});a.send({type:Et.GoToItem,focus:Gt.Specific,id:r})}),k=nN(),_=et($=>k.update($)),C=et($=>{k.wasMoved($)&&(i||u||a.send({type:Et.GoToItem,focus:Gt.Specific,id:r,trigger:dc.Pointer}))}),j=et($=>{k.wasMoved($)&&(i||u&&a.state.activationTrigger===dc.Pointer&&a.send({type:Et.GoToItem,focus:Gt.Nothing}))}),[I,D]=ew(),[A,U]=Zb(),te=zr({active:u,focus:u,disabled:i,close:y}),z={id:r,ref:f,role:"menuitem",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,"aria-labelledby":I,"aria-describedby":A,disabled:void 0,onClick:w,onFocus:S,onPointerEnter:_,onMouseEnter:_,onPointerMove:C,onMouseMove:C,onPointerLeave:j,onMouseLeave:j},M=Qt();return Ae.createElement(D,null,Ae.createElement(U,null,M({ourProps:z,theirProps:o,slot:te,defaultTag:HI,name:"Menu.Item"})))}let qI="div";function KI(e,t){let[n,r]=ew(),i=e,o={ref:t,"aria-labelledby":n,role:"group"},a=Qt();return Ae.createElement(r,null,a({ourProps:o,theirProps:i,slot:{},defaultTag:qI,name:"Menu.Section"}))}let YI="header";function GI(e,t){let n=b.useId(),{id:r=`headlessui-menu-heading-${n}`,...i}=e,o=Vp();Pt(()=>o.register(r),[r,o.register]);let a={id:r,ref:t,role:"presentation",...o.props};return Qt()({ourProps:a,theirProps:i,slot:{},defaultTag:YI,name:"Menu.Heading"})}let JI="div";function QI(e,t){let n=e,r={ref:t,role:"separator"};return Qt()({ourProps:r,theirProps:n,slot:{},defaultTag:JI,name:"Menu.Separator"})}let XI=Bt($I),ZI=Bt(BI),eP=Bt(WI),tP=Bt(VI),nP=Bt(KI),rP=Bt(GI),iP=Bt(QI),is=Object.assign(XI,{Button:ZI,Items:eP,Item:tP,Section:nP,Heading:rP,Separator:iP});const ek=b.createContext(void 0);function Ts(){const e=b.useContext(ek);if(!e)throw new Error("useAuth debe usarse dentro de un AuthProvider");return e}const sP="modulepreload",oP=function(e){return"/sport-planner/"+e},Ex={},pl=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let a=function(f){return Promise.all(f.map(h=>Promise.resolve(h).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),c=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));i=a(n.map(f=>{if(f=oP(f),f in Ex)return;Ex[f]=!0;const h=f.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${p}`))return;const v=document.createElement("link");if(v.rel=h?"stylesheet":sP,h||(v.as="script"),v.crossOrigin="",v.href=f,c&&v.setAttribute("nonce",c),document.head.appendChild(v),h)return new Promise((y,w)=>{v.addEventListener("load",y),v.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(a){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=a,window.dispatchEvent(u),!u.defaultPrevented)throw a}return i.then(a=>{for(const u of a||[])u.status==="rejected"&&o(u.reason);return t().catch(o)})},aP=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>pl(async()=>{const{default:r}=await Promise.resolve().then(()=>Bo);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class sm extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class _x extends sm{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Cx extends sm{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class jx extends sm{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var tp;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(tp||(tp={}));var lP=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function u(h){try{f(r.next(h))}catch(p){a(p)}}function c(h){try{f(r.throw(h))}catch(p){a(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};class uP{constructor(t,{headers:n={},customFetch:r,region:i=tp.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=aP(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return lP(this,arguments,void 0,function*(n,r={}){var i;try{const{headers:o,method:a,body:u,signal:c}=r;let f={},{region:h}=r;h||(h=this.region);const p=new URL(`${this.url}/${n}`);h&&h!=="any"&&(f["x-region"]=h,p.searchParams.set("forceFunctionRegion",h));let v;u&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",v=u):typeof u=="string"?(f["Content-Type"]="text/plain",v=u):typeof FormData<"u"&&u instanceof FormData?v=u:(f["Content-Type"]="application/json",v=JSON.stringify(u)));const y=yield this.fetch(p.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),o),body:v,signal:c}).catch(_=>{throw _.name==="AbortError"?_:new _x(_)}),w=y.headers.get("x-relay-error");if(w&&w==="true")throw new Cx(y);if(!y.ok)throw new jx(y);let S=((i=y.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),k;return S==="application/json"?k=yield y.json():S==="application/octet-stream"?k=yield y.blob():S==="text/event-stream"?k=y:S==="multipart/form-data"?k=yield y.formData():k=yield y.text(),{data:k,error:null,response:y}}catch(o){return o instanceof Error&&o.name==="AbortError"?{data:null,error:new _x(o)}:{data:null,error:o,response:o instanceof jx||o instanceof Cx?o.context:void 0}}})}}var ln={},eo={},to={},no={},ro={},io={},cP=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Po=cP();const dP=Po.fetch,tk=Po.fetch.bind(Po),nk=Po.Headers,fP=Po.Request,hP=Po.Response,Bo=Object.freeze(Object.defineProperty({__proto__:null,Headers:nk,Request:fP,Response:hP,default:tk,fetch:dP},Symbol.toStringTag,{value:"Module"})),pP=l_(Bo);var Au={},Nx;function rk(){if(Nx)return Au;Nx=1,Object.defineProperty(Au,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Au.default=e,Au}var Tx;function ik(){if(Tx)return io;Tx=1;var e=io&&io.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(io,"__esModule",{value:!0});const t=e(pP),n=e(rk());class r{constructor(o){var a,u;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(a=o.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=o.signal,this.isMaybeSingle=(u=o.isMaybeSingle)!==null&&u!==void 0?u:!1,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,a){return this.headers=new Headers(this.headers),this.headers.set(o,a),this}then(o,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let c=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var h,p,v,y;let w=null,S=null,k=null,_=f.status,C=f.statusText;if(f.ok){if(this.method!=="HEAD"){const A=await f.text();A===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((h=this.headers.get("Accept"))===null||h===void 0)&&h.includes("application/vnd.pgrst.plan+text"))?S=A:S=JSON.parse(A))}const I=(p=this.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),D=(v=f.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");I&&D&&D.length>1&&(k=parseInt(D[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(S)&&(S.length>1?(w={code:"PGRST116",details:`Results contain ${S.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},S=null,k=null,_=406,C="Not Acceptable"):S.length===1?S=S[0]:S=null)}else{const I=await f.text();try{w=JSON.parse(I),Array.isArray(w)&&f.status===404&&(S=[],w=null,_=200,C="OK")}catch{f.status===404&&I===""?(_=204,C="No Content"):w={message:I}}if(w&&this.isMaybeSingle&&(!((y=w==null?void 0:w.details)===null||y===void 0)&&y.includes("0 rows"))&&(w=null,_=200,C="OK"),w&&this.shouldThrowOnError)throw new n.default(w)}return{error:w,data:S,count:k,status:_,statusText:C}});return this.shouldThrowOnError||(c=c.catch(f=>{var h,p,v;return{error:{message:`${(h=f==null?void 0:f.name)!==null&&h!==void 0?h:"FetchError"}: ${f==null?void 0:f.message}`,details:`${(p=f==null?void 0:f.stack)!==null&&p!==void 0?p:""}`,hint:"",code:`${(v=f==null?void 0:f.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),c.then(o,a)}returns(){return this}overrideTypes(){return this}}return io.default=r,io}var Ix;function sk(){if(Ix)return ro;Ix=1;var e=ro&&ro.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ro,"__esModule",{value:!0});const t=e(ik());class n extends t.default{select(i){let o=!1;const a=(i??"*").split("").map(u=>/\s/.test(u)&&!o?"":(u==='"'&&(o=!o),u)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:o=!0,nullsFirst:a,foreignTable:u,referencedTable:c=u}={}){const f=c?`${c}.order`:"order",h=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${h?`${h},`:""}${i}.${o?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:o,referencedTable:a=o}={}){const u=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(u,`${i}`),this}range(i,o,{foreignTable:a,referencedTable:u=a}={}){const c=typeof u>"u"?"offset":`${u}.offset`,f=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(c,`${i}`),this.url.searchParams.set(f,`${o-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:o=!1,settings:a=!1,buffers:u=!1,wal:c=!1,format:f="text"}={}){var h;const p=[i?"analyze":null,o?"verbose":null,a?"settings":null,u?"buffers":null,c?"wal":null].filter(Boolean).join("|"),v=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${f}; for="${v}"; options=${p};`),f==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return ro.default=n,ro}var Px;function om(){if(Px)return no;Px=1;var e=no&&no.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(no,"__esModule",{value:!0});const t=e(sk());class n extends t.default{eq(i,o){return this.url.searchParams.append(i,`eq.${o}`),this}neq(i,o){return this.url.searchParams.append(i,`neq.${o}`),this}gt(i,o){return this.url.searchParams.append(i,`gt.${o}`),this}gte(i,o){return this.url.searchParams.append(i,`gte.${o}`),this}lt(i,o){return this.url.searchParams.append(i,`lt.${o}`),this}lte(i,o){return this.url.searchParams.append(i,`lte.${o}`),this}like(i,o){return this.url.searchParams.append(i,`like.${o}`),this}likeAllOf(i,o){return this.url.searchParams.append(i,`like(all).{${o.join(",")}}`),this}likeAnyOf(i,o){return this.url.searchParams.append(i,`like(any).{${o.join(",")}}`),this}ilike(i,o){return this.url.searchParams.append(i,`ilike.${o}`),this}ilikeAllOf(i,o){return this.url.searchParams.append(i,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(i,o){return this.url.searchParams.append(i,`ilike(any).{${o.join(",")}}`),this}is(i,o){return this.url.searchParams.append(i,`is.${o}`),this}in(i,o){const a=Array.from(new Set(o)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(i,`in.(${a})`),this}contains(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cs.{${o.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(o)}`),this}containedBy(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cd.{${o.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(o)}`),this}rangeGt(i,o){return this.url.searchParams.append(i,`sr.${o}`),this}rangeGte(i,o){return this.url.searchParams.append(i,`nxl.${o}`),this}rangeLt(i,o){return this.url.searchParams.append(i,`sl.${o}`),this}rangeLte(i,o){return this.url.searchParams.append(i,`nxr.${o}`),this}rangeAdjacent(i,o){return this.url.searchParams.append(i,`adj.${o}`),this}overlaps(i,o){return typeof o=="string"?this.url.searchParams.append(i,`ov.${o}`):this.url.searchParams.append(i,`ov.{${o.join(",")}}`),this}textSearch(i,o,{config:a,type:u}={}){let c="";u==="plain"?c="pl":u==="phrase"?c="ph":u==="websearch"&&(c="w");const f=a===void 0?"":`(${a})`;return this.url.searchParams.append(i,`${c}fts${f}.${o}`),this}match(i){return Object.entries(i).forEach(([o,a])=>{this.url.searchParams.append(o,`eq.${a}`)}),this}not(i,o,a){return this.url.searchParams.append(i,`not.${o}.${a}`),this}or(i,{foreignTable:o,referencedTable:a=o}={}){const u=a?`${a}.or`:"or";return this.url.searchParams.append(u,`(${i})`),this}filter(i,o,a){return this.url.searchParams.append(i,`${o}.${a}`),this}}return no.default=n,no}var Rx;function ok(){if(Rx)return to;Rx=1;var e=to&&to.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(to,"__esModule",{value:!0});const t=e(om());class n{constructor(i,{headers:o={},schema:a,fetch:u}){this.url=i,this.headers=new Headers(o),this.schema=a,this.fetch=u}select(i,o){const{head:a=!1,count:u}=o??{},c=a?"HEAD":"GET";let f=!1;const h=(i??"*").split("").map(p=>/\s/.test(p)&&!f?"":(p==='"'&&(f=!f),p)).join("");return this.url.searchParams.set("select",h),u&&this.headers.append("Prefer",`count=${u}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:o,defaultToNull:a=!0}={}){var u;const c="POST";if(o&&this.headers.append("Prefer",`count=${o}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const f=i.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(f.length>0){const h=[...new Set(f)].map(p=>`"${p}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}upsert(i,{onConflict:o,ignoreDuplicates:a=!1,count:u,defaultToNull:c=!0}={}){var f;const h="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),u&&this.headers.append("Prefer",`count=${u}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const p=i.reduce((v,y)=>v.concat(Object.keys(y)),[]);if(p.length>0){const v=[...new Set(p)].map(y=>`"${y}"`);this.url.searchParams.set("columns",v.join(","))}}return new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}update(i,{count:o}={}){var a;const u="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:i}={}){var o;const a="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}}return to.default=n,to}var Ax;function mP(){if(Ax)return eo;Ax=1;var e=eo&&eo.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(eo,"__esModule",{value:!0});const t=e(ok()),n=e(om());class r{constructor(o,{headers:a={},schema:u,fetch:c}={}){this.url=o,this.headers=new Headers(a),this.schemaName=u,this.fetch=c}from(o){const a=new URL(`${this.url}/${o}`);return new t.default(a,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new r(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,a={},{head:u=!1,get:c=!1,count:f}={}){var h;let p;const v=new URL(`${this.url}/rpc/${o}`);let y;u||c?(p=u?"HEAD":"GET",Object.entries(a).filter(([S,k])=>k!==void 0).map(([S,k])=>[S,Array.isArray(k)?`{${k.join(",")}}`:`${k}`]).forEach(([S,k])=>{v.searchParams.append(S,k)})):(p="POST",y=a);const w=new Headers(this.headers);return f&&w.set("Prefer",`count=${f}`),new n.default({method:p,url:v,headers:w,schema:this.schemaName,body:y,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}}return eo.default=r,eo}var Mx;function gP(){if(Mx)return ln;Mx=1;var e=ln&&ln.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(ln,"__esModule",{value:!0}),ln.PostgrestError=ln.PostgrestBuilder=ln.PostgrestTransformBuilder=ln.PostgrestFilterBuilder=ln.PostgrestQueryBuilder=ln.PostgrestClient=void 0;const t=e(mP());ln.PostgrestClient=t.default;const n=e(ok());ln.PostgrestQueryBuilder=n.default;const r=e(om());ln.PostgrestFilterBuilder=r.default;const i=e(sk());ln.PostgrestTransformBuilder=i.default;const o=e(ik());ln.PostgrestBuilder=o.default;const a=e(rk());return ln.PostgrestError=a.default,ln.default={PostgrestClient:t.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:o.default,PostgrestError:a.default},ln}var yP=gP();const vP=Mo(yP),{PostgrestClient:xP,PostgrestQueryBuilder:sB,PostgrestFilterBuilder:oB,PostgrestTransformBuilder:aB,PostgrestBuilder:lB,PostgrestError:uB}=vP;class bP{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const wP="2.75.0",kP=`realtime-js/${wP}`,SP="1.0.0",np=1e4,EP=1e3,_P=100;var Ba;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ba||(Ba={}));var nn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(nn||(nn={}));var wr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(wr||(wr={}));var rp;(function(e){e.websocket="websocket"})(rp||(rp={}));var hs;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(hs||(hs={}));class CP{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const i=n.getUint8(1),o=n.getUint8(2);let a=this.HEADER_LENGTH+2;const u=r.decode(t.slice(a,a+i));a=a+i;const c=r.decode(t.slice(a,a+o));a=a+o;const f=JSON.parse(r.decode(t.slice(a,t.byteLength)));return{ref:null,topic:u,event:c,payload:f}}}class ak{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var jt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(jt||(jt={}));const Ox=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((o,a)=>(o[a]=jP(a,e,t,i),o),{}):{}},jP=(e,t,n,r)=>{const i=t.find(u=>u.name===e),o=i==null?void 0:i.type,a=n[e];return o&&!r.includes(o)?lk(o,a):ip(a)},lk=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return PP(t,n)}switch(e){case jt.bool:return NP(t);case jt.float4:case jt.float8:case jt.int2:case jt.int4:case jt.int8:case jt.numeric:case jt.oid:return TP(t);case jt.json:case jt.jsonb:return IP(t);case jt.timestamp:return RP(t);case jt.abstime:case jt.date:case jt.daterange:case jt.int4range:case jt.int8range:case jt.money:case jt.reltime:case jt.text:case jt.time:case jt.timestamptz:case jt.timetz:case jt.tsrange:case jt.tstzrange:return ip(t);default:return ip(t)}},ip=e=>e,NP=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},TP=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},IP=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},PP=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let o;const a=e.slice(1,n);try{o=JSON.parse("["+a+"]")}catch{o=a?a.split(","):[]}return o.map(u=>lk(t,u))}return e},RP=e=>typeof e=="string"?e.replace(" ","T"):e,uk=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class th{constructor(t,n,r={},i=np){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Dx;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Dx||(Dx={}));class za{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:o,onLeave:a,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=za.syncState(this.state,i,o,a),this.pendingDiffs.forEach(c=>{this.state=za.syncDiff(this.state,c,o,a)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},i=>{const{onJoin:o,onLeave:a,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=za.syncDiff(this.state,i,o,a),u())}),this.onJoin((i,o,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:a})}),this.onLeave((i,o,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const o=this.cloneDeep(t),a=this.transformState(n),u={},c={};return this.map(o,(f,h)=>{a[f]||(c[f]=h)}),this.map(a,(f,h)=>{const p=o[f];if(p){const v=h.map(k=>k.presence_ref),y=p.map(k=>k.presence_ref),w=h.filter(k=>y.indexOf(k.presence_ref)<0),S=p.filter(k=>v.indexOf(k.presence_ref)<0);w.length>0&&(u[f]=w),S.length>0&&(c[f]=S)}else u[f]=h}),this.syncDiff(o,{joins:u,leaves:c},r,i)}static syncDiff(t,n,r,i){const{joins:o,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(u,c)=>{var f;const h=(f=t[u])!==null&&f!==void 0?f:[];if(t[u]=this.cloneDeep(c),h.length>0){const p=t[u].map(y=>y.presence_ref),v=h.filter(y=>p.indexOf(y.presence_ref)<0);t[u].unshift(...v)}r(u,h,c)}),this.map(a,(u,c)=>{let f=t[u];if(!f)return;const h=c.map(p=>p.presence_ref);f=f.filter(p=>h.indexOf(p.presence_ref)<0),t[u]=f,i(u,f,c),f.length===0&&delete t[u]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Lx;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Lx||(Lx={}));var Ua;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Ua||(Ua={}));var Xr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Xr||(Xr={}));class am{constructor(t,n={config:{}},r){var i,o;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=nn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new th(this,wr.join,this.params,this.timeout),this.rejoinTimer=new ak(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=nn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=nn.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=nn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=nn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=nn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(wr.reply,{},(a,u)=>{this._trigger(this._replyEventName(u),a)}),this.presence=new za(this),this.broadcastEndpointURL=uk(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==nn.closed){const{config:{broadcast:a,presence:u,private:c}}=this.params,f=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(y=>y.filter))!==null&&i!==void 0?i:[],h=!!this.bindings[Ua.PRESENCE]&&this.bindings[Ua.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,p={},v={broadcast:a,presence:Object.assign(Object.assign({},u),{enabled:h}),postgres_changes:f,private:c};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(y=>t==null?void 0:t(Xr.CHANNEL_ERROR,y)),this._onClose(()=>t==null?void 0:t(Xr.CLOSED)),this.updateJoinPayload(Object.assign({config:v},p)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:y})=>{var w;if(this.socket.setAuth(),y===void 0){t==null||t(Xr.SUBSCRIBED);return}else{const S=this.bindings.postgres_changes,k=(w=S==null?void 0:S.length)!==null&&w!==void 0?w:0,_=[];for(let C=0;C<k;C++){const j=S[C],{filter:{event:I,schema:D,table:A,filter:U}}=j,te=y&&y[C];if(te&&te.event===I&&te.schema===D&&te.table===A&&te.filter===U)_.push(Object.assign(Object.assign({},j),{id:te.id}));else{this.unsubscribe(),this.state=nn.errored,t==null||t(Xr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,t&&t(Xr.SUBSCRIBED);return}}).receive("error",y=>{this.state=nn.errored,t==null||t(Xr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Xr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===nn.joined&&t===Ua.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){const{event:o,payload:a}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=f.body)===null||i===void 0?void 0:i.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,u,c;const f=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(u=(a=this.params)===null||a===void 0?void 0:a.config)===null||u===void 0?void 0:u.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),f.receive("ok",()=>o("ok")),f.receive("error",()=>o("error")),f.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=nn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(wr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new th(this,wr.leave,{},t),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=nn.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const i=new AbortController,o=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(o),a}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new th(this,t,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>_P){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,o;const a=t.toLocaleLowerCase(),{close:u,error:c,leave:f,join:h}=wr;if(r&&[u,c,f,h].indexOf(a)>=0&&r!==this._joinRef())return;let v=this._onMessage(a,n,r);if(n&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(y=>{var w,S,k;return((w=y.filter)===null||w===void 0?void 0:w.event)==="*"||((k=(S=y.filter)===null||S===void 0?void 0:S.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===a}).map(y=>y.callback(v,r)):(o=this.bindings[a])===null||o===void 0||o.filter(y=>{var w,S,k,_,C,j;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in y){const I=y.id,D=(w=y.filter)===null||w===void 0?void 0:w.event;return I&&((S=n.ids)===null||S===void 0?void 0:S.includes(I))&&(D==="*"||(D==null?void 0:D.toLocaleLowerCase())===((k=n.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const I=(C=(_=y==null?void 0:y.filter)===null||_===void 0?void 0:_.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return I==="*"||I===((j=n==null?void 0:n.event)===null||j===void 0?void 0:j.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===a}).map(y=>{if(typeof v=="object"&&"ids"in v){const w=v.data,{schema:S,table:k,commit_timestamp:_,type:C,errors:j}=w;v=Object.assign(Object.assign({},{schema:S,table:k,commit_timestamp:_,eventType:C,new:{},old:{},errors:j}),this._getPayloadRecords(w))}y.callback(v,r)})}_isClosed(){return this.state===nn.closed}_isJoined(){return this.state===nn.joined}_isJoining(){return this.state===nn.joining}_isLeaving(){return this.state===nn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),o={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&am.isEqual(i.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(wr.close,{},t)}_onError(t){this._on(wr.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=nn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Ox(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Ox(t.columns,t.old_record)),n}}const nh=()=>{},Mu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},AP=[1e3,2e3,5e3,1e4],MP=1e4,OP=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class DP{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=np,this.transport=null,this.heartbeatIntervalMs=Mu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=nh,this.ref=0,this.reconnectTimer=null,this.logger=nh,this.conn=null,this.sendBuffer=[],this.serializer=new CP,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>pl(async()=>{const{default:u}=await Promise.resolve().then(()=>Bo);return{default:u}},void 0).then(({default:u})=>u(...a)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...a)=>o(...a)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${rp.websocket}`,this.httpEndpoint=uk(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=bP.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:SP}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ba.connecting:return hs.Connecting;case Ba.open:return hs.Open;case Ba.closing:return hs.Closing;default:return hs.Closed}}isConnected(){return this.connectionState()===hs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{const o=new am(`realtime:${t}`,n,this);return this.channels.push(o),o}}push(t){const{topic:n,event:r,payload:i,ref:o}=t,a=()=>{this.encode(t,u=>{var c;(c=this.conn)===null||c===void 0||c.send(u)})};this.log("push",`${n} ${r} (${o})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(EP,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Mu.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:o,ref:a}=n,u=a?`(${a})`:"",c=o.status||"";this.log("receive",`${c} ${r} ${i} ${u}`.trim(),o),this.channels.filter(f=>f._isMember(r)).forEach(f=>f._trigger(i,o,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(wr.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([OP],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:kP};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(wr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new ak(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Mu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,i,o,a,u,c,f,h;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:np,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:Mu.HEARTBEAT_INTERVAL,this.worker=(o=t==null?void 0:t.worker)!==null&&o!==void 0?o:!1,this.accessToken=(a=t==null?void 0:t.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(u=t==null?void 0:t.heartbeatCallback)!==null&&u!==void 0?u:nh,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:(p=>AP[p-1]||MP),this.encode=(f=t==null?void 0:t.encode)!==null&&f!==void 0?f:((p,v)=>v(JSON.stringify(p))),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class lm extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Yt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class LP extends lm{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class sp extends lm{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var $P=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function u(h){try{f(r.next(h))}catch(p){a(p)}}function c(h){try{f(r.throw(h))}catch(p){a(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};const ck=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>pl(async()=>{const{default:r}=await Promise.resolve().then(()=>Bo);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},FP=()=>$P(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield pl(()=>Promise.resolve().then(()=>Bo),void 0)).Response:Response}),op=e=>{if(Array.isArray(e))return e.map(n=>op(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[i]=op(r)}),t},BP=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Is=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function u(h){try{f(r.next(h))}catch(p){a(p)}}function c(h){try{f(r.throw(h))}catch(p){a(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};const rh=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),zP=(e,t,n)=>Is(void 0,void 0,void 0,function*(){const r=yield FP();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(i=>{const o=e.status||500,a=(i==null?void 0:i.statusCode)||o+"";t(new LP(rh(i),o,a))}).catch(i=>{t(new sp(rh(i),i))}):t(new sp(rh(e),e))}),UP=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?i:(BP(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(r)):i.body=r,t!=null&&t.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),n))};function ml(e,t,n,r,i,o){return Is(this,void 0,void 0,function*(){return new Promise((a,u)=>{e(n,UP(t,r,i,o)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>zP(c,u,r))})})}function fc(e,t,n,r){return Is(this,void 0,void 0,function*(){return ml(e,"GET",t,n,r)})}function Ar(e,t,n,r,i){return Is(this,void 0,void 0,function*(){return ml(e,"POST",t,r,i,n)})}function ap(e,t,n,r,i){return Is(this,void 0,void 0,function*(){return ml(e,"PUT",t,r,i,n)})}function WP(e,t,n,r){return Is(this,void 0,void 0,function*(){return ml(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function dk(e,t,n,r,i){return Is(this,void 0,void 0,function*(){return ml(e,"DELETE",t,r,i,n)})}var HP=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function u(h){try{f(r.next(h))}catch(p){a(p)}}function c(h){try{f(r.throw(h))}catch(p){a(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};class VP{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return HP(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Yt(t))return{data:null,error:t};throw t}})}}var qP=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function u(h){try{f(r.next(h))}catch(p){a(p)}}function c(h){try{f(r.throw(h))}catch(p){a(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};class KP{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}asStream(){return new VP(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.execute().then(t,n)}execute(){return qP(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Yt(t))return{data:null,error:t};throw t}})}}var Ln=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function u(h){try{f(r.next(h))}catch(p){a(p)}}function c(h){try{f(r.throw(h))}catch(p){a(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};const YP={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},$x={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class GP{constructor(t,n={},r,i){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=ck(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,i){return Ln(this,void 0,void 0,function*(){try{let o;const a=Object.assign(Object.assign({},$x),i);let u=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",a.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",a.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=r,u["cache-control"]=`max-age=${a.cacheControl}`,u["content-type"]=a.contentType,c&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i!=null&&i.headers&&(u=Object.assign(Object.assign({},u),i.headers));const f=this._removeEmptyFolders(n),h=this._getFinalPath(f),p=yield(t=="PUT"?ap:Ar)(this.fetch,`${this.url}/object/${h}`,o,Object.assign({headers:u},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:f,id:p.Id,fullPath:p.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Yt(o))return{data:null,error:o};throw o}})}upload(t,n,r){return Ln(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,i){return Ln(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),a=this._getFinalPath(o),u=new URL(this.url+`/object/upload/sign/${a}`);u.searchParams.set("token",n);try{let c;const f=Object.assign({upsert:$x.upsert},i),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",f.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",f.cacheControl)):(c=r,h["cache-control"]=`max-age=${f.cacheControl}`,h["content-type"]=f.contentType);const p=yield ap(this.fetch,u.toString(),c,{headers:h});return{data:{path:o,fullPath:p.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Yt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return Ln(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const o=yield Ar(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(this.url+o.url),u=a.searchParams.get("token");if(!u)throw new lm("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:u},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}})}update(t,n,r){return Ln(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Ln(this,void 0,void 0,function*(){try{return{data:yield Ar(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Yt(i))return{data:null,error:i};throw i}})}copy(t,n,r){return Ln(this,void 0,void 0,function*(){try{return{data:{path:(yield Ar(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Yt(i))return{data:null,error:i};throw i}})}createSignedUrl(t,n,r){return Ln(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),o=yield Ar(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${a}`)},{data:o,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Yt(i))return{data:null,error:i};throw i}})}createSignedUrls(t,n,r){return Ln(this,void 0,void 0,function*(){try{const i=yield Ar(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${o}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Yt(i))return{data:null,error:i};throw i}})}download(t,n){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=o?`?${o}`:"",u=this._getFinalPath(t),c=()=>fc(this.fetch,`${this.url}/${i}/${u}${a}`,{headers:this.headers,noResolveJson:!0});return new KP(c,this.shouldThrowOnError)}info(t){return Ln(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield fc(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:op(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}})}exists(t){return Ln(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield WP(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Yt(r)&&r instanceof sp){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),i=[],o=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&i.push(o);const u=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&i.push(c);let f=i.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${r}${f}`)}}}remove(t){return Ln(this,void 0,void 0,function*(){try{return{data:yield dk(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Yt(n))return{data:null,error:n};throw n}})}list(t,n,r){return Ln(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},YP),n),{prefix:t||""});return{data:yield Ar(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Yt(i))return{data:null,error:i};throw i}})}listV2(t,n){return Ln(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield Ar(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const JP="2.75.0",QP={"X-Client-Info":`storage-js/${JP}`};var so=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function u(h){try{f(r.next(h))}catch(p){a(p)}}function c(h){try{f(r.throw(h))}catch(p){a(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};class XP{constructor(t,n={},r,i){this.shouldThrowOnError=!1;const o=new URL(t);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},QP),n),this.fetch=ck(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return so(this,void 0,void 0,function*(){try{return{data:yield fc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Yt(t))return{data:null,error:t};throw t}})}getBucket(t){return so(this,void 0,void 0,function*(){try{return{data:yield fc(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Yt(n))return{data:null,error:n};throw n}})}createBucket(t){return so(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield Ar(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Yt(i))return{data:null,error:i};throw i}})}updateBucket(t,n){return so(this,void 0,void 0,function*(){try{return{data:yield ap(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}})}emptyBucket(t){return so(this,void 0,void 0,function*(){try{return{data:yield Ar(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Yt(n))return{data:null,error:n};throw n}})}deleteBucket(t){return so(this,void 0,void 0,function*(){try{return{data:yield dk(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Yt(n))return{data:null,error:n};throw n}})}}class ZP extends XP{constructor(t,n={},r,i){super(t,n,r,i)}from(t){return new GP(this.url,this.headers,t,this.fetch)}}const eR="2.75.0";let Oa="";typeof Deno<"u"?Oa="deno":typeof document<"u"?Oa="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Oa="react-native":Oa="node";const tR={"X-Client-Info":`supabase-js-${Oa}/${eR}`},nR={headers:tR},rR={schema:"public"},iR={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},sR={};var oR=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function u(h){try{f(r.next(h))}catch(p){a(p)}}function c(h){try{f(r.throw(h))}catch(p){a(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};const aR=e=>{let t;return e?t=e:typeof fetch>"u"?t=tk:t=fetch,(...n)=>t(...n)},lR=()=>typeof Headers>"u"?nk:Headers,uR=(e,t,n)=>{const r=aR(n),i=lR();return(o,a)=>oR(void 0,void 0,void 0,function*(){var u;const c=(u=yield t())!==null&&u!==void 0?u:e;let f=new i(a==null?void 0:a.headers);return f.has("apikey")||f.set("apikey",e),f.has("Authorization")||f.set("Authorization",`Bearer ${c}`),r(o,Object.assign(Object.assign({},a),{headers:f}))})};var cR=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function u(h){try{f(r.next(h))}catch(p){a(p)}}function c(h){try{f(r.throw(h))}catch(p){a(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};function dR(e){return e.endsWith("/")?e:e+"/"}function fR(e,t){var n,r;const{db:i,auth:o,realtime:a,global:u}=e,{db:c,auth:f,realtime:h,global:p}=t,v={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},f),o),realtime:Object.assign(Object.assign({},h),a),storage:{},global:Object.assign(Object.assign(Object.assign({},p),u),{headers:Object.assign(Object.assign({},(n=p==null?void 0:p.headers)!==null&&n!==void 0?n:{}),(r=u==null?void 0:u.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>cR(this,void 0,void 0,function*(){return""})};return e.accessToken?v.accessToken=e.accessToken:delete v.accessToken,v}function hR(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(dR(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const fk="2.75.0",mo=30*1e3,lp=3,ih=lp*mo,pR="http://localhost:9999",mR="supabase.auth.token",gR={"X-Client-Info":`gotrue-js/${fk}`},up="X-Supabase-Api-Version",hk={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},yR=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,vR=600*1e3;class nl extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Xe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class xR extends nl{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function bR(e){return Xe(e)&&e.name==="AuthApiError"}class ps extends nl{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Ui extends nl{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}}class Ci extends Ui{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function wR(e){return Xe(e)&&e.name==="AuthSessionMissingError"}class oo extends Ui{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ou extends Ui{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Du extends Ui{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function kR(e){return Xe(e)&&e.name==="AuthImplicitGrantRedirectError"}class Fx extends Ui{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class cp extends Ui{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function sh(e){return Xe(e)&&e.name==="AuthRetryableFetchError"}class Bx extends Ui{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class dp extends Ui{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const hc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),zx=` 	
\r=`.split(""),SR=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<zx.length;t+=1)e[zx[t].charCodeAt(0)]=-2;for(let t=0;t<hc.length;t+=1)e[hc[t].charCodeAt(0)]=t;return e})();function Ux(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(hc[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(hc[r]),t.queuedBits-=6}}function pk(e,t,n){const r=SR[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Wx(e){const t=[],n=a=>{t.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=a=>{CR(a,r,n)};for(let a=0;a<e.length;a+=1)pk(e.charCodeAt(a),i,o);return t.join("")}function ER(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function _R(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}ER(r,t)}}function CR(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if((e>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Eo(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)pk(e.charCodeAt(i),n,r);return new Uint8Array(t)}function jR(e){const t=[];return _R(e,n=>t.push(n)),new Uint8Array(t)}function xs(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};return e.forEach(i=>Ux(i,n,r)),Ux(null,n,r),t.join("")}function NR(e){return Math.round(Date.now()/1e3)+e}function TR(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Qn=()=>typeof window<"u"&&typeof document<"u",ss={tested:!1,writable:!1},mk=()=>{if(!Qn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ss.tested)return ss.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ss.tested=!0,ss.writable=!0}catch{ss.tested=!0,ss.writable=!1}return ss.writable};function IR(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,o)=>{t[o]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const gk=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>pl(async()=>{const{default:r}=await Promise.resolve().then(()=>Bo);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},PR=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",go=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},os=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ei=async(e,t)=>{await e.removeItem(t)};class Hc{constructor(){this.promise=new Hc.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Hc.promiseConstructor=Promise;function oh(e){const t=e.split(".");if(t.length!==3)throw new dp("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!yR.test(t[r]))throw new dp("JWT not in base64url format");return{header:JSON.parse(Wx(t[0])),payload:JSON.parse(Wx(t[1])),signature:Eo(t[2]),raw:{header:t[0],payload:t[1]}}}async function RR(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function AR(e,t){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const a=await e(o);if(!t(o,null,a)){r(a);return}}catch(a){if(!t(o,a)){i(a);return}}})()})}function MR(e){return("0"+e.toString(16)).substr(-2)}function OR(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let o=0;o<56;o++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,MR).join("")}async function DR(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function LR(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await DR(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ao(e,t,n=!1){const r=OR();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await go(e,`${t}-code-verifier`,i);const o=await LR(r);return[o,r===o?"plain":"s256"]}const $R=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function FR(e){const t=e.headers.get(up);if(!t||!t.match($R))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function BR(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function zR(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const UR=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function lo(e){if(!UR.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ah(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Hx(e){return JSON.parse(JSON.stringify(e))}var WR=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const us=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),HR=[502,503,504];async function Vx(e){var t;if(!PR(e))throw new cp(us(e),0);if(HR.includes(e.status))throw new cp(us(e),e.status);let n;try{n=await e.json()}catch(o){throw new ps(us(o),o)}let r;const i=FR(e);if(i&&i.getTime()>=hk["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Bx(us(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Ci}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,a)=>o&&typeof a=="string",!0))throw new Bx(us(n),e.status,n.weak_password.reasons);throw new xR(us(n),e.status||500,r)}const VR=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function it(e,t,n,r){var i;const o=Object.assign({},r==null?void 0:r.headers);o[up]||(o[up]=hk["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const a=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const u=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await qR(e,t,n+u,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function qR(e,t,n,r,i,o){const a=VR(t,r,i,o);let u;try{u=await e(n,Object.assign({},a))}catch(c){throw console.error(c),new cp(us(c),0)}if(u.ok||await Vx(u),r!=null&&r.noResolveJson)return u;try{return await u.json()}catch(c){await Vx(c)}}function xr(e){var t;let n=null;GR(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=NR(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function qx(e){const t=xr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Pi(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function KR(e){return{data:e,error:null}}function YR(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o}=e,a=WR(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o},c=Object.assign({},a);return{data:{properties:u,user:c},error:null}}function Kx(e){return e}function GR(e){return e.access_token&&e.refresh_token&&e.expires_in}const lh=["global","local","others"];var JR=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class QR{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=gk(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=lh[0]){if(lh.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${lh.join(", ")}`);try{return await it(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Xe(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await it(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Pi})}catch(r){if(Xe(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=JR(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await it(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:YR,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Xe(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await it(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Pi})}catch(n){if(Xe(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,o,a,u,c;try{const f={nextPage:null,lastPage:0,total:0},h=await it(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Kx});if(h.error)throw h.error;const p=await h.json(),v=(a=h.headers.get("x-total-count"))!==null&&a!==void 0?a:0,y=(c=(u=h.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&c!==void 0?c:[];return y.length>0&&(y.forEach(w=>{const S=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(w.split(";")[1].split("=")[1]);f[`${k}Page`]=S}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},p),f),error:null}}catch(f){if(Xe(f))return{data:{users:[]},error:f};throw f}}async getUserById(t){lo(t);try{return await it(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Pi})}catch(n){if(Xe(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){lo(t);try{return await it(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Pi})}catch(r){if(Xe(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){lo(t);try{return await it(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Pi})}catch(r){if(Xe(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){lo(t.userId);try{const{data:n,error:r}=await it(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(Xe(n))return{data:null,error:n};throw n}}async _deleteFactor(t){lo(t.userId),lo(t.id);try{return{data:await it(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Xe(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,i,o,a,u,c;try{const f={nextPage:null,lastPage:0,total:0},h=await it(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Kx});if(h.error)throw h.error;const p=await h.json(),v=(a=h.headers.get("x-total-count"))!==null&&a!==void 0?a:0,y=(c=(u=h.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&c!==void 0?c:[];return y.length>0&&(y.forEach(w=>{const S=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(w.split(";")[1].split("=")[1]);f[`${k}Page`]=S}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},p),f),error:null}}catch(f){if(Xe(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(t){try{return await it(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Xe(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await it(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Xe(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await it(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Xe(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await it(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Xe(n))return{data:null,error:n};throw n}}}function Yx(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const uo={debug:!!(globalThis&&mk()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class yk extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class XR extends yk{}async function ZR(e,t,n){uo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),uo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){uo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{uo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw uo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new XR(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(uo.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function eA(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function vk(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function tA(e){return parseInt(e,16)}function nA(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function rA(e){var t;const{chainId:n,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:a,notBefore:u,requestId:c,resources:f,scheme:h,uri:p,version:v}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const y=vk(e.address),w=h?`${h}://${r}`:r,S=e.statement?`${e.statement}
`:"",k=`${w} wants you to sign in with your Ethereum account:
${y}

${S}`;let _=`URI: ${p}
Version: ${v}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${o.toISOString()}`;if(i&&(_+=`
Expiration Time: ${i.toISOString()}`),u&&(_+=`
Not Before: ${u.toISOString()}`),c&&(_+=`
Request ID: ${c}`),f){let C=`
Resources:`;for(const j of f){if(!j||typeof j!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${j}`);C+=`
- ${j}`}_+=C}return`${k}
${_}`}class Kt extends Error{constructor({message:t,code:n,cause:r,name:i}){var o;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class pc extends Kt{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function iA({error:e,options:t}){var n,r,i;const{publicKey:o}=t;if(!o)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Kt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Kt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Kt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Kt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Kt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Kt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return o.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new Kt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Kt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const a=window.location.hostname;if(bk(a)){if(o.rp.id!==a)return new Kt({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Kt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Kt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Kt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Kt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function sA({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Kt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Kt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(bk(r)){if(n.rpId!==r)return new Kt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Kt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Kt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Kt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var xk=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class oA{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const aA=new oA;function lA(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,i=xk(e,["challenge","user","excludeCredentials"]),o=Eo(t).buffer,a=Object.assign(Object.assign({},n),{id:Eo(n.id).buffer}),u=Object.assign(Object.assign({},i),{challenge:o,user:a});if(r&&r.length>0){u.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const f=r[c];u.excludeCredentials[c]=Object.assign(Object.assign({},f),{id:Eo(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return u}function uA(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=xk(e,["challenge","allowCredentials"]),i=Eo(t).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const u=n[a];o.allowCredentials[a]=Object.assign(Object.assign({},u),{id:Eo(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function cA(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:xs(new Uint8Array(e.response.attestationObject)),clientDataJSON:xs(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function dA(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:xs(new Uint8Array(i.authenticatorData)),clientDataJSON:xs(new Uint8Array(i.clientDataJSON)),signature:xs(new Uint8Array(i.signature)),userHandle:i.userHandle?xs(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function bk(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Gx(){var e,t;return!!(Qn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function fA(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new pc("Browser returned unexpected credential type",t)}:{data:null,error:new pc("Empty credential response",t)}}catch(t){return{data:null,error:iA({error:t,options:e})}}}async function hA(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new pc("Browser returned unexpected credential type",t)}:{data:null,error:new pc("Empty credential response",t)}}catch(t){return{data:null,error:sA({error:t,options:e})}}}const pA={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},mA={userVerification:"preferred",hints:["security-key"]};function mc(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of e)if(i)for(const o in i){const a=i[o];if(a!==void 0)if(Array.isArray(a))r[o]=a;else if(n(a))r[o]=a;else if(t(a)){const u=r[o];t(u)?r[o]=mc(u,a):r[o]=mc(a)}else r[o]=a}return r}function gA(e,t){return mc(pA,e,t||{})}function yA(e,t){return mc(mA,e,t||{})}class vA{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:i},o){try{const{data:a,error:u}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!a)return{data:null,error:u};const c=i??aA.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:f}=a.webauthn.credential_options.publicKey;f.name||(f.name=`${f.id}:${r}`),f.displayName||(f.displayName=f.name)}switch(a.webauthn.type){case"create":{const f=gA(a.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:h,error:p}=await fA({publicKey:f,signal:c});return h?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:h}},error:null}:{data:null,error:p}}case"request":{const f=yA(a.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:h,error:p}=await hA(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:f,signal:c}));return h?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:h}},error:null}:{data:null,error:p}}}}catch(a){return Xe(a)?{data:null,error:a}:{data:null,error:new ps("Unexpected error in challenge",a)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}},o){if(!n)return{data:null,error:new nl("rpId is required for WebAuthn authentication")};try{if(!Gx())return{data:null,error:new ps("Browser does not support WebAuthn",null)};const{data:a,error:u}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:o});if(!a)return{data:null,error:u};const{webauthn:c}=a;return this._verify({factorId:t,challengeId:a.challengeId,webauthn:{type:c.type,rpId:n,rpOrigins:r,credential_response:c.credential_response}})}catch(a){return Xe(a)?{data:null,error:a}:{data:null,error:new ps("Unexpected error in authenticate",a)}}}async _register({friendlyName:t,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i},o){if(!n)return{data:null,error:new nl("rpId is required for WebAuthn registration")};try{if(!Gx())return{data:null,error:new ps("Browser does not support WebAuthn",null)};const{data:a,error:u}=await this._enroll({friendlyName:t});if(!a)return await this.client.mfa.listFactors().then(h=>{var p;return(p=h.data)===null||p===void 0?void 0:p.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===t&&v.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:u};const{data:c,error:f}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:o});return c?this._verify({factorId:a.id,challengeId:c.challengeId,webauthn:{rpId:n,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:f}}catch(a){return Xe(a)?{data:null,error:a}:{data:null,error:new ps("Unexpected error in register",a)}}}}eA();const xA={url:pR,storageKey:mR,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:gR,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Jx(e,t,n){return await n()}const co={};class rl{get jwks(){var t,n;return(n=(t=co[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){co[this.storageKey]=Object.assign(Object.assign({},co[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=co[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){co[this.storageKey]=Object.assign(Object.assign({},co[this.storageKey]),{cachedAt:t})}constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=rl.nextInstanceID,rl.nextInstanceID+=1,this.instanceID>0&&Qn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},xA),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new QR({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=gk(i.fetch),this.lock=i.lock||Jx,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Qn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=ZR:this.lock=Jx,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new vA(this)},this.persistSession?(i.storage?this.storage=i.storage:mk()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Yx(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Yx(this.memoryStorage)),Qn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${fk}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=IR(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Qn()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),kR(o)){const c=(t=o.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:a,redirectType:u}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",u),await this._saveSession(a),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Xe(n)?{error:n}:{error:new ps("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,i;try{const o=await it(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:xr}),{data:a,error:u}=o;if(u||!a)return{data:{user:null,session:null},error:u};const c=a.session,f=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(o){if(Xe(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(t){var n,r,i;try{let o;if("email"in t){const{email:h,password:p,options:v}=t;let y=null,w=null;this.flowType==="pkce"&&([y,w]=await ao(this.storage,this.storageKey)),o=await it(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:h,password:p,data:(n=v==null?void 0:v.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:y,code_challenge_method:w},xform:xr})}else if("phone"in t){const{phone:h,password:p,options:v}=t;o=await it(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:p,data:(r=v==null?void 0:v.data)!==null&&r!==void 0?r:{},channel:(i=v==null?void 0:v.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:xr})}else throw new Ou("You must provide either an email or phone number and a password");const{data:a,error:u}=o;if(u||!a)return{data:{user:null,session:null},error:u};const c=a.session,f=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(o){if(Xe(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(t){try{let n;if("email"in t){const{email:o,password:a,options:u}=t;n=await it(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:qx})}else if("phone"in t){const{phone:o,password:a,options:u}=t;n=await it(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:qx})}else throw new Ou("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new oo}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(Xe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,i,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,i,o,a,u,c,f,h,p,v;let y,w;if("message"in t)y=t.message,w=t.signature;else{const{chain:S,wallet:k,statement:_,options:C}=t;let j;if(Qn())if(typeof k=="object")j=k;else{const z=window;if("ethereum"in z&&typeof z.ethereum=="object"&&"request"in z.ethereum&&typeof z.ethereum.request=="function")j=z.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!(C!=null&&C.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=k}const I=new URL((n=C==null?void 0:C.url)!==null&&n!==void 0?n:window.location.href),D=await j.request({method:"eth_requestAccounts"}).then(z=>z).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!D||D.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const A=vk(D[0]);let U=(r=C==null?void 0:C.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!U){const z=await j.request({method:"eth_chainId"});U=tA(z)}const te={domain:I.host,address:A,statement:_,uri:I.href,version:"1",chainId:U,nonce:(i=C==null?void 0:C.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(a=(o=C==null?void 0:C.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(u=C==null?void 0:C.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(c=C==null?void 0:C.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(f=C==null?void 0:C.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(h=C==null?void 0:C.signInWithEthereum)===null||h===void 0?void 0:h.resources};y=rA(te),w=await j.request({method:"personal_sign",params:[nA(y),A]})}try{const{data:S,error:k}=await it(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:y,signature:w},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:xr});if(k)throw k;return!S||!S.session||!S.user?{data:{user:null,session:null},error:new oo}:(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),{data:Object.assign({},S),error:k})}catch(S){if(Xe(S))return{data:{user:null,session:null},error:S};throw S}}async signInWithSolana(t){var n,r,i,o,a,u,c,f,h,p,v,y;let w,S;if("message"in t)w=t.message,S=t.signature;else{const{chain:k,wallet:_,statement:C,options:j}=t;let I;if(Qn())if(typeof _=="object")I=_;else{const A=window;if("solana"in A&&typeof A.solana=="object"&&("signIn"in A.solana&&typeof A.solana.signIn=="function"||"signMessage"in A.solana&&typeof A.solana.signMessage=="function"))I=A.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(j!=null&&j.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");I=_}const D=new URL((n=j==null?void 0:j.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in I&&I.signIn){const A=await I.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},j==null?void 0:j.signInWithSolana),{version:"1",domain:D.host,uri:D.href}),C?{statement:C}:null));let U;if(Array.isArray(A)&&A[0]&&typeof A[0]=="object")U=A[0];else if(A&&typeof A=="object"&&"signedMessage"in A&&"signature"in A)U=A;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in U&&"signature"in U&&(typeof U.signedMessage=="string"||U.signedMessage instanceof Uint8Array)&&U.signature instanceof Uint8Array)w=typeof U.signedMessage=="string"?U.signedMessage:new TextDecoder().decode(U.signedMessage),S=U.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in I)||typeof I.signMessage!="function"||!("publicKey"in I)||typeof I!="object"||!I.publicKey||!("toBase58"in I.publicKey)||typeof I.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${D.host} wants you to sign in with your Solana account:`,I.publicKey.toBase58(),...C?["",C,""]:[""],"Version: 1",`URI: ${D.href}`,`Issued At: ${(i=(r=j==null?void 0:j.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=j==null?void 0:j.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${j.signInWithSolana.notBefore}`]:[],...!((a=j==null?void 0:j.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${j.signInWithSolana.expirationTime}`]:[],...!((u=j==null?void 0:j.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${j.signInWithSolana.chainId}`]:[],...!((c=j==null?void 0:j.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${j.signInWithSolana.nonce}`]:[],...!((f=j==null?void 0:j.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${j.signInWithSolana.requestId}`]:[],...!((p=(h=j==null?void 0:j.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||p===void 0)&&p.length?["Resources",...j.signInWithSolana.resources.map(U=>`- ${U}`)]:[]].join(`
`);const A=await I.signMessage(new TextEncoder().encode(w),"utf8");if(!A||!(A instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=A}}try{const{data:k,error:_}=await it(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:xs(S)},!((v=t.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:xr});if(_)throw _;return!k||!k.session||!k.user?{data:{user:null,session:null},error:new oo}:(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),{data:Object.assign({},k),error:_})}catch(k){if(Xe(k))return{data:{user:null,session:null},error:k};throw k}}async _exchangeCodeForSession(t){const n=await os(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:o,error:a}=await it(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:xr});if(await Ei(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new oo}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:a})}catch(o){if(Xe(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(t){try{const{options:n,provider:r,token:i,access_token:o,nonce:a}=t,u=await it(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:xr}),{data:c,error:f}=u;return f?{data:{user:null,session:null},error:f}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new oo}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:f})}catch(n){if(Xe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,i,o,a;try{if("email"in t){const{email:u,options:c}=t;let f=null,h=null;this.flowType==="pkce"&&([f,h]=await ao(this.storage,this.storageKey));const{error:p}=await it(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:f,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in t){const{phone:u,options:c}=t,{data:f,error:h}=await it(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:h}}throw new Ou("You must provide either an email or phone number.")}catch(u){if(Xe(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(t){var n,r;try{let i,o;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,o=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:u}=await it(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:xr});if(u)throw u;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,f=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(i){if(Xe(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var n,r,i;try{let o=null,a=null;return this.flowType==="pkce"&&([o,a]=await ao(this.storage,this.storageKey)),await it(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:a}),headers:this.headers,xform:KR})}catch(o){if(Xe(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Ci;const{error:i}=await it(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(Xe(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:o}=t,{error:a}=await it(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in t){const{phone:r,type:i,options:o}=t,{data:a,error:u}=await it(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:u}}throw new Ou("You must provide either an email or phone number and a type")}catch(n){if(Xe(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await os(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<ih:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const a=await os(this.userStorage,this.storageKey+"-user");a!=null&&a.user?t.user=a.user:t.user=ah()}if(this.storage.isServer&&t.user){let a=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,f,h)=>(!a&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,f,h))})}return{data:{session:t},error:null}}const{data:i,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await it(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Pi}):await this._useSession(async n=>{var r,i,o;const{data:a,error:u}=n;if(u)throw u;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ci}:await it(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:Pi})})}catch(n){if(Xe(n))return wR(n)&&(await this._removeSession(),await Ei(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:i,error:o}=r;if(o)throw o;if(!i.session)throw new Ci;const a=i.session;let u=null,c=null;this.flowType==="pkce"&&t.email!=null&&([u,c]=await ao(this.storage,this.storageKey));const{data:f,error:h}=await it(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:u,code_challenge_method:c}),jwt:a.access_token,xform:Pi});if(h)throw h;return a.user=f.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(Xe(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ci;const n=Date.now()/1e3;let r=n,i=!0,o=null;const{payload:a}=oh(t.access_token);if(a.exp&&(r=a.exp,i=r<=n),i){const{data:u,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!u)return{data:{user:null,session:null},error:null};o=u}else{const{data:u,error:c}=await this._getUser(t.access_token);if(c)throw c;o={access_token:t.access_token,refresh_token:t.refresh_token,user:u.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(n){if(Xe(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:a,error:u}=n;if(u)throw u;t=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Ci;const{data:i,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Xe(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!Qn())throw new Du("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Du(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Fx("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Du("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Fx("No code detected.");const{data:C,error:j}=await this._exchangeCodeForSession(t.code);if(j)throw j;const I=new URL(window.location.href);return I.searchParams.delete("code"),window.history.replaceState(window.history.state,"",I.toString()),{data:{session:C.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:o,refresh_token:a,expires_in:u,expires_at:c,token_type:f}=t;if(!o||!u||!a||!f)throw new Du("No session defined in URL");const h=Math.round(Date.now()/1e3),p=parseInt(u);let v=h+p;c&&(v=parseInt(c));const y=v-h;y*1e3<=mo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${p}s`);const w=v-p;h-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,v,h):h-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,v,h);const{data:S,error:k}=await this._getUser(o);if(k)throw k;const _={provider_token:r,provider_refresh_token:i,access_token:o,expires_in:p,expires_at:v,refresh_token:a,token_type:f,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:_,redirectType:t.type},error:null}}catch(r){if(Xe(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await os(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return{error:o};const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:u}=await this.admin.signOut(a,t);if(u&&!(bR(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return t!=="others"&&(await this._removeSession(),await Ei(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=TR(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,i;try{const{data:{session:o},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await ao(this.storage,this.storageKey,!0));try{return await it(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(Xe(o))return{data:null,error:o};throw o}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(Xe(n))return{data:null,error:n};throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:i}=await this._useSession(async o=>{var a,u,c,f,h;const{data:p,error:v}=o;if(v)throw v;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(u=t.options)===null||u===void 0?void 0:u.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await it(this.fetch,"GET",y,{headers:this.headers,jwt:(h=(f=p.session)===null||f===void 0?void 0:f.access_token)!==null&&h!==void 0?h:void 0})});if(i)throw i;return Qn()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Xe(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:o}}=n;if(i)throw i;const{options:a,provider:u,token:c,access_token:f,nonce:h}=t,p=await it(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o==null?void 0:o.access_token)!==null&&r!==void 0?r:void 0,body:{provider:u,id_token:c,access_token:f,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:xr}),{data:v,error:y}=p;return y?{data:{user:null,session:null},error:y}:!v||!v.session||!v.user?{data:{user:null,session:null},error:new oo}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),{data:v,error:y})}catch(i){if(Xe(i))return{data:{user:null,session:null},error:i};throw i}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,i;const{data:o,error:a}=n;if(a)throw a;return await it(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Xe(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await AR(async i=>(i>0&&await RR(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await it(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:xr})),(i,o)=>{const a=200*Math.pow(2,i);return o&&sh(o)&&Date.now()+a-r<mo})}catch(r){if(this._debug(n,"error",r),Xe(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Qn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await os(this.storage,this.storageKey);if(i&&this.userStorage){let a=await os(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await go(this.userStorage,this.storageKey+"-user",a)),i.user=(t=a==null?void 0:a.user)!==null&&t!==void 0?t:ah()}else if(i&&!i.user&&!i.user){const a=await os(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(i.user=a.user,await Ei(this.storage,this.storageKey+"-user"),await go(this.storage,this.storageKey,i)):i.user=ah()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const o=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<ih;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${ih}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),sh(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:u}=await this._getUser(i.access_token);!u&&(a!=null&&a.user)?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Ci;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Hc;const{data:o,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!o.session)throw new Ci;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const u={data:o.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(o){if(this._debug(i,"error",o),Xe(o)){const a={data:null,error:o};return sh(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,r=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const o=[],a=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(t,n)}catch(c){o.push(c)}});if(await Promise.all(a),o.length>0){for(let u=0;u<o.length;u+=1)console.error(o[u]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await go(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const o=Hx(i);await go(this.storage,this.storageKey,o)}else{const i=Hx(n);await go(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Ei(this.storage,this.storageKey),await Ei(this.storage,this.storageKey+"-code-verifier"),await Ei(this.storage,this.storageKey+"-user"),this.userStorage&&await Ei(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Qn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),mo);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-t)/mo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${mo}ms, refresh threshold is ${lp} ticks`),i<=lp&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof yk)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Qn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,a]=await ao(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(u.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);i.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;return o?{data:null,error:o}:await it(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Xe(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,i;const{data:o,error:a}=n;if(a)return{data:null,error:a};const u=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:f}=await it(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return f?{data:null,error:f}:(t.factorType==="totp"&&c.type==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(Xe(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?cA(t.webauthn.credential_response):dA(t.webauthn.credential_response)})}:{code:t.code}),{data:u,error:c}=await it(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:c})})}catch(n){if(Xe(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return{data:null,error:o};const a=await it(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:u}=a;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:lA(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:uA(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Xe(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const o of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])i.all.push(o),o.status==="verified"&&i[o.factor_type].push(o);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:i},error:o}=t;if(o)return{data:null,error:o};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=oh(i.access_token);let u=null;a.aal&&(u=a.aal);let c=u;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(p=>p.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const h=a.amr||[];return{data:{currentLevel:u,nextLevel:c,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(u=>u.kid===t);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(u=>u.kid===t),r&&this.jwks_cached_at+vR>i)return r;const{data:o,error:a}=await it(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,r=o.keys.find(u=>u.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:y,error:w}=await this.getSession();if(w||!y.session)return{data:null,error:w};r=y.session.access_token}const{header:i,payload:o,signature:a,raw:{header:u,payload:c}}=oh(r);n!=null&&n.allowExpired||BR(o.exp);const f=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!f){const{error:y}=await this.getUser(r);if(y)throw y;return{data:{claims:o,header:i,signature:a},error:null}}const h=zR(i.alg),p=await crypto.subtle.importKey("jwk",f,h,!0,["verify"]);if(!await crypto.subtle.verify(h,p,a,jR(`${u}.${c}`)))throw new dp("Invalid JWT signature");return{data:{claims:o,header:i,signature:a},error:null}}catch(r){if(Xe(r))return{data:null,error:r};throw r}}}rl.nextInstanceID=0;const bA=rl;class wA extends bA{constructor(t){super(t)}}var kA=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function u(h){try{f(r.next(h))}catch(p){a(p)}}function c(h){try{f(r.throw(h))}catch(p){a(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};class SA{constructor(t,n,r){var i,o,a;this.supabaseUrl=t,this.supabaseKey=n;const u=hR(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const c=`sb-${u.hostname.split(".")[0]}-auth-token`,f={db:rR,realtime:sR,auth:Object.assign(Object.assign({},iR),{storageKey:c}),global:nR},h=fR(r??{},f);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=h.global.headers)!==null&&o!==void 0?o:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(p,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=h.auth)!==null&&a!==void 0?a:{},this.headers,h.global.fetch),this.fetch=uR(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new xP(new URL("rest/v1",u).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new ZP(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new uP(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return kA(this,void 0,void 0,function*(){var t,n;if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:o,storageKey:a,flowType:u,lock:c,debug:f},h,p){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new wA({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),h),storageKey:a,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:o,flowType:u,lock:c,debug:f,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new DP(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const EA=(e,t,n)=>new SA(e,t,n);function _A(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}_A()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const CA="https://kjsdmygqhxaryvfmnhqr.supabase.co",jA="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imtqc2RteWdxaHhhcnl2Zm1uaHFyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAwMTAxMDEsImV4cCI6MjA3NTU4NjEwMX0.kXL7Dgum6CepvcrS8LVY1v_EHnpyUQOFcqndUQWPrkM",Jt=EA(CA,jA,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),Qx=e=>{let t;const n=new Set,r=(f,h)=>{const p=typeof f=="function"?f(t):f;if(!Object.is(p,t)){const v=t;t=h??(typeof p!="object"||p===null)?p:Object.assign({},t,p),n.forEach(y=>y(t,v))}},i=()=>t,u={setState:r,getState:i,getInitialState:()=>c,subscribe:f=>(n.add(f),()=>n.delete(f))},c=t=e(r,i,u);return u},NA=(e=>e?Qx(e):Qx),TA=e=>e;function IA(e,t=TA){const n=Ae.useSyncExternalStore(e.subscribe,Ae.useCallback(()=>t(e.getState()),[e,t]),Ae.useCallback(()=>t(e.getInitialState()),[e,t]));return Ae.useDebugValue(n),n}const Xx=e=>{const t=NA(e),n=r=>IA(t,r);return Object.assign(n,t),n},PA=(e=>e?Xx(e):Xx),RA="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Wt=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=RA[n[e]&63];return t};var Gu={exports:{}},AA=Gu.exports,Zx;function wk(){return Zx||(Zx=1,(function(e,t){(function(n,r){e.exports=r()})(AA,(function(){var n=1e3,r=6e4,i=36e5,o="millisecond",a="second",u="minute",c="hour",f="day",h="week",p="month",v="quarter",y="year",w="date",S="Invalid Date",k=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,_=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,C={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Y){var K=["th","st","nd","rd"],se=Y%100;return"["+Y+(K[(se-20)%10]||K[se]||K[0])+"]"}},j=function(Y,K,se){var q=String(Y);return!q||q.length>=K?Y:""+Array(K+1-q.length).join(se)+Y},I={s:j,z:function(Y){var K=-Y.utcOffset(),se=Math.abs(K),q=Math.floor(se/60),F=se%60;return(K<=0?"+":"-")+j(q,2,"0")+":"+j(F,2,"0")},m:function Y(K,se){if(K.date()<se.date())return-Y(se,K);var q=12*(se.year()-K.year())+(se.month()-K.month()),F=K.clone().add(q,p),L=se-F<0,N=K.clone().add(q+(L?-1:1),p);return+(-(q+(se-F)/(L?F-N:N-F))||0)},a:function(Y){return Y<0?Math.ceil(Y)||0:Math.floor(Y)},p:function(Y){return{M:p,y,w:h,d:f,D:w,h:c,m:u,s:a,ms:o,Q:v}[Y]||String(Y||"").toLowerCase().replace(/s$/,"")},u:function(Y){return Y===void 0}},D="en",A={};A[D]=C;var U="$isDayjsObject",te=function(Y){return Y instanceof ne||!(!Y||!Y[U])},z=function Y(K,se,q){var F;if(!K)return D;if(typeof K=="string"){var L=K.toLowerCase();A[L]&&(F=L),se&&(A[L]=se,F=L);var N=K.split("-");if(!F&&N.length>1)return Y(N[0])}else{var B=K.name;A[B]=K,F=B}return!q&&F&&(D=F),F||!q&&D},M=function(Y,K){if(te(Y))return Y.clone();var se=typeof K=="object"?K:{};return se.date=Y,se.args=arguments,new ne(se)},$=I;$.l=z,$.i=te,$.w=function(Y,K){return M(Y,{locale:K.$L,utc:K.$u,x:K.$x,$offset:K.$offset})};var ne=(function(){function Y(se){this.$L=z(se.locale,null,!0),this.parse(se),this.$x=this.$x||se.x||{},this[U]=!0}var K=Y.prototype;return K.parse=function(se){this.$d=(function(q){var F=q.date,L=q.utc;if(F===null)return new Date(NaN);if($.u(F))return new Date;if(F instanceof Date)return new Date(F);if(typeof F=="string"&&!/Z$/i.test(F)){var N=F.match(k);if(N){var B=N[2]-1||0,ee=(N[7]||"0").substring(0,3);return L?new Date(Date.UTC(N[1],B,N[3]||1,N[4]||0,N[5]||0,N[6]||0,ee)):new Date(N[1],B,N[3]||1,N[4]||0,N[5]||0,N[6]||0,ee)}}return new Date(F)})(se),this.init()},K.init=function(){var se=this.$d;this.$y=se.getFullYear(),this.$M=se.getMonth(),this.$D=se.getDate(),this.$W=se.getDay(),this.$H=se.getHours(),this.$m=se.getMinutes(),this.$s=se.getSeconds(),this.$ms=se.getMilliseconds()},K.$utils=function(){return $},K.isValid=function(){return this.$d.toString()!==S},K.isSame=function(se,q){var F=M(se);return this.startOf(q)<=F&&F<=this.endOf(q)},K.isAfter=function(se,q){return M(se)<this.startOf(q)},K.isBefore=function(se,q){return this.endOf(q)<M(se)},K.$g=function(se,q,F){return $.u(se)?this[q]:this.set(F,se)},K.unix=function(){return Math.floor(this.valueOf()/1e3)},K.valueOf=function(){return this.$d.getTime()},K.startOf=function(se,q){var F=this,L=!!$.u(q)||q,N=$.p(se),B=function(Te,je){var ie=$.w(F.$u?Date.UTC(F.$y,je,Te):new Date(F.$y,je,Te),F);return L?ie:ie.endOf(f)},ee=function(Te,je){return $.w(F.toDate()[Te].apply(F.toDate("s"),(L?[0,0,0,0]:[23,59,59,999]).slice(je)),F)},R=this.$W,be=this.$M,he=this.$D,ge="set"+(this.$u?"UTC":"");switch(N){case y:return L?B(1,0):B(31,11);case p:return L?B(1,be):B(0,be+1);case h:var me=this.$locale().weekStart||0,Ce=(R<me?R+7:R)-me;return B(L?he-Ce:he+(6-Ce),be);case f:case w:return ee(ge+"Hours",0);case c:return ee(ge+"Minutes",1);case u:return ee(ge+"Seconds",2);case a:return ee(ge+"Milliseconds",3);default:return this.clone()}},K.endOf=function(se){return this.startOf(se,!1)},K.$set=function(se,q){var F,L=$.p(se),N="set"+(this.$u?"UTC":""),B=(F={},F[f]=N+"Date",F[w]=N+"Date",F[p]=N+"Month",F[y]=N+"FullYear",F[c]=N+"Hours",F[u]=N+"Minutes",F[a]=N+"Seconds",F[o]=N+"Milliseconds",F)[L],ee=L===f?this.$D+(q-this.$W):q;if(L===p||L===y){var R=this.clone().set(w,1);R.$d[B](ee),R.init(),this.$d=R.set(w,Math.min(this.$D,R.daysInMonth())).$d}else B&&this.$d[B](ee);return this.init(),this},K.set=function(se,q){return this.clone().$set(se,q)},K.get=function(se){return this[$.p(se)]()},K.add=function(se,q){var F,L=this;se=Number(se);var N=$.p(q),B=function(be){var he=M(L);return $.w(he.date(he.date()+Math.round(be*se)),L)};if(N===p)return this.set(p,this.$M+se);if(N===y)return this.set(y,this.$y+se);if(N===f)return B(1);if(N===h)return B(7);var ee=(F={},F[u]=r,F[c]=i,F[a]=n,F)[N]||1,R=this.$d.getTime()+se*ee;return $.w(R,this)},K.subtract=function(se,q){return this.add(-1*se,q)},K.format=function(se){var q=this,F=this.$locale();if(!this.isValid())return F.invalidDate||S;var L=se||"YYYY-MM-DDTHH:mm:ssZ",N=$.z(this),B=this.$H,ee=this.$m,R=this.$M,be=F.weekdays,he=F.months,ge=F.meridiem,me=function(je,ie,Ie,He){return je&&(je[ie]||je(q,L))||Ie[ie].slice(0,He)},Ce=function(je){return $.s(B%12||12,je,"0")},Te=ge||function(je,ie,Ie){var He=je<12?"AM":"PM";return Ie?He.toLowerCase():He};return L.replace(_,(function(je,ie){return ie||(function(Ie){switch(Ie){case"YY":return String(q.$y).slice(-2);case"YYYY":return $.s(q.$y,4,"0");case"M":return R+1;case"MM":return $.s(R+1,2,"0");case"MMM":return me(F.monthsShort,R,he,3);case"MMMM":return me(he,R);case"D":return q.$D;case"DD":return $.s(q.$D,2,"0");case"d":return String(q.$W);case"dd":return me(F.weekdaysMin,q.$W,be,2);case"ddd":return me(F.weekdaysShort,q.$W,be,3);case"dddd":return be[q.$W];case"H":return String(B);case"HH":return $.s(B,2,"0");case"h":return Ce(1);case"hh":return Ce(2);case"a":return Te(B,ee,!0);case"A":return Te(B,ee,!1);case"m":return String(ee);case"mm":return $.s(ee,2,"0");case"s":return String(q.$s);case"ss":return $.s(q.$s,2,"0");case"SSS":return $.s(q.$ms,3,"0");case"Z":return N}return null})(je)||N.replace(":","")}))},K.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},K.diff=function(se,q,F){var L,N=this,B=$.p(q),ee=M(se),R=(ee.utcOffset()-this.utcOffset())*r,be=this-ee,he=function(){return $.m(N,ee)};switch(B){case y:L=he()/12;break;case p:L=he();break;case v:L=he()/3;break;case h:L=(be-R)/6048e5;break;case f:L=(be-R)/864e5;break;case c:L=be/i;break;case u:L=be/r;break;case a:L=be/n;break;default:L=be}return F?L:$.a(L)},K.daysInMonth=function(){return this.endOf(p).$D},K.$locale=function(){return A[this.$L]},K.locale=function(se,q){if(!se)return this.$L;var F=this.clone(),L=z(se,q,!0);return L&&(F.$L=L),F},K.clone=function(){return $.w(this.$d,this)},K.toDate=function(){return new Date(this.valueOf())},K.toJSON=function(){return this.isValid()?this.toISOString():null},K.toISOString=function(){return this.$d.toISOString()},K.toString=function(){return this.$d.toUTCString()},Y})(),H=ne.prototype;return M.prototype=H,[["$ms",o],["$s",a],["$m",u],["$H",c],["$W",f],["$M",p],["$y",y],["$D",w]].forEach((function(Y){H[Y[1]]=function(K){return this.$g(K,Y[0],Y[1])}})),M.extend=function(Y,K){return Y.$i||(Y(K,ne,M),Y.$i=!0),M},M.locale=z,M.isDayjs=te,M.unix=function(Y){return M(1e3*Y)},M.en=A[D],M.Ls=A,M.p={},M}))})(Gu)),Gu.exports}var MA=wk();const We=Mo(MA);function uh(e){return e.trim().toLowerCase().normalize("NFKD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,"").replace(/-{2,}/g,"-")}const _o=`
  id,
  name,
  subtitle,
  objective_id,
  parent_work_id,
  node_type,
  schedule_kind,
  schedule_number,
  ebook_ref,
  tags,
  order_hint,
  next_work_id,
  variant_of_work_id,
  description_markdown,
  estimated_minutes,
  notes,
  video_urls,
  visibility,
  owner_id,
  owner_email,
  created_at,
  updated_at,
  work_collaborators (
    id,
    email,
    role,
    user_id,
    created_at
  )
`,kk=e=>Array.from(new Set(e.map(t=>t.trim().toLowerCase()).filter(t=>t.length>0))),OA=e=>Array.isArray(e)?e.map(t=>typeof t=="string"?t.trim():"").filter(t=>t.length>0):[],um=e=>Array.isArray(e)?Array.from(new Set(e.map(t=>typeof t=="string"?t.trim().toLowerCase():"").filter(t=>t.length>0))):[],DA=e=>e==="day_of_year"||e==="day_of_month"||e==="day_of_week",LA=(e,t)=>{if(!DA(e))return;const n=typeof t=="number"?t:Number(t);if(Number.isFinite(n))return{kind:e,number:Math.trunc(n)}},$A=e=>{if(!e||typeof e!="object")return;const t=e,n=String(t.ebookId??"").trim(),r=String(t.indexUrl??"").trim(),i=String(t.mode??"").trim();if(!(!n||!r)&&!(i!=="daily_fixed"&&i!=="sequential"))return{ebookId:n,indexUrl:r,mode:i}},Sk=e=>(e??[]).map(t=>({id:`${t.id}`,email:t.email.toLowerCase(),role:t.role,userId:t.user_id??void 0,createdAt:t.created_at})),cm=(e,t)=>{var u,c;const n=Sk(e.work_collaborators),r=n.map(f=>f.email),i=((u=t==null?void 0:t.actorEmail)==null?void 0:u.toLowerCase())??"",o=t?e.owner_id===t.actorId:!1,a=o||r.includes(i);return{id:e.id,name:e.name,subtitle:e.subtitle??void 0,objectiveId:e.objective_id,parentWorkId:e.parent_work_id??null,nodeType:e.node_type??void 0,schedule:LA(e.schedule_kind,e.schedule_number),ebookRef:$A(e.ebook_ref),tags:um(e.tags),orderHint:typeof e.order_hint=="number"?e.order_hint:void 0,nextWorkId:e.next_work_id??null,variantOfWorkId:e.variant_of_work_id??null,descriptionMarkdown:e.description_markdown??"",estimatedMinutes:e.estimated_minutes??0,notes:e.notes??void 0,videoUrls:OA(e.video_urls),visibility:e.visibility??"private",ownerId:e.owner_id,ownerEmail:((c=e.owner_email)==null?void 0:c.toLowerCase())??"",collaborators:n,collaboratorEmails:r,createdAt:e.created_at,updatedAt:e.updated_at,canEdit:a,isOwner:o}};async function FA(e){const{data:t,error:n}=await Jt.from("works").select(_o).order("name");if(n)throw console.error("No se pudieron cargar los trabajos compartidos",n),n;return t.map(r=>cm(r,e))}async function e0(e,t){var _;const n=e.id??Wt(),r=kk(e.collaboratorEmails),i=t.actorEmail.trim().toLowerCase(),o=(_=e.nodeType)!=null&&_.trim()?e.nodeType.trim():null,a=e.scheduleKind??null,u=typeof e.scheduleNumber=="number"&&Number.isFinite(e.scheduleNumber)?Math.trunc(e.scheduleNumber):null,c=e.ebookRef??null,f=um(e.tags??[]),h=typeof e.orderHint=="number"&&Number.isFinite(e.orderHint)?e.orderHint:null,p=e.nextWorkId??null,v=e.variantOfWorkId??null,{data:y,error:w}=await Jt.from("works").insert({id:n,name:e.name,subtitle:e.subtitle??null,objective_id:e.objectiveId,parent_work_id:e.parentWorkId??null,node_type:o,schedule_kind:a,schedule_number:u,ebook_ref:c,tags:f,order_hint:h,next_work_id:p,variant_of_work_id:v,description_markdown:e.descriptionMarkdown,estimated_minutes:e.estimatedMinutes,notes:e.notes??null,video_urls:e.videoUrls,visibility:e.visibility,owner_id:t.actorId,owner_email:i,updated_at:new Date().toISOString()}).select(_o).maybeSingle();if(w||!y)throw console.error("No se pudo crear el trabajo",w),w??new Error("Falta respuesta al crear trabajo");if(r.length>0){const C=r.map(I=>({work_id:y.id,email:I})),{error:j}=await Jt.from("work_collaborators").insert(C);if(j)throw console.error("No se pudieron guardar los colaboradores",j),j}const{data:S,error:k}=await Jt.from("works").select(_o).eq("id",y.id).maybeSingle();if(k||!S)throw console.error("No se pudo refrescar el trabajo creado",k),k??new Error("No se pudo cargar el trabajo creado");return cm(S,t)}async function BA(e,t,n){const r={};t.name!==void 0&&(r.name=t.name),t.subtitle!==void 0&&(r.subtitle=t.subtitle),t.objectiveId!==void 0&&(r.objective_id=t.objectiveId),t.parentWorkId!==void 0&&(r.parent_work_id=t.parentWorkId),t.nodeType!==void 0&&(r.node_type=t.nodeType),t.scheduleKind!==void 0&&(r.schedule_kind=t.scheduleKind),t.scheduleNumber!==void 0&&(r.schedule_number=t.scheduleNumber),t.ebookRef!==void 0&&(r.ebook_ref=t.ebookRef),t.tags!==void 0&&(r.tags=um(t.tags)),t.orderHint!==void 0&&(r.order_hint=t.orderHint),t.nextWorkId!==void 0&&(r.next_work_id=t.nextWorkId),t.variantOfWorkId!==void 0&&(r.variant_of_work_id=t.variantOfWorkId),t.descriptionMarkdown!==void 0&&(r.description_markdown=t.descriptionMarkdown),t.estimatedMinutes!==void 0&&(r.estimated_minutes=t.estimatedMinutes),t.notes!==void 0&&(r.notes=t.notes),t.videoUrls!==void 0&&(r.video_urls=t.videoUrls),t.visibility!==void 0&&(r.visibility=t.visibility),r.updated_at=new Date().toISOString();let i=null;if(Object.keys(r).length>0){const{data:o,error:a}=await Jt.from("works").update(r).eq("id",e).select(_o).maybeSingle();if(a||!o)throw console.error("No se pudo actualizar el trabajo",a),a??new Error("Falta respuesta al actualizar trabajo");i=o}else{const{data:o,error:a}=await Jt.from("works").select(_o).eq("id",e).maybeSingle();if(a||!o)throw a??new Error("Trabajo no encontrado");i=o}if(t.collaboratorEmails){const o=kk(t.collaboratorEmails),a=Sk(i.work_collaborators),u=a.map(v=>v.email),c=o.filter(v=>!u.includes(v)),f=a.filter(v=>!o.includes(v.email));if(c.length>0){const v=c.map(w=>({work_id:e,email:w})),{error:y}=await Jt.from("work_collaborators").insert(v);if(y)throw console.error("No se pudieron aadir los colaboradores",y),y}if(f.length>0){const v=f.map(w=>w.email),{error:y}=await Jt.from("work_collaborators").delete().eq("work_id",e).in("email",v);if(y)throw console.error("No se pudieron eliminar colaboradores",y),y}const{data:h,error:p}=await Jt.from("works").select(_o).eq("id",e).maybeSingle();if(p||!h)throw p??new Error("Error al refrescar colaboradores");i=h}return cm(i,n)}async function zA(e){const{error:t}=await Jt.from("works").delete().eq("id",e);if(t)throw console.error("No se pudo eliminar el trabajo",t),t}const Lu=new Intl.Collator("es",{numeric:!0,sensitivity:"base"});function fp(e){const t=(e??"").trim(),n=t.match(/^(\d+)\s*[\.)-]?\s*(.*)$/);if(!n)return{order:null,rest:t};const r=Number(n[1]);return Number.isFinite(r)?{order:Math.trunc(r),rest:(n[2]??"").trim()}:{order:null,rest:t}}function UA(e){return fp(e.name).order!==null}function dm(e){const t=[...e],n=t.some(UA);return t.sort((r,i)=>{if(n){const u=fp(r.name),c=fp(i.name),f=u.order??Number.POSITIVE_INFINITY,h=c.order??Number.POSITIVE_INFINITY;if(f!==h)return f-h;const p=Lu.compare(u.rest||r.name,c.rest||i.name);return p!==0?p:Lu.compare(r.id,i.id)}const o=r.kind===i.kind?0:r.kind==="class"?-1:1;if(o!==0)return o;const a=Lu.compare(r.name,i.name);return a!==0?a:Lu.compare(r.id,i.id)}),t}const kt={objectives:"sport-planner-objetivos",works:"sport-planner-trabajos",sessions:"sport-planner-sesiones",assistants:"sport-planner-asistentes",plans:"sport-planner-plans",kungfuPrograms:"sport-planner-kungfu-programs",kungfuCadence:"sport-planner-kungfu-cadence",kungfuTodayPlan:"sport-planner-kungfu-today-plan",workTaxonomy:"sport-planner-work-taxonomy"},Ek=typeof window<"u",bt=()=>new Date().toISOString(),cs="18:30",ms="classes",Oi="personal-kungfu",gs=[{id:"default",name:"Kung Fu  activo",enabled:!0,include:[{byTags:["kungfu"]}],exclude:[]}],Ni={targetsDays:{work:7,technique:5,segment:8,form:10,drill:7},overrides:[]},mn={limitMode:"count",maxItems:12,minutesBudget:30,template:{totalMinutes:30,focusMinutes:18,rouletteMinutes:10,recapMinutes:2},defaultMinutesByNodeType:{work:3,technique:1.5,segment:6,form:15,drill:4,reading:5,link:2},focusSelectors:[],rouletteSelectors:[],groups:[{id:"formas",name:"Formas",enabled:!0,order:1,type:"work",limitMode:"minutes",minutesBudget:18,strategy:"overdue",hierarchyRule:"prefer_leaves",include:[{byNodeTypes:["segment","form"]}],exclude:[]},{id:"tecnicas",name:"Tcnicas",enabled:!0,order:2,type:"work",limitMode:"minutes",minutesBudget:10,strategy:"weighted",hierarchyRule:"allow_all",include:[{byNodeTypes:["technique"]},{byTags:["roulette"]}],exclude:[]},{id:"recap",name:"Recap",enabled:!0,order:99,type:"note",limitMode:"minutes",minutesBudget:2}]},Ri={nodeTypes:[{key:"form",label:"Form"},{key:"segment",label:"Segment"},{key:"application",label:"Application"},{key:"technique",label:"Technique"},{key:"drill",label:"Drill"},{key:"reading",label:"Reading"},{key:"ebook",label:"Ebook"},{key:"work",label:"Work"},{key:"link",label:"Link"},{key:"style",label:"Style"}],tags:[]},WA=e=>e==="class"||e==="personal",HA=(e,t)=>{if(!e||typeof e!="object")return t;const n=e,r=String(n.id??"").trim();if(!r)return t;const i=WA(n.kind)?n.kind:t.kind,o=String(n.name??"").trim()||t.name,a=typeof n.enabled=="boolean"?n.enabled:t.enabled,u=String(n.createdAt??"").trim()||t.createdAt,c=String(n.updatedAt??"").trim()||t.updatedAt;return{...t,id:r,kind:i,name:o,enabled:a,cadence:n.cadence??t.cadence,todayPlan:n.todayPlan??t.todayPlan,createdAt:u,updatedAt:c}},_k=(e,t,n)=>[{id:ms,name:"Clases",kind:"class",enabled:!0,createdAt:e,updatedAt:e},{id:Oi,name:"Personal Kung Fu",kind:"personal",enabled:!0,cadence:t,todayPlan:n,createdAt:e,updatedAt:e}],ds=(e,t,n,r)=>{const i=_k(r,t,n),a=(Array.isArray(e)?e:[]).map(f=>{const h=String((f==null?void 0:f.id)??"").trim(),p=i.find(v=>v.id===h)??{id:h||Wt(),name:"Plan",kind:"personal",enabled:!0,cadence:t,todayPlan:n,createdAt:r,updatedAt:r};return HA(f,p)}).filter(f=>f.id.length>0),u=new Map;a.forEach(f=>{u.set(f.id,f)}),i.forEach(f=>{u.has(f.id)||u.set(f.id,f)});const c=u.get(Oi);return c&&u.set(Oi,{...c,cadence:c.cadence??t,todayPlan:c.todayPlan??n}),dm(Array.from(u.values()))},VA=e=>{const n=(Array.isArray(e)?e:[]).map(i=>{if(!i||typeof i!="object")return null;const o=i,a=String(o.key??"").trim().toLowerCase(),u=String(o.label??"").trim();return a?{key:a,label:u||a}:null}).filter(Boolean),r=new Map;return n.forEach(i=>{r.set(i.key,i)}),Ri.nodeTypes.forEach(i=>{r.has(i.key)||r.set(i.key,i)}),Array.from(r.values()).sort((i,o)=>i.label.localeCompare(o.label,"en",{sensitivity:"base"}))},qA=e=>{const n=(Array.isArray(e)?e:[]).map(i=>{if(typeof i=="string"){const u=i.trim().toLowerCase();return u?{name:u}:null}if(!i||typeof i!="object")return null;const a=String(i.name??"").trim().toLowerCase();return a?{name:a}:null}).filter(Boolean),r=new Map;return n.forEach(i=>r.set(i.name,i)),Array.from(r.values()).sort((i,o)=>i.name.localeCompare(o.name,"en",{sensitivity:"base"}))},Gn=(e,t)=>{const n=(e&&typeof e=="object"?e:{})??{},r=VA(n.nodeTypes),i=qA(n.tags),o=new Map(r.map(u=>[u.key,u])),a=new Map(i.map(u=>[u.name,u]));return t.forEach(u=>{const c=(u.nodeType??"").trim().toLowerCase();c&&!o.has(c)&&o.set(c,{key:c,label:c}),(u.tags??[]).forEach(f=>{const h=String(f??"").trim().toLowerCase();h&&!a.has(h)&&a.set(h,{name:h})})}),{nodeTypes:Array.from(o.values()).sort((u,c)=>u.label.localeCompare(c.label,"en",{sensitivity:"base"})),tags:Array.from(a.values()).sort((u,c)=>u.name.localeCompare(c.name,"en",{sensitivity:"base"}))}},t0=e=>Array.from(new Set((Array.isArray(e)?e:[]).map(t=>String(t??"").trim().toLowerCase()).filter(t=>t.length>0))),KA=e=>Array.from(new Set((Array.isArray(e)?e:[]).map(t=>String(t??"").trim()).filter(t=>t.length>0))),Ck=e=>e==="count"||e==="minutes"||e==="both",YA=e=>e==="work"||e==="note",GA=e=>e==="overdue"||e==="weighted",JA=e=>e==="allow_all"||e==="prefer_leaves",QA=e=>{const t={},n=t0(e.byTags),r=t0(e.byNodeTypes),i=KA(e.byWorkIds);return n.length>0&&(t.byTags=n),r.length>0&&(t.byNodeTypes=r),i.length>0&&(t.byWorkIds=i),t},Ro=e=>(e??[]).map(QA).filter(t=>Object.keys(t).length>0),XA=e=>{if(!Array.isArray(e))return[];const t=e.map(n=>Number(n)).filter(n=>Number.isFinite(n)).map(n=>Math.round(n)).filter(n=>n>=0&&n<=6);return Array.from(new Set(t)).sort((n,r)=>n-r)},ZA=e=>{const t={};return!e||typeof e!="object"?{...mn.defaultMinutesByNodeType}:(Object.entries(e).forEach(([n,r])=>{const i=n.trim().toLowerCase(),o=Number(r);i&&Number.isFinite(o)&&(t[i]=Math.max(.25,o))}),Object.keys(t).length>0?t:{...mn.defaultMinutesByNodeType})},eM=(e,t)=>{const n=String(e.id??"").trim()||Wt(),r=YA(e.type)?e.type:"work",i=typeof e.enabled=="boolean"?e.enabled:!0,o=String(e.name??"").trim()||(r==="note"?"Recap":"Grupo"),a=Number.isFinite(Number(e.order))?Number(e.order):t,u=XA(e.daysOfWeek),c=Ck(e.limitMode)?e.limitMode:"minutes",f=Number(e.maxItems),h=Number.isFinite(f)&&Math.round(f)>0?Math.round(f):void 0,p=Number(e.minutesBudget),v=Number.isFinite(p)&&p>0?Math.max(0,p):void 0,y=GA(e.strategy)?e.strategy:"overdue",w=JA(e.hierarchyRule)?e.hierarchyRule:"allow_all",S=Ro(e.include),k=Ro(e.exclude);return{id:n,name:o,enabled:i,order:a,type:r,daysOfWeek:u,limitMode:c,maxItems:h,minutesBudget:v,strategy:y,hierarchyRule:w,include:S,exclude:k}},tM=e=>{var f,h,p;const t=Math.max(0,Number((f=e.template)==null?void 0:f.focusMinutes)||0),n=Math.max(0,Number((h=e.template)==null?void 0:h.rouletteMinutes)||0),r=Math.max(0,Number((p=e.template)==null?void 0:p.recapMinutes)||0),i=Ro(e.focusSelectors),o=Ro(e.rouletteSelectors),a=i.length>0?i:[{byNodeTypes:["segment","form"]}],u=o.length>0?o:[{byNodeTypes:["technique"]},{byTags:["roulette"]}],c=[{id:"formas",name:"Formas",enabled:!0,order:1,type:"work",limitMode:"minutes",minutesBudget:t>0?t:18,strategy:"overdue",hierarchyRule:"prefer_leaves",include:a,exclude:[]},{id:"tecnicas",name:"Tcnicas",enabled:!0,order:2,type:"work",limitMode:"minutes",minutesBudget:n>0?n:10,strategy:"weighted",hierarchyRule:"allow_all",include:u,exclude:[]}];return r>0&&c.push({id:"recap",name:"Recap",enabled:!0,order:99,type:"note",limitMode:"minutes",minutesBudget:r}),c},Ju=e=>{var w,S,k;const t=e??mn,n=Ck(t.limitMode)?t.limitMode:mn.limitMode,r=Math.max(1,Math.round(Number(t.maxItems)||mn.maxItems)),i=Math.max(1,Number(t.minutesBudget)||mn.minutesBudget),o=Math.max(0,Number((w=t.template)==null?void 0:w.focusMinutes)||mn.template.focusMinutes),a=Math.max(0,Number((S=t.template)==null?void 0:S.rouletteMinutes)||mn.template.rouletteMinutes),u=Math.max(0,Number((k=t.template)==null?void 0:k.recapMinutes)||mn.template.recapMinutes),c=Math.max(0,o+a+u),f=ZA(t.defaultMinutesByNodeType),h=Ro(t.focusSelectors),p=Ro(t.rouletteSelectors),y=((t.groups??[]).length>0?t.groups??[]:tM(t)).map((_,C)=>eM(_,C+1)).sort((_,C)=>_.order-C.order).map((_,C)=>({..._,order:C+1}));return{...t,limitMode:n,maxItems:r,minutesBudget:i,template:{totalMinutes:c,focusMinutes:o,rouletteMinutes:a,recapMinutes:u},defaultMinutesByNodeType:f,focusSelectors:h,rouletteSelectors:p,groups:y}},Fn=e=>{if(!e)return null;const t=e.trim();return t.length>0?t:null},Qu=e=>Array.from(new Set((e??[]).map(t=>(t??"").trim().toLowerCase()).filter(t=>t.length>0))),br=e=>{if(!e)return;const t=e.trim();return t.length>0?t:void 0},jk=e=>e==="day_of_year"||e==="day_of_month"||e==="day_of_week",Nk=e=>{if(!e||typeof e!="object")return;const t=e,n=String(t.ebookId??"").trim(),r=String(t.indexUrl??"").trim(),i=String(t.mode??"").trim();if(!(!n||!r)&&!(i!=="daily_fixed"&&i!=="sequential"))return{ebookId:n,indexUrl:r,mode:i}},hp=e=>Array.from(new Set((e??[]).map(t=>(t??"").trim().toLowerCase()).filter(t=>t.length>0))),ji=e=>{var k,_,C;const t=bt(),n=Fn(e.parentWorkId??null),r=Fn(e.nextWorkId??null),i=Fn(e.variantOfWorkId??null),o=br(e.nodeType??void 0),a=Qu(e.tags),u=jk((k=e.schedule)==null?void 0:k.kind)?(_=e.schedule)==null?void 0:_.kind:void 0,c=(C=e.schedule)==null?void 0:C.number,f=typeof c=="number"&&Number.isFinite(c)?Math.trunc(c):void 0,h=u&&typeof f=="number"?{kind:u,number:f}:void 0,p=Nk(e.ebookRef),v=typeof e.orderHint=="number"&&Number.isFinite(e.orderHint)?e.orderHint:void 0,y=(e.collaborators??[]).map((j,I)=>({id:j.id??`${e.id}-collab-${I}`,email:(j.email??"").trim().toLowerCase(),role:j.role??"editor",userId:j.userId??null,createdAt:j.createdAt??t})),w=hp([...e.collaboratorEmails??[],...y.map(j=>j.email)]),S=Array.isArray(e.videoUrls)?e.videoUrls.map(j=>typeof j=="string"?j.trim():"").filter(Boolean):[];return{id:e.id,name:e.name??"Trabajo sin nombre",subtitle:br(e.subtitle),objectiveId:e.objectiveId??"",parentWorkId:n,nodeType:o,schedule:h,ebookRef:p,tags:a,orderHint:v,nextWorkId:r,variantOfWorkId:i,descriptionMarkdown:e.descriptionMarkdown??"",estimatedMinutes:e.estimatedMinutes??0,notes:br(e.notes),videoUrls:S,createdAt:e.createdAt??t,updatedAt:e.updatedAt??t,visibility:e.visibility??"private",ownerId:e.ownerId??"local-owner",ownerEmail:(e.ownerEmail??"").trim().toLowerCase(),collaborators:y,collaboratorEmails:w,canEdit:e.canEdit??!0,isOwner:e.isOwner??!0}},nM=(e,t,n)=>{var o;if(!n)return!1;if(n===t)return!0;const r=new Set;let i=n;for(;i;){if(i===t)return!0;if(r.has(i))break;r.add(i),i=((o=e.find(u=>u.id===i))==null?void 0:o.parentWorkId)??null}return!1},cn=(e,t)=>{if(!Ek)return t;try{const n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(n){return console.warn(`No se pudo cargar ${e} desde localStorage`,n),t}},Tk=e=>e==="present"||e==="absent"||e==="pending",Ik=e=>e==="present"||e==="absent",pp=e=>(e??[]).map(t=>{const n=Tk(t.status)?t.status:"pending",r=Ik(t.actualStatus)?t.actualStatus:void 0;return{assistantId:t.assistantId,status:n,actualStatus:r,notes:t.notes,actualNotes:t.actualNotes}}),rM=e=>{if(!e||typeof e!="object")return!1;const t=e,n=String(t.name??""),r=typeof t.code=="number"?t.code:Number(t.code);return n==="QuotaExceededError"||r===22||r===1014},iM=e=>e.map(t=>({id:t.id,name:t.name,subtitle:t.subtitle,objectiveId:t.objectiveId,parentWorkId:t.parentWorkId??null,descriptionMarkdown:"",estimatedMinutes:t.estimatedMinutes??0,notes:void 0,videoUrls:[],nodeType:t.nodeType,schedule:t.schedule,tags:t.tags??[],orderHint:t.orderHint,nextWorkId:t.nextWorkId??null,variantOfWorkId:t.variantOfWorkId??null,createdAt:t.createdAt,updatedAt:t.updatedAt,visibility:t.visibility??"private",ownerId:t.ownerId,ownerEmail:t.ownerEmail,collaborators:[],collaboratorEmails:[],canEdit:t.canEdit,isOwner:t.isOwner})),lt=e=>{if(!Ek)return;const t={objectives:cn(kt.objectives,[]),works:cn(kt.works,[]),sessions:cn(kt.sessions,[]),assistants:cn(kt.assistants,[]),plans:cn(kt.plans,[]),kungfuPrograms:cn(kt.kungfuPrograms,gs),kungfuCadence:cn(kt.kungfuCadence,Ni),kungfuTodayPlan:cn(kt.kungfuTodayPlan,mn),workTaxonomy:cn(kt.workTaxonomy,Ri)},n=mp({...t,...e}),r=(i,o)=>{try{return window.localStorage.setItem(i,JSON.stringify(o)),!0}catch(a){if(!rM(a))return console.warn(`No se pudo persistir ${i} en localStorage`,a),!1;if(i===kt.works)try{const u=iM(n.works);return window.localStorage.setItem(i,JSON.stringify(u)),console.warn("localStorage quota alcanzada: guardando catlogo en modo reducido (sin markdown)."),!0}catch(u){return console.warn("localStorage quota alcanzada: no se pudo persistir el catlogo.",u),!1}return console.warn(`localStorage quota alcanzada: omitiendo persistencia de ${i}.`),!1}};r(kt.objectives,n.objectives),r(kt.works,n.works),r(kt.sessions,n.sessions),r(kt.assistants,n.assistants),r(kt.plans,n.plans),r(kt.kungfuPrograms,n.kungfuPrograms),r(kt.kungfuCadence,n.kungfuCadence),r(kt.kungfuTodayPlan,n.kungfuTodayPlan),r(kt.workTaxonomy,n.workTaxonomy)},mp=e=>{const t=bt(),n=(e.works??[]).map(u=>{const c=u.parent_work_id;return ji({...u,id:u.id,parentWorkId:Fn(u.parentWorkId??c??null)})}),r=Gn(e.workTaxonomy??Ri,n),i=e.kungfuCadence??Ni,o=Ju(e.kungfuTodayPlan??mn),a=ds(e.plans,i,o,t);return{objectives:e.objectives??[],works:n,sessions:(e.sessions??[]).map(u=>({...u,planId:(u.planId??"").trim()||((u.kind??"class")==="personal"?Oi:ms),kind:u.kind??"class",startTime:u.startTime??cs,workItems:(u.workItems??[]).map(c=>({...c,focusLabel:c.focusLabel,completed:c.completed??!1})),attendance:pp(u.attendance)})),assistants:e.assistants??[],plans:a,kungfuPrograms:e.kungfuPrograms??gs,kungfuCadence:i,kungfuTodayPlan:o,workTaxonomy:r}},_e=PA((e,t)=>({ready:!1,objectives:[],works:[],worksLoading:!1,sessions:[],assistants:[],plans:_k(bt(),Ni,mn),kungfuPrograms:gs,kungfuCadence:Ni,kungfuTodayPlan:mn,workTaxonomy:Ri,hydrate:()=>{if(t().ready)return;const n=cn(kt.objectives,[]),r=cn(kt.works,[]).map(w=>{const S=w.parent_work_id;return ji({...w,id:w.id,parentWorkId:Fn(w.parentWorkId??S??null)})}),i=cn(kt.workTaxonomy,Ri),o=Gn(i,r),a=cn(kt.sessions,[]).map(w=>({...w,planId:(w.planId??"").trim()||((w.kind??"class")==="personal"?Oi:ms),kind:w.kind??"class",startTime:w.startTime??cs,workItems:(w.workItems??[]).map(S=>({...S,focusLabel:S.focusLabel,completed:S.completed??!1})),attendance:pp(w.attendance)})),u=cn(kt.assistants,[]),c=cn(kt.kungfuPrograms,gs),f=cn(kt.kungfuCadence,Ni),h=cn(kt.kungfuTodayPlan,mn),p=Ju(h),v=cn(kt.plans,[]),y=ds(v,f,p,bt());e({objectives:n,works:r,sessions:a,assistants:u,plans:y,kungfuPrograms:c,kungfuCadence:f,kungfuTodayPlan:p,workTaxonomy:o,ready:!0})},setCollections:n=>{e(r=>{const i=mp({objectives:n.objectives??r.objectives,works:n.works??r.works,sessions:n.sessions??r.sessions,assistants:n.assistants??r.assistants,plans:n.plans??r.plans,kungfuPrograms:n.kungfuPrograms??r.kungfuPrograms,kungfuCadence:n.kungfuCadence??r.kungfuCadence,kungfuTodayPlan:n.kungfuTodayPlan??r.kungfuTodayPlan,workTaxonomy:n.workTaxonomy??r.workTaxonomy}),o={...r,...i,ready:!0};return lt(i),o})},setWorks:n=>{const r=n.map(i=>ji(i));e(i=>{const o=Gn(i.workTaxonomy,r),a={...i,works:r,workTaxonomy:o};return lt({works:r}),a})},loadWorks:async n=>{e({worksLoading:!0});try{const i=(await FA(n)).map(p=>ji(p)),o=t().works,a=new Set(i.map(p=>p.id)),u=o.filter(p=>!a.has(p.id)&&(!p.ownerId||p.ownerId==="local-owner"||p.ownerId===n.actorId)),c=[];for(const p of u)try{const v=await e0({id:p.id,name:p.name,subtitle:p.subtitle,objectiveId:p.objectiveId,parentWorkId:p.parentWorkId??null,nodeType:p.nodeType,tags:p.tags,orderHint:p.orderHint,nextWorkId:p.nextWorkId??null,variantOfWorkId:p.variantOfWorkId??null,descriptionMarkdown:p.descriptionMarkdown,estimatedMinutes:p.estimatedMinutes,notes:p.notes,videoUrls:p.videoUrls,visibility:p.visibility??"private",collaboratorEmails:p.collaboratorEmails??[]},n),y=ji(v);c.push(y),a.add(y.id)}catch(v){console.error(`No se pudo migrar el trabajo legacy ${p.id}`,v)}const f=[...i];c.forEach(p=>{if(!a.has(p.id))a.add(p.id),f.push(p);else{const v=f.findIndex(y=>y.id===p.id);v>=0?f[v]=p:f.push(p)}});const h=f.map(p=>ji(p)).sort((p,v)=>p.name.localeCompare(v.name,"es",{sensitivity:"base"}));e(p=>{const v=Gn(p.workTaxonomy,h),y={...p,works:h,workTaxonomy:v};return lt({works:h}),y})}finally{e({worksLoading:!1})}},reset:()=>{e(n=>{const r=mp({objectives:[],works:[],sessions:[],assistants:[],kungfuPrograms:gs,kungfuCadence:Ni,kungfuTodayPlan:mn,workTaxonomy:Ri}),i={...n,...r,ready:!0,worksLoading:!1};return lt(i),i})},setKungfuPrograms:n=>{const r=Array.isArray(n)?n:gs;e(i=>{const o={...i,kungfuPrograms:r};return lt(o),o})},setKungfuCadence:n=>{const r=n??Ni;e(i=>{const o={...i,kungfuCadence:r};return lt(o),o})},setKungfuTodayPlan:n=>{const r=Ju(n??mn);e(i=>{const o={...i,kungfuTodayPlan:r};return lt(o),o})},setWorkTaxonomy:n=>{e(r=>{const i=Gn(n??Ri,r.works),o={...r,workTaxonomy:i};return lt(o),o})},addPlan:({name:n,kind:r})=>{const i=bt(),o={id:Wt(),name:n.trim()||(r==="class"?"Clases":"Personal"),kind:r,enabled:!0,cadence:r==="personal"?t().kungfuCadence:void 0,todayPlan:r==="personal"?t().kungfuTodayPlan:void 0,createdAt:i,updatedAt:i};return e(a=>{const u=ds([...a.plans,o],a.kungfuCadence,a.kungfuTodayPlan,i),c={...a,plans:u};return lt(c),c}),o},updatePlan:(n,r)=>{const i=bt();e(o=>{const a=ds(o.plans.map(c=>c.id===n?{...c,...r,updatedAt:i}:c),o.kungfuCadence,o.kungfuTodayPlan,i),u={...o,plans:a};return lt(u),u})},duplicatePlan:n=>{const r=t().plans.find(a=>a.id===n);if(!r)return;const i=bt(),o={...r,id:Wt(),name:`${r.name} (copia)`,createdAt:i,updatedAt:i};return e(a=>{const u=ds([...a.plans,o],a.kungfuCadence,a.kungfuTodayPlan,i),c={...a,plans:u};return lt(c),c}),o},deletePlan:n=>{const r=t();return n===ms||n===Oi||r.sessions.some(o=>(o.planId??"")===n)?!1:(e(o=>{const a=bt(),u=ds(o.plans.filter(f=>f.id!==n),o.kungfuCadence,o.kungfuTodayPlan,a),c={...o,plans:u};return lt(c),c}),!0)},upsertNodeType:n=>{const r=uh(n);if(!r)return null;const i=n.trim()||r;return e(o=>{const a=o.workTaxonomy.nodeTypes??[],u=a.some(h=>h.key===r)?a.map(h=>h.key===r?{...h,label:i}:h):[...a,{key:r,label:i}],c=Gn({...o.workTaxonomy,nodeTypes:u},o.works),f={...o,workTaxonomy:c};return lt(f),f}),r},removeNodeType:n=>{const r=(n??"").trim().toLowerCase();return!r||t().works.some(o=>(o.nodeType??"").trim().toLowerCase()===r)?!1:(e(o=>{const a=(o.workTaxonomy.nodeTypes??[]).filter(f=>f.key!==r),u=Gn({...o.workTaxonomy,nodeTypes:a},o.works),c={...o,workTaxonomy:u};return lt(c),c}),!0)},upsertTag:n=>{const r=uh(n);return r?(e(i=>{const o=i.workTaxonomy.tags??[],a=o.some(f=>f.name===r)?o:[...o,{name:r}],u=Gn({...i.workTaxonomy,tags:a},i.works),c={...i,workTaxonomy:u};return lt(c),c}),r):null},removeTag:n=>{const r=uh(n??"");return!r||t().works.some(o=>(o.tags??[]).includes(r))?!1:(e(o=>{const a=(o.workTaxonomy.tags??[]).filter(f=>f.name!==r),u=Gn({...o.workTaxonomy,tags:a},o.works),c={...o,workTaxonomy:u};return lt(c),c}),!0)},addObjective:n=>{const r={id:Wt(),name:n.name,colorHex:n.colorHex,descriptionMarkdown:n.descriptionMarkdown,createdAt:bt(),updatedAt:bt()};return e(i=>{const o={objectives:[...i.objectives,r]},a={...i,...o};return lt(a),a}),r},updateObjective:(n,r)=>{e(i=>{const o=i.objectives.map(u=>u.id===n?{...u,...r,updatedAt:bt()}:u),a={...i,objectives:o};return lt(a),a})},deleteObjective:n=>t().works.some(i=>i.objectiveId===n)?!1:(e(i=>{const o=i.objectives.filter(u=>u.id!==n),a={...i,objectives:o};return lt(a),a}),!0),addWork:async(n,r)=>{const i=t(),o=Fn(n.parentWorkId),a=o&&i.works.some(w=>w.id===o)?o:null,u=jk(n.scheduleKind)?n.scheduleKind:void 0,c=n.scheduleNumber,f=typeof c=="number"&&Number.isFinite(c)?Math.trunc(c):void 0,h=Nk(n.ebookRef),p={name:n.name,subtitle:br(n.subtitle),objectiveId:n.objectiveId,parentWorkId:a,nodeType:br(n.nodeType)??void 0,scheduleKind:u,scheduleNumber:u?f:void 0,ebookRef:h,tags:Qu(n.tags),orderHint:typeof n.orderHint=="number"&&Number.isFinite(n.orderHint)?n.orderHint:void 0,nextWorkId:Fn(n.nextWorkId??null),variantOfWorkId:Fn(n.variantOfWorkId??null),descriptionMarkdown:n.descriptionMarkdown,estimatedMinutes:n.estimatedMinutes,notes:br(n.notes),videoUrls:(n.videoUrls??[]).map(w=>w.trim()).filter(w=>w.length>0),visibility:n.visibility??"private",collaboratorEmails:hp(n.collaboratorEmails??[])},v=await e0(p,r),y=ji(v);return e(w=>{const S=[...w.works.filter(_=>_.id!==y.id),y],k=Gn(w.workTaxonomy,S);return lt({works:S,workTaxonomy:k}),{...w,works:S,workTaxonomy:k}}),y},updateWork:async(n,r,i)=>{const o=t(),a=o.works.find(p=>p.id===n);if(!a)throw new Error("Trabajo no encontrado");let u=a.parentWorkId??null;if(r.parentWorkId!==void 0){const p=Fn(r.parentWorkId);p&&(!o.works.some(v=>v.id===p)||nM(o.works,n,p))?u=null:u=p}const c={...r,subtitle:r.subtitle!==void 0?br(r.subtitle)??null:void 0,parentWorkId:u,nodeType:r.nodeType!==void 0?br(r.nodeType??void 0)??null:void 0,tags:r.tags?Qu(r.tags):void 0,orderHint:r.orderHint!==void 0?typeof r.orderHint=="number"&&Number.isFinite(r.orderHint)?r.orderHint:null:void 0,nextWorkId:r.nextWorkId!==void 0?Fn(r.nextWorkId??null):void 0,variantOfWorkId:r.variantOfWorkId!==void 0?Fn(r.variantOfWorkId??null):void 0,notes:r.notes!==void 0?br(r.notes)??null:void 0,videoUrls:r.videoUrls?r.videoUrls.map(p=>p.trim()).filter(p=>p.length>0):void 0,collaboratorEmails:r.collaboratorEmails?hp(r.collaboratorEmails):void 0},f=await BA(n,c,i),h=ji(f);return e(p=>{const v=p.works.map(w=>w.id===h.id?h:w),y=Gn(p.workTaxonomy,v);return lt({works:v,workTaxonomy:y}),{...p,works:v,workTaxonomy:y}}),h},deleteWork:async(n,r)=>t().sessions.some(a=>a.workItems.some(u=>u.workId===n))||t().works.some(a=>a.parentWorkId===n)?!1:(await zA(n),e(a=>{const u=a.works.filter(f=>f.id!==n),c=Gn(a.workTaxonomy,u);return lt({works:u,workTaxonomy:c}),{...a,works:u,workTaxonomy:c}}),!0),addSession:n=>{var o;const r=(n.planId??"").trim()||((n.kind??"class")==="personal"?Oi:ms),i={id:Wt(),planId:r,date:n.date,kind:n.kind??((o=t().plans.find(a=>a.id===r))==null?void 0:o.kind)??"class",title:n.title,description:n.description,notes:n.notes,notesByGroupId:n.notesByGroupId,workItems:[],attendance:[],startTime:n.startTime??cs,createdAt:bt(),updatedAt:bt()};return e(a=>{const u=[...a.sessions,i],c={...a,sessions:u};return lt(c),c}),i},duplicateSession:(n,r)=>{const i=t().sessions.find(u=>u.id===n);if(!i)return;const o=bt(),a={...i,id:Wt(),date:r,startTime:i.startTime??cs,createdAt:o,updatedAt:o,title:`${i.title} (copia)`};return a.workItems=i.workItems.slice().sort((u,c)=>u.order-c.order).map((u,c)=>({...u,id:Wt(),order:c,completed:!1})),a.attendance=i.attendance.map(u=>({assistantId:u.assistantId,status:"pending",notes:u.notes,actualStatus:void 0,actualNotes:void 0})),e(u=>{const c=[...u.sessions,a],f={...u,sessions:c};return lt(f),f}),a},updateSession:(n,r)=>{e(i=>{const o=i.sessions.map(u=>u.id===n?{...u,...r,updatedAt:bt()}:u),a={...i,sessions:o};return lt(a),a})},deleteSession:n=>{e(r=>{const i=r.sessions.filter(a=>a.id!==n),o={...r,sessions:i};return lt(o),o})},updateSessionWorkItems:(n,r)=>{e(i=>{const o=i.sessions.map(u=>u.id===n?{...u,workItems:r.map((c,f)=>({...c,order:f})),updatedAt:bt()}:u),a={...i,sessions:o};return lt(a),a})},addWorkToSession:(n,r)=>{const i=t().sessions.find(u=>u.id===n);if(!i)return;const o={id:Wt(),workId:r.workId,customDescriptionMarkdown:r.customDescriptionMarkdown,customDurationMinutes:r.customDurationMinutes,notes:r.notes,focusLabel:r.focusLabel,completed:!1,order:i.workItems.length},a={...i,workItems:[...i.workItems,o],updatedAt:bt()};return e(u=>{const c=u.sessions.map(h=>h.id===n?a:h),f={...u,sessions:c};return lt(f),f}),o},duplicateSessionWork:(n,r)=>{let i,o=!1;return e(a=>{const u=a.sessions.map(f=>{if(f.id!==n)return f;const h=f.workItems.findIndex(S=>S.id===r);if(h===-1)return f;o=!0;const v={...f.workItems[h],id:Wt(),completed:!1},y=[...f.workItems];y.splice(h+1,0,v);const w=y.map((S,k)=>{const _={...S,order:k};return S.id===v.id&&(i=_),_});return{...f,workItems:w,updatedAt:bt()}});if(!o)return a;const c={...a,sessions:u};return lt(c),c}),i},removeWorkFromSession:(n,r)=>{e(i=>{const o=i.sessions.map(u=>{if(u.id!==n)return u;const c=u.workItems.filter(f=>f.id!==r).map((f,h)=>({...f,order:h}));return{...u,workItems:c,updatedAt:bt()}}),a={...i,sessions:o};return lt(a),a})},toggleSessionWorkCompletion:(n,r,i)=>{e(o=>{const a=o.sessions.map(c=>c.id!==n?c:{...c,workItems:c.workItems.map(f=>f.id===r?{...f,completed:i}:f),updatedAt:bt()}),u={...o,sessions:a};return lt(u),u})},reorderSessionWork:(n,r,i)=>{e(o=>{const a=o.sessions.map(c=>{if(c.id!==n)return c;const f=[...c.workItems],[h]=f.splice(r,1);return f.splice(i,0,h),{...c,workItems:f.map((p,v)=>({...p,order:v})),updatedAt:bt()}}),u={...o,sessions:a};return lt(u),u})},updateSessionWorkDetails:(n,r,i)=>{e(o=>{const a=o.sessions.map(c=>c.id!==n?c:{...c,workItems:c.workItems.map(f=>f.id===r?{...f,...i}:f),updatedAt:bt()}),u={...o,sessions:a};return lt(u),u})},replaceSessionWork:(n,r,i)=>{t().works.some(o=>o.id===i)&&e(o=>{const a=o.sessions.map(c=>{if(c.id!==n)return c;const f=c.workItems.map(h=>h.id!==r?h:{...h,workId:i,customDescriptionMarkdown:void 0,customDurationMinutes:void 0,notes:void 0,focusLabel:void 0,completed:!1});return{...c,workItems:f,updatedAt:bt()}}),u={...o,sessions:a};return lt(u),u})},setAttendanceActualStatus:(n,r,i,o)=>{e(a=>{const u=a.sessions.map(f=>{if(f.id!==n)return f;const h=f.attendance.find(v=>v.assistantId===r);let p;if(h)p=f.attendance.map(v=>{if(v.assistantId!==r)return v;const y={...v,actualStatus:i};return typeof o<"u"&&(y.actualNotes=o),y});else{const v={assistantId:r,status:"pending",actualStatus:i};typeof o<"u"&&(v.actualNotes=o),p=[...f.attendance,v]}return{...f,attendance:p,updatedAt:bt()}}),c={...a,sessions:u};return lt(c),c})},setAttendanceStatus:(n,r,i,o)=>{e(a=>{const u=a.sessions.map(f=>{if(f.id!==n)return f;const h=f.attendance.find(v=>v.assistantId===r);let p;return h?p=f.attendance.map(v=>v.assistantId===r?{...v,status:i,notes:o}:v):p=[...f.attendance,{assistantId:r,status:i,notes:o}],{...f,attendance:p,updatedAt:bt()}}),c={...a,sessions:u};return lt(c),c})},addAssistant:n=>{const r={id:Wt(),name:n.name,notes:n.notes,active:n.active??!0,createdAt:bt(),updatedAt:bt()};return e(i=>{const o=[...i.assistants,r],a={...i,assistants:o};return lt(a),a}),r},updateAssistant:(n,r)=>{e(i=>{const o=i.assistants.map(u=>u.id===n?{...u,...r,updatedAt:bt()}:u),a={...i,assistants:o};return lt(a),a})},deleteAssistant:n=>{e(r=>{const i=r.assistants.filter(u=>u.id!==n),o=r.sessions.map(u=>({...u,attendance:u.attendance.filter(c=>c.assistantId!==n)})),a={...r,assistants:i,sessions:o};return lt(a),a})},importBackup:n=>{if((n.version??1)!==1)throw new Error("Versin de backup no soportada");const i=bt(),o=(n.objetivos??[]).map(C=>({...C,createdAt:C.createdAt??i,updatedAt:C.updatedAt??i})),a=(n.trabajos??[]).map(C=>{const j=C.parent_work_id,I=C.node_type,D=C.tags,A=C.order_hint,U=C.next_work_id,te=C.variant_of_work_id;return{...C,subtitle:br(C.subtitle),parentWorkId:Fn(C.parentWorkId??j??null),nodeType:br(C.nodeType??I??void 0),tags:Qu(Array.isArray(C.tags)?C.tags:Array.isArray(D)?D:[]),orderHint:typeof C.orderHint=="number"?C.orderHint:typeof A=="number"?A:void 0,nextWorkId:Fn(C.nextWorkId??U??null),variantOfWorkId:Fn(C.variantOfWorkId??te??null),createdAt:C.createdAt??i,updatedAt:C.updatedAt??i,videoUrls:C.videoUrls??[]}}),u=(n.asistentes??[]).map(C=>({...C,createdAt:C.createdAt??i,updatedAt:C.updatedAt??i,active:C.active??!0})),c=n.kungfuPrograms??gs,f=n.kungfuCadence??Ni,h=n.kungfuTodayPlan??mn,p=Gn(n.workTaxonomy??Ri,a),v=ds(n.plans,f,Ju(h),i),y=new Map;(n.sesiones??[]).forEach(C=>{const j=C.id??Wt(),I=C.notesByGroupId??void 0,D={id:j,planId:(C.planId??"").trim()||((C.kind??"class")==="personal"?Oi:ms),date:C.date??We().format("YYYY-MM-DD"),kind:C.kind??"class",title:C.title??"Sesin importada",description:C.description,notes:C.notes,notesByGroupId:I??void 0,workItems:(C.workItems??[]).map((A,U)=>({id:A.id??Wt(),workId:A.workId,order:A.order??U,customDescriptionMarkdown:A.customDescriptionMarkdown,customDurationMinutes:A.customDurationMinutes,notes:A.notes,focusLabel:A.focusLabel,completed:A.completed??!1,result:A.result,effort:A.effort})),attendance:pp(C.attendance),startTime:C.startTime??cs,createdAt:C.createdAt??i,updatedAt:C.updatedAt??i};D.workItems=D.workItems.sort((A,U)=>A.order-U.order).map((A,U)=>({...A,order:U})),y.set(j,D)}),(n.sesiones_trabajos??[]).forEach(C=>{const j=C.session_id;if(!j)return;y.has(j)||y.set(j,{id:j,planId:ms,date:C.fecha?We(C.fecha).format("YYYY-MM-DD"):We().format("YYYY-MM-DD"),kind:"class",title:C.titulo??"Sesin importada",description:C.descripcion,notes:C.notasSesion??C.notas,workItems:[],attendance:[],startTime:cs,createdAt:i,updatedAt:i});const I=y.get(j);I.workItems.push({id:C.id??Wt(),workId:C.trabajo_id,order:C.orden??I.workItems.length,customDescriptionMarkdown:C.descripcionPersonalizada,customDurationMinutes:C.duracionPersonalizada,notes:C.notas,focusLabel:C.focusLabel??C.foco,completed:C.completed??!1,result:C.result??C.resultado,effort:C.effort??C.esfuerzo})}),y.forEach(C=>{C.workItems=C.workItems.sort((j,I)=>j.order-I.order).map((j,I)=>({...j,order:I})),C.startTime=C.startTime??cs});const w=new Map,S=C=>Tk(C)?C:void 0,k=C=>Ik(C)?C:void 0;(n.sesiones_asistencias??[]).forEach(C=>{const j=C.session_id;if(!j)return;const I=C.assistantId??C.asistente_id;if(!I)return;const D=S(C.status??C.estado)??"pending",A=k(C.actualStatus??C.estado_real),U={assistantId:I,status:D,notes:C.notes??C.notas,actualStatus:A,actualNotes:C.actualNotes??C.notas_reales},te=w.get(j)??[];te.push(U),w.set(j,te)}),w.forEach((C,j)=>{const I=y.get(j);I&&(I.attendance=C)});const _=Array.from(y.values());e({objectives:o,works:a,sessions:_,assistants:u,plans:v,kungfuPrograms:c,kungfuCadence:f,kungfuTodayPlan:h,workTaxonomy:p,ready:!0}),lt({objectives:o,works:a,sessions:_,assistants:u,plans:v,kungfuPrograms:c,kungfuCadence:f,kungfuTodayPlan:h,workTaxonomy:p})},exportBackup:()=>{const n=t(),r=n.sessions.flatMap(u=>u.workItems.map(c=>({id:c.id,session_id:u.id,trabajo_id:c.workId,orden:c.order,descripcionPersonalizada:c.customDescriptionMarkdown,duracionPersonalizada:c.customDurationMinutes,notas:c.notes,foco:c.focusLabel,focusLabel:c.focusLabel,completed:c.completed??!1,result:c.result,effort:c.effort}))),i=n.sessions.flatMap(u=>u.attendance.map(c=>({session_id:u.id,assistantId:c.assistantId,estado:c.status,notas:c.notes,...c.actualStatus?{actualStatus:c.actualStatus,estado_real:c.actualStatus}:{},...c.actualNotes?{actualNotes:c.actualNotes,notas_reales:c.actualNotes}:{}}))),o=n.sessions.map(u=>({id:u.id,planId:u.planId,date:u.date,kind:u.kind,title:u.title,description:u.description,notes:u.notes,notesByGroupId:u.notesByGroupId,startTime:u.startTime,createdAt:u.createdAt,updatedAt:u.updatedAt}));return{version:1,usuarios:[],objetivos:n.objectives,trabajos:n.works,sesiones:o,sesiones_trabajos:r,asistentes:n.assistants,sesiones_asistencias:i,plans:n.plans,kungfuPrograms:n.kungfuPrograms,kungfuCadence:n.kungfuCadence,kungfuTodayPlan:n.kungfuTodayPlan,workTaxonomy:n.workTaxonomy}}})),n0=1,sM=[{id:"default",name:"Kung Fu  activo",enabled:!0,include:[{byTags:["kungfu"]}],exclude:[]}],oM={targetsDays:{work:7,technique:5,segment:8,form:10,drill:7},overrides:[]},aM={limitMode:"count",maxItems:12,minutesBudget:30,template:{totalMinutes:30,focusMinutes:18,rouletteMinutes:10,recapMinutes:2},defaultMinutesByNodeType:{work:3,technique:1.5,segment:6,form:15,drill:4,reading:5,link:2},focusSelectors:[],rouletteSelectors:[],groups:[{id:"formas",name:"Formas",enabled:!0,order:1,type:"work",limitMode:"minutes",minutesBudget:18,strategy:"overdue",hierarchyRule:"prefer_leaves",include:[{byNodeTypes:["segment","form"]}],exclude:[]},{id:"tecnicas",name:"Tcnicas",enabled:!0,order:2,type:"work",limitMode:"minutes",minutesBudget:10,strategy:"weighted",hierarchyRule:"allow_all",include:[{byNodeTypes:["technique"]},{byTags:["roulette"]}],exclude:[]},{id:"recap",name:"Recap",enabled:!0,order:99,type:"note",limitMode:"minutes",minutesBudget:2}]},lM={nodeTypes:[{key:"form",label:"Form"},{key:"segment",label:"Segment"},{key:"application",label:"Application"},{key:"technique",label:"Technique"},{key:"drill",label:"Drill"},{key:"reading",label:"Reading"},{key:"ebook",label:"Ebook"},{key:"work",label:"Work"},{key:"link",label:"Link"},{key:"style",label:"Style"}],tags:[]},$u=e=>({objectives:e.objectives,works:[],sessions:e.sessions,assistants:e.assistants,plans:e.plans,kungfuPrograms:e.kungfuPrograms,kungfuCadence:e.kungfuCadence,kungfuTodayPlan:e.kungfuTodayPlan,workTaxonomy:e.workTaxonomy}),uM=e=>({objectives:e.objectives??[],works:[],sessions:(e.sessions??[]).map(t=>({...t,planId:(t.planId??"").trim()||void 0,kind:t.kind??"class",workItems:t.workItems??[],attendance:t.attendance??[]})),assistants:e.assistants??[],plans:e.plans??[],kungfuPrograms:e.kungfuPrograms??sM,kungfuCadence:e.kungfuCadence??oM,kungfuTodayPlan:e.kungfuTodayPlan??aM,workTaxonomy:e.workTaxonomy??lM}),cM=(e,t)=>e.objectives!==t.objectives||e.sessions!==t.sessions||e.assistants!==t.assistants||e.plans!==t.plans||e.kungfuPrograms!==t.kungfuPrograms||e.kungfuCadence!==t.kungfuCadence||e.kungfuTodayPlan!==t.kungfuTodayPlan||e.workTaxonomy!==t.workTaxonomy;function dM(){const{user:e}=Ts(),t=_e(f=>f.setCollections),n=_e(f=>f.reset),r=_e(f=>f.ready),i=b.useRef(!1),o=b.useRef(null),a=b.useRef(null),u=b.useRef(null),c=b.useRef($u(_e.getState()));b.useEffect(()=>()=>{o.current&&(window.clearTimeout(o.current),o.current=null)},[]),b.useEffect(()=>{e||(n(),u.current=null,a.current=null,i.current=!1,c.current=$u(_e.getState()),o.current&&(window.clearTimeout(o.current),o.current=null))},[e,n]),b.useEffect(()=>{if(!e)return;let f=!0;(async()=>{const{data:v,error:y}=await Jt.from("planner_states").select("data, updated_at").eq("user_id",e.id).maybeSingle();if(!f)return;if(y&&y.code!=="PGRST116"){console.error("No se pudo cargar el estado remoto",y);return}const w=v;if(w!=null&&w.data){const S=uM(w.data??{});i.current=!0,u.current=w.updated_at,c.current=S,t(S)}else if(r){const S=$u(_e.getState());a.current=null;const{error:k,data:_}=await Jt.from("planner_states").upsert({user_id:e.id,data:{version:n0,...S}},{onConflict:"user_id"}).select("updated_at").maybeSingle(),C=_;k?console.error("No se pudo inicializar el estado remoto",k):C&&(u.current=C.updated_at)}})();const p=_e.subscribe(v=>{if(!f)return;const y=$u(v);if(i.current){i.current=!1,c.current=y,a.current=null;return}const w=c.current;cM(y,w)&&(c.current=y,a.current=y,o.current&&window.clearTimeout(o.current),o.current=window.setTimeout(()=>{if(!a.current)return;const S=a.current;a.current=null,(async()=>{const{error:k,data:_}=await Jt.from("planner_states").upsert({user_id:e.id,data:{version:n0,...S}},{onConflict:"user_id"}).select("updated_at").maybeSingle(),C=_;k?console.error("No se pudo guardar el estado remoto",k):C&&(u.current=C.updated_at)})()},600))});return()=>{f=!1,p(),o.current&&(window.clearTimeout(o.current),o.current=null)}},[e,r,t])}function fM(){const{user:e}=Ts(),t=_e(r=>r.loadWorks),n=_e(r=>r.setWorks);b.useEffect(()=>{if(!e){n([]);return}const r={actorId:e.id,actorEmail:e.email??""},i=async()=>{try{await t(r)}catch(a){console.error("No se pudieron sincronizar los trabajos colaborativos",a)}};i();const o=Jt.channel("works-collaboration").on("postgres_changes",{event:"*",schema:"public",table:"works"},()=>{i()}).on("postgres_changes",{event:"*",schema:"public",table:"work_collaborators"},()=>{i()}).subscribe();return()=>{Jt.removeChannel(o)}},[e,t,n])}var Xu={exports:{}},hM=Xu.exports,r0;function pM(){return r0||(r0=1,(function(e,t){(function(n,r){e.exports=r(wk())})(hM,(function(n){function r(a){return a&&typeof a=="object"&&"default"in a?a:{default:a}}var i=r(n),o={name:"es",monthsShort:"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),weekStart:1,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},ordinal:function(a){return a+""}};return i.default.locale(o,null,!0),o}))})(Xu)),Xu.exports}pM();function Bi({objective:e,size:t="md"}){if(!e)return null;const n=t==="sm"?"text-xs px-2 py-1":"text-sm px-3 py-1.5";return m.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full font-medium text-slate-950 shadow shadow-black/30 ${n}`,style:{backgroundColor:e.colorHex},children:[m.jsx("span",{className:"h-2.5 w-2.5 rounded-full border border-black/20 bg-white/70"}),e.name]})}function mM(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const gM=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,yM=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,vM={};function i0(e,t){return(vM.jsx?yM:gM).test(e)}const xM=/[ \t\n\f\r]/g;function bM(e){return typeof e=="object"?e.type==="text"?s0(e.value):!1:s0(e)}function s0(e){return e.replace(xM,"")===""}class gl{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}gl.prototype.normal={};gl.prototype.property={};gl.prototype.space=void 0;function Pk(e,t){const n={},r={};for(const i of e)Object.assign(n,i.property),Object.assign(r,i.normal);return new gl(n,r,t)}function gp(e){return e.toLowerCase()}class zn{constructor(t,n){this.attribute=n,this.property=t}}zn.prototype.attribute="";zn.prototype.booleanish=!1;zn.prototype.boolean=!1;zn.prototype.commaOrSpaceSeparated=!1;zn.prototype.commaSeparated=!1;zn.prototype.defined=!1;zn.prototype.mustUseProperty=!1;zn.prototype.number=!1;zn.prototype.overloadedBoolean=!1;zn.prototype.property="";zn.prototype.spaceSeparated=!1;zn.prototype.space=void 0;let wM=0;const at=Ps(),qt=Ps(),yp=Ps(),ke=Ps(),Nt=Ps(),Co=Ps(),Jn=Ps();function Ps(){return 2**++wM}const vp=Object.freeze(Object.defineProperty({__proto__:null,boolean:at,booleanish:qt,commaOrSpaceSeparated:Jn,commaSeparated:Co,number:ke,overloadedBoolean:yp,spaceSeparated:Nt},Symbol.toStringTag,{value:"Module"})),ch=Object.keys(vp);class fm extends zn{constructor(t,n,r,i){let o=-1;if(super(t,n),o0(this,"space",i),typeof r=="number")for(;++o<ch.length;){const a=ch[o];o0(this,ch[o],(r&vp[a])===vp[a])}}}fm.prototype.defined=!0;function o0(e,t,n){n&&(e[t]=n)}function zo(e){const t={},n={};for(const[r,i]of Object.entries(e.properties)){const o=new fm(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(o.mustUseProperty=!0),t[r]=o,n[gp(r)]=r,n[gp(o.attribute)]=r}return new gl(t,n,e.space)}const Rk=zo({properties:{ariaActiveDescendant:null,ariaAtomic:qt,ariaAutoComplete:null,ariaBusy:qt,ariaChecked:qt,ariaColCount:ke,ariaColIndex:ke,ariaColSpan:ke,ariaControls:Nt,ariaCurrent:null,ariaDescribedBy:Nt,ariaDetails:null,ariaDisabled:qt,ariaDropEffect:Nt,ariaErrorMessage:null,ariaExpanded:qt,ariaFlowTo:Nt,ariaGrabbed:qt,ariaHasPopup:null,ariaHidden:qt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Nt,ariaLevel:ke,ariaLive:null,ariaModal:qt,ariaMultiLine:qt,ariaMultiSelectable:qt,ariaOrientation:null,ariaOwns:Nt,ariaPlaceholder:null,ariaPosInSet:ke,ariaPressed:qt,ariaReadOnly:qt,ariaRelevant:null,ariaRequired:qt,ariaRoleDescription:Nt,ariaRowCount:ke,ariaRowIndex:ke,ariaRowSpan:ke,ariaSelected:qt,ariaSetSize:ke,ariaSort:null,ariaValueMax:ke,ariaValueMin:ke,ariaValueNow:ke,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function Ak(e,t){return t in e?e[t]:t}function Mk(e,t){return Ak(e,t.toLowerCase())}const kM=zo({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Co,acceptCharset:Nt,accessKey:Nt,action:null,allow:null,allowFullScreen:at,allowPaymentRequest:at,allowUserMedia:at,alt:null,as:null,async:at,autoCapitalize:null,autoComplete:Nt,autoFocus:at,autoPlay:at,blocking:Nt,capture:null,charSet:null,checked:at,cite:null,className:Nt,cols:ke,colSpan:null,content:null,contentEditable:qt,controls:at,controlsList:Nt,coords:ke|Co,crossOrigin:null,data:null,dateTime:null,decoding:null,default:at,defer:at,dir:null,dirName:null,disabled:at,download:yp,draggable:qt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:at,formTarget:null,headers:Nt,height:ke,hidden:yp,high:ke,href:null,hrefLang:null,htmlFor:Nt,httpEquiv:Nt,id:null,imageSizes:null,imageSrcSet:null,inert:at,inputMode:null,integrity:null,is:null,isMap:at,itemId:null,itemProp:Nt,itemRef:Nt,itemScope:at,itemType:Nt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:at,low:ke,manifest:null,max:null,maxLength:ke,media:null,method:null,min:null,minLength:ke,multiple:at,muted:at,name:null,nonce:null,noModule:at,noValidate:at,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:at,optimum:ke,pattern:null,ping:Nt,placeholder:null,playsInline:at,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:at,referrerPolicy:null,rel:Nt,required:at,reversed:at,rows:ke,rowSpan:ke,sandbox:Nt,scope:null,scoped:at,seamless:at,selected:at,shadowRootClonable:at,shadowRootDelegatesFocus:at,shadowRootMode:null,shape:null,size:ke,sizes:null,slot:null,span:ke,spellCheck:qt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ke,step:null,style:null,tabIndex:ke,target:null,title:null,translate:null,type:null,typeMustMatch:at,useMap:null,value:qt,width:ke,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Nt,axis:null,background:null,bgColor:null,border:ke,borderColor:null,bottomMargin:ke,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:at,declare:at,event:null,face:null,frame:null,frameBorder:null,hSpace:ke,leftMargin:ke,link:null,longDesc:null,lowSrc:null,marginHeight:ke,marginWidth:ke,noResize:at,noHref:at,noShade:at,noWrap:at,object:null,profile:null,prompt:null,rev:null,rightMargin:ke,rules:null,scheme:null,scrolling:qt,standby:null,summary:null,text:null,topMargin:ke,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ke,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:at,disableRemotePlayback:at,prefix:null,property:null,results:ke,security:null,unselectable:null},space:"html",transform:Mk}),SM=zo({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Jn,accentHeight:ke,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ke,amplitude:ke,arabicForm:null,ascent:ke,attributeName:null,attributeType:null,azimuth:ke,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ke,by:null,calcMode:null,capHeight:ke,className:Nt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ke,diffuseConstant:ke,direction:null,display:null,dur:null,divisor:ke,dominantBaseline:null,download:at,dx:null,dy:null,edgeMode:null,editable:null,elevation:ke,enableBackground:null,end:null,event:null,exponent:ke,externalResourcesRequired:null,fill:null,fillOpacity:ke,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Co,g2:Co,glyphName:Co,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ke,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ke,horizOriginX:ke,horizOriginY:ke,id:null,ideographic:ke,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ke,k:ke,k1:ke,k2:ke,k3:ke,k4:ke,kernelMatrix:Jn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ke,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ke,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ke,overlineThickness:ke,paintOrder:null,panose1:null,path:null,pathLength:ke,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Nt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ke,pointsAtY:ke,pointsAtZ:ke,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Jn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Jn,rev:Jn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Jn,requiredFeatures:Jn,requiredFonts:Jn,requiredFormats:Jn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ke,specularExponent:ke,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ke,strikethroughThickness:ke,string:null,stroke:null,strokeDashArray:Jn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ke,strokeOpacity:ke,strokeWidth:null,style:null,surfaceScale:ke,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Jn,tabIndex:ke,tableValues:null,target:null,targetX:ke,targetY:ke,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Jn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ke,underlineThickness:ke,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ke,values:null,vAlphabetic:ke,vMathematical:ke,vectorEffect:null,vHanging:ke,vIdeographic:ke,version:null,vertAdvY:ke,vertOriginX:ke,vertOriginY:ke,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ke,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Ak}),Ok=zo({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),Dk=zo({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Mk}),Lk=zo({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),EM={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},_M=/[A-Z]/g,a0=/-[a-z]/g,CM=/^data[-\w.:]+$/i;function jM(e,t){const n=gp(t);let r=t,i=zn;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&CM.test(t)){if(t.charAt(4)==="-"){const o=t.slice(5).replace(a0,TM);r="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=t.slice(4);if(!a0.test(o)){let a=o.replace(_M,NM);a.charAt(0)!=="-"&&(a="-"+a),t="data"+a}}i=fm}return new i(r,t)}function NM(e){return"-"+e.toLowerCase()}function TM(e){return e.charAt(1).toUpperCase()}const IM=Pk([Rk,kM,Ok,Dk,Lk],"html"),hm=Pk([Rk,SM,Ok,Dk,Lk],"svg");function PM(e){return e.join(" ").trim()}var fo={},dh,l0;function RM(){if(l0)return dh;l0=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,a=/^[;\s]*/,u=/^\s+|\s+$/g,c=`
`,f="/",h="*",p="",v="comment",y="declaration";dh=function(S,k){if(typeof S!="string")throw new TypeError("First argument must be a string");if(!S)return[];k=k||{};var _=1,C=1;function j(H){var Y=H.match(t);Y&&(_+=Y.length);var K=H.lastIndexOf(c);C=~K?H.length-K:C+H.length}function I(){var H={line:_,column:C};return function(Y){return Y.position=new D(H),te(),Y}}function D(H){this.start=H,this.end={line:_,column:C},this.source=k.source}D.prototype.content=S;function A(H){var Y=new Error(k.source+":"+_+":"+C+": "+H);if(Y.reason=H,Y.filename=k.source,Y.line=_,Y.column=C,Y.source=S,!k.silent)throw Y}function U(H){var Y=H.exec(S);if(Y){var K=Y[0];return j(K),S=S.slice(K.length),Y}}function te(){U(n)}function z(H){var Y;for(H=H||[];Y=M();)Y!==!1&&H.push(Y);return H}function M(){var H=I();if(!(f!=S.charAt(0)||h!=S.charAt(1))){for(var Y=2;p!=S.charAt(Y)&&(h!=S.charAt(Y)||f!=S.charAt(Y+1));)++Y;if(Y+=2,p===S.charAt(Y-1))return A("End of comment missing");var K=S.slice(2,Y-2);return C+=2,j(K),S=S.slice(Y),C+=2,H({type:v,comment:K})}}function $(){var H=I(),Y=U(r);if(Y){if(M(),!U(i))return A("property missing ':'");var K=U(o),se=H({type:y,property:w(Y[0].replace(e,p)),value:K?w(K[0].replace(e,p)):p});return U(a),se}}function ne(){var H=[];z(H);for(var Y;Y=$();)Y!==!1&&(H.push(Y),z(H));return H}return te(),ne()};function w(S){return S?S.replace(u,p):p}return dh}var u0;function AM(){if(u0)return fo;u0=1;var e=fo&&fo.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(fo,"__esModule",{value:!0}),fo.default=n;var t=e(RM());function n(r,i){var o=null;if(!r||typeof r!="string")return o;var a=(0,t.default)(r),u=typeof i=="function";return a.forEach(function(c){if(c.type==="declaration"){var f=c.property,h=c.value;u?i(f,h,c):h&&(o=o||{},o[f]=h)}}),o}return fo}var ja={},c0;function MM(){if(c0)return ja;c0=1,Object.defineProperty(ja,"__esModule",{value:!0}),ja.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,o=function(f){return!f||n.test(f)||e.test(f)},a=function(f,h){return h.toUpperCase()},u=function(f,h){return"".concat(h,"-")},c=function(f,h){return h===void 0&&(h={}),o(f)?f:(f=f.toLowerCase(),h.reactCompat?f=f.replace(i,u):f=f.replace(r,u),f.replace(t,a))};return ja.camelCase=c,ja}var Na,d0;function OM(){if(d0)return Na;d0=1;var e=Na&&Na.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},t=e(AM()),n=MM();function r(i,o){var a={};return!i||typeof i!="string"||(0,t.default)(i,function(u,c){u&&c&&(a[(0,n.camelCase)(u,o)]=c)}),a}return r.default=r,Na=r,Na}var DM=OM();const LM=Mo(DM),$k=Fk("end"),pm=Fk("start");function Fk(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function $M(e){const t=pm(e),n=$k(e);if(t&&n)return{start:t,end:n}}function Wa(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?f0(e.position):"start"in e||"end"in e?f0(e):"line"in e||"column"in e?xp(e):""}function xp(e){return h0(e&&e.line)+":"+h0(e&&e.column)}function f0(e){return xp(e&&e.start)+"-"+xp(e&&e.end)}function h0(e){return e&&typeof e=="number"?e:1}class En extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",o={},a=!1;if(n&&("line"in n&&"column"in n?o={place:n}:"start"in n&&"end"in n?o={place:n}:"type"in n?o={ancestors:[n],place:n.position}:o={...n}),typeof t=="string"?i=t:!o.cause&&t&&(a=!0,i=t.message,o.cause=t),!o.ruleId&&!o.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?o.ruleId=r:(o.source=r.slice(0,c),o.ruleId=r.slice(c+1))}if(!o.place&&o.ancestors&&o.ancestors){const c=o.ancestors[o.ancestors.length-1];c&&(o.place=c.position)}const u=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=u?u.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=u?u.line:void 0,this.name=Wa(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=a&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}En.prototype.file="";En.prototype.name="";En.prototype.reason="";En.prototype.message="";En.prototype.stack="";En.prototype.column=void 0;En.prototype.line=void 0;En.prototype.ancestors=void 0;En.prototype.cause=void 0;En.prototype.fatal=void 0;En.prototype.place=void 0;En.prototype.ruleId=void 0;En.prototype.source=void 0;const mm={}.hasOwnProperty,FM=new Map,BM=/[A-Z]/g,zM=new Set(["table","tbody","thead","tfoot","tr"]),UM=new Set(["td","th"]),Bk="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function WM(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=QM(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=JM(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?hm:IM,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},o=zk(i,e,void 0);return o&&typeof o!="string"?o:i.create(e,i.Fragment,{children:o||void 0},void 0)}function zk(e,t,n){if(t.type==="element")return HM(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return VM(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return KM(e,t,n);if(t.type==="mdxjsEsm")return qM(e,t);if(t.type==="root")return YM(e,t,n);if(t.type==="text")return GM(e,t)}function HM(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=hm,e.schema=i),e.ancestors.push(t);const o=Wk(e,t.tagName,!1),a=XM(e,t);let u=ym(e,t);return zM.has(t.tagName)&&(u=u.filter(function(c){return typeof c=="string"?!bM(c):!0})),Uk(e,a,o,t),gm(a,u),e.ancestors.pop(),e.schema=r,e.create(t,o,a,n)}function VM(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}il(e,t.position)}function qM(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);il(e,t.position)}function KM(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=hm,e.schema=i),e.ancestors.push(t);const o=t.name===null?e.Fragment:Wk(e,t.name,!0),a=ZM(e,t),u=ym(e,t);return Uk(e,a,o,t),gm(a,u),e.ancestors.pop(),e.schema=r,e.create(t,o,a,n)}function YM(e,t,n){const r={};return gm(r,ym(e,t)),e.create(t,e.Fragment,r,n)}function GM(e,t){return t.value}function Uk(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function gm(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function JM(e,t,n){return r;function r(i,o,a,u){const f=Array.isArray(a.children)?n:t;return u?f(o,a,u):f(o,a)}}function QM(e,t){return n;function n(r,i,o,a){const u=Array.isArray(o.children),c=pm(r);return t(i,o,a,u,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function XM(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&mm.call(t.properties,i)){const o=eO(e,i,t.properties[i]);if(o){const[a,u]=o;e.tableCellAlignToStyle&&a==="align"&&typeof u=="string"&&UM.has(t.tagName)?r=u:n[a]=u}}if(r){const o=n.style||(n.style={});o[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function ZM(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const o=r.data.estree.body[0];o.type;const a=o.expression;a.type;const u=a.properties[0];u.type,Object.assign(n,e.evaluater.evaluateExpression(u.argument))}else il(e,t.position);else{const i=r.name;let o;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const u=r.value.data.estree.body[0];u.type,o=e.evaluater.evaluateExpression(u.expression)}else il(e,t.position);else o=r.value===null?!0:r.value;n[i]=o}return n}function ym(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:FM;for(;++r<t.children.length;){const o=t.children[r];let a;if(e.passKeys){const c=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(c){const f=i.get(c)||0;a=c+"-"+f,i.set(c,f+1)}}const u=zk(e,o,a);u!==void 0&&n.push(u)}return n}function eO(e,t,n){const r=jM(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?mM(n):PM(n)),r.property==="style"){let i=typeof n=="object"?n:tO(e,String(n));return e.stylePropertyNameCase==="css"&&(i=nO(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?EM[r.property]||r.property:r.attribute,n]}}function tO(e,t){try{return LM(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,i=new En("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=Bk+"#cannot-parse-style-attribute",i}}function Wk(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let o=-1,a;for(;++o<i.length;){const u=i0(i[o])?{type:"Identifier",name:i[o]}:{type:"Literal",value:i[o]};a=a?{type:"MemberExpression",object:a,property:u,computed:!!(o&&u.type==="Literal"),optional:!1}:u}r=a}else r=i0(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return mm.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);il(e)}function il(e,t){const n=new En("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Bk+"#cannot-handle-mdx-estrees-without-createevaluater",n}function nO(e){const t={};let n;for(n in e)mm.call(e,n)&&(t[rO(n)]=e[n]);return t}function rO(e){let t=e.replace(BM,iO);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function iO(e){return"-"+e.toLowerCase()}const fh={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},sO={};function vm(e,t){const n=sO,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Hk(e,r,i)}function Hk(e,t,n){if(oO(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return p0(e.children,t,n)}return Array.isArray(e)?p0(e,t,n):""}function p0(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=Hk(e[i],t,n);return r.join("")}function oO(e){return!!(e&&typeof e=="object")}const m0=document.createElement("i");function xm(e){const t="&"+e+";";m0.innerHTML=t;const n=m0.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function er(e,t,n,r){const i=e.length;let o=0,a;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)a=Array.from(r),a.unshift(t,n),e.splice(...a);else for(n&&e.splice(t,n);o<r.length;)a=r.slice(o,o+1e4),a.unshift(t,0),e.splice(...a),o+=1e4,t+=1e4}function cr(e,t){return e.length>0?(er(e,e.length,0,t),e):t}const g0={}.hasOwnProperty;function Vk(e){const t={};let n=-1;for(;++n<e.length;)aO(t,e[n]);return t}function aO(e,t){let n;for(n in t){const i=(g0.call(e,n)?e[n]:void 0)||(e[n]={}),o=t[n];let a;if(o)for(a in o){g0.call(i,a)||(i[a]=[]);const u=o[a];lO(i[a],Array.isArray(u)?u:u?[u]:[])}}}function lO(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);er(e,0,0,r)}function qk(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Sr(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const jn=Wi(/[A-Za-z]/),Sn=Wi(/[\dA-Za-z]/),uO=Wi(/[#-'*+\--9=?A-Z^-~]/);function gc(e){return e!==null&&(e<32||e===127)}const bp=Wi(/\d/),cO=Wi(/[\dA-Fa-f]/),dO=Wi(/[!-/:-@[-`{-~]/);function Ze(e){return e!==null&&e<-2}function _t(e){return e!==null&&(e<0||e===32)}function ct(e){return e===-2||e===-1||e===32}const Vc=Wi(new RegExp("\\p{P}|\\p{S}","u")),Ss=Wi(/\s/);function Wi(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Uo(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const o=e.charCodeAt(n);let a="";if(o===37&&Sn(e.charCodeAt(n+1))&&Sn(e.charCodeAt(n+2)))i=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(a=String.fromCharCode(o));else if(o>55295&&o<57344){const u=e.charCodeAt(n+1);o<56320&&u>56319&&u<57344?(a=String.fromCharCode(o,u),i=1):a=""}else a=String.fromCharCode(o);a&&(t.push(e.slice(r,n),encodeURIComponent(a)),r=n+i+1,a=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function ht(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let o=0;return a;function a(c){return ct(c)?(e.enter(n),u(c)):t(c)}function u(c){return ct(c)&&o++<i?(e.consume(c),u):(e.exit(n),t(c))}}const fO={tokenize:hO};function hO(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(u){if(u===null){e.consume(u);return}return e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),ht(e,t,"linePrefix")}function i(u){return e.enter("paragraph"),o(u)}function o(u){const c=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,a(u)}function a(u){if(u===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(u);return}return Ze(u)?(e.consume(u),e.exit("chunkText"),o):(e.consume(u),a)}}const pO={tokenize:mO},y0={tokenize:gO};function mO(e){const t=this,n=[];let r=0,i,o,a;return u;function u(j){if(r<n.length){const I=n[r];return t.containerState=I[1],e.attempt(I[0].continuation,c,f)(j)}return f(j)}function c(j){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&C();const I=t.events.length;let D=I,A;for(;D--;)if(t.events[D][0]==="exit"&&t.events[D][1].type==="chunkFlow"){A=t.events[D][1].end;break}_(r);let U=I;for(;U<t.events.length;)t.events[U][1].end={...A},U++;return er(t.events,D+1,0,t.events.slice(I)),t.events.length=U,f(j)}return u(j)}function f(j){if(r===n.length){if(!i)return v(j);if(i.currentConstruct&&i.currentConstruct.concrete)return w(j);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(y0,h,p)(j)}function h(j){return i&&C(),_(r),v(j)}function p(j){return t.parser.lazy[t.now().line]=r!==n.length,a=t.now().offset,w(j)}function v(j){return t.containerState={},e.attempt(y0,y,w)(j)}function y(j){return r++,n.push([t.currentConstruct,t.containerState]),v(j)}function w(j){if(j===null){i&&C(),_(0),e.consume(j);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:o}),S(j)}function S(j){if(j===null){k(e.exit("chunkFlow"),!0),_(0),e.consume(j);return}return Ze(j)?(e.consume(j),k(e.exit("chunkFlow")),r=0,t.interrupt=void 0,u):(e.consume(j),S)}function k(j,I){const D=t.sliceStream(j);if(I&&D.push(null),j.previous=o,o&&(o.next=j),o=j,i.defineSkip(j.start),i.write(D),t.parser.lazy[j.start.line]){let A=i.events.length;for(;A--;)if(i.events[A][1].start.offset<a&&(!i.events[A][1].end||i.events[A][1].end.offset>a))return;const U=t.events.length;let te=U,z,M;for(;te--;)if(t.events[te][0]==="exit"&&t.events[te][1].type==="chunkFlow"){if(z){M=t.events[te][1].end;break}z=!0}for(_(r),A=U;A<t.events.length;)t.events[A][1].end={...M},A++;er(t.events,te+1,0,t.events.slice(U)),t.events.length=A}}function _(j){let I=n.length;for(;I-- >j;){const D=n[I];t.containerState=D[1],D[0].exit.call(t,e)}n.length=j}function C(){i.write([null]),o=void 0,i=void 0,t.containerState._closeFlow=void 0}}function gO(e,t,n){return ht(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Ao(e){if(e===null||_t(e)||Ss(e))return 1;if(Vc(e))return 2}function qc(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const o=e[i].resolveAll;o&&!r.includes(o)&&(t=o(t,n),r.push(o))}return t}const wp={name:"attention",resolveAll:yO,tokenize:vO};function yO(e,t){let n=-1,r,i,o,a,u,c,f,h;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const p={...e[r][1].end},v={...e[n][1].start};v0(p,-c),v0(v,c),a={type:c>1?"strongSequence":"emphasisSequence",start:p,end:{...e[r][1].end}},u={type:c>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:v},o={type:c>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},i={type:c>1?"strong":"emphasis",start:{...a.start},end:{...u.end}},e[r][1].end={...a.start},e[n][1].start={...u.end},f=[],e[r][1].end.offset-e[r][1].start.offset&&(f=cr(f,[["enter",e[r][1],t],["exit",e[r][1],t]])),f=cr(f,[["enter",i,t],["enter",a,t],["exit",a,t],["enter",o,t]]),f=cr(f,qc(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),f=cr(f,[["exit",o,t],["enter",u,t],["exit",u,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(h=2,f=cr(f,[["enter",e[n][1],t],["exit",e[n][1],t]])):h=0,er(e,r-1,n-r+3,f),n=r+f.length-h-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function vO(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Ao(r);let o;return a;function a(c){return o=c,e.enter("attentionSequence"),u(c)}function u(c){if(c===o)return e.consume(c),u;const f=e.exit("attentionSequence"),h=Ao(c),p=!h||h===2&&i||n.includes(c),v=!i||i===2&&h||n.includes(r);return f._open=!!(o===42?p:p&&(i||!v)),f._close=!!(o===42?v:v&&(h||!p)),t(c)}}function v0(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const xO={name:"autolink",tokenize:bO};function bO(e,t,n){let r=0;return i;function i(y){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(y),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),o}function o(y){return jn(y)?(e.consume(y),a):y===64?n(y):f(y)}function a(y){return y===43||y===45||y===46||Sn(y)?(r=1,u(y)):f(y)}function u(y){return y===58?(e.consume(y),r=0,c):(y===43||y===45||y===46||Sn(y))&&r++<32?(e.consume(y),u):(r=0,f(y))}function c(y){return y===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(y),e.exit("autolinkMarker"),e.exit("autolink"),t):y===null||y===32||y===60||gc(y)?n(y):(e.consume(y),c)}function f(y){return y===64?(e.consume(y),h):uO(y)?(e.consume(y),f):n(y)}function h(y){return Sn(y)?p(y):n(y)}function p(y){return y===46?(e.consume(y),r=0,h):y===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(y),e.exit("autolinkMarker"),e.exit("autolink"),t):v(y)}function v(y){if((y===45||Sn(y))&&r++<63){const w=y===45?v:p;return e.consume(y),w}return n(y)}}const yl={partial:!0,tokenize:wO};function wO(e,t,n){return r;function r(o){return ct(o)?ht(e,i,"linePrefix")(o):i(o)}function i(o){return o===null||Ze(o)?t(o):n(o)}}const Kk={continuation:{tokenize:SO},exit:EO,name:"blockQuote",tokenize:kO};function kO(e,t,n){const r=this;return i;function i(a){if(a===62){const u=r.containerState;return u.open||(e.enter("blockQuote",{_container:!0}),u.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(a),e.exit("blockQuoteMarker"),o}return n(a)}function o(a){return ct(a)?(e.enter("blockQuotePrefixWhitespace"),e.consume(a),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(a))}}function SO(e,t,n){const r=this;return i;function i(a){return ct(a)?ht(e,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):o(a)}function o(a){return e.attempt(Kk,t,n)(a)}}function EO(e){e.exit("blockQuote")}const Yk={name:"characterEscape",tokenize:_O};function _O(e,t,n){return r;function r(o){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(o),e.exit("escapeMarker"),i}function i(o){return dO(o)?(e.enter("characterEscapeValue"),e.consume(o),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(o)}}const Gk={name:"characterReference",tokenize:CO};function CO(e,t,n){const r=this;let i=0,o,a;return u;function u(p){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(p),e.exit("characterReferenceMarker"),c}function c(p){return p===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(p),e.exit("characterReferenceMarkerNumeric"),f):(e.enter("characterReferenceValue"),o=31,a=Sn,h(p))}function f(p){return p===88||p===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(p),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),o=6,a=cO,h):(e.enter("characterReferenceValue"),o=7,a=bp,h(p))}function h(p){if(p===59&&i){const v=e.exit("characterReferenceValue");return a===Sn&&!xm(r.sliceSerialize(v))?n(p):(e.enter("characterReferenceMarker"),e.consume(p),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return a(p)&&i++<o?(e.consume(p),h):n(p)}}const x0={partial:!0,tokenize:NO},b0={concrete:!0,name:"codeFenced",tokenize:jO};function jO(e,t,n){const r=this,i={partial:!0,tokenize:D};let o=0,a=0,u;return c;function c(A){return f(A)}function f(A){const U=r.events[r.events.length-1];return o=U&&U[1].type==="linePrefix"?U[2].sliceSerialize(U[1],!0).length:0,u=A,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),h(A)}function h(A){return A===u?(a++,e.consume(A),h):a<3?n(A):(e.exit("codeFencedFenceSequence"),ct(A)?ht(e,p,"whitespace")(A):p(A))}function p(A){return A===null||Ze(A)?(e.exit("codeFencedFence"),r.interrupt?t(A):e.check(x0,S,I)(A)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),v(A))}function v(A){return A===null||Ze(A)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),p(A)):ct(A)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),ht(e,y,"whitespace")(A)):A===96&&A===u?n(A):(e.consume(A),v)}function y(A){return A===null||Ze(A)?p(A):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),w(A))}function w(A){return A===null||Ze(A)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),p(A)):A===96&&A===u?n(A):(e.consume(A),w)}function S(A){return e.attempt(i,I,k)(A)}function k(A){return e.enter("lineEnding"),e.consume(A),e.exit("lineEnding"),_}function _(A){return o>0&&ct(A)?ht(e,C,"linePrefix",o+1)(A):C(A)}function C(A){return A===null||Ze(A)?e.check(x0,S,I)(A):(e.enter("codeFlowValue"),j(A))}function j(A){return A===null||Ze(A)?(e.exit("codeFlowValue"),C(A)):(e.consume(A),j)}function I(A){return e.exit("codeFenced"),t(A)}function D(A,U,te){let z=0;return M;function M(K){return A.enter("lineEnding"),A.consume(K),A.exit("lineEnding"),$}function $(K){return A.enter("codeFencedFence"),ct(K)?ht(A,ne,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(K):ne(K)}function ne(K){return K===u?(A.enter("codeFencedFenceSequence"),H(K)):te(K)}function H(K){return K===u?(z++,A.consume(K),H):z>=a?(A.exit("codeFencedFenceSequence"),ct(K)?ht(A,Y,"whitespace")(K):Y(K)):te(K)}function Y(K){return K===null||Ze(K)?(A.exit("codeFencedFence"),U(K)):te(K)}}}function NO(e,t,n){const r=this;return i;function i(a){return a===null?n(a):(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),o)}function o(a){return r.parser.lazy[r.now().line]?n(a):t(a)}}const hh={name:"codeIndented",tokenize:IO},TO={partial:!0,tokenize:PO};function IO(e,t,n){const r=this;return i;function i(f){return e.enter("codeIndented"),ht(e,o,"linePrefix",5)(f)}function o(f){const h=r.events[r.events.length-1];return h&&h[1].type==="linePrefix"&&h[2].sliceSerialize(h[1],!0).length>=4?a(f):n(f)}function a(f){return f===null?c(f):Ze(f)?e.attempt(TO,a,c)(f):(e.enter("codeFlowValue"),u(f))}function u(f){return f===null||Ze(f)?(e.exit("codeFlowValue"),a(f)):(e.consume(f),u)}function c(f){return e.exit("codeIndented"),t(f)}}function PO(e,t,n){const r=this;return i;function i(a){return r.parser.lazy[r.now().line]?n(a):Ze(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),i):ht(e,o,"linePrefix",5)(a)}function o(a){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?t(a):Ze(a)?i(a):n(a)}}const RO={name:"codeText",previous:MO,resolve:AO,tokenize:OO};function AO(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function MO(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function OO(e,t,n){let r=0,i,o;return a;function a(p){return e.enter("codeText"),e.enter("codeTextSequence"),u(p)}function u(p){return p===96?(e.consume(p),r++,u):(e.exit("codeTextSequence"),c(p))}function c(p){return p===null?n(p):p===32?(e.enter("space"),e.consume(p),e.exit("space"),c):p===96?(o=e.enter("codeTextSequence"),i=0,h(p)):Ze(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),c):(e.enter("codeTextData"),f(p))}function f(p){return p===null||p===32||p===96||Ze(p)?(e.exit("codeTextData"),c(p)):(e.consume(p),f)}function h(p){return p===96?(e.consume(p),i++,h):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(p)):(o.type="codeTextData",f(p))}}class DO{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const o=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Ta(this.left,r),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Ta(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Ta(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);Ta(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Ta(this.left,n.reverse())}}}function Ta(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function Jk(e){const t={};let n=-1,r,i,o,a,u,c,f;const h=new DO(e);for(;++n<h.length;){for(;n in t;)n=t[n];if(r=h.get(n),n&&r[1].type==="chunkFlow"&&h.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,o=0,o<c.length&&c[o][1].type==="lineEndingBlank"&&(o+=2),o<c.length&&c[o][1].type==="content"))for(;++o<c.length&&c[o][1].type!=="content";)c[o][1].type==="chunkText"&&(c[o][1]._isInFirstContentOfListItem=!0,o++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,LO(h,n)),n=t[n],f=!0);else if(r[1]._container){for(o=n,i=void 0;o--;)if(a=h.get(o),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(i&&(h.get(i)[1].type="lineEndingBlank"),a[1].type="lineEnding",i=o);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;i&&(r[1].end={...h.get(i)[1].start},u=h.slice(i,n),u.unshift(r),h.splice(i,n-i+1,u))}}return er(e,0,Number.POSITIVE_INFINITY,h.slice(0)),!f}function LO(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const o=[];let a=n._tokenizer;a||(a=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const u=a.events,c=[],f={};let h,p,v=-1,y=n,w=0,S=0;const k=[S];for(;y;){for(;e.get(++i)[1]!==y;);o.push(i),y._tokenizer||(h=r.sliceStream(y),y.next||h.push(null),p&&a.defineSkip(y.start),y._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(h),y._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),p=y,y=y.next}for(y=n;++v<u.length;)u[v][0]==="exit"&&u[v-1][0]==="enter"&&u[v][1].type===u[v-1][1].type&&u[v][1].start.line!==u[v][1].end.line&&(S=v+1,k.push(S),y._tokenizer=void 0,y.previous=void 0,y=y.next);for(a.events=[],y?(y._tokenizer=void 0,y.previous=void 0):k.pop(),v=k.length;v--;){const _=u.slice(k[v],k[v+1]),C=o.pop();c.push([C,C+_.length-1]),e.splice(C,2,_)}for(c.reverse(),v=-1;++v<c.length;)f[w+c[v][0]]=w+c[v][1],w+=c[v][1]-c[v][0]-1;return f}const $O={resolve:BO,tokenize:zO},FO={partial:!0,tokenize:UO};function BO(e){return Jk(e),e}function zO(e,t){let n;return r;function r(u){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(u)}function i(u){return u===null?o(u):Ze(u)?e.check(FO,a,o)(u):(e.consume(u),i)}function o(u){return e.exit("chunkContent"),e.exit("content"),t(u)}function a(u){return e.consume(u),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function UO(e,t,n){const r=this;return i;function i(a){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),ht(e,o,"linePrefix")}function o(a){if(a===null||Ze(a))return n(a);const u=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?t(a):e.interrupt(r.parser.constructs.flow,n,t)(a)}}function Qk(e,t,n,r,i,o,a,u,c){const f=c||Number.POSITIVE_INFINITY;let h=0;return p;function p(_){return _===60?(e.enter(r),e.enter(i),e.enter(o),e.consume(_),e.exit(o),v):_===null||_===32||_===41||gc(_)?n(_):(e.enter(r),e.enter(a),e.enter(u),e.enter("chunkString",{contentType:"string"}),S(_))}function v(_){return _===62?(e.enter(o),e.consume(_),e.exit(o),e.exit(i),e.exit(r),t):(e.enter(u),e.enter("chunkString",{contentType:"string"}),y(_))}function y(_){return _===62?(e.exit("chunkString"),e.exit(u),v(_)):_===null||_===60||Ze(_)?n(_):(e.consume(_),_===92?w:y)}function w(_){return _===60||_===62||_===92?(e.consume(_),y):y(_)}function S(_){return!h&&(_===null||_===41||_t(_))?(e.exit("chunkString"),e.exit(u),e.exit(a),e.exit(r),t(_)):h<f&&_===40?(e.consume(_),h++,S):_===41?(e.consume(_),h--,S):_===null||_===32||_===40||gc(_)?n(_):(e.consume(_),_===92?k:S)}function k(_){return _===40||_===41||_===92?(e.consume(_),S):S(_)}}function Xk(e,t,n,r,i,o){const a=this;let u=0,c;return f;function f(y){return e.enter(r),e.enter(i),e.consume(y),e.exit(i),e.enter(o),h}function h(y){return u>999||y===null||y===91||y===93&&!c||y===94&&!u&&"_hiddenFootnoteSupport"in a.parser.constructs?n(y):y===93?(e.exit(o),e.enter(i),e.consume(y),e.exit(i),e.exit(r),t):Ze(y)?(e.enter("lineEnding"),e.consume(y),e.exit("lineEnding"),h):(e.enter("chunkString",{contentType:"string"}),p(y))}function p(y){return y===null||y===91||y===93||Ze(y)||u++>999?(e.exit("chunkString"),h(y)):(e.consume(y),c||(c=!ct(y)),y===92?v:p)}function v(y){return y===91||y===92||y===93?(e.consume(y),u++,p):p(y)}}function Zk(e,t,n,r,i,o){let a;return u;function u(v){return v===34||v===39||v===40?(e.enter(r),e.enter(i),e.consume(v),e.exit(i),a=v===40?41:v,c):n(v)}function c(v){return v===a?(e.enter(i),e.consume(v),e.exit(i),e.exit(r),t):(e.enter(o),f(v))}function f(v){return v===a?(e.exit(o),c(a)):v===null?n(v):Ze(v)?(e.enter("lineEnding"),e.consume(v),e.exit("lineEnding"),ht(e,f,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),h(v))}function h(v){return v===a||v===null||Ze(v)?(e.exit("chunkString"),f(v)):(e.consume(v),v===92?p:h)}function p(v){return v===a||v===92?(e.consume(v),h):h(v)}}function Ha(e,t){let n;return r;function r(i){return Ze(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):ct(i)?ht(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const WO={name:"definition",tokenize:VO},HO={partial:!0,tokenize:qO};function VO(e,t,n){const r=this;let i;return o;function o(y){return e.enter("definition"),a(y)}function a(y){return Xk.call(r,e,u,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(y)}function u(y){return i=Sr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),y===58?(e.enter("definitionMarker"),e.consume(y),e.exit("definitionMarker"),c):n(y)}function c(y){return _t(y)?Ha(e,f)(y):f(y)}function f(y){return Qk(e,h,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(y)}function h(y){return e.attempt(HO,p,p)(y)}function p(y){return ct(y)?ht(e,v,"whitespace")(y):v(y)}function v(y){return y===null||Ze(y)?(e.exit("definition"),r.parser.defined.push(i),t(y)):n(y)}}function qO(e,t,n){return r;function r(u){return _t(u)?Ha(e,i)(u):n(u)}function i(u){return Zk(e,o,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(u)}function o(u){return ct(u)?ht(e,a,"whitespace")(u):a(u)}function a(u){return u===null||Ze(u)?t(u):n(u)}}const KO={name:"hardBreakEscape",tokenize:YO};function YO(e,t,n){return r;function r(o){return e.enter("hardBreakEscape"),e.consume(o),i}function i(o){return Ze(o)?(e.exit("hardBreakEscape"),t(o)):n(o)}}const GO={name:"headingAtx",resolve:JO,tokenize:QO};function JO(e,t){let n=e.length-2,r=3,i,o;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},o={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},er(e,r,n-r+1,[["enter",i,t],["enter",o,t],["exit",o,t],["exit",i,t]])),e}function QO(e,t,n){let r=0;return i;function i(h){return e.enter("atxHeading"),o(h)}function o(h){return e.enter("atxHeadingSequence"),a(h)}function a(h){return h===35&&r++<6?(e.consume(h),a):h===null||_t(h)?(e.exit("atxHeadingSequence"),u(h)):n(h)}function u(h){return h===35?(e.enter("atxHeadingSequence"),c(h)):h===null||Ze(h)?(e.exit("atxHeading"),t(h)):ct(h)?ht(e,u,"whitespace")(h):(e.enter("atxHeadingText"),f(h))}function c(h){return h===35?(e.consume(h),c):(e.exit("atxHeadingSequence"),u(h))}function f(h){return h===null||h===35||_t(h)?(e.exit("atxHeadingText"),u(h)):(e.consume(h),f)}}const XO=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],w0=["pre","script","style","textarea"],ZO={concrete:!0,name:"htmlFlow",resolveTo:n2,tokenize:r2},e2={partial:!0,tokenize:s2},t2={partial:!0,tokenize:i2};function n2(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function r2(e,t,n){const r=this;let i,o,a,u,c;return f;function f(R){return h(R)}function h(R){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(R),p}function p(R){return R===33?(e.consume(R),v):R===47?(e.consume(R),o=!0,S):R===63?(e.consume(R),i=3,r.interrupt?t:N):jn(R)?(e.consume(R),a=String.fromCharCode(R),k):n(R)}function v(R){return R===45?(e.consume(R),i=2,y):R===91?(e.consume(R),i=5,u=0,w):jn(R)?(e.consume(R),i=4,r.interrupt?t:N):n(R)}function y(R){return R===45?(e.consume(R),r.interrupt?t:N):n(R)}function w(R){const be="CDATA[";return R===be.charCodeAt(u++)?(e.consume(R),u===be.length?r.interrupt?t:ne:w):n(R)}function S(R){return jn(R)?(e.consume(R),a=String.fromCharCode(R),k):n(R)}function k(R){if(R===null||R===47||R===62||_t(R)){const be=R===47,he=a.toLowerCase();return!be&&!o&&w0.includes(he)?(i=1,r.interrupt?t(R):ne(R)):XO.includes(a.toLowerCase())?(i=6,be?(e.consume(R),_):r.interrupt?t(R):ne(R)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(R):o?C(R):j(R))}return R===45||Sn(R)?(e.consume(R),a+=String.fromCharCode(R),k):n(R)}function _(R){return R===62?(e.consume(R),r.interrupt?t:ne):n(R)}function C(R){return ct(R)?(e.consume(R),C):M(R)}function j(R){return R===47?(e.consume(R),M):R===58||R===95||jn(R)?(e.consume(R),I):ct(R)?(e.consume(R),j):M(R)}function I(R){return R===45||R===46||R===58||R===95||Sn(R)?(e.consume(R),I):D(R)}function D(R){return R===61?(e.consume(R),A):ct(R)?(e.consume(R),D):j(R)}function A(R){return R===null||R===60||R===61||R===62||R===96?n(R):R===34||R===39?(e.consume(R),c=R,U):ct(R)?(e.consume(R),A):te(R)}function U(R){return R===c?(e.consume(R),c=null,z):R===null||Ze(R)?n(R):(e.consume(R),U)}function te(R){return R===null||R===34||R===39||R===47||R===60||R===61||R===62||R===96||_t(R)?D(R):(e.consume(R),te)}function z(R){return R===47||R===62||ct(R)?j(R):n(R)}function M(R){return R===62?(e.consume(R),$):n(R)}function $(R){return R===null||Ze(R)?ne(R):ct(R)?(e.consume(R),$):n(R)}function ne(R){return R===45&&i===2?(e.consume(R),se):R===60&&i===1?(e.consume(R),q):R===62&&i===4?(e.consume(R),B):R===63&&i===3?(e.consume(R),N):R===93&&i===5?(e.consume(R),L):Ze(R)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(e2,ee,H)(R)):R===null||Ze(R)?(e.exit("htmlFlowData"),H(R)):(e.consume(R),ne)}function H(R){return e.check(t2,Y,ee)(R)}function Y(R){return e.enter("lineEnding"),e.consume(R),e.exit("lineEnding"),K}function K(R){return R===null||Ze(R)?H(R):(e.enter("htmlFlowData"),ne(R))}function se(R){return R===45?(e.consume(R),N):ne(R)}function q(R){return R===47?(e.consume(R),a="",F):ne(R)}function F(R){if(R===62){const be=a.toLowerCase();return w0.includes(be)?(e.consume(R),B):ne(R)}return jn(R)&&a.length<8?(e.consume(R),a+=String.fromCharCode(R),F):ne(R)}function L(R){return R===93?(e.consume(R),N):ne(R)}function N(R){return R===62?(e.consume(R),B):R===45&&i===2?(e.consume(R),N):ne(R)}function B(R){return R===null||Ze(R)?(e.exit("htmlFlowData"),ee(R)):(e.consume(R),B)}function ee(R){return e.exit("htmlFlow"),t(R)}}function i2(e,t,n){const r=this;return i;function i(a){return Ze(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),o):n(a)}function o(a){return r.parser.lazy[r.now().line]?n(a):t(a)}}function s2(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(yl,t,n)}}const o2={name:"htmlText",tokenize:a2};function a2(e,t,n){const r=this;let i,o,a;return u;function u(N){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(N),c}function c(N){return N===33?(e.consume(N),f):N===47?(e.consume(N),D):N===63?(e.consume(N),j):jn(N)?(e.consume(N),te):n(N)}function f(N){return N===45?(e.consume(N),h):N===91?(e.consume(N),o=0,w):jn(N)?(e.consume(N),C):n(N)}function h(N){return N===45?(e.consume(N),y):n(N)}function p(N){return N===null?n(N):N===45?(e.consume(N),v):Ze(N)?(a=p,q(N)):(e.consume(N),p)}function v(N){return N===45?(e.consume(N),y):p(N)}function y(N){return N===62?se(N):N===45?v(N):p(N)}function w(N){const B="CDATA[";return N===B.charCodeAt(o++)?(e.consume(N),o===B.length?S:w):n(N)}function S(N){return N===null?n(N):N===93?(e.consume(N),k):Ze(N)?(a=S,q(N)):(e.consume(N),S)}function k(N){return N===93?(e.consume(N),_):S(N)}function _(N){return N===62?se(N):N===93?(e.consume(N),_):S(N)}function C(N){return N===null||N===62?se(N):Ze(N)?(a=C,q(N)):(e.consume(N),C)}function j(N){return N===null?n(N):N===63?(e.consume(N),I):Ze(N)?(a=j,q(N)):(e.consume(N),j)}function I(N){return N===62?se(N):j(N)}function D(N){return jn(N)?(e.consume(N),A):n(N)}function A(N){return N===45||Sn(N)?(e.consume(N),A):U(N)}function U(N){return Ze(N)?(a=U,q(N)):ct(N)?(e.consume(N),U):se(N)}function te(N){return N===45||Sn(N)?(e.consume(N),te):N===47||N===62||_t(N)?z(N):n(N)}function z(N){return N===47?(e.consume(N),se):N===58||N===95||jn(N)?(e.consume(N),M):Ze(N)?(a=z,q(N)):ct(N)?(e.consume(N),z):se(N)}function M(N){return N===45||N===46||N===58||N===95||Sn(N)?(e.consume(N),M):$(N)}function $(N){return N===61?(e.consume(N),ne):Ze(N)?(a=$,q(N)):ct(N)?(e.consume(N),$):z(N)}function ne(N){return N===null||N===60||N===61||N===62||N===96?n(N):N===34||N===39?(e.consume(N),i=N,H):Ze(N)?(a=ne,q(N)):ct(N)?(e.consume(N),ne):(e.consume(N),Y)}function H(N){return N===i?(e.consume(N),i=void 0,K):N===null?n(N):Ze(N)?(a=H,q(N)):(e.consume(N),H)}function Y(N){return N===null||N===34||N===39||N===60||N===61||N===96?n(N):N===47||N===62||_t(N)?z(N):(e.consume(N),Y)}function K(N){return N===47||N===62||_t(N)?z(N):n(N)}function se(N){return N===62?(e.consume(N),e.exit("htmlTextData"),e.exit("htmlText"),t):n(N)}function q(N){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(N),e.exit("lineEnding"),F}function F(N){return ct(N)?ht(e,L,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(N):L(N)}function L(N){return e.enter("htmlTextData"),a(N)}}const bm={name:"labelEnd",resolveAll:d2,resolveTo:f2,tokenize:h2},l2={tokenize:p2},u2={tokenize:m2},c2={tokenize:g2};function d2(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",t+=i}}return e.length!==n.length&&er(e,0,e.length,n),e}function f2(e,t){let n=e.length,r=0,i,o,a,u;for(;n--;)if(i=e[n][1],o){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(a){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(o=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(a=n);const c={type:e[o][1].type==="labelLink"?"link":"image",start:{...e[o][1].start},end:{...e[e.length-1][1].end}},f={type:"label",start:{...e[o][1].start},end:{...e[a][1].end}},h={type:"labelText",start:{...e[o+r+2][1].end},end:{...e[a-2][1].start}};return u=[["enter",c,t],["enter",f,t]],u=cr(u,e.slice(o+1,o+r+3)),u=cr(u,[["enter",h,t]]),u=cr(u,qc(t.parser.constructs.insideSpan.null,e.slice(o+r+4,a-3),t)),u=cr(u,[["exit",h,t],e[a-2],e[a-1],["exit",f,t]]),u=cr(u,e.slice(a+1)),u=cr(u,[["exit",c,t]]),er(e,o,e.length,u),e}function h2(e,t,n){const r=this;let i=r.events.length,o,a;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){o=r.events[i][1];break}return u;function u(v){return o?o._inactive?p(v):(a=r.parser.defined.includes(Sr(r.sliceSerialize({start:o.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(v),e.exit("labelMarker"),e.exit("labelEnd"),c):n(v)}function c(v){return v===40?e.attempt(l2,h,a?h:p)(v):v===91?e.attempt(u2,h,a?f:p)(v):a?h(v):p(v)}function f(v){return e.attempt(c2,h,p)(v)}function h(v){return t(v)}function p(v){return o._balanced=!0,n(v)}}function p2(e,t,n){return r;function r(p){return e.enter("resource"),e.enter("resourceMarker"),e.consume(p),e.exit("resourceMarker"),i}function i(p){return _t(p)?Ha(e,o)(p):o(p)}function o(p){return p===41?h(p):Qk(e,a,u,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function a(p){return _t(p)?Ha(e,c)(p):h(p)}function u(p){return n(p)}function c(p){return p===34||p===39||p===40?Zk(e,f,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):h(p)}function f(p){return _t(p)?Ha(e,h)(p):h(p)}function h(p){return p===41?(e.enter("resourceMarker"),e.consume(p),e.exit("resourceMarker"),e.exit("resource"),t):n(p)}}function m2(e,t,n){const r=this;return i;function i(u){return Xk.call(r,e,o,a,"reference","referenceMarker","referenceString")(u)}function o(u){return r.parser.defined.includes(Sr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(u):n(u)}function a(u){return n(u)}}function g2(e,t,n){return r;function r(o){return e.enter("reference"),e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),i}function i(o){return o===93?(e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),e.exit("reference"),t):n(o)}}const y2={name:"labelStartImage",resolveAll:bm.resolveAll,tokenize:v2};function v2(e,t,n){const r=this;return i;function i(u){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(u),e.exit("labelImageMarker"),o}function o(u){return u===91?(e.enter("labelMarker"),e.consume(u),e.exit("labelMarker"),e.exit("labelImage"),a):n(u)}function a(u){return u===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(u):t(u)}}const x2={name:"labelStartLink",resolveAll:bm.resolveAll,tokenize:b2};function b2(e,t,n){const r=this;return i;function i(a){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelLink"),o}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const ph={name:"lineEnding",tokenize:w2};function w2(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),ht(e,t,"linePrefix")}}const Zu={name:"thematicBreak",tokenize:k2};function k2(e,t,n){let r=0,i;return o;function o(f){return e.enter("thematicBreak"),a(f)}function a(f){return i=f,u(f)}function u(f){return f===i?(e.enter("thematicBreakSequence"),c(f)):r>=3&&(f===null||Ze(f))?(e.exit("thematicBreak"),t(f)):n(f)}function c(f){return f===i?(e.consume(f),r++,c):(e.exit("thematicBreakSequence"),ct(f)?ht(e,u,"whitespace")(f):u(f))}}const $n={continuation:{tokenize:C2},exit:N2,name:"list",tokenize:_2},S2={partial:!0,tokenize:T2},E2={partial:!0,tokenize:j2};function _2(e,t,n){const r=this,i=r.events[r.events.length-1];let o=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,a=0;return u;function u(y){const w=r.containerState.type||(y===42||y===43||y===45?"listUnordered":"listOrdered");if(w==="listUnordered"?!r.containerState.marker||y===r.containerState.marker:bp(y)){if(r.containerState.type||(r.containerState.type=w,e.enter(w,{_container:!0})),w==="listUnordered")return e.enter("listItemPrefix"),y===42||y===45?e.check(Zu,n,f)(y):f(y);if(!r.interrupt||y===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(y)}return n(y)}function c(y){return bp(y)&&++a<10?(e.consume(y),c):(!r.interrupt||a<2)&&(r.containerState.marker?y===r.containerState.marker:y===41||y===46)?(e.exit("listItemValue"),f(y)):n(y)}function f(y){return e.enter("listItemMarker"),e.consume(y),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||y,e.check(yl,r.interrupt?n:h,e.attempt(S2,v,p))}function h(y){return r.containerState.initialBlankLine=!0,o++,v(y)}function p(y){return ct(y)?(e.enter("listItemPrefixWhitespace"),e.consume(y),e.exit("listItemPrefixWhitespace"),v):n(y)}function v(y){return r.containerState.size=o+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(y)}}function C2(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(yl,i,o);function i(u){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,ht(e,t,"listItemIndent",r.containerState.size+1)(u)}function o(u){return r.containerState.furtherBlankLines||!ct(u)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(u)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(E2,t,a)(u))}function a(u){return r.containerState._closeFlow=!0,r.interrupt=void 0,ht(e,e.attempt($n,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u)}}function j2(e,t,n){const r=this;return ht(e,i,"listItemIndent",r.containerState.size+1);function i(o){const a=r.events[r.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===r.containerState.size?t(o):n(o)}}function N2(e){e.exit(this.containerState.type)}function T2(e,t,n){const r=this;return ht(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(o){const a=r.events[r.events.length-1];return!ct(o)&&a&&a[1].type==="listItemPrefixWhitespace"?t(o):n(o)}}const k0={name:"setextUnderline",resolveTo:I2,tokenize:P2};function I2(e,t){let n=e.length,r,i,o;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!o&&e[n][1].type==="definition"&&(o=n);const a={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[i][1].type="setextHeadingText",o?(e.splice(i,0,["enter",a,t]),e.splice(o+1,0,["exit",e[r][1],t]),e[r][1].end={...e[o][1].end}):e[r][1]=a,e.push(["exit",a,t]),e}function P2(e,t,n){const r=this;let i;return o;function o(f){let h=r.events.length,p;for(;h--;)if(r.events[h][1].type!=="lineEnding"&&r.events[h][1].type!=="linePrefix"&&r.events[h][1].type!=="content"){p=r.events[h][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||p)?(e.enter("setextHeadingLine"),i=f,a(f)):n(f)}function a(f){return e.enter("setextHeadingLineSequence"),u(f)}function u(f){return f===i?(e.consume(f),u):(e.exit("setextHeadingLineSequence"),ct(f)?ht(e,c,"lineSuffix")(f):c(f))}function c(f){return f===null||Ze(f)?(e.exit("setextHeadingLine"),t(f)):n(f)}}const R2={tokenize:A2};function A2(e){const t=this,n=e.attempt(yl,r,e.attempt(this.parser.constructs.flowInitial,i,ht(e,e.attempt(this.parser.constructs.flow,i,e.attempt($O,i)),"linePrefix")));return n;function r(o){if(o===null){e.consume(o);return}return e.enter("lineEndingBlank"),e.consume(o),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const M2={resolveAll:t1()},O2=e1("string"),D2=e1("text");function e1(e){return{resolveAll:t1(e==="text"?L2:void 0),tokenize:t};function t(n){const r=this,i=this.parser.constructs[e],o=n.attempt(i,a,u);return a;function a(h){return f(h)?o(h):u(h)}function u(h){if(h===null){n.consume(h);return}return n.enter("data"),n.consume(h),c}function c(h){return f(h)?(n.exit("data"),o(h)):(n.consume(h),c)}function f(h){if(h===null)return!0;const p=i[h];let v=-1;if(p)for(;++v<p.length;){const y=p[v];if(!y.previous||y.previous.call(r,r.previous))return!0}return!1}}}function t1(e){return t;function t(n,r){let i=-1,o;for(;++i<=n.length;)o===void 0?n[i]&&n[i][1].type==="data"&&(o=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==o+2&&(n[o][1].end=n[i-1][1].end,n.splice(o+2,i-o-2),i=o+2),o=void 0);return e?e(n,r):n}}function L2(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let o=i.length,a=-1,u=0,c;for(;o--;){const f=i[o];if(typeof f=="string"){for(a=f.length;f.charCodeAt(a-1)===32;)u++,a--;if(a)break;a=-1}else if(f===-2)c=!0,u++;else if(f!==-1){o++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(u=0),u){const f={type:n===e.length||c||u<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?a:r.start._bufferIndex+a,_index:r.start._index+o,line:r.end.line,column:r.end.column-u,offset:r.end.offset-u},end:{...r.end}};r.end={...f.start},r.start.offset===r.end.offset?Object.assign(r,f):(e.splice(n,0,["enter",f,t],["exit",f,t]),n+=2)}n++}return e}const $2={42:$n,43:$n,45:$n,48:$n,49:$n,50:$n,51:$n,52:$n,53:$n,54:$n,55:$n,56:$n,57:$n,62:Kk},F2={91:WO},B2={[-2]:hh,[-1]:hh,32:hh},z2={35:GO,42:Zu,45:[k0,Zu],60:ZO,61:k0,95:Zu,96:b0,126:b0},U2={38:Gk,92:Yk},W2={[-5]:ph,[-4]:ph,[-3]:ph,33:y2,38:Gk,42:wp,60:[xO,o2],91:x2,92:[KO,Yk],93:bm,95:wp,96:RO},H2={null:[wp,M2]},V2={null:[42,95]},q2={null:[]},K2=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:V2,contentInitial:F2,disable:q2,document:$2,flow:z2,flowInitial:B2,insideSpan:H2,string:U2,text:W2},Symbol.toStringTag,{value:"Module"}));function Y2(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},o=[];let a=[],u=[];const c={attempt:U(D),check:U(A),consume:C,enter:j,exit:I,interrupt:U(A,{interrupt:!0})},f={code:null,containerState:{},defineSkip:S,events:[],now:w,parser:e,previous:null,sliceSerialize:v,sliceStream:y,write:p};let h=t.tokenize.call(f,c);return t.resolveAll&&o.push(t),f;function p($){return a=cr(a,$),k(),a[a.length-1]!==null?[]:(te(t,0),f.events=qc(o,f.events,f),f.events)}function v($,ne){return J2(y($),ne)}function y($){return G2(a,$)}function w(){const{_bufferIndex:$,_index:ne,line:H,column:Y,offset:K}=r;return{_bufferIndex:$,_index:ne,line:H,column:Y,offset:K}}function S($){i[$.line]=$.column,M()}function k(){let $;for(;r._index<a.length;){const ne=a[r._index];if(typeof ne=="string")for($=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===$&&r._bufferIndex<ne.length;)_(ne.charCodeAt(r._bufferIndex));else _(ne)}}function _($){h=h($)}function C($){Ze($)?(r.line++,r.column=1,r.offset+=$===-3?2:1,M()):$!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++)),f.previous=$}function j($,ne){const H=ne||{};return H.type=$,H.start=w(),f.events.push(["enter",H,f]),u.push(H),H}function I($){const ne=u.pop();return ne.end=w(),f.events.push(["exit",ne,f]),ne}function D($,ne){te($,ne.from)}function A($,ne){ne.restore()}function U($,ne){return H;function H(Y,K,se){let q,F,L,N;return Array.isArray(Y)?ee(Y):"tokenize"in Y?ee([Y]):B(Y);function B(ge){return me;function me(Ce){const Te=Ce!==null&&ge[Ce],je=Ce!==null&&ge.null,ie=[...Array.isArray(Te)?Te:Te?[Te]:[],...Array.isArray(je)?je:je?[je]:[]];return ee(ie)(Ce)}}function ee(ge){return q=ge,F=0,ge.length===0?se:R(ge[F])}function R(ge){return me;function me(Ce){return N=z(),L=ge,ge.partial||(f.currentConstruct=ge),ge.name&&f.parser.constructs.disable.null.includes(ge.name)?he():ge.tokenize.call(ne?Object.assign(Object.create(f),ne):f,c,be,he)(Ce)}}function be(ge){return $(L,N),K}function he(ge){return N.restore(),++F<q.length?R(q[F]):se}}}function te($,ne){$.resolveAll&&!o.includes($)&&o.push($),$.resolve&&er(f.events,ne,f.events.length-ne,$.resolve(f.events.slice(ne),f)),$.resolveTo&&(f.events=$.resolveTo(f.events,f))}function z(){const $=w(),ne=f.previous,H=f.currentConstruct,Y=f.events.length,K=Array.from(u);return{from:Y,restore:se};function se(){r=$,f.previous=ne,f.currentConstruct=H,f.events.length=Y,u=K,M()}}function M(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function G2(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,o=t.end._bufferIndex;let a;if(n===i)a=[e[n].slice(r,o)];else{if(a=e.slice(n,i),r>-1){const u=a[0];typeof u=="string"?a[0]=u.slice(r):a.shift()}o>0&&a.push(e[i].slice(0,o))}return a}function J2(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const o=e[n];let a;if(typeof o=="string")a=o;else switch(o){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=t?" ":"	";break}case-1:{if(!t&&i)continue;a=" ";break}default:a=String.fromCharCode(o)}i=o===-2,r.push(a)}return r.join("")}function Q2(e){const r={constructs:Vk([K2,...(e||{}).extensions||[]]),content:i(fO),defined:[],document:i(pO),flow:i(R2),lazy:{},string:i(O2),text:i(D2)};return r;function i(o){return a;function a(u){return Y2(r,o,u)}}}function X2(e){for(;!Jk(e););return e}const S0=/[\0\t\n\r]/g;function Z2(){let e=1,t="",n=!0,r;return i;function i(o,a,u){const c=[];let f,h,p,v,y;for(o=t+(typeof o=="string"?o.toString():new TextDecoder(a||void 0).decode(o)),p=0,t="",n&&(o.charCodeAt(0)===65279&&p++,n=void 0);p<o.length;){if(S0.lastIndex=p,f=S0.exec(o),v=f&&f.index!==void 0?f.index:o.length,y=o.charCodeAt(v),!f){t=o.slice(p);break}if(y===10&&p===v&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),p<v&&(c.push(o.slice(p,v)),e+=v-p),y){case 0:{c.push(65533),e++;break}case 9:{for(h=Math.ceil(e/4)*4,c.push(-2);e++<h;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:r=!0,e=1}p=v+1}return u&&(r&&c.push(-5),t&&c.push(t),c.push(null)),c}}const eD=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function tD(e){return e.replace(eD,nD)}function nD(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),o=i===120||i===88;return qk(n.slice(o?2:1),o?16:10)}return xm(n)||e}const n1={}.hasOwnProperty;function rD(e,t,n){return typeof t!="string"&&(n=t,t=void 0),iD(n)(X2(Q2(n).document().write(Z2()(e,t,!0))))}function iD(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(Xt),autolinkProtocol:z,autolinkEmail:z,atxHeading:o(rt),blockQuote:o(je),characterEscape:z,characterReference:z,codeFenced:o(ie),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:o(ie,a),codeText:o(Ie,a),codeTextData:z,data:z,codeFlowValue:z,definition:o(He),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:o(qe),hardBreakEscape:o(st),hardBreakTrailing:o(st),htmlFlow:o(St,a),htmlFlowData:z,htmlText:o(St,a),htmlTextData:z,image:o(fn),label:a,link:o(Xt),listItem:o(Rt),listItemValue:v,listOrdered:o(wt,p),listUnordered:o(wt),paragraph:o(Q),reference:R,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:o(rt),strong:o(fe),thematicBreak:o(Ee)},exit:{atxHeading:c(),atxHeadingSequence:D,autolink:c(),autolinkEmail:Te,autolinkProtocol:Ce,blockQuote:c(),characterEscapeValue:M,characterReferenceMarkerHexadecimal:he,characterReferenceMarkerNumeric:he,characterReferenceValue:ge,characterReference:me,codeFenced:c(k),codeFencedFence:S,codeFencedFenceInfo:y,codeFencedFenceMeta:w,codeFlowValue:M,codeIndented:c(_),codeText:c(K),codeTextData:M,data:M,definition:c(),definitionDestinationString:I,definitionLabelString:C,definitionTitleString:j,emphasis:c(),hardBreakEscape:c(ne),hardBreakTrailing:c(ne),htmlFlow:c(H),htmlFlowData:M,htmlText:c(Y),htmlTextData:M,image:c(q),label:L,labelText:F,lineEnding:$,link:c(se),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:be,resourceDestinationString:N,resourceTitleString:B,resource:ee,setextHeading:c(te),setextHeadingLineSequence:U,setextHeadingText:A,strong:c(),thematicBreak:c()}};r1(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(G){let P={type:"root",children:[]};const V={stack:[P],tokenStack:[],config:t,enter:u,exit:f,buffer:a,resume:h,data:n},le=[];let Z=-1;for(;++Z<G.length;)if(G[Z][1].type==="listOrdered"||G[Z][1].type==="listUnordered")if(G[Z][0]==="enter")le.push(Z);else{const ue=le.pop();Z=i(G,ue,Z)}for(Z=-1;++Z<G.length;){const ue=t[G[Z][0]];n1.call(ue,G[Z][1].type)&&ue[G[Z][1].type].call(Object.assign({sliceSerialize:G[Z][2].sliceSerialize},V),G[Z][1])}if(V.tokenStack.length>0){const ue=V.tokenStack[V.tokenStack.length-1];(ue[1]||E0).call(V,void 0,ue[0])}for(P.position={start:_i(G.length>0?G[0][1].start:{line:1,column:1,offset:0}),end:_i(G.length>0?G[G.length-2][1].end:{line:1,column:1,offset:0})},Z=-1;++Z<t.transforms.length;)P=t.transforms[Z](P)||P;return P}function i(G,P,V){let le=P-1,Z=-1,ue=!1,O,J,de,pe;for(;++le<=V;){const Re=G[le];switch(Re[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Re[0]==="enter"?Z++:Z--,pe=void 0;break}case"lineEndingBlank":{Re[0]==="enter"&&(O&&!pe&&!Z&&!de&&(de=le),pe=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:pe=void 0}if(!Z&&Re[0]==="enter"&&Re[1].type==="listItemPrefix"||Z===-1&&Re[0]==="exit"&&(Re[1].type==="listUnordered"||Re[1].type==="listOrdered")){if(O){let Pe=le;for(J=void 0;Pe--;){const De=G[Pe];if(De[1].type==="lineEnding"||De[1].type==="lineEndingBlank"){if(De[0]==="exit")continue;J&&(G[J][1].type="lineEndingBlank",ue=!0),De[1].type="lineEnding",J=Pe}else if(!(De[1].type==="linePrefix"||De[1].type==="blockQuotePrefix"||De[1].type==="blockQuotePrefixWhitespace"||De[1].type==="blockQuoteMarker"||De[1].type==="listItemIndent"))break}de&&(!J||de<J)&&(O._spread=!0),O.end=Object.assign({},J?G[J][1].start:Re[1].end),G.splice(J||le,0,["exit",O,Re[2]]),le++,V++}if(Re[1].type==="listItemPrefix"){const Pe={type:"listItem",_spread:!1,start:Object.assign({},Re[1].start),end:void 0};O=Pe,G.splice(le,0,["enter",Pe,Re[2]]),le++,V++,de=void 0,pe=!0}}}return G[P][1]._spread=ue,V}function o(G,P){return V;function V(le){u.call(this,G(le),le),P&&P.call(this,le)}}function a(){this.stack.push({type:"fragment",children:[]})}function u(G,P,V){this.stack[this.stack.length-1].children.push(G),this.stack.push(G),this.tokenStack.push([P,V||void 0]),G.position={start:_i(P.start),end:void 0}}function c(G){return P;function P(V){G&&G.call(this,V),f.call(this,V)}}function f(G,P){const V=this.stack.pop(),le=this.tokenStack.pop();if(le)le[0].type!==G.type&&(P?P.call(this,G,le[0]):(le[1]||E0).call(this,G,le[0]));else throw new Error("Cannot close `"+G.type+"` ("+Wa({start:G.start,end:G.end})+"): its not open");V.position.end=_i(G.end)}function h(){return vm(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function v(G){if(this.data.expectingFirstListItemValue){const P=this.stack[this.stack.length-2];P.start=Number.parseInt(this.sliceSerialize(G),10),this.data.expectingFirstListItemValue=void 0}}function y(){const G=this.resume(),P=this.stack[this.stack.length-1];P.lang=G}function w(){const G=this.resume(),P=this.stack[this.stack.length-1];P.meta=G}function S(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function k(){const G=this.resume(),P=this.stack[this.stack.length-1];P.value=G.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function _(){const G=this.resume(),P=this.stack[this.stack.length-1];P.value=G.replace(/(\r?\n|\r)$/g,"")}function C(G){const P=this.resume(),V=this.stack[this.stack.length-1];V.label=P,V.identifier=Sr(this.sliceSerialize(G)).toLowerCase()}function j(){const G=this.resume(),P=this.stack[this.stack.length-1];P.title=G}function I(){const G=this.resume(),P=this.stack[this.stack.length-1];P.url=G}function D(G){const P=this.stack[this.stack.length-1];if(!P.depth){const V=this.sliceSerialize(G).length;P.depth=V}}function A(){this.data.setextHeadingSlurpLineEnding=!0}function U(G){const P=this.stack[this.stack.length-1];P.depth=this.sliceSerialize(G).codePointAt(0)===61?1:2}function te(){this.data.setextHeadingSlurpLineEnding=void 0}function z(G){const V=this.stack[this.stack.length-1].children;let le=V[V.length-1];(!le||le.type!=="text")&&(le=ye(),le.position={start:_i(G.start),end:void 0},V.push(le)),this.stack.push(le)}function M(G){const P=this.stack.pop();P.value+=this.sliceSerialize(G),P.position.end=_i(G.end)}function $(G){const P=this.stack[this.stack.length-1];if(this.data.atHardBreak){const V=P.children[P.children.length-1];V.position.end=_i(G.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(P.type)&&(z.call(this,G),M.call(this,G))}function ne(){this.data.atHardBreak=!0}function H(){const G=this.resume(),P=this.stack[this.stack.length-1];P.value=G}function Y(){const G=this.resume(),P=this.stack[this.stack.length-1];P.value=G}function K(){const G=this.resume(),P=this.stack[this.stack.length-1];P.value=G}function se(){const G=this.stack[this.stack.length-1];if(this.data.inReference){const P=this.data.referenceType||"shortcut";G.type+="Reference",G.referenceType=P,delete G.url,delete G.title}else delete G.identifier,delete G.label;this.data.referenceType=void 0}function q(){const G=this.stack[this.stack.length-1];if(this.data.inReference){const P=this.data.referenceType||"shortcut";G.type+="Reference",G.referenceType=P,delete G.url,delete G.title}else delete G.identifier,delete G.label;this.data.referenceType=void 0}function F(G){const P=this.sliceSerialize(G),V=this.stack[this.stack.length-2];V.label=tD(P),V.identifier=Sr(P).toLowerCase()}function L(){const G=this.stack[this.stack.length-1],P=this.resume(),V=this.stack[this.stack.length-1];if(this.data.inReference=!0,V.type==="link"){const le=G.children;V.children=le}else V.alt=P}function N(){const G=this.resume(),P=this.stack[this.stack.length-1];P.url=G}function B(){const G=this.resume(),P=this.stack[this.stack.length-1];P.title=G}function ee(){this.data.inReference=void 0}function R(){this.data.referenceType="collapsed"}function be(G){const P=this.resume(),V=this.stack[this.stack.length-1];V.label=P,V.identifier=Sr(this.sliceSerialize(G)).toLowerCase(),this.data.referenceType="full"}function he(G){this.data.characterReferenceType=G.type}function ge(G){const P=this.sliceSerialize(G),V=this.data.characterReferenceType;let le;V?(le=qk(P,V==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):le=xm(P);const Z=this.stack[this.stack.length-1];Z.value+=le}function me(G){const P=this.stack.pop();P.position.end=_i(G.end)}function Ce(G){M.call(this,G);const P=this.stack[this.stack.length-1];P.url=this.sliceSerialize(G)}function Te(G){M.call(this,G);const P=this.stack[this.stack.length-1];P.url="mailto:"+this.sliceSerialize(G)}function je(){return{type:"blockquote",children:[]}}function ie(){return{type:"code",lang:null,meta:null,value:""}}function Ie(){return{type:"inlineCode",value:""}}function He(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function qe(){return{type:"emphasis",children:[]}}function rt(){return{type:"heading",depth:0,children:[]}}function st(){return{type:"break"}}function St(){return{type:"html",value:""}}function fn(){return{type:"image",title:null,url:"",alt:null}}function Xt(){return{type:"link",title:null,url:"",children:[]}}function wt(G){return{type:"list",ordered:G.type==="listOrdered",start:null,spread:G._spread,children:[]}}function Rt(G){return{type:"listItem",spread:G._spread,checked:null,children:[]}}function Q(){return{type:"paragraph",children:[]}}function fe(){return{type:"strong",children:[]}}function ye(){return{type:"text",value:""}}function Ee(){return{type:"thematicBreak"}}}function _i(e){return{line:e.line,column:e.column,offset:e.offset}}function r1(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?r1(e,r):sD(e,r)}}function sD(e,t){let n;for(n in t)if(n1.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function E0(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Wa({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Wa({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Wa({start:t.start,end:t.end})+") is still open")}function oD(e){const t=this;t.parser=n;function n(r){return rD(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function aD(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function lD(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function uD(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function cD(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function dD(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function fD(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=Uo(r.toLowerCase()),o=e.footnoteOrder.indexOf(r);let a,u=e.footnoteCounts.get(r);u===void 0?(u=0,e.footnoteOrder.push(r),a=e.footnoteOrder.length):a=o+1,u+=1,e.footnoteCounts.set(r,u);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(u>1?"-"+u:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};e.patch(t,c);const f={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,f),e.applyData(t,f)}function hD(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function pD(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function i1(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),o=i[0];o&&o.type==="text"?o.value="["+o.value:i.unshift({type:"text",value:"["});const a=i[i.length-1];return a&&a.type==="text"?a.value+=r:i.push({type:"text",value:r}),i}function mD(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return i1(e,t);const i={src:Uo(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const o={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,o),e.applyData(t,o)}function gD(e,t){const n={src:Uo(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function yD(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function vD(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return i1(e,t);const i={href:Uo(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const o={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,o),e.applyData(t,o)}function xD(e,t){const n={href:Uo(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function bD(e,t,n){const r=e.all(t),i=n?wD(n):s1(t),o={},a=[];if(typeof t.checked=="boolean"){const h=r[0];let p;h&&h.type==="element"&&h.tagName==="p"?p=h:(p={type:"element",tagName:"p",properties:{},children:[]},r.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let u=-1;for(;++u<r.length;){const h=r[u];(i||u!==0||h.type!=="element"||h.tagName!=="p")&&a.push({type:"text",value:`
`}),h.type==="element"&&h.tagName==="p"&&!i?a.push(...h.children):a.push(h)}const c=r[r.length-1];c&&(i||c.type!=="element"||c.tagName!=="p")&&a.push({type:"text",value:`
`});const f={type:"element",tagName:"li",properties:o,children:a};return e.patch(t,f),e.applyData(t,f)}function wD(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=s1(n[r])}return t}function s1(e){const t=e.spread;return t??e.children.length>1}function kD(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const a=r[i];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,o),e.applyData(t,o)}function SD(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function ED(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function _D(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function CD(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const a={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],a),i.push(a)}if(n.length>0){const a={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},u=pm(t.children[1]),c=$k(t.children[t.children.length-1]);u&&c&&(a.position={start:u,end:c}),i.push(a)}const o={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,o),e.applyData(t,o)}function jD(e,t,n){const r=n?n.children:void 0,o=(r?r.indexOf(t):1)===0?"th":"td",a=n&&n.type==="table"?n.align:void 0,u=a?a.length:t.children.length;let c=-1;const f=[];for(;++c<u;){const p=t.children[c],v={},y=a?a[c]:void 0;y&&(v.align=y);let w={type:"element",tagName:o,properties:v,children:[]};p&&(w.children=e.all(p),e.patch(p,w),w=e.applyData(p,w)),f.push(w)}const h={type:"element",tagName:"tr",properties:{},children:e.wrap(f,!0)};return e.patch(t,h),e.applyData(t,h)}function ND(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const _0=9,C0=32;function TD(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const o=[];for(;r;)o.push(j0(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return o.push(j0(t.slice(i),i>0,!1)),o.join("")}function j0(e,t,n){let r=0,i=e.length;if(t){let o=e.codePointAt(r);for(;o===_0||o===C0;)r++,o=e.codePointAt(r)}if(n){let o=e.codePointAt(i-1);for(;o===_0||o===C0;)i--,o=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function ID(e,t){const n={type:"text",value:TD(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function PD(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const RD={blockquote:aD,break:lD,code:uD,delete:cD,emphasis:dD,footnoteReference:fD,heading:hD,html:pD,imageReference:mD,image:gD,inlineCode:yD,linkReference:vD,link:xD,listItem:bD,list:kD,paragraph:SD,root:ED,strong:_D,table:CD,tableCell:ND,tableRow:jD,text:ID,thematicBreak:PD,toml:Fu,yaml:Fu,definition:Fu,footnoteDefinition:Fu};function Fu(){}const o1=-1,Kc=0,Va=1,yc=2,wm=3,km=4,Sm=5,Em=6,a1=7,l1=8,N0=typeof self=="object"?self:globalThis,AD=(e,t)=>{const n=(i,o)=>(e.set(o,i),i),r=i=>{if(e.has(i))return e.get(i);const[o,a]=t[i];switch(o){case Kc:case o1:return n(a,i);case Va:{const u=n([],i);for(const c of a)u.push(r(c));return u}case yc:{const u=n({},i);for(const[c,f]of a)u[r(c)]=r(f);return u}case wm:return n(new Date(a),i);case km:{const{source:u,flags:c}=a;return n(new RegExp(u,c),i)}case Sm:{const u=n(new Map,i);for(const[c,f]of a)u.set(r(c),r(f));return u}case Em:{const u=n(new Set,i);for(const c of a)u.add(r(c));return u}case a1:{const{name:u,message:c}=a;return n(new N0[u](c),i)}case l1:return n(BigInt(a),i);case"BigInt":return n(Object(BigInt(a)),i);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:u}=new Uint8Array(a);return n(new DataView(u),a)}}return n(new N0[o](a),i)};return r},T0=e=>AD(new Map,e)(0),ho="",{toString:MD}={},{keys:OD}=Object,Ia=e=>{const t=typeof e;if(t!=="object"||!e)return[Kc,t];const n=MD.call(e).slice(8,-1);switch(n){case"Array":return[Va,ho];case"Object":return[yc,ho];case"Date":return[wm,ho];case"RegExp":return[km,ho];case"Map":return[Sm,ho];case"Set":return[Em,ho];case"DataView":return[Va,n]}return n.includes("Array")?[Va,n]:n.includes("Error")?[a1,n]:[yc,n]},Bu=([e,t])=>e===Kc&&(t==="function"||t==="symbol"),DD=(e,t,n,r)=>{const i=(a,u)=>{const c=r.push(a)-1;return n.set(u,c),c},o=a=>{if(n.has(a))return n.get(a);let[u,c]=Ia(a);switch(u){case Kc:{let h=a;switch(c){case"bigint":u=l1,h=a.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);h=null;break;case"undefined":return i([o1],a)}return i([u,h],a)}case Va:{if(c){let v=a;return c==="DataView"?v=new Uint8Array(a.buffer):c==="ArrayBuffer"&&(v=new Uint8Array(a)),i([c,[...v]],a)}const h=[],p=i([u,h],a);for(const v of a)h.push(o(v));return p}case yc:{if(c)switch(c){case"BigInt":return i([c,a.toString()],a);case"Boolean":case"Number":case"String":return i([c,a.valueOf()],a)}if(t&&"toJSON"in a)return o(a.toJSON());const h=[],p=i([u,h],a);for(const v of OD(a))(e||!Bu(Ia(a[v])))&&h.push([o(v),o(a[v])]);return p}case wm:return i([u,a.toISOString()],a);case km:{const{source:h,flags:p}=a;return i([u,{source:h,flags:p}],a)}case Sm:{const h=[],p=i([u,h],a);for(const[v,y]of a)(e||!(Bu(Ia(v))||Bu(Ia(y))))&&h.push([o(v),o(y)]);return p}case Em:{const h=[],p=i([u,h],a);for(const v of a)(e||!Bu(Ia(v)))&&h.push(o(v));return p}}const{message:f}=a;return i([u,{name:c,message:f}],a)};return o},I0=(e,{json:t,lossy:n}={})=>{const r=[];return DD(!(t||n),!!t,new Map,r)(e),r},vc=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?T0(I0(e,t)):structuredClone(e):(e,t)=>T0(I0(e,t));function LD(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function $D(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function FD(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||LD,r=e.options.footnoteBackLabel||$D,i=e.options.footnoteLabel||"Footnotes",o=e.options.footnoteLabelTagName||"h2",a=e.options.footnoteLabelProperties||{className:["sr-only"]},u=[];let c=-1;for(;++c<e.footnoteOrder.length;){const f=e.footnoteById.get(e.footnoteOrder[c]);if(!f)continue;const h=e.all(f),p=String(f.identifier).toUpperCase(),v=Uo(p.toLowerCase());let y=0;const w=[],S=e.footnoteCounts.get(p);for(;S!==void 0&&++y<=S;){w.length>0&&w.push({type:"text",value:" "});let C=typeof n=="string"?n:n(c,y);typeof C=="string"&&(C={type:"text",value:C}),w.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+v+(y>1?"-"+y:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,y),className:["data-footnote-backref"]},children:Array.isArray(C)?C:[C]})}const k=h[h.length-1];if(k&&k.type==="element"&&k.tagName==="p"){const C=k.children[k.children.length-1];C&&C.type==="text"?C.value+=" ":k.children.push({type:"text",value:" "}),k.children.push(...w)}else h.push(...w);const _={type:"element",tagName:"li",properties:{id:t+"fn-"+v},children:e.wrap(h,!0)};e.patch(f,_),u.push(_)}if(u.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...vc(a),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(u,!0)},{type:"text",value:`
`}]}}const Yc=(function(e){if(e==null)return WD;if(typeof e=="function")return Gc(e);if(typeof e=="object")return Array.isArray(e)?BD(e):zD(e);if(typeof e=="string")return UD(e);throw new Error("Expected function, string, or object as test")});function BD(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Yc(e[n]);return Gc(r);function r(...i){let o=-1;for(;++o<t.length;)if(t[o].apply(this,i))return!0;return!1}}function zD(e){const t=e;return Gc(n);function n(r){const i=r;let o;for(o in e)if(i[o]!==t[o])return!1;return!0}}function UD(e){return Gc(t);function t(n){return n&&n.type===e}}function Gc(e){return t;function t(n,r,i){return!!(HD(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function WD(){return!0}function HD(e){return e!==null&&typeof e=="object"&&"type"in e}const u1=[],VD=!0,kp=!1,qD="skip";function c1(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const o=Yc(i),a=r?-1:1;u(e,void 0,[])();function u(c,f,h){const p=c&&typeof c=="object"?c:{};if(typeof p.type=="string"){const y=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(v,"name",{value:"node ("+(c.type+(y?"<"+y+">":""))+")"})}return v;function v(){let y=u1,w,S,k;if((!t||o(c,f,h[h.length-1]||void 0))&&(y=KD(n(c,h)),y[0]===kp))return y;if("children"in c&&c.children){const _=c;if(_.children&&y[0]!==qD)for(S=(r?_.children.length:-1)+a,k=h.concat(_);S>-1&&S<_.children.length;){const C=_.children[S];if(w=u(C,S,k)(),w[0]===kp)return w;S=typeof w[1]=="number"?w[1]:S+a}}return y}}}function KD(e){return Array.isArray(e)?e:typeof e=="number"?[VD,e]:e==null?u1:[e]}function Jc(e,t,n,r){let i,o,a;typeof t=="function"&&typeof n!="function"?(o=void 0,a=t,i=n):(o=t,a=n,i=r),c1(e,o,u,i);function u(c,f){const h=f[f.length-1],p=h?h.children.indexOf(c):void 0;return a(c,p,h)}}const Sp={}.hasOwnProperty,YD={};function GD(e,t){const n=t||YD,r=new Map,i=new Map,o=new Map,a={...RD,...n.handlers},u={all:f,applyData:QD,definitionById:r,footnoteById:i,footnoteCounts:o,footnoteOrder:[],handlers:a,one:c,options:n,patch:JD,wrap:ZD};return Jc(e,function(h){if(h.type==="definition"||h.type==="footnoteDefinition"){const p=h.type==="definition"?r:i,v=String(h.identifier).toUpperCase();p.has(v)||p.set(v,h)}}),u;function c(h,p){const v=h.type,y=u.handlers[v];if(Sp.call(u.handlers,v)&&y)return y(u,h,p);if(u.options.passThrough&&u.options.passThrough.includes(v)){if("children"in h){const{children:S,...k}=h,_=vc(k);return _.children=u.all(h),_}return vc(h)}return(u.options.unknownHandler||XD)(u,h,p)}function f(h){const p=[];if("children"in h){const v=h.children;let y=-1;for(;++y<v.length;){const w=u.one(v[y],h);if(w){if(y&&v[y-1].type==="break"&&(!Array.isArray(w)&&w.type==="text"&&(w.value=P0(w.value)),!Array.isArray(w)&&w.type==="element")){const S=w.children[0];S&&S.type==="text"&&(S.value=P0(S.value))}Array.isArray(w)?p.push(...w):p.push(w)}}}return p}}function JD(e,t){e.position&&(t.position=$M(e))}function QD(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,o=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const a="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:a}}n.type==="element"&&o&&Object.assign(n.properties,vc(o)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function XD(e,t){const n=t.data||{},r="value"in t&&!(Sp.call(n,"hProperties")||Sp.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function ZD(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function P0(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function R0(e,t){const n=GD(e,t),r=n.one(e,void 0),i=FD(n),o=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&o.children.push({type:"text",value:`
`},i),o}function eL(e,t){return e&&"run"in e?async function(n,r){const i=R0(n,{file:r,...t});await e.run(i,r)}:function(n,r){return R0(n,{file:r,...e||t})}}function A0(e){if(e)throw e}var mh,M0;function tL(){if(M0)return mh;M0=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(f){return typeof Array.isArray=="function"?Array.isArray(f):t.call(f)==="[object Array]"},o=function(f){if(!f||t.call(f)!=="[object Object]")return!1;var h=e.call(f,"constructor"),p=f.constructor&&f.constructor.prototype&&e.call(f.constructor.prototype,"isPrototypeOf");if(f.constructor&&!h&&!p)return!1;var v;for(v in f);return typeof v>"u"||e.call(f,v)},a=function(f,h){n&&h.name==="__proto__"?n(f,h.name,{enumerable:!0,configurable:!0,value:h.newValue,writable:!0}):f[h.name]=h.newValue},u=function(f,h){if(h==="__proto__")if(e.call(f,h)){if(r)return r(f,h).value}else return;return f[h]};return mh=function c(){var f,h,p,v,y,w,S=arguments[0],k=1,_=arguments.length,C=!1;for(typeof S=="boolean"&&(C=S,S=arguments[1]||{},k=2),(S==null||typeof S!="object"&&typeof S!="function")&&(S={});k<_;++k)if(f=arguments[k],f!=null)for(h in f)p=u(S,h),v=u(f,h),S!==v&&(C&&v&&(o(v)||(y=i(v)))?(y?(y=!1,w=p&&i(p)?p:[]):w=p&&o(p)?p:{},a(S,{name:h,newValue:c(C,w,v)})):typeof v<"u"&&a(S,{name:h,newValue:v}));return S},mh}var nL=tL();const gh=Mo(nL);function Ep(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function rL(){const e=[],t={run:n,use:r};return t;function n(...i){let o=-1;const a=i.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);u(null,...i);function u(c,...f){const h=e[++o];let p=-1;if(c){a(c);return}for(;++p<i.length;)(f[p]===null||f[p]===void 0)&&(f[p]=i[p]);i=f,h?iL(h,u)(...f):a(null,...f)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function iL(e,t){let n;return r;function r(...a){const u=e.length>a.length;let c;u&&a.push(i);try{c=e.apply(this,a)}catch(f){const h=f;if(u&&n)throw h;return i(h)}u||(c&&c.then&&typeof c.then=="function"?c.then(o,i):c instanceof Error?i(c):o(c))}function i(a,...u){n||(n=!0,t(a,...u))}function o(a){i(null,a)}}const Mr={basename:sL,dirname:oL,extname:aL,join:lL,sep:"/"};function sL(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');vl(e);let n=0,r=-1,i=e.length,o;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(o){n=i+1;break}}else r<0&&(o=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let a=-1,u=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(o){n=i+1;break}}else a<0&&(o=!0,a=i+1),u>-1&&(e.codePointAt(i)===t.codePointAt(u--)?u<0&&(r=i):(u=-1,r=a));return n===r?r=a:r<0&&(r=e.length),e.slice(n,r)}function oL(e){if(vl(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function aL(e){vl(e);let t=e.length,n=-1,r=0,i=-1,o=0,a;for(;t--;){const u=e.codePointAt(t);if(u===47){if(a){r=t+1;break}continue}n<0&&(a=!0,n=t+1),u===46?i<0?i=t:o!==1&&(o=1):i>-1&&(o=-1)}return i<0||n<0||o===0||o===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function lL(...e){let t=-1,n;for(;++t<e.length;)vl(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":uL(n)}function uL(e){vl(e);const t=e.codePointAt(0)===47;let n=cL(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function cL(e,t){let n="",r=0,i=-1,o=0,a=-1,u,c;for(;++a<=e.length;){if(a<e.length)u=e.codePointAt(a);else{if(u===47)break;u=47}if(u===47){if(!(i===a-1||o===1))if(i!==a-1&&o===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),i=a,o=0;continue}}else if(n.length>0){n="",r=0,i=a,o=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,a):n=e.slice(i+1,a),r=a-i-1;i=a,o=0}else u===46&&o>-1?o++:o=-1}return n}function vl(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const dL={cwd:fL};function fL(){return"/"}function _p(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function hL(e){if(typeof e=="string")e=new URL(e);else if(!_p(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return pL(e)}function pL(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const yh=["history","path","basename","stem","extname","dirname"];class d1{constructor(t){let n;t?_p(t)?n={path:t}:typeof t=="string"||mL(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":dL.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<yh.length;){const o=yh[r];o in n&&n[o]!==void 0&&n[o]!==null&&(this[o]=o==="history"?[...n[o]]:n[o])}let i;for(i in n)yh.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Mr.basename(this.path):void 0}set basename(t){xh(t,"basename"),vh(t,"basename"),this.path=Mr.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Mr.dirname(this.path):void 0}set dirname(t){O0(this.basename,"dirname"),this.path=Mr.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Mr.extname(this.path):void 0}set extname(t){if(vh(t,"extname"),O0(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Mr.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){_p(t)&&(t=hL(t)),xh(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Mr.basename(this.path,this.extname):void 0}set stem(t){xh(t,"stem"),vh(t,"stem"),this.path=Mr.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new En(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function vh(e,t){if(e&&e.includes(Mr.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Mr.sep+"`")}function xh(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function O0(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function mL(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const gL=(function(e){const r=this.constructor.prototype,i=r[e],o=function(){return i.apply(o,arguments)};return Object.setPrototypeOf(o,r),o}),yL={}.hasOwnProperty;class _m extends gL{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=rL()}copy(){const t=new _m;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(gh(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(kh("data",this.frozen),this.namespace[t]=n,this):yL.call(this.namespace,t)&&this.namespace[t]||void 0:t?(kh("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=zu(t),r=this.parser||this.Parser;return bh("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),bh("process",this.parser||this.Parser),wh("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(o,a){const u=zu(t),c=r.parse(u);r.run(c,u,function(h,p,v){if(h||!p||!v)return f(h);const y=p,w=r.stringify(y,v);bL(w)?v.value=w:v.result=w,f(h,v)});function f(h,p){h||!p?a(h):o?o(p):n(void 0,p)}}}processSync(t){let n=!1,r;return this.freeze(),bh("processSync",this.parser||this.Parser),wh("processSync",this.compiler||this.Compiler),this.process(t,i),L0("processSync","process",n),r;function i(o,a){n=!0,A0(o),r=a}}run(t,n,r){D0(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?o(void 0,r):new Promise(o);function o(a,u){const c=zu(n);i.run(t,c,f);function f(h,p,v){const y=p||t;h?u(h):a?a(y):r(void 0,y,v)}}}runSync(t,n){let r=!1,i;return this.run(t,n,o),L0("runSync","run",r),i;function o(a,u){A0(a),i=u,r=!0}}stringify(t,n){this.freeze();const r=zu(n),i=this.compiler||this.Compiler;return wh("stringify",i),D0(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(kh("use",this.frozen),t!=null)if(typeof t=="function")c(t,n);else if(typeof t=="object")Array.isArray(t)?u(t):a(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function o(f){if(typeof f=="function")c(f,[]);else if(typeof f=="object")if(Array.isArray(f)){const[h,...p]=f;c(h,p)}else a(f);else throw new TypeError("Expected usable value, not `"+f+"`")}function a(f){if(!("plugins"in f)&&!("settings"in f))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");u(f.plugins),f.settings&&(i.settings=gh(!0,i.settings,f.settings))}function u(f){let h=-1;if(f!=null)if(Array.isArray(f))for(;++h<f.length;){const p=f[h];o(p)}else throw new TypeError("Expected a list of plugins, not `"+f+"`")}function c(f,h){let p=-1,v=-1;for(;++p<r.length;)if(r[p][0]===f){v=p;break}if(v===-1)r.push([f,...h]);else if(h.length>0){let[y,...w]=h;const S=r[v][1];Ep(S)&&Ep(y)&&(y=gh(!0,S,y)),r[v]=[f,y,...w]}}}}const vL=new _m().freeze();function bh(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function wh(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function kh(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function D0(e){if(!Ep(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function L0(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function zu(e){return xL(e)?e:new d1(e)}function xL(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function bL(e){return typeof e=="string"||wL(e)}function wL(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const kL="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",$0=[],F0={allowDangerousHtml:!0},SL=/^(https?|ircs?|mailto|xmpp)$/i,EL=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function _L(e){const t=CL(e),n=jL(e);return NL(t.runSync(t.parse(n),n),e)}function CL(e){const t=e.rehypePlugins||$0,n=e.remarkPlugins||$0,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...F0}:F0;return vL().use(oD).use(n).use(eL,r).use(t)}function jL(e){const t=e.children||"",n=new d1;return typeof t=="string"&&(n.value=t),n}function NL(e,t){const n=t.allowedElements,r=t.allowElement,i=t.components,o=t.disallowedElements,a=t.skipHtml,u=t.unwrapDisallowed,c=t.urlTransform||TL;for(const h of EL)Object.hasOwn(t,h.from)&&(""+h.from+(h.to?"use `"+h.to+"` instead":"remove it")+kL+h.id,void 0);return t.className&&(e={type:"element",tagName:"div",properties:{className:t.className},children:e.type==="root"?e.children:[e]}),Jc(e,f),WM(e,{Fragment:m.Fragment,components:i,ignoreInvalidStyle:!0,jsx:m.jsx,jsxs:m.jsxs,passKeys:!0,passNode:!0});function f(h,p,v){if(h.type==="raw"&&v&&typeof p=="number")return a?v.children.splice(p,1):v.children[p]={type:"text",value:h.value},p;if(h.type==="element"){let y;for(y in fh)if(Object.hasOwn(fh,y)&&Object.hasOwn(h.properties,y)){const w=h.properties[y],S=fh[y];(S===null||S.includes(h.tagName))&&(h.properties[y]=c(String(w||""),y,h))}}if(h.type==="element"){let y=n?!n.includes(h.tagName):o?o.includes(h.tagName):!1;if(!y&&r&&typeof p=="number"&&(y=!r(h,p,v)),y&&v&&typeof p=="number")return u&&h.children?v.children.splice(p,1,...h.children):v.children.splice(p,1),p}}}function TL(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||n!==-1&&t>n||r!==-1&&t>r||SL.test(e.slice(0,t))?e:""}function B0(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(t);for(;i!==-1;)r++,i=n.indexOf(t,i+t.length);return r}function IL(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function PL(e,t,n){const i=Yc((n||{}).ignore||[]),o=RL(t);let a=-1;for(;++a<o.length;)c1(e,"text",u);function u(f,h){let p=-1,v;for(;++p<h.length;){const y=h[p],w=v?v.children:void 0;if(i(y,w?w.indexOf(y):void 0,v))return;v=y}if(v)return c(f,h)}function c(f,h){const p=h[h.length-1],v=o[a][0],y=o[a][1];let w=0;const k=p.children.indexOf(f);let _=!1,C=[];v.lastIndex=0;let j=v.exec(f.value);for(;j;){const I=j.index,D={index:j.index,input:j.input,stack:[...h,f]};let A=y(...j,D);if(typeof A=="string"&&(A=A.length>0?{type:"text",value:A}:void 0),A===!1?v.lastIndex=I+1:(w!==I&&C.push({type:"text",value:f.value.slice(w,I)}),Array.isArray(A)?C.push(...A):A&&C.push(A),w=I+j[0].length,_=!0),!v.global)break;j=v.exec(f.value)}return _?(w<f.value.length&&C.push({type:"text",value:f.value.slice(w)}),p.children.splice(k,1,...C)):C=[f],k+C.length}}function RL(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const i=n[r];t.push([AL(i[0]),ML(i[1])])}return t}function AL(e){return typeof e=="string"?new RegExp(IL(e),"g"):e}function ML(e){return typeof e=="function"?e:function(){return e}}const Sh="phrasing",Eh=["autolink","link","image","label"];function OL(){return{transforms:[UL],enter:{literalAutolink:LL,literalAutolinkEmail:_h,literalAutolinkHttp:_h,literalAutolinkWww:_h},exit:{literalAutolink:zL,literalAutolinkEmail:BL,literalAutolinkHttp:$L,literalAutolinkWww:FL}}}function DL(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Sh,notInConstruct:Eh},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Sh,notInConstruct:Eh},{character:":",before:"[ps]",after:"\\/",inConstruct:Sh,notInConstruct:Eh}]}}function LL(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function _h(e){this.config.enter.autolinkProtocol.call(this,e)}function $L(e){this.config.exit.autolinkProtocol.call(this,e)}function FL(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function BL(e){this.config.exit.autolinkEmail.call(this,e)}function zL(e){this.exit(e)}function UL(e){PL(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,WL],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),HL]],{ignore:["link","linkReference"]})}function WL(e,t,n,r,i){let o="";if(!f1(i)||(/^w/i.test(t)&&(n=t+n,t="",o="http://"),!VL(n)))return!1;const a=qL(n+r);if(!a[0])return!1;const u={type:"link",title:null,url:o+t+a[0],children:[{type:"text",value:t+a[0]}]};return a[1]?[u,{type:"text",value:a[1]}]:u}function HL(e,t,n,r){return!f1(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function VL(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function qL(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const i=B0(e,"(");let o=B0(e,")");for(;r!==-1&&i>o;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),o++;return[e,n]}function f1(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||Ss(n)||Vc(n))&&(!t||n!==47)}h1.peek=t$;function KL(){this.buffer()}function YL(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function GL(){this.buffer()}function JL(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function QL(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Sr(this.sliceSerialize(e)).toLowerCase(),n.label=t}function XL(e){this.exit(e)}function ZL(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Sr(this.sliceSerialize(e)).toLowerCase(),n.label=t}function e$(e){this.exit(e)}function t$(){return"["}function h1(e,t,n,r){const i=n.createTracker(r);let o=i.move("[^");const a=n.enter("footnoteReference"),u=n.enter("reference");return o+=i.move(n.safe(n.associationId(e),{after:"]",before:o})),u(),a(),o+=i.move("]"),o}function n$(){return{enter:{gfmFootnoteCallString:KL,gfmFootnoteCall:YL,gfmFootnoteDefinitionLabelString:GL,gfmFootnoteDefinition:JL},exit:{gfmFootnoteCallString:QL,gfmFootnoteCall:XL,gfmFootnoteDefinitionLabelString:ZL,gfmFootnoteDefinition:e$}}}function r$(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:h1},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,o,a){const u=o.createTracker(a);let c=u.move("[^");const f=o.enter("footnoteDefinition"),h=o.enter("label");return c+=u.move(o.safe(o.associationId(r),{before:c,after:"]"})),h(),c+=u.move("]:"),r.children&&r.children.length>0&&(u.shift(4),c+=u.move((t?`
`:" ")+o.indentLines(o.containerFlow(r,u.current()),t?p1:i$))),f(),c}}function i$(e,t,n){return t===0?e:p1(e,t,n)}function p1(e,t,n){return(n?"":"    ")+e}const s$=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];m1.peek=c$;function o$(){return{canContainEols:["delete"],enter:{strikethrough:l$},exit:{strikethrough:u$}}}function a$(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:s$}],handlers:{delete:m1}}}function l$(e){this.enter({type:"delete",children:[]},e)}function u$(e){this.exit(e)}function m1(e,t,n,r){const i=n.createTracker(r),o=n.enter("strikethrough");let a=i.move("~~");return a+=n.containerPhrasing(e,{...i.current(),before:a,after:"~"}),a+=i.move("~~"),o(),a}function c$(){return"~"}function d$(e){return e.length}function f$(e,t){const n=t||{},r=(n.align||[]).concat(),i=n.stringLength||d$,o=[],a=[],u=[],c=[];let f=0,h=-1;for(;++h<e.length;){const S=[],k=[];let _=-1;for(e[h].length>f&&(f=e[h].length);++_<e[h].length;){const C=h$(e[h][_]);if(n.alignDelimiters!==!1){const j=i(C);k[_]=j,(c[_]===void 0||j>c[_])&&(c[_]=j)}S.push(C)}a[h]=S,u[h]=k}let p=-1;if(typeof r=="object"&&"length"in r)for(;++p<f;)o[p]=z0(r[p]);else{const S=z0(r);for(;++p<f;)o[p]=S}p=-1;const v=[],y=[];for(;++p<f;){const S=o[p];let k="",_="";S===99?(k=":",_=":"):S===108?k=":":S===114&&(_=":");let C=n.alignDelimiters===!1?1:Math.max(1,c[p]-k.length-_.length);const j=k+"-".repeat(C)+_;n.alignDelimiters!==!1&&(C=k.length+C+_.length,C>c[p]&&(c[p]=C),y[p]=C),v[p]=j}a.splice(1,0,v),u.splice(1,0,y),h=-1;const w=[];for(;++h<a.length;){const S=a[h],k=u[h];p=-1;const _=[];for(;++p<f;){const C=S[p]||"";let j="",I="";if(n.alignDelimiters!==!1){const D=c[p]-(k[p]||0),A=o[p];A===114?j=" ".repeat(D):A===99?D%2?(j=" ".repeat(D/2+.5),I=" ".repeat(D/2-.5)):(j=" ".repeat(D/2),I=j):I=" ".repeat(D)}n.delimiterStart!==!1&&!p&&_.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&C==="")&&(n.delimiterStart!==!1||p)&&_.push(" "),n.alignDelimiters!==!1&&_.push(j),_.push(C),n.alignDelimiters!==!1&&_.push(I),n.padding!==!1&&_.push(" "),(n.delimiterEnd!==!1||p!==f-1)&&_.push("|")}w.push(n.delimiterEnd===!1?_.join("").replace(/ +$/,""):_.join(""))}return w.join(`
`)}function h$(e){return e==null?"":String(e)}function z0(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function p$(e,t,n,r){const i=n.enter("blockquote"),o=n.createTracker(r);o.move("> "),o.shift(2);const a=n.indentLines(n.containerFlow(e,o.current()),m$);return i(),a}function m$(e,t,n){return">"+(n?"":" ")+e}function g$(e,t){return U0(e,t.inConstruct,!0)&&!U0(e,t.notInConstruct,!1)}function U0(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function W0(e,t,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&g$(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function y$(e,t){const n=String(e);let r=n.indexOf(t),i=r,o=0,a=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++o>a&&(a=o):o=1,i=r+t.length,r=n.indexOf(t,i);return a}function v$(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function x$(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function b$(e,t,n,r){const i=x$(n),o=e.value||"",a=i==="`"?"GraveAccent":"Tilde";if(v$(e,n)){const p=n.enter("codeIndented"),v=n.indentLines(o,w$);return p(),v}const u=n.createTracker(r),c=i.repeat(Math.max(y$(o,i)+1,3)),f=n.enter("codeFenced");let h=u.move(c);if(e.lang){const p=n.enter(`codeFencedLang${a}`);h+=u.move(n.safe(e.lang,{before:h,after:" ",encode:["`"],...u.current()})),p()}if(e.lang&&e.meta){const p=n.enter(`codeFencedMeta${a}`);h+=u.move(" "),h+=u.move(n.safe(e.meta,{before:h,after:`
`,encode:["`"],...u.current()})),p()}return h+=u.move(`
`),o&&(h+=u.move(o+`
`)),h+=u.move(c),f(),h}function w$(e,t,n){return(n?"":"    ")+e}function Cm(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function k$(e,t,n,r){const i=Cm(n),o=i==='"'?"Quote":"Apostrophe",a=n.enter("definition");let u=n.enter("label");const c=n.createTracker(r);let f=c.move("[");return f+=c.move(n.safe(n.associationId(e),{before:f,after:"]",...c.current()})),f+=c.move("]: "),u(),!e.url||/[\0- \u007F]/.test(e.url)?(u=n.enter("destinationLiteral"),f+=c.move("<"),f+=c.move(n.safe(e.url,{before:f,after:">",...c.current()})),f+=c.move(">")):(u=n.enter("destinationRaw"),f+=c.move(n.safe(e.url,{before:f,after:e.title?" ":`
`,...c.current()}))),u(),e.title&&(u=n.enter(`title${o}`),f+=c.move(" "+i),f+=c.move(n.safe(e.title,{before:f,after:i,...c.current()})),f+=c.move(i),u()),a(),f}function S$(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function sl(e){return"&#x"+e.toString(16).toUpperCase()+";"}function xc(e,t,n){const r=Ao(e),i=Ao(t);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}g1.peek=E$;function g1(e,t,n,r){const i=S$(n),o=n.enter("emphasis"),a=n.createTracker(r),u=a.move(i);let c=a.move(n.containerPhrasing(e,{after:i,before:u,...a.current()}));const f=c.charCodeAt(0),h=xc(r.before.charCodeAt(r.before.length-1),f,i);h.inside&&(c=sl(f)+c.slice(1));const p=c.charCodeAt(c.length-1),v=xc(r.after.charCodeAt(0),p,i);v.inside&&(c=c.slice(0,-1)+sl(p));const y=a.move(i);return o(),n.attentionEncodeSurroundingInfo={after:v.outside,before:h.outside},u+c+y}function E$(e,t,n){return n.options.emphasis||"*"}function _$(e,t){let n=!1;return Jc(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,kp}),!!((!e.depth||e.depth<3)&&vm(e)&&(t.options.setext||n))}function C$(e,t,n,r){const i=Math.max(Math.min(6,e.depth||1),1),o=n.createTracker(r);if(_$(e,n)){const h=n.enter("headingSetext"),p=n.enter("phrasing"),v=n.containerPhrasing(e,{...o.current(),before:`
`,after:`
`});return p(),h(),v+`
`+(i===1?"=":"-").repeat(v.length-(Math.max(v.lastIndexOf("\r"),v.lastIndexOf(`
`))+1))}const a="#".repeat(i),u=n.enter("headingAtx"),c=n.enter("phrasing");o.move(a+" ");let f=n.containerPhrasing(e,{before:"# ",after:`
`,...o.current()});return/^[\t ]/.test(f)&&(f=sl(f.charCodeAt(0))+f.slice(1)),f=f?a+" "+f:a,n.options.closeAtx&&(f+=" "+a),c(),u(),f}y1.peek=j$;function y1(e){return e.value||""}function j$(){return"<"}v1.peek=N$;function v1(e,t,n,r){const i=Cm(n),o=i==='"'?"Quote":"Apostrophe",a=n.enter("image");let u=n.enter("label");const c=n.createTracker(r);let f=c.move("![");return f+=c.move(n.safe(e.alt,{before:f,after:"]",...c.current()})),f+=c.move("]("),u(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(u=n.enter("destinationLiteral"),f+=c.move("<"),f+=c.move(n.safe(e.url,{before:f,after:">",...c.current()})),f+=c.move(">")):(u=n.enter("destinationRaw"),f+=c.move(n.safe(e.url,{before:f,after:e.title?" ":")",...c.current()}))),u(),e.title&&(u=n.enter(`title${o}`),f+=c.move(" "+i),f+=c.move(n.safe(e.title,{before:f,after:i,...c.current()})),f+=c.move(i),u()),f+=c.move(")"),a(),f}function N$(){return"!"}x1.peek=T$;function x1(e,t,n,r){const i=e.referenceType,o=n.enter("imageReference");let a=n.enter("label");const u=n.createTracker(r);let c=u.move("![");const f=n.safe(e.alt,{before:c,after:"]",...u.current()});c+=u.move(f+"]["),a();const h=n.stack;n.stack=[],a=n.enter("reference");const p=n.safe(n.associationId(e),{before:c,after:"]",...u.current()});return a(),n.stack=h,o(),i==="full"||!f||f!==p?c+=u.move(p+"]"):i==="shortcut"?c=c.slice(0,-1):c+=u.move("]"),c}function T$(){return"!"}b1.peek=I$;function b1(e,t,n){let r=e.value||"",i="`",o=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++o<n.unsafe.length;){const a=n.unsafe[o],u=n.compilePattern(a);let c;if(a.atBreak)for(;c=u.exec(r);){let f=c.index;r.charCodeAt(f)===10&&r.charCodeAt(f-1)===13&&f--,r=r.slice(0,f)+" "+r.slice(c.index+1)}}return i+r+i}function I$(){return"`"}function w1(e,t){const n=vm(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}k1.peek=P$;function k1(e,t,n,r){const i=Cm(n),o=i==='"'?"Quote":"Apostrophe",a=n.createTracker(r);let u,c;if(w1(e,n)){const h=n.stack;n.stack=[],u=n.enter("autolink");let p=a.move("<");return p+=a.move(n.containerPhrasing(e,{before:p,after:">",...a.current()})),p+=a.move(">"),u(),n.stack=h,p}u=n.enter("link"),c=n.enter("label");let f=a.move("[");return f+=a.move(n.containerPhrasing(e,{before:f,after:"](",...a.current()})),f+=a.move("]("),c(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(c=n.enter("destinationLiteral"),f+=a.move("<"),f+=a.move(n.safe(e.url,{before:f,after:">",...a.current()})),f+=a.move(">")):(c=n.enter("destinationRaw"),f+=a.move(n.safe(e.url,{before:f,after:e.title?" ":")",...a.current()}))),c(),e.title&&(c=n.enter(`title${o}`),f+=a.move(" "+i),f+=a.move(n.safe(e.title,{before:f,after:i,...a.current()})),f+=a.move(i),c()),f+=a.move(")"),u(),f}function P$(e,t,n){return w1(e,n)?"<":"["}S1.peek=R$;function S1(e,t,n,r){const i=e.referenceType,o=n.enter("linkReference");let a=n.enter("label");const u=n.createTracker(r);let c=u.move("[");const f=n.containerPhrasing(e,{before:c,after:"]",...u.current()});c+=u.move(f+"]["),a();const h=n.stack;n.stack=[],a=n.enter("reference");const p=n.safe(n.associationId(e),{before:c,after:"]",...u.current()});return a(),n.stack=h,o(),i==="full"||!f||f!==p?c+=u.move(p+"]"):i==="shortcut"?c=c.slice(0,-1):c+=u.move("]"),c}function R$(){return"["}function jm(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function A$(e){const t=jm(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function M$(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function E1(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function O$(e,t,n,r){const i=n.enter("list"),o=n.bulletCurrent;let a=e.ordered?M$(n):jm(n);const u=e.ordered?a==="."?")":".":A$(n);let c=t&&n.bulletLastUsed?a===n.bulletLastUsed:!1;if(!e.ordered){const h=e.children?e.children[0]:void 0;if((a==="*"||a==="-")&&h&&(!h.children||!h.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),E1(n)===a&&h){let p=-1;for(;++p<e.children.length;){const v=e.children[p];if(v&&v.type==="listItem"&&v.children&&v.children[0]&&v.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(a=u),n.bulletCurrent=a;const f=n.containerFlow(e,r);return n.bulletLastUsed=a,n.bulletCurrent=o,i(),f}function D$(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function L$(e,t,n,r){const i=D$(n);let o=n.bulletCurrent||jm(n);t&&t.type==="list"&&t.ordered&&(o=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+o);let a=o.length+1;(i==="tab"||i==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(a=Math.ceil(a/4)*4);const u=n.createTracker(r);u.move(o+" ".repeat(a-o.length)),u.shift(a);const c=n.enter("listItem"),f=n.indentLines(n.containerFlow(e,u.current()),h);return c(),f;function h(p,v,y){return v?(y?"":" ".repeat(a))+p:(y?o:o+" ".repeat(a-o.length))+p}}function $$(e,t,n,r){const i=n.enter("paragraph"),o=n.enter("phrasing"),a=n.containerPhrasing(e,r);return o(),i(),a}const F$=Yc(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function B$(e,t,n,r){return(e.children.some(function(a){return F$(a)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function z$(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}_1.peek=U$;function _1(e,t,n,r){const i=z$(n),o=n.enter("strong"),a=n.createTracker(r),u=a.move(i+i);let c=a.move(n.containerPhrasing(e,{after:i,before:u,...a.current()}));const f=c.charCodeAt(0),h=xc(r.before.charCodeAt(r.before.length-1),f,i);h.inside&&(c=sl(f)+c.slice(1));const p=c.charCodeAt(c.length-1),v=xc(r.after.charCodeAt(0),p,i);v.inside&&(c=c.slice(0,-1)+sl(p));const y=a.move(i+i);return o(),n.attentionEncodeSurroundingInfo={after:v.outside,before:h.outside},u+c+y}function U$(e,t,n){return n.options.strong||"*"}function W$(e,t,n,r){return n.safe(e.value,r)}function H$(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function V$(e,t,n){const r=(E1(n)+(n.options.ruleSpaces?" ":"")).repeat(H$(n));return n.options.ruleSpaces?r.slice(0,-1):r}const C1={blockquote:p$,break:W0,code:b$,definition:k$,emphasis:g1,hardBreak:W0,heading:C$,html:y1,image:v1,imageReference:x1,inlineCode:b1,link:k1,linkReference:S1,list:O$,listItem:L$,paragraph:$$,root:B$,strong:_1,text:W$,thematicBreak:V$};function q$(){return{enter:{table:K$,tableData:H0,tableHeader:H0,tableRow:G$},exit:{codeText:J$,table:Y$,tableData:Ch,tableHeader:Ch,tableRow:Ch}}}function K$(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function Y$(e){this.exit(e),this.data.inTable=void 0}function G$(e){this.enter({type:"tableRow",children:[]},e)}function Ch(e){this.exit(e)}function H0(e){this.enter({type:"tableCell",children:[]},e)}function J$(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,Q$));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function Q$(e,t){return t==="|"?t:e}function X$(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,i=t.stringLength,o=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:v,table:a,tableCell:c,tableRow:u}};function a(y,w,S,k){return f(h(y,S,k),y.align)}function u(y,w,S,k){const _=p(y,S,k),C=f([_]);return C.slice(0,C.indexOf(`
`))}function c(y,w,S,k){const _=S.enter("tableCell"),C=S.enter("phrasing"),j=S.containerPhrasing(y,{...k,before:o,after:o});return C(),_(),j}function f(y,w){return f$(y,{align:w,alignDelimiters:r,padding:n,stringLength:i})}function h(y,w,S){const k=y.children;let _=-1;const C=[],j=w.enter("table");for(;++_<k.length;)C[_]=p(k[_],w,S);return j(),C}function p(y,w,S){const k=y.children;let _=-1;const C=[],j=w.enter("tableRow");for(;++_<k.length;)C[_]=c(k[_],y,w,S);return j(),C}function v(y,w,S){let k=C1.inlineCode(y,w,S);return S.stack.includes("tableCell")&&(k=k.replace(/\|/g,"\\$&")),k}}function Z$(){return{exit:{taskListCheckValueChecked:V0,taskListCheckValueUnchecked:V0,paragraph:t4}}}function e4(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:n4}}}function V0(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function t4(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=t.children;let o=-1,a;for(;++o<i.length;){const u=i[o];if(u.type==="paragraph"){a=u;break}}a===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function n4(e,t,n,r){const i=e.children[0],o=typeof e.checked=="boolean"&&i&&i.type==="paragraph",a="["+(e.checked?"x":" ")+"] ",u=n.createTracker(r);o&&u.move(a);let c=C1.listItem(e,t,n,{...r,...u.current()});return o&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,f)),c;function f(h){return h+a}}function r4(){return[OL(),n$(),o$(),q$(),Z$()]}function i4(e){return{extensions:[DL(),r$(e),a$(),X$(e),e4()]}}const s4={tokenize:d4,partial:!0},j1={tokenize:f4,partial:!0},N1={tokenize:h4,partial:!0},T1={tokenize:p4,partial:!0},o4={tokenize:m4,partial:!0},I1={name:"wwwAutolink",tokenize:u4,previous:R1},P1={name:"protocolAutolink",tokenize:c4,previous:A1},ii={name:"emailAutolink",tokenize:l4,previous:M1},Wr={};function a4(){return{text:Wr}}let as=48;for(;as<123;)Wr[as]=ii,as++,as===58?as=65:as===91&&(as=97);Wr[43]=ii;Wr[45]=ii;Wr[46]=ii;Wr[95]=ii;Wr[72]=[ii,P1];Wr[104]=[ii,P1];Wr[87]=[ii,I1];Wr[119]=[ii,I1];function l4(e,t,n){const r=this;let i,o;return a;function a(p){return!Cp(p)||!M1.call(r,r.previous)||Nm(r.events)?n(p):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),u(p))}function u(p){return Cp(p)?(e.consume(p),u):p===64?(e.consume(p),c):n(p)}function c(p){return p===46?e.check(o4,h,f)(p):p===45||p===95||Sn(p)?(o=!0,e.consume(p),c):h(p)}function f(p){return e.consume(p),i=!0,c}function h(p){return o&&i&&jn(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(p)):n(p)}}function u4(e,t,n){const r=this;return i;function i(a){return a!==87&&a!==119||!R1.call(r,r.previous)||Nm(r.events)?n(a):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(s4,e.attempt(j1,e.attempt(N1,o),n),n)(a))}function o(a){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(a)}}function c4(e,t,n){const r=this;let i="",o=!1;return a;function a(p){return(p===72||p===104)&&A1.call(r,r.previous)&&!Nm(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),i+=String.fromCodePoint(p),e.consume(p),u):n(p)}function u(p){if(jn(p)&&i.length<5)return i+=String.fromCodePoint(p),e.consume(p),u;if(p===58){const v=i.toLowerCase();if(v==="http"||v==="https")return e.consume(p),c}return n(p)}function c(p){return p===47?(e.consume(p),o?f:(o=!0,c)):n(p)}function f(p){return p===null||gc(p)||_t(p)||Ss(p)||Vc(p)?n(p):e.attempt(j1,e.attempt(N1,h),n)(p)}function h(p){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(p)}}function d4(e,t,n){let r=0;return i;function i(a){return(a===87||a===119)&&r<3?(r++,e.consume(a),i):a===46&&r===3?(e.consume(a),o):n(a)}function o(a){return a===null?n(a):t(a)}}function f4(e,t,n){let r,i,o;return a;function a(f){return f===46||f===95?e.check(T1,c,u)(f):f===null||_t(f)||Ss(f)||f!==45&&Vc(f)?c(f):(o=!0,e.consume(f),a)}function u(f){return f===95?r=!0:(i=r,r=void 0),e.consume(f),a}function c(f){return i||r||!o?n(f):t(f)}}function h4(e,t){let n=0,r=0;return i;function i(a){return a===40?(n++,e.consume(a),i):a===41&&r<n?o(a):a===33||a===34||a===38||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===60||a===63||a===93||a===95||a===126?e.check(T1,t,o)(a):a===null||_t(a)||Ss(a)?t(a):(e.consume(a),i)}function o(a){return a===41&&r++,e.consume(a),i}}function p4(e,t,n){return r;function r(u){return u===33||u===34||u===39||u===41||u===42||u===44||u===46||u===58||u===59||u===63||u===95||u===126?(e.consume(u),r):u===38?(e.consume(u),o):u===93?(e.consume(u),i):u===60||u===null||_t(u)||Ss(u)?t(u):n(u)}function i(u){return u===null||u===40||u===91||_t(u)||Ss(u)?t(u):r(u)}function o(u){return jn(u)?a(u):n(u)}function a(u){return u===59?(e.consume(u),r):jn(u)?(e.consume(u),a):n(u)}}function m4(e,t,n){return r;function r(o){return e.consume(o),i}function i(o){return Sn(o)?n(o):t(o)}}function R1(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||_t(e)}function A1(e){return!jn(e)}function M1(e){return!(e===47||Cp(e))}function Cp(e){return e===43||e===45||e===46||e===95||Sn(e)}function Nm(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const g4={tokenize:E4,partial:!0};function y4(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:w4,continuation:{tokenize:k4},exit:S4}},text:{91:{name:"gfmFootnoteCall",tokenize:b4},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:v4,resolveTo:x4}}}}function v4(e,t,n){const r=this;let i=r.events.length;const o=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a;for(;i--;){const c=r.events[i][1];if(c.type==="labelImage"){a=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return u;function u(c){if(!a||!a._balanced)return n(c);const f=Sr(r.sliceSerialize({start:a.end,end:r.now()}));return f.codePointAt(0)!==94||!o.includes(f.slice(1))?n(c):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(c),e.exit("gfmFootnoteCallLabelMarker"),t(c))}}function x4(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const o={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},a={type:"chunkString",contentType:"string",start:Object.assign({},o.start),end:Object.assign({},o.end)},u=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",i,t],["exit",i,t],["enter",o,t],["enter",a,t],["exit",a,t],["exit",o,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...u),e}function b4(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o=0,a;return u;function u(p){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(p),e.exit("gfmFootnoteCallLabelMarker"),c}function c(p){return p!==94?n(p):(e.enter("gfmFootnoteCallMarker"),e.consume(p),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",f)}function f(p){if(o>999||p===93&&!a||p===null||p===91||_t(p))return n(p);if(p===93){e.exit("chunkString");const v=e.exit("gfmFootnoteCallString");return i.includes(Sr(r.sliceSerialize(v)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(p),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(p)}return _t(p)||(a=!0),o++,e.consume(p),p===92?h:f}function h(p){return p===91||p===92||p===93?(e.consume(p),o++,f):f(p)}}function w4(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o,a=0,u;return c;function c(w){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(w),e.exit("gfmFootnoteDefinitionLabelMarker"),f}function f(w){return w===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(w),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",h):n(w)}function h(w){if(a>999||w===93&&!u||w===null||w===91||_t(w))return n(w);if(w===93){e.exit("chunkString");const S=e.exit("gfmFootnoteDefinitionLabelString");return o=Sr(r.sliceSerialize(S)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(w),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),v}return _t(w)||(u=!0),a++,e.consume(w),w===92?p:h}function p(w){return w===91||w===92||w===93?(e.consume(w),a++,h):h(w)}function v(w){return w===58?(e.enter("definitionMarker"),e.consume(w),e.exit("definitionMarker"),i.includes(o)||i.push(o),ht(e,y,"gfmFootnoteDefinitionWhitespace")):n(w)}function y(w){return t(w)}}function k4(e,t,n){return e.check(yl,t,e.attempt(g4,t,n))}function S4(e){e.exit("gfmFootnoteDefinition")}function E4(e,t,n){const r=this;return ht(e,i,"gfmFootnoteDefinitionIndent",5);function i(o){const a=r.events[r.events.length-1];return a&&a[1].type==="gfmFootnoteDefinitionIndent"&&a[2].sliceSerialize(a[1],!0).length===4?t(o):n(o)}}function _4(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:o,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(a,u){let c=-1;for(;++c<a.length;)if(a[c][0]==="enter"&&a[c][1].type==="strikethroughSequenceTemporary"&&a[c][1]._close){let f=c;for(;f--;)if(a[f][0]==="exit"&&a[f][1].type==="strikethroughSequenceTemporary"&&a[f][1]._open&&a[c][1].end.offset-a[c][1].start.offset===a[f][1].end.offset-a[f][1].start.offset){a[c][1].type="strikethroughSequence",a[f][1].type="strikethroughSequence";const h={type:"strikethrough",start:Object.assign({},a[f][1].start),end:Object.assign({},a[c][1].end)},p={type:"strikethroughText",start:Object.assign({},a[f][1].end),end:Object.assign({},a[c][1].start)},v=[["enter",h,u],["enter",a[f][1],u],["exit",a[f][1],u],["enter",p,u]],y=u.parser.constructs.insideSpan.null;y&&er(v,v.length,0,qc(y,a.slice(f+1,c),u)),er(v,v.length,0,[["exit",p,u],["enter",a[c][1],u],["exit",a[c][1],u],["exit",h,u]]),er(a,f-1,c-f+3,v),c=f+v.length-2;break}}for(c=-1;++c<a.length;)a[c][1].type==="strikethroughSequenceTemporary"&&(a[c][1].type="data");return a}function o(a,u,c){const f=this.previous,h=this.events;let p=0;return v;function v(w){return f===126&&h[h.length-1][1].type!=="characterEscape"?c(w):(a.enter("strikethroughSequenceTemporary"),y(w))}function y(w){const S=Ao(f);if(w===126)return p>1?c(w):(a.consume(w),p++,y);if(p<2&&!n)return c(w);const k=a.exit("strikethroughSequenceTemporary"),_=Ao(w);return k._open=!_||_===2&&!!S,k._close=!S||S===2&&!!_,u(w)}}}class C4{constructor(){this.map=[]}add(t,n,r){j4(this,t,n,r)}consume(t){if(this.map.sort(function(o,a){return o[0]-a[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let i=r.pop();for(;i;){for(const o of i)t.push(o);i=r.pop()}this.map.length=0}}function j4(e,t,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<e.map.length;){if(e.map[i][0]===t){e.map[i][1]+=n,e.map[i][2].push(...r);return}i+=1}e.map.push([t,n,r])}}function N4(e,t){let n=!1;const r=[];for(;t<e.length;){const i=e[t];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const o=r.length-1;r[o]=r[o]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function T4(){return{flow:{null:{name:"table",tokenize:I4,resolveAll:P4}}}}function I4(e,t,n){const r=this;let i=0,o=0,a;return u;function u(M){let $=r.events.length-1;for(;$>-1;){const Y=r.events[$][1].type;if(Y==="lineEnding"||Y==="linePrefix")$--;else break}const ne=$>-1?r.events[$][1].type:null,H=ne==="tableHead"||ne==="tableRow"?A:c;return H===A&&r.parser.lazy[r.now().line]?n(M):H(M)}function c(M){return e.enter("tableHead"),e.enter("tableRow"),f(M)}function f(M){return M===124||(a=!0,o+=1),h(M)}function h(M){return M===null?n(M):Ze(M)?o>1?(o=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(M),e.exit("lineEnding"),y):n(M):ct(M)?ht(e,h,"whitespace")(M):(o+=1,a&&(a=!1,i+=1),M===124?(e.enter("tableCellDivider"),e.consume(M),e.exit("tableCellDivider"),a=!0,h):(e.enter("data"),p(M)))}function p(M){return M===null||M===124||_t(M)?(e.exit("data"),h(M)):(e.consume(M),M===92?v:p)}function v(M){return M===92||M===124?(e.consume(M),p):p(M)}function y(M){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(M):(e.enter("tableDelimiterRow"),a=!1,ct(M)?ht(e,w,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(M):w(M))}function w(M){return M===45||M===58?k(M):M===124?(a=!0,e.enter("tableCellDivider"),e.consume(M),e.exit("tableCellDivider"),S):D(M)}function S(M){return ct(M)?ht(e,k,"whitespace")(M):k(M)}function k(M){return M===58?(o+=1,a=!0,e.enter("tableDelimiterMarker"),e.consume(M),e.exit("tableDelimiterMarker"),_):M===45?(o+=1,_(M)):M===null||Ze(M)?I(M):D(M)}function _(M){return M===45?(e.enter("tableDelimiterFiller"),C(M)):D(M)}function C(M){return M===45?(e.consume(M),C):M===58?(a=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(M),e.exit("tableDelimiterMarker"),j):(e.exit("tableDelimiterFiller"),j(M))}function j(M){return ct(M)?ht(e,I,"whitespace")(M):I(M)}function I(M){return M===124?w(M):M===null||Ze(M)?!a||i!==o?D(M):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(M)):D(M)}function D(M){return n(M)}function A(M){return e.enter("tableRow"),U(M)}function U(M){return M===124?(e.enter("tableCellDivider"),e.consume(M),e.exit("tableCellDivider"),U):M===null||Ze(M)?(e.exit("tableRow"),t(M)):ct(M)?ht(e,U,"whitespace")(M):(e.enter("data"),te(M))}function te(M){return M===null||M===124||_t(M)?(e.exit("data"),U(M)):(e.consume(M),M===92?z:te)}function z(M){return M===92||M===124?(e.consume(M),te):te(M)}}function P4(e,t){let n=-1,r=!0,i=0,o=[0,0,0,0],a=[0,0,0,0],u=!1,c=0,f,h,p;const v=new C4;for(;++n<e.length;){const y=e[n],w=y[1];y[0]==="enter"?w.type==="tableHead"?(u=!1,c!==0&&(q0(v,t,c,f,h),h=void 0,c=0),f={type:"table",start:Object.assign({},w.start),end:Object.assign({},w.end)},v.add(n,0,[["enter",f,t]])):w.type==="tableRow"||w.type==="tableDelimiterRow"?(r=!0,p=void 0,o=[0,0,0,0],a=[0,n+1,0,0],u&&(u=!1,h={type:"tableBody",start:Object.assign({},w.start),end:Object.assign({},w.end)},v.add(n,0,[["enter",h,t]])),i=w.type==="tableDelimiterRow"?2:h?3:1):i&&(w.type==="data"||w.type==="tableDelimiterMarker"||w.type==="tableDelimiterFiller")?(r=!1,a[2]===0&&(o[1]!==0&&(a[0]=a[1],p=Uu(v,t,o,i,void 0,p),o=[0,0,0,0]),a[2]=n)):w.type==="tableCellDivider"&&(r?r=!1:(o[1]!==0&&(a[0]=a[1],p=Uu(v,t,o,i,void 0,p)),o=a,a=[o[1],n,0,0])):w.type==="tableHead"?(u=!0,c=n):w.type==="tableRow"||w.type==="tableDelimiterRow"?(c=n,o[1]!==0?(a[0]=a[1],p=Uu(v,t,o,i,n,p)):a[1]!==0&&(p=Uu(v,t,a,i,n,p)),i=0):i&&(w.type==="data"||w.type==="tableDelimiterMarker"||w.type==="tableDelimiterFiller")&&(a[3]=n)}for(c!==0&&q0(v,t,c,f,h),v.consume(t.events),n=-1;++n<t.events.length;){const y=t.events[n];y[0]==="enter"&&y[1].type==="table"&&(y[1]._align=N4(t.events,n))}return e}function Uu(e,t,n,r,i,o){const a=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",u="tableContent";n[0]!==0&&(o.end=Object.assign({},yo(t.events,n[0])),e.add(n[0],0,[["exit",o,t]]));const c=yo(t.events,n[1]);if(o={type:a,start:Object.assign({},c),end:Object.assign({},c)},e.add(n[1],0,[["enter",o,t]]),n[2]!==0){const f=yo(t.events,n[2]),h=yo(t.events,n[3]),p={type:u,start:Object.assign({},f),end:Object.assign({},h)};if(e.add(n[2],0,[["enter",p,t]]),r!==2){const v=t.events[n[2]],y=t.events[n[3]];if(v[1].end=Object.assign({},y[1].end),v[1].type="chunkText",v[1].contentType="text",n[3]>n[2]+1){const w=n[2]+1,S=n[3]-n[2]-1;e.add(w,S,[])}}e.add(n[3]+1,0,[["exit",p,t]])}return i!==void 0&&(o.end=Object.assign({},yo(t.events,i)),e.add(i,0,[["exit",o,t]]),o=void 0),o}function q0(e,t,n,r,i){const o=[],a=yo(t.events,n);i&&(i.end=Object.assign({},a),o.push(["exit",i,t])),r.end=Object.assign({},a),o.push(["exit",r,t]),e.add(n+1,0,o)}function yo(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const R4={name:"tasklistCheck",tokenize:M4};function A4(){return{text:{91:R4}}}function M4(e,t,n){const r=this;return i;function i(c){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(c):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),o)}function o(c){return _t(c)?(e.enter("taskListCheckValueUnchecked"),e.consume(c),e.exit("taskListCheckValueUnchecked"),a):c===88||c===120?(e.enter("taskListCheckValueChecked"),e.consume(c),e.exit("taskListCheckValueChecked"),a):n(c)}function a(c){return c===93?(e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),u):n(c)}function u(c){return Ze(c)?t(c):ct(c)?e.check({tokenize:O4},t,n)(c):n(c)}}function O4(e,t,n){return ht(e,r,"whitespace");function r(i){return i===null?n(i):t(i)}}function D4(e){return Vk([a4(),y4(),_4(e),T4(),A4()])}const L4={};function $4(e){const t=this,n=e||L4,r=t.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),o=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),a=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(D4(n)),o.push(r4()),a.push(i4(n))}const F4=e=>e!=null;function B4(){const e=_e(t=>t.works);return b.useMemo(()=>{const t=new Map;e.forEach(o=>{var c;const a=(c=o.name)==null?void 0:c.trim();if(!a)return;const u=t.get(a)??[];u.push(o),t.set(a,u)});const n=new Map,r=new Map;t.forEach((o,a)=>{o.length===1?n.set(a,o[0]):o.length>1&&r.set(a,o.filter(F4))});const i=Array.from(n.entries()).map(([o,a])=>({name:o,work:a}));return i.sort((o,a)=>a.name.length-o.name.length||o.name.localeCompare(a.name,"es")),{uniqueByName:n,duplicates:r,entries:i}},[e])}const z4=new RegExp("\\p{L}|\\p{N}","u"),K0=e=>e?z4.test(e):!1,U4=(e,t,n)=>{const r=t===0?void 0:e[t-1],i=n>=e.length?void 0:e[n];return!K0(r)&&!K0(i)},W4=(e,t)=>{const n=[];t.forEach(o=>{let a=0;for(;a<e.length;){const u=e.indexOf(o.name,a);if(u===-1)break;const c=u+o.name.length;U4(e,u,c)&&n.push({start:u,end:c,entry:o}),a=u+o.name.length}}),n.sort((o,a)=>o.start!==a.start?o.start-a.start:a.entry.name.length-o.entry.name.length);const r=[];let i=-1;return n.forEach(o=>{o.start<i||(r.push(o),i=o.end)}),r},H4=e=>e?new Set(["link","linkReference","definition","inlineCode","code"]).has(e.type):!0,V4=e=>{const t=(e==null?void 0:e.entries)??[];return t.length===0?()=>{}:n=>{Jc(n,"text",(r,i,o)=>{if(H4(o)||typeof i!="number"||!o)return;const u=r.value;if(!u)return;const c=W4(u,t);if(c.length===0)return;const f=[];let h=0;c.forEach(p=>{p.start>h&&f.push({type:"text",value:u.slice(h,p.start)}),f.push({type:"link",title:null,url:p.entry.href,children:[{type:"text",value:p.entry.name}]}),h=p.end}),h<u.length&&f.push({type:"text",value:u.slice(h)}),o.children.splice(i,1,...f)})}},q4=e=>{var f,h,p;const t="/sport-planner/".replace(/\/$/,""),r=`${t?`${t}/`:"/"}#/`,i=((f=e.href)==null?void 0:f.startsWith("#/"))??!1,o=((h=e.href)==null?void 0:h.startsWith(r))??!1,a=(((p=e.href)==null?void 0:p.startsWith("/"))??!1)||i||o,u=a?e.rel:e.rel??"noreferrer",c=a?e.target:e.target??"_blank";return m.jsx("a",{...e,className:"text-sky-300 underline decoration-dotted underline-offset-4 hover:text-sky-200",target:c,rel:u})},K4=e=>m.jsx("ul",{...e,className:Be("my-2 list-disc space-y-1 pl-6",e.className)}),Y4=e=>m.jsx("ol",{...e,className:Be("my-2 list-decimal space-y-1 pl-6",e.className)}),G4=e=>m.jsx("li",{...e,className:Be("leading-relaxed",e.className)});function J4(e){const t=e.trim(),n=t.match(/^(["'])(.*)(["'])$/s);return n?n[2].trim():t}function Q4(e){var a;const n=J4(e.trim()).match(/^\[!([^\]]+)\]([+-])?\s*(.*)$/i);if(!n)return null;const r=n[1].toLowerCase(),o=(((a=n[3])==null?void 0:a.trim())??"")||r;return{type:r,title:o}}function O1(e){return typeof e=="object"&&e!==null&&"props"in e&&"type"in e}function jp(e){return e==null||typeof e=="boolean"?"":typeof e=="string"||typeof e=="number"?String(e):Array.isArray(e)?e.map(jp).join(""):O1(e)?jp(e.props.children):""}const Y0={danger:{icon:"",containerClassName:"border-rose-500/25 bg-rose-500/10",titleClassName:"text-rose-200"},warning:{icon:"",containerClassName:"border-amber-500/25 bg-amber-500/10",titleClassName:"text-amber-200"},info:{icon:"",containerClassName:"border-sky-500/25 bg-sky-500/10",titleClassName:"text-sky-200"},note:{icon:"",containerClassName:"border-indigo-500/25 bg-indigo-500/10",titleClassName:"text-indigo-200"},tip:{icon:"",containerClassName:"border-emerald-500/25 bg-emerald-500/10",titleClassName:"text-emerald-200"}},X4=e=>{const{node:t,children:n,...r}=e,i=Array.isArray(n)?n:[n],o=i.findIndex(p=>O1(p)&&p.type==="p"),a=o>=0?i[o]:void 0,u=jp(a).trim(),c=Q4(u);if(!c)return m.jsx("blockquote",{...r,children:n});const f=Y0[c.type]??Y0.info,h=i.filter((p,v)=>v!==o);return m.jsxs("aside",{className:Be("my-4 rounded-2xl border p-5",f.containerClassName),children:[m.jsxs("div",{className:Be("flex items-center gap-2 text-lg font-semibold",f.titleClassName),children:[m.jsx("span",{"aria-hidden":"true",children:f.icon}),m.jsx("span",{children:c.title})]}),m.jsx("div",{className:"mt-3",children:h})]})},Z4={a:q4,blockquote:X4,ul:K4,ol:Y4,li:G4};function Es({content:e,enableWorkLinks:t=!1}){const{entries:n}=B4(),r=b.useMemo(()=>{if(!t||n.length===0)return null;const o="/sport-planner/".replace(/\/$/,""),u=`${o?`${o}/`:"/"}#/catalog`;return{entries:n.map(({name:c,work:f})=>({name:c,href:`${u}?workId=${encodeURIComponent(f.id)}`}))}},[t,n]),i=b.useMemo(()=>{const o=[$4];return r&&o.push([V4,r]),o},[r]);return e?m.jsx("div",{className:"prose prose-invert max-w-none prose-headings:font-display prose-p:leading-relaxed prose-strong:text-white prose-a:text-sky-300",children:m.jsx(_L,{remarkPlugins:i,components:Z4,children:e})}):null}function eF(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return b.useMemo(()=>r=>{t.forEach(i=>i(r))},t)}const Qc=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Wo(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Tm(e){return"nodeType"in e}function Un(e){var t,n;return e?Wo(e)?e:Tm(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Im(e){const{Document:t}=Un(e);return e instanceof t}function xl(e){return Wo(e)?!1:e instanceof Un(e).HTMLElement}function D1(e){return e instanceof Un(e).SVGElement}function Ho(e){return e?Wo(e)?e.document:Tm(e)?Im(e)?e:xl(e)||D1(e)?e.ownerDocument:document:document:document}const Br=Qc?b.useLayoutEffect:b.useEffect;function Pm(e){const t=b.useRef(e);return Br(()=>{t.current=e}),b.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function tF(){const e=b.useRef(null),t=b.useCallback((r,i)=>{e.current=setInterval(r,i)},[]),n=b.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function ol(e,t){t===void 0&&(t=[e]);const n=b.useRef(e);return Br(()=>{n.current!==e&&(n.current=e)},t),n}function bl(e,t){const n=b.useRef();return b.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function bc(e){const t=Pm(e),n=b.useRef(null),r=b.useCallback(i=>{i!==n.current&&(t==null||t(i,n.current)),n.current=i},[]);return[n,r]}function Np(e){const t=b.useRef();return b.useEffect(()=>{t.current=e},[e]),t.current}let jh={};function wl(e,t){return b.useMemo(()=>{if(t)return t;const n=jh[e]==null?0:jh[e]+1;return jh[e]=n,e+"-"+n},[e,t])}function L1(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((o,a)=>{const u=Object.entries(a);for(const[c,f]of u){const h=o[c];h!=null&&(o[c]=h+e*f)}return o},{...t})}}const jo=L1(1),wc=L1(-1);function nF(e){return"clientX"in e&&"clientY"in e}function Rm(e){if(!e)return!1;const{KeyboardEvent:t}=Un(e.target);return t&&e instanceof t}function rF(e){if(!e)return!1;const{TouchEvent:t}=Un(e.target);return t&&e instanceof t}function Tp(e){if(rF(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return nF(e)?{x:e.clientX,y:e.clientY}:null}const al=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[al.Translate.toString(e),al.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),G0="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function iF(e){return e.matches(G0)?e:e.querySelector(G0)}const sF={display:"none"};function oF(e){let{id:t,value:n}=e;return Ae.createElement("div",{id:t,style:sF},n)}function aF(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Ae.createElement("div",{id:t,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function lF(){const[e,t]=b.useState("");return{announce:b.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const $1=b.createContext(null);function uF(e){const t=b.useContext($1);b.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function cF(){const[e]=b.useState(()=>new Set),t=b.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[b.useCallback(r=>{let{type:i,event:o}=r;e.forEach(a=>{var u;return(u=a[i])==null?void 0:u.call(a,o)})},[e]),t]}const dF={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},fF={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function hF(e){let{announcements:t=fF,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=dF}=e;const{announce:o,announcement:a}=lF(),u=wl("DndLiveRegion"),[c,f]=b.useState(!1);if(b.useEffect(()=>{f(!0)},[]),uF(b.useMemo(()=>({onDragStart(p){let{active:v}=p;o(t.onDragStart({active:v}))},onDragMove(p){let{active:v,over:y}=p;t.onDragMove&&o(t.onDragMove({active:v,over:y}))},onDragOver(p){let{active:v,over:y}=p;o(t.onDragOver({active:v,over:y}))},onDragEnd(p){let{active:v,over:y}=p;o(t.onDragEnd({active:v,over:y}))},onDragCancel(p){let{active:v,over:y}=p;o(t.onDragCancel({active:v,over:y}))}}),[o,t])),!c)return null;const h=Ae.createElement(Ae.Fragment,null,Ae.createElement(oF,{id:r,value:i.draggable}),Ae.createElement(aF,{id:u,announcement:a}));return n?Xn.createPortal(h,n):h}var rn;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(rn||(rn={}));function kc(){}const Cr=Object.freeze({x:0,y:0});function pF(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function mF(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function gF(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function yF(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function J0(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const vF=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=J0(t,t.left,t.top),o=[];for(const a of r){const{id:u}=a,c=n.get(u);if(c){const f=pF(J0(c),i);o.push({id:u,data:{droppableContainer:a,value:f}})}}return o.sort(mF)};function xF(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),a=i-r,u=o-n;if(r<i&&n<o){const c=t.width*t.height,f=e.width*e.height,h=a*u,p=h/(c+f-h);return Number(p.toFixed(4))}return 0}const bF=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=[];for(const o of r){const{id:a}=o,u=n.get(a);if(u){const c=xF(u,t);c>0&&i.push({id:a,data:{droppableContainer:o,value:c}})}}return i.sort(gF)};function wF(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function F1(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Cr}function kF(e){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i.reduce((a,u)=>({...a,top:a.top+e*u.y,bottom:a.bottom+e*u.y,left:a.left+e*u.x,right:a.right+e*u.x}),{...n})}}const SF=kF(1);function EF(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function _F(e,t,n){const r=EF(t);if(!r)return e;const{scaleX:i,scaleY:o,x:a,y:u}=r,c=e.left-a-(1-i)*parseFloat(n),f=e.top-u-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),h=i?e.width/i:e.width,p=o?e.height/o:e.height;return{width:h,height:p,top:f,right:c+h,bottom:f+p,left:c}}const CF={ignoreTransform:!1};function Vo(e,t){t===void 0&&(t=CF);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:f,transformOrigin:h}=Un(e).getComputedStyle(e);f&&(n=_F(n,f,h))}const{top:r,left:i,width:o,height:a,bottom:u,right:c}=n;return{top:r,left:i,width:o,height:a,bottom:u,right:c}}function Q0(e){return Vo(e,{ignoreTransform:!0})}function jF(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function NF(e,t){return t===void 0&&(t=Un(e).getComputedStyle(e)),t.position==="fixed"}function TF(e,t){t===void 0&&(t=Un(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const o=t[i];return typeof o=="string"?n.test(o):!1})}function Am(e,t){const n=[];function r(i){if(t!=null&&n.length>=t||!i)return n;if(Im(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!xl(i)||D1(i)||n.includes(i))return n;const o=Un(e).getComputedStyle(i);return i!==e&&TF(i,o)&&n.push(i),NF(i,o)?n:r(i.parentNode)}return e?r(e):n}function B1(e){const[t]=Am(e,1);return t??null}function Nh(e){return!Qc||!e?null:Wo(e)?e:Tm(e)?Im(e)||e===Ho(e).scrollingElement?window:xl(e)?e:null:null}function z1(e){return Wo(e)?e.scrollX:e.scrollLeft}function U1(e){return Wo(e)?e.scrollY:e.scrollTop}function Ip(e){return{x:z1(e),y:U1(e)}}var dn;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(dn||(dn={}));function W1(e){return!Qc||!e?!1:e===document.scrollingElement}function H1(e){const t={x:0,y:0},n=W1(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},i=e.scrollTop<=t.y,o=e.scrollLeft<=t.x,a=e.scrollTop>=r.y,u=e.scrollLeft>=r.x;return{isTop:i,isLeft:o,isBottom:a,isRight:u,maxScroll:r,minScroll:t}}const IF={x:.2,y:.2};function PF(e,t,n,r,i){let{top:o,left:a,right:u,bottom:c}=n;r===void 0&&(r=10),i===void 0&&(i=IF);const{isTop:f,isBottom:h,isLeft:p,isRight:v}=H1(e),y={x:0,y:0},w={x:0,y:0},S={height:t.height*i.y,width:t.width*i.x};return!f&&o<=t.top+S.height?(y.y=dn.Backward,w.y=r*Math.abs((t.top+S.height-o)/S.height)):!h&&c>=t.bottom-S.height&&(y.y=dn.Forward,w.y=r*Math.abs((t.bottom-S.height-c)/S.height)),!v&&u>=t.right-S.width?(y.x=dn.Forward,w.x=r*Math.abs((t.right-S.width-u)/S.width)):!p&&a<=t.left+S.width&&(y.x=dn.Backward,w.x=r*Math.abs((t.left+S.width-a)/S.width)),{direction:y,speed:w}}function RF(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:a}=window;return{top:0,left:0,right:o,bottom:a,width:o,height:a}}const{top:t,left:n,right:r,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:i,width:e.clientWidth,height:e.clientHeight}}function V1(e){return e.reduce((t,n)=>jo(t,Ip(n)),Cr)}function AF(e){return e.reduce((t,n)=>t+z1(n),0)}function MF(e){return e.reduce((t,n)=>t+U1(n),0)}function OF(e,t){if(t===void 0&&(t=Vo),!e)return;const{top:n,left:r,bottom:i,right:o}=t(e);B1(e)&&(i<=0||o<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const DF=[["x",["left","right"],AF],["y",["top","bottom"],MF]];class Mm{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Am(n),i=V1(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,a,u]of DF)for(const c of a)Object.defineProperty(this,c,{get:()=>{const f=u(r),h=i[o]-f;return this.rect[c]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class qa{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var i;(i=this.target)==null||i.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function LF(e){const{EventTarget:t}=Un(e);return e instanceof t?e:Ho(e)}function Th(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var ur;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(ur||(ur={}));function X0(e){e.preventDefault()}function $F(e){e.stopPropagation()}var gt;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(gt||(gt={}));const q1={start:[gt.Space,gt.Enter],cancel:[gt.Esc],end:[gt.Space,gt.Enter,gt.Tab]},FF=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case gt.Right:return{...n,x:n.x+25};case gt.Left:return{...n,x:n.x-25};case gt.Down:return{...n,y:n.y+25};case gt.Up:return{...n,y:n.y-25}}};class K1{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new qa(Ho(n)),this.windowListeners=new qa(Un(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ur.Resize,this.handleCancel),this.windowListeners.add(ur.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ur.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&OF(r),n(Cr)}handleKeyDown(t){if(Rm(t)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:o=q1,coordinateGetter:a=FF,scrollBehavior:u="smooth"}=i,{code:c}=t;if(o.end.includes(c)){this.handleEnd(t);return}if(o.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:f}=r.current,h=f?{x:f.left,y:f.top}:Cr;this.referenceCoordinates||(this.referenceCoordinates=h);const p=a(t,{active:n,context:r.current,currentCoordinates:h});if(p){const v=wc(p,h),y={x:0,y:0},{scrollableAncestors:w}=r.current;for(const S of w){const k=t.code,{isTop:_,isRight:C,isLeft:j,isBottom:I,maxScroll:D,minScroll:A}=H1(S),U=RF(S),te={x:Math.min(k===gt.Right?U.right-U.width/2:U.right,Math.max(k===gt.Right?U.left:U.left+U.width/2,p.x)),y:Math.min(k===gt.Down?U.bottom-U.height/2:U.bottom,Math.max(k===gt.Down?U.top:U.top+U.height/2,p.y))},z=k===gt.Right&&!C||k===gt.Left&&!j,M=k===gt.Down&&!I||k===gt.Up&&!_;if(z&&te.x!==p.x){const $=S.scrollLeft+v.x,ne=k===gt.Right&&$<=D.x||k===gt.Left&&$>=A.x;if(ne&&!v.y){S.scrollTo({left:$,behavior:u});return}ne?y.x=S.scrollLeft-$:y.x=k===gt.Right?S.scrollLeft-D.x:S.scrollLeft-A.x,y.x&&S.scrollBy({left:-y.x,behavior:u});break}else if(M&&te.y!==p.y){const $=S.scrollTop+v.y,ne=k===gt.Down&&$<=D.y||k===gt.Up&&$>=A.y;if(ne&&!v.x){S.scrollTo({top:$,behavior:u});return}ne?y.y=S.scrollTop-$:y.y=k===gt.Down?S.scrollTop-D.y:S.scrollTop-A.y,y.y&&S.scrollBy({top:-y.y,behavior:u});break}}this.handleMove(t,jo(wc(p,this.referenceCoordinates),y))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}K1.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=q1,onActivation:i}=t,{active:o}=n;const{code:a}=e.nativeEvent;if(r.start.includes(a)){const u=o.activatorNode.current;return u&&e.target!==u?!1:(e.preventDefault(),i==null||i({event:e.nativeEvent}),!0)}return!1}}];function Z0(e){return!!(e&&"distance"in e)}function eb(e){return!!(e&&"delay"in e)}class Om{constructor(t,n,r){var i;r===void 0&&(r=LF(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:o}=t,{target:a}=o;this.props=t,this.events=n,this.document=Ho(a),this.documentListeners=new qa(this.document),this.listeners=new qa(r),this.windowListeners=new qa(Un(a)),this.initialCoordinates=(i=Tp(o))!=null?i:Cr,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(ur.Resize,this.handleCancel),this.windowListeners.add(ur.DragStart,X0),this.windowListeners.add(ur.VisibilityChange,this.handleCancel),this.windowListeners.add(ur.ContextMenu,X0),this.documentListeners.add(ur.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(eb(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Z0(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:i}=this.props;i(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(ur.Click,$F,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ur.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:i,props:o}=this,{onMove:a,options:{activationConstraint:u}}=o;if(!i)return;const c=(n=Tp(t))!=null?n:Cr,f=wc(i,c);if(!r&&u){if(Z0(u)){if(u.tolerance!=null&&Th(f,u.tolerance))return this.handleCancel();if(Th(f,u.distance))return this.handleStart()}if(eb(u)&&Th(f,u.tolerance))return this.handleCancel();this.handlePending(u,f);return}t.cancelable&&t.preventDefault(),a(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===gt.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const BF={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Y1 extends Om{constructor(t){const{event:n}=t,r=Ho(n.target);super(t,BF,r)}}Y1.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const zF={move:{name:"mousemove"},end:{name:"mouseup"}};var Pp;(function(e){e[e.RightClick=2]="RightClick"})(Pp||(Pp={}));class UF extends Om{constructor(t){super(t,zF,Ho(t.event.target))}}UF.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===Pp.RightClick?!1:(r==null||r({event:n}),!0)}}];const Ih={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class WF extends Om{constructor(t){super(t,Ih)}static setup(){return window.addEventListener(Ih.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Ih.move.name,t)};function t(){}}}WF.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var Ka;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Ka||(Ka={}));var Sc;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Sc||(Sc={}));function HF(e){let{acceleration:t,activator:n=Ka.Pointer,canScroll:r,draggingRect:i,enabled:o,interval:a=5,order:u=Sc.TreeOrder,pointerCoordinates:c,scrollableAncestors:f,scrollableAncestorRects:h,delta:p,threshold:v}=e;const y=qF({delta:p,disabled:!o}),[w,S]=tF(),k=b.useRef({x:0,y:0}),_=b.useRef({x:0,y:0}),C=b.useMemo(()=>{switch(n){case Ka.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Ka.DraggableRect:return i}},[n,i,c]),j=b.useRef(null),I=b.useCallback(()=>{const A=j.current;if(!A)return;const U=k.current.x*_.current.x,te=k.current.y*_.current.y;A.scrollBy(U,te)},[]),D=b.useMemo(()=>u===Sc.TreeOrder?[...f].reverse():f,[u,f]);b.useEffect(()=>{if(!o||!f.length||!C){S();return}for(const A of D){if((r==null?void 0:r(A))===!1)continue;const U=f.indexOf(A),te=h[U];if(!te)continue;const{direction:z,speed:M}=PF(A,te,C,t,v);for(const $ of["x","y"])y[$][z[$]]||(M[$]=0,z[$]=0);if(M.x>0||M.y>0){S(),j.current=A,w(I,a),k.current=M,_.current=z;return}}k.current={x:0,y:0},_.current={x:0,y:0},S()},[t,I,r,S,o,a,JSON.stringify(C),JSON.stringify(y),w,f,D,h,JSON.stringify(v)])}const VF={x:{[dn.Backward]:!1,[dn.Forward]:!1},y:{[dn.Backward]:!1,[dn.Forward]:!1}};function qF(e){let{delta:t,disabled:n}=e;const r=Np(t);return bl(i=>{if(n||!r||!i)return VF;const o={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[dn.Backward]:i.x[dn.Backward]||o.x===-1,[dn.Forward]:i.x[dn.Forward]||o.x===1},y:{[dn.Backward]:i.y[dn.Backward]||o.y===-1,[dn.Forward]:i.y[dn.Forward]||o.y===1}}},[n,t,r])}function KF(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return bl(i=>{var o;return t==null?null:(o=r??i)!=null?o:null},[r,t])}function YF(e,t){return b.useMemo(()=>e.reduce((n,r)=>{const{sensor:i}=r,o=i.activators.map(a=>({eventName:a.eventName,handler:t(a.handler,r)}));return[...n,...o]},[]),[e,t])}var ll;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(ll||(ll={}));var Rp;(function(e){e.Optimized="optimized"})(Rp||(Rp={}));const tb=new Map;function GF(e,t){let{dragging:n,dependencies:r,config:i}=t;const[o,a]=b.useState(null),{frequency:u,measure:c,strategy:f}=i,h=b.useRef(e),p=k(),v=ol(p),y=b.useCallback(function(_){_===void 0&&(_=[]),!v.current&&a(C=>C===null?_:C.concat(_.filter(j=>!C.includes(j))))},[v]),w=b.useRef(null),S=bl(_=>{if(p&&!n)return tb;if(!_||_===tb||h.current!==e||o!=null){const C=new Map;for(let j of e){if(!j)continue;if(o&&o.length>0&&!o.includes(j.id)&&j.rect.current){C.set(j.id,j.rect.current);continue}const I=j.node.current,D=I?new Mm(c(I),I):null;j.rect.current=D,D&&C.set(j.id,D)}return C}return _},[e,o,n,p,c]);return b.useEffect(()=>{h.current=e},[e]),b.useEffect(()=>{p||y()},[n,p]),b.useEffect(()=>{o&&o.length>0&&a(null)},[JSON.stringify(o)]),b.useEffect(()=>{p||typeof u!="number"||w.current!==null||(w.current=setTimeout(()=>{y(),w.current=null},u))},[u,p,y,...r]),{droppableRects:S,measureDroppableContainers:y,measuringScheduled:o!=null};function k(){switch(f){case ll.Always:return!1;case ll.BeforeDragging:return n;default:return!n}}}function G1(e,t){return bl(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function JF(e,t){return G1(e,t)}function QF(e){let{callback:t,disabled:n}=e;const r=Pm(t),i=b.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(r)},[r,n]);return b.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Xc(e){let{callback:t,disabled:n}=e;const r=Pm(t),i=b.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(r)},[n]);return b.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function XF(e){return new Mm(Vo(e),e)}function nb(e,t,n){t===void 0&&(t=XF);const[r,i]=b.useState(null);function o(){i(c=>{if(!e)return null;if(e.isConnected===!1){var f;return(f=c??n)!=null?f:null}const h=t(e);return JSON.stringify(c)===JSON.stringify(h)?c:h})}const a=QF({callback(c){if(e)for(const f of c){const{type:h,target:p}=f;if(h==="childList"&&p instanceof HTMLElement&&p.contains(e)){o();break}}}}),u=Xc({callback:o});return Br(()=>{o(),e?(u==null||u.observe(e),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(u==null||u.disconnect(),a==null||a.disconnect())},[e]),r}function ZF(e){const t=G1(e);return F1(e,t)}const rb=[];function e3(e){const t=b.useRef(e),n=bl(r=>e?r&&r!==rb&&e&&t.current&&e.parentNode===t.current.parentNode?r:Am(e):rb,[e]);return b.useEffect(()=>{t.current=e},[e]),n}function t3(e){const[t,n]=b.useState(null),r=b.useRef(e),i=b.useCallback(o=>{const a=Nh(o.target);a&&n(u=>u?(u.set(a,Ip(a)),new Map(u)):null)},[]);return b.useEffect(()=>{const o=r.current;if(e!==o){a(o);const u=e.map(c=>{const f=Nh(c);return f?(f.addEventListener("scroll",i,{passive:!0}),[f,Ip(f)]):null}).filter(c=>c!=null);n(u.length?new Map(u):null),r.current=e}return()=>{a(e),a(o)};function a(u){u.forEach(c=>{const f=Nh(c);f==null||f.removeEventListener("scroll",i)})}},[i,e]),b.useMemo(()=>e.length?t?Array.from(t.values()).reduce((o,a)=>jo(o,a),Cr):V1(e):Cr,[e,t])}function ib(e,t){t===void 0&&(t=[]);const n=b.useRef(null);return b.useEffect(()=>{n.current=null},t),b.useEffect(()=>{const r=e!==Cr;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?wc(e,n.current):Cr}function n3(e){b.useEffect(()=>{if(!Qc)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function r3(e,t){return b.useMemo(()=>e.reduce((n,r)=>{let{eventName:i,handler:o}=r;return n[i]=a=>{o(a,t)},n},{}),[e,t])}function J1(e){return b.useMemo(()=>e?jF(e):null,[e])}const sb=[];function i3(e,t){t===void 0&&(t=Vo);const[n]=e,r=J1(n?Un(n):null),[i,o]=b.useState(sb);function a(){o(()=>e.length?e.map(c=>W1(c)?r:new Mm(t(c),c)):sb)}const u=Xc({callback:a});return Br(()=>{u==null||u.disconnect(),a(),e.forEach(c=>u==null?void 0:u.observe(c))},[e]),i}function s3(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return xl(t)?t:e}function o3(e){let{measure:t}=e;const[n,r]=b.useState(null),i=b.useCallback(f=>{for(const{target:h}of f)if(xl(h)){r(p=>{const v=t(h);return p?{...p,width:v.width,height:v.height}:v});break}},[t]),o=Xc({callback:i}),a=b.useCallback(f=>{const h=s3(f);o==null||o.disconnect(),h&&(o==null||o.observe(h)),r(h?t(h):null)},[t,o]),[u,c]=bc(a);return b.useMemo(()=>({nodeRef:u,rect:n,setRef:c}),[n,u,c])}const a3=[{sensor:Y1,options:{}},{sensor:K1,options:{}}],l3={current:{}},ec={draggable:{measure:Q0},droppable:{measure:Q0,strategy:ll.WhileDragging,frequency:Rp.Optimized},dragOverlay:{measure:Vo}};class Ya extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const u3={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ya,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:kc},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:ec,measureDroppableContainers:kc,windowRect:null,measuringScheduled:!1},c3={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:kc,draggableNodes:new Map,over:null,measureDroppableContainers:kc},Zc=b.createContext(c3),Q1=b.createContext(u3);function d3(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ya}}}function f3(e,t){switch(t.type){case rn.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case rn.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case rn.DragEnd:case rn.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case rn.RegisterDroppable:{const{element:n}=t,{id:r}=n,i=new Ya(e.droppable.containers);return i.set(r,n),{...e,droppable:{...e.droppable,containers:i}}}case rn.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const a=new Ya(e.droppable.containers);return a.set(n,{...o,disabled:i}),{...e,droppable:{...e.droppable,containers:a}}}case rn.UnregisterDroppable:{const{id:n,key:r}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const o=new Ya(e.droppable.containers);return o.delete(n),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function h3(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:i}=b.useContext(Zc),o=Np(r),a=Np(n==null?void 0:n.id);return b.useEffect(()=>{if(!t&&!r&&o&&a!=null){if(!Rm(o)||document.activeElement===o.target)return;const u=i.get(a);if(!u)return;const{activatorNode:c,node:f}=u;if(!c.current&&!f.current)return;requestAnimationFrame(()=>{for(const h of[c.current,f.current]){if(!h)continue;const p=iF(h);if(p){p.focus();break}}})}},[r,t,i,a,o]),null}function p3(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((i,o)=>o({transform:i,...r}),n):n}function m3(e){return b.useMemo(()=>({draggable:{...ec.draggable,...e==null?void 0:e.draggable},droppable:{...ec.droppable,...e==null?void 0:e.droppable},dragOverlay:{...ec.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function g3(e){let{activeNode:t,measure:n,initialRect:r,config:i=!0}=e;const o=b.useRef(!1),{x:a,y:u}=typeof i=="boolean"?{x:i,y:i}:i;Br(()=>{if(!a&&!u||!t){o.current=!1;return}if(o.current||!r)return;const f=t==null?void 0:t.node.current;if(!f||f.isConnected===!1)return;const h=n(f),p=F1(h,r);if(a||(p.x=0),u||(p.y=0),o.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const v=B1(f);v&&v.scrollBy({top:p.y,left:p.x})}},[t,a,u,r,n])}const X1=b.createContext({...Cr,scaleX:1,scaleY:1});var Ti;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Ti||(Ti={}));const y3=b.memo(function(t){var n,r,i,o;let{id:a,accessibility:u,autoScroll:c=!0,children:f,sensors:h=a3,collisionDetection:p=bF,measuring:v,modifiers:y,...w}=t;const S=b.useReducer(f3,void 0,d3),[k,_]=S,[C,j]=cF(),[I,D]=b.useState(Ti.Uninitialized),A=I===Ti.Initialized,{draggable:{active:U,nodes:te,translate:z},droppable:{containers:M}}=k,$=U!=null?te.get(U):null,ne=b.useRef({initial:null,translated:null}),H=b.useMemo(()=>{var Ke;return U!=null?{id:U,data:(Ke=$==null?void 0:$.data)!=null?Ke:l3,rect:ne}:null},[U,$]),Y=b.useRef(null),[K,se]=b.useState(null),[q,F]=b.useState(null),L=ol(w,Object.values(w)),N=wl("DndDescribedBy",a),B=b.useMemo(()=>M.getEnabled(),[M]),ee=m3(v),{droppableRects:R,measureDroppableContainers:be,measuringScheduled:he}=GF(B,{dragging:A,dependencies:[z.x,z.y],config:ee.droppable}),ge=KF(te,U),me=b.useMemo(()=>q?Tp(q):null,[q]),Ce=Ve(),Te=JF(ge,ee.draggable.measure);g3({activeNode:U!=null?te.get(U):null,config:Ce.layoutShiftCompensation,initialRect:Te,measure:ee.draggable.measure});const je=nb(ge,ee.draggable.measure,Te),ie=nb(ge?ge.parentElement:null),Ie=b.useRef({activatorEvent:null,active:null,activeNode:ge,collisionRect:null,collisions:null,droppableRects:R,draggableNodes:te,draggingNode:null,draggingNodeRect:null,droppableContainers:M,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),He=M.getNodeFor((n=Ie.current.over)==null?void 0:n.id),qe=o3({measure:ee.dragOverlay.measure}),rt=(r=qe.nodeRef.current)!=null?r:ge,st=A?(i=qe.rect)!=null?i:je:null,St=!!(qe.nodeRef.current&&qe.rect),fn=ZF(St?null:je),Xt=J1(rt?Un(rt):null),wt=e3(A?He??ge:null),Rt=i3(wt),Q=p3(y,{transform:{x:z.x-fn.x,y:z.y-fn.y,scaleX:1,scaleY:1},activatorEvent:q,active:H,activeNodeRect:je,containerNodeRect:ie,draggingNodeRect:st,over:Ie.current.over,overlayNodeRect:qe.rect,scrollableAncestors:wt,scrollableAncestorRects:Rt,windowRect:Xt}),fe=me?jo(me,z):null,ye=t3(wt),Ee=ib(ye),G=ib(ye,[je]),P=jo(Q,Ee),V=st?SF(st,Q):null,le=H&&V?p({active:H,collisionRect:V,droppableRects:R,droppableContainers:B,pointerCoordinates:fe}):null,Z=yF(le,"id"),[ue,O]=b.useState(null),J=St?Q:jo(Q,G),de=wF(J,(o=ue==null?void 0:ue.rect)!=null?o:null,je),pe=b.useRef(null),Re=b.useCallback((Ke,Le)=>{let{sensor:ot,options:yt}=Le;if(Y.current==null)return;const Ye=te.get(Y.current);if(!Ye)return;const Ne=Ke.nativeEvent,Ge=new ot({active:Y.current,activeNode:Ye,event:Ne,options:yt,context:Ie,onAbort(tt){if(!te.get(tt))return;const{onDragAbort:ft}=L.current,$t={id:tt};ft==null||ft($t),C({type:"onDragAbort",event:$t})},onPending(tt,At,ft,$t){if(!te.get(tt))return;const{onDragPending:Wn}=L.current,Zt={id:tt,constraint:At,initialCoordinates:ft,offset:$t};Wn==null||Wn(Zt),C({type:"onDragPending",event:Zt})},onStart(tt){const At=Y.current;if(At==null)return;const ft=te.get(At);if(!ft)return;const{onDragStart:$t}=L.current,Ht={activatorEvent:Ne,active:{id:At,data:ft.data,rect:ne}};Xn.unstable_batchedUpdates(()=>{$t==null||$t(Ht),D(Ti.Initializing),_({type:rn.DragStart,initialCoordinates:tt,active:At}),C({type:"onDragStart",event:Ht}),se(pe.current),F(Ne)})},onMove(tt){_({type:rn.DragMove,coordinates:tt})},onEnd:vt(rn.DragEnd),onCancel:vt(rn.DragCancel)});pe.current=Ge;function vt(tt){return async function(){const{active:ft,collisions:$t,over:Ht,scrollAdjustedTranslate:Wn}=Ie.current;let Zt=null;if(ft&&Wn){const{cancelDrop:Hn}=L.current;Zt={activatorEvent:Ne,active:ft,collisions:$t,delta:Wn,over:Ht},tt===rn.DragEnd&&typeof Hn=="function"&&await Promise.resolve(Hn(Zt))&&(tt=rn.DragCancel)}Y.current=null,Xn.unstable_batchedUpdates(()=>{_({type:tt}),D(Ti.Uninitialized),O(null),se(null),F(null),pe.current=null;const Hn=tt===rn.DragEnd?"onDragEnd":"onDragCancel";if(Zt){const Hi=L.current[Hn];Hi==null||Hi(Zt),C({type:Hn,event:Zt})}})}}},[te]),Pe=b.useCallback((Ke,Le)=>(ot,yt)=>{const Ye=ot.nativeEvent,Ne=te.get(yt);if(Y.current!==null||!Ne||Ye.dndKit||Ye.defaultPrevented)return;const Ge={active:Ne};Ke(ot,Le.options,Ge)===!0&&(Ye.dndKit={capturedBy:Le.sensor},Y.current=yt,Re(ot,Le))},[te,Re]),De=YF(h,Pe);n3(h),Br(()=>{je&&I===Ti.Initializing&&D(Ti.Initialized)},[je,I]),b.useEffect(()=>{const{onDragMove:Ke}=L.current,{active:Le,activatorEvent:ot,collisions:yt,over:Ye}=Ie.current;if(!Le||!ot)return;const Ne={active:Le,activatorEvent:ot,collisions:yt,delta:{x:P.x,y:P.y},over:Ye};Xn.unstable_batchedUpdates(()=>{Ke==null||Ke(Ne),C({type:"onDragMove",event:Ne})})},[P.x,P.y]),b.useEffect(()=>{const{active:Ke,activatorEvent:Le,collisions:ot,droppableContainers:yt,scrollAdjustedTranslate:Ye}=Ie.current;if(!Ke||Y.current==null||!Le||!Ye)return;const{onDragOver:Ne}=L.current,Ge=yt.get(Z),vt=Ge&&Ge.rect.current?{id:Ge.id,rect:Ge.rect.current,data:Ge.data,disabled:Ge.disabled}:null,tt={active:Ke,activatorEvent:Le,collisions:ot,delta:{x:Ye.x,y:Ye.y},over:vt};Xn.unstable_batchedUpdates(()=>{O(vt),Ne==null||Ne(tt),C({type:"onDragOver",event:tt})})},[Z]),Br(()=>{Ie.current={activatorEvent:q,active:H,activeNode:ge,collisionRect:V,collisions:le,droppableRects:R,draggableNodes:te,draggingNode:rt,draggingNodeRect:st,droppableContainers:M,over:ue,scrollableAncestors:wt,scrollAdjustedTranslate:P},ne.current={initial:st,translated:V}},[H,ge,le,V,te,rt,st,R,M,ue,wt,P]),HF({...Ce,delta:z,draggingRect:V,pointerCoordinates:fe,scrollableAncestors:wt,scrollableAncestorRects:Rt});const dt=b.useMemo(()=>({active:H,activeNode:ge,activeNodeRect:je,activatorEvent:q,collisions:le,containerNodeRect:ie,dragOverlay:qe,draggableNodes:te,droppableContainers:M,droppableRects:R,over:ue,measureDroppableContainers:be,scrollableAncestors:wt,scrollableAncestorRects:Rt,measuringConfiguration:ee,measuringScheduled:he,windowRect:Xt}),[H,ge,je,q,le,ie,qe,te,M,R,ue,be,wt,Rt,ee,he,Xt]),Fe=b.useMemo(()=>({activatorEvent:q,activators:De,active:H,activeNodeRect:je,ariaDescribedById:{draggable:N},dispatch:_,draggableNodes:te,over:ue,measureDroppableContainers:be}),[q,De,H,je,_,N,te,ue,be]);return Ae.createElement($1.Provider,{value:j},Ae.createElement(Zc.Provider,{value:Fe},Ae.createElement(Q1.Provider,{value:dt},Ae.createElement(X1.Provider,{value:de},f)),Ae.createElement(h3,{disabled:(u==null?void 0:u.restoreFocus)===!1})),Ae.createElement(hF,{...u,hiddenTextDescribedById:N}));function Ve(){const Ke=(K==null?void 0:K.autoScrollEnabled)===!1,Le=typeof c=="object"?c.enabled===!1:c===!1,ot=A&&!Ke&&!Le;return typeof c=="object"?{...c,enabled:ot}:{enabled:ot}}}),v3=b.createContext(null),ob="button",x3="Draggable";function b3(e){let{id:t,data:n,disabled:r=!1,attributes:i}=e;const o=wl(x3),{activators:a,activatorEvent:u,active:c,activeNodeRect:f,ariaDescribedById:h,draggableNodes:p,over:v}=b.useContext(Zc),{role:y=ob,roleDescription:w="draggable",tabIndex:S=0}=i??{},k=(c==null?void 0:c.id)===t,_=b.useContext(k?X1:v3),[C,j]=bc(),[I,D]=bc(),A=r3(a,t),U=ol(n);Br(()=>(p.set(t,{id:t,key:o,node:C,activatorNode:I,data:U}),()=>{const z=p.get(t);z&&z.key===o&&p.delete(t)}),[p,t]);const te=b.useMemo(()=>({role:y,tabIndex:S,"aria-disabled":r,"aria-pressed":k&&y===ob?!0:void 0,"aria-roledescription":w,"aria-describedby":h.draggable}),[r,y,S,k,w,h.draggable]);return{active:c,activatorEvent:u,activeNodeRect:f,attributes:te,isDragging:k,listeners:r?void 0:A,node:C,over:v,setNodeRef:j,setActivatorNodeRef:D,transform:_}}function w3(){return b.useContext(Q1)}const k3="Droppable",S3={timeout:25};function E3(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:i}=e;const o=wl(k3),{active:a,dispatch:u,over:c,measureDroppableContainers:f}=b.useContext(Zc),h=b.useRef({disabled:n}),p=b.useRef(!1),v=b.useRef(null),y=b.useRef(null),{disabled:w,updateMeasurementsFor:S,timeout:k}={...S3,...i},_=ol(S??r),C=b.useCallback(()=>{if(!p.current){p.current=!0;return}y.current!=null&&clearTimeout(y.current),y.current=setTimeout(()=>{f(Array.isArray(_.current)?_.current:[_.current]),y.current=null},k)},[k]),j=Xc({callback:C,disabled:w||!a}),I=b.useCallback((te,z)=>{j&&(z&&(j.unobserve(z),p.current=!1),te&&j.observe(te))},[j]),[D,A]=bc(I),U=ol(t);return b.useEffect(()=>{!j||!D.current||(j.disconnect(),p.current=!1,j.observe(D.current))},[D,j]),b.useEffect(()=>(u({type:rn.RegisterDroppable,element:{id:r,key:o,disabled:n,node:D,rect:v,data:U}}),()=>u({type:rn.UnregisterDroppable,key:o,id:r})),[r]),b.useEffect(()=>{n!==h.current.disabled&&(u({type:rn.SetDroppableDisabled,id:r,key:o,disabled:n}),h.current.disabled=n)},[r,o,n,u]),{active:a,rect:v,isOver:(c==null?void 0:c.id)===r,node:D,over:c,setNodeRef:A}}function Z1(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function _3(e,t){return e.reduce((n,r,i)=>{const o=t.get(r);return o&&(n[i]=o),n},Array(e.length))}function Wu(e){return e!==null&&e>=0}function C3(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function j3(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const eS=e=>{let{rects:t,activeIndex:n,overIndex:r,index:i}=e;const o=Z1(t,r,n),a=t[i],u=o[i];return!u||!a?null:{x:u.left-a.left,y:u.top-a.top,scaleX:u.width/a.width,scaleY:u.height/a.height}},Hu={scaleX:1,scaleY:1},N3=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:i,rects:o,overIndex:a}=e;const u=(t=o[n])!=null?t:r;if(!u)return null;if(i===n){const f=o[a];return f?{x:0,y:n<a?f.top+f.height-(u.top+u.height):f.top-u.top,...Hu}:null}const c=T3(o,i,n);return i>n&&i<=a?{x:0,y:-u.height-c,...Hu}:i<n&&i>=a?{x:0,y:u.height+c,...Hu}:{x:0,y:0,...Hu}};function T3(e,t,n){const r=e[t],i=e[t-1],o=e[t+1];return r?n<t?i?r.top-(i.top+i.height):o?o.top-(r.top+r.height):0:o?o.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const tS="Sortable",nS=Ae.createContext({activeIndex:-1,containerId:tS,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:eS,disabled:{draggable:!1,droppable:!1}});function I3(e){let{children:t,id:n,items:r,strategy:i=eS,disabled:o=!1}=e;const{active:a,dragOverlay:u,droppableRects:c,over:f,measureDroppableContainers:h}=w3(),p=wl(tS,n),v=u.rect!==null,y=b.useMemo(()=>r.map(A=>typeof A=="object"&&"id"in A?A.id:A),[r]),w=a!=null,S=a?y.indexOf(a.id):-1,k=f?y.indexOf(f.id):-1,_=b.useRef(y),C=!C3(y,_.current),j=k!==-1&&S===-1||C,I=j3(o);Br(()=>{C&&w&&h(y)},[C,y,w,h]),b.useEffect(()=>{_.current=y},[y]);const D=b.useMemo(()=>({activeIndex:S,containerId:p,disabled:I,disableTransforms:j,items:y,overIndex:k,useDragOverlay:v,sortedRects:_3(y,c),strategy:i}),[S,p,I.draggable,I.droppable,j,y,k,c,v,i]);return Ae.createElement(nS.Provider,{value:D},t)}const P3=e=>{let{id:t,items:n,activeIndex:r,overIndex:i}=e;return Z1(n,r,i).indexOf(t)},R3=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:i,items:o,newIndex:a,previousItems:u,previousContainerId:c,transition:f}=e;return!f||!r||u!==o&&i===a?!1:n?!0:a!==i&&t===c},A3={duration:200,easing:"ease"},rS="transform",M3=al.Transition.toString({property:rS,duration:0,easing:"linear"}),O3={roleDescription:"sortable"};function D3(e){let{disabled:t,index:n,node:r,rect:i}=e;const[o,a]=b.useState(null),u=b.useRef(n);return Br(()=>{if(!t&&n!==u.current&&r.current){const c=i.current;if(c){const f=Vo(r.current,{ignoreTransform:!0}),h={x:c.left-f.left,y:c.top-f.top,scaleX:c.width/f.width,scaleY:c.height/f.height};(h.x||h.y)&&a(h)}}n!==u.current&&(u.current=n)},[t,n,r,i]),b.useEffect(()=>{o&&a(null)},[o]),o}function L3(e){let{animateLayoutChanges:t=R3,attributes:n,disabled:r,data:i,getNewIndex:o=P3,id:a,strategy:u,resizeObserverConfig:c,transition:f=A3}=e;const{items:h,containerId:p,activeIndex:v,disabled:y,disableTransforms:w,sortedRects:S,overIndex:k,useDragOverlay:_,strategy:C}=b.useContext(nS),j=$3(r,y),I=h.indexOf(a),D=b.useMemo(()=>({sortable:{containerId:p,index:I,items:h},...i}),[p,i,I,h]),A=b.useMemo(()=>h.slice(h.indexOf(a)),[h,a]),{rect:U,node:te,isOver:z,setNodeRef:M}=E3({id:a,data:D,disabled:j.droppable,resizeObserverConfig:{updateMeasurementsFor:A,...c}}),{active:$,activatorEvent:ne,activeNodeRect:H,attributes:Y,setNodeRef:K,listeners:se,isDragging:q,over:F,setActivatorNodeRef:L,transform:N}=b3({id:a,data:D,attributes:{...O3,...n},disabled:j.draggable}),B=eF(M,K),ee=!!$,R=ee&&!w&&Wu(v)&&Wu(k),be=!_&&q,he=be&&R?N:null,me=R?he??(u??C)({rects:S,activeNodeRect:H,activeIndex:v,overIndex:k,index:I}):null,Ce=Wu(v)&&Wu(k)?o({id:a,items:h,activeIndex:v,overIndex:k}):I,Te=$==null?void 0:$.id,je=b.useRef({activeId:Te,items:h,newIndex:Ce,containerId:p}),ie=h!==je.current.items,Ie=t({active:$,containerId:p,isDragging:q,isSorting:ee,id:a,index:I,items:h,newIndex:je.current.newIndex,previousItems:je.current.items,previousContainerId:je.current.containerId,transition:f,wasDragging:je.current.activeId!=null}),He=D3({disabled:!Ie,index:I,node:te,rect:U});return b.useEffect(()=>{ee&&je.current.newIndex!==Ce&&(je.current.newIndex=Ce),p!==je.current.containerId&&(je.current.containerId=p),h!==je.current.items&&(je.current.items=h)},[ee,Ce,p,h]),b.useEffect(()=>{if(Te===je.current.activeId)return;if(Te&&!je.current.activeId){je.current.activeId=Te;return}const rt=setTimeout(()=>{je.current.activeId=Te},50);return()=>clearTimeout(rt)},[Te]),{active:$,activeIndex:v,attributes:Y,data:D,rect:U,index:I,newIndex:Ce,items:h,isOver:z,isSorting:ee,isDragging:q,listeners:se,node:te,overIndex:k,over:F,setNodeRef:B,setActivatorNodeRef:L,setDroppableNodeRef:M,setDraggableNodeRef:K,transform:He??me,transition:qe()};function qe(){if(He||ie&&je.current.newIndex===I)return M3;if(!(be&&!Rm(ne)||!f)&&(ee||Ie))return al.Transition.toString({...f,property:rS})}}function $3(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}gt.Down,gt.Right,gt.Up,gt.Left;function Ec(e,t="18:30"){const n=(e??t).trim(),r=/^(\d{1,2}):(\d{2})$/.exec(n);if(!r)return Ec(t,t);const i=Number(r[1]),o=Number(r[2]);return Number.isNaN(i)||Number.isNaN(o)?Ec(t,t):(i*60+o)%1440}function Ap(e){const t=(e%1440+1440)%1440,n=Math.floor(t/60),r=t%60,i=n.toString().padStart(2,"0"),o=r.toString().padStart(2,"0");return`${i}:${o}`}const ab={present:"Presente",absent:"Ausente",pending:"Pendiente"};function iS({work:e,objective:t,parentChain:n,onSelect:r}){const i=(e.subtitle??"").trim();return m.jsxs("button",{type:"button",onClick:()=>r(e.id),className:"flex w-full items-center justify-between gap-4 rounded-xl border border-white/10 bg-white/5 px-4 py-3 text-left transition hover:border-white/30",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-semibold text-white",children:e.name}),i?m.jsx("p",{className:"text-xs text-white/60",children:i}):null,m.jsxs("p",{className:"text-xs text-white/50",children:[e.estimatedMinutes," min"]}),n?m.jsxs("p",{className:"text-[11px] text-white/40",children:["Deriva de ",n]}):null]}),m.jsx(Bi,{objective:t,size:"sm"})]})}function F3({item:e,work:t,objective:n,expanded:r,isPersonal:i,onToggleExpanded:o,onRemove:a,onDuplicate:u,onUpdateDetails:c,onReplace:f,startTimeLabel:h,durationMinutes:p,works:v,objectiveMap:y,workPathById:w}){const{attributes:S,listeners:k,setNodeRef:_,transform:C,transition:j,isDragging:I}=L3({id:e.id}),[D,A]=b.useState(!1),[U,te]=b.useState(""),z={transform:al.Transform.toString(C),transition:j},$=(e.focusLabel??"").trim(),ne=$.length>0,H=e.customDescriptionMarkdown??(t==null?void 0:t.descriptionMarkdown)??"",Y=H.trim().length>0,K=((t==null?void 0:t.videoUrls)??[]).map(me=>me.trim()).filter(Boolean),se=K.length>0,q=Y||se,L=(t!=null&&t.id?w.get(t.id)??(t==null?void 0:t.name)??"":"").split("  ").slice(0,-1).join("  "),N=((t==null?void 0:t.subtitle)??"").trim(),B=me=>{const Ce=me.target.value;c(e.id,{focusLabel:Ce===""?void 0:Ce})},ee=U.trim().toLowerCase(),R=b.useMemo(()=>v.filter(me=>me.id!==(t==null?void 0:t.id)),[v,t==null?void 0:t.id]),be=b.useMemo(()=>ee?R.filter(me=>{var He;const Ce=(me.subtitle??"").toLowerCase(),Te=((He=y.get(me.objectiveId))==null?void 0:He.name.toLowerCase())??"",je=(w.get(me.id)??"").toLowerCase(),ie=(me.descriptionMarkdown??"").toLowerCase(),Ie=ee;return me.name.toLowerCase().includes(Ie)||Ce.includes(Ie)||ie.includes(Ie)||Te.includes(Ie)||je.includes(Ie)}):[],[R,ee,y,w]);b.useEffect(()=>{D||te("")},[D]);const he=R.length>0,ge=e.result;return m.jsxs("article",{ref:_,style:z,className:Be("relative flex flex-col gap-3 rounded-3xl border border-white/10 bg-white/10 p-4 shadow-lg shadow-black/20 transition",I&&"ring-2 ring-sky-400/70"),children:[n?m.jsx("div",{className:"absolute inset-0 -z-[1] rounded-3xl opacity-30 blur-xl",style:{backgroundColor:n.colorHex}}):null,m.jsxs("div",{className:"flex items-start gap-4",children:[m.jsx("button",{type:"button",className:"mt-1 flex h-10 w-10 items-center justify-center rounded-full border border-white/20 text-white/70",...k,...S,"aria-label":"Reordenar trabajo",children:""}),m.jsx("div",{className:"flex-1 space-y-1",children:m.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsxs("p",{className:"text-lg font-semibold text-white",children:[(t==null?void 0:t.name)??"Trabajo eliminado",ne?m.jsxs("span",{className:"ml-2 text-sky-300",children:[" ",$]}):null]}),N?m.jsx("p",{className:"text-sm text-white/70",children:N}):null,L?m.jsxs("p",{className:"text-xs text-white/50",children:["Deriva de ",L]}):null,m.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm text-white/60",children:[m.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:h}),m.jsx("span",{className:"text-white/30",children:""}),m.jsxs("span",{children:[p," min"]})]}),m.jsxs("div",{className:"max-w-md",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Foco dentro del trabajo"}),m.jsx("input",{type:"text",value:e.focusLabel??"",onChange:B,placeholder:"Ej. 1/7  Apertura",className:"input-field mt-1"})]}),i?m.jsx("div",{className:"mt-3 flex flex-wrap items-center gap-3",children:m.jsx("div",{className:"flex flex-wrap items-center gap-2",children:["ok","doubt","fail"].map(me=>m.jsx("button",{type:"button",onClick:()=>c(e.id,{result:me,completed:!0}),className:Be("rounded-full border px-3 py-1 text-xs font-semibold transition",ge===me?me==="ok"?"border-emerald-500/60 bg-emerald-500/20 text-emerald-200":me==="doubt"?"border-amber-400/50 bg-amber-500/15 text-amber-200":"border-rose-500/60 bg-rose-500/15 text-rose-200":"border-white/10 text-white/60 hover:border-white/30 hover:text-white"),children:me==="ok"?"OK":me==="doubt"?"Dudosa":"Fallo"},me))})}):null]}),m.jsxs("div",{className:"flex items-center gap-2",children:[q?m.jsxs("button",{type:"button",onClick:()=>o(e.id),className:Be("inline-flex items-center gap-2 rounded-full border border-white/20 px-3 py-1 text-xs font-semibold text-white/70 transition hover:border-white/40 hover:text-white",r&&"border-white/40 text-white"),children:[m.jsx("span",{className:Be("transition-transform",r?"rotate-90":"rotate-0"),children:""}),r?"Ocultar detalles":"Ver detalles"]}):null,m.jsx(Bi,{objective:n,size:"sm"})]})]})}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{type:"button",onClick:()=>A(me=>!me),disabled:!he,className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-white/20 text-white/70 transition hover:border-sky-400/60 hover:text-white disabled:opacity-40","aria-label":"Intercambiar trabajo por otro de la misma categora","aria-expanded":D,children:""}),m.jsx("button",{type:"button",onClick:u,className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-white/20 text-white/70 transition hover:border-sky-400/60 hover:text-white","aria-label":"Duplicar trabajo en la sesin",children:"x2"}),m.jsx("button",{type:"button",onClick:a,className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-rose-500/40 text-rose-300 hover:border-rose-400 hover:text-rose-200","aria-label":"Eliminar trabajo de la sesin",children:""})]})]}),D?m.jsx("div",{className:"mt-3 space-y-3 rounded-2xl border border-white/10 bg-slate-950/70 p-3",children:m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Buscar en el catlogo"}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:"search",className:"input-field",placeholder:"Buscar en el catlogo",value:U,onChange:me=>te(me.target.value)}),U?m.jsx("div",{className:"absolute top-14 z-10 max-h-60 w-full overflow-y-auto rounded-2xl border border-white/10 bg-slate-900/95 p-2 shadow-xl",children:be.length===0?m.jsx("p",{className:"p-3 text-sm text-white/50",children:"Sin resultados. Ajusta la bsqueda."}):m.jsx("div",{className:"space-y-2",children:be.map(me=>{const Te=(w.get(me.id)??me.name).split("  ").slice(0,-1).join("  ");return m.jsx(iS,{work:me,objective:y.get(me.objectiveId),parentChain:Te,onSelect:je=>{f(je),A(!1),te("")}},me.id)})})}):null]}),U?null:m.jsx("p",{className:"rounded-2xl border border-dashed border-white/15 px-3 py-2 text-xs text-white/60",children:"Escribe para encontrar un reemplazo. Se mostrarn resultados coincidentes del catlogo."})]})}):null,q&&r?m.jsxs("div",{className:"grid gap-3 rounded-2xl border border-white/10 bg-slate-950/60 p-4",children:[Y?m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Descripcin"}),m.jsx("div",{className:"rounded-2xl border border-white/10 bg-slate-950/70 p-3",children:m.jsx(Es,{content:H,enableWorkLinks:!0})})]}):null,se?m.jsxs("div",{className:"space-y-2",children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-white/40",children:"Vdeos de referencia"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:K.map(me=>m.jsxs("a",{href:me,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-full border border-white/15 bg-white/5 px-3 py-1 text-xs font-medium text-white/80 transition hover:border-white/30 hover:text-white",children:[m.jsx("span",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-red-500/80 text-white shadow shadow-red-500/40",children:""}),"Ver vdeo"]},me))})]}):null]}):null,m.jsx("span",{className:"absolute -left-4 top-4 flex h-8 w-8 items-center justify-center rounded-full border border-white/20 bg-slate-950/90 text-xs font-semibold text-white/60",children:e.order+1})]})}function Dm({session:e,works:t,objectives:n,assistants:r,onDateChange:i}){const o=_e($=>$.updateSession),a=_e($=>$.addWorkToSession),u=_e($=>$.duplicateSessionWork),c=_e($=>$.removeWorkFromSession),f=_e($=>$.reorderSessionWork),h=_e($=>$.updateSessionWorkDetails),p=_e($=>$.replaceSessionWork),v=_e($=>$.setAttendanceStatus),y=e.kind==="personal",[w,S]=b.useState(""),[k,_]=b.useState(new Set),C=b.useMemo(()=>new Map(n.map($=>[$.id,$])),[n]),j=b.useMemo(()=>new Map(t.map($=>[$.id,$])),[t]),I=b.useMemo(()=>{const $=new Map,ne=(H,Y)=>{if($.has(H))return $.get(H);const K=j.get(H);if(!K)return"";const se=K.parentWorkId;if(!se||Y.has(H))return $.set(H,K.name),K.name;Y.add(H);const q=ne(se,Y);Y.delete(H);const F=q?`${q}  ${K.name}`:K.name;return $.set(H,F),F};return t.forEach(H=>ne(H.id,new Set)),$},[t,j]),D=b.useMemo(()=>{if(!w)return t;const $=w.toLowerCase();return t.filter(ne=>{const H=C.get(ne.objectiveId),Y=I.get(ne.id)??"";return ne.name.toLowerCase().includes($)||ne.descriptionMarkdown.toLowerCase().includes($)||(H==null?void 0:H.name.toLowerCase().includes($))||Y.toLowerCase().includes($)})},[t,w,C,I]),A=b.useCallback($=>{const ne=I.get($);if(!ne)return"";const H=ne.split("  ");return H.pop(),H.join("  ")},[I]),U=$=>{_(ne=>{const H=new Set(ne);return H.has($)?H.delete($):H.add($),H})},te=$=>{a(e.id,{workId:$}),S("")},z=$=>{const{active:ne,over:H}=$;if(!H||ne.id===H.id)return;const Y=e.workItems.findIndex(se=>se.id===ne.id),K=e.workItems.findIndex(se=>se.id===H.id);Y===-1||K===-1||f(e.id,Y,K)},M=$=>ne=>{const H=ne.target.value;o(e.id,{[$]:H}),$==="date"&&i&&i(H)};return m.jsxs("div",{className:"space-y-6",children:[y?null:m.jsxs("div",{className:"grid gap-4 rounded-3xl border border-white/10 bg-white/5 p-6",children:[m.jsxs("div",{className:"grid gap-2 sm:grid-cols-3",children:[m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Ttulo"}),m.jsx("input",{type:"text",className:"input-field",value:e.title,onChange:M("title"),placeholder:"Nombre de la sesin"})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Fecha"}),m.jsx("input",{type:"date",className:"input-field",value:e.date,onChange:M("date")})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Hora de inicio"}),m.jsx("input",{type:"time",className:"input-field",value:e.startTime??"18:30",onChange:M("startTime")})]})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Descripcin"}),m.jsx("textarea",{className:"input-field min-h-[120px]",value:e.description??"",onChange:M("description"),placeholder:"Contexto general, objetivos o recordatorios"})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Notas privadas"}),m.jsx("textarea",{className:"input-field min-h-[100px]",value:e.notes??"",onChange:M("notes"),placeholder:"Notas para ti o recordatorios de material"})]})]}),m.jsxs("section",{className:"space-y-4",children:[m.jsxs("header",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-white",children:"Trabajos en la sesin"}),m.jsx("p",{className:"text-sm text-white/60",children:"Arrastra para reorganizar, pulsa  para ajustar detalles."})]}),m.jsxs("div",{className:"relative w-full sm:w-72",children:[m.jsx("input",{type:"search",className:"input-field",value:w,onChange:$=>S($.target.value),placeholder:"Buscar en catlogo"}),w&&m.jsx("div",{className:"absolute top-12 z-10 max-h-72 w-full overflow-y-auto rounded-2xl border border-white/10 bg-slate-900/95 p-2 shadow-xl",children:D.length===0?m.jsx("p",{className:"p-4 text-sm text-white/50",children:"Sin resultados. Revisa el catlogo."}):m.jsx("div",{className:"space-y-2",children:D.map($=>m.jsx(iS,{work:$,objective:C.get($.objectiveId),parentChain:A($.id),onSelect:te},$.id))})})]})]}),m.jsx("div",{className:"space-y-4",children:m.jsx(y3,{collisionDetection:vF,onDragEnd:z,children:m.jsx(I3,{items:e.workItems.map($=>$.id),strategy:N3,children:m.jsx("div",{className:"space-y-5",children:e.workItems.length===0?m.jsx("div",{className:"rounded-3xl border border-dashed border-white/20 p-10 text-center text-white/50",children:"Aade trabajos desde el catlogo con el buscador superior."}):(()=>{let $=0;const ne=Ec(e.startTime,"18:30");return e.workItems.map(H=>{const Y=j.get(H.workId),K=Y?C.get(Y.objectiveId):void 0,se=H.customDurationMinutes??(Y==null?void 0:Y.estimatedMinutes)??0,q=Ap(ne+$);return $+=se,m.jsx(F3,{item:H,work:Y,objective:K,expanded:k.has(H.id),isPersonal:y,onToggleExpanded:U,onRemove:()=>c(e.id,H.id),onDuplicate:()=>u(e.id,H.id),onUpdateDetails:(F,L)=>h(e.id,F,L),onReplace:F=>p(e.id,H.id,F),startTimeLabel:q,durationMinutes:se,works:t,objectiveMap:C,workPathById:I},H.id)})})()})})})})]}),y?null:m.jsxs("section",{className:"space-y-4",children:[m.jsx("header",{className:"flex flex-col gap-1 sm:flex-row sm:items-baseline sm:justify-between",children:m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-white",children:"Previsin de asistencia"}),m.jsx("p",{className:"text-sm text-white/60",children:"Indica quin esperas que asista. La asistencia real se marca durante la sesin desde la Home."})]})}),m.jsx("div",{className:"space-y-2 rounded-3xl border border-white/10 bg-white/5 p-4",children:r.length===0?m.jsx("p",{className:"text-sm text-white/60",children:"An no tienes asistentes definidos. Adelos desde la seccin correspondiente para empezar a registrar asistencia."}):r.map($=>{const ne=e.attendance.find(K=>K.assistantId===$.id),H=(ne==null?void 0:ne.status)??"pending",Y=ne==null?void 0:ne.actualStatus;return m.jsxs("div",{className:"flex flex-col gap-2 rounded-2xl border border-white/10 bg-slate-950/60 p-3 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-semibold text-white",children:$.name}),$.notes?m.jsx("p",{className:"text-xs text-white/50",children:$.notes}):null,Y?m.jsxs("p",{className:"text-xs text-white/40",children:["ltimo registro real: ",ab[Y]]}):null]}),m.jsx("div",{className:"flex items-center gap-2",children:["present","absent","pending"].map(K=>m.jsx("button",{type:"button",onClick:()=>v(e.id,$.id,K),className:Be("rounded-full px-3 py-1 text-xs font-semibold transition",H===K?K==="present"?"border border-emerald-500/60 bg-emerald-500/20 text-emerald-200":K==="absent"?"border border-rose-500/60 bg-rose-500/20 text-rose-200":"border border-white/30 bg-white/10 text-white":"border border-white/10 text-white/60 hover:border-white/30 hover:text-white"),children:ab[K]},K))})]},$.id)})})]})]})}function lb(e){if(!e)return null;const t=e.trim().toLowerCase();if(!t)return null;if(/^\\d+(\\.\\d+)?$/.test(t))return Math.floor(Number(t));if(/^(\\d+:)+\\d+$/.test(t)){const r=t.split(":").map(i=>Number(i));return r.some(i=>Number.isNaN(i))?null:r.reduce((i,o)=>i*60+o,0)}const n=t.match(/^(?:(\\d+)h)?(?:(\\d+)m)?(?:(\\d+)s?)?$/i);if(n){const r=n[1]?Number(n[1]):0,i=n[2]?Number(n[2]):0,o=n[3]?Number(n[3]):0;if(r||i||o)return r*3600+i*60+o}return null}function B3(e){if(!e)return null;try{const t=new URL(e),n=t.hostname.replace("www.","");let r="";if(n==="youtu.be"?r=t.pathname.slice(1).split("/")[0]??"":n.endsWith("youtube.com")?t.searchParams.has("v")?r=t.searchParams.get("v")??"":(t.pathname.startsWith("/shorts/")||t.pathname.startsWith("/embed/"))&&(r=t.pathname.split("/")[2]??""):n==="youtube-nocookie.com"&&t.pathname.startsWith("/embed/")&&(r=t.pathname.split("/")[2]??""),!r)return null;const i=new URL(`https://www.youtube-nocookie.com/embed/${r}`),o=lb(t.searchParams.get("start")??t.searchParams.get("t"));o!==null&&i.searchParams.set("start",String(o));const a=lb(t.searchParams.get("end"));a!==null&&i.searchParams.set("end",String(a));const u=t.searchParams.get("list");return u&&i.searchParams.set("list",u),i.toString()}catch{return null}}function Lm({url:e,title:t,maxWidth:n=300,className:r}){const i=e.trim();if(!i)return null;const o=B3(i);return o?m.jsx("div",{className:Be("flex w-full justify-center",r),children:m.jsx("div",{className:"overflow-hidden rounded-2xl border border-white/10 bg-black shadow-inner shadow-black/50",style:{maxWidth:n},children:m.jsx("iframe",{src:o,title:t,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0,className:"block w-full",style:{aspectRatio:"16 / 9"}})})}):m.jsx("div",{className:Be("flex w-full justify-center",r),children:m.jsx("a",{href:i,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-full border border-amber-400/30 bg-amber-500/10 px-3 py-1 text-xs font-semibold text-amber-200 transition hover:border-amber-400 hover:text-white",children:"URL no reconocida, abrir enlace"})})}function z3(e){return Array.from(new Set((e??[]).map(t=>t.trim().toLowerCase()).filter(t=>t.length>0)))}function sS({title:e,titleExtra:t,subtitle:n,objective:r,checked:i,onCheckedChange:o,orderNumber:a,startLabel:u,durationMinutes:c,tags:f,statusPill:h,lastSeenLabel:p,descriptionMarkdown:v,notesMarkdown:y,videoUrls:w,detailsContent:S,isExpanded:k,onToggleExpanded:_,actions:C,detailsActions:j}){const I=(t??"").trim(),D=I.length>0,A=(n??"").trim(),U=(v??"").trim(),te=(y??"").trim(),z=(w??[]).map(q=>q.trim()).filter(Boolean),M=!!S,$=z3(f),ne=$.length>0,H=!!u||typeof c=="number"||!!p,Y=M||U.length>0||te.length>0||z.length>0,K=!!j,se=()=>{Y&&_()};return m.jsxs("article",{role:Y?"button":void 0,tabIndex:Y?0:void 0,onClick:()=>se(),onKeyDown:q=>{Y&&(q.key==="Enter"||q.key===" ")&&(q.preventDefault(),se())},className:Be("flex flex-col gap-2.5 rounded-3xl border border-white/10 bg-white/5 p-2.5 shadow shadow-black/20 sm:gap-3 sm:p-4",Y&&"cursor-pointer hover:border-white/20"),style:r?{background:`linear-gradient(120deg, ${r.colorHex}1a, rgba(15,23,42,0.8))`}:void 0,children:[m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("label",{className:"mt-1 flex items-center gap-3 text-left",onClick:q=>q.stopPropagation(),onKeyDown:q=>q.stopPropagation(),children:m.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded-full border-2 border-white/30 bg-transparent text-sky-400 transition focus:ring-sky-400",checked:i,onChange:q=>o(q.target.checked)})}),m.jsxs("div",{className:"flex-1 space-y-2",children:[m.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[m.jsxs("p",{className:"text-lg font-semibold text-white",children:[e,D?m.jsxs("span",{className:"ml-2 text-sky-300",children:[" ",I]}):null]}),h?m.jsx("span",{className:Be("inline-flex items-center rounded-full border px-2 py-0.5 text-[11px] font-semibold",h.className),children:h.label}):null]}),A?m.jsx("p",{className:"text-sm text-white/70",children:A}):null,H?m.jsxs("p",{className:"text-sm text-white/60",children:[u?m.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:u}):null,u&&typeof c=="number"?m.jsx("span",{className:"mx-2 text-white/30",children:""}):null,typeof c=="number"?m.jsxs("span",{children:[c," min"]}):null,(u||typeof c=="number")&&p?m.jsx("span",{className:"mx-2 text-white/30",children:""}):null,p?m.jsxs("span",{className:"text-xs text-white/50",children:["ltima vez: ",p]}):null]}):null]}),m.jsx(Bi,{objective:r,size:"sm"})]}),ne?m.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-[11px] uppercase tracking-wide text-white/40",children:[$.slice(0,8).map(q=>m.jsx("span",{className:"rounded-full border border-white/10 px-2 py-0.5",children:q},q)),$.length>8?m.jsxs("span",{className:"text-white/50",children:["+",$.length-8]}):null]}):null,Y?m.jsxs("div",{className:"flex items-center gap-3 text-xs text-white/50",children:[m.jsxs("button",{type:"button",onClick:q=>{q.stopPropagation(),se()},className:"inline-flex items-center gap-2 rounded-full border border-white/15 px-3 py-1 text-xs font-semibold text-white/70 transition hover:border-white/30 hover:text-white",children:[m.jsx("span",{className:Be("transition-transform",k?"rotate-90":"rotate-0"),children:""}),k?"Ocultar detalles":"Ver detalles"]}),z.length>0?m.jsxs("span",{children:[z.length," vdeo",z.length>1?"s":""]}):null]}):null]}),m.jsx("div",{className:Be("mt-1 flex h-10 w-10 items-center justify-center rounded-full border border-white/10 text-xs font-semibold uppercase text-white/60",i?"bg-white/20 text-white":""),children:a})]}),C?m.jsx("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-end",onClick:q=>q.stopPropagation(),onKeyDown:q=>q.stopPropagation(),children:C}):null,Y&&k?m.jsxs("div",{className:"space-y-3 rounded-2xl border border-white/10 bg-slate-950/40 p-3 sm:p-4",onClick:q=>q.stopPropagation(),onKeyDown:q=>q.stopPropagation(),children:[M?S:null,U?m.jsx(Es,{content:U,enableWorkLinks:!0}):null,te?m.jsxs("div",{className:"space-y-2",children:[m.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-white/40",children:"Notas"}),m.jsx(Es,{content:te,enableWorkLinks:!0})]}):null,z.length>0?m.jsxs("div",{className:"space-y-3",children:[m.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-white/40",children:"Vdeos"}),m.jsx("div",{className:"grid gap-4 lg:grid-cols-3",children:z.map((q,F)=>m.jsxs("div",{className:"space-y-2",children:[m.jsx(Lm,{url:q,title:`${e} vdeo ${F+1}`}),m.jsx("a",{href:q,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-full border border-white/15 bg-white/5 px-3 py-1 text-xs font-medium text-white/80 transition hover:border-white/30 hover:text-white",children:"Abrir en YouTube"})]},`${e}-video-${F}`))})]}):null,K?m.jsx("div",{className:"flex flex-wrap items-center justify-end gap-2 pt-1",children:j}):null]}):null]})}function U3(e){const t=(e.day()+6)%7;return e.subtract(t,"day")}function W3(e){const t=U3(e.startOf("month"));return Array.from({length:6},(n,r)=>Array.from({length:7},(i,o)=>t.add(r*7+o,"day")))}function Vu(e,t){return We(e).format("YYYY-MM-DD")===We(t).format("YYYY-MM-DD")}We.locale("es");const H3={present:"Presente",absent:"Ausente",pending:"Pendiente"},V3={present:"border border-emerald-500/40 bg-emerald-500/10 text-emerald-100",absent:"border border-rose-500/40 bg-rose-500/10 text-rose-100",pending:"border border-white/20 bg-white/10 text-white/70"},q3=["present","absent"],K3={present:"Han venido",absent:"Faltan"},Y3={present:"border border-emerald-500/60 bg-emerald-500/15 text-emerald-100 shadow shadow-emerald-500/15",absent:"border border-rose-500/60 bg-rose-500/10 text-rose-100 shadow shadow-rose-500/10"},G3="group inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-400/30 sm:text-sm",J3="border-emerald-500/60 bg-emerald-500/15 text-emerald-100 shadow-sm shadow-emerald-500/20 hover:border-emerald-400 hover:bg-emerald-500/20",Q3="border-white/15 bg-white/5 text-white/60 hover:border-white/40 hover:text-white",X3="flex h-6 w-6 items-center justify-center rounded-full border text-[12px] transition sm:h-7 sm:w-7",Z3="border-emerald-400 bg-emerald-400/20 text-emerald-100 shadow shadow-emerald-500/25",e5="border-white/25 text-white/40 group-hover:border-white/50 group-hover:text-white/80",t5=[];function n5(e){return We(e).locale("es").format("dddd, D [de] MMMM")}function r5(e){return We(e).format("MMMM YYYY")}function ub({mode:e,onChange:t}){return m.jsxs("div",{className:"flex items-center gap-2 rounded-full border border-white/10 bg-white/5 p-1",children:[m.jsx("button",{type:"button",className:Be("rounded-full px-4 py-2 text-sm font-semibold transition",e==="view"?"bg-white text-slate-900":"text-white/70 hover:text-white"),onClick:()=>{e!=="view"&&t("view")},children:"Vista"}),m.jsx("button",{type:"button",className:Be("rounded-full px-4 py-2 text-sm font-semibold transition",e==="edit"?"bg-white text-slate-900":"text-white/70 hover:text-white"),onClick:()=>{e!=="edit"&&t("edit")},children:"Editar"})]})}function i5({session:e,objectives:t,works:n,isActive:r,onSelect:i,onDuplicate:o,onDelete:a}){const u=b.useMemo(()=>new Map(t.map(p=>[p.id,p])),[t]),c=b.useMemo(()=>new Map(n.map(p=>[p.id,p])),[n]),f=b.useMemo(()=>{const p=e.workItems[0];if(!p)return;const v=c.get(p.workId);if(v)return u.get(v.objectiveId)},[e.workItems,c,u]),h=e.workItems.reduce((p,v)=>{const y=c.get(v.workId);return p+(v.customDurationMinutes??(y==null?void 0:y.estimatedMinutes)??0)},0);return m.jsxs("button",{type:"button",onClick:i,className:Be("group relative flex flex-col gap-3 rounded-3xl border border-white/10 bg-white/5 p-5 text-left transition hover:border-sky-400/50 hover:shadow-lg hover:shadow-sky-500/10",r&&"ring-2 ring-sky-400/70"),children:[f?m.jsx("div",{className:"absolute inset-0 -z-[1] rounded-3xl opacity-20 blur-2xl transition group-hover:opacity-40",style:{backgroundColor:f.colorHex}}):null,m.jsxs("div",{className:"flex items-start justify-between gap-2",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-lg font-semibold text-white",children:e.title||"Sesin sin ttulo"}),m.jsxs("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:[e.workItems.length," trabajos  ",h," min"]})]}),m.jsx(Bi,{objective:f,size:"sm"})]}),m.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-white/60",children:[e.workItems.slice(0,3).map(p=>{const v=c.get(p.workId),y=((v==null?void 0:v.subtitle)??"").trim();return m.jsx("span",{className:"rounded-full border border-white/10 px-3 py-1",children:y?`${(v==null?void 0:v.name)??"Trabajo"}  ${y}`:(v==null?void 0:v.name)??"Trabajo"},p.id)}),e.workItems.length>3?m.jsxs("span",{className:"rounded-full border border-white/10 px-3 py-1",children:["+",e.workItems.length-3]}):null]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(Bi,{objective:f,size:"sm"}),m.jsxs("div",{className:"ml-auto flex gap-2",children:[m.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),o()},className:"btn-secondary px-3 py-1 text-xs",children:"Duplicar"}),m.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),a()},className:"inline-flex items-center justify-center rounded-full border border-rose-500/40 px-3 py-1 text-xs font-semibold text-rose-300 transition hover:border-rose-400 hover:text-rose-200",children:"Eliminar"})]})]})]})}function s5(){const e=_e(O=>O.sessions),t=_e(O=>O.plans),n=_e(O=>O.works),r=_e(O=>O.objectives),i=_e(O=>O.assistants),o=_e(O=>O.addSession),a=_e(O=>O.duplicateSession),u=_e(O=>O.deleteSession),c=_e(O=>O.setAttendanceActualStatus),f=_e(O=>O.toggleSessionWorkCompletion),[h,p]=Do(),v=(h.get("plan")??"").trim(),y=h.get("session")??void 0,w=h.get("mode")==="edit"?"edit":"view",S=b.useMemo(()=>t.filter(O=>O.kind==="class"&&O.enabled),[t]),k=b.useMemo(()=>S.length===0?void 0:S.find(J=>J.id===v)??S[0],[S,v]),_=(k==null?void 0:k.id)??"classes";b.useEffect(()=>{if(!k||v===k.id)return;const O=new URLSearchParams(h);O.set("plan",k.id),p(O,{replace:!0})},[k,v,h,p]);const C=b.useMemo(()=>e.filter(O=>O.kind==="class"&&(O.planId??"classes")===_),[e,_]),[j,I]=b.useState(()=>w==="edit"),[D,A]=b.useState(new Set),U=b.useMemo(()=>[...C].sort((O,J)=>We(O.date).valueOf()-We(J.date).valueOf()),[C]),te=We().format("YYYY-MM-DD"),z=b.useMemo(()=>U.find(O=>O.date>=te)??U[U.length-1],[U,te]),[M,$]=b.useState(()=>y&&C.some(O=>O.id===y)?y:z==null?void 0:z.id),ne=O=>{const J=new URLSearchParams(h);O==="edit"?J.set("mode","edit"):J.delete("mode"),p(J,{replace:!0})};b.useEffect(()=>{y&&C.some(O=>O.id===y)&&$(y)},[y,C]),b.useEffect(()=>{if(!(M&&C.some(O=>O.id===M))){if(y&&C.some(O=>O.id===y)){$(y);return}$(z==null?void 0:z.id)}},[M,y,C,z]);const H=b.useMemo(()=>M?U.find(O=>O.id===M)??z:z,[U,M,z]),Y=b.useMemo(()=>{const O=(H==null?void 0:H.workItems)??[],J=O.length,de=O.filter(Re=>Re.completed??!1).length,pe=J>0?Math.round(de/J*100):0;return{total:J,done:de,percent:pe}},[H==null?void 0:H.workItems]),K=b.useMemo(()=>{const O=new Map;return H&&U.forEach(J=>{J.date>=H.date||J.workItems.forEach(de=>{de.workId&&O.set(de.workId,J.date)})}),O},[U,H]),se=O=>{const J=new URLSearchParams(h);O?J.set("session",O):J.delete("session"),p(J,{replace:!0})},q=O=>{$(O),se(O)},F=(H==null?void 0:H.date)??te,[L,N]=b.useState(F),[B,ee]=b.useState(We(F).startOf("month").format("YYYY-MM-DD"));b.useEffect(()=>{H&&(N(H.date),ee(We(H.date).startOf("month").format("YYYY-MM-DD")))},[H]);const R=b.useMemo(()=>{const O=new Map;return C.forEach(J=>{const de=We(J.date).format("YYYY-MM-DD"),pe=O.get(de)??[];pe.push(J),O.set(de,pe)}),O.forEach(J=>J.sort((de,pe)=>(de.title??"").localeCompare(pe.title??"","es"))),O},[C]),be=b.useMemo(()=>R.get(L)??[],[R,L]),he=b.useMemo(()=>W3(We(B)),[B]),ge=b.useMemo(()=>{const O=We(B);return C.filter(J=>{const de=We(J.date);return de.year()===O.year()&&de.month()===O.month()}).sort((J,de)=>We(J.date).valueOf()-We(de.date).valueOf())},[C,B]),me=b.useMemo(()=>{const O=new Map;return ge.forEach(J=>{const de=We(J.date).format("YYYY-MM-DD"),pe=O.get(de)??[];pe.push(J),O.set(de,pe)}),Array.from(O.entries()).sort((J,de)=>We(J[0]).valueOf()-We(de[0]).valueOf()).map(([J,de])=>({date:J,sessions:de.slice().sort((pe,Re)=>(pe.title??"").localeCompare(Re.title??"","es"))}))},[ge]),Ce=O=>{N(O),ee(We(O).startOf("month").format("YYYY-MM-DD"));const J=R.get(O)??[];J.length>0?q(J[0].id):q(void 0)},Te=()=>{const O=o({date:L,planId:_,title:"Nueva sesin",description:"",notes:""});q(O.id)},je=O=>{const J=a(O,L);J&&q(J.id)},ie=O=>{u(O),M===O&&q(void 0)},Ie=O=>{const J=We(B).add(O,"month");ee(J.format("YYYY-MM-DD")),N(de=>{const pe=We(de);return pe.month()===J.month()&&pe.year()===J.year()?de:J.startOf("month").format("YYYY-MM-DD")})},He=b.useMemo(()=>new Map(r.map(O=>[O.id,O])),[r]),qe=b.useMemo(()=>new Map(n.map(O=>[O.id,O])),[n]),rt=U.length===0,st=b.useMemo(()=>i.filter(O=>O.active).slice().sort((O,J)=>O.name.localeCompare(J.name,"es",{sensitivity:"base"})),[i]),St=(H==null?void 0:H.attendance)??t5,fn=b.useMemo(()=>{const O=new Map;St.forEach(pe=>{O.set(pe.assistantId,pe)});let J=0;st.forEach(pe=>{var Re;((Re=O.get(pe.id))==null?void 0:Re.actualStatus)==="present"&&(J+=1)});const de={present:J,absent:Math.max(st.length-J,0)};return{map:O,summary:de}},[St,st]),Xt=fn.map,wt=fn.summary,Rt=b.useMemo(()=>Ec(H==null?void 0:H.startTime,"18:30"),[H==null?void 0:H.startTime]),Q=b.useMemo(()=>{if(!H)return new Map;let O=0;const J=new Map;return H.workItems.forEach(de=>{const pe=qe.get(de.workId),Re=de.customDurationMinutes??(pe==null?void 0:pe.estimatedMinutes)??0,Pe=Ap(Rt+O);J.set(de.id,{startLabel:Pe,duration:Re}),O+=Re}),J},[H,qe,Rt]),fe=H?U.findIndex(O=>O.id===H.id):-1,ye=fe>0,Ee=fe>=0&&fe<U.length-1,G=()=>{ye&&q(U[fe-1].id)},P=()=>{Ee&&q(U[fe+1].id)},V=O=>{const J=O.target.value;if(!J)return;Ce(J);const de=R.get(J);de&&de.length>0&&q(de[0].id)},le=O=>{A(J=>{const de=new Set(J);return de.has(O)?de.delete(O):de.add(O),de})},Z=(O,J)=>{H&&c(H.id,O,J)},ue=j?m.jsxs("section",{className:"glass-panel space-y-6 p-6",children:[m.jsxs("header",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:"Calendario"}),m.jsx("h2",{className:"text-xl font-semibold text-white",children:r5(B)})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>Ie(-1),children:" Mes anterior"}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>Ie(1),children:"Mes siguiente "})]})]}),m.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.3fr_1.7fr]",children:[m.jsxs("section",{className:"space-y-4",children:[m.jsx("div",{className:"grid grid-cols-7 gap-2 text-center text-xs font-semibold uppercase tracking-wide text-white/50",children:["L","M","X","J","V","S","D"].map(O=>m.jsx("div",{className:"rounded-full bg-white/5 py-2",children:O},O))}),m.jsx("div",{className:"grid grid-cols-7 gap-2",children:he.flat().map(O=>{const J=O.format("YYYY-MM-DD"),de=R.get(J)??[],pe=O.month()===We(B).month(),Re=Vu(J,te),Pe=Vu(J,L);return m.jsxs("button",{type:"button",onClick:()=>Ce(J),className:Be("relative flex h-20 flex-col items-center justify-between rounded-2xl border p-2 text-sm transition",Pe?"border-sky-400/60 bg-sky-500/20 text-white shadow-lg shadow-sky-500/20":"border-white/10 bg-white/5 text-white/70 hover:border-white/30",!pe&&"text-white/30"),children:[m.jsx("span",{className:Be("flex h-8 w-8 items-center justify-center rounded-full text-base font-semibold",Re?"bg-white text-slate-900":""),children:O.format("D")}),m.jsxs("div",{className:"flex w-full flex-wrap justify-center gap-1",children:[de.slice(0,3).map(De=>{const dt=De.workItems[0],Fe=dt?n.find(Ke=>Ke.id===dt.workId):void 0,Ve=Fe?r.find(Ke=>Ke.id===Fe.objectiveId):void 0;return m.jsx("span",{className:"h-2 w-6 rounded-full",style:{backgroundColor:(Ve==null?void 0:Ve.colorHex)??"rgba(255,255,255,0.4)"}},De.id)}),de.length>3?m.jsx("span",{className:"h-2 w-2 rounded-full border border-white/40"}):null]})]},J)})})]}),m.jsxs("section",{className:"space-y-4",children:[m.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:"Sesiones en"}),m.jsx("h3",{className:"text-2xl font-semibold text-white",children:We(L).format("dddd, D [de] MMMM")})]}),m.jsx("div",{className:"flex gap-3",children:m.jsx("button",{type:"button",onClick:Te,className:"btn-primary",children:"+ Nueva sesin"})})]}),m.jsx("div",{className:"space-y-3",children:be.length===0?m.jsx("div",{className:"rounded-3xl border border-dashed border-white/15 p-10 text-center text-white/50",children:"An no hay sesiones planificadas este da. Crea una con el botn superior."}):be.map(O=>m.jsx(i5,{session:O,objectives:r,works:n,isActive:O.id===(H==null?void 0:H.id),onSelect:()=>q(O.id),onDuplicate:()=>je(O.id),onDelete:()=>ie(O.id)},O.id))}),me.length>0?m.jsxs("details",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[m.jsxs("summary",{className:"cursor-pointer text-sm font-semibold text-white/80",children:["Ver sesiones del mes (",ge.length,")"]}),m.jsx("div",{className:"custom-scrollbar mt-3 max-h-[22rem] space-y-3 overflow-y-auto pr-1",children:me.map(({date:O,sessions:J})=>{const de=J.length===1?"1 sesin":`${J.length} sesiones`;return m.jsxs("div",{role:"button",tabIndex:0,onClick:()=>Ce(O),onKeyDown:pe=>{(pe.key==="Enter"||pe.key===" ")&&(pe.preventDefault(),Ce(O))},className:Be("cursor-pointer rounded-2xl border border-white/10 bg-white/5 p-3 text-sm transition hover:border-white/40 hover:bg-white/10",Vu(O,L)&&"border-sky-400/50 bg-sky-500/10 shadow shadow-sky-500/10"),children:[m.jsxs("p",{className:"flex flex-wrap items-center gap-2 text-xs uppercase tracking-[0.3em] text-white/40",children:[m.jsx("span",{children:We(O).format("ddd  D MMM")}),m.jsx("span",{className:"rounded-full border border-white/15 px-2 py-0.5 text-[9px] font-semibold tracking-[0.2em] text-white/50",children:de})]}),m.jsx("div",{className:"mt-3 space-y-2 text-xs",children:J.map(pe=>{const Re=(pe.description??"").trim(),Pe=pe.workItems.reduce((De,dt)=>{const Fe=n.find(Ve=>Ve.id===dt.workId);return De+(dt.customDurationMinutes??(Fe==null?void 0:Fe.estimatedMinutes)??0)},0);return m.jsxs("button",{type:"button",onClick:De=>{De.stopPropagation(),Ce(O),q(pe.id)},className:Be("flex w-full flex-col gap-1 rounded-xl border border-white/10 bg-slate-950/60 px-3 py-2 text-left transition hover:border-white/30 hover:text-white",pe.id===(H==null?void 0:H.id)&&Vu(O,L)&&"border-sky-400/60 text-white"),children:[m.jsxs("div",{className:"flex w-full items-center justify-between gap-3",children:[m.jsx("span",{className:"truncate font-medium",children:pe.title||"Sesin sin ttulo"}),m.jsxs("span",{className:"text-[11px] uppercase tracking-wide text-white/40",children:[pe.workItems.length,"  ",Pe," min"]})]}),Re?m.jsx("p",{className:"text-[11px] leading-relaxed text-white/60",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:Re}):null]},pe.id)})})]},O)})})]}):null]})]})]}):null;return m.jsxs("div",{className:"space-y-6",children:[rt||!H?m.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-end",children:[m.jsx(ub,{mode:w,onChange:ne}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>I(O=>!O),children:j?"Ocultar calendario":"Abrir calendario"})]}):null,ue,rt?m.jsxs("section",{className:"glass-panel flex flex-col items-center justify-center gap-5 p-4 text-center sm:gap-6 sm:p-10",children:[m.jsx("div",{className:"grid h-28 w-28 place-items-center rounded-full bg-gradient-to-br from-sky-500/30 to-purple-500/30 shadow-lg shadow-sky-500/20 sm:h-32 sm:w-32",children:m.jsx("svg",{width:"52",height:"52",viewBox:"0 0 24 24",fill:"none",className:"text-white/80 sm:h-14 sm:w-14",children:m.jsx("path",{d:"M6 3v2M18 3v2M3.5 10h17M5 7h14a2 2 0 0 1 2 2v9a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3V9a2 2 0 0 1 2-2Z",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})})}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("p",{className:"text-lg font-semibold text-white sm:text-2xl",children:"An no hay sesiones"}),m.jsx("p",{className:"mx-auto max-w-md text-sm text-white/60 sm:text-base",children:"Crea tu primera sesin en el calendario y empieza a construir tu plan reutilizable."})]}),m.jsx("button",{type:"button",className:"btn-primary",onClick:()=>I(!0),children:"Abrir calendario"})]}):H?m.jsxs("section",{className:"glass-panel space-y-4 p-3 sm:space-y-6 sm:p-6 lg:p-8",children:[m.jsxs("header",{className:"space-y-3 sm:flex sm:items-start sm:justify-between sm:gap-6 sm:space-y-0",children:[m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs("div",{className:"flex items-center gap-2 text-xs uppercase tracking-[0.3em] text-white/40",children:[m.jsx("span",{className:"sm:hidden",children:"Sesin"}),m.jsx("span",{className:"hidden sm:inline",children:"Fecha"})]}),m.jsx("h2",{className:"font-display text-2xl font-semibold text-white sm:text-3xl",children:n5(H.date)}),m.jsx("p",{className:"text-sm font-medium text-white/80 sm:text-lg",children:H.title})]}),m.jsxs("div",{className:"flex flex-col gap-2.5 rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-sm text-white/70 sm:w-auto",children:[m.jsxs("div",{className:"flex items-center justify-between gap-4",children:[m.jsx("p",{className:"font-semibold text-white",children:"Duracin estimada"}),m.jsxs("span",{className:"rounded-full bg-white/10 px-3 py-1 text-xs text-white/80",children:[H.workItems.map(O=>{const J=qe.get(O.workId);return O.customDurationMinutes??(J==null?void 0:J.estimatedMinutes)??0}).reduce((O,J)=>O+J,0)||0," ","min"]})]}),m.jsxs("div",{children:[m.jsxs("p",{className:"mt-1 text-xs text-white/60",children:["Progreso: ",Y.done,"/",Y.total,"  ",Y.percent,"%"]}),m.jsx("div",{className:"mt-2 h-2 w-full overflow-hidden rounded-full border border-white/10 bg-slate-950/50",children:m.jsx("div",{className:"h-full rounded-full bg-white/25",style:{width:`${Math.min(Math.max(Y.percent,0),100)}%`}})})]}),m.jsxs("div",{className:"flex flex-col gap-2 sm:items-end",children:[m.jsx("label",{className:"text-[11px] uppercase tracking-wide text-white/40 sm:text-xs",children:"Ir a fecha"}),m.jsx("input",{type:"date",className:"input-field w-full sm:w-auto",value:H.date??te,onChange:V})]})]})]}),m.jsxs("div",{className:"flex flex-col gap-2.5 sm:flex-row sm:flex-wrap sm:items-center sm:justify-between",children:[m.jsxs("div",{className:"flex flex-wrap gap-2",children:[m.jsx("button",{type:"button",onClick:G,disabled:!ye,className:"btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold disabled:opacity-40 sm:h-10 sm:text-sm",children:" Anterior"}),m.jsx("button",{type:"button",onClick:P,disabled:!Ee,className:"btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold disabled:opacity-40 sm:h-10 sm:text-sm",children:"Siguiente "})]}),m.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[m.jsx(ub,{mode:w,onChange:ne}),m.jsx("button",{type:"button",className:"btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold sm:h-10 sm:text-sm",onClick:()=>I(O=>!O),children:j?"Ocultar calendario":"Abrir calendario"})]})]}),w==="edit"?m.jsx("div",{className:"rounded-2xl border border-white/10 bg-slate-950/40 p-3 sm:p-4",children:m.jsx(Dm,{session:H,works:n,objectives:r,assistants:i,onDateChange:O=>{N(O),ee(We(O).startOf("month").format("YYYY-MM-DD"))}})}):m.jsxs(m.Fragment,{children:[H.description&&m.jsx("div",{className:"rounded-2xl border border-white/5 bg-white/5 p-3 sm:p-4",children:m.jsx(Es,{content:H.description})}),m.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[m.jsx("h3",{className:"text-sm uppercase tracking-[0.3em] text-white/40",children:"Trabajos"}),m.jsx("div",{className:"space-y-3 sm:space-y-4",children:H.workItems.map(O=>{const J=qe.get(O.workId),de=J?He.get(J.objectiveId):void 0,pe=D.has(O.id),Re=Q.get(O.id),Pe=(Re==null?void 0:Re.startLabel)??Ap(Rt),De=(Re==null?void 0:Re.duration)??O.customDurationMinutes??(J==null?void 0:J.estimatedMinutes)??0,dt=(O.focusLabel??"").trim(),Fe=O.customDescriptionMarkdown??(J==null?void 0:J.descriptionMarkdown)??"",Ve=((J==null?void 0:J.videoUrls)??[]).map(Le=>Le.trim()).filter(Boolean),Ke=((J==null?void 0:J.subtitle)??"").trim();return m.jsx(sS,{title:(J==null?void 0:J.name)??"Trabajo eliminado",titleExtra:dt,subtitle:Ke,objective:de,checked:O.completed??!1,onCheckedChange:Le=>f(H.id,O.id,Le),orderNumber:(O.order??0)+1,startLabel:Pe,durationMinutes:De,tags:J==null?void 0:J.tags,lastSeenLabel:K.get(O.workId)?We(K.get(O.workId)).format("D MMM YYYY"):void 0,descriptionMarkdown:Fe,videoUrls:Ve,isExpanded:pe,onToggleExpanded:()=>le(O.id)},O.id)})})]})]}),w==="view"?i.length===0?m.jsxs("div",{className:"rounded-2xl border border-dashed border-white/15 bg-white/5 p-3 text-xs text-white/70 sm:text-sm sm:p-4",children:[m.jsx("p",{className:"font-semibold text-white",children:"Quines participan?"}),m.jsx("p",{className:"mt-1",children:"Crea tu lista de asistentes para poder registrar quin ha venido a clase en tiempo real."}),m.jsx(Li,{to:"/assistants",className:"btn-secondary mt-3 h-8 rounded-2xl px-3 text-xs",children:"Gestionar asistentes"})]}):st.length===0?m.jsxs("div",{className:"rounded-2xl border border-dashed border-white/15 bg-white/5 p-3 text-xs text-white/70 sm:text-sm sm:p-4",children:[m.jsx("p",{className:"font-semibold text-white",children:"Todos los asistentes estn inactivos."}),m.jsx("p",{className:"mt-1",children:"Activa al menos uno desde la seccin de asistentes para poder marcar su asistencia."}),m.jsx(Li,{to:"/assistants",className:"btn-secondary mt-3 h-8 rounded-2xl px-3 text-xs",children:"Ir a asistentes"})]}):m.jsxs("div",{className:"space-y-3 rounded-2xl border border-white/10 bg-slate-950/60 p-3 sm:space-y-4 sm:p-5",children:[m.jsxs("div",{className:"flex flex-col gap-2.5 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:"Asistencia en vivo"}),m.jsx("p",{className:"text-xs text-white/50 sm:text-sm",children:"Marca quin est presente en la sesin actual."})]}),m.jsx("div",{className:"flex flex-wrap gap-2",children:q3.map(O=>m.jsxs("span",{className:Be("inline-flex items-center gap-2 rounded-full px-2.5 py-0.5 text-[11px] font-semibold sm:px-3 sm:py-1 sm:text-xs",Y3[O]),children:[wt[O]," ",K3[O]]},O))})]}),m.jsx("div",{className:"space-y-2",children:st.map(O=>{const J=Xt.get(O.id),de=(J==null?void 0:J.status)??"pending",pe=(J==null?void 0:J.actualStatus)==="present",Re=()=>Z(O.id,pe?"absent":"present");return m.jsx("article",{className:"rounded-2xl border border-white/10 bg-white/5 p-2.5 sm:p-4",children:m.jsxs("div",{className:"flex flex-col gap-2.5 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-semibold text-white",children:O.name}),m.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2 text-[11px] text-white/50 sm:text-xs",children:[m.jsx("span",{className:"uppercase tracking-wide text-white/40",children:"Previsin"}),m.jsx("span",{className:Be("inline-flex items-center gap-2 rounded-full px-2 py-0.5 font-semibold",V3[de]),children:H3[de]}),m.jsx("span",{className:"hidden text-white/30 sm:inline",children:""}),m.jsx("span",{className:"uppercase tracking-wide text-white/40",children:"Asistencia"}),m.jsx("span",{className:Be("font-semibold",pe?"text-emerald-200":"text-white/60"),children:pe?"Presente":"No asisti"})]})]}),m.jsxs("div",{className:"flex flex-col items-end gap-1 text-right sm:flex-row sm:items-center sm:gap-3",children:[m.jsxs("button",{type:"button",onClick:Re,"aria-pressed":pe,"aria-label":`${pe?"Desmarcar asistencia de":"Marcar asistencia de"} ${O.name}`,title:pe?"Desmarcar asistencia":"Marcar como presente",className:Be(G3,pe?J3:Q3),children:[m.jsx("span",{className:Be(X3,pe?Z3:e5),children:pe?m.jsx("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 sm:h-4 sm:w-4","aria-hidden":"true",children:m.jsx("path",{d:"M4 8.5 6.5 11l5-6",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}):m.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-white/30 transition group-hover:bg-white/60"})}),m.jsx("span",{children:pe?"Ha asistido":"Marcar asistencia"})]}),m.jsx("span",{className:Be("text-[10px] font-medium uppercase tracking-[0.25em] sm:text-[11px]",pe?"text-emerald-200":"text-white/40"),children:pe?"PRESENTE":"AUSENTE"})]})]})},O.id)})})]}):null]}):m.jsx("div",{className:"glass-panel p-10 text-center text-white/60",children:"Selecciona una sesin desde el calendario."})]})}const Mp="https://maballesteros.com/ebooks/ebooks.json";let Op=null;const Pa={value:null,ts:0},Ph=new Map,Rh=new Map;function $m(e){try{return new URL(e).origin}catch{return"https://maballesteros.com"}}function Fm(e,t){const n=(e??"").trim();return!n||/^https?:\/\//i.test(n)?n:n.startsWith("/")?`${t}${n}`:`${t}/${n}`}async function o5(){if(Pa.value&&Date.now()-Pa.ts<6e4)return Pa.value;const e=`${window.location.origin}/ebooks/ebooks.json`,t=async r=>{const i=await fetch(r,{cache:"no-store"});if(!i.ok)throw new Error(`Failed to fetch catalog (${i.status})`);const o=await i.json();return Array.isArray(o)?o.map(a=>a).map(a=>({id:String(a.id??"").trim(),title:String(a.title??"").trim(),author:a.author?String(a.author):void 0,cover:a.cover?String(a.cover):void 0,description:a.description?String(a.description):void 0,path:String(a.path??"").trim()})).filter(a=>a.id&&a.title&&a.path):[]};let n=[];try{n=await t(e),Op=window.location.origin}catch{n=await t(Mp),Op=$m(Mp)}return Pa.value=n,Pa.ts=Date.now(),n}function a5(){return Op??"https://maballesteros.com"}function _c(e){const t=a5();return Fm(e,t)}async function oS(e){const t=_c(e);return Ph.has(t)||Ph.set(t,(async()=>{const n=await fetch(t,{cache:"no-store"});if(!n.ok)throw new Error(`Failed to fetch ebook index (${n.status})`);const i=await n.json()??{},o=String(i.title??"").trim()||"Ebook",a=String(i.basePath??"").trim()||"/ebooks/",u=Array.isArray(i.chapters)?i.chapters:[];return{title:o,basePath:a,chapters:u.map(c=>c).map(c=>({id:String(c.id??"").trim(),title:String(c.title??"").trim()||"Chapter",sections:(Array.isArray(c.sections)?c.sections:[]).map(f=>f).map(f=>({title:String(f.title??"").trim()||"Section",path:String(f.path??"").trim()})).filter(f=>!!f.path)})).filter(c=>c.id&&c.sections.length>0)}})()),Ph.get(t)}function Bm(e){const t=[];return(e.chapters??[]).forEach(n=>{(n.sections??[]).forEach(r=>{t.push({chapterId:n.id,chapterTitle:n.title,title:r.title,path:r.path})})}),t}const l5=[{month:1,names:["enero","jan","january"]},{month:2,names:["febrero","feb","february"]},{month:3,names:["marzo","mar","march"]},{month:4,names:["abril","abr","april"]},{month:5,names:["mayo","may"]},{month:6,names:["junio","jun","june"]},{month:7,names:["julio","jul","july"]},{month:8,names:["agosto","ago","august"]},{month:9,names:["septiembre","setiembre","sep","september"]},{month:10,names:["octubre","oct","october"]},{month:11,names:["noviembre","nov","november"]},{month:12,names:["diciembre","dic","dec","december"]}];function u5(e){return e.trim().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function aS(e){const t=u5(e),n=l5.find(r=>r.names.includes(t));return n?n.month:null}function c5(e){const t=e.trim(),n=/^(\d{2})\s+([A-Za-z]+)\b/.exec(t);if(!n)return null;const r=Number(n[1]);if(!Number.isFinite(r)||r<1||r>31)return null;const i=aS(n[2]);return i?`${String(i).padStart(2,"0")}-${String(r).padStart(2,"0")}`:null}function d5(e){const t=/(?:^|\/)(\d{2})_([a-zA-Z]+)\b/.exec(e);if(!t)return null;const n=Number(t[1]);if(!Number.isFinite(n)||n<1||n>31)return null;const r=aS(t[2]);return r?`${String(r).padStart(2,"0")}-${String(n).padStart(2,"0")}`:null}function lS(e,t){const n=We(t);if(!n.isValid())return null;const r=n.format("MM-DD");if(r==="02-29")return null;const i=Bm(e),o=new Map;return i.forEach(a=>{const u=c5(a.title),c=d5(a.path),f=u??c;f&&(o.has(f)||o.set(f,a))}),o.get(r)??null}function uS(e,t){if(e.length===0)return null;const n=(t??"").trim();if(!n)return{section:e[0],index:0};const r=e.findIndex(o=>o.path===n),i=r===-1?0:r+1;return i>=e.length?null:{section:e[i],index:i}}function cb(e,t,n){const r=$m(_c(e)),o=`${((t.basePath??"/").startsWith("/")?t.basePath:`/${t.basePath}`).replace(/\/?$/,"/")}${n.replace(/^\//,"")}`;return Fm(o,r)}async function f5(e){const t=Fm(e,$m(Mp));return Rh.has(t)||Rh.set(t,(async()=>{const n=await fetch(t,{cache:"no-store"});if(!n.ok)throw new Error(`Failed to fetch markdown (${n.status})`);return await n.text()})()),Rh.get(t)}function h5(e){let t=String(e??"");return t.trim()?(t=t.replace(/\r\n/g,`
`),t=t.replace(/^---\n[\s\S]*?\n---\n/m,""),t=t.replace(/```([\s\S]*?)```/g,(n,r)=>String(r??"").trim()),t=t.replace(/`([^`]+)`/g,"$1"),t=t.replace(/^>\s?/gm,""),t=t.replace(/^\s{0,3}#{1,6}\s+/gm,""),t=t.replace(/^\s{0,3}([-*+]|\d+\.)\s+/gm,"- "),t=t.replace(/!\[([^\]]*)\]\(([^)]+)\)/g,(n,r,i)=>{const o=String(r??"").trim(),a=String(i??"").trim();return o&&a?`${o} (${a})`:o||a}),t=t.replace(/\[([^\]]+)\]\(([^)]+)\)/g,(n,r,i)=>{const o=String(r??"").trim(),a=String(i??"").trim();return o&&a?`${o} (${a})`:o||a}),t=t.replace(/(\*\*|__)(.*?)\1/g,"$2"),t=t.replace(/(\*|_)(.*?)\1/g,"$2"),t=t.replace(/~~(.*?)~~/g,"$1"),t=t.replace(/\n{3,}/g,`

`),t.trim()):""}async function p5(e){const t=String(e??"");if(!t)return!1;try{return await navigator.clipboard.writeText(t),!0}catch{try{const n=document.createElement("textarea");n.value=t,n.setAttribute("readonly","true"),n.style.position="fixed",n.style.left="-9999px",document.body.appendChild(n),n.select();const r=document.execCommand("copy");return document.body.removeChild(n),r}catch{return!1}}}function m5(e,t){const n=(e??[]).map(i=>String(i??"").trim()).filter(Boolean),r=String(t??"").trim();return!r||n.includes(r)?n:[...n,r]}function db(e){const t=(e??[]).map(n=>String(n??"").trim()).filter(Boolean);return t.length>0?t[t.length-1]:void 0}function g5({work:e,sessionId:t,sessionDate:n,planId:r,sessionItem:i}){const o=e.ebookRef,a=_e(q=>q.sessions),u=_e(q=>q.updateSessionWorkDetails),[c,f]=b.useState(null),[h,p]=b.useState(null),[v,y]=b.useState(!1),[w,S]=b.useState(null),[k,_]=b.useState(null),[C,j]=b.useState(""),[I,D]=b.useState(!1),[A,U]=b.useState("idle"),te=b.useMemo(()=>w?Bm(w):[],[w]),z=b.useMemo(()=>{const q=db(i.readPaths);if(q)return q;const F=a.filter(L=>L.planId===r&&We(L.date).isBefore(We(n),"day")).slice().sort((L,N)=>We(N.date).valueOf()-We(L.date).valueOf());for(const L of F){const N=(L.workItems??[]).find(ee=>ee.workId===e.id);if(!N||N.result!=="ok"&&N.completed!==!0)continue;const B=db(N.readPaths);if(B)return B}},[r,n,i.readPaths,a,e.id]);b.useEffect(()=>{if(!(o!=null&&o.indexUrl))return;let q=!1;return y(!0),f(null),(async()=>{try{const F=await oS(o.indexUrl);if(q)return;S(F)}catch(F){if(q)return;f(F instanceof Error?F.message:"Error loading ebook index"),S(null)}finally{q||y(!1)}})(),()=>{q=!0}},[o==null?void 0:o.indexUrl]);const M=b.useMemo(()=>{if(!o||!w)return null;const q=i.contentRef;if(q&&q.kind==="ebook_section"&&q.ebookId===o.ebookId&&q.indexUrl===o.indexUrl){const F=te.findIndex(L=>L.path===q.sectionPath);if(F>=0)return{section:te[F],index:F}}if(o.mode==="daily_fixed"){const F=lS(w,n);if(!F)return null;const L=te.findIndex(N=>N.path===F.path);return{section:F,index:L>=0?L:0}}return uS(te,z)},[o,w,z,te,n,i.contentRef]);b.useEffect(()=>{if(!o||!M)return;const q=i.contentRef;(!q||q.kind!=="ebook_section"||q.ebookId!==o.ebookId||q.indexUrl!==o.indexUrl||q.sectionPath!==M.section.path)&&u(t,i.id,{contentRef:{kind:"ebook_section",ebookId:o.ebookId,indexUrl:o.indexUrl,sectionPath:M.section.path,sectionTitle:M.section.title,chapterTitle:M.section.chapterTitle}})},[o,M,t,i.id,i.contentRef,u]),b.useEffect(()=>{M&&k===null&&_(M.index)},[k,M]),b.useEffect(()=>{if(k===null||!w||!o)return;const q=te[k];if(!q)return;let F=!1;return D(!0),p(null),(async()=>{try{const L=cb(o.indexUrl,w,q.path),N=await f5(L);if(F)return;j(N)}catch(L){if(F)return;j(""),p(L instanceof Error?L.message:"Error loading content")}finally{F||D(!1)}})(),()=>{F=!0}},[k,o,w,te]);const $=(o==null?void 0:o.mode)==="sequential"&&k!==null&&k+1<te.length,ne=k!==null?te[k]:null,H=(o==null?void 0:o.mode)==="sequential"&&k!==null?`${k+1}/${te.length}`:void 0,Y=()=>{$&&_(q=>q===null?q:Math.min(q+1,te.length-1))},K=async()=>{if(!o||!ne||!w)return;const q=cb(o.indexUrl,w,ne.path),F=`${w.title}  ${ne.title}`,L=ne.chapterTitle?`(${ne.chapterTitle})`:"",N=h5(C),B=[F,L,"",N,"",q].filter(R=>String(R??"").trim().length>0).join(`
`),ee=await p5(B);U(ee?"copied":"error"),window.setTimeout(()=>U("idle"),ee?1500:2500)},se=()=>{!o||!ne||(u(t,i.id,{completed:!0,result:i.result??"ok",contentRef:{kind:"ebook_section",ebookId:o.ebookId,indexUrl:o.indexUrl,sectionPath:ne.path,sectionTitle:ne.title,chapterTitle:ne.chapterTitle},readPaths:m5(i.readPaths,ne.path)}),o.mode==="sequential"&&Y())};return o?v?m.jsx("p",{className:"text-sm text-white/60",children:"Cargando ebook"}):c?m.jsxs("div",{className:"rounded-xl border border-rose-500/40 bg-rose-500/10 p-3 text-sm text-rose-200",children:["Error cargando ebook: ",c]}):!M||!ne||!w?m.jsx("div",{className:"rounded-xl border border-white/10 bg-white/5 p-3 text-sm text-white/60",children:"No hay entrada disponible para esta fecha."}):m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:w.title}),m.jsxs("p",{className:"text-sm font-semibold text-white",children:[ne.title,H?m.jsxs("span",{className:"ml-2 text-xs font-semibold text-white/50",children:["(",H,")"]}):null]}),m.jsx("p",{className:"text-xs text-white/50",children:ne.chapterTitle})]}),m.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[m.jsx("button",{type:"button",className:Be("btn-secondary",A==="copied"&&"border-emerald-400/30 text-emerald-100",A==="error"&&"border-rose-400/30 text-rose-100"),onClick:K,children:A==="copied"?"Copiado":A==="error"?"Error al copiar":"Copiar"}),o.mode==="sequential"?m.jsx("button",{type:"button",className:"btn-secondary",onClick:Y,disabled:!$,children:"Ver ms"}):null,m.jsx("button",{type:"button",className:Be("btn-secondary","border-emerald-400/30"),onClick:se,children:"Marcar ledo"})]})]}),I?m.jsx("p",{className:"text-sm text-white/60",children:"Cargando contenido"}):null,h?m.jsxs("div",{className:"rounded-xl border border-rose-500/40 bg-rose-500/10 p-3 text-sm text-rose-200",children:["Error cargando contenido: ",h]}):null,C?m.jsx(Es,{content:C,enableWorkLinks:!0}):null]}):m.jsx("div",{className:"rounded-xl border border-amber-400/40 bg-amber-500/10 p-3 text-sm text-amber-200",children:"Este work es `nodeType=ebook` pero no tiene `ebookRef` configurado."})}We.locale("es");const cS="personal-exclude",y5={ok:"OK",doubt:"Dudosa",fail:"Fallo"},v5={ok:"border-emerald-500/50 bg-emerald-500/15 text-emerald-100 hover:border-emerald-400",doubt:"border-amber-400/40 bg-amber-500/10 text-amber-200 hover:border-amber-300",fail:"border-rose-500/50 bg-rose-500/10 text-rose-200 hover:border-rose-400"};function ed(e){return Array.from(new Set((e??[]).map(t=>t.trim().toLowerCase()).filter(t=>t.length>0)))}function bo(e,t){const n=ed(e.tags),r=e.nodeType??"work";return!(t.byWorkIds&&t.byWorkIds.length>0&&!t.byWorkIds.includes(e.id)||t.byNodeTypes&&t.byNodeTypes.length>0&&!t.byNodeTypes.includes(r)||t.byTags&&t.byTags.length>0&&!t.byTags.map(o=>o.trim().toLowerCase()).filter(Boolean).every(o=>n.includes(o)))}function dS(e,t){const n=e.nodeType??"work",r=t.targetsDays[n]??t.targetsDays.work??7,i=ed(e.tags),o=(t.overrides??[]).reduce((u,c)=>{var p,v;const f=((v=(p=c.match)==null?void 0:p.tagsAny)==null?void 0:v.map(y=>y.trim().toLowerCase()).filter(Boolean))??[];return f.length===0?u:f.some(y=>i.includes(y))?u*(c.multiplier||1):u},1);return Math.max(1,Math.round(r*o))}function x5(e){return(e.nodeType??"").trim().toLowerCase()!=="style"}function vo(e,t){const n=typeof e.estimatedMinutes=="number"?e.estimatedMinutes:0;if(Number.isFinite(n)&&n>0)return n;const r=(e.nodeType??"work").trim().toLowerCase()||"work",i=t.defaultMinutesByNodeType[r]??t.defaultMinutesByNodeType.work??3;return Math.max(.25,Number(i)||3)}function b5(e){return e.startOf("day").diff(e.startOf("year"),"day")+1}function w5(e,t){const n=We(t),r=Math.trunc(Number(e.number));if(!Number.isFinite(r))return!1;switch(e.kind){case"day_of_year":return b5(n)===r;case"day_of_month":return n.date()===r;case"day_of_week":return n.day()===r;default:return!1}}function fS(e){var h,p,v;const t=e.groups??[];if(t.length>0)return[...t].sort((y,w)=>(y.order??0)-(w.order??0));const n=Math.max(0,Number((h=e.template)==null?void 0:h.focusMinutes)||18),r=Math.max(0,Number((p=e.template)==null?void 0:p.rouletteMinutes)||10),i=Math.max(0,Number((v=e.template)==null?void 0:v.recapMinutes)||0),o=e.focusSelectors??[],a=e.rouletteSelectors??[],u=o.length>0?o:[{byNodeTypes:["segment","form"]}],c=a.length>0?a:[{byNodeTypes:["technique"]},{byTags:["roulette"]}],f=[{id:"formas",name:"Formas",enabled:!0,order:1,type:"work",limitMode:"minutes",minutesBudget:n,strategy:"overdue",hierarchyRule:"prefer_leaves",include:u,exclude:[]},{id:"tecnicas",name:"Tcnicas",enabled:!0,order:2,type:"work",limitMode:"minutes",minutesBudget:r,strategy:"weighted",hierarchyRule:"allow_all",include:c,exclude:[]}];return i>0&&f.push({id:"recap",name:"Recap",enabled:!0,order:99,type:"note",limitMode:"minutes",minutesBudget:i}),f}function k5({mode:e,onChange:t}){return m.jsxs("div",{className:"flex items-center gap-2 rounded-full border border-white/10 bg-white/5 p-1",children:[m.jsx("button",{type:"button",className:Be("rounded-full px-4 py-2 text-sm font-semibold transition",e==="view"?"bg-white text-slate-900":"text-white/70 hover:text-white"),onClick:()=>{e!=="view"&&t("view")},children:"Vista"}),m.jsx("button",{type:"button",className:Be("rounded-full px-4 py-2 text-sm font-semibold transition",e==="edit"?"bg-white text-slate-900":"text-white/70 hover:text-white"),onClick:()=>{e!=="edit"&&t("edit")},children:"Editar"})]})}function S5(e){let t=2166136261;for(let n=0;n<e.length;n+=1)t^=e.charCodeAt(n),t=Math.imul(t,16777619);return t>>>0}function E5(e){let t=e>>>0;return()=>{t=t+1831565813>>>0;let n=Math.imul(t^t>>>15,1|t);return n^=n+Math.imul(n^n>>>7,61|n),((n^n>>>14)>>>0)/4294967296}}function _5(e,t,n){const r=E5(S5(n));return e.map(i=>{const o=Math.max(1e-4,t(i)),a=Math.max(1e-9,r()),u=-Math.log(a)/o;return{item:i,score:u}}).sort((i,o)=>i.score-o.score).map(({item:i})=>i)}function C5(e){const t=new Map;return e.forEach(n=>{n.workItems.forEach(r=>{if(!((r.completed??!1)||typeof r.result<"u"))return;const o=t.get(r.workId);(!o||We(n.date).isAfter(o.date))&&t.set(r.workId,{date:n.date,result:r.result,effort:r.effort})})}),t}function j5(e){const{works:t,personalSessions:n,cadence:r,today:i}=e,o=C5(n);return t.filter(a=>x5(a)).filter(a=>(a.nodeType??"").trim().toLowerCase()!=="reading"||!a.schedule?!0:w5(a.schedule,i)).filter(a=>!ed(a.tags).includes(cS)).map(a=>{const u=o.get(a.id),c=dS(a,r);if(!u)return{work:a,targetDays:c,overdueScore:1e4};const f=Math.max(We(i).diff(We(u.date),"day"),0),h=Math.max(f-c,0);return{work:a,targetDays:c,lastSeen:u.date,daysSince:f,overdueScore:h,lastResult:u.result}}).sort((a,u)=>{if(u.overdueScore!==a.overdueScore)return u.overdueScore-a.overdueScore;const c=a.daysSince??1e4,f=u.daysSince??1e4;return f!==c?f-c:a.work.name.localeCompare(u.work.name,"es",{sensitivity:"base"})})}function N5(e){return e?We(e).format("D MMM YYYY"):"Nunca"}function T5(e){const{dueList:t,plan:n,today:r,childCountByWorkId:i}=e,o=n.limitMode==="count"||n.limitMode==="both",a=n.limitMode==="minutes"||n.limitMode==="both",u=o?Math.max(1,Math.round(n.maxItems||12)):Number.POSITIVE_INFINITY,c=a?Math.max(0,Number(n.minutesBudget)||0):Number.POSITIVE_INFINITY,f=new Set([].filter(z=>(z.completed??!1)||typeof z.result<"u").map(z=>z.workId)),h=t.filter(z=>!f.has(z.work.id)),p=We(r).day(),v=fS(n).filter(z=>z.enabled).filter(z=>{const M=z.daysOfWeek??[];return M.length===0||M.includes(p)}).sort((z,M)=>(z.order??0)-(M.order??0)),y=v.filter(z=>(z.type??"work")==="note").reduce((z,M)=>M.limitMode==="minutes"||M.limitMode==="both"?z+Math.max(0,Number(M.minutesBudget)||0):z,0),w=Number.isFinite(c)?Math.max(0,c-y):Number.POSITIVE_INFINITY,S=`kungfu-${r}`,k=z=>{const M=z.overdueScore>=1e4?1e3:Math.max(0,z.overdueScore+1);return z.lastResult==="fail"?M*1.6:z.lastResult==="doubt"?M*1.25:M},_=z=>vo(z.work,n),C=z=>{const M=(z.nodeType??"work").trim().toLowerCase()||"work";return{segment:30,drill:22,form:20,work:10,application:0,technique:0,link:0,style:-100}[M]??5},j=z=>[...z].sort((M,$)=>{if($.overdueScore!==M.overdueScore)return $.overdueScore-M.overdueScore;const ne=M.daysSince??1e4,H=$.daysSince??1e4;if(H!==ne)return H-ne;const Y=C($.work)-C(M.work);return Y!==0?Y:M.work.name.localeCompare($.work.name,"es",{sensitivity:"base"})}),I=new Set,D=[];let A=0,U=0;for(const z of v){if((z.type??"work")==="note"){D.push({group:z,items:[],plannedMinutes:0});continue}const $=z.include??[],ne=z.exclude??[];let H=h.filter(ge=>I.has(ge.work.id)||!($.length===0?!0:$.some(Te=>bo(ge.work,Te)))?!1:!ne.some(Te=>bo(ge.work,Te)));if((z.hierarchyRule??"allow_all")==="prefer_leaves"){const ge=new Set(H.map(me=>me.work.parentWorkId).filter(Boolean));H=H.filter(me=>ge.has(me.work.id)?(i.get(me.work.id)??0)===0:!0)}const se=(z.strategy??"overdue")==="weighted"?_5(H,k,`${S}-${z.id}`):j(H),q=z.limitMode??"minutes",F=q==="count"||q==="both",L=q==="minutes"||q==="both",N=Number(z.maxItems),B=F&&Number.isFinite(N)?Math.max(0,Math.round(N)):Number.POSITIVE_INFINITY,ee=Number(z.minutesBudget),R=L&&Number.isFinite(ee)?Math.max(0,ee):Number.POSITIVE_INFINITY,be=[];let he=0;for(const ge of se){if(U>=u||be.length>=B)break;const me=_(ge);if(!(he+me>R)&&!(A+me>w)&&(be.push(ge),he+=me,A+=me,U+=1,I.add(ge.work.id),a&&A>=w))break}if(D.push({group:z,items:be,plannedMinutes:Math.round(he*10)/10}),U>=u||a&&A>=w)break}const te=Math.round((A+y)*10)/10;return{groups:D,plannedMinutes:{work:Math.round(A*10)/10,reserved:Math.round(y*10)/10,total:te},totalItems:U}}function I5(e){const{items:t,groups:n,worksById:r,resolveGroupLabelForItem:i}=e;if(t.length===0)return t;let o=[...t];const a=u=>(u.completed??!1)||typeof u.result<"u";return n.filter(u=>(u.type??"work")!=="note").forEach(u=>{const c=u.limitMode??"minutes";if(!(c==="count"||c==="both"))return;const h=Number(u.maxItems);if(!Number.isFinite(h)||h<=0)return;const p=[];if(o.forEach((_,C)=>{const j=r.get(_.workId);!j||i(_,j)!==u.name||p.push(C)}),p.length<=h)return;const v=p.reduce((_,C)=>_+(a(o[C])?1:0),0),y=Math.max(0,h-v),w=[];if(p.forEach(_=>{a(o[_])||w.push(_)}),w.length<=y)return;const S=w.length-y,k=new Set(w.slice(-S));o=o.filter((_,C)=>!k.has(C))}),o.map((u,c)=>({...u,order:c}))}function P5(){const e=_e(P=>P.works),t=_e(P=>P.sessions),n=_e(P=>P.plans),r=_e(P=>P.objectives),i=_e(P=>P.assistants),o=_e(P=>P.kungfuCadence),a=_e(P=>P.kungfuTodayPlan);Ts();const u=_e(P=>P.addSession),c=_e(P=>P.addWorkToSession),f=_e(P=>P.updateSessionWorkDetails),h=_e(P=>P.updateSessionWorkItems),p=_e(P=>P.updateSession),[v,y]=Do(),w=(v.get("plan")??"").trim(),S=We().format("YYYY-MM-DD"),k=(v.get("date")??"").trim(),_=We(k,"YYYY-MM-DD",!0).isValid()?k:S,C=v.get("mode")==="edit"?"edit":"view",j=b.useMemo(()=>n.filter(P=>P.kind==="personal"&&P.enabled),[n]),I=b.useMemo(()=>j.length===0?void 0:j.find(V=>V.id===w)??j[0],[j,w]),D=(I==null?void 0:I.id)??"personal-kungfu";b.useEffect(()=>{if(!I||w===I.id)return;const P=new URLSearchParams(v);P.set("plan",I.id),y(P,{replace:!0})},[I,w,v,y]),b.useEffect(()=>{if(!!We(k,"YYYY-MM-DD",!0).isValid())return;const V=new URLSearchParams(v);V.set("date",_),y(V,{replace:!0})},[_,k,v,y]);const A=(I==null?void 0:I.cadence)??o,U=(I==null?void 0:I.todayPlan)??a,te=b.useMemo(()=>t.filter(P=>P.kind==="personal"&&(P.planId??"personal-kungfu")===D),[t,D]),z=b.useMemo(()=>te.find(P=>P.date===_),[te,_]),M=b.useMemo(()=>j5({works:e,personalSessions:te,cadence:A,today:_}),[e,te,A,_]),$=b.useMemo(()=>{const P=new Map;return e.forEach(V=>{const le=V.parentWorkId??"";le&&P.set(le,(P.get(le)??0)+1)}),P},[e]),ne=b.useMemo(()=>new Map(e.map(P=>[P.id,P])),[e]),H=b.useMemo(()=>new Map(r.map(P=>[P.id,P])),[r]),[Y,K]=b.useState(null),[se,q]=b.useState({}),[F,L]=b.useState(new Set),N=b.useCallback(P=>{const V=(P??_).trim()||_,le=te.find(Z=>Z.date===V);return le||u({date:V,kind:"personal",planId:D,title:(I==null?void 0:I.name)??"Entrenamiento personal",description:"",notes:""})},[_,u,te,I==null?void 0:I.name,D]),B=b.useCallback(P=>{const V=(P??[]).slice().sort((O,J)=>(O.order??0)-(J.order??0)),le=new Map,Z=[],ue=(O,J)=>{const de=(O??[]).map(Pe=>String(Pe??"").trim()).filter(Boolean),pe=(J??[]).map(Pe=>String(Pe??"").trim()).filter(Boolean);if(de.length===0&&pe.length===0)return;const Re=[...de];return pe.forEach(Pe=>{Re.includes(Pe)||Re.push(Pe)}),Re};return V.forEach(O=>{const J=O.workId;if(!J)return;const de=le.get(J);if(!de){le.set(J,{...O}),Z.push(J);return}const pe={...de,customDescriptionMarkdown:de.customDescriptionMarkdown??O.customDescriptionMarkdown,customDurationMinutes:de.customDurationMinutes??O.customDurationMinutes,notes:de.notes??O.notes,focusLabel:de.focusLabel??O.focusLabel,completed:!!(de.completed??!1)||!!(O.completed??!1),result:de.result??O.result,effort:de.effort??O.effort,contentRef:de.contentRef??O.contentRef,readPaths:ue(de.readPaths,O.readPaths)};le.set(J,pe)}),Z.map((O,J)=>({...le.get(O),order:J}))},[]);b.useEffect(()=>{if(!z)return;const P=z.workItems??[],V=P.reduce((ue,O)=>{const J=O.workId;return J&&ue.set(J,(ue.get(J)??0)+1),ue},new Map);if(!Array.from(V.values()).some(ue=>ue>1))return;const Z=B(P);Z.length!==P.length&&h(z.id,Z)},[z,h,B]);const ee=b.useMemo(()=>{const P=We(_).day();return fS(U).filter(V=>V.enabled).filter(V=>{const le=V.daysOfWeek??[];return le.length===0||le.includes(P)}).sort((V,le)=>(V.order??0)-(le.order??0))},[U,_]);b.useEffect(()=>{var Z;const P={},V=(z==null?void 0:z.notesByGroupId)??void 0;V&&Object.entries(V).forEach(([ue,O])=>{const J=(ue??"").trim();J&&(P[J]=String(O??""))});const le=((z==null?void 0:z.notes)??"").toString();if(le.trim().length>0){const ue=((Z=ee.find(O=>(O.type??"work")==="note"))==null?void 0:Z.id)??"note";P[ue]||(P[ue]=le)}q(P)},[z==null?void 0:z.notes,z==null?void 0:z.notesByGroupId,ee]);const R=b.useMemo(()=>{const P=new Map;return ee.filter(V=>(V.type??"work")!=="note").forEach((V,le)=>{P.set(V.name,le)}),P},[ee]),be=b.useCallback(P=>{const V=ee.filter(le=>(le.type??"work")!=="note");for(const le of V){const Z=le.include??[],ue=le.exclude??[];if(!(!(Z.length===0||Z.some(de=>bo(P,de)))||ue.some(de=>bo(P,de))))return le.name}return"Hoy"},[ee]),he=b.useMemo(()=>new Set(ee.filter(P=>(P.type??"work")!=="note").map(P=>P.name).filter(Boolean)),[ee]),ge=b.useCallback((P,V)=>{const le=(P.focusLabel??"").trim();return le&&he.has(le)?le:be(V)},[he,be]),me=b.useCallback(P=>{const V=_e.getState().sessions.find(Z=>Z.id===P);if(!V)return null;const le=(V.workItems??[]).map(Z=>{const ue=ne.get(Z.workId);if(!ue)return Z;const O=ge(Z,ue);return O===Z.focusLabel?Z:{...Z,focusLabel:O}});return le.sort((Z,ue)=>{const O=Z.focusLabel??"Hoy",J=ue.focusLabel??"Hoy",de=R.get(O)??999,pe=R.get(J)??999;return de!==pe?de-pe:(Z.order??0)-(ue.order??0)}),le},[R,ne,ge]),[Ce,Te]=b.useState(!1),je=b.useCallback(async P=>{const V=_e.getState(),le=V.sessions.find(Pe=>Pe.id===P);if(!le)return;const Z=(le.planId??D).trim()||D,ue=le.date,J=V.sessions.filter(Pe=>Pe.kind==="personal"&&(Pe.planId??D)===Z).filter(Pe=>We(Pe.date).isBefore(We(ue),"day")).slice().sort((Pe,De)=>We(De.date).valueOf()-We(Pe.date).valueOf()),de=(Pe,De)=>{const dt=(De.readPaths??[]).map(Fe=>String(Fe??"").trim()).filter(Boolean);if(dt.length>0)return dt[dt.length-1];for(const Fe of J){const Ve=(Fe.workItems??[]).find(Le=>Le.workId===Pe);if(!Ve||Ve.result!=="ok"&&Ve.completed!==!0)continue;const Ke=(Ve.readPaths??[]).map(Le=>String(Le??"").trim()).filter(Boolean);if(Ke.length>0)return Ke[Ke.length-1]}},pe=await Promise.all((le.workItems??[]).map(async Pe=>{var Ve;const De=ne.get(Pe.workId),dt=((De==null?void 0:De.nodeType)??"work").trim().toLowerCase();if(!De||dt!=="ebook"||!De.ebookRef)return Pe;const Fe=De.ebookRef;try{const Ke=await oS(Fe.indexUrl),Le=Bm(Ke);let ot=null;const yt=Pe.contentRef;if(yt&&yt.kind==="ebook_section"&&yt.ebookId===Fe.ebookId&&yt.indexUrl===Fe.indexUrl){const Ge=Le.findIndex(vt=>vt.path===yt.sectionPath);Ge>=0&&(ot={section:Le[Ge],index:Ge})}if(!ot)if(Fe.mode==="daily_fixed"){const Ge=lS(Ke,ue);if(Ge){const vt=Le.findIndex(tt=>tt.path===Ge.path);ot={section:Ge,index:vt>=0?vt:0}}}else ot=uS(Le,de(De.id,Pe));if(!ot)return Pe;const Ye={kind:"ebook_section",ebookId:Fe.ebookId,indexUrl:Fe.indexUrl,sectionPath:ot.section.path,sectionTitle:ot.section.title,chapterTitle:ot.section.chapterTitle};return((Ve=Pe.contentRef)==null?void 0:Ve.kind)==="ebook_section"&&Pe.contentRef.ebookId===Ye.ebookId&&Pe.contentRef.indexUrl===Ye.indexUrl&&Pe.contentRef.sectionPath===Ye.sectionPath?Pe:{...Pe,contentRef:Ye}}catch{return Pe}}));pe.some((Pe,De)=>{var dt;return Pe.contentRef!==((dt=(le.workItems??[])[De])==null?void 0:dt.contentRef)})&&h(P,pe)},[D,h,ne]);b.useEffect(()=>{z&&je(z.id)},[z==null?void 0:z.id,z,je]);const ie=b.useCallback(P=>{if(!Ce&&M.length!==0){Te(!0);try{const V=z??N(),Z=(_e.getState().sessions.find(Fe=>Fe.id===V.id)??V).workItems??[],ue=new Set(Z.map(Fe=>Fe.workId));if((U.limitMode==="count"||U.limitMode==="both")&&ue.size>=Math.max(1,Math.round(U.maxItems||12))){P!=null&&P.includeDiagnostics&&(K({type:"success",text:"Plan ya est lleno por cantidad. Sube el mximo de tems en Ajustes."}),window.setTimeout(()=>K(null),2500));return}const J=new Map;Z.forEach(Fe=>{const Ve=ne.get(Fe.workId);if(!Ve)return;const Ke=ge(Fe,Ve),Le=ee.find(Ye=>Ye.name===Ke),ot=(Le==null?void 0:Le.id)??Ke,yt=J.get(ot)??{minutes:0,items:0};J.set(ot,{minutes:yt.minutes+vo(Ve,U),items:yt.items+1})});const de=Z.reduce((Fe,Ve)=>{const Ke=ne.get(Ve.workId);return Ke?Fe+vo(Ke,U):Fe},0),pe={...U,maxItems:Math.max(0,Math.round((U.maxItems??0)-ue.size)),minutesBudget:Math.max(0,Number(U.minutesBudget??0)-de),groups:ee.map(Fe=>{const Ve=J.get(Fe.id),Ke={...Fe};return Ve&&(typeof Fe.minutesBudget=="number"&&Number.isFinite(Fe.minutesBudget)&&(Ke.minutesBudget=Math.max(0,Fe.minutesBudget-Ve.minutes)),typeof Fe.maxItems=="number"&&Number.isFinite(Fe.maxItems)&&(Ke.maxItems=Math.max(0,Math.round(Fe.maxItems-Ve.items)))),Ke})},Re=M.filter(Fe=>!ue.has(Fe.work.id)),Pe=T5({dueList:Re,todaySession:void 0,plan:pe,today:_,childCountByWorkId:$});let De=0;Pe.groups.filter(Fe=>(Fe.group.type??"work")!=="note").forEach(Fe=>{Fe.items.forEach(Ve=>{c(V.id,{workId:Ve.work.id,focusLabel:Fe.group.name,customDurationMinutes:vo(Ve.work,U)}),De+=1})});const dt=me(V.id);if(dt){const Fe=B(dt),Ve=I5({items:Fe,groups:ee,worksById:ne,resolveGroupLabelForItem:ge});h(V.id,Ve),je(V.id)}if(P!=null&&P.includeDiagnostics)if(De>0)K({type:"success",text:`Plan actualizado: +${De} tem${De===1?"":"s"}.`}),window.setTimeout(()=>K(null),2e3);else{const Fe=ee.filter(Ve=>(Ve.type??"work")!=="note").map(Ve=>{const Ke=Ve.include??[],Le=Ve.exclude??[],ot=Re.filter(Ge=>(Ke.length===0?!0:Ke.some(At=>bo(Ge.work,At)))?!Le.some(At=>bo(Ge.work,At)):!1),yt=Ve.limitMode==="minutes"||Ve.limitMode==="both"?Math.max(0,Number(Ve.minutesBudget)||0):void 0,Ye=Ve.limitMode==="count"||Ve.limitMode==="both"?Math.max(0,Math.round(Number(Ve.maxItems)||0)):void 0;return[`${Ve.name}: ${ot.length} match`,typeof yt=="number"?`${yt}m`:null,typeof Ye=="number"?`${Ye} items`:null].filter(Boolean).join("  ")}).slice(0,3).join(" | ");K({type:"success",text:Fe?`No hay nuevos tems para aadir. ${Fe}`:"No hay nuevos tems para aadir con los lmites actuales."}),window.setTimeout(()=>K(null),4e3)}}finally{Te(!1)}}},[Ce,M,z,N,U,ne,ee,_,$,c,h,B,me,ge]),Ie=b.useCallback(()=>{if(Ce||!window.confirm("Recrear sesin volver a planificar el da seleccionado. Mantendr los tems ya registrados (OK/Dudosa/Fallo) y las notas, pero quitar el resto. Continuar?"))return;const V=z??N(),le=(V.workItems??[]).filter(Z=>(Z.completed??!1)||typeof Z.result<"u").map(Z=>{const ue=ne.get(Z.workId);return ue?{...Z,focusLabel:ge(Z,ue)}:Z}).sort((Z,ue)=>(Z.order??0)-(ue.order??0)).map((Z,ue)=>({...Z,order:ue}));h(V.id,B(le)),window.setTimeout(()=>ie({reason:"recreate",includeDiagnostics:!0}),0)},[B,N,ie,Ce,ge,z,h,ne]);b.useEffect(()=>{M.length===0||((z??N()).workItems??[]).some(Z=>!!Z.focusLabel)||ie({reason:"initial-seed"})},[M,U,_,$,h,ne,ee,R,be,z,N,ie]);const He=z?z.workItems.filter(P=>(P.completed??!1)||typeof P.result<"u").length:0,qe=b.useMemo(()=>ee.filter(P=>(P.type??"work")==="note"),[ee]),rt=b.useMemo(()=>{const P=(z==null?void 0:z.workItems)??[],V=P.length,le=P.filter(pe=>(pe.completed??!1)||typeof pe.result<"u").length,Z=qe.length,ue=qe.filter(pe=>(se[pe.id]??"").trim().length>0).length,O=V+Z,J=le+ue,de=O>0?Math.round(J/O*100):0;return{total:O,done:J,percent:de,totalWorks:V,doneWorks:le,totalNotes:Z,doneNotes:ue}},[se,qe,z==null?void 0:z.workItems]),st=b.useMemo(()=>{const P=new Map,V=new Map;return((z==null?void 0:z.workItems)??[]).slice().sort((Z,ue)=>(Z.order??0)-(ue.order??0)).forEach(Z=>{const ue=M.find(dt=>dt.work.id===Z.workId),O=ne.get(Z.workId);if(!O)return;const J=(Z.completed??!1)||typeof Z.result<"u",de={work:O,targetDays:dS(O,A),overdueScore:0,lastSeen:ue==null?void 0:ue.lastSeen,daysSince:ue==null?void 0:ue.daysSince,lastResult:ue==null?void 0:ue.lastResult},pe=ue??de,Re=ge(Z,O),Pe=P.get(Re)??[];Pe.push(pe),P.set(Re,Pe);const De=V.get(Re)??{total:0,done:0};De.total+=1,J&&(De.done+=1),V.set(Re,De)}),Array.from(P.entries()).map(([Z,ue])=>{const O=V.get(Z)??{total:ue.length,done:0};return{label:Z,entries:ue,total:O.total,done:O.done}}).sort((Z,ue)=>{const O=R.get(Z.label)??999,J=R.get(ue.label)??999;return O!==J?O-J:Z.label.localeCompare(ue.label,"es",{sensitivity:"base"})})},[z==null?void 0:z.workItems,M,ne,A,R,ge]),St=b.useMemo(()=>{const P=new Map(st.map(Z=>[Z.label,Z])),V=new Set,le=[];return ee.forEach(Z=>{if((Z.type??"work")==="note"){le.push({kind:"note",group:Z});return}const ue=P.get(Z.name);ue&&(V.add(ue.label),le.push({kind:"work",...ue}))}),st.forEach(Z=>{V.has(Z.label)||le.push({kind:"work",...Z})}),le},[ee,st]),fn=P=>{var vt,tt,At;const V=P.work,Z=ed(V.tags).filter(ft=>ft!==cS),ue=F.has(V.id),O=z==null?void 0:z.workItems.find(ft=>ft.workId===V.id),J=O==null?void 0:O.result,de=!!((O==null?void 0:O.completed)??!1)||typeof(O==null?void 0:O.result)<"u",pe=(V.videoUrls??[]).map(ft=>ft.trim()).filter(Boolean),Re=H.get(V.objectiveId),Pe=(O==null?void 0:O.customDurationMinutes)??V.estimatedMinutes??vo(V,U),De=((O==null?void 0:O.focusLabel)??"").trim(),dt=De&&he.has(De)?"":De,Fe=J?{label:y5[J],className:v5[J]}:void 0,Ve=()=>L(ft=>{const $t=new Set(ft);return $t.has(V.id)?$t.delete(V.id):$t.add(V.id),$t}),Ke=ft=>{var Wn;const $t=N(),Ht=$t.workItems.find(Zt=>Zt.workId===V.id);if(!Ht){const Zt=c($t.id,{workId:V.id,focusLabel:ge({focusLabel:void 0},V),customDurationMinutes:Pe});if(!Zt)return;f($t.id,Zt.id,{completed:ft,result:ft?"ok":void 0});return}if(ft){const Hn=(V.nodeType??"work").trim().toLowerCase()==="ebook"&&((Wn=Ht.contentRef)==null?void 0:Wn.kind)==="ebook_section"?Ht.contentRef.sectionPath:void 0,Hi=(()=>{if(!Hn)return Ht.readPaths;const qo=(Ht.readPaths??[]).map(td=>String(td??"").trim()).filter(Boolean);return qo.includes(Hn)?qo:[...qo,Hn]})();f($t.id,Ht.id,{completed:!0,result:Ht.result??"ok",readPaths:Hi})}else f($t.id,Ht.id,{completed:!1,result:void 0,readPaths:void 0})},Le=(V.nodeType??"work").trim().toLowerCase(),ot=Le==="ebook"&&O&&(z!=null&&z.planId)?m.jsx(g5,{work:V,sessionId:z.id,sessionDate:z.date,planId:z.planId,sessionItem:O}):void 0,yt=Le==="ebook"&&((vt=O==null?void 0:O.contentRef)==null?void 0:vt.kind)==="ebook_section"?(O.contentRef.sectionTitle??"").trim():"",Ye=Le==="ebook"&&((tt=O==null?void 0:O.contentRef)==null?void 0:tt.kind)==="ebook_section"?(O.contentRef.chapterTitle??"").trim():"",Ne=[dt,yt].filter(ft=>ft.length>0).join("  "),Ge=(At=V.subtitle)!=null&&At.trim()?V.subtitle:Ye||void 0;return m.jsx(sS,{title:V.name,titleExtra:Ne,subtitle:Ge,objective:Re,checked:de,onCheckedChange:Ke,orderNumber:((O==null?void 0:O.order)??0)+1,durationMinutes:Pe,tags:Z,statusPill:Fe,lastSeenLabel:N5(P.lastSeen),detailsContent:ot,descriptionMarkdown:V.descriptionMarkdown,notesMarkdown:V.notes,videoUrls:pe,isExpanded:ue,onToggleExpanded:Ve,detailsActions:m.jsx(Li,{to:`/catalog?workId=${encodeURIComponent(V.id)}`,className:"btn-secondary",children:"Editar en catlogo"})},V.id)},Xt=P=>{var de;const V=N(),le=(P??"").trim();if(!le)return;const Z=se[le]??"",ue=Z.trim().length===0,O={...V.notesByGroupId??{}};ue?delete O[le]:O[le]=Z;const J=((de=ee.find(pe=>(pe.type??"work")==="note"))==null?void 0:de.id)??le;p(V.id,{notesByGroupId:Object.keys(O).length>0?O:void 0,notes:O[J]??""})};b.useEffect(()=>{z||N(_)},[_,z,N]);const wt=b.useMemo(()=>{const P=(z==null?void 0:z.workItems)??[];return Math.round(P.reduce((V,le)=>{const Z=ne.get(le.workId);if(!Z)return V;const ue=le.customDurationMinutes??Z.estimatedMinutes??vo(Z,U);return V+ue},0))},[z==null?void 0:z.workItems,ne,U]),Rt=P=>{const V=new URLSearchParams(v);P==="edit"?V.set("mode","edit"):V.delete("mode"),y(V,{replace:!0})},Q=P=>{const V=new URLSearchParams(v);V.set("date",P),V.delete("session"),y(V,{replace:!0})},fe=P=>{const V=P.target.value;V&&Q(We(V).format("YYYY-MM-DD"))},ye=()=>Q(We(_).subtract(1,"day").format("YYYY-MM-DD")),Ee=()=>Q(We(_).add(1,"day").format("YYYY-MM-DD")),G=()=>Q(S);return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("header",{className:"glass-panel space-y-4 p-3 sm:space-y-6 sm:p-6 lg:p-8",children:[m.jsxs("div",{className:"space-y-3 sm:flex sm:items-start sm:justify-between sm:gap-6 sm:space-y-0",children:[m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs("div",{className:"flex items-center gap-2 text-xs uppercase tracking-[0.3em] text-white/40",children:[m.jsx("span",{className:"sm:hidden",children:"Sesin"}),m.jsx("span",{className:"hidden sm:inline",children:"Fecha"})]}),m.jsx("h1",{className:"font-display text-2xl font-semibold text-white sm:text-3xl",children:We(_).format("dddd, D [de] MMMM")}),m.jsx("p",{className:"text-sm font-medium text-white/80 sm:text-lg",children:(z==null?void 0:z.title)??(I==null?void 0:I.name)??"Entrenamiento personal"})]}),m.jsxs("div",{className:"flex flex-col gap-2.5 rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-sm text-white/70 sm:w-auto",children:[m.jsxs("div",{className:"flex items-center justify-between gap-4",children:[m.jsx("p",{className:"font-semibold text-white",children:"Duracin estimada"}),m.jsxs("span",{className:"rounded-full bg-white/10 px-3 py-1 text-xs text-white/80",children:[wt," min"]})]}),m.jsxs("div",{children:[m.jsxs("p",{className:"mt-1 text-xs text-white/50",children:[He," ",He===1?"tem registrado":"tems registrados"]}),m.jsxs("p",{className:"mt-2 text-xs text-white/60",children:["Progreso: ",rt.done,"/",rt.total,"  ",rt.percent,"%"]}),m.jsx("div",{className:"mt-2 h-2 w-full overflow-hidden rounded-full border border-white/10 bg-slate-950/50",children:m.jsx("div",{className:"h-full rounded-full bg-white/25",style:{width:`${Math.min(Math.max(rt.percent,0),100)}%`}})})]}),m.jsxs("div",{className:"flex flex-col gap-2 sm:items-end",children:[m.jsx("label",{className:"text-[11px] uppercase tracking-wide text-white/40 sm:text-xs",children:"Ir a fecha"}),m.jsx("input",{type:"date",className:"input-field w-full sm:w-auto",value:_,onChange:fe})]})]})]}),m.jsxs("div",{className:"flex flex-col gap-2.5 sm:flex-row sm:flex-wrap sm:items-center sm:justify-between",children:[m.jsxs("div",{className:"flex flex-wrap gap-2",children:[m.jsx("button",{type:"button",onClick:ye,className:"btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold sm:h-10 sm:text-sm",children:" Anterior"}),m.jsx("button",{type:"button",onClick:G,disabled:_===S,className:"btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold disabled:opacity-40 sm:h-10 sm:text-sm",children:"Hoy"}),m.jsx("button",{type:"button",onClick:Ee,className:"btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold sm:h-10 sm:text-sm",children:"Siguiente "})]}),m.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[m.jsx(k5,{mode:C,onChange:Rt}),m.jsx("button",{type:"button",onClick:Ie,disabled:Ce||M.length===0,className:"btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold disabled:opacity-50 sm:h-10 sm:text-sm",title:"Rehace la planificacin del da manteniendo lo registrado",children:Ce?"Recreando":"Recrear sesin"})]})]}),Y&&m.jsx("div",{className:Be("mt-4 rounded-2xl border px-4 py-3 text-sm",Y.type==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-rose-500/40 bg-rose-500/10 text-rose-200"),children:Y.text})]}),M.length===0?m.jsxs("div",{className:"glass-panel p-10 text-center text-white/50",children:["No hay ningn trabajo incluido en tu programa activo. Aade la tag ",m.jsx("span",{className:"font-semibold text-white",children:"kungfu"})," a los trabajos que quieras entrenar."]}):C==="edit"?m.jsxs("section",{className:"space-y-4",children:[z?m.jsx("div",{className:"glass-panel p-3 sm:p-4",children:m.jsx(Dm,{session:z,works:e,objectives:r,assistants:i})}):m.jsx("div",{className:"glass-panel p-10 text-center text-white/60",children:"Cargando sesin"}),St.filter(P=>P.kind==="note").map(P=>{const V=P.group.id,le=se[V]??"",Z=le.trim().length>0;return m.jsxs("div",{className:"glass-panel space-y-3 p-6",children:[m.jsx("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between",children:m.jsxs("div",{children:[m.jsxs("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:[P.group.name," (",Math.max(0,Number(P.group.minutesBudget)||0)," min)"]}),m.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[m.jsx("span",{className:Be("rounded-full border px-3 py-1 text-xs font-semibold",Z?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-white/15 bg-white/5 text-white/60"),children:Z?"OK":"Pendiente"}),m.jsx("p",{className:"text-sm text-white/60",children:"Notas de la sesin  se guarda al salir del campo."})]})]})}),m.jsx("textarea",{className:"input-field min-h-[120px] w-full resize-y",value:le,onChange:ue=>q(O=>({...O,[V]:ue.target.value})),onBlur:()=>Xt(V),placeholder:"Escribe aqu"})]},P.group.id)})]}):m.jsx("section",{className:"space-y-4",children:m.jsxs("div",{className:"space-y-3",children:[st.length===0?m.jsxs("div",{className:"glass-panel p-10 text-center text-white/50",children:["No hay tems planificados para hoy. Revisa ",m.jsx("span",{className:"font-semibold text-white",children:"Ajustes"})," o marca ms trabajos como entrenables."]}):null,St.map(P=>{if(P.kind==="note"){const ue=P.group.id,O=se[ue]??"",J=O.trim().length>0;return m.jsxs("div",{className:"glass-panel space-y-3 p-6",children:[m.jsx("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between",children:m.jsxs("div",{children:[m.jsxs("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:[P.group.name," (",Math.max(0,Number(P.group.minutesBudget)||0)," min)"]}),m.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[m.jsx("span",{className:Be("rounded-full border px-3 py-1 text-xs font-semibold",J?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-white/15 bg-white/5 text-white/60"),children:J?"OK":"Pendiente"}),m.jsx("p",{className:"text-sm text-white/60",children:"Notas de la sesin  se guarda al salir del campo."})]})]})}),m.jsx("textarea",{className:"input-field min-h-[120px] w-full resize-y",value:O,onChange:de=>q(pe=>({...pe,[ue]:de.target.value})),onBlur:()=>Xt(ue),placeholder:"Escribe aqu"})]},P.group.id)}const V=Math.max(0,P.total),le=Math.min(Math.max(0,P.done),V),Z=V>0?Math.round(le/V*100):0;return m.jsxs("section",{className:"glass-panel space-y-4 p-3 sm:space-y-5 sm:p-6",children:[m.jsx("header",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:m.jsxs("div",{children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:P.label}),m.jsxs("p",{className:"mt-1 text-sm text-white/60",children:[le,"/",V," tem",V===1?"":"s","  ",Z,"% completado"]}),m.jsx("div",{className:"mt-2 h-2 w-full overflow-hidden rounded-full border border-white/10 bg-slate-950/50",children:m.jsx("div",{className:"h-full rounded-full bg-white/25",style:{width:`${Math.min(Math.max(Z,0),100)}%`}})})]})}),m.jsx("div",{className:"space-y-3 sm:space-y-4",children:P.entries.map(fn)})]},P.label)})]})})]})}function R5(){const e=_e(f=>f.plans),[t,n]=Do(),r=(t.get("plan")??"").trim(),i=b.useMemo(()=>e.filter(f=>f.enabled),[e]),o=b.useMemo(()=>dm(i),[i]),a=b.useMemo(()=>o.length===0?void 0:o.find(h=>h.id===r)??o[0],[o,r]),u=(a==null?void 0:a.id)??"classes";b.useEffect(()=>{if(!a||r===a.id)return;const f=new URLSearchParams(t);f.set("plan",a.id),n(f,{replace:!0})},[a,r,t,n]);const c=f=>{const h=new URLSearchParams(t);h.set("plan",f),h.delete("session"),n(h,{replace:!0})};return a?m.jsxs("div",{className:"space-y-6",children:[m.jsx("header",{className:"glass-panel p-6 sm:p-10",children:m.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold",children:"Sesiones"}),m.jsx("p",{className:"text-white/60",children:"Vista unificada por planes."})]}),m.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(f=>m.jsx("button",{type:"button",onClick:()=>c(f.id),className:Be("rounded-full border px-4 py-2 text-sm font-semibold transition",f.id===u?"border-sky-400/70 bg-sky-500/10 text-white":"border-white/10 bg-white/5 text-white/70 hover:border-white/30 hover:text-white"),title:f.kind==="class"?"Plan de clases":"Plan personal",children:f.name},f.id))})]})}),a.kind==="class"?m.jsx(s5,{}):m.jsx(P5,{})]}):m.jsx("div",{className:"glass-panel p-10 text-center text-white/60",children:"No hay planes activos. Ve a Ajustes y crea/activa uno."})}function A5(){return m.jsx(R5,{})}function M5(){const[e]=Do(),t=new URLSearchParams(e);return t.set("mode","edit"),m.jsx(Xa,{to:{pathname:"/",search:`?${t.toString()}`},replace:!0})}function Ah(e){return Array.from(new Set(e))}function Ga({options:e,value:t,onChange:n,disabled:r=!1,placeholder:i="Search",allowCreate:o=!1,onCreate:a,maxSelected:u}){const[c,f]=b.useState(""),h=b.useMemo(()=>Ah(t.map(_=>_.trim()).filter(Boolean)),[t]),p=b.useMemo(()=>new Set(h),[h]),v=b.useMemo(()=>new Map(e.map(_=>[_.value,_])),[e]),y=b.useMemo(()=>{const _=c.trim().toLowerCase();return _?e.filter(C=>(C.label??C.value).toLowerCase().includes(_)||C.value.toLowerCase().includes(_)):e},[e,c]),w=typeof u=="number"?h.length<u:!0,S=c.trim(),k=o&&!!S&&typeof a=="function"&&!e.some(_=>_.value.toLowerCase()===S.toLowerCase())&&!e.some(_=>(_.label??"").toLowerCase()===S.toLowerCase());return m.jsxs("div",{className:Be("space-y-2",r&&"opacity-60"),children:[h.length>0?m.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[h.map(_=>{var j;const C=((j=v.get(_))==null?void 0:j.label)??_;return m.jsxs("button",{type:"button",disabled:r,className:"inline-flex items-center gap-2 rounded-full border border-sky-500/30 bg-sky-500/10 px-3 py-1 text-xs font-semibold text-sky-100 transition hover:border-sky-400/50",onClick:()=>n(h.filter(I=>I!==_)),title:"Remove",children:[C,m.jsx("span",{className:"text-sky-200/80",children:""})]},_)}),m.jsx("button",{type:"button",disabled:r,className:"rounded-full border border-white/15 bg-white/5 px-3 py-1 text-xs font-semibold text-white/70 transition hover:border-white/30 hover:text-white",onClick:()=>n([]),children:"Clear"})]}):null,m.jsx("input",{type:"text",className:"input-field",value:c,disabled:r,placeholder:i,onChange:_=>f(_.target.value)}),m.jsx("div",{className:"max-h-48 overflow-auto rounded-2xl border border-white/10 bg-white/5 p-2",children:m.jsxs("div",{className:"flex flex-wrap gap-2",children:[k?m.jsxs("button",{type:"button",disabled:r||!w,className:"rounded-full border border-emerald-500/30 bg-emerald-500/10 px-3 py-1 text-xs font-semibold text-emerald-100 transition hover:border-emerald-400/50 disabled:opacity-50",onClick:()=>{const _=(a==null?void 0:a(S))??null;if(!_)return;const C=Ah([...h,_.createdValue]);n(C),f("")},title:"Create",children:["+ Create ",S,""]}):null,y.map(_=>{const C=_.label??_.value,j=p.has(_.value);return m.jsx("button",{type:"button",disabled:r||!j&&!w,className:Be("rounded-full border px-3 py-1 text-xs font-semibold transition disabled:opacity-50",j?"border-sky-500/40 bg-sky-500/10 text-sky-100":"border-white/15 bg-white/5 text-white/70 hover:border-white/30 hover:text-white"),onClick:()=>{const I=j?h.filter(D=>D!==_.value):Ah([...h,_.value]);n(I)},children:C},_.value)})]})})]})}const fb={name:"",subtitle:"",objectiveId:"",parentWorkId:"",nodeType:"",scheduleKind:"",scheduleNumber:1,ebookId:"",ebookIndexUrl:"",ebookMode:"sequential",tags:[],orderHint:0,nextWorkId:"",variantOfWorkId:"",descriptionMarkdown:"",estimatedMinutes:10,notes:"",videoUrls:[""],visibility:"private",collaborators:[""]},O5=e=>Array.from(new Set((e??[]).map(t=>t.trim().toLowerCase()).filter(Boolean))),D5=e=>e==="day_of_year"||e==="day_of_month"||e==="day_of_week",qu="__no_objective__",hS={private:"Privado",shared:"Compartido",public:"Pblico"},L5={private:"Solo t puedes ver y editar este trabajo.",shared:"Solo las personas que aadas pueden editarlo contigo.",public:"Cualquier persona con acceso al catlogo puede verlo. Solo tus editores pueden cambiarlo."},pS=5,Da="personal-exclude";function $5({work:e,childCount:t,depth:n,expanded:r,isTreeCollapsed:i,isPersonalExcluded:o,canTogglePersonal:a,personalToggleBusy:u,nextLabel:c,variantLabel:f,onToggle:h,onToggleTree:p,onTogglePersonal:v,onEdit:y,onDuplicate:w,onCreateChild:S,onDelete:k}){var be;const _=(e.descriptionMarkdown??"").trim(),C=(e.subtitle??"").trim(),j=(e.notes??"").trim(),I=e.videoUrls.filter(he=>he.trim().length>0),D=_.length>0,A=C.length>0,U=j.length>0,te=I.length>0,z=D||U||te,M=t>0,$=n>0?{marginLeft:`${n*1.5}rem`}:void 0,ne=e.visibility??"private",H=hS[ne],Y=((be=e.collaboratorEmails)==null?void 0:be.length)??0,K=e.canEdit??!1,se=e.isOwner??!1,q=(e.ownerEmail??"").trim(),F=(e.nodeType??"").trim(),L=(e.tags??[]).filter(he=>he!==Da),N=(F||"work").trim().toLowerCase(),B=_e(he=>{var ge;return(ge=he.workTaxonomy.nodeTypes.find(me=>me.key===N))==null?void 0:ge.label}),ee=(()=>{const he={form:"Forma",segment:"Segmento",application:"Aplicacin",technique:"Tcnica",drill:"Drill",reading:"Lectura",ebook:"Ebook",style:"Estilo",link:"Link",work:"Trabajo"},ge={form:"border-indigo-500/40 bg-indigo-500/15 text-indigo-100",segment:"border-sky-500/40 bg-sky-500/15 text-sky-100",application:"border-amber-500/40 bg-amber-500/15 text-amber-100",technique:"border-emerald-500/40 bg-emerald-500/15 text-emerald-100",drill:"border-purple-500/40 bg-purple-500/15 text-purple-100",reading:"border-fuchsia-500/40 bg-fuchsia-500/15 text-fuchsia-100",ebook:"border-cyan-500/40 bg-cyan-500/15 text-cyan-100",style:"border-white/20 bg-white/10 text-white/70",link:"border-white/20 bg-white/10 text-white/70",work:"border-white/20 bg-white/10 text-white/70"},me=B??he[N]??(F||"Trabajo"),Ce=ge[N]??ge.work;return m.jsx("span",{className:Be("inline-flex items-center rounded-full border px-3 py-1 text-xs font-semibold",Ce),children:me})})(),R=(()=>{const he={form:"border-indigo-500/25",segment:"border-sky-500/25",application:"border-amber-500/25",technique:"border-emerald-500/25",drill:"border-purple-500/25",reading:"border-fuchsia-500/25",ebook:"border-cyan-500/25",work:"border-white/10"},ge={form:"bg-indigo-500",segment:"bg-sky-500",application:"bg-amber-500",technique:"bg-emerald-500",drill:"bg-purple-500",reading:"bg-fuchsia-500",ebook:"bg-cyan-500",work:""},me={form:"bg-indigo-400/60",segment:"bg-sky-400/60",application:"bg-amber-400/60",technique:"bg-emerald-400/60",drill:"bg-purple-400/60",reading:"bg-fuchsia-400/60",ebook:"bg-cyan-400/60",work:"bg-white/10"},Ce=he[N]??he.work,Te=ge[N]??ge.work,je=me[N]??me.work;return{borderClassName:Ce,glowClassName:Te,barClassName:je}})();return m.jsxs("article",{id:`work-${e.id}`,className:Be("group relative space-y-4 rounded-xl border bg-white/5 p-4 pb-5 shadow shadow-black/30",R.borderClassName),style:$,children:[m.jsx("div",{className:Be("absolute inset-y-0 left-0 w-1 rounded-r-full",R.barClassName),"aria-hidden":!0}),R.glowClassName?m.jsx("div",{className:Be("absolute inset-0 -z-[1] rounded-xl opacity-10 blur-3xl",R.glowClassName)}):null,m.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[m.jsxs("div",{role:z?"button":void 0,tabIndex:z?0:void 0,onClick:()=>{z&&h()},onKeyDown:he=>{z&&(he.key==="Enter"||he.key===" ")&&(he.preventDefault(),h())},className:Be("flex flex-1 items-start gap-3 border border-transparent px-2 py-2 text-left transition",z?"cursor-pointer hover:border-white/10 hover:bg-white/5 focus-visible:border-white/20 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-500/40":"cursor-default"),"aria-expanded":z?r:void 0,children:[M?m.jsx("button",{type:"button",onClick:he=>{he.stopPropagation(),p()},className:Be("mt-1 inline-flex h-8 w-8 items-center justify-center rounded-full border border-white/15 bg-white/5 text-sm font-semibold text-white/70 transition hover:border-white/30 hover:text-white"),"aria-label":i?"Mostrar trabajos hijos":"Ocultar trabajos hijos",title:i?"Mostrar hijos":"Ocultar hijos",children:i?"":""}):null,z?m.jsx("span",{className:Be("mt-1 inline-flex h-8 w-8 items-center justify-center rounded-full border border-white/15 bg-white/5 text-sm font-semibold text-white/70 transition",r?"rotate-90 border-white/30 text-white":""),"aria-hidden":!0,children:""}):null,m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-white",children:e.name}),A?m.jsx("p",{className:"text-sm text-white/70",children:C}):null,m.jsxs("p",{className:"text-sm text-white/60",children:[e.estimatedMinutes," minutos"]}),m.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-[11px] uppercase tracking-wide text-white/40",children:[m.jsx("span",{className:"rounded-full border border-white/20 px-2 py-0.5 text-[10px] font-semibold text-white/70",children:H}),N==="ebook"?e.ebookRef?m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"rounded-full border border-cyan-400/25 bg-cyan-500/10 px-2 py-0.5 text-[10px] font-semibold text-cyan-100",children:e.ebookRef.ebookId}),m.jsx("span",{className:"rounded-full border border-cyan-400/15 bg-cyan-500/5 px-2 py-0.5 text-[10px] font-semibold text-cyan-100/80",children:e.ebookRef.mode})]}):m.jsx("span",{className:"rounded-full border border-rose-500/30 bg-rose-500/10 px-2 py-0.5 text-[10px] font-semibold text-rose-200",children:"ebook_ref missing"}):null,L.slice(0,3).map(he=>m.jsx("span",{className:"rounded-full border border-white/10 px-2 py-0.5 text-[10px] font-semibold text-white/60",children:he},he)),se?m.jsx("span",{children:"Propietario"}):q?m.jsx("span",{children:q}):null,Y>0?m.jsxs("span",{children:["+",Y," colaborador",Y===1?"":"es"]}):null,f?m.jsxs("span",{className:"text-white/50",children:["Variante de: ",f]}):null,c?m.jsxs("span",{className:"text-white/50",children:["Siguiente: ",c]}):null,K?null:m.jsx("span",{className:"text-amber-300/80",children:"Solo lectura"})]})]})]}),m.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:justify-end",children:[ee,m.jsx("button",{type:"button",onClick:he=>{he.stopPropagation(),v()},disabled:!a||u,className:Be("inline-flex items-center rounded-full border px-3 py-1 text-xs font-semibold transition disabled:opacity-50",o?"border-rose-500/40 bg-rose-500/10 text-rose-200 hover:border-rose-400":"border-emerald-500/40 bg-emerald-500/10 text-emerald-200 hover:border-emerald-400"),title:o?"Incluir en el plan personal":"Excluir del plan personal",children:u?"...":o?"Fuera":"En plan"}),m.jsxs(is,{as:"div",className:"relative inline-flex",children:[m.jsxs(is.Button,{className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-white/20 text-white/70 transition hover:border-white/40 hover:text-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-500/40",children:[m.jsx("span",{className:"sr-only",children:"Abrir acciones"}),m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",className:"h-5 w-5","aria-hidden":"true",children:[m.jsx("circle",{cx:"12",cy:"5",r:"1.5"}),m.jsx("circle",{cx:"12",cy:"12",r:"1.5"}),m.jsx("circle",{cx:"12",cy:"19",r:"1.5"})]})]}),m.jsxs(is.Items,{className:"absolute right-0 z-10 mt-2 w-44 overflow-hidden rounded-2xl border border-white/10 bg-slate-900/95 p-1 text-sm text-white shadow-lg shadow-black/40 focus:outline-none",children:[m.jsx(is.Item,{children:({active:he})=>m.jsx("button",{type:"button",onClick:K?y:void 0,disabled:!K,className:Be("flex w-full items-center gap-2 rounded-xl px-3 py-2 text-left disabled:opacity-40",he&&K?"bg-white/10 text-white":"text-white/70"),children:"Editar"})}),m.jsx(is.Item,{children:({active:he})=>m.jsx("button",{type:"button",onClick:K?w:void 0,disabled:!K,className:Be("flex w-full items-center gap-2 rounded-xl px-3 py-2 text-left disabled:opacity-40",he&&K?"bg-white/10 text-white":"text-white/70"),children:"Duplicar"})}),m.jsx(is.Item,{children:({active:he})=>m.jsx("button",{type:"button",onClick:K?S:void 0,disabled:!K,className:Be("flex w-full items-center gap-2 rounded-xl px-3 py-2 text-left disabled:opacity-40",he&&K?"bg-white/10 text-white":"text-white/70"),children:"Nuevo hijo"})}),m.jsx(is.Item,{children:({active:he})=>m.jsx("button",{type:"button",onClick:se?k:void 0,disabled:!se,className:Be("flex w-full items-center gap-2 rounded-xl px-3 py-2 text-left disabled:opacity-40",he&&se?"bg-rose-500/20 text-rose-100":"text-rose-300"),children:"Eliminar"})})]})]})]})]}),z&&r&&m.jsxs("div",{className:"space-y-4 rounded-2xl border border-white/10 bg-slate-950/60 p-4",children:[D?m.jsx(Es,{content:e.descriptionMarkdown,enableWorkLinks:!0}):null,U?m.jsx("div",{className:"rounded-2xl border border-dashed border-white/15 bg-white/5 p-3 text-sm text-white/70",children:e.notes}):null,te?m.jsx("div",{className:"space-y-3",children:m.jsx("div",{className:"grid gap-4 lg:grid-cols-3",children:I.map((he,ge)=>m.jsxs("div",{className:"space-y-2",children:[m.jsx(Lm,{url:he,title:`${e.name} vdeo ${ge+1}`}),m.jsx("a",{href:he,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-full border border-white/20 px-3 py-1 text-xs font-semibold text-white/70 transition hover:border-white/40 hover:text-white",children:"Abrir en YouTube"})]},`${e.id}-video-${ge}`))})}):null]}),m.jsx("button",{type:"button",onClick:K?S:void 0,disabled:!K,className:Be("absolute bottom-0 left-1/2 flex -translate-x-1/2 translate-y-1/2 items-center justify-center rounded-full border border-dashed border-white/20 bg-slate-950/80 px-4 py-2 text-sm font-semibold text-white/80 opacity-0 transition hover:border-white/40 hover:text-white focus-visible:opacity-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-500/40 group-hover:opacity-100 pointer-events-none group-hover:pointer-events-auto focus-visible:pointer-events-auto",!K&&"opacity-30"),title:K?M?"Aadir trabajo hijo":"Crear primer trabajo hijo":"No tienes permisos para crear trabajos hijos","aria-label":"Crear trabajo hijo",children:"+"})]})}function F5({form:e,objectiveOptions:t,parentOptions:n,workOptions:r,nodeTypeOptions:i,tagOptions:o,ebookOptions:a,onCreateNodeType:u,onCreateTag:c,depth:f,onFieldChange:h,onVideoChange:p,onAddVideo:v,onRemoveVideo:y,onCollaboratorChange:w,onAddCollaborator:S,onRemoveCollaborator:k,onSave:_,onCancel:C,isNew:j,canEditContent:I,canManageSharing:D,isSaving:A,isOwner:U,ownerEmail:te}){const z=t.find(L=>L.id===e.objectiveId),M=n.find(L=>L.id===e.parentWorkId),$=r.find(L=>L.id===e.nextWorkId),ne=r.find(L=>L.id===e.variantOfWorkId),H=f>0?{marginLeft:`${f*1.5}rem`}:void 0,Y=e.id?`work-name-${e.id}`:void 0,K=e.id?`work-subtitle-${e.id}`:void 0,se=(e.nodeType??"").trim().toLowerCase(),q=se==="reading"||e.scheduleKind.trim().length>0,F=se==="ebook"||e.ebookIndexUrl.trim().length>0;return m.jsxs("article",{className:"space-y-5 rounded-3xl border border-sky-500/40 bg-slate-950/70 p-5 shadow-lg shadow-sky-500/15",style:H,children:[m.jsxs("header",{className:"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between",children:[m.jsxs("div",{className:"flex-1 space-y-3",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:j?"Nuevo trabajo":"Editando trabajo"}),m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",htmlFor:Y,children:"Nombre"}),m.jsx("input",{id:Y,type:"text",className:"input-field w-full text-base font-semibold disabled:opacity-60",placeholder:"Nombre descriptivo",value:e.name,onChange:L=>h({name:L.target.value}),disabled:!I})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",htmlFor:K,children:"Subttulo (opcional)"}),m.jsx("input",{id:K,type:"text",className:"input-field w-full disabled:opacity-60",placeholder:"Aade un subttulo breve",value:e.subtitle,onChange:L=>h({subtitle:L.target.value}),disabled:!I})]})]}),m.jsx(Bi,{objective:z,size:"sm"})]}),I?null:m.jsx("div",{className:"rounded-2xl border border-amber-400/40 bg-amber-500/10 p-3 text-xs text-amber-200",children:"No tienes permisos para editar el contenido de este trabajo. Puedes revisar la informacin y sugerir cambios al propietario."}),m.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Objetivo"}),m.jsxs("select",{className:"input-field disabled:opacity-60",value:e.objectiveId,onChange:L=>h({objectiveId:L.target.value}),disabled:!I,children:[m.jsx("option",{value:"",children:"Selecciona un objetivo"}),t.map(L=>m.jsx("option",{value:L.id,children:L.name},L.id))]})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Trabajo padre (opcional)"}),m.jsxs("select",{className:"input-field disabled:opacity-60",value:e.parentWorkId,onChange:L=>h({parentWorkId:L.target.value}),disabled:!I,children:[m.jsx("option",{value:"",children:"Sin trabajo padre"}),n.map(L=>m.jsx("option",{value:L.id,children:L.label},L.id))]}),e.parentWorkId&&M?m.jsxs("p",{className:"text-xs text-white/40",children:["Deriva de: ",M.label]}):null]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Duracin estimada (min)"}),m.jsx("input",{type:"number",min:0,className:"input-field disabled:opacity-60",value:e.estimatedMinutes,onChange:L=>h({estimatedMinutes:Number(L.target.value)}),disabled:!I})]})]}),m.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Node type (opcional)"}),m.jsx(Ga,{options:i,value:e.nodeType?[e.nodeType]:[],maxSelected:1,onChange:L=>h({nodeType:L[0]??""}),placeholder:"Search node types",disabled:!I,allowCreate:!0,onCreate:L=>{const N=u(L);return N?{createdValue:N,createdLabel:L.trim()}:null}})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Tags"}),m.jsx(Ga,{options:o,value:e.tags??[],onChange:L=>h({tags:L}),placeholder:"Search tags",disabled:!I,allowCreate:!0,onCreate:L=>{const N=c(L);return N?{createdValue:N,createdLabel:N}:null}})]}),q?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Schedule (para lecturas)"}),m.jsxs("select",{className:"input-field disabled:opacity-60",value:e.scheduleKind,onChange:L=>h({scheduleKind:L.target.value}),disabled:!I,children:[m.jsx("option",{value:"",children:"Sin schedule"}),m.jsx("option",{value:"day_of_year",children:"Da del ao (1-365)"}),m.jsx("option",{value:"day_of_month",children:"Da del mes (1-31)"}),m.jsx("option",{value:"day_of_week",children:"Da de la semana (0-6)"})]}),m.jsx("p",{className:"text-xs text-white/40",children:"Para `nodeType=reading`, el planificador solo propone esta lectura cuando el da coincide."})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Nmero"}),m.jsx("input",{type:"number",min:0,className:"input-field disabled:opacity-60",value:e.scheduleNumber,onChange:L=>h({scheduleNumber:Number(L.target.value)}),disabled:!I||!e.scheduleKind})]})]}):null,F?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"grid gap-2 sm:col-span-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Ebook (para `nodeType=ebook`)"}),m.jsxs("select",{className:"input-field disabled:opacity-60",value:e.ebookId,onChange:L=>{const N=L.target.value,B=a.find(ee=>ee.id===N);h({ebookId:N,ebookIndexUrl:(B==null?void 0:B.indexUrl)??e.ebookIndexUrl})},disabled:!I,children:[m.jsx("option",{value:"",children:"Selecciona un ebook"}),a.map(L=>m.jsx("option",{value:L.id,children:L.title},L.id))]}),m.jsx("p",{className:"text-xs text-white/40",children:"Se carga desde `ebooks.json` publicado. Un solo work puede renderizar la entrada que toca (diario) o la siguiente (secuencial)."})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Modo"}),m.jsxs("select",{className:"input-field disabled:opacity-60",value:e.ebookMode,onChange:L=>h({ebookMode:L.target.value}),disabled:!I,children:[m.jsx("option",{value:"sequential",children:"Sequential"}),m.jsx("option",{value:"daily_fixed",children:"Daily fixed (day-of-year)"})]})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Index URL"}),m.jsx("input",{type:"text",className:"input-field disabled:opacity-60",value:e.ebookIndexUrl,onChange:L=>h({ebookIndexUrl:L.target.value}),disabled:!I})]})]}):null,m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Order hint (opcional)"}),m.jsx("input",{type:"number",min:0,className:"input-field disabled:opacity-60",value:e.orderHint,onChange:L=>h({orderHint:Number(L.target.value)}),disabled:!I})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Siguiente (next)"}),m.jsxs("select",{className:"input-field disabled:opacity-60",value:e.nextWorkId,onChange:L=>h({nextWorkId:L.target.value}),disabled:!I,children:[m.jsx("option",{value:"",children:"Sin siguiente"}),r.filter(L=>L.id!==e.id).map(L=>m.jsx("option",{value:L.id,children:L.label},L.id))]}),e.nextWorkId&&$?m.jsxs("p",{className:"text-xs text-white/40",children:["Siguiente: ",$.label]}):null]}),m.jsxs("div",{className:"grid gap-2 sm:col-span-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Variante de (variant_of)"}),m.jsxs("select",{className:"input-field disabled:opacity-60",value:e.variantOfWorkId,onChange:L=>h({variantOfWorkId:L.target.value}),disabled:!I,children:[m.jsx("option",{value:"",children:"Sin base"}),r.filter(L=>L.id!==e.id).map(L=>m.jsx("option",{value:L.id,children:L.label},L.id))]}),e.variantOfWorkId&&ne?m.jsxs("p",{className:"text-xs text-white/40",children:["Variante de: ",ne.label]}):null]})]}),m.jsxs("section",{className:"space-y-3 rounded-3xl border border-white/10 bg-white/5 p-4",children:[m.jsxs("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-white/40",children:"Visibilidad"}),m.jsx("p",{className:"text-sm text-white/60",children:U?"Eres el propietario de este trabajo.":te?`Propietario: ${te}`:""})]}),D?null:m.jsx("p",{className:"text-xs text-amber-300/80",children:"Solo el propietario puede cambiar la visibilidad o los colaboradores."})]}),m.jsx("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:gap-3",children:["private","shared","public"].map(L=>m.jsxs("label",{className:Be("inline-flex items-center gap-2 rounded-2xl border px-3 py-2 text-sm transition",e.visibility===L?"border-sky-400/80 bg-sky-400/10 text-white":"border-white/15 text-white/70 hover:border-white/30 hover:text-white",!D&&"opacity-50"),children:[m.jsx("input",{type:"radio",className:"accent-sky-400",checked:e.visibility===L,onChange:()=>h({visibility:L}),disabled:!D}),hS[L]]},L))}),m.jsx("p",{className:"text-xs text-white/50",children:L5[e.visibility]}),e.visibility==="private"?null:m.jsxs("div",{className:"space-y-2 rounded-2xl border border-white/10 bg-white/5 p-3",children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-white/40",children:"Colaboradores (edicin)"}),m.jsx("p",{className:"text-xs text-white/50",children:"Aade hasta 5 direcciones de correo. Tendrn permisos de edicin completos."}),m.jsx("div",{className:"space-y-2",children:e.collaborators.map((L,N)=>m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("input",{type:"email",className:"input-field flex-1 disabled:opacity-60",placeholder:"colega@ejemplo.com",value:L,onChange:B=>w(N,B.target.value),disabled:!D}),e.collaborators.length>1?m.jsx("button",{type:"button",className:"inline-flex h-9 w-9 items-center justify-center rounded-full border border-rose-500/40 text-rose-300 transition hover:border-rose-400 hover:text-rose-200 disabled:opacity-40",onClick:()=>k(N),"aria-label":"Eliminar colaborador",disabled:!D,children:""}):null]},`collaborator-${N}`))}),m.jsx("button",{type:"button",className:"btn-secondary px-3 py-1 text-xs disabled:opacity-40",onClick:S,disabled:!D||e.collaborators.length>=pS,children:"+ Aadir colaborador"})]})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Descripcin (Markdown)"}),m.jsx("textarea",{className:"input-field min-h-[140px] disabled:opacity-60",value:e.descriptionMarkdown,onChange:L=>h({descriptionMarkdown:L.target.value}),placeholder:"Usa formato markdown para resaltar puntos importantes.",disabled:!I})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Notas opcionales"}),m.jsx("textarea",{className:"input-field min-h-[100px] disabled:opacity-60",value:e.notes,onChange:L=>h({notes:L.target.value}),disabled:!I})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Vdeos de YouTube"}),m.jsx("div",{className:"space-y-3",children:e.videoUrls.map((L,N)=>m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("input",{type:"url",className:"input-field flex-1 disabled:opacity-60",value:L,onChange:B=>p(N,B.target.value),placeholder:"https://www.youtube.com/watch?v=...",disabled:!I}),e.videoUrls.length>1?m.jsx("button",{type:"button",className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-rose-500/40 text-rose-300 transition hover:border-rose-400 hover:text-rose-200",onClick:()=>y(N),"aria-label":"Eliminar enlace de vdeo",disabled:!I,children:""}):null]}),m.jsx(Lm,{url:L,title:`Vista previa vdeo ${N+1}`})]},`video-field-${N}`))}),m.jsx("button",{type:"button",className:"btn-secondary px-3 py-1 text-xs disabled:opacity-50",onClick:v,disabled:!I,children:"+ Aadir vdeo"})]}),m.jsxs("div",{className:"flex flex-wrap gap-3 pt-2",children:[m.jsx("button",{type:"button",onClick:_,className:"btn-primary disabled:opacity-60",disabled:A,children:A?"Guardando":"Guardar"}),m.jsx("button",{type:"button",className:"btn-secondary disabled:opacity-50",onClick:C,disabled:A,children:"Cancelar"})]})]})}function B5(){var Rt;const e=_e(Q=>Q.works),t=_e(Q=>Q.objectives),n=_e(Q=>Q.workTaxonomy),r=_e(Q=>Q.addWork),i=_e(Q=>Q.updateWork),o=_e(Q=>Q.deleteWork),a=_e(Q=>Q.upsertNodeType),u=_e(Q=>Q.upsertTag),c=_e(Q=>Q.worksLoading),f=ri(),{user:h}=Ts(),p=b.useMemo(()=>h?{actorId:h.id,actorEmail:h.email??""}:null,[h]),[v,y]=b.useState(""),[w,S]=b.useState(null),[k,_]=b.useState(new Set),[C,j]=b.useState(new Set),[I,D]=b.useState(new Set),A=b.useRef(!1),[U,te]=b.useState({}),[z,M]=b.useState(null),[$,ne]=b.useState(null),[H,Y]=b.useState([]),K=b.useMemo(()=>new Map(t.map(Q=>[Q.id,Q])),[t]),se=b.useMemo(()=>[...t].sort((Q,fe)=>(Q.name??"").localeCompare(fe.name??"","es")),[t]),q=b.useMemo(()=>(n.nodeTypes??[]).slice().sort((Q,fe)=>Q.label.localeCompare(fe.label,"en",{sensitivity:"base"})).map(Q=>({value:Q.key,label:Q.label})),[n.nodeTypes]),F=b.useMemo(()=>(n.tags??[]).slice().sort((Q,fe)=>Q.name.localeCompare(fe.name,"en",{sensitivity:"base"})).map(Q=>({value:Q.name,label:Q.name})),[n.tags]);b.useEffect(()=>{let Q=!1;return(async()=>{try{const fe=await o5();if(Q)return;Y(fe.map(ye=>({id:ye.id,title:ye.title,indexUrl:_c(ye.path)})))}catch{Q||Y([])}})(),()=>{Q=!0}},[]);const L=b.useMemo(()=>new Map(e.map(Q=>[Q.id,Q])),[e]),N=b.useMemo(()=>{const Q=new Map;return e.forEach(fe=>{const ye=fe.parentWorkId;if(!ye)return;const Ee=Q.get(ye)??[];Ee.push(fe),Q.set(ye,Ee)}),Q.forEach(fe=>{fe.sort((ye,Ee)=>ye.name.localeCompare(Ee.name,"es",{sensitivity:"base"}))}),Q},[e]),B=b.useMemo(()=>{const Q=new Map,fe=(ye,Ee)=>{if(Q.has(ye))return Q.get(ye);const G=L.get(ye);if(!G)return"";if(!G.parentWorkId||Ee.has(ye))return Q.set(ye,G.name),G.name;Ee.add(ye);const P=fe(G.parentWorkId,Ee);Ee.delete(ye);const V=P?`${P}  ${G.name}`:G.name;return Q.set(ye,V),V};return e.forEach(ye=>{fe(ye.id,new Set)}),Q},[e,L]);b.useEffect(()=>{const Q=f.hash,fe="#work-";let ye=null;if(Q.startsWith(fe)&&(ye=Q.slice(fe.length)),!ye){const P=new URLSearchParams(f.search);ye=P.get("workId")??P.get("work")}if(!ye)return;_(P=>{if(P.has(ye))return P;const V=new Set(P);return V.add(ye),V});const Ee=document.getElementById(`work-${ye}`);if(!Ee)return;Ee.scrollIntoView({behavior:"smooth",block:"start"}),Ee.classList.add("ring-2","ring-sky-500/60");const G=window.setTimeout(()=>{Ee.classList.remove("ring-2","ring-sky-500/60")},1500);return()=>{window.clearTimeout(G),Ee.classList.remove("ring-2","ring-sky-500/60")}},[f.hash,f.search,e]);const ee=b.useMemo(()=>{const Q=new Map,fe=ye=>{if(Q.has(ye))return Q.get(ye);const Ee=new Set;return(N.get(ye)??[]).forEach(P=>{Ee.add(P.id),fe(P.id).forEach(V=>Ee.add(V))}),Q.set(ye,Ee),Ee};return e.forEach(ye=>fe(ye.id)),Q},[e,N]),R=b.useCallback((Q,fe)=>{var G,P;const ye=new Set;Q&&(ye.add(Q),(G=ee.get(Q))==null||G.forEach(V=>ye.add(V)));const Ee=e.filter(V=>!ye.has(V.id)).map(V=>({id:V.id,label:(()=>{var ue;const le=B.get(V.id)??V.name,Z=(ue=K.get(V.objectiveId))==null?void 0:ue.name;return Z?`${Z}  ${le}`:le})()})).sort((V,le)=>V.label.localeCompare(le.label,"es",{sensitivity:"base"}));if(fe&&fe.length>0&&!Ee.some(V=>V.id===fe)){const V=L.get(fe),le=B.get(fe)??(V==null?void 0:V.name)??"Trabajo no disponible",Z=V?(P=K.get(V.objectiveId))==null?void 0:P.name:void 0,ue=Z?`${Z}  ${le}`:le;Ee.unshift({id:fe,label:ue})}return Ee},[e,B,ee,L,K]),be=b.useMemo(()=>e.map(Q=>{var G;const fe=B.get(Q.id)??Q.name,ye=(G=K.get(Q.objectiveId))==null?void 0:G.name,Ee=ye?`${ye}  ${fe}`:fe;return{id:Q.id,label:Ee}}).sort((Q,fe)=>Q.label.localeCompare(fe.label,"es",{sensitivity:"base"})),[e,B,K]),he=b.useMemo(()=>{const Q=v.trim().toLowerCase(),fe=G=>{var O;if(!Q)return!0;const P=((O=K.get(G.objectiveId))==null?void 0:O.name)??"",V=G.parentWorkId?B.get(G.parentWorkId)??"":"",le=G.id?B.get(G.id)??"":"",Z=(G.nodeType??"").toLowerCase(),ue=Array.isArray(G.tags)?G.tags.join(" "):G.tags??"";return G.name.toLowerCase().includes(Q)||(G.subtitle??"").toLowerCase().includes(Q)||G.descriptionMarkdown.toLowerCase().includes(Q)||P.toLowerCase().includes(Q)||V.toLowerCase().includes(Q)||le.toLowerCase().includes(Q)||Z.includes(Q)||ue.toLowerCase().includes(Q)},ye=[],Ee=G=>{if(!G)return 0;let P=1,V=L.get(G);const le=new Set(G?[G]:[]);for(;V&&V.parentWorkId;){const Z=V.parentWorkId;if(!Z||le.has(Z))break;P+=1,le.add(Z),V=L.get(Z)}return P};return e.forEach(G=>{const P=U[G.id],V=(P==null?void 0:P.data)??{id:G.id,name:G.name,subtitle:G.subtitle??"",nodeType:G.nodeType??"",tags:G.tags??[],descriptionMarkdown:G.descriptionMarkdown,objectiveId:G.objectiveId,parentWorkId:G.parentWorkId??""};!P&&!fe(V)||ye.push({id:G.id,objectiveId:V.objectiveId,parentWorkId:V.parentWorkId??"",depth:Ee(V.parentWorkId),work:G,isNew:!1,isEditing:!!P,form:P==null?void 0:P.data})}),Object.entries(U).filter(([,G])=>G.isNew).forEach(([G,P])=>{fe(P.data)&&ye.push({id:G,objectiveId:P.data.objectiveId,parentWorkId:P.data.parentWorkId,depth:Ee(P.data.parentWorkId||void 0),work:void 0,isNew:!0,isEditing:!0,form:P.data})}),ye},[e,L,U,K,B,v]),ge=b.useCallback(Q=>{var G;const fe=(Q.isEditing&&Q.form?Q.form.parentWorkId:Q.parentWorkId)??"";if(!fe)return!1;let ye=fe;const Ee=new Set;for(;ye&&!Ee.has(ye);){if(Ee.add(ye),C.has(ye))return!0;ye=(((G=L.get(ye))==null?void 0:G.parentWorkId)??"")||""}return!1},[C,L]),me=b.useMemo(()=>{const Q=new Map;he.forEach(P=>{const V=K.has(P.objectiveId)?P.objectiveId:qu,le=Q.get(V)??[];le.push(P),Q.set(V,le)});const fe=P=>{var V,le;if(P.isEditing&&P.form){const Z=P.form.name.trim()||(((V=P.work)==null?void 0:V.name)??""),ue=P.form.parentWorkId&&P.form.parentWorkId.length>0?B.get(P.form.parentWorkId)??((le=L.get(P.form.parentWorkId))==null?void 0:le.name)??"":"";return ue?`${ue}  ${Z}`:Z}return P.work?B.get(P.work.id)??P.work.name:P.id},ye=(P,V)=>{const le=fe(P),Z=fe(V);return le.localeCompare(Z,"es",{sensitivity:"base"})},Ee=[];se.forEach(P=>{const V=Q.get(P.id);V&&V.length&&Ee.push({objective:P,items:V.slice().sort(ye)})});const G=Q.get(qu);return G&&G.length&&Ee.push({objective:void 0,items:G.slice().sort(ye)}),Ee},[he,K,se,B,L]),Ce=((Rt=se[0])==null?void 0:Rt.id)??"";b.useEffect(()=>{A.current||v.trim().length>0||me.length!==0&&(A.current=!0,D(new Set(me.map(Q=>{var fe;return((fe=Q.objective)==null?void 0:fe.id)??qu}))))},[me,v]);const Te=(Q,fe)=>{te(ye=>{const Ee=ye[Q];return Ee?{...ye,[Q]:fe(Ee)}:ye})},je=Q=>Q.length>0?Q:[""],ie=Q=>Q.length>0?Q:[""],Ie=Q=>{te(fe=>{var ye,Ee,G,P,V;return fe[Q.id]?fe:{...fe,[Q.id]:{data:{id:Q.id,name:Q.name,subtitle:Q.subtitle??"",objectiveId:Q.objectiveId,parentWorkId:Q.parentWorkId??"",nodeType:Q.nodeType??"",scheduleKind:((ye=Q.schedule)==null?void 0:ye.kind)??"",scheduleNumber:((Ee=Q.schedule)==null?void 0:Ee.number)??1,ebookId:((G=Q.ebookRef)==null?void 0:G.ebookId)??"",ebookIndexUrl:((P=Q.ebookRef)==null?void 0:P.indexUrl)??"",ebookMode:((V=Q.ebookRef)==null?void 0:V.mode)??"sequential",tags:Q.tags??[],orderHint:Q.orderHint??0,nextWorkId:Q.nextWorkId??"",variantOfWorkId:Q.variantOfWorkId??"",descriptionMarkdown:Q.descriptionMarkdown,estimatedMinutes:Q.estimatedMinutes,notes:Q.notes??"",videoUrls:je(Q.videoUrls.slice()),visibility:Q.visibility??"private",collaborators:ie(Q.collaboratorEmails??[])},isNew:!1,originalId:Q.id}}}),_(fe=>{const ye=new Set(fe);return ye.add(Q.id),ye})},He=()=>{const Q=`draft-${Wt()}`;te(fe=>({...fe,[Q]:{data:{...fb,id:Q,subtitle:"",objectiveId:Ce},isNew:!0}})),_(fe=>{const ye=new Set(fe);return ye.add(Q),ye})},qe=Q=>{const fe=`draft-${Wt()}`;te(ye=>{var Ee,G,P,V,le;return{...ye,[fe]:{data:{id:fe,name:`${Q.name} (copia)`,subtitle:Q.subtitle??"",objectiveId:Q.objectiveId,parentWorkId:Q.parentWorkId??"",nodeType:Q.nodeType??"",scheduleKind:((Ee=Q.schedule)==null?void 0:Ee.kind)??"",scheduleNumber:((G=Q.schedule)==null?void 0:G.number)??1,ebookId:((P=Q.ebookRef)==null?void 0:P.ebookId)??"",ebookIndexUrl:((V=Q.ebookRef)==null?void 0:V.indexUrl)??"",ebookMode:((le=Q.ebookRef)==null?void 0:le.mode)??"sequential",tags:Q.tags??[],orderHint:Q.orderHint??0,nextWorkId:"",variantOfWorkId:"",descriptionMarkdown:Q.descriptionMarkdown,estimatedMinutes:Q.estimatedMinutes,notes:Q.notes??"",videoUrls:je(Q.videoUrls.slice()),visibility:"private",collaborators:[""]},isNew:!0}}}),_(ye=>{const Ee=new Set(ye);return Ee.add(fe),Ee}),S({type:"success",text:"Duplicacin creada. Ajusta y guarda para confirmarla."})},rt=Q=>{const fe=`draft-${Wt()}`;te(ye=>({...ye,[fe]:{data:{...fb,id:fe,subtitle:"",objectiveId:Q.objectiveId,parentWorkId:Q.id,estimatedMinutes:Q.estimatedMinutes,visibility:Q.visibility??"private",collaborators:[""]},isNew:!0}})),_(ye=>{const Ee=new Set(ye);return Ee.add(fe),Ee}),S({type:"success",text:`Creando un trabajo hijo para ${Q.name}. Ajusta y guarda para confirmarlo.`})},st=Q=>{_(fe=>{const ye=new Set(fe);return ye.has(Q)?ye.delete(Q):ye.add(Q),ye})},St=Q=>{te(fe=>{const ye={...fe};return delete ye[Q],ye}),Q.startsWith("draft-")&&_(fe=>{const ye=new Set(fe);return ye.delete(Q),ye})},fn=async Q=>{const fe=U[Q];if(!fe||z)return;if(!p){S({type:"error",text:"Inicia sesin para guardar este trabajo."});return}const ye=(fe.data.parentWorkId??"").trim(),Ee=ye.length>0?ye:void 0,G=fe.data.nodeType.trim(),P=G.length>0?G:void 0,V=(P??"").trim().toLowerCase(),le=(fe.data.scheduleKind??"").trim(),Z=le.length>0?le:void 0,ue=D5(Z)?Z:void 0,O=Number(fe.data.scheduleNumber),J=Number.isFinite(O)?Math.trunc(O):void 0,de=V==="reading"?ue:void 0,pe=de?J:void 0,Re=(fe.data.ebookId??"").trim(),Pe=(fe.data.ebookIndexUrl??"").trim(),dt=(fe.data.ebookMode??"").trim()==="daily_fixed"?"daily_fixed":"sequential",Fe=V==="ebook"&&Re&&Pe?{ebookId:Re,indexUrl:_c(Pe),mode:dt}:void 0,Ve=O5(fe.data.tags??[]),Ke=Number(fe.data.orderHint)>0?Number(fe.data.orderHint):void 0,Le=(fe.data.nextWorkId??"").trim(),ot=Le.length>0?Le:void 0,yt=(fe.data.variantOfWorkId??"").trim(),Ye=yt.length>0?yt:void 0,Ne={name:fe.data.name.trim(),subtitle:fe.data.subtitle.trim()||void 0,objectiveId:fe.data.objectiveId,nodeType:P,scheduleKind:de,scheduleNumber:pe,ebookRef:Fe,tags:Ve,orderHint:Ke,nextWorkId:ot,variantOfWorkId:Ye,descriptionMarkdown:fe.data.descriptionMarkdown,estimatedMinutes:Number(fe.data.estimatedMinutes)||0,notes:fe.data.notes.trim()||void 0,videoUrls:fe.data.videoUrls.map(tt=>tt.trim()).filter(Boolean),parentWorkId:Ee,visibility:fe.data.visibility,collaboratorEmails:Array.from(new Set(fe.data.collaborators.map(tt=>tt.trim().toLowerCase()).filter(tt=>tt.length>0)))};if(!Ne.name){S({type:"error",text:"El nombre es obligatorio."});return}if(!Ne.objectiveId){S({type:"error",text:"Selecciona un objetivo para el trabajo."});return}if(V==="ebook"&&!Ne.ebookRef){S({type:"error",text:"Para `nodeType=ebook`, selecciona un ebook y un indexUrl vlido."});return}if(Ne.parentWorkId&&fe.originalId){if(Ne.parentWorkId===fe.originalId){S({type:"error",text:"Un trabajo no puede ser su propio padre."});return}const tt=ee.get(fe.originalId);if(tt&&tt.has(Ne.parentWorkId)){S({type:"error",text:"Selecciona un trabajo padre que no sea un descendiente."});return}}if(fe.originalId&&Ne.nextWorkId===fe.originalId){S({type:"error",text:"Un trabajo no puede tenerse como siguiente."});return}if(fe.originalId&&Ne.variantOfWorkId===fe.originalId){S({type:"error",text:"Un trabajo no puede ser variante de s mismo."});return}const Ge=fe.originalId?L.get(fe.originalId):void 0,vt=fe.isNew||((Ge==null?void 0:Ge.isOwner)??!1);M(Q);try{if(fe.isNew){const tt=await r({name:Ne.name,subtitle:Ne.subtitle,objectiveId:Ne.objectiveId,parentWorkId:Ne.parentWorkId,nodeType:Ne.nodeType,scheduleKind:Ne.scheduleKind,scheduleNumber:Ne.scheduleNumber,ebookRef:Ne.ebookRef,tags:Ne.tags,orderHint:Ne.orderHint,nextWorkId:Ne.nextWorkId,variantOfWorkId:Ne.variantOfWorkId,descriptionMarkdown:Ne.descriptionMarkdown,estimatedMinutes:Ne.estimatedMinutes,notes:Ne.notes,videoUrls:Ne.videoUrls,visibility:Ne.visibility,collaboratorEmails:Ne.collaboratorEmails},p);S({type:"success",text:"Trabajo creado correctamente."}),_(At=>{const ft=new Set(At);return ft.delete(Q),ft.add(tt.id),ft})}else if(fe.originalId){const tt={name:Ne.name,subtitle:Ne.subtitle??null,objectiveId:Ne.objectiveId,parentWorkId:Ne.parentWorkId??null,nodeType:Ne.nodeType??null,scheduleKind:Ne.scheduleKind??null,scheduleNumber:Ne.scheduleKind?Ne.scheduleNumber??null:null,ebookRef:V==="ebook"?Ne.ebookRef??null:null,tags:Ne.tags,orderHint:Ne.orderHint??null,nextWorkId:Ne.nextWorkId??null,variantOfWorkId:Ne.variantOfWorkId??null,descriptionMarkdown:Ne.descriptionMarkdown,estimatedMinutes:Ne.estimatedMinutes,notes:Ne.notes??null,videoUrls:Ne.videoUrls};vt&&(tt.visibility=Ne.visibility,tt.collaboratorEmails=Ne.collaboratorEmails),await i(fe.originalId,tt,p),S({type:"success",text:"Trabajo actualizado."})}te(tt=>{const At={...tt};return delete At[Q],At})}catch(tt){console.error("No se pudo guardar el trabajo",tt),S({type:"error",text:"No se han podido guardar los cambios. Comprueba tus permisos e intntalo de nuevo."})}finally{M(null)}},Xt=async Q=>{var ye;if(!p){S({type:"error",text:"Inicia sesin para eliminar trabajos."});return}const fe=(((ye=ee.get(Q))==null?void 0:ye.size)??0)>0;try{if(!await o(Q,p)){S({type:"error",text:fe?"No se puede eliminar porque tiene trabajos hijos.":"No se puede eliminar porque est siendo usado en alguna sesin."});return}S({type:"success",text:"Trabajo eliminado."}),te(G=>{const P={...G};return delete P[Q],P}),_(G=>{const P=new Set(G);return P.delete(Q),P})}catch(Ee){console.error("No se pudo eliminar el trabajo",Ee),S({type:"error",text:"No tienes permisos para eliminar este trabajo o se ha producido un error."})}},wt=async Q=>{if(!p){S({type:"error",text:"Inicia sesin para editar trabajos."});return}if(!(Q.canEdit??!1)||(Q.nodeType??"").trim().toLowerCase()==="style")return;const fe=(Q.tags??[]).map(G=>G.trim().toLowerCase()).filter(Boolean),ye=fe.includes(Da),Ee=ye?fe.filter(G=>G!==Da):Array.from(new Set([...fe,Da]));ne(Q.id);try{await i(Q.id,{tags:Ee},p),S({type:"success",text:ye?"Incluido en el plan personal.":"Excluido del plan personal."}),window.setTimeout(()=>S(null),1800)}catch(G){console.error("No se pudo actualizar el trabajo",G),S({type:"error",text:"No se han podido guardar los cambios. Comprueba tus permisos e intntalo de nuevo."})}finally{ne(null)}};return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("header",{className:"glass-panel space-y-4 p-6 sm:p-10",children:[m.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold",children:"Trabajos"}),m.jsx("p",{className:"max-w-2xl text-white/60",children:"Gestiona los ejercicios reutilizables por objetivo. Duplica, edita y ajusta los detalles sin salir del listado."})]}),m.jsxs("div",{className:"flex w-full flex-col gap-3 sm:w-auto sm:flex-row sm:items-center",children:[m.jsx("input",{type:"search",className:"input-field w-full sm:w-72",value:v,onChange:Q=>y(Q.target.value),placeholder:"Buscar por nombre, descripcin u objetivo"}),m.jsx(Li,{to:"/catalog/taxonomy",className:"btn-secondary",children:"Taxonomy"}),m.jsx("button",{type:"button",className:"btn-primary",onClick:He,children:"Nuevo trabajo"}),c?m.jsx("span",{className:"text-xs text-white/60 sm:ml-3",children:"Sincronizando trabajos"}):null]})]}),w&&m.jsx("div",{className:Be("rounded-2xl border px-4 py-3 text-sm",w.type==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-rose-500/40 bg-rose-500/10 text-rose-200"),children:w.text})]}),m.jsx("section",{className:"space-y-6",children:me.length===0?c?m.jsx("div",{className:"glass-panel p-10 text-center text-white/60",children:"Sincronizando trabajos"}):m.jsx("div",{className:"glass-panel p-10 text-center text-white/50",children:"An no hay trabajos guardados. Empieza creando uno con el botn Nuevo trabajo."}):me.map(({objective:Q,items:fe})=>{const ye=Q?Q.name:"Sin objetivo asignado",Ee=(Q==null?void 0:Q.id)??qu,G=I.has(Ee);return m.jsxs("div",{className:"glass-panel space-y-4 p-6",children:[m.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("button",{type:"button",onClick:()=>D(P=>{const V=new Set(P);return V.has(Ee)?V.delete(Ee):V.add(Ee),V}),className:"inline-flex h-8 w-8 items-center justify-center rounded-full border border-white/15 bg-white/5 text-sm font-semibold text-white/70 transition hover:border-white/30 hover:text-white","aria-label":G?"Expandir grupo":"Colapsar grupo",title:G?"Expandir":"Colapsar",children:G?"":""}),m.jsx("h3",{className:"text-lg font-semibold text-white",children:ye}),m.jsx(Bi,{objective:Q,size:"sm"})]}),m.jsxs("span",{className:"rounded-full border border-white/10 px-3 py-1 text-xs text-white/60",children:[fe.length," trabajo",fe.length===1?"":"s"]})]}),G?null:m.jsx("div",{className:"space-y-4",children:fe.filter(P=>!ge(P)).map(P=>{var Re,Pe,De,dt,Fe,Ve,Ke;const V=k.has(P.id),le=(P.isEditing&&P.form?P.form.parentWorkId:P.parentWorkId)??"",Z=P.isEditing?R((Re=P.work)==null?void 0:Re.id,le):[],O=(P.work?N.get(P.work.id)??[]:[]).length,J=C.has(P.id);if(P.isEditing&&P.form){const Le=P.isNew||(((Pe=P.work)==null?void 0:Pe.canEdit)??!1),ot=P.isNew||(((De=P.work)==null?void 0:De.isOwner)??!1),yt=P.isNew||(((dt=P.work)==null?void 0:dt.isOwner)??!1);return m.jsx(F5,{form:P.form,objectiveOptions:se,parentOptions:Z,workOptions:be,nodeTypeOptions:q,tagOptions:F,ebookOptions:H,onCreateNodeType:a,onCreateTag:u,depth:P.depth,onFieldChange:Ye=>Te(P.id,Ne=>{const Ge={...Ne.data,...Ye};if(Ye.parentWorkId!==void 0&&Ye.parentWorkId.length>0){const vt=L.get(Ye.parentWorkId);vt&&(Ge.objectiveId=vt.objectiveId)}return Ye.visibility==="private"&&(Ge.collaborators=[""]),{...Ne,data:Ge}}),onVideoChange:(Ye,Ne)=>Te(P.id,Ge=>{const vt=Ge.data.videoUrls.slice();return vt[Ye]=Ne,{...Ge,data:{...Ge.data,videoUrls:vt}}}),onAddVideo:()=>Te(P.id,Ye=>({...Ye,data:{...Ye.data,videoUrls:[...Ye.data.videoUrls,""]}})),onRemoveVideo:Ye=>Te(P.id,Ne=>{const Ge=Ne.data.videoUrls.slice();return Ge.splice(Ye,1),{...Ne,data:{...Ne.data,videoUrls:Ge.length?Ge:[""]}}}),onCollaboratorChange:(Ye,Ne)=>Te(P.id,Ge=>{const vt=Ge.data.collaborators.slice();return vt[Ye]=Ne,{...Ge,data:{...Ge.data,collaborators:vt}}}),onAddCollaborator:()=>Te(P.id,Ye=>Ye.data.collaborators.length>=pS?Ye:{...Ye,data:{...Ye.data,collaborators:[...Ye.data.collaborators,""]}}),onRemoveCollaborator:Ye=>Te(P.id,Ne=>{const Ge=Ne.data.collaborators.slice();return Ge.splice(Ye,1),Ge.length||Ge.push(""),{...Ne,data:{...Ne.data,collaborators:Ge}}}),onSave:()=>void fn(P.id),onCancel:()=>St(P.id),isNew:P.isNew,canEditContent:Le,canManageSharing:ot,isSaving:z===P.id,isOwner:yt,ownerEmail:(Fe=P.work)==null?void 0:Fe.ownerEmail},P.id)}if(!P.work)return null;const de=P.work.nextWorkId?B.get(P.work.nextWorkId)??((Ve=L.get(P.work.nextWorkId))==null?void 0:Ve.name):void 0,pe=P.work.variantOfWorkId?B.get(P.work.variantOfWorkId)??((Ke=L.get(P.work.variantOfWorkId))==null?void 0:Ke.name):void 0;return m.jsx($5,{work:P.work,childCount:O,depth:P.depth,expanded:V,isTreeCollapsed:J,isPersonalExcluded:(P.work.tags??[]).map(Le=>Le.trim().toLowerCase()).includes(Da),canTogglePersonal:(P.work.canEdit??!1)&&(P.work.nodeType??"").trim().toLowerCase()!=="style",personalToggleBusy:$===P.id,nextLabel:de,variantLabel:pe,onToggle:()=>st(P.id),onToggleTree:()=>j(Le=>{const ot=new Set(Le);return ot.has(P.id)?ot.delete(P.id):ot.add(P.id),ot}),onTogglePersonal:()=>{P.work&&wt(P.work)},onEdit:()=>{const Le=P.work;Le&&(Le.canEdit??!1)&&Ie(Le)},onDuplicate:()=>{const Le=P.work;Le&&(Le.canEdit??!1)&&qe(Le)},onCreateChild:()=>{const Le=P.work;Le&&(Le.canEdit??!1)&&rt(Le)},onDelete:()=>{const Le=P.work;Le&&(Le.isOwner??!1)&&Xt(Le.id)}},P.id)})})]},(Q==null?void 0:Q.id)??"sin-objetivo")})})]})}function hb(e){return e.reduce((t,n)=>(t[n]=(t[n]??0)+1,t),{})}function z5(){const{works:e,workTaxonomy:t,upsertNodeType:n,removeNodeType:r,upsertTag:i,removeTag:o}=_e(k=>({works:k.works,workTaxonomy:k.workTaxonomy,upsertNodeType:k.upsertNodeType,removeNodeType:k.removeNodeType,upsertTag:k.upsertTag,removeTag:k.removeTag})),[a,u]=b.useState(""),[c,f]=b.useState(""),[h,p]=b.useState(null),v=b.useMemo(()=>{const k=e.map(_=>(_.nodeType??"").trim().toLowerCase()).filter(Boolean);return hb(k)},[e]),y=b.useMemo(()=>{const k=e.flatMap(_=>(_.tags??[]).map(C=>C.trim().toLowerCase()).filter(Boolean));return hb(k)},[e]),w=t.nodeTypes.slice().sort((k,_)=>k.label.localeCompare(_.label,"en",{sensitivity:"base"})),S=t.tags.slice().sort((k,_)=>k.name.localeCompare(_.name,"en",{sensitivity:"base"}));return m.jsxs("div",{className:"space-y-6",children:[m.jsx("header",{className:"flex flex-wrap items-start justify-between gap-4 rounded-3xl border border-white/10 bg-white/5 px-6 py-5",children:m.jsxs("div",{children:[m.jsx("p",{className:"font-display text-2xl font-semibold",children:"Taxonomy"}),m.jsx("p",{className:"mt-1 text-sm text-white/60",children:"Node types and tags used across the catalog and personal planning."}),m.jsx("p",{className:"mt-2 text-sm",children:m.jsx(Li,{to:"/catalog",className:"text-sky-300 hover:text-sky-200",children:" Back to Catalog"})})]})}),h?m.jsx("div",{className:`rounded-2xl border px-4 py-3 text-sm ${h.type==="success"?"border-emerald-500/30 bg-emerald-500/10 text-emerald-100":"border-rose-500/30 bg-rose-500/10 text-rose-100"}`,children:h.text}):null,m.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[m.jsxs("section",{className:"rounded-3xl border border-white/10 bg-white/5 p-6",children:[m.jsx("div",{className:"flex items-start justify-between gap-4",children:m.jsxs("div",{children:[m.jsx("h2",{className:"text-lg font-semibold",children:"Node types"}),m.jsx("p",{className:"mt-1 text-sm text-white/60",children:"Used by works and group rules. Keys are stored in works."})]})}),m.jsxs("div",{className:"mt-5 flex flex-col gap-3 sm:flex-row sm:items-end",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-white/50",children:"New node type"}),m.jsx("input",{className:"input-field mt-2",value:a,onChange:k=>u(k.target.value),placeholder:"e.g. Dance figures"})]}),m.jsx("button",{type:"button",className:"btn-primary",onClick:()=>{const k=n(a);if(!k){p({type:"error",text:"Please enter a valid node type."});return}u(""),p({type:"success",text:`Node type created: ${k}`})},children:"Add"})]}),m.jsxs("div",{className:"mt-6 space-y-2",children:[w.map(k=>{const _=(v[k.key]??0)>0;return m.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 rounded-2xl border border-white/10 bg-slate-950/30 px-4 py-3",children:[m.jsxs("div",{children:[m.jsx("p",{className:"font-semibold text-white",children:k.label}),m.jsxs("p",{className:"text-xs text-white/50",children:["key: ",m.jsx("span",{className:"font-mono",children:k.key}),"  used by ",v[k.key]??0," works"]})]}),m.jsx("button",{type:"button",disabled:_,className:"rounded-full border border-white/15 bg-white/5 px-3 py-2 text-xs font-semibold text-white/70 transition hover:border-white/30 hover:text-white disabled:opacity-50",title:_?"Cannot delete: in use":"Delete",onClick:()=>{const C=r(k.key);p(C?{type:"success",text:`Node type removed: ${k.key}`}:{type:"error",text:"Cannot remove node type (it may be in use)."})},children:"Delete"})]},k.key)}),w.length===0?m.jsx("p",{className:"text-sm text-white/60",children:"No node types yet."}):null]})]}),m.jsxs("section",{className:"rounded-3xl border border-white/10 bg-white/5 p-6",children:[m.jsx("div",{className:"flex items-start justify-between gap-4",children:m.jsxs("div",{children:[m.jsx("h2",{className:"text-lg font-semibold",children:"Tags"}),m.jsx("p",{className:"mt-1 text-sm text-white/60",children:"Lowercase slugs (spaces become hyphens). Deleting is blocked if used."})]})}),m.jsxs("div",{className:"mt-5 flex flex-col gap-3 sm:flex-row sm:items-end",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-white/50",children:"New tag"}),m.jsx("input",{className:"input-field mt-2",value:c,onChange:k=>f(k.target.value),placeholder:"e.g. bei-shaolin"})]}),m.jsx("button",{type:"button",className:"btn-primary",onClick:()=>{const k=i(c);if(!k){p({type:"error",text:"Please enter a valid tag."});return}f(""),p({type:"success",text:`Tag created: ${k}`})},children:"Add"})]}),m.jsxs("div",{className:"mt-6 space-y-2",children:[S.map(k=>{const _=(y[k.name]??0)>0;return m.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 rounded-2xl border border-white/10 bg-slate-950/30 px-4 py-3",children:[m.jsxs("div",{children:[m.jsx("p",{className:"font-semibold text-white",children:k.name}),m.jsxs("p",{className:"text-xs text-white/50",children:["used by ",y[k.name]??0," works"]})]}),m.jsx("button",{type:"button",disabled:_,className:"rounded-full border border-white/15 bg-white/5 px-3 py-2 text-xs font-semibold text-white/70 transition hover:border-white/30 hover:text-white disabled:opacity-50",title:_?"Cannot delete: in use":"Delete",onClick:()=>{const C=o(k.name);p(C?{type:"success",text:`Tag removed: ${k.name}`}:{type:"error",text:"Cannot remove tag (it may be in use)."})},children:"Delete"})]},k.name)}),S.length===0?m.jsx("p",{className:"text-sm text-white/60",children:"No tags yet."}):null]})]})]})]})}const Mh={name:"",colorHex:"#60a5fa",descriptionMarkdown:""},pb=["#F97316","#FB7185","#F43F5E","#EC4899","#D946EF","#A855F7","#8B5CF6","#6366F1","#4F46E5","#3B82F6","#38BDF8","#0EA5E9","#06B6D4","#14B8A6","#0D9488","#10B981","#22C55E","#65A30D","#84CC16","#A3E635","#FACC15","#FBBF24","#F59E0B","#EA580C","#C2410C","#E11D48","#EF4444","#F87171","#FB923C","#F472B6","#FDE047","#7C3AED"];function U5(){const e=_e(S=>S.objectives),t=_e(S=>S.addObjective),n=_e(S=>S.updateObjective),r=_e(S=>S.deleteObjective),i=_e(S=>S.works),[o,a]=b.useState(Mh),[u,c]=b.useState(null),f=b.useMemo(()=>{const S=new Map;return i.forEach(k=>{S.set(k.objectiveId,(S.get(k.objectiveId)??0)+1)}),S},[i]),h=b.useMemo(()=>[...e].sort((S,k)=>(S.name??"").localeCompare(k.name??"","es")),[e]),p=S=>{if(S.preventDefault(),!o.name.trim()){c({type:"error",text:"El nombre es obligatorio."});return}const k={name:o.name.trim(),colorHex:o.colorHex,descriptionMarkdown:o.descriptionMarkdown};o.id?(n(o.id,k),c({type:"success",text:"Objetivo actualizado."})):(t(k),c({type:"success",text:"Objetivo creado."})),a(Mh)},v=S=>{a({id:S.id,name:S.name,colorHex:S.colorHex,descriptionMarkdown:S.descriptionMarkdown})},y=S=>{const k=r(S);c(k?{type:"success",text:"Objetivo eliminado."}:{type:"error",text:"No se puede eliminar porque tiene trabajos asociados."})},w=()=>{if(e.length===0){c({type:"error",text:"No hay objetivos a los que asignar colores."});return}const S=[...pb];e.map((_,C)=>{const j=S[C%S.length];return{id:_.id,colorHex:j}}).forEach(({id:_,colorHex:C})=>n(_,{colorHex:C})),c({type:"success",text:"Colores repartidos equitativamente entre los objetivos."})};return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("header",{className:"glass-panel p-6 sm:p-10",children:[m.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold",children:"Objetivos"}),m.jsx("p",{className:"text-white/60",children:"Define categoras de trabajo con color y contexto para identificar visualmente cada ejercicio."})]}),m.jsx("div",{className:"flex flex-wrap gap-3",children:m.jsx("button",{type:"button",className:"btn-secondary",onClick:w,children:"Repartir colores"})})]}),u&&m.jsx("div",{className:`mt-4 rounded-2xl border px-4 py-3 text-sm ${u.type==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-rose-500/40 bg-rose-500/10 text-rose-200"}`,children:u.text})]}),m.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.1fr_1.5fr]",children:[m.jsxs("section",{className:"glass-panel p-6",children:[m.jsx("h2",{className:"text-xl font-semibold text-white",children:o.id?"Editar objetivo":"Nuevo objetivo"}),m.jsxs("form",{className:"mt-4 space-y-4",onSubmit:p,children:[m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Nombre"}),m.jsx("input",{type:"text",className:"input-field",value:o.name,onChange:S=>a(k=>({...k,name:S.target.value})),placeholder:"Ej. Resistencia, Tcnica, Juego",required:!0})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Color identificativo"}),m.jsxs("div",{className:"flex flex-wrap gap-3",children:[m.jsx("input",{type:"color",className:"h-12 w-12 cursor-pointer rounded-full border border-white/20 bg-transparent",value:o.colorHex,onChange:S=>a(k=>({...k,colorHex:S.target.value})),"aria-label":"Elegir color personalizado"}),m.jsx("input",{type:"text",className:"input-field max-w-[140px]",value:o.colorHex,onChange:S=>a(k=>({...k,colorHex:S.target.value})),placeholder:"#60a5fa","aria-label":"Cdigo hex del color"})]}),m.jsx("div",{className:"grid grid-cols-8 gap-2 rounded-3xl border border-white/10 bg-white/5 p-3",children:pb.map(S=>m.jsx("button",{type:"button",onClick:()=>a(k=>({...k,colorHex:S})),className:Be("relative flex h-9 w-9 items-center justify-center rounded-full border border-white/20 transition hover:scale-105 focus:outline-none focus:ring-2 focus:ring-white/60",o.colorHex.toLowerCase()===S.toLowerCase()&&"ring-2 ring-white/80 ring-offset-2 ring-offset-slate-900"),style:{backgroundColor:S},"aria-label":`Seleccionar color ${S}`,children:o.colorHex.toLowerCase()===S.toLowerCase()&&m.jsx("span",{className:"text-xs font-semibold text-slate-900",children:""})},S))})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Descripcin (Markdown)"}),m.jsx("textarea",{className:"input-field min-h-[140px]",value:o.descriptionMarkdown,onChange:S=>a(k=>({...k,descriptionMarkdown:S.target.value})),placeholder:"Explica cundo usar este tipo de trabajo, objetivos pedaggicos, etc."})]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("button",{type:"submit",className:"btn-primary",children:o.id?"Guardar objetivo":"Crear objetivo"}),o.id&&m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>a(Mh),children:"Cancelar edicin"})]})]})]}),m.jsx("section",{className:"space-y-6",children:h.length===0?m.jsx("div",{className:"glass-panel p-10 text-center text-white/50",children:"An no has creado objetivos. Crea uno con el formulario para clasificarlos por color y descripcin."}):h.map(S=>m.jsxs("div",{className:"glass-panel space-y-4 p-6",children:[m.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[m.jsx(Bi,{objective:S}),m.jsxs("div",{className:"flex items-center gap-3 text-xs text-white/60",children:[m.jsxs("span",{children:[f.get(S.id)??0," trabajos"]}),m.jsx("button",{type:"button",className:"btn-secondary px-3 py-1 text-xs",onClick:()=>v(S),children:"Editar"}),m.jsx("button",{type:"button",className:"inline-flex items-center justify-center rounded-full border border-rose-500/40 px-3 py-1 text-xs font-semibold text-rose-300",onClick:()=>y(S.id),children:"Eliminar"})]})]}),m.jsx(Es,{content:S.descriptionMarkdown})]},S.id))})]})]})}const Oh={name:"",notes:"",active:!0};function W5(){const e=_e(h=>h.assistants),t=_e(h=>h.addAssistant),n=_e(h=>h.updateAssistant),r=_e(h=>h.deleteAssistant),[i,o]=b.useState(Oh),[a,u]=b.useState(null),c=h=>{if(h.preventDefault(),!i.name.trim()){u({type:"error",text:"El nombre es obligatorio."});return}const p={name:i.name.trim(),notes:i.notes,active:i.active};i.id?(n(i.id,p),u({type:"success",text:"Asistente actualizado."})):(t(p),u({type:"success",text:"Asistente aadido."})),o(Oh)},f=h=>{o({id:h.id,name:h.name,notes:h.notes??"",active:h.active})};return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("header",{className:"glass-panel p-6 sm:p-10",children:[m.jsx("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold",children:"Asistentes"}),m.jsx("p",{className:"text-white/60",children:"Mantn una lista base de alumnado para registrar asistencia rpidamente durante cada sesin."})]})}),a&&m.jsx("div",{className:Be("mt-4 rounded-2xl border px-4 py-3 text-sm",a.type==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-rose-500/40 bg-rose-500/10 text-rose-200"),children:a.text})]}),m.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.1fr_1.5fr]",children:[m.jsxs("section",{className:"glass-panel p-6",children:[m.jsx("h2",{className:"text-xl font-semibold text-white",children:i.id?"Editar asistente":"Nuevo asistente"}),m.jsxs("form",{className:"mt-4 space-y-4",onSubmit:c,children:[m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Nombre"}),m.jsx("input",{type:"text",className:"input-field",value:i.name,onChange:h=>o(p=>({...p,name:h.target.value})),placeholder:"Nombre y apellidos",required:!0})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Notas"}),m.jsx("textarea",{className:"input-field min-h-[120px]",value:i.notes,onChange:h=>o(p=>({...p,notes:h.target.value})),placeholder:"Observaciones, nivel, lesiones, etc."})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("input",{id:"assistant-active",type:"checkbox",className:"h-5 w-5 rounded border border-white/20 bg-white/10 text-sky-400",checked:i.active,onChange:h=>o(p=>({...p,active:h.target.checked}))}),m.jsx("label",{htmlFor:"assistant-active",className:"text-sm text-white/70",children:"Activo (aparecer en los listados de asistencia)"})]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("button",{type:"submit",className:"btn-primary",children:i.id?"Guardar asistente":"Aadir asistente"}),i.id&&m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>o(Oh),children:"Cancelar edicin"})]})]})]}),m.jsx("section",{className:"space-y-4",children:e.length===0?m.jsx("div",{className:"glass-panel p-10 text-center text-white/50",children:"Todava no tienes asistentes guardados. Crea uno desde el formulario para empezar a marcar asistencia en sesiones."}):e.map(h=>m.jsxs("div",{className:"glass-panel flex flex-col gap-4 p-6 sm:flex-row sm:items-start sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-lg font-semibold text-white",children:h.name}),h.notes?m.jsx("p",{className:"text-sm text-white/60",children:h.notes}):null]}),m.jsxs("div",{className:"flex flex-col items-start gap-3 sm:items-end",children:[m.jsx("span",{className:Be("rounded-full border px-3 py-1 text-xs font-semibold",h.active?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-white/20 bg-white/5 text-white/60"),children:h.active?"Activo":"Inactivo"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{type:"button",className:"btn-secondary px-3 py-1 text-xs",onClick:()=>f(h),children:"Editar"}),m.jsx("button",{type:"button",className:"inline-flex items-center justify-center rounded-full border border-rose-500/40 px-3 py-1 text-xs font-semibold text-rose-300",onClick:()=>r(h.id),children:"Eliminar"})]})]})]},h.id))})]})]})}function po(e,t){return m.jsxs("div",{className:"flex items-center justify-between rounded-2xl border border-white/10 bg-white/5 px-4 py-2 text-sm text-white/70",children:[m.jsx("span",{children:e}),m.jsx("span",{className:"font-semibold text-white",children:t})]},e)}function H5(){var c,f,h,p,v,y;const e=_e(w=>w.exportBackup),t=_e(w=>w.importBackup),[n,r]=b.useState(null),[i,o]=b.useState(null),a=()=>{try{const w=e(),S=new Blob([JSON.stringify(w,null,2)],{type:"application/json"}),k=URL.createObjectURL(S),_=document.createElement("a");_.href=k,_.download=`sport-planner-backup-${new Date().toISOString().slice(0,10)}.json`,_.click(),URL.revokeObjectURL(k),r({type:"success",text:"Backup exportado correctamente."})}catch(w){console.error(w),r({type:"error",text:"No se pudo exportar el backup."})}},u=async w=>{var k;const S=(k=w.target.files)==null?void 0:k[0];if(S)try{const _=await S.text(),C=JSON.parse(_);t(C),o(C),r({type:"success",text:"Datos importados correctamente."})}catch(_){console.error(_),r({type:"error",text:"No se pudo importar el archivo. Revisa que sea un JSON vlido."})}finally{w.target.value=""}};return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("header",{className:"glass-panel p-6 sm:p-10",children:[m.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold",children:"Backups"}),m.jsx("p",{className:"text-white/60",children:"Exporta e importa toda tu informacin en JSON versionado para compartir o restaurar en cualquier momento."})]}),m.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row",children:[m.jsx("button",{type:"button",className:"btn-primary",onClick:a,children:"Descargar backup"}),m.jsxs("label",{className:"btn-secondary cursor-pointer",children:["Importar backup",m.jsx("input",{type:"file",accept:"application/json",className:"hidden",onChange:u})]})]})]}),n&&m.jsx("div",{className:`mt-4 rounded-2xl border px-4 py-3 text-sm ${n.type==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-rose-500/40 bg-rose-500/10 text-rose-200"}`,children:n.text})]}),i&&m.jsxs("section",{className:"glass-panel space-y-4 p-6",children:[m.jsx("h2",{className:"text-xl font-semibold text-white",children:"ltima importacin"}),m.jsxs("p",{className:"text-sm text-white/60",children:["Versin del backup: ",i.version]}),m.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[po("Objetivos",((c=i.objetivos)==null?void 0:c.length)??0),po("Trabajos",((f=i.trabajos)==null?void 0:f.length)??0),po("Sesiones",((h=i.sesiones)==null?void 0:h.length)??0),po("Asistentes",((p=i.asistentes)==null?void 0:p.length)??0),po("Sesiones  Trabajos",((v=i.sesiones_trabajos)==null?void 0:v.length)??0),po("Sesiones  Asistencias",((y=i.sesiones_asistencias)==null?void 0:y.length)??0)]})]}),m.jsxs("section",{className:"glass-panel space-y-3 p-6 text-sm text-white/70",children:[m.jsx("h2",{className:"text-lg font-semibold text-white",children:"Consejos"}),m.jsxs("ul",{className:"list-disc space-y-2 pl-5",children:[m.jsx("li",{children:"Guarda tus backups en un servicio en la nube para poder restaurarlos desde cualquier dispositivo."}),m.jsx("li",{children:"Antes de importar, realiza una exportacin por seguridad. La restauracin sobrescribe los datos actuales sin posibilidad de deshacer."}),m.jsx("li",{children:"Los backups mantienen los IDs, as que puedes sincronizar manualmente varias instalaciones si lo necesitas."})]})]})]})}function V5(){const{signInWithPassword:e,signUpWithPassword:t,session:n,loading:r}=Ts(),[i,o]=b.useState("login"),[a,u]=b.useState(""),[c,f]=b.useState(""),[h,p]=b.useState(""),[v,y]=b.useState(!1),[w,S]=b.useState(null),[k,_]=b.useState(null);if(!r&&n)return m.jsx(Xa,{to:"/",replace:!0});const C=async I=>{if(I.preventDefault(),S(null),_(null),!a||!c){S("Introduce tu email y contrasea.");return}if(i==="register"&&c!==h){S("Las contraseas no coinciden.");return}try{y(!0),i==="login"?await e(a,c):(await t(a,c),_("Revisa tu correo para confirmar la cuenta y vuelve a iniciar sesin."))}catch(D){const A=D instanceof Error?D.message:"No se pudo completar la operacin.";S(A)}finally{y(!1)}},j=()=>{o(I=>I==="login"?"register":"login"),S(null),_(null),f(""),p("")};return m.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-950 px-4 py-12",children:m.jsxs("div",{className:"w-full max-w-md rounded-3xl border border-white/10 bg-slate-900/80 p-8 shadow-2xl backdrop-blur",children:[m.jsxs("header",{className:"mb-8 text-center",children:[m.jsx("div",{className:"mx-auto mb-4 flex h-14 w-14 items-center justify-center rounded-full bg-gradient-to-br from-sky-500 to-indigo-500 text-xl font-bold text-white",children:"SP"}),m.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-white",children:i==="login"?"Inicia sesin":"Crea tu cuenta"}),m.jsx("p",{className:"mt-2 text-sm text-white/60",children:"Accede a tus planes desde cualquier dispositivo con Supabase."})]}),m.jsxs("form",{className:"space-y-5",onSubmit:C,children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"email",className:"block text-xs font-semibold uppercase tracking-wide text-white/50",children:"Email"}),m.jsx("input",{id:"email",type:"email",required:!0,className:"input-field w-full",value:a,onChange:I=>u(I.target.value),placeholder:"tu@correo.com",autoComplete:"email"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"password",className:"block text-xs font-semibold uppercase tracking-wide text-white/50",children:"Contrasea"}),m.jsx("input",{id:"password",type:"password",required:!0,className:"input-field w-full",value:c,onChange:I=>f(I.target.value),autoComplete:i==="login"?"current-password":"new-password"})]}),i==="register"&&m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"confirmPassword",className:"block text-xs font-semibold uppercase tracking-wide text-white/50",children:"Confirmar contrasea"}),m.jsx("input",{id:"confirmPassword",type:"password",required:!0,className:"input-field w-full",value:h,onChange:I=>p(I.target.value),autoComplete:"new-password"})]}),w&&m.jsx("div",{className:"rounded-xl border border-red-500/30 bg-red-500/10 px-4 py-3 text-sm text-red-200",children:w}),k&&m.jsx("div",{className:"rounded-xl border border-emerald-500/30 bg-emerald-500/10 px-4 py-3 text-sm text-emerald-200",children:k}),m.jsx("button",{type:"submit",className:"btn-primary w-full justify-center",disabled:v,children:v?"Procesando":i==="login"?"Entrar":"Crear cuenta"})]}),m.jsx("footer",{className:"mt-6 text-center text-sm text-white/60",children:i==="login"?m.jsx("button",{type:"button",className:"text-sky-300 hover:text-sky-200",onClick:j,children:"No tienes cuenta? Regstrate"}):m.jsx("button",{type:"button",className:"text-sky-300 hover:text-sky-200",onClick:j,children:"Ya tienes cuenta? Inicia sesin"})})]})})}We.locale("es");function q5(){const e=_e(I=>I.plans),[t,n]=Do(),r=(t.get("plan")??"").trim(),i=b.useMemo(()=>e.filter(I=>I.kind==="personal"&&I.enabled),[e]),o=b.useMemo(()=>i.length===0?void 0:i.find(D=>D.id===r)??i[0],[i,r]),a=(o==null?void 0:o.id)??"personal-kungfu";b.useEffect(()=>{if(!o||r===o.id)return;const I=new URLSearchParams(t);I.set("plan",o.id),n(I,{replace:!0})},[o,r,t,n]);const u=_e(I=>I.sessions).filter(I=>I.kind==="personal"&&(I.planId??"personal-kungfu")===a),c=_e(I=>I.works),f=_e(I=>I.objectives),h=_e(I=>I.assistants),p=_e(I=>I.addSession),v=b.useMemo(()=>[...u].sort((I,D)=>We(D.date).valueOf()-We(I.date).valueOf()),[u]),y=t.get("session")??void 0,w=y?u.find(I=>I.id===y):void 0,[S,k]=b.useState(w==null?void 0:w.id);b.useEffect(()=>{if(y&&!u.some(I=>I.id===y)){k(void 0);const I=new URLSearchParams(t);I.delete("session"),n(I,{replace:!0})}},[y,u,t,n]);const _=S?u.find(I=>I.id===S):void 0,C=I=>{k(I);const D=new URLSearchParams(t);D.set("session",I),D.set("plan",a),n(D,{replace:!0})},j=()=>{const I=We().format("YYYY-MM-DD"),D=u.find(U=>U.date===I);if(D){C(D.id);return}const A=p({date:I,kind:"personal",planId:a,title:(o==null?void 0:o.name)??"Entrenamiento personal",description:"",notes:""});C(A.id)};return m.jsxs("div",{className:"space-y-6",children:[m.jsx("header",{className:"glass-panel p-6 sm:p-10",children:m.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsxs("h1",{className:"text-3xl font-bold",children:[(o==null?void 0:o.name)??"Personal","  Sesiones"]}),m.jsx("p",{className:"text-white/60",children:"Histrico y edicin de sesiones para este plan."})]}),m.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row",children:[m.jsx(Li,{to:`/personal?plan=${encodeURIComponent(a)}`,className:"btn-secondary",children:"Volver a hoy"}),m.jsx(Li,{to:`/settings?plan=${encodeURIComponent(a)}`,className:"btn-secondary",children:"Ajustes"}),m.jsx("button",{type:"button",className:"btn-primary",onClick:j,children:"Crear/abrir hoy"})]})]})}),m.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.1fr_1.9fr]",children:[m.jsxs("section",{className:"glass-panel space-y-3 p-6",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("h2",{className:"text-lg font-semibold text-white",children:"Sesiones"}),m.jsx("span",{className:"rounded-full border border-white/10 px-3 py-1 text-xs text-white/60",children:v.length})]}),v.length===0?m.jsx("div",{className:"rounded-2xl border border-dashed border-white/15 bg-white/5 p-6 text-sm text-white/50",children:"No hay sesiones personales todava. Crea la sesin de hoy para empezar a registrar tu entrenamiento."}):m.jsx("div",{className:"space-y-2",children:v.map(I=>{const D=I.workItems.filter(A=>(A.completed??!1)||typeof A.result<"u").length;return m.jsxs("button",{type:"button",onClick:()=>C(I.id),className:Be("flex w-full flex-col gap-1 rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-left transition hover:border-white/30 hover:bg-white/10",I.id===S&&"border-sky-400/60 bg-sky-500/10 shadow shadow-sky-500/10"),children:[m.jsx("p",{className:"text-sm font-semibold text-white",children:I.title||"Sesin sin ttulo"}),m.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:We(I.date).format("ddd  D MMM YYYY")}),m.jsxs("p",{className:"text-xs text-white/60",children:[D,"/",I.workItems.length," registrados"]})]},I.id)})})]}),m.jsx("section",{className:"glass-panel p-6",children:_?m.jsx(Dm,{session:_,works:c,objectives:f,assistants:h}):m.jsx("div",{className:"rounded-2xl border border-dashed border-white/15 bg-white/5 p-10 text-center text-white/50",children:"Selecciona una sesin para verla y editarla."})})]})]})}const Dp=e=>Array.from(new Set((e??[]).map(t=>t.trim().toLowerCase()).filter(Boolean))),mS=e=>Array.from(new Set(e.split(",").map(t=>t.trim()).filter(Boolean))),gS=e=>(e??[]).join(", ");function mb(e){const t=Dp(e.byTags),n=Dp(e.byNodeTypes),r=mS(gS(e.byWorkIds)),i={};return t&&t.length>0&&(i.byTags=t),n&&n.length>0&&(i.byNodeTypes=n),r&&r.length>0&&(i.byWorkIds=r),i}function K5(e){const t={};Object.entries(e.targetsDays??{}).forEach(([r,i])=>{const o=r.trim().toLowerCase(),a=Number(i);o&&Number.isFinite(a)&&(t[o]=Math.max(1,Math.round(a)))});const n=(e.overrides??[]).map(r=>{var i;return{match:{tagsAny:Dp(((i=r.match)==null?void 0:i.tagsAny)??[])},multiplier:Math.max(.1,Number(r.multiplier)||1)}}).filter(r=>r.match.tagsAny.length>0);return{targetsDays:t,overrides:n}}function Y5(e){var C,j,I;const t=Math.max(1,Math.round(Number(e.maxItems)||12)),n=Math.max(1,Number(e.minutesBudget)||30),r={};Object.entries(e.defaultMinutesByNodeType??{}).forEach(([D,A])=>{const U=D.trim().toLowerCase(),te=Number(A);U&&Number.isFinite(te)&&(r[U]=Math.max(.25,te))});const i=D=>D==="count"||D==="minutes"||D==="both",o=D=>D==="work"||D==="note",a=D=>D==="overdue"||D==="weighted",u=D=>D==="allow_all"||D==="prefer_leaves",c=D=>{if(!Array.isArray(D))return[];const A=D.map(U=>Number(U)).filter(U=>Number.isFinite(U)).map(U=>Math.round(U)).filter(U=>U>=0&&U<=6);return Array.from(new Set(A)).sort((U,te)=>U-te)},f=(D,A)=>{const U=(D.id??"").trim()||Wt(),te=o(D.type)?D.type:"work",z=typeof D.enabled=="boolean"?D.enabled:!0,M=Number.isFinite(Number(D.order))?Number(D.order):A,$=(D.name??"").trim()||(te==="note"?"Recap":"Grupo"),ne=i(D.limitMode)?D.limitMode:"minutes",H=Number(D.maxItems),Y=Number.isFinite(H)&&Math.round(H)>0?Math.round(H):void 0,K=Number(D.minutesBudget),se=Number.isFinite(K)&&K>0?Math.max(0,K):void 0,q=a(D.strategy)?D.strategy:"overdue",F=u(D.hierarchyRule)?D.hierarchyRule:"allow_all",L=(D.include??[]).map(mb).filter(B=>Object.keys(B).length>0),N=(D.exclude??[]).map(mb).filter(B=>Object.keys(B).length>0);return{id:U,name:$,enabled:z,order:M,type:te,daysOfWeek:c(D.daysOfWeek),limitMode:ne,maxItems:Y,minutesBudget:se,strategy:q,hierarchyRule:F,include:L,exclude:N}},p=((e.groups??[]).length>0?e.groups??[]:[{id:"formas",name:"Formas",enabled:!0,order:1,type:"work",limitMode:"minutes",minutesBudget:18,strategy:"overdue",hierarchyRule:"prefer_leaves",include:[{byNodeTypes:["segment","form"]}],exclude:[]},{id:"tecnicas",name:"Tcnicas",enabled:!0,order:2,type:"work",limitMode:"minutes",minutesBudget:10,strategy:"weighted",hierarchyRule:"allow_all",include:[{byNodeTypes:["technique"]},{byTags:["roulette"]}],exclude:[]},{id:"recap",name:"Recap",enabled:!0,order:99,type:"note",limitMode:"minutes",minutesBudget:2}]).map((D,A)=>f(D,A+1)).sort((D,A)=>D.order-A.order).map((D,A)=>({...D,order:A+1})),v=p.filter(D=>(D.type??"work")!=="note"),y=p.filter(D=>D.type==="note"),w=Math.max(0,Number((C=v[0])==null?void 0:C.minutesBudget)||0),S=Math.max(0,Number((j=v[1])==null?void 0:j.minutesBudget)||0),k=Math.max(0,Number((I=y[0])==null?void 0:I.minutesBudget)||0),_=Math.max(0,w+S+k);return{limitMode:e.limitMode,maxItems:t,minutesBudget:n,template:{totalMinutes:_,focusMinutes:w,rouletteMinutes:S,recapMinutes:k},defaultMinutesByNodeType:r,focusSelectors:[],rouletteSelectors:[],groups:p}}const G5={},gb=[{label:"L",value:1},{label:"M",value:2},{label:"X",value:3},{label:"J",value:4},{label:"V",value:5},{label:"S",value:6},{label:"D",value:0}];function yb(){const e=_e(ie=>ie.kungfuCadence),t=_e(ie=>ie.kungfuTodayPlan),n=_e(ie=>ie.plans),r=_e(ie=>ie.workTaxonomy),i=_e(ie=>ie.upsertNodeType),o=_e(ie=>ie.upsertTag),a=_e(ie=>ie.addPlan),u=_e(ie=>ie.updatePlan),c=_e(ie=>ie.duplicatePlan),f=_e(ie=>ie.deletePlan),h=_e(ie=>ie.setKungfuCadence),p=_e(ie=>ie.setKungfuTodayPlan),[v,y]=Do(),w=(v.get("plan")??"").trim(),S=b.useMemo(()=>dm(n),[n]),k=b.useMemo(()=>S.length===0?void 0:S.find(Ie=>Ie.id===w)??S[0],[S,w]),_=(k==null?void 0:k.id)??"personal-kungfu",C=(k==null?void 0:k.cadence)??e,j=(k==null?void 0:k.todayPlan)??t,[I,D]=b.useState((k==null?void 0:k.name)??"Plan"),[A,U]=b.useState((k==null?void 0:k.enabled)??!0),[te,z]=b.useState(C),[M,$]=b.useState(j),[ne,H]=b.useState(null),[Y,K]=b.useState([]),[se,q]=b.useState("personal");b.useEffect(()=>{if(k){if(w!==k.id){const ie=new URLSearchParams(v);ie.set("plan",k.id),y(ie,{replace:!0})}D(k.name),U(k.enabled),k.kind==="personal"?(z(k.cadence??e),$(k.todayPlan??t)):(z(e),$(t))}},[k,w,v,y,e,t]);const F=b.useMemo(()=>{if(!k)return!1;const ie=k.name!==I||k.enabled!==A;return k.kind!=="personal"?ie:ie||JSON.stringify(C)!==JSON.stringify(te)||JSON.stringify(j)!==JSON.stringify(M)},[k,C,j,I,A,te,M]),L=ie=>{H(ie),ie&&window.setTimeout(()=>H(null),ie.type==="success"?1800:2600)},N=()=>{try{const ie={name:I.trim()||(k==null?void 0:k.name)||"Plan",enabled:A};if((k==null?void 0:k.kind)==="personal"){const Ie=K5(te),He=Y5(M);u(_,{...ie,cadence:Ie,todayPlan:He}),_==="personal-kungfu"&&(h(Ie),p(He))}else u(_,ie);L({type:"success",text:"Guardado."})}catch(ie){const Ie=ie instanceof Error?ie.message:"No se pudo guardar.";L({type:"error",text:Ie})}},B=()=>{k&&(D(k.name),U(k.enabled)),z(C),$(j),L({type:"success",text:"Cambios descartados."})},ee=b.useMemo(()=>(r.nodeTypes??[]).slice().sort((ie,Ie)=>ie.label.localeCompare(Ie.label,"en",{sensitivity:"base"})).map(ie=>({value:ie.key,label:ie.label})),[r.nodeTypes]),R=b.useMemo(()=>(r.tags??[]).slice().sort((ie,Ie)=>ie.name.localeCompare(Ie.name,"en",{sensitivity:"base"})).map(ie=>({value:ie.name,label:ie.name})),[r.tags]),be=b.useMemo(()=>new Map(gb.map(ie=>[ie.value,ie.label])),[]),he=b.useCallback((ie,Ie)=>{K(He=>{const qe=He.includes(ie),rt=typeof Ie=="boolean"?Ie:!qe;return rt===qe?He:rt?[...He,ie]:He.filter(st=>st!==ie)})},[]),ge=b.useCallback(()=>{const ie=Wt();$(Ie=>{const He=[...Ie.groups??[]].sort((st,St)=>(st.order??0)-(St.order??0)),qe={id:ie,name:"Nuevo grupo",enabled:!0,order:He.length+1,type:"work",daysOfWeek:[],limitMode:"minutes",maxItems:0,minutesBudget:5,strategy:"overdue",hierarchyRule:"allow_all",include:[],exclude:[]},rt=[...He,qe].map((st,St)=>({...st,order:St+1}));return{...Ie,groups:rt}}),he(ie,!0)},[he]),me=ie=>{const Ie=new URLSearchParams(v);Ie.set("plan",ie),y(Ie,{replace:!0})},Ce=()=>{const ie=a({kind:se,name:se==="class"?"Clases":"Personal"});me(ie.id),L({type:"success",text:"Plan creado."})},Te=()=>{if(!k)return;const ie=c(k.id);if(!ie){L({type:"error",text:"No se pudo duplicar el plan."});return}me(ie.id),L({type:"success",text:"Plan duplicado."})},je=()=>{if(!k||!window.confirm(`Eliminar el plan "${k.name}"? (No se borrarn sesiones)`))return;if(!f(k.id)){L({type:"error",text:"No se pudo eliminar. Puede ser un plan protegido o tener sesiones asociadas."});return}const He=S.find(qe=>qe.id!==k.id);He&&me(He.id),L({type:"success",text:"Plan eliminado."})};return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("header",{className:"glass-panel p-6 sm:p-10",children:[m.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold",children:"Ajustes  Planes"}),m.jsx("p",{className:"text-white/60",children:"Configura planes (personales y clases) y sus reglas."})]}),m.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-end",children:[m.jsxs("div",{className:"flex flex-wrap items-center justify-end gap-2",children:[m.jsxs("select",{className:"input-field h-10 w-[9.5rem] rounded-2xl px-3 text-sm",value:se,onChange:ie=>q(ie.target.value),title:"Tipo del nuevo plan",children:[m.jsx("option",{value:"personal",children:"Personal"}),m.jsx("option",{value:"class",children:"Clases"})]}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:Ce,children:"Nuevo"}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:Te,disabled:!k,children:"Duplicar"}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:je,disabled:!k,children:"Eliminar"})]}),m.jsxs("div",{className:"flex gap-3",children:[F?m.jsx("button",{type:"button",className:"btn-secondary",onClick:B,children:"Descartar"}):null,m.jsx("button",{type:"button",className:"btn-primary",onClick:N,disabled:!F,children:"Guardar"})]})]})]}),m.jsx("div",{className:"mt-5 flex flex-wrap gap-2",children:S.map(ie=>m.jsx("button",{type:"button",onClick:()=>me(ie.id),className:Be("rounded-full border px-4 py-2 text-sm font-semibold transition",ie.id===(k==null?void 0:k.id)?"border-sky-400/70 bg-sky-500/10 text-white":"border-white/10 bg-white/5 text-white/70 hover:border-white/30 hover:text-white"),title:ie.kind==="class"?"Plan de clases":"Plan personal",children:ie.name},ie.id))}),ne?m.jsx("div",{className:Be("mt-4 rounded-2xl border px-4 py-3 text-sm",ne.type==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-rose-500/40 bg-rose-500/10 text-rose-200"),children:ne.text}):null]}),m.jsxs("section",{className:"glass-panel space-y-5 p-6",children:[m.jsxs("div",{className:"grid gap-4 sm:grid-cols-[1fr_auto] sm:items-end",children:[m.jsxs("label",{className:"grid gap-2",children:[m.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:"Nombre del plan"}),m.jsx("input",{type:"text",className:"input-field",value:I,onChange:ie=>D(ie.target.value)})]}),m.jsxs("label",{className:"flex items-center justify-between gap-3 rounded-2xl border border-white/10 bg-white/5 px-4 py-3",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-semibold text-white/80",children:"Plan activo"}),m.jsx("p",{className:"text-xs text-white/50",children:(k==null?void 0:k.kind)==="class"?"Clases":"Personal"})]}),m.jsx("input",{type:"checkbox",className:"h-5 w-5 accent-sky-400",checked:A,onChange:ie=>U(ie.target.checked)})]})]}),(k==null?void 0:k.kind)==="class"?m.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 text-sm text-white/70",children:[m.jsx("p",{className:"font-semibold text-white/80",children:"Este plan es de tipo Clases."}),m.jsxs("p",{className:"mt-1 text-white/60",children:["Por ahora, los grupos automticos (cadencias + Plan de hoy) solo aplican a planes personales. Para clases, planifica desde ",m.jsx("span",{className:"font-semibold text-white",children:"Sesiones"})," en modo Editar."]})]}):null]}),(k==null?void 0:k.kind)!=="personal"?null:m.jsxs(m.Fragment,{children:[m.jsxs("section",{className:"glass-panel space-y-5 p-6",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-semibold text-white",children:"Plan de hoy"}),m.jsx("p",{className:"text-sm text-white/60",children:"Controla cuntos tems se sugieren y el presupuesto de minutos."})]}),m.jsxs("div",{className:"grid gap-4 sm:grid-cols-3",children:[m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Modo de lmite"}),m.jsxs("select",{className:"input-field",value:M.limitMode,onChange:ie=>$(Ie=>({...Ie,limitMode:ie.target.value})),children:[m.jsx("option",{value:"count",children:"Por cantidad"}),m.jsx("option",{value:"minutes",children:"Por minutos"}),m.jsx("option",{value:"both",children:"Cantidad y minutos"})]})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Mx. tems"}),m.jsx("input",{type:"number",min:1,className:"input-field",value:M.maxItems,onChange:ie=>$(Ie=>({...Ie,maxItems:Number(ie.target.value)}))})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Presupuesto (min)"}),m.jsx("input",{type:"number",min:1,className:"input-field",value:M.minutesBudget,onChange:ie=>$(Ie=>({...Ie,minutesBudget:Number(ie.target.value)}))})]})]}),m.jsxs("div",{className:"space-y-4 rounded-3xl border border-white/10 bg-white/5 p-5",children:[m.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-white",children:"Grupos"}),m.jsx("p",{className:"text-sm text-white/60",children:"Define bloques con reglas, das de la semana y lmites."})]}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:ge,children:"+ Grupo"})]}),m.jsx("div",{className:"space-y-4",children:[...M.groups??[]].sort((ie,Ie)=>(ie.order??0)-(Ie.order??0)).map((ie,Ie,He)=>{const qe=ie.type??"work",rt=ie.daysOfWeek??[],st=rt.length===0,St=ie.limitMode??"minutes",fn=ie.strategy??"overdue",Xt=ie.hierarchyRule??"allow_all",wt=Y.includes(ie.id),Rt=st?"Todos":rt.map(Z=>be.get(Z)??String(Z)).filter(Boolean).join(" "),Q=(()=>{const Z=Math.round(Number(ie.maxItems??0)),ue=Number(ie.minutesBudget??0),O=Number.isFinite(Z)&&Z>0?`${Math.max(0,Z)} tems`:"Sin lmite",J=Number.isFinite(ue)&&ue>0?`${Math.max(0,ue)} min`:"Sin lmite";return St==="count"?O:St==="minutes"?J:`${O}  ${J}`})(),fe=(ie.include??[]).length,ye=(ie.exclude??[]).length,Ee=Z=>{$(ue=>{const J=[...ue.groups??[]].sort((de,pe)=>(de.order??0)-(pe.order??0)).map(de=>de.id===ie.id?{...de,...Z}:de).map((de,pe)=>({...de,order:pe+1}));return{...ue,groups:J}})},G=Z=>{$(ue=>{const O=[...ue.groups??[]].sort((Pe,De)=>(Pe.order??0)-(De.order??0)),J=O.findIndex(Pe=>Pe.id===ie.id),de=J+Z;if(J<0||de<0||de>=O.length)return ue;const pe=O.slice(),Re=pe[J];return pe[J]=pe[de],pe[de]=Re,{...ue,groups:pe.map((Pe,De)=>({...Pe,order:De+1}))}})},P=()=>{$(Z=>{const O=[...Z.groups??[]].sort((J,de)=>(J.order??0)-(de.order??0)).filter(J=>J.id!==ie.id).map((J,de)=>({...J,order:de+1}));return{...Z,groups:O.length>0?O:Z.groups}}),K(Z=>Z.filter(ue=>ue!==ie.id))},V=()=>{const Z=Wt();$(ue=>{const O=[...ue.groups??[]].sort((Pe,De)=>(Pe.order??0)-(De.order??0)),J=O.findIndex(Pe=>Pe.id===ie.id);if(J<0)return ue;const de=(ie.name??"").trim()||"Grupo",pe={...ie,id:Z,name:`${de} (copia)`},Re=O.slice();return Re.splice(J+1,0,pe),{...ue,groups:Re.map((Pe,De)=>({...Pe,order:De+1}))}}),he(Z,!0)},le=(Z,ue)=>{const O=ie[Z]??[];Ee({[Z]:ue(O)})};return m.jsxs("div",{className:"rounded-3xl border border-white/10 bg-slate-950/40",children:[m.jsxs("div",{className:"flex flex-col gap-3 p-4 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{className:"flex flex-1 flex-wrap items-center gap-3",children:[m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>he(ie.id),"aria-expanded":wt,title:wt?"Colapsar":"Expandir",children:wt?"":""}),m.jsxs("div",{className:"min-w-[240px] flex-1",children:[m.jsx("p",{className:"text-sm font-semibold text-white",children:(ie.name??"").trim()||"Grupo"}),m.jsxs("p",{className:"text-xs text-white/50",children:[qe==="note"?"Nota":"Trabajos","  ",Rt,"  ",Q,qe==="work"?`  ${fn==="weighted"?"Ruleta":"Cadencia"}`:"",qe==="work"?`  Incluye:${fe||""} Excluye:${ye||""}`:""]})]}),m.jsx("span",{className:Be("rounded-full border px-3 py-1 text-xs font-semibold",ie.enabled?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-white/15 bg-white/5 text-white/60"),children:ie.enabled?"Enabled":"Disabled"})]}),m.jsxs("div",{className:"flex items-center justify-end gap-2",children:[m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>G(-1),disabled:Ie===0,title:"Subir",children:""}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>G(1),disabled:Ie===He.length-1,title:"Bajar",children:""}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:V,title:"Duplicar",children:"Duplicar"}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:P,disabled:He.length<=1,children:"Eliminar"})]})]}),wt?m.jsx("div",{className:"border-t border-white/10 p-5",children:m.jsx("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:m.jsxs("div",{className:"flex flex-1 flex-col gap-3",children:[m.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[m.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-white/70",children:[m.jsx("input",{type:"checkbox",className:"accent-sky-400",checked:ie.enabled,onChange:Z=>Ee({enabled:Z.target.checked})}),"Enabled"]}),m.jsx("input",{type:"text",className:"input-field flex-1",value:ie.name,onChange:Z=>Ee({name:Z.target.value}),placeholder:"Nombre del grupo"}),m.jsxs("select",{className:"input-field w-36",value:qe,onChange:Z=>Ee({type:Z.target.value}),children:[m.jsx("option",{value:"work",children:"Trabajos"}),m.jsx("option",{value:"note",children:"Nota"})]})]}),m.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:"Das"}),m.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[m.jsx("button",{type:"button",className:Be("rounded-full border px-3 py-1 text-xs font-semibold transition",st?"border-sky-500/40 bg-sky-500/10 text-sky-100":"border-white/15 bg-white/5 text-white/70 hover:border-white/30 hover:text-white"),onClick:()=>Ee({daysOfWeek:[]}),title:"Vaco = todos los das",children:"Todos"}),gb.map(Z=>{const ue=st?!0:rt.includes(Z.value);return m.jsx("button",{type:"button",className:Be("h-8 w-8 rounded-full border text-xs font-semibold transition",ue?"border-emerald-500/40 bg-emerald-500/10 text-emerald-100":"border-white/15 bg-white/5 text-white/70 hover:border-white/30 hover:text-white"),onClick:()=>{const O=st?[Z.value]:rt.includes(Z.value)?rt.filter(J=>J!==Z.value):[...rt,Z.value];Ee({daysOfWeek:O.sort((J,de)=>J-de)})},title:ue?"Activo":"Inactivo",children:Z.label},Z.value)})]}),m.jsx("p",{className:"text-xs text-white/50",children:"Si eliges das especficos, solo aparecer esos das."})]}),m.jsxs("div",{className:"grid gap-3 sm:grid-cols-3",children:[m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:"Lmite"}),m.jsxs("select",{className:"input-field",value:St,onChange:Z=>Ee({limitMode:Z.target.value}),children:[m.jsx("option",{value:"count",children:"Cantidad"}),m.jsx("option",{value:"minutes",children:"Minutos"}),m.jsx("option",{value:"both",children:"Ambos"})]})]}),m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:"Mx tems"}),m.jsx("input",{type:"number",min:0,className:"input-field",value:ie.maxItems??0,onChange:Z=>{const ue=Number(Z.target.value),O={maxItems:ue};if(Number.isFinite(ue)&&ue>0){const J=Number(ie.minutesBudget??0);St==="minutes"&&(O.limitMode=J>0?"both":"count")}Ee(O)}})]}),m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:"Mx min"}),m.jsx("input",{type:"number",min:0,className:"input-field",value:ie.minutesBudget??0,onChange:Z=>{const ue=Number(Z.target.value),O={minutesBudget:ue};if(Number.isFinite(ue)&&ue>0){const J=Number(ie.maxItems??0);St==="count"&&(O.limitMode=J>0?"both":"minutes")}Ee(O)}})]})]})]}),qe==="work"?m.jsxs("div",{className:"mt-2 grid gap-4 lg:grid-cols-2",children:[m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:"Estrategia"}),m.jsxs("select",{className:"input-field",value:fn,onChange:Z=>Ee({strategy:Z.target.value}),children:[m.jsx("option",{value:"overdue",children:"Vencido (cadencia)"}),m.jsx("option",{value:"weighted",children:"Ponderado (ruleta)"})]})]}),m.jsxs("label",{className:"flex items-center gap-2 text-sm text-white/70",children:[m.jsx("input",{type:"checkbox",className:"accent-sky-400",checked:Xt==="prefer_leaves",onChange:Z=>Ee({hierarchyRule:Z.target.checked?"prefer_leaves":"allow_all"})}),"Preferir hijos (evita padres cuando existan)"]})]}):null,qe==="work"?m.jsx("div",{className:"mt-4 grid gap-5 lg:grid-cols-2",children:["include","exclude"].map(Z=>m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("p",{className:"text-sm font-semibold text-white/80",children:Z==="include"?"Include (OR)":"Exclude (OR)"}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>le(Z,ue=>[...ue,{...G5}]),children:"+ Regla"})]}),(ie[Z]??[]).length===0?m.jsx("p",{className:"text-xs text-white/50",children:Z==="include"?"Vaco = incluye todo (se aplican excludes).":"Vaco = no excluye nada."}):null,(ie[Z]??[]).map((ue,O)=>m.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:["Regla ",O+1]}),m.jsx("button",{type:"button",className:"text-xs font-semibold text-rose-200 hover:text-rose-100",onClick:()=>le(Z,J=>J.filter((de,pe)=>pe!==O)),children:"Quitar"})]}),m.jsxs("div",{className:"mt-3 grid gap-3",children:[m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs text-white/50",children:"Tags (AND)"}),m.jsx(Ga,{options:R,value:ue.byTags??[],onChange:J=>le(Z,de=>{const pe=[...de];return pe[O]={...pe[O],byTags:J},pe}),placeholder:"Search tags",allowCreate:!0,onCreate:J=>{const de=o(J);return de?{createdValue:de,createdLabel:de}:null}})]}),m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs text-white/50",children:"Node types"}),m.jsx(Ga,{options:ee,value:ue.byNodeTypes??[],onChange:J=>le(Z,de=>{const pe=[...de];return pe[O]={...pe[O],byNodeTypes:J},pe}),placeholder:"Search node types",allowCreate:!0,onCreate:J=>{const de=i(J);return de?{createdValue:de,createdLabel:J.trim()}:null}})]}),m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs text-white/50",children:"Work IDs"}),m.jsx("input",{type:"text",className:"input-field",value:gS(ue.byWorkIds),placeholder:"id1, id2",onChange:J=>{const de=mS(J.target.value);le(Z,pe=>{const Re=[...pe];return Re[O]={...Re[O],byWorkIds:de},Re})}})]})]})]},`${Z}-${ie.id}-${O}`))]},`${ie.id}-${Z}`))}):null]})})}):null]},ie.id)})})]}),m.jsxs("details",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[m.jsx("summary",{className:"cursor-pointer text-sm font-semibold text-white/80",children:"Estimacin de minutos por tipo"}),m.jsx("div",{className:"mt-3 grid gap-3 sm:grid-cols-2",children:Object.entries(M.defaultMinutesByNodeType).sort(([ie],[Ie])=>ie.localeCompare(Ie,"es",{sensitivity:"base"})).map(([ie,Ie])=>m.jsxs("label",{className:"grid gap-2",children:[m.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:ie}),m.jsx("input",{type:"number",min:.25,step:.25,className:"input-field",value:Ie,onChange:He=>$(qe=>({...qe,defaultMinutesByNodeType:{...qe.defaultMinutesByNodeType,[ie]:Number(He.target.value)}}))})]},ie))})]})]}),m.jsxs("section",{className:"glass-panel space-y-5 p-6",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-semibold text-white",children:"Cadencias"}),m.jsx("p",{className:"text-sm text-white/60",children:"Objetivo de das por tipo, con overrides por tags."})]}),m.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:Array.from(new Set([...Object.keys(te.targetsDays??{}),...(r.nodeTypes??[]).map(ie=>ie.key)])).map(ie=>ie.trim().toLowerCase()).filter(Boolean).sort((ie,Ie)=>ie.localeCompare(Ie,"en",{sensitivity:"base"})).map(ie=>{var qe;const Ie=((qe=(r.nodeTypes??[]).find(rt=>rt.key===ie))==null?void 0:qe.label)??ie,He=(te.targetsDays??{})[ie]??(te.targetsDays??{}).work??7;return m.jsxs("label",{className:"grid gap-2",children:[m.jsxs("span",{className:"text-xs uppercase tracking-wide text-white/40",children:[Ie," ",m.jsxs("span",{className:"text-white/30",children:["(",ie,")"]})]}),m.jsx("input",{type:"number",min:1,className:"input-field",value:He,onChange:rt=>z(st=>({...st,targetsDays:{...st.targetsDays,[ie]:Number(rt.target.value)}}))})]},ie)})}),m.jsxs("details",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[m.jsx("summary",{className:"cursor-pointer text-sm font-semibold text-white/80",children:"Overrides"}),m.jsxs("div",{className:"mt-3 space-y-3",children:[(te.overrides??[]).map((ie,Ie)=>m.jsxs("div",{className:"rounded-2xl border border-white/10 bg-slate-950/40 p-4",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:["Override ",Ie+1]}),m.jsx("button",{type:"button",className:"text-xs font-semibold text-rose-200 hover:text-rose-100",onClick:()=>z(He=>({...He,overrides:(He.overrides??[]).filter((qe,rt)=>rt!==Ie)})),children:"Quitar"})]}),m.jsxs("div",{className:"mt-3 grid gap-3 sm:grid-cols-2",children:[m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs text-white/50",children:"Tags (ANY)"}),m.jsx(Ga,{options:R,value:ie.match.tagsAny??[],onChange:He=>z(qe=>{const rt=[...qe.overrides??[]];return rt[Ie]={...ie,match:{tagsAny:He}},{...qe,overrides:rt}}),placeholder:"Search tags",allowCreate:!0,onCreate:He=>{const qe=o(He);return qe?{createdValue:qe,createdLabel:qe}:null}})]}),m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs text-white/50",children:"Multiplier"}),m.jsx("input",{type:"number",min:.1,step:.1,className:"input-field",value:ie.multiplier,onChange:He=>{const qe=Number(He.target.value);z(rt=>{const st=[...rt.overrides??[]];return st[Ie]={...ie,multiplier:qe},{...rt,overrides:st}})}})]})]})]},`override-${Ie}`)),m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>z(ie=>({...ie,overrides:[...ie.overrides??[],{match:{tagsAny:[]},multiplier:1}]})),children:"+ Aadir override"})]})]})]})]})]})}const vb=[{to:"/",label:"Sesiones"},{to:"/catalog",label:"Trabajos"},{to:"/settings",label:"Ajustes"},{to:"/objectives",label:"Objetivos"},{to:"/assistants",label:"Asistentes"},{to:"/backups",label:"Backups"}];function J5(){const[e,t]=b.useState(!1),[n,r]=b.useState(!1),{user:i,signOut:o}=Ts(),a=async()=>{try{r(!0),await o()}catch(u){console.error("No se pudo cerrar sesin",u)}finally{r(!1),t(!1)}};return m.jsxs("header",{className:"sticky top-0 z-50 border-b border-white/10 bg-slate-950/80 backdrop-blur-xl",children:[m.jsxs("div",{className:"mx-auto flex max-w-6xl items-center justify-between px-3 py-3 sm:px-4 sm:py-4",children:[m.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[m.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-gradient-to-br from-sky-500 to-indigo-500 text-base font-bold sm:h-10 sm:w-10 sm:text-lg",children:"SP"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-display text-lg font-semibold sm:text-xl",children:"Sport Planner"}),m.jsx("p",{className:"text-[11px] text-white/50 sm:text-xs",children:"Planifica sesiones increbles"})]})]}),m.jsxs("div",{className:"hidden items-center gap-4 md:flex",children:[m.jsx("nav",{className:"flex items-center gap-2",children:vb.map(u=>m.jsx(Av,{to:u.to,className:({isActive:c})=>`rounded-full px-4 py-2 text-sm font-medium transition ${c?"bg-white text-slate-900 shadow-lg shadow-sky-400/30":"text-white/70 hover:text-white hover:bg-white/10"}`,children:u.label},u.to))}),m.jsxs("div",{className:"flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-4 py-2",children:[m.jsxs("div",{className:"text-right",children:[m.jsx("p",{className:"text-xs text-white/50",children:"Sesin iniciada"}),m.jsx("p",{className:"text-sm font-semibold text-white",children:(i==null?void 0:i.email)??"Cuenta"})]}),m.jsx("button",{type:"button",onClick:()=>{a()},disabled:n,className:"inline-flex items-center rounded-full border border-white/20 px-3 py-1 text-xs font-semibold text-white/80 transition hover:bg-white/10 disabled:opacity-60",children:n?"Saliendo":"Cerrar sesin"})]})]}),m.jsx("button",{type:"button",className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-white/20 text-white/80 md:hidden",onClick:()=>t(!0),"aria-label":"Abrir navegacin",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"h-6 w-6",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 6h16M4 12h16M4 18h16"})})})]}),m.jsxs(xx,{open:e,onClose:t,className:"md:hidden",children:[m.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm","aria-hidden":"true"}),m.jsxs(xx.Panel,{className:"fixed inset-y-4 right-3 flex w-[17rem] flex-col rounded-3xl border border-white/10 bg-slate-900/95 p-6 shadow-2xl",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("p",{className:"text-lg font-semibold text-white",children:"Navegacin"}),m.jsx("button",{type:"button",className:"inline-flex h-9 w-9 items-center justify-center rounded-full border border-white/20 text-white/80",onClick:()=>t(!1),"aria-label":"Cerrar navegacin",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"h-5 w-5",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]}),m.jsx("div",{className:"mt-6 flex flex-col gap-2",children:vb.map(u=>m.jsx(Av,{to:u.to,className:({isActive:c})=>`rounded-2xl px-4 py-3 text-sm font-semibold transition ${c?"bg-white text-slate-900 shadow shadow-sky-400/40":"text-white/80 hover:bg-white/10"}`,onClick:()=>t(!1),children:u.label},u.to))}),m.jsxs("div",{className:"mt-auto rounded-2xl border border-white/10 bg-white/5 p-4",children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-white/40",children:"Sesin iniciada"}),m.jsx("p",{className:"mt-1 text-sm font-semibold text-white",children:(i==null?void 0:i.email)??"Cuenta"}),m.jsx("button",{type:"button",onClick:()=>{a()},disabled:n,className:"mt-3 w-full rounded-full border border-white/20 px-3 py-2 text-sm font-semibold text-white/80 transition hover:bg-white/10 disabled:opacity-60",children:n?"Saliendo":"Cerrar sesin"})]})]})]})]})}function Q5(){return dM(),fM(),m.jsxs("div",{className:"min-h-screen pb-16",children:[m.jsx(J5,{}),m.jsx("main",{className:"mx-auto w-full max-w-6xl px-3 py-5 sm:px-6 sm:py-10",children:m.jsx(Tb,{})})]})}function X5(){return m.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-950",children:m.jsxs("div",{className:"flex flex-col items-center gap-4",children:[m.jsx("div",{className:"h-12 w-12 animate-spin rounded-full border-2 border-white/20 border-t-sky-400"}),m.jsx("p",{className:"text-sm font-medium text-white/60",children:"Cargando Sport Planner"})]})})}function Z5(){const{session:e,loading:t}=Ts(),n=ri();return t?m.jsx(X5,{}):e?m.jsx(Tb,{}):m.jsx(Xa,{to:"/login",replace:!0,state:{from:n}})}function eB(){return m.jsx(yC,{children:m.jsxs(lC,{children:[m.jsx(bn,{path:"/login",element:m.jsx(V5,{})}),m.jsx(bn,{element:m.jsx(Z5,{}),children:m.jsxs(bn,{element:m.jsx(Q5,{}),children:[m.jsx(bn,{index:!0,element:m.jsx(A5,{})}),m.jsx(bn,{path:"personal",element:m.jsx(Xa,{to:"/?plan=personal-kungfu",replace:!0})}),m.jsx(bn,{path:"personal/sessions",element:m.jsx(q5,{})}),m.jsx(bn,{path:"personal/settings",element:m.jsx(yb,{})}),m.jsx(bn,{path:"settings",element:m.jsx(yb,{})}),m.jsx(bn,{path:"plan",element:m.jsx(M5,{})}),m.jsx(bn,{path:"catalog",element:m.jsx(B5,{})}),m.jsx(bn,{path:"catalog/taxonomy",element:m.jsx(z5,{})}),m.jsx(bn,{path:"objectives",element:m.jsx(U5,{})}),m.jsx(bn,{path:"assistants",element:m.jsx(W5,{})}),m.jsx(bn,{path:"backups",element:m.jsx(H5,{})})]})}),m.jsx(bn,{path:"*",element:m.jsx(Xa,{to:"/",replace:!0})})]})})}function tB({children:e}){const[t,n]=b.useState(null),[r,i]=b.useState(null),[o,a]=b.useState(!0);b.useEffect(()=>{let c=!0;(async()=>{a(!0);const{data:{session:p}}=await Jt.auth.getSession();c&&(n(p),i((p==null?void 0:p.user)??null),a(!1))})();const{data:{subscription:h}}=Jt.auth.onAuthStateChange((p,v)=>{c&&(n(v),i((v==null?void 0:v.user)??null),a(!1))});return()=>{c=!1,h.unsubscribe()}},[]);const u=b.useMemo(()=>({session:t,user:r,loading:o,signInWithPassword:async(c,f)=>{const{error:h}=await Jt.auth.signInWithPassword({email:c,password:f});if(h)throw h},signUpWithPassword:async(c,f)=>{const p=typeof window<"u"?`${window.location.origin}/sport-planner/`:void 0,{error:v}=await Jt.auth.signUp({email:c,password:f,options:{emailRedirectTo:p}});if(v)throw v},signOut:async()=>{const{error:c}=await Jt.auth.signOut();if(c)throw c}}),[o,t,r]);return m.jsx(ek.Provider,{value:u,children:e})}_e.getState().hydrate();y_.createRoot(document.getElementById("root")).render(m.jsx(Ae.StrictMode,{children:m.jsx(tB,{children:m.jsx(eB,{})})}));
