function o_(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Ao(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function a_(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var Of={exports:{}},_a={},Df={exports:{}},ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gv;function l_(){if(gv)return ct;gv=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),a=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function v(F){return F===null||typeof F!="object"?null:(F=p&&F[p]||F["@@iterator"],typeof F=="function"?F:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,S={};function k(F,ee,A){this.props=F,this.context=ee,this.refs=S,this.updater=A||y}k.prototype.isReactComponent={},k.prototype.setState=function(F,ee){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,ee,"setState")},k.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function _(){}_.prototype=k.prototype;function C(F,ee,A){this.props=F,this.context=ee,this.refs=S,this.updater=A||y}var j=C.prototype=new _;j.constructor=C,w(j,k.prototype),j.isPureReactComponent=!0;var I=Array.isArray,O=Object.prototype.hasOwnProperty,R={current:null},U={key:!0,ref:!0,__self:!0,__source:!0};function re(F,ee,A){var be,he={},ge=null,me=null;if(ee!=null)for(be in ee.ref!==void 0&&(me=ee.ref),ee.key!==void 0&&(ge=""+ee.key),ee)O.call(ee,be)&&!U.hasOwnProperty(be)&&(he[be]=ee[be]);var je=arguments.length-2;if(je===1)he.children=A;else if(1<je){for(var Ne=Array(je),Ie=0;Ie<je;Ie++)Ne[Ie]=arguments[Ie+2];he.children=Ne}if(F&&F.defaultProps)for(be in je=F.defaultProps,je)he[be]===void 0&&(he[be]=je[be]);return{$$typeof:e,type:F,key:ge,ref:me,props:he,_owner:R.current}}function z(F,ee){return{$$typeof:e,type:F.type,key:ee,ref:F.ref,props:F.props,_owner:F._owner}}function M(F){return typeof F=="object"&&F!==null&&F.$$typeof===e}function L(F){var ee={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(A){return ee[A]})}var se=/\/+/g;function q(F,ee){return typeof F=="object"&&F!==null&&F.key!=null?L(""+F.key):ee.toString(36)}function H(F,ee,A,be,he){var ge=typeof F;(ge==="undefined"||ge==="boolean")&&(F=null);var me=!1;if(F===null)me=!0;else switch(ge){case"string":case"number":me=!0;break;case"object":switch(F.$$typeof){case e:case t:me=!0}}if(me)return me=F,he=he(me),F=be===""?"."+q(me,0):be,I(he)?(A="",F!=null&&(A=F.replace(se,"$&/")+"/"),H(he,ee,A,"",function(Ie){return Ie})):he!=null&&(M(he)&&(he=z(he,A+(!he.key||me&&me.key===he.key?"":(""+he.key).replace(se,"$&/")+"/")+F)),ee.push(he)),1;if(me=0,be=be===""?".":be+":",I(F))for(var je=0;je<F.length;je++){ge=F[je];var Ne=be+q(ge,je);me+=H(ge,ee,A,Ne,he)}else if(Ne=v(F),typeof Ne=="function")for(F=Ne.call(F),je=0;!(ge=F.next()).done;)ge=ge.value,Ne=be+q(ge,je++),me+=H(ge,ee,A,Ne,he);else if(ge==="object")throw ee=String(F),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.");return me}function V(F,ee,A){if(F==null)return F;var be=[],he=0;return H(F,be,"","",function(ge){return ee.call(A,ge,he++)}),be}function te(F){if(F._status===-1){var ee=F._result;ee=ee(),ee.then(function(A){(F._status===0||F._status===-1)&&(F._status=1,F._result=A)},function(A){(F._status===0||F._status===-1)&&(F._status=2,F._result=A)}),F._status===-1&&(F._status=0,F._result=ee)}if(F._status===1)return F._result.default;throw F._result}var Z={current:null},B={transition:null},$={ReactCurrentDispatcher:Z,ReactCurrentBatchConfig:B,ReactCurrentOwner:R};function N(){throw Error("act(...) is not supported in production builds of React.")}return ct.Children={map:V,forEach:function(F,ee,A){V(F,function(){ee.apply(this,arguments)},A)},count:function(F){var ee=0;return V(F,function(){ee++}),ee},toArray:function(F){return V(F,function(ee){return ee})||[]},only:function(F){if(!M(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},ct.Component=k,ct.Fragment=n,ct.Profiler=i,ct.PureComponent=C,ct.StrictMode=r,ct.Suspense=c,ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$,ct.act=N,ct.cloneElement=function(F,ee,A){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var be=w({},F.props),he=F.key,ge=F.ref,me=F._owner;if(ee!=null){if(ee.ref!==void 0&&(ge=ee.ref,me=R.current),ee.key!==void 0&&(he=""+ee.key),F.type&&F.type.defaultProps)var je=F.type.defaultProps;for(Ne in ee)O.call(ee,Ne)&&!U.hasOwnProperty(Ne)&&(be[Ne]=ee[Ne]===void 0&&je!==void 0?je[Ne]:ee[Ne])}var Ne=arguments.length-2;if(Ne===1)be.children=A;else if(1<Ne){je=Array(Ne);for(var Ie=0;Ie<Ne;Ie++)je[Ie]=arguments[Ie+2];be.children=je}return{$$typeof:e,type:F.type,key:he,ref:ge,props:be,_owner:me}},ct.createContext=function(F){return F={$$typeof:a,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:o,_context:F},F.Consumer=F},ct.createElement=re,ct.createFactory=function(F){var ee=re.bind(null,F);return ee.type=F,ee},ct.createRef=function(){return{current:null}},ct.forwardRef=function(F){return{$$typeof:u,render:F}},ct.isValidElement=M,ct.lazy=function(F){return{$$typeof:h,_payload:{_status:-1,_result:F},_init:te}},ct.memo=function(F,ee){return{$$typeof:f,type:F,compare:ee===void 0?null:ee}},ct.startTransition=function(F){var ee=B.transition;B.transition={};try{F()}finally{B.transition=ee}},ct.unstable_act=N,ct.useCallback=function(F,ee){return Z.current.useCallback(F,ee)},ct.useContext=function(F){return Z.current.useContext(F)},ct.useDebugValue=function(){},ct.useDeferredValue=function(F){return Z.current.useDeferredValue(F)},ct.useEffect=function(F,ee){return Z.current.useEffect(F,ee)},ct.useId=function(){return Z.current.useId()},ct.useImperativeHandle=function(F,ee,A){return Z.current.useImperativeHandle(F,ee,A)},ct.useInsertionEffect=function(F,ee){return Z.current.useInsertionEffect(F,ee)},ct.useLayoutEffect=function(F,ee){return Z.current.useLayoutEffect(F,ee)},ct.useMemo=function(F,ee){return Z.current.useMemo(F,ee)},ct.useReducer=function(F,ee,A){return Z.current.useReducer(F,ee,A)},ct.useRef=function(F){return Z.current.useRef(F)},ct.useState=function(F){return Z.current.useState(F)},ct.useSyncExternalStore=function(F,ee,A){return Z.current.useSyncExternalStore(F,ee,A)},ct.useTransition=function(){return Z.current.useTransition()},ct.version="18.3.1",ct}var yv;function _c(){return yv||(yv=1,Df.exports=l_()),Df.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vv;function u_(){if(vv)return _a;vv=1;var e=_c(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function a(u,c,f){var h,p={},v=null,y=null;f!==void 0&&(v=""+f),c.key!==void 0&&(v=""+c.key),c.ref!==void 0&&(y=c.ref);for(h in c)r.call(c,h)&&!o.hasOwnProperty(h)&&(p[h]=c[h]);if(u&&u.defaultProps)for(h in c=u.defaultProps,c)p[h]===void 0&&(p[h]=c[h]);return{$$typeof:t,type:u,key:v,ref:y,props:p,_owner:i.current}}return _a.Fragment=n,_a.jsx=a,_a.jsxs=a,_a}var xv;function c_(){return xv||(xv=1,Of.exports=u_()),Of.exports}var m=c_(),b=_c();const Ae=Ao(b),ec=o_({__proto__:null,default:Ae},[b]);var Cu={},Lf={exports:{}},An={},$f={exports:{}},Ff={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bv;function d_(){return bv||(bv=1,(function(e){function t(B,$){var N=B.length;B.push($);e:for(;0<N;){var F=N-1>>>1,ee=B[F];if(0<i(ee,$))B[F]=$,B[N]=ee,N=F;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var $=B[0],N=B.pop();if(N!==$){B[0]=N;e:for(var F=0,ee=B.length,A=ee>>>1;F<A;){var be=2*(F+1)-1,he=B[be],ge=be+1,me=B[ge];if(0>i(he,N))ge<ee&&0>i(me,he)?(B[F]=me,B[ge]=N,F=ge):(B[F]=he,B[be]=N,F=be);else if(ge<ee&&0>i(me,N))B[F]=me,B[ge]=N,F=ge;else break e}}return $}function i(B,$){var N=B.sortIndex-$.sortIndex;return N!==0?N:B.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();e.unstable_now=function(){return a.now()-u}}var c=[],f=[],h=1,p=null,v=3,y=!1,w=!1,S=!1,k=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(B){for(var $=n(f);$!==null;){if($.callback===null)r(f);else if($.startTime<=B)r(f),$.sortIndex=$.expirationTime,t(c,$);else break;$=n(f)}}function I(B){if(S=!1,j(B),!w)if(n(c)!==null)w=!0,te(O);else{var $=n(f);$!==null&&Z(I,$.startTime-B)}}function O(B,$){w=!1,S&&(S=!1,_(re),re=-1),y=!0;var N=v;try{for(j($),p=n(c);p!==null&&(!(p.expirationTime>$)||B&&!L());){var F=p.callback;if(typeof F=="function"){p.callback=null,v=p.priorityLevel;var ee=F(p.expirationTime<=$);$=e.unstable_now(),typeof ee=="function"?p.callback=ee:p===n(c)&&r(c),j($)}else r(c);p=n(c)}if(p!==null)var A=!0;else{var be=n(f);be!==null&&Z(I,be.startTime-$),A=!1}return A}finally{p=null,v=N,y=!1}}var R=!1,U=null,re=-1,z=5,M=-1;function L(){return!(e.unstable_now()-M<z)}function se(){if(U!==null){var B=e.unstable_now();M=B;var $=!0;try{$=U(!0,B)}finally{$?q():(R=!1,U=null)}}else R=!1}var q;if(typeof C=="function")q=function(){C(se)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,V=H.port2;H.port1.onmessage=se,q=function(){V.postMessage(null)}}else q=function(){k(se,0)};function te(B){U=B,R||(R=!0,q())}function Z(B,$){re=k(function(){B(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_continueExecution=function(){w||y||(w=!0,te(O))},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(B){switch(v){case 1:case 2:case 3:var $=3;break;default:$=v}var N=v;v=$;try{return B()}finally{v=N}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(B,$){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var N=v;v=B;try{return $()}finally{v=N}},e.unstable_scheduleCallback=function(B,$,N){var F=e.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?F+N:F):N=F,B){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=N+ee,B={id:h++,callback:$,priorityLevel:B,startTime:N,expirationTime:ee,sortIndex:-1},N>F?(B.sortIndex=N,t(f,B),n(c)===null&&B===n(f)&&(S?(_(re),re=-1):S=!0,Z(I,N-F))):(B.sortIndex=ee,t(c,B),w||y||(w=!0,te(O))),B},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(B){var $=v;return function(){var N=v;v=$;try{return B.apply(this,arguments)}finally{v=N}}}})(Ff)),Ff}var wv;function f_(){return wv||(wv=1,$f.exports=d_()),$f.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kv;function h_(){if(kv)return An;kv=1;var e=_c(),t=f_();function n(s){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+s,d=1;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(s,l){a(s,l),a(s+"Capture",l)}function a(s,l){for(i[s]=l,s=0;s<l.length;s++)r.add(l[s])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function v(s){return c.call(p,s)?!0:c.call(h,s)?!1:f.test(s)?p[s]=!0:(h[s]=!0,!1)}function y(s,l,d,g){if(d!==null&&d.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return g?!1:d!==null?!d.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function w(s,l,d,g){if(l===null||typeof l>"u"||y(s,l,d,g))return!0;if(g)return!1;if(d!==null)switch(d.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function S(s,l,d,g,x,E,T){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=g,this.attributeNamespace=x,this.mustUseProperty=d,this.propertyName=s,this.type=l,this.sanitizeURL=E,this.removeEmptyString=T}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){k[s]=new S(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var l=s[0];k[l]=new S(l,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){k[s]=new S(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){k[s]=new S(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){k[s]=new S(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){k[s]=new S(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){k[s]=new S(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){k[s]=new S(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){k[s]=new S(s,5,!1,s.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function C(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var l=s.replace(_,C);k[l]=new S(l,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var l=s.replace(_,C);k[l]=new S(l,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var l=s.replace(_,C);k[l]=new S(l,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){k[s]=new S(s,1,!1,s.toLowerCase(),null,!1,!1)}),k.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){k[s]=new S(s,1,!1,s.toLowerCase(),null,!0,!0)});function j(s,l,d,g){var x=k.hasOwnProperty(l)?k[l]:null;(x!==null?x.type!==0:g||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(w(l,d,x,g)&&(d=null),g||x===null?v(l)&&(d===null?s.removeAttribute(l):s.setAttribute(l,""+d)):x.mustUseProperty?s[x.propertyName]=d===null?x.type===3?!1:"":d:(l=x.attributeName,g=x.attributeNamespace,d===null?s.removeAttribute(l):(x=x.type,d=x===3||x===4&&d===!0?"":""+d,g?s.setAttributeNS(g,l,d):s.setAttribute(l,d))))}var I=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,O=Symbol.for("react.element"),R=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),re=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),L=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),te=Symbol.for("react.lazy"),Z=Symbol.for("react.offscreen"),B=Symbol.iterator;function $(s){return s===null||typeof s!="object"?null:(s=B&&s[B]||s["@@iterator"],typeof s=="function"?s:null)}var N=Object.assign,F;function ee(s){if(F===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);F=l&&l[1]||""}return`
`+F+s}var A=!1;function be(s,l){if(!s||A)return"";A=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(ce){var g=ce}Reflect.construct(s,[],l)}else{try{l.call()}catch(ce){g=ce}s.call(l.prototype)}else{try{throw Error()}catch(ce){g=ce}s()}}catch(ce){if(ce&&g&&typeof ce.stack=="string"){for(var x=ce.stack.split(`
`),E=g.stack.split(`
`),T=x.length-1,W=E.length-1;1<=T&&0<=W&&x[T]!==E[W];)W--;for(;1<=T&&0<=W;T--,W--)if(x[T]!==E[W]){if(T!==1||W!==1)do if(T--,W--,0>W||x[T]!==E[W]){var Q=`
`+x[T].replace(" at new "," at ");return s.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",s.displayName)),Q}while(1<=T&&0<=W);break}}}finally{A=!1,Error.prepareStackTrace=d}return(s=s?s.displayName||s.name:"")?ee(s):""}function he(s){switch(s.tag){case 5:return ee(s.type);case 16:return ee("Lazy");case 13:return ee("Suspense");case 19:return ee("SuspenseList");case 0:case 2:case 15:return s=be(s.type,!1),s;case 11:return s=be(s.type.render,!1),s;case 1:return s=be(s.type,!0),s;default:return""}}function ge(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case U:return"Fragment";case R:return"Portal";case z:return"Profiler";case re:return"StrictMode";case q:return"Suspense";case H:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case L:return(s.displayName||"Context")+".Consumer";case M:return(s._context.displayName||"Context")+".Provider";case se:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case V:return l=s.displayName||null,l!==null?l:ge(s.type)||"Memo";case te:l=s._payload,s=s._init;try{return ge(s(l))}catch{}}return null}function me(s){var l=s.type;switch(s.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=l.render,s=s.displayName||s.name||"",l.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ge(l);case 8:return l===re?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function je(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ne(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Ie(s){var l=Ne(s)?"checked":"value",d=Object.getOwnPropertyDescriptor(s.constructor.prototype,l),g=""+s[l];if(!s.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var x=d.get,E=d.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return x.call(this)},set:function(T){g=""+T,E.call(this,T)}}),Object.defineProperty(s,l,{enumerable:d.enumerable}),{getValue:function(){return g},setValue:function(T){g=""+T},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function ie(s){s._valueTracker||(s._valueTracker=Ie(s))}function Te(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var d=l.getValue(),g="";return s&&(g=Ne(s)?s.checked?"true":"false":s.value),s=g,s!==d?(l.setValue(s),!0):!1}function Ve(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Ke(s,l){var d=l.checked;return N({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??s._wrapperState.initialChecked})}function rt(s,l){var d=l.defaultValue==null?"":l.defaultValue,g=l.checked!=null?l.checked:l.defaultChecked;d=je(l.value!=null?l.value:d),s._wrapperState={initialChecked:g,initialValue:d,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function st(s,l){l=l.checked,l!=null&&j(s,"checked",l,!1)}function kt(s,l){st(s,l);var d=je(l.value),g=l.type;if(d!=null)g==="number"?(d===0&&s.value===""||s.value!=d)&&(s.value=""+d):s.value!==""+d&&(s.value=""+d);else if(g==="submit"||g==="reset"){s.removeAttribute("value");return}l.hasOwnProperty("value")?Jt(s,l.type,d):l.hasOwnProperty("defaultValue")&&Jt(s,l.type,je(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(s.defaultChecked=!!l.defaultChecked)}function un(s,l,d){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var g=l.type;if(!(g!=="submit"&&g!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+s._wrapperState.initialValue,d||l===s.value||(s.value=l),s.defaultValue=l}d=s.name,d!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,d!==""&&(s.name=d)}function Jt(s,l,d){(l!=="number"||Ve(s.ownerDocument)!==s)&&(d==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+d&&(s.defaultValue=""+d))}var bt=Array.isArray;function Pt(s,l,d,g){if(s=s.options,l){l={};for(var x=0;x<d.length;x++)l["$"+d[x]]=!0;for(d=0;d<s.length;d++)x=l.hasOwnProperty("$"+s[d].value),s[d].selected!==x&&(s[d].selected=x),x&&g&&(s[d].defaultSelected=!0)}else{for(d=""+je(d),l=null,x=0;x<s.length;x++){if(s[x].value===d){s[x].selected=!0,g&&(s[x].defaultSelected=!0);return}l!==null||s[x].disabled||(l=s[x])}l!==null&&(l.selected=!0)}}function J(s,l){if(l.dangerouslySetInnerHTML!=null)throw Error(n(91));return N({},l,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function fe(s,l){var d=l.value;if(d==null){if(d=l.children,l=l.defaultValue,d!=null){if(l!=null)throw Error(n(92));if(bt(d)){if(1<d.length)throw Error(n(93));d=d[0]}l=d}l==null&&(l=""),d=l}s._wrapperState={initialValue:je(d)}}function ye(s,l){var d=je(l.value),g=je(l.defaultValue);d!=null&&(d=""+d,d!==s.value&&(s.value=d),l.defaultValue==null&&s.defaultValue!==d&&(s.defaultValue=d)),g!=null&&(s.defaultValue=""+g)}function _e(s){var l=s.textContent;l===s._wrapperState.initialValue&&l!==""&&l!==null&&(s.value=l)}function Y(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function P(s,l){return s==null||s==="http://www.w3.org/1999/xhtml"?Y(l):s==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var K,le=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,d,g,x){MSApp.execUnsafeLocalFunction(function(){return s(l,d,g,x)})}:s})(function(s,l){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=l;else{for(K=K||document.createElement("div"),K.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=K.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;l.firstChild;)s.appendChild(l.firstChild)}});function X(s,l){if(l){var d=s.firstChild;if(d&&d===s.lastChild&&d.nodeType===3){d.nodeValue=l;return}}s.textContent=l}var ue={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},D=["Webkit","ms","Moz","O"];Object.keys(ue).forEach(function(s){D.forEach(function(l){l=l+s.charAt(0).toUpperCase()+s.substring(1),ue[l]=ue[s]})});function G(s,l,d){return l==null||typeof l=="boolean"||l===""?"":d||typeof l!="number"||l===0||ue.hasOwnProperty(s)&&ue[s]?(""+l).trim():l+"px"}function de(s,l){s=s.style;for(var d in l)if(l.hasOwnProperty(d)){var g=d.indexOf("--")===0,x=G(d,l[d],g);d==="float"&&(d="cssFloat"),g?s.setProperty(d,x):s[d]=x}}var pe=N({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Re(s,l){if(l){if(pe[s]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(n(137,s));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(n(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(n(61))}if(l.style!=null&&typeof l.style!="object")throw Error(n(62))}}function Pe(s,l){if(s.indexOf("-")===-1)return typeof l.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var De=null;function ft(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var $e=null,qe=null,Ye=null;function Ue(s){if(s=ca(s)){if(typeof $e!="function")throw Error(n(280));var l=s.stateNode;l&&(l=zl(l),$e(s.stateNode,s.type,l))}}function ot(s){qe?Ye?Ye.push(s):Ye=[s]:qe=s}function lt(){if(qe){var s=qe,l=Ye;if(Ye=qe=null,Ue(s),l)for(s=0;s<l.length;s++)Ue(l[s])}}function Fe(s,l){return s(l)}function Ee(){}var Ge=!1;function mt(s,l,d){if(Ge)return s(l,d);Ge=!0;try{return Fe(s,l,d)}finally{Ge=!1,(qe!==null||Ye!==null)&&(Ee(),lt())}}function et(s,l){var d=s.stateNode;if(d===null)return null;var g=zl(d);if(g===null)return null;d=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(s=s.type,g=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!g;break e;default:s=!1}if(s)return null;if(d&&typeof d!="function")throw Error(n(231,l,typeof d));return d}var Mt=!1;if(u)try{var Rt={};Object.defineProperty(Rt,"passive",{get:function(){Mt=!0}}),window.addEventListener("test",Rt,Rt),window.removeEventListener("test",Rt,Rt)}catch{Mt=!1}function Bn(s,l,d,g,x,E,T,W,Q){var ce=Array.prototype.slice.call(arguments,3);try{l.apply(d,ce)}catch(xe){this.onError(xe)}}var ur=!1,_r=null,zn=!1,Wr=null,Vo={onError:function(s){ur=!0,_r=s}};function pS(s,l,d,g,x,E,T,W,Q){ur=!1,_r=null,Bn.apply(Vo,arguments)}function mS(s,l,d,g,x,E,T,W,Q){if(pS.apply(this,arguments),ur){if(ur){var ce=_r;ur=!1,_r=null}else throw Error(n(198));zn||(zn=!0,Wr=ce)}}function Hi(s){var l=s,d=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(d=l.return),s=l.return;while(s)}return l.tag===3?d:null}function Fm(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function Bm(s){if(Hi(s)!==s)throw Error(n(188))}function gS(s){var l=s.alternate;if(!l){if(l=Hi(s),l===null)throw Error(n(188));return l!==s?null:s}for(var d=s,g=l;;){var x=d.return;if(x===null)break;var E=x.alternate;if(E===null){if(g=x.return,g!==null){d=g;continue}break}if(x.child===E.child){for(E=x.child;E;){if(E===d)return Bm(x),s;if(E===g)return Bm(x),l;E=E.sibling}throw Error(n(188))}if(d.return!==g.return)d=x,g=E;else{for(var T=!1,W=x.child;W;){if(W===d){T=!0,d=x,g=E;break}if(W===g){T=!0,g=x,d=E;break}W=W.sibling}if(!T){for(W=E.child;W;){if(W===d){T=!0,d=E,g=x;break}if(W===g){T=!0,g=E,d=x;break}W=W.sibling}if(!T)throw Error(n(189))}}if(d.alternate!==g)throw Error(n(190))}if(d.tag!==3)throw Error(n(188));return d.stateNode.current===d?s:l}function zm(s){return s=gS(s),s!==null?Um(s):null}function Um(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var l=Um(s);if(l!==null)return l;s=s.sibling}return null}var Wm=t.unstable_scheduleCallback,Hm=t.unstable_cancelCallback,yS=t.unstable_shouldYield,vS=t.unstable_requestPaint,Bt=t.unstable_now,xS=t.unstable_getCurrentPriorityLevel,ed=t.unstable_ImmediatePriority,Vm=t.unstable_UserBlockingPriority,wl=t.unstable_NormalPriority,bS=t.unstable_LowPriority,qm=t.unstable_IdlePriority,kl=null,Cr=null;function wS(s){if(Cr&&typeof Cr.onCommitFiberRoot=="function")try{Cr.onCommitFiberRoot(kl,s,void 0,(s.current.flags&128)===128)}catch{}}var cr=Math.clz32?Math.clz32:ES,kS=Math.log,SS=Math.LN2;function ES(s){return s>>>=0,s===0?32:31-(kS(s)/SS|0)|0}var Sl=64,El=4194304;function qo(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function _l(s,l){var d=s.pendingLanes;if(d===0)return 0;var g=0,x=s.suspendedLanes,E=s.pingedLanes,T=d&268435455;if(T!==0){var W=T&~x;W!==0?g=qo(W):(E&=T,E!==0&&(g=qo(E)))}else T=d&~x,T!==0?g=qo(T):E!==0&&(g=qo(E));if(g===0)return 0;if(l!==0&&l!==g&&(l&x)===0&&(x=g&-g,E=l&-l,x>=E||x===16&&(E&4194240)!==0))return l;if((g&4)!==0&&(g|=d&16),l=s.entangledLanes,l!==0)for(s=s.entanglements,l&=g;0<l;)d=31-cr(l),x=1<<d,g|=s[d],l&=~x;return g}function _S(s,l){switch(s){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function CS(s,l){for(var d=s.suspendedLanes,g=s.pingedLanes,x=s.expirationTimes,E=s.pendingLanes;0<E;){var T=31-cr(E),W=1<<T,Q=x[T];Q===-1?((W&d)===0||(W&g)!==0)&&(x[T]=_S(W,l)):Q<=l&&(s.expiredLanes|=W),E&=~W}}function td(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Km(){var s=Sl;return Sl<<=1,(Sl&4194240)===0&&(Sl=64),s}function nd(s){for(var l=[],d=0;31>d;d++)l.push(s);return l}function Ko(s,l,d){s.pendingLanes|=l,l!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,l=31-cr(l),s[l]=d}function jS(s,l){var d=s.pendingLanes&~l;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=l,s.mutableReadLanes&=l,s.entangledLanes&=l,l=s.entanglements;var g=s.eventTimes;for(s=s.expirationTimes;0<d;){var x=31-cr(d),E=1<<x;l[x]=0,g[x]=-1,s[x]=-1,d&=~E}}function rd(s,l){var d=s.entangledLanes|=l;for(s=s.entanglements;d;){var g=31-cr(d),x=1<<g;x&l|s[g]&l&&(s[g]|=l),d&=~x}}var vt=0;function Ym(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var Gm,id,Jm,Qm,Xm,sd=!1,Cl=[],si=null,oi=null,ai=null,Yo=new Map,Go=new Map,li=[],NS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zm(s,l){switch(s){case"focusin":case"focusout":si=null;break;case"dragenter":case"dragleave":oi=null;break;case"mouseover":case"mouseout":ai=null;break;case"pointerover":case"pointerout":Yo.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Go.delete(l.pointerId)}}function Jo(s,l,d,g,x,E){return s===null||s.nativeEvent!==E?(s={blockedOn:l,domEventName:d,eventSystemFlags:g,nativeEvent:E,targetContainers:[x]},l!==null&&(l=ca(l),l!==null&&id(l)),s):(s.eventSystemFlags|=g,l=s.targetContainers,x!==null&&l.indexOf(x)===-1&&l.push(x),s)}function TS(s,l,d,g,x){switch(l){case"focusin":return si=Jo(si,s,l,d,g,x),!0;case"dragenter":return oi=Jo(oi,s,l,d,g,x),!0;case"mouseover":return ai=Jo(ai,s,l,d,g,x),!0;case"pointerover":var E=x.pointerId;return Yo.set(E,Jo(Yo.get(E)||null,s,l,d,g,x)),!0;case"gotpointercapture":return E=x.pointerId,Go.set(E,Jo(Go.get(E)||null,s,l,d,g,x)),!0}return!1}function eg(s){var l=Vi(s.target);if(l!==null){var d=Hi(l);if(d!==null){if(l=d.tag,l===13){if(l=Fm(d),l!==null){s.blockedOn=l,Xm(s.priority,function(){Jm(d)});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){s.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}s.blockedOn=null}function jl(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var d=ad(s.domEventName,s.eventSystemFlags,l[0],s.nativeEvent);if(d===null){d=s.nativeEvent;var g=new d.constructor(d.type,d);De=g,d.target.dispatchEvent(g),De=null}else return l=ca(d),l!==null&&id(l),s.blockedOn=d,!1;l.shift()}return!0}function tg(s,l,d){jl(s)&&d.delete(l)}function IS(){sd=!1,si!==null&&jl(si)&&(si=null),oi!==null&&jl(oi)&&(oi=null),ai!==null&&jl(ai)&&(ai=null),Yo.forEach(tg),Go.forEach(tg)}function Qo(s,l){s.blockedOn===l&&(s.blockedOn=null,sd||(sd=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,IS)))}function Xo(s){function l(x){return Qo(x,s)}if(0<Cl.length){Qo(Cl[0],s);for(var d=1;d<Cl.length;d++){var g=Cl[d];g.blockedOn===s&&(g.blockedOn=null)}}for(si!==null&&Qo(si,s),oi!==null&&Qo(oi,s),ai!==null&&Qo(ai,s),Yo.forEach(l),Go.forEach(l),d=0;d<li.length;d++)g=li[d],g.blockedOn===s&&(g.blockedOn=null);for(;0<li.length&&(d=li[0],d.blockedOn===null);)eg(d),d.blockedOn===null&&li.shift()}var Ps=I.ReactCurrentBatchConfig,Nl=!0;function PS(s,l,d,g){var x=vt,E=Ps.transition;Ps.transition=null;try{vt=1,od(s,l,d,g)}finally{vt=x,Ps.transition=E}}function RS(s,l,d,g){var x=vt,E=Ps.transition;Ps.transition=null;try{vt=4,od(s,l,d,g)}finally{vt=x,Ps.transition=E}}function od(s,l,d,g){if(Nl){var x=ad(s,l,d,g);if(x===null)Ed(s,l,g,Tl,d),Zm(s,g);else if(TS(x,s,l,d,g))g.stopPropagation();else if(Zm(s,g),l&4&&-1<NS.indexOf(s)){for(;x!==null;){var E=ca(x);if(E!==null&&Gm(E),E=ad(s,l,d,g),E===null&&Ed(s,l,g,Tl,d),E===x)break;x=E}x!==null&&g.stopPropagation()}else Ed(s,l,g,null,d)}}var Tl=null;function ad(s,l,d,g){if(Tl=null,s=ft(g),s=Vi(s),s!==null)if(l=Hi(s),l===null)s=null;else if(d=l.tag,d===13){if(s=Fm(l),s!==null)return s;s=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null);return Tl=s,null}function ng(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xS()){case ed:return 1;case Vm:return 4;case wl:case bS:return 16;case qm:return 536870912;default:return 16}default:return 16}}var ui=null,ld=null,Il=null;function rg(){if(Il)return Il;var s,l=ld,d=l.length,g,x="value"in ui?ui.value:ui.textContent,E=x.length;for(s=0;s<d&&l[s]===x[s];s++);var T=d-s;for(g=1;g<=T&&l[d-g]===x[E-g];g++);return Il=x.slice(s,1<g?1-g:void 0)}function Pl(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function Rl(){return!0}function ig(){return!1}function Un(s){function l(d,g,x,E,T){this._reactName=d,this._targetInst=x,this.type=g,this.nativeEvent=E,this.target=T,this.currentTarget=null;for(var W in s)s.hasOwnProperty(W)&&(d=s[W],this[W]=d?d(E):E[W]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Rl:ig,this.isPropagationStopped=ig,this}return N(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Rl)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Rl)},persist:function(){},isPersistent:Rl}),l}var Rs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ud=Un(Rs),Zo=N({},Rs,{view:0,detail:0}),AS=Un(Zo),cd,dd,ea,Al=N({},Zo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hd,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ea&&(ea&&s.type==="mousemove"?(cd=s.screenX-ea.screenX,dd=s.screenY-ea.screenY):dd=cd=0,ea=s),cd)},movementY:function(s){return"movementY"in s?s.movementY:dd}}),sg=Un(Al),MS=N({},Al,{dataTransfer:0}),OS=Un(MS),DS=N({},Zo,{relatedTarget:0}),fd=Un(DS),LS=N({},Rs,{animationName:0,elapsedTime:0,pseudoElement:0}),$S=Un(LS),FS=N({},Rs,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),BS=Un(FS),zS=N({},Rs,{data:0}),og=Un(zS),US={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},WS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},HS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function VS(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=HS[s])?!!l[s]:!1}function hd(){return VS}var qS=N({},Zo,{key:function(s){if(s.key){var l=US[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=Pl(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?WS[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hd,charCode:function(s){return s.type==="keypress"?Pl(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Pl(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),KS=Un(qS),YS=N({},Al,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ag=Un(YS),GS=N({},Zo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hd}),JS=Un(GS),QS=N({},Rs,{propertyName:0,elapsedTime:0,pseudoElement:0}),XS=Un(QS),ZS=N({},Al,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),eE=Un(ZS),tE=[9,13,27,32],pd=u&&"CompositionEvent"in window,ta=null;u&&"documentMode"in document&&(ta=document.documentMode);var nE=u&&"TextEvent"in window&&!ta,lg=u&&(!pd||ta&&8<ta&&11>=ta),ug=" ",cg=!1;function dg(s,l){switch(s){case"keyup":return tE.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fg(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var As=!1;function rE(s,l){switch(s){case"compositionend":return fg(l);case"keypress":return l.which!==32?null:(cg=!0,ug);case"textInput":return s=l.data,s===ug&&cg?null:s;default:return null}}function iE(s,l){if(As)return s==="compositionend"||!pd&&dg(s,l)?(s=rg(),Il=ld=ui=null,As=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return lg&&l.locale!=="ko"?null:l.data;default:return null}}var sE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hg(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!sE[s.type]:l==="textarea"}function pg(s,l,d,g){ot(g),l=$l(l,"onChange"),0<l.length&&(d=new ud("onChange","change",null,d,g),s.push({event:d,listeners:l}))}var na=null,ra=null;function oE(s){Rg(s,0)}function Ml(s){var l=$s(s);if(Te(l))return s}function aE(s,l){if(s==="change")return l}var mg=!1;if(u){var md;if(u){var gd="oninput"in document;if(!gd){var gg=document.createElement("div");gg.setAttribute("oninput","return;"),gd=typeof gg.oninput=="function"}md=gd}else md=!1;mg=md&&(!document.documentMode||9<document.documentMode)}function yg(){na&&(na.detachEvent("onpropertychange",vg),ra=na=null)}function vg(s){if(s.propertyName==="value"&&Ml(ra)){var l=[];pg(l,ra,s,ft(s)),mt(oE,l)}}function lE(s,l,d){s==="focusin"?(yg(),na=l,ra=d,na.attachEvent("onpropertychange",vg)):s==="focusout"&&yg()}function uE(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Ml(ra)}function cE(s,l){if(s==="click")return Ml(l)}function dE(s,l){if(s==="input"||s==="change")return Ml(l)}function fE(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var dr=typeof Object.is=="function"?Object.is:fE;function ia(s,l){if(dr(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var d=Object.keys(s),g=Object.keys(l);if(d.length!==g.length)return!1;for(g=0;g<d.length;g++){var x=d[g];if(!c.call(l,x)||!dr(s[x],l[x]))return!1}return!0}function xg(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function bg(s,l){var d=xg(s);s=0;for(var g;d;){if(d.nodeType===3){if(g=s+d.textContent.length,s<=l&&g>=l)return{node:d,offset:l-s};s=g}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=xg(d)}}function wg(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?wg(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function kg(){for(var s=window,l=Ve();l instanceof s.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)s=l.contentWindow;else break;l=Ve(s.document)}return l}function yd(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}function hE(s){var l=kg(),d=s.focusedElem,g=s.selectionRange;if(l!==d&&d&&d.ownerDocument&&wg(d.ownerDocument.documentElement,d)){if(g!==null&&yd(d)){if(l=g.start,s=g.end,s===void 0&&(s=l),"selectionStart"in d)d.selectionStart=l,d.selectionEnd=Math.min(s,d.value.length);else if(s=(l=d.ownerDocument||document)&&l.defaultView||window,s.getSelection){s=s.getSelection();var x=d.textContent.length,E=Math.min(g.start,x);g=g.end===void 0?E:Math.min(g.end,x),!s.extend&&E>g&&(x=g,g=E,E=x),x=bg(d,E);var T=bg(d,g);x&&T&&(s.rangeCount!==1||s.anchorNode!==x.node||s.anchorOffset!==x.offset||s.focusNode!==T.node||s.focusOffset!==T.offset)&&(l=l.createRange(),l.setStart(x.node,x.offset),s.removeAllRanges(),E>g?(s.addRange(l),s.extend(T.node,T.offset)):(l.setEnd(T.node,T.offset),s.addRange(l)))}}for(l=[],s=d;s=s.parentNode;)s.nodeType===1&&l.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<l.length;d++)s=l[d],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var pE=u&&"documentMode"in document&&11>=document.documentMode,Ms=null,vd=null,sa=null,xd=!1;function Sg(s,l,d){var g=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;xd||Ms==null||Ms!==Ve(g)||(g=Ms,"selectionStart"in g&&yd(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),sa&&ia(sa,g)||(sa=g,g=$l(vd,"onSelect"),0<g.length&&(l=new ud("onSelect","select",null,l,d),s.push({event:l,listeners:g}),l.target=Ms)))}function Ol(s,l){var d={};return d[s.toLowerCase()]=l.toLowerCase(),d["Webkit"+s]="webkit"+l,d["Moz"+s]="moz"+l,d}var Os={animationend:Ol("Animation","AnimationEnd"),animationiteration:Ol("Animation","AnimationIteration"),animationstart:Ol("Animation","AnimationStart"),transitionend:Ol("Transition","TransitionEnd")},bd={},Eg={};u&&(Eg=document.createElement("div").style,"AnimationEvent"in window||(delete Os.animationend.animation,delete Os.animationiteration.animation,delete Os.animationstart.animation),"TransitionEvent"in window||delete Os.transitionend.transition);function Dl(s){if(bd[s])return bd[s];if(!Os[s])return s;var l=Os[s],d;for(d in l)if(l.hasOwnProperty(d)&&d in Eg)return bd[s]=l[d];return s}var _g=Dl("animationend"),Cg=Dl("animationiteration"),jg=Dl("animationstart"),Ng=Dl("transitionend"),Tg=new Map,Ig="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ci(s,l){Tg.set(s,l),o(l,[s])}for(var wd=0;wd<Ig.length;wd++){var kd=Ig[wd],mE=kd.toLowerCase(),gE=kd[0].toUpperCase()+kd.slice(1);ci(mE,"on"+gE)}ci(_g,"onAnimationEnd"),ci(Cg,"onAnimationIteration"),ci(jg,"onAnimationStart"),ci("dblclick","onDoubleClick"),ci("focusin","onFocus"),ci("focusout","onBlur"),ci(Ng,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yE=new Set("cancel close invalid load scroll toggle".split(" ").concat(oa));function Pg(s,l,d){var g=s.type||"unknown-event";s.currentTarget=d,mS(g,l,void 0,s),s.currentTarget=null}function Rg(s,l){l=(l&4)!==0;for(var d=0;d<s.length;d++){var g=s[d],x=g.event;g=g.listeners;e:{var E=void 0;if(l)for(var T=g.length-1;0<=T;T--){var W=g[T],Q=W.instance,ce=W.currentTarget;if(W=W.listener,Q!==E&&x.isPropagationStopped())break e;Pg(x,W,ce),E=Q}else for(T=0;T<g.length;T++){if(W=g[T],Q=W.instance,ce=W.currentTarget,W=W.listener,Q!==E&&x.isPropagationStopped())break e;Pg(x,W,ce),E=Q}}}if(zn)throw s=Wr,zn=!1,Wr=null,s}function Nt(s,l){var d=l[Id];d===void 0&&(d=l[Id]=new Set);var g=s+"__bubble";d.has(g)||(Ag(l,s,2,!1),d.add(g))}function Sd(s,l,d){var g=0;l&&(g|=4),Ag(d,s,g,l)}var Ll="_reactListening"+Math.random().toString(36).slice(2);function aa(s){if(!s[Ll]){s[Ll]=!0,r.forEach(function(d){d!=="selectionchange"&&(yE.has(d)||Sd(d,!1,s),Sd(d,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[Ll]||(l[Ll]=!0,Sd("selectionchange",!1,l))}}function Ag(s,l,d,g){switch(ng(l)){case 1:var x=PS;break;case 4:x=RS;break;default:x=od}d=x.bind(null,l,d,s),x=void 0,!Mt||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(x=!0),g?x!==void 0?s.addEventListener(l,d,{capture:!0,passive:x}):s.addEventListener(l,d,!0):x!==void 0?s.addEventListener(l,d,{passive:x}):s.addEventListener(l,d,!1)}function Ed(s,l,d,g,x){var E=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var T=g.tag;if(T===3||T===4){var W=g.stateNode.containerInfo;if(W===x||W.nodeType===8&&W.parentNode===x)break;if(T===4)for(T=g.return;T!==null;){var Q=T.tag;if((Q===3||Q===4)&&(Q=T.stateNode.containerInfo,Q===x||Q.nodeType===8&&Q.parentNode===x))return;T=T.return}for(;W!==null;){if(T=Vi(W),T===null)return;if(Q=T.tag,Q===5||Q===6){g=E=T;continue e}W=W.parentNode}}g=g.return}mt(function(){var ce=E,xe=ft(d),we=[];e:{var ve=Tg.get(s);if(ve!==void 0){var Me=ud,Le=s;switch(s){case"keypress":if(Pl(d)===0)break e;case"keydown":case"keyup":Me=KS;break;case"focusin":Le="focus",Me=fd;break;case"focusout":Le="blur",Me=fd;break;case"beforeblur":case"afterblur":Me=fd;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Me=sg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Me=OS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Me=JS;break;case _g:case Cg:case jg:Me=$S;break;case Ng:Me=XS;break;case"scroll":Me=AS;break;case"wheel":Me=eE;break;case"copy":case"cut":case"paste":Me=BS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Me=ag}var Be=(l&4)!==0,zt=!Be&&s==="scroll",oe=Be?ve!==null?ve+"Capture":null:ve;Be=[];for(var ne=ce,ae;ne!==null;){ae=ne;var Se=ae.stateNode;if(ae.tag===5&&Se!==null&&(ae=Se,oe!==null&&(Se=et(ne,oe),Se!=null&&Be.push(la(ne,Se,ae)))),zt)break;ne=ne.return}0<Be.length&&(ve=new Me(ve,Le,null,d,xe),we.push({event:ve,listeners:Be}))}}if((l&7)===0){e:{if(ve=s==="mouseover"||s==="pointerover",Me=s==="mouseout"||s==="pointerout",ve&&d!==De&&(Le=d.relatedTarget||d.fromElement)&&(Vi(Le)||Le[Hr]))break e;if((Me||ve)&&(ve=xe.window===xe?xe:(ve=xe.ownerDocument)?ve.defaultView||ve.parentWindow:window,Me?(Le=d.relatedTarget||d.toElement,Me=ce,Le=Le?Vi(Le):null,Le!==null&&(zt=Hi(Le),Le!==zt||Le.tag!==5&&Le.tag!==6)&&(Le=null)):(Me=null,Le=ce),Me!==Le)){if(Be=sg,Se="onMouseLeave",oe="onMouseEnter",ne="mouse",(s==="pointerout"||s==="pointerover")&&(Be=ag,Se="onPointerLeave",oe="onPointerEnter",ne="pointer"),zt=Me==null?ve:$s(Me),ae=Le==null?ve:$s(Le),ve=new Be(Se,ne+"leave",Me,d,xe),ve.target=zt,ve.relatedTarget=ae,Se=null,Vi(xe)===ce&&(Be=new Be(oe,ne+"enter",Le,d,xe),Be.target=ae,Be.relatedTarget=zt,Se=Be),zt=Se,Me&&Le)t:{for(Be=Me,oe=Le,ne=0,ae=Be;ae;ae=Ds(ae))ne++;for(ae=0,Se=oe;Se;Se=Ds(Se))ae++;for(;0<ne-ae;)Be=Ds(Be),ne--;for(;0<ae-ne;)oe=Ds(oe),ae--;for(;ne--;){if(Be===oe||oe!==null&&Be===oe.alternate)break t;Be=Ds(Be),oe=Ds(oe)}Be=null}else Be=null;Me!==null&&Mg(we,ve,Me,Be,!1),Le!==null&&zt!==null&&Mg(we,zt,Le,Be,!0)}}e:{if(ve=ce?$s(ce):window,Me=ve.nodeName&&ve.nodeName.toLowerCase(),Me==="select"||Me==="input"&&ve.type==="file")var We=aE;else if(hg(ve))if(mg)We=dE;else{We=uE;var Je=lE}else(Me=ve.nodeName)&&Me.toLowerCase()==="input"&&(ve.type==="checkbox"||ve.type==="radio")&&(We=cE);if(We&&(We=We(s,ce))){pg(we,We,d,xe);break e}Je&&Je(s,ve,ce),s==="focusout"&&(Je=ve._wrapperState)&&Je.controlled&&ve.type==="number"&&Jt(ve,"number",ve.value)}switch(Je=ce?$s(ce):window,s){case"focusin":(hg(Je)||Je.contentEditable==="true")&&(Ms=Je,vd=ce,sa=null);break;case"focusout":sa=vd=Ms=null;break;case"mousedown":xd=!0;break;case"contextmenu":case"mouseup":case"dragend":xd=!1,Sg(we,d,xe);break;case"selectionchange":if(pE)break;case"keydown":case"keyup":Sg(we,d,xe)}var Qe;if(pd)e:{switch(s){case"compositionstart":var nt="onCompositionStart";break e;case"compositionend":nt="onCompositionEnd";break e;case"compositionupdate":nt="onCompositionUpdate";break e}nt=void 0}else As?dg(s,d)&&(nt="onCompositionEnd"):s==="keydown"&&d.keyCode===229&&(nt="onCompositionStart");nt&&(lg&&d.locale!=="ko"&&(As||nt!=="onCompositionStart"?nt==="onCompositionEnd"&&As&&(Qe=rg()):(ui=xe,ld="value"in ui?ui.value:ui.textContent,As=!0)),Je=$l(ce,nt),0<Je.length&&(nt=new og(nt,s,null,d,xe),we.push({event:nt,listeners:Je}),Qe?nt.data=Qe:(Qe=fg(d),Qe!==null&&(nt.data=Qe)))),(Qe=nE?rE(s,d):iE(s,d))&&(ce=$l(ce,"onBeforeInput"),0<ce.length&&(xe=new og("onBeforeInput","beforeinput",null,d,xe),we.push({event:xe,listeners:ce}),xe.data=Qe))}Rg(we,l)})}function la(s,l,d){return{instance:s,listener:l,currentTarget:d}}function $l(s,l){for(var d=l+"Capture",g=[];s!==null;){var x=s,E=x.stateNode;x.tag===5&&E!==null&&(x=E,E=et(s,d),E!=null&&g.unshift(la(s,E,x)),E=et(s,l),E!=null&&g.push(la(s,E,x))),s=s.return}return g}function Ds(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Mg(s,l,d,g,x){for(var E=l._reactName,T=[];d!==null&&d!==g;){var W=d,Q=W.alternate,ce=W.stateNode;if(Q!==null&&Q===g)break;W.tag===5&&ce!==null&&(W=ce,x?(Q=et(d,E),Q!=null&&T.unshift(la(d,Q,W))):x||(Q=et(d,E),Q!=null&&T.push(la(d,Q,W)))),d=d.return}T.length!==0&&s.push({event:l,listeners:T})}var vE=/\r\n?/g,xE=/\u0000|\uFFFD/g;function Og(s){return(typeof s=="string"?s:""+s).replace(vE,`
`).replace(xE,"")}function Fl(s,l,d){if(l=Og(l),Og(s)!==l&&d)throw Error(n(425))}function Bl(){}var _d=null,Cd=null;function jd(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Nd=typeof setTimeout=="function"?setTimeout:void 0,bE=typeof clearTimeout=="function"?clearTimeout:void 0,Dg=typeof Promise=="function"?Promise:void 0,wE=typeof queueMicrotask=="function"?queueMicrotask:typeof Dg<"u"?function(s){return Dg.resolve(null).then(s).catch(kE)}:Nd;function kE(s){setTimeout(function(){throw s})}function Td(s,l){var d=l,g=0;do{var x=d.nextSibling;if(s.removeChild(d),x&&x.nodeType===8)if(d=x.data,d==="/$"){if(g===0){s.removeChild(x),Xo(l);return}g--}else d!=="$"&&d!=="$?"&&d!=="$!"||g++;d=x}while(d);Xo(l)}function di(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return s}function Lg(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var d=s.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return s;l--}else d==="/$"&&l++}s=s.previousSibling}return null}var Ls=Math.random().toString(36).slice(2),jr="__reactFiber$"+Ls,ua="__reactProps$"+Ls,Hr="__reactContainer$"+Ls,Id="__reactEvents$"+Ls,SE="__reactListeners$"+Ls,EE="__reactHandles$"+Ls;function Vi(s){var l=s[jr];if(l)return l;for(var d=s.parentNode;d;){if(l=d[Hr]||d[jr]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(s=Lg(s);s!==null;){if(d=s[jr])return d;s=Lg(s)}return l}s=d,d=s.parentNode}return null}function ca(s){return s=s[jr]||s[Hr],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function $s(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(n(33))}function zl(s){return s[ua]||null}var Pd=[],Fs=-1;function fi(s){return{current:s}}function Tt(s){0>Fs||(s.current=Pd[Fs],Pd[Fs]=null,Fs--)}function _t(s,l){Fs++,Pd[Fs]=s.current,s.current=l}var hi={},hn=fi(hi),Nn=fi(!1),qi=hi;function Bs(s,l){var d=s.type.contextTypes;if(!d)return hi;var g=s.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===l)return g.__reactInternalMemoizedMaskedChildContext;var x={},E;for(E in d)x[E]=l[E];return g&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=l,s.__reactInternalMemoizedMaskedChildContext=x),x}function Tn(s){return s=s.childContextTypes,s!=null}function Ul(){Tt(Nn),Tt(hn)}function $g(s,l,d){if(hn.current!==hi)throw Error(n(168));_t(hn,l),_t(Nn,d)}function Fg(s,l,d){var g=s.stateNode;if(l=l.childContextTypes,typeof g.getChildContext!="function")return d;g=g.getChildContext();for(var x in g)if(!(x in l))throw Error(n(108,me(s)||"Unknown",x));return N({},d,g)}function Wl(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||hi,qi=hn.current,_t(hn,s),_t(Nn,Nn.current),!0}function Bg(s,l,d){var g=s.stateNode;if(!g)throw Error(n(169));d?(s=Fg(s,l,qi),g.__reactInternalMemoizedMergedChildContext=s,Tt(Nn),Tt(hn),_t(hn,s)):Tt(Nn),_t(Nn,d)}var Vr=null,Hl=!1,Rd=!1;function zg(s){Vr===null?Vr=[s]:Vr.push(s)}function _E(s){Hl=!0,zg(s)}function pi(){if(!Rd&&Vr!==null){Rd=!0;var s=0,l=vt;try{var d=Vr;for(vt=1;s<d.length;s++){var g=d[s];do g=g(!0);while(g!==null)}Vr=null,Hl=!1}catch(x){throw Vr!==null&&(Vr=Vr.slice(s+1)),Wm(ed,pi),x}finally{vt=l,Rd=!1}}return null}var zs=[],Us=0,Vl=null,ql=0,Zn=[],er=0,Ki=null,qr=1,Kr="";function Yi(s,l){zs[Us++]=ql,zs[Us++]=Vl,Vl=s,ql=l}function Ug(s,l,d){Zn[er++]=qr,Zn[er++]=Kr,Zn[er++]=Ki,Ki=s;var g=qr;s=Kr;var x=32-cr(g)-1;g&=~(1<<x),d+=1;var E=32-cr(l)+x;if(30<E){var T=x-x%5;E=(g&(1<<T)-1).toString(32),g>>=T,x-=T,qr=1<<32-cr(l)+x|d<<x|g,Kr=E+s}else qr=1<<E|d<<x|g,Kr=s}function Ad(s){s.return!==null&&(Yi(s,1),Ug(s,1,0))}function Md(s){for(;s===Vl;)Vl=zs[--Us],zs[Us]=null,ql=zs[--Us],zs[Us]=null;for(;s===Ki;)Ki=Zn[--er],Zn[er]=null,Kr=Zn[--er],Zn[er]=null,qr=Zn[--er],Zn[er]=null}var Wn=null,Hn=null,At=!1,fr=null;function Wg(s,l){var d=ir(5,null,null,0);d.elementType="DELETED",d.stateNode=l,d.return=s,l=s.deletions,l===null?(s.deletions=[d],s.flags|=16):l.push(d)}function Hg(s,l){switch(s.tag){case 5:var d=s.type;return l=l.nodeType!==1||d.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(s.stateNode=l,Wn=s,Hn=di(l.firstChild),!0):!1;case 6:return l=s.pendingProps===""||l.nodeType!==3?null:l,l!==null?(s.stateNode=l,Wn=s,Hn=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(d=Ki!==null?{id:qr,overflow:Kr}:null,s.memoizedState={dehydrated:l,treeContext:d,retryLane:1073741824},d=ir(18,null,null,0),d.stateNode=l,d.return=s,s.child=d,Wn=s,Hn=null,!0):!1;default:return!1}}function Od(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Dd(s){if(At){var l=Hn;if(l){var d=l;if(!Hg(s,l)){if(Od(s))throw Error(n(418));l=di(d.nextSibling);var g=Wn;l&&Hg(s,l)?Wg(g,d):(s.flags=s.flags&-4097|2,At=!1,Wn=s)}}else{if(Od(s))throw Error(n(418));s.flags=s.flags&-4097|2,At=!1,Wn=s}}}function Vg(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Wn=s}function Kl(s){if(s!==Wn)return!1;if(!At)return Vg(s),At=!0,!1;var l;if((l=s.tag!==3)&&!(l=s.tag!==5)&&(l=s.type,l=l!=="head"&&l!=="body"&&!jd(s.type,s.memoizedProps)),l&&(l=Hn)){if(Od(s))throw qg(),Error(n(418));for(;l;)Wg(s,l),l=di(l.nextSibling)}if(Vg(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));e:{for(s=s.nextSibling,l=0;s;){if(s.nodeType===8){var d=s.data;if(d==="/$"){if(l===0){Hn=di(s.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++}s=s.nextSibling}Hn=null}}else Hn=Wn?di(s.stateNode.nextSibling):null;return!0}function qg(){for(var s=Hn;s;)s=di(s.nextSibling)}function Ws(){Hn=Wn=null,At=!1}function Ld(s){fr===null?fr=[s]:fr.push(s)}var CE=I.ReactCurrentBatchConfig;function da(s,l,d){if(s=d.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(n(309));var g=d.stateNode}if(!g)throw Error(n(147,s));var x=g,E=""+s;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===E?l.ref:(l=function(T){var W=x.refs;T===null?delete W[E]:W[E]=T},l._stringRef=E,l)}if(typeof s!="string")throw Error(n(284));if(!d._owner)throw Error(n(290,s))}return s}function Yl(s,l){throw s=Object.prototype.toString.call(l),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s))}function Kg(s){var l=s._init;return l(s._payload)}function Yg(s){function l(oe,ne){if(s){var ae=oe.deletions;ae===null?(oe.deletions=[ne],oe.flags|=16):ae.push(ne)}}function d(oe,ne){if(!s)return null;for(;ne!==null;)l(oe,ne),ne=ne.sibling;return null}function g(oe,ne){for(oe=new Map;ne!==null;)ne.key!==null?oe.set(ne.key,ne):oe.set(ne.index,ne),ne=ne.sibling;return oe}function x(oe,ne){return oe=ki(oe,ne),oe.index=0,oe.sibling=null,oe}function E(oe,ne,ae){return oe.index=ae,s?(ae=oe.alternate,ae!==null?(ae=ae.index,ae<ne?(oe.flags|=2,ne):ae):(oe.flags|=2,ne)):(oe.flags|=1048576,ne)}function T(oe){return s&&oe.alternate===null&&(oe.flags|=2),oe}function W(oe,ne,ae,Se){return ne===null||ne.tag!==6?(ne=Tf(ae,oe.mode,Se),ne.return=oe,ne):(ne=x(ne,ae),ne.return=oe,ne)}function Q(oe,ne,ae,Se){var We=ae.type;return We===U?xe(oe,ne,ae.props.children,Se,ae.key):ne!==null&&(ne.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===te&&Kg(We)===ne.type)?(Se=x(ne,ae.props),Se.ref=da(oe,ne,ae),Se.return=oe,Se):(Se=vu(ae.type,ae.key,ae.props,null,oe.mode,Se),Se.ref=da(oe,ne,ae),Se.return=oe,Se)}function ce(oe,ne,ae,Se){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==ae.containerInfo||ne.stateNode.implementation!==ae.implementation?(ne=If(ae,oe.mode,Se),ne.return=oe,ne):(ne=x(ne,ae.children||[]),ne.return=oe,ne)}function xe(oe,ne,ae,Se,We){return ne===null||ne.tag!==7?(ne=ns(ae,oe.mode,Se,We),ne.return=oe,ne):(ne=x(ne,ae),ne.return=oe,ne)}function we(oe,ne,ae){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return ne=Tf(""+ne,oe.mode,ae),ne.return=oe,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case O:return ae=vu(ne.type,ne.key,ne.props,null,oe.mode,ae),ae.ref=da(oe,null,ne),ae.return=oe,ae;case R:return ne=If(ne,oe.mode,ae),ne.return=oe,ne;case te:var Se=ne._init;return we(oe,Se(ne._payload),ae)}if(bt(ne)||$(ne))return ne=ns(ne,oe.mode,ae,null),ne.return=oe,ne;Yl(oe,ne)}return null}function ve(oe,ne,ae,Se){var We=ne!==null?ne.key:null;if(typeof ae=="string"&&ae!==""||typeof ae=="number")return We!==null?null:W(oe,ne,""+ae,Se);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case O:return ae.key===We?Q(oe,ne,ae,Se):null;case R:return ae.key===We?ce(oe,ne,ae,Se):null;case te:return We=ae._init,ve(oe,ne,We(ae._payload),Se)}if(bt(ae)||$(ae))return We!==null?null:xe(oe,ne,ae,Se,null);Yl(oe,ae)}return null}function Me(oe,ne,ae,Se,We){if(typeof Se=="string"&&Se!==""||typeof Se=="number")return oe=oe.get(ae)||null,W(ne,oe,""+Se,We);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case O:return oe=oe.get(Se.key===null?ae:Se.key)||null,Q(ne,oe,Se,We);case R:return oe=oe.get(Se.key===null?ae:Se.key)||null,ce(ne,oe,Se,We);case te:var Je=Se._init;return Me(oe,ne,ae,Je(Se._payload),We)}if(bt(Se)||$(Se))return oe=oe.get(ae)||null,xe(ne,oe,Se,We,null);Yl(ne,Se)}return null}function Le(oe,ne,ae,Se){for(var We=null,Je=null,Qe=ne,nt=ne=0,rn=null;Qe!==null&&nt<ae.length;nt++){Qe.index>nt?(rn=Qe,Qe=null):rn=Qe.sibling;var gt=ve(oe,Qe,ae[nt],Se);if(gt===null){Qe===null&&(Qe=rn);break}s&&Qe&&gt.alternate===null&&l(oe,Qe),ne=E(gt,ne,nt),Je===null?We=gt:Je.sibling=gt,Je=gt,Qe=rn}if(nt===ae.length)return d(oe,Qe),At&&Yi(oe,nt),We;if(Qe===null){for(;nt<ae.length;nt++)Qe=we(oe,ae[nt],Se),Qe!==null&&(ne=E(Qe,ne,nt),Je===null?We=Qe:Je.sibling=Qe,Je=Qe);return At&&Yi(oe,nt),We}for(Qe=g(oe,Qe);nt<ae.length;nt++)rn=Me(Qe,oe,nt,ae[nt],Se),rn!==null&&(s&&rn.alternate!==null&&Qe.delete(rn.key===null?nt:rn.key),ne=E(rn,ne,nt),Je===null?We=rn:Je.sibling=rn,Je=rn);return s&&Qe.forEach(function(Si){return l(oe,Si)}),At&&Yi(oe,nt),We}function Be(oe,ne,ae,Se){var We=$(ae);if(typeof We!="function")throw Error(n(150));if(ae=We.call(ae),ae==null)throw Error(n(151));for(var Je=We=null,Qe=ne,nt=ne=0,rn=null,gt=ae.next();Qe!==null&&!gt.done;nt++,gt=ae.next()){Qe.index>nt?(rn=Qe,Qe=null):rn=Qe.sibling;var Si=ve(oe,Qe,gt.value,Se);if(Si===null){Qe===null&&(Qe=rn);break}s&&Qe&&Si.alternate===null&&l(oe,Qe),ne=E(Si,ne,nt),Je===null?We=Si:Je.sibling=Si,Je=Si,Qe=rn}if(gt.done)return d(oe,Qe),At&&Yi(oe,nt),We;if(Qe===null){for(;!gt.done;nt++,gt=ae.next())gt=we(oe,gt.value,Se),gt!==null&&(ne=E(gt,ne,nt),Je===null?We=gt:Je.sibling=gt,Je=gt);return At&&Yi(oe,nt),We}for(Qe=g(oe,Qe);!gt.done;nt++,gt=ae.next())gt=Me(Qe,oe,nt,gt.value,Se),gt!==null&&(s&&gt.alternate!==null&&Qe.delete(gt.key===null?nt:gt.key),ne=E(gt,ne,nt),Je===null?We=gt:Je.sibling=gt,Je=gt);return s&&Qe.forEach(function(s_){return l(oe,s_)}),At&&Yi(oe,nt),We}function zt(oe,ne,ae,Se){if(typeof ae=="object"&&ae!==null&&ae.type===U&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case O:e:{for(var We=ae.key,Je=ne;Je!==null;){if(Je.key===We){if(We=ae.type,We===U){if(Je.tag===7){d(oe,Je.sibling),ne=x(Je,ae.props.children),ne.return=oe,oe=ne;break e}}else if(Je.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===te&&Kg(We)===Je.type){d(oe,Je.sibling),ne=x(Je,ae.props),ne.ref=da(oe,Je,ae),ne.return=oe,oe=ne;break e}d(oe,Je);break}else l(oe,Je);Je=Je.sibling}ae.type===U?(ne=ns(ae.props.children,oe.mode,Se,ae.key),ne.return=oe,oe=ne):(Se=vu(ae.type,ae.key,ae.props,null,oe.mode,Se),Se.ref=da(oe,ne,ae),Se.return=oe,oe=Se)}return T(oe);case R:e:{for(Je=ae.key;ne!==null;){if(ne.key===Je)if(ne.tag===4&&ne.stateNode.containerInfo===ae.containerInfo&&ne.stateNode.implementation===ae.implementation){d(oe,ne.sibling),ne=x(ne,ae.children||[]),ne.return=oe,oe=ne;break e}else{d(oe,ne);break}else l(oe,ne);ne=ne.sibling}ne=If(ae,oe.mode,Se),ne.return=oe,oe=ne}return T(oe);case te:return Je=ae._init,zt(oe,ne,Je(ae._payload),Se)}if(bt(ae))return Le(oe,ne,ae,Se);if($(ae))return Be(oe,ne,ae,Se);Yl(oe,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"?(ae=""+ae,ne!==null&&ne.tag===6?(d(oe,ne.sibling),ne=x(ne,ae),ne.return=oe,oe=ne):(d(oe,ne),ne=Tf(ae,oe.mode,Se),ne.return=oe,oe=ne),T(oe)):d(oe,ne)}return zt}var Hs=Yg(!0),Gg=Yg(!1),Gl=fi(null),Jl=null,Vs=null,$d=null;function Fd(){$d=Vs=Jl=null}function Bd(s){var l=Gl.current;Tt(Gl),s._currentValue=l}function zd(s,l,d){for(;s!==null;){var g=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),s===d)break;s=s.return}}function qs(s,l){Jl=s,$d=Vs=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&l)!==0&&(In=!0),s.firstContext=null)}function tr(s){var l=s._currentValue;if($d!==s)if(s={context:s,memoizedValue:l,next:null},Vs===null){if(Jl===null)throw Error(n(308));Vs=s,Jl.dependencies={lanes:0,firstContext:s}}else Vs=Vs.next=s;return l}var Gi=null;function Ud(s){Gi===null?Gi=[s]:Gi.push(s)}function Jg(s,l,d,g){var x=l.interleaved;return x===null?(d.next=d,Ud(l)):(d.next=x.next,x.next=d),l.interleaved=d,Yr(s,g)}function Yr(s,l){s.lanes|=l;var d=s.alternate;for(d!==null&&(d.lanes|=l),d=s,s=s.return;s!==null;)s.childLanes|=l,d=s.alternate,d!==null&&(d.childLanes|=l),d=s,s=s.return;return d.tag===3?d.stateNode:null}var mi=!1;function Wd(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qg(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Gr(s,l){return{eventTime:s,lane:l,tag:0,payload:null,callback:null,next:null}}function gi(s,l,d){var g=s.updateQueue;if(g===null)return null;if(g=g.shared,(pt&2)!==0){var x=g.pending;return x===null?l.next=l:(l.next=x.next,x.next=l),g.pending=l,Yr(s,d)}return x=g.interleaved,x===null?(l.next=l,Ud(g)):(l.next=x.next,x.next=l),g.interleaved=l,Yr(s,d)}function Ql(s,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194240)!==0)){var g=l.lanes;g&=s.pendingLanes,d|=g,l.lanes=d,rd(s,d)}}function Xg(s,l){var d=s.updateQueue,g=s.alternate;if(g!==null&&(g=g.updateQueue,d===g)){var x=null,E=null;if(d=d.firstBaseUpdate,d!==null){do{var T={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};E===null?x=E=T:E=E.next=T,d=d.next}while(d!==null);E===null?x=E=l:E=E.next=l}else x=E=l;d={baseState:g.baseState,firstBaseUpdate:x,lastBaseUpdate:E,shared:g.shared,effects:g.effects},s.updateQueue=d;return}s=d.lastBaseUpdate,s===null?d.firstBaseUpdate=l:s.next=l,d.lastBaseUpdate=l}function Xl(s,l,d,g){var x=s.updateQueue;mi=!1;var E=x.firstBaseUpdate,T=x.lastBaseUpdate,W=x.shared.pending;if(W!==null){x.shared.pending=null;var Q=W,ce=Q.next;Q.next=null,T===null?E=ce:T.next=ce,T=Q;var xe=s.alternate;xe!==null&&(xe=xe.updateQueue,W=xe.lastBaseUpdate,W!==T&&(W===null?xe.firstBaseUpdate=ce:W.next=ce,xe.lastBaseUpdate=Q))}if(E!==null){var we=x.baseState;T=0,xe=ce=Q=null,W=E;do{var ve=W.lane,Me=W.eventTime;if((g&ve)===ve){xe!==null&&(xe=xe.next={eventTime:Me,lane:0,tag:W.tag,payload:W.payload,callback:W.callback,next:null});e:{var Le=s,Be=W;switch(ve=l,Me=d,Be.tag){case 1:if(Le=Be.payload,typeof Le=="function"){we=Le.call(Me,we,ve);break e}we=Le;break e;case 3:Le.flags=Le.flags&-65537|128;case 0:if(Le=Be.payload,ve=typeof Le=="function"?Le.call(Me,we,ve):Le,ve==null)break e;we=N({},we,ve);break e;case 2:mi=!0}}W.callback!==null&&W.lane!==0&&(s.flags|=64,ve=x.effects,ve===null?x.effects=[W]:ve.push(W))}else Me={eventTime:Me,lane:ve,tag:W.tag,payload:W.payload,callback:W.callback,next:null},xe===null?(ce=xe=Me,Q=we):xe=xe.next=Me,T|=ve;if(W=W.next,W===null){if(W=x.shared.pending,W===null)break;ve=W,W=ve.next,ve.next=null,x.lastBaseUpdate=ve,x.shared.pending=null}}while(!0);if(xe===null&&(Q=we),x.baseState=Q,x.firstBaseUpdate=ce,x.lastBaseUpdate=xe,l=x.shared.interleaved,l!==null){x=l;do T|=x.lane,x=x.next;while(x!==l)}else E===null&&(x.shared.lanes=0);Xi|=T,s.lanes=T,s.memoizedState=we}}function Zg(s,l,d){if(s=l.effects,l.effects=null,s!==null)for(l=0;l<s.length;l++){var g=s[l],x=g.callback;if(x!==null){if(g.callback=null,g=d,typeof x!="function")throw Error(n(191,x));x.call(g)}}}var fa={},Nr=fi(fa),ha=fi(fa),pa=fi(fa);function Ji(s){if(s===fa)throw Error(n(174));return s}function Hd(s,l){switch(_t(pa,l),_t(ha,s),_t(Nr,fa),s=l.nodeType,s){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:P(null,"");break;default:s=s===8?l.parentNode:l,l=s.namespaceURI||null,s=s.tagName,l=P(l,s)}Tt(Nr),_t(Nr,l)}function Ks(){Tt(Nr),Tt(ha),Tt(pa)}function ey(s){Ji(pa.current);var l=Ji(Nr.current),d=P(l,s.type);l!==d&&(_t(ha,s),_t(Nr,d))}function Vd(s){ha.current===s&&(Tt(Nr),Tt(ha))}var Ot=fi(0);function Zl(s){for(var l=s;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var qd=[];function Kd(){for(var s=0;s<qd.length;s++)qd[s]._workInProgressVersionPrimary=null;qd.length=0}var eu=I.ReactCurrentDispatcher,Yd=I.ReactCurrentBatchConfig,Qi=0,Dt=null,Qt=null,tn=null,tu=!1,ma=!1,ga=0,jE=0;function pn(){throw Error(n(321))}function Gd(s,l){if(l===null)return!1;for(var d=0;d<l.length&&d<s.length;d++)if(!dr(s[d],l[d]))return!1;return!0}function Jd(s,l,d,g,x,E){if(Qi=E,Dt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,eu.current=s===null||s.memoizedState===null?PE:RE,s=d(g,x),ma){E=0;do{if(ma=!1,ga=0,25<=E)throw Error(n(301));E+=1,tn=Qt=null,l.updateQueue=null,eu.current=AE,s=d(g,x)}while(ma)}if(eu.current=iu,l=Qt!==null&&Qt.next!==null,Qi=0,tn=Qt=Dt=null,tu=!1,l)throw Error(n(300));return s}function Qd(){var s=ga!==0;return ga=0,s}function Tr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?Dt.memoizedState=tn=s:tn=tn.next=s,tn}function nr(){if(Qt===null){var s=Dt.alternate;s=s!==null?s.memoizedState:null}else s=Qt.next;var l=tn===null?Dt.memoizedState:tn.next;if(l!==null)tn=l,Qt=s;else{if(s===null)throw Error(n(310));Qt=s,s={memoizedState:Qt.memoizedState,baseState:Qt.baseState,baseQueue:Qt.baseQueue,queue:Qt.queue,next:null},tn===null?Dt.memoizedState=tn=s:tn=tn.next=s}return tn}function ya(s,l){return typeof l=="function"?l(s):l}function Xd(s){var l=nr(),d=l.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=s;var g=Qt,x=g.baseQueue,E=d.pending;if(E!==null){if(x!==null){var T=x.next;x.next=E.next,E.next=T}g.baseQueue=x=E,d.pending=null}if(x!==null){E=x.next,g=g.baseState;var W=T=null,Q=null,ce=E;do{var xe=ce.lane;if((Qi&xe)===xe)Q!==null&&(Q=Q.next={lane:0,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null}),g=ce.hasEagerState?ce.eagerState:s(g,ce.action);else{var we={lane:xe,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null};Q===null?(W=Q=we,T=g):Q=Q.next=we,Dt.lanes|=xe,Xi|=xe}ce=ce.next}while(ce!==null&&ce!==E);Q===null?T=g:Q.next=W,dr(g,l.memoizedState)||(In=!0),l.memoizedState=g,l.baseState=T,l.baseQueue=Q,d.lastRenderedState=g}if(s=d.interleaved,s!==null){x=s;do E=x.lane,Dt.lanes|=E,Xi|=E,x=x.next;while(x!==s)}else x===null&&(d.lanes=0);return[l.memoizedState,d.dispatch]}function Zd(s){var l=nr(),d=l.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=s;var g=d.dispatch,x=d.pending,E=l.memoizedState;if(x!==null){d.pending=null;var T=x=x.next;do E=s(E,T.action),T=T.next;while(T!==x);dr(E,l.memoizedState)||(In=!0),l.memoizedState=E,l.baseQueue===null&&(l.baseState=E),d.lastRenderedState=E}return[E,g]}function ty(){}function ny(s,l){var d=Dt,g=nr(),x=l(),E=!dr(g.memoizedState,x);if(E&&(g.memoizedState=x,In=!0),g=g.queue,ef(sy.bind(null,d,g,s),[s]),g.getSnapshot!==l||E||tn!==null&&tn.memoizedState.tag&1){if(d.flags|=2048,va(9,iy.bind(null,d,g,x,l),void 0,null),nn===null)throw Error(n(349));(Qi&30)!==0||ry(d,l,x)}return x}function ry(s,l,d){s.flags|=16384,s={getSnapshot:l,value:d},l=Dt.updateQueue,l===null?(l={lastEffect:null,stores:null},Dt.updateQueue=l,l.stores=[s]):(d=l.stores,d===null?l.stores=[s]:d.push(s))}function iy(s,l,d,g){l.value=d,l.getSnapshot=g,oy(l)&&ay(s)}function sy(s,l,d){return d(function(){oy(l)&&ay(s)})}function oy(s){var l=s.getSnapshot;s=s.value;try{var d=l();return!dr(s,d)}catch{return!0}}function ay(s){var l=Yr(s,1);l!==null&&gr(l,s,1,-1)}function ly(s){var l=Tr();return typeof s=="function"&&(s=s()),l.memoizedState=l.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:s},l.queue=s,s=s.dispatch=IE.bind(null,Dt,s),[l.memoizedState,s]}function va(s,l,d,g){return s={tag:s,create:l,destroy:d,deps:g,next:null},l=Dt.updateQueue,l===null?(l={lastEffect:null,stores:null},Dt.updateQueue=l,l.lastEffect=s.next=s):(d=l.lastEffect,d===null?l.lastEffect=s.next=s:(g=d.next,d.next=s,s.next=g,l.lastEffect=s)),s}function uy(){return nr().memoizedState}function nu(s,l,d,g){var x=Tr();Dt.flags|=s,x.memoizedState=va(1|l,d,void 0,g===void 0?null:g)}function ru(s,l,d,g){var x=nr();g=g===void 0?null:g;var E=void 0;if(Qt!==null){var T=Qt.memoizedState;if(E=T.destroy,g!==null&&Gd(g,T.deps)){x.memoizedState=va(l,d,E,g);return}}Dt.flags|=s,x.memoizedState=va(1|l,d,E,g)}function cy(s,l){return nu(8390656,8,s,l)}function ef(s,l){return ru(2048,8,s,l)}function dy(s,l){return ru(4,2,s,l)}function fy(s,l){return ru(4,4,s,l)}function hy(s,l){if(typeof l=="function")return s=s(),l(s),function(){l(null)};if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function py(s,l,d){return d=d!=null?d.concat([s]):null,ru(4,4,hy.bind(null,l,s),d)}function tf(){}function my(s,l){var d=nr();l=l===void 0?null:l;var g=d.memoizedState;return g!==null&&l!==null&&Gd(l,g[1])?g[0]:(d.memoizedState=[s,l],s)}function gy(s,l){var d=nr();l=l===void 0?null:l;var g=d.memoizedState;return g!==null&&l!==null&&Gd(l,g[1])?g[0]:(s=s(),d.memoizedState=[s,l],s)}function yy(s,l,d){return(Qi&21)===0?(s.baseState&&(s.baseState=!1,In=!0),s.memoizedState=d):(dr(d,l)||(d=Km(),Dt.lanes|=d,Xi|=d,s.baseState=!0),l)}function NE(s,l){var d=vt;vt=d!==0&&4>d?d:4,s(!0);var g=Yd.transition;Yd.transition={};try{s(!1),l()}finally{vt=d,Yd.transition=g}}function vy(){return nr().memoizedState}function TE(s,l,d){var g=bi(s);if(d={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null},xy(s))by(l,d);else if(d=Jg(s,l,d,g),d!==null){var x=Sn();gr(d,s,g,x),wy(d,l,g)}}function IE(s,l,d){var g=bi(s),x={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null};if(xy(s))by(l,x);else{var E=s.alternate;if(s.lanes===0&&(E===null||E.lanes===0)&&(E=l.lastRenderedReducer,E!==null))try{var T=l.lastRenderedState,W=E(T,d);if(x.hasEagerState=!0,x.eagerState=W,dr(W,T)){var Q=l.interleaved;Q===null?(x.next=x,Ud(l)):(x.next=Q.next,Q.next=x),l.interleaved=x;return}}catch{}finally{}d=Jg(s,l,x,g),d!==null&&(x=Sn(),gr(d,s,g,x),wy(d,l,g))}}function xy(s){var l=s.alternate;return s===Dt||l!==null&&l===Dt}function by(s,l){ma=tu=!0;var d=s.pending;d===null?l.next=l:(l.next=d.next,d.next=l),s.pending=l}function wy(s,l,d){if((d&4194240)!==0){var g=l.lanes;g&=s.pendingLanes,d|=g,l.lanes=d,rd(s,d)}}var iu={readContext:tr,useCallback:pn,useContext:pn,useEffect:pn,useImperativeHandle:pn,useInsertionEffect:pn,useLayoutEffect:pn,useMemo:pn,useReducer:pn,useRef:pn,useState:pn,useDebugValue:pn,useDeferredValue:pn,useTransition:pn,useMutableSource:pn,useSyncExternalStore:pn,useId:pn,unstable_isNewReconciler:!1},PE={readContext:tr,useCallback:function(s,l){return Tr().memoizedState=[s,l===void 0?null:l],s},useContext:tr,useEffect:cy,useImperativeHandle:function(s,l,d){return d=d!=null?d.concat([s]):null,nu(4194308,4,hy.bind(null,l,s),d)},useLayoutEffect:function(s,l){return nu(4194308,4,s,l)},useInsertionEffect:function(s,l){return nu(4,2,s,l)},useMemo:function(s,l){var d=Tr();return l=l===void 0?null:l,s=s(),d.memoizedState=[s,l],s},useReducer:function(s,l,d){var g=Tr();return l=d!==void 0?d(l):l,g.memoizedState=g.baseState=l,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:l},g.queue=s,s=s.dispatch=TE.bind(null,Dt,s),[g.memoizedState,s]},useRef:function(s){var l=Tr();return s={current:s},l.memoizedState=s},useState:ly,useDebugValue:tf,useDeferredValue:function(s){return Tr().memoizedState=s},useTransition:function(){var s=ly(!1),l=s[0];return s=NE.bind(null,s[1]),Tr().memoizedState=s,[l,s]},useMutableSource:function(){},useSyncExternalStore:function(s,l,d){var g=Dt,x=Tr();if(At){if(d===void 0)throw Error(n(407));d=d()}else{if(d=l(),nn===null)throw Error(n(349));(Qi&30)!==0||ry(g,l,d)}x.memoizedState=d;var E={value:d,getSnapshot:l};return x.queue=E,cy(sy.bind(null,g,E,s),[s]),g.flags|=2048,va(9,iy.bind(null,g,E,d,l),void 0,null),d},useId:function(){var s=Tr(),l=nn.identifierPrefix;if(At){var d=Kr,g=qr;d=(g&~(1<<32-cr(g)-1)).toString(32)+d,l=":"+l+"R"+d,d=ga++,0<d&&(l+="H"+d.toString(32)),l+=":"}else d=jE++,l=":"+l+"r"+d.toString(32)+":";return s.memoizedState=l},unstable_isNewReconciler:!1},RE={readContext:tr,useCallback:my,useContext:tr,useEffect:ef,useImperativeHandle:py,useInsertionEffect:dy,useLayoutEffect:fy,useMemo:gy,useReducer:Xd,useRef:uy,useState:function(){return Xd(ya)},useDebugValue:tf,useDeferredValue:function(s){var l=nr();return yy(l,Qt.memoizedState,s)},useTransition:function(){var s=Xd(ya)[0],l=nr().memoizedState;return[s,l]},useMutableSource:ty,useSyncExternalStore:ny,useId:vy,unstable_isNewReconciler:!1},AE={readContext:tr,useCallback:my,useContext:tr,useEffect:ef,useImperativeHandle:py,useInsertionEffect:dy,useLayoutEffect:fy,useMemo:gy,useReducer:Zd,useRef:uy,useState:function(){return Zd(ya)},useDebugValue:tf,useDeferredValue:function(s){var l=nr();return Qt===null?l.memoizedState=s:yy(l,Qt.memoizedState,s)},useTransition:function(){var s=Zd(ya)[0],l=nr().memoizedState;return[s,l]},useMutableSource:ty,useSyncExternalStore:ny,useId:vy,unstable_isNewReconciler:!1};function hr(s,l){if(s&&s.defaultProps){l=N({},l),s=s.defaultProps;for(var d in s)l[d]===void 0&&(l[d]=s[d]);return l}return l}function nf(s,l,d,g){l=s.memoizedState,d=d(g,l),d=d==null?l:N({},l,d),s.memoizedState=d,s.lanes===0&&(s.updateQueue.baseState=d)}var su={isMounted:function(s){return(s=s._reactInternals)?Hi(s)===s:!1},enqueueSetState:function(s,l,d){s=s._reactInternals;var g=Sn(),x=bi(s),E=Gr(g,x);E.payload=l,d!=null&&(E.callback=d),l=gi(s,E,x),l!==null&&(gr(l,s,x,g),Ql(l,s,x))},enqueueReplaceState:function(s,l,d){s=s._reactInternals;var g=Sn(),x=bi(s),E=Gr(g,x);E.tag=1,E.payload=l,d!=null&&(E.callback=d),l=gi(s,E,x),l!==null&&(gr(l,s,x,g),Ql(l,s,x))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var d=Sn(),g=bi(s),x=Gr(d,g);x.tag=2,l!=null&&(x.callback=l),l=gi(s,x,g),l!==null&&(gr(l,s,g,d),Ql(l,s,g))}};function ky(s,l,d,g,x,E,T){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(g,E,T):l.prototype&&l.prototype.isPureReactComponent?!ia(d,g)||!ia(x,E):!0}function Sy(s,l,d){var g=!1,x=hi,E=l.contextType;return typeof E=="object"&&E!==null?E=tr(E):(x=Tn(l)?qi:hn.current,g=l.contextTypes,E=(g=g!=null)?Bs(s,x):hi),l=new l(d,E),s.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=su,s.stateNode=l,l._reactInternals=s,g&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=x,s.__reactInternalMemoizedMaskedChildContext=E),l}function Ey(s,l,d,g){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,g),l.state!==s&&su.enqueueReplaceState(l,l.state,null)}function rf(s,l,d,g){var x=s.stateNode;x.props=d,x.state=s.memoizedState,x.refs={},Wd(s);var E=l.contextType;typeof E=="object"&&E!==null?x.context=tr(E):(E=Tn(l)?qi:hn.current,x.context=Bs(s,E)),x.state=s.memoizedState,E=l.getDerivedStateFromProps,typeof E=="function"&&(nf(s,l,E,d),x.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(l=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),l!==x.state&&su.enqueueReplaceState(x,x.state,null),Xl(s,d,x,g),x.state=s.memoizedState),typeof x.componentDidMount=="function"&&(s.flags|=4194308)}function Ys(s,l){try{var d="",g=l;do d+=he(g),g=g.return;while(g);var x=d}catch(E){x=`
Error generating stack: `+E.message+`
`+E.stack}return{value:s,source:l,stack:x,digest:null}}function sf(s,l,d){return{value:s,source:null,stack:d??null,digest:l??null}}function of(s,l){try{console.error(l.value)}catch(d){setTimeout(function(){throw d})}}var ME=typeof WeakMap=="function"?WeakMap:Map;function _y(s,l,d){d=Gr(-1,d),d.tag=3,d.payload={element:null};var g=l.value;return d.callback=function(){fu||(fu=!0,wf=g),of(s,l)},d}function Cy(s,l,d){d=Gr(-1,d),d.tag=3;var g=s.type.getDerivedStateFromError;if(typeof g=="function"){var x=l.value;d.payload=function(){return g(x)},d.callback=function(){of(s,l)}}var E=s.stateNode;return E!==null&&typeof E.componentDidCatch=="function"&&(d.callback=function(){of(s,l),typeof g!="function"&&(vi===null?vi=new Set([this]):vi.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})}),d}function jy(s,l,d){var g=s.pingCache;if(g===null){g=s.pingCache=new ME;var x=new Set;g.set(l,x)}else x=g.get(l),x===void 0&&(x=new Set,g.set(l,x));x.has(d)||(x.add(d),s=YE.bind(null,s,l,d),l.then(s,s))}function Ny(s){do{var l;if((l=s.tag===13)&&(l=s.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return s;s=s.return}while(s!==null);return null}function Ty(s,l,d,g,x){return(s.mode&1)===0?(s===l?s.flags|=65536:(s.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(l=Gr(-1,1),l.tag=2,gi(d,l,1))),d.lanes|=1),s):(s.flags|=65536,s.lanes=x,s)}var OE=I.ReactCurrentOwner,In=!1;function kn(s,l,d,g){l.child=s===null?Gg(l,null,d,g):Hs(l,s.child,d,g)}function Iy(s,l,d,g,x){d=d.render;var E=l.ref;return qs(l,x),g=Jd(s,l,d,g,E,x),d=Qd(),s!==null&&!In?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~x,Jr(s,l,x)):(At&&d&&Ad(l),l.flags|=1,kn(s,l,g,x),l.child)}function Py(s,l,d,g,x){if(s===null){var E=d.type;return typeof E=="function"&&!Nf(E)&&E.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(l.tag=15,l.type=E,Ry(s,l,E,g,x)):(s=vu(d.type,null,g,l,l.mode,x),s.ref=l.ref,s.return=l,l.child=s)}if(E=s.child,(s.lanes&x)===0){var T=E.memoizedProps;if(d=d.compare,d=d!==null?d:ia,d(T,g)&&s.ref===l.ref)return Jr(s,l,x)}return l.flags|=1,s=ki(E,g),s.ref=l.ref,s.return=l,l.child=s}function Ry(s,l,d,g,x){if(s!==null){var E=s.memoizedProps;if(ia(E,g)&&s.ref===l.ref)if(In=!1,l.pendingProps=g=E,(s.lanes&x)!==0)(s.flags&131072)!==0&&(In=!0);else return l.lanes=s.lanes,Jr(s,l,x)}return af(s,l,d,g,x)}function Ay(s,l,d){var g=l.pendingProps,x=g.children,E=s!==null?s.memoizedState:null;if(g.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},_t(Js,Vn),Vn|=d;else{if((d&1073741824)===0)return s=E!==null?E.baseLanes|d:d,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:s,cachePool:null,transitions:null},l.updateQueue=null,_t(Js,Vn),Vn|=s,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=E!==null?E.baseLanes:d,_t(Js,Vn),Vn|=g}else E!==null?(g=E.baseLanes|d,l.memoizedState=null):g=d,_t(Js,Vn),Vn|=g;return kn(s,l,x,d),l.child}function My(s,l){var d=l.ref;(s===null&&d!==null||s!==null&&s.ref!==d)&&(l.flags|=512,l.flags|=2097152)}function af(s,l,d,g,x){var E=Tn(d)?qi:hn.current;return E=Bs(l,E),qs(l,x),d=Jd(s,l,d,g,E,x),g=Qd(),s!==null&&!In?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~x,Jr(s,l,x)):(At&&g&&Ad(l),l.flags|=1,kn(s,l,d,x),l.child)}function Oy(s,l,d,g,x){if(Tn(d)){var E=!0;Wl(l)}else E=!1;if(qs(l,x),l.stateNode===null)au(s,l),Sy(l,d,g),rf(l,d,g,x),g=!0;else if(s===null){var T=l.stateNode,W=l.memoizedProps;T.props=W;var Q=T.context,ce=d.contextType;typeof ce=="object"&&ce!==null?ce=tr(ce):(ce=Tn(d)?qi:hn.current,ce=Bs(l,ce));var xe=d.getDerivedStateFromProps,we=typeof xe=="function"||typeof T.getSnapshotBeforeUpdate=="function";we||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(W!==g||Q!==ce)&&Ey(l,T,g,ce),mi=!1;var ve=l.memoizedState;T.state=ve,Xl(l,g,T,x),Q=l.memoizedState,W!==g||ve!==Q||Nn.current||mi?(typeof xe=="function"&&(nf(l,d,xe,g),Q=l.memoizedState),(W=mi||ky(l,d,W,g,ve,Q,ce))?(we||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(l.flags|=4194308)):(typeof T.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=Q),T.props=g,T.state=Q,T.context=ce,g=W):(typeof T.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{T=l.stateNode,Qg(s,l),W=l.memoizedProps,ce=l.type===l.elementType?W:hr(l.type,W),T.props=ce,we=l.pendingProps,ve=T.context,Q=d.contextType,typeof Q=="object"&&Q!==null?Q=tr(Q):(Q=Tn(d)?qi:hn.current,Q=Bs(l,Q));var Me=d.getDerivedStateFromProps;(xe=typeof Me=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(W!==we||ve!==Q)&&Ey(l,T,g,Q),mi=!1,ve=l.memoizedState,T.state=ve,Xl(l,g,T,x);var Le=l.memoizedState;W!==we||ve!==Le||Nn.current||mi?(typeof Me=="function"&&(nf(l,d,Me,g),Le=l.memoizedState),(ce=mi||ky(l,d,ce,g,ve,Le,Q)||!1)?(xe||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(g,Le,Q),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(g,Le,Q)),typeof T.componentDidUpdate=="function"&&(l.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof T.componentDidUpdate!="function"||W===s.memoizedProps&&ve===s.memoizedState||(l.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||W===s.memoizedProps&&ve===s.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=Le),T.props=g,T.state=Le,T.context=Q,g=ce):(typeof T.componentDidUpdate!="function"||W===s.memoizedProps&&ve===s.memoizedState||(l.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||W===s.memoizedProps&&ve===s.memoizedState||(l.flags|=1024),g=!1)}return lf(s,l,d,g,E,x)}function lf(s,l,d,g,x,E){My(s,l);var T=(l.flags&128)!==0;if(!g&&!T)return x&&Bg(l,d,!1),Jr(s,l,E);g=l.stateNode,OE.current=l;var W=T&&typeof d.getDerivedStateFromError!="function"?null:g.render();return l.flags|=1,s!==null&&T?(l.child=Hs(l,s.child,null,E),l.child=Hs(l,null,W,E)):kn(s,l,W,E),l.memoizedState=g.state,x&&Bg(l,d,!0),l.child}function Dy(s){var l=s.stateNode;l.pendingContext?$g(s,l.pendingContext,l.pendingContext!==l.context):l.context&&$g(s,l.context,!1),Hd(s,l.containerInfo)}function Ly(s,l,d,g,x){return Ws(),Ld(x),l.flags|=256,kn(s,l,d,g),l.child}var uf={dehydrated:null,treeContext:null,retryLane:0};function cf(s){return{baseLanes:s,cachePool:null,transitions:null}}function $y(s,l,d){var g=l.pendingProps,x=Ot.current,E=!1,T=(l.flags&128)!==0,W;if((W=T)||(W=s!==null&&s.memoizedState===null?!1:(x&2)!==0),W?(E=!0,l.flags&=-129):(s===null||s.memoizedState!==null)&&(x|=1),_t(Ot,x&1),s===null)return Dd(l),s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((l.mode&1)===0?l.lanes=1:s.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(T=g.children,s=g.fallback,E?(g=l.mode,E=l.child,T={mode:"hidden",children:T},(g&1)===0&&E!==null?(E.childLanes=0,E.pendingProps=T):E=xu(T,g,0,null),s=ns(s,g,d,null),E.return=l,s.return=l,E.sibling=s,l.child=E,l.child.memoizedState=cf(d),l.memoizedState=uf,s):df(l,T));if(x=s.memoizedState,x!==null&&(W=x.dehydrated,W!==null))return DE(s,l,T,g,W,x,d);if(E){E=g.fallback,T=l.mode,x=s.child,W=x.sibling;var Q={mode:"hidden",children:g.children};return(T&1)===0&&l.child!==x?(g=l.child,g.childLanes=0,g.pendingProps=Q,l.deletions=null):(g=ki(x,Q),g.subtreeFlags=x.subtreeFlags&14680064),W!==null?E=ki(W,E):(E=ns(E,T,d,null),E.flags|=2),E.return=l,g.return=l,g.sibling=E,l.child=g,g=E,E=l.child,T=s.child.memoizedState,T=T===null?cf(d):{baseLanes:T.baseLanes|d,cachePool:null,transitions:T.transitions},E.memoizedState=T,E.childLanes=s.childLanes&~d,l.memoizedState=uf,g}return E=s.child,s=E.sibling,g=ki(E,{mode:"visible",children:g.children}),(l.mode&1)===0&&(g.lanes=d),g.return=l,g.sibling=null,s!==null&&(d=l.deletions,d===null?(l.deletions=[s],l.flags|=16):d.push(s)),l.child=g,l.memoizedState=null,g}function df(s,l){return l=xu({mode:"visible",children:l},s.mode,0,null),l.return=s,s.child=l}function ou(s,l,d,g){return g!==null&&Ld(g),Hs(l,s.child,null,d),s=df(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function DE(s,l,d,g,x,E,T){if(d)return l.flags&256?(l.flags&=-257,g=sf(Error(n(422))),ou(s,l,T,g)):l.memoizedState!==null?(l.child=s.child,l.flags|=128,null):(E=g.fallback,x=l.mode,g=xu({mode:"visible",children:g.children},x,0,null),E=ns(E,x,T,null),E.flags|=2,g.return=l,E.return=l,g.sibling=E,l.child=g,(l.mode&1)!==0&&Hs(l,s.child,null,T),l.child.memoizedState=cf(T),l.memoizedState=uf,E);if((l.mode&1)===0)return ou(s,l,T,null);if(x.data==="$!"){if(g=x.nextSibling&&x.nextSibling.dataset,g)var W=g.dgst;return g=W,E=Error(n(419)),g=sf(E,g,void 0),ou(s,l,T,g)}if(W=(T&s.childLanes)!==0,In||W){if(g=nn,g!==null){switch(T&-T){case 4:x=2;break;case 16:x=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:x=32;break;case 536870912:x=268435456;break;default:x=0}x=(x&(g.suspendedLanes|T))!==0?0:x,x!==0&&x!==E.retryLane&&(E.retryLane=x,Yr(s,x),gr(g,s,x,-1))}return jf(),g=sf(Error(n(421))),ou(s,l,T,g)}return x.data==="$?"?(l.flags|=128,l.child=s.child,l=GE.bind(null,s),x._reactRetry=l,null):(s=E.treeContext,Hn=di(x.nextSibling),Wn=l,At=!0,fr=null,s!==null&&(Zn[er++]=qr,Zn[er++]=Kr,Zn[er++]=Ki,qr=s.id,Kr=s.overflow,Ki=l),l=df(l,g.children),l.flags|=4096,l)}function Fy(s,l,d){s.lanes|=l;var g=s.alternate;g!==null&&(g.lanes|=l),zd(s.return,l,d)}function ff(s,l,d,g,x){var E=s.memoizedState;E===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:d,tailMode:x}:(E.isBackwards=l,E.rendering=null,E.renderingStartTime=0,E.last=g,E.tail=d,E.tailMode=x)}function By(s,l,d){var g=l.pendingProps,x=g.revealOrder,E=g.tail;if(kn(s,l,g.children,d),g=Ot.current,(g&2)!==0)g=g&1|2,l.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Fy(s,d,l);else if(s.tag===19)Fy(s,d,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}g&=1}if(_t(Ot,g),(l.mode&1)===0)l.memoizedState=null;else switch(x){case"forwards":for(d=l.child,x=null;d!==null;)s=d.alternate,s!==null&&Zl(s)===null&&(x=d),d=d.sibling;d=x,d===null?(x=l.child,l.child=null):(x=d.sibling,d.sibling=null),ff(l,!1,x,d,E);break;case"backwards":for(d=null,x=l.child,l.child=null;x!==null;){if(s=x.alternate,s!==null&&Zl(s)===null){l.child=x;break}s=x.sibling,x.sibling=d,d=x,x=s}ff(l,!0,d,null,E);break;case"together":ff(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function au(s,l){(l.mode&1)===0&&s!==null&&(s.alternate=null,l.alternate=null,l.flags|=2)}function Jr(s,l,d){if(s!==null&&(l.dependencies=s.dependencies),Xi|=l.lanes,(d&l.childLanes)===0)return null;if(s!==null&&l.child!==s.child)throw Error(n(153));if(l.child!==null){for(s=l.child,d=ki(s,s.pendingProps),l.child=d,d.return=l;s.sibling!==null;)s=s.sibling,d=d.sibling=ki(s,s.pendingProps),d.return=l;d.sibling=null}return l.child}function LE(s,l,d){switch(l.tag){case 3:Dy(l),Ws();break;case 5:ey(l);break;case 1:Tn(l.type)&&Wl(l);break;case 4:Hd(l,l.stateNode.containerInfo);break;case 10:var g=l.type._context,x=l.memoizedProps.value;_t(Gl,g._currentValue),g._currentValue=x;break;case 13:if(g=l.memoizedState,g!==null)return g.dehydrated!==null?(_t(Ot,Ot.current&1),l.flags|=128,null):(d&l.child.childLanes)!==0?$y(s,l,d):(_t(Ot,Ot.current&1),s=Jr(s,l,d),s!==null?s.sibling:null);_t(Ot,Ot.current&1);break;case 19:if(g=(d&l.childLanes)!==0,(s.flags&128)!==0){if(g)return By(s,l,d);l.flags|=128}if(x=l.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),_t(Ot,Ot.current),g)break;return null;case 22:case 23:return l.lanes=0,Ay(s,l,d)}return Jr(s,l,d)}var zy,hf,Uy,Wy;zy=function(s,l){for(var d=l.child;d!==null;){if(d.tag===5||d.tag===6)s.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},hf=function(){},Uy=function(s,l,d,g){var x=s.memoizedProps;if(x!==g){s=l.stateNode,Ji(Nr.current);var E=null;switch(d){case"input":x=Ke(s,x),g=Ke(s,g),E=[];break;case"select":x=N({},x,{value:void 0}),g=N({},g,{value:void 0}),E=[];break;case"textarea":x=J(s,x),g=J(s,g),E=[];break;default:typeof x.onClick!="function"&&typeof g.onClick=="function"&&(s.onclick=Bl)}Re(d,g);var T;d=null;for(ce in x)if(!g.hasOwnProperty(ce)&&x.hasOwnProperty(ce)&&x[ce]!=null)if(ce==="style"){var W=x[ce];for(T in W)W.hasOwnProperty(T)&&(d||(d={}),d[T]="")}else ce!=="dangerouslySetInnerHTML"&&ce!=="children"&&ce!=="suppressContentEditableWarning"&&ce!=="suppressHydrationWarning"&&ce!=="autoFocus"&&(i.hasOwnProperty(ce)?E||(E=[]):(E=E||[]).push(ce,null));for(ce in g){var Q=g[ce];if(W=x!=null?x[ce]:void 0,g.hasOwnProperty(ce)&&Q!==W&&(Q!=null||W!=null))if(ce==="style")if(W){for(T in W)!W.hasOwnProperty(T)||Q&&Q.hasOwnProperty(T)||(d||(d={}),d[T]="");for(T in Q)Q.hasOwnProperty(T)&&W[T]!==Q[T]&&(d||(d={}),d[T]=Q[T])}else d||(E||(E=[]),E.push(ce,d)),d=Q;else ce==="dangerouslySetInnerHTML"?(Q=Q?Q.__html:void 0,W=W?W.__html:void 0,Q!=null&&W!==Q&&(E=E||[]).push(ce,Q)):ce==="children"?typeof Q!="string"&&typeof Q!="number"||(E=E||[]).push(ce,""+Q):ce!=="suppressContentEditableWarning"&&ce!=="suppressHydrationWarning"&&(i.hasOwnProperty(ce)?(Q!=null&&ce==="onScroll"&&Nt("scroll",s),E||W===Q||(E=[])):(E=E||[]).push(ce,Q))}d&&(E=E||[]).push("style",d);var ce=E;(l.updateQueue=ce)&&(l.flags|=4)}},Wy=function(s,l,d,g){d!==g&&(l.flags|=4)};function xa(s,l){if(!At)switch(s.tailMode){case"hidden":l=s.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?s.tail=null:d.sibling=null;break;case"collapsed":d=s.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:g.sibling=null}}function mn(s){var l=s.alternate!==null&&s.alternate.child===s.child,d=0,g=0;if(l)for(var x=s.child;x!==null;)d|=x.lanes|x.childLanes,g|=x.subtreeFlags&14680064,g|=x.flags&14680064,x.return=s,x=x.sibling;else for(x=s.child;x!==null;)d|=x.lanes|x.childLanes,g|=x.subtreeFlags,g|=x.flags,x.return=s,x=x.sibling;return s.subtreeFlags|=g,s.childLanes=d,l}function $E(s,l,d){var g=l.pendingProps;switch(Md(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mn(l),null;case 1:return Tn(l.type)&&Ul(),mn(l),null;case 3:return g=l.stateNode,Ks(),Tt(Nn),Tt(hn),Kd(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(s===null||s.child===null)&&(Kl(l)?l.flags|=4:s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,fr!==null&&(Ef(fr),fr=null))),hf(s,l),mn(l),null;case 5:Vd(l);var x=Ji(pa.current);if(d=l.type,s!==null&&l.stateNode!=null)Uy(s,l,d,g,x),s.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!g){if(l.stateNode===null)throw Error(n(166));return mn(l),null}if(s=Ji(Nr.current),Kl(l)){g=l.stateNode,d=l.type;var E=l.memoizedProps;switch(g[jr]=l,g[ua]=E,s=(l.mode&1)!==0,d){case"dialog":Nt("cancel",g),Nt("close",g);break;case"iframe":case"object":case"embed":Nt("load",g);break;case"video":case"audio":for(x=0;x<oa.length;x++)Nt(oa[x],g);break;case"source":Nt("error",g);break;case"img":case"image":case"link":Nt("error",g),Nt("load",g);break;case"details":Nt("toggle",g);break;case"input":rt(g,E),Nt("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!E.multiple},Nt("invalid",g);break;case"textarea":fe(g,E),Nt("invalid",g)}Re(d,E),x=null;for(var T in E)if(E.hasOwnProperty(T)){var W=E[T];T==="children"?typeof W=="string"?g.textContent!==W&&(E.suppressHydrationWarning!==!0&&Fl(g.textContent,W,s),x=["children",W]):typeof W=="number"&&g.textContent!==""+W&&(E.suppressHydrationWarning!==!0&&Fl(g.textContent,W,s),x=["children",""+W]):i.hasOwnProperty(T)&&W!=null&&T==="onScroll"&&Nt("scroll",g)}switch(d){case"input":ie(g),un(g,E,!0);break;case"textarea":ie(g),_e(g);break;case"select":case"option":break;default:typeof E.onClick=="function"&&(g.onclick=Bl)}g=x,l.updateQueue=g,g!==null&&(l.flags|=4)}else{T=x.nodeType===9?x:x.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Y(d)),s==="http://www.w3.org/1999/xhtml"?d==="script"?(s=T.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof g.is=="string"?s=T.createElement(d,{is:g.is}):(s=T.createElement(d),d==="select"&&(T=s,g.multiple?T.multiple=!0:g.size&&(T.size=g.size))):s=T.createElementNS(s,d),s[jr]=l,s[ua]=g,zy(s,l,!1,!1),l.stateNode=s;e:{switch(T=Pe(d,g),d){case"dialog":Nt("cancel",s),Nt("close",s),x=g;break;case"iframe":case"object":case"embed":Nt("load",s),x=g;break;case"video":case"audio":for(x=0;x<oa.length;x++)Nt(oa[x],s);x=g;break;case"source":Nt("error",s),x=g;break;case"img":case"image":case"link":Nt("error",s),Nt("load",s),x=g;break;case"details":Nt("toggle",s),x=g;break;case"input":rt(s,g),x=Ke(s,g),Nt("invalid",s);break;case"option":x=g;break;case"select":s._wrapperState={wasMultiple:!!g.multiple},x=N({},g,{value:void 0}),Nt("invalid",s);break;case"textarea":fe(s,g),x=J(s,g),Nt("invalid",s);break;default:x=g}Re(d,x),W=x;for(E in W)if(W.hasOwnProperty(E)){var Q=W[E];E==="style"?de(s,Q):E==="dangerouslySetInnerHTML"?(Q=Q?Q.__html:void 0,Q!=null&&le(s,Q)):E==="children"?typeof Q=="string"?(d!=="textarea"||Q!=="")&&X(s,Q):typeof Q=="number"&&X(s,""+Q):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(i.hasOwnProperty(E)?Q!=null&&E==="onScroll"&&Nt("scroll",s):Q!=null&&j(s,E,Q,T))}switch(d){case"input":ie(s),un(s,g,!1);break;case"textarea":ie(s),_e(s);break;case"option":g.value!=null&&s.setAttribute("value",""+je(g.value));break;case"select":s.multiple=!!g.multiple,E=g.value,E!=null?Pt(s,!!g.multiple,E,!1):g.defaultValue!=null&&Pt(s,!!g.multiple,g.defaultValue,!0);break;default:typeof x.onClick=="function"&&(s.onclick=Bl)}switch(d){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return mn(l),null;case 6:if(s&&l.stateNode!=null)Wy(s,l,s.memoizedProps,g);else{if(typeof g!="string"&&l.stateNode===null)throw Error(n(166));if(d=Ji(pa.current),Ji(Nr.current),Kl(l)){if(g=l.stateNode,d=l.memoizedProps,g[jr]=l,(E=g.nodeValue!==d)&&(s=Wn,s!==null))switch(s.tag){case 3:Fl(g.nodeValue,d,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Fl(g.nodeValue,d,(s.mode&1)!==0)}E&&(l.flags|=4)}else g=(d.nodeType===9?d:d.ownerDocument).createTextNode(g),g[jr]=l,l.stateNode=g}return mn(l),null;case 13:if(Tt(Ot),g=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(At&&Hn!==null&&(l.mode&1)!==0&&(l.flags&128)===0)qg(),Ws(),l.flags|=98560,E=!1;else if(E=Kl(l),g!==null&&g.dehydrated!==null){if(s===null){if(!E)throw Error(n(318));if(E=l.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(n(317));E[jr]=l}else Ws(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;mn(l),E=!1}else fr!==null&&(Ef(fr),fr=null),E=!0;if(!E)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=d,l):(g=g!==null,g!==(s!==null&&s.memoizedState!==null)&&g&&(l.child.flags|=8192,(l.mode&1)!==0&&(s===null||(Ot.current&1)!==0?Xt===0&&(Xt=3):jf())),l.updateQueue!==null&&(l.flags|=4),mn(l),null);case 4:return Ks(),hf(s,l),s===null&&aa(l.stateNode.containerInfo),mn(l),null;case 10:return Bd(l.type._context),mn(l),null;case 17:return Tn(l.type)&&Ul(),mn(l),null;case 19:if(Tt(Ot),E=l.memoizedState,E===null)return mn(l),null;if(g=(l.flags&128)!==0,T=E.rendering,T===null)if(g)xa(E,!1);else{if(Xt!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(T=Zl(s),T!==null){for(l.flags|=128,xa(E,!1),g=T.updateQueue,g!==null&&(l.updateQueue=g,l.flags|=4),l.subtreeFlags=0,g=d,d=l.child;d!==null;)E=d,s=g,E.flags&=14680066,T=E.alternate,T===null?(E.childLanes=0,E.lanes=s,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=T.childLanes,E.lanes=T.lanes,E.child=T.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=T.memoizedProps,E.memoizedState=T.memoizedState,E.updateQueue=T.updateQueue,E.type=T.type,s=T.dependencies,E.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),d=d.sibling;return _t(Ot,Ot.current&1|2),l.child}s=s.sibling}E.tail!==null&&Bt()>Qs&&(l.flags|=128,g=!0,xa(E,!1),l.lanes=4194304)}else{if(!g)if(s=Zl(T),s!==null){if(l.flags|=128,g=!0,d=s.updateQueue,d!==null&&(l.updateQueue=d,l.flags|=4),xa(E,!0),E.tail===null&&E.tailMode==="hidden"&&!T.alternate&&!At)return mn(l),null}else 2*Bt()-E.renderingStartTime>Qs&&d!==1073741824&&(l.flags|=128,g=!0,xa(E,!1),l.lanes=4194304);E.isBackwards?(T.sibling=l.child,l.child=T):(d=E.last,d!==null?d.sibling=T:l.child=T,E.last=T)}return E.tail!==null?(l=E.tail,E.rendering=l,E.tail=l.sibling,E.renderingStartTime=Bt(),l.sibling=null,d=Ot.current,_t(Ot,g?d&1|2:d&1),l):(mn(l),null);case 22:case 23:return Cf(),g=l.memoizedState!==null,s!==null&&s.memoizedState!==null!==g&&(l.flags|=8192),g&&(l.mode&1)!==0?(Vn&1073741824)!==0&&(mn(l),l.subtreeFlags&6&&(l.flags|=8192)):mn(l),null;case 24:return null;case 25:return null}throw Error(n(156,l.tag))}function FE(s,l){switch(Md(l),l.tag){case 1:return Tn(l.type)&&Ul(),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return Ks(),Tt(Nn),Tt(hn),Kd(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 5:return Vd(l),null;case 13:if(Tt(Ot),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(n(340));Ws()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return Tt(Ot),null;case 4:return Ks(),null;case 10:return Bd(l.type._context),null;case 22:case 23:return Cf(),null;case 24:return null;default:return null}}var lu=!1,gn=!1,BE=typeof WeakSet=="function"?WeakSet:Set,Oe=null;function Gs(s,l){var d=s.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(g){$t(s,l,g)}else d.current=null}function pf(s,l,d){try{d()}catch(g){$t(s,l,g)}}var Hy=!1;function zE(s,l){if(_d=Nl,s=kg(),yd(s)){if("selectionStart"in s)var d={start:s.selectionStart,end:s.selectionEnd};else e:{d=(d=s.ownerDocument)&&d.defaultView||window;var g=d.getSelection&&d.getSelection();if(g&&g.rangeCount!==0){d=g.anchorNode;var x=g.anchorOffset,E=g.focusNode;g=g.focusOffset;try{d.nodeType,E.nodeType}catch{d=null;break e}var T=0,W=-1,Q=-1,ce=0,xe=0,we=s,ve=null;t:for(;;){for(var Me;we!==d||x!==0&&we.nodeType!==3||(W=T+x),we!==E||g!==0&&we.nodeType!==3||(Q=T+g),we.nodeType===3&&(T+=we.nodeValue.length),(Me=we.firstChild)!==null;)ve=we,we=Me;for(;;){if(we===s)break t;if(ve===d&&++ce===x&&(W=T),ve===E&&++xe===g&&(Q=T),(Me=we.nextSibling)!==null)break;we=ve,ve=we.parentNode}we=Me}d=W===-1||Q===-1?null:{start:W,end:Q}}else d=null}d=d||{start:0,end:0}}else d=null;for(Cd={focusedElem:s,selectionRange:d},Nl=!1,Oe=l;Oe!==null;)if(l=Oe,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,Oe=s;else for(;Oe!==null;){l=Oe;try{var Le=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(Le!==null){var Be=Le.memoizedProps,zt=Le.memoizedState,oe=l.stateNode,ne=oe.getSnapshotBeforeUpdate(l.elementType===l.type?Be:hr(l.type,Be),zt);oe.__reactInternalSnapshotBeforeUpdate=ne}break;case 3:var ae=l.stateNode.containerInfo;ae.nodeType===1?ae.textContent="":ae.nodeType===9&&ae.documentElement&&ae.removeChild(ae.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Se){$t(l,l.return,Se)}if(s=l.sibling,s!==null){s.return=l.return,Oe=s;break}Oe=l.return}return Le=Hy,Hy=!1,Le}function ba(s,l,d){var g=l.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var x=g=g.next;do{if((x.tag&s)===s){var E=x.destroy;x.destroy=void 0,E!==void 0&&pf(l,d,E)}x=x.next}while(x!==g)}}function uu(s,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var d=l=l.next;do{if((d.tag&s)===s){var g=d.create;d.destroy=g()}d=d.next}while(d!==l)}}function mf(s){var l=s.ref;if(l!==null){var d=s.stateNode;switch(s.tag){case 5:s=d;break;default:s=d}typeof l=="function"?l(s):l.current=s}}function Vy(s){var l=s.alternate;l!==null&&(s.alternate=null,Vy(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&(delete l[jr],delete l[ua],delete l[Id],delete l[SE],delete l[EE])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function qy(s){return s.tag===5||s.tag===3||s.tag===4}function Ky(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||qy(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function gf(s,l,d){var g=s.tag;if(g===5||g===6)s=s.stateNode,l?d.nodeType===8?d.parentNode.insertBefore(s,l):d.insertBefore(s,l):(d.nodeType===8?(l=d.parentNode,l.insertBefore(s,d)):(l=d,l.appendChild(s)),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=Bl));else if(g!==4&&(s=s.child,s!==null))for(gf(s,l,d),s=s.sibling;s!==null;)gf(s,l,d),s=s.sibling}function yf(s,l,d){var g=s.tag;if(g===5||g===6)s=s.stateNode,l?d.insertBefore(s,l):d.appendChild(s);else if(g!==4&&(s=s.child,s!==null))for(yf(s,l,d),s=s.sibling;s!==null;)yf(s,l,d),s=s.sibling}var cn=null,pr=!1;function yi(s,l,d){for(d=d.child;d!==null;)Yy(s,l,d),d=d.sibling}function Yy(s,l,d){if(Cr&&typeof Cr.onCommitFiberUnmount=="function")try{Cr.onCommitFiberUnmount(kl,d)}catch{}switch(d.tag){case 5:gn||Gs(d,l);case 6:var g=cn,x=pr;cn=null,yi(s,l,d),cn=g,pr=x,cn!==null&&(pr?(s=cn,d=d.stateNode,s.nodeType===8?s.parentNode.removeChild(d):s.removeChild(d)):cn.removeChild(d.stateNode));break;case 18:cn!==null&&(pr?(s=cn,d=d.stateNode,s.nodeType===8?Td(s.parentNode,d):s.nodeType===1&&Td(s,d),Xo(s)):Td(cn,d.stateNode));break;case 4:g=cn,x=pr,cn=d.stateNode.containerInfo,pr=!0,yi(s,l,d),cn=g,pr=x;break;case 0:case 11:case 14:case 15:if(!gn&&(g=d.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){x=g=g.next;do{var E=x,T=E.destroy;E=E.tag,T!==void 0&&((E&2)!==0||(E&4)!==0)&&pf(d,l,T),x=x.next}while(x!==g)}yi(s,l,d);break;case 1:if(!gn&&(Gs(d,l),g=d.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=d.memoizedProps,g.state=d.memoizedState,g.componentWillUnmount()}catch(W){$t(d,l,W)}yi(s,l,d);break;case 21:yi(s,l,d);break;case 22:d.mode&1?(gn=(g=gn)||d.memoizedState!==null,yi(s,l,d),gn=g):yi(s,l,d);break;default:yi(s,l,d)}}function Gy(s){var l=s.updateQueue;if(l!==null){s.updateQueue=null;var d=s.stateNode;d===null&&(d=s.stateNode=new BE),l.forEach(function(g){var x=JE.bind(null,s,g);d.has(g)||(d.add(g),g.then(x,x))})}}function mr(s,l){var d=l.deletions;if(d!==null)for(var g=0;g<d.length;g++){var x=d[g];try{var E=s,T=l,W=T;e:for(;W!==null;){switch(W.tag){case 5:cn=W.stateNode,pr=!1;break e;case 3:cn=W.stateNode.containerInfo,pr=!0;break e;case 4:cn=W.stateNode.containerInfo,pr=!0;break e}W=W.return}if(cn===null)throw Error(n(160));Yy(E,T,x),cn=null,pr=!1;var Q=x.alternate;Q!==null&&(Q.return=null),x.return=null}catch(ce){$t(x,l,ce)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)Jy(l,s),l=l.sibling}function Jy(s,l){var d=s.alternate,g=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(mr(l,s),Ir(s),g&4){try{ba(3,s,s.return),uu(3,s)}catch(Be){$t(s,s.return,Be)}try{ba(5,s,s.return)}catch(Be){$t(s,s.return,Be)}}break;case 1:mr(l,s),Ir(s),g&512&&d!==null&&Gs(d,d.return);break;case 5:if(mr(l,s),Ir(s),g&512&&d!==null&&Gs(d,d.return),s.flags&32){var x=s.stateNode;try{X(x,"")}catch(Be){$t(s,s.return,Be)}}if(g&4&&(x=s.stateNode,x!=null)){var E=s.memoizedProps,T=d!==null?d.memoizedProps:E,W=s.type,Q=s.updateQueue;if(s.updateQueue=null,Q!==null)try{W==="input"&&E.type==="radio"&&E.name!=null&&st(x,E),Pe(W,T);var ce=Pe(W,E);for(T=0;T<Q.length;T+=2){var xe=Q[T],we=Q[T+1];xe==="style"?de(x,we):xe==="dangerouslySetInnerHTML"?le(x,we):xe==="children"?X(x,we):j(x,xe,we,ce)}switch(W){case"input":kt(x,E);break;case"textarea":ye(x,E);break;case"select":var ve=x._wrapperState.wasMultiple;x._wrapperState.wasMultiple=!!E.multiple;var Me=E.value;Me!=null?Pt(x,!!E.multiple,Me,!1):ve!==!!E.multiple&&(E.defaultValue!=null?Pt(x,!!E.multiple,E.defaultValue,!0):Pt(x,!!E.multiple,E.multiple?[]:"",!1))}x[ua]=E}catch(Be){$t(s,s.return,Be)}}break;case 6:if(mr(l,s),Ir(s),g&4){if(s.stateNode===null)throw Error(n(162));x=s.stateNode,E=s.memoizedProps;try{x.nodeValue=E}catch(Be){$t(s,s.return,Be)}}break;case 3:if(mr(l,s),Ir(s),g&4&&d!==null&&d.memoizedState.isDehydrated)try{Xo(l.containerInfo)}catch(Be){$t(s,s.return,Be)}break;case 4:mr(l,s),Ir(s);break;case 13:mr(l,s),Ir(s),x=s.child,x.flags&8192&&(E=x.memoizedState!==null,x.stateNode.isHidden=E,!E||x.alternate!==null&&x.alternate.memoizedState!==null||(bf=Bt())),g&4&&Gy(s);break;case 22:if(xe=d!==null&&d.memoizedState!==null,s.mode&1?(gn=(ce=gn)||xe,mr(l,s),gn=ce):mr(l,s),Ir(s),g&8192){if(ce=s.memoizedState!==null,(s.stateNode.isHidden=ce)&&!xe&&(s.mode&1)!==0)for(Oe=s,xe=s.child;xe!==null;){for(we=Oe=xe;Oe!==null;){switch(ve=Oe,Me=ve.child,ve.tag){case 0:case 11:case 14:case 15:ba(4,ve,ve.return);break;case 1:Gs(ve,ve.return);var Le=ve.stateNode;if(typeof Le.componentWillUnmount=="function"){g=ve,d=ve.return;try{l=g,Le.props=l.memoizedProps,Le.state=l.memoizedState,Le.componentWillUnmount()}catch(Be){$t(g,d,Be)}}break;case 5:Gs(ve,ve.return);break;case 22:if(ve.memoizedState!==null){Zy(we);continue}}Me!==null?(Me.return=ve,Oe=Me):Zy(we)}xe=xe.sibling}e:for(xe=null,we=s;;){if(we.tag===5){if(xe===null){xe=we;try{x=we.stateNode,ce?(E=x.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none"):(W=we.stateNode,Q=we.memoizedProps.style,T=Q!=null&&Q.hasOwnProperty("display")?Q.display:null,W.style.display=G("display",T))}catch(Be){$t(s,s.return,Be)}}}else if(we.tag===6){if(xe===null)try{we.stateNode.nodeValue=ce?"":we.memoizedProps}catch(Be){$t(s,s.return,Be)}}else if((we.tag!==22&&we.tag!==23||we.memoizedState===null||we===s)&&we.child!==null){we.child.return=we,we=we.child;continue}if(we===s)break e;for(;we.sibling===null;){if(we.return===null||we.return===s)break e;xe===we&&(xe=null),we=we.return}xe===we&&(xe=null),we.sibling.return=we.return,we=we.sibling}}break;case 19:mr(l,s),Ir(s),g&4&&Gy(s);break;case 21:break;default:mr(l,s),Ir(s)}}function Ir(s){var l=s.flags;if(l&2){try{e:{for(var d=s.return;d!==null;){if(qy(d)){var g=d;break e}d=d.return}throw Error(n(160))}switch(g.tag){case 5:var x=g.stateNode;g.flags&32&&(X(x,""),g.flags&=-33);var E=Ky(s);yf(s,E,x);break;case 3:case 4:var T=g.stateNode.containerInfo,W=Ky(s);gf(s,W,T);break;default:throw Error(n(161))}}catch(Q){$t(s,s.return,Q)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function UE(s,l,d){Oe=s,Qy(s)}function Qy(s,l,d){for(var g=(s.mode&1)!==0;Oe!==null;){var x=Oe,E=x.child;if(x.tag===22&&g){var T=x.memoizedState!==null||lu;if(!T){var W=x.alternate,Q=W!==null&&W.memoizedState!==null||gn;W=lu;var ce=gn;if(lu=T,(gn=Q)&&!ce)for(Oe=x;Oe!==null;)T=Oe,Q=T.child,T.tag===22&&T.memoizedState!==null?ev(x):Q!==null?(Q.return=T,Oe=Q):ev(x);for(;E!==null;)Oe=E,Qy(E),E=E.sibling;Oe=x,lu=W,gn=ce}Xy(s)}else(x.subtreeFlags&8772)!==0&&E!==null?(E.return=x,Oe=E):Xy(s)}}function Xy(s){for(;Oe!==null;){var l=Oe;if((l.flags&8772)!==0){var d=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:gn||uu(5,l);break;case 1:var g=l.stateNode;if(l.flags&4&&!gn)if(d===null)g.componentDidMount();else{var x=l.elementType===l.type?d.memoizedProps:hr(l.type,d.memoizedProps);g.componentDidUpdate(x,d.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var E=l.updateQueue;E!==null&&Zg(l,E,g);break;case 3:var T=l.updateQueue;if(T!==null){if(d=null,l.child!==null)switch(l.child.tag){case 5:d=l.child.stateNode;break;case 1:d=l.child.stateNode}Zg(l,T,d)}break;case 5:var W=l.stateNode;if(d===null&&l.flags&4){d=W;var Q=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":Q.autoFocus&&d.focus();break;case"img":Q.src&&(d.src=Q.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var ce=l.alternate;if(ce!==null){var xe=ce.memoizedState;if(xe!==null){var we=xe.dehydrated;we!==null&&Xo(we)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}gn||l.flags&512&&mf(l)}catch(ve){$t(l,l.return,ve)}}if(l===s){Oe=null;break}if(d=l.sibling,d!==null){d.return=l.return,Oe=d;break}Oe=l.return}}function Zy(s){for(;Oe!==null;){var l=Oe;if(l===s){Oe=null;break}var d=l.sibling;if(d!==null){d.return=l.return,Oe=d;break}Oe=l.return}}function ev(s){for(;Oe!==null;){var l=Oe;try{switch(l.tag){case 0:case 11:case 15:var d=l.return;try{uu(4,l)}catch(Q){$t(l,d,Q)}break;case 1:var g=l.stateNode;if(typeof g.componentDidMount=="function"){var x=l.return;try{g.componentDidMount()}catch(Q){$t(l,x,Q)}}var E=l.return;try{mf(l)}catch(Q){$t(l,E,Q)}break;case 5:var T=l.return;try{mf(l)}catch(Q){$t(l,T,Q)}}}catch(Q){$t(l,l.return,Q)}if(l===s){Oe=null;break}var W=l.sibling;if(W!==null){W.return=l.return,Oe=W;break}Oe=l.return}}var WE=Math.ceil,cu=I.ReactCurrentDispatcher,vf=I.ReactCurrentOwner,rr=I.ReactCurrentBatchConfig,pt=0,nn=null,Wt=null,dn=0,Vn=0,Js=fi(0),Xt=0,wa=null,Xi=0,du=0,xf=0,ka=null,Pn=null,bf=0,Qs=1/0,Qr=null,fu=!1,wf=null,vi=null,hu=!1,xi=null,pu=0,Sa=0,kf=null,mu=-1,gu=0;function Sn(){return(pt&6)!==0?Bt():mu!==-1?mu:mu=Bt()}function bi(s){return(s.mode&1)===0?1:(pt&2)!==0&&dn!==0?dn&-dn:CE.transition!==null?(gu===0&&(gu=Km()),gu):(s=vt,s!==0||(s=window.event,s=s===void 0?16:ng(s.type)),s)}function gr(s,l,d,g){if(50<Sa)throw Sa=0,kf=null,Error(n(185));Ko(s,d,g),((pt&2)===0||s!==nn)&&(s===nn&&((pt&2)===0&&(du|=d),Xt===4&&wi(s,dn)),Rn(s,g),d===1&&pt===0&&(l.mode&1)===0&&(Qs=Bt()+500,Hl&&pi()))}function Rn(s,l){var d=s.callbackNode;CS(s,l);var g=_l(s,s===nn?dn:0);if(g===0)d!==null&&Hm(d),s.callbackNode=null,s.callbackPriority=0;else if(l=g&-g,s.callbackPriority!==l){if(d!=null&&Hm(d),l===1)s.tag===0?_E(nv.bind(null,s)):zg(nv.bind(null,s)),wE(function(){(pt&6)===0&&pi()}),d=null;else{switch(Ym(g)){case 1:d=ed;break;case 4:d=Vm;break;case 16:d=wl;break;case 536870912:d=qm;break;default:d=wl}d=cv(d,tv.bind(null,s))}s.callbackPriority=l,s.callbackNode=d}}function tv(s,l){if(mu=-1,gu=0,(pt&6)!==0)throw Error(n(327));var d=s.callbackNode;if(Xs()&&s.callbackNode!==d)return null;var g=_l(s,s===nn?dn:0);if(g===0)return null;if((g&30)!==0||(g&s.expiredLanes)!==0||l)l=yu(s,g);else{l=g;var x=pt;pt|=2;var E=iv();(nn!==s||dn!==l)&&(Qr=null,Qs=Bt()+500,es(s,l));do try{qE();break}catch(W){rv(s,W)}while(!0);Fd(),cu.current=E,pt=x,Wt!==null?l=0:(nn=null,dn=0,l=Xt)}if(l!==0){if(l===2&&(x=td(s),x!==0&&(g=x,l=Sf(s,x))),l===1)throw d=wa,es(s,0),wi(s,g),Rn(s,Bt()),d;if(l===6)wi(s,g);else{if(x=s.current.alternate,(g&30)===0&&!HE(x)&&(l=yu(s,g),l===2&&(E=td(s),E!==0&&(g=E,l=Sf(s,E))),l===1))throw d=wa,es(s,0),wi(s,g),Rn(s,Bt()),d;switch(s.finishedWork=x,s.finishedLanes=g,l){case 0:case 1:throw Error(n(345));case 2:ts(s,Pn,Qr);break;case 3:if(wi(s,g),(g&130023424)===g&&(l=bf+500-Bt(),10<l)){if(_l(s,0)!==0)break;if(x=s.suspendedLanes,(x&g)!==g){Sn(),s.pingedLanes|=s.suspendedLanes&x;break}s.timeoutHandle=Nd(ts.bind(null,s,Pn,Qr),l);break}ts(s,Pn,Qr);break;case 4:if(wi(s,g),(g&4194240)===g)break;for(l=s.eventTimes,x=-1;0<g;){var T=31-cr(g);E=1<<T,T=l[T],T>x&&(x=T),g&=~E}if(g=x,g=Bt()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*WE(g/1960))-g,10<g){s.timeoutHandle=Nd(ts.bind(null,s,Pn,Qr),g);break}ts(s,Pn,Qr);break;case 5:ts(s,Pn,Qr);break;default:throw Error(n(329))}}}return Rn(s,Bt()),s.callbackNode===d?tv.bind(null,s):null}function Sf(s,l){var d=ka;return s.current.memoizedState.isDehydrated&&(es(s,l).flags|=256),s=yu(s,l),s!==2&&(l=Pn,Pn=d,l!==null&&Ef(l)),s}function Ef(s){Pn===null?Pn=s:Pn.push.apply(Pn,s)}function HE(s){for(var l=s;;){if(l.flags&16384){var d=l.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var g=0;g<d.length;g++){var x=d[g],E=x.getSnapshot;x=x.value;try{if(!dr(E(),x))return!1}catch{return!1}}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function wi(s,l){for(l&=~xf,l&=~du,s.suspendedLanes|=l,s.pingedLanes&=~l,s=s.expirationTimes;0<l;){var d=31-cr(l),g=1<<d;s[d]=-1,l&=~g}}function nv(s){if((pt&6)!==0)throw Error(n(327));Xs();var l=_l(s,0);if((l&1)===0)return Rn(s,Bt()),null;var d=yu(s,l);if(s.tag!==0&&d===2){var g=td(s);g!==0&&(l=g,d=Sf(s,g))}if(d===1)throw d=wa,es(s,0),wi(s,l),Rn(s,Bt()),d;if(d===6)throw Error(n(345));return s.finishedWork=s.current.alternate,s.finishedLanes=l,ts(s,Pn,Qr),Rn(s,Bt()),null}function _f(s,l){var d=pt;pt|=1;try{return s(l)}finally{pt=d,pt===0&&(Qs=Bt()+500,Hl&&pi())}}function Zi(s){xi!==null&&xi.tag===0&&(pt&6)===0&&Xs();var l=pt;pt|=1;var d=rr.transition,g=vt;try{if(rr.transition=null,vt=1,s)return s()}finally{vt=g,rr.transition=d,pt=l,(pt&6)===0&&pi()}}function Cf(){Vn=Js.current,Tt(Js)}function es(s,l){s.finishedWork=null,s.finishedLanes=0;var d=s.timeoutHandle;if(d!==-1&&(s.timeoutHandle=-1,bE(d)),Wt!==null)for(d=Wt.return;d!==null;){var g=d;switch(Md(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&Ul();break;case 3:Ks(),Tt(Nn),Tt(hn),Kd();break;case 5:Vd(g);break;case 4:Ks();break;case 13:Tt(Ot);break;case 19:Tt(Ot);break;case 10:Bd(g.type._context);break;case 22:case 23:Cf()}d=d.return}if(nn=s,Wt=s=ki(s.current,null),dn=Vn=l,Xt=0,wa=null,xf=du=Xi=0,Pn=ka=null,Gi!==null){for(l=0;l<Gi.length;l++)if(d=Gi[l],g=d.interleaved,g!==null){d.interleaved=null;var x=g.next,E=d.pending;if(E!==null){var T=E.next;E.next=x,g.next=T}d.pending=g}Gi=null}return s}function rv(s,l){do{var d=Wt;try{if(Fd(),eu.current=iu,tu){for(var g=Dt.memoizedState;g!==null;){var x=g.queue;x!==null&&(x.pending=null),g=g.next}tu=!1}if(Qi=0,tn=Qt=Dt=null,ma=!1,ga=0,vf.current=null,d===null||d.return===null){Xt=1,wa=l,Wt=null;break}e:{var E=s,T=d.return,W=d,Q=l;if(l=dn,W.flags|=32768,Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var ce=Q,xe=W,we=xe.tag;if((xe.mode&1)===0&&(we===0||we===11||we===15)){var ve=xe.alternate;ve?(xe.updateQueue=ve.updateQueue,xe.memoizedState=ve.memoizedState,xe.lanes=ve.lanes):(xe.updateQueue=null,xe.memoizedState=null)}var Me=Ny(T);if(Me!==null){Me.flags&=-257,Ty(Me,T,W,E,l),Me.mode&1&&jy(E,ce,l),l=Me,Q=ce;var Le=l.updateQueue;if(Le===null){var Be=new Set;Be.add(Q),l.updateQueue=Be}else Le.add(Q);break e}else{if((l&1)===0){jy(E,ce,l),jf();break e}Q=Error(n(426))}}else if(At&&W.mode&1){var zt=Ny(T);if(zt!==null){(zt.flags&65536)===0&&(zt.flags|=256),Ty(zt,T,W,E,l),Ld(Ys(Q,W));break e}}E=Q=Ys(Q,W),Xt!==4&&(Xt=2),ka===null?ka=[E]:ka.push(E),E=T;do{switch(E.tag){case 3:E.flags|=65536,l&=-l,E.lanes|=l;var oe=_y(E,Q,l);Xg(E,oe);break e;case 1:W=Q;var ne=E.type,ae=E.stateNode;if((E.flags&128)===0&&(typeof ne.getDerivedStateFromError=="function"||ae!==null&&typeof ae.componentDidCatch=="function"&&(vi===null||!vi.has(ae)))){E.flags|=65536,l&=-l,E.lanes|=l;var Se=Cy(E,W,l);Xg(E,Se);break e}}E=E.return}while(E!==null)}ov(d)}catch(We){l=We,Wt===d&&d!==null&&(Wt=d=d.return);continue}break}while(!0)}function iv(){var s=cu.current;return cu.current=iu,s===null?iu:s}function jf(){(Xt===0||Xt===3||Xt===2)&&(Xt=4),nn===null||(Xi&268435455)===0&&(du&268435455)===0||wi(nn,dn)}function yu(s,l){var d=pt;pt|=2;var g=iv();(nn!==s||dn!==l)&&(Qr=null,es(s,l));do try{VE();break}catch(x){rv(s,x)}while(!0);if(Fd(),pt=d,cu.current=g,Wt!==null)throw Error(n(261));return nn=null,dn=0,Xt}function VE(){for(;Wt!==null;)sv(Wt)}function qE(){for(;Wt!==null&&!yS();)sv(Wt)}function sv(s){var l=uv(s.alternate,s,Vn);s.memoizedProps=s.pendingProps,l===null?ov(s):Wt=l,vf.current=null}function ov(s){var l=s;do{var d=l.alternate;if(s=l.return,(l.flags&32768)===0){if(d=$E(d,l,Vn),d!==null){Wt=d;return}}else{if(d=FE(d,l),d!==null){d.flags&=32767,Wt=d;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Xt=6,Wt=null;return}}if(l=l.sibling,l!==null){Wt=l;return}Wt=l=s}while(l!==null);Xt===0&&(Xt=5)}function ts(s,l,d){var g=vt,x=rr.transition;try{rr.transition=null,vt=1,KE(s,l,d,g)}finally{rr.transition=x,vt=g}return null}function KE(s,l,d,g){do Xs();while(xi!==null);if((pt&6)!==0)throw Error(n(327));d=s.finishedWork;var x=s.finishedLanes;if(d===null)return null;if(s.finishedWork=null,s.finishedLanes=0,d===s.current)throw Error(n(177));s.callbackNode=null,s.callbackPriority=0;var E=d.lanes|d.childLanes;if(jS(s,E),s===nn&&(Wt=nn=null,dn=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||hu||(hu=!0,cv(wl,function(){return Xs(),null})),E=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||E){E=rr.transition,rr.transition=null;var T=vt;vt=1;var W=pt;pt|=4,vf.current=null,zE(s,d),Jy(d,s),hE(Cd),Nl=!!_d,Cd=_d=null,s.current=d,UE(d),vS(),pt=W,vt=T,rr.transition=E}else s.current=d;if(hu&&(hu=!1,xi=s,pu=x),E=s.pendingLanes,E===0&&(vi=null),wS(d.stateNode),Rn(s,Bt()),l!==null)for(g=s.onRecoverableError,d=0;d<l.length;d++)x=l[d],g(x.value,{componentStack:x.stack,digest:x.digest});if(fu)throw fu=!1,s=wf,wf=null,s;return(pu&1)!==0&&s.tag!==0&&Xs(),E=s.pendingLanes,(E&1)!==0?s===kf?Sa++:(Sa=0,kf=s):Sa=0,pi(),null}function Xs(){if(xi!==null){var s=Ym(pu),l=rr.transition,d=vt;try{if(rr.transition=null,vt=16>s?16:s,xi===null)var g=!1;else{if(s=xi,xi=null,pu=0,(pt&6)!==0)throw Error(n(331));var x=pt;for(pt|=4,Oe=s.current;Oe!==null;){var E=Oe,T=E.child;if((Oe.flags&16)!==0){var W=E.deletions;if(W!==null){for(var Q=0;Q<W.length;Q++){var ce=W[Q];for(Oe=ce;Oe!==null;){var xe=Oe;switch(xe.tag){case 0:case 11:case 15:ba(8,xe,E)}var we=xe.child;if(we!==null)we.return=xe,Oe=we;else for(;Oe!==null;){xe=Oe;var ve=xe.sibling,Me=xe.return;if(Vy(xe),xe===ce){Oe=null;break}if(ve!==null){ve.return=Me,Oe=ve;break}Oe=Me}}}var Le=E.alternate;if(Le!==null){var Be=Le.child;if(Be!==null){Le.child=null;do{var zt=Be.sibling;Be.sibling=null,Be=zt}while(Be!==null)}}Oe=E}}if((E.subtreeFlags&2064)!==0&&T!==null)T.return=E,Oe=T;else e:for(;Oe!==null;){if(E=Oe,(E.flags&2048)!==0)switch(E.tag){case 0:case 11:case 15:ba(9,E,E.return)}var oe=E.sibling;if(oe!==null){oe.return=E.return,Oe=oe;break e}Oe=E.return}}var ne=s.current;for(Oe=ne;Oe!==null;){T=Oe;var ae=T.child;if((T.subtreeFlags&2064)!==0&&ae!==null)ae.return=T,Oe=ae;else e:for(T=ne;Oe!==null;){if(W=Oe,(W.flags&2048)!==0)try{switch(W.tag){case 0:case 11:case 15:uu(9,W)}}catch(We){$t(W,W.return,We)}if(W===T){Oe=null;break e}var Se=W.sibling;if(Se!==null){Se.return=W.return,Oe=Se;break e}Oe=W.return}}if(pt=x,pi(),Cr&&typeof Cr.onPostCommitFiberRoot=="function")try{Cr.onPostCommitFiberRoot(kl,s)}catch{}g=!0}return g}finally{vt=d,rr.transition=l}}return!1}function av(s,l,d){l=Ys(d,l),l=_y(s,l,1),s=gi(s,l,1),l=Sn(),s!==null&&(Ko(s,1,l),Rn(s,l))}function $t(s,l,d){if(s.tag===3)av(s,s,d);else for(;l!==null;){if(l.tag===3){av(l,s,d);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(vi===null||!vi.has(g))){s=Ys(d,s),s=Cy(l,s,1),l=gi(l,s,1),s=Sn(),l!==null&&(Ko(l,1,s),Rn(l,s));break}}l=l.return}}function YE(s,l,d){var g=s.pingCache;g!==null&&g.delete(l),l=Sn(),s.pingedLanes|=s.suspendedLanes&d,nn===s&&(dn&d)===d&&(Xt===4||Xt===3&&(dn&130023424)===dn&&500>Bt()-bf?es(s,0):xf|=d),Rn(s,l)}function lv(s,l){l===0&&((s.mode&1)===0?l=1:(l=El,El<<=1,(El&130023424)===0&&(El=4194304)));var d=Sn();s=Yr(s,l),s!==null&&(Ko(s,l,d),Rn(s,d))}function GE(s){var l=s.memoizedState,d=0;l!==null&&(d=l.retryLane),lv(s,d)}function JE(s,l){var d=0;switch(s.tag){case 13:var g=s.stateNode,x=s.memoizedState;x!==null&&(d=x.retryLane);break;case 19:g=s.stateNode;break;default:throw Error(n(314))}g!==null&&g.delete(l),lv(s,d)}var uv;uv=function(s,l,d){if(s!==null)if(s.memoizedProps!==l.pendingProps||Nn.current)In=!0;else{if((s.lanes&d)===0&&(l.flags&128)===0)return In=!1,LE(s,l,d);In=(s.flags&131072)!==0}else In=!1,At&&(l.flags&1048576)!==0&&Ug(l,ql,l.index);switch(l.lanes=0,l.tag){case 2:var g=l.type;au(s,l),s=l.pendingProps;var x=Bs(l,hn.current);qs(l,d),x=Jd(null,l,g,s,x,d);var E=Qd();return l.flags|=1,typeof x=="object"&&x!==null&&typeof x.render=="function"&&x.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,Tn(g)?(E=!0,Wl(l)):E=!1,l.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,Wd(l),x.updater=su,l.stateNode=x,x._reactInternals=l,rf(l,g,s,d),l=lf(null,l,g,!0,E,d)):(l.tag=0,At&&E&&Ad(l),kn(null,l,x,d),l=l.child),l;case 16:g=l.elementType;e:{switch(au(s,l),s=l.pendingProps,x=g._init,g=x(g._payload),l.type=g,x=l.tag=XE(g),s=hr(g,s),x){case 0:l=af(null,l,g,s,d);break e;case 1:l=Oy(null,l,g,s,d);break e;case 11:l=Iy(null,l,g,s,d);break e;case 14:l=Py(null,l,g,hr(g.type,s),d);break e}throw Error(n(306,g,""))}return l;case 0:return g=l.type,x=l.pendingProps,x=l.elementType===g?x:hr(g,x),af(s,l,g,x,d);case 1:return g=l.type,x=l.pendingProps,x=l.elementType===g?x:hr(g,x),Oy(s,l,g,x,d);case 3:e:{if(Dy(l),s===null)throw Error(n(387));g=l.pendingProps,E=l.memoizedState,x=E.element,Qg(s,l),Xl(l,g,null,d);var T=l.memoizedState;if(g=T.element,E.isDehydrated)if(E={element:g,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},l.updateQueue.baseState=E,l.memoizedState=E,l.flags&256){x=Ys(Error(n(423)),l),l=Ly(s,l,g,d,x);break e}else if(g!==x){x=Ys(Error(n(424)),l),l=Ly(s,l,g,d,x);break e}else for(Hn=di(l.stateNode.containerInfo.firstChild),Wn=l,At=!0,fr=null,d=Gg(l,null,g,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Ws(),g===x){l=Jr(s,l,d);break e}kn(s,l,g,d)}l=l.child}return l;case 5:return ey(l),s===null&&Dd(l),g=l.type,x=l.pendingProps,E=s!==null?s.memoizedProps:null,T=x.children,jd(g,x)?T=null:E!==null&&jd(g,E)&&(l.flags|=32),My(s,l),kn(s,l,T,d),l.child;case 6:return s===null&&Dd(l),null;case 13:return $y(s,l,d);case 4:return Hd(l,l.stateNode.containerInfo),g=l.pendingProps,s===null?l.child=Hs(l,null,g,d):kn(s,l,g,d),l.child;case 11:return g=l.type,x=l.pendingProps,x=l.elementType===g?x:hr(g,x),Iy(s,l,g,x,d);case 7:return kn(s,l,l.pendingProps,d),l.child;case 8:return kn(s,l,l.pendingProps.children,d),l.child;case 12:return kn(s,l,l.pendingProps.children,d),l.child;case 10:e:{if(g=l.type._context,x=l.pendingProps,E=l.memoizedProps,T=x.value,_t(Gl,g._currentValue),g._currentValue=T,E!==null)if(dr(E.value,T)){if(E.children===x.children&&!Nn.current){l=Jr(s,l,d);break e}}else for(E=l.child,E!==null&&(E.return=l);E!==null;){var W=E.dependencies;if(W!==null){T=E.child;for(var Q=W.firstContext;Q!==null;){if(Q.context===g){if(E.tag===1){Q=Gr(-1,d&-d),Q.tag=2;var ce=E.updateQueue;if(ce!==null){ce=ce.shared;var xe=ce.pending;xe===null?Q.next=Q:(Q.next=xe.next,xe.next=Q),ce.pending=Q}}E.lanes|=d,Q=E.alternate,Q!==null&&(Q.lanes|=d),zd(E.return,d,l),W.lanes|=d;break}Q=Q.next}}else if(E.tag===10)T=E.type===l.type?null:E.child;else if(E.tag===18){if(T=E.return,T===null)throw Error(n(341));T.lanes|=d,W=T.alternate,W!==null&&(W.lanes|=d),zd(T,d,l),T=E.sibling}else T=E.child;if(T!==null)T.return=E;else for(T=E;T!==null;){if(T===l){T=null;break}if(E=T.sibling,E!==null){E.return=T.return,T=E;break}T=T.return}E=T}kn(s,l,x.children,d),l=l.child}return l;case 9:return x=l.type,g=l.pendingProps.children,qs(l,d),x=tr(x),g=g(x),l.flags|=1,kn(s,l,g,d),l.child;case 14:return g=l.type,x=hr(g,l.pendingProps),x=hr(g.type,x),Py(s,l,g,x,d);case 15:return Ry(s,l,l.type,l.pendingProps,d);case 17:return g=l.type,x=l.pendingProps,x=l.elementType===g?x:hr(g,x),au(s,l),l.tag=1,Tn(g)?(s=!0,Wl(l)):s=!1,qs(l,d),Sy(l,g,x),rf(l,g,x,d),lf(null,l,g,!0,s,d);case 19:return By(s,l,d);case 22:return Ay(s,l,d)}throw Error(n(156,l.tag))};function cv(s,l){return Wm(s,l)}function QE(s,l,d,g){this.tag=s,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ir(s,l,d,g){return new QE(s,l,d,g)}function Nf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function XE(s){if(typeof s=="function")return Nf(s)?1:0;if(s!=null){if(s=s.$$typeof,s===se)return 11;if(s===V)return 14}return 2}function ki(s,l){var d=s.alternate;return d===null?(d=ir(s.tag,l,s.key,s.mode),d.elementType=s.elementType,d.type=s.type,d.stateNode=s.stateNode,d.alternate=s,s.alternate=d):(d.pendingProps=l,d.type=s.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=s.flags&14680064,d.childLanes=s.childLanes,d.lanes=s.lanes,d.child=s.child,d.memoizedProps=s.memoizedProps,d.memoizedState=s.memoizedState,d.updateQueue=s.updateQueue,l=s.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=s.sibling,d.index=s.index,d.ref=s.ref,d}function vu(s,l,d,g,x,E){var T=2;if(g=s,typeof s=="function")Nf(s)&&(T=1);else if(typeof s=="string")T=5;else e:switch(s){case U:return ns(d.children,x,E,l);case re:T=8,x|=8;break;case z:return s=ir(12,d,l,x|2),s.elementType=z,s.lanes=E,s;case q:return s=ir(13,d,l,x),s.elementType=q,s.lanes=E,s;case H:return s=ir(19,d,l,x),s.elementType=H,s.lanes=E,s;case Z:return xu(d,x,E,l);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case M:T=10;break e;case L:T=9;break e;case se:T=11;break e;case V:T=14;break e;case te:T=16,g=null;break e}throw Error(n(130,s==null?s:typeof s,""))}return l=ir(T,d,l,x),l.elementType=s,l.type=g,l.lanes=E,l}function ns(s,l,d,g){return s=ir(7,s,g,l),s.lanes=d,s}function xu(s,l,d,g){return s=ir(22,s,g,l),s.elementType=Z,s.lanes=d,s.stateNode={isHidden:!1},s}function Tf(s,l,d){return s=ir(6,s,null,l),s.lanes=d,s}function If(s,l,d){return l=ir(4,s.children!==null?s.children:[],s.key,l),l.lanes=d,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}function ZE(s,l,d,g,x){this.tag=l,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nd(0),this.expirationTimes=nd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nd(0),this.identifierPrefix=g,this.onRecoverableError=x,this.mutableSourceEagerHydrationData=null}function Pf(s,l,d,g,x,E,T,W,Q){return s=new ZE(s,l,d,W,Q),l===1?(l=1,E===!0&&(l|=8)):l=0,E=ir(3,null,null,l),s.current=E,E.stateNode=s,E.memoizedState={element:g,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wd(E),s}function e_(s,l,d){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:R,key:g==null?null:""+g,children:s,containerInfo:l,implementation:d}}function dv(s){if(!s)return hi;s=s._reactInternals;e:{if(Hi(s)!==s||s.tag!==1)throw Error(n(170));var l=s;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Tn(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(n(171))}if(s.tag===1){var d=s.type;if(Tn(d))return Fg(s,d,l)}return l}function fv(s,l,d,g,x,E,T,W,Q){return s=Pf(d,g,!0,s,x,E,T,W,Q),s.context=dv(null),d=s.current,g=Sn(),x=bi(d),E=Gr(g,x),E.callback=l??null,gi(d,E,x),s.current.lanes=x,Ko(s,x,g),Rn(s,g),s}function bu(s,l,d,g){var x=l.current,E=Sn(),T=bi(x);return d=dv(d),l.context===null?l.context=d:l.pendingContext=d,l=Gr(E,T),l.payload={element:s},g=g===void 0?null:g,g!==null&&(l.callback=g),s=gi(x,l,T),s!==null&&(gr(s,x,T,E),Ql(s,x,T)),T}function wu(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function hv(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var d=s.retryLane;s.retryLane=d!==0&&d<l?d:l}}function Rf(s,l){hv(s,l),(s=s.alternate)&&hv(s,l)}function t_(){return null}var pv=typeof reportError=="function"?reportError:function(s){console.error(s)};function Af(s){this._internalRoot=s}ku.prototype.render=Af.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(n(409));bu(s,l,null,null)},ku.prototype.unmount=Af.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;Zi(function(){bu(null,s,null,null)}),l[Hr]=null}};function ku(s){this._internalRoot=s}ku.prototype.unstable_scheduleHydration=function(s){if(s){var l=Qm();s={blockedOn:null,target:s,priority:l};for(var d=0;d<li.length&&l!==0&&l<li[d].priority;d++);li.splice(d,0,s),d===0&&eg(s)}};function Mf(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Su(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function mv(){}function n_(s,l,d,g,x){if(x){if(typeof g=="function"){var E=g;g=function(){var ce=wu(T);E.call(ce)}}var T=fv(l,g,s,0,null,!1,!1,"",mv);return s._reactRootContainer=T,s[Hr]=T.current,aa(s.nodeType===8?s.parentNode:s),Zi(),T}for(;x=s.lastChild;)s.removeChild(x);if(typeof g=="function"){var W=g;g=function(){var ce=wu(Q);W.call(ce)}}var Q=Pf(s,0,!1,null,null,!1,!1,"",mv);return s._reactRootContainer=Q,s[Hr]=Q.current,aa(s.nodeType===8?s.parentNode:s),Zi(function(){bu(l,Q,d,g)}),Q}function Eu(s,l,d,g,x){var E=d._reactRootContainer;if(E){var T=E;if(typeof x=="function"){var W=x;x=function(){var Q=wu(T);W.call(Q)}}bu(l,T,s,x)}else T=n_(d,l,s,x,g);return wu(T)}Gm=function(s){switch(s.tag){case 3:var l=s.stateNode;if(l.current.memoizedState.isDehydrated){var d=qo(l.pendingLanes);d!==0&&(rd(l,d|1),Rn(l,Bt()),(pt&6)===0&&(Qs=Bt()+500,pi()))}break;case 13:Zi(function(){var g=Yr(s,1);if(g!==null){var x=Sn();gr(g,s,1,x)}}),Rf(s,1)}},id=function(s){if(s.tag===13){var l=Yr(s,134217728);if(l!==null){var d=Sn();gr(l,s,134217728,d)}Rf(s,134217728)}},Jm=function(s){if(s.tag===13){var l=bi(s),d=Yr(s,l);if(d!==null){var g=Sn();gr(d,s,l,g)}Rf(s,l)}},Qm=function(){return vt},Xm=function(s,l){var d=vt;try{return vt=s,l()}finally{vt=d}},$e=function(s,l,d){switch(l){case"input":if(kt(s,d),l=d.name,d.type==="radio"&&l!=null){for(d=s;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<d.length;l++){var g=d[l];if(g!==s&&g.form===s.form){var x=zl(g);if(!x)throw Error(n(90));Te(g),kt(g,x)}}}break;case"textarea":ye(s,d);break;case"select":l=d.value,l!=null&&Pt(s,!!d.multiple,l,!1)}},Fe=_f,Ee=Zi;var r_={usingClientEntryPoint:!1,Events:[ca,$s,zl,ot,lt,_f]},Ea={findFiberByHostInstance:Vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},i_={bundleType:Ea.bundleType,version:Ea.version,rendererPackageName:Ea.rendererPackageName,rendererConfig:Ea.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=zm(s),s===null?null:s.stateNode},findFiberByHostInstance:Ea.findFiberByHostInstance||t_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_u.isDisabled&&_u.supportsFiber)try{kl=_u.inject(i_),Cr=_u}catch{}}return An.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=r_,An.createPortal=function(s,l){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mf(l))throw Error(n(200));return e_(s,l,null,d)},An.createRoot=function(s,l){if(!Mf(s))throw Error(n(299));var d=!1,g="",x=pv;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onRecoverableError!==void 0&&(x=l.onRecoverableError)),l=Pf(s,1,!1,null,null,d,!1,g,x),s[Hr]=l.current,aa(s.nodeType===8?s.parentNode:s),new Af(l)},An.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=zm(l),s=s===null?null:s.stateNode,s},An.flushSync=function(s){return Zi(s)},An.hydrate=function(s,l,d){if(!Su(l))throw Error(n(200));return Eu(null,s,l,!0,d)},An.hydrateRoot=function(s,l,d){if(!Mf(s))throw Error(n(405));var g=d!=null&&d.hydratedSources||null,x=!1,E="",T=pv;if(d!=null&&(d.unstable_strictMode===!0&&(x=!0),d.identifierPrefix!==void 0&&(E=d.identifierPrefix),d.onRecoverableError!==void 0&&(T=d.onRecoverableError)),l=fv(l,null,s,1,d??null,x,!1,E,T),s[Hr]=l.current,aa(s),g)for(s=0;s<g.length;s++)d=g[s],x=d._getVersion,x=x(d._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[d,x]:l.mutableSourceEagerHydrationData.push(d,x);return new ku(l)},An.render=function(s,l,d){if(!Su(l))throw Error(n(200));return Eu(null,s,l,!1,d)},An.unmountComponentAtNode=function(s){if(!Su(s))throw Error(n(40));return s._reactRootContainer?(Zi(function(){Eu(null,null,s,!1,function(){s._reactRootContainer=null,s[Hr]=null})}),!0):!1},An.unstable_batchedUpdates=_f,An.unstable_renderSubtreeIntoContainer=function(s,l,d,g){if(!Su(d))throw Error(n(200));if(s==null||s._reactInternals===void 0)throw Error(n(38));return Eu(s,l,d,!1,g)},An.version="18.3.1-next-f1338f8080-20240426",An}var Sv;function gb(){if(Sv)return Lf.exports;Sv=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Lf.exports=h_(),Lf.exports}var Ev;function p_(){if(Ev)return Cu;Ev=1;var e=gb();return Cu.createRoot=e.createRoot,Cu.hydrateRoot=e.hydrateRoot,Cu}var m_=p_();const g_=Ao(m_);var Gn=gb();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ga(){return Ga=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ga.apply(this,arguments)}var Ai;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ai||(Ai={}));const _v="popstate";function y_(e){e===void 0&&(e={});function t(i,o){let{pathname:a="/",search:u="",hash:c=""}=Es(i.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),Mh("",{pathname:a,search:u,hash:c},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){let a=i.document.querySelector("base"),u="";if(a&&a.getAttribute("href")){let c=i.location.href,f=c.indexOf("#");u=f===-1?c:c.slice(0,f)}return u+"#"+(typeof o=="string"?o:tc(o))}function r(i,o){Op(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return x_(t,n,r,e)}function Lt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Op(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function v_(){return Math.random().toString(36).substr(2,8)}function Cv(e,t){return{usr:e.state,key:e.key,idx:t}}function Mh(e,t,n,r){return n===void 0&&(n=null),Ga({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Es(t):t,{state:n,key:t&&t.key||r||v_()})}function tc(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Es(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function x_(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,u=Ai.Pop,c=null,f=h();f==null&&(f=0,a.replaceState(Ga({},a.state,{idx:f}),""));function h(){return(a.state||{idx:null}).idx}function p(){u=Ai.Pop;let k=h(),_=k==null?null:k-f;f=k,c&&c({action:u,location:S.location,delta:_})}function v(k,_){u=Ai.Push;let C=Mh(S.location,k,_);n&&n(C,k),f=h()+1;let j=Cv(C,f),I=S.createHref(C);try{a.pushState(j,"",I)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(I)}o&&c&&c({action:u,location:S.location,delta:1})}function y(k,_){u=Ai.Replace;let C=Mh(S.location,k,_);n&&n(C,k),f=h();let j=Cv(C,f),I=S.createHref(C);a.replaceState(j,"",I),o&&c&&c({action:u,location:S.location,delta:0})}function w(k){let _=i.location.origin!=="null"?i.location.origin:i.location.href,C=typeof k=="string"?k:tc(k);return C=C.replace(/ $/,"%20"),Lt(_,"No window.location.(origin|href) available to create URL for href: "+C),new URL(C,_)}let S={get action(){return u},get location(){return e(i,a)},listen(k){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(_v,p),c=k,()=>{i.removeEventListener(_v,p),c=null}},createHref(k){return t(i,k)},createURL:w,encodeLocation(k){let _=w(k);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:v,replace:y,go(k){return a.go(k)}};return S}var jv;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(jv||(jv={}));function b_(e,t,n){return n===void 0&&(n="/"),w_(e,t,n)}function w_(e,t,n,r){let i=typeof t=="string"?Es(t):t,o=jo(i.pathname||"/",n);if(o==null)return null;let a=yb(e);k_(a);let u=null;for(let c=0;u==null&&c<a.length;++c){let f=A_(o);u=P_(a[c],f)}return u}function yb(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,a,u)=>{let c={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};c.relativePath.startsWith("/")&&(Lt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let f=Di([r,c.relativePath]),h=n.concat(c);o.children&&o.children.length>0&&(Lt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),yb(o.children,t,h,f)),!(o.path==null&&!o.index)&&t.push({path:f,score:T_(f,o.index),routesMeta:h})};return e.forEach((o,a)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))i(o,a);else for(let c of vb(o.path))i(o,a,c)}),t}function vb(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let a=vb(r.join("/")),u=[];return u.push(...a.map(c=>c===""?o:[o,c].join("/"))),i&&u.push(...a),u.map(c=>e.startsWith("/")&&c===""?"/":c)}function k_(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:I_(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const S_=/^:[\w-]+$/,E_=3,__=2,C_=1,j_=10,N_=-2,Nv=e=>e==="*";function T_(e,t){let n=e.split("/"),r=n.length;return n.some(Nv)&&(r+=N_),t&&(r+=__),n.filter(i=>!Nv(i)).reduce((i,o)=>i+(S_.test(o)?E_:o===""?C_:j_),r)}function I_(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function P_(e,t,n){let{routesMeta:r}=e,i={},o="/",a=[];for(let u=0;u<r.length;++u){let c=r[u],f=u===r.length-1,h=o==="/"?t:t.slice(o.length)||"/",p=Oh({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},h),v=c.route;if(!p)return null;Object.assign(i,p.params),a.push({params:i,pathname:Di([o,p.pathname]),pathnameBase:L_(Di([o,p.pathnameBase])),route:v}),p.pathnameBase!=="/"&&(o=Di([o,p.pathnameBase]))}return a}function Oh(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=R_(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((f,h,p)=>{let{paramName:v,isOptional:y}=h;if(v==="*"){let S=u[p]||"";a=o.slice(0,o.length-S.length).replace(/(.)\/+$/,"$1")}const w=u[p];return y&&!w?f[v]=void 0:f[v]=(w||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:a,pattern:e}}function R_(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Op(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,c)=>(r.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function A_(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Op(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function jo(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function M_(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Es(e):e;return{pathname:n?n.startsWith("/")?n:O_(n,t):t,search:$_(r),hash:F_(i)}}function O_(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Bf(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function D_(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Dp(e,t){let n=D_(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Lp(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=Es(e):(i=Ga({},e),Lt(!i.pathname||!i.pathname.includes("?"),Bf("?","pathname","search",i)),Lt(!i.pathname||!i.pathname.includes("#"),Bf("#","pathname","hash",i)),Lt(!i.search||!i.search.includes("#"),Bf("#","search","hash",i)));let o=e===""||i.pathname==="",a=o?"/":i.pathname,u;if(a==null)u=n;else{let p=t.length-1;if(!r&&a.startsWith("..")){let v=a.split("/");for(;v[0]==="..";)v.shift(),p-=1;i.pathname=v.join("/")}u=p>=0?t[p]:"/"}let c=M_(i,u),f=a&&a!=="/"&&a.endsWith("/"),h=(o||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(f||h)&&(c.pathname+="/"),c}const Di=e=>e.join("/").replace(/\/\/+/g,"/"),L_=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),$_=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,F_=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function B_(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const xb=["post","put","patch","delete"];new Set(xb);const z_=["get",...xb];new Set(z_);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ja(){return Ja=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ja.apply(this,arguments)}const Cc=b.createContext(null),bb=b.createContext(null),ti=b.createContext(null),jc=b.createContext(null),ni=b.createContext({outlet:null,matches:[],isDataRoute:!1}),wb=b.createContext(null);function U_(e,t){let{relative:n}=t===void 0?{}:t;Mo()||Lt(!1);let{basename:r,navigator:i}=b.useContext(ti),{hash:o,pathname:a,search:u}=Nc(e,{relative:n}),c=a;return r!=="/"&&(c=a==="/"?r:Di([r,a])),i.createHref({pathname:c,search:u,hash:o})}function Mo(){return b.useContext(jc)!=null}function ri(){return Mo()||Lt(!1),b.useContext(jc).location}function kb(e){b.useContext(ti).static||b.useLayoutEffect(e)}function $p(){let{isDataRoute:e}=b.useContext(ni);return e?rC():W_()}function W_(){Mo()||Lt(!1);let e=b.useContext(Cc),{basename:t,future:n,navigator:r}=b.useContext(ti),{matches:i}=b.useContext(ni),{pathname:o}=ri(),a=JSON.stringify(Dp(i,n.v7_relativeSplatPath)),u=b.useRef(!1);return kb(()=>{u.current=!0}),b.useCallback(function(f,h){if(h===void 0&&(h={}),!u.current)return;if(typeof f=="number"){r.go(f);return}let p=Lp(f,JSON.parse(a),o,h.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:Di([t,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[t,r,a,o,e])}const H_=b.createContext(null);function V_(e){let t=b.useContext(ni).outlet;return t&&b.createElement(H_.Provider,{value:e},t)}function Nc(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=b.useContext(ti),{matches:i}=b.useContext(ni),{pathname:o}=ri(),a=JSON.stringify(Dp(i,r.v7_relativeSplatPath));return b.useMemo(()=>Lp(e,JSON.parse(a),o,n==="path"),[e,a,o,n])}function q_(e,t){return K_(e,t)}function K_(e,t,n,r){Mo()||Lt(!1);let{navigator:i}=b.useContext(ti),{matches:o}=b.useContext(ni),a=o[o.length-1],u=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let f=ri(),h;if(t){var p;let k=typeof t=="string"?Es(t):t;c==="/"||(p=k.pathname)!=null&&p.startsWith(c)||Lt(!1),h=k}else h=f;let v=h.pathname||"/",y=v;if(c!=="/"){let k=c.replace(/^\//,"").split("/");y="/"+v.replace(/^\//,"").split("/").slice(k.length).join("/")}let w=b_(e,{pathname:y}),S=X_(w&&w.map(k=>Object.assign({},k,{params:Object.assign({},u,k.params),pathname:Di([c,i.encodeLocation?i.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?c:Di([c,i.encodeLocation?i.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),o,n,r);return t&&S?b.createElement(jc.Provider,{value:{location:Ja({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Ai.Pop}},S):S}function Y_(){let e=nC(),t=B_(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},t),n?b.createElement("pre",{style:i},n):null,null)}const G_=b.createElement(Y_,null);class J_ extends b.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?b.createElement(ni.Provider,{value:this.props.routeContext},b.createElement(wb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Q_(e){let{routeContext:t,match:n,children:r}=e,i=b.useContext(Cc);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(ni.Provider,{value:t},r)}function X_(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,u=(i=n)==null?void 0:i.errors;if(u!=null){let h=a.findIndex(p=>p.route.id&&(u==null?void 0:u[p.route.id])!==void 0);h>=0||Lt(!1),a=a.slice(0,Math.min(a.length,h+1))}let c=!1,f=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<a.length;h++){let p=a[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(f=h),p.route.id){let{loaderData:v,errors:y}=n,w=p.route.loader&&v[p.route.id]===void 0&&(!y||y[p.route.id]===void 0);if(p.route.lazy||w){c=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((h,p,v)=>{let y,w=!1,S=null,k=null;n&&(y=u&&p.route.id?u[p.route.id]:void 0,S=p.route.errorElement||G_,c&&(f<0&&v===0?(iC("route-fallback"),w=!0,k=null):f===v&&(w=!0,k=p.route.hydrateFallbackElement||null)));let _=t.concat(a.slice(0,v+1)),C=()=>{let j;return y?j=S:w?j=k:p.route.Component?j=b.createElement(p.route.Component,null):p.route.element?j=p.route.element:j=h,b.createElement(Q_,{match:p,routeContext:{outlet:h,matches:_,isDataRoute:n!=null},children:j})};return n&&(p.route.ErrorBoundary||p.route.errorElement||v===0)?b.createElement(J_,{location:n.location,revalidation:n.revalidation,component:S,error:y,children:C(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):C()},null)}var Sb=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(Sb||{}),Eb=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(Eb||{});function Z_(e){let t=b.useContext(Cc);return t||Lt(!1),t}function eC(e){let t=b.useContext(bb);return t||Lt(!1),t}function tC(e){let t=b.useContext(ni);return t||Lt(!1),t}function _b(e){let t=tC(),n=t.matches[t.matches.length-1];return n.route.id||Lt(!1),n.route.id}function nC(){var e;let t=b.useContext(wb),n=eC(),r=_b();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function rC(){let{router:e}=Z_(Sb.UseNavigateStable),t=_b(Eb.UseNavigateStable),n=b.useRef(!1);return kb(()=>{n.current=!0}),b.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,Ja({fromRouteId:t},o)))},[e,t])}const Tv={};function iC(e,t,n){Tv[e]||(Tv[e]=!0)}function sC(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Qa(e){let{to:t,replace:n,state:r,relative:i}=e;Mo()||Lt(!1);let{future:o,static:a}=b.useContext(ti),{matches:u}=b.useContext(ni),{pathname:c}=ri(),f=$p(),h=Lp(t,Dp(u,o.v7_relativeSplatPath),c,i==="path"),p=JSON.stringify(h);return b.useEffect(()=>f(JSON.parse(p),{replace:n,state:r,relative:i}),[f,p,i,n,r]),null}function Cb(e){return V_(e.context)}function yn(e){Lt(!1)}function oC(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Ai.Pop,navigator:o,static:a=!1,future:u}=e;Mo()&&Lt(!1);let c=t.replace(/^\/*/,"/"),f=b.useMemo(()=>({basename:c,navigator:o,static:a,future:Ja({v7_relativeSplatPath:!1},u)}),[c,u,o,a]);typeof r=="string"&&(r=Es(r));let{pathname:h="/",search:p="",hash:v="",state:y=null,key:w="default"}=r,S=b.useMemo(()=>{let k=jo(h,c);return k==null?null:{location:{pathname:k,search:p,hash:v,state:y,key:w},navigationType:i}},[c,h,p,v,y,w,i]);return S==null?null:b.createElement(ti.Provider,{value:f},b.createElement(jc.Provider,{children:n,value:S}))}function aC(e){let{children:t,location:n}=e;return q_(Dh(t),n)}new Promise(()=>{});function Dh(e,t){t===void 0&&(t=[]);let n=[];return b.Children.forEach(e,(r,i)=>{if(!b.isValidElement(r))return;let o=[...t,i];if(r.type===b.Fragment){n.push.apply(n,Dh(r.props.children,o));return}r.type!==yn&&Lt(!1),!r.props.index||!r.props.children||Lt(!1);let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Dh(r.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nc(){return nc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nc.apply(this,arguments)}function jb(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function lC(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function uC(e,t){return e.button===0&&(!t||t==="_self")&&!lC(e)}function Lh(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function cC(e,t){let n=Lh(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(o=>{n.append(i,o)})}),n}const dC=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],fC=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],hC="6";try{window.__reactRouterVersion=hC}catch{}const pC=b.createContext({isTransitioning:!1}),mC="startTransition",Iv=ec[mC];function gC(e){let{basename:t,children:n,future:r,window:i}=e,o=b.useRef();o.current==null&&(o.current=y_({window:i,v5Compat:!0}));let a=o.current,[u,c]=b.useState({action:a.action,location:a.location}),{v7_startTransition:f}=r||{},h=b.useCallback(p=>{f&&Iv?Iv(()=>c(p)):c(p)},[c,f]);return b.useLayoutEffect(()=>a.listen(h),[a,h]),b.useEffect(()=>sC(r),[r]),b.createElement(oC,{basename:t,children:n,location:u.location,navigationType:u.action,navigator:a,future:r})}const yC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",vC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Li=b.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:o,replace:a,state:u,target:c,to:f,preventScrollReset:h,viewTransition:p}=t,v=jb(t,dC),{basename:y}=b.useContext(ti),w,S=!1;if(typeof f=="string"&&vC.test(f)&&(w=f,yC))try{let j=new URL(window.location.href),I=f.startsWith("//")?new URL(j.protocol+f):new URL(f),O=jo(I.pathname,y);I.origin===j.origin&&O!=null?f=O+I.search+I.hash:S=!0}catch{}let k=U_(f,{relative:i}),_=bC(f,{replace:a,state:u,target:c,preventScrollReset:h,relative:i,viewTransition:p});function C(j){r&&r(j),j.defaultPrevented||_(j)}return b.createElement("a",nc({},v,{href:w||k,onClick:S||o?r:C,ref:n,target:c}))}),Pv=b.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:i=!1,className:o="",end:a=!1,style:u,to:c,viewTransition:f,children:h}=t,p=jb(t,fC),v=Nc(c,{relative:p.relative}),y=ri(),w=b.useContext(bb),{navigator:S,basename:k}=b.useContext(ti),_=w!=null&&wC(v)&&f===!0,C=S.encodeLocation?S.encodeLocation(v).pathname:v.pathname,j=y.pathname,I=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;i||(j=j.toLowerCase(),I=I?I.toLowerCase():null,C=C.toLowerCase()),I&&k&&(I=jo(I,k)||I);const O=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let R=j===C||!a&&j.startsWith(C)&&j.charAt(O)==="/",U=I!=null&&(I===C||!a&&I.startsWith(C)&&I.charAt(C.length)==="/"),re={isActive:R,isPending:U,isTransitioning:_},z=R?r:void 0,M;typeof o=="function"?M=o(re):M=[o,R?"active":null,U?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let L=typeof u=="function"?u(re):u;return b.createElement(Li,nc({},p,{"aria-current":z,className:M,ref:n,style:L,to:c,viewTransition:f}),typeof h=="function"?h(re):h)});var $h;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})($h||($h={}));var Rv;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Rv||(Rv={}));function xC(e){let t=b.useContext(Cc);return t||Lt(!1),t}function bC(e,t){let{target:n,replace:r,state:i,preventScrollReset:o,relative:a,viewTransition:u}=t===void 0?{}:t,c=$p(),f=ri(),h=Nc(e,{relative:a});return b.useCallback(p=>{if(uC(p,n)){p.preventDefault();let v=r!==void 0?r:tc(f)===tc(h);c(e,{replace:v,state:i,preventScrollReset:o,relative:a,viewTransition:u})}},[f,c,h,r,i,n,e,o,a,u])}function Oo(e){let t=b.useRef(Lh(e)),n=b.useRef(!1),r=ri(),i=b.useMemo(()=>cC(r.search,n.current?null:t.current),[r.search]),o=$p(),a=b.useCallback((u,c)=>{const f=Lh(typeof u=="function"?u(i):u);n.current=!0,o("?"+f,c)},[o,i]);return[i,a]}function wC(e,t){t===void 0&&(t={});let n=b.useContext(pC);n==null&&Lt(!1);let{basename:r}=xC($h.useViewTransitionState),i=Nc(e,{relative:t.relative});if(!n.isTransitioning)return!1;let o=jo(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=jo(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Oh(i.pathname,a)!=null||Oh(i.pathname,o)!=null}const Nb=typeof document<"u"?Ae.useLayoutEffect:()=>{};var zf;const kC=(zf=Ae.useInsertionEffect)!==null&&zf!==void 0?zf:Nb;function SC(e){const t=b.useRef(null);return kC(()=>{t.current=e},[e]),b.useCallback((...n)=>{const r=t.current;return r==null?void 0:r(...n)},[])}const zi=e=>{var t;return(t=e==null?void 0:e.ownerDocument)!==null&&t!==void 0?t:document},gs=e=>e&&"window"in e&&e.window===e?e:zi(e).defaultView||window;function EC(e){return e!==null&&typeof e=="object"&&"nodeType"in e&&typeof e.nodeType=="number"}function _C(e){return EC(e)&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in e}let CC=!1;function Fp(){return CC}function Tb(e,t){if(!Fp())return t&&e?e.contains(t):!1;if(!e||!t)return!1;let n=t;for(;n!==null;){if(n===e)return!0;n.tagName==="SLOT"&&n.assignedSlot?n=n.assignedSlot.parentNode:_C(n)?n=n.host:n=n.parentNode}return!1}const Fh=(e=document)=>{var t;if(!Fp())return e.activeElement;let n=e.activeElement;for(;n&&"shadowRoot"in n&&(!((t=n.shadowRoot)===null||t===void 0)&&t.activeElement);)n=n.shadowRoot.activeElement;return n};function Ib(e){return Fp()&&e.target.shadowRoot&&e.composedPath?e.composedPath()[0]:e.target}function Pb(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Pb(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function ze(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Pb(e))&&(r&&(r+=" "),r+=t);return r}function jC(e){var t;if(typeof window>"u"||window.navigator==null)return!1;let n=(t=window.navigator.userAgentData)===null||t===void 0?void 0:t.brands;return Array.isArray(n)&&n.some(r=>e.test(r.brand))||e.test(window.navigator.userAgent)}function NC(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function Rb(e){let t=null;return()=>(t==null&&(t=e()),t)}const TC=Rb(function(){return NC(/^Mac/i)}),IC=Rb(function(){return jC(/Android/i)});function Ab(){let e=b.useRef(new Map),t=b.useCallback((i,o,a,u)=>{let c=u!=null&&u.once?(...f)=>{e.current.delete(a),a(...f)}:a;e.current.set(a,{type:o,eventTarget:i,fn:c,options:u}),i.addEventListener(o,c,u)},[]),n=b.useCallback((i,o,a,u)=>{var c;let f=((c=e.current.get(a))===null||c===void 0?void 0:c.fn)||a;i.removeEventListener(o,f,u),e.current.delete(a)},[]),r=b.useCallback(()=>{e.current.forEach((i,o)=>{n(i.eventTarget,i.type,o,i.options)})},[n]);return b.useEffect(()=>r,[r]),{addGlobalListener:t,removeGlobalListener:n,removeAllGlobalListeners:r}}function PC(e){return e.pointerType===""&&e.isTrusted?!0:IC()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function Mb(e){let t=e;return t.nativeEvent=e,t.isDefaultPrevented=()=>t.defaultPrevented,t.isPropagationStopped=()=>t.cancelBubble,t.persist=()=>{},t}function RC(e,t){Object.defineProperty(e,"target",{value:t}),Object.defineProperty(e,"currentTarget",{value:t})}function Ob(e){let t=b.useRef({isFocused:!1,observer:null});Nb(()=>{const r=t.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]);let n=SC(r=>{e==null||e(r)});return b.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){t.current.isFocused=!0;let i=r.target,o=a=>{if(t.current.isFocused=!1,i.disabled){let u=Mb(a);n(u)}t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)};i.addEventListener("focusout",o,{once:!0}),t.current.observer=new MutationObserver(()=>{if(t.current.isFocused&&i.disabled){var a;(a=t.current.observer)===null||a===void 0||a.disconnect();let u=i===document.activeElement?null:document.activeElement;i.dispatchEvent(new FocusEvent("blur",{relatedTarget:u})),i.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:u}))}}),t.current.observer.observe(i,{attributes:!0,attributeFilter:["disabled"]})}},[n])}let AC=!1,ll=null,Bh=new Set,Da=new Map,xs=!1,zh=!1;const MC={Tab:!0,Escape:!0};function Bp(e,t){for(let n of Bh)n(e,t)}function OC(e){return!(e.metaKey||!TC()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function rc(e){xs=!0,OC(e)&&(ll="keyboard",Bp("keyboard",e))}function bo(e){ll="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(xs=!0,Bp("pointer",e))}function Db(e){PC(e)&&(xs=!0,ll="virtual")}function Lb(e){e.target===window||e.target===document||AC||!e.isTrusted||(!xs&&!zh&&(ll="virtual",Bp("virtual",e)),xs=!1,zh=!1)}function $b(){xs=!1,zh=!0}function Uh(e){if(typeof window>"u"||typeof document>"u"||Da.get(gs(e)))return;const t=gs(e),n=zi(e);let r=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){xs=!0,r.apply(this,arguments)},n.addEventListener("keydown",rc,!0),n.addEventListener("keyup",rc,!0),n.addEventListener("click",Db,!0),t.addEventListener("focus",Lb,!0),t.addEventListener("blur",$b,!1),typeof PointerEvent<"u"&&(n.addEventListener("pointerdown",bo,!0),n.addEventListener("pointermove",bo,!0),n.addEventListener("pointerup",bo,!0)),t.addEventListener("beforeunload",()=>{Fb(e)},{once:!0}),Da.set(t,{focus:r})}const Fb=(e,t)=>{const n=gs(e),r=zi(e);t&&r.removeEventListener("DOMContentLoaded",t),Da.has(n)&&(n.HTMLElement.prototype.focus=Da.get(n).focus,r.removeEventListener("keydown",rc,!0),r.removeEventListener("keyup",rc,!0),r.removeEventListener("click",Db,!0),n.removeEventListener("focus",Lb,!0),n.removeEventListener("blur",$b,!1),typeof PointerEvent<"u"&&(r.removeEventListener("pointerdown",bo,!0),r.removeEventListener("pointermove",bo,!0),r.removeEventListener("pointerup",bo,!0)),Da.delete(n))};function DC(e){const t=zi(e);let n;return t.readyState!=="loading"?Uh(e):(n=()=>{Uh(e)},t.addEventListener("DOMContentLoaded",n)),()=>Fb(e,n)}typeof document<"u"&&DC();function Bb(){return ll!=="pointer"}const LC=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function $C(e,t,n){let r=zi(n==null?void 0:n.target);const i=typeof window<"u"?gs(n==null?void 0:n.target).HTMLInputElement:HTMLInputElement,o=typeof window<"u"?gs(n==null?void 0:n.target).HTMLTextAreaElement:HTMLTextAreaElement,a=typeof window<"u"?gs(n==null?void 0:n.target).HTMLElement:HTMLElement,u=typeof window<"u"?gs(n==null?void 0:n.target).KeyboardEvent:KeyboardEvent;return e=e||r.activeElement instanceof i&&!LC.has(r.activeElement.type)||r.activeElement instanceof o||r.activeElement instanceof a&&r.activeElement.isContentEditable,!(e&&t==="keyboard"&&n instanceof u&&!MC[n.key])}function FC(e,t,n){Uh(),b.useEffect(()=>{let r=(i,o)=>{$C(!!(n!=null&&n.isTextInput),i,o)&&e(Bb())};return Bh.add(r),()=>{Bh.delete(r)}},t)}function BC(e){let{isDisabled:t,onFocus:n,onBlur:r,onFocusChange:i}=e;const o=b.useCallback(c=>{if(c.target===c.currentTarget)return r&&r(c),i&&i(!1),!0},[r,i]),a=Ob(o),u=b.useCallback(c=>{const f=zi(c.target),h=f?Fh(f):Fh();c.target===c.currentTarget&&h===Ib(c.nativeEvent)&&(n&&n(c),i&&i(!0),a(c))},[i,n,a]);return{focusProps:{onFocus:!t&&(n||i||r)?u:void 0,onBlur:!t&&(r||i)?o:void 0}}}function zC(e){let{isDisabled:t,onBlurWithin:n,onFocusWithin:r,onFocusWithinChange:i}=e,o=b.useRef({isFocusWithin:!1}),{addGlobalListener:a,removeAllGlobalListeners:u}=Ab(),c=b.useCallback(p=>{p.currentTarget.contains(p.target)&&o.current.isFocusWithin&&!p.currentTarget.contains(p.relatedTarget)&&(o.current.isFocusWithin=!1,u(),n&&n(p),i&&i(!1))},[n,i,o,u]),f=Ob(c),h=b.useCallback(p=>{if(!p.currentTarget.contains(p.target))return;const v=zi(p.target),y=Fh(v);if(!o.current.isFocusWithin&&y===Ib(p.nativeEvent)){r&&r(p),i&&i(!0),o.current.isFocusWithin=!0,f(p);let w=p.currentTarget;a(v,"focus",S=>{if(o.current.isFocusWithin&&!Tb(w,S.target)){let k=new v.defaultView.FocusEvent("blur",{relatedTarget:S.target});RC(k,w);let _=Mb(k);c(_)}},{capture:!0})}},[r,i,f,a,c]);return t?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:h,onBlur:c}}}let Wh=!1,ju=0;function UC(){Wh=!0,setTimeout(()=>{Wh=!1},50)}function Av(e){e.pointerType==="touch"&&UC()}function WC(){if(!(typeof document>"u"))return ju===0&&typeof PointerEvent<"u"&&document.addEventListener("pointerup",Av),ju++,()=>{ju--,!(ju>0)&&typeof PointerEvent<"u"&&document.removeEventListener("pointerup",Av)}}function HC(e){let{onHoverStart:t,onHoverChange:n,onHoverEnd:r,isDisabled:i}=e,[o,a]=b.useState(!1),u=b.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;b.useEffect(WC,[]);let{addGlobalListener:c,removeAllGlobalListeners:f}=Ab(),{hoverProps:h,triggerHoverEnd:p}=b.useMemo(()=>{let v=(S,k)=>{if(u.pointerType=k,i||k==="touch"||u.isHovered||!S.currentTarget.contains(S.target))return;u.isHovered=!0;let _=S.currentTarget;u.target=_,c(zi(S.target),"pointerover",C=>{u.isHovered&&u.target&&!Tb(u.target,C.target)&&y(C,C.pointerType)},{capture:!0}),t&&t({type:"hoverstart",target:_,pointerType:k}),n&&n(!0),a(!0)},y=(S,k)=>{let _=u.target;u.pointerType="",u.target=null,!(k==="touch"||!u.isHovered||!_)&&(u.isHovered=!1,f(),r&&r({type:"hoverend",target:_,pointerType:k}),n&&n(!1),a(!1))},w={};return typeof PointerEvent<"u"&&(w.onPointerEnter=S=>{Wh&&S.pointerType==="mouse"||v(S,S.pointerType)},w.onPointerLeave=S=>{!i&&S.currentTarget.contains(S.target)&&y(S,S.pointerType)}),{hoverProps:w,triggerHoverEnd:y}},[t,n,r,i,u,c,f]);return b.useEffect(()=>{i&&p({currentTarget:u.target},u.pointerType)},[i]),{hoverProps:h,isHovered:o}}function VC(e={}){let{autoFocus:t=!1,isTextInput:n,within:r}=e,i=b.useRef({isFocused:!1,isFocusVisible:t||Bb()}),[o,a]=b.useState(!1),[u,c]=b.useState(()=>i.current.isFocused&&i.current.isFocusVisible),f=b.useCallback(()=>c(i.current.isFocused&&i.current.isFocusVisible),[]),h=b.useCallback(y=>{i.current.isFocused=y,a(y),f()},[f]);FC(y=>{i.current.isFocusVisible=y,f()},[],{isTextInput:n});let{focusProps:p}=BC({isDisabled:r,onFocusChange:h}),{focusWithinProps:v}=zC({isDisabled:!r,onFocusWithinChange:h});return{isFocused:o,isFocusVisible:u,focusProps:r?v:p}}var qC=Object.defineProperty,KC=(e,t,n)=>t in e?qC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Uf=(e,t,n)=>(KC(e,typeof t!="symbol"?t+"":t,n),n);let YC=class{constructor(){Uf(this,"current",this.detect()),Uf(this,"handoffState","pending"),Uf(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Or=new YC;function _s(e){var t;return Or.isServer?null:e==null?document:(t=e==null?void 0:e.ownerDocument)!=null?t:document}function ic(e){var t,n;return Or.isServer?null:e==null?document:(n=(t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))!=null?n:document}function zp(e){var t,n;return(n=(t=ic(e))==null?void 0:t.activeElement)!=null?n:null}function zb(e){return zp(e)===e}function Tc(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Ln(){let e=[],t={addEventListener(n,r,i,o){return n.addEventListener(r,i,o),t.add(()=>n.removeEventListener(r,i,o))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return Tc(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},style(n,r,i){let o=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:i}),this.add(()=>{Object.assign(n.style,{[r]:o})})},group(n){let r=Ln();return n(r),this.add(()=>r.dispose())},add(n){return e.includes(n)||e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let i of e.splice(r,1))i()}},dispose(){for(let n of e.splice(0))n()}};return t}function Cs(){let[e]=b.useState(Ln);return b.useEffect(()=>()=>e.dispose(),[e]),e}let It=(e,t)=>{Or.isServer?b.useEffect(e,t):b.useLayoutEffect(e,t)};function js(e){let t=b.useRef(e);return It(()=>{t.current=e},[e]),t}let tt=function(e){let t=js(e);return Ae.useCallback((...n)=>t.current(...n),[t])};function GC(e){let t=e.width/2,n=e.height/2;return{top:e.clientY-n,right:e.clientX+t,bottom:e.clientY+n,left:e.clientX-t}}function JC(e,t){return!(!e||!t||e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom)}function QC({disabled:e=!1}={}){let t=b.useRef(null),[n,r]=b.useState(!1),i=Cs(),o=tt(()=>{t.current=null,r(!1),i.dispose()}),a=tt(u=>{if(i.dispose(),t.current===null){t.current=u.currentTarget,r(!0);{let c=_s(u.currentTarget);i.addEventListener(c,"pointerup",o,!1),i.addEventListener(c,"pointermove",f=>{if(t.current){let h=GC(f);r(JC(h,t.current.getBoundingClientRect()))}},!1),i.addEventListener(c,"pointercancel",o,!1)}}});return{pressed:n,pressProps:e?{}:{onPointerDown:a,onPointerUp:o,onClick:o}}}function Br(e){return b.useMemo(()=>e,Object.values(e))}let XC=b.createContext(void 0);function Ub(){return b.useContext(XC)}function Hh(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function kr(e,t,...n){if(e in t){let i=t[e];return typeof i=="function"?i(...n):i}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(i=>`"${i}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,kr),r}var No=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(No||{}),Mi=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Mi||{});function Gt(){let e=ej();return b.useCallback(t=>ZC({mergeRefs:e,...t}),[e])}function ZC({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:i,visible:o=!0,name:a,mergeRefs:u}){u=u??tj;let c=Wb(t,e);if(o)return Nu(c,n,r,a,u);let f=i??0;if(f&2){let{static:h=!1,...p}=c;if(h)return Nu(p,n,r,a,u)}if(f&1){let{unmount:h=!0,...p}=c;return kr(h?0:1,{0(){return null},1(){return Nu({...p,hidden:!0,style:{display:"none"}},n,r,a,u)}})}return Nu(c,n,r,a,u)}function Nu(e,t={},n,r,i){let{as:o=n,children:a,refName:u="ref",...c}=Wf(e,["unmount","static"]),f=e.ref!==void 0?{[u]:e.ref}:{},h=typeof a=="function"?a(t):a;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(t)),c["aria-labelledby"]&&c["aria-labelledby"]===c.id&&(c["aria-labelledby"]=void 0);let p={};if(t){let v=!1,y=[];for(let[w,S]of Object.entries(t))typeof S=="boolean"&&(v=!0),S===!0&&y.push(w.replace(/([A-Z])/g,k=>`-${k.toLowerCase()}`));if(v){p["data-headlessui-state"]=y.join(" ");for(let w of y)p[`data-${w}`]=""}}if(La(o)&&(Object.keys(as(c)).length>0||Object.keys(as(p)).length>0))if(!b.isValidElement(h)||Array.isArray(h)&&h.length>1||rj(h)){if(Object.keys(as(c)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(as(c)).concat(Object.keys(as(p))).map(v=>`  - ${v}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(v=>`  - ${v}`).join(`
`)].join(`
`))}else{let v=h.props,y=v==null?void 0:v.className,w=typeof y=="function"?(..._)=>Hh(y(..._),c.className):Hh(y,c.className),S=w?{className:w}:{},k=Wb(h.props,as(Wf(c,["ref"])));for(let _ in p)_ in k&&delete p[_];return b.cloneElement(h,Object.assign({},k,p,f,{ref:i(nj(h),f.ref)},S))}return b.createElement(o,Object.assign({},Wf(c,["ref"]),!La(o)&&f,!La(o)&&p),h)}function ej(){let e=b.useRef([]),t=b.useCallback(n=>{for(let r of e.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return e.current=n,t}}function tj(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function Wb(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):t[i]=r[i];if(t.disabled||t["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[i=>{var o;return(o=i==null?void 0:i.preventDefault)==null?void 0:o.call(i)}]);for(let r in n)Object.assign(t,{[r](i,...o){let a=n[r];for(let u of a){if((i instanceof Event||(i==null?void 0:i.nativeEvent)instanceof Event)&&i.defaultPrevented)return;u(i,...o)}}});return t}function Hb(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):t[i]=r[i];for(let r in n)Object.assign(t,{[r](...i){let o=n[r];for(let a of o)a==null||a(...i)}});return t}function Ft(e){var t;return Object.assign(b.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function as(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function Wf(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function nj(e){return Ae.version.split(".")[0]>="19"?e.props.ref:e.ref}function La(e){return e===b.Fragment||e===Symbol.for("react.fragment")}function rj(e){return La(e.type)}let ij="span";var sc=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(sc||{});function sj(e,t){var n;let{features:r=1,...i}=e,o={ref:t,"aria-hidden":(r&2)===2?!0:(n=i["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return Gt()({ourProps:o,theirProps:i,slot:{},defaultTag:ij,name:"Hidden"})}let Vh=Ft(sj),oj=b.createContext(void 0);function aj(){return b.useContext(oj)}function Vb(e){return typeof e!="object"||e===null?!1:"nodeType"in e}function ei(e){return Vb(e)&&"tagName"in e}function Xn(e){return ei(e)&&"accessKey"in e}function Mr(e){return ei(e)&&"tabIndex"in e}function lj(e){return ei(e)&&"style"in e}function uj(e){return Xn(e)&&e.nodeName==="IFRAME"}function qb(e){return Xn(e)&&e.nodeName==="INPUT"}function Mv(e){return Xn(e)&&e.nodeName==="LABEL"}function cj(e){return Xn(e)&&e.nodeName==="FIELDSET"}function Kb(e){return Xn(e)&&e.nodeName==="LEGEND"}function dj(e){return ei(e)?e.matches('a[href],audio[controls],button,details,embed,iframe,img[usemap],input:not([type="hidden"]),label,select,textarea,video[controls]'):!1}function Ov(e){let t=e.parentElement,n=null;for(;t&&!cj(t);)Kb(t)&&(n=t),t=t.parentElement;let r=(t==null?void 0:t.getAttribute("disabled"))==="";return r&&fj(n)?!1:r}function fj(e){if(!e)return!1;let t=e.previousElementSibling;for(;t!==null;){if(Kb(t))return!1;t=t.previousElementSibling}return!0}let Yb=Symbol();function hj(e,t=!0){return Object.assign(e,{[Yb]:t})}function jn(...e){let t=b.useRef(e);b.useEffect(()=>{t.current=e},[e]);let n=tt(r=>{for(let i of t.current)i!=null&&(typeof i=="function"?i(r):i.current=r)});return e.every(r=>r==null||(r==null?void 0:r[Yb]))?void 0:n}let Up=b.createContext(null);Up.displayName="DescriptionContext";function Gb(){let e=b.useContext(Up);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,Gb),t}return e}function Jb(){let[e,t]=b.useState([]);return[e.length>0?e.join(" "):void 0,b.useMemo(()=>function(n){let r=tt(o=>(t(a=>[...a,o]),()=>t(a=>{let u=a.slice(),c=u.indexOf(o);return c!==-1&&u.splice(c,1),u}))),i=b.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return Ae.createElement(Up.Provider,{value:i},n.children)},[t])]}let pj="p";function mj(e,t){let n=b.useId(),r=Ub(),{id:i=`headlessui-description-${n}`,...o}=e,a=Gb(),u=jn(t);It(()=>a.register(i),[i,a.register]);let c=Br({...a.slot,disabled:r||!1}),f={ref:u,...a.props,id:i};return Gt()({ourProps:f,theirProps:o,slot:c,defaultTag:pj,name:a.name||"Description"})}let gj=Ft(mj),yj=Object.assign(gj,{});var on=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(on||{});let Ic=b.createContext(null);Ic.displayName="LabelContext";function Wp(){let e=b.useContext(Ic);if(e===null){let t=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,Wp),t}return e}function vj(e){var t,n,r;let i=(n=(t=b.useContext(Ic))==null?void 0:t.value)!=null?n:void 0;return((r=void 0)!=null?r:0)>0?[i,...e].filter(Boolean).join(" "):i}function Qb({inherit:e=!1}={}){let t=vj(),[n,r]=b.useState([]),i=e?[t,...n].filter(Boolean):n;return[i.length>0?i.join(" "):void 0,b.useMemo(()=>function(o){let a=tt(c=>(r(f=>[...f,c]),()=>r(f=>{let h=f.slice(),p=h.indexOf(c);return p!==-1&&h.splice(p,1),h}))),u=b.useMemo(()=>({register:a,slot:o.slot,name:o.name,props:o.props,value:o.value}),[a,o.slot,o.name,o.props,o.value]);return Ae.createElement(Ic.Provider,{value:u},o.children)},[r])]}let xj="label";function bj(e,t){var n;let r=b.useId(),i=Wp(),o=aj(),a=Ub(),{id:u=`headlessui-label-${r}`,htmlFor:c=o??((n=i.props)==null?void 0:n.htmlFor),passive:f=!1,...h}=e,p=jn(t);It(()=>i.register(u),[u,i.register]);let v=tt(S=>{let k=S.currentTarget;if(!(S.target!==S.currentTarget&&dj(S.target))&&(Mv(k)&&S.preventDefault(),i.props&&"onClick"in i.props&&typeof i.props.onClick=="function"&&i.props.onClick(S),Mv(k))){let _=document.getElementById(k.htmlFor);if(_){let C=_.getAttribute("disabled");if(C==="true"||C==="")return;let j=_.getAttribute("aria-disabled");if(j==="true"||j==="")return;(qb(_)&&(_.type==="file"||_.type==="radio"||_.type==="checkbox")||_.role==="radio"||_.role==="checkbox"||_.role==="switch")&&_.click(),_.focus({preventScroll:!0})}}}),y=Br({...i.slot,disabled:a||!1}),w={ref:p,...i.props,id:u,htmlFor:c,onClick:v};return f&&("onClick"in w&&(delete w.htmlFor,delete w.onClick),"onClick"in h&&delete h.onClick),Gt()({ourProps:w,theirProps:h,slot:y,defaultTag:c?xj:"div",name:i.name||"Label"})}let wj=Ft(bj);Object.assign(wj,{});let kj=b.createContext(()=>{});function Sj({value:e,children:t}){return Ae.createElement(kj.Provider,{value:e},t)}function Dv(e){if(e===null)return{width:0,height:0};let{width:t,height:n}=e.getBoundingClientRect();return{width:t,height:n}}function Ej(e,t,n=!1){let[r,i]=b.useState(()=>Dv(t));return It(()=>{if(!t||!e)return;let o=Ln();return o.requestAnimationFrame(function a(){o.requestAnimationFrame(a),i(u=>{let c=Dv(t);return c.width===u.width&&c.height===u.height?u:c})}),()=>{o.dispose()}},[t,e]),n?{width:`${r.width}px`,height:`${r.height}px`}:r}var Xb=(e=>(e[e.Left=0]="Left",e[e.Right=2]="Right",e))(Xb||{});function _j(e){let t=b.useRef(null),n=tt(i=>{t.current=i.pointerType,!Ov(i.currentTarget)&&i.pointerType==="mouse"&&i.button===Xb.Left&&(i.preventDefault(),e(i))}),r=tt(i=>{t.current!=="mouse"&&(Ov(i.currentTarget)||e(i))});return{onPointerDown:n,onClick:r}}let Zb=class extends Map{constructor(t){super(),this.factory=t}get(t){let n=super.get(t);return n===void 0&&(n=this.factory(t),this.set(t,n)),n}};var Cj=Object.defineProperty,jj=(e,t,n)=>t in e?Cj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Nj=(e,t,n)=>(jj(e,t+"",n),n),ew=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},sr=(e,t,n)=>(ew(e,t,"read from private field"),n?n.call(e):t.get(e)),Hf=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Lv=(e,t,n,r)=>(ew(e,t,"write to private field"),t.set(e,n),n),Pr,Pa,Ra;let tw=class{constructor(t){Hf(this,Pr,{}),Hf(this,Pa,new Zb(()=>new Set)),Hf(this,Ra,new Set),Nj(this,"disposables",Ln()),Lv(this,Pr,t),Or.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return sr(this,Pr)}subscribe(t,n){if(Or.isServer)return()=>{};let r={selector:t,callback:n,current:t(sr(this,Pr))};return sr(this,Ra).add(r),this.disposables.add(()=>{sr(this,Ra).delete(r)})}on(t,n){return Or.isServer?()=>{}:(sr(this,Pa).get(t).add(n),this.disposables.add(()=>{sr(this,Pa).get(t).delete(n)}))}send(t){let n=this.reduce(sr(this,Pr),t);if(n!==sr(this,Pr)){Lv(this,Pr,n);for(let r of sr(this,Ra)){let i=r.selector(sr(this,Pr));nw(r.current,i)||(r.current=i,r.callback(i))}for(let r of sr(this,Pa).get(t.type))r(sr(this,Pr),t)}}};Pr=new WeakMap,Pa=new WeakMap,Ra=new WeakMap;function nw(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:Array.isArray(e)&&Array.isArray(t)?e.length!==t.length?!1:Vf(e[Symbol.iterator](),t[Symbol.iterator]()):e instanceof Map&&t instanceof Map||e instanceof Set&&t instanceof Set?e.size!==t.size?!1:Vf(e.entries(),t.entries()):$v(e)&&$v(t)?Vf(Object.entries(e)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()):!1}function Vf(e,t){do{let n=e.next(),r=t.next();if(n.done&&r.done)return!0;if(n.done||r.done||!Object.is(n.value,r.value))return!1}while(!0)}function $v(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||Object.getPrototypeOf(t)===null}function Fv(e){let[t,n]=e(),r=Ln();return(...i)=>{t(...i),r.dispose(),r.microTask(n)}}var Tj=Object.defineProperty,Ij=(e,t,n)=>t in e?Tj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Bv=(e,t,n)=>(Ij(e,typeof t!="symbol"?t+"":t,n),n),rw=(e=>(e[e.Push=0]="Push",e[e.Pop=1]="Pop",e))(rw||{});let Pj={0(e,t){let n=t.id,r=e.stack,i=e.stack.indexOf(n);if(i!==-1){let o=e.stack.slice();return o.splice(i,1),o.push(n),r=o,{...e,stack:r}}return{...e,stack:[...e.stack,n]}},1(e,t){let n=t.id,r=e.stack.indexOf(n);if(r===-1)return e;let i=e.stack.slice();return i.splice(r,1),{...e,stack:i}}},Rj=class iw extends tw{constructor(){super(...arguments),Bv(this,"actions",{push:t=>this.send({type:0,id:t}),pop:t=>this.send({type:1,id:t})}),Bv(this,"selectors",{isTop:(t,n)=>t.stack[t.stack.length-1]===n,inStack:(t,n)=>t.stack.includes(n)})}static new(){return new iw({stack:[]})}reduce(t,n){return kr(n.type,Pj,t,n)}};const Pc=new Zb(()=>Rj.new());var qf={exports:{}},Kf={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zv;function Aj(){if(zv)return Kf;zv=1;var e=_c();function t(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,o=e.useEffect,a=e.useMemo,u=e.useDebugValue;return Kf.useSyncExternalStoreWithSelector=function(c,f,h,p,v){var y=i(null);if(y.current===null){var w={hasValue:!1,value:null};y.current=w}else w=y.current;y=a(function(){function k(O){if(!_){if(_=!0,C=O,O=p(O),v!==void 0&&w.hasValue){var R=w.value;if(v(R,O))return j=R}return j=O}if(R=j,n(C,O))return R;var U=p(O);return v!==void 0&&v(R,U)?(C=O,R):(C=O,j=U)}var _=!1,C,j,I=h===void 0?null:h;return[function(){return k(f())},I===null?void 0:function(){return k(I())}]},[f,h,p,v]);var S=r(c,y[0],y[1]);return o(function(){w.hasValue=!0,w.value=S},[S]),u(S),S},Kf}var Uv;function Mj(){return Uv||(Uv=1,qf.exports=Aj()),qf.exports}var Oj=Mj();function lr(e,t,n=nw){return Oj.useSyncExternalStoreWithSelector(tt(r=>e.subscribe(Dj,r)),tt(()=>e.state),tt(()=>e.state),tt(t),n)}function Dj(e){return e}function ul(e,t){let n=b.useId(),r=Pc.get(t),[i,o]=lr(r,b.useCallback(a=>[r.selectors.isTop(a,n),r.selectors.inStack(a,n)],[r,n]));return It(()=>{if(e)return r.actions.push(n),()=>r.actions.pop(n)},[r,e,n]),e?o?i:!0:!1}let qh=new Map,$a=new Map;function Wv(e){var t;let n=(t=$a.get(e))!=null?t:0;return $a.set(e,n+1),n!==0?()=>Hv(e):(qh.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>Hv(e))}function Hv(e){var t;let n=(t=$a.get(e))!=null?t:1;if(n===1?$a.delete(e):$a.set(e,n-1),n!==1)return;let r=qh.get(e);r&&(r["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r["aria-hidden"]),e.inert=r.inert,qh.delete(e))}function sw(e,{allowed:t,disallowed:n}={}){let r=ul(e,"inert-others");It(()=>{var i,o;if(!r)return;let a=Ln();for(let c of(i=n==null?void 0:n())!=null?i:[])c&&a.add(Wv(c));let u=(o=t==null?void 0:t())!=null?o:[];for(let c of u){if(!c)continue;let f=_s(c);if(!f)continue;let h=c.parentElement;for(;h&&h!==f.body;){for(let p of h.children)u.some(v=>p.contains(v))||a.add(Wv(p));h=h.parentElement}}return a.dispose},[r,t,n])}function ow(e,t,n){let r=js(i=>{let o=i.getBoundingClientRect();o.x===0&&o.y===0&&o.width===0&&o.height===0&&n()});b.useEffect(()=>{if(!e)return;let i=t===null?null:Xn(t)?t:t.current;if(!i)return;let o=Ln();if(typeof ResizeObserver<"u"){let a=new ResizeObserver(()=>r.current(i));a.observe(i),o.add(()=>a.disconnect())}if(typeof IntersectionObserver<"u"){let a=new IntersectionObserver(()=>r.current(i));a.observe(i),o.add(()=>a.disconnect())}return()=>o.dispose()},[t,r,e])}let oc=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","details>summary","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),Lj=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var br=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(br||{}),Kh=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Kh||{}),$j=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))($j||{});function aw(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(oc)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function Fj(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Lj)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var Hp=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(Hp||{});function Vp(e,t=0){var n;return e===((n=_s(e))==null?void 0:n.body)?!1:kr(t,{0(){return e.matches(oc)},1(){let r=e;for(;r!==null;){if(r.matches(oc))return!0;r=r.parentElement}return!1}})}function lw(e){Ln().nextFrame(()=>{let t=zp(e);t&&Mr(t)&&!Vp(t,0)&&Dr(e)})}var Bj=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(Bj||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Dr(e){e==null||e.focus({preventScroll:!0})}let zj=["textarea","input"].join(",");function Uj(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,zj))!=null?n:!1}function uw(e,t=n=>n){return e.slice().sort((n,r)=>{let i=t(n),o=t(r);if(i===null||o===null)return 0;let a=i.compareDocumentPosition(o);return a&Node.DOCUMENT_POSITION_FOLLOWING?-1:a&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Wj(e,t,n=e===null?document.body:ic(e)){return wo(aw(n),t,{relativeTo:e})}function wo(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:i=[]}={}){let o=Array.isArray(e)?e.length>0?ic(e[0]):document:ic(e),a=Array.isArray(e)?n?uw(e):e:t&64?Fj(e):aw(e);i.length>0&&a.length>1&&(a=a.filter(y=>!i.some(w=>w!=null&&"current"in w?(w==null?void 0:w.current)===y:w===y))),r=r??(o==null?void 0:o.activeElement);let u=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,a.indexOf(r))-1;if(t&4)return Math.max(0,a.indexOf(r))+1;if(t&8)return a.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),f=t&32?{preventScroll:!0}:{},h=0,p=a.length,v;do{if(h>=p||h+p<=0)return 0;let y=c+h;if(t&16)y=(y+p)%p;else{if(y<0)return 3;if(y>=p)return 1}v=a[y],v==null||v.focus(f),h+=u}while(v!==zp(v));return t&6&&Uj(v)&&v.select(),2}function cw(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function Hj(){return/Android/gi.test(window.navigator.userAgent)}function Vv(){return cw()||Hj()}function vo(e,t,n,r){let i=js(n);b.useEffect(()=>{if(!e)return;function o(a){i.current(a)}return document.addEventListener(t,o,r),()=>document.removeEventListener(t,o,r)},[e,t,r])}function dw(e,t,n,r){let i=js(n);b.useEffect(()=>{if(!e)return;function o(a){i.current(a)}return window.addEventListener(t,o,r),()=>window.removeEventListener(t,o,r)},[e,t,r])}const qv=30;function fw(e,t,n){let r=js(n),i=b.useCallback(function(u,c){if(u.defaultPrevented)return;let f=c(u);if(f===null||!f.getRootNode().contains(f)||!f.isConnected)return;let h=(function p(v){return typeof v=="function"?p(v()):Array.isArray(v)||v instanceof Set?v:[v]})(t);for(let p of h)if(p!==null&&(p.contains(f)||u.composed&&u.composedPath().includes(p)))return;return!Vp(f,Hp.Loose)&&f.tabIndex!==-1&&u.preventDefault(),r.current(u,f)},[r,t]),o=b.useRef(null);vo(e,"pointerdown",u=>{var c,f;Vv()||(o.current=((f=(c=u.composedPath)==null?void 0:c.call(u))==null?void 0:f[0])||u.target)},!0),vo(e,"pointerup",u=>{if(Vv()||!o.current)return;let c=o.current;return o.current=null,i(u,()=>c)},!0);let a=b.useRef({x:0,y:0});vo(e,"touchstart",u=>{a.current.x=u.touches[0].clientX,a.current.y=u.touches[0].clientY},!0),vo(e,"touchend",u=>{let c={x:u.changedTouches[0].clientX,y:u.changedTouches[0].clientY};if(!(Math.abs(c.x-a.current.x)>=qv||Math.abs(c.y-a.current.y)>=qv))return i(u,()=>Mr(u.target)?u.target:null)},!0),dw(e,"blur",u=>i(u,()=>uj(window.document.activeElement)?window.document.activeElement:null),!0)}function Xa(...e){return b.useMemo(()=>_s(...e),[...e])}var Vj=(e=>(e[e.Ignore=0]="Ignore",e[e.Select=1]="Select",e[e.Close=2]="Close",e))(Vj||{});const Tu={Ignore:{kind:0},Select:e=>({kind:1,target:e}),Close:{kind:2}},qj=200,Kv=5;function Kj(e,{trigger:t,action:n,close:r,select:i}){let o=b.useRef(null),a=b.useRef(null),u=b.useRef(null);vo(e&&t!==null,"pointerdown",c=>{Vb(c==null?void 0:c.target)&&t!=null&&t.contains(c.target)&&(a.current=c.x,u.current=c.y,o.current=c.timeStamp)}),vo(e&&t!==null,"pointerup",c=>{var f,h;let p=o.current;if(p===null||(o.current=null,!Mr(c.target))||Math.abs(c.x-((f=a.current)!=null?f:c.x))<Kv&&Math.abs(c.y-((h=u.current)!=null?h:c.y))<Kv)return;let v=n(c);switch(v.kind){case 0:return;case 1:{c.timeStamp-p>qj&&(i(v.target),r());break}case 2:{r();break}}},{capture:!0})}function hw(e,t,n,r){let i=js(n);b.useEffect(()=>{e=e??window;function o(a){i.current(a)}return e.addEventListener(t,o,r),()=>e.removeEventListener(t,o,r)},[e,t,r])}function Yj(e,t){return b.useMemo(()=>{var n;if(e.type)return e.type;let r=(n=e.as)!=null?n:"button";if(typeof r=="string"&&r.toLowerCase()==="button"||(t==null?void 0:t.tagName)==="BUTTON"&&!t.hasAttribute("type"))return"button"},[e.type,e.as,t])}function Gj(e){return b.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}function Jj(e,t){let n=e(),r=new Set;return{getSnapshot(){return n},subscribe(i){return r.add(i),()=>r.delete(i)},dispatch(i,...o){let a=t[i].call(n,...o);a&&(n=a,r.forEach(u=>u()))}}}function Qj(){let e;return{before({doc:t}){var n;let r=t.documentElement,i=(n=t.defaultView)!=null?n:window;e=Math.max(0,i.innerWidth-r.clientWidth)},after({doc:t,d:n}){let r=t.documentElement,i=Math.max(0,r.clientWidth-r.offsetWidth),o=Math.max(0,e-i);n.style(r,"paddingRight",`${o}px`)}}}function Xj(){return cw()?{before({doc:e,d:t,meta:n}){function r(i){for(let o of n().containers)for(let a of o())if(a.contains(i))return!0;return!1}t.microTask(()=>{var i;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let u=Ln();u.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>u.dispose()))}let o=(i=window.scrollY)!=null?i:window.pageYOffset,a=null;t.addEventListener(e,"click",u=>{if(Mr(u.target))try{let c=u.target.closest("a");if(!c)return;let{hash:f}=new URL(c.href),h=e.querySelector(f);Mr(h)&&!r(h)&&(a=h)}catch{}},!0),t.group(u=>{t.addEventListener(e,"touchstart",c=>{if(u.dispose(),Mr(c.target)&&lj(c.target))if(r(c.target)){let f=c.target;for(;f.parentElement&&r(f.parentElement);)f=f.parentElement;u.style(f,"overscrollBehavior","contain")}else u.style(c.target,"touchAction","none")})}),t.addEventListener(e,"touchmove",u=>{if(Mr(u.target)){if(qb(u.target))return;if(r(u.target)){let c=u.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&u.preventDefault()}else u.preventDefault()}},{passive:!1}),t.add(()=>{var u;let c=(u=window.scrollY)!=null?u:window.pageYOffset;o!==c&&window.scrollTo(0,o),a&&a.isConnected&&(a.scrollIntoView({block:"nearest"}),a=null)})})}}:{}}function Zj(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function Yv(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let ys=Jj(()=>new Map,{PUSH(e,t){var n;let r=(n=this.get(e))!=null?n:{doc:e,count:0,d:Ln(),meta:new Set,computedMeta:{}};return r.count++,r.meta.add(t),r.computedMeta=Yv(r.meta),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t),n.computedMeta=Yv(n.meta)),this},SCROLL_PREVENT(e){let t={doc:e.doc,d:e.d,meta(){return e.computedMeta}},n=[Xj(),Qj(),Zj()];n.forEach(({before:r})=>r==null?void 0:r(t)),n.forEach(({after:r})=>r==null?void 0:r(t))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});ys.subscribe(()=>{let e=ys.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let r=t.get(n.doc)==="hidden",i=n.count!==0;(i&&!r||!i&&r)&&ys.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&ys.dispatch("TEARDOWN",n)}});function eN(e,t,n=()=>({containers:[]})){let r=Gj(ys),i=t?r.get(t):void 0,o=i?i.count>0:!1;return It(()=>{if(!(!t||!e))return ys.dispatch("PUSH",t,n),()=>ys.dispatch("POP",t,n)},[e,t]),o}function pw(e,t,n=()=>[document.body]){let r=ul(e,"scroll-lock");eN(r,t,i=>{var o;return{containers:[...(o=i.containers)!=null?o:[],n]}})}function Gv(e){return[e.screenX,e.screenY]}function tN(){let e=b.useRef([-1,-1]);return{wasMoved(t){let n=Gv(t);return e.current[0]===n[0]&&e.current[1]===n[1]?!1:(e.current=n,!0)},update(t){e.current=Gv(t)}}}function nN(e=0){let[t,n]=b.useState(e),r=b.useCallback(c=>n(c),[]),i=b.useCallback(c=>n(f=>f|c),[]),o=b.useCallback(c=>(t&c)===c,[t]),a=b.useCallback(c=>n(f=>f&~c),[]),u=b.useCallback(c=>n(f=>f^c),[]);return{flags:t,setFlag:r,addFlag:i,hasFlag:o,removeFlag:a,toggleFlag:u}}var rN={},Jv,Qv;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((Jv=process==null?void 0:rN)==null?void 0:Jv.NODE_ENV)==="test"&&typeof((Qv=Element==null?void 0:Element.prototype)==null?void 0:Qv.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var iN=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(iN||{});function mw(e){let t={};for(let n in e)e[n]===!0&&(t[`data-${n}`]="");return t}function gw(e,t,n,r){let[i,o]=b.useState(n),{hasFlag:a,addFlag:u,removeFlag:c}=nN(e&&i?3:0),f=b.useRef(!1),h=b.useRef(!1),p=Cs();return It(()=>{var v;if(e){if(n&&o(!0),!t){n&&u(3);return}return(v=r==null?void 0:r.start)==null||v.call(r,n),sN(t,{inFlight:f,prepare(){h.current?h.current=!1:h.current=f.current,f.current=!0,!h.current&&(n?(u(3),c(4)):(u(4),c(2)))},run(){h.current?n?(c(3),u(4)):(c(4),u(3)):n?c(1):u(1)},done(){var y;h.current&&lN(t)||(f.current=!1,c(7),n||o(!1),(y=r==null?void 0:r.end)==null||y.call(r,n))}})}},[e,n,t,p]),e?[i,{closed:a(1),enter:a(2),leave:a(4),transition:a(2)||a(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function sN(e,{prepare:t,run:n,done:r,inFlight:i}){let o=Ln();return aN(e,{prepare:t,inFlight:i}),o.nextFrame(()=>{n(),o.requestAnimationFrame(()=>{o.add(oN(e,r))})}),o.dispose}function oN(e,t){var n,r;let i=Ln();if(!e)return i.dispose;let o=!1;i.add(()=>{o=!0});let a=(r=(n=e.getAnimations)==null?void 0:n.call(e).filter(u=>u instanceof CSSTransition))!=null?r:[];return a.length===0?(t(),i.dispose):(Promise.allSettled(a.map(u=>u.finished)).then(()=>{o||t()}),i.dispose)}function aN(e,{inFlight:t,prepare:n}){if(t!=null&&t.current){n();return}let r=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=r}function lN(e){var t,n;return((n=(t=e.getAnimations)==null?void 0:t.call(e))!=null?n:[]).some(r=>r instanceof CSSTransition&&r.playState!=="finished")}function uN(e,{container:t,accept:n,walk:r}){let i=b.useRef(n),o=b.useRef(r);b.useEffect(()=>{i.current=n,o.current=r},[n,r]),It(()=>{if(!t||!e)return;let a=_s(t);if(!a)return;let u=i.current,c=o.current,f=Object.assign(p=>u(p),{acceptNode:u}),h=a.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,f,!1);for(;h.nextNode();)c(h.currentNode)},[t,e,i,o])}function qp(e,t){let n=b.useRef([]),r=tt(e);b.useEffect(()=>{let i=[...n.current];for(let[o,a]of t.entries())if(n.current[o]!==a){let u=r(t,i);return n.current=t,u}},[r,...t])}function Rc(){return typeof window<"u"}function Do(e){return yw(e)?(e.nodeName||"").toLowerCase():"#document"}function Jn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function zr(e){var t;return(t=(yw(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function yw(e){return Rc()?e instanceof Node||e instanceof Jn(e).Node:!1}function _n(e){return Rc()?e instanceof Element||e instanceof Jn(e).Element:!1}function $r(e){return Rc()?e instanceof HTMLElement||e instanceof Jn(e).HTMLElement:!1}function Xv(e){return!Rc()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Jn(e).ShadowRoot}const cN=new Set(["inline","contents"]);function cl(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Sr(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!cN.has(i)}const dN=new Set(["table","td","th"]);function fN(e){return dN.has(Do(e))}const hN=[":popover-open",":modal"];function Ac(e){return hN.some(t=>{try{return e.matches(t)}catch{return!1}})}const pN=["transform","translate","scale","rotate","perspective"],mN=["transform","translate","scale","rotate","perspective","filter"],gN=["paint","layout","strict","content"];function Kp(e){const t=Yp(),n=_n(e)?Sr(e):e;return pN.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||mN.some(r=>(n.willChange||"").includes(r))||gN.some(r=>(n.contain||"").includes(r))}function yN(e){let t=$i(e);for(;$r(t)&&!To(t);){if(Kp(t))return t;if(Ac(t))return null;t=$i(t)}return null}function Yp(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const vN=new Set(["html","body","#document"]);function To(e){return vN.has(Do(e))}function Sr(e){return Jn(e).getComputedStyle(e)}function Mc(e){return _n(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function $i(e){if(Do(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Xv(e)&&e.host||zr(e);return Xv(t)?t.host:t}function vw(e){const t=$i(e);return To(t)?e.ownerDocument?e.ownerDocument.body:e.body:$r(t)&&cl(t)?t:vw(t)}function Za(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=vw(e),o=i===((r=e.ownerDocument)==null?void 0:r.body),a=Jn(i);if(o){const u=Yh(a);return t.concat(a,a.visualViewport||[],cl(i)?i:[],u&&n?Za(u):[])}return t.concat(i,Za(i,[],n))}function Yh(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function xN(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}const bs=Math.min,xn=Math.max,el=Math.round,Iu=Math.floor,Lr=e=>({x:e,y:e}),bN={left:"right",right:"left",bottom:"top",top:"bottom"},wN={start:"end",end:"start"};function Zv(e,t,n){return xn(e,bs(t,n))}function Lo(e,t){return typeof e=="function"?e(t):e}function Fi(e){return e.split("-")[0]}function dl(e){return e.split("-")[1]}function xw(e){return e==="x"?"y":"x"}function bw(e){return e==="y"?"height":"width"}const kN=new Set(["top","bottom"]);function Zr(e){return kN.has(Fi(e))?"y":"x"}function ww(e){return xw(Zr(e))}function SN(e,t,n){n===void 0&&(n=!1);const r=dl(e),i=ww(e),o=bw(i);let a=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(a=ac(a)),[a,ac(a)]}function EN(e){const t=ac(e);return[Gh(e),t,Gh(t)]}function Gh(e){return e.replace(/start|end/g,t=>wN[t])}const ex=["left","right"],tx=["right","left"],_N=["top","bottom"],CN=["bottom","top"];function jN(e,t,n){switch(e){case"top":case"bottom":return n?t?tx:ex:t?ex:tx;case"left":case"right":return t?_N:CN;default:return[]}}function NN(e,t,n,r){const i=dl(e);let o=jN(Fi(e),n==="start",r);return i&&(o=o.map(a=>a+"-"+i),t&&(o=o.concat(o.map(Gh)))),o}function ac(e){return e.replace(/left|right|bottom|top/g,t=>bN[t])}function TN(e){return{top:0,right:0,bottom:0,left:0,...e}}function IN(e){return typeof e!="number"?TN(e):{top:e,right:e,bottom:e,left:e}}function lc(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function nx(e,t,n){let{reference:r,floating:i}=e;const o=Zr(t),a=ww(t),u=bw(a),c=Fi(t),f=o==="y",h=r.x+r.width/2-i.width/2,p=r.y+r.height/2-i.height/2,v=r[u]/2-i[u]/2;let y;switch(c){case"top":y={x:h,y:r.y-i.height};break;case"bottom":y={x:h,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:p};break;case"left":y={x:r.x-i.width,y:p};break;default:y={x:r.x,y:r.y}}switch(dl(t)){case"start":y[a]-=v*(n&&f?-1:1);break;case"end":y[a]+=v*(n&&f?-1:1);break}return y}const PN=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:a}=n,u=o.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(t));let f=await a.getElementRects({reference:e,floating:t,strategy:i}),{x:h,y:p}=nx(f,r,c),v=r,y={},w=0;for(let S=0;S<u.length;S++){const{name:k,fn:_}=u[S],{x:C,y:j,data:I,reset:O}=await _({x:h,y:p,initialPlacement:r,placement:v,strategy:i,middlewareData:y,rects:f,platform:a,elements:{reference:e,floating:t}});h=C??h,p=j??p,y={...y,[k]:{...y[k],...I}},O&&w<=50&&(w++,typeof O=="object"&&(O.placement&&(v=O.placement),O.rects&&(f=O.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:i}):O.rects),{x:h,y:p}=nx(f,v,c)),S=-1)}return{x:h,y:p,placement:v,strategy:i,middlewareData:y}};async function Oc(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:o,rects:a,elements:u,strategy:c}=e,{boundary:f="clippingAncestors",rootBoundary:h="viewport",elementContext:p="floating",altBoundary:v=!1,padding:y=0}=Lo(t,e),w=IN(y),k=u[v?p==="floating"?"reference":"floating":p],_=lc(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(k)))==null||n?k:k.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(u.floating)),boundary:f,rootBoundary:h,strategy:c})),C=p==="floating"?{x:r,y:i,width:a.floating.width,height:a.floating.height}:a.reference,j=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u.floating)),I=await(o.isElement==null?void 0:o.isElement(j))?await(o.getScale==null?void 0:o.getScale(j))||{x:1,y:1}:{x:1,y:1},O=lc(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:C,offsetParent:j,strategy:c}):C);return{top:(_.top-O.top+w.top)/I.y,bottom:(O.bottom-_.bottom+w.bottom)/I.y,left:(_.left-O.left+w.left)/I.x,right:(O.right-_.right+w.right)/I.x}}const RN=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:o,rects:a,initialPlacement:u,platform:c,elements:f}=t,{mainAxis:h=!0,crossAxis:p=!0,fallbackPlacements:v,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:S=!0,...k}=Lo(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const _=Fi(i),C=Zr(u),j=Fi(u)===u,I=await(c.isRTL==null?void 0:c.isRTL(f.floating)),O=v||(j||!S?[ac(u)]:EN(u)),R=w!=="none";!v&&R&&O.push(...NN(u,S,w,I));const U=[u,...O],re=await Oc(t,k),z=[];let M=((r=o.flip)==null?void 0:r.overflows)||[];if(h&&z.push(re[_]),p){const H=SN(i,a,I);z.push(re[H[0]],re[H[1]])}if(M=[...M,{placement:i,overflows:z}],!z.every(H=>H<=0)){var L,se;const H=(((L=o.flip)==null?void 0:L.index)||0)+1,V=U[H];if(V&&(!(p==="alignment"?C!==Zr(V):!1)||M.every(B=>Zr(B.placement)===C?B.overflows[0]>0:!0)))return{data:{index:H,overflows:M},reset:{placement:V}};let te=(se=M.filter(Z=>Z.overflows[0]<=0).sort((Z,B)=>Z.overflows[1]-B.overflows[1])[0])==null?void 0:se.placement;if(!te)switch(y){case"bestFit":{var q;const Z=(q=M.filter(B=>{if(R){const $=Zr(B.placement);return $===C||$==="y"}return!0}).map(B=>[B.placement,B.overflows.filter($=>$>0).reduce(($,N)=>$+N,0)]).sort((B,$)=>B[1]-$[1])[0])==null?void 0:q[0];Z&&(te=Z);break}case"initialPlacement":te=u;break}if(i!==te)return{reset:{placement:te}}}return{}}}},AN=new Set(["left","top"]);async function MN(e,t){const{placement:n,platform:r,elements:i}=e,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),a=Fi(n),u=dl(n),c=Zr(n)==="y",f=AN.has(a)?-1:1,h=o&&c?-1:1,p=Lo(t,e);let{mainAxis:v,crossAxis:y,alignmentAxis:w}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return u&&typeof w=="number"&&(y=u==="end"?w*-1:w),c?{x:y*h,y:v*f}:{x:v*f,y:y*h}}const ON=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:o,placement:a,middlewareData:u}=t,c=await MN(t,e);return a===((n=u.offset)==null?void 0:n.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:o+c.y,data:{...c,placement:a}}}}},DN=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:a=!1,limiter:u={fn:k=>{let{x:_,y:C}=k;return{x:_,y:C}}},...c}=Lo(e,t),f={x:n,y:r},h=await Oc(t,c),p=Zr(Fi(i)),v=xw(p);let y=f[v],w=f[p];if(o){const k=v==="y"?"top":"left",_=v==="y"?"bottom":"right",C=y+h[k],j=y-h[_];y=Zv(C,y,j)}if(a){const k=p==="y"?"top":"left",_=p==="y"?"bottom":"right",C=w+h[k],j=w-h[_];w=Zv(C,w,j)}const S=u.fn({...t,[v]:y,[p]:w});return{...S,data:{x:S.x-n,y:S.y-r,enabled:{[v]:o,[p]:a}}}}}},LN=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:o,platform:a,elements:u}=t,{apply:c=()=>{},...f}=Lo(e,t),h=await Oc(t,f),p=Fi(i),v=dl(i),y=Zr(i)==="y",{width:w,height:S}=o.floating;let k,_;p==="top"||p==="bottom"?(k=p,_=v===(await(a.isRTL==null?void 0:a.isRTL(u.floating))?"start":"end")?"left":"right"):(_=p,k=v==="end"?"top":"bottom");const C=S-h.top-h.bottom,j=w-h.left-h.right,I=bs(S-h[k],C),O=bs(w-h[_],j),R=!t.middlewareData.shift;let U=I,re=O;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(re=j),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(U=C),R&&!v){const M=xn(h.left,0),L=xn(h.right,0),se=xn(h.top,0),q=xn(h.bottom,0);y?re=w-2*(M!==0||L!==0?M+L:xn(h.left,h.right)):U=S-2*(se!==0||q!==0?se+q:xn(h.top,h.bottom))}await c({...t,availableWidth:re,availableHeight:U});const z=await a.getDimensions(u.floating);return w!==z.width||S!==z.height?{reset:{rects:!0}}:{}}}};function kw(e){const t=Sr(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=$r(e),o=i?e.offsetWidth:n,a=i?e.offsetHeight:r,u=el(n)!==o||el(r)!==a;return u&&(n=o,r=a),{width:n,height:r,$:u}}function Gp(e){return _n(e)?e:e.contextElement}function ko(e){const t=Gp(e);if(!$r(t))return Lr(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=kw(t);let a=(o?el(n.width):n.width)/r,u=(o?el(n.height):n.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!u||!Number.isFinite(u))&&(u=1),{x:a,y:u}}const $N=Lr(0);function Sw(e){const t=Jn(e);return!Yp()||!t.visualViewport?$N:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function FN(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Jn(e)?!1:t}function ws(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),o=Gp(e);let a=Lr(1);t&&(r?_n(r)&&(a=ko(r)):a=ko(e));const u=FN(o,n,r)?Sw(o):Lr(0);let c=(i.left+u.x)/a.x,f=(i.top+u.y)/a.y,h=i.width/a.x,p=i.height/a.y;if(o){const v=Jn(o),y=r&&_n(r)?Jn(r):r;let w=v,S=Yh(w);for(;S&&r&&y!==w;){const k=ko(S),_=S.getBoundingClientRect(),C=Sr(S),j=_.left+(S.clientLeft+parseFloat(C.paddingLeft))*k.x,I=_.top+(S.clientTop+parseFloat(C.paddingTop))*k.y;c*=k.x,f*=k.y,h*=k.x,p*=k.y,c+=j,f+=I,w=Jn(S),S=Yh(w)}}return lc({width:h,height:p,x:c,y:f})}function Dc(e,t){const n=Mc(e).scrollLeft;return t?t.left+n:ws(zr(e)).left+n}function Ew(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-Dc(e,n),i=n.top+t.scrollTop;return{x:r,y:i}}function BN(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const o=i==="fixed",a=zr(r),u=t?Ac(t.floating):!1;if(r===a||u&&o)return n;let c={scrollLeft:0,scrollTop:0},f=Lr(1);const h=Lr(0),p=$r(r);if((p||!p&&!o)&&((Do(r)!=="body"||cl(a))&&(c=Mc(r)),$r(r))){const y=ws(r);f=ko(r),h.x=y.x+r.clientLeft,h.y=y.y+r.clientTop}const v=a&&!p&&!o?Ew(a,c):Lr(0);return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-c.scrollLeft*f.x+h.x+v.x,y:n.y*f.y-c.scrollTop*f.y+h.y+v.y}}function zN(e){return Array.from(e.getClientRects())}function UN(e){const t=zr(e),n=Mc(e),r=e.ownerDocument.body,i=xn(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=xn(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+Dc(e);const u=-n.scrollTop;return Sr(r).direction==="rtl"&&(a+=xn(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:a,y:u}}const rx=25;function WN(e,t){const n=Jn(e),r=zr(e),i=n.visualViewport;let o=r.clientWidth,a=r.clientHeight,u=0,c=0;if(i){o=i.width,a=i.height;const h=Yp();(!h||h&&t==="fixed")&&(u=i.offsetLeft,c=i.offsetTop)}const f=Dc(r);if(f<=0){const h=r.ownerDocument,p=h.body,v=getComputedStyle(p),y=h.compatMode==="CSS1Compat"&&parseFloat(v.marginLeft)+parseFloat(v.marginRight)||0,w=Math.abs(r.clientWidth-p.clientWidth-y);w<=rx&&(o-=w)}else f<=rx&&(o+=f);return{width:o,height:a,x:u,y:c}}const HN=new Set(["absolute","fixed"]);function VN(e,t){const n=ws(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=$r(e)?ko(e):Lr(1),a=e.clientWidth*o.x,u=e.clientHeight*o.y,c=i*o.x,f=r*o.y;return{width:a,height:u,x:c,y:f}}function ix(e,t,n){let r;if(t==="viewport")r=WN(e,n);else if(t==="document")r=UN(zr(e));else if(_n(t))r=VN(t,n);else{const i=Sw(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return lc(r)}function _w(e,t){const n=$i(e);return n===t||!_n(n)||To(n)?!1:Sr(n).position==="fixed"||_w(n,t)}function qN(e,t){const n=t.get(e);if(n)return n;let r=Za(e,[],!1).filter(u=>_n(u)&&Do(u)!=="body"),i=null;const o=Sr(e).position==="fixed";let a=o?$i(e):e;for(;_n(a)&&!To(a);){const u=Sr(a),c=Kp(a);!c&&u.position==="fixed"&&(i=null),(o?!c&&!i:!c&&u.position==="static"&&!!i&&HN.has(i.position)||cl(a)&&!c&&_w(e,a))?r=r.filter(h=>h!==a):i=u,a=$i(a)}return t.set(e,r),r}function KN(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const a=[...n==="clippingAncestors"?Ac(t)?[]:qN(t,this._c):[].concat(n),r],u=a[0],c=a.reduce((f,h)=>{const p=ix(t,h,i);return f.top=xn(p.top,f.top),f.right=bs(p.right,f.right),f.bottom=bs(p.bottom,f.bottom),f.left=xn(p.left,f.left),f},ix(t,u,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function YN(e){const{width:t,height:n}=kw(e);return{width:t,height:n}}function GN(e,t,n){const r=$r(t),i=zr(t),o=n==="fixed",a=ws(e,!0,o,t);let u={scrollLeft:0,scrollTop:0};const c=Lr(0);function f(){c.x=Dc(i)}if(r||!r&&!o)if((Do(t)!=="body"||cl(i))&&(u=Mc(t)),r){const y=ws(t,!0,o,t);c.x=y.x+t.clientLeft,c.y=y.y+t.clientTop}else i&&f();o&&!r&&i&&f();const h=i&&!r&&!o?Ew(i,u):Lr(0),p=a.left+u.scrollLeft-c.x-h.x,v=a.top+u.scrollTop-c.y-h.y;return{x:p,y:v,width:a.width,height:a.height}}function Yf(e){return Sr(e).position==="static"}function sx(e,t){if(!$r(e)||Sr(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return zr(e)===n&&(n=n.ownerDocument.body),n}function Cw(e,t){const n=Jn(e);if(Ac(e))return n;if(!$r(e)){let i=$i(e);for(;i&&!To(i);){if(_n(i)&&!Yf(i))return i;i=$i(i)}return n}let r=sx(e,t);for(;r&&fN(r)&&Yf(r);)r=sx(r,t);return r&&To(r)&&Yf(r)&&!Kp(r)?n:r||yN(e)||n}const JN=async function(e){const t=this.getOffsetParent||Cw,n=this.getDimensions,r=await n(e.floating);return{reference:GN(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function QN(e){return Sr(e).direction==="rtl"}const XN={convertOffsetParentRelativeRectToViewportRelativeRect:BN,getDocumentElement:zr,getClippingRect:KN,getOffsetParent:Cw,getElementRects:JN,getClientRects:zN,getDimensions:YN,getScale:ko,isElement:_n,isRTL:QN};function jw(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function ZN(e,t){let n=null,r;const i=zr(e);function o(){var u;clearTimeout(r),(u=n)==null||u.disconnect(),n=null}function a(u,c){u===void 0&&(u=!1),c===void 0&&(c=1),o();const f=e.getBoundingClientRect(),{left:h,top:p,width:v,height:y}=f;if(u||t(),!v||!y)return;const w=Iu(p),S=Iu(i.clientWidth-(h+v)),k=Iu(i.clientHeight-(p+y)),_=Iu(h),j={rootMargin:-w+"px "+-S+"px "+-k+"px "+-_+"px",threshold:xn(0,bs(1,c))||1};let I=!0;function O(R){const U=R[0].intersectionRatio;if(U!==c){if(!I)return a();U?a(!1,U):r=setTimeout(()=>{a(!1,1e-7)},1e3)}U===1&&!jw(f,e.getBoundingClientRect())&&a(),I=!1}try{n=new IntersectionObserver(O,{...j,root:i.ownerDocument})}catch{n=new IntersectionObserver(O,j)}n.observe(e)}return a(!0),o}function eT(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,f=Gp(e),h=i||o?[...f?Za(f):[],...Za(t)]:[];h.forEach(_=>{i&&_.addEventListener("scroll",n,{passive:!0}),o&&_.addEventListener("resize",n)});const p=f&&u?ZN(f,n):null;let v=-1,y=null;a&&(y=new ResizeObserver(_=>{let[C]=_;C&&C.target===f&&y&&(y.unobserve(t),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var j;(j=y)==null||j.observe(t)})),n()}),f&&!c&&y.observe(f),y.observe(t));let w,S=c?ws(e):null;c&&k();function k(){const _=ws(e);S&&!jw(S,_)&&n(),S=_,w=requestAnimationFrame(k)}return n(),()=>{var _;h.forEach(C=>{i&&C.removeEventListener("scroll",n),o&&C.removeEventListener("resize",n)}),p==null||p(),(_=y)==null||_.disconnect(),y=null,c&&cancelAnimationFrame(w)}}const Gf=Oc,tT=ON,nT=DN,rT=RN,iT=LN,sT=(e,t,n)=>{const r=new Map,i={platform:XN,...n},o={...i.platform,_c:r};return PN(e,t,{...i,platform:o})};var oT=typeof document<"u",aT=function(){},qu=oT?b.useLayoutEffect:aT;function uc(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!uc(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&e.$$typeof)&&!uc(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function Nw(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function ox(e,t){const n=Nw(e);return Math.round(t*n)/n}function Jf(e){const t=b.useRef(e);return qu(()=>{t.current=e}),t}function lT(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:a}={},transform:u=!0,whileElementsMounted:c,open:f}=e,[h,p]=b.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[v,y]=b.useState(r);uc(v,r)||y(r);const[w,S]=b.useState(null),[k,_]=b.useState(null),C=b.useCallback(B=>{B!==R.current&&(R.current=B,S(B))},[]),j=b.useCallback(B=>{B!==U.current&&(U.current=B,_(B))},[]),I=o||w,O=a||k,R=b.useRef(null),U=b.useRef(null),re=b.useRef(h),z=c!=null,M=Jf(c),L=Jf(i),se=Jf(f),q=b.useCallback(()=>{if(!R.current||!U.current)return;const B={placement:t,strategy:n,middleware:v};L.current&&(B.platform=L.current),sT(R.current,U.current,B).then($=>{const N={...$,isPositioned:se.current!==!1};H.current&&!uc(re.current,N)&&(re.current=N,Gn.flushSync(()=>{p(N)}))})},[v,t,n,L,se]);qu(()=>{f===!1&&re.current.isPositioned&&(re.current.isPositioned=!1,p(B=>({...B,isPositioned:!1})))},[f]);const H=b.useRef(!1);qu(()=>(H.current=!0,()=>{H.current=!1}),[]),qu(()=>{if(I&&(R.current=I),O&&(U.current=O),I&&O){if(M.current)return M.current(I,O,q);q()}},[I,O,q,M,z]);const V=b.useMemo(()=>({reference:R,floating:U,setReference:C,setFloating:j}),[C,j]),te=b.useMemo(()=>({reference:I,floating:O}),[I,O]),Z=b.useMemo(()=>{const B={position:n,left:0,top:0};if(!te.floating)return B;const $=ox(te.floating,h.x),N=ox(te.floating,h.y);return u?{...B,transform:"translate("+$+"px, "+N+"px)",...Nw(te.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:$,top:N}},[n,u,te.floating,h.x,h.y]);return b.useMemo(()=>({...h,update:q,refs:V,elements:te,floatingStyles:Z}),[h,q,V,te,Z])}const Tw=(e,t)=>({...tT(e),options:[e,t]}),uT=(e,t)=>({...nT(e),options:[e,t]}),cT=(e,t)=>({...rT(e),options:[e,t]}),dT=(e,t)=>({...iT(e),options:[e,t]}),Iw={...ec},fT=Iw.useInsertionEffect,hT=fT||(e=>e());function Pw(e){const t=b.useRef(()=>{});return hT(()=>{t.current=e}),b.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var Jh=typeof document<"u"?b.useLayoutEffect:b.useEffect;let ax=!1,pT=0;const lx=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+pT++;function mT(){const[e,t]=b.useState(()=>ax?lx():void 0);return Jh(()=>{e==null&&t(lx())},[]),b.useEffect(()=>{ax=!0},[]),e}const gT=Iw.useId,yT=gT||mT;function vT(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const xT=b.createContext(null),bT=b.createContext(null),wT=()=>{var e;return((e=b.useContext(xT))==null?void 0:e.id)||null},kT=()=>b.useContext(bT),ST="data-floating-ui-focusable";function ET(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=yT(),o=b.useRef({}),[a]=b.useState(()=>vT()),u=wT()!=null,[c,f]=b.useState(r.reference),h=Pw((y,w,S)=>{o.current.openEvent=y?w:void 0,a.emit("openchange",{open:y,event:w,reason:S,nested:u}),n==null||n(y,w,S)}),p=b.useMemo(()=>({setPositionReference:f}),[]),v=b.useMemo(()=>({reference:c||r.reference||null,floating:r.floating||null,domReference:r.reference}),[c,r.reference,r.floating]);return b.useMemo(()=>({dataRef:o,open:t,onOpenChange:h,elements:v,events:a,floatingId:i,refs:p}),[t,h,v,a,i,p])}function _T(e){e===void 0&&(e={});const{nodeId:t}=e,n=ET({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[o,a]=b.useState(null),[u,c]=b.useState(null),h=(i==null?void 0:i.domReference)||o,p=b.useRef(null),v=kT();Jh(()=>{h&&(p.current=h)},[h]);const y=lT({...e,elements:{...i,...u&&{reference:u}}}),w=b.useCallback(j=>{const I=_n(j)?{getBoundingClientRect:()=>j.getBoundingClientRect(),contextElement:j}:j;c(I),y.refs.setReference(I)},[y.refs]),S=b.useCallback(j=>{(_n(j)||j===null)&&(p.current=j,a(j)),(_n(y.refs.reference.current)||y.refs.reference.current===null||j!==null&&!_n(j))&&y.refs.setReference(j)},[y.refs]),k=b.useMemo(()=>({...y.refs,setReference:S,setPositionReference:w,domReference:p}),[y.refs,S,w]),_=b.useMemo(()=>({...y.elements,domReference:h}),[y.elements,h]),C=b.useMemo(()=>({...y,...r,refs:k,elements:_,nodeId:t}),[y,k,_,t,r]);return Jh(()=>{r.dataRef.current.floatingContext=C;const j=v==null?void 0:v.nodesRef.current.find(I=>I.id===t);j&&(j.context=C)}),b.useMemo(()=>({...y,context:C,refs:k,elements:_}),[y,k,_,C])}const ux="active",cx="selected";function Qf(e,t,n){const r=new Map,i=n==="item";let o=e;if(i&&e){const{[ux]:a,[cx]:u,...c}=e;o=c}return{...n==="floating"&&{tabIndex:-1,[ST]:""},...o,...t.map(a=>{const u=a?a[n]:null;return typeof u=="function"?e?u(e):null:u}).concat(e).reduce((a,u)=>(u&&Object.entries(u).forEach(c=>{let[f,h]=c;if(!(i&&[ux,cx].includes(f)))if(f.indexOf("on")===0){if(r.has(f)||r.set(f,[]),typeof h=="function"){var p;(p=r.get(f))==null||p.push(h),a[f]=function(){for(var v,y=arguments.length,w=new Array(y),S=0;S<y;S++)w[S]=arguments[S];return(v=r.get(f))==null?void 0:v.map(k=>k(...w)).find(k=>k!==void 0)}}}else a[f]=h}),a),{})}}function CT(e){e===void 0&&(e=[]);const t=e.map(u=>u==null?void 0:u.reference),n=e.map(u=>u==null?void 0:u.floating),r=e.map(u=>u==null?void 0:u.item),i=b.useCallback(u=>Qf(u,e,"reference"),t),o=b.useCallback(u=>Qf(u,e,"floating"),n),a=b.useCallback(u=>Qf(u,e,"item"),r);return b.useMemo(()=>({getReferenceProps:i,getFloatingProps:o,getItemProps:a}),[i,o,a])}function dx(e,t){return{...e,rects:{...e.rects,floating:{...e.rects.floating,height:t}}}}const jT=e=>({name:"inner",options:e,async fn(t){const{listRef:n,overflowRef:r,onFallbackChange:i,offset:o=0,index:a=0,minItemsVisible:u=4,referenceOverflowThreshold:c=0,scrollRef:f,...h}=Lo(e,t),{rects:p,elements:{floating:v}}=t,y=n.current[a],w=(f==null?void 0:f.current)||v,S=v.clientTop||w.clientTop,k=v.clientTop!==0,_=w.clientTop!==0,C=v===w;if(!y)return{};const j={...t,...await Tw(-y.offsetTop-v.clientTop-p.reference.height/2-y.offsetHeight/2-o).fn(t)},I=await Gf(dx(j,w.scrollHeight+S+v.clientTop),h),O=await Gf(j,{...h,elementContext:"reference"}),R=xn(0,I.top),U=j.y+R,M=(w.scrollHeight>w.clientHeight?L=>L:el)(xn(0,w.scrollHeight+(k&&C||_?S*2:0)-R-xn(0,I.bottom)));if(w.style.maxHeight=M+"px",w.scrollTop=R,i){const L=w.offsetHeight<y.offsetHeight*bs(u,n.current.length)-1||O.top>=-c||O.bottom>=-c;Gn.flushSync(()=>i(L))}return r&&(r.current=await Gf(dx({...j,y:U},w.offsetHeight+S+v.clientTop),h)),{y:U}}});function NT(e,t){const{open:n,elements:r}=e,{enabled:i=!0,overflowRef:o,scrollRef:a,onChange:u}=t,c=Pw(u),f=b.useRef(!1),h=b.useRef(null),p=b.useRef(null);b.useEffect(()=>{if(!i)return;function y(S){if(S.ctrlKey||!w||o.current==null)return;const k=S.deltaY,_=o.current.top>=-.5,C=o.current.bottom>=-.5,j=w.scrollHeight-w.clientHeight,I=k<0?-1:1,O=k<0?"max":"min";w.scrollHeight<=w.clientHeight||(!_&&k>0||!C&&k<0?(S.preventDefault(),Gn.flushSync(()=>{c(R=>R+Math[O](k,j*I))})):/firefox/i.test(xN())&&(w.scrollTop+=k))}const w=(a==null?void 0:a.current)||r.floating;if(n&&w)return w.addEventListener("wheel",y),requestAnimationFrame(()=>{h.current=w.scrollTop,o.current!=null&&(p.current={...o.current})}),()=>{h.current=null,p.current=null,w.removeEventListener("wheel",y)}},[i,n,r.floating,o,a,c]);const v=b.useMemo(()=>({onKeyDown(){f.current=!0},onWheel(){f.current=!1},onPointerMove(){f.current=!1},onScroll(){const y=(a==null?void 0:a.current)||r.floating;if(!(!o.current||!y||!f.current)){if(h.current!==null){const w=y.scrollTop-h.current;(o.current.bottom<-.5&&w<-1||o.current.top<-.5&&w>1)&&Gn.flushSync(()=>c(S=>S+w))}requestAnimationFrame(()=>{h.current=y.scrollTop})}}}),[r.floating,c,o,a]);return b.useMemo(()=>i?{floating:v}:{},[i,v])}let $o=b.createContext({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});$o.displayName="FloatingContext";let Jp=b.createContext(null);Jp.displayName="PlacementContext";function TT(e){return b.useMemo(()=>e?typeof e=="string"?{to:e}:e:null,[e])}function IT(){return b.useContext($o).setReference}function PT(){return b.useContext($o).getReferenceProps}function RT(){let{getFloatingProps:e,slot:t}=b.useContext($o);return b.useCallback((...n)=>Object.assign({},e(...n),{"data-anchor":t.anchor}),[e,t])}function AT(e=null){e===!1&&(e=null),typeof e=="string"&&(e={to:e});let t=b.useContext(Jp),n=b.useMemo(()=>e,[JSON.stringify(e,(i,o)=>{var a;return(a=o==null?void 0:o.outerHTML)!=null?a:o})]);It(()=>{t==null||t(n??null)},[t,n]);let r=b.useContext($o);return b.useMemo(()=>[r.setFloating,e?r.styles:{}],[r.setFloating,e,r.styles])}let fx=4;function MT({children:e,enabled:t=!0}){let[n,r]=b.useState(null),[i,o]=b.useState(0),a=b.useRef(null),[u,c]=b.useState(null);OT(u);let f=t&&n!==null&&u!==null,{to:h="bottom",gap:p=0,offset:v=0,padding:y=0,inner:w}=DT(n,u),[S,k="center"]=h.split(" ");It(()=>{f&&o(0)},[f]);let{refs:_,floatingStyles:C,context:j}=_T({open:f,placement:S==="selection"?k==="center"?"bottom":`bottom-${k}`:k==="center"?`${S}`:`${S}-${k}`,strategy:"absolute",transform:!1,middleware:[Tw({mainAxis:S==="selection"?0:p,crossAxis:v}),uT({padding:y}),S!=="selection"&&cT({padding:y}),S==="selection"&&w?jT({...w,padding:y,overflowRef:a,offset:i,minItemsVisible:fx,referenceOverflowThreshold:y,onFallbackChange(L){var se,q;if(!L)return;let H=j.elements.floating;if(!H)return;let V=parseFloat(getComputedStyle(H).scrollPaddingBottom)||0,te=Math.min(fx,H.childElementCount),Z=0,B=0;for(let $ of(q=(se=j.elements.floating)==null?void 0:se.childNodes)!=null?q:[])if(Xn($)){let N=$.offsetTop,F=N+$.clientHeight+V,ee=H.scrollTop,A=ee+H.clientHeight;if(N>=ee&&F<=A)te--;else{B=Math.max(0,Math.min(F,A)-Math.max(N,ee)),Z=$.clientHeight;break}}te>=1&&o($=>{let N=Z*te-B+V;return $>=N?$:N})}}):null,dT({padding:y,apply({availableWidth:L,availableHeight:se,elements:q}){Object.assign(q.floating.style,{overflow:"auto",maxWidth:`${L}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${se}px)`})}})].filter(Boolean),whileElementsMounted:eT}),[I=S,O=k]=j.placement.split("-");S==="selection"&&(I="selection");let R=b.useMemo(()=>({anchor:[I,O].filter(Boolean).join(" ")}),[I,O]),U=NT(j,{overflowRef:a,onChange:o}),{getReferenceProps:re,getFloatingProps:z}=CT([U]),M=tt(L=>{c(L),_.setFloating(L)});return b.createElement(Jp.Provider,{value:r},b.createElement($o.Provider,{value:{setFloating:M,setReference:_.setReference,styles:C,getReferenceProps:re,getFloatingProps:z,slot:R}},e))}function OT(e){It(()=>{if(!e)return;let t=new MutationObserver(()=>{let n=window.getComputedStyle(e).maxHeight,r=parseFloat(n);if(isNaN(r))return;let i=parseInt(n);isNaN(i)||r!==i&&(e.style.maxHeight=`${Math.ceil(r)}px`)});return t.observe(e,{attributes:!0,attributeFilter:["style"]}),()=>{t.disconnect()}},[e])}function DT(e,t){var n,r,i;let o=Xf((n=e==null?void 0:e.gap)!=null?n:"var(--anchor-gap, 0)",t),a=Xf((r=e==null?void 0:e.offset)!=null?r:"var(--anchor-offset, 0)",t),u=Xf((i=e==null?void 0:e.padding)!=null?i:"var(--anchor-padding, 0)",t);return{...e,gap:o,offset:a,padding:u}}function Xf(e,t,n=void 0){let r=Cs(),i=tt((c,f)=>{if(c==null)return[n,null];if(typeof c=="number")return[c,null];if(typeof c=="string"){if(!f)return[n,null];let h=hx(c,f);return[h,p=>{let v=Rw(c);{let y=v.map(w=>window.getComputedStyle(f).getPropertyValue(w));r.requestAnimationFrame(function w(){r.nextFrame(w);let S=!1;for(let[_,C]of v.entries()){let j=window.getComputedStyle(f).getPropertyValue(C);if(y[_]!==j){y[_]=j,S=!0;break}}if(!S)return;let k=hx(c,f);h!==k&&(p(k),h=k)})}return r.dispose}]}return[n,null]}),o=b.useMemo(()=>i(e,t)[0],[e,t]),[a=o,u]=b.useState();return It(()=>{let[c,f]=i(e,t);if(u(c),!!f)return f(u)},[e,t]),a}function Rw(e){let t=/var\((.*)\)/.exec(e);if(t){let n=t[1].indexOf(",");if(n===-1)return[t[1]];let r=t[1].slice(0,n).trim(),i=t[1].slice(n+1).trim();return i?[r,...Rw(i)]:[r]}return[]}function hx(e,t){let n=document.createElement("div");t.appendChild(n),n.style.setProperty("margin-top","0px","important"),n.style.setProperty("margin-top",e,"important");let r=parseFloat(window.getComputedStyle(n).marginTop)||0;return t.removeChild(n),r}let Lc=b.createContext(null);Lc.displayName="OpenClosedContext";var Cn=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Cn||{});function fl(){return b.useContext(Lc)}function Aw({value:e,children:t}){return Ae.createElement(Lc.Provider,{value:e},t)}function LT({children:e}){return Ae.createElement(Lc.Provider,{value:null},e)}function $T(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Ii=[];$T(()=>{function e(t){if(!Mr(t.target)||t.target===document.body||Ii[0]===t.target)return;let n=t.target;n=n.closest(oc),Ii.unshift(n??t.target),Ii=Ii.filter(r=>r!=null&&r.isConnected),Ii.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function FT(e){throw new Error("Unexpected object: "+e)}var Kt=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(Kt||{});function Pu(e,t){let n=t.resolveItems();if(n.length<=0)return null;let r=t.resolveActiveIndex(),i=r??-1;switch(e.focus){case 0:{for(let o=0;o<n.length;++o)if(!t.resolveDisabled(n[o],o,n))return o;return r}case 1:{i===-1&&(i=n.length);for(let o=i-1;o>=0;--o)if(!t.resolveDisabled(n[o],o,n))return o;return r}case 2:{for(let o=i+1;o<n.length;++o)if(!t.resolveDisabled(n[o],o,n))return o;return r}case 3:{for(let o=n.length-1;o>=0;--o)if(!t.resolveDisabled(n[o],o,n))return o;return r}case 4:{for(let o=0;o<n.length;++o)if(t.resolveId(n[o],o,n)===e.id)return o;return r}case 5:return null;default:FT(e)}}function Qp(e){let t=tt(e),n=b.useRef(!1);b.useEffect(()=>(n.current=!1,()=>{n.current=!0,Tc(()=>{n.current&&t()})}),[t])}let Mw=b.createContext(!1);function BT(){return b.useContext(Mw)}function px(e){return Ae.createElement(Mw.Provider,{value:e.force},e.children)}function zT(e){let t=BT(),n=b.useContext(Dw),[r,i]=b.useState(()=>{var o;if(!t&&n!==null)return(o=n.current)!=null?o:null;if(Or.isServer)return null;let a=e==null?void 0:e.getElementById("headlessui-portal-root");if(a)return a;if(e===null)return null;let u=e.createElement("div");return u.setAttribute("id","headlessui-portal-root"),e.body.appendChild(u)});return b.useEffect(()=>{r!==null&&(e!=null&&e.body.contains(r)||e==null||e.body.appendChild(r))},[r,e]),b.useEffect(()=>{t||n!==null&&i(n.current)},[n,i,t]),r}let Ow=b.Fragment,UT=Ft(function(e,t){let{ownerDocument:n=null,...r}=e,i=b.useRef(null),o=jn(hj(v=>{i.current=v}),t),a=Xa(i.current),u=n??a,c=zT(u),f=b.useContext(Qh),h=Cs(),p=Gt();return Qp(()=>{var v;c&&c.childNodes.length<=0&&((v=c.parentElement)==null||v.removeChild(c))}),c?Gn.createPortal(Ae.createElement("div",{"data-headlessui-portal":"",ref:v=>{h.dispose(),f&&v&&h.add(f.register(v))}},p({ourProps:{ref:o},theirProps:r,slot:{},defaultTag:Ow,name:"Portal"})),c):null});function WT(e,t){let n=jn(t),{enabled:r=!0,ownerDocument:i,...o}=e,a=Gt();return r?Ae.createElement(UT,{...o,ownerDocument:i,ref:n}):a({ourProps:{ref:n},theirProps:o,slot:{},defaultTag:Ow,name:"Portal"})}let HT=b.Fragment,Dw=b.createContext(null);function VT(e,t){let{target:n,...r}=e,i={ref:jn(t)},o=Gt();return Ae.createElement(Dw.Provider,{value:n},o({ourProps:i,theirProps:r,defaultTag:HT,name:"Popover.Group"}))}let Qh=b.createContext(null);function qT(){let e=b.useContext(Qh),t=b.useRef([]),n=tt(o=>(t.current.push(o),e&&e.register(o),()=>r(o))),r=tt(o=>{let a=t.current.indexOf(o);a!==-1&&t.current.splice(a,1),e&&e.unregister(o)}),i=b.useMemo(()=>({register:n,unregister:r,portals:t}),[n,r,t]);return[t,b.useMemo(()=>function({children:o}){return Ae.createElement(Qh.Provider,{value:i},o)},[i])]}let KT=Ft(WT),Lw=Ft(VT),$w=Object.assign(KT,{Group:Lw});const Ku={Idle:{kind:"Idle"},Tracked:e=>({kind:"Tracked",position:e}),Moved:{kind:"Moved"}};function Fw(e){let t=e.getBoundingClientRect();return`${t.x},${t.y}`}function YT(e,t,n){let r=Ln();if(t.kind==="Tracked"){let i=function(){o!==Fw(e)&&(r.dispose(),n())},{position:o}=t,a=new ResizeObserver(i);a.observe(e),r.add(()=>a.disconnect()),r.addEventListener(window,"scroll",i,{passive:!0}),r.addEventListener(window,"resize",i)}return()=>r.dispose()}function GT(e,t=typeof document<"u"?document.defaultView:null,n){let r=ul(e,"escape");hw(t,"keydown",i=>{r&&(i.defaultPrevented||i.key===on.Escape&&n(i))})}function JT(){var e;let[t]=b.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,r]=b.useState((e=t==null?void 0:t.matches)!=null?e:!1);return It(()=>{if(!t)return;function i(o){r(o.matches)}return t.addEventListener("change",i),()=>t.removeEventListener("change",i)},[t]),n}function QT({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let r=tt(()=>{var i,o;let a=_s(n),u=[];for(let c of e)c!==null&&(ei(c)?u.push(c):"current"in c&&ei(c.current)&&u.push(c.current));if(t!=null&&t.current)for(let c of t.current)u.push(c);for(let c of(i=a==null?void 0:a.querySelectorAll("html > *, body > *"))!=null?i:[])c!==document.body&&c!==document.head&&ei(c)&&c.id!=="headlessui-portal-root"&&(n&&(c.contains(n)||c.contains((o=n==null?void 0:n.getRootNode())==null?void 0:o.host))||u.some(f=>c.contains(f))||u.push(c));return u});return{resolveContainers:r,contains:tt(i=>r().some(o=>o.contains(i)))}}let Bw=b.createContext(null);function mx({children:e,node:t}){let[n,r]=b.useState(null),i=zw(t??n);return Ae.createElement(Bw.Provider,{value:i},e,i===null&&Ae.createElement(Vh,{features:sc.Hidden,ref:o=>{var a,u;if(o){for(let c of(u=(a=_s(o))==null?void 0:a.querySelectorAll("html > *, body > *"))!=null?u:[])if(c!==document.body&&c!==document.head&&ei(c)&&c!=null&&c.contains(o)){r(c);break}}}}))}function zw(e=null){var t;return(t=b.useContext(Bw))!=null?t:e}function XT(){let e=typeof document>"u";return"useSyncExternalStore"in ec?(t=>t.useSyncExternalStore)(ec)(()=>()=>{},()=>!1,()=>!e):!1}function $c(){let e=XT(),[t,n]=b.useState(Or.isHandoffComplete);return t&&Or.isHandoffComplete===!1&&n(!1),b.useEffect(()=>{t!==!0&&n(!0)},[t]),b.useEffect(()=>Or.handoff(),[]),e?!1:t}function Xp(){let e=b.useRef(!1);return It(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var Aa=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Aa||{});function ZT(){let e=b.useRef(0);return dw(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function Uw(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)ei(n.current)&&t.add(n.current);return t}let eI="div";var ds=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(ds||{});function tI(e,t){let n=b.useRef(null),r=jn(n,t),{initialFocus:i,initialFocusFallback:o,containers:a,features:u=15,...c}=e;$c()||(u=0);let f=Xa(n.current);sI(u,{ownerDocument:f});let h=oI(u,{ownerDocument:f,container:n,initialFocus:i,initialFocusFallback:o});aI(u,{ownerDocument:f,container:n,containers:a,previousActiveElement:h});let p=ZT(),v=tt(C=>{if(!Xn(n.current))return;let j=n.current;(I=>I())(()=>{kr(p.current,{[Aa.Forwards]:()=>{wo(j,br.First,{skipElements:[C.relatedTarget,o]})},[Aa.Backwards]:()=>{wo(j,br.Last,{skipElements:[C.relatedTarget,o]})}})})}),y=ul(!!(u&2),"focus-trap#tab-lock"),w=Cs(),S=b.useRef(!1),k={ref:r,onKeyDown(C){C.key=="Tab"&&(S.current=!0,w.requestAnimationFrame(()=>{S.current=!1}))},onBlur(C){if(!(u&4))return;let j=Uw(a);Xn(n.current)&&j.add(n.current);let I=C.relatedTarget;Mr(I)&&I.dataset.headlessuiFocusGuard!=="true"&&(Ww(j,I)||(S.current?wo(n.current,kr(p.current,{[Aa.Forwards]:()=>br.Next,[Aa.Backwards]:()=>br.Previous})|br.WrapAround,{relativeTo:C.target}):Mr(C.target)&&Dr(C.target)))}},_=Gt();return Ae.createElement(Ae.Fragment,null,y&&Ae.createElement(Vh,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:v,features:sc.Focusable}),_({ourProps:k,theirProps:c,defaultTag:eI,name:"FocusTrap"}),y&&Ae.createElement(Vh,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:v,features:sc.Focusable}))}let nI=Ft(tI),rI=Object.assign(nI,{features:ds});function iI(e=!0){let t=b.useRef(Ii.slice());return qp(([n],[r])=>{r===!0&&n===!1&&Tc(()=>{t.current.splice(0)}),r===!1&&n===!0&&(t.current=Ii.slice())},[e,Ii,t]),tt(()=>{var n;return(n=t.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function sI(e,{ownerDocument:t}){let n=!!(e&8),r=iI(n);qp(()=>{n||zb(t==null?void 0:t.body)&&Dr(r())},[n]),Qp(()=>{n&&Dr(r())})}function oI(e,{ownerDocument:t,container:n,initialFocus:r,initialFocusFallback:i}){let o=b.useRef(null),a=ul(!!(e&1),"focus-trap#initial-focus"),u=Xp();return qp(()=>{if(e===0)return;if(!a){i!=null&&i.current&&Dr(i.current);return}let c=n.current;c&&Tc(()=>{if(!u.current)return;let f=t==null?void 0:t.activeElement;if(r!=null&&r.current){if((r==null?void 0:r.current)===f){o.current=f;return}}else if(c.contains(f)){o.current=f;return}if(r!=null&&r.current)Dr(r.current);else{if(e&16){if(wo(c,br.First|br.AutoFocus)!==Kh.Error)return}else if(wo(c,br.First)!==Kh.Error)return;if(i!=null&&i.current&&(Dr(i.current),(t==null?void 0:t.activeElement)===i.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}o.current=t==null?void 0:t.activeElement})},[i,a,e]),o}function aI(e,{ownerDocument:t,container:n,containers:r,previousActiveElement:i}){let o=Xp(),a=!!(e&4);hw(t==null?void 0:t.defaultView,"focus",u=>{if(!a||!o.current)return;let c=Uw(r);Xn(n.current)&&c.add(n.current);let f=i.current;if(!f)return;let h=u.target;Xn(h)?Ww(c,h)?(i.current=h,Dr(h)):(u.preventDefault(),u.stopPropagation(),Dr(f)):Dr(i.current)},!0)}function Ww(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function Hw(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||!La((t=e.as)!=null?t:qw)||Ae.Children.count(e.children)===1}let Fc=b.createContext(null);Fc.displayName="TransitionContext";var lI=(e=>(e.Visible="visible",e.Hidden="hidden",e))(lI||{});function uI(){let e=b.useContext(Fc);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function cI(){let e=b.useContext(Bc);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let Bc=b.createContext(null);Bc.displayName="NestingContext";function zc(e){return"children"in e?zc(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function Vw(e,t){let n=js(e),r=b.useRef([]),i=Xp(),o=Cs(),a=tt((y,w=Mi.Hidden)=>{let S=r.current.findIndex(({el:k})=>k===y);S!==-1&&(kr(w,{[Mi.Unmount](){r.current.splice(S,1)},[Mi.Hidden](){r.current[S].state="hidden"}}),o.microTask(()=>{var k;!zc(r)&&i.current&&((k=n.current)==null||k.call(n))}))}),u=tt(y=>{let w=r.current.find(({el:S})=>S===y);return w?w.state!=="visible"&&(w.state="visible"):r.current.push({el:y,state:"visible"}),()=>a(y,Mi.Unmount)}),c=b.useRef([]),f=b.useRef(Promise.resolve()),h=b.useRef({enter:[],leave:[]}),p=tt((y,w,S)=>{c.current.splice(0),t&&(t.chains.current[w]=t.chains.current[w].filter(([k])=>k!==y)),t==null||t.chains.current[w].push([y,new Promise(k=>{c.current.push(k)})]),t==null||t.chains.current[w].push([y,new Promise(k=>{Promise.all(h.current[w].map(([_,C])=>C)).then(()=>k())})]),w==="enter"?f.current=f.current.then(()=>t==null?void 0:t.wait.current).then(()=>S(w)):S(w)}),v=tt((y,w,S)=>{Promise.all(h.current[w].splice(0).map(([k,_])=>_)).then(()=>{var k;(k=c.current.shift())==null||k()}).then(()=>S(w))});return b.useMemo(()=>({children:r,register:u,unregister:a,onStart:p,onStop:v,wait:f,chains:h}),[u,a,r,p,v,h,f])}let qw=b.Fragment,Kw=No.RenderStrategy;function dI(e,t){var n,r;let{transition:i=!0,beforeEnter:o,afterEnter:a,beforeLeave:u,afterLeave:c,enter:f,enterFrom:h,enterTo:p,entered:v,leave:y,leaveFrom:w,leaveTo:S,...k}=e,[_,C]=b.useState(null),j=b.useRef(null),I=Hw(e),O=jn(...I?[j,t,C]:t===null?[]:[t]),R=(n=k.unmount)==null||n?Mi.Unmount:Mi.Hidden,{show:U,appear:re,initial:z}=uI(),[M,L]=b.useState(U?"visible":"hidden"),se=cI(),{register:q,unregister:H}=se;It(()=>q(j),[q,j]),It(()=>{if(R===Mi.Hidden&&j.current){if(U&&M!=="visible"){L("visible");return}return kr(M,{hidden:()=>H(j),visible:()=>q(j)})}},[M,j,q,H,U,R]);let V=$c();It(()=>{if(I&&V&&M==="visible"&&j.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[j,M,V,I]);let te=z&&!re,Z=re&&U&&z,B=b.useRef(!1),$=Vw(()=>{B.current||(L("hidden"),H(j))},se),N=tt(me=>{B.current=!0;let je=me?"enter":"leave";$.onStart(j,je,Ne=>{Ne==="enter"?o==null||o():Ne==="leave"&&(u==null||u())})}),F=tt(me=>{let je=me?"enter":"leave";B.current=!1,$.onStop(j,je,Ne=>{Ne==="enter"?a==null||a():Ne==="leave"&&(c==null||c())}),je==="leave"&&!zc($)&&(L("hidden"),H(j))});b.useEffect(()=>{I&&i||(N(U),F(U))},[U,I,i]);let ee=!(!i||!I||!V||te),[,A]=gw(ee,_,U,{start:N,end:F}),be=as({ref:O,className:((r=Hh(k.className,Z&&f,Z&&h,A.enter&&f,A.enter&&A.closed&&h,A.enter&&!A.closed&&p,A.leave&&y,A.leave&&!A.closed&&w,A.leave&&A.closed&&S,!A.transition&&U&&v))==null?void 0:r.trim())||void 0,...mw(A)}),he=0;M==="visible"&&(he|=Cn.Open),M==="hidden"&&(he|=Cn.Closed),U&&M==="hidden"&&(he|=Cn.Opening),!U&&M==="visible"&&(he|=Cn.Closing);let ge=Gt();return Ae.createElement(Bc.Provider,{value:$},Ae.createElement(Aw,{value:he},ge({ourProps:be,theirProps:k,defaultTag:qw,features:Kw,visible:M==="visible",name:"Transition.Child"})))}function fI(e,t){let{show:n,appear:r=!1,unmount:i=!0,...o}=e,a=b.useRef(null),u=Hw(e),c=jn(...u?[a,t]:t===null?[]:[t]);$c();let f=fl();if(n===void 0&&f!==null&&(n=(f&Cn.Open)===Cn.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[h,p]=b.useState(n?"visible":"hidden"),v=Vw(()=>{n||p("hidden")}),[y,w]=b.useState(!0),S=b.useRef([n]);It(()=>{y!==!1&&S.current[S.current.length-1]!==n&&(S.current.push(n),w(!1))},[S,n]);let k=b.useMemo(()=>({show:n,appear:r,initial:y}),[n,r,y]);It(()=>{n?p("visible"):!zc(v)&&a.current!==null&&p("hidden")},[n,v]);let _={unmount:i},C=tt(()=>{var O;y&&w(!1),(O=e.beforeEnter)==null||O.call(e)}),j=tt(()=>{var O;y&&w(!1),(O=e.beforeLeave)==null||O.call(e)}),I=Gt();return Ae.createElement(Bc.Provider,{value:v},Ae.createElement(Fc.Provider,{value:k},I({ourProps:{..._,as:b.Fragment,children:Ae.createElement(Yw,{ref:c,..._,...o,beforeEnter:C,beforeLeave:j})},theirProps:{},defaultTag:b.Fragment,features:Kw,visible:h==="visible",name:"Transition"})))}function hI(e,t){let n=b.useContext(Fc)!==null,r=fl()!==null;return Ae.createElement(Ae.Fragment,null,!n&&r?Ae.createElement(Xh,{ref:t,...e}):Ae.createElement(Yw,{ref:t,...e}))}let Xh=Ft(fI),Yw=Ft(dI),Zp=Ft(hI),pI=Object.assign(Xh,{Child:Zp,Root:Xh});var mI=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(mI||{}),gI=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(gI||{});let yI={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},em=b.createContext(null);em.displayName="DialogContext";function Uc(e){let t=b.useContext(em);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Uc),n}return t}function vI(e,t){return kr(t.type,yI,e,t)}let gx=Ft(function(e,t){let n=b.useId(),{id:r=`headlessui-dialog-${n}`,open:i,onClose:o,initialFocus:a,role:u="dialog",autoFocus:c=!0,__demoMode:f=!1,unmount:h=!1,...p}=e,v=b.useRef(!1);u=(function(){return u==="dialog"||u==="alertdialog"?u:(v.current||(v.current=!0,console.warn(`Invalid role [${u}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")})();let y=fl();i===void 0&&y!==null&&(i=(y&Cn.Open)===Cn.Open);let w=b.useRef(null),S=jn(w,t),k=Xa(w.current),_=i?0:1,[C,j]=b.useReducer(vI,{titleId:null,descriptionId:null,panelRef:b.createRef()}),I=tt(()=>o(!1)),O=tt(A=>j({type:0,id:A})),R=$c()?_===0:!1,[U,re]=qT(),z={get current(){var A;return(A=C.panelRef.current)!=null?A:w.current}},M=zw(),{resolveContainers:L}=QT({mainTreeNode:M,portals:U,defaultContainers:[z]}),se=y!==null?(y&Cn.Closing)===Cn.Closing:!1;sw(f||se?!1:R,{allowed:tt(()=>{var A,be;return[(be=(A=w.current)==null?void 0:A.closest("[data-headlessui-portal]"))!=null?be:null]}),disallowed:tt(()=>{var A;return[(A=M==null?void 0:M.closest("body > *:not(#headlessui-portal-root)"))!=null?A:null]})});let q=Pc.get(null);It(()=>{if(R)return q.actions.push(r),()=>q.actions.pop(r)},[q,r,R]);let H=lr(q,b.useCallback(A=>q.selectors.isTop(A,r),[q,r]));fw(H,L,A=>{A.preventDefault(),I()}),GT(H,k==null?void 0:k.defaultView,A=>{A.preventDefault(),A.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),I()}),pw(f||se?!1:R,k,L),ow(R,w,I);let[V,te]=Jb(),Z=b.useMemo(()=>[{dialogState:_,close:I,setTitleId:O,unmount:h},C],[_,I,O,h,C]),B=Br({open:_===0}),$={ref:S,id:r,role:u,tabIndex:-1,"aria-modal":f?void 0:_===0?!0:void 0,"aria-labelledby":C.titleId,"aria-describedby":V,unmount:h},N=!JT(),F=ds.None;R&&!f&&(F|=ds.RestoreFocus,F|=ds.TabLock,c&&(F|=ds.AutoFocus),N&&(F|=ds.InitialFocus));let ee=Gt();return Ae.createElement(LT,null,Ae.createElement(px,{force:!0},Ae.createElement($w,null,Ae.createElement(em.Provider,{value:Z},Ae.createElement(Lw,{target:w},Ae.createElement(px,{force:!1},Ae.createElement(te,{slot:B},Ae.createElement(re,null,Ae.createElement(rI,{initialFocus:a,initialFocusFallback:w,containers:L,features:F},Ae.createElement(Sj,{value:I},ee({ourProps:$,theirProps:p,slot:B,defaultTag:xI,features:bI,visible:_===0,name:"Dialog"})))))))))))}),xI="div",bI=No.RenderStrategy|No.Static;function wI(e,t){let{transition:n=!1,open:r,...i}=e,o=fl(),a=e.hasOwnProperty("open")||o!==null,u=e.hasOwnProperty("onClose");if(!a&&!u)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!a)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!u)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!o&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(r!==void 0||n)&&!i.static?Ae.createElement(mx,null,Ae.createElement(pI,{show:r,transition:n,unmount:i.unmount},Ae.createElement(gx,{ref:t,...i}))):Ae.createElement(mx,null,Ae.createElement(gx,{ref:t,open:r,...i}))}let kI="div";function SI(e,t){let n=b.useId(),{id:r=`headlessui-dialog-panel-${n}`,transition:i=!1,...o}=e,[{dialogState:a,unmount:u},c]=Uc("Dialog.Panel"),f=jn(t,c.panelRef),h=Br({open:a===0}),p=tt(k=>{k.stopPropagation()}),v={ref:f,id:r,onClick:p},y=i?Zp:b.Fragment,w=i?{unmount:u}:{},S=Gt();return Ae.createElement(y,{...w},S({ourProps:v,theirProps:o,slot:h,defaultTag:kI,name:"Dialog.Panel"}))}let EI="div";function _I(e,t){let{transition:n=!1,...r}=e,[{dialogState:i,unmount:o}]=Uc("Dialog.Backdrop"),a=Br({open:i===0}),u={ref:t,"aria-hidden":!0},c=n?Zp:b.Fragment,f=n?{unmount:o}:{},h=Gt();return Ae.createElement(c,{...f},h({ourProps:u,theirProps:r,slot:a,defaultTag:EI,name:"Dialog.Backdrop"}))}let CI="h2";function jI(e,t){let n=b.useId(),{id:r=`headlessui-dialog-title-${n}`,...i}=e,[{dialogState:o,setTitleId:a}]=Uc("Dialog.Title"),u=jn(t);b.useEffect(()=>(a(r),()=>a(null)),[r,a]);let c=Br({open:o===0}),f={ref:u,id:r};return Gt()({ourProps:f,theirProps:i,slot:c,defaultTag:CI,name:"Dialog.Title"})}let NI=Ft(wI),TI=Ft(SI);Ft(_I);let II=Ft(jI),yx=Object.assign(NI,{Panel:TI,Title:II,Description:yj}),vx=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function xx(e){var t,n;let r=(t=e.innerText)!=null?t:"",i=e.cloneNode(!0);if(!Xn(i))return r;let o=!1;for(let u of i.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))u.remove(),o=!0;let a=o?(n=i.innerText)!=null?n:"":r;return vx.test(a)&&(a=a.replace(vx,"")),a}function PI(e){let t=e.getAttribute("aria-label");if(typeof t=="string")return t.trim();let n=e.getAttribute("aria-labelledby");if(n){let r=n.split(" ").map(i=>{let o=document.getElementById(i);if(o){let a=o.getAttribute("aria-label");return typeof a=="string"?a.trim():xx(o).trim()}return null}).filter(Boolean);if(r.length>0)return r.join(", ")}return xx(e).trim()}function RI(e){let t=b.useRef(""),n=b.useRef("");return tt(()=>{let r=e.current;if(!r)return"";let i=r.innerText;if(t.current===i)return n.current;let o=PI(r).trim().toLowerCase();return t.current=i,n.current=o,o})}var AI=Object.defineProperty,MI=(e,t,n)=>t in e?AI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bx=(e,t,n)=>(MI(e,typeof t!="symbol"?t+"":t,n),n),vn=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(vn||{}),cc=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(cc||{}),St=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItems=5]="RegisterItems",e[e.UnregisterItems=6]="UnregisterItems",e[e.SetButtonElement=7]="SetButtonElement",e[e.SetItemsElement=8]="SetItemsElement",e[e.SortItems=9]="SortItems",e[e.MarkButtonAsMoved=10]="MarkButtonAsMoved",e))(St||{});function wx(e,t=n=>n){let n=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,r=uw(t(e.items.slice()),o=>o.dataRef.current.domRef.current),i=n?r.indexOf(n):null;return i===-1&&(i=null),{items:r,activeItemIndex:i}}let OI={1(e){if(e.menuState===1)return e;let t=e.buttonElement?Ku.Tracked(Fw(e.buttonElement)):e.buttonPositionState;return{...e,activeItemIndex:null,pendingFocus:{focus:Kt.Nothing},menuState:1,buttonPositionState:t}},0(e,t){return e.menuState===0?e:{...e,__demoMode:!1,pendingFocus:t.focus,menuState:0,buttonPositionState:Ku.Idle}},2:(e,t)=>{var n,r,i,o,a;if(e.menuState===1)return e;let u={...e,searchQuery:"",activationTrigger:(n=t.trigger)!=null?n:1,__demoMode:!1};if(t.focus===Kt.Nothing)return{...u,activeItemIndex:null};if(t.focus===Kt.Specific)return{...u,activeItemIndex:e.items.findIndex(h=>h.id===t.id)};if(t.focus===Kt.Previous){let h=e.activeItemIndex;if(h!==null){let p=e.items[h].dataRef.current.domRef,v=Pu(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:y=>y.id,resolveDisabled:y=>y.dataRef.current.disabled});if(v!==null){let y=e.items[v].dataRef.current.domRef;if(((r=p.current)==null?void 0:r.previousElementSibling)===y.current||((i=y.current)==null?void 0:i.previousElementSibling)===null)return{...u,activeItemIndex:v}}}}else if(t.focus===Kt.Next){let h=e.activeItemIndex;if(h!==null){let p=e.items[h].dataRef.current.domRef,v=Pu(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:y=>y.id,resolveDisabled:y=>y.dataRef.current.disabled});if(v!==null){let y=e.items[v].dataRef.current.domRef;if(((o=p.current)==null?void 0:o.nextElementSibling)===y.current||((a=y.current)==null?void 0:a.nextElementSibling)===null)return{...u,activeItemIndex:v}}}}let c=wx(e),f=Pu(t,{resolveItems:()=>c.items,resolveActiveIndex:()=>c.activeItemIndex,resolveId:h=>h.id,resolveDisabled:h=>h.dataRef.current.disabled});return{...u,...c,activeItemIndex:f}},3:(e,t)=>{let n=e.searchQuery!==""?0:1,r=e.searchQuery+t.value.toLowerCase(),i=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+n).concat(e.items.slice(0,e.activeItemIndex+n)):e.items).find(a=>{var u;return((u=a.dataRef.current.textValue)==null?void 0:u.startsWith(r))&&!a.dataRef.current.disabled}),o=i?e.items.indexOf(i):-1;return o===-1||o===e.activeItemIndex?{...e,searchQuery:r}:{...e,searchQuery:r,activeItemIndex:o,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,t)=>{let n=e.items.concat(t.items.map(i=>i)),r=e.activeItemIndex;return e.pendingFocus.focus!==Kt.Nothing&&(r=Pu(e.pendingFocus,{resolveItems:()=>n,resolveActiveIndex:()=>e.activeItemIndex,resolveId:i=>i.id,resolveDisabled:i=>i.dataRef.current.disabled})),{...e,items:n,activeItemIndex:r,pendingFocus:{focus:Kt.Nothing},pendingShouldSort:!0}},6:(e,t)=>{let n=e.items,r=[],i=new Set(t.items);for(let[o,a]of n.entries())if(i.has(a.id)&&(r.push(o),i.delete(a.id),i.size===0))break;if(r.length>0){n=n.slice();for(let o of r.reverse())n.splice(o,1)}return{...e,items:n,activationTrigger:1}},7:(e,t)=>e.buttonElement===t.element?e:{...e,buttonElement:t.element},8:(e,t)=>e.itemsElement===t.element?e:{...e,itemsElement:t.element},9:e=>e.pendingShouldSort?{...e,...wx(e),pendingShouldSort:!1}:e,10(e){return e.buttonPositionState.kind!=="Tracked"?e:{...e,buttonPositionState:Ku.Moved}}};class tm extends tw{constructor(t){super(t),bx(this,"actions",{registerItem:Fv(()=>{let n=[],r=new Set;return[(i,o)=>{r.has(o)||(r.add(o),n.push({id:i,dataRef:o}))},()=>(r.clear(),this.send({type:5,items:n.splice(0)}))]}),unregisterItem:Fv(()=>{let n=[];return[r=>n.push(r),()=>this.send({type:6,items:n.splice(0)})]})}),bx(this,"selectors",{activeDescendantId(n){var r;let i=n.activeItemIndex,o=n.items;return i===null||(r=o[i])==null?void 0:r.id},isActive(n,r){var i;let o=n.activeItemIndex,a=n.items;return o!==null?((i=a[o])==null?void 0:i.id)===r:!1},shouldScrollIntoView(n,r){return n.__demoMode||n.menuState!==0||n.activationTrigger===0?!1:this.isActive(n,r)},didButtonMove(n){return n.buttonPositionState.kind==="Moved"}}),this.on(5,()=>{this.disposables.requestAnimationFrame(()=>{this.send({type:9})})});{let n=this.state.id,r=Pc.get(null);this.disposables.add(r.on(rw.Push,i=>{!r.selectors.isTop(i,n)&&this.state.menuState===0&&this.send({type:1})})),this.on(0,()=>r.actions.push(n)),this.on(1,()=>r.actions.pop(n))}this.disposables.group(n=>{this.on(1,r=>{r.buttonElement&&(n.dispose(),n.add(YT(r.buttonElement,r.buttonPositionState,()=>{this.send({type:10})})))})})}static new({id:t,__demoMode:n=!1}){return new tm({id:t,__demoMode:n,menuState:n?0:1,buttonElement:null,itemsElement:null,items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1,pendingShouldSort:!1,pendingFocus:{focus:Kt.Nothing},buttonPositionState:Ku.Idle})}reduce(t,n){return kr(n.type,OI,t,n)}}const Gw=b.createContext(null);function nm(e){let t=b.useContext(Gw);if(t===null){let n=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Jw),n}return t}function Jw({id:e,__demoMode:t=!1}){let n=b.useMemo(()=>tm.new({id:e,__demoMode:t}),[]);return Qp(()=>n.dispose()),n}let DI=b.Fragment;function LI(e,t){let n=b.useId(),{__demoMode:r=!1,...i}=e,o=Jw({id:n,__demoMode:r}),[a,u,c]=lr(o,k=>[k.menuState,k.itemsElement,k.buttonElement]),f=jn(t),h=Pc.get(null),p=lr(h,b.useCallback(k=>h.selectors.isTop(k,n),[h,n]));fw(p,[c,u],(k,_)=>{var C;o.send({type:St.CloseMenu}),Vp(_,Hp.Loose)||(k.preventDefault(),(C=o.state.buttonElement)==null||C.focus())});let v=tt(()=>{o.send({type:St.CloseMenu})}),y=Br({open:a===vn.Open,close:v}),w={ref:f},S=Gt();return Ae.createElement(MT,null,Ae.createElement(Gw.Provider,{value:o},Ae.createElement(Aw,{value:kr(a,{[vn.Open]:Cn.Open,[vn.Closed]:Cn.Closed})},S({ourProps:w,theirProps:i,slot:y,defaultTag:DI,name:"Menu"}))))}let $I="button";function FI(e,t){let n=nm("Menu.Button"),r=b.useId(),{id:i=`headlessui-menu-button-${r}`,disabled:o=!1,autoFocus:a=!1,...u}=e,c=b.useRef(null),f=PT(),h=jn(t,c,IT(),tt(M=>n.send({type:St.SetButtonElement,element:M}))),p=tt(M=>{switch(M.key){case on.Space:case on.Enter:case on.ArrowDown:M.preventDefault(),M.stopPropagation(),n.send({type:St.OpenMenu,focus:{focus:Kt.First}});break;case on.ArrowUp:M.preventDefault(),M.stopPropagation(),n.send({type:St.OpenMenu,focus:{focus:Kt.Last}});break}}),v=tt(M=>{switch(M.key){case on.Space:M.preventDefault();break}}),[y,w,S]=lr(n,M=>[M.menuState,M.buttonElement,M.itemsElement]),k=y===vn.Open;Kj(k,{trigger:w,action:b.useCallback(M=>{if(w!=null&&w.contains(M.target))return Tu.Ignore;let L=M.target.closest('[role="menuitem"]:not([data-disabled])');return Xn(L)?Tu.Select(L):S!=null&&S.contains(M.target)?Tu.Ignore:Tu.Close},[w,S]),close:b.useCallback(()=>n.send({type:St.CloseMenu}),[]),select:b.useCallback(M=>M.click(),[])});let _=_j(M=>{var L;o||(y===vn.Open?(Gn.flushSync(()=>n.send({type:St.CloseMenu})),(L=c.current)==null||L.focus({preventScroll:!0})):(M.preventDefault(),n.send({type:St.OpenMenu,focus:{focus:Kt.Nothing},trigger:cc.Pointer})))}),{isFocusVisible:C,focusProps:j}=VC({autoFocus:a}),{isHovered:I,hoverProps:O}=HC({isDisabled:o}),{pressed:R,pressProps:U}=QC({disabled:o}),re=Br({open:y===vn.Open,active:R||y===vn.Open,disabled:o,hover:I,focus:C,autofocus:a}),z=Hb(f(),{ref:h,id:i,type:Yj(e,c.current),"aria-haspopup":"menu","aria-controls":S==null?void 0:S.id,"aria-expanded":y===vn.Open,disabled:o||void 0,autoFocus:a,onKeyDown:p,onKeyUp:v},_,j,O,U);return Gt()({ourProps:z,theirProps:u,slot:re,defaultTag:$I,name:"Menu.Button"})}let BI="div",zI=No.RenderStrategy|No.Static;function UI(e,t){let n=b.useId(),{id:r=`headlessui-menu-items-${n}`,anchor:i,portal:o=!1,modal:a=!0,transition:u=!1,...c}=e,f=TT(i),h=nm("Menu.Items"),[p,v]=AT(f),y=RT(),[w,S]=b.useState(null),k=jn(t,f?p:null,tt(B=>h.send({type:St.SetItemsElement,element:B})),S),[_,C]=lr(h,B=>[B.menuState,B.buttonElement]),j=Xa(C),I=Xa(w);f&&(o=!0);let O=fl(),[R,U]=gw(u,w,O!==null?(O&Cn.Open)===Cn.Open:_===vn.Open);ow(R,C,()=>{h.send({type:St.CloseMenu})});let re=lr(h,B=>B.__demoMode),z=re?!1:a&&_===vn.Open;pw(z,I);let M=re?!1:a&&_===vn.Open;sw(M,{allowed:b.useCallback(()=>[C,w],[C,w])});let L=lr(h,h.selectors.didButtonMove)?!1:R;b.useEffect(()=>{let B=w;B&&_===vn.Open&&(zb(B)||B.focus({preventScroll:!0}))},[_,w]),uN(_===vn.Open,{container:w,accept(B){return B.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:B.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(B){B.setAttribute("role","none")}});let se=Cs(),q=tt(B=>{var $,N,F;switch(se.dispose(),B.key){case on.Space:if(h.state.searchQuery!=="")return B.preventDefault(),B.stopPropagation(),h.send({type:St.Search,value:B.key});case on.Enter:if(B.preventDefault(),B.stopPropagation(),h.state.activeItemIndex!==null){let{dataRef:ee}=h.state.items[h.state.activeItemIndex];(N=($=ee.current)==null?void 0:$.domRef.current)==null||N.click()}h.send({type:St.CloseMenu}),lw(h.state.buttonElement);break;case on.ArrowDown:return B.preventDefault(),B.stopPropagation(),h.send({type:St.GoToItem,focus:Kt.Next});case on.ArrowUp:return B.preventDefault(),B.stopPropagation(),h.send({type:St.GoToItem,focus:Kt.Previous});case on.Home:case on.PageUp:return B.preventDefault(),B.stopPropagation(),h.send({type:St.GoToItem,focus:Kt.First});case on.End:case on.PageDown:return B.preventDefault(),B.stopPropagation(),h.send({type:St.GoToItem,focus:Kt.Last});case on.Escape:B.preventDefault(),B.stopPropagation(),Gn.flushSync(()=>h.send({type:St.CloseMenu})),(F=h.state.buttonElement)==null||F.focus({preventScroll:!0});break;case on.Tab:B.preventDefault(),B.stopPropagation(),Gn.flushSync(()=>h.send({type:St.CloseMenu})),Wj(h.state.buttonElement,B.shiftKey?br.Previous:br.Next);break;default:B.key.length===1&&(h.send({type:St.Search,value:B.key}),se.setTimeout(()=>h.send({type:St.ClearSearch}),350));break}}),H=tt(B=>{switch(B.key){case on.Space:B.preventDefault();break}}),V=Br({open:_===vn.Open}),te=Hb(f?y():{},{"aria-activedescendant":lr(h,h.selectors.activeDescendantId),"aria-labelledby":lr(h,B=>{var $;return($=B.buttonElement)==null?void 0:$.id}),id:r,onKeyDown:q,onKeyUp:H,role:"menu",tabIndex:_===vn.Open?0:void 0,ref:k,style:{...c.style,...v,"--button-width":Ej(R,C,!0).width},...mw(U)}),Z=Gt();return Ae.createElement($w,{enabled:o?e.static||R:!1,ownerDocument:j},Z({ourProps:te,theirProps:c,slot:V,defaultTag:BI,features:zI,visible:L,name:"Menu.Items"}))}let WI=b.Fragment;function HI(e,t){let n=b.useId(),{id:r=`headlessui-menu-item-${n}`,disabled:i=!1,...o}=e,a=nm("Menu.Item"),u=lr(a,L=>a.selectors.isActive(L,r)),c=b.useRef(null),f=jn(t,c),h=lr(a,L=>a.selectors.shouldScrollIntoView(L,r));It(()=>{if(h)return Ln().requestAnimationFrame(()=>{var L,se;(se=(L=c.current)==null?void 0:L.scrollIntoView)==null||se.call(L,{block:"nearest"})})},[h,c]);let p=RI(c),v=b.useRef({disabled:i,domRef:c,get textValue(){return p()}});It(()=>{v.current.disabled=i},[v,i]),It(()=>(a.actions.registerItem(r,v),()=>a.actions.unregisterItem(r)),[v,r]);let y=tt(()=>{a.send({type:St.CloseMenu})}),w=tt(L=>{if(i)return L.preventDefault();a.send({type:St.CloseMenu}),lw(a.state.buttonElement)}),S=tt(()=>{if(i)return a.send({type:St.GoToItem,focus:Kt.Nothing});a.send({type:St.GoToItem,focus:Kt.Specific,id:r})}),k=tN(),_=tt(L=>k.update(L)),C=tt(L=>{k.wasMoved(L)&&(i||u||a.send({type:St.GoToItem,focus:Kt.Specific,id:r,trigger:cc.Pointer}))}),j=tt(L=>{k.wasMoved(L)&&(i||u&&a.state.activationTrigger===cc.Pointer&&a.send({type:St.GoToItem,focus:Kt.Nothing}))}),[I,O]=Qb(),[R,U]=Jb(),re=Br({active:u,focus:u,disabled:i,close:y}),z={id:r,ref:f,role:"menuitem",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,"aria-labelledby":I,"aria-describedby":R,disabled:void 0,onClick:w,onFocus:S,onPointerEnter:_,onMouseEnter:_,onPointerMove:C,onMouseMove:C,onPointerLeave:j,onMouseLeave:j},M=Gt();return Ae.createElement(O,null,Ae.createElement(U,null,M({ourProps:z,theirProps:o,slot:re,defaultTag:WI,name:"Menu.Item"})))}let VI="div";function qI(e,t){let[n,r]=Qb(),i=e,o={ref:t,"aria-labelledby":n,role:"group"},a=Gt();return Ae.createElement(r,null,a({ourProps:o,theirProps:i,slot:{},defaultTag:VI,name:"Menu.Section"}))}let KI="header";function YI(e,t){let n=b.useId(),{id:r=`headlessui-menu-heading-${n}`,...i}=e,o=Wp();It(()=>o.register(r),[r,o.register]);let a={id:r,ref:t,role:"presentation",...o.props};return Gt()({ourProps:a,theirProps:i,slot:{},defaultTag:KI,name:"Menu.Heading"})}let GI="div";function JI(e,t){let n=e,r={ref:t,role:"separator"};return Gt()({ourProps:r,theirProps:n,slot:{},defaultTag:GI,name:"Menu.Separator"})}let QI=Ft(LI),XI=Ft(FI),ZI=Ft(UI),eP=Ft(HI),tP=Ft(qI),nP=Ft(YI),rP=Ft(JI),rs=Object.assign(QI,{Button:XI,Items:ZI,Item:eP,Section:tP,Heading:nP,Separator:rP});const Qw=b.createContext(void 0);function Ns(){const e=b.useContext(Qw);if(!e)throw new Error("useAuth debe usarse dentro de un AuthProvider");return e}const iP="modulepreload",sP=function(e){return"/sport-planner/"+e},kx={},hl=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let a=function(f){return Promise.all(f.map(h=>Promise.resolve(h).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),c=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));i=a(n.map(f=>{if(f=sP(f),f in kx)return;kx[f]=!0;const h=f.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${p}`))return;const v=document.createElement("link");if(v.rel=h?"stylesheet":iP,h||(v.as="script"),v.crossOrigin="",v.href=f,c&&v.setAttribute("nonce",c),document.head.appendChild(v),h)return new Promise((y,w)=>{v.addEventListener("load",y),v.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(a){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=a,window.dispatchEvent(u),!u.defaultPrevented)throw a}return i.then(a=>{for(const u of a||[])u.status==="rejected"&&o(u.reason);return t().catch(o)})},oP=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>hl(async()=>{const{default:r}=await Promise.resolve().then(()=>Fo);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class rm extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class Sx extends rm{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Ex extends rm{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class _x extends rm{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Zh;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Zh||(Zh={}));var aP=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function u(h){try{f(r.next(h))}catch(p){a(p)}}function c(h){try{f(r.throw(h))}catch(p){a(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};class lP{constructor(t,{headers:n={},customFetch:r,region:i=Zh.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=oP(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return aP(this,arguments,void 0,function*(n,r={}){var i;try{const{headers:o,method:a,body:u,signal:c}=r;let f={},{region:h}=r;h||(h=this.region);const p=new URL(`${this.url}/${n}`);h&&h!=="any"&&(f["x-region"]=h,p.searchParams.set("forceFunctionRegion",h));let v;u&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",v=u):typeof u=="string"?(f["Content-Type"]="text/plain",v=u):typeof FormData<"u"&&u instanceof FormData?v=u:(f["Content-Type"]="application/json",v=JSON.stringify(u)));const y=yield this.fetch(p.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),o),body:v,signal:c}).catch(_=>{throw _.name==="AbortError"?_:new Sx(_)}),w=y.headers.get("x-relay-error");if(w&&w==="true")throw new Ex(y);if(!y.ok)throw new _x(y);let S=((i=y.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),k;return S==="application/json"?k=yield y.json():S==="application/octet-stream"?k=yield y.blob():S==="text/event-stream"?k=y:S==="multipart/form-data"?k=yield y.formData():k=yield y.text(),{data:k,error:null,response:y}}catch(o){return o instanceof Error&&o.name==="AbortError"?{data:null,error:new Sx(o)}:{data:null,error:o,response:o instanceof _x||o instanceof Ex?o.context:void 0}}})}}var sn={},Zs={},eo={},to={},no={},ro={},uP=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Io=uP();const cP=Io.fetch,Xw=Io.fetch.bind(Io),Zw=Io.Headers,dP=Io.Request,fP=Io.Response,Fo=Object.freeze(Object.defineProperty({__proto__:null,Headers:Zw,Request:dP,Response:fP,default:Xw,fetch:cP},Symbol.toStringTag,{value:"Module"})),hP=a_(Fo);var Ru={},Cx;function ek(){if(Cx)return Ru;Cx=1,Object.defineProperty(Ru,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Ru.default=e,Ru}var jx;function tk(){if(jx)return ro;jx=1;var e=ro&&ro.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ro,"__esModule",{value:!0});const t=e(hP),n=e(ek());class r{constructor(o){var a,u;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(a=o.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=o.signal,this.isMaybeSingle=(u=o.isMaybeSingle)!==null&&u!==void 0?u:!1,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,a){return this.headers=new Headers(this.headers),this.headers.set(o,a),this}then(o,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let c=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var h,p,v,y;let w=null,S=null,k=null,_=f.status,C=f.statusText;if(f.ok){if(this.method!=="HEAD"){const R=await f.text();R===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((h=this.headers.get("Accept"))===null||h===void 0)&&h.includes("application/vnd.pgrst.plan+text"))?S=R:S=JSON.parse(R))}const I=(p=this.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),O=(v=f.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");I&&O&&O.length>1&&(k=parseInt(O[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(S)&&(S.length>1?(w={code:"PGRST116",details:`Results contain ${S.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},S=null,k=null,_=406,C="Not Acceptable"):S.length===1?S=S[0]:S=null)}else{const I=await f.text();try{w=JSON.parse(I),Array.isArray(w)&&f.status===404&&(S=[],w=null,_=200,C="OK")}catch{f.status===404&&I===""?(_=204,C="No Content"):w={message:I}}if(w&&this.isMaybeSingle&&(!((y=w==null?void 0:w.details)===null||y===void 0)&&y.includes("0 rows"))&&(w=null,_=200,C="OK"),w&&this.shouldThrowOnError)throw new n.default(w)}return{error:w,data:S,count:k,status:_,statusText:C}});return this.shouldThrowOnError||(c=c.catch(f=>{var h,p,v;return{error:{message:`${(h=f==null?void 0:f.name)!==null&&h!==void 0?h:"FetchError"}: ${f==null?void 0:f.message}`,details:`${(p=f==null?void 0:f.stack)!==null&&p!==void 0?p:""}`,hint:"",code:`${(v=f==null?void 0:f.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),c.then(o,a)}returns(){return this}overrideTypes(){return this}}return ro.default=r,ro}var Nx;function nk(){if(Nx)return no;Nx=1;var e=no&&no.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(no,"__esModule",{value:!0});const t=e(tk());class n extends t.default{select(i){let o=!1;const a=(i??"*").split("").map(u=>/\s/.test(u)&&!o?"":(u==='"'&&(o=!o),u)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:o=!0,nullsFirst:a,foreignTable:u,referencedTable:c=u}={}){const f=c?`${c}.order`:"order",h=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${h?`${h},`:""}${i}.${o?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:o,referencedTable:a=o}={}){const u=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(u,`${i}`),this}range(i,o,{foreignTable:a,referencedTable:u=a}={}){const c=typeof u>"u"?"offset":`${u}.offset`,f=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(c,`${i}`),this.url.searchParams.set(f,`${o-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:o=!1,settings:a=!1,buffers:u=!1,wal:c=!1,format:f="text"}={}){var h;const p=[i?"analyze":null,o?"verbose":null,a?"settings":null,u?"buffers":null,c?"wal":null].filter(Boolean).join("|"),v=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${f}; for="${v}"; options=${p};`),f==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return no.default=n,no}var Tx;function im(){if(Tx)return to;Tx=1;var e=to&&to.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(to,"__esModule",{value:!0});const t=e(nk());class n extends t.default{eq(i,o){return this.url.searchParams.append(i,`eq.${o}`),this}neq(i,o){return this.url.searchParams.append(i,`neq.${o}`),this}gt(i,o){return this.url.searchParams.append(i,`gt.${o}`),this}gte(i,o){return this.url.searchParams.append(i,`gte.${o}`),this}lt(i,o){return this.url.searchParams.append(i,`lt.${o}`),this}lte(i,o){return this.url.searchParams.append(i,`lte.${o}`),this}like(i,o){return this.url.searchParams.append(i,`like.${o}`),this}likeAllOf(i,o){return this.url.searchParams.append(i,`like(all).{${o.join(",")}}`),this}likeAnyOf(i,o){return this.url.searchParams.append(i,`like(any).{${o.join(",")}}`),this}ilike(i,o){return this.url.searchParams.append(i,`ilike.${o}`),this}ilikeAllOf(i,o){return this.url.searchParams.append(i,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(i,o){return this.url.searchParams.append(i,`ilike(any).{${o.join(",")}}`),this}is(i,o){return this.url.searchParams.append(i,`is.${o}`),this}in(i,o){const a=Array.from(new Set(o)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(i,`in.(${a})`),this}contains(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cs.{${o.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(o)}`),this}containedBy(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cd.{${o.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(o)}`),this}rangeGt(i,o){return this.url.searchParams.append(i,`sr.${o}`),this}rangeGte(i,o){return this.url.searchParams.append(i,`nxl.${o}`),this}rangeLt(i,o){return this.url.searchParams.append(i,`sl.${o}`),this}rangeLte(i,o){return this.url.searchParams.append(i,`nxr.${o}`),this}rangeAdjacent(i,o){return this.url.searchParams.append(i,`adj.${o}`),this}overlaps(i,o){return typeof o=="string"?this.url.searchParams.append(i,`ov.${o}`):this.url.searchParams.append(i,`ov.{${o.join(",")}}`),this}textSearch(i,o,{config:a,type:u}={}){let c="";u==="plain"?c="pl":u==="phrase"?c="ph":u==="websearch"&&(c="w");const f=a===void 0?"":`(${a})`;return this.url.searchParams.append(i,`${c}fts${f}.${o}`),this}match(i){return Object.entries(i).forEach(([o,a])=>{this.url.searchParams.append(o,`eq.${a}`)}),this}not(i,o,a){return this.url.searchParams.append(i,`not.${o}.${a}`),this}or(i,{foreignTable:o,referencedTable:a=o}={}){const u=a?`${a}.or`:"or";return this.url.searchParams.append(u,`(${i})`),this}filter(i,o,a){return this.url.searchParams.append(i,`${o}.${a}`),this}}return to.default=n,to}var Ix;function rk(){if(Ix)return eo;Ix=1;var e=eo&&eo.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(eo,"__esModule",{value:!0});const t=e(im());class n{constructor(i,{headers:o={},schema:a,fetch:u}){this.url=i,this.headers=new Headers(o),this.schema=a,this.fetch=u}select(i,o){const{head:a=!1,count:u}=o??{},c=a?"HEAD":"GET";let f=!1;const h=(i??"*").split("").map(p=>/\s/.test(p)&&!f?"":(p==='"'&&(f=!f),p)).join("");return this.url.searchParams.set("select",h),u&&this.headers.append("Prefer",`count=${u}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:o,defaultToNull:a=!0}={}){var u;const c="POST";if(o&&this.headers.append("Prefer",`count=${o}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const f=i.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(f.length>0){const h=[...new Set(f)].map(p=>`"${p}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}upsert(i,{onConflict:o,ignoreDuplicates:a=!1,count:u,defaultToNull:c=!0}={}){var f;const h="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),u&&this.headers.append("Prefer",`count=${u}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const p=i.reduce((v,y)=>v.concat(Object.keys(y)),[]);if(p.length>0){const v=[...new Set(p)].map(y=>`"${y}"`);this.url.searchParams.set("columns",v.join(","))}}return new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}update(i,{count:o}={}){var a;const u="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:i}={}){var o;const a="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}}return eo.default=n,eo}var Px;function pP(){if(Px)return Zs;Px=1;var e=Zs&&Zs.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Zs,"__esModule",{value:!0});const t=e(rk()),n=e(im());class r{constructor(o,{headers:a={},schema:u,fetch:c}={}){this.url=o,this.headers=new Headers(a),this.schemaName=u,this.fetch=c}from(o){const a=new URL(`${this.url}/${o}`);return new t.default(a,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new r(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,a={},{head:u=!1,get:c=!1,count:f}={}){var h;let p;const v=new URL(`${this.url}/rpc/${o}`);let y;u||c?(p=u?"HEAD":"GET",Object.entries(a).filter(([S,k])=>k!==void 0).map(([S,k])=>[S,Array.isArray(k)?`{${k.join(",")}}`:`${k}`]).forEach(([S,k])=>{v.searchParams.append(S,k)})):(p="POST",y=a);const w=new Headers(this.headers);return f&&w.set("Prefer",`count=${f}`),new n.default({method:p,url:v,headers:w,schema:this.schemaName,body:y,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}}return Zs.default=r,Zs}var Rx;function mP(){if(Rx)return sn;Rx=1;var e=sn&&sn.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(sn,"__esModule",{value:!0}),sn.PostgrestError=sn.PostgrestBuilder=sn.PostgrestTransformBuilder=sn.PostgrestFilterBuilder=sn.PostgrestQueryBuilder=sn.PostgrestClient=void 0;const t=e(pP());sn.PostgrestClient=t.default;const n=e(rk());sn.PostgrestQueryBuilder=n.default;const r=e(im());sn.PostgrestFilterBuilder=r.default;const i=e(nk());sn.PostgrestTransformBuilder=i.default;const o=e(tk());sn.PostgrestBuilder=o.default;const a=e(ek());return sn.PostgrestError=a.default,sn.default={PostgrestClient:t.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:o.default,PostgrestError:a.default},sn}var gP=mP();const yP=Ao(gP),{PostgrestClient:vP,PostgrestQueryBuilder:rB,PostgrestFilterBuilder:iB,PostgrestTransformBuilder:sB,PostgrestBuilder:oB,PostgrestError:aB}=yP;class xP{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const bP="2.75.0",wP=`realtime-js/${bP}`,kP="1.0.0",ep=1e4,SP=1e3,EP=100;var Fa;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Fa||(Fa={}));var Zt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Zt||(Zt={}));var xr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(xr||(xr={}));var tp;(function(e){e.websocket="websocket"})(tp||(tp={}));var fs;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(fs||(fs={}));class _P{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const i=n.getUint8(1),o=n.getUint8(2);let a=this.HEADER_LENGTH+2;const u=r.decode(t.slice(a,a+i));a=a+i;const c=r.decode(t.slice(a,a+o));a=a+o;const f=JSON.parse(r.decode(t.slice(a,t.byteLength)));return{ref:null,topic:u,event:c,payload:f}}}class ik{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ct;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ct||(Ct={}));const Ax=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((o,a)=>(o[a]=CP(a,e,t,i),o),{}):{}},CP=(e,t,n,r)=>{const i=t.find(u=>u.name===e),o=i==null?void 0:i.type,a=n[e];return o&&!r.includes(o)?sk(o,a):np(a)},sk=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return IP(t,n)}switch(e){case Ct.bool:return jP(t);case Ct.float4:case Ct.float8:case Ct.int2:case Ct.int4:case Ct.int8:case Ct.numeric:case Ct.oid:return NP(t);case Ct.json:case Ct.jsonb:return TP(t);case Ct.timestamp:return PP(t);case Ct.abstime:case Ct.date:case Ct.daterange:case Ct.int4range:case Ct.int8range:case Ct.money:case Ct.reltime:case Ct.text:case Ct.time:case Ct.timestamptz:case Ct.timetz:case Ct.tsrange:case Ct.tstzrange:return np(t);default:return np(t)}},np=e=>e,jP=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},NP=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},TP=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},IP=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let o;const a=e.slice(1,n);try{o=JSON.parse("["+a+"]")}catch{o=a?a.split(","):[]}return o.map(u=>sk(t,u))}return e},PP=e=>typeof e=="string"?e.replace(" ","T"):e,ok=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Zf{constructor(t,n,r={},i=ep){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Mx;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Mx||(Mx={}));class Ba{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:o,onLeave:a,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ba.syncState(this.state,i,o,a),this.pendingDiffs.forEach(c=>{this.state=Ba.syncDiff(this.state,c,o,a)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},i=>{const{onJoin:o,onLeave:a,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Ba.syncDiff(this.state,i,o,a),u())}),this.onJoin((i,o,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:a})}),this.onLeave((i,o,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const o=this.cloneDeep(t),a=this.transformState(n),u={},c={};return this.map(o,(f,h)=>{a[f]||(c[f]=h)}),this.map(a,(f,h)=>{const p=o[f];if(p){const v=h.map(k=>k.presence_ref),y=p.map(k=>k.presence_ref),w=h.filter(k=>y.indexOf(k.presence_ref)<0),S=p.filter(k=>v.indexOf(k.presence_ref)<0);w.length>0&&(u[f]=w),S.length>0&&(c[f]=S)}else u[f]=h}),this.syncDiff(o,{joins:u,leaves:c},r,i)}static syncDiff(t,n,r,i){const{joins:o,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(u,c)=>{var f;const h=(f=t[u])!==null&&f!==void 0?f:[];if(t[u]=this.cloneDeep(c),h.length>0){const p=t[u].map(y=>y.presence_ref),v=h.filter(y=>p.indexOf(y.presence_ref)<0);t[u].unshift(...v)}r(u,h,c)}),this.map(a,(u,c)=>{let f=t[u];if(!f)return;const h=c.map(p=>p.presence_ref);f=f.filter(p=>h.indexOf(p.presence_ref)<0),t[u]=f,i(u,f,c),f.length===0&&delete t[u]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ox;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Ox||(Ox={}));var za;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(za||(za={}));var Xr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Xr||(Xr={}));class sm{constructor(t,n={config:{}},r){var i,o;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Zt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Zf(this,xr.join,this.params,this.timeout),this.rejoinTimer=new ik(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Zt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Zt.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Zt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Zt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Zt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(xr.reply,{},(a,u)=>{this._trigger(this._replyEventName(u),a)}),this.presence=new Ba(this),this.broadcastEndpointURL=ok(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Zt.closed){const{config:{broadcast:a,presence:u,private:c}}=this.params,f=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(y=>y.filter))!==null&&i!==void 0?i:[],h=!!this.bindings[za.PRESENCE]&&this.bindings[za.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,p={},v={broadcast:a,presence:Object.assign(Object.assign({},u),{enabled:h}),postgres_changes:f,private:c};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(y=>t==null?void 0:t(Xr.CHANNEL_ERROR,y)),this._onClose(()=>t==null?void 0:t(Xr.CLOSED)),this.updateJoinPayload(Object.assign({config:v},p)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:y})=>{var w;if(this.socket.setAuth(),y===void 0){t==null||t(Xr.SUBSCRIBED);return}else{const S=this.bindings.postgres_changes,k=(w=S==null?void 0:S.length)!==null&&w!==void 0?w:0,_=[];for(let C=0;C<k;C++){const j=S[C],{filter:{event:I,schema:O,table:R,filter:U}}=j,re=y&&y[C];if(re&&re.event===I&&re.schema===O&&re.table===R&&re.filter===U)_.push(Object.assign(Object.assign({},j),{id:re.id}));else{this.unsubscribe(),this.state=Zt.errored,t==null||t(Xr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,t&&t(Xr.SUBSCRIBED);return}}).receive("error",y=>{this.state=Zt.errored,t==null||t(Xr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Xr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Zt.joined&&t===za.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){const{event:o,payload:a}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=f.body)===null||i===void 0?void 0:i.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,u,c;const f=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(u=(a=this.params)===null||a===void 0?void 0:a.config)===null||u===void 0?void 0:u.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),f.receive("ok",()=>o("ok")),f.receive("error",()=>o("error")),f.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Zt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(xr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Zf(this,xr.leave,{},t),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Zt.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const i=new AbortController,o=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(o),a}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Zf(this,t,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>EP){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,o;const a=t.toLocaleLowerCase(),{close:u,error:c,leave:f,join:h}=xr;if(r&&[u,c,f,h].indexOf(a)>=0&&r!==this._joinRef())return;let v=this._onMessage(a,n,r);if(n&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(y=>{var w,S,k;return((w=y.filter)===null||w===void 0?void 0:w.event)==="*"||((k=(S=y.filter)===null||S===void 0?void 0:S.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===a}).map(y=>y.callback(v,r)):(o=this.bindings[a])===null||o===void 0||o.filter(y=>{var w,S,k,_,C,j;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in y){const I=y.id,O=(w=y.filter)===null||w===void 0?void 0:w.event;return I&&((S=n.ids)===null||S===void 0?void 0:S.includes(I))&&(O==="*"||(O==null?void 0:O.toLocaleLowerCase())===((k=n.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const I=(C=(_=y==null?void 0:y.filter)===null||_===void 0?void 0:_.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return I==="*"||I===((j=n==null?void 0:n.event)===null||j===void 0?void 0:j.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===a}).map(y=>{if(typeof v=="object"&&"ids"in v){const w=v.data,{schema:S,table:k,commit_timestamp:_,type:C,errors:j}=w;v=Object.assign(Object.assign({},{schema:S,table:k,commit_timestamp:_,eventType:C,new:{},old:{},errors:j}),this._getPayloadRecords(w))}y.callback(v,r)})}_isClosed(){return this.state===Zt.closed}_isJoined(){return this.state===Zt.joined}_isJoining(){return this.state===Zt.joining}_isLeaving(){return this.state===Zt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),o={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&sm.isEqual(i.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(xr.close,{},t)}_onError(t){this._on(xr.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Zt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Ax(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Ax(t.columns,t.old_record)),n}}const eh=()=>{},Au={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},RP=[1e3,2e3,5e3,1e4],AP=1e4,MP=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class OP{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ep,this.transport=null,this.heartbeatIntervalMs=Au.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=eh,this.ref=0,this.reconnectTimer=null,this.logger=eh,this.conn=null,this.sendBuffer=[],this.serializer=new _P,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>hl(async()=>{const{default:u}=await Promise.resolve().then(()=>Fo);return{default:u}},void 0).then(({default:u})=>u(...a)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...a)=>o(...a)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${tp.websocket}`,this.httpEndpoint=ok(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=xP.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:kP}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Fa.connecting:return fs.Connecting;case Fa.open:return fs.Open;case Fa.closing:return fs.Closing;default:return fs.Closed}}isConnected(){return this.connectionState()===fs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{const o=new sm(`realtime:${t}`,n,this);return this.channels.push(o),o}}push(t){const{topic:n,event:r,payload:i,ref:o}=t,a=()=>{this.encode(t,u=>{var c;(c=this.conn)===null||c===void 0||c.send(u)})};this.log("push",`${n} ${r} (${o})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(SP,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Au.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:o,ref:a}=n,u=a?`(${a})`:"",c=o.status||"";this.log("receive",`${c} ${r} ${i} ${u}`.trim(),o),this.channels.filter(f=>f._isMember(r)).forEach(f=>f._trigger(i,o,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(xr.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([MP],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:wP};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(xr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new ik(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Au.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,i,o,a,u,c,f,h;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:ep,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:Au.HEARTBEAT_INTERVAL,this.worker=(o=t==null?void 0:t.worker)!==null&&o!==void 0?o:!1,this.accessToken=(a=t==null?void 0:t.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(u=t==null?void 0:t.heartbeatCallback)!==null&&u!==void 0?u:eh,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:(p=>RP[p-1]||AP),this.encode=(f=t==null?void 0:t.encode)!==null&&f!==void 0?f:((p,v)=>v(JSON.stringify(p))),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class om extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function qt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class DP extends om{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class rp extends om{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var LP=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function u(h){try{f(r.next(h))}catch(p){a(p)}}function c(h){try{f(r.throw(h))}catch(p){a(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};const ak=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>hl(async()=>{const{default:r}=await Promise.resolve().then(()=>Fo);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},$P=()=>LP(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield hl(()=>Promise.resolve().then(()=>Fo),void 0)).Response:Response}),ip=e=>{if(Array.isArray(e))return e.map(n=>ip(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[i]=ip(r)}),t},FP=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Ts=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function u(h){try{f(r.next(h))}catch(p){a(p)}}function c(h){try{f(r.throw(h))}catch(p){a(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};const th=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),BP=(e,t,n)=>Ts(void 0,void 0,void 0,function*(){const r=yield $P();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(i=>{const o=e.status||500,a=(i==null?void 0:i.statusCode)||o+"";t(new DP(th(i),o,a))}).catch(i=>{t(new rp(th(i),i))}):t(new rp(th(e),e))}),zP=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?i:(FP(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(r)):i.body=r,t!=null&&t.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),n))};function pl(e,t,n,r,i,o){return Ts(this,void 0,void 0,function*(){return new Promise((a,u)=>{e(n,zP(t,r,i,o)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>BP(c,u,r))})})}function dc(e,t,n,r){return Ts(this,void 0,void 0,function*(){return pl(e,"GET",t,n,r)})}function Rr(e,t,n,r,i){return Ts(this,void 0,void 0,function*(){return pl(e,"POST",t,r,i,n)})}function sp(e,t,n,r,i){return Ts(this,void 0,void 0,function*(){return pl(e,"PUT",t,r,i,n)})}function UP(e,t,n,r){return Ts(this,void 0,void 0,function*(){return pl(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function lk(e,t,n,r,i){return Ts(this,void 0,void 0,function*(){return pl(e,"DELETE",t,r,i,n)})}var WP=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function u(h){try{f(r.next(h))}catch(p){a(p)}}function c(h){try{f(r.throw(h))}catch(p){a(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};class HP{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return WP(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(qt(t))return{data:null,error:t};throw t}})}}var VP=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function u(h){try{f(r.next(h))}catch(p){a(p)}}function c(h){try{f(r.throw(h))}catch(p){a(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};class qP{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}asStream(){return new HP(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.execute().then(t,n)}execute(){return VP(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(qt(t))return{data:null,error:t};throw t}})}}var Mn=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function u(h){try{f(r.next(h))}catch(p){a(p)}}function c(h){try{f(r.throw(h))}catch(p){a(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};const KP={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Dx={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class YP{constructor(t,n={},r,i){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=ak(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,i){return Mn(this,void 0,void 0,function*(){try{let o;const a=Object.assign(Object.assign({},Dx),i);let u=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",a.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",a.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=r,u["cache-control"]=`max-age=${a.cacheControl}`,u["content-type"]=a.contentType,c&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i!=null&&i.headers&&(u=Object.assign(Object.assign({},u),i.headers));const f=this._removeEmptyFolders(n),h=this._getFinalPath(f),p=yield(t=="PUT"?sp:Rr)(this.fetch,`${this.url}/object/${h}`,o,Object.assign({headers:u},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:f,id:p.Id,fullPath:p.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(qt(o))return{data:null,error:o};throw o}})}upload(t,n,r){return Mn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,i){return Mn(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),a=this._getFinalPath(o),u=new URL(this.url+`/object/upload/sign/${a}`);u.searchParams.set("token",n);try{let c;const f=Object.assign({upsert:Dx.upsert},i),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",f.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",f.cacheControl)):(c=r,h["cache-control"]=`max-age=${f.cacheControl}`,h["content-type"]=f.contentType);const p=yield sp(this.fetch,u.toString(),c,{headers:h});return{data:{path:o,fullPath:p.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(qt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return Mn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const o=yield Rr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(this.url+o.url),u=a.searchParams.get("token");if(!u)throw new om("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:u},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(qt(r))return{data:null,error:r};throw r}})}update(t,n,r){return Mn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Mn(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(qt(i))return{data:null,error:i};throw i}})}copy(t,n,r){return Mn(this,void 0,void 0,function*(){try{return{data:{path:(yield Rr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(qt(i))return{data:null,error:i};throw i}})}createSignedUrl(t,n,r){return Mn(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),o=yield Rr(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${a}`)},{data:o,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(qt(i))return{data:null,error:i};throw i}})}createSignedUrls(t,n,r){return Mn(this,void 0,void 0,function*(){try{const i=yield Rr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${o}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(qt(i))return{data:null,error:i};throw i}})}download(t,n){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=o?`?${o}`:"",u=this._getFinalPath(t),c=()=>dc(this.fetch,`${this.url}/${i}/${u}${a}`,{headers:this.headers,noResolveJson:!0});return new qP(c,this.shouldThrowOnError)}info(t){return Mn(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield dc(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:ip(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(qt(r))return{data:null,error:r};throw r}})}exists(t){return Mn(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield UP(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(qt(r)&&r instanceof rp){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),i=[],o=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&i.push(o);const u=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&i.push(c);let f=i.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${r}${f}`)}}}remove(t){return Mn(this,void 0,void 0,function*(){try{return{data:yield lk(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(qt(n))return{data:null,error:n};throw n}})}list(t,n,r){return Mn(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},KP),n),{prefix:t||""});return{data:yield Rr(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(qt(i))return{data:null,error:i};throw i}})}listV2(t,n){return Mn(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield Rr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(qt(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const GP="2.75.0",JP={"X-Client-Info":`storage-js/${GP}`};var io=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function u(h){try{f(r.next(h))}catch(p){a(p)}}function c(h){try{f(r.throw(h))}catch(p){a(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};class QP{constructor(t,n={},r,i){this.shouldThrowOnError=!1;const o=new URL(t);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},JP),n),this.fetch=ak(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return io(this,void 0,void 0,function*(){try{return{data:yield dc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(qt(t))return{data:null,error:t};throw t}})}getBucket(t){return io(this,void 0,void 0,function*(){try{return{data:yield dc(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(qt(n))return{data:null,error:n};throw n}})}createBucket(t){return io(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield Rr(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(qt(i))return{data:null,error:i};throw i}})}updateBucket(t,n){return io(this,void 0,void 0,function*(){try{return{data:yield sp(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(qt(r))return{data:null,error:r};throw r}})}emptyBucket(t){return io(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(qt(n))return{data:null,error:n};throw n}})}deleteBucket(t){return io(this,void 0,void 0,function*(){try{return{data:yield lk(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(qt(n))return{data:null,error:n};throw n}})}}class XP extends QP{constructor(t,n={},r,i){super(t,n,r,i)}from(t){return new YP(this.url,this.headers,t,this.fetch)}}const ZP="2.75.0";let Ma="";typeof Deno<"u"?Ma="deno":typeof document<"u"?Ma="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ma="react-native":Ma="node";const eR={"X-Client-Info":`supabase-js-${Ma}/${ZP}`},tR={headers:eR},nR={schema:"public"},rR={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},iR={};var sR=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function u(h){try{f(r.next(h))}catch(p){a(p)}}function c(h){try{f(r.throw(h))}catch(p){a(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};const oR=e=>{let t;return e?t=e:typeof fetch>"u"?t=Xw:t=fetch,(...n)=>t(...n)},aR=()=>typeof Headers>"u"?Zw:Headers,lR=(e,t,n)=>{const r=oR(n),i=aR();return(o,a)=>sR(void 0,void 0,void 0,function*(){var u;const c=(u=yield t())!==null&&u!==void 0?u:e;let f=new i(a==null?void 0:a.headers);return f.has("apikey")||f.set("apikey",e),f.has("Authorization")||f.set("Authorization",`Bearer ${c}`),r(o,Object.assign(Object.assign({},a),{headers:f}))})};var uR=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function u(h){try{f(r.next(h))}catch(p){a(p)}}function c(h){try{f(r.throw(h))}catch(p){a(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};function cR(e){return e.endsWith("/")?e:e+"/"}function dR(e,t){var n,r;const{db:i,auth:o,realtime:a,global:u}=e,{db:c,auth:f,realtime:h,global:p}=t,v={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},f),o),realtime:Object.assign(Object.assign({},h),a),storage:{},global:Object.assign(Object.assign(Object.assign({},p),u),{headers:Object.assign(Object.assign({},(n=p==null?void 0:p.headers)!==null&&n!==void 0?n:{}),(r=u==null?void 0:u.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>uR(this,void 0,void 0,function*(){return""})};return e.accessToken?v.accessToken=e.accessToken:delete v.accessToken,v}function fR(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(cR(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const uk="2.75.0",po=30*1e3,op=3,nh=op*po,hR="http://localhost:9999",pR="supabase.auth.token",mR={"X-Client-Info":`gotrue-js/${uk}`},ap="X-Supabase-Api-Version",ck={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},gR=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,yR=600*1e3;class tl extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Xe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class vR extends tl{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function xR(e){return Xe(e)&&e.name==="AuthApiError"}class hs extends tl{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Ui extends tl{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}}class Ci extends Ui{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function bR(e){return Xe(e)&&e.name==="AuthSessionMissingError"}class so extends Ui{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Mu extends Ui{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Ou extends Ui{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function wR(e){return Xe(e)&&e.name==="AuthImplicitGrantRedirectError"}class Lx extends Ui{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class lp extends Ui{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function rh(e){return Xe(e)&&e.name==="AuthRetryableFetchError"}class $x extends Ui{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class up extends Ui{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const fc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Fx=` 	
\r=`.split(""),kR=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Fx.length;t+=1)e[Fx[t].charCodeAt(0)]=-2;for(let t=0;t<fc.length;t+=1)e[fc[t].charCodeAt(0)]=t;return e})();function Bx(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(fc[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(fc[r]),t.queuedBits-=6}}function dk(e,t,n){const r=kR[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function zx(e){const t=[],n=a=>{t.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=a=>{_R(a,r,n)};for(let a=0;a<e.length;a+=1)dk(e.charCodeAt(a),i,o);return t.join("")}function SR(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function ER(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}SR(r,t)}}function _R(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if((e>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function So(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)dk(e.charCodeAt(i),n,r);return new Uint8Array(t)}function CR(e){const t=[];return ER(e,n=>t.push(n)),new Uint8Array(t)}function vs(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};return e.forEach(i=>Bx(i,n,r)),Bx(null,n,r),t.join("")}function jR(e){return Math.round(Date.now()/1e3)+e}function NR(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Yn=()=>typeof window<"u"&&typeof document<"u",is={tested:!1,writable:!1},fk=()=>{if(!Yn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(is.tested)return is.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),is.tested=!0,is.writable=!0}catch{is.tested=!0,is.writable=!1}return is.writable};function TR(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,o)=>{t[o]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const hk=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>hl(async()=>{const{default:r}=await Promise.resolve().then(()=>Fo);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},IR=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",mo=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},ss=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ei=async(e,t)=>{await e.removeItem(t)};class Wc{constructor(){this.promise=new Wc.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Wc.promiseConstructor=Promise;function ih(e){const t=e.split(".");if(t.length!==3)throw new up("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!gR.test(t[r]))throw new up("JWT not in base64url format");return{header:JSON.parse(zx(t[0])),payload:JSON.parse(zx(t[1])),signature:So(t[2]),raw:{header:t[0],payload:t[1]}}}async function PR(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function RR(e,t){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const a=await e(o);if(!t(o,null,a)){r(a);return}}catch(a){if(!t(o,a)){i(a);return}}})()})}function AR(e){return("0"+e.toString(16)).substr(-2)}function MR(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let o=0;o<56;o++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,AR).join("")}async function OR(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function DR(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await OR(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function oo(e,t,n=!1){const r=MR();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await mo(e,`${t}-code-verifier`,i);const o=await DR(r);return[o,r===o?"plain":"s256"]}const LR=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function $R(e){const t=e.headers.get(ap);if(!t||!t.match(LR))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function FR(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function BR(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const zR=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ao(e){if(!zR.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function sh(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Ux(e){return JSON.parse(JSON.stringify(e))}var UR=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const ls=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),WR=[502,503,504];async function Wx(e){var t;if(!IR(e))throw new lp(ls(e),0);if(WR.includes(e.status))throw new lp(ls(e),e.status);let n;try{n=await e.json()}catch(o){throw new hs(ls(o),o)}let r;const i=$R(e);if(i&&i.getTime()>=ck["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new $x(ls(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Ci}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,a)=>o&&typeof a=="string",!0))throw new $x(ls(n),e.status,n.weak_password.reasons);throw new vR(ls(n),e.status||500,r)}const HR=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function it(e,t,n,r){var i;const o=Object.assign({},r==null?void 0:r.headers);o[ap]||(o[ap]=ck["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const a=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const u=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await VR(e,t,n+u,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function VR(e,t,n,r,i,o){const a=HR(t,r,i,o);let u;try{u=await e(n,Object.assign({},a))}catch(c){throw console.error(c),new lp(ls(c),0)}if(u.ok||await Wx(u),r!=null&&r.noResolveJson)return u;try{return await u.json()}catch(c){await Wx(c)}}function yr(e){var t;let n=null;YR(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=jR(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Hx(e){const t=yr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Pi(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function qR(e){return{data:e,error:null}}function KR(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o}=e,a=UR(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o},c=Object.assign({},a);return{data:{properties:u,user:c},error:null}}function Vx(e){return e}function YR(e){return e.access_token&&e.refresh_token&&e.expires_in}const oh=["global","local","others"];var GR=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class JR{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=hk(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=oh[0]){if(oh.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${oh.join(", ")}`);try{return await it(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Xe(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await it(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Pi})}catch(r){if(Xe(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=GR(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await it(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:KR,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Xe(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await it(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Pi})}catch(n){if(Xe(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,o,a,u,c;try{const f={nextPage:null,lastPage:0,total:0},h=await it(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Vx});if(h.error)throw h.error;const p=await h.json(),v=(a=h.headers.get("x-total-count"))!==null&&a!==void 0?a:0,y=(c=(u=h.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&c!==void 0?c:[];return y.length>0&&(y.forEach(w=>{const S=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(w.split(";")[1].split("=")[1]);f[`${k}Page`]=S}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},p),f),error:null}}catch(f){if(Xe(f))return{data:{users:[]},error:f};throw f}}async getUserById(t){ao(t);try{return await it(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Pi})}catch(n){if(Xe(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){ao(t);try{return await it(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Pi})}catch(r){if(Xe(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){ao(t);try{return await it(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Pi})}catch(r){if(Xe(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){ao(t.userId);try{const{data:n,error:r}=await it(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(Xe(n))return{data:null,error:n};throw n}}async _deleteFactor(t){ao(t.userId),ao(t.id);try{return{data:await it(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Xe(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,i,o,a,u,c;try{const f={nextPage:null,lastPage:0,total:0},h=await it(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Vx});if(h.error)throw h.error;const p=await h.json(),v=(a=h.headers.get("x-total-count"))!==null&&a!==void 0?a:0,y=(c=(u=h.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&c!==void 0?c:[];return y.length>0&&(y.forEach(w=>{const S=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(w.split(";")[1].split("=")[1]);f[`${k}Page`]=S}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},p),f),error:null}}catch(f){if(Xe(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(t){try{return await it(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Xe(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await it(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Xe(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await it(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Xe(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await it(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Xe(n))return{data:null,error:n};throw n}}}function qx(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const lo={debug:!!(globalThis&&fk()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class pk extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class QR extends pk{}async function XR(e,t,n){lo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),lo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){lo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{lo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw lo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new QR(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(lo.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function ZR(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function mk(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function eA(e){return parseInt(e,16)}function tA(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function nA(e){var t;const{chainId:n,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:a,notBefore:u,requestId:c,resources:f,scheme:h,uri:p,version:v}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const y=mk(e.address),w=h?`${h}://${r}`:r,S=e.statement?`${e.statement}
`:"",k=`${w} wants you to sign in with your Ethereum account:
${y}

${S}`;let _=`URI: ${p}
Version: ${v}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${o.toISOString()}`;if(i&&(_+=`
Expiration Time: ${i.toISOString()}`),u&&(_+=`
Not Before: ${u.toISOString()}`),c&&(_+=`
Request ID: ${c}`),f){let C=`
Resources:`;for(const j of f){if(!j||typeof j!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${j}`);C+=`
- ${j}`}_+=C}return`${k}
${_}`}class Vt extends Error{constructor({message:t,code:n,cause:r,name:i}){var o;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class hc extends Vt{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function rA({error:e,options:t}){var n,r,i;const{publicKey:o}=t;if(!o)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Vt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Vt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Vt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Vt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Vt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Vt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return o.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new Vt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Vt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const a=window.location.hostname;if(yk(a)){if(o.rp.id!==a)return new Vt({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Vt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Vt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Vt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Vt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function iA({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Vt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Vt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(yk(r)){if(n.rpId!==r)return new Vt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Vt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Vt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Vt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var gk=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class sA{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const oA=new sA;function aA(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,i=gk(e,["challenge","user","excludeCredentials"]),o=So(t).buffer,a=Object.assign(Object.assign({},n),{id:So(n.id).buffer}),u=Object.assign(Object.assign({},i),{challenge:o,user:a});if(r&&r.length>0){u.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const f=r[c];u.excludeCredentials[c]=Object.assign(Object.assign({},f),{id:So(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return u}function lA(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=gk(e,["challenge","allowCredentials"]),i=So(t).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const u=n[a];o.allowCredentials[a]=Object.assign(Object.assign({},u),{id:So(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function uA(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:vs(new Uint8Array(e.response.attestationObject)),clientDataJSON:vs(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function cA(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:vs(new Uint8Array(i.authenticatorData)),clientDataJSON:vs(new Uint8Array(i.clientDataJSON)),signature:vs(new Uint8Array(i.signature)),userHandle:i.userHandle?vs(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function yk(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Kx(){var e,t;return!!(Yn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function dA(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new hc("Browser returned unexpected credential type",t)}:{data:null,error:new hc("Empty credential response",t)}}catch(t){return{data:null,error:rA({error:t,options:e})}}}async function fA(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new hc("Browser returned unexpected credential type",t)}:{data:null,error:new hc("Empty credential response",t)}}catch(t){return{data:null,error:iA({error:t,options:e})}}}const hA={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},pA={userVerification:"preferred",hints:["security-key"]};function pc(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of e)if(i)for(const o in i){const a=i[o];if(a!==void 0)if(Array.isArray(a))r[o]=a;else if(n(a))r[o]=a;else if(t(a)){const u=r[o];t(u)?r[o]=pc(u,a):r[o]=pc(a)}else r[o]=a}return r}function mA(e,t){return pc(hA,e,t||{})}function gA(e,t){return pc(pA,e,t||{})}class yA{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:i},o){try{const{data:a,error:u}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!a)return{data:null,error:u};const c=i??oA.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:f}=a.webauthn.credential_options.publicKey;f.name||(f.name=`${f.id}:${r}`),f.displayName||(f.displayName=f.name)}switch(a.webauthn.type){case"create":{const f=mA(a.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:h,error:p}=await dA({publicKey:f,signal:c});return h?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:h}},error:null}:{data:null,error:p}}case"request":{const f=gA(a.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:h,error:p}=await fA(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:f,signal:c}));return h?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:h}},error:null}:{data:null,error:p}}}}catch(a){return Xe(a)?{data:null,error:a}:{data:null,error:new hs("Unexpected error in challenge",a)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}},o){if(!n)return{data:null,error:new tl("rpId is required for WebAuthn authentication")};try{if(!Kx())return{data:null,error:new hs("Browser does not support WebAuthn",null)};const{data:a,error:u}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:o});if(!a)return{data:null,error:u};const{webauthn:c}=a;return this._verify({factorId:t,challengeId:a.challengeId,webauthn:{type:c.type,rpId:n,rpOrigins:r,credential_response:c.credential_response}})}catch(a){return Xe(a)?{data:null,error:a}:{data:null,error:new hs("Unexpected error in authenticate",a)}}}async _register({friendlyName:t,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i},o){if(!n)return{data:null,error:new tl("rpId is required for WebAuthn registration")};try{if(!Kx())return{data:null,error:new hs("Browser does not support WebAuthn",null)};const{data:a,error:u}=await this._enroll({friendlyName:t});if(!a)return await this.client.mfa.listFactors().then(h=>{var p;return(p=h.data)===null||p===void 0?void 0:p.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===t&&v.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:u};const{data:c,error:f}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:o});return c?this._verify({factorId:a.id,challengeId:c.challengeId,webauthn:{rpId:n,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:f}}catch(a){return Xe(a)?{data:null,error:a}:{data:null,error:new hs("Unexpected error in register",a)}}}}ZR();const vA={url:hR,storageKey:pR,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:mR,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Yx(e,t,n){return await n()}const uo={};class nl{get jwks(){var t,n;return(n=(t=uo[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){uo[this.storageKey]=Object.assign(Object.assign({},uo[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=uo[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){uo[this.storageKey]=Object.assign(Object.assign({},uo[this.storageKey]),{cachedAt:t})}constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=nl.nextInstanceID,nl.nextInstanceID+=1,this.instanceID>0&&Yn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},vA),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new JR({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=hk(i.fetch),this.lock=i.lock||Yx,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Yn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=XR:this.lock=Yx,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new yA(this)},this.persistSession?(i.storage?this.storage=i.storage:fk()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=qx(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=qx(this.memoryStorage)),Yn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${uk}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=TR(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Yn()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),wR(o)){const c=(t=o.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:a,redirectType:u}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",u),await this._saveSession(a),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Xe(n)?{error:n}:{error:new hs("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,i;try{const o=await it(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:yr}),{data:a,error:u}=o;if(u||!a)return{data:{user:null,session:null},error:u};const c=a.session,f=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(o){if(Xe(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(t){var n,r,i;try{let o;if("email"in t){const{email:h,password:p,options:v}=t;let y=null,w=null;this.flowType==="pkce"&&([y,w]=await oo(this.storage,this.storageKey)),o=await it(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:h,password:p,data:(n=v==null?void 0:v.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:y,code_challenge_method:w},xform:yr})}else if("phone"in t){const{phone:h,password:p,options:v}=t;o=await it(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:p,data:(r=v==null?void 0:v.data)!==null&&r!==void 0?r:{},channel:(i=v==null?void 0:v.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:yr})}else throw new Mu("You must provide either an email or phone number and a password");const{data:a,error:u}=o;if(u||!a)return{data:{user:null,session:null},error:u};const c=a.session,f=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(o){if(Xe(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(t){try{let n;if("email"in t){const{email:o,password:a,options:u}=t;n=await it(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Hx})}else if("phone"in t){const{phone:o,password:a,options:u}=t;n=await it(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Hx})}else throw new Mu("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new so}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(Xe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,i,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,i,o,a,u,c,f,h,p,v;let y,w;if("message"in t)y=t.message,w=t.signature;else{const{chain:S,wallet:k,statement:_,options:C}=t;let j;if(Yn())if(typeof k=="object")j=k;else{const z=window;if("ethereum"in z&&typeof z.ethereum=="object"&&"request"in z.ethereum&&typeof z.ethereum.request=="function")j=z.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!(C!=null&&C.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=k}const I=new URL((n=C==null?void 0:C.url)!==null&&n!==void 0?n:window.location.href),O=await j.request({method:"eth_requestAccounts"}).then(z=>z).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!O||O.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const R=mk(O[0]);let U=(r=C==null?void 0:C.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!U){const z=await j.request({method:"eth_chainId"});U=eA(z)}const re={domain:I.host,address:R,statement:_,uri:I.href,version:"1",chainId:U,nonce:(i=C==null?void 0:C.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(a=(o=C==null?void 0:C.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(u=C==null?void 0:C.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(c=C==null?void 0:C.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(f=C==null?void 0:C.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(h=C==null?void 0:C.signInWithEthereum)===null||h===void 0?void 0:h.resources};y=nA(re),w=await j.request({method:"personal_sign",params:[tA(y),R]})}try{const{data:S,error:k}=await it(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:y,signature:w},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:yr});if(k)throw k;return!S||!S.session||!S.user?{data:{user:null,session:null},error:new so}:(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),{data:Object.assign({},S),error:k})}catch(S){if(Xe(S))return{data:{user:null,session:null},error:S};throw S}}async signInWithSolana(t){var n,r,i,o,a,u,c,f,h,p,v,y;let w,S;if("message"in t)w=t.message,S=t.signature;else{const{chain:k,wallet:_,statement:C,options:j}=t;let I;if(Yn())if(typeof _=="object")I=_;else{const R=window;if("solana"in R&&typeof R.solana=="object"&&("signIn"in R.solana&&typeof R.solana.signIn=="function"||"signMessage"in R.solana&&typeof R.solana.signMessage=="function"))I=R.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(j!=null&&j.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");I=_}const O=new URL((n=j==null?void 0:j.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in I&&I.signIn){const R=await I.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},j==null?void 0:j.signInWithSolana),{version:"1",domain:O.host,uri:O.href}),C?{statement:C}:null));let U;if(Array.isArray(R)&&R[0]&&typeof R[0]=="object")U=R[0];else if(R&&typeof R=="object"&&"signedMessage"in R&&"signature"in R)U=R;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in U&&"signature"in U&&(typeof U.signedMessage=="string"||U.signedMessage instanceof Uint8Array)&&U.signature instanceof Uint8Array)w=typeof U.signedMessage=="string"?U.signedMessage:new TextDecoder().decode(U.signedMessage),S=U.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in I)||typeof I.signMessage!="function"||!("publicKey"in I)||typeof I!="object"||!I.publicKey||!("toBase58"in I.publicKey)||typeof I.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${O.host} wants you to sign in with your Solana account:`,I.publicKey.toBase58(),...C?["",C,""]:[""],"Version: 1",`URI: ${O.href}`,`Issued At: ${(i=(r=j==null?void 0:j.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=j==null?void 0:j.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${j.signInWithSolana.notBefore}`]:[],...!((a=j==null?void 0:j.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${j.signInWithSolana.expirationTime}`]:[],...!((u=j==null?void 0:j.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${j.signInWithSolana.chainId}`]:[],...!((c=j==null?void 0:j.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${j.signInWithSolana.nonce}`]:[],...!((f=j==null?void 0:j.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${j.signInWithSolana.requestId}`]:[],...!((p=(h=j==null?void 0:j.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||p===void 0)&&p.length?["Resources",...j.signInWithSolana.resources.map(U=>`- ${U}`)]:[]].join(`
`);const R=await I.signMessage(new TextEncoder().encode(w),"utf8");if(!R||!(R instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=R}}try{const{data:k,error:_}=await it(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:vs(S)},!((v=t.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:yr});if(_)throw _;return!k||!k.session||!k.user?{data:{user:null,session:null},error:new so}:(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),{data:Object.assign({},k),error:_})}catch(k){if(Xe(k))return{data:{user:null,session:null},error:k};throw k}}async _exchangeCodeForSession(t){const n=await ss(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:o,error:a}=await it(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:yr});if(await Ei(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new so}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:a})}catch(o){if(Xe(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(t){try{const{options:n,provider:r,token:i,access_token:o,nonce:a}=t,u=await it(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:yr}),{data:c,error:f}=u;return f?{data:{user:null,session:null},error:f}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new so}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:f})}catch(n){if(Xe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,i,o,a;try{if("email"in t){const{email:u,options:c}=t;let f=null,h=null;this.flowType==="pkce"&&([f,h]=await oo(this.storage,this.storageKey));const{error:p}=await it(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:f,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in t){const{phone:u,options:c}=t,{data:f,error:h}=await it(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:h}}throw new Mu("You must provide either an email or phone number.")}catch(u){if(Xe(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(t){var n,r;try{let i,o;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,o=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:u}=await it(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:yr});if(u)throw u;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,f=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(i){if(Xe(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var n,r,i;try{let o=null,a=null;return this.flowType==="pkce"&&([o,a]=await oo(this.storage,this.storageKey)),await it(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:a}),headers:this.headers,xform:qR})}catch(o){if(Xe(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Ci;const{error:i}=await it(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(Xe(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:o}=t,{error:a}=await it(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in t){const{phone:r,type:i,options:o}=t,{data:a,error:u}=await it(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:u}}throw new Mu("You must provide either an email or phone number and a type")}catch(n){if(Xe(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await ss(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<nh:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const a=await ss(this.userStorage,this.storageKey+"-user");a!=null&&a.user?t.user=a.user:t.user=sh()}if(this.storage.isServer&&t.user){let a=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,f,h)=>(!a&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,f,h))})}return{data:{session:t},error:null}}const{data:i,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await it(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Pi}):await this._useSession(async n=>{var r,i,o;const{data:a,error:u}=n;if(u)throw u;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ci}:await it(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:Pi})})}catch(n){if(Xe(n))return bR(n)&&(await this._removeSession(),await Ei(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:i,error:o}=r;if(o)throw o;if(!i.session)throw new Ci;const a=i.session;let u=null,c=null;this.flowType==="pkce"&&t.email!=null&&([u,c]=await oo(this.storage,this.storageKey));const{data:f,error:h}=await it(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:u,code_challenge_method:c}),jwt:a.access_token,xform:Pi});if(h)throw h;return a.user=f.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(Xe(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ci;const n=Date.now()/1e3;let r=n,i=!0,o=null;const{payload:a}=ih(t.access_token);if(a.exp&&(r=a.exp,i=r<=n),i){const{data:u,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!u)return{data:{user:null,session:null},error:null};o=u}else{const{data:u,error:c}=await this._getUser(t.access_token);if(c)throw c;o={access_token:t.access_token,refresh_token:t.refresh_token,user:u.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(n){if(Xe(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:a,error:u}=n;if(u)throw u;t=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Ci;const{data:i,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Xe(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!Yn())throw new Ou("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Ou(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Lx("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ou("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Lx("No code detected.");const{data:C,error:j}=await this._exchangeCodeForSession(t.code);if(j)throw j;const I=new URL(window.location.href);return I.searchParams.delete("code"),window.history.replaceState(window.history.state,"",I.toString()),{data:{session:C.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:o,refresh_token:a,expires_in:u,expires_at:c,token_type:f}=t;if(!o||!u||!a||!f)throw new Ou("No session defined in URL");const h=Math.round(Date.now()/1e3),p=parseInt(u);let v=h+p;c&&(v=parseInt(c));const y=v-h;y*1e3<=po&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${p}s`);const w=v-p;h-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,v,h):h-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,v,h);const{data:S,error:k}=await this._getUser(o);if(k)throw k;const _={provider_token:r,provider_refresh_token:i,access_token:o,expires_in:p,expires_at:v,refresh_token:a,token_type:f,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:_,redirectType:t.type},error:null}}catch(r){if(Xe(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await ss(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return{error:o};const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:u}=await this.admin.signOut(a,t);if(u&&!(xR(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return t!=="others"&&(await this._removeSession(),await Ei(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=NR(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,i;try{const{data:{session:o},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await oo(this.storage,this.storageKey,!0));try{return await it(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(Xe(o))return{data:null,error:o};throw o}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(Xe(n))return{data:null,error:n};throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:i}=await this._useSession(async o=>{var a,u,c,f,h;const{data:p,error:v}=o;if(v)throw v;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(u=t.options)===null||u===void 0?void 0:u.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await it(this.fetch,"GET",y,{headers:this.headers,jwt:(h=(f=p.session)===null||f===void 0?void 0:f.access_token)!==null&&h!==void 0?h:void 0})});if(i)throw i;return Yn()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Xe(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:o}}=n;if(i)throw i;const{options:a,provider:u,token:c,access_token:f,nonce:h}=t,p=await it(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o==null?void 0:o.access_token)!==null&&r!==void 0?r:void 0,body:{provider:u,id_token:c,access_token:f,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:yr}),{data:v,error:y}=p;return y?{data:{user:null,session:null},error:y}:!v||!v.session||!v.user?{data:{user:null,session:null},error:new so}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),{data:v,error:y})}catch(i){if(Xe(i))return{data:{user:null,session:null},error:i};throw i}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,i;const{data:o,error:a}=n;if(a)throw a;return await it(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Xe(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await RR(async i=>(i>0&&await PR(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await it(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:yr})),(i,o)=>{const a=200*Math.pow(2,i);return o&&rh(o)&&Date.now()+a-r<po})}catch(r){if(this._debug(n,"error",r),Xe(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Yn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await ss(this.storage,this.storageKey);if(i&&this.userStorage){let a=await ss(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await mo(this.userStorage,this.storageKey+"-user",a)),i.user=(t=a==null?void 0:a.user)!==null&&t!==void 0?t:sh()}else if(i&&!i.user&&!i.user){const a=await ss(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(i.user=a.user,await Ei(this.storage,this.storageKey+"-user"),await mo(this.storage,this.storageKey,i)):i.user=sh()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const o=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<nh;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${nh}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),rh(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:u}=await this._getUser(i.access_token);!u&&(a!=null&&a.user)?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Ci;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Wc;const{data:o,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!o.session)throw new Ci;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const u={data:o.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(o){if(this._debug(i,"error",o),Xe(o)){const a={data:null,error:o};return rh(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,r=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const o=[],a=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(t,n)}catch(c){o.push(c)}});if(await Promise.all(a),o.length>0){for(let u=0;u<o.length;u+=1)console.error(o[u]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await mo(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const o=Ux(i);await mo(this.storage,this.storageKey,o)}else{const i=Ux(n);await mo(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Ei(this.storage,this.storageKey),await Ei(this.storage,this.storageKey+"-code-verifier"),await Ei(this.storage,this.storageKey+"-user"),this.userStorage&&await Ei(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Yn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),po);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-t)/po);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${po}ms, refresh threshold is ${op} ticks`),i<=op&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof pk)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Yn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,a]=await oo(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(u.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);i.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;return o?{data:null,error:o}:await it(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Xe(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,i;const{data:o,error:a}=n;if(a)return{data:null,error:a};const u=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:f}=await it(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return f?{data:null,error:f}:(t.factorType==="totp"&&c.type==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(Xe(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?uA(t.webauthn.credential_response):cA(t.webauthn.credential_response)})}:{code:t.code}),{data:u,error:c}=await it(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:c})})}catch(n){if(Xe(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return{data:null,error:o};const a=await it(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:u}=a;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:aA(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:lA(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Xe(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const o of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])i.all.push(o),o.status==="verified"&&i[o.factor_type].push(o);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:i},error:o}=t;if(o)return{data:null,error:o};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=ih(i.access_token);let u=null;a.aal&&(u=a.aal);let c=u;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(p=>p.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const h=a.amr||[];return{data:{currentLevel:u,nextLevel:c,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(u=>u.kid===t);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(u=>u.kid===t),r&&this.jwks_cached_at+yR>i)return r;const{data:o,error:a}=await it(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,r=o.keys.find(u=>u.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:y,error:w}=await this.getSession();if(w||!y.session)return{data:null,error:w};r=y.session.access_token}const{header:i,payload:o,signature:a,raw:{header:u,payload:c}}=ih(r);n!=null&&n.allowExpired||FR(o.exp);const f=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!f){const{error:y}=await this.getUser(r);if(y)throw y;return{data:{claims:o,header:i,signature:a},error:null}}const h=BR(i.alg),p=await crypto.subtle.importKey("jwk",f,h,!0,["verify"]);if(!await crypto.subtle.verify(h,p,a,CR(`${u}.${c}`)))throw new up("Invalid JWT signature");return{data:{claims:o,header:i,signature:a},error:null}}catch(r){if(Xe(r))return{data:null,error:r};throw r}}}nl.nextInstanceID=0;const xA=nl;class bA extends xA{constructor(t){super(t)}}var wA=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function u(h){try{f(r.next(h))}catch(p){a(p)}}function c(h){try{f(r.throw(h))}catch(p){a(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};class kA{constructor(t,n,r){var i,o,a;this.supabaseUrl=t,this.supabaseKey=n;const u=fR(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const c=`sb-${u.hostname.split(".")[0]}-auth-token`,f={db:nR,realtime:iR,auth:Object.assign(Object.assign({},rR),{storageKey:c}),global:tR},h=dR(r??{},f);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=h.global.headers)!==null&&o!==void 0?o:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(p,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=h.auth)!==null&&a!==void 0?a:{},this.headers,h.global.fetch),this.fetch=lR(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new vP(new URL("rest/v1",u).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new XP(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new lP(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return wA(this,void 0,void 0,function*(){var t,n;if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:o,storageKey:a,flowType:u,lock:c,debug:f},h,p){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new bA({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),h),storageKey:a,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:o,flowType:u,lock:c,debug:f,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new OP(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const SA=(e,t,n)=>new kA(e,t,n);function EA(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}EA()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const _A="https://kjsdmygqhxaryvfmnhqr.supabase.co",CA="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imtqc2RteWdxaHhhcnl2Zm1uaHFyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAwMTAxMDEsImV4cCI6MjA3NTU4NjEwMX0.kXL7Dgum6CepvcrS8LVY1v_EHnpyUQOFcqndUQWPrkM",Yt=SA(_A,CA,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),Gx=e=>{let t;const n=new Set,r=(f,h)=>{const p=typeof f=="function"?f(t):f;if(!Object.is(p,t)){const v=t;t=h??(typeof p!="object"||p===null)?p:Object.assign({},t,p),n.forEach(y=>y(t,v))}},i=()=>t,u={setState:r,getState:i,getInitialState:()=>c,subscribe:f=>(n.add(f),()=>n.delete(f))},c=t=e(r,i,u);return u},jA=(e=>e?Gx(e):Gx),NA=e=>e;function TA(e,t=NA){const n=Ae.useSyncExternalStore(e.subscribe,Ae.useCallback(()=>t(e.getState()),[e,t]),Ae.useCallback(()=>t(e.getInitialState()),[e,t]));return Ae.useDebugValue(n),n}const Jx=e=>{const t=jA(e),n=r=>TA(t,r);return Object.assign(n,t),n},IA=(e=>e?Jx(e):Jx),PA="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Ut=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=PA[n[e]&63];return t};var Yu={exports:{}},RA=Yu.exports,Qx;function vk(){return Qx||(Qx=1,(function(e,t){(function(n,r){e.exports=r()})(RA,(function(){var n=1e3,r=6e4,i=36e5,o="millisecond",a="second",u="minute",c="hour",f="day",h="week",p="month",v="quarter",y="year",w="date",S="Invalid Date",k=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,_=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,C={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(H){var V=["th","st","nd","rd"],te=H%100;return"["+H+(V[(te-20)%10]||V[te]||V[0])+"]"}},j=function(H,V,te){var Z=String(H);return!Z||Z.length>=V?H:""+Array(V+1-Z.length).join(te)+H},I={s:j,z:function(H){var V=-H.utcOffset(),te=Math.abs(V),Z=Math.floor(te/60),B=te%60;return(V<=0?"+":"-")+j(Z,2,"0")+":"+j(B,2,"0")},m:function H(V,te){if(V.date()<te.date())return-H(te,V);var Z=12*(te.year()-V.year())+(te.month()-V.month()),B=V.clone().add(Z,p),$=te-B<0,N=V.clone().add(Z+($?-1:1),p);return+(-(Z+(te-B)/($?B-N:N-B))||0)},a:function(H){return H<0?Math.ceil(H)||0:Math.floor(H)},p:function(H){return{M:p,y,w:h,d:f,D:w,h:c,m:u,s:a,ms:o,Q:v}[H]||String(H||"").toLowerCase().replace(/s$/,"")},u:function(H){return H===void 0}},O="en",R={};R[O]=C;var U="$isDayjsObject",re=function(H){return H instanceof se||!(!H||!H[U])},z=function H(V,te,Z){var B;if(!V)return O;if(typeof V=="string"){var $=V.toLowerCase();R[$]&&(B=$),te&&(R[$]=te,B=$);var N=V.split("-");if(!B&&N.length>1)return H(N[0])}else{var F=V.name;R[F]=V,B=F}return!Z&&B&&(O=B),B||!Z&&O},M=function(H,V){if(re(H))return H.clone();var te=typeof V=="object"?V:{};return te.date=H,te.args=arguments,new se(te)},L=I;L.l=z,L.i=re,L.w=function(H,V){return M(H,{locale:V.$L,utc:V.$u,x:V.$x,$offset:V.$offset})};var se=(function(){function H(te){this.$L=z(te.locale,null,!0),this.parse(te),this.$x=this.$x||te.x||{},this[U]=!0}var V=H.prototype;return V.parse=function(te){this.$d=(function(Z){var B=Z.date,$=Z.utc;if(B===null)return new Date(NaN);if(L.u(B))return new Date;if(B instanceof Date)return new Date(B);if(typeof B=="string"&&!/Z$/i.test(B)){var N=B.match(k);if(N){var F=N[2]-1||0,ee=(N[7]||"0").substring(0,3);return $?new Date(Date.UTC(N[1],F,N[3]||1,N[4]||0,N[5]||0,N[6]||0,ee)):new Date(N[1],F,N[3]||1,N[4]||0,N[5]||0,N[6]||0,ee)}}return new Date(B)})(te),this.init()},V.init=function(){var te=this.$d;this.$y=te.getFullYear(),this.$M=te.getMonth(),this.$D=te.getDate(),this.$W=te.getDay(),this.$H=te.getHours(),this.$m=te.getMinutes(),this.$s=te.getSeconds(),this.$ms=te.getMilliseconds()},V.$utils=function(){return L},V.isValid=function(){return this.$d.toString()!==S},V.isSame=function(te,Z){var B=M(te);return this.startOf(Z)<=B&&B<=this.endOf(Z)},V.isAfter=function(te,Z){return M(te)<this.startOf(Z)},V.isBefore=function(te,Z){return this.endOf(Z)<M(te)},V.$g=function(te,Z,B){return L.u(te)?this[Z]:this.set(B,te)},V.unix=function(){return Math.floor(this.valueOf()/1e3)},V.valueOf=function(){return this.$d.getTime()},V.startOf=function(te,Z){var B=this,$=!!L.u(Z)||Z,N=L.p(te),F=function(Ne,Ie){var ie=L.w(B.$u?Date.UTC(B.$y,Ie,Ne):new Date(B.$y,Ie,Ne),B);return $?ie:ie.endOf(f)},ee=function(Ne,Ie){return L.w(B.toDate()[Ne].apply(B.toDate("s"),($?[0,0,0,0]:[23,59,59,999]).slice(Ie)),B)},A=this.$W,be=this.$M,he=this.$D,ge="set"+(this.$u?"UTC":"");switch(N){case y:return $?F(1,0):F(31,11);case p:return $?F(1,be):F(0,be+1);case h:var me=this.$locale().weekStart||0,je=(A<me?A+7:A)-me;return F($?he-je:he+(6-je),be);case f:case w:return ee(ge+"Hours",0);case c:return ee(ge+"Minutes",1);case u:return ee(ge+"Seconds",2);case a:return ee(ge+"Milliseconds",3);default:return this.clone()}},V.endOf=function(te){return this.startOf(te,!1)},V.$set=function(te,Z){var B,$=L.p(te),N="set"+(this.$u?"UTC":""),F=(B={},B[f]=N+"Date",B[w]=N+"Date",B[p]=N+"Month",B[y]=N+"FullYear",B[c]=N+"Hours",B[u]=N+"Minutes",B[a]=N+"Seconds",B[o]=N+"Milliseconds",B)[$],ee=$===f?this.$D+(Z-this.$W):Z;if($===p||$===y){var A=this.clone().set(w,1);A.$d[F](ee),A.init(),this.$d=A.set(w,Math.min(this.$D,A.daysInMonth())).$d}else F&&this.$d[F](ee);return this.init(),this},V.set=function(te,Z){return this.clone().$set(te,Z)},V.get=function(te){return this[L.p(te)]()},V.add=function(te,Z){var B,$=this;te=Number(te);var N=L.p(Z),F=function(be){var he=M($);return L.w(he.date(he.date()+Math.round(be*te)),$)};if(N===p)return this.set(p,this.$M+te);if(N===y)return this.set(y,this.$y+te);if(N===f)return F(1);if(N===h)return F(7);var ee=(B={},B[u]=r,B[c]=i,B[a]=n,B)[N]||1,A=this.$d.getTime()+te*ee;return L.w(A,this)},V.subtract=function(te,Z){return this.add(-1*te,Z)},V.format=function(te){var Z=this,B=this.$locale();if(!this.isValid())return B.invalidDate||S;var $=te||"YYYY-MM-DDTHH:mm:ssZ",N=L.z(this),F=this.$H,ee=this.$m,A=this.$M,be=B.weekdays,he=B.months,ge=B.meridiem,me=function(Ie,ie,Te,Ve){return Ie&&(Ie[ie]||Ie(Z,$))||Te[ie].slice(0,Ve)},je=function(Ie){return L.s(F%12||12,Ie,"0")},Ne=ge||function(Ie,ie,Te){var Ve=Ie<12?"AM":"PM";return Te?Ve.toLowerCase():Ve};return $.replace(_,(function(Ie,ie){return ie||(function(Te){switch(Te){case"YY":return String(Z.$y).slice(-2);case"YYYY":return L.s(Z.$y,4,"0");case"M":return A+1;case"MM":return L.s(A+1,2,"0");case"MMM":return me(B.monthsShort,A,he,3);case"MMMM":return me(he,A);case"D":return Z.$D;case"DD":return L.s(Z.$D,2,"0");case"d":return String(Z.$W);case"dd":return me(B.weekdaysMin,Z.$W,be,2);case"ddd":return me(B.weekdaysShort,Z.$W,be,3);case"dddd":return be[Z.$W];case"H":return String(F);case"HH":return L.s(F,2,"0");case"h":return je(1);case"hh":return je(2);case"a":return Ne(F,ee,!0);case"A":return Ne(F,ee,!1);case"m":return String(ee);case"mm":return L.s(ee,2,"0");case"s":return String(Z.$s);case"ss":return L.s(Z.$s,2,"0");case"SSS":return L.s(Z.$ms,3,"0");case"Z":return N}return null})(Ie)||N.replace(":","")}))},V.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},V.diff=function(te,Z,B){var $,N=this,F=L.p(Z),ee=M(te),A=(ee.utcOffset()-this.utcOffset())*r,be=this-ee,he=function(){return L.m(N,ee)};switch(F){case y:$=he()/12;break;case p:$=he();break;case v:$=he()/3;break;case h:$=(be-A)/6048e5;break;case f:$=(be-A)/864e5;break;case c:$=be/i;break;case u:$=be/r;break;case a:$=be/n;break;default:$=be}return B?$:L.a($)},V.daysInMonth=function(){return this.endOf(p).$D},V.$locale=function(){return R[this.$L]},V.locale=function(te,Z){if(!te)return this.$L;var B=this.clone(),$=z(te,Z,!0);return $&&(B.$L=$),B},V.clone=function(){return L.w(this.$d,this)},V.toDate=function(){return new Date(this.valueOf())},V.toJSON=function(){return this.isValid()?this.toISOString():null},V.toISOString=function(){return this.$d.toISOString()},V.toString=function(){return this.$d.toUTCString()},H})(),q=se.prototype;return M.prototype=q,[["$ms",o],["$s",a],["$m",u],["$H",c],["$W",f],["$M",p],["$y",y],["$D",w]].forEach((function(H){q[H[1]]=function(V){return this.$g(V,H[0],H[1])}})),M.extend=function(H,V){return H.$i||(H(V,se,M),H.$i=!0),M},M.locale=z,M.isDayjs=re,M.unix=function(H){return M(1e3*H)},M.en=R[O],M.Ls=R,M.p={},M}))})(Yu)),Yu.exports}var AA=vk();const He=Ao(AA);function ah(e){return e.trim().toLowerCase().normalize("NFKD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,"").replace(/-{2,}/g,"-")}const Eo=`
  id,
  name,
  subtitle,
  objective_id,
  parent_work_id,
  node_type,
  schedule_kind,
  schedule_number,
  ebook_ref,
  tags,
  order_hint,
  next_work_id,
  variant_of_work_id,
  description_markdown,
  estimated_minutes,
  notes,
  video_urls,
  visibility,
  owner_id,
  owner_email,
  created_at,
  updated_at,
  work_collaborators (
    id,
    email,
    role,
    user_id,
    created_at
  )
`,xk=e=>Array.from(new Set(e.map(t=>t.trim().toLowerCase()).filter(t=>t.length>0))),MA=e=>Array.isArray(e)?e.map(t=>typeof t=="string"?t.trim():"").filter(t=>t.length>0):[],am=e=>Array.isArray(e)?Array.from(new Set(e.map(t=>typeof t=="string"?t.trim().toLowerCase():"").filter(t=>t.length>0))):[],OA=e=>e==="day_of_year"||e==="day_of_month"||e==="day_of_week",DA=(e,t)=>{if(!OA(e))return;const n=typeof t=="number"?t:Number(t);if(Number.isFinite(n))return{kind:e,number:Math.trunc(n)}},LA=e=>{if(!e||typeof e!="object")return;const t=e,n=String(t.ebookId??"").trim(),r=String(t.indexUrl??"").trim(),i=String(t.mode??"").trim();if(!(!n||!r)&&!(i!=="daily_fixed"&&i!=="sequential"))return{ebookId:n,indexUrl:r,mode:i}},bk=e=>(e??[]).map(t=>({id:`${t.id}`,email:t.email.toLowerCase(),role:t.role,userId:t.user_id??void 0,createdAt:t.created_at})),lm=(e,t)=>{var u,c;const n=bk(e.work_collaborators),r=n.map(f=>f.email),i=((u=t==null?void 0:t.actorEmail)==null?void 0:u.toLowerCase())??"",o=t?e.owner_id===t.actorId:!1,a=o||r.includes(i);return{id:e.id,name:e.name,subtitle:e.subtitle??void 0,objectiveId:e.objective_id,parentWorkId:e.parent_work_id??null,nodeType:e.node_type??void 0,schedule:DA(e.schedule_kind,e.schedule_number),ebookRef:LA(e.ebook_ref),tags:am(e.tags),orderHint:typeof e.order_hint=="number"?e.order_hint:void 0,nextWorkId:e.next_work_id??null,variantOfWorkId:e.variant_of_work_id??null,descriptionMarkdown:e.description_markdown??"",estimatedMinutes:e.estimated_minutes??0,notes:e.notes??void 0,videoUrls:MA(e.video_urls),visibility:e.visibility??"private",ownerId:e.owner_id,ownerEmail:((c=e.owner_email)==null?void 0:c.toLowerCase())??"",collaborators:n,collaboratorEmails:r,createdAt:e.created_at,updatedAt:e.updated_at,canEdit:a,isOwner:o}};async function $A(e){const{data:t,error:n}=await Yt.from("works").select(Eo).order("name");if(n)throw console.error("No se pudieron cargar los trabajos compartidos",n),n;return t.map(r=>lm(r,e))}async function Xx(e,t){var _;const n=e.id??Ut(),r=xk(e.collaboratorEmails),i=t.actorEmail.trim().toLowerCase(),o=(_=e.nodeType)!=null&&_.trim()?e.nodeType.trim():null,a=e.scheduleKind??null,u=typeof e.scheduleNumber=="number"&&Number.isFinite(e.scheduleNumber)?Math.trunc(e.scheduleNumber):null,c=e.ebookRef??null,f=am(e.tags??[]),h=typeof e.orderHint=="number"&&Number.isFinite(e.orderHint)?e.orderHint:null,p=e.nextWorkId??null,v=e.variantOfWorkId??null,{data:y,error:w}=await Yt.from("works").insert({id:n,name:e.name,subtitle:e.subtitle??null,objective_id:e.objectiveId,parent_work_id:e.parentWorkId??null,node_type:o,schedule_kind:a,schedule_number:u,ebook_ref:c,tags:f,order_hint:h,next_work_id:p,variant_of_work_id:v,description_markdown:e.descriptionMarkdown,estimated_minutes:e.estimatedMinutes,notes:e.notes??null,video_urls:e.videoUrls,visibility:e.visibility,owner_id:t.actorId,owner_email:i,updated_at:new Date().toISOString()}).select(Eo).maybeSingle();if(w||!y)throw console.error("No se pudo crear el trabajo",w),w??new Error("Falta respuesta al crear trabajo");if(r.length>0){const C=r.map(I=>({work_id:y.id,email:I})),{error:j}=await Yt.from("work_collaborators").insert(C);if(j)throw console.error("No se pudieron guardar los colaboradores",j),j}const{data:S,error:k}=await Yt.from("works").select(Eo).eq("id",y.id).maybeSingle();if(k||!S)throw console.error("No se pudo refrescar el trabajo creado",k),k??new Error("No se pudo cargar el trabajo creado");return lm(S,t)}async function FA(e,t,n){const r={};t.name!==void 0&&(r.name=t.name),t.subtitle!==void 0&&(r.subtitle=t.subtitle),t.objectiveId!==void 0&&(r.objective_id=t.objectiveId),t.parentWorkId!==void 0&&(r.parent_work_id=t.parentWorkId),t.nodeType!==void 0&&(r.node_type=t.nodeType),t.scheduleKind!==void 0&&(r.schedule_kind=t.scheduleKind),t.scheduleNumber!==void 0&&(r.schedule_number=t.scheduleNumber),t.ebookRef!==void 0&&(r.ebook_ref=t.ebookRef),t.tags!==void 0&&(r.tags=am(t.tags)),t.orderHint!==void 0&&(r.order_hint=t.orderHint),t.nextWorkId!==void 0&&(r.next_work_id=t.nextWorkId),t.variantOfWorkId!==void 0&&(r.variant_of_work_id=t.variantOfWorkId),t.descriptionMarkdown!==void 0&&(r.description_markdown=t.descriptionMarkdown),t.estimatedMinutes!==void 0&&(r.estimated_minutes=t.estimatedMinutes),t.notes!==void 0&&(r.notes=t.notes),t.videoUrls!==void 0&&(r.video_urls=t.videoUrls),t.visibility!==void 0&&(r.visibility=t.visibility),r.updated_at=new Date().toISOString();let i=null;if(Object.keys(r).length>0){const{data:o,error:a}=await Yt.from("works").update(r).eq("id",e).select(Eo).maybeSingle();if(a||!o)throw console.error("No se pudo actualizar el trabajo",a),a??new Error("Falta respuesta al actualizar trabajo");i=o}else{const{data:o,error:a}=await Yt.from("works").select(Eo).eq("id",e).maybeSingle();if(a||!o)throw a??new Error("Trabajo no encontrado");i=o}if(t.collaboratorEmails){const o=xk(t.collaboratorEmails),a=bk(i.work_collaborators),u=a.map(v=>v.email),c=o.filter(v=>!u.includes(v)),f=a.filter(v=>!o.includes(v.email));if(c.length>0){const v=c.map(w=>({work_id:e,email:w})),{error:y}=await Yt.from("work_collaborators").insert(v);if(y)throw console.error("No se pudieron aadir los colaboradores",y),y}if(f.length>0){const v=f.map(w=>w.email),{error:y}=await Yt.from("work_collaborators").delete().eq("work_id",e).in("email",v);if(y)throw console.error("No se pudieron eliminar colaboradores",y),y}const{data:h,error:p}=await Yt.from("works").select(Eo).eq("id",e).maybeSingle();if(p||!h)throw p??new Error("Error al refrescar colaboradores");i=h}return lm(i,n)}async function BA(e){const{error:t}=await Yt.from("works").delete().eq("id",e);if(t)throw console.error("No se pudo eliminar el trabajo",t),t}const Du=new Intl.Collator("es",{numeric:!0,sensitivity:"base"});function cp(e){const t=(e??"").trim(),n=t.match(/^(\d+)\s*[\.)-]?\s*(.*)$/);if(!n)return{order:null,rest:t};const r=Number(n[1]);return Number.isFinite(r)?{order:Math.trunc(r),rest:(n[2]??"").trim()}:{order:null,rest:t}}function zA(e){return cp(e.name).order!==null}function um(e){const t=[...e],n=t.some(zA);return t.sort((r,i)=>{if(n){const u=cp(r.name),c=cp(i.name),f=u.order??Number.POSITIVE_INFINITY,h=c.order??Number.POSITIVE_INFINITY;if(f!==h)return f-h;const p=Du.compare(u.rest||r.name,c.rest||i.name);return p!==0?p:Du.compare(r.id,i.id)}const o=r.kind===i.kind?0:r.kind==="class"?-1:1;if(o!==0)return o;const a=Du.compare(r.name,i.name);return a!==0?a:Du.compare(r.id,i.id)}),t}const wt={objectives:"sport-planner-objetivos",works:"sport-planner-trabajos",sessions:"sport-planner-sesiones",assistants:"sport-planner-asistentes",plans:"sport-planner-plans",kungfuPrograms:"sport-planner-kungfu-programs",kungfuCadence:"sport-planner-kungfu-cadence",kungfuTodayPlan:"sport-planner-kungfu-today-plan",workTaxonomy:"sport-planner-work-taxonomy"},wk=typeof window<"u",xt=()=>new Date().toISOString(),us="18:30",ps="classes",Oi="personal-kungfu",ms=[{id:"default",name:"Kung Fu  activo",enabled:!0,include:[{byTags:["kungfu"]}],exclude:[]}],Ni={targetsDays:{work:7,technique:5,segment:8,form:10,drill:7},overrides:[]},fn={limitMode:"count",maxItems:12,minutesBudget:30,template:{totalMinutes:30,focusMinutes:18,rouletteMinutes:10,recapMinutes:2},defaultMinutesByNodeType:{work:3,technique:1.5,segment:6,form:15,drill:4,reading:5,link:2},focusSelectors:[],rouletteSelectors:[],groups:[{id:"formas",name:"Formas",enabled:!0,order:1,type:"work",limitMode:"minutes",minutesBudget:18,strategy:"overdue",hierarchyRule:"prefer_leaves",include:[{byNodeTypes:["segment","form"]}],exclude:[]},{id:"tecnicas",name:"Tcnicas",enabled:!0,order:2,type:"work",limitMode:"minutes",minutesBudget:10,strategy:"weighted",hierarchyRule:"allow_all",include:[{byNodeTypes:["technique"]},{byTags:["roulette"]}],exclude:[]},{id:"recap",name:"Recap",enabled:!0,order:99,type:"note",limitMode:"minutes",minutesBudget:2}]},Ri={nodeTypes:[{key:"form",label:"Form"},{key:"segment",label:"Segment"},{key:"application",label:"Application"},{key:"technique",label:"Technique"},{key:"drill",label:"Drill"},{key:"reading",label:"Reading"},{key:"ebook",label:"Ebook"},{key:"work",label:"Work"},{key:"link",label:"Link"},{key:"style",label:"Style"}],tags:[]},UA=e=>e==="class"||e==="personal",WA=(e,t)=>{if(!e||typeof e!="object")return t;const n=e,r=String(n.id??"").trim();if(!r)return t;const i=UA(n.kind)?n.kind:t.kind,o=String(n.name??"").trim()||t.name,a=typeof n.enabled=="boolean"?n.enabled:t.enabled,u=String(n.createdAt??"").trim()||t.createdAt,c=String(n.updatedAt??"").trim()||t.updatedAt;return{...t,id:r,kind:i,name:o,enabled:a,cadence:n.cadence??t.cadence,todayPlan:n.todayPlan??t.todayPlan,createdAt:u,updatedAt:c}},kk=(e,t,n)=>[{id:ps,name:"Clases",kind:"class",enabled:!0,createdAt:e,updatedAt:e},{id:Oi,name:"Personal Kung Fu",kind:"personal",enabled:!0,cadence:t,todayPlan:n,createdAt:e,updatedAt:e}],cs=(e,t,n,r)=>{const i=kk(r,t,n),a=(Array.isArray(e)?e:[]).map(f=>{const h=String((f==null?void 0:f.id)??"").trim(),p=i.find(v=>v.id===h)??{id:h||Ut(),name:"Plan",kind:"personal",enabled:!0,cadence:t,todayPlan:n,createdAt:r,updatedAt:r};return WA(f,p)}).filter(f=>f.id.length>0),u=new Map;a.forEach(f=>{u.set(f.id,f)}),i.forEach(f=>{u.has(f.id)||u.set(f.id,f)});const c=u.get(Oi);return c&&u.set(Oi,{...c,cadence:c.cadence??t,todayPlan:c.todayPlan??n}),um(Array.from(u.values()))},HA=e=>{const n=(Array.isArray(e)?e:[]).map(i=>{if(!i||typeof i!="object")return null;const o=i,a=String(o.key??"").trim().toLowerCase(),u=String(o.label??"").trim();return a?{key:a,label:u||a}:null}).filter(Boolean),r=new Map;return n.forEach(i=>{r.set(i.key,i)}),Ri.nodeTypes.forEach(i=>{r.has(i.key)||r.set(i.key,i)}),Array.from(r.values()).sort((i,o)=>i.label.localeCompare(o.label,"en",{sensitivity:"base"}))},VA=e=>{const n=(Array.isArray(e)?e:[]).map(i=>{if(typeof i=="string"){const u=i.trim().toLowerCase();return u?{name:u}:null}if(!i||typeof i!="object")return null;const a=String(i.name??"").trim().toLowerCase();return a?{name:a}:null}).filter(Boolean),r=new Map;return n.forEach(i=>r.set(i.name,i)),Array.from(r.values()).sort((i,o)=>i.name.localeCompare(o.name,"en",{sensitivity:"base"}))},qn=(e,t)=>{const n=(e&&typeof e=="object"?e:{})??{},r=HA(n.nodeTypes),i=VA(n.tags),o=new Map(r.map(u=>[u.key,u])),a=new Map(i.map(u=>[u.name,u]));return t.forEach(u=>{const c=(u.nodeType??"").trim().toLowerCase();c&&!o.has(c)&&o.set(c,{key:c,label:c}),(u.tags??[]).forEach(f=>{const h=String(f??"").trim().toLowerCase();h&&!a.has(h)&&a.set(h,{name:h})})}),{nodeTypes:Array.from(o.values()).sort((u,c)=>u.label.localeCompare(c.label,"en",{sensitivity:"base"})),tags:Array.from(a.values()).sort((u,c)=>u.name.localeCompare(c.name,"en",{sensitivity:"base"}))}},Zx=e=>Array.from(new Set((Array.isArray(e)?e:[]).map(t=>String(t??"").trim().toLowerCase()).filter(t=>t.length>0))),qA=e=>Array.from(new Set((Array.isArray(e)?e:[]).map(t=>String(t??"").trim()).filter(t=>t.length>0))),Sk=e=>e==="count"||e==="minutes"||e==="both",KA=e=>e==="work"||e==="note",YA=e=>e==="overdue"||e==="weighted",GA=e=>e==="allow_all"||e==="prefer_leaves",JA=e=>{const t={},n=Zx(e.byTags),r=Zx(e.byNodeTypes),i=qA(e.byWorkIds);return n.length>0&&(t.byTags=n),r.length>0&&(t.byNodeTypes=r),i.length>0&&(t.byWorkIds=i),t},Po=e=>(e??[]).map(JA).filter(t=>Object.keys(t).length>0),QA=e=>{if(!Array.isArray(e))return[];const t=e.map(n=>Number(n)).filter(n=>Number.isFinite(n)).map(n=>Math.round(n)).filter(n=>n>=0&&n<=6);return Array.from(new Set(t)).sort((n,r)=>n-r)},XA=e=>{const t={};return!e||typeof e!="object"?{...fn.defaultMinutesByNodeType}:(Object.entries(e).forEach(([n,r])=>{const i=n.trim().toLowerCase(),o=Number(r);i&&Number.isFinite(o)&&(t[i]=Math.max(.25,o))}),Object.keys(t).length>0?t:{...fn.defaultMinutesByNodeType})},ZA=(e,t)=>{const n=String(e.id??"").trim()||Ut(),r=KA(e.type)?e.type:"work",i=typeof e.enabled=="boolean"?e.enabled:!0,o=String(e.name??"").trim()||(r==="note"?"Recap":"Grupo"),a=Number.isFinite(Number(e.order))?Number(e.order):t,u=QA(e.daysOfWeek),c=Sk(e.limitMode)?e.limitMode:"minutes",f=Number(e.maxItems),h=Number.isFinite(f)&&Math.round(f)>0?Math.round(f):void 0,p=Number(e.minutesBudget),v=Number.isFinite(p)&&p>0?Math.max(0,p):void 0,y=YA(e.strategy)?e.strategy:"overdue",w=GA(e.hierarchyRule)?e.hierarchyRule:"allow_all",S=Po(e.include),k=Po(e.exclude);return{id:n,name:o,enabled:i,order:a,type:r,daysOfWeek:u,limitMode:c,maxItems:h,minutesBudget:v,strategy:y,hierarchyRule:w,include:S,exclude:k}},eM=e=>{var f,h,p;const t=Math.max(0,Number((f=e.template)==null?void 0:f.focusMinutes)||0),n=Math.max(0,Number((h=e.template)==null?void 0:h.rouletteMinutes)||0),r=Math.max(0,Number((p=e.template)==null?void 0:p.recapMinutes)||0),i=Po(e.focusSelectors),o=Po(e.rouletteSelectors),a=i.length>0?i:[{byNodeTypes:["segment","form"]}],u=o.length>0?o:[{byNodeTypes:["technique"]},{byTags:["roulette"]}],c=[{id:"formas",name:"Formas",enabled:!0,order:1,type:"work",limitMode:"minutes",minutesBudget:t>0?t:18,strategy:"overdue",hierarchyRule:"prefer_leaves",include:a,exclude:[]},{id:"tecnicas",name:"Tcnicas",enabled:!0,order:2,type:"work",limitMode:"minutes",minutesBudget:n>0?n:10,strategy:"weighted",hierarchyRule:"allow_all",include:u,exclude:[]}];return r>0&&c.push({id:"recap",name:"Recap",enabled:!0,order:99,type:"note",limitMode:"minutes",minutesBudget:r}),c},Gu=e=>{var w,S,k;const t=e??fn,n=Sk(t.limitMode)?t.limitMode:fn.limitMode,r=Math.max(1,Math.round(Number(t.maxItems)||fn.maxItems)),i=Math.max(1,Number(t.minutesBudget)||fn.minutesBudget),o=Math.max(0,Number((w=t.template)==null?void 0:w.focusMinutes)||fn.template.focusMinutes),a=Math.max(0,Number((S=t.template)==null?void 0:S.rouletteMinutes)||fn.template.rouletteMinutes),u=Math.max(0,Number((k=t.template)==null?void 0:k.recapMinutes)||fn.template.recapMinutes),c=Math.max(0,o+a+u),f=XA(t.defaultMinutesByNodeType),h=Po(t.focusSelectors),p=Po(t.rouletteSelectors),y=((t.groups??[]).length>0?t.groups??[]:eM(t)).map((_,C)=>ZA(_,C+1)).sort((_,C)=>_.order-C.order).map((_,C)=>({..._,order:C+1}));return{...t,limitMode:n,maxItems:r,minutesBudget:i,template:{totalMinutes:c,focusMinutes:o,rouletteMinutes:a,recapMinutes:u},defaultMinutesByNodeType:f,focusSelectors:h,rouletteSelectors:p,groups:y}},Dn=e=>{if(!e)return null;const t=e.trim();return t.length>0?t:null},Ju=e=>Array.from(new Set((e??[]).map(t=>(t??"").trim().toLowerCase()).filter(t=>t.length>0))),vr=e=>{if(!e)return;const t=e.trim();return t.length>0?t:void 0},Ek=e=>e==="day_of_year"||e==="day_of_month"||e==="day_of_week",_k=e=>{if(!e||typeof e!="object")return;const t=e,n=String(t.ebookId??"").trim(),r=String(t.indexUrl??"").trim(),i=String(t.mode??"").trim();if(!(!n||!r)&&!(i!=="daily_fixed"&&i!=="sequential"))return{ebookId:n,indexUrl:r,mode:i}},dp=e=>Array.from(new Set((e??[]).map(t=>(t??"").trim().toLowerCase()).filter(t=>t.length>0))),ji=e=>{var k,_,C;const t=xt(),n=Dn(e.parentWorkId??null),r=Dn(e.nextWorkId??null),i=Dn(e.variantOfWorkId??null),o=vr(e.nodeType??void 0),a=Ju(e.tags),u=Ek((k=e.schedule)==null?void 0:k.kind)?(_=e.schedule)==null?void 0:_.kind:void 0,c=(C=e.schedule)==null?void 0:C.number,f=typeof c=="number"&&Number.isFinite(c)?Math.trunc(c):void 0,h=u&&typeof f=="number"?{kind:u,number:f}:void 0,p=_k(e.ebookRef),v=typeof e.orderHint=="number"&&Number.isFinite(e.orderHint)?e.orderHint:void 0,y=(e.collaborators??[]).map((j,I)=>({id:j.id??`${e.id}-collab-${I}`,email:(j.email??"").trim().toLowerCase(),role:j.role??"editor",userId:j.userId??null,createdAt:j.createdAt??t})),w=dp([...e.collaboratorEmails??[],...y.map(j=>j.email)]),S=Array.isArray(e.videoUrls)?e.videoUrls.map(j=>typeof j=="string"?j.trim():"").filter(Boolean):[];return{id:e.id,name:e.name??"Trabajo sin nombre",subtitle:vr(e.subtitle),objectiveId:e.objectiveId??"",parentWorkId:n,nodeType:o,schedule:h,ebookRef:p,tags:a,orderHint:v,nextWorkId:r,variantOfWorkId:i,descriptionMarkdown:e.descriptionMarkdown??"",estimatedMinutes:e.estimatedMinutes??0,notes:vr(e.notes),videoUrls:S,createdAt:e.createdAt??t,updatedAt:e.updatedAt??t,visibility:e.visibility??"private",ownerId:e.ownerId??"local-owner",ownerEmail:(e.ownerEmail??"").trim().toLowerCase(),collaborators:y,collaboratorEmails:w,canEdit:e.canEdit??!0,isOwner:e.isOwner??!0}},tM=(e,t,n)=>{var o;if(!n)return!1;if(n===t)return!0;const r=new Set;let i=n;for(;i;){if(i===t)return!0;if(r.has(i))break;r.add(i),i=((o=e.find(u=>u.id===i))==null?void 0:o.parentWorkId)??null}return!1},an=(e,t)=>{if(!wk)return t;try{const n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(n){return console.warn(`No se pudo cargar ${e} desde localStorage`,n),t}},Ck=e=>e==="present"||e==="absent"||e==="pending",jk=e=>e==="present"||e==="absent",fp=e=>(e??[]).map(t=>{const n=Ck(t.status)?t.status:"pending",r=jk(t.actualStatus)?t.actualStatus:void 0;return{assistantId:t.assistantId,status:n,actualStatus:r,notes:t.notes,actualNotes:t.actualNotes}}),nM=e=>{if(!e||typeof e!="object")return!1;const t=e,n=String(t.name??""),r=typeof t.code=="number"?t.code:Number(t.code);return n==="QuotaExceededError"||r===22||r===1014},rM=e=>e.map(t=>({id:t.id,name:t.name,subtitle:t.subtitle,objectiveId:t.objectiveId,parentWorkId:t.parentWorkId??null,descriptionMarkdown:"",estimatedMinutes:t.estimatedMinutes??0,notes:void 0,videoUrls:[],nodeType:t.nodeType,schedule:t.schedule,tags:t.tags??[],orderHint:t.orderHint,nextWorkId:t.nextWorkId??null,variantOfWorkId:t.variantOfWorkId??null,createdAt:t.createdAt,updatedAt:t.updatedAt,visibility:t.visibility??"private",ownerId:t.ownerId,ownerEmail:t.ownerEmail,collaborators:[],collaboratorEmails:[],canEdit:t.canEdit,isOwner:t.isOwner})),ut=e=>{if(!wk)return;const t={objectives:an(wt.objectives,[]),works:an(wt.works,[]),sessions:an(wt.sessions,[]),assistants:an(wt.assistants,[]),plans:an(wt.plans,[]),kungfuPrograms:an(wt.kungfuPrograms,ms),kungfuCadence:an(wt.kungfuCadence,Ni),kungfuTodayPlan:an(wt.kungfuTodayPlan,fn),workTaxonomy:an(wt.workTaxonomy,Ri)},n=hp({...t,...e}),r=(i,o)=>{try{return window.localStorage.setItem(i,JSON.stringify(o)),!0}catch(a){if(!nM(a))return console.warn(`No se pudo persistir ${i} en localStorage`,a),!1;if(i===wt.works)try{const u=rM(n.works);return window.localStorage.setItem(i,JSON.stringify(u)),console.warn("localStorage quota alcanzada: guardando catlogo en modo reducido (sin markdown)."),!0}catch(u){return console.warn("localStorage quota alcanzada: no se pudo persistir el catlogo.",u),!1}return console.warn(`localStorage quota alcanzada: omitiendo persistencia de ${i}.`),!1}};r(wt.objectives,n.objectives),r(wt.works,n.works),r(wt.sessions,n.sessions),r(wt.assistants,n.assistants),r(wt.plans,n.plans),r(wt.kungfuPrograms,n.kungfuPrograms),r(wt.kungfuCadence,n.kungfuCadence),r(wt.kungfuTodayPlan,n.kungfuTodayPlan),r(wt.workTaxonomy,n.workTaxonomy)},hp=e=>{const t=xt(),n=(e.works??[]).map(u=>{const c=u.parent_work_id;return ji({...u,id:u.id,parentWorkId:Dn(u.parentWorkId??c??null)})}),r=qn(e.workTaxonomy??Ri,n),i=e.kungfuCadence??Ni,o=Gu(e.kungfuTodayPlan??fn),a=cs(e.plans,i,o,t);return{objectives:e.objectives??[],works:n,sessions:(e.sessions??[]).map(u=>({...u,planId:(u.planId??"").trim()||((u.kind??"class")==="personal"?Oi:ps),kind:u.kind??"class",startTime:u.startTime??us,workItems:(u.workItems??[]).map(c=>({...c,focusLabel:c.focusLabel,completed:c.completed??!1})),attendance:fp(u.attendance)})),assistants:e.assistants??[],plans:a,kungfuPrograms:e.kungfuPrograms??ms,kungfuCadence:i,kungfuTodayPlan:o,workTaxonomy:r}},Ce=IA((e,t)=>({ready:!1,objectives:[],works:[],worksLoading:!1,sessions:[],assistants:[],plans:kk(xt(),Ni,fn),kungfuPrograms:ms,kungfuCadence:Ni,kungfuTodayPlan:fn,workTaxonomy:Ri,hydrate:()=>{if(t().ready)return;const n=an(wt.objectives,[]),r=an(wt.works,[]).map(w=>{const S=w.parent_work_id;return ji({...w,id:w.id,parentWorkId:Dn(w.parentWorkId??S??null)})}),i=an(wt.workTaxonomy,Ri),o=qn(i,r),a=an(wt.sessions,[]).map(w=>({...w,planId:(w.planId??"").trim()||((w.kind??"class")==="personal"?Oi:ps),kind:w.kind??"class",startTime:w.startTime??us,workItems:(w.workItems??[]).map(S=>({...S,focusLabel:S.focusLabel,completed:S.completed??!1})),attendance:fp(w.attendance)})),u=an(wt.assistants,[]),c=an(wt.kungfuPrograms,ms),f=an(wt.kungfuCadence,Ni),h=an(wt.kungfuTodayPlan,fn),p=Gu(h),v=an(wt.plans,[]),y=cs(v,f,p,xt());e({objectives:n,works:r,sessions:a,assistants:u,plans:y,kungfuPrograms:c,kungfuCadence:f,kungfuTodayPlan:p,workTaxonomy:o,ready:!0})},setCollections:n=>{e(r=>{const i=hp({objectives:n.objectives??r.objectives,works:n.works??r.works,sessions:n.sessions??r.sessions,assistants:n.assistants??r.assistants,plans:n.plans??r.plans,kungfuPrograms:n.kungfuPrograms??r.kungfuPrograms,kungfuCadence:n.kungfuCadence??r.kungfuCadence,kungfuTodayPlan:n.kungfuTodayPlan??r.kungfuTodayPlan,workTaxonomy:n.workTaxonomy??r.workTaxonomy}),o={...r,...i,ready:!0};return ut(i),o})},setWorks:n=>{const r=n.map(i=>ji(i));e(i=>{const o=qn(i.workTaxonomy,r),a={...i,works:r,workTaxonomy:o};return ut({works:r}),a})},loadWorks:async n=>{e({worksLoading:!0});try{const i=(await $A(n)).map(p=>ji(p)),o=t().works,a=new Set(i.map(p=>p.id)),u=o.filter(p=>!a.has(p.id)&&(!p.ownerId||p.ownerId==="local-owner"||p.ownerId===n.actorId)),c=[];for(const p of u)try{const v=await Xx({id:p.id,name:p.name,subtitle:p.subtitle,objectiveId:p.objectiveId,parentWorkId:p.parentWorkId??null,nodeType:p.nodeType,tags:p.tags,orderHint:p.orderHint,nextWorkId:p.nextWorkId??null,variantOfWorkId:p.variantOfWorkId??null,descriptionMarkdown:p.descriptionMarkdown,estimatedMinutes:p.estimatedMinutes,notes:p.notes,videoUrls:p.videoUrls,visibility:p.visibility??"private",collaboratorEmails:p.collaboratorEmails??[]},n),y=ji(v);c.push(y),a.add(y.id)}catch(v){console.error(`No se pudo migrar el trabajo legacy ${p.id}`,v)}const f=[...i];c.forEach(p=>{if(!a.has(p.id))a.add(p.id),f.push(p);else{const v=f.findIndex(y=>y.id===p.id);v>=0?f[v]=p:f.push(p)}});const h=f.map(p=>ji(p)).sort((p,v)=>p.name.localeCompare(v.name,"es",{sensitivity:"base"}));e(p=>{const v=qn(p.workTaxonomy,h),y={...p,works:h,workTaxonomy:v};return ut({works:h}),y})}finally{e({worksLoading:!1})}},reset:()=>{e(n=>{const r=hp({objectives:[],works:[],sessions:[],assistants:[],kungfuPrograms:ms,kungfuCadence:Ni,kungfuTodayPlan:fn,workTaxonomy:Ri}),i={...n,...r,ready:!0,worksLoading:!1};return ut(i),i})},setKungfuPrograms:n=>{const r=Array.isArray(n)?n:ms;e(i=>{const o={...i,kungfuPrograms:r};return ut(o),o})},setKungfuCadence:n=>{const r=n??Ni;e(i=>{const o={...i,kungfuCadence:r};return ut(o),o})},setKungfuTodayPlan:n=>{const r=Gu(n??fn);e(i=>{const o={...i,kungfuTodayPlan:r};return ut(o),o})},setWorkTaxonomy:n=>{e(r=>{const i=qn(n??Ri,r.works),o={...r,workTaxonomy:i};return ut(o),o})},addPlan:({name:n,kind:r})=>{const i=xt(),o={id:Ut(),name:n.trim()||(r==="class"?"Clases":"Personal"),kind:r,enabled:!0,cadence:r==="personal"?t().kungfuCadence:void 0,todayPlan:r==="personal"?t().kungfuTodayPlan:void 0,createdAt:i,updatedAt:i};return e(a=>{const u=cs([...a.plans,o],a.kungfuCadence,a.kungfuTodayPlan,i),c={...a,plans:u};return ut(c),c}),o},updatePlan:(n,r)=>{const i=xt();e(o=>{const a=cs(o.plans.map(c=>c.id===n?{...c,...r,updatedAt:i}:c),o.kungfuCadence,o.kungfuTodayPlan,i),u={...o,plans:a};return ut(u),u})},duplicatePlan:n=>{const r=t().plans.find(a=>a.id===n);if(!r)return;const i=xt(),o={...r,id:Ut(),name:`${r.name} (copia)`,createdAt:i,updatedAt:i};return e(a=>{const u=cs([...a.plans,o],a.kungfuCadence,a.kungfuTodayPlan,i),c={...a,plans:u};return ut(c),c}),o},deletePlan:n=>{const r=t();return n===ps||n===Oi||r.sessions.some(o=>(o.planId??"")===n)?!1:(e(o=>{const a=xt(),u=cs(o.plans.filter(f=>f.id!==n),o.kungfuCadence,o.kungfuTodayPlan,a),c={...o,plans:u};return ut(c),c}),!0)},upsertNodeType:n=>{const r=ah(n);if(!r)return null;const i=n.trim()||r;return e(o=>{const a=o.workTaxonomy.nodeTypes??[],u=a.some(h=>h.key===r)?a.map(h=>h.key===r?{...h,label:i}:h):[...a,{key:r,label:i}],c=qn({...o.workTaxonomy,nodeTypes:u},o.works),f={...o,workTaxonomy:c};return ut(f),f}),r},removeNodeType:n=>{const r=(n??"").trim().toLowerCase();return!r||t().works.some(o=>(o.nodeType??"").trim().toLowerCase()===r)?!1:(e(o=>{const a=(o.workTaxonomy.nodeTypes??[]).filter(f=>f.key!==r),u=qn({...o.workTaxonomy,nodeTypes:a},o.works),c={...o,workTaxonomy:u};return ut(c),c}),!0)},upsertTag:n=>{const r=ah(n);return r?(e(i=>{const o=i.workTaxonomy.tags??[],a=o.some(f=>f.name===r)?o:[...o,{name:r}],u=qn({...i.workTaxonomy,tags:a},i.works),c={...i,workTaxonomy:u};return ut(c),c}),r):null},removeTag:n=>{const r=ah(n??"");return!r||t().works.some(o=>(o.tags??[]).includes(r))?!1:(e(o=>{const a=(o.workTaxonomy.tags??[]).filter(f=>f.name!==r),u=qn({...o.workTaxonomy,tags:a},o.works),c={...o,workTaxonomy:u};return ut(c),c}),!0)},addObjective:n=>{const r={id:Ut(),name:n.name,colorHex:n.colorHex,descriptionMarkdown:n.descriptionMarkdown,createdAt:xt(),updatedAt:xt()};return e(i=>{const o={objectives:[...i.objectives,r]},a={...i,...o};return ut(a),a}),r},updateObjective:(n,r)=>{e(i=>{const o=i.objectives.map(u=>u.id===n?{...u,...r,updatedAt:xt()}:u),a={...i,objectives:o};return ut(a),a})},deleteObjective:n=>t().works.some(i=>i.objectiveId===n)?!1:(e(i=>{const o=i.objectives.filter(u=>u.id!==n),a={...i,objectives:o};return ut(a),a}),!0),addWork:async(n,r)=>{const i=t(),o=Dn(n.parentWorkId),a=o&&i.works.some(w=>w.id===o)?o:null,u=Ek(n.scheduleKind)?n.scheduleKind:void 0,c=n.scheduleNumber,f=typeof c=="number"&&Number.isFinite(c)?Math.trunc(c):void 0,h=_k(n.ebookRef),p={name:n.name,subtitle:vr(n.subtitle),objectiveId:n.objectiveId,parentWorkId:a,nodeType:vr(n.nodeType)??void 0,scheduleKind:u,scheduleNumber:u?f:void 0,ebookRef:h,tags:Ju(n.tags),orderHint:typeof n.orderHint=="number"&&Number.isFinite(n.orderHint)?n.orderHint:void 0,nextWorkId:Dn(n.nextWorkId??null),variantOfWorkId:Dn(n.variantOfWorkId??null),descriptionMarkdown:n.descriptionMarkdown,estimatedMinutes:n.estimatedMinutes,notes:vr(n.notes),videoUrls:(n.videoUrls??[]).map(w=>w.trim()).filter(w=>w.length>0),visibility:n.visibility??"private",collaboratorEmails:dp(n.collaboratorEmails??[])},v=await Xx(p,r),y=ji(v);return e(w=>{const S=[...w.works.filter(_=>_.id!==y.id),y],k=qn(w.workTaxonomy,S);return ut({works:S,workTaxonomy:k}),{...w,works:S,workTaxonomy:k}}),y},updateWork:async(n,r,i)=>{const o=t(),a=o.works.find(p=>p.id===n);if(!a)throw new Error("Trabajo no encontrado");let u=a.parentWorkId??null;if(r.parentWorkId!==void 0){const p=Dn(r.parentWorkId);p&&(!o.works.some(v=>v.id===p)||tM(o.works,n,p))?u=null:u=p}const c={...r,subtitle:r.subtitle!==void 0?vr(r.subtitle)??null:void 0,parentWorkId:u,nodeType:r.nodeType!==void 0?vr(r.nodeType??void 0)??null:void 0,tags:r.tags?Ju(r.tags):void 0,orderHint:r.orderHint!==void 0?typeof r.orderHint=="number"&&Number.isFinite(r.orderHint)?r.orderHint:null:void 0,nextWorkId:r.nextWorkId!==void 0?Dn(r.nextWorkId??null):void 0,variantOfWorkId:r.variantOfWorkId!==void 0?Dn(r.variantOfWorkId??null):void 0,notes:r.notes!==void 0?vr(r.notes)??null:void 0,videoUrls:r.videoUrls?r.videoUrls.map(p=>p.trim()).filter(p=>p.length>0):void 0,collaboratorEmails:r.collaboratorEmails?dp(r.collaboratorEmails):void 0},f=await FA(n,c,i),h=ji(f);return e(p=>{const v=p.works.map(w=>w.id===h.id?h:w),y=qn(p.workTaxonomy,v);return ut({works:v,workTaxonomy:y}),{...p,works:v,workTaxonomy:y}}),h},deleteWork:async(n,r)=>t().sessions.some(a=>a.workItems.some(u=>u.workId===n))||t().works.some(a=>a.parentWorkId===n)?!1:(await BA(n),e(a=>{const u=a.works.filter(f=>f.id!==n),c=qn(a.workTaxonomy,u);return ut({works:u,workTaxonomy:c}),{...a,works:u,workTaxonomy:c}}),!0),addSession:n=>{var o;const r=(n.planId??"").trim()||((n.kind??"class")==="personal"?Oi:ps),i={id:Ut(),planId:r,date:n.date,kind:n.kind??((o=t().plans.find(a=>a.id===r))==null?void 0:o.kind)??"class",title:n.title,description:n.description,notes:n.notes,notesByGroupId:n.notesByGroupId,workItems:[],attendance:[],startTime:n.startTime??us,createdAt:xt(),updatedAt:xt()};return e(a=>{const u=[...a.sessions,i],c={...a,sessions:u};return ut(c),c}),i},duplicateSession:(n,r)=>{const i=t().sessions.find(u=>u.id===n);if(!i)return;const o=xt(),a={...i,id:Ut(),date:r,startTime:i.startTime??us,createdAt:o,updatedAt:o,title:`${i.title} (copia)`};return a.workItems=i.workItems.slice().sort((u,c)=>u.order-c.order).map((u,c)=>({...u,id:Ut(),order:c,completed:!1})),a.attendance=i.attendance.map(u=>({assistantId:u.assistantId,status:"pending",notes:u.notes,actualStatus:void 0,actualNotes:void 0})),e(u=>{const c=[...u.sessions,a],f={...u,sessions:c};return ut(f),f}),a},updateSession:(n,r)=>{e(i=>{const o=i.sessions.map(u=>u.id===n?{...u,...r,updatedAt:xt()}:u),a={...i,sessions:o};return ut(a),a})},deleteSession:n=>{e(r=>{const i=r.sessions.filter(a=>a.id!==n),o={...r,sessions:i};return ut(o),o})},updateSessionWorkItems:(n,r)=>{e(i=>{const o=i.sessions.map(u=>u.id===n?{...u,workItems:r.map((c,f)=>({...c,order:f})),updatedAt:xt()}:u),a={...i,sessions:o};return ut(a),a})},addWorkToSession:(n,r)=>{const i=t().sessions.find(u=>u.id===n);if(!i)return;const o={id:Ut(),workId:r.workId,customDescriptionMarkdown:r.customDescriptionMarkdown,customDurationMinutes:r.customDurationMinutes,notes:r.notes,focusLabel:r.focusLabel,completed:!1,order:i.workItems.length},a={...i,workItems:[...i.workItems,o],updatedAt:xt()};return e(u=>{const c=u.sessions.map(h=>h.id===n?a:h),f={...u,sessions:c};return ut(f),f}),o},duplicateSessionWork:(n,r)=>{let i,o=!1;return e(a=>{const u=a.sessions.map(f=>{if(f.id!==n)return f;const h=f.workItems.findIndex(S=>S.id===r);if(h===-1)return f;o=!0;const v={...f.workItems[h],id:Ut(),completed:!1},y=[...f.workItems];y.splice(h+1,0,v);const w=y.map((S,k)=>{const _={...S,order:k};return S.id===v.id&&(i=_),_});return{...f,workItems:w,updatedAt:xt()}});if(!o)return a;const c={...a,sessions:u};return ut(c),c}),i},removeWorkFromSession:(n,r)=>{e(i=>{const o=i.sessions.map(u=>{if(u.id!==n)return u;const c=u.workItems.filter(f=>f.id!==r).map((f,h)=>({...f,order:h}));return{...u,workItems:c,updatedAt:xt()}}),a={...i,sessions:o};return ut(a),a})},toggleSessionWorkCompletion:(n,r,i)=>{e(o=>{const a=o.sessions.map(c=>c.id!==n?c:{...c,workItems:c.workItems.map(f=>f.id===r?{...f,completed:i}:f),updatedAt:xt()}),u={...o,sessions:a};return ut(u),u})},reorderSessionWork:(n,r,i)=>{e(o=>{const a=o.sessions.map(c=>{if(c.id!==n)return c;const f=[...c.workItems],[h]=f.splice(r,1);return f.splice(i,0,h),{...c,workItems:f.map((p,v)=>({...p,order:v})),updatedAt:xt()}}),u={...o,sessions:a};return ut(u),u})},updateSessionWorkDetails:(n,r,i)=>{e(o=>{const a=o.sessions.map(c=>c.id!==n?c:{...c,workItems:c.workItems.map(f=>f.id===r?{...f,...i}:f),updatedAt:xt()}),u={...o,sessions:a};return ut(u),u})},replaceSessionWork:(n,r,i)=>{t().works.some(o=>o.id===i)&&e(o=>{const a=o.sessions.map(c=>{if(c.id!==n)return c;const f=c.workItems.map(h=>h.id!==r?h:{...h,workId:i,customDescriptionMarkdown:void 0,customDurationMinutes:void 0,notes:void 0,focusLabel:void 0,completed:!1});return{...c,workItems:f,updatedAt:xt()}}),u={...o,sessions:a};return ut(u),u})},setAttendanceActualStatus:(n,r,i,o)=>{e(a=>{const u=a.sessions.map(f=>{if(f.id!==n)return f;const h=f.attendance.find(v=>v.assistantId===r);let p;if(h)p=f.attendance.map(v=>{if(v.assistantId!==r)return v;const y={...v,actualStatus:i};return typeof o<"u"&&(y.actualNotes=o),y});else{const v={assistantId:r,status:"pending",actualStatus:i};typeof o<"u"&&(v.actualNotes=o),p=[...f.attendance,v]}return{...f,attendance:p,updatedAt:xt()}}),c={...a,sessions:u};return ut(c),c})},setAttendanceStatus:(n,r,i,o)=>{e(a=>{const u=a.sessions.map(f=>{if(f.id!==n)return f;const h=f.attendance.find(v=>v.assistantId===r);let p;return h?p=f.attendance.map(v=>v.assistantId===r?{...v,status:i,notes:o}:v):p=[...f.attendance,{assistantId:r,status:i,notes:o}],{...f,attendance:p,updatedAt:xt()}}),c={...a,sessions:u};return ut(c),c})},addAssistant:n=>{const r={id:Ut(),name:n.name,notes:n.notes,active:n.active??!0,createdAt:xt(),updatedAt:xt()};return e(i=>{const o=[...i.assistants,r],a={...i,assistants:o};return ut(a),a}),r},updateAssistant:(n,r)=>{e(i=>{const o=i.assistants.map(u=>u.id===n?{...u,...r,updatedAt:xt()}:u),a={...i,assistants:o};return ut(a),a})},deleteAssistant:n=>{e(r=>{const i=r.assistants.filter(u=>u.id!==n),o=r.sessions.map(u=>({...u,attendance:u.attendance.filter(c=>c.assistantId!==n)})),a={...r,assistants:i,sessions:o};return ut(a),a})},importBackup:n=>{if((n.version??1)!==1)throw new Error("Versin de backup no soportada");const i=xt(),o=(n.objetivos??[]).map(C=>({...C,createdAt:C.createdAt??i,updatedAt:C.updatedAt??i})),a=(n.trabajos??[]).map(C=>{const j=C.parent_work_id,I=C.node_type,O=C.tags,R=C.order_hint,U=C.next_work_id,re=C.variant_of_work_id;return{...C,subtitle:vr(C.subtitle),parentWorkId:Dn(C.parentWorkId??j??null),nodeType:vr(C.nodeType??I??void 0),tags:Ju(Array.isArray(C.tags)?C.tags:Array.isArray(O)?O:[]),orderHint:typeof C.orderHint=="number"?C.orderHint:typeof R=="number"?R:void 0,nextWorkId:Dn(C.nextWorkId??U??null),variantOfWorkId:Dn(C.variantOfWorkId??re??null),createdAt:C.createdAt??i,updatedAt:C.updatedAt??i,videoUrls:C.videoUrls??[]}}),u=(n.asistentes??[]).map(C=>({...C,createdAt:C.createdAt??i,updatedAt:C.updatedAt??i,active:C.active??!0})),c=n.kungfuPrograms??ms,f=n.kungfuCadence??Ni,h=n.kungfuTodayPlan??fn,p=qn(n.workTaxonomy??Ri,a),v=cs(n.plans,f,Gu(h),i),y=new Map;(n.sesiones??[]).forEach(C=>{const j=C.id??Ut(),I=C.notesByGroupId??void 0,O={id:j,planId:(C.planId??"").trim()||((C.kind??"class")==="personal"?Oi:ps),date:C.date??He().format("YYYY-MM-DD"),kind:C.kind??"class",title:C.title??"Sesin importada",description:C.description,notes:C.notes,notesByGroupId:I??void 0,workItems:(C.workItems??[]).map((R,U)=>({id:R.id??Ut(),workId:R.workId,order:R.order??U,customDescriptionMarkdown:R.customDescriptionMarkdown,customDurationMinutes:R.customDurationMinutes,notes:R.notes,focusLabel:R.focusLabel,completed:R.completed??!1,result:R.result,effort:R.effort})),attendance:fp(C.attendance),startTime:C.startTime??us,createdAt:C.createdAt??i,updatedAt:C.updatedAt??i};O.workItems=O.workItems.sort((R,U)=>R.order-U.order).map((R,U)=>({...R,order:U})),y.set(j,O)}),(n.sesiones_trabajos??[]).forEach(C=>{const j=C.session_id;if(!j)return;y.has(j)||y.set(j,{id:j,planId:ps,date:C.fecha?He(C.fecha).format("YYYY-MM-DD"):He().format("YYYY-MM-DD"),kind:"class",title:C.titulo??"Sesin importada",description:C.descripcion,notes:C.notasSesion??C.notas,workItems:[],attendance:[],startTime:us,createdAt:i,updatedAt:i});const I=y.get(j);I.workItems.push({id:C.id??Ut(),workId:C.trabajo_id,order:C.orden??I.workItems.length,customDescriptionMarkdown:C.descripcionPersonalizada,customDurationMinutes:C.duracionPersonalizada,notes:C.notas,focusLabel:C.focusLabel??C.foco,completed:C.completed??!1,result:C.result??C.resultado,effort:C.effort??C.esfuerzo})}),y.forEach(C=>{C.workItems=C.workItems.sort((j,I)=>j.order-I.order).map((j,I)=>({...j,order:I})),C.startTime=C.startTime??us});const w=new Map,S=C=>Ck(C)?C:void 0,k=C=>jk(C)?C:void 0;(n.sesiones_asistencias??[]).forEach(C=>{const j=C.session_id;if(!j)return;const I=C.assistantId??C.asistente_id;if(!I)return;const O=S(C.status??C.estado)??"pending",R=k(C.actualStatus??C.estado_real),U={assistantId:I,status:O,notes:C.notes??C.notas,actualStatus:R,actualNotes:C.actualNotes??C.notas_reales},re=w.get(j)??[];re.push(U),w.set(j,re)}),w.forEach((C,j)=>{const I=y.get(j);I&&(I.attendance=C)});const _=Array.from(y.values());e({objectives:o,works:a,sessions:_,assistants:u,plans:v,kungfuPrograms:c,kungfuCadence:f,kungfuTodayPlan:h,workTaxonomy:p,ready:!0}),ut({objectives:o,works:a,sessions:_,assistants:u,plans:v,kungfuPrograms:c,kungfuCadence:f,kungfuTodayPlan:h,workTaxonomy:p})},exportBackup:()=>{const n=t(),r=n.sessions.flatMap(u=>u.workItems.map(c=>({id:c.id,session_id:u.id,trabajo_id:c.workId,orden:c.order,descripcionPersonalizada:c.customDescriptionMarkdown,duracionPersonalizada:c.customDurationMinutes,notas:c.notes,foco:c.focusLabel,focusLabel:c.focusLabel,completed:c.completed??!1,result:c.result,effort:c.effort}))),i=n.sessions.flatMap(u=>u.attendance.map(c=>({session_id:u.id,assistantId:c.assistantId,estado:c.status,notas:c.notes,...c.actualStatus?{actualStatus:c.actualStatus,estado_real:c.actualStatus}:{},...c.actualNotes?{actualNotes:c.actualNotes,notas_reales:c.actualNotes}:{}}))),o=n.sessions.map(u=>({id:u.id,planId:u.planId,date:u.date,kind:u.kind,title:u.title,description:u.description,notes:u.notes,notesByGroupId:u.notesByGroupId,startTime:u.startTime,createdAt:u.createdAt,updatedAt:u.updatedAt}));return{version:1,usuarios:[],objetivos:n.objectives,trabajos:n.works,sesiones:o,sesiones_trabajos:r,asistentes:n.assistants,sesiones_asistencias:i,plans:n.plans,kungfuPrograms:n.kungfuPrograms,kungfuCadence:n.kungfuCadence,kungfuTodayPlan:n.kungfuTodayPlan,workTaxonomy:n.workTaxonomy}}})),e0=1,iM=[{id:"default",name:"Kung Fu  activo",enabled:!0,include:[{byTags:["kungfu"]}],exclude:[]}],sM={targetsDays:{work:7,technique:5,segment:8,form:10,drill:7},overrides:[]},oM={limitMode:"count",maxItems:12,minutesBudget:30,template:{totalMinutes:30,focusMinutes:18,rouletteMinutes:10,recapMinutes:2},defaultMinutesByNodeType:{work:3,technique:1.5,segment:6,form:15,drill:4,reading:5,link:2},focusSelectors:[],rouletteSelectors:[],groups:[{id:"formas",name:"Formas",enabled:!0,order:1,type:"work",limitMode:"minutes",minutesBudget:18,strategy:"overdue",hierarchyRule:"prefer_leaves",include:[{byNodeTypes:["segment","form"]}],exclude:[]},{id:"tecnicas",name:"Tcnicas",enabled:!0,order:2,type:"work",limitMode:"minutes",minutesBudget:10,strategy:"weighted",hierarchyRule:"allow_all",include:[{byNodeTypes:["technique"]},{byTags:["roulette"]}],exclude:[]},{id:"recap",name:"Recap",enabled:!0,order:99,type:"note",limitMode:"minutes",minutesBudget:2}]},aM={nodeTypes:[{key:"form",label:"Form"},{key:"segment",label:"Segment"},{key:"application",label:"Application"},{key:"technique",label:"Technique"},{key:"drill",label:"Drill"},{key:"reading",label:"Reading"},{key:"ebook",label:"Ebook"},{key:"work",label:"Work"},{key:"link",label:"Link"},{key:"style",label:"Style"}],tags:[]},Lu=e=>({objectives:e.objectives,works:[],sessions:e.sessions,assistants:e.assistants,plans:e.plans,kungfuPrograms:e.kungfuPrograms,kungfuCadence:e.kungfuCadence,kungfuTodayPlan:e.kungfuTodayPlan,workTaxonomy:e.workTaxonomy}),lM=e=>({objectives:e.objectives??[],works:[],sessions:(e.sessions??[]).map(t=>({...t,planId:(t.planId??"").trim()||void 0,kind:t.kind??"class",workItems:t.workItems??[],attendance:t.attendance??[]})),assistants:e.assistants??[],plans:e.plans??[],kungfuPrograms:e.kungfuPrograms??iM,kungfuCadence:e.kungfuCadence??sM,kungfuTodayPlan:e.kungfuTodayPlan??oM,workTaxonomy:e.workTaxonomy??aM}),uM=(e,t)=>e.objectives!==t.objectives||e.sessions!==t.sessions||e.assistants!==t.assistants||e.plans!==t.plans||e.kungfuPrograms!==t.kungfuPrograms||e.kungfuCadence!==t.kungfuCadence||e.kungfuTodayPlan!==t.kungfuTodayPlan||e.workTaxonomy!==t.workTaxonomy;function cM(){const{user:e}=Ns(),t=Ce(f=>f.setCollections),n=Ce(f=>f.reset),r=Ce(f=>f.ready),i=b.useRef(!1),o=b.useRef(null),a=b.useRef(null),u=b.useRef(null),c=b.useRef(Lu(Ce.getState()));b.useEffect(()=>()=>{o.current&&(window.clearTimeout(o.current),o.current=null)},[]),b.useEffect(()=>{e||(n(),u.current=null,a.current=null,i.current=!1,c.current=Lu(Ce.getState()),o.current&&(window.clearTimeout(o.current),o.current=null))},[e,n]),b.useEffect(()=>{if(!e)return;let f=!0;(async()=>{const{data:v,error:y}=await Yt.from("planner_states").select("data, updated_at").eq("user_id",e.id).maybeSingle();if(!f)return;if(y&&y.code!=="PGRST116"){console.error("No se pudo cargar el estado remoto",y);return}const w=v;if(w!=null&&w.data){const S=lM(w.data??{});i.current=!0,u.current=w.updated_at,c.current=S,t(S)}else if(r){const S=Lu(Ce.getState());a.current=null;const{error:k,data:_}=await Yt.from("planner_states").upsert({user_id:e.id,data:{version:e0,...S}},{onConflict:"user_id"}).select("updated_at").maybeSingle(),C=_;k?console.error("No se pudo inicializar el estado remoto",k):C&&(u.current=C.updated_at)}})();const p=Ce.subscribe(v=>{if(!f)return;const y=Lu(v);if(i.current){i.current=!1,c.current=y,a.current=null;return}const w=c.current;uM(y,w)&&(c.current=y,a.current=y,o.current&&window.clearTimeout(o.current),o.current=window.setTimeout(()=>{if(!a.current)return;const S=a.current;a.current=null,(async()=>{const{error:k,data:_}=await Yt.from("planner_states").upsert({user_id:e.id,data:{version:e0,...S}},{onConflict:"user_id"}).select("updated_at").maybeSingle(),C=_;k?console.error("No se pudo guardar el estado remoto",k):C&&(u.current=C.updated_at)})()},600))});return()=>{f=!1,p(),o.current&&(window.clearTimeout(o.current),o.current=null)}},[e,r,t])}function dM(){const{user:e}=Ns(),t=Ce(r=>r.loadWorks),n=Ce(r=>r.setWorks);b.useEffect(()=>{if(!e){n([]);return}const r={actorId:e.id,actorEmail:e.email??""},i=async()=>{try{await t(r)}catch(a){console.error("No se pudieron sincronizar los trabajos colaborativos",a)}};i();const o=Yt.channel("works-collaboration").on("postgres_changes",{event:"*",schema:"public",table:"works"},()=>{i()}).on("postgres_changes",{event:"*",schema:"public",table:"work_collaborators"},()=>{i()}).subscribe();return()=>{Yt.removeChannel(o)}},[e,t,n])}var Qu={exports:{}},fM=Qu.exports,t0;function hM(){return t0||(t0=1,(function(e,t){(function(n,r){e.exports=r(vk())})(fM,(function(n){function r(a){return a&&typeof a=="object"&&"default"in a?a:{default:a}}var i=r(n),o={name:"es",monthsShort:"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),weekStart:1,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},ordinal:function(a){return a+""}};return i.default.locale(o,null,!0),o}))})(Qu)),Qu.exports}hM();function Bi({objective:e,size:t="md"}){if(!e)return null;const n=t==="sm"?"text-xs px-2 py-1":"text-sm px-3 py-1.5";return m.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full font-medium text-slate-950 shadow shadow-black/30 ${n}`,style:{backgroundColor:e.colorHex},children:[m.jsx("span",{className:"h-2.5 w-2.5 rounded-full border border-black/20 bg-white/70"}),e.name]})}function pM(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const mM=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,gM=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,yM={};function n0(e,t){return(yM.jsx?gM:mM).test(e)}const vM=/[ \t\n\f\r]/g;function xM(e){return typeof e=="object"?e.type==="text"?r0(e.value):!1:r0(e)}function r0(e){return e.replace(vM,"")===""}class ml{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}ml.prototype.normal={};ml.prototype.property={};ml.prototype.space=void 0;function Nk(e,t){const n={},r={};for(const i of e)Object.assign(n,i.property),Object.assign(r,i.normal);return new ml(n,r,t)}function pp(e){return e.toLowerCase()}class $n{constructor(t,n){this.attribute=n,this.property=t}}$n.prototype.attribute="";$n.prototype.booleanish=!1;$n.prototype.boolean=!1;$n.prototype.commaOrSpaceSeparated=!1;$n.prototype.commaSeparated=!1;$n.prototype.defined=!1;$n.prototype.mustUseProperty=!1;$n.prototype.number=!1;$n.prototype.overloadedBoolean=!1;$n.prototype.property="";$n.prototype.spaceSeparated=!1;$n.prototype.space=void 0;let bM=0;const at=Is(),Ht=Is(),mp=Is(),ke=Is(),jt=Is(),_o=Is(),Kn=Is();function Is(){return 2**++bM}const gp=Object.freeze(Object.defineProperty({__proto__:null,boolean:at,booleanish:Ht,commaOrSpaceSeparated:Kn,commaSeparated:_o,number:ke,overloadedBoolean:mp,spaceSeparated:jt},Symbol.toStringTag,{value:"Module"})),lh=Object.keys(gp);class cm extends $n{constructor(t,n,r,i){let o=-1;if(super(t,n),i0(this,"space",i),typeof r=="number")for(;++o<lh.length;){const a=lh[o];i0(this,lh[o],(r&gp[a])===gp[a])}}}cm.prototype.defined=!0;function i0(e,t,n){n&&(e[t]=n)}function Bo(e){const t={},n={};for(const[r,i]of Object.entries(e.properties)){const o=new cm(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(o.mustUseProperty=!0),t[r]=o,n[pp(r)]=r,n[pp(o.attribute)]=r}return new ml(t,n,e.space)}const Tk=Bo({properties:{ariaActiveDescendant:null,ariaAtomic:Ht,ariaAutoComplete:null,ariaBusy:Ht,ariaChecked:Ht,ariaColCount:ke,ariaColIndex:ke,ariaColSpan:ke,ariaControls:jt,ariaCurrent:null,ariaDescribedBy:jt,ariaDetails:null,ariaDisabled:Ht,ariaDropEffect:jt,ariaErrorMessage:null,ariaExpanded:Ht,ariaFlowTo:jt,ariaGrabbed:Ht,ariaHasPopup:null,ariaHidden:Ht,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:jt,ariaLevel:ke,ariaLive:null,ariaModal:Ht,ariaMultiLine:Ht,ariaMultiSelectable:Ht,ariaOrientation:null,ariaOwns:jt,ariaPlaceholder:null,ariaPosInSet:ke,ariaPressed:Ht,ariaReadOnly:Ht,ariaRelevant:null,ariaRequired:Ht,ariaRoleDescription:jt,ariaRowCount:ke,ariaRowIndex:ke,ariaRowSpan:ke,ariaSelected:Ht,ariaSetSize:ke,ariaSort:null,ariaValueMax:ke,ariaValueMin:ke,ariaValueNow:ke,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function Ik(e,t){return t in e?e[t]:t}function Pk(e,t){return Ik(e,t.toLowerCase())}const wM=Bo({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:_o,acceptCharset:jt,accessKey:jt,action:null,allow:null,allowFullScreen:at,allowPaymentRequest:at,allowUserMedia:at,alt:null,as:null,async:at,autoCapitalize:null,autoComplete:jt,autoFocus:at,autoPlay:at,blocking:jt,capture:null,charSet:null,checked:at,cite:null,className:jt,cols:ke,colSpan:null,content:null,contentEditable:Ht,controls:at,controlsList:jt,coords:ke|_o,crossOrigin:null,data:null,dateTime:null,decoding:null,default:at,defer:at,dir:null,dirName:null,disabled:at,download:mp,draggable:Ht,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:at,formTarget:null,headers:jt,height:ke,hidden:mp,high:ke,href:null,hrefLang:null,htmlFor:jt,httpEquiv:jt,id:null,imageSizes:null,imageSrcSet:null,inert:at,inputMode:null,integrity:null,is:null,isMap:at,itemId:null,itemProp:jt,itemRef:jt,itemScope:at,itemType:jt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:at,low:ke,manifest:null,max:null,maxLength:ke,media:null,method:null,min:null,minLength:ke,multiple:at,muted:at,name:null,nonce:null,noModule:at,noValidate:at,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:at,optimum:ke,pattern:null,ping:jt,placeholder:null,playsInline:at,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:at,referrerPolicy:null,rel:jt,required:at,reversed:at,rows:ke,rowSpan:ke,sandbox:jt,scope:null,scoped:at,seamless:at,selected:at,shadowRootClonable:at,shadowRootDelegatesFocus:at,shadowRootMode:null,shape:null,size:ke,sizes:null,slot:null,span:ke,spellCheck:Ht,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ke,step:null,style:null,tabIndex:ke,target:null,title:null,translate:null,type:null,typeMustMatch:at,useMap:null,value:Ht,width:ke,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:jt,axis:null,background:null,bgColor:null,border:ke,borderColor:null,bottomMargin:ke,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:at,declare:at,event:null,face:null,frame:null,frameBorder:null,hSpace:ke,leftMargin:ke,link:null,longDesc:null,lowSrc:null,marginHeight:ke,marginWidth:ke,noResize:at,noHref:at,noShade:at,noWrap:at,object:null,profile:null,prompt:null,rev:null,rightMargin:ke,rules:null,scheme:null,scrolling:Ht,standby:null,summary:null,text:null,topMargin:ke,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ke,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:at,disableRemotePlayback:at,prefix:null,property:null,results:ke,security:null,unselectable:null},space:"html",transform:Pk}),kM=Bo({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Kn,accentHeight:ke,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ke,amplitude:ke,arabicForm:null,ascent:ke,attributeName:null,attributeType:null,azimuth:ke,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ke,by:null,calcMode:null,capHeight:ke,className:jt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ke,diffuseConstant:ke,direction:null,display:null,dur:null,divisor:ke,dominantBaseline:null,download:at,dx:null,dy:null,edgeMode:null,editable:null,elevation:ke,enableBackground:null,end:null,event:null,exponent:ke,externalResourcesRequired:null,fill:null,fillOpacity:ke,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:_o,g2:_o,glyphName:_o,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ke,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ke,horizOriginX:ke,horizOriginY:ke,id:null,ideographic:ke,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ke,k:ke,k1:ke,k2:ke,k3:ke,k4:ke,kernelMatrix:Kn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ke,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ke,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ke,overlineThickness:ke,paintOrder:null,panose1:null,path:null,pathLength:ke,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:jt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ke,pointsAtY:ke,pointsAtZ:ke,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Kn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Kn,rev:Kn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Kn,requiredFeatures:Kn,requiredFonts:Kn,requiredFormats:Kn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ke,specularExponent:ke,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ke,strikethroughThickness:ke,string:null,stroke:null,strokeDashArray:Kn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ke,strokeOpacity:ke,strokeWidth:null,style:null,surfaceScale:ke,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Kn,tabIndex:ke,tableValues:null,target:null,targetX:ke,targetY:ke,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Kn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ke,underlineThickness:ke,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ke,values:null,vAlphabetic:ke,vMathematical:ke,vectorEffect:null,vHanging:ke,vIdeographic:ke,version:null,vertAdvY:ke,vertOriginX:ke,vertOriginY:ke,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ke,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Ik}),Rk=Bo({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),Ak=Bo({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Pk}),Mk=Bo({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),SM={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},EM=/[A-Z]/g,s0=/-[a-z]/g,_M=/^data[-\w.:]+$/i;function CM(e,t){const n=pp(t);let r=t,i=$n;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&_M.test(t)){if(t.charAt(4)==="-"){const o=t.slice(5).replace(s0,NM);r="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=t.slice(4);if(!s0.test(o)){let a=o.replace(EM,jM);a.charAt(0)!=="-"&&(a="-"+a),t="data"+a}}i=cm}return new i(r,t)}function jM(e){return"-"+e.toLowerCase()}function NM(e){return e.charAt(1).toUpperCase()}const TM=Nk([Tk,wM,Rk,Ak,Mk],"html"),dm=Nk([Tk,kM,Rk,Ak,Mk],"svg");function IM(e){return e.join(" ").trim()}var co={},uh,o0;function PM(){if(o0)return uh;o0=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,a=/^[;\s]*/,u=/^\s+|\s+$/g,c=`
`,f="/",h="*",p="",v="comment",y="declaration";uh=function(S,k){if(typeof S!="string")throw new TypeError("First argument must be a string");if(!S)return[];k=k||{};var _=1,C=1;function j(q){var H=q.match(t);H&&(_+=H.length);var V=q.lastIndexOf(c);C=~V?q.length-V:C+q.length}function I(){var q={line:_,column:C};return function(H){return H.position=new O(q),re(),H}}function O(q){this.start=q,this.end={line:_,column:C},this.source=k.source}O.prototype.content=S;function R(q){var H=new Error(k.source+":"+_+":"+C+": "+q);if(H.reason=q,H.filename=k.source,H.line=_,H.column=C,H.source=S,!k.silent)throw H}function U(q){var H=q.exec(S);if(H){var V=H[0];return j(V),S=S.slice(V.length),H}}function re(){U(n)}function z(q){var H;for(q=q||[];H=M();)H!==!1&&q.push(H);return q}function M(){var q=I();if(!(f!=S.charAt(0)||h!=S.charAt(1))){for(var H=2;p!=S.charAt(H)&&(h!=S.charAt(H)||f!=S.charAt(H+1));)++H;if(H+=2,p===S.charAt(H-1))return R("End of comment missing");var V=S.slice(2,H-2);return C+=2,j(V),S=S.slice(H),C+=2,q({type:v,comment:V})}}function L(){var q=I(),H=U(r);if(H){if(M(),!U(i))return R("property missing ':'");var V=U(o),te=q({type:y,property:w(H[0].replace(e,p)),value:V?w(V[0].replace(e,p)):p});return U(a),te}}function se(){var q=[];z(q);for(var H;H=L();)H!==!1&&(q.push(H),z(q));return q}return re(),se()};function w(S){return S?S.replace(u,p):p}return uh}var a0;function RM(){if(a0)return co;a0=1;var e=co&&co.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(co,"__esModule",{value:!0}),co.default=n;var t=e(PM());function n(r,i){var o=null;if(!r||typeof r!="string")return o;var a=(0,t.default)(r),u=typeof i=="function";return a.forEach(function(c){if(c.type==="declaration"){var f=c.property,h=c.value;u?i(f,h,c):h&&(o=o||{},o[f]=h)}}),o}return co}var Ca={},l0;function AM(){if(l0)return Ca;l0=1,Object.defineProperty(Ca,"__esModule",{value:!0}),Ca.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,o=function(f){return!f||n.test(f)||e.test(f)},a=function(f,h){return h.toUpperCase()},u=function(f,h){return"".concat(h,"-")},c=function(f,h){return h===void 0&&(h={}),o(f)?f:(f=f.toLowerCase(),h.reactCompat?f=f.replace(i,u):f=f.replace(r,u),f.replace(t,a))};return Ca.camelCase=c,Ca}var ja,u0;function MM(){if(u0)return ja;u0=1;var e=ja&&ja.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},t=e(RM()),n=AM();function r(i,o){var a={};return!i||typeof i!="string"||(0,t.default)(i,function(u,c){u&&c&&(a[(0,n.camelCase)(u,o)]=c)}),a}return r.default=r,ja=r,ja}var OM=MM();const DM=Ao(OM),Ok=Dk("end"),fm=Dk("start");function Dk(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function LM(e){const t=fm(e),n=Ok(e);if(t&&n)return{start:t,end:n}}function Ua(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?c0(e.position):"start"in e||"end"in e?c0(e):"line"in e||"column"in e?yp(e):""}function yp(e){return d0(e&&e.line)+":"+d0(e&&e.column)}function c0(e){return yp(e&&e.start)+"-"+yp(e&&e.end)}function d0(e){return e&&typeof e=="number"?e:1}class wn extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",o={},a=!1;if(n&&("line"in n&&"column"in n?o={place:n}:"start"in n&&"end"in n?o={place:n}:"type"in n?o={ancestors:[n],place:n.position}:o={...n}),typeof t=="string"?i=t:!o.cause&&t&&(a=!0,i=t.message,o.cause=t),!o.ruleId&&!o.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?o.ruleId=r:(o.source=r.slice(0,c),o.ruleId=r.slice(c+1))}if(!o.place&&o.ancestors&&o.ancestors){const c=o.ancestors[o.ancestors.length-1];c&&(o.place=c.position)}const u=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=u?u.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=u?u.line:void 0,this.name=Ua(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=a&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}wn.prototype.file="";wn.prototype.name="";wn.prototype.reason="";wn.prototype.message="";wn.prototype.stack="";wn.prototype.column=void 0;wn.prototype.line=void 0;wn.prototype.ancestors=void 0;wn.prototype.cause=void 0;wn.prototype.fatal=void 0;wn.prototype.place=void 0;wn.prototype.ruleId=void 0;wn.prototype.source=void 0;const hm={}.hasOwnProperty,$M=new Map,FM=/[A-Z]/g,BM=new Set(["table","tbody","thead","tfoot","tr"]),zM=new Set(["td","th"]),Lk="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function UM(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=JM(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=GM(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?dm:TM,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},o=$k(i,e,void 0);return o&&typeof o!="string"?o:i.create(e,i.Fragment,{children:o||void 0},void 0)}function $k(e,t,n){if(t.type==="element")return WM(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return HM(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return qM(e,t,n);if(t.type==="mdxjsEsm")return VM(e,t);if(t.type==="root")return KM(e,t,n);if(t.type==="text")return YM(e,t)}function WM(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=dm,e.schema=i),e.ancestors.push(t);const o=Bk(e,t.tagName,!1),a=QM(e,t);let u=mm(e,t);return BM.has(t.tagName)&&(u=u.filter(function(c){return typeof c=="string"?!xM(c):!0})),Fk(e,a,o,t),pm(a,u),e.ancestors.pop(),e.schema=r,e.create(t,o,a,n)}function HM(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}rl(e,t.position)}function VM(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);rl(e,t.position)}function qM(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=dm,e.schema=i),e.ancestors.push(t);const o=t.name===null?e.Fragment:Bk(e,t.name,!0),a=XM(e,t),u=mm(e,t);return Fk(e,a,o,t),pm(a,u),e.ancestors.pop(),e.schema=r,e.create(t,o,a,n)}function KM(e,t,n){const r={};return pm(r,mm(e,t)),e.create(t,e.Fragment,r,n)}function YM(e,t){return t.value}function Fk(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function pm(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function GM(e,t,n){return r;function r(i,o,a,u){const f=Array.isArray(a.children)?n:t;return u?f(o,a,u):f(o,a)}}function JM(e,t){return n;function n(r,i,o,a){const u=Array.isArray(o.children),c=fm(r);return t(i,o,a,u,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function QM(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&hm.call(t.properties,i)){const o=ZM(e,i,t.properties[i]);if(o){const[a,u]=o;e.tableCellAlignToStyle&&a==="align"&&typeof u=="string"&&zM.has(t.tagName)?r=u:n[a]=u}}if(r){const o=n.style||(n.style={});o[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function XM(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const o=r.data.estree.body[0];o.type;const a=o.expression;a.type;const u=a.properties[0];u.type,Object.assign(n,e.evaluater.evaluateExpression(u.argument))}else rl(e,t.position);else{const i=r.name;let o;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const u=r.value.data.estree.body[0];u.type,o=e.evaluater.evaluateExpression(u.expression)}else rl(e,t.position);else o=r.value===null?!0:r.value;n[i]=o}return n}function mm(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:$M;for(;++r<t.children.length;){const o=t.children[r];let a;if(e.passKeys){const c=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(c){const f=i.get(c)||0;a=c+"-"+f,i.set(c,f+1)}}const u=$k(e,o,a);u!==void 0&&n.push(u)}return n}function ZM(e,t,n){const r=CM(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?pM(n):IM(n)),r.property==="style"){let i=typeof n=="object"?n:eO(e,String(n));return e.stylePropertyNameCase==="css"&&(i=tO(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?SM[r.property]||r.property:r.attribute,n]}}function eO(e,t){try{return DM(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,i=new wn("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=Lk+"#cannot-parse-style-attribute",i}}function Bk(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let o=-1,a;for(;++o<i.length;){const u=n0(i[o])?{type:"Identifier",name:i[o]}:{type:"Literal",value:i[o]};a=a?{type:"MemberExpression",object:a,property:u,computed:!!(o&&u.type==="Literal"),optional:!1}:u}r=a}else r=n0(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return hm.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);rl(e)}function rl(e,t){const n=new wn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Lk+"#cannot-handle-mdx-estrees-without-createevaluater",n}function tO(e){const t={};let n;for(n in e)hm.call(e,n)&&(t[nO(n)]=e[n]);return t}function nO(e){let t=e.replace(FM,rO);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function rO(e){return"-"+e.toLowerCase()}const ch={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},iO={};function gm(e,t){const n=iO,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return zk(e,r,i)}function zk(e,t,n){if(sO(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return f0(e.children,t,n)}return Array.isArray(e)?f0(e,t,n):""}function f0(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=zk(e[i],t,n);return r.join("")}function sO(e){return!!(e&&typeof e=="object")}const h0=document.createElement("i");function ym(e){const t="&"+e+";";h0.innerHTML=t;const n=h0.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Qn(e,t,n,r){const i=e.length;let o=0,a;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)a=Array.from(r),a.unshift(t,n),e.splice(...a);else for(n&&e.splice(t,n);o<r.length;)a=r.slice(o,o+1e4),a.unshift(t,0),e.splice(...a),o+=1e4,t+=1e4}function ar(e,t){return e.length>0?(Qn(e,e.length,0,t),e):t}const p0={}.hasOwnProperty;function Uk(e){const t={};let n=-1;for(;++n<e.length;)oO(t,e[n]);return t}function oO(e,t){let n;for(n in t){const i=(p0.call(e,n)?e[n]:void 0)||(e[n]={}),o=t[n];let a;if(o)for(a in o){p0.call(i,a)||(i[a]=[]);const u=o[a];aO(i[a],Array.isArray(u)?u:u?[u]:[])}}}function aO(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Qn(e,0,0,r)}function Wk(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function wr(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const En=Wi(/[A-Za-z]/),bn=Wi(/[\dA-Za-z]/),lO=Wi(/[#-'*+\--9=?A-Z^-~]/);function mc(e){return e!==null&&(e<32||e===127)}const vp=Wi(/\d/),uO=Wi(/[\dA-Fa-f]/),cO=Wi(/[!-/:-@[-`{-~]/);function Ze(e){return e!==null&&e<-2}function Et(e){return e!==null&&(e<0||e===32)}function dt(e){return e===-2||e===-1||e===32}const Hc=Wi(new RegExp("\\p{P}|\\p{S}","u")),ks=Wi(/\s/);function Wi(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function zo(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const o=e.charCodeAt(n);let a="";if(o===37&&bn(e.charCodeAt(n+1))&&bn(e.charCodeAt(n+2)))i=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(a=String.fromCharCode(o));else if(o>55295&&o<57344){const u=e.charCodeAt(n+1);o<56320&&u>56319&&u<57344?(a=String.fromCharCode(o,u),i=1):a=""}else a=String.fromCharCode(o);a&&(t.push(e.slice(r,n),encodeURIComponent(a)),r=n+i+1,a=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function ht(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let o=0;return a;function a(c){return dt(c)?(e.enter(n),u(c)):t(c)}function u(c){return dt(c)&&o++<i?(e.consume(c),u):(e.exit(n),t(c))}}const dO={tokenize:fO};function fO(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(u){if(u===null){e.consume(u);return}return e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),ht(e,t,"linePrefix")}function i(u){return e.enter("paragraph"),o(u)}function o(u){const c=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,a(u)}function a(u){if(u===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(u);return}return Ze(u)?(e.consume(u),e.exit("chunkText"),o):(e.consume(u),a)}}const hO={tokenize:pO},m0={tokenize:mO};function pO(e){const t=this,n=[];let r=0,i,o,a;return u;function u(j){if(r<n.length){const I=n[r];return t.containerState=I[1],e.attempt(I[0].continuation,c,f)(j)}return f(j)}function c(j){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&C();const I=t.events.length;let O=I,R;for(;O--;)if(t.events[O][0]==="exit"&&t.events[O][1].type==="chunkFlow"){R=t.events[O][1].end;break}_(r);let U=I;for(;U<t.events.length;)t.events[U][1].end={...R},U++;return Qn(t.events,O+1,0,t.events.slice(I)),t.events.length=U,f(j)}return u(j)}function f(j){if(r===n.length){if(!i)return v(j);if(i.currentConstruct&&i.currentConstruct.concrete)return w(j);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(m0,h,p)(j)}function h(j){return i&&C(),_(r),v(j)}function p(j){return t.parser.lazy[t.now().line]=r!==n.length,a=t.now().offset,w(j)}function v(j){return t.containerState={},e.attempt(m0,y,w)(j)}function y(j){return r++,n.push([t.currentConstruct,t.containerState]),v(j)}function w(j){if(j===null){i&&C(),_(0),e.consume(j);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:o}),S(j)}function S(j){if(j===null){k(e.exit("chunkFlow"),!0),_(0),e.consume(j);return}return Ze(j)?(e.consume(j),k(e.exit("chunkFlow")),r=0,t.interrupt=void 0,u):(e.consume(j),S)}function k(j,I){const O=t.sliceStream(j);if(I&&O.push(null),j.previous=o,o&&(o.next=j),o=j,i.defineSkip(j.start),i.write(O),t.parser.lazy[j.start.line]){let R=i.events.length;for(;R--;)if(i.events[R][1].start.offset<a&&(!i.events[R][1].end||i.events[R][1].end.offset>a))return;const U=t.events.length;let re=U,z,M;for(;re--;)if(t.events[re][0]==="exit"&&t.events[re][1].type==="chunkFlow"){if(z){M=t.events[re][1].end;break}z=!0}for(_(r),R=U;R<t.events.length;)t.events[R][1].end={...M},R++;Qn(t.events,re+1,0,t.events.slice(U)),t.events.length=R}}function _(j){let I=n.length;for(;I-- >j;){const O=n[I];t.containerState=O[1],O[0].exit.call(t,e)}n.length=j}function C(){i.write([null]),o=void 0,i=void 0,t.containerState._closeFlow=void 0}}function mO(e,t,n){return ht(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Ro(e){if(e===null||Et(e)||ks(e))return 1;if(Hc(e))return 2}function Vc(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const o=e[i].resolveAll;o&&!r.includes(o)&&(t=o(t,n),r.push(o))}return t}const xp={name:"attention",resolveAll:gO,tokenize:yO};function gO(e,t){let n=-1,r,i,o,a,u,c,f,h;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const p={...e[r][1].end},v={...e[n][1].start};g0(p,-c),g0(v,c),a={type:c>1?"strongSequence":"emphasisSequence",start:p,end:{...e[r][1].end}},u={type:c>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:v},o={type:c>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},i={type:c>1?"strong":"emphasis",start:{...a.start},end:{...u.end}},e[r][1].end={...a.start},e[n][1].start={...u.end},f=[],e[r][1].end.offset-e[r][1].start.offset&&(f=ar(f,[["enter",e[r][1],t],["exit",e[r][1],t]])),f=ar(f,[["enter",i,t],["enter",a,t],["exit",a,t],["enter",o,t]]),f=ar(f,Vc(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),f=ar(f,[["exit",o,t],["enter",u,t],["exit",u,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(h=2,f=ar(f,[["enter",e[n][1],t],["exit",e[n][1],t]])):h=0,Qn(e,r-1,n-r+3,f),n=r+f.length-h-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function yO(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Ro(r);let o;return a;function a(c){return o=c,e.enter("attentionSequence"),u(c)}function u(c){if(c===o)return e.consume(c),u;const f=e.exit("attentionSequence"),h=Ro(c),p=!h||h===2&&i||n.includes(c),v=!i||i===2&&h||n.includes(r);return f._open=!!(o===42?p:p&&(i||!v)),f._close=!!(o===42?v:v&&(h||!p)),t(c)}}function g0(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const vO={name:"autolink",tokenize:xO};function xO(e,t,n){let r=0;return i;function i(y){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(y),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),o}function o(y){return En(y)?(e.consume(y),a):y===64?n(y):f(y)}function a(y){return y===43||y===45||y===46||bn(y)?(r=1,u(y)):f(y)}function u(y){return y===58?(e.consume(y),r=0,c):(y===43||y===45||y===46||bn(y))&&r++<32?(e.consume(y),u):(r=0,f(y))}function c(y){return y===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(y),e.exit("autolinkMarker"),e.exit("autolink"),t):y===null||y===32||y===60||mc(y)?n(y):(e.consume(y),c)}function f(y){return y===64?(e.consume(y),h):lO(y)?(e.consume(y),f):n(y)}function h(y){return bn(y)?p(y):n(y)}function p(y){return y===46?(e.consume(y),r=0,h):y===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(y),e.exit("autolinkMarker"),e.exit("autolink"),t):v(y)}function v(y){if((y===45||bn(y))&&r++<63){const w=y===45?v:p;return e.consume(y),w}return n(y)}}const gl={partial:!0,tokenize:bO};function bO(e,t,n){return r;function r(o){return dt(o)?ht(e,i,"linePrefix")(o):i(o)}function i(o){return o===null||Ze(o)?t(o):n(o)}}const Hk={continuation:{tokenize:kO},exit:SO,name:"blockQuote",tokenize:wO};function wO(e,t,n){const r=this;return i;function i(a){if(a===62){const u=r.containerState;return u.open||(e.enter("blockQuote",{_container:!0}),u.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(a),e.exit("blockQuoteMarker"),o}return n(a)}function o(a){return dt(a)?(e.enter("blockQuotePrefixWhitespace"),e.consume(a),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(a))}}function kO(e,t,n){const r=this;return i;function i(a){return dt(a)?ht(e,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):o(a)}function o(a){return e.attempt(Hk,t,n)(a)}}function SO(e){e.exit("blockQuote")}const Vk={name:"characterEscape",tokenize:EO};function EO(e,t,n){return r;function r(o){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(o),e.exit("escapeMarker"),i}function i(o){return cO(o)?(e.enter("characterEscapeValue"),e.consume(o),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(o)}}const qk={name:"characterReference",tokenize:_O};function _O(e,t,n){const r=this;let i=0,o,a;return u;function u(p){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(p),e.exit("characterReferenceMarker"),c}function c(p){return p===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(p),e.exit("characterReferenceMarkerNumeric"),f):(e.enter("characterReferenceValue"),o=31,a=bn,h(p))}function f(p){return p===88||p===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(p),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),o=6,a=uO,h):(e.enter("characterReferenceValue"),o=7,a=vp,h(p))}function h(p){if(p===59&&i){const v=e.exit("characterReferenceValue");return a===bn&&!ym(r.sliceSerialize(v))?n(p):(e.enter("characterReferenceMarker"),e.consume(p),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return a(p)&&i++<o?(e.consume(p),h):n(p)}}const y0={partial:!0,tokenize:jO},v0={concrete:!0,name:"codeFenced",tokenize:CO};function CO(e,t,n){const r=this,i={partial:!0,tokenize:O};let o=0,a=0,u;return c;function c(R){return f(R)}function f(R){const U=r.events[r.events.length-1];return o=U&&U[1].type==="linePrefix"?U[2].sliceSerialize(U[1],!0).length:0,u=R,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),h(R)}function h(R){return R===u?(a++,e.consume(R),h):a<3?n(R):(e.exit("codeFencedFenceSequence"),dt(R)?ht(e,p,"whitespace")(R):p(R))}function p(R){return R===null||Ze(R)?(e.exit("codeFencedFence"),r.interrupt?t(R):e.check(y0,S,I)(R)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),v(R))}function v(R){return R===null||Ze(R)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),p(R)):dt(R)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),ht(e,y,"whitespace")(R)):R===96&&R===u?n(R):(e.consume(R),v)}function y(R){return R===null||Ze(R)?p(R):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),w(R))}function w(R){return R===null||Ze(R)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),p(R)):R===96&&R===u?n(R):(e.consume(R),w)}function S(R){return e.attempt(i,I,k)(R)}function k(R){return e.enter("lineEnding"),e.consume(R),e.exit("lineEnding"),_}function _(R){return o>0&&dt(R)?ht(e,C,"linePrefix",o+1)(R):C(R)}function C(R){return R===null||Ze(R)?e.check(y0,S,I)(R):(e.enter("codeFlowValue"),j(R))}function j(R){return R===null||Ze(R)?(e.exit("codeFlowValue"),C(R)):(e.consume(R),j)}function I(R){return e.exit("codeFenced"),t(R)}function O(R,U,re){let z=0;return M;function M(V){return R.enter("lineEnding"),R.consume(V),R.exit("lineEnding"),L}function L(V){return R.enter("codeFencedFence"),dt(V)?ht(R,se,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(V):se(V)}function se(V){return V===u?(R.enter("codeFencedFenceSequence"),q(V)):re(V)}function q(V){return V===u?(z++,R.consume(V),q):z>=a?(R.exit("codeFencedFenceSequence"),dt(V)?ht(R,H,"whitespace")(V):H(V)):re(V)}function H(V){return V===null||Ze(V)?(R.exit("codeFencedFence"),U(V)):re(V)}}}function jO(e,t,n){const r=this;return i;function i(a){return a===null?n(a):(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),o)}function o(a){return r.parser.lazy[r.now().line]?n(a):t(a)}}const dh={name:"codeIndented",tokenize:TO},NO={partial:!0,tokenize:IO};function TO(e,t,n){const r=this;return i;function i(f){return e.enter("codeIndented"),ht(e,o,"linePrefix",5)(f)}function o(f){const h=r.events[r.events.length-1];return h&&h[1].type==="linePrefix"&&h[2].sliceSerialize(h[1],!0).length>=4?a(f):n(f)}function a(f){return f===null?c(f):Ze(f)?e.attempt(NO,a,c)(f):(e.enter("codeFlowValue"),u(f))}function u(f){return f===null||Ze(f)?(e.exit("codeFlowValue"),a(f)):(e.consume(f),u)}function c(f){return e.exit("codeIndented"),t(f)}}function IO(e,t,n){const r=this;return i;function i(a){return r.parser.lazy[r.now().line]?n(a):Ze(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),i):ht(e,o,"linePrefix",5)(a)}function o(a){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?t(a):Ze(a)?i(a):n(a)}}const PO={name:"codeText",previous:AO,resolve:RO,tokenize:MO};function RO(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function AO(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function MO(e,t,n){let r=0,i,o;return a;function a(p){return e.enter("codeText"),e.enter("codeTextSequence"),u(p)}function u(p){return p===96?(e.consume(p),r++,u):(e.exit("codeTextSequence"),c(p))}function c(p){return p===null?n(p):p===32?(e.enter("space"),e.consume(p),e.exit("space"),c):p===96?(o=e.enter("codeTextSequence"),i=0,h(p)):Ze(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),c):(e.enter("codeTextData"),f(p))}function f(p){return p===null||p===32||p===96||Ze(p)?(e.exit("codeTextData"),c(p)):(e.consume(p),f)}function h(p){return p===96?(e.consume(p),i++,h):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(p)):(o.type="codeTextData",f(p))}}class OO{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const o=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Na(this.left,r),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Na(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Na(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);Na(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Na(this.left,n.reverse())}}}function Na(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function Kk(e){const t={};let n=-1,r,i,o,a,u,c,f;const h=new OO(e);for(;++n<h.length;){for(;n in t;)n=t[n];if(r=h.get(n),n&&r[1].type==="chunkFlow"&&h.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,o=0,o<c.length&&c[o][1].type==="lineEndingBlank"&&(o+=2),o<c.length&&c[o][1].type==="content"))for(;++o<c.length&&c[o][1].type!=="content";)c[o][1].type==="chunkText"&&(c[o][1]._isInFirstContentOfListItem=!0,o++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,DO(h,n)),n=t[n],f=!0);else if(r[1]._container){for(o=n,i=void 0;o--;)if(a=h.get(o),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(i&&(h.get(i)[1].type="lineEndingBlank"),a[1].type="lineEnding",i=o);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;i&&(r[1].end={...h.get(i)[1].start},u=h.slice(i,n),u.unshift(r),h.splice(i,n-i+1,u))}}return Qn(e,0,Number.POSITIVE_INFINITY,h.slice(0)),!f}function DO(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const o=[];let a=n._tokenizer;a||(a=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const u=a.events,c=[],f={};let h,p,v=-1,y=n,w=0,S=0;const k=[S];for(;y;){for(;e.get(++i)[1]!==y;);o.push(i),y._tokenizer||(h=r.sliceStream(y),y.next||h.push(null),p&&a.defineSkip(y.start),y._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(h),y._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),p=y,y=y.next}for(y=n;++v<u.length;)u[v][0]==="exit"&&u[v-1][0]==="enter"&&u[v][1].type===u[v-1][1].type&&u[v][1].start.line!==u[v][1].end.line&&(S=v+1,k.push(S),y._tokenizer=void 0,y.previous=void 0,y=y.next);for(a.events=[],y?(y._tokenizer=void 0,y.previous=void 0):k.pop(),v=k.length;v--;){const _=u.slice(k[v],k[v+1]),C=o.pop();c.push([C,C+_.length-1]),e.splice(C,2,_)}for(c.reverse(),v=-1;++v<c.length;)f[w+c[v][0]]=w+c[v][1],w+=c[v][1]-c[v][0]-1;return f}const LO={resolve:FO,tokenize:BO},$O={partial:!0,tokenize:zO};function FO(e){return Kk(e),e}function BO(e,t){let n;return r;function r(u){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(u)}function i(u){return u===null?o(u):Ze(u)?e.check($O,a,o)(u):(e.consume(u),i)}function o(u){return e.exit("chunkContent"),e.exit("content"),t(u)}function a(u){return e.consume(u),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function zO(e,t,n){const r=this;return i;function i(a){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),ht(e,o,"linePrefix")}function o(a){if(a===null||Ze(a))return n(a);const u=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?t(a):e.interrupt(r.parser.constructs.flow,n,t)(a)}}function Yk(e,t,n,r,i,o,a,u,c){const f=c||Number.POSITIVE_INFINITY;let h=0;return p;function p(_){return _===60?(e.enter(r),e.enter(i),e.enter(o),e.consume(_),e.exit(o),v):_===null||_===32||_===41||mc(_)?n(_):(e.enter(r),e.enter(a),e.enter(u),e.enter("chunkString",{contentType:"string"}),S(_))}function v(_){return _===62?(e.enter(o),e.consume(_),e.exit(o),e.exit(i),e.exit(r),t):(e.enter(u),e.enter("chunkString",{contentType:"string"}),y(_))}function y(_){return _===62?(e.exit("chunkString"),e.exit(u),v(_)):_===null||_===60||Ze(_)?n(_):(e.consume(_),_===92?w:y)}function w(_){return _===60||_===62||_===92?(e.consume(_),y):y(_)}function S(_){return!h&&(_===null||_===41||Et(_))?(e.exit("chunkString"),e.exit(u),e.exit(a),e.exit(r),t(_)):h<f&&_===40?(e.consume(_),h++,S):_===41?(e.consume(_),h--,S):_===null||_===32||_===40||mc(_)?n(_):(e.consume(_),_===92?k:S)}function k(_){return _===40||_===41||_===92?(e.consume(_),S):S(_)}}function Gk(e,t,n,r,i,o){const a=this;let u=0,c;return f;function f(y){return e.enter(r),e.enter(i),e.consume(y),e.exit(i),e.enter(o),h}function h(y){return u>999||y===null||y===91||y===93&&!c||y===94&&!u&&"_hiddenFootnoteSupport"in a.parser.constructs?n(y):y===93?(e.exit(o),e.enter(i),e.consume(y),e.exit(i),e.exit(r),t):Ze(y)?(e.enter("lineEnding"),e.consume(y),e.exit("lineEnding"),h):(e.enter("chunkString",{contentType:"string"}),p(y))}function p(y){return y===null||y===91||y===93||Ze(y)||u++>999?(e.exit("chunkString"),h(y)):(e.consume(y),c||(c=!dt(y)),y===92?v:p)}function v(y){return y===91||y===92||y===93?(e.consume(y),u++,p):p(y)}}function Jk(e,t,n,r,i,o){let a;return u;function u(v){return v===34||v===39||v===40?(e.enter(r),e.enter(i),e.consume(v),e.exit(i),a=v===40?41:v,c):n(v)}function c(v){return v===a?(e.enter(i),e.consume(v),e.exit(i),e.exit(r),t):(e.enter(o),f(v))}function f(v){return v===a?(e.exit(o),c(a)):v===null?n(v):Ze(v)?(e.enter("lineEnding"),e.consume(v),e.exit("lineEnding"),ht(e,f,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),h(v))}function h(v){return v===a||v===null||Ze(v)?(e.exit("chunkString"),f(v)):(e.consume(v),v===92?p:h)}function p(v){return v===a||v===92?(e.consume(v),h):h(v)}}function Wa(e,t){let n;return r;function r(i){return Ze(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):dt(i)?ht(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const UO={name:"definition",tokenize:HO},WO={partial:!0,tokenize:VO};function HO(e,t,n){const r=this;let i;return o;function o(y){return e.enter("definition"),a(y)}function a(y){return Gk.call(r,e,u,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(y)}function u(y){return i=wr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),y===58?(e.enter("definitionMarker"),e.consume(y),e.exit("definitionMarker"),c):n(y)}function c(y){return Et(y)?Wa(e,f)(y):f(y)}function f(y){return Yk(e,h,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(y)}function h(y){return e.attempt(WO,p,p)(y)}function p(y){return dt(y)?ht(e,v,"whitespace")(y):v(y)}function v(y){return y===null||Ze(y)?(e.exit("definition"),r.parser.defined.push(i),t(y)):n(y)}}function VO(e,t,n){return r;function r(u){return Et(u)?Wa(e,i)(u):n(u)}function i(u){return Jk(e,o,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(u)}function o(u){return dt(u)?ht(e,a,"whitespace")(u):a(u)}function a(u){return u===null||Ze(u)?t(u):n(u)}}const qO={name:"hardBreakEscape",tokenize:KO};function KO(e,t,n){return r;function r(o){return e.enter("hardBreakEscape"),e.consume(o),i}function i(o){return Ze(o)?(e.exit("hardBreakEscape"),t(o)):n(o)}}const YO={name:"headingAtx",resolve:GO,tokenize:JO};function GO(e,t){let n=e.length-2,r=3,i,o;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},o={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Qn(e,r,n-r+1,[["enter",i,t],["enter",o,t],["exit",o,t],["exit",i,t]])),e}function JO(e,t,n){let r=0;return i;function i(h){return e.enter("atxHeading"),o(h)}function o(h){return e.enter("atxHeadingSequence"),a(h)}function a(h){return h===35&&r++<6?(e.consume(h),a):h===null||Et(h)?(e.exit("atxHeadingSequence"),u(h)):n(h)}function u(h){return h===35?(e.enter("atxHeadingSequence"),c(h)):h===null||Ze(h)?(e.exit("atxHeading"),t(h)):dt(h)?ht(e,u,"whitespace")(h):(e.enter("atxHeadingText"),f(h))}function c(h){return h===35?(e.consume(h),c):(e.exit("atxHeadingSequence"),u(h))}function f(h){return h===null||h===35||Et(h)?(e.exit("atxHeadingText"),u(h)):(e.consume(h),f)}}const QO=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],x0=["pre","script","style","textarea"],XO={concrete:!0,name:"htmlFlow",resolveTo:t2,tokenize:n2},ZO={partial:!0,tokenize:i2},e2={partial:!0,tokenize:r2};function t2(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function n2(e,t,n){const r=this;let i,o,a,u,c;return f;function f(A){return h(A)}function h(A){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(A),p}function p(A){return A===33?(e.consume(A),v):A===47?(e.consume(A),o=!0,S):A===63?(e.consume(A),i=3,r.interrupt?t:N):En(A)?(e.consume(A),a=String.fromCharCode(A),k):n(A)}function v(A){return A===45?(e.consume(A),i=2,y):A===91?(e.consume(A),i=5,u=0,w):En(A)?(e.consume(A),i=4,r.interrupt?t:N):n(A)}function y(A){return A===45?(e.consume(A),r.interrupt?t:N):n(A)}function w(A){const be="CDATA[";return A===be.charCodeAt(u++)?(e.consume(A),u===be.length?r.interrupt?t:se:w):n(A)}function S(A){return En(A)?(e.consume(A),a=String.fromCharCode(A),k):n(A)}function k(A){if(A===null||A===47||A===62||Et(A)){const be=A===47,he=a.toLowerCase();return!be&&!o&&x0.includes(he)?(i=1,r.interrupt?t(A):se(A)):QO.includes(a.toLowerCase())?(i=6,be?(e.consume(A),_):r.interrupt?t(A):se(A)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(A):o?C(A):j(A))}return A===45||bn(A)?(e.consume(A),a+=String.fromCharCode(A),k):n(A)}function _(A){return A===62?(e.consume(A),r.interrupt?t:se):n(A)}function C(A){return dt(A)?(e.consume(A),C):M(A)}function j(A){return A===47?(e.consume(A),M):A===58||A===95||En(A)?(e.consume(A),I):dt(A)?(e.consume(A),j):M(A)}function I(A){return A===45||A===46||A===58||A===95||bn(A)?(e.consume(A),I):O(A)}function O(A){return A===61?(e.consume(A),R):dt(A)?(e.consume(A),O):j(A)}function R(A){return A===null||A===60||A===61||A===62||A===96?n(A):A===34||A===39?(e.consume(A),c=A,U):dt(A)?(e.consume(A),R):re(A)}function U(A){return A===c?(e.consume(A),c=null,z):A===null||Ze(A)?n(A):(e.consume(A),U)}function re(A){return A===null||A===34||A===39||A===47||A===60||A===61||A===62||A===96||Et(A)?O(A):(e.consume(A),re)}function z(A){return A===47||A===62||dt(A)?j(A):n(A)}function M(A){return A===62?(e.consume(A),L):n(A)}function L(A){return A===null||Ze(A)?se(A):dt(A)?(e.consume(A),L):n(A)}function se(A){return A===45&&i===2?(e.consume(A),te):A===60&&i===1?(e.consume(A),Z):A===62&&i===4?(e.consume(A),F):A===63&&i===3?(e.consume(A),N):A===93&&i===5?(e.consume(A),$):Ze(A)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(ZO,ee,q)(A)):A===null||Ze(A)?(e.exit("htmlFlowData"),q(A)):(e.consume(A),se)}function q(A){return e.check(e2,H,ee)(A)}function H(A){return e.enter("lineEnding"),e.consume(A),e.exit("lineEnding"),V}function V(A){return A===null||Ze(A)?q(A):(e.enter("htmlFlowData"),se(A))}function te(A){return A===45?(e.consume(A),N):se(A)}function Z(A){return A===47?(e.consume(A),a="",B):se(A)}function B(A){if(A===62){const be=a.toLowerCase();return x0.includes(be)?(e.consume(A),F):se(A)}return En(A)&&a.length<8?(e.consume(A),a+=String.fromCharCode(A),B):se(A)}function $(A){return A===93?(e.consume(A),N):se(A)}function N(A){return A===62?(e.consume(A),F):A===45&&i===2?(e.consume(A),N):se(A)}function F(A){return A===null||Ze(A)?(e.exit("htmlFlowData"),ee(A)):(e.consume(A),F)}function ee(A){return e.exit("htmlFlow"),t(A)}}function r2(e,t,n){const r=this;return i;function i(a){return Ze(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),o):n(a)}function o(a){return r.parser.lazy[r.now().line]?n(a):t(a)}}function i2(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(gl,t,n)}}const s2={name:"htmlText",tokenize:o2};function o2(e,t,n){const r=this;let i,o,a;return u;function u(N){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(N),c}function c(N){return N===33?(e.consume(N),f):N===47?(e.consume(N),O):N===63?(e.consume(N),j):En(N)?(e.consume(N),re):n(N)}function f(N){return N===45?(e.consume(N),h):N===91?(e.consume(N),o=0,w):En(N)?(e.consume(N),C):n(N)}function h(N){return N===45?(e.consume(N),y):n(N)}function p(N){return N===null?n(N):N===45?(e.consume(N),v):Ze(N)?(a=p,Z(N)):(e.consume(N),p)}function v(N){return N===45?(e.consume(N),y):p(N)}function y(N){return N===62?te(N):N===45?v(N):p(N)}function w(N){const F="CDATA[";return N===F.charCodeAt(o++)?(e.consume(N),o===F.length?S:w):n(N)}function S(N){return N===null?n(N):N===93?(e.consume(N),k):Ze(N)?(a=S,Z(N)):(e.consume(N),S)}function k(N){return N===93?(e.consume(N),_):S(N)}function _(N){return N===62?te(N):N===93?(e.consume(N),_):S(N)}function C(N){return N===null||N===62?te(N):Ze(N)?(a=C,Z(N)):(e.consume(N),C)}function j(N){return N===null?n(N):N===63?(e.consume(N),I):Ze(N)?(a=j,Z(N)):(e.consume(N),j)}function I(N){return N===62?te(N):j(N)}function O(N){return En(N)?(e.consume(N),R):n(N)}function R(N){return N===45||bn(N)?(e.consume(N),R):U(N)}function U(N){return Ze(N)?(a=U,Z(N)):dt(N)?(e.consume(N),U):te(N)}function re(N){return N===45||bn(N)?(e.consume(N),re):N===47||N===62||Et(N)?z(N):n(N)}function z(N){return N===47?(e.consume(N),te):N===58||N===95||En(N)?(e.consume(N),M):Ze(N)?(a=z,Z(N)):dt(N)?(e.consume(N),z):te(N)}function M(N){return N===45||N===46||N===58||N===95||bn(N)?(e.consume(N),M):L(N)}function L(N){return N===61?(e.consume(N),se):Ze(N)?(a=L,Z(N)):dt(N)?(e.consume(N),L):z(N)}function se(N){return N===null||N===60||N===61||N===62||N===96?n(N):N===34||N===39?(e.consume(N),i=N,q):Ze(N)?(a=se,Z(N)):dt(N)?(e.consume(N),se):(e.consume(N),H)}function q(N){return N===i?(e.consume(N),i=void 0,V):N===null?n(N):Ze(N)?(a=q,Z(N)):(e.consume(N),q)}function H(N){return N===null||N===34||N===39||N===60||N===61||N===96?n(N):N===47||N===62||Et(N)?z(N):(e.consume(N),H)}function V(N){return N===47||N===62||Et(N)?z(N):n(N)}function te(N){return N===62?(e.consume(N),e.exit("htmlTextData"),e.exit("htmlText"),t):n(N)}function Z(N){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(N),e.exit("lineEnding"),B}function B(N){return dt(N)?ht(e,$,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(N):$(N)}function $(N){return e.enter("htmlTextData"),a(N)}}const vm={name:"labelEnd",resolveAll:c2,resolveTo:d2,tokenize:f2},a2={tokenize:h2},l2={tokenize:p2},u2={tokenize:m2};function c2(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",t+=i}}return e.length!==n.length&&Qn(e,0,e.length,n),e}function d2(e,t){let n=e.length,r=0,i,o,a,u;for(;n--;)if(i=e[n][1],o){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(a){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(o=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(a=n);const c={type:e[o][1].type==="labelLink"?"link":"image",start:{...e[o][1].start},end:{...e[e.length-1][1].end}},f={type:"label",start:{...e[o][1].start},end:{...e[a][1].end}},h={type:"labelText",start:{...e[o+r+2][1].end},end:{...e[a-2][1].start}};return u=[["enter",c,t],["enter",f,t]],u=ar(u,e.slice(o+1,o+r+3)),u=ar(u,[["enter",h,t]]),u=ar(u,Vc(t.parser.constructs.insideSpan.null,e.slice(o+r+4,a-3),t)),u=ar(u,[["exit",h,t],e[a-2],e[a-1],["exit",f,t]]),u=ar(u,e.slice(a+1)),u=ar(u,[["exit",c,t]]),Qn(e,o,e.length,u),e}function f2(e,t,n){const r=this;let i=r.events.length,o,a;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){o=r.events[i][1];break}return u;function u(v){return o?o._inactive?p(v):(a=r.parser.defined.includes(wr(r.sliceSerialize({start:o.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(v),e.exit("labelMarker"),e.exit("labelEnd"),c):n(v)}function c(v){return v===40?e.attempt(a2,h,a?h:p)(v):v===91?e.attempt(l2,h,a?f:p)(v):a?h(v):p(v)}function f(v){return e.attempt(u2,h,p)(v)}function h(v){return t(v)}function p(v){return o._balanced=!0,n(v)}}function h2(e,t,n){return r;function r(p){return e.enter("resource"),e.enter("resourceMarker"),e.consume(p),e.exit("resourceMarker"),i}function i(p){return Et(p)?Wa(e,o)(p):o(p)}function o(p){return p===41?h(p):Yk(e,a,u,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function a(p){return Et(p)?Wa(e,c)(p):h(p)}function u(p){return n(p)}function c(p){return p===34||p===39||p===40?Jk(e,f,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):h(p)}function f(p){return Et(p)?Wa(e,h)(p):h(p)}function h(p){return p===41?(e.enter("resourceMarker"),e.consume(p),e.exit("resourceMarker"),e.exit("resource"),t):n(p)}}function p2(e,t,n){const r=this;return i;function i(u){return Gk.call(r,e,o,a,"reference","referenceMarker","referenceString")(u)}function o(u){return r.parser.defined.includes(wr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(u):n(u)}function a(u){return n(u)}}function m2(e,t,n){return r;function r(o){return e.enter("reference"),e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),i}function i(o){return o===93?(e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),e.exit("reference"),t):n(o)}}const g2={name:"labelStartImage",resolveAll:vm.resolveAll,tokenize:y2};function y2(e,t,n){const r=this;return i;function i(u){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(u),e.exit("labelImageMarker"),o}function o(u){return u===91?(e.enter("labelMarker"),e.consume(u),e.exit("labelMarker"),e.exit("labelImage"),a):n(u)}function a(u){return u===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(u):t(u)}}const v2={name:"labelStartLink",resolveAll:vm.resolveAll,tokenize:x2};function x2(e,t,n){const r=this;return i;function i(a){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelLink"),o}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const fh={name:"lineEnding",tokenize:b2};function b2(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),ht(e,t,"linePrefix")}}const Xu={name:"thematicBreak",tokenize:w2};function w2(e,t,n){let r=0,i;return o;function o(f){return e.enter("thematicBreak"),a(f)}function a(f){return i=f,u(f)}function u(f){return f===i?(e.enter("thematicBreakSequence"),c(f)):r>=3&&(f===null||Ze(f))?(e.exit("thematicBreak"),t(f)):n(f)}function c(f){return f===i?(e.consume(f),r++,c):(e.exit("thematicBreakSequence"),dt(f)?ht(e,u,"whitespace")(f):u(f))}}const On={continuation:{tokenize:_2},exit:j2,name:"list",tokenize:E2},k2={partial:!0,tokenize:N2},S2={partial:!0,tokenize:C2};function E2(e,t,n){const r=this,i=r.events[r.events.length-1];let o=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,a=0;return u;function u(y){const w=r.containerState.type||(y===42||y===43||y===45?"listUnordered":"listOrdered");if(w==="listUnordered"?!r.containerState.marker||y===r.containerState.marker:vp(y)){if(r.containerState.type||(r.containerState.type=w,e.enter(w,{_container:!0})),w==="listUnordered")return e.enter("listItemPrefix"),y===42||y===45?e.check(Xu,n,f)(y):f(y);if(!r.interrupt||y===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(y)}return n(y)}function c(y){return vp(y)&&++a<10?(e.consume(y),c):(!r.interrupt||a<2)&&(r.containerState.marker?y===r.containerState.marker:y===41||y===46)?(e.exit("listItemValue"),f(y)):n(y)}function f(y){return e.enter("listItemMarker"),e.consume(y),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||y,e.check(gl,r.interrupt?n:h,e.attempt(k2,v,p))}function h(y){return r.containerState.initialBlankLine=!0,o++,v(y)}function p(y){return dt(y)?(e.enter("listItemPrefixWhitespace"),e.consume(y),e.exit("listItemPrefixWhitespace"),v):n(y)}function v(y){return r.containerState.size=o+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(y)}}function _2(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(gl,i,o);function i(u){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,ht(e,t,"listItemIndent",r.containerState.size+1)(u)}function o(u){return r.containerState.furtherBlankLines||!dt(u)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(u)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(S2,t,a)(u))}function a(u){return r.containerState._closeFlow=!0,r.interrupt=void 0,ht(e,e.attempt(On,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u)}}function C2(e,t,n){const r=this;return ht(e,i,"listItemIndent",r.containerState.size+1);function i(o){const a=r.events[r.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===r.containerState.size?t(o):n(o)}}function j2(e){e.exit(this.containerState.type)}function N2(e,t,n){const r=this;return ht(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(o){const a=r.events[r.events.length-1];return!dt(o)&&a&&a[1].type==="listItemPrefixWhitespace"?t(o):n(o)}}const b0={name:"setextUnderline",resolveTo:T2,tokenize:I2};function T2(e,t){let n=e.length,r,i,o;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!o&&e[n][1].type==="definition"&&(o=n);const a={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[i][1].type="setextHeadingText",o?(e.splice(i,0,["enter",a,t]),e.splice(o+1,0,["exit",e[r][1],t]),e[r][1].end={...e[o][1].end}):e[r][1]=a,e.push(["exit",a,t]),e}function I2(e,t,n){const r=this;let i;return o;function o(f){let h=r.events.length,p;for(;h--;)if(r.events[h][1].type!=="lineEnding"&&r.events[h][1].type!=="linePrefix"&&r.events[h][1].type!=="content"){p=r.events[h][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||p)?(e.enter("setextHeadingLine"),i=f,a(f)):n(f)}function a(f){return e.enter("setextHeadingLineSequence"),u(f)}function u(f){return f===i?(e.consume(f),u):(e.exit("setextHeadingLineSequence"),dt(f)?ht(e,c,"lineSuffix")(f):c(f))}function c(f){return f===null||Ze(f)?(e.exit("setextHeadingLine"),t(f)):n(f)}}const P2={tokenize:R2};function R2(e){const t=this,n=e.attempt(gl,r,e.attempt(this.parser.constructs.flowInitial,i,ht(e,e.attempt(this.parser.constructs.flow,i,e.attempt(LO,i)),"linePrefix")));return n;function r(o){if(o===null){e.consume(o);return}return e.enter("lineEndingBlank"),e.consume(o),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const A2={resolveAll:Xk()},M2=Qk("string"),O2=Qk("text");function Qk(e){return{resolveAll:Xk(e==="text"?D2:void 0),tokenize:t};function t(n){const r=this,i=this.parser.constructs[e],o=n.attempt(i,a,u);return a;function a(h){return f(h)?o(h):u(h)}function u(h){if(h===null){n.consume(h);return}return n.enter("data"),n.consume(h),c}function c(h){return f(h)?(n.exit("data"),o(h)):(n.consume(h),c)}function f(h){if(h===null)return!0;const p=i[h];let v=-1;if(p)for(;++v<p.length;){const y=p[v];if(!y.previous||y.previous.call(r,r.previous))return!0}return!1}}}function Xk(e){return t;function t(n,r){let i=-1,o;for(;++i<=n.length;)o===void 0?n[i]&&n[i][1].type==="data"&&(o=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==o+2&&(n[o][1].end=n[i-1][1].end,n.splice(o+2,i-o-2),i=o+2),o=void 0);return e?e(n,r):n}}function D2(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let o=i.length,a=-1,u=0,c;for(;o--;){const f=i[o];if(typeof f=="string"){for(a=f.length;f.charCodeAt(a-1)===32;)u++,a--;if(a)break;a=-1}else if(f===-2)c=!0,u++;else if(f!==-1){o++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(u=0),u){const f={type:n===e.length||c||u<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?a:r.start._bufferIndex+a,_index:r.start._index+o,line:r.end.line,column:r.end.column-u,offset:r.end.offset-u},end:{...r.end}};r.end={...f.start},r.start.offset===r.end.offset?Object.assign(r,f):(e.splice(n,0,["enter",f,t],["exit",f,t]),n+=2)}n++}return e}const L2={42:On,43:On,45:On,48:On,49:On,50:On,51:On,52:On,53:On,54:On,55:On,56:On,57:On,62:Hk},$2={91:UO},F2={[-2]:dh,[-1]:dh,32:dh},B2={35:YO,42:Xu,45:[b0,Xu],60:XO,61:b0,95:Xu,96:v0,126:v0},z2={38:qk,92:Vk},U2={[-5]:fh,[-4]:fh,[-3]:fh,33:g2,38:qk,42:xp,60:[vO,s2],91:v2,92:[qO,Vk],93:vm,95:xp,96:PO},W2={null:[xp,A2]},H2={null:[42,95]},V2={null:[]},q2=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:H2,contentInitial:$2,disable:V2,document:L2,flow:B2,flowInitial:F2,insideSpan:W2,string:z2,text:U2},Symbol.toStringTag,{value:"Module"}));function K2(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},o=[];let a=[],u=[];const c={attempt:U(O),check:U(R),consume:C,enter:j,exit:I,interrupt:U(R,{interrupt:!0})},f={code:null,containerState:{},defineSkip:S,events:[],now:w,parser:e,previous:null,sliceSerialize:v,sliceStream:y,write:p};let h=t.tokenize.call(f,c);return t.resolveAll&&o.push(t),f;function p(L){return a=ar(a,L),k(),a[a.length-1]!==null?[]:(re(t,0),f.events=Vc(o,f.events,f),f.events)}function v(L,se){return G2(y(L),se)}function y(L){return Y2(a,L)}function w(){const{_bufferIndex:L,_index:se,line:q,column:H,offset:V}=r;return{_bufferIndex:L,_index:se,line:q,column:H,offset:V}}function S(L){i[L.line]=L.column,M()}function k(){let L;for(;r._index<a.length;){const se=a[r._index];if(typeof se=="string")for(L=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===L&&r._bufferIndex<se.length;)_(se.charCodeAt(r._bufferIndex));else _(se)}}function _(L){h=h(L)}function C(L){Ze(L)?(r.line++,r.column=1,r.offset+=L===-3?2:1,M()):L!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++)),f.previous=L}function j(L,se){const q=se||{};return q.type=L,q.start=w(),f.events.push(["enter",q,f]),u.push(q),q}function I(L){const se=u.pop();return se.end=w(),f.events.push(["exit",se,f]),se}function O(L,se){re(L,se.from)}function R(L,se){se.restore()}function U(L,se){return q;function q(H,V,te){let Z,B,$,N;return Array.isArray(H)?ee(H):"tokenize"in H?ee([H]):F(H);function F(ge){return me;function me(je){const Ne=je!==null&&ge[je],Ie=je!==null&&ge.null,ie=[...Array.isArray(Ne)?Ne:Ne?[Ne]:[],...Array.isArray(Ie)?Ie:Ie?[Ie]:[]];return ee(ie)(je)}}function ee(ge){return Z=ge,B=0,ge.length===0?te:A(ge[B])}function A(ge){return me;function me(je){return N=z(),$=ge,ge.partial||(f.currentConstruct=ge),ge.name&&f.parser.constructs.disable.null.includes(ge.name)?he():ge.tokenize.call(se?Object.assign(Object.create(f),se):f,c,be,he)(je)}}function be(ge){return L($,N),V}function he(ge){return N.restore(),++B<Z.length?A(Z[B]):te}}}function re(L,se){L.resolveAll&&!o.includes(L)&&o.push(L),L.resolve&&Qn(f.events,se,f.events.length-se,L.resolve(f.events.slice(se),f)),L.resolveTo&&(f.events=L.resolveTo(f.events,f))}function z(){const L=w(),se=f.previous,q=f.currentConstruct,H=f.events.length,V=Array.from(u);return{from:H,restore:te};function te(){r=L,f.previous=se,f.currentConstruct=q,f.events.length=H,u=V,M()}}function M(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function Y2(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,o=t.end._bufferIndex;let a;if(n===i)a=[e[n].slice(r,o)];else{if(a=e.slice(n,i),r>-1){const u=a[0];typeof u=="string"?a[0]=u.slice(r):a.shift()}o>0&&a.push(e[i].slice(0,o))}return a}function G2(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const o=e[n];let a;if(typeof o=="string")a=o;else switch(o){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=t?" ":"	";break}case-1:{if(!t&&i)continue;a=" ";break}default:a=String.fromCharCode(o)}i=o===-2,r.push(a)}return r.join("")}function J2(e){const r={constructs:Uk([q2,...(e||{}).extensions||[]]),content:i(dO),defined:[],document:i(hO),flow:i(P2),lazy:{},string:i(M2),text:i(O2)};return r;function i(o){return a;function a(u){return K2(r,o,u)}}}function Q2(e){for(;!Kk(e););return e}const w0=/[\0\t\n\r]/g;function X2(){let e=1,t="",n=!0,r;return i;function i(o,a,u){const c=[];let f,h,p,v,y;for(o=t+(typeof o=="string"?o.toString():new TextDecoder(a||void 0).decode(o)),p=0,t="",n&&(o.charCodeAt(0)===65279&&p++,n=void 0);p<o.length;){if(w0.lastIndex=p,f=w0.exec(o),v=f&&f.index!==void 0?f.index:o.length,y=o.charCodeAt(v),!f){t=o.slice(p);break}if(y===10&&p===v&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),p<v&&(c.push(o.slice(p,v)),e+=v-p),y){case 0:{c.push(65533),e++;break}case 9:{for(h=Math.ceil(e/4)*4,c.push(-2);e++<h;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:r=!0,e=1}p=v+1}return u&&(r&&c.push(-5),t&&c.push(t),c.push(null)),c}}const Z2=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function eD(e){return e.replace(Z2,tD)}function tD(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),o=i===120||i===88;return Wk(n.slice(o?2:1),o?16:10)}return ym(n)||e}const Zk={}.hasOwnProperty;function nD(e,t,n){return typeof t!="string"&&(n=t,t=void 0),rD(n)(Q2(J2(n).document().write(X2()(e,t,!0))))}function rD(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(Jt),autolinkProtocol:z,autolinkEmail:z,atxHeading:o(rt),blockQuote:o(Ie),characterEscape:z,characterReference:z,codeFenced:o(ie),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:o(ie,a),codeText:o(Te,a),codeTextData:z,data:z,codeFlowValue:z,definition:o(Ve),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:o(Ke),hardBreakEscape:o(st),hardBreakTrailing:o(st),htmlFlow:o(kt,a),htmlFlowData:z,htmlText:o(kt,a),htmlTextData:z,image:o(un),label:a,link:o(Jt),listItem:o(Pt),listItemValue:v,listOrdered:o(bt,p),listUnordered:o(bt),paragraph:o(J),reference:A,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:o(rt),strong:o(fe),thematicBreak:o(_e)},exit:{atxHeading:c(),atxHeadingSequence:O,autolink:c(),autolinkEmail:Ne,autolinkProtocol:je,blockQuote:c(),characterEscapeValue:M,characterReferenceMarkerHexadecimal:he,characterReferenceMarkerNumeric:he,characterReferenceValue:ge,characterReference:me,codeFenced:c(k),codeFencedFence:S,codeFencedFenceInfo:y,codeFencedFenceMeta:w,codeFlowValue:M,codeIndented:c(_),codeText:c(V),codeTextData:M,data:M,definition:c(),definitionDestinationString:I,definitionLabelString:C,definitionTitleString:j,emphasis:c(),hardBreakEscape:c(se),hardBreakTrailing:c(se),htmlFlow:c(q),htmlFlowData:M,htmlText:c(H),htmlTextData:M,image:c(Z),label:$,labelText:B,lineEnding:L,link:c(te),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:be,resourceDestinationString:N,resourceTitleString:F,resource:ee,setextHeading:c(re),setextHeadingLineSequence:U,setextHeadingText:R,strong:c(),thematicBreak:c()}};e1(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(Y){let P={type:"root",children:[]};const K={stack:[P],tokenStack:[],config:t,enter:u,exit:f,buffer:a,resume:h,data:n},le=[];let X=-1;for(;++X<Y.length;)if(Y[X][1].type==="listOrdered"||Y[X][1].type==="listUnordered")if(Y[X][0]==="enter")le.push(X);else{const ue=le.pop();X=i(Y,ue,X)}for(X=-1;++X<Y.length;){const ue=t[Y[X][0]];Zk.call(ue,Y[X][1].type)&&ue[Y[X][1].type].call(Object.assign({sliceSerialize:Y[X][2].sliceSerialize},K),Y[X][1])}if(K.tokenStack.length>0){const ue=K.tokenStack[K.tokenStack.length-1];(ue[1]||k0).call(K,void 0,ue[0])}for(P.position={start:_i(Y.length>0?Y[0][1].start:{line:1,column:1,offset:0}),end:_i(Y.length>0?Y[Y.length-2][1].end:{line:1,column:1,offset:0})},X=-1;++X<t.transforms.length;)P=t.transforms[X](P)||P;return P}function i(Y,P,K){let le=P-1,X=-1,ue=!1,D,G,de,pe;for(;++le<=K;){const Re=Y[le];switch(Re[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Re[0]==="enter"?X++:X--,pe=void 0;break}case"lineEndingBlank":{Re[0]==="enter"&&(D&&!pe&&!X&&!de&&(de=le),pe=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:pe=void 0}if(!X&&Re[0]==="enter"&&Re[1].type==="listItemPrefix"||X===-1&&Re[0]==="exit"&&(Re[1].type==="listUnordered"||Re[1].type==="listOrdered")){if(D){let Pe=le;for(G=void 0;Pe--;){const De=Y[Pe];if(De[1].type==="lineEnding"||De[1].type==="lineEndingBlank"){if(De[0]==="exit")continue;G&&(Y[G][1].type="lineEndingBlank",ue=!0),De[1].type="lineEnding",G=Pe}else if(!(De[1].type==="linePrefix"||De[1].type==="blockQuotePrefix"||De[1].type==="blockQuotePrefixWhitespace"||De[1].type==="blockQuoteMarker"||De[1].type==="listItemIndent"))break}de&&(!G||de<G)&&(D._spread=!0),D.end=Object.assign({},G?Y[G][1].start:Re[1].end),Y.splice(G||le,0,["exit",D,Re[2]]),le++,K++}if(Re[1].type==="listItemPrefix"){const Pe={type:"listItem",_spread:!1,start:Object.assign({},Re[1].start),end:void 0};D=Pe,Y.splice(le,0,["enter",Pe,Re[2]]),le++,K++,de=void 0,pe=!0}}}return Y[P][1]._spread=ue,K}function o(Y,P){return K;function K(le){u.call(this,Y(le),le),P&&P.call(this,le)}}function a(){this.stack.push({type:"fragment",children:[]})}function u(Y,P,K){this.stack[this.stack.length-1].children.push(Y),this.stack.push(Y),this.tokenStack.push([P,K||void 0]),Y.position={start:_i(P.start),end:void 0}}function c(Y){return P;function P(K){Y&&Y.call(this,K),f.call(this,K)}}function f(Y,P){const K=this.stack.pop(),le=this.tokenStack.pop();if(le)le[0].type!==Y.type&&(P?P.call(this,Y,le[0]):(le[1]||k0).call(this,Y,le[0]));else throw new Error("Cannot close `"+Y.type+"` ("+Ua({start:Y.start,end:Y.end})+"): its not open");K.position.end=_i(Y.end)}function h(){return gm(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function v(Y){if(this.data.expectingFirstListItemValue){const P=this.stack[this.stack.length-2];P.start=Number.parseInt(this.sliceSerialize(Y),10),this.data.expectingFirstListItemValue=void 0}}function y(){const Y=this.resume(),P=this.stack[this.stack.length-1];P.lang=Y}function w(){const Y=this.resume(),P=this.stack[this.stack.length-1];P.meta=Y}function S(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function k(){const Y=this.resume(),P=this.stack[this.stack.length-1];P.value=Y.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function _(){const Y=this.resume(),P=this.stack[this.stack.length-1];P.value=Y.replace(/(\r?\n|\r)$/g,"")}function C(Y){const P=this.resume(),K=this.stack[this.stack.length-1];K.label=P,K.identifier=wr(this.sliceSerialize(Y)).toLowerCase()}function j(){const Y=this.resume(),P=this.stack[this.stack.length-1];P.title=Y}function I(){const Y=this.resume(),P=this.stack[this.stack.length-1];P.url=Y}function O(Y){const P=this.stack[this.stack.length-1];if(!P.depth){const K=this.sliceSerialize(Y).length;P.depth=K}}function R(){this.data.setextHeadingSlurpLineEnding=!0}function U(Y){const P=this.stack[this.stack.length-1];P.depth=this.sliceSerialize(Y).codePointAt(0)===61?1:2}function re(){this.data.setextHeadingSlurpLineEnding=void 0}function z(Y){const K=this.stack[this.stack.length-1].children;let le=K[K.length-1];(!le||le.type!=="text")&&(le=ye(),le.position={start:_i(Y.start),end:void 0},K.push(le)),this.stack.push(le)}function M(Y){const P=this.stack.pop();P.value+=this.sliceSerialize(Y),P.position.end=_i(Y.end)}function L(Y){const P=this.stack[this.stack.length-1];if(this.data.atHardBreak){const K=P.children[P.children.length-1];K.position.end=_i(Y.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(P.type)&&(z.call(this,Y),M.call(this,Y))}function se(){this.data.atHardBreak=!0}function q(){const Y=this.resume(),P=this.stack[this.stack.length-1];P.value=Y}function H(){const Y=this.resume(),P=this.stack[this.stack.length-1];P.value=Y}function V(){const Y=this.resume(),P=this.stack[this.stack.length-1];P.value=Y}function te(){const Y=this.stack[this.stack.length-1];if(this.data.inReference){const P=this.data.referenceType||"shortcut";Y.type+="Reference",Y.referenceType=P,delete Y.url,delete Y.title}else delete Y.identifier,delete Y.label;this.data.referenceType=void 0}function Z(){const Y=this.stack[this.stack.length-1];if(this.data.inReference){const P=this.data.referenceType||"shortcut";Y.type+="Reference",Y.referenceType=P,delete Y.url,delete Y.title}else delete Y.identifier,delete Y.label;this.data.referenceType=void 0}function B(Y){const P=this.sliceSerialize(Y),K=this.stack[this.stack.length-2];K.label=eD(P),K.identifier=wr(P).toLowerCase()}function $(){const Y=this.stack[this.stack.length-1],P=this.resume(),K=this.stack[this.stack.length-1];if(this.data.inReference=!0,K.type==="link"){const le=Y.children;K.children=le}else K.alt=P}function N(){const Y=this.resume(),P=this.stack[this.stack.length-1];P.url=Y}function F(){const Y=this.resume(),P=this.stack[this.stack.length-1];P.title=Y}function ee(){this.data.inReference=void 0}function A(){this.data.referenceType="collapsed"}function be(Y){const P=this.resume(),K=this.stack[this.stack.length-1];K.label=P,K.identifier=wr(this.sliceSerialize(Y)).toLowerCase(),this.data.referenceType="full"}function he(Y){this.data.characterReferenceType=Y.type}function ge(Y){const P=this.sliceSerialize(Y),K=this.data.characterReferenceType;let le;K?(le=Wk(P,K==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):le=ym(P);const X=this.stack[this.stack.length-1];X.value+=le}function me(Y){const P=this.stack.pop();P.position.end=_i(Y.end)}function je(Y){M.call(this,Y);const P=this.stack[this.stack.length-1];P.url=this.sliceSerialize(Y)}function Ne(Y){M.call(this,Y);const P=this.stack[this.stack.length-1];P.url="mailto:"+this.sliceSerialize(Y)}function Ie(){return{type:"blockquote",children:[]}}function ie(){return{type:"code",lang:null,meta:null,value:""}}function Te(){return{type:"inlineCode",value:""}}function Ve(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ke(){return{type:"emphasis",children:[]}}function rt(){return{type:"heading",depth:0,children:[]}}function st(){return{type:"break"}}function kt(){return{type:"html",value:""}}function un(){return{type:"image",title:null,url:"",alt:null}}function Jt(){return{type:"link",title:null,url:"",children:[]}}function bt(Y){return{type:"list",ordered:Y.type==="listOrdered",start:null,spread:Y._spread,children:[]}}function Pt(Y){return{type:"listItem",spread:Y._spread,checked:null,children:[]}}function J(){return{type:"paragraph",children:[]}}function fe(){return{type:"strong",children:[]}}function ye(){return{type:"text",value:""}}function _e(){return{type:"thematicBreak"}}}function _i(e){return{line:e.line,column:e.column,offset:e.offset}}function e1(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?e1(e,r):iD(e,r)}}function iD(e,t){let n;for(n in t)if(Zk.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function k0(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Ua({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Ua({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Ua({start:t.start,end:t.end})+") is still open")}function sD(e){const t=this;t.parser=n;function n(r){return nD(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function oD(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function aD(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function lD(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function uD(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function cD(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function dD(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=zo(r.toLowerCase()),o=e.footnoteOrder.indexOf(r);let a,u=e.footnoteCounts.get(r);u===void 0?(u=0,e.footnoteOrder.push(r),a=e.footnoteOrder.length):a=o+1,u+=1,e.footnoteCounts.set(r,u);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(u>1?"-"+u:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};e.patch(t,c);const f={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,f),e.applyData(t,f)}function fD(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function hD(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function t1(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),o=i[0];o&&o.type==="text"?o.value="["+o.value:i.unshift({type:"text",value:"["});const a=i[i.length-1];return a&&a.type==="text"?a.value+=r:i.push({type:"text",value:r}),i}function pD(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return t1(e,t);const i={src:zo(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const o={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,o),e.applyData(t,o)}function mD(e,t){const n={src:zo(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function gD(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function yD(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return t1(e,t);const i={href:zo(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const o={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,o),e.applyData(t,o)}function vD(e,t){const n={href:zo(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function xD(e,t,n){const r=e.all(t),i=n?bD(n):n1(t),o={},a=[];if(typeof t.checked=="boolean"){const h=r[0];let p;h&&h.type==="element"&&h.tagName==="p"?p=h:(p={type:"element",tagName:"p",properties:{},children:[]},r.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let u=-1;for(;++u<r.length;){const h=r[u];(i||u!==0||h.type!=="element"||h.tagName!=="p")&&a.push({type:"text",value:`
`}),h.type==="element"&&h.tagName==="p"&&!i?a.push(...h.children):a.push(h)}const c=r[r.length-1];c&&(i||c.type!=="element"||c.tagName!=="p")&&a.push({type:"text",value:`
`});const f={type:"element",tagName:"li",properties:o,children:a};return e.patch(t,f),e.applyData(t,f)}function bD(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=n1(n[r])}return t}function n1(e){const t=e.spread;return t??e.children.length>1}function wD(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const a=r[i];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,o),e.applyData(t,o)}function kD(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function SD(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function ED(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function _D(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const a={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],a),i.push(a)}if(n.length>0){const a={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},u=fm(t.children[1]),c=Ok(t.children[t.children.length-1]);u&&c&&(a.position={start:u,end:c}),i.push(a)}const o={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,o),e.applyData(t,o)}function CD(e,t,n){const r=n?n.children:void 0,o=(r?r.indexOf(t):1)===0?"th":"td",a=n&&n.type==="table"?n.align:void 0,u=a?a.length:t.children.length;let c=-1;const f=[];for(;++c<u;){const p=t.children[c],v={},y=a?a[c]:void 0;y&&(v.align=y);let w={type:"element",tagName:o,properties:v,children:[]};p&&(w.children=e.all(p),e.patch(p,w),w=e.applyData(p,w)),f.push(w)}const h={type:"element",tagName:"tr",properties:{},children:e.wrap(f,!0)};return e.patch(t,h),e.applyData(t,h)}function jD(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const S0=9,E0=32;function ND(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const o=[];for(;r;)o.push(_0(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return o.push(_0(t.slice(i),i>0,!1)),o.join("")}function _0(e,t,n){let r=0,i=e.length;if(t){let o=e.codePointAt(r);for(;o===S0||o===E0;)r++,o=e.codePointAt(r)}if(n){let o=e.codePointAt(i-1);for(;o===S0||o===E0;)i--,o=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function TD(e,t){const n={type:"text",value:ND(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function ID(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const PD={blockquote:oD,break:aD,code:lD,delete:uD,emphasis:cD,footnoteReference:dD,heading:fD,html:hD,imageReference:pD,image:mD,inlineCode:gD,linkReference:yD,link:vD,listItem:xD,list:wD,paragraph:kD,root:SD,strong:ED,table:_D,tableCell:jD,tableRow:CD,text:TD,thematicBreak:ID,toml:$u,yaml:$u,definition:$u,footnoteDefinition:$u};function $u(){}const r1=-1,qc=0,Ha=1,gc=2,xm=3,bm=4,wm=5,km=6,i1=7,s1=8,C0=typeof self=="object"?self:globalThis,RD=(e,t)=>{const n=(i,o)=>(e.set(o,i),i),r=i=>{if(e.has(i))return e.get(i);const[o,a]=t[i];switch(o){case qc:case r1:return n(a,i);case Ha:{const u=n([],i);for(const c of a)u.push(r(c));return u}case gc:{const u=n({},i);for(const[c,f]of a)u[r(c)]=r(f);return u}case xm:return n(new Date(a),i);case bm:{const{source:u,flags:c}=a;return n(new RegExp(u,c),i)}case wm:{const u=n(new Map,i);for(const[c,f]of a)u.set(r(c),r(f));return u}case km:{const u=n(new Set,i);for(const c of a)u.add(r(c));return u}case i1:{const{name:u,message:c}=a;return n(new C0[u](c),i)}case s1:return n(BigInt(a),i);case"BigInt":return n(Object(BigInt(a)),i);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:u}=new Uint8Array(a);return n(new DataView(u),a)}}return n(new C0[o](a),i)};return r},j0=e=>RD(new Map,e)(0),fo="",{toString:AD}={},{keys:MD}=Object,Ta=e=>{const t=typeof e;if(t!=="object"||!e)return[qc,t];const n=AD.call(e).slice(8,-1);switch(n){case"Array":return[Ha,fo];case"Object":return[gc,fo];case"Date":return[xm,fo];case"RegExp":return[bm,fo];case"Map":return[wm,fo];case"Set":return[km,fo];case"DataView":return[Ha,n]}return n.includes("Array")?[Ha,n]:n.includes("Error")?[i1,n]:[gc,n]},Fu=([e,t])=>e===qc&&(t==="function"||t==="symbol"),OD=(e,t,n,r)=>{const i=(a,u)=>{const c=r.push(a)-1;return n.set(u,c),c},o=a=>{if(n.has(a))return n.get(a);let[u,c]=Ta(a);switch(u){case qc:{let h=a;switch(c){case"bigint":u=s1,h=a.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);h=null;break;case"undefined":return i([r1],a)}return i([u,h],a)}case Ha:{if(c){let v=a;return c==="DataView"?v=new Uint8Array(a.buffer):c==="ArrayBuffer"&&(v=new Uint8Array(a)),i([c,[...v]],a)}const h=[],p=i([u,h],a);for(const v of a)h.push(o(v));return p}case gc:{if(c)switch(c){case"BigInt":return i([c,a.toString()],a);case"Boolean":case"Number":case"String":return i([c,a.valueOf()],a)}if(t&&"toJSON"in a)return o(a.toJSON());const h=[],p=i([u,h],a);for(const v of MD(a))(e||!Fu(Ta(a[v])))&&h.push([o(v),o(a[v])]);return p}case xm:return i([u,a.toISOString()],a);case bm:{const{source:h,flags:p}=a;return i([u,{source:h,flags:p}],a)}case wm:{const h=[],p=i([u,h],a);for(const[v,y]of a)(e||!(Fu(Ta(v))||Fu(Ta(y))))&&h.push([o(v),o(y)]);return p}case km:{const h=[],p=i([u,h],a);for(const v of a)(e||!Fu(Ta(v)))&&h.push(o(v));return p}}const{message:f}=a;return i([u,{name:c,message:f}],a)};return o},N0=(e,{json:t,lossy:n}={})=>{const r=[];return OD(!(t||n),!!t,new Map,r)(e),r},yc=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?j0(N0(e,t)):structuredClone(e):(e,t)=>j0(N0(e,t));function DD(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function LD(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function $D(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||DD,r=e.options.footnoteBackLabel||LD,i=e.options.footnoteLabel||"Footnotes",o=e.options.footnoteLabelTagName||"h2",a=e.options.footnoteLabelProperties||{className:["sr-only"]},u=[];let c=-1;for(;++c<e.footnoteOrder.length;){const f=e.footnoteById.get(e.footnoteOrder[c]);if(!f)continue;const h=e.all(f),p=String(f.identifier).toUpperCase(),v=zo(p.toLowerCase());let y=0;const w=[],S=e.footnoteCounts.get(p);for(;S!==void 0&&++y<=S;){w.length>0&&w.push({type:"text",value:" "});let C=typeof n=="string"?n:n(c,y);typeof C=="string"&&(C={type:"text",value:C}),w.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+v+(y>1?"-"+y:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,y),className:["data-footnote-backref"]},children:Array.isArray(C)?C:[C]})}const k=h[h.length-1];if(k&&k.type==="element"&&k.tagName==="p"){const C=k.children[k.children.length-1];C&&C.type==="text"?C.value+=" ":k.children.push({type:"text",value:" "}),k.children.push(...w)}else h.push(...w);const _={type:"element",tagName:"li",properties:{id:t+"fn-"+v},children:e.wrap(h,!0)};e.patch(f,_),u.push(_)}if(u.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...yc(a),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(u,!0)},{type:"text",value:`
`}]}}const Kc=(function(e){if(e==null)return UD;if(typeof e=="function")return Yc(e);if(typeof e=="object")return Array.isArray(e)?FD(e):BD(e);if(typeof e=="string")return zD(e);throw new Error("Expected function, string, or object as test")});function FD(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Kc(e[n]);return Yc(r);function r(...i){let o=-1;for(;++o<t.length;)if(t[o].apply(this,i))return!0;return!1}}function BD(e){const t=e;return Yc(n);function n(r){const i=r;let o;for(o in e)if(i[o]!==t[o])return!1;return!0}}function zD(e){return Yc(t);function t(n){return n&&n.type===e}}function Yc(e){return t;function t(n,r,i){return!!(WD(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function UD(){return!0}function WD(e){return e!==null&&typeof e=="object"&&"type"in e}const o1=[],HD=!0,bp=!1,VD="skip";function a1(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const o=Kc(i),a=r?-1:1;u(e,void 0,[])();function u(c,f,h){const p=c&&typeof c=="object"?c:{};if(typeof p.type=="string"){const y=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(v,"name",{value:"node ("+(c.type+(y?"<"+y+">":""))+")"})}return v;function v(){let y=o1,w,S,k;if((!t||o(c,f,h[h.length-1]||void 0))&&(y=qD(n(c,h)),y[0]===bp))return y;if("children"in c&&c.children){const _=c;if(_.children&&y[0]!==VD)for(S=(r?_.children.length:-1)+a,k=h.concat(_);S>-1&&S<_.children.length;){const C=_.children[S];if(w=u(C,S,k)(),w[0]===bp)return w;S=typeof w[1]=="number"?w[1]:S+a}}return y}}}function qD(e){return Array.isArray(e)?e:typeof e=="number"?[HD,e]:e==null?o1:[e]}function Gc(e,t,n,r){let i,o,a;typeof t=="function"&&typeof n!="function"?(o=void 0,a=t,i=n):(o=t,a=n,i=r),a1(e,o,u,i);function u(c,f){const h=f[f.length-1],p=h?h.children.indexOf(c):void 0;return a(c,p,h)}}const wp={}.hasOwnProperty,KD={};function YD(e,t){const n=t||KD,r=new Map,i=new Map,o=new Map,a={...PD,...n.handlers},u={all:f,applyData:JD,definitionById:r,footnoteById:i,footnoteCounts:o,footnoteOrder:[],handlers:a,one:c,options:n,patch:GD,wrap:XD};return Gc(e,function(h){if(h.type==="definition"||h.type==="footnoteDefinition"){const p=h.type==="definition"?r:i,v=String(h.identifier).toUpperCase();p.has(v)||p.set(v,h)}}),u;function c(h,p){const v=h.type,y=u.handlers[v];if(wp.call(u.handlers,v)&&y)return y(u,h,p);if(u.options.passThrough&&u.options.passThrough.includes(v)){if("children"in h){const{children:S,...k}=h,_=yc(k);return _.children=u.all(h),_}return yc(h)}return(u.options.unknownHandler||QD)(u,h,p)}function f(h){const p=[];if("children"in h){const v=h.children;let y=-1;for(;++y<v.length;){const w=u.one(v[y],h);if(w){if(y&&v[y-1].type==="break"&&(!Array.isArray(w)&&w.type==="text"&&(w.value=T0(w.value)),!Array.isArray(w)&&w.type==="element")){const S=w.children[0];S&&S.type==="text"&&(S.value=T0(S.value))}Array.isArray(w)?p.push(...w):p.push(w)}}}return p}}function GD(e,t){e.position&&(t.position=LM(e))}function JD(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,o=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const a="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:a}}n.type==="element"&&o&&Object.assign(n.properties,yc(o)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function QD(e,t){const n=t.data||{},r="value"in t&&!(wp.call(n,"hProperties")||wp.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function XD(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function T0(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function I0(e,t){const n=YD(e,t),r=n.one(e,void 0),i=$D(n),o=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&o.children.push({type:"text",value:`
`},i),o}function ZD(e,t){return e&&"run"in e?async function(n,r){const i=I0(n,{file:r,...t});await e.run(i,r)}:function(n,r){return I0(n,{file:r,...e||t})}}function P0(e){if(e)throw e}var hh,R0;function eL(){if(R0)return hh;R0=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(f){return typeof Array.isArray=="function"?Array.isArray(f):t.call(f)==="[object Array]"},o=function(f){if(!f||t.call(f)!=="[object Object]")return!1;var h=e.call(f,"constructor"),p=f.constructor&&f.constructor.prototype&&e.call(f.constructor.prototype,"isPrototypeOf");if(f.constructor&&!h&&!p)return!1;var v;for(v in f);return typeof v>"u"||e.call(f,v)},a=function(f,h){n&&h.name==="__proto__"?n(f,h.name,{enumerable:!0,configurable:!0,value:h.newValue,writable:!0}):f[h.name]=h.newValue},u=function(f,h){if(h==="__proto__")if(e.call(f,h)){if(r)return r(f,h).value}else return;return f[h]};return hh=function c(){var f,h,p,v,y,w,S=arguments[0],k=1,_=arguments.length,C=!1;for(typeof S=="boolean"&&(C=S,S=arguments[1]||{},k=2),(S==null||typeof S!="object"&&typeof S!="function")&&(S={});k<_;++k)if(f=arguments[k],f!=null)for(h in f)p=u(S,h),v=u(f,h),S!==v&&(C&&v&&(o(v)||(y=i(v)))?(y?(y=!1,w=p&&i(p)?p:[]):w=p&&o(p)?p:{},a(S,{name:h,newValue:c(C,w,v)})):typeof v<"u"&&a(S,{name:h,newValue:v}));return S},hh}var tL=eL();const ph=Ao(tL);function kp(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function nL(){const e=[],t={run:n,use:r};return t;function n(...i){let o=-1;const a=i.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);u(null,...i);function u(c,...f){const h=e[++o];let p=-1;if(c){a(c);return}for(;++p<i.length;)(f[p]===null||f[p]===void 0)&&(f[p]=i[p]);i=f,h?rL(h,u)(...f):a(null,...f)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function rL(e,t){let n;return r;function r(...a){const u=e.length>a.length;let c;u&&a.push(i);try{c=e.apply(this,a)}catch(f){const h=f;if(u&&n)throw h;return i(h)}u||(c&&c.then&&typeof c.then=="function"?c.then(o,i):c instanceof Error?i(c):o(c))}function i(a,...u){n||(n=!0,t(a,...u))}function o(a){i(null,a)}}const Ar={basename:iL,dirname:sL,extname:oL,join:aL,sep:"/"};function iL(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');yl(e);let n=0,r=-1,i=e.length,o;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(o){n=i+1;break}}else r<0&&(o=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let a=-1,u=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(o){n=i+1;break}}else a<0&&(o=!0,a=i+1),u>-1&&(e.codePointAt(i)===t.codePointAt(u--)?u<0&&(r=i):(u=-1,r=a));return n===r?r=a:r<0&&(r=e.length),e.slice(n,r)}function sL(e){if(yl(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function oL(e){yl(e);let t=e.length,n=-1,r=0,i=-1,o=0,a;for(;t--;){const u=e.codePointAt(t);if(u===47){if(a){r=t+1;break}continue}n<0&&(a=!0,n=t+1),u===46?i<0?i=t:o!==1&&(o=1):i>-1&&(o=-1)}return i<0||n<0||o===0||o===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function aL(...e){let t=-1,n;for(;++t<e.length;)yl(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":lL(n)}function lL(e){yl(e);const t=e.codePointAt(0)===47;let n=uL(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function uL(e,t){let n="",r=0,i=-1,o=0,a=-1,u,c;for(;++a<=e.length;){if(a<e.length)u=e.codePointAt(a);else{if(u===47)break;u=47}if(u===47){if(!(i===a-1||o===1))if(i!==a-1&&o===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),i=a,o=0;continue}}else if(n.length>0){n="",r=0,i=a,o=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,a):n=e.slice(i+1,a),r=a-i-1;i=a,o=0}else u===46&&o>-1?o++:o=-1}return n}function yl(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const cL={cwd:dL};function dL(){return"/"}function Sp(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function fL(e){if(typeof e=="string")e=new URL(e);else if(!Sp(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return hL(e)}function hL(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const mh=["history","path","basename","stem","extname","dirname"];class l1{constructor(t){let n;t?Sp(t)?n={path:t}:typeof t=="string"||pL(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":cL.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<mh.length;){const o=mh[r];o in n&&n[o]!==void 0&&n[o]!==null&&(this[o]=o==="history"?[...n[o]]:n[o])}let i;for(i in n)mh.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Ar.basename(this.path):void 0}set basename(t){yh(t,"basename"),gh(t,"basename"),this.path=Ar.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Ar.dirname(this.path):void 0}set dirname(t){A0(this.basename,"dirname"),this.path=Ar.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Ar.extname(this.path):void 0}set extname(t){if(gh(t,"extname"),A0(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Ar.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Sp(t)&&(t=fL(t)),yh(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Ar.basename(this.path,this.extname):void 0}set stem(t){yh(t,"stem"),gh(t,"stem"),this.path=Ar.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new wn(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function gh(e,t){if(e&&e.includes(Ar.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Ar.sep+"`")}function yh(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function A0(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function pL(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const mL=(function(e){const r=this.constructor.prototype,i=r[e],o=function(){return i.apply(o,arguments)};return Object.setPrototypeOf(o,r),o}),gL={}.hasOwnProperty;class Sm extends mL{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=nL()}copy(){const t=new Sm;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(ph(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(bh("data",this.frozen),this.namespace[t]=n,this):gL.call(this.namespace,t)&&this.namespace[t]||void 0:t?(bh("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=Bu(t),r=this.parser||this.Parser;return vh("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),vh("process",this.parser||this.Parser),xh("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(o,a){const u=Bu(t),c=r.parse(u);r.run(c,u,function(h,p,v){if(h||!p||!v)return f(h);const y=p,w=r.stringify(y,v);xL(w)?v.value=w:v.result=w,f(h,v)});function f(h,p){h||!p?a(h):o?o(p):n(void 0,p)}}}processSync(t){let n=!1,r;return this.freeze(),vh("processSync",this.parser||this.Parser),xh("processSync",this.compiler||this.Compiler),this.process(t,i),O0("processSync","process",n),r;function i(o,a){n=!0,P0(o),r=a}}run(t,n,r){M0(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?o(void 0,r):new Promise(o);function o(a,u){const c=Bu(n);i.run(t,c,f);function f(h,p,v){const y=p||t;h?u(h):a?a(y):r(void 0,y,v)}}}runSync(t,n){let r=!1,i;return this.run(t,n,o),O0("runSync","run",r),i;function o(a,u){P0(a),i=u,r=!0}}stringify(t,n){this.freeze();const r=Bu(n),i=this.compiler||this.Compiler;return xh("stringify",i),M0(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(bh("use",this.frozen),t!=null)if(typeof t=="function")c(t,n);else if(typeof t=="object")Array.isArray(t)?u(t):a(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function o(f){if(typeof f=="function")c(f,[]);else if(typeof f=="object")if(Array.isArray(f)){const[h,...p]=f;c(h,p)}else a(f);else throw new TypeError("Expected usable value, not `"+f+"`")}function a(f){if(!("plugins"in f)&&!("settings"in f))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");u(f.plugins),f.settings&&(i.settings=ph(!0,i.settings,f.settings))}function u(f){let h=-1;if(f!=null)if(Array.isArray(f))for(;++h<f.length;){const p=f[h];o(p)}else throw new TypeError("Expected a list of plugins, not `"+f+"`")}function c(f,h){let p=-1,v=-1;for(;++p<r.length;)if(r[p][0]===f){v=p;break}if(v===-1)r.push([f,...h]);else if(h.length>0){let[y,...w]=h;const S=r[v][1];kp(S)&&kp(y)&&(y=ph(!0,S,y)),r[v]=[f,y,...w]}}}}const yL=new Sm().freeze();function vh(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function xh(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function bh(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function M0(e){if(!kp(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function O0(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Bu(e){return vL(e)?e:new l1(e)}function vL(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function xL(e){return typeof e=="string"||bL(e)}function bL(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const wL="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",D0=[],L0={allowDangerousHtml:!0},kL=/^(https?|ircs?|mailto|xmpp)$/i,SL=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function EL(e){const t=_L(e),n=CL(e);return jL(t.runSync(t.parse(n),n),e)}function _L(e){const t=e.rehypePlugins||D0,n=e.remarkPlugins||D0,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...L0}:L0;return yL().use(sD).use(n).use(ZD,r).use(t)}function CL(e){const t=e.children||"",n=new l1;return typeof t=="string"&&(n.value=t),n}function jL(e,t){const n=t.allowedElements,r=t.allowElement,i=t.components,o=t.disallowedElements,a=t.skipHtml,u=t.unwrapDisallowed,c=t.urlTransform||NL;for(const h of SL)Object.hasOwn(t,h.from)&&(""+h.from+(h.to?"use `"+h.to+"` instead":"remove it")+wL+h.id,void 0);return t.className&&(e={type:"element",tagName:"div",properties:{className:t.className},children:e.type==="root"?e.children:[e]}),Gc(e,f),UM(e,{Fragment:m.Fragment,components:i,ignoreInvalidStyle:!0,jsx:m.jsx,jsxs:m.jsxs,passKeys:!0,passNode:!0});function f(h,p,v){if(h.type==="raw"&&v&&typeof p=="number")return a?v.children.splice(p,1):v.children[p]={type:"text",value:h.value},p;if(h.type==="element"){let y;for(y in ch)if(Object.hasOwn(ch,y)&&Object.hasOwn(h.properties,y)){const w=h.properties[y],S=ch[y];(S===null||S.includes(h.tagName))&&(h.properties[y]=c(String(w||""),y,h))}}if(h.type==="element"){let y=n?!n.includes(h.tagName):o?o.includes(h.tagName):!1;if(!y&&r&&typeof p=="number"&&(y=!r(h,p,v)),y&&v&&typeof p=="number")return u&&h.children?v.children.splice(p,1,...h.children):v.children.splice(p,1),p}}}function NL(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||n!==-1&&t>n||r!==-1&&t>r||kL.test(e.slice(0,t))?e:""}function $0(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(t);for(;i!==-1;)r++,i=n.indexOf(t,i+t.length);return r}function TL(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function IL(e,t,n){const i=Kc((n||{}).ignore||[]),o=PL(t);let a=-1;for(;++a<o.length;)a1(e,"text",u);function u(f,h){let p=-1,v;for(;++p<h.length;){const y=h[p],w=v?v.children:void 0;if(i(y,w?w.indexOf(y):void 0,v))return;v=y}if(v)return c(f,h)}function c(f,h){const p=h[h.length-1],v=o[a][0],y=o[a][1];let w=0;const k=p.children.indexOf(f);let _=!1,C=[];v.lastIndex=0;let j=v.exec(f.value);for(;j;){const I=j.index,O={index:j.index,input:j.input,stack:[...h,f]};let R=y(...j,O);if(typeof R=="string"&&(R=R.length>0?{type:"text",value:R}:void 0),R===!1?v.lastIndex=I+1:(w!==I&&C.push({type:"text",value:f.value.slice(w,I)}),Array.isArray(R)?C.push(...R):R&&C.push(R),w=I+j[0].length,_=!0),!v.global)break;j=v.exec(f.value)}return _?(w<f.value.length&&C.push({type:"text",value:f.value.slice(w)}),p.children.splice(k,1,...C)):C=[f],k+C.length}}function PL(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const i=n[r];t.push([RL(i[0]),AL(i[1])])}return t}function RL(e){return typeof e=="string"?new RegExp(TL(e),"g"):e}function AL(e){return typeof e=="function"?e:function(){return e}}const wh="phrasing",kh=["autolink","link","image","label"];function ML(){return{transforms:[zL],enter:{literalAutolink:DL,literalAutolinkEmail:Sh,literalAutolinkHttp:Sh,literalAutolinkWww:Sh},exit:{literalAutolink:BL,literalAutolinkEmail:FL,literalAutolinkHttp:LL,literalAutolinkWww:$L}}}function OL(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:wh,notInConstruct:kh},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:wh,notInConstruct:kh},{character:":",before:"[ps]",after:"\\/",inConstruct:wh,notInConstruct:kh}]}}function DL(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function Sh(e){this.config.enter.autolinkProtocol.call(this,e)}function LL(e){this.config.exit.autolinkProtocol.call(this,e)}function $L(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function FL(e){this.config.exit.autolinkEmail.call(this,e)}function BL(e){this.exit(e)}function zL(e){IL(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,UL],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),WL]],{ignore:["link","linkReference"]})}function UL(e,t,n,r,i){let o="";if(!u1(i)||(/^w/i.test(t)&&(n=t+n,t="",o="http://"),!HL(n)))return!1;const a=VL(n+r);if(!a[0])return!1;const u={type:"link",title:null,url:o+t+a[0],children:[{type:"text",value:t+a[0]}]};return a[1]?[u,{type:"text",value:a[1]}]:u}function WL(e,t,n,r){return!u1(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function HL(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function VL(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const i=$0(e,"(");let o=$0(e,")");for(;r!==-1&&i>o;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),o++;return[e,n]}function u1(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||ks(n)||Hc(n))&&(!t||n!==47)}c1.peek=e$;function qL(){this.buffer()}function KL(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function YL(){this.buffer()}function GL(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function JL(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=wr(this.sliceSerialize(e)).toLowerCase(),n.label=t}function QL(e){this.exit(e)}function XL(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=wr(this.sliceSerialize(e)).toLowerCase(),n.label=t}function ZL(e){this.exit(e)}function e$(){return"["}function c1(e,t,n,r){const i=n.createTracker(r);let o=i.move("[^");const a=n.enter("footnoteReference"),u=n.enter("reference");return o+=i.move(n.safe(n.associationId(e),{after:"]",before:o})),u(),a(),o+=i.move("]"),o}function t$(){return{enter:{gfmFootnoteCallString:qL,gfmFootnoteCall:KL,gfmFootnoteDefinitionLabelString:YL,gfmFootnoteDefinition:GL},exit:{gfmFootnoteCallString:JL,gfmFootnoteCall:QL,gfmFootnoteDefinitionLabelString:XL,gfmFootnoteDefinition:ZL}}}function n$(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:c1},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,o,a){const u=o.createTracker(a);let c=u.move("[^");const f=o.enter("footnoteDefinition"),h=o.enter("label");return c+=u.move(o.safe(o.associationId(r),{before:c,after:"]"})),h(),c+=u.move("]:"),r.children&&r.children.length>0&&(u.shift(4),c+=u.move((t?`
`:" ")+o.indentLines(o.containerFlow(r,u.current()),t?d1:r$))),f(),c}}function r$(e,t,n){return t===0?e:d1(e,t,n)}function d1(e,t,n){return(n?"":"    ")+e}const i$=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];f1.peek=u$;function s$(){return{canContainEols:["delete"],enter:{strikethrough:a$},exit:{strikethrough:l$}}}function o$(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:i$}],handlers:{delete:f1}}}function a$(e){this.enter({type:"delete",children:[]},e)}function l$(e){this.exit(e)}function f1(e,t,n,r){const i=n.createTracker(r),o=n.enter("strikethrough");let a=i.move("~~");return a+=n.containerPhrasing(e,{...i.current(),before:a,after:"~"}),a+=i.move("~~"),o(),a}function u$(){return"~"}function c$(e){return e.length}function d$(e,t){const n=t||{},r=(n.align||[]).concat(),i=n.stringLength||c$,o=[],a=[],u=[],c=[];let f=0,h=-1;for(;++h<e.length;){const S=[],k=[];let _=-1;for(e[h].length>f&&(f=e[h].length);++_<e[h].length;){const C=f$(e[h][_]);if(n.alignDelimiters!==!1){const j=i(C);k[_]=j,(c[_]===void 0||j>c[_])&&(c[_]=j)}S.push(C)}a[h]=S,u[h]=k}let p=-1;if(typeof r=="object"&&"length"in r)for(;++p<f;)o[p]=F0(r[p]);else{const S=F0(r);for(;++p<f;)o[p]=S}p=-1;const v=[],y=[];for(;++p<f;){const S=o[p];let k="",_="";S===99?(k=":",_=":"):S===108?k=":":S===114&&(_=":");let C=n.alignDelimiters===!1?1:Math.max(1,c[p]-k.length-_.length);const j=k+"-".repeat(C)+_;n.alignDelimiters!==!1&&(C=k.length+C+_.length,C>c[p]&&(c[p]=C),y[p]=C),v[p]=j}a.splice(1,0,v),u.splice(1,0,y),h=-1;const w=[];for(;++h<a.length;){const S=a[h],k=u[h];p=-1;const _=[];for(;++p<f;){const C=S[p]||"";let j="",I="";if(n.alignDelimiters!==!1){const O=c[p]-(k[p]||0),R=o[p];R===114?j=" ".repeat(O):R===99?O%2?(j=" ".repeat(O/2+.5),I=" ".repeat(O/2-.5)):(j=" ".repeat(O/2),I=j):I=" ".repeat(O)}n.delimiterStart!==!1&&!p&&_.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&C==="")&&(n.delimiterStart!==!1||p)&&_.push(" "),n.alignDelimiters!==!1&&_.push(j),_.push(C),n.alignDelimiters!==!1&&_.push(I),n.padding!==!1&&_.push(" "),(n.delimiterEnd!==!1||p!==f-1)&&_.push("|")}w.push(n.delimiterEnd===!1?_.join("").replace(/ +$/,""):_.join(""))}return w.join(`
`)}function f$(e){return e==null?"":String(e)}function F0(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function h$(e,t,n,r){const i=n.enter("blockquote"),o=n.createTracker(r);o.move("> "),o.shift(2);const a=n.indentLines(n.containerFlow(e,o.current()),p$);return i(),a}function p$(e,t,n){return">"+(n?"":" ")+e}function m$(e,t){return B0(e,t.inConstruct,!0)&&!B0(e,t.notInConstruct,!1)}function B0(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function z0(e,t,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&m$(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function g$(e,t){const n=String(e);let r=n.indexOf(t),i=r,o=0,a=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++o>a&&(a=o):o=1,i=r+t.length,r=n.indexOf(t,i);return a}function y$(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function v$(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function x$(e,t,n,r){const i=v$(n),o=e.value||"",a=i==="`"?"GraveAccent":"Tilde";if(y$(e,n)){const p=n.enter("codeIndented"),v=n.indentLines(o,b$);return p(),v}const u=n.createTracker(r),c=i.repeat(Math.max(g$(o,i)+1,3)),f=n.enter("codeFenced");let h=u.move(c);if(e.lang){const p=n.enter(`codeFencedLang${a}`);h+=u.move(n.safe(e.lang,{before:h,after:" ",encode:["`"],...u.current()})),p()}if(e.lang&&e.meta){const p=n.enter(`codeFencedMeta${a}`);h+=u.move(" "),h+=u.move(n.safe(e.meta,{before:h,after:`
`,encode:["`"],...u.current()})),p()}return h+=u.move(`
`),o&&(h+=u.move(o+`
`)),h+=u.move(c),f(),h}function b$(e,t,n){return(n?"":"    ")+e}function Em(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function w$(e,t,n,r){const i=Em(n),o=i==='"'?"Quote":"Apostrophe",a=n.enter("definition");let u=n.enter("label");const c=n.createTracker(r);let f=c.move("[");return f+=c.move(n.safe(n.associationId(e),{before:f,after:"]",...c.current()})),f+=c.move("]: "),u(),!e.url||/[\0- \u007F]/.test(e.url)?(u=n.enter("destinationLiteral"),f+=c.move("<"),f+=c.move(n.safe(e.url,{before:f,after:">",...c.current()})),f+=c.move(">")):(u=n.enter("destinationRaw"),f+=c.move(n.safe(e.url,{before:f,after:e.title?" ":`
`,...c.current()}))),u(),e.title&&(u=n.enter(`title${o}`),f+=c.move(" "+i),f+=c.move(n.safe(e.title,{before:f,after:i,...c.current()})),f+=c.move(i),u()),a(),f}function k$(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function il(e){return"&#x"+e.toString(16).toUpperCase()+";"}function vc(e,t,n){const r=Ro(e),i=Ro(t);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}h1.peek=S$;function h1(e,t,n,r){const i=k$(n),o=n.enter("emphasis"),a=n.createTracker(r),u=a.move(i);let c=a.move(n.containerPhrasing(e,{after:i,before:u,...a.current()}));const f=c.charCodeAt(0),h=vc(r.before.charCodeAt(r.before.length-1),f,i);h.inside&&(c=il(f)+c.slice(1));const p=c.charCodeAt(c.length-1),v=vc(r.after.charCodeAt(0),p,i);v.inside&&(c=c.slice(0,-1)+il(p));const y=a.move(i);return o(),n.attentionEncodeSurroundingInfo={after:v.outside,before:h.outside},u+c+y}function S$(e,t,n){return n.options.emphasis||"*"}function E$(e,t){let n=!1;return Gc(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,bp}),!!((!e.depth||e.depth<3)&&gm(e)&&(t.options.setext||n))}function _$(e,t,n,r){const i=Math.max(Math.min(6,e.depth||1),1),o=n.createTracker(r);if(E$(e,n)){const h=n.enter("headingSetext"),p=n.enter("phrasing"),v=n.containerPhrasing(e,{...o.current(),before:`
`,after:`
`});return p(),h(),v+`
`+(i===1?"=":"-").repeat(v.length-(Math.max(v.lastIndexOf("\r"),v.lastIndexOf(`
`))+1))}const a="#".repeat(i),u=n.enter("headingAtx"),c=n.enter("phrasing");o.move(a+" ");let f=n.containerPhrasing(e,{before:"# ",after:`
`,...o.current()});return/^[\t ]/.test(f)&&(f=il(f.charCodeAt(0))+f.slice(1)),f=f?a+" "+f:a,n.options.closeAtx&&(f+=" "+a),c(),u(),f}p1.peek=C$;function p1(e){return e.value||""}function C$(){return"<"}m1.peek=j$;function m1(e,t,n,r){const i=Em(n),o=i==='"'?"Quote":"Apostrophe",a=n.enter("image");let u=n.enter("label");const c=n.createTracker(r);let f=c.move("![");return f+=c.move(n.safe(e.alt,{before:f,after:"]",...c.current()})),f+=c.move("]("),u(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(u=n.enter("destinationLiteral"),f+=c.move("<"),f+=c.move(n.safe(e.url,{before:f,after:">",...c.current()})),f+=c.move(">")):(u=n.enter("destinationRaw"),f+=c.move(n.safe(e.url,{before:f,after:e.title?" ":")",...c.current()}))),u(),e.title&&(u=n.enter(`title${o}`),f+=c.move(" "+i),f+=c.move(n.safe(e.title,{before:f,after:i,...c.current()})),f+=c.move(i),u()),f+=c.move(")"),a(),f}function j$(){return"!"}g1.peek=N$;function g1(e,t,n,r){const i=e.referenceType,o=n.enter("imageReference");let a=n.enter("label");const u=n.createTracker(r);let c=u.move("![");const f=n.safe(e.alt,{before:c,after:"]",...u.current()});c+=u.move(f+"]["),a();const h=n.stack;n.stack=[],a=n.enter("reference");const p=n.safe(n.associationId(e),{before:c,after:"]",...u.current()});return a(),n.stack=h,o(),i==="full"||!f||f!==p?c+=u.move(p+"]"):i==="shortcut"?c=c.slice(0,-1):c+=u.move("]"),c}function N$(){return"!"}y1.peek=T$;function y1(e,t,n){let r=e.value||"",i="`",o=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++o<n.unsafe.length;){const a=n.unsafe[o],u=n.compilePattern(a);let c;if(a.atBreak)for(;c=u.exec(r);){let f=c.index;r.charCodeAt(f)===10&&r.charCodeAt(f-1)===13&&f--,r=r.slice(0,f)+" "+r.slice(c.index+1)}}return i+r+i}function T$(){return"`"}function v1(e,t){const n=gm(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}x1.peek=I$;function x1(e,t,n,r){const i=Em(n),o=i==='"'?"Quote":"Apostrophe",a=n.createTracker(r);let u,c;if(v1(e,n)){const h=n.stack;n.stack=[],u=n.enter("autolink");let p=a.move("<");return p+=a.move(n.containerPhrasing(e,{before:p,after:">",...a.current()})),p+=a.move(">"),u(),n.stack=h,p}u=n.enter("link"),c=n.enter("label");let f=a.move("[");return f+=a.move(n.containerPhrasing(e,{before:f,after:"](",...a.current()})),f+=a.move("]("),c(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(c=n.enter("destinationLiteral"),f+=a.move("<"),f+=a.move(n.safe(e.url,{before:f,after:">",...a.current()})),f+=a.move(">")):(c=n.enter("destinationRaw"),f+=a.move(n.safe(e.url,{before:f,after:e.title?" ":")",...a.current()}))),c(),e.title&&(c=n.enter(`title${o}`),f+=a.move(" "+i),f+=a.move(n.safe(e.title,{before:f,after:i,...a.current()})),f+=a.move(i),c()),f+=a.move(")"),u(),f}function I$(e,t,n){return v1(e,n)?"<":"["}b1.peek=P$;function b1(e,t,n,r){const i=e.referenceType,o=n.enter("linkReference");let a=n.enter("label");const u=n.createTracker(r);let c=u.move("[");const f=n.containerPhrasing(e,{before:c,after:"]",...u.current()});c+=u.move(f+"]["),a();const h=n.stack;n.stack=[],a=n.enter("reference");const p=n.safe(n.associationId(e),{before:c,after:"]",...u.current()});return a(),n.stack=h,o(),i==="full"||!f||f!==p?c+=u.move(p+"]"):i==="shortcut"?c=c.slice(0,-1):c+=u.move("]"),c}function P$(){return"["}function _m(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function R$(e){const t=_m(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function A$(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function w1(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function M$(e,t,n,r){const i=n.enter("list"),o=n.bulletCurrent;let a=e.ordered?A$(n):_m(n);const u=e.ordered?a==="."?")":".":R$(n);let c=t&&n.bulletLastUsed?a===n.bulletLastUsed:!1;if(!e.ordered){const h=e.children?e.children[0]:void 0;if((a==="*"||a==="-")&&h&&(!h.children||!h.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),w1(n)===a&&h){let p=-1;for(;++p<e.children.length;){const v=e.children[p];if(v&&v.type==="listItem"&&v.children&&v.children[0]&&v.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(a=u),n.bulletCurrent=a;const f=n.containerFlow(e,r);return n.bulletLastUsed=a,n.bulletCurrent=o,i(),f}function O$(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function D$(e,t,n,r){const i=O$(n);let o=n.bulletCurrent||_m(n);t&&t.type==="list"&&t.ordered&&(o=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+o);let a=o.length+1;(i==="tab"||i==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(a=Math.ceil(a/4)*4);const u=n.createTracker(r);u.move(o+" ".repeat(a-o.length)),u.shift(a);const c=n.enter("listItem"),f=n.indentLines(n.containerFlow(e,u.current()),h);return c(),f;function h(p,v,y){return v?(y?"":" ".repeat(a))+p:(y?o:o+" ".repeat(a-o.length))+p}}function L$(e,t,n,r){const i=n.enter("paragraph"),o=n.enter("phrasing"),a=n.containerPhrasing(e,r);return o(),i(),a}const $$=Kc(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function F$(e,t,n,r){return(e.children.some(function(a){return $$(a)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function B$(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}k1.peek=z$;function k1(e,t,n,r){const i=B$(n),o=n.enter("strong"),a=n.createTracker(r),u=a.move(i+i);let c=a.move(n.containerPhrasing(e,{after:i,before:u,...a.current()}));const f=c.charCodeAt(0),h=vc(r.before.charCodeAt(r.before.length-1),f,i);h.inside&&(c=il(f)+c.slice(1));const p=c.charCodeAt(c.length-1),v=vc(r.after.charCodeAt(0),p,i);v.inside&&(c=c.slice(0,-1)+il(p));const y=a.move(i+i);return o(),n.attentionEncodeSurroundingInfo={after:v.outside,before:h.outside},u+c+y}function z$(e,t,n){return n.options.strong||"*"}function U$(e,t,n,r){return n.safe(e.value,r)}function W$(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function H$(e,t,n){const r=(w1(n)+(n.options.ruleSpaces?" ":"")).repeat(W$(n));return n.options.ruleSpaces?r.slice(0,-1):r}const S1={blockquote:h$,break:z0,code:x$,definition:w$,emphasis:h1,hardBreak:z0,heading:_$,html:p1,image:m1,imageReference:g1,inlineCode:y1,link:x1,linkReference:b1,list:M$,listItem:D$,paragraph:L$,root:F$,strong:k1,text:U$,thematicBreak:H$};function V$(){return{enter:{table:q$,tableData:U0,tableHeader:U0,tableRow:Y$},exit:{codeText:G$,table:K$,tableData:Eh,tableHeader:Eh,tableRow:Eh}}}function q$(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function K$(e){this.exit(e),this.data.inTable=void 0}function Y$(e){this.enter({type:"tableRow",children:[]},e)}function Eh(e){this.exit(e)}function U0(e){this.enter({type:"tableCell",children:[]},e)}function G$(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,J$));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function J$(e,t){return t==="|"?t:e}function Q$(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,i=t.stringLength,o=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:v,table:a,tableCell:c,tableRow:u}};function a(y,w,S,k){return f(h(y,S,k),y.align)}function u(y,w,S,k){const _=p(y,S,k),C=f([_]);return C.slice(0,C.indexOf(`
`))}function c(y,w,S,k){const _=S.enter("tableCell"),C=S.enter("phrasing"),j=S.containerPhrasing(y,{...k,before:o,after:o});return C(),_(),j}function f(y,w){return d$(y,{align:w,alignDelimiters:r,padding:n,stringLength:i})}function h(y,w,S){const k=y.children;let _=-1;const C=[],j=w.enter("table");for(;++_<k.length;)C[_]=p(k[_],w,S);return j(),C}function p(y,w,S){const k=y.children;let _=-1;const C=[],j=w.enter("tableRow");for(;++_<k.length;)C[_]=c(k[_],y,w,S);return j(),C}function v(y,w,S){let k=S1.inlineCode(y,w,S);return S.stack.includes("tableCell")&&(k=k.replace(/\|/g,"\\$&")),k}}function X$(){return{exit:{taskListCheckValueChecked:W0,taskListCheckValueUnchecked:W0,paragraph:e4}}}function Z$(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:t4}}}function W0(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function e4(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=t.children;let o=-1,a;for(;++o<i.length;){const u=i[o];if(u.type==="paragraph"){a=u;break}}a===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function t4(e,t,n,r){const i=e.children[0],o=typeof e.checked=="boolean"&&i&&i.type==="paragraph",a="["+(e.checked?"x":" ")+"] ",u=n.createTracker(r);o&&u.move(a);let c=S1.listItem(e,t,n,{...r,...u.current()});return o&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,f)),c;function f(h){return h+a}}function n4(){return[ML(),t$(),s$(),V$(),X$()]}function r4(e){return{extensions:[OL(),n$(e),o$(),Q$(e),Z$()]}}const i4={tokenize:c4,partial:!0},E1={tokenize:d4,partial:!0},_1={tokenize:f4,partial:!0},C1={tokenize:h4,partial:!0},s4={tokenize:p4,partial:!0},j1={name:"wwwAutolink",tokenize:l4,previous:T1},N1={name:"protocolAutolink",tokenize:u4,previous:I1},ii={name:"emailAutolink",tokenize:a4,previous:P1},Ur={};function o4(){return{text:Ur}}let os=48;for(;os<123;)Ur[os]=ii,os++,os===58?os=65:os===91&&(os=97);Ur[43]=ii;Ur[45]=ii;Ur[46]=ii;Ur[95]=ii;Ur[72]=[ii,N1];Ur[104]=[ii,N1];Ur[87]=[ii,j1];Ur[119]=[ii,j1];function a4(e,t,n){const r=this;let i,o;return a;function a(p){return!Ep(p)||!P1.call(r,r.previous)||Cm(r.events)?n(p):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),u(p))}function u(p){return Ep(p)?(e.consume(p),u):p===64?(e.consume(p),c):n(p)}function c(p){return p===46?e.check(s4,h,f)(p):p===45||p===95||bn(p)?(o=!0,e.consume(p),c):h(p)}function f(p){return e.consume(p),i=!0,c}function h(p){return o&&i&&En(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(p)):n(p)}}function l4(e,t,n){const r=this;return i;function i(a){return a!==87&&a!==119||!T1.call(r,r.previous)||Cm(r.events)?n(a):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(i4,e.attempt(E1,e.attempt(_1,o),n),n)(a))}function o(a){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(a)}}function u4(e,t,n){const r=this;let i="",o=!1;return a;function a(p){return(p===72||p===104)&&I1.call(r,r.previous)&&!Cm(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),i+=String.fromCodePoint(p),e.consume(p),u):n(p)}function u(p){if(En(p)&&i.length<5)return i+=String.fromCodePoint(p),e.consume(p),u;if(p===58){const v=i.toLowerCase();if(v==="http"||v==="https")return e.consume(p),c}return n(p)}function c(p){return p===47?(e.consume(p),o?f:(o=!0,c)):n(p)}function f(p){return p===null||mc(p)||Et(p)||ks(p)||Hc(p)?n(p):e.attempt(E1,e.attempt(_1,h),n)(p)}function h(p){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(p)}}function c4(e,t,n){let r=0;return i;function i(a){return(a===87||a===119)&&r<3?(r++,e.consume(a),i):a===46&&r===3?(e.consume(a),o):n(a)}function o(a){return a===null?n(a):t(a)}}function d4(e,t,n){let r,i,o;return a;function a(f){return f===46||f===95?e.check(C1,c,u)(f):f===null||Et(f)||ks(f)||f!==45&&Hc(f)?c(f):(o=!0,e.consume(f),a)}function u(f){return f===95?r=!0:(i=r,r=void 0),e.consume(f),a}function c(f){return i||r||!o?n(f):t(f)}}function f4(e,t){let n=0,r=0;return i;function i(a){return a===40?(n++,e.consume(a),i):a===41&&r<n?o(a):a===33||a===34||a===38||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===60||a===63||a===93||a===95||a===126?e.check(C1,t,o)(a):a===null||Et(a)||ks(a)?t(a):(e.consume(a),i)}function o(a){return a===41&&r++,e.consume(a),i}}function h4(e,t,n){return r;function r(u){return u===33||u===34||u===39||u===41||u===42||u===44||u===46||u===58||u===59||u===63||u===95||u===126?(e.consume(u),r):u===38?(e.consume(u),o):u===93?(e.consume(u),i):u===60||u===null||Et(u)||ks(u)?t(u):n(u)}function i(u){return u===null||u===40||u===91||Et(u)||ks(u)?t(u):r(u)}function o(u){return En(u)?a(u):n(u)}function a(u){return u===59?(e.consume(u),r):En(u)?(e.consume(u),a):n(u)}}function p4(e,t,n){return r;function r(o){return e.consume(o),i}function i(o){return bn(o)?n(o):t(o)}}function T1(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||Et(e)}function I1(e){return!En(e)}function P1(e){return!(e===47||Ep(e))}function Ep(e){return e===43||e===45||e===46||e===95||bn(e)}function Cm(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const m4={tokenize:S4,partial:!0};function g4(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:b4,continuation:{tokenize:w4},exit:k4}},text:{91:{name:"gfmFootnoteCall",tokenize:x4},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:y4,resolveTo:v4}}}}function y4(e,t,n){const r=this;let i=r.events.length;const o=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a;for(;i--;){const c=r.events[i][1];if(c.type==="labelImage"){a=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return u;function u(c){if(!a||!a._balanced)return n(c);const f=wr(r.sliceSerialize({start:a.end,end:r.now()}));return f.codePointAt(0)!==94||!o.includes(f.slice(1))?n(c):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(c),e.exit("gfmFootnoteCallLabelMarker"),t(c))}}function v4(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const o={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},a={type:"chunkString",contentType:"string",start:Object.assign({},o.start),end:Object.assign({},o.end)},u=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",i,t],["exit",i,t],["enter",o,t],["enter",a,t],["exit",a,t],["exit",o,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...u),e}function x4(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o=0,a;return u;function u(p){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(p),e.exit("gfmFootnoteCallLabelMarker"),c}function c(p){return p!==94?n(p):(e.enter("gfmFootnoteCallMarker"),e.consume(p),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",f)}function f(p){if(o>999||p===93&&!a||p===null||p===91||Et(p))return n(p);if(p===93){e.exit("chunkString");const v=e.exit("gfmFootnoteCallString");return i.includes(wr(r.sliceSerialize(v)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(p),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(p)}return Et(p)||(a=!0),o++,e.consume(p),p===92?h:f}function h(p){return p===91||p===92||p===93?(e.consume(p),o++,f):f(p)}}function b4(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o,a=0,u;return c;function c(w){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(w),e.exit("gfmFootnoteDefinitionLabelMarker"),f}function f(w){return w===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(w),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",h):n(w)}function h(w){if(a>999||w===93&&!u||w===null||w===91||Et(w))return n(w);if(w===93){e.exit("chunkString");const S=e.exit("gfmFootnoteDefinitionLabelString");return o=wr(r.sliceSerialize(S)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(w),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),v}return Et(w)||(u=!0),a++,e.consume(w),w===92?p:h}function p(w){return w===91||w===92||w===93?(e.consume(w),a++,h):h(w)}function v(w){return w===58?(e.enter("definitionMarker"),e.consume(w),e.exit("definitionMarker"),i.includes(o)||i.push(o),ht(e,y,"gfmFootnoteDefinitionWhitespace")):n(w)}function y(w){return t(w)}}function w4(e,t,n){return e.check(gl,t,e.attempt(m4,t,n))}function k4(e){e.exit("gfmFootnoteDefinition")}function S4(e,t,n){const r=this;return ht(e,i,"gfmFootnoteDefinitionIndent",5);function i(o){const a=r.events[r.events.length-1];return a&&a[1].type==="gfmFootnoteDefinitionIndent"&&a[2].sliceSerialize(a[1],!0).length===4?t(o):n(o)}}function E4(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:o,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(a,u){let c=-1;for(;++c<a.length;)if(a[c][0]==="enter"&&a[c][1].type==="strikethroughSequenceTemporary"&&a[c][1]._close){let f=c;for(;f--;)if(a[f][0]==="exit"&&a[f][1].type==="strikethroughSequenceTemporary"&&a[f][1]._open&&a[c][1].end.offset-a[c][1].start.offset===a[f][1].end.offset-a[f][1].start.offset){a[c][1].type="strikethroughSequence",a[f][1].type="strikethroughSequence";const h={type:"strikethrough",start:Object.assign({},a[f][1].start),end:Object.assign({},a[c][1].end)},p={type:"strikethroughText",start:Object.assign({},a[f][1].end),end:Object.assign({},a[c][1].start)},v=[["enter",h,u],["enter",a[f][1],u],["exit",a[f][1],u],["enter",p,u]],y=u.parser.constructs.insideSpan.null;y&&Qn(v,v.length,0,Vc(y,a.slice(f+1,c),u)),Qn(v,v.length,0,[["exit",p,u],["enter",a[c][1],u],["exit",a[c][1],u],["exit",h,u]]),Qn(a,f-1,c-f+3,v),c=f+v.length-2;break}}for(c=-1;++c<a.length;)a[c][1].type==="strikethroughSequenceTemporary"&&(a[c][1].type="data");return a}function o(a,u,c){const f=this.previous,h=this.events;let p=0;return v;function v(w){return f===126&&h[h.length-1][1].type!=="characterEscape"?c(w):(a.enter("strikethroughSequenceTemporary"),y(w))}function y(w){const S=Ro(f);if(w===126)return p>1?c(w):(a.consume(w),p++,y);if(p<2&&!n)return c(w);const k=a.exit("strikethroughSequenceTemporary"),_=Ro(w);return k._open=!_||_===2&&!!S,k._close=!S||S===2&&!!_,u(w)}}}class _4{constructor(){this.map=[]}add(t,n,r){C4(this,t,n,r)}consume(t){if(this.map.sort(function(o,a){return o[0]-a[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let i=r.pop();for(;i;){for(const o of i)t.push(o);i=r.pop()}this.map.length=0}}function C4(e,t,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<e.map.length;){if(e.map[i][0]===t){e.map[i][1]+=n,e.map[i][2].push(...r);return}i+=1}e.map.push([t,n,r])}}function j4(e,t){let n=!1;const r=[];for(;t<e.length;){const i=e[t];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const o=r.length-1;r[o]=r[o]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function N4(){return{flow:{null:{name:"table",tokenize:T4,resolveAll:I4}}}}function T4(e,t,n){const r=this;let i=0,o=0,a;return u;function u(M){let L=r.events.length-1;for(;L>-1;){const H=r.events[L][1].type;if(H==="lineEnding"||H==="linePrefix")L--;else break}const se=L>-1?r.events[L][1].type:null,q=se==="tableHead"||se==="tableRow"?R:c;return q===R&&r.parser.lazy[r.now().line]?n(M):q(M)}function c(M){return e.enter("tableHead"),e.enter("tableRow"),f(M)}function f(M){return M===124||(a=!0,o+=1),h(M)}function h(M){return M===null?n(M):Ze(M)?o>1?(o=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(M),e.exit("lineEnding"),y):n(M):dt(M)?ht(e,h,"whitespace")(M):(o+=1,a&&(a=!1,i+=1),M===124?(e.enter("tableCellDivider"),e.consume(M),e.exit("tableCellDivider"),a=!0,h):(e.enter("data"),p(M)))}function p(M){return M===null||M===124||Et(M)?(e.exit("data"),h(M)):(e.consume(M),M===92?v:p)}function v(M){return M===92||M===124?(e.consume(M),p):p(M)}function y(M){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(M):(e.enter("tableDelimiterRow"),a=!1,dt(M)?ht(e,w,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(M):w(M))}function w(M){return M===45||M===58?k(M):M===124?(a=!0,e.enter("tableCellDivider"),e.consume(M),e.exit("tableCellDivider"),S):O(M)}function S(M){return dt(M)?ht(e,k,"whitespace")(M):k(M)}function k(M){return M===58?(o+=1,a=!0,e.enter("tableDelimiterMarker"),e.consume(M),e.exit("tableDelimiterMarker"),_):M===45?(o+=1,_(M)):M===null||Ze(M)?I(M):O(M)}function _(M){return M===45?(e.enter("tableDelimiterFiller"),C(M)):O(M)}function C(M){return M===45?(e.consume(M),C):M===58?(a=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(M),e.exit("tableDelimiterMarker"),j):(e.exit("tableDelimiterFiller"),j(M))}function j(M){return dt(M)?ht(e,I,"whitespace")(M):I(M)}function I(M){return M===124?w(M):M===null||Ze(M)?!a||i!==o?O(M):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(M)):O(M)}function O(M){return n(M)}function R(M){return e.enter("tableRow"),U(M)}function U(M){return M===124?(e.enter("tableCellDivider"),e.consume(M),e.exit("tableCellDivider"),U):M===null||Ze(M)?(e.exit("tableRow"),t(M)):dt(M)?ht(e,U,"whitespace")(M):(e.enter("data"),re(M))}function re(M){return M===null||M===124||Et(M)?(e.exit("data"),U(M)):(e.consume(M),M===92?z:re)}function z(M){return M===92||M===124?(e.consume(M),re):re(M)}}function I4(e,t){let n=-1,r=!0,i=0,o=[0,0,0,0],a=[0,0,0,0],u=!1,c=0,f,h,p;const v=new _4;for(;++n<e.length;){const y=e[n],w=y[1];y[0]==="enter"?w.type==="tableHead"?(u=!1,c!==0&&(H0(v,t,c,f,h),h=void 0,c=0),f={type:"table",start:Object.assign({},w.start),end:Object.assign({},w.end)},v.add(n,0,[["enter",f,t]])):w.type==="tableRow"||w.type==="tableDelimiterRow"?(r=!0,p=void 0,o=[0,0,0,0],a=[0,n+1,0,0],u&&(u=!1,h={type:"tableBody",start:Object.assign({},w.start),end:Object.assign({},w.end)},v.add(n,0,[["enter",h,t]])),i=w.type==="tableDelimiterRow"?2:h?3:1):i&&(w.type==="data"||w.type==="tableDelimiterMarker"||w.type==="tableDelimiterFiller")?(r=!1,a[2]===0&&(o[1]!==0&&(a[0]=a[1],p=zu(v,t,o,i,void 0,p),o=[0,0,0,0]),a[2]=n)):w.type==="tableCellDivider"&&(r?r=!1:(o[1]!==0&&(a[0]=a[1],p=zu(v,t,o,i,void 0,p)),o=a,a=[o[1],n,0,0])):w.type==="tableHead"?(u=!0,c=n):w.type==="tableRow"||w.type==="tableDelimiterRow"?(c=n,o[1]!==0?(a[0]=a[1],p=zu(v,t,o,i,n,p)):a[1]!==0&&(p=zu(v,t,a,i,n,p)),i=0):i&&(w.type==="data"||w.type==="tableDelimiterMarker"||w.type==="tableDelimiterFiller")&&(a[3]=n)}for(c!==0&&H0(v,t,c,f,h),v.consume(t.events),n=-1;++n<t.events.length;){const y=t.events[n];y[0]==="enter"&&y[1].type==="table"&&(y[1]._align=j4(t.events,n))}return e}function zu(e,t,n,r,i,o){const a=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",u="tableContent";n[0]!==0&&(o.end=Object.assign({},go(t.events,n[0])),e.add(n[0],0,[["exit",o,t]]));const c=go(t.events,n[1]);if(o={type:a,start:Object.assign({},c),end:Object.assign({},c)},e.add(n[1],0,[["enter",o,t]]),n[2]!==0){const f=go(t.events,n[2]),h=go(t.events,n[3]),p={type:u,start:Object.assign({},f),end:Object.assign({},h)};if(e.add(n[2],0,[["enter",p,t]]),r!==2){const v=t.events[n[2]],y=t.events[n[3]];if(v[1].end=Object.assign({},y[1].end),v[1].type="chunkText",v[1].contentType="text",n[3]>n[2]+1){const w=n[2]+1,S=n[3]-n[2]-1;e.add(w,S,[])}}e.add(n[3]+1,0,[["exit",p,t]])}return i!==void 0&&(o.end=Object.assign({},go(t.events,i)),e.add(i,0,[["exit",o,t]]),o=void 0),o}function H0(e,t,n,r,i){const o=[],a=go(t.events,n);i&&(i.end=Object.assign({},a),o.push(["exit",i,t])),r.end=Object.assign({},a),o.push(["exit",r,t]),e.add(n+1,0,o)}function go(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const P4={name:"tasklistCheck",tokenize:A4};function R4(){return{text:{91:P4}}}function A4(e,t,n){const r=this;return i;function i(c){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(c):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),o)}function o(c){return Et(c)?(e.enter("taskListCheckValueUnchecked"),e.consume(c),e.exit("taskListCheckValueUnchecked"),a):c===88||c===120?(e.enter("taskListCheckValueChecked"),e.consume(c),e.exit("taskListCheckValueChecked"),a):n(c)}function a(c){return c===93?(e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),u):n(c)}function u(c){return Ze(c)?t(c):dt(c)?e.check({tokenize:M4},t,n)(c):n(c)}}function M4(e,t,n){return ht(e,r,"whitespace");function r(i){return i===null?n(i):t(i)}}function O4(e){return Uk([o4(),g4(),E4(e),N4(),R4()])}const D4={};function L4(e){const t=this,n=e||D4,r=t.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),o=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),a=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(O4(n)),o.push(n4()),a.push(r4(n))}const $4=e=>e!=null;function F4(){const e=Ce(t=>t.works);return b.useMemo(()=>{const t=new Map;e.forEach(o=>{var c;const a=(c=o.name)==null?void 0:c.trim();if(!a)return;const u=t.get(a)??[];u.push(o),t.set(a,u)});const n=new Map,r=new Map;t.forEach((o,a)=>{o.length===1?n.set(a,o[0]):o.length>1&&r.set(a,o.filter($4))});const i=Array.from(n.entries()).map(([o,a])=>({name:o,work:a}));return i.sort((o,a)=>a.name.length-o.name.length||o.name.localeCompare(a.name,"es")),{uniqueByName:n,duplicates:r,entries:i}},[e])}const B4=new RegExp("\\p{L}|\\p{N}","u"),V0=e=>e?B4.test(e):!1,z4=(e,t,n)=>{const r=t===0?void 0:e[t-1],i=n>=e.length?void 0:e[n];return!V0(r)&&!V0(i)},U4=(e,t)=>{const n=[];t.forEach(o=>{let a=0;for(;a<e.length;){const u=e.indexOf(o.name,a);if(u===-1)break;const c=u+o.name.length;z4(e,u,c)&&n.push({start:u,end:c,entry:o}),a=u+o.name.length}}),n.sort((o,a)=>o.start!==a.start?o.start-a.start:a.entry.name.length-o.entry.name.length);const r=[];let i=-1;return n.forEach(o=>{o.start<i||(r.push(o),i=o.end)}),r},W4=e=>e?new Set(["link","linkReference","definition","inlineCode","code"]).has(e.type):!0,H4=e=>{const t=(e==null?void 0:e.entries)??[];return t.length===0?()=>{}:n=>{Gc(n,"text",(r,i,o)=>{if(W4(o)||typeof i!="number"||!o)return;const u=r.value;if(!u)return;const c=U4(u,t);if(c.length===0)return;const f=[];let h=0;c.forEach(p=>{p.start>h&&f.push({type:"text",value:u.slice(h,p.start)}),f.push({type:"link",title:null,url:p.entry.href,children:[{type:"text",value:p.entry.name}]}),h=p.end}),h<u.length&&f.push({type:"text",value:u.slice(h)}),o.children.splice(i,1,...f)})}},V4=e=>{var f,h,p;const t="/sport-planner/".replace(/\/$/,""),r=`${t?`${t}/`:"/"}#/`,i=((f=e.href)==null?void 0:f.startsWith("#/"))??!1,o=((h=e.href)==null?void 0:h.startsWith(r))??!1,a=(((p=e.href)==null?void 0:p.startsWith("/"))??!1)||i||o,u=a?e.rel:e.rel??"noreferrer",c=a?e.target:e.target??"_blank";return m.jsx("a",{...e,className:"text-sky-300 underline decoration-dotted underline-offset-4 hover:text-sky-200",target:c,rel:u})},q4=e=>m.jsx("ul",{...e,className:ze("my-2 list-disc space-y-1 pl-6",e.className)}),K4=e=>m.jsx("ol",{...e,className:ze("my-2 list-decimal space-y-1 pl-6",e.className)}),Y4=e=>m.jsx("li",{...e,className:ze("leading-relaxed",e.className)});function G4(e){const t=e.trim(),n=t.match(/^(["'])(.*)(["'])$/s);return n?n[2].trim():t}function J4(e){var a;const n=G4(e.trim()).match(/^\[!([^\]]+)\]([+-])?\s*(.*)$/i);if(!n)return null;const r=n[1].toLowerCase(),o=(((a=n[3])==null?void 0:a.trim())??"")||r;return{type:r,title:o}}function R1(e){return typeof e=="object"&&e!==null&&"props"in e&&"type"in e}function _p(e){return e==null||typeof e=="boolean"?"":typeof e=="string"||typeof e=="number"?String(e):Array.isArray(e)?e.map(_p).join(""):R1(e)?_p(e.props.children):""}const q0={danger:{icon:"",containerClassName:"border-rose-500/25 bg-rose-500/10",titleClassName:"text-rose-200"},warning:{icon:"",containerClassName:"border-amber-500/25 bg-amber-500/10",titleClassName:"text-amber-200"},info:{icon:"",containerClassName:"border-sky-500/25 bg-sky-500/10",titleClassName:"text-sky-200"},note:{icon:"",containerClassName:"border-indigo-500/25 bg-indigo-500/10",titleClassName:"text-indigo-200"},tip:{icon:"",containerClassName:"border-emerald-500/25 bg-emerald-500/10",titleClassName:"text-emerald-200"}},Q4=e=>{const{node:t,children:n,...r}=e,i=Array.isArray(n)?n:[n],o=i.findIndex(p=>R1(p)&&p.type==="p"),a=o>=0?i[o]:void 0,u=_p(a).trim(),c=J4(u);if(!c)return m.jsx("blockquote",{...r,children:n});const f=q0[c.type]??q0.info,h=i.filter((p,v)=>v!==o);return m.jsxs("aside",{className:ze("my-4 rounded-2xl border p-5",f.containerClassName),children:[m.jsxs("div",{className:ze("flex items-center gap-2 text-lg font-semibold",f.titleClassName),children:[m.jsx("span",{"aria-hidden":"true",children:f.icon}),m.jsx("span",{children:c.title})]}),m.jsx("div",{className:"mt-3",children:h})]})},X4={a:V4,blockquote:Q4,ul:q4,ol:K4,li:Y4};function Ss({content:e,enableWorkLinks:t=!1}){const{entries:n}=F4(),r=b.useMemo(()=>{if(!t||n.length===0)return null;const o="/sport-planner/".replace(/\/$/,""),u=`${o?`${o}/`:"/"}#/catalog`;return{entries:n.map(({name:c,work:f})=>({name:c,href:`${u}?workId=${encodeURIComponent(f.id)}`}))}},[t,n]),i=b.useMemo(()=>{const o=[L4];return r&&o.push([H4,r]),o},[r]);return e?m.jsx("div",{className:"prose prose-invert max-w-none prose-headings:font-display prose-p:leading-relaxed prose-strong:text-white prose-a:text-sky-300",children:m.jsx(EL,{remarkPlugins:i,components:X4,children:e})}):null}function Z4(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return b.useMemo(()=>r=>{t.forEach(i=>i(r))},t)}const Jc=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Uo(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function jm(e){return"nodeType"in e}function Fn(e){var t,n;return e?Uo(e)?e:jm(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Nm(e){const{Document:t}=Fn(e);return e instanceof t}function vl(e){return Uo(e)?!1:e instanceof Fn(e).HTMLElement}function A1(e){return e instanceof Fn(e).SVGElement}function Wo(e){return e?Uo(e)?e.document:jm(e)?Nm(e)?e:vl(e)||A1(e)?e.ownerDocument:document:document:document}const Fr=Jc?b.useLayoutEffect:b.useEffect;function Tm(e){const t=b.useRef(e);return Fr(()=>{t.current=e}),b.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function eF(){const e=b.useRef(null),t=b.useCallback((r,i)=>{e.current=setInterval(r,i)},[]),n=b.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function sl(e,t){t===void 0&&(t=[e]);const n=b.useRef(e);return Fr(()=>{n.current!==e&&(n.current=e)},t),n}function xl(e,t){const n=b.useRef();return b.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function xc(e){const t=Tm(e),n=b.useRef(null),r=b.useCallback(i=>{i!==n.current&&(t==null||t(i,n.current)),n.current=i},[]);return[n,r]}function Cp(e){const t=b.useRef();return b.useEffect(()=>{t.current=e},[e]),t.current}let _h={};function bl(e,t){return b.useMemo(()=>{if(t)return t;const n=_h[e]==null?0:_h[e]+1;return _h[e]=n,e+"-"+n},[e,t])}function M1(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((o,a)=>{const u=Object.entries(a);for(const[c,f]of u){const h=o[c];h!=null&&(o[c]=h+e*f)}return o},{...t})}}const Co=M1(1),bc=M1(-1);function tF(e){return"clientX"in e&&"clientY"in e}function Im(e){if(!e)return!1;const{KeyboardEvent:t}=Fn(e.target);return t&&e instanceof t}function nF(e){if(!e)return!1;const{TouchEvent:t}=Fn(e.target);return t&&e instanceof t}function jp(e){if(nF(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return tF(e)?{x:e.clientX,y:e.clientY}:null}const ol=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[ol.Translate.toString(e),ol.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),K0="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function rF(e){return e.matches(K0)?e:e.querySelector(K0)}const iF={display:"none"};function sF(e){let{id:t,value:n}=e;return Ae.createElement("div",{id:t,style:iF},n)}function oF(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Ae.createElement("div",{id:t,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function aF(){const[e,t]=b.useState("");return{announce:b.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const O1=b.createContext(null);function lF(e){const t=b.useContext(O1);b.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function uF(){const[e]=b.useState(()=>new Set),t=b.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[b.useCallback(r=>{let{type:i,event:o}=r;e.forEach(a=>{var u;return(u=a[i])==null?void 0:u.call(a,o)})},[e]),t]}const cF={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},dF={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function fF(e){let{announcements:t=dF,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=cF}=e;const{announce:o,announcement:a}=aF(),u=bl("DndLiveRegion"),[c,f]=b.useState(!1);if(b.useEffect(()=>{f(!0)},[]),lF(b.useMemo(()=>({onDragStart(p){let{active:v}=p;o(t.onDragStart({active:v}))},onDragMove(p){let{active:v,over:y}=p;t.onDragMove&&o(t.onDragMove({active:v,over:y}))},onDragOver(p){let{active:v,over:y}=p;o(t.onDragOver({active:v,over:y}))},onDragEnd(p){let{active:v,over:y}=p;o(t.onDragEnd({active:v,over:y}))},onDragCancel(p){let{active:v,over:y}=p;o(t.onDragCancel({active:v,over:y}))}}),[o,t])),!c)return null;const h=Ae.createElement(Ae.Fragment,null,Ae.createElement(sF,{id:r,value:i.draggable}),Ae.createElement(oF,{id:u,announcement:a}));return n?Gn.createPortal(h,n):h}var en;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(en||(en={}));function wc(){}const Er=Object.freeze({x:0,y:0});function hF(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function pF(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function mF(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function gF(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function Y0(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const yF=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=Y0(t,t.left,t.top),o=[];for(const a of r){const{id:u}=a,c=n.get(u);if(c){const f=hF(Y0(c),i);o.push({id:u,data:{droppableContainer:a,value:f}})}}return o.sort(pF)};function vF(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),a=i-r,u=o-n;if(r<i&&n<o){const c=t.width*t.height,f=e.width*e.height,h=a*u,p=h/(c+f-h);return Number(p.toFixed(4))}return 0}const xF=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=[];for(const o of r){const{id:a}=o,u=n.get(a);if(u){const c=vF(u,t);c>0&&i.push({id:a,data:{droppableContainer:o,value:c}})}}return i.sort(mF)};function bF(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function D1(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Er}function wF(e){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i.reduce((a,u)=>({...a,top:a.top+e*u.y,bottom:a.bottom+e*u.y,left:a.left+e*u.x,right:a.right+e*u.x}),{...n})}}const kF=wF(1);function SF(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function EF(e,t,n){const r=SF(t);if(!r)return e;const{scaleX:i,scaleY:o,x:a,y:u}=r,c=e.left-a-(1-i)*parseFloat(n),f=e.top-u-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),h=i?e.width/i:e.width,p=o?e.height/o:e.height;return{width:h,height:p,top:f,right:c+h,bottom:f+p,left:c}}const _F={ignoreTransform:!1};function Ho(e,t){t===void 0&&(t=_F);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:f,transformOrigin:h}=Fn(e).getComputedStyle(e);f&&(n=EF(n,f,h))}const{top:r,left:i,width:o,height:a,bottom:u,right:c}=n;return{top:r,left:i,width:o,height:a,bottom:u,right:c}}function G0(e){return Ho(e,{ignoreTransform:!0})}function CF(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function jF(e,t){return t===void 0&&(t=Fn(e).getComputedStyle(e)),t.position==="fixed"}function NF(e,t){t===void 0&&(t=Fn(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const o=t[i];return typeof o=="string"?n.test(o):!1})}function Pm(e,t){const n=[];function r(i){if(t!=null&&n.length>=t||!i)return n;if(Nm(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!vl(i)||A1(i)||n.includes(i))return n;const o=Fn(e).getComputedStyle(i);return i!==e&&NF(i,o)&&n.push(i),jF(i,o)?n:r(i.parentNode)}return e?r(e):n}function L1(e){const[t]=Pm(e,1);return t??null}function Ch(e){return!Jc||!e?null:Uo(e)?e:jm(e)?Nm(e)||e===Wo(e).scrollingElement?window:vl(e)?e:null:null}function $1(e){return Uo(e)?e.scrollX:e.scrollLeft}function F1(e){return Uo(e)?e.scrollY:e.scrollTop}function Np(e){return{x:$1(e),y:F1(e)}}var ln;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(ln||(ln={}));function B1(e){return!Jc||!e?!1:e===document.scrollingElement}function z1(e){const t={x:0,y:0},n=B1(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},i=e.scrollTop<=t.y,o=e.scrollLeft<=t.x,a=e.scrollTop>=r.y,u=e.scrollLeft>=r.x;return{isTop:i,isLeft:o,isBottom:a,isRight:u,maxScroll:r,minScroll:t}}const TF={x:.2,y:.2};function IF(e,t,n,r,i){let{top:o,left:a,right:u,bottom:c}=n;r===void 0&&(r=10),i===void 0&&(i=TF);const{isTop:f,isBottom:h,isLeft:p,isRight:v}=z1(e),y={x:0,y:0},w={x:0,y:0},S={height:t.height*i.y,width:t.width*i.x};return!f&&o<=t.top+S.height?(y.y=ln.Backward,w.y=r*Math.abs((t.top+S.height-o)/S.height)):!h&&c>=t.bottom-S.height&&(y.y=ln.Forward,w.y=r*Math.abs((t.bottom-S.height-c)/S.height)),!v&&u>=t.right-S.width?(y.x=ln.Forward,w.x=r*Math.abs((t.right-S.width-u)/S.width)):!p&&a<=t.left+S.width&&(y.x=ln.Backward,w.x=r*Math.abs((t.left+S.width-a)/S.width)),{direction:y,speed:w}}function PF(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:a}=window;return{top:0,left:0,right:o,bottom:a,width:o,height:a}}const{top:t,left:n,right:r,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:i,width:e.clientWidth,height:e.clientHeight}}function U1(e){return e.reduce((t,n)=>Co(t,Np(n)),Er)}function RF(e){return e.reduce((t,n)=>t+$1(n),0)}function AF(e){return e.reduce((t,n)=>t+F1(n),0)}function MF(e,t){if(t===void 0&&(t=Ho),!e)return;const{top:n,left:r,bottom:i,right:o}=t(e);L1(e)&&(i<=0||o<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const OF=[["x",["left","right"],RF],["y",["top","bottom"],AF]];class Rm{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Pm(n),i=U1(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,a,u]of OF)for(const c of a)Object.defineProperty(this,c,{get:()=>{const f=u(r),h=i[o]-f;return this.rect[c]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Va{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var i;(i=this.target)==null||i.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function DF(e){const{EventTarget:t}=Fn(e);return e instanceof t?e:Wo(e)}function jh(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var or;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(or||(or={}));function J0(e){e.preventDefault()}function LF(e){e.stopPropagation()}var yt;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(yt||(yt={}));const W1={start:[yt.Space,yt.Enter],cancel:[yt.Esc],end:[yt.Space,yt.Enter,yt.Tab]},$F=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case yt.Right:return{...n,x:n.x+25};case yt.Left:return{...n,x:n.x-25};case yt.Down:return{...n,y:n.y+25};case yt.Up:return{...n,y:n.y-25}}};class H1{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Va(Wo(n)),this.windowListeners=new Va(Fn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(or.Resize,this.handleCancel),this.windowListeners.add(or.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(or.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&MF(r),n(Er)}handleKeyDown(t){if(Im(t)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:o=W1,coordinateGetter:a=$F,scrollBehavior:u="smooth"}=i,{code:c}=t;if(o.end.includes(c)){this.handleEnd(t);return}if(o.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:f}=r.current,h=f?{x:f.left,y:f.top}:Er;this.referenceCoordinates||(this.referenceCoordinates=h);const p=a(t,{active:n,context:r.current,currentCoordinates:h});if(p){const v=bc(p,h),y={x:0,y:0},{scrollableAncestors:w}=r.current;for(const S of w){const k=t.code,{isTop:_,isRight:C,isLeft:j,isBottom:I,maxScroll:O,minScroll:R}=z1(S),U=PF(S),re={x:Math.min(k===yt.Right?U.right-U.width/2:U.right,Math.max(k===yt.Right?U.left:U.left+U.width/2,p.x)),y:Math.min(k===yt.Down?U.bottom-U.height/2:U.bottom,Math.max(k===yt.Down?U.top:U.top+U.height/2,p.y))},z=k===yt.Right&&!C||k===yt.Left&&!j,M=k===yt.Down&&!I||k===yt.Up&&!_;if(z&&re.x!==p.x){const L=S.scrollLeft+v.x,se=k===yt.Right&&L<=O.x||k===yt.Left&&L>=R.x;if(se&&!v.y){S.scrollTo({left:L,behavior:u});return}se?y.x=S.scrollLeft-L:y.x=k===yt.Right?S.scrollLeft-O.x:S.scrollLeft-R.x,y.x&&S.scrollBy({left:-y.x,behavior:u});break}else if(M&&re.y!==p.y){const L=S.scrollTop+v.y,se=k===yt.Down&&L<=O.y||k===yt.Up&&L>=R.y;if(se&&!v.x){S.scrollTo({top:L,behavior:u});return}se?y.y=S.scrollTop-L:y.y=k===yt.Down?S.scrollTop-O.y:S.scrollTop-R.y,y.y&&S.scrollBy({top:-y.y,behavior:u});break}}this.handleMove(t,Co(bc(p,this.referenceCoordinates),y))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}H1.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=W1,onActivation:i}=t,{active:o}=n;const{code:a}=e.nativeEvent;if(r.start.includes(a)){const u=o.activatorNode.current;return u&&e.target!==u?!1:(e.preventDefault(),i==null||i({event:e.nativeEvent}),!0)}return!1}}];function Q0(e){return!!(e&&"distance"in e)}function X0(e){return!!(e&&"delay"in e)}class Am{constructor(t,n,r){var i;r===void 0&&(r=DF(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:o}=t,{target:a}=o;this.props=t,this.events=n,this.document=Wo(a),this.documentListeners=new Va(this.document),this.listeners=new Va(r),this.windowListeners=new Va(Fn(a)),this.initialCoordinates=(i=jp(o))!=null?i:Er,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(or.Resize,this.handleCancel),this.windowListeners.add(or.DragStart,J0),this.windowListeners.add(or.VisibilityChange,this.handleCancel),this.windowListeners.add(or.ContextMenu,J0),this.documentListeners.add(or.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(X0(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Q0(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:i}=this.props;i(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(or.Click,LF,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(or.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:i,props:o}=this,{onMove:a,options:{activationConstraint:u}}=o;if(!i)return;const c=(n=jp(t))!=null?n:Er,f=bc(i,c);if(!r&&u){if(Q0(u)){if(u.tolerance!=null&&jh(f,u.tolerance))return this.handleCancel();if(jh(f,u.distance))return this.handleStart()}if(X0(u)&&jh(f,u.tolerance))return this.handleCancel();this.handlePending(u,f);return}t.cancelable&&t.preventDefault(),a(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===yt.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const FF={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class V1 extends Am{constructor(t){const{event:n}=t,r=Wo(n.target);super(t,FF,r)}}V1.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const BF={move:{name:"mousemove"},end:{name:"mouseup"}};var Tp;(function(e){e[e.RightClick=2]="RightClick"})(Tp||(Tp={}));class zF extends Am{constructor(t){super(t,BF,Wo(t.event.target))}}zF.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===Tp.RightClick?!1:(r==null||r({event:n}),!0)}}];const Nh={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class UF extends Am{constructor(t){super(t,Nh)}static setup(){return window.addEventListener(Nh.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Nh.move.name,t)};function t(){}}}UF.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var qa;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(qa||(qa={}));var kc;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(kc||(kc={}));function WF(e){let{acceleration:t,activator:n=qa.Pointer,canScroll:r,draggingRect:i,enabled:o,interval:a=5,order:u=kc.TreeOrder,pointerCoordinates:c,scrollableAncestors:f,scrollableAncestorRects:h,delta:p,threshold:v}=e;const y=VF({delta:p,disabled:!o}),[w,S]=eF(),k=b.useRef({x:0,y:0}),_=b.useRef({x:0,y:0}),C=b.useMemo(()=>{switch(n){case qa.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case qa.DraggableRect:return i}},[n,i,c]),j=b.useRef(null),I=b.useCallback(()=>{const R=j.current;if(!R)return;const U=k.current.x*_.current.x,re=k.current.y*_.current.y;R.scrollBy(U,re)},[]),O=b.useMemo(()=>u===kc.TreeOrder?[...f].reverse():f,[u,f]);b.useEffect(()=>{if(!o||!f.length||!C){S();return}for(const R of O){if((r==null?void 0:r(R))===!1)continue;const U=f.indexOf(R),re=h[U];if(!re)continue;const{direction:z,speed:M}=IF(R,re,C,t,v);for(const L of["x","y"])y[L][z[L]]||(M[L]=0,z[L]=0);if(M.x>0||M.y>0){S(),j.current=R,w(I,a),k.current=M,_.current=z;return}}k.current={x:0,y:0},_.current={x:0,y:0},S()},[t,I,r,S,o,a,JSON.stringify(C),JSON.stringify(y),w,f,O,h,JSON.stringify(v)])}const HF={x:{[ln.Backward]:!1,[ln.Forward]:!1},y:{[ln.Backward]:!1,[ln.Forward]:!1}};function VF(e){let{delta:t,disabled:n}=e;const r=Cp(t);return xl(i=>{if(n||!r||!i)return HF;const o={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[ln.Backward]:i.x[ln.Backward]||o.x===-1,[ln.Forward]:i.x[ln.Forward]||o.x===1},y:{[ln.Backward]:i.y[ln.Backward]||o.y===-1,[ln.Forward]:i.y[ln.Forward]||o.y===1}}},[n,t,r])}function qF(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return xl(i=>{var o;return t==null?null:(o=r??i)!=null?o:null},[r,t])}function KF(e,t){return b.useMemo(()=>e.reduce((n,r)=>{const{sensor:i}=r,o=i.activators.map(a=>({eventName:a.eventName,handler:t(a.handler,r)}));return[...n,...o]},[]),[e,t])}var al;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(al||(al={}));var Ip;(function(e){e.Optimized="optimized"})(Ip||(Ip={}));const Z0=new Map;function YF(e,t){let{dragging:n,dependencies:r,config:i}=t;const[o,a]=b.useState(null),{frequency:u,measure:c,strategy:f}=i,h=b.useRef(e),p=k(),v=sl(p),y=b.useCallback(function(_){_===void 0&&(_=[]),!v.current&&a(C=>C===null?_:C.concat(_.filter(j=>!C.includes(j))))},[v]),w=b.useRef(null),S=xl(_=>{if(p&&!n)return Z0;if(!_||_===Z0||h.current!==e||o!=null){const C=new Map;for(let j of e){if(!j)continue;if(o&&o.length>0&&!o.includes(j.id)&&j.rect.current){C.set(j.id,j.rect.current);continue}const I=j.node.current,O=I?new Rm(c(I),I):null;j.rect.current=O,O&&C.set(j.id,O)}return C}return _},[e,o,n,p,c]);return b.useEffect(()=>{h.current=e},[e]),b.useEffect(()=>{p||y()},[n,p]),b.useEffect(()=>{o&&o.length>0&&a(null)},[JSON.stringify(o)]),b.useEffect(()=>{p||typeof u!="number"||w.current!==null||(w.current=setTimeout(()=>{y(),w.current=null},u))},[u,p,y,...r]),{droppableRects:S,measureDroppableContainers:y,measuringScheduled:o!=null};function k(){switch(f){case al.Always:return!1;case al.BeforeDragging:return n;default:return!n}}}function q1(e,t){return xl(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function GF(e,t){return q1(e,t)}function JF(e){let{callback:t,disabled:n}=e;const r=Tm(t),i=b.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(r)},[r,n]);return b.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Qc(e){let{callback:t,disabled:n}=e;const r=Tm(t),i=b.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(r)},[n]);return b.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function QF(e){return new Rm(Ho(e),e)}function eb(e,t,n){t===void 0&&(t=QF);const[r,i]=b.useState(null);function o(){i(c=>{if(!e)return null;if(e.isConnected===!1){var f;return(f=c??n)!=null?f:null}const h=t(e);return JSON.stringify(c)===JSON.stringify(h)?c:h})}const a=JF({callback(c){if(e)for(const f of c){const{type:h,target:p}=f;if(h==="childList"&&p instanceof HTMLElement&&p.contains(e)){o();break}}}}),u=Qc({callback:o});return Fr(()=>{o(),e?(u==null||u.observe(e),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(u==null||u.disconnect(),a==null||a.disconnect())},[e]),r}function XF(e){const t=q1(e);return D1(e,t)}const tb=[];function ZF(e){const t=b.useRef(e),n=xl(r=>e?r&&r!==tb&&e&&t.current&&e.parentNode===t.current.parentNode?r:Pm(e):tb,[e]);return b.useEffect(()=>{t.current=e},[e]),n}function e3(e){const[t,n]=b.useState(null),r=b.useRef(e),i=b.useCallback(o=>{const a=Ch(o.target);a&&n(u=>u?(u.set(a,Np(a)),new Map(u)):null)},[]);return b.useEffect(()=>{const o=r.current;if(e!==o){a(o);const u=e.map(c=>{const f=Ch(c);return f?(f.addEventListener("scroll",i,{passive:!0}),[f,Np(f)]):null}).filter(c=>c!=null);n(u.length?new Map(u):null),r.current=e}return()=>{a(e),a(o)};function a(u){u.forEach(c=>{const f=Ch(c);f==null||f.removeEventListener("scroll",i)})}},[i,e]),b.useMemo(()=>e.length?t?Array.from(t.values()).reduce((o,a)=>Co(o,a),Er):U1(e):Er,[e,t])}function nb(e,t){t===void 0&&(t=[]);const n=b.useRef(null);return b.useEffect(()=>{n.current=null},t),b.useEffect(()=>{const r=e!==Er;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?bc(e,n.current):Er}function t3(e){b.useEffect(()=>{if(!Jc)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function n3(e,t){return b.useMemo(()=>e.reduce((n,r)=>{let{eventName:i,handler:o}=r;return n[i]=a=>{o(a,t)},n},{}),[e,t])}function K1(e){return b.useMemo(()=>e?CF(e):null,[e])}const rb=[];function r3(e,t){t===void 0&&(t=Ho);const[n]=e,r=K1(n?Fn(n):null),[i,o]=b.useState(rb);function a(){o(()=>e.length?e.map(c=>B1(c)?r:new Rm(t(c),c)):rb)}const u=Qc({callback:a});return Fr(()=>{u==null||u.disconnect(),a(),e.forEach(c=>u==null?void 0:u.observe(c))},[e]),i}function i3(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return vl(t)?t:e}function s3(e){let{measure:t}=e;const[n,r]=b.useState(null),i=b.useCallback(f=>{for(const{target:h}of f)if(vl(h)){r(p=>{const v=t(h);return p?{...p,width:v.width,height:v.height}:v});break}},[t]),o=Qc({callback:i}),a=b.useCallback(f=>{const h=i3(f);o==null||o.disconnect(),h&&(o==null||o.observe(h)),r(h?t(h):null)},[t,o]),[u,c]=xc(a);return b.useMemo(()=>({nodeRef:u,rect:n,setRef:c}),[n,u,c])}const o3=[{sensor:V1,options:{}},{sensor:H1,options:{}}],a3={current:{}},Zu={draggable:{measure:G0},droppable:{measure:G0,strategy:al.WhileDragging,frequency:Ip.Optimized},dragOverlay:{measure:Ho}};class Ka extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const l3={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ka,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:wc},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Zu,measureDroppableContainers:wc,windowRect:null,measuringScheduled:!1},u3={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:wc,draggableNodes:new Map,over:null,measureDroppableContainers:wc},Xc=b.createContext(u3),Y1=b.createContext(l3);function c3(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ka}}}function d3(e,t){switch(t.type){case en.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case en.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case en.DragEnd:case en.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case en.RegisterDroppable:{const{element:n}=t,{id:r}=n,i=new Ka(e.droppable.containers);return i.set(r,n),{...e,droppable:{...e.droppable,containers:i}}}case en.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const a=new Ka(e.droppable.containers);return a.set(n,{...o,disabled:i}),{...e,droppable:{...e.droppable,containers:a}}}case en.UnregisterDroppable:{const{id:n,key:r}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const o=new Ka(e.droppable.containers);return o.delete(n),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function f3(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:i}=b.useContext(Xc),o=Cp(r),a=Cp(n==null?void 0:n.id);return b.useEffect(()=>{if(!t&&!r&&o&&a!=null){if(!Im(o)||document.activeElement===o.target)return;const u=i.get(a);if(!u)return;const{activatorNode:c,node:f}=u;if(!c.current&&!f.current)return;requestAnimationFrame(()=>{for(const h of[c.current,f.current]){if(!h)continue;const p=rF(h);if(p){p.focus();break}}})}},[r,t,i,a,o]),null}function h3(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((i,o)=>o({transform:i,...r}),n):n}function p3(e){return b.useMemo(()=>({draggable:{...Zu.draggable,...e==null?void 0:e.draggable},droppable:{...Zu.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Zu.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function m3(e){let{activeNode:t,measure:n,initialRect:r,config:i=!0}=e;const o=b.useRef(!1),{x:a,y:u}=typeof i=="boolean"?{x:i,y:i}:i;Fr(()=>{if(!a&&!u||!t){o.current=!1;return}if(o.current||!r)return;const f=t==null?void 0:t.node.current;if(!f||f.isConnected===!1)return;const h=n(f),p=D1(h,r);if(a||(p.x=0),u||(p.y=0),o.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const v=L1(f);v&&v.scrollBy({top:p.y,left:p.x})}},[t,a,u,r,n])}const G1=b.createContext({...Er,scaleX:1,scaleY:1});var Ti;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Ti||(Ti={}));const g3=b.memo(function(t){var n,r,i,o;let{id:a,accessibility:u,autoScroll:c=!0,children:f,sensors:h=o3,collisionDetection:p=xF,measuring:v,modifiers:y,...w}=t;const S=b.useReducer(d3,void 0,c3),[k,_]=S,[C,j]=uF(),[I,O]=b.useState(Ti.Uninitialized),R=I===Ti.Initialized,{draggable:{active:U,nodes:re,translate:z},droppable:{containers:M}}=k,L=U!=null?re.get(U):null,se=b.useRef({initial:null,translated:null}),q=b.useMemo(()=>{var Ye;return U!=null?{id:U,data:(Ye=L==null?void 0:L.data)!=null?Ye:a3,rect:se}:null},[U,L]),H=b.useRef(null),[V,te]=b.useState(null),[Z,B]=b.useState(null),$=sl(w,Object.values(w)),N=bl("DndDescribedBy",a),F=b.useMemo(()=>M.getEnabled(),[M]),ee=p3(v),{droppableRects:A,measureDroppableContainers:be,measuringScheduled:he}=YF(F,{dragging:R,dependencies:[z.x,z.y],config:ee.droppable}),ge=qF(re,U),me=b.useMemo(()=>Z?jp(Z):null,[Z]),je=qe(),Ne=GF(ge,ee.draggable.measure);m3({activeNode:U!=null?re.get(U):null,config:je.layoutShiftCompensation,initialRect:Ne,measure:ee.draggable.measure});const Ie=eb(ge,ee.draggable.measure,Ne),ie=eb(ge?ge.parentElement:null),Te=b.useRef({activatorEvent:null,active:null,activeNode:ge,collisionRect:null,collisions:null,droppableRects:A,draggableNodes:re,draggingNode:null,draggingNodeRect:null,droppableContainers:M,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ve=M.getNodeFor((n=Te.current.over)==null?void 0:n.id),Ke=s3({measure:ee.dragOverlay.measure}),rt=(r=Ke.nodeRef.current)!=null?r:ge,st=R?(i=Ke.rect)!=null?i:Ie:null,kt=!!(Ke.nodeRef.current&&Ke.rect),un=XF(kt?null:Ie),Jt=K1(rt?Fn(rt):null),bt=ZF(R?Ve??ge:null),Pt=r3(bt),J=h3(y,{transform:{x:z.x-un.x,y:z.y-un.y,scaleX:1,scaleY:1},activatorEvent:Z,active:q,activeNodeRect:Ie,containerNodeRect:ie,draggingNodeRect:st,over:Te.current.over,overlayNodeRect:Ke.rect,scrollableAncestors:bt,scrollableAncestorRects:Pt,windowRect:Jt}),fe=me?Co(me,z):null,ye=e3(bt),_e=nb(ye),Y=nb(ye,[Ie]),P=Co(J,_e),K=st?kF(st,J):null,le=q&&K?p({active:q,collisionRect:K,droppableRects:A,droppableContainers:F,pointerCoordinates:fe}):null,X=gF(le,"id"),[ue,D]=b.useState(null),G=kt?J:Co(J,Y),de=bF(G,(o=ue==null?void 0:ue.rect)!=null?o:null,Ie),pe=b.useRef(null),Re=b.useCallback((Ye,Ue)=>{let{sensor:ot,options:lt}=Ue;if(H.current==null)return;const Fe=re.get(H.current);if(!Fe)return;const Ee=Ye.nativeEvent,Ge=new ot({active:H.current,activeNode:Fe,event:Ee,options:lt,context:Te,onAbort(et){if(!re.get(et))return;const{onDragAbort:Rt}=$.current,Bn={id:et};Rt==null||Rt(Bn),C({type:"onDragAbort",event:Bn})},onPending(et,Mt,Rt,Bn){if(!re.get(et))return;const{onDragPending:_r}=$.current,zn={id:et,constraint:Mt,initialCoordinates:Rt,offset:Bn};_r==null||_r(zn),C({type:"onDragPending",event:zn})},onStart(et){const Mt=H.current;if(Mt==null)return;const Rt=re.get(Mt);if(!Rt)return;const{onDragStart:Bn}=$.current,ur={activatorEvent:Ee,active:{id:Mt,data:Rt.data,rect:se}};Gn.unstable_batchedUpdates(()=>{Bn==null||Bn(ur),O(Ti.Initializing),_({type:en.DragStart,initialCoordinates:et,active:Mt}),C({type:"onDragStart",event:ur}),te(pe.current),B(Ee)})},onMove(et){_({type:en.DragMove,coordinates:et})},onEnd:mt(en.DragEnd),onCancel:mt(en.DragCancel)});pe.current=Ge;function mt(et){return async function(){const{active:Rt,collisions:Bn,over:ur,scrollAdjustedTranslate:_r}=Te.current;let zn=null;if(Rt&&_r){const{cancelDrop:Wr}=$.current;zn={activatorEvent:Ee,active:Rt,collisions:Bn,delta:_r,over:ur},et===en.DragEnd&&typeof Wr=="function"&&await Promise.resolve(Wr(zn))&&(et=en.DragCancel)}H.current=null,Gn.unstable_batchedUpdates(()=>{_({type:et}),O(Ti.Uninitialized),D(null),te(null),B(null),pe.current=null;const Wr=et===en.DragEnd?"onDragEnd":"onDragCancel";if(zn){const Vo=$.current[Wr];Vo==null||Vo(zn),C({type:Wr,event:zn})}})}}},[re]),Pe=b.useCallback((Ye,Ue)=>(ot,lt)=>{const Fe=ot.nativeEvent,Ee=re.get(lt);if(H.current!==null||!Ee||Fe.dndKit||Fe.defaultPrevented)return;const Ge={active:Ee};Ye(ot,Ue.options,Ge)===!0&&(Fe.dndKit={capturedBy:Ue.sensor},H.current=lt,Re(ot,Ue))},[re,Re]),De=KF(h,Pe);t3(h),Fr(()=>{Ie&&I===Ti.Initializing&&O(Ti.Initialized)},[Ie,I]),b.useEffect(()=>{const{onDragMove:Ye}=$.current,{active:Ue,activatorEvent:ot,collisions:lt,over:Fe}=Te.current;if(!Ue||!ot)return;const Ee={active:Ue,activatorEvent:ot,collisions:lt,delta:{x:P.x,y:P.y},over:Fe};Gn.unstable_batchedUpdates(()=>{Ye==null||Ye(Ee),C({type:"onDragMove",event:Ee})})},[P.x,P.y]),b.useEffect(()=>{const{active:Ye,activatorEvent:Ue,collisions:ot,droppableContainers:lt,scrollAdjustedTranslate:Fe}=Te.current;if(!Ye||H.current==null||!Ue||!Fe)return;const{onDragOver:Ee}=$.current,Ge=lt.get(X),mt=Ge&&Ge.rect.current?{id:Ge.id,rect:Ge.rect.current,data:Ge.data,disabled:Ge.disabled}:null,et={active:Ye,activatorEvent:Ue,collisions:ot,delta:{x:Fe.x,y:Fe.y},over:mt};Gn.unstable_batchedUpdates(()=>{D(mt),Ee==null||Ee(et),C({type:"onDragOver",event:et})})},[X]),Fr(()=>{Te.current={activatorEvent:Z,active:q,activeNode:ge,collisionRect:K,collisions:le,droppableRects:A,draggableNodes:re,draggingNode:rt,draggingNodeRect:st,droppableContainers:M,over:ue,scrollableAncestors:bt,scrollAdjustedTranslate:P},se.current={initial:st,translated:K}},[q,ge,le,K,re,rt,st,A,M,ue,bt,P]),WF({...je,delta:z,draggingRect:K,pointerCoordinates:fe,scrollableAncestors:bt,scrollableAncestorRects:Pt});const ft=b.useMemo(()=>({active:q,activeNode:ge,activeNodeRect:Ie,activatorEvent:Z,collisions:le,containerNodeRect:ie,dragOverlay:Ke,draggableNodes:re,droppableContainers:M,droppableRects:A,over:ue,measureDroppableContainers:be,scrollableAncestors:bt,scrollableAncestorRects:Pt,measuringConfiguration:ee,measuringScheduled:he,windowRect:Jt}),[q,ge,Ie,Z,le,ie,Ke,re,M,A,ue,be,bt,Pt,ee,he,Jt]),$e=b.useMemo(()=>({activatorEvent:Z,activators:De,active:q,activeNodeRect:Ie,ariaDescribedById:{draggable:N},dispatch:_,draggableNodes:re,over:ue,measureDroppableContainers:be}),[Z,De,q,Ie,_,N,re,ue,be]);return Ae.createElement(O1.Provider,{value:j},Ae.createElement(Xc.Provider,{value:$e},Ae.createElement(Y1.Provider,{value:ft},Ae.createElement(G1.Provider,{value:de},f)),Ae.createElement(f3,{disabled:(u==null?void 0:u.restoreFocus)===!1})),Ae.createElement(fF,{...u,hiddenTextDescribedById:N}));function qe(){const Ye=(V==null?void 0:V.autoScrollEnabled)===!1,Ue=typeof c=="object"?c.enabled===!1:c===!1,ot=R&&!Ye&&!Ue;return typeof c=="object"?{...c,enabled:ot}:{enabled:ot}}}),y3=b.createContext(null),ib="button",v3="Draggable";function x3(e){let{id:t,data:n,disabled:r=!1,attributes:i}=e;const o=bl(v3),{activators:a,activatorEvent:u,active:c,activeNodeRect:f,ariaDescribedById:h,draggableNodes:p,over:v}=b.useContext(Xc),{role:y=ib,roleDescription:w="draggable",tabIndex:S=0}=i??{},k=(c==null?void 0:c.id)===t,_=b.useContext(k?G1:y3),[C,j]=xc(),[I,O]=xc(),R=n3(a,t),U=sl(n);Fr(()=>(p.set(t,{id:t,key:o,node:C,activatorNode:I,data:U}),()=>{const z=p.get(t);z&&z.key===o&&p.delete(t)}),[p,t]);const re=b.useMemo(()=>({role:y,tabIndex:S,"aria-disabled":r,"aria-pressed":k&&y===ib?!0:void 0,"aria-roledescription":w,"aria-describedby":h.draggable}),[r,y,S,k,w,h.draggable]);return{active:c,activatorEvent:u,activeNodeRect:f,attributes:re,isDragging:k,listeners:r?void 0:R,node:C,over:v,setNodeRef:j,setActivatorNodeRef:O,transform:_}}function b3(){return b.useContext(Y1)}const w3="Droppable",k3={timeout:25};function S3(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:i}=e;const o=bl(w3),{active:a,dispatch:u,over:c,measureDroppableContainers:f}=b.useContext(Xc),h=b.useRef({disabled:n}),p=b.useRef(!1),v=b.useRef(null),y=b.useRef(null),{disabled:w,updateMeasurementsFor:S,timeout:k}={...k3,...i},_=sl(S??r),C=b.useCallback(()=>{if(!p.current){p.current=!0;return}y.current!=null&&clearTimeout(y.current),y.current=setTimeout(()=>{f(Array.isArray(_.current)?_.current:[_.current]),y.current=null},k)},[k]),j=Qc({callback:C,disabled:w||!a}),I=b.useCallback((re,z)=>{j&&(z&&(j.unobserve(z),p.current=!1),re&&j.observe(re))},[j]),[O,R]=xc(I),U=sl(t);return b.useEffect(()=>{!j||!O.current||(j.disconnect(),p.current=!1,j.observe(O.current))},[O,j]),b.useEffect(()=>(u({type:en.RegisterDroppable,element:{id:r,key:o,disabled:n,node:O,rect:v,data:U}}),()=>u({type:en.UnregisterDroppable,key:o,id:r})),[r]),b.useEffect(()=>{n!==h.current.disabled&&(u({type:en.SetDroppableDisabled,id:r,key:o,disabled:n}),h.current.disabled=n)},[r,o,n,u]),{active:a,rect:v,isOver:(c==null?void 0:c.id)===r,node:O,over:c,setNodeRef:R}}function J1(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function E3(e,t){return e.reduce((n,r,i)=>{const o=t.get(r);return o&&(n[i]=o),n},Array(e.length))}function Uu(e){return e!==null&&e>=0}function _3(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function C3(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Q1=e=>{let{rects:t,activeIndex:n,overIndex:r,index:i}=e;const o=J1(t,r,n),a=t[i],u=o[i];return!u||!a?null:{x:u.left-a.left,y:u.top-a.top,scaleX:u.width/a.width,scaleY:u.height/a.height}},Wu={scaleX:1,scaleY:1},j3=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:i,rects:o,overIndex:a}=e;const u=(t=o[n])!=null?t:r;if(!u)return null;if(i===n){const f=o[a];return f?{x:0,y:n<a?f.top+f.height-(u.top+u.height):f.top-u.top,...Wu}:null}const c=N3(o,i,n);return i>n&&i<=a?{x:0,y:-u.height-c,...Wu}:i<n&&i>=a?{x:0,y:u.height+c,...Wu}:{x:0,y:0,...Wu}};function N3(e,t,n){const r=e[t],i=e[t-1],o=e[t+1];return r?n<t?i?r.top-(i.top+i.height):o?o.top-(r.top+r.height):0:o?o.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const X1="Sortable",Z1=Ae.createContext({activeIndex:-1,containerId:X1,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Q1,disabled:{draggable:!1,droppable:!1}});function T3(e){let{children:t,id:n,items:r,strategy:i=Q1,disabled:o=!1}=e;const{active:a,dragOverlay:u,droppableRects:c,over:f,measureDroppableContainers:h}=b3(),p=bl(X1,n),v=u.rect!==null,y=b.useMemo(()=>r.map(R=>typeof R=="object"&&"id"in R?R.id:R),[r]),w=a!=null,S=a?y.indexOf(a.id):-1,k=f?y.indexOf(f.id):-1,_=b.useRef(y),C=!_3(y,_.current),j=k!==-1&&S===-1||C,I=C3(o);Fr(()=>{C&&w&&h(y)},[C,y,w,h]),b.useEffect(()=>{_.current=y},[y]);const O=b.useMemo(()=>({activeIndex:S,containerId:p,disabled:I,disableTransforms:j,items:y,overIndex:k,useDragOverlay:v,sortedRects:E3(y,c),strategy:i}),[S,p,I.draggable,I.droppable,j,y,k,c,v,i]);return Ae.createElement(Z1.Provider,{value:O},t)}const I3=e=>{let{id:t,items:n,activeIndex:r,overIndex:i}=e;return J1(n,r,i).indexOf(t)},P3=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:i,items:o,newIndex:a,previousItems:u,previousContainerId:c,transition:f}=e;return!f||!r||u!==o&&i===a?!1:n?!0:a!==i&&t===c},R3={duration:200,easing:"ease"},eS="transform",A3=ol.Transition.toString({property:eS,duration:0,easing:"linear"}),M3={roleDescription:"sortable"};function O3(e){let{disabled:t,index:n,node:r,rect:i}=e;const[o,a]=b.useState(null),u=b.useRef(n);return Fr(()=>{if(!t&&n!==u.current&&r.current){const c=i.current;if(c){const f=Ho(r.current,{ignoreTransform:!0}),h={x:c.left-f.left,y:c.top-f.top,scaleX:c.width/f.width,scaleY:c.height/f.height};(h.x||h.y)&&a(h)}}n!==u.current&&(u.current=n)},[t,n,r,i]),b.useEffect(()=>{o&&a(null)},[o]),o}function D3(e){let{animateLayoutChanges:t=P3,attributes:n,disabled:r,data:i,getNewIndex:o=I3,id:a,strategy:u,resizeObserverConfig:c,transition:f=R3}=e;const{items:h,containerId:p,activeIndex:v,disabled:y,disableTransforms:w,sortedRects:S,overIndex:k,useDragOverlay:_,strategy:C}=b.useContext(Z1),j=L3(r,y),I=h.indexOf(a),O=b.useMemo(()=>({sortable:{containerId:p,index:I,items:h},...i}),[p,i,I,h]),R=b.useMemo(()=>h.slice(h.indexOf(a)),[h,a]),{rect:U,node:re,isOver:z,setNodeRef:M}=S3({id:a,data:O,disabled:j.droppable,resizeObserverConfig:{updateMeasurementsFor:R,...c}}),{active:L,activatorEvent:se,activeNodeRect:q,attributes:H,setNodeRef:V,listeners:te,isDragging:Z,over:B,setActivatorNodeRef:$,transform:N}=x3({id:a,data:O,attributes:{...M3,...n},disabled:j.draggable}),F=Z4(M,V),ee=!!L,A=ee&&!w&&Uu(v)&&Uu(k),be=!_&&Z,he=be&&A?N:null,me=A?he??(u??C)({rects:S,activeNodeRect:q,activeIndex:v,overIndex:k,index:I}):null,je=Uu(v)&&Uu(k)?o({id:a,items:h,activeIndex:v,overIndex:k}):I,Ne=L==null?void 0:L.id,Ie=b.useRef({activeId:Ne,items:h,newIndex:je,containerId:p}),ie=h!==Ie.current.items,Te=t({active:L,containerId:p,isDragging:Z,isSorting:ee,id:a,index:I,items:h,newIndex:Ie.current.newIndex,previousItems:Ie.current.items,previousContainerId:Ie.current.containerId,transition:f,wasDragging:Ie.current.activeId!=null}),Ve=O3({disabled:!Te,index:I,node:re,rect:U});return b.useEffect(()=>{ee&&Ie.current.newIndex!==je&&(Ie.current.newIndex=je),p!==Ie.current.containerId&&(Ie.current.containerId=p),h!==Ie.current.items&&(Ie.current.items=h)},[ee,je,p,h]),b.useEffect(()=>{if(Ne===Ie.current.activeId)return;if(Ne&&!Ie.current.activeId){Ie.current.activeId=Ne;return}const rt=setTimeout(()=>{Ie.current.activeId=Ne},50);return()=>clearTimeout(rt)},[Ne]),{active:L,activeIndex:v,attributes:H,data:O,rect:U,index:I,newIndex:je,items:h,isOver:z,isSorting:ee,isDragging:Z,listeners:te,node:re,overIndex:k,over:B,setNodeRef:F,setActivatorNodeRef:$,setDroppableNodeRef:M,setDraggableNodeRef:V,transform:Ve??me,transition:Ke()};function Ke(){if(Ve||ie&&Ie.current.newIndex===I)return A3;if(!(be&&!Im(se)||!f)&&(ee||Te))return ol.Transition.toString({...f,property:eS})}}function L3(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}yt.Down,yt.Right,yt.Up,yt.Left;function Sc(e,t="18:30"){const n=(e??t).trim(),r=/^(\d{1,2}):(\d{2})$/.exec(n);if(!r)return Sc(t,t);const i=Number(r[1]),o=Number(r[2]);return Number.isNaN(i)||Number.isNaN(o)?Sc(t,t):(i*60+o)%1440}function Pp(e){const t=(e%1440+1440)%1440,n=Math.floor(t/60),r=t%60,i=n.toString().padStart(2,"0"),o=r.toString().padStart(2,"0");return`${i}:${o}`}const sb={present:"Presente",absent:"Ausente",pending:"Pendiente"};function tS({work:e,objective:t,parentChain:n,onSelect:r}){const i=(e.subtitle??"").trim();return m.jsxs("button",{type:"button",onClick:()=>r(e.id),className:"flex w-full items-center justify-between gap-4 rounded-xl border border-white/10 bg-white/5 px-4 py-3 text-left transition hover:border-white/30",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-semibold text-white",children:e.name}),i?m.jsx("p",{className:"text-xs text-white/60",children:i}):null,m.jsxs("p",{className:"text-xs text-white/50",children:[e.estimatedMinutes," min"]}),n?m.jsxs("p",{className:"text-[11px] text-white/40",children:["Deriva de ",n]}):null]}),m.jsx(Bi,{objective:t,size:"sm"})]})}function $3({item:e,work:t,objective:n,expanded:r,isPersonal:i,onToggleExpanded:o,onRemove:a,onDuplicate:u,onUpdateDetails:c,onReplace:f,startTimeLabel:h,durationMinutes:p,works:v,objectiveMap:y,workPathById:w}){const{attributes:S,listeners:k,setNodeRef:_,transform:C,transition:j,isDragging:I}=D3({id:e.id}),[O,R]=b.useState(!1),[U,re]=b.useState(""),z={transform:ol.Transform.toString(C),transition:j},L=(e.focusLabel??"").trim(),se=L.length>0,q=e.customDescriptionMarkdown??(t==null?void 0:t.descriptionMarkdown)??"",H=q.trim().length>0,V=((t==null?void 0:t.videoUrls)??[]).map(me=>me.trim()).filter(Boolean),te=V.length>0,Z=H||te,$=(t!=null&&t.id?w.get(t.id)??(t==null?void 0:t.name)??"":"").split("  ").slice(0,-1).join("  "),N=((t==null?void 0:t.subtitle)??"").trim(),F=me=>{const je=me.target.value;c(e.id,{focusLabel:je===""?void 0:je})},ee=U.trim().toLowerCase(),A=b.useMemo(()=>v.filter(me=>me.id!==(t==null?void 0:t.id)),[v,t==null?void 0:t.id]),be=b.useMemo(()=>ee?A.filter(me=>{var Ve;const je=(me.subtitle??"").toLowerCase(),Ne=((Ve=y.get(me.objectiveId))==null?void 0:Ve.name.toLowerCase())??"",Ie=(w.get(me.id)??"").toLowerCase(),ie=(me.descriptionMarkdown??"").toLowerCase(),Te=ee;return me.name.toLowerCase().includes(Te)||je.includes(Te)||ie.includes(Te)||Ne.includes(Te)||Ie.includes(Te)}):[],[A,ee,y,w]);b.useEffect(()=>{O||re("")},[O]);const he=A.length>0,ge=e.result;return m.jsxs("article",{ref:_,style:z,className:ze("relative flex flex-col gap-3 rounded-3xl border border-white/10 bg-white/10 p-4 shadow-lg shadow-black/20 transition",I&&"ring-2 ring-sky-400/70"),children:[n?m.jsx("div",{className:"absolute inset-0 -z-[1] rounded-3xl opacity-30 blur-xl",style:{backgroundColor:n.colorHex}}):null,m.jsxs("div",{className:"flex items-start gap-4",children:[m.jsx("button",{type:"button",className:"mt-1 flex h-10 w-10 items-center justify-center rounded-full border border-white/20 text-white/70",...k,...S,"aria-label":"Reordenar trabajo",children:""}),m.jsx("div",{className:"flex-1 space-y-1",children:m.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsxs("p",{className:"text-lg font-semibold text-white",children:[(t==null?void 0:t.name)??"Trabajo eliminado",se?m.jsxs("span",{className:"ml-2 text-sky-300",children:[" ",L]}):null]}),N?m.jsx("p",{className:"text-sm text-white/70",children:N}):null,$?m.jsxs("p",{className:"text-xs text-white/50",children:["Deriva de ",$]}):null,m.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm text-white/60",children:[m.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:h}),m.jsx("span",{className:"text-white/30",children:""}),m.jsxs("span",{children:[p," min"]})]}),m.jsxs("div",{className:"max-w-md",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Foco dentro del trabajo"}),m.jsx("input",{type:"text",value:e.focusLabel??"",onChange:F,placeholder:"Ej. 1/7  Apertura",className:"input-field mt-1"})]}),i?m.jsx("div",{className:"mt-3 flex flex-wrap items-center gap-3",children:m.jsx("div",{className:"flex flex-wrap items-center gap-2",children:["ok","doubt","fail"].map(me=>m.jsx("button",{type:"button",onClick:()=>c(e.id,{result:me,completed:!0}),className:ze("rounded-full border px-3 py-1 text-xs font-semibold transition",ge===me?me==="ok"?"border-emerald-500/60 bg-emerald-500/20 text-emerald-200":me==="doubt"?"border-amber-400/50 bg-amber-500/15 text-amber-200":"border-rose-500/60 bg-rose-500/15 text-rose-200":"border-white/10 text-white/60 hover:border-white/30 hover:text-white"),children:me==="ok"?"OK":me==="doubt"?"Dudosa":"Fallo"},me))})}):null]}),m.jsxs("div",{className:"flex items-center gap-2",children:[Z?m.jsxs("button",{type:"button",onClick:()=>o(e.id),className:ze("inline-flex items-center gap-2 rounded-full border border-white/20 px-3 py-1 text-xs font-semibold text-white/70 transition hover:border-white/40 hover:text-white",r&&"border-white/40 text-white"),children:[m.jsx("span",{className:ze("transition-transform",r?"rotate-90":"rotate-0"),children:""}),r?"Ocultar detalles":"Ver detalles"]}):null,m.jsx(Bi,{objective:n,size:"sm"})]})]})}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{type:"button",onClick:()=>R(me=>!me),disabled:!he,className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-white/20 text-white/70 transition hover:border-sky-400/60 hover:text-white disabled:opacity-40","aria-label":"Intercambiar trabajo por otro de la misma categora","aria-expanded":O,children:""}),m.jsx("button",{type:"button",onClick:u,className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-white/20 text-white/70 transition hover:border-sky-400/60 hover:text-white","aria-label":"Duplicar trabajo en la sesin",children:"x2"}),m.jsx("button",{type:"button",onClick:a,className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-rose-500/40 text-rose-300 hover:border-rose-400 hover:text-rose-200","aria-label":"Eliminar trabajo de la sesin",children:""})]})]}),O?m.jsx("div",{className:"mt-3 space-y-3 rounded-2xl border border-white/10 bg-slate-950/70 p-3",children:m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Buscar en el catlogo"}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:"search",className:"input-field",placeholder:"Buscar en el catlogo",value:U,onChange:me=>re(me.target.value)}),U?m.jsx("div",{className:"absolute top-14 z-10 max-h-60 w-full overflow-y-auto rounded-2xl border border-white/10 bg-slate-900/95 p-2 shadow-xl",children:be.length===0?m.jsx("p",{className:"p-3 text-sm text-white/50",children:"Sin resultados. Ajusta la bsqueda."}):m.jsx("div",{className:"space-y-2",children:be.map(me=>{const Ne=(w.get(me.id)??me.name).split("  ").slice(0,-1).join("  ");return m.jsx(tS,{work:me,objective:y.get(me.objectiveId),parentChain:Ne,onSelect:Ie=>{f(Ie),R(!1),re("")}},me.id)})})}):null]}),U?null:m.jsx("p",{className:"rounded-2xl border border-dashed border-white/15 px-3 py-2 text-xs text-white/60",children:"Escribe para encontrar un reemplazo. Se mostrarn resultados coincidentes del catlogo."})]})}):null,Z&&r?m.jsxs("div",{className:"grid gap-3 rounded-2xl border border-white/10 bg-slate-950/60 p-4",children:[H?m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Descripcin"}),m.jsx("div",{className:"rounded-2xl border border-white/10 bg-slate-950/70 p-3",children:m.jsx(Ss,{content:q,enableWorkLinks:!0})})]}):null,te?m.jsxs("div",{className:"space-y-2",children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-white/40",children:"Vdeos de referencia"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:V.map(me=>m.jsxs("a",{href:me,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-full border border-white/15 bg-white/5 px-3 py-1 text-xs font-medium text-white/80 transition hover:border-white/30 hover:text-white",children:[m.jsx("span",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-red-500/80 text-white shadow shadow-red-500/40",children:""}),"Ver vdeo"]},me))})]}):null]}):null,m.jsx("span",{className:"absolute -left-4 top-4 flex h-8 w-8 items-center justify-center rounded-full border border-white/20 bg-slate-950/90 text-xs font-semibold text-white/60",children:e.order+1})]})}function Mm({session:e,works:t,objectives:n,assistants:r,onDateChange:i}){const o=Ce(L=>L.updateSession),a=Ce(L=>L.addWorkToSession),u=Ce(L=>L.duplicateSessionWork),c=Ce(L=>L.removeWorkFromSession),f=Ce(L=>L.reorderSessionWork),h=Ce(L=>L.updateSessionWorkDetails),p=Ce(L=>L.replaceSessionWork),v=Ce(L=>L.setAttendanceStatus),y=e.kind==="personal",[w,S]=b.useState(""),[k,_]=b.useState(new Set),C=b.useMemo(()=>new Map(n.map(L=>[L.id,L])),[n]),j=b.useMemo(()=>new Map(t.map(L=>[L.id,L])),[t]),I=b.useMemo(()=>{const L=new Map,se=(q,H)=>{if(L.has(q))return L.get(q);const V=j.get(q);if(!V)return"";const te=V.parentWorkId;if(!te||H.has(q))return L.set(q,V.name),V.name;H.add(q);const Z=se(te,H);H.delete(q);const B=Z?`${Z}  ${V.name}`:V.name;return L.set(q,B),B};return t.forEach(q=>se(q.id,new Set)),L},[t,j]),O=b.useMemo(()=>{if(!w)return t;const L=w.toLowerCase();return t.filter(se=>{const q=C.get(se.objectiveId),H=I.get(se.id)??"";return se.name.toLowerCase().includes(L)||se.descriptionMarkdown.toLowerCase().includes(L)||(q==null?void 0:q.name.toLowerCase().includes(L))||H.toLowerCase().includes(L)})},[t,w,C,I]),R=b.useCallback(L=>{const se=I.get(L);if(!se)return"";const q=se.split("  ");return q.pop(),q.join("  ")},[I]),U=L=>{_(se=>{const q=new Set(se);return q.has(L)?q.delete(L):q.add(L),q})},re=L=>{a(e.id,{workId:L}),S("")},z=L=>{const{active:se,over:q}=L;if(!q||se.id===q.id)return;const H=e.workItems.findIndex(te=>te.id===se.id),V=e.workItems.findIndex(te=>te.id===q.id);H===-1||V===-1||f(e.id,H,V)},M=L=>se=>{const q=se.target.value;o(e.id,{[L]:q}),L==="date"&&i&&i(q)};return m.jsxs("div",{className:"space-y-6",children:[y?null:m.jsxs("div",{className:"grid gap-4 rounded-3xl border border-white/10 bg-white/5 p-6",children:[m.jsxs("div",{className:"grid gap-2 sm:grid-cols-3",children:[m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Ttulo"}),m.jsx("input",{type:"text",className:"input-field",value:e.title,onChange:M("title"),placeholder:"Nombre de la sesin"})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Fecha"}),m.jsx("input",{type:"date",className:"input-field",value:e.date,onChange:M("date")})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Hora de inicio"}),m.jsx("input",{type:"time",className:"input-field",value:e.startTime??"18:30",onChange:M("startTime")})]})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Descripcin"}),m.jsx("textarea",{className:"input-field min-h-[120px]",value:e.description??"",onChange:M("description"),placeholder:"Contexto general, objetivos o recordatorios"})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Notas privadas"}),m.jsx("textarea",{className:"input-field min-h-[100px]",value:e.notes??"",onChange:M("notes"),placeholder:"Notas para ti o recordatorios de material"})]})]}),m.jsxs("section",{className:"space-y-4",children:[m.jsxs("header",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-white",children:"Trabajos en la sesin"}),m.jsx("p",{className:"text-sm text-white/60",children:"Arrastra para reorganizar, pulsa  para ajustar detalles."})]}),m.jsxs("div",{className:"relative w-full sm:w-72",children:[m.jsx("input",{type:"search",className:"input-field",value:w,onChange:L=>S(L.target.value),placeholder:"Buscar en catlogo"}),w&&m.jsx("div",{className:"absolute top-12 z-10 max-h-72 w-full overflow-y-auto rounded-2xl border border-white/10 bg-slate-900/95 p-2 shadow-xl",children:O.length===0?m.jsx("p",{className:"p-4 text-sm text-white/50",children:"Sin resultados. Revisa el catlogo."}):m.jsx("div",{className:"space-y-2",children:O.map(L=>m.jsx(tS,{work:L,objective:C.get(L.objectiveId),parentChain:R(L.id),onSelect:re},L.id))})})]})]}),m.jsx("div",{className:"space-y-4",children:m.jsx(g3,{collisionDetection:yF,onDragEnd:z,children:m.jsx(T3,{items:e.workItems.map(L=>L.id),strategy:j3,children:m.jsx("div",{className:"space-y-5",children:e.workItems.length===0?m.jsx("div",{className:"rounded-3xl border border-dashed border-white/20 p-10 text-center text-white/50",children:"Aade trabajos desde el catlogo con el buscador superior."}):(()=>{let L=0;const se=Sc(e.startTime,"18:30");return e.workItems.map(q=>{const H=j.get(q.workId),V=H?C.get(H.objectiveId):void 0,te=q.customDurationMinutes??(H==null?void 0:H.estimatedMinutes)??0,Z=Pp(se+L);return L+=te,m.jsx($3,{item:q,work:H,objective:V,expanded:k.has(q.id),isPersonal:y,onToggleExpanded:U,onRemove:()=>c(e.id,q.id),onDuplicate:()=>u(e.id,q.id),onUpdateDetails:(B,$)=>h(e.id,B,$),onReplace:B=>p(e.id,q.id,B),startTimeLabel:Z,durationMinutes:te,works:t,objectiveMap:C,workPathById:I},q.id)})})()})})})})]}),y?null:m.jsxs("section",{className:"space-y-4",children:[m.jsx("header",{className:"flex flex-col gap-1 sm:flex-row sm:items-baseline sm:justify-between",children:m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-white",children:"Previsin de asistencia"}),m.jsx("p",{className:"text-sm text-white/60",children:"Indica quin esperas que asista. La asistencia real se marca durante la sesin desde la Home."})]})}),m.jsx("div",{className:"space-y-2 rounded-3xl border border-white/10 bg-white/5 p-4",children:r.length===0?m.jsx("p",{className:"text-sm text-white/60",children:"An no tienes asistentes definidos. Adelos desde la seccin correspondiente para empezar a registrar asistencia."}):r.map(L=>{const se=e.attendance.find(V=>V.assistantId===L.id),q=(se==null?void 0:se.status)??"pending",H=se==null?void 0:se.actualStatus;return m.jsxs("div",{className:"flex flex-col gap-2 rounded-2xl border border-white/10 bg-slate-950/60 p-3 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-semibold text-white",children:L.name}),L.notes?m.jsx("p",{className:"text-xs text-white/50",children:L.notes}):null,H?m.jsxs("p",{className:"text-xs text-white/40",children:["ltimo registro real: ",sb[H]]}):null]}),m.jsx("div",{className:"flex items-center gap-2",children:["present","absent","pending"].map(V=>m.jsx("button",{type:"button",onClick:()=>v(e.id,L.id,V),className:ze("rounded-full px-3 py-1 text-xs font-semibold transition",q===V?V==="present"?"border border-emerald-500/60 bg-emerald-500/20 text-emerald-200":V==="absent"?"border border-rose-500/60 bg-rose-500/20 text-rose-200":"border border-white/30 bg-white/10 text-white":"border border-white/10 text-white/60 hover:border-white/30 hover:text-white"),children:sb[V]},V))})]},L.id)})})]})]})}function ob(e){if(!e)return null;const t=e.trim().toLowerCase();if(!t)return null;if(/^\\d+(\\.\\d+)?$/.test(t))return Math.floor(Number(t));if(/^(\\d+:)+\\d+$/.test(t)){const r=t.split(":").map(i=>Number(i));return r.some(i=>Number.isNaN(i))?null:r.reduce((i,o)=>i*60+o,0)}const n=t.match(/^(?:(\\d+)h)?(?:(\\d+)m)?(?:(\\d+)s?)?$/i);if(n){const r=n[1]?Number(n[1]):0,i=n[2]?Number(n[2]):0,o=n[3]?Number(n[3]):0;if(r||i||o)return r*3600+i*60+o}return null}function F3(e){if(!e)return null;try{const t=new URL(e),n=t.hostname.replace("www.","");let r="";if(n==="youtu.be"?r=t.pathname.slice(1).split("/")[0]??"":n.endsWith("youtube.com")?t.searchParams.has("v")?r=t.searchParams.get("v")??"":(t.pathname.startsWith("/shorts/")||t.pathname.startsWith("/embed/"))&&(r=t.pathname.split("/")[2]??""):n==="youtube-nocookie.com"&&t.pathname.startsWith("/embed/")&&(r=t.pathname.split("/")[2]??""),!r)return null;const i=new URL(`https://www.youtube-nocookie.com/embed/${r}`),o=ob(t.searchParams.get("start")??t.searchParams.get("t"));o!==null&&i.searchParams.set("start",String(o));const a=ob(t.searchParams.get("end"));a!==null&&i.searchParams.set("end",String(a));const u=t.searchParams.get("list");return u&&i.searchParams.set("list",u),i.toString()}catch{return null}}function Om({url:e,title:t,maxWidth:n=300,className:r}){const i=e.trim();if(!i)return null;const o=F3(i);return o?m.jsx("div",{className:ze("flex w-full justify-center",r),children:m.jsx("div",{className:"overflow-hidden rounded-2xl border border-white/10 bg-black shadow-inner shadow-black/50",style:{maxWidth:n},children:m.jsx("iframe",{src:o,title:t,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0,className:"block w-full",style:{aspectRatio:"16 / 9"}})})}):m.jsx("div",{className:ze("flex w-full justify-center",r),children:m.jsx("a",{href:i,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-full border border-amber-400/30 bg-amber-500/10 px-3 py-1 text-xs font-semibold text-amber-200 transition hover:border-amber-400 hover:text-white",children:"URL no reconocida, abrir enlace"})})}function B3(e){return Array.from(new Set((e??[]).map(t=>t.trim().toLowerCase()).filter(t=>t.length>0)))}function nS({title:e,titleExtra:t,subtitle:n,objective:r,checked:i,onCheckedChange:o,orderNumber:a,startLabel:u,durationMinutes:c,tags:f,statusPill:h,lastSeenLabel:p,descriptionMarkdown:v,notesMarkdown:y,videoUrls:w,detailsContent:S,isExpanded:k,onToggleExpanded:_,actions:C,detailsActions:j}){const I=(t??"").trim(),O=I.length>0,R=(n??"").trim(),U=(v??"").trim(),re=(y??"").trim(),z=(w??[]).map(Z=>Z.trim()).filter(Boolean),M=!!S,L=B3(f),se=L.length>0,q=!!u||typeof c=="number"||!!p,H=M||U.length>0||re.length>0||z.length>0,V=!!j,te=()=>{H&&_()};return m.jsxs("article",{role:H?"button":void 0,tabIndex:H?0:void 0,onClick:()=>te(),onKeyDown:Z=>{H&&(Z.key==="Enter"||Z.key===" ")&&(Z.preventDefault(),te())},className:ze("flex flex-col gap-2.5 rounded-3xl border border-white/10 bg-white/5 p-2.5 shadow shadow-black/20 sm:gap-3 sm:p-4",H&&"cursor-pointer hover:border-white/20"),style:r?{background:`linear-gradient(120deg, ${r.colorHex}1a, rgba(15,23,42,0.8))`}:void 0,children:[m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("label",{className:"mt-1 flex items-center gap-3 text-left",onClick:Z=>Z.stopPropagation(),onKeyDown:Z=>Z.stopPropagation(),children:m.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded-full border-2 border-white/30 bg-transparent text-sky-400 transition focus:ring-sky-400",checked:i,onChange:Z=>o(Z.target.checked)})}),m.jsxs("div",{className:"flex-1 space-y-2",children:[m.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[m.jsxs("p",{className:"text-lg font-semibold text-white",children:[e,O?m.jsxs("span",{className:"ml-2 text-sky-300",children:[" ",I]}):null]}),h?m.jsx("span",{className:ze("inline-flex items-center rounded-full border px-2 py-0.5 text-[11px] font-semibold",h.className),children:h.label}):null]}),R?m.jsx("p",{className:"text-sm text-white/70",children:R}):null,q?m.jsxs("p",{className:"text-sm text-white/60",children:[u?m.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:u}):null,u&&typeof c=="number"?m.jsx("span",{className:"mx-2 text-white/30",children:""}):null,typeof c=="number"?m.jsxs("span",{children:[c," min"]}):null,(u||typeof c=="number")&&p?m.jsx("span",{className:"mx-2 text-white/30",children:""}):null,p?m.jsxs("span",{className:"text-xs text-white/50",children:["ltima vez: ",p]}):null]}):null]}),m.jsx(Bi,{objective:r,size:"sm"})]}),se?m.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-[11px] uppercase tracking-wide text-white/40",children:[L.slice(0,8).map(Z=>m.jsx("span",{className:"rounded-full border border-white/10 px-2 py-0.5",children:Z},Z)),L.length>8?m.jsxs("span",{className:"text-white/50",children:["+",L.length-8]}):null]}):null,H?m.jsxs("div",{className:"flex items-center gap-3 text-xs text-white/50",children:[m.jsxs("button",{type:"button",onClick:Z=>{Z.stopPropagation(),te()},className:"inline-flex items-center gap-2 rounded-full border border-white/15 px-3 py-1 text-xs font-semibold text-white/70 transition hover:border-white/30 hover:text-white",children:[m.jsx("span",{className:ze("transition-transform",k?"rotate-90":"rotate-0"),children:""}),k?"Ocultar detalles":"Ver detalles"]}),z.length>0?m.jsxs("span",{children:[z.length," vdeo",z.length>1?"s":""]}):null]}):null]}),m.jsx("div",{className:ze("mt-1 flex h-10 w-10 items-center justify-center rounded-full border border-white/10 text-xs font-semibold uppercase text-white/60",i?"bg-white/20 text-white":""),children:a})]}),C?m.jsx("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-end",onClick:Z=>Z.stopPropagation(),onKeyDown:Z=>Z.stopPropagation(),children:C}):null,H&&k?m.jsxs("div",{className:"space-y-3 rounded-2xl border border-white/10 bg-slate-950/40 p-3 sm:p-4",onClick:Z=>Z.stopPropagation(),onKeyDown:Z=>Z.stopPropagation(),children:[M?S:null,U?m.jsx(Ss,{content:U,enableWorkLinks:!0}):null,re?m.jsxs("div",{className:"space-y-2",children:[m.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-white/40",children:"Notas"}),m.jsx(Ss,{content:re,enableWorkLinks:!0})]}):null,z.length>0?m.jsxs("div",{className:"space-y-3",children:[m.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-white/40",children:"Vdeos"}),m.jsx("div",{className:"grid gap-4 lg:grid-cols-3",children:z.map((Z,B)=>m.jsxs("div",{className:"space-y-2",children:[m.jsx(Om,{url:Z,title:`${e} vdeo ${B+1}`}),m.jsx("a",{href:Z,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-full border border-white/15 bg-white/5 px-3 py-1 text-xs font-medium text-white/80 transition hover:border-white/30 hover:text-white",children:"Abrir en YouTube"})]},`${e}-video-${B}`))})]}):null,V?m.jsx("div",{className:"flex flex-wrap items-center justify-end gap-2 pt-1",children:j}):null]}):null]})}function z3(e){const t=(e.day()+6)%7;return e.subtract(t,"day")}function U3(e){const t=z3(e.startOf("month"));return Array.from({length:6},(n,r)=>Array.from({length:7},(i,o)=>t.add(r*7+o,"day")))}function Hu(e,t){return He(e).format("YYYY-MM-DD")===He(t).format("YYYY-MM-DD")}He.locale("es");const W3={present:"Presente",absent:"Ausente",pending:"Pendiente"},H3={present:"border border-emerald-500/40 bg-emerald-500/10 text-emerald-100",absent:"border border-rose-500/40 bg-rose-500/10 text-rose-100",pending:"border border-white/20 bg-white/10 text-white/70"},V3=["present","absent"],q3={present:"Han venido",absent:"Faltan"},K3={present:"border border-emerald-500/60 bg-emerald-500/15 text-emerald-100 shadow shadow-emerald-500/15",absent:"border border-rose-500/60 bg-rose-500/10 text-rose-100 shadow shadow-rose-500/10"},Y3="group inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-400/30 sm:text-sm",G3="border-emerald-500/60 bg-emerald-500/15 text-emerald-100 shadow-sm shadow-emerald-500/20 hover:border-emerald-400 hover:bg-emerald-500/20",J3="border-white/15 bg-white/5 text-white/60 hover:border-white/40 hover:text-white",Q3="flex h-6 w-6 items-center justify-center rounded-full border text-[12px] transition sm:h-7 sm:w-7",X3="border-emerald-400 bg-emerald-400/20 text-emerald-100 shadow shadow-emerald-500/25",Z3="border-white/25 text-white/40 group-hover:border-white/50 group-hover:text-white/80",e5=[];function t5(e){return He(e).locale("es").format("dddd, D [de] MMMM")}function n5(e){return He(e).format("MMMM YYYY")}function ab({mode:e,onChange:t}){return m.jsxs("div",{className:"flex items-center gap-2 rounded-full border border-white/10 bg-white/5 p-1",children:[m.jsx("button",{type:"button",className:ze("rounded-full px-4 py-2 text-sm font-semibold transition",e==="view"?"bg-white text-slate-900":"text-white/70 hover:text-white"),onClick:()=>{e!=="view"&&t("view")},children:"Vista"}),m.jsx("button",{type:"button",className:ze("rounded-full px-4 py-2 text-sm font-semibold transition",e==="edit"?"bg-white text-slate-900":"text-white/70 hover:text-white"),onClick:()=>{e!=="edit"&&t("edit")},children:"Editar"})]})}function r5({session:e,objectives:t,works:n,isActive:r,onSelect:i,onDuplicate:o,onDelete:a}){const u=b.useMemo(()=>new Map(t.map(p=>[p.id,p])),[t]),c=b.useMemo(()=>new Map(n.map(p=>[p.id,p])),[n]),f=b.useMemo(()=>{const p=e.workItems[0];if(!p)return;const v=c.get(p.workId);if(v)return u.get(v.objectiveId)},[e.workItems,c,u]),h=e.workItems.reduce((p,v)=>{const y=c.get(v.workId);return p+(v.customDurationMinutes??(y==null?void 0:y.estimatedMinutes)??0)},0);return m.jsxs("button",{type:"button",onClick:i,className:ze("group relative flex flex-col gap-3 rounded-3xl border border-white/10 bg-white/5 p-5 text-left transition hover:border-sky-400/50 hover:shadow-lg hover:shadow-sky-500/10",r&&"ring-2 ring-sky-400/70"),children:[f?m.jsx("div",{className:"absolute inset-0 -z-[1] rounded-3xl opacity-20 blur-2xl transition group-hover:opacity-40",style:{backgroundColor:f.colorHex}}):null,m.jsxs("div",{className:"flex items-start justify-between gap-2",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-lg font-semibold text-white",children:e.title||"Sesin sin ttulo"}),m.jsxs("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:[e.workItems.length," trabajos  ",h," min"]})]}),m.jsx(Bi,{objective:f,size:"sm"})]}),m.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-white/60",children:[e.workItems.slice(0,3).map(p=>{const v=c.get(p.workId),y=((v==null?void 0:v.subtitle)??"").trim();return m.jsx("span",{className:"rounded-full border border-white/10 px-3 py-1",children:y?`${(v==null?void 0:v.name)??"Trabajo"}  ${y}`:(v==null?void 0:v.name)??"Trabajo"},p.id)}),e.workItems.length>3?m.jsxs("span",{className:"rounded-full border border-white/10 px-3 py-1",children:["+",e.workItems.length-3]}):null]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(Bi,{objective:f,size:"sm"}),m.jsxs("div",{className:"ml-auto flex gap-2",children:[m.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),o()},className:"btn-secondary px-3 py-1 text-xs",children:"Duplicar"}),m.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),a()},className:"inline-flex items-center justify-center rounded-full border border-rose-500/40 px-3 py-1 text-xs font-semibold text-rose-300 transition hover:border-rose-400 hover:text-rose-200",children:"Eliminar"})]})]})]})}function i5(){const e=Ce(D=>D.sessions),t=Ce(D=>D.plans),n=Ce(D=>D.works),r=Ce(D=>D.objectives),i=Ce(D=>D.assistants),o=Ce(D=>D.addSession),a=Ce(D=>D.duplicateSession),u=Ce(D=>D.deleteSession),c=Ce(D=>D.setAttendanceActualStatus),f=Ce(D=>D.toggleSessionWorkCompletion),[h,p]=Oo(),v=(h.get("plan")??"").trim(),y=h.get("session")??void 0,w=h.get("mode")==="edit"?"edit":"view",S=b.useMemo(()=>t.filter(D=>D.kind==="class"&&D.enabled),[t]),k=b.useMemo(()=>S.length===0?void 0:S.find(G=>G.id===v)??S[0],[S,v]),_=(k==null?void 0:k.id)??"classes";b.useEffect(()=>{if(!k||v===k.id)return;const D=new URLSearchParams(h);D.set("plan",k.id),p(D,{replace:!0})},[k,v,h,p]);const C=b.useMemo(()=>e.filter(D=>D.kind==="class"&&(D.planId??"classes")===_),[e,_]),[j,I]=b.useState(()=>w==="edit"),[O,R]=b.useState(new Set),U=b.useMemo(()=>[...C].sort((D,G)=>He(D.date).valueOf()-He(G.date).valueOf()),[C]),re=He().format("YYYY-MM-DD"),z=b.useMemo(()=>U.find(D=>D.date>=re)??U[U.length-1],[U,re]),[M,L]=b.useState(()=>y&&C.some(D=>D.id===y)?y:z==null?void 0:z.id),se=D=>{const G=new URLSearchParams(h);D==="edit"?G.set("mode","edit"):G.delete("mode"),p(G,{replace:!0})};b.useEffect(()=>{y&&C.some(D=>D.id===y)&&L(y)},[y,C]),b.useEffect(()=>{if(!(M&&C.some(D=>D.id===M))){if(y&&C.some(D=>D.id===y)){L(y);return}L(z==null?void 0:z.id)}},[M,y,C,z]);const q=b.useMemo(()=>M?U.find(D=>D.id===M)??z:z,[U,M,z]),H=b.useMemo(()=>{const D=(q==null?void 0:q.workItems)??[],G=D.length,de=D.filter(Re=>Re.completed??!1).length,pe=G>0?Math.round(de/G*100):0;return{total:G,done:de,percent:pe}},[q==null?void 0:q.workItems]),V=b.useMemo(()=>{const D=new Map;return q&&U.forEach(G=>{G.date>=q.date||G.workItems.forEach(de=>{de.workId&&D.set(de.workId,G.date)})}),D},[U,q]),te=D=>{const G=new URLSearchParams(h);D?G.set("session",D):G.delete("session"),p(G,{replace:!0})},Z=D=>{L(D),te(D)},B=(q==null?void 0:q.date)??re,[$,N]=b.useState(B),[F,ee]=b.useState(He(B).startOf("month").format("YYYY-MM-DD"));b.useEffect(()=>{q&&(N(q.date),ee(He(q.date).startOf("month").format("YYYY-MM-DD")))},[q]);const A=b.useMemo(()=>{const D=new Map;return C.forEach(G=>{const de=He(G.date).format("YYYY-MM-DD"),pe=D.get(de)??[];pe.push(G),D.set(de,pe)}),D.forEach(G=>G.sort((de,pe)=>(de.title??"").localeCompare(pe.title??"","es"))),D},[C]),be=b.useMemo(()=>A.get($)??[],[A,$]),he=b.useMemo(()=>U3(He(F)),[F]),ge=b.useMemo(()=>{const D=He(F);return C.filter(G=>{const de=He(G.date);return de.year()===D.year()&&de.month()===D.month()}).sort((G,de)=>He(G.date).valueOf()-He(de.date).valueOf())},[C,F]),me=b.useMemo(()=>{const D=new Map;return ge.forEach(G=>{const de=He(G.date).format("YYYY-MM-DD"),pe=D.get(de)??[];pe.push(G),D.set(de,pe)}),Array.from(D.entries()).sort((G,de)=>He(G[0]).valueOf()-He(de[0]).valueOf()).map(([G,de])=>({date:G,sessions:de.slice().sort((pe,Re)=>(pe.title??"").localeCompare(Re.title??"","es"))}))},[ge]),je=D=>{N(D),ee(He(D).startOf("month").format("YYYY-MM-DD"));const G=A.get(D)??[];G.length>0?Z(G[0].id):Z(void 0)},Ne=()=>{const D=o({date:$,planId:_,title:"Nueva sesin",description:"",notes:""});Z(D.id)},Ie=D=>{const G=a(D,$);G&&Z(G.id)},ie=D=>{u(D),M===D&&Z(void 0)},Te=D=>{const G=He(F).add(D,"month");ee(G.format("YYYY-MM-DD")),N(de=>{const pe=He(de);return pe.month()===G.month()&&pe.year()===G.year()?de:G.startOf("month").format("YYYY-MM-DD")})},Ve=b.useMemo(()=>new Map(r.map(D=>[D.id,D])),[r]),Ke=b.useMemo(()=>new Map(n.map(D=>[D.id,D])),[n]),rt=U.length===0,st=b.useMemo(()=>i.filter(D=>D.active).slice().sort((D,G)=>D.name.localeCompare(G.name,"es",{sensitivity:"base"})),[i]),kt=(q==null?void 0:q.attendance)??e5,un=b.useMemo(()=>{const D=new Map;kt.forEach(pe=>{D.set(pe.assistantId,pe)});let G=0;st.forEach(pe=>{var Re;((Re=D.get(pe.id))==null?void 0:Re.actualStatus)==="present"&&(G+=1)});const de={present:G,absent:Math.max(st.length-G,0)};return{map:D,summary:de}},[kt,st]),Jt=un.map,bt=un.summary,Pt=b.useMemo(()=>Sc(q==null?void 0:q.startTime,"18:30"),[q==null?void 0:q.startTime]),J=b.useMemo(()=>{if(!q)return new Map;let D=0;const G=new Map;return q.workItems.forEach(de=>{const pe=Ke.get(de.workId),Re=de.customDurationMinutes??(pe==null?void 0:pe.estimatedMinutes)??0,Pe=Pp(Pt+D);G.set(de.id,{startLabel:Pe,duration:Re}),D+=Re}),G},[q,Ke,Pt]),fe=q?U.findIndex(D=>D.id===q.id):-1,ye=fe>0,_e=fe>=0&&fe<U.length-1,Y=()=>{ye&&Z(U[fe-1].id)},P=()=>{_e&&Z(U[fe+1].id)},K=D=>{const G=D.target.value;if(!G)return;je(G);const de=A.get(G);de&&de.length>0&&Z(de[0].id)},le=D=>{R(G=>{const de=new Set(G);return de.has(D)?de.delete(D):de.add(D),de})},X=(D,G)=>{q&&c(q.id,D,G)},ue=j?m.jsxs("section",{className:"glass-panel space-y-6 p-6",children:[m.jsxs("header",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:"Calendario"}),m.jsx("h2",{className:"text-xl font-semibold text-white",children:n5(F)})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>Te(-1),children:" Mes anterior"}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>Te(1),children:"Mes siguiente "})]})]}),m.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.3fr_1.7fr]",children:[m.jsxs("section",{className:"space-y-4",children:[m.jsx("div",{className:"grid grid-cols-7 gap-2 text-center text-xs font-semibold uppercase tracking-wide text-white/50",children:["L","M","X","J","V","S","D"].map(D=>m.jsx("div",{className:"rounded-full bg-white/5 py-2",children:D},D))}),m.jsx("div",{className:"grid grid-cols-7 gap-2",children:he.flat().map(D=>{const G=D.format("YYYY-MM-DD"),de=A.get(G)??[],pe=D.month()===He(F).month(),Re=Hu(G,re),Pe=Hu(G,$);return m.jsxs("button",{type:"button",onClick:()=>je(G),className:ze("relative flex h-20 flex-col items-center justify-between rounded-2xl border p-2 text-sm transition",Pe?"border-sky-400/60 bg-sky-500/20 text-white shadow-lg shadow-sky-500/20":"border-white/10 bg-white/5 text-white/70 hover:border-white/30",!pe&&"text-white/30"),children:[m.jsx("span",{className:ze("flex h-8 w-8 items-center justify-center rounded-full text-base font-semibold",Re?"bg-white text-slate-900":""),children:D.format("D")}),m.jsxs("div",{className:"flex w-full flex-wrap justify-center gap-1",children:[de.slice(0,3).map(De=>{const ft=De.workItems[0],$e=ft?n.find(Ye=>Ye.id===ft.workId):void 0,qe=$e?r.find(Ye=>Ye.id===$e.objectiveId):void 0;return m.jsx("span",{className:"h-2 w-6 rounded-full",style:{backgroundColor:(qe==null?void 0:qe.colorHex)??"rgba(255,255,255,0.4)"}},De.id)}),de.length>3?m.jsx("span",{className:"h-2 w-2 rounded-full border border-white/40"}):null]})]},G)})})]}),m.jsxs("section",{className:"space-y-4",children:[m.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:"Sesiones en"}),m.jsx("h3",{className:"text-2xl font-semibold text-white",children:He($).format("dddd, D [de] MMMM")})]}),m.jsx("div",{className:"flex gap-3",children:m.jsx("button",{type:"button",onClick:Ne,className:"btn-primary",children:"+ Nueva sesin"})})]}),m.jsx("div",{className:"space-y-3",children:be.length===0?m.jsx("div",{className:"rounded-3xl border border-dashed border-white/15 p-10 text-center text-white/50",children:"An no hay sesiones planificadas este da. Crea una con el botn superior."}):be.map(D=>m.jsx(r5,{session:D,objectives:r,works:n,isActive:D.id===(q==null?void 0:q.id),onSelect:()=>Z(D.id),onDuplicate:()=>Ie(D.id),onDelete:()=>ie(D.id)},D.id))}),me.length>0?m.jsxs("details",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[m.jsxs("summary",{className:"cursor-pointer text-sm font-semibold text-white/80",children:["Ver sesiones del mes (",ge.length,")"]}),m.jsx("div",{className:"custom-scrollbar mt-3 max-h-[22rem] space-y-3 overflow-y-auto pr-1",children:me.map(({date:D,sessions:G})=>{const de=G.length===1?"1 sesin":`${G.length} sesiones`;return m.jsxs("div",{role:"button",tabIndex:0,onClick:()=>je(D),onKeyDown:pe=>{(pe.key==="Enter"||pe.key===" ")&&(pe.preventDefault(),je(D))},className:ze("cursor-pointer rounded-2xl border border-white/10 bg-white/5 p-3 text-sm transition hover:border-white/40 hover:bg-white/10",Hu(D,$)&&"border-sky-400/50 bg-sky-500/10 shadow shadow-sky-500/10"),children:[m.jsxs("p",{className:"flex flex-wrap items-center gap-2 text-xs uppercase tracking-[0.3em] text-white/40",children:[m.jsx("span",{children:He(D).format("ddd  D MMM")}),m.jsx("span",{className:"rounded-full border border-white/15 px-2 py-0.5 text-[9px] font-semibold tracking-[0.2em] text-white/50",children:de})]}),m.jsx("div",{className:"mt-3 space-y-2 text-xs",children:G.map(pe=>{const Re=(pe.description??"").trim(),Pe=pe.workItems.reduce((De,ft)=>{const $e=n.find(qe=>qe.id===ft.workId);return De+(ft.customDurationMinutes??($e==null?void 0:$e.estimatedMinutes)??0)},0);return m.jsxs("button",{type:"button",onClick:De=>{De.stopPropagation(),je(D),Z(pe.id)},className:ze("flex w-full flex-col gap-1 rounded-xl border border-white/10 bg-slate-950/60 px-3 py-2 text-left transition hover:border-white/30 hover:text-white",pe.id===(q==null?void 0:q.id)&&Hu(D,$)&&"border-sky-400/60 text-white"),children:[m.jsxs("div",{className:"flex w-full items-center justify-between gap-3",children:[m.jsx("span",{className:"truncate font-medium",children:pe.title||"Sesin sin ttulo"}),m.jsxs("span",{className:"text-[11px] uppercase tracking-wide text-white/40",children:[pe.workItems.length,"  ",Pe," min"]})]}),Re?m.jsx("p",{className:"text-[11px] leading-relaxed text-white/60",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:Re}):null]},pe.id)})})]},D)})})]}):null]})]})]}):null;return m.jsxs("div",{className:"space-y-6",children:[rt||!q?m.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-end",children:[m.jsx(ab,{mode:w,onChange:se}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>I(D=>!D),children:j?"Ocultar calendario":"Abrir calendario"})]}):null,ue,rt?m.jsxs("section",{className:"glass-panel flex flex-col items-center justify-center gap-5 p-4 text-center sm:gap-6 sm:p-10",children:[m.jsx("div",{className:"grid h-28 w-28 place-items-center rounded-full bg-gradient-to-br from-sky-500/30 to-purple-500/30 shadow-lg shadow-sky-500/20 sm:h-32 sm:w-32",children:m.jsx("svg",{width:"52",height:"52",viewBox:"0 0 24 24",fill:"none",className:"text-white/80 sm:h-14 sm:w-14",children:m.jsx("path",{d:"M6 3v2M18 3v2M3.5 10h17M5 7h14a2 2 0 0 1 2 2v9a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3V9a2 2 0 0 1 2-2Z",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})})}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("p",{className:"text-lg font-semibold text-white sm:text-2xl",children:"An no hay sesiones"}),m.jsx("p",{className:"mx-auto max-w-md text-sm text-white/60 sm:text-base",children:"Crea tu primera sesin en el calendario y empieza a construir tu plan reutilizable."})]}),m.jsx("button",{type:"button",className:"btn-primary",onClick:()=>I(!0),children:"Abrir calendario"})]}):q?m.jsxs("section",{className:"glass-panel space-y-4 p-3 sm:space-y-6 sm:p-6 lg:p-8",children:[m.jsxs("header",{className:"space-y-3 sm:flex sm:items-start sm:justify-between sm:gap-6 sm:space-y-0",children:[m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs("div",{className:"flex items-center gap-2 text-xs uppercase tracking-[0.3em] text-white/40",children:[m.jsx("span",{className:"sm:hidden",children:"Sesin"}),m.jsx("span",{className:"hidden sm:inline",children:"Fecha"})]}),m.jsx("h2",{className:"font-display text-2xl font-semibold text-white sm:text-3xl",children:t5(q.date)}),m.jsx("p",{className:"text-sm font-medium text-white/80 sm:text-lg",children:q.title})]}),m.jsxs("div",{className:"flex flex-col gap-2.5 rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-sm text-white/70 sm:w-auto",children:[m.jsxs("div",{className:"flex items-center justify-between gap-4",children:[m.jsx("p",{className:"font-semibold text-white",children:"Duracin estimada"}),m.jsxs("span",{className:"rounded-full bg-white/10 px-3 py-1 text-xs text-white/80",children:[q.workItems.map(D=>{const G=Ke.get(D.workId);return D.customDurationMinutes??(G==null?void 0:G.estimatedMinutes)??0}).reduce((D,G)=>D+G,0)||0," ","min"]})]}),m.jsxs("div",{children:[m.jsxs("p",{className:"mt-1 text-xs text-white/60",children:["Progreso: ",H.done,"/",H.total,"  ",H.percent,"%"]}),m.jsx("div",{className:"mt-2 h-2 w-full overflow-hidden rounded-full border border-white/10 bg-slate-950/50",children:m.jsx("div",{className:"h-full rounded-full bg-white/25",style:{width:`${Math.min(Math.max(H.percent,0),100)}%`}})})]}),m.jsxs("div",{className:"flex flex-col gap-2 sm:items-end",children:[m.jsx("label",{className:"text-[11px] uppercase tracking-wide text-white/40 sm:text-xs",children:"Ir a fecha"}),m.jsx("input",{type:"date",className:"input-field w-full sm:w-auto",value:q.date??re,onChange:K})]})]})]}),m.jsxs("div",{className:"flex flex-col gap-2.5 sm:flex-row sm:flex-wrap sm:items-center sm:justify-between",children:[m.jsxs("div",{className:"flex flex-wrap gap-2",children:[m.jsx("button",{type:"button",onClick:Y,disabled:!ye,className:"btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold disabled:opacity-40 sm:h-10 sm:text-sm",children:" Anterior"}),m.jsx("button",{type:"button",onClick:P,disabled:!_e,className:"btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold disabled:opacity-40 sm:h-10 sm:text-sm",children:"Siguiente "})]}),m.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[m.jsx(ab,{mode:w,onChange:se}),m.jsx("button",{type:"button",className:"btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold sm:h-10 sm:text-sm",onClick:()=>I(D=>!D),children:j?"Ocultar calendario":"Abrir calendario"})]})]}),w==="edit"?m.jsx("div",{className:"rounded-2xl border border-white/10 bg-slate-950/40 p-3 sm:p-4",children:m.jsx(Mm,{session:q,works:n,objectives:r,assistants:i,onDateChange:D=>{N(D),ee(He(D).startOf("month").format("YYYY-MM-DD"))}})}):m.jsxs(m.Fragment,{children:[q.description&&m.jsx("div",{className:"rounded-2xl border border-white/5 bg-white/5 p-3 sm:p-4",children:m.jsx(Ss,{content:q.description})}),m.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[m.jsx("h3",{className:"text-sm uppercase tracking-[0.3em] text-white/40",children:"Trabajos"}),m.jsx("div",{className:"space-y-3 sm:space-y-4",children:q.workItems.map(D=>{const G=Ke.get(D.workId),de=G?Ve.get(G.objectiveId):void 0,pe=O.has(D.id),Re=J.get(D.id),Pe=(Re==null?void 0:Re.startLabel)??Pp(Pt),De=(Re==null?void 0:Re.duration)??D.customDurationMinutes??(G==null?void 0:G.estimatedMinutes)??0,ft=(D.focusLabel??"").trim(),$e=D.customDescriptionMarkdown??(G==null?void 0:G.descriptionMarkdown)??"",qe=((G==null?void 0:G.videoUrls)??[]).map(Ue=>Ue.trim()).filter(Boolean),Ye=((G==null?void 0:G.subtitle)??"").trim();return m.jsx(nS,{title:(G==null?void 0:G.name)??"Trabajo eliminado",titleExtra:ft,subtitle:Ye,objective:de,checked:D.completed??!1,onCheckedChange:Ue=>f(q.id,D.id,Ue),orderNumber:(D.order??0)+1,startLabel:Pe,durationMinutes:De,tags:G==null?void 0:G.tags,lastSeenLabel:V.get(D.workId)?He(V.get(D.workId)).format("D MMM YYYY"):void 0,descriptionMarkdown:$e,videoUrls:qe,isExpanded:pe,onToggleExpanded:()=>le(D.id)},D.id)})})]})]}),w==="view"?i.length===0?m.jsxs("div",{className:"rounded-2xl border border-dashed border-white/15 bg-white/5 p-3 text-xs text-white/70 sm:text-sm sm:p-4",children:[m.jsx("p",{className:"font-semibold text-white",children:"Quines participan?"}),m.jsx("p",{className:"mt-1",children:"Crea tu lista de asistentes para poder registrar quin ha venido a clase en tiempo real."}),m.jsx(Li,{to:"/assistants",className:"btn-secondary mt-3 h-8 rounded-2xl px-3 text-xs",children:"Gestionar asistentes"})]}):st.length===0?m.jsxs("div",{className:"rounded-2xl border border-dashed border-white/15 bg-white/5 p-3 text-xs text-white/70 sm:text-sm sm:p-4",children:[m.jsx("p",{className:"font-semibold text-white",children:"Todos los asistentes estn inactivos."}),m.jsx("p",{className:"mt-1",children:"Activa al menos uno desde la seccin de asistentes para poder marcar su asistencia."}),m.jsx(Li,{to:"/assistants",className:"btn-secondary mt-3 h-8 rounded-2xl px-3 text-xs",children:"Ir a asistentes"})]}):m.jsxs("div",{className:"space-y-3 rounded-2xl border border-white/10 bg-slate-950/60 p-3 sm:space-y-4 sm:p-5",children:[m.jsxs("div",{className:"flex flex-col gap-2.5 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:"Asistencia en vivo"}),m.jsx("p",{className:"text-xs text-white/50 sm:text-sm",children:"Marca quin est presente en la sesin actual."})]}),m.jsx("div",{className:"flex flex-wrap gap-2",children:V3.map(D=>m.jsxs("span",{className:ze("inline-flex items-center gap-2 rounded-full px-2.5 py-0.5 text-[11px] font-semibold sm:px-3 sm:py-1 sm:text-xs",K3[D]),children:[bt[D]," ",q3[D]]},D))})]}),m.jsx("div",{className:"space-y-2",children:st.map(D=>{const G=Jt.get(D.id),de=(G==null?void 0:G.status)??"pending",pe=(G==null?void 0:G.actualStatus)==="present",Re=()=>X(D.id,pe?"absent":"present");return m.jsx("article",{className:"rounded-2xl border border-white/10 bg-white/5 p-2.5 sm:p-4",children:m.jsxs("div",{className:"flex flex-col gap-2.5 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-semibold text-white",children:D.name}),m.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2 text-[11px] text-white/50 sm:text-xs",children:[m.jsx("span",{className:"uppercase tracking-wide text-white/40",children:"Previsin"}),m.jsx("span",{className:ze("inline-flex items-center gap-2 rounded-full px-2 py-0.5 font-semibold",H3[de]),children:W3[de]}),m.jsx("span",{className:"hidden text-white/30 sm:inline",children:""}),m.jsx("span",{className:"uppercase tracking-wide text-white/40",children:"Asistencia"}),m.jsx("span",{className:ze("font-semibold",pe?"text-emerald-200":"text-white/60"),children:pe?"Presente":"No asisti"})]})]}),m.jsxs("div",{className:"flex flex-col items-end gap-1 text-right sm:flex-row sm:items-center sm:gap-3",children:[m.jsxs("button",{type:"button",onClick:Re,"aria-pressed":pe,"aria-label":`${pe?"Desmarcar asistencia de":"Marcar asistencia de"} ${D.name}`,title:pe?"Desmarcar asistencia":"Marcar como presente",className:ze(Y3,pe?G3:J3),children:[m.jsx("span",{className:ze(Q3,pe?X3:Z3),children:pe?m.jsx("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 sm:h-4 sm:w-4","aria-hidden":"true",children:m.jsx("path",{d:"M4 8.5 6.5 11l5-6",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}):m.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-white/30 transition group-hover:bg-white/60"})}),m.jsx("span",{children:pe?"Ha asistido":"Marcar asistencia"})]}),m.jsx("span",{className:ze("text-[10px] font-medium uppercase tracking-[0.25em] sm:text-[11px]",pe?"text-emerald-200":"text-white/40"),children:pe?"PRESENTE":"AUSENTE"})]})]})},D.id)})})]}):null]}):m.jsx("div",{className:"glass-panel p-10 text-center text-white/60",children:"Selecciona una sesin desde el calendario."})]})}const Rp="https://maballesteros.com/ebooks/ebooks.json";let Ap=null;const Ia={value:null,ts:0},Th=new Map,Ih=new Map;function Dm(e){try{return new URL(e).origin}catch{return"https://maballesteros.com"}}function Lm(e,t){const n=(e??"").trim();return!n||/^https?:\/\//i.test(n)?n:n.startsWith("/")?`${t}${n}`:`${t}/${n}`}async function s5(){if(Ia.value&&Date.now()-Ia.ts<6e4)return Ia.value;const e=`${window.location.origin}/ebooks/ebooks.json`,t=async r=>{const i=await fetch(r,{cache:"no-store"});if(!i.ok)throw new Error(`Failed to fetch catalog (${i.status})`);const o=await i.json();return Array.isArray(o)?o.map(a=>a).map(a=>({id:String(a.id??"").trim(),title:String(a.title??"").trim(),author:a.author?String(a.author):void 0,cover:a.cover?String(a.cover):void 0,description:a.description?String(a.description):void 0,path:String(a.path??"").trim()})).filter(a=>a.id&&a.title&&a.path):[]};let n=[];try{n=await t(e),Ap=window.location.origin}catch{n=await t(Rp),Ap=Dm(Rp)}return Ia.value=n,Ia.ts=Date.now(),n}function o5(){return Ap??"https://maballesteros.com"}function Ec(e){const t=o5();return Lm(e,t)}async function rS(e){const t=Ec(e);return Th.has(t)||Th.set(t,(async()=>{const n=await fetch(t,{cache:"no-store"});if(!n.ok)throw new Error(`Failed to fetch ebook index (${n.status})`);const i=await n.json()??{},o=String(i.title??"").trim()||"Ebook",a=String(i.basePath??"").trim()||"/ebooks/",u=Array.isArray(i.chapters)?i.chapters:[];return{title:o,basePath:a,chapters:u.map(c=>c).map(c=>({id:String(c.id??"").trim(),title:String(c.title??"").trim()||"Chapter",sections:(Array.isArray(c.sections)?c.sections:[]).map(f=>f).map(f=>({title:String(f.title??"").trim()||"Section",path:String(f.path??"").trim()})).filter(f=>!!f.path)})).filter(c=>c.id&&c.sections.length>0)}})()),Th.get(t)}function $m(e){const t=[];return(e.chapters??[]).forEach(n=>{(n.sections??[]).forEach(r=>{t.push({chapterId:n.id,chapterTitle:n.title,title:r.title,path:r.path})})}),t}const a5=[{month:1,names:["enero","jan","january"]},{month:2,names:["febrero","feb","february"]},{month:3,names:["marzo","mar","march"]},{month:4,names:["abril","abr","april"]},{month:5,names:["mayo","may"]},{month:6,names:["junio","jun","june"]},{month:7,names:["julio","jul","july"]},{month:8,names:["agosto","ago","august"]},{month:9,names:["septiembre","setiembre","sep","september"]},{month:10,names:["octubre","oct","october"]},{month:11,names:["noviembre","nov","november"]},{month:12,names:["diciembre","dic","dec","december"]}];function l5(e){return e.trim().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function iS(e){const t=l5(e),n=a5.find(r=>r.names.includes(t));return n?n.month:null}function u5(e){const t=e.trim(),n=/^(\d{2})\s+([A-Za-z]+)\b/.exec(t);if(!n)return null;const r=Number(n[1]);if(!Number.isFinite(r)||r<1||r>31)return null;const i=iS(n[2]);return i?`${String(i).padStart(2,"0")}-${String(r).padStart(2,"0")}`:null}function c5(e){const t=/(?:^|\/)(\d{2})_([a-zA-Z]+)\b/.exec(e);if(!t)return null;const n=Number(t[1]);if(!Number.isFinite(n)||n<1||n>31)return null;const r=iS(t[2]);return r?`${String(r).padStart(2,"0")}-${String(n).padStart(2,"0")}`:null}function sS(e,t){const n=He(t);if(!n.isValid())return null;const r=n.format("MM-DD");if(r==="02-29")return null;const i=$m(e),o=new Map;return i.forEach(a=>{const u=u5(a.title),c=c5(a.path),f=u??c;f&&(o.has(f)||o.set(f,a))}),o.get(r)??null}function oS(e,t){if(e.length===0)return null;const n=(t??"").trim();if(!n)return{section:e[0],index:0};const r=e.findIndex(o=>o.path===n),i=r===-1?0:r+1;return i>=e.length?null:{section:e[i],index:i}}function d5(e,t,n){const r=Dm(Ec(e)),o=`${((t.basePath??"/").startsWith("/")?t.basePath:`/${t.basePath}`).replace(/\/?$/,"/")}${n.replace(/^\//,"")}`;return Lm(o,r)}async function f5(e){const t=Lm(e,Dm(Rp));return Ih.has(t)||Ih.set(t,(async()=>{const n=await fetch(t,{cache:"no-store"});if(!n.ok)throw new Error(`Failed to fetch markdown (${n.status})`);return await n.text()})()),Ih.get(t)}function h5(e,t){const n=(e??[]).map(i=>String(i??"").trim()).filter(Boolean),r=String(t??"").trim();return!r||n.includes(r)?n:[...n,r]}function lb(e){const t=(e??[]).map(n=>String(n??"").trim()).filter(Boolean);return t.length>0?t[t.length-1]:void 0}function p5({work:e,sessionId:t,sessionDate:n,planId:r,sessionItem:i}){const o=e.ebookRef,a=Ce(H=>H.sessions),u=Ce(H=>H.updateSessionWorkDetails),[c,f]=b.useState(null),[h,p]=b.useState(null),[v,y]=b.useState(!1),[w,S]=b.useState(null),[k,_]=b.useState(null),[C,j]=b.useState(""),[I,O]=b.useState(!1),R=b.useMemo(()=>w?$m(w):[],[w]),U=b.useMemo(()=>{const H=lb(i.readPaths);if(H)return H;const V=a.filter(te=>te.planId===r&&He(te.date).isBefore(He(n),"day")).slice().sort((te,Z)=>He(Z.date).valueOf()-He(te.date).valueOf());for(const te of V){const Z=(te.workItems??[]).find($=>$.workId===e.id);if(!Z||Z.result!=="ok"&&Z.completed!==!0)continue;const B=lb(Z.readPaths);if(B)return B}},[r,n,i.readPaths,a,e.id]);b.useEffect(()=>{if(!(o!=null&&o.indexUrl))return;let H=!1;return y(!0),f(null),(async()=>{try{const V=await rS(o.indexUrl);if(H)return;S(V)}catch(V){if(H)return;f(V instanceof Error?V.message:"Error loading ebook index"),S(null)}finally{H||y(!1)}})(),()=>{H=!0}},[o==null?void 0:o.indexUrl]);const re=b.useMemo(()=>{if(!o||!w)return null;const H=i.contentRef;if(H&&H.kind==="ebook_section"&&H.ebookId===o.ebookId&&H.indexUrl===o.indexUrl){const V=R.findIndex(te=>te.path===H.sectionPath);if(V>=0)return{section:R[V],index:V}}if(o.mode==="daily_fixed"){const V=sS(w,n);if(!V)return null;const te=R.findIndex(Z=>Z.path===V.path);return{section:V,index:te>=0?te:0}}return oS(R,U)},[o,w,U,R,n,i.contentRef]);b.useEffect(()=>{if(!o||!re)return;const H=i.contentRef;(!H||H.kind!=="ebook_section"||H.ebookId!==o.ebookId||H.indexUrl!==o.indexUrl||H.sectionPath!==re.section.path)&&u(t,i.id,{contentRef:{kind:"ebook_section",ebookId:o.ebookId,indexUrl:o.indexUrl,sectionPath:re.section.path,sectionTitle:re.section.title,chapterTitle:re.section.chapterTitle}})},[o,re,t,i.id,i.contentRef,u]),b.useEffect(()=>{re&&k===null&&_(re.index)},[k,re]),b.useEffect(()=>{if(k===null||!w||!o)return;const H=R[k];if(!H)return;let V=!1;return O(!0),p(null),(async()=>{try{const te=d5(o.indexUrl,w,H.path),Z=await f5(te);if(V)return;j(Z)}catch(te){if(V)return;j(""),p(te instanceof Error?te.message:"Error loading content")}finally{V||O(!1)}})(),()=>{V=!0}},[k,o,w,R]);const z=(o==null?void 0:o.mode)==="sequential"&&k!==null&&k+1<R.length,M=k!==null?R[k]:null,L=(o==null?void 0:o.mode)==="sequential"&&k!==null?`${k+1}/${R.length}`:void 0,se=()=>{z&&_(H=>H===null?H:Math.min(H+1,R.length-1))},q=()=>{!o||!M||(u(t,i.id,{completed:!0,result:i.result??"ok",contentRef:{kind:"ebook_section",ebookId:o.ebookId,indexUrl:o.indexUrl,sectionPath:M.path,sectionTitle:M.title,chapterTitle:M.chapterTitle},readPaths:h5(i.readPaths,M.path)}),o.mode==="sequential"&&se())};return o?v?m.jsx("p",{className:"text-sm text-white/60",children:"Cargando ebook"}):c?m.jsxs("div",{className:"rounded-xl border border-rose-500/40 bg-rose-500/10 p-3 text-sm text-rose-200",children:["Error cargando ebook: ",c]}):!re||!M||!w?m.jsx("div",{className:"rounded-xl border border-white/10 bg-white/5 p-3 text-sm text-white/60",children:"No hay entrada disponible para esta fecha."}):m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:w.title}),m.jsxs("p",{className:"text-sm font-semibold text-white",children:[M.title,L?m.jsxs("span",{className:"ml-2 text-xs font-semibold text-white/50",children:["(",L,")"]}):null]}),m.jsx("p",{className:"text-xs text-white/50",children:M.chapterTitle})]}),m.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[o.mode==="sequential"?m.jsx("button",{type:"button",className:"btn-secondary",onClick:se,disabled:!z,children:"Ver ms"}):null,m.jsx("button",{type:"button",className:ze("btn-secondary","border-emerald-400/30"),onClick:q,children:"Marcar ledo"})]})]}),I?m.jsx("p",{className:"text-sm text-white/60",children:"Cargando contenido"}):null,h?m.jsxs("div",{className:"rounded-xl border border-rose-500/40 bg-rose-500/10 p-3 text-sm text-rose-200",children:["Error cargando contenido: ",h]}):null,C?m.jsx(Ss,{content:C,enableWorkLinks:!0}):null]}):m.jsx("div",{className:"rounded-xl border border-amber-400/40 bg-amber-500/10 p-3 text-sm text-amber-200",children:"Este work es `nodeType=ebook` pero no tiene `ebookRef` configurado."})}He.locale("es");const aS="personal-exclude",m5={ok:"OK",doubt:"Dudosa",fail:"Fallo"},g5={ok:"border-emerald-500/50 bg-emerald-500/15 text-emerald-100 hover:border-emerald-400",doubt:"border-amber-400/40 bg-amber-500/10 text-amber-200 hover:border-amber-300",fail:"border-rose-500/50 bg-rose-500/10 text-rose-200 hover:border-rose-400"};function Zc(e){return Array.from(new Set((e??[]).map(t=>t.trim().toLowerCase()).filter(t=>t.length>0)))}function xo(e,t){const n=Zc(e.tags),r=e.nodeType??"work";return!(t.byWorkIds&&t.byWorkIds.length>0&&!t.byWorkIds.includes(e.id)||t.byNodeTypes&&t.byNodeTypes.length>0&&!t.byNodeTypes.includes(r)||t.byTags&&t.byTags.length>0&&!t.byTags.map(o=>o.trim().toLowerCase()).filter(Boolean).every(o=>n.includes(o)))}function lS(e,t){const n=e.nodeType??"work",r=t.targetsDays[n]??t.targetsDays.work??7,i=Zc(e.tags),o=(t.overrides??[]).reduce((u,c)=>{var p,v;const f=((v=(p=c.match)==null?void 0:p.tagsAny)==null?void 0:v.map(y=>y.trim().toLowerCase()).filter(Boolean))??[];return f.length===0?u:f.some(y=>i.includes(y))?u*(c.multiplier||1):u},1);return Math.max(1,Math.round(r*o))}function y5(e){return(e.nodeType??"").trim().toLowerCase()!=="style"}function yo(e,t){const n=typeof e.estimatedMinutes=="number"?e.estimatedMinutes:0;if(Number.isFinite(n)&&n>0)return n;const r=(e.nodeType??"work").trim().toLowerCase()||"work",i=t.defaultMinutesByNodeType[r]??t.defaultMinutesByNodeType.work??3;return Math.max(.25,Number(i)||3)}function v5(e){return e.startOf("day").diff(e.startOf("year"),"day")+1}function x5(e,t){const n=He(t),r=Math.trunc(Number(e.number));if(!Number.isFinite(r))return!1;switch(e.kind){case"day_of_year":return v5(n)===r;case"day_of_month":return n.date()===r;case"day_of_week":return n.day()===r;default:return!1}}function uS(e){var h,p,v;const t=e.groups??[];if(t.length>0)return[...t].sort((y,w)=>(y.order??0)-(w.order??0));const n=Math.max(0,Number((h=e.template)==null?void 0:h.focusMinutes)||18),r=Math.max(0,Number((p=e.template)==null?void 0:p.rouletteMinutes)||10),i=Math.max(0,Number((v=e.template)==null?void 0:v.recapMinutes)||0),o=e.focusSelectors??[],a=e.rouletteSelectors??[],u=o.length>0?o:[{byNodeTypes:["segment","form"]}],c=a.length>0?a:[{byNodeTypes:["technique"]},{byTags:["roulette"]}],f=[{id:"formas",name:"Formas",enabled:!0,order:1,type:"work",limitMode:"minutes",minutesBudget:n,strategy:"overdue",hierarchyRule:"prefer_leaves",include:u,exclude:[]},{id:"tecnicas",name:"Tcnicas",enabled:!0,order:2,type:"work",limitMode:"minutes",minutesBudget:r,strategy:"weighted",hierarchyRule:"allow_all",include:c,exclude:[]}];return i>0&&f.push({id:"recap",name:"Recap",enabled:!0,order:99,type:"note",limitMode:"minutes",minutesBudget:i}),f}function b5({mode:e,onChange:t}){return m.jsxs("div",{className:"flex items-center gap-2 rounded-full border border-white/10 bg-white/5 p-1",children:[m.jsx("button",{type:"button",className:ze("rounded-full px-4 py-2 text-sm font-semibold transition",e==="view"?"bg-white text-slate-900":"text-white/70 hover:text-white"),onClick:()=>{e!=="view"&&t("view")},children:"Vista"}),m.jsx("button",{type:"button",className:ze("rounded-full px-4 py-2 text-sm font-semibold transition",e==="edit"?"bg-white text-slate-900":"text-white/70 hover:text-white"),onClick:()=>{e!=="edit"&&t("edit")},children:"Editar"})]})}function w5(e){let t=2166136261;for(let n=0;n<e.length;n+=1)t^=e.charCodeAt(n),t=Math.imul(t,16777619);return t>>>0}function k5(e){let t=e>>>0;return()=>{t=t+1831565813>>>0;let n=Math.imul(t^t>>>15,1|t);return n^=n+Math.imul(n^n>>>7,61|n),((n^n>>>14)>>>0)/4294967296}}function S5(e,t,n){const r=k5(w5(n));return e.map(i=>{const o=Math.max(1e-4,t(i)),a=Math.max(1e-9,r()),u=-Math.log(a)/o;return{item:i,score:u}}).sort((i,o)=>i.score-o.score).map(({item:i})=>i)}function E5(e){const t=new Map;return e.forEach(n=>{n.workItems.forEach(r=>{if(!((r.completed??!1)||typeof r.result<"u"))return;const o=t.get(r.workId);(!o||He(n.date).isAfter(o.date))&&t.set(r.workId,{date:n.date,result:r.result,effort:r.effort})})}),t}function _5(e){const{works:t,personalSessions:n,cadence:r,today:i}=e,o=E5(n);return t.filter(a=>y5(a)).filter(a=>(a.nodeType??"").trim().toLowerCase()!=="reading"||!a.schedule?!0:x5(a.schedule,i)).filter(a=>!Zc(a.tags).includes(aS)).map(a=>{const u=o.get(a.id),c=lS(a,r);if(!u)return{work:a,targetDays:c,overdueScore:1e4};const f=Math.max(He(i).diff(He(u.date),"day"),0),h=Math.max(f-c,0);return{work:a,targetDays:c,lastSeen:u.date,daysSince:f,overdueScore:h,lastResult:u.result}}).sort((a,u)=>{if(u.overdueScore!==a.overdueScore)return u.overdueScore-a.overdueScore;const c=a.daysSince??1e4,f=u.daysSince??1e4;return f!==c?f-c:a.work.name.localeCompare(u.work.name,"es",{sensitivity:"base"})})}function C5(e){return e?He(e).format("D MMM YYYY"):"Nunca"}function j5(e){const{dueList:t,plan:n,today:r,childCountByWorkId:i}=e,o=n.limitMode==="count"||n.limitMode==="both",a=n.limitMode==="minutes"||n.limitMode==="both",u=o?Math.max(1,Math.round(n.maxItems||12)):Number.POSITIVE_INFINITY,c=a?Math.max(0,Number(n.minutesBudget)||0):Number.POSITIVE_INFINITY,f=new Set([].filter(z=>(z.completed??!1)||typeof z.result<"u").map(z=>z.workId)),h=t.filter(z=>!f.has(z.work.id)),p=He(r).day(),v=uS(n).filter(z=>z.enabled).filter(z=>{const M=z.daysOfWeek??[];return M.length===0||M.includes(p)}).sort((z,M)=>(z.order??0)-(M.order??0)),y=v.filter(z=>(z.type??"work")==="note").reduce((z,M)=>M.limitMode==="minutes"||M.limitMode==="both"?z+Math.max(0,Number(M.minutesBudget)||0):z,0),w=Number.isFinite(c)?Math.max(0,c-y):Number.POSITIVE_INFINITY,S=`kungfu-${r}`,k=z=>{const M=z.overdueScore>=1e4?1e3:Math.max(0,z.overdueScore+1);return z.lastResult==="fail"?M*1.6:z.lastResult==="doubt"?M*1.25:M},_=z=>yo(z.work,n),C=z=>{const M=(z.nodeType??"work").trim().toLowerCase()||"work";return{segment:30,drill:22,form:20,work:10,application:0,technique:0,link:0,style:-100}[M]??5},j=z=>[...z].sort((M,L)=>{if(L.overdueScore!==M.overdueScore)return L.overdueScore-M.overdueScore;const se=M.daysSince??1e4,q=L.daysSince??1e4;if(q!==se)return q-se;const H=C(L.work)-C(M.work);return H!==0?H:M.work.name.localeCompare(L.work.name,"es",{sensitivity:"base"})}),I=new Set,O=[];let R=0,U=0;for(const z of v){if((z.type??"work")==="note"){O.push({group:z,items:[],plannedMinutes:0});continue}const L=z.include??[],se=z.exclude??[];let q=h.filter(ge=>I.has(ge.work.id)||!(L.length===0?!0:L.some(Ne=>xo(ge.work,Ne)))?!1:!se.some(Ne=>xo(ge.work,Ne)));if((z.hierarchyRule??"allow_all")==="prefer_leaves"){const ge=new Set(q.map(me=>me.work.parentWorkId).filter(Boolean));q=q.filter(me=>ge.has(me.work.id)?(i.get(me.work.id)??0)===0:!0)}const te=(z.strategy??"overdue")==="weighted"?S5(q,k,`${S}-${z.id}`):j(q),Z=z.limitMode??"minutes",B=Z==="count"||Z==="both",$=Z==="minutes"||Z==="both",N=Number(z.maxItems),F=B&&Number.isFinite(N)?Math.max(0,Math.round(N)):Number.POSITIVE_INFINITY,ee=Number(z.minutesBudget),A=$&&Number.isFinite(ee)?Math.max(0,ee):Number.POSITIVE_INFINITY,be=[];let he=0;for(const ge of te){if(U>=u||be.length>=F)break;const me=_(ge);if(!(he+me>A)&&!(R+me>w)&&(be.push(ge),he+=me,R+=me,U+=1,I.add(ge.work.id),a&&R>=w))break}if(O.push({group:z,items:be,plannedMinutes:Math.round(he*10)/10}),U>=u||a&&R>=w)break}const re=Math.round((R+y)*10)/10;return{groups:O,plannedMinutes:{work:Math.round(R*10)/10,reserved:Math.round(y*10)/10,total:re},totalItems:U}}function N5(e){const{items:t,groups:n,worksById:r,resolveGroupLabelForItem:i}=e;if(t.length===0)return t;let o=[...t];const a=u=>(u.completed??!1)||typeof u.result<"u";return n.filter(u=>(u.type??"work")!=="note").forEach(u=>{const c=u.limitMode??"minutes";if(!(c==="count"||c==="both"))return;const h=Number(u.maxItems);if(!Number.isFinite(h)||h<=0)return;const p=[];if(o.forEach((_,C)=>{const j=r.get(_.workId);!j||i(_,j)!==u.name||p.push(C)}),p.length<=h)return;const v=p.reduce((_,C)=>_+(a(o[C])?1:0),0),y=Math.max(0,h-v),w=[];if(p.forEach(_=>{a(o[_])||w.push(_)}),w.length<=y)return;const S=w.length-y,k=new Set(w.slice(-S));o=o.filter((_,C)=>!k.has(C))}),o.map((u,c)=>({...u,order:c}))}function T5(){const e=Ce(P=>P.works),t=Ce(P=>P.sessions),n=Ce(P=>P.plans),r=Ce(P=>P.objectives),i=Ce(P=>P.assistants),o=Ce(P=>P.kungfuCadence),a=Ce(P=>P.kungfuTodayPlan);Ns();const u=Ce(P=>P.addSession),c=Ce(P=>P.addWorkToSession),f=Ce(P=>P.updateSessionWorkDetails),h=Ce(P=>P.updateSessionWorkItems),p=Ce(P=>P.updateSession),[v,y]=Oo(),w=(v.get("plan")??"").trim(),S=He().format("YYYY-MM-DD"),k=(v.get("date")??"").trim(),_=He(k,"YYYY-MM-DD",!0).isValid()?k:S,C=v.get("mode")==="edit"?"edit":"view",j=b.useMemo(()=>n.filter(P=>P.kind==="personal"&&P.enabled),[n]),I=b.useMemo(()=>j.length===0?void 0:j.find(K=>K.id===w)??j[0],[j,w]),O=(I==null?void 0:I.id)??"personal-kungfu";b.useEffect(()=>{if(!I||w===I.id)return;const P=new URLSearchParams(v);P.set("plan",I.id),y(P,{replace:!0})},[I,w,v,y]),b.useEffect(()=>{if(!!He(k,"YYYY-MM-DD",!0).isValid())return;const K=new URLSearchParams(v);K.set("date",_),y(K,{replace:!0})},[_,k,v,y]);const R=(I==null?void 0:I.cadence)??o,U=(I==null?void 0:I.todayPlan)??a,re=b.useMemo(()=>t.filter(P=>P.kind==="personal"&&(P.planId??"personal-kungfu")===O),[t,O]),z=b.useMemo(()=>re.find(P=>P.date===_),[re,_]),M=b.useMemo(()=>_5({works:e,personalSessions:re,cadence:R,today:_}),[e,re,R,_]),L=b.useMemo(()=>{const P=new Map;return e.forEach(K=>{const le=K.parentWorkId??"";le&&P.set(le,(P.get(le)??0)+1)}),P},[e]),se=b.useMemo(()=>new Map(e.map(P=>[P.id,P])),[e]),q=b.useMemo(()=>new Map(r.map(P=>[P.id,P])),[r]),[H,V]=b.useState(null),[te,Z]=b.useState({}),[B,$]=b.useState(new Set),N=b.useCallback(P=>{const K=(P??_).trim()||_,le=re.find(X=>X.date===K);return le||u({date:K,kind:"personal",planId:O,title:(I==null?void 0:I.name)??"Entrenamiento personal",description:"",notes:""})},[_,u,re,I==null?void 0:I.name,O]),F=b.useCallback(P=>{const K=(P??[]).slice().sort((D,G)=>(D.order??0)-(G.order??0)),le=new Map,X=[],ue=(D,G)=>{const de=(D??[]).map(Pe=>String(Pe??"").trim()).filter(Boolean),pe=(G??[]).map(Pe=>String(Pe??"").trim()).filter(Boolean);if(de.length===0&&pe.length===0)return;const Re=[...de];return pe.forEach(Pe=>{Re.includes(Pe)||Re.push(Pe)}),Re};return K.forEach(D=>{const G=D.workId;if(!G)return;const de=le.get(G);if(!de){le.set(G,{...D}),X.push(G);return}const pe={...de,customDescriptionMarkdown:de.customDescriptionMarkdown??D.customDescriptionMarkdown,customDurationMinutes:de.customDurationMinutes??D.customDurationMinutes,notes:de.notes??D.notes,focusLabel:de.focusLabel??D.focusLabel,completed:!!(de.completed??!1)||!!(D.completed??!1),result:de.result??D.result,effort:de.effort??D.effort,contentRef:de.contentRef??D.contentRef,readPaths:ue(de.readPaths,D.readPaths)};le.set(G,pe)}),X.map((D,G)=>({...le.get(D),order:G}))},[]);b.useEffect(()=>{if(!z)return;const P=z.workItems??[],K=P.reduce((ue,D)=>{const G=D.workId;return G&&ue.set(G,(ue.get(G)??0)+1),ue},new Map);if(!Array.from(K.values()).some(ue=>ue>1))return;const X=F(P);X.length!==P.length&&h(z.id,X)},[z,h,F]);const ee=b.useMemo(()=>{const P=He(_).day();return uS(U).filter(K=>K.enabled).filter(K=>{const le=K.daysOfWeek??[];return le.length===0||le.includes(P)}).sort((K,le)=>(K.order??0)-(le.order??0))},[U,_]);b.useEffect(()=>{var X;const P={},K=(z==null?void 0:z.notesByGroupId)??void 0;K&&Object.entries(K).forEach(([ue,D])=>{const G=(ue??"").trim();G&&(P[G]=String(D??""))});const le=((z==null?void 0:z.notes)??"").toString();if(le.trim().length>0){const ue=((X=ee.find(D=>(D.type??"work")==="note"))==null?void 0:X.id)??"note";P[ue]||(P[ue]=le)}Z(P)},[z==null?void 0:z.notes,z==null?void 0:z.notesByGroupId,ee]);const A=b.useMemo(()=>{const P=new Map;return ee.filter(K=>(K.type??"work")!=="note").forEach((K,le)=>{P.set(K.name,le)}),P},[ee]),be=b.useCallback(P=>{const K=ee.filter(le=>(le.type??"work")!=="note");for(const le of K){const X=le.include??[],ue=le.exclude??[];if(!(!(X.length===0||X.some(de=>xo(P,de)))||ue.some(de=>xo(P,de))))return le.name}return"Hoy"},[ee]),he=b.useMemo(()=>new Set(ee.filter(P=>(P.type??"work")!=="note").map(P=>P.name).filter(Boolean)),[ee]),ge=b.useCallback((P,K)=>{const le=(P.focusLabel??"").trim();return le&&he.has(le)?le:be(K)},[he,be]),me=b.useCallback(P=>{const K=Ce.getState().sessions.find(X=>X.id===P);if(!K)return null;const le=(K.workItems??[]).map(X=>{const ue=se.get(X.workId);if(!ue)return X;const D=ge(X,ue);return D===X.focusLabel?X:{...X,focusLabel:D}});return le.sort((X,ue)=>{const D=X.focusLabel??"Hoy",G=ue.focusLabel??"Hoy",de=A.get(D)??999,pe=A.get(G)??999;return de!==pe?de-pe:(X.order??0)-(ue.order??0)}),le},[A,se,ge]),[je,Ne]=b.useState(!1),Ie=b.useCallback(async P=>{const K=Ce.getState(),le=K.sessions.find(Pe=>Pe.id===P);if(!le)return;const X=(le.planId??O).trim()||O,ue=le.date,G=K.sessions.filter(Pe=>Pe.kind==="personal"&&(Pe.planId??O)===X).filter(Pe=>He(Pe.date).isBefore(He(ue),"day")).slice().sort((Pe,De)=>He(De.date).valueOf()-He(Pe.date).valueOf()),de=(Pe,De)=>{const ft=(De.readPaths??[]).map($e=>String($e??"").trim()).filter(Boolean);if(ft.length>0)return ft[ft.length-1];for(const $e of G){const qe=($e.workItems??[]).find(Ue=>Ue.workId===Pe);if(!qe||qe.result!=="ok"&&qe.completed!==!0)continue;const Ye=(qe.readPaths??[]).map(Ue=>String(Ue??"").trim()).filter(Boolean);if(Ye.length>0)return Ye[Ye.length-1]}},pe=await Promise.all((le.workItems??[]).map(async Pe=>{var qe;const De=se.get(Pe.workId),ft=((De==null?void 0:De.nodeType)??"work").trim().toLowerCase();if(!De||ft!=="ebook"||!De.ebookRef)return Pe;const $e=De.ebookRef;try{const Ye=await rS($e.indexUrl),Ue=$m(Ye);let ot=null;const lt=Pe.contentRef;if(lt&&lt.kind==="ebook_section"&&lt.ebookId===$e.ebookId&&lt.indexUrl===$e.indexUrl){const Ge=Ue.findIndex(mt=>mt.path===lt.sectionPath);Ge>=0&&(ot={section:Ue[Ge],index:Ge})}if(!ot)if($e.mode==="daily_fixed"){const Ge=sS(Ye,ue);if(Ge){const mt=Ue.findIndex(et=>et.path===Ge.path);ot={section:Ge,index:mt>=0?mt:0}}}else ot=oS(Ue,de(De.id,Pe));if(!ot)return Pe;const Fe={kind:"ebook_section",ebookId:$e.ebookId,indexUrl:$e.indexUrl,sectionPath:ot.section.path,sectionTitle:ot.section.title,chapterTitle:ot.section.chapterTitle};return((qe=Pe.contentRef)==null?void 0:qe.kind)==="ebook_section"&&Pe.contentRef.ebookId===Fe.ebookId&&Pe.contentRef.indexUrl===Fe.indexUrl&&Pe.contentRef.sectionPath===Fe.sectionPath?Pe:{...Pe,contentRef:Fe}}catch{return Pe}}));pe.some((Pe,De)=>{var ft;return Pe.contentRef!==((ft=(le.workItems??[])[De])==null?void 0:ft.contentRef)})&&h(P,pe)},[O,h,se]),ie=b.useCallback(P=>{if(!je&&M.length!==0){Ne(!0);try{const K=z??N(),X=(Ce.getState().sessions.find($e=>$e.id===K.id)??K).workItems??[],ue=new Set(X.map($e=>$e.workId));if((U.limitMode==="count"||U.limitMode==="both")&&ue.size>=Math.max(1,Math.round(U.maxItems||12))){P!=null&&P.includeDiagnostics&&(V({type:"success",text:"Plan ya est lleno por cantidad. Sube el mximo de tems en Ajustes."}),window.setTimeout(()=>V(null),2500));return}const G=new Map;X.forEach($e=>{const qe=se.get($e.workId);if(!qe)return;const Ye=ge($e,qe),Ue=ee.find(Fe=>Fe.name===Ye),ot=(Ue==null?void 0:Ue.id)??Ye,lt=G.get(ot)??{minutes:0,items:0};G.set(ot,{minutes:lt.minutes+yo(qe,U),items:lt.items+1})});const de=X.reduce(($e,qe)=>{const Ye=se.get(qe.workId);return Ye?$e+yo(Ye,U):$e},0),pe={...U,maxItems:Math.max(0,Math.round((U.maxItems??0)-ue.size)),minutesBudget:Math.max(0,Number(U.minutesBudget??0)-de),groups:ee.map($e=>{const qe=G.get($e.id),Ye={...$e};return qe&&(typeof $e.minutesBudget=="number"&&Number.isFinite($e.minutesBudget)&&(Ye.minutesBudget=Math.max(0,$e.minutesBudget-qe.minutes)),typeof $e.maxItems=="number"&&Number.isFinite($e.maxItems)&&(Ye.maxItems=Math.max(0,Math.round($e.maxItems-qe.items)))),Ye})},Re=M.filter($e=>!ue.has($e.work.id)),Pe=j5({dueList:Re,todaySession:void 0,plan:pe,today:_,childCountByWorkId:L});let De=0;Pe.groups.filter($e=>($e.group.type??"work")!=="note").forEach($e=>{$e.items.forEach(qe=>{c(K.id,{workId:qe.work.id,focusLabel:$e.group.name,customDurationMinutes:yo(qe.work,U)}),De+=1})});const ft=me(K.id);if(ft){const $e=F(ft),qe=N5({items:$e,groups:ee,worksById:se,resolveGroupLabelForItem:ge});h(K.id,qe),Ie(K.id)}if(P!=null&&P.includeDiagnostics)if(De>0)V({type:"success",text:`Plan actualizado: +${De} tem${De===1?"":"s"}.`}),window.setTimeout(()=>V(null),2e3);else{const $e=ee.filter(qe=>(qe.type??"work")!=="note").map(qe=>{const Ye=qe.include??[],Ue=qe.exclude??[],ot=Re.filter(Ge=>(Ye.length===0?!0:Ye.some(Mt=>xo(Ge.work,Mt)))?!Ue.some(Mt=>xo(Ge.work,Mt)):!1),lt=qe.limitMode==="minutes"||qe.limitMode==="both"?Math.max(0,Number(qe.minutesBudget)||0):void 0,Fe=qe.limitMode==="count"||qe.limitMode==="both"?Math.max(0,Math.round(Number(qe.maxItems)||0)):void 0;return[`${qe.name}: ${ot.length} match`,typeof lt=="number"?`${lt}m`:null,typeof Fe=="number"?`${Fe} items`:null].filter(Boolean).join("  ")}).slice(0,3).join(" | ");V({type:"success",text:$e?`No hay nuevos tems para aadir. ${$e}`:"No hay nuevos tems para aadir con los lmites actuales."}),window.setTimeout(()=>V(null),4e3)}}finally{Ne(!1)}}},[je,M,z,N,U,se,ee,_,L,c,h,F,me,ge]),Te=b.useCallback(()=>{if(je||!window.confirm("Recrear sesin volver a planificar el da seleccionado. Mantendr los tems ya registrados (OK/Dudosa/Fallo) y las notas, pero quitar el resto. Continuar?"))return;const K=z??N(),le=(K.workItems??[]).filter(X=>(X.completed??!1)||typeof X.result<"u").map(X=>{const ue=se.get(X.workId);return ue?{...X,focusLabel:ge(X,ue)}:X}).sort((X,ue)=>(X.order??0)-(ue.order??0)).map((X,ue)=>({...X,order:ue}));h(K.id,F(le)),window.setTimeout(()=>ie({reason:"recreate",includeDiagnostics:!0}),0)},[F,N,ie,je,ge,z,h,se]);b.useEffect(()=>{M.length===0||((z??N()).workItems??[]).some(X=>!!X.focusLabel)||ie({reason:"initial-seed"})},[M,U,_,L,h,se,ee,A,be,z,N,ie]);const Ve=z?z.workItems.filter(P=>(P.completed??!1)||typeof P.result<"u").length:0,Ke=b.useMemo(()=>ee.filter(P=>(P.type??"work")==="note"),[ee]),rt=b.useMemo(()=>{const P=(z==null?void 0:z.workItems)??[],K=P.length,le=P.filter(pe=>(pe.completed??!1)||typeof pe.result<"u").length,X=Ke.length,ue=Ke.filter(pe=>(te[pe.id]??"").trim().length>0).length,D=K+X,G=le+ue,de=D>0?Math.round(G/D*100):0;return{total:D,done:G,percent:de,totalWorks:K,doneWorks:le,totalNotes:X,doneNotes:ue}},[te,Ke,z==null?void 0:z.workItems]),st=b.useMemo(()=>{const P=new Map,K=new Map;return((z==null?void 0:z.workItems)??[]).slice().sort((X,ue)=>(X.order??0)-(ue.order??0)).forEach(X=>{const ue=M.find(ft=>ft.work.id===X.workId),D=se.get(X.workId);if(!D)return;const G=(X.completed??!1)||typeof X.result<"u",de={work:D,targetDays:lS(D,R),overdueScore:0,lastSeen:ue==null?void 0:ue.lastSeen,daysSince:ue==null?void 0:ue.daysSince,lastResult:ue==null?void 0:ue.lastResult},pe=ue??de,Re=ge(X,D),Pe=P.get(Re)??[];Pe.push(pe),P.set(Re,Pe);const De=K.get(Re)??{total:0,done:0};De.total+=1,G&&(De.done+=1),K.set(Re,De)}),Array.from(P.entries()).map(([X,ue])=>{const D=K.get(X)??{total:ue.length,done:0};return{label:X,entries:ue,total:D.total,done:D.done}}).sort((X,ue)=>{const D=A.get(X.label)??999,G=A.get(ue.label)??999;return D!==G?D-G:X.label.localeCompare(ue.label,"es",{sensitivity:"base"})})},[z==null?void 0:z.workItems,M,se,R,A,ge]),kt=b.useMemo(()=>{const P=new Map(st.map(X=>[X.label,X])),K=new Set,le=[];return ee.forEach(X=>{if((X.type??"work")==="note"){le.push({kind:"note",group:X});return}const ue=P.get(X.name);ue&&(K.add(ue.label),le.push({kind:"work",...ue}))}),st.forEach(X=>{K.has(X.label)||le.push({kind:"work",...X})}),le},[ee,st]),un=P=>{const K=P.work,X=Zc(K.tags).filter(lt=>lt!==aS),ue=B.has(K.id),D=z==null?void 0:z.workItems.find(lt=>lt.workId===K.id),G=D==null?void 0:D.result,de=!!((D==null?void 0:D.completed)??!1)||typeof(D==null?void 0:D.result)<"u",pe=(K.videoUrls??[]).map(lt=>lt.trim()).filter(Boolean),Re=q.get(K.objectiveId),Pe=(D==null?void 0:D.customDurationMinutes)??K.estimatedMinutes??yo(K,U),De=((D==null?void 0:D.focusLabel)??"").trim(),ft=De&&he.has(De)?"":De,$e=G?{label:m5[G],className:g5[G]}:void 0,qe=()=>$(lt=>{const Fe=new Set(lt);return Fe.has(K.id)?Fe.delete(K.id):Fe.add(K.id),Fe}),Ye=lt=>{var Ge;const Fe=N(),Ee=Fe.workItems.find(mt=>mt.workId===K.id);if(!Ee){const mt=c(Fe.id,{workId:K.id,focusLabel:ge({focusLabel:void 0},K),customDurationMinutes:Pe});if(!mt)return;f(Fe.id,mt.id,{completed:lt,result:lt?"ok":void 0});return}if(lt){const et=(K.nodeType??"work").trim().toLowerCase()==="ebook"&&((Ge=Ee.contentRef)==null?void 0:Ge.kind)==="ebook_section"?Ee.contentRef.sectionPath:void 0,Mt=(()=>{if(!et)return Ee.readPaths;const Rt=(Ee.readPaths??[]).map(Bn=>String(Bn??"").trim()).filter(Boolean);return Rt.includes(et)?Rt:[...Rt,et]})();f(Fe.id,Ee.id,{completed:!0,result:Ee.result??"ok",readPaths:Mt})}else f(Fe.id,Ee.id,{completed:!1,result:void 0,readPaths:void 0})},ot=(K.nodeType??"work").trim().toLowerCase()==="ebook"&&D&&(z!=null&&z.planId)?m.jsx(p5,{work:K,sessionId:z.id,sessionDate:z.date,planId:z.planId,sessionItem:D}):void 0;return m.jsx(nS,{title:K.name,titleExtra:ft,subtitle:K.subtitle,objective:Re,checked:de,onCheckedChange:Ye,orderNumber:((D==null?void 0:D.order)??0)+1,durationMinutes:Pe,tags:X,statusPill:$e,lastSeenLabel:C5(P.lastSeen),detailsContent:ot,descriptionMarkdown:K.descriptionMarkdown,notesMarkdown:K.notes,videoUrls:pe,isExpanded:ue,onToggleExpanded:qe,detailsActions:m.jsx(Li,{to:`/catalog?workId=${encodeURIComponent(K.id)}`,className:"btn-secondary",children:"Editar en catlogo"})},K.id)},Jt=P=>{var de;const K=N(),le=(P??"").trim();if(!le)return;const X=te[le]??"",ue=X.trim().length===0,D={...K.notesByGroupId??{}};ue?delete D[le]:D[le]=X;const G=((de=ee.find(pe=>(pe.type??"work")==="note"))==null?void 0:de.id)??le;p(K.id,{notesByGroupId:Object.keys(D).length>0?D:void 0,notes:D[G]??""})};b.useEffect(()=>{z||N(_)},[_,z,N]);const bt=b.useMemo(()=>{const P=(z==null?void 0:z.workItems)??[];return Math.round(P.reduce((K,le)=>{const X=se.get(le.workId);if(!X)return K;const ue=le.customDurationMinutes??X.estimatedMinutes??yo(X,U);return K+ue},0))},[z==null?void 0:z.workItems,se,U]),Pt=P=>{const K=new URLSearchParams(v);P==="edit"?K.set("mode","edit"):K.delete("mode"),y(K,{replace:!0})},J=P=>{const K=new URLSearchParams(v);K.set("date",P),K.delete("session"),y(K,{replace:!0})},fe=P=>{const K=P.target.value;K&&J(He(K).format("YYYY-MM-DD"))},ye=()=>J(He(_).subtract(1,"day").format("YYYY-MM-DD")),_e=()=>J(He(_).add(1,"day").format("YYYY-MM-DD")),Y=()=>J(S);return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("header",{className:"glass-panel space-y-4 p-3 sm:space-y-6 sm:p-6 lg:p-8",children:[m.jsxs("div",{className:"space-y-3 sm:flex sm:items-start sm:justify-between sm:gap-6 sm:space-y-0",children:[m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs("div",{className:"flex items-center gap-2 text-xs uppercase tracking-[0.3em] text-white/40",children:[m.jsx("span",{className:"sm:hidden",children:"Sesin"}),m.jsx("span",{className:"hidden sm:inline",children:"Fecha"})]}),m.jsx("h1",{className:"font-display text-2xl font-semibold text-white sm:text-3xl",children:He(_).format("dddd, D [de] MMMM")}),m.jsx("p",{className:"text-sm font-medium text-white/80 sm:text-lg",children:(z==null?void 0:z.title)??(I==null?void 0:I.name)??"Entrenamiento personal"})]}),m.jsxs("div",{className:"flex flex-col gap-2.5 rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-sm text-white/70 sm:w-auto",children:[m.jsxs("div",{className:"flex items-center justify-between gap-4",children:[m.jsx("p",{className:"font-semibold text-white",children:"Duracin estimada"}),m.jsxs("span",{className:"rounded-full bg-white/10 px-3 py-1 text-xs text-white/80",children:[bt," min"]})]}),m.jsxs("div",{children:[m.jsxs("p",{className:"mt-1 text-xs text-white/50",children:[Ve," ",Ve===1?"tem registrado":"tems registrados"]}),m.jsxs("p",{className:"mt-2 text-xs text-white/60",children:["Progreso: ",rt.done,"/",rt.total,"  ",rt.percent,"%"]}),m.jsx("div",{className:"mt-2 h-2 w-full overflow-hidden rounded-full border border-white/10 bg-slate-950/50",children:m.jsx("div",{className:"h-full rounded-full bg-white/25",style:{width:`${Math.min(Math.max(rt.percent,0),100)}%`}})})]}),m.jsxs("div",{className:"flex flex-col gap-2 sm:items-end",children:[m.jsx("label",{className:"text-[11px] uppercase tracking-wide text-white/40 sm:text-xs",children:"Ir a fecha"}),m.jsx("input",{type:"date",className:"input-field w-full sm:w-auto",value:_,onChange:fe})]})]})]}),m.jsxs("div",{className:"flex flex-col gap-2.5 sm:flex-row sm:flex-wrap sm:items-center sm:justify-between",children:[m.jsxs("div",{className:"flex flex-wrap gap-2",children:[m.jsx("button",{type:"button",onClick:ye,className:"btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold sm:h-10 sm:text-sm",children:" Anterior"}),m.jsx("button",{type:"button",onClick:Y,disabled:_===S,className:"btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold disabled:opacity-40 sm:h-10 sm:text-sm",children:"Hoy"}),m.jsx("button",{type:"button",onClick:_e,className:"btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold sm:h-10 sm:text-sm",children:"Siguiente "})]}),m.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[m.jsx(b5,{mode:C,onChange:Pt}),m.jsx("button",{type:"button",onClick:Te,disabled:je||M.length===0,className:"btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold disabled:opacity-50 sm:h-10 sm:text-sm",title:"Rehace la planificacin del da manteniendo lo registrado",children:je?"Recreando":"Recrear sesin"})]})]}),H&&m.jsx("div",{className:ze("mt-4 rounded-2xl border px-4 py-3 text-sm",H.type==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-rose-500/40 bg-rose-500/10 text-rose-200"),children:H.text})]}),M.length===0?m.jsxs("div",{className:"glass-panel p-10 text-center text-white/50",children:["No hay ningn trabajo incluido en tu programa activo. Aade la tag ",m.jsx("span",{className:"font-semibold text-white",children:"kungfu"})," a los trabajos que quieras entrenar."]}):C==="edit"?m.jsxs("section",{className:"space-y-4",children:[z?m.jsx("div",{className:"glass-panel p-3 sm:p-4",children:m.jsx(Mm,{session:z,works:e,objectives:r,assistants:i})}):m.jsx("div",{className:"glass-panel p-10 text-center text-white/60",children:"Cargando sesin"}),kt.filter(P=>P.kind==="note").map(P=>{const K=P.group.id,le=te[K]??"",X=le.trim().length>0;return m.jsxs("div",{className:"glass-panel space-y-3 p-6",children:[m.jsx("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between",children:m.jsxs("div",{children:[m.jsxs("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:[P.group.name," (",Math.max(0,Number(P.group.minutesBudget)||0)," min)"]}),m.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[m.jsx("span",{className:ze("rounded-full border px-3 py-1 text-xs font-semibold",X?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-white/15 bg-white/5 text-white/60"),children:X?"OK":"Pendiente"}),m.jsx("p",{className:"text-sm text-white/60",children:"Notas de la sesin  se guarda al salir del campo."})]})]})}),m.jsx("textarea",{className:"input-field min-h-[120px] w-full resize-y",value:le,onChange:ue=>Z(D=>({...D,[K]:ue.target.value})),onBlur:()=>Jt(K),placeholder:"Escribe aqu"})]},P.group.id)})]}):m.jsx("section",{className:"space-y-4",children:m.jsxs("div",{className:"space-y-3",children:[st.length===0?m.jsxs("div",{className:"glass-panel p-10 text-center text-white/50",children:["No hay tems planificados para hoy. Revisa ",m.jsx("span",{className:"font-semibold text-white",children:"Ajustes"})," o marca ms trabajos como entrenables."]}):null,kt.map(P=>{if(P.kind==="note"){const ue=P.group.id,D=te[ue]??"",G=D.trim().length>0;return m.jsxs("div",{className:"glass-panel space-y-3 p-6",children:[m.jsx("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between",children:m.jsxs("div",{children:[m.jsxs("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:[P.group.name," (",Math.max(0,Number(P.group.minutesBudget)||0)," min)"]}),m.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[m.jsx("span",{className:ze("rounded-full border px-3 py-1 text-xs font-semibold",G?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-white/15 bg-white/5 text-white/60"),children:G?"OK":"Pendiente"}),m.jsx("p",{className:"text-sm text-white/60",children:"Notas de la sesin  se guarda al salir del campo."})]})]})}),m.jsx("textarea",{className:"input-field min-h-[120px] w-full resize-y",value:D,onChange:de=>Z(pe=>({...pe,[ue]:de.target.value})),onBlur:()=>Jt(ue),placeholder:"Escribe aqu"})]},P.group.id)}const K=Math.max(0,P.total),le=Math.min(Math.max(0,P.done),K),X=K>0?Math.round(le/K*100):0;return m.jsxs("section",{className:"glass-panel space-y-4 p-3 sm:space-y-5 sm:p-6",children:[m.jsx("header",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:m.jsxs("div",{children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:P.label}),m.jsxs("p",{className:"mt-1 text-sm text-white/60",children:[le,"/",K," tem",K===1?"":"s","  ",X,"% completado"]}),m.jsx("div",{className:"mt-2 h-2 w-full overflow-hidden rounded-full border border-white/10 bg-slate-950/50",children:m.jsx("div",{className:"h-full rounded-full bg-white/25",style:{width:`${Math.min(Math.max(X,0),100)}%`}})})]})}),m.jsx("div",{className:"space-y-3 sm:space-y-4",children:P.entries.map(un)})]},P.label)})]})})]})}function I5(){const e=Ce(f=>f.plans),[t,n]=Oo(),r=(t.get("plan")??"").trim(),i=b.useMemo(()=>e.filter(f=>f.enabled),[e]),o=b.useMemo(()=>um(i),[i]),a=b.useMemo(()=>o.length===0?void 0:o.find(h=>h.id===r)??o[0],[o,r]),u=(a==null?void 0:a.id)??"classes";b.useEffect(()=>{if(!a||r===a.id)return;const f=new URLSearchParams(t);f.set("plan",a.id),n(f,{replace:!0})},[a,r,t,n]);const c=f=>{const h=new URLSearchParams(t);h.set("plan",f),h.delete("session"),n(h,{replace:!0})};return a?m.jsxs("div",{className:"space-y-6",children:[m.jsx("header",{className:"glass-panel p-6 sm:p-10",children:m.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold",children:"Sesiones"}),m.jsx("p",{className:"text-white/60",children:"Vista unificada por planes."})]}),m.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(f=>m.jsx("button",{type:"button",onClick:()=>c(f.id),className:ze("rounded-full border px-4 py-2 text-sm font-semibold transition",f.id===u?"border-sky-400/70 bg-sky-500/10 text-white":"border-white/10 bg-white/5 text-white/70 hover:border-white/30 hover:text-white"),title:f.kind==="class"?"Plan de clases":"Plan personal",children:f.name},f.id))})]})}),a.kind==="class"?m.jsx(i5,{}):m.jsx(T5,{})]}):m.jsx("div",{className:"glass-panel p-10 text-center text-white/60",children:"No hay planes activos. Ve a Ajustes y crea/activa uno."})}function P5(){return m.jsx(I5,{})}function R5(){const[e]=Oo(),t=new URLSearchParams(e);return t.set("mode","edit"),m.jsx(Qa,{to:{pathname:"/",search:`?${t.toString()}`},replace:!0})}function Ph(e){return Array.from(new Set(e))}function Ya({options:e,value:t,onChange:n,disabled:r=!1,placeholder:i="Search",allowCreate:o=!1,onCreate:a,maxSelected:u}){const[c,f]=b.useState(""),h=b.useMemo(()=>Ph(t.map(_=>_.trim()).filter(Boolean)),[t]),p=b.useMemo(()=>new Set(h),[h]),v=b.useMemo(()=>new Map(e.map(_=>[_.value,_])),[e]),y=b.useMemo(()=>{const _=c.trim().toLowerCase();return _?e.filter(C=>(C.label??C.value).toLowerCase().includes(_)||C.value.toLowerCase().includes(_)):e},[e,c]),w=typeof u=="number"?h.length<u:!0,S=c.trim(),k=o&&!!S&&typeof a=="function"&&!e.some(_=>_.value.toLowerCase()===S.toLowerCase())&&!e.some(_=>(_.label??"").toLowerCase()===S.toLowerCase());return m.jsxs("div",{className:ze("space-y-2",r&&"opacity-60"),children:[h.length>0?m.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[h.map(_=>{var j;const C=((j=v.get(_))==null?void 0:j.label)??_;return m.jsxs("button",{type:"button",disabled:r,className:"inline-flex items-center gap-2 rounded-full border border-sky-500/30 bg-sky-500/10 px-3 py-1 text-xs font-semibold text-sky-100 transition hover:border-sky-400/50",onClick:()=>n(h.filter(I=>I!==_)),title:"Remove",children:[C,m.jsx("span",{className:"text-sky-200/80",children:""})]},_)}),m.jsx("button",{type:"button",disabled:r,className:"rounded-full border border-white/15 bg-white/5 px-3 py-1 text-xs font-semibold text-white/70 transition hover:border-white/30 hover:text-white",onClick:()=>n([]),children:"Clear"})]}):null,m.jsx("input",{type:"text",className:"input-field",value:c,disabled:r,placeholder:i,onChange:_=>f(_.target.value)}),m.jsx("div",{className:"max-h-48 overflow-auto rounded-2xl border border-white/10 bg-white/5 p-2",children:m.jsxs("div",{className:"flex flex-wrap gap-2",children:[k?m.jsxs("button",{type:"button",disabled:r||!w,className:"rounded-full border border-emerald-500/30 bg-emerald-500/10 px-3 py-1 text-xs font-semibold text-emerald-100 transition hover:border-emerald-400/50 disabled:opacity-50",onClick:()=>{const _=(a==null?void 0:a(S))??null;if(!_)return;const C=Ph([...h,_.createdValue]);n(C),f("")},title:"Create",children:["+ Create ",S,""]}):null,y.map(_=>{const C=_.label??_.value,j=p.has(_.value);return m.jsx("button",{type:"button",disabled:r||!j&&!w,className:ze("rounded-full border px-3 py-1 text-xs font-semibold transition disabled:opacity-50",j?"border-sky-500/40 bg-sky-500/10 text-sky-100":"border-white/15 bg-white/5 text-white/70 hover:border-white/30 hover:text-white"),onClick:()=>{const I=j?h.filter(O=>O!==_.value):Ph([...h,_.value]);n(I)},children:C},_.value)})]})})]})}const ub={name:"",subtitle:"",objectiveId:"",parentWorkId:"",nodeType:"",scheduleKind:"",scheduleNumber:1,ebookId:"",ebookIndexUrl:"",ebookMode:"sequential",tags:[],orderHint:0,nextWorkId:"",variantOfWorkId:"",descriptionMarkdown:"",estimatedMinutes:10,notes:"",videoUrls:[""],visibility:"private",collaborators:[""]},A5=e=>Array.from(new Set((e??[]).map(t=>t.trim().toLowerCase()).filter(Boolean))),M5=e=>e==="day_of_year"||e==="day_of_month"||e==="day_of_week",Vu="__no_objective__",cS={private:"Privado",shared:"Compartido",public:"Pblico"},O5={private:"Solo t puedes ver y editar este trabajo.",shared:"Solo las personas que aadas pueden editarlo contigo.",public:"Cualquier persona con acceso al catlogo puede verlo. Solo tus editores pueden cambiarlo."},dS=5,Oa="personal-exclude";function D5({work:e,childCount:t,depth:n,expanded:r,isTreeCollapsed:i,isPersonalExcluded:o,canTogglePersonal:a,personalToggleBusy:u,nextLabel:c,variantLabel:f,onToggle:h,onToggleTree:p,onTogglePersonal:v,onEdit:y,onDuplicate:w,onCreateChild:S,onDelete:k}){var be;const _=(e.descriptionMarkdown??"").trim(),C=(e.subtitle??"").trim(),j=(e.notes??"").trim(),I=e.videoUrls.filter(he=>he.trim().length>0),O=_.length>0,R=C.length>0,U=j.length>0,re=I.length>0,z=O||U||re,M=t>0,L=n>0?{marginLeft:`${n*1.5}rem`}:void 0,se=e.visibility??"private",q=cS[se],H=((be=e.collaboratorEmails)==null?void 0:be.length)??0,V=e.canEdit??!1,te=e.isOwner??!1,Z=(e.ownerEmail??"").trim(),B=(e.nodeType??"").trim(),$=(e.tags??[]).filter(he=>he!==Oa),N=(B||"work").trim().toLowerCase(),F=Ce(he=>{var ge;return(ge=he.workTaxonomy.nodeTypes.find(me=>me.key===N))==null?void 0:ge.label}),ee=(()=>{const he={form:"Forma",segment:"Segmento",application:"Aplicacin",technique:"Tcnica",drill:"Drill",reading:"Lectura",ebook:"Ebook",style:"Estilo",link:"Link",work:"Trabajo"},ge={form:"border-indigo-500/40 bg-indigo-500/15 text-indigo-100",segment:"border-sky-500/40 bg-sky-500/15 text-sky-100",application:"border-amber-500/40 bg-amber-500/15 text-amber-100",technique:"border-emerald-500/40 bg-emerald-500/15 text-emerald-100",drill:"border-purple-500/40 bg-purple-500/15 text-purple-100",reading:"border-fuchsia-500/40 bg-fuchsia-500/15 text-fuchsia-100",ebook:"border-cyan-500/40 bg-cyan-500/15 text-cyan-100",style:"border-white/20 bg-white/10 text-white/70",link:"border-white/20 bg-white/10 text-white/70",work:"border-white/20 bg-white/10 text-white/70"},me=F??he[N]??(B||"Trabajo"),je=ge[N]??ge.work;return m.jsx("span",{className:ze("inline-flex items-center rounded-full border px-3 py-1 text-xs font-semibold",je),children:me})})(),A=(()=>{const he={form:"border-indigo-500/25",segment:"border-sky-500/25",application:"border-amber-500/25",technique:"border-emerald-500/25",drill:"border-purple-500/25",reading:"border-fuchsia-500/25",ebook:"border-cyan-500/25",work:"border-white/10"},ge={form:"bg-indigo-500",segment:"bg-sky-500",application:"bg-amber-500",technique:"bg-emerald-500",drill:"bg-purple-500",reading:"bg-fuchsia-500",ebook:"bg-cyan-500",work:""},me={form:"bg-indigo-400/60",segment:"bg-sky-400/60",application:"bg-amber-400/60",technique:"bg-emerald-400/60",drill:"bg-purple-400/60",reading:"bg-fuchsia-400/60",ebook:"bg-cyan-400/60",work:"bg-white/10"},je=he[N]??he.work,Ne=ge[N]??ge.work,Ie=me[N]??me.work;return{borderClassName:je,glowClassName:Ne,barClassName:Ie}})();return m.jsxs("article",{id:`work-${e.id}`,className:ze("group relative space-y-4 rounded-xl border bg-white/5 p-4 pb-5 shadow shadow-black/30",A.borderClassName),style:L,children:[m.jsx("div",{className:ze("absolute inset-y-0 left-0 w-1 rounded-r-full",A.barClassName),"aria-hidden":!0}),A.glowClassName?m.jsx("div",{className:ze("absolute inset-0 -z-[1] rounded-xl opacity-10 blur-3xl",A.glowClassName)}):null,m.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[m.jsxs("div",{role:z?"button":void 0,tabIndex:z?0:void 0,onClick:()=>{z&&h()},onKeyDown:he=>{z&&(he.key==="Enter"||he.key===" ")&&(he.preventDefault(),h())},className:ze("flex flex-1 items-start gap-3 border border-transparent px-2 py-2 text-left transition",z?"cursor-pointer hover:border-white/10 hover:bg-white/5 focus-visible:border-white/20 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-500/40":"cursor-default"),"aria-expanded":z?r:void 0,children:[M?m.jsx("button",{type:"button",onClick:he=>{he.stopPropagation(),p()},className:ze("mt-1 inline-flex h-8 w-8 items-center justify-center rounded-full border border-white/15 bg-white/5 text-sm font-semibold text-white/70 transition hover:border-white/30 hover:text-white"),"aria-label":i?"Mostrar trabajos hijos":"Ocultar trabajos hijos",title:i?"Mostrar hijos":"Ocultar hijos",children:i?"":""}):null,z?m.jsx("span",{className:ze("mt-1 inline-flex h-8 w-8 items-center justify-center rounded-full border border-white/15 bg-white/5 text-sm font-semibold text-white/70 transition",r?"rotate-90 border-white/30 text-white":""),"aria-hidden":!0,children:""}):null,m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-white",children:e.name}),R?m.jsx("p",{className:"text-sm text-white/70",children:C}):null,m.jsxs("p",{className:"text-sm text-white/60",children:[e.estimatedMinutes," minutos"]}),m.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-[11px] uppercase tracking-wide text-white/40",children:[m.jsx("span",{className:"rounded-full border border-white/20 px-2 py-0.5 text-[10px] font-semibold text-white/70",children:q}),N==="ebook"?e.ebookRef?m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"rounded-full border border-cyan-400/25 bg-cyan-500/10 px-2 py-0.5 text-[10px] font-semibold text-cyan-100",children:e.ebookRef.ebookId}),m.jsx("span",{className:"rounded-full border border-cyan-400/15 bg-cyan-500/5 px-2 py-0.5 text-[10px] font-semibold text-cyan-100/80",children:e.ebookRef.mode})]}):m.jsx("span",{className:"rounded-full border border-rose-500/30 bg-rose-500/10 px-2 py-0.5 text-[10px] font-semibold text-rose-200",children:"ebook_ref missing"}):null,$.slice(0,3).map(he=>m.jsx("span",{className:"rounded-full border border-white/10 px-2 py-0.5 text-[10px] font-semibold text-white/60",children:he},he)),te?m.jsx("span",{children:"Propietario"}):Z?m.jsx("span",{children:Z}):null,H>0?m.jsxs("span",{children:["+",H," colaborador",H===1?"":"es"]}):null,f?m.jsxs("span",{className:"text-white/50",children:["Variante de: ",f]}):null,c?m.jsxs("span",{className:"text-white/50",children:["Siguiente: ",c]}):null,V?null:m.jsx("span",{className:"text-amber-300/80",children:"Solo lectura"})]})]})]}),m.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:justify-end",children:[ee,m.jsx("button",{type:"button",onClick:he=>{he.stopPropagation(),v()},disabled:!a||u,className:ze("inline-flex items-center rounded-full border px-3 py-1 text-xs font-semibold transition disabled:opacity-50",o?"border-rose-500/40 bg-rose-500/10 text-rose-200 hover:border-rose-400":"border-emerald-500/40 bg-emerald-500/10 text-emerald-200 hover:border-emerald-400"),title:o?"Incluir en el plan personal":"Excluir del plan personal",children:u?"...":o?"Fuera":"En plan"}),m.jsxs(rs,{as:"div",className:"relative inline-flex",children:[m.jsxs(rs.Button,{className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-white/20 text-white/70 transition hover:border-white/40 hover:text-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-500/40",children:[m.jsx("span",{className:"sr-only",children:"Abrir acciones"}),m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",className:"h-5 w-5","aria-hidden":"true",children:[m.jsx("circle",{cx:"12",cy:"5",r:"1.5"}),m.jsx("circle",{cx:"12",cy:"12",r:"1.5"}),m.jsx("circle",{cx:"12",cy:"19",r:"1.5"})]})]}),m.jsxs(rs.Items,{className:"absolute right-0 z-10 mt-2 w-44 overflow-hidden rounded-2xl border border-white/10 bg-slate-900/95 p-1 text-sm text-white shadow-lg shadow-black/40 focus:outline-none",children:[m.jsx(rs.Item,{children:({active:he})=>m.jsx("button",{type:"button",onClick:V?y:void 0,disabled:!V,className:ze("flex w-full items-center gap-2 rounded-xl px-3 py-2 text-left disabled:opacity-40",he&&V?"bg-white/10 text-white":"text-white/70"),children:"Editar"})}),m.jsx(rs.Item,{children:({active:he})=>m.jsx("button",{type:"button",onClick:V?w:void 0,disabled:!V,className:ze("flex w-full items-center gap-2 rounded-xl px-3 py-2 text-left disabled:opacity-40",he&&V?"bg-white/10 text-white":"text-white/70"),children:"Duplicar"})}),m.jsx(rs.Item,{children:({active:he})=>m.jsx("button",{type:"button",onClick:V?S:void 0,disabled:!V,className:ze("flex w-full items-center gap-2 rounded-xl px-3 py-2 text-left disabled:opacity-40",he&&V?"bg-white/10 text-white":"text-white/70"),children:"Nuevo hijo"})}),m.jsx(rs.Item,{children:({active:he})=>m.jsx("button",{type:"button",onClick:te?k:void 0,disabled:!te,className:ze("flex w-full items-center gap-2 rounded-xl px-3 py-2 text-left disabled:opacity-40",he&&te?"bg-rose-500/20 text-rose-100":"text-rose-300"),children:"Eliminar"})})]})]})]})]}),z&&r&&m.jsxs("div",{className:"space-y-4 rounded-2xl border border-white/10 bg-slate-950/60 p-4",children:[O?m.jsx(Ss,{content:e.descriptionMarkdown,enableWorkLinks:!0}):null,U?m.jsx("div",{className:"rounded-2xl border border-dashed border-white/15 bg-white/5 p-3 text-sm text-white/70",children:e.notes}):null,re?m.jsx("div",{className:"space-y-3",children:m.jsx("div",{className:"grid gap-4 lg:grid-cols-3",children:I.map((he,ge)=>m.jsxs("div",{className:"space-y-2",children:[m.jsx(Om,{url:he,title:`${e.name} vdeo ${ge+1}`}),m.jsx("a",{href:he,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-full border border-white/20 px-3 py-1 text-xs font-semibold text-white/70 transition hover:border-white/40 hover:text-white",children:"Abrir en YouTube"})]},`${e.id}-video-${ge}`))})}):null]}),m.jsx("button",{type:"button",onClick:V?S:void 0,disabled:!V,className:ze("absolute bottom-0 left-1/2 flex -translate-x-1/2 translate-y-1/2 items-center justify-center rounded-full border border-dashed border-white/20 bg-slate-950/80 px-4 py-2 text-sm font-semibold text-white/80 opacity-0 transition hover:border-white/40 hover:text-white focus-visible:opacity-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-500/40 group-hover:opacity-100 pointer-events-none group-hover:pointer-events-auto focus-visible:pointer-events-auto",!V&&"opacity-30"),title:V?M?"Aadir trabajo hijo":"Crear primer trabajo hijo":"No tienes permisos para crear trabajos hijos","aria-label":"Crear trabajo hijo",children:"+"})]})}function L5({form:e,objectiveOptions:t,parentOptions:n,workOptions:r,nodeTypeOptions:i,tagOptions:o,ebookOptions:a,onCreateNodeType:u,onCreateTag:c,depth:f,onFieldChange:h,onVideoChange:p,onAddVideo:v,onRemoveVideo:y,onCollaboratorChange:w,onAddCollaborator:S,onRemoveCollaborator:k,onSave:_,onCancel:C,isNew:j,canEditContent:I,canManageSharing:O,isSaving:R,isOwner:U,ownerEmail:re}){const z=t.find($=>$.id===e.objectiveId),M=n.find($=>$.id===e.parentWorkId),L=r.find($=>$.id===e.nextWorkId),se=r.find($=>$.id===e.variantOfWorkId),q=f>0?{marginLeft:`${f*1.5}rem`}:void 0,H=e.id?`work-name-${e.id}`:void 0,V=e.id?`work-subtitle-${e.id}`:void 0,te=(e.nodeType??"").trim().toLowerCase(),Z=te==="reading"||e.scheduleKind.trim().length>0,B=te==="ebook"||e.ebookIndexUrl.trim().length>0;return m.jsxs("article",{className:"space-y-5 rounded-3xl border border-sky-500/40 bg-slate-950/70 p-5 shadow-lg shadow-sky-500/15",style:q,children:[m.jsxs("header",{className:"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between",children:[m.jsxs("div",{className:"flex-1 space-y-3",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:j?"Nuevo trabajo":"Editando trabajo"}),m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",htmlFor:H,children:"Nombre"}),m.jsx("input",{id:H,type:"text",className:"input-field w-full text-base font-semibold disabled:opacity-60",placeholder:"Nombre descriptivo",value:e.name,onChange:$=>h({name:$.target.value}),disabled:!I})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",htmlFor:V,children:"Subttulo (opcional)"}),m.jsx("input",{id:V,type:"text",className:"input-field w-full disabled:opacity-60",placeholder:"Aade un subttulo breve",value:e.subtitle,onChange:$=>h({subtitle:$.target.value}),disabled:!I})]})]}),m.jsx(Bi,{objective:z,size:"sm"})]}),I?null:m.jsx("div",{className:"rounded-2xl border border-amber-400/40 bg-amber-500/10 p-3 text-xs text-amber-200",children:"No tienes permisos para editar el contenido de este trabajo. Puedes revisar la informacin y sugerir cambios al propietario."}),m.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Objetivo"}),m.jsxs("select",{className:"input-field disabled:opacity-60",value:e.objectiveId,onChange:$=>h({objectiveId:$.target.value}),disabled:!I,children:[m.jsx("option",{value:"",children:"Selecciona un objetivo"}),t.map($=>m.jsx("option",{value:$.id,children:$.name},$.id))]})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Trabajo padre (opcional)"}),m.jsxs("select",{className:"input-field disabled:opacity-60",value:e.parentWorkId,onChange:$=>h({parentWorkId:$.target.value}),disabled:!I,children:[m.jsx("option",{value:"",children:"Sin trabajo padre"}),n.map($=>m.jsx("option",{value:$.id,children:$.label},$.id))]}),e.parentWorkId&&M?m.jsxs("p",{className:"text-xs text-white/40",children:["Deriva de: ",M.label]}):null]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Duracin estimada (min)"}),m.jsx("input",{type:"number",min:0,className:"input-field disabled:opacity-60",value:e.estimatedMinutes,onChange:$=>h({estimatedMinutes:Number($.target.value)}),disabled:!I})]})]}),m.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Node type (opcional)"}),m.jsx(Ya,{options:i,value:e.nodeType?[e.nodeType]:[],maxSelected:1,onChange:$=>h({nodeType:$[0]??""}),placeholder:"Search node types",disabled:!I,allowCreate:!0,onCreate:$=>{const N=u($);return N?{createdValue:N,createdLabel:$.trim()}:null}})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Tags"}),m.jsx(Ya,{options:o,value:e.tags??[],onChange:$=>h({tags:$}),placeholder:"Search tags",disabled:!I,allowCreate:!0,onCreate:$=>{const N=c($);return N?{createdValue:N,createdLabel:N}:null}})]}),Z?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Schedule (para lecturas)"}),m.jsxs("select",{className:"input-field disabled:opacity-60",value:e.scheduleKind,onChange:$=>h({scheduleKind:$.target.value}),disabled:!I,children:[m.jsx("option",{value:"",children:"Sin schedule"}),m.jsx("option",{value:"day_of_year",children:"Da del ao (1-365)"}),m.jsx("option",{value:"day_of_month",children:"Da del mes (1-31)"}),m.jsx("option",{value:"day_of_week",children:"Da de la semana (0-6)"})]}),m.jsx("p",{className:"text-xs text-white/40",children:"Para `nodeType=reading`, el planificador solo propone esta lectura cuando el da coincide."})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Nmero"}),m.jsx("input",{type:"number",min:0,className:"input-field disabled:opacity-60",value:e.scheduleNumber,onChange:$=>h({scheduleNumber:Number($.target.value)}),disabled:!I||!e.scheduleKind})]})]}):null,B?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"grid gap-2 sm:col-span-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Ebook (para `nodeType=ebook`)"}),m.jsxs("select",{className:"input-field disabled:opacity-60",value:e.ebookId,onChange:$=>{const N=$.target.value,F=a.find(ee=>ee.id===N);h({ebookId:N,ebookIndexUrl:(F==null?void 0:F.indexUrl)??e.ebookIndexUrl})},disabled:!I,children:[m.jsx("option",{value:"",children:"Selecciona un ebook"}),a.map($=>m.jsx("option",{value:$.id,children:$.title},$.id))]}),m.jsx("p",{className:"text-xs text-white/40",children:"Se carga desde `ebooks.json` publicado. Un solo work puede renderizar la entrada que toca (diario) o la siguiente (secuencial)."})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Modo"}),m.jsxs("select",{className:"input-field disabled:opacity-60",value:e.ebookMode,onChange:$=>h({ebookMode:$.target.value}),disabled:!I,children:[m.jsx("option",{value:"sequential",children:"Sequential"}),m.jsx("option",{value:"daily_fixed",children:"Daily fixed (day-of-year)"})]})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Index URL"}),m.jsx("input",{type:"text",className:"input-field disabled:opacity-60",value:e.ebookIndexUrl,onChange:$=>h({ebookIndexUrl:$.target.value}),disabled:!I})]})]}):null,m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Order hint (opcional)"}),m.jsx("input",{type:"number",min:0,className:"input-field disabled:opacity-60",value:e.orderHint,onChange:$=>h({orderHint:Number($.target.value)}),disabled:!I})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Siguiente (next)"}),m.jsxs("select",{className:"input-field disabled:opacity-60",value:e.nextWorkId,onChange:$=>h({nextWorkId:$.target.value}),disabled:!I,children:[m.jsx("option",{value:"",children:"Sin siguiente"}),r.filter($=>$.id!==e.id).map($=>m.jsx("option",{value:$.id,children:$.label},$.id))]}),e.nextWorkId&&L?m.jsxs("p",{className:"text-xs text-white/40",children:["Siguiente: ",L.label]}):null]}),m.jsxs("div",{className:"grid gap-2 sm:col-span-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Variante de (variant_of)"}),m.jsxs("select",{className:"input-field disabled:opacity-60",value:e.variantOfWorkId,onChange:$=>h({variantOfWorkId:$.target.value}),disabled:!I,children:[m.jsx("option",{value:"",children:"Sin base"}),r.filter($=>$.id!==e.id).map($=>m.jsx("option",{value:$.id,children:$.label},$.id))]}),e.variantOfWorkId&&se?m.jsxs("p",{className:"text-xs text-white/40",children:["Variante de: ",se.label]}):null]})]}),m.jsxs("section",{className:"space-y-3 rounded-3xl border border-white/10 bg-white/5 p-4",children:[m.jsxs("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-white/40",children:"Visibilidad"}),m.jsx("p",{className:"text-sm text-white/60",children:U?"Eres el propietario de este trabajo.":re?`Propietario: ${re}`:""})]}),O?null:m.jsx("p",{className:"text-xs text-amber-300/80",children:"Solo el propietario puede cambiar la visibilidad o los colaboradores."})]}),m.jsx("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:gap-3",children:["private","shared","public"].map($=>m.jsxs("label",{className:ze("inline-flex items-center gap-2 rounded-2xl border px-3 py-2 text-sm transition",e.visibility===$?"border-sky-400/80 bg-sky-400/10 text-white":"border-white/15 text-white/70 hover:border-white/30 hover:text-white",!O&&"opacity-50"),children:[m.jsx("input",{type:"radio",className:"accent-sky-400",checked:e.visibility===$,onChange:()=>h({visibility:$}),disabled:!O}),cS[$]]},$))}),m.jsx("p",{className:"text-xs text-white/50",children:O5[e.visibility]}),e.visibility==="private"?null:m.jsxs("div",{className:"space-y-2 rounded-2xl border border-white/10 bg-white/5 p-3",children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-white/40",children:"Colaboradores (edicin)"}),m.jsx("p",{className:"text-xs text-white/50",children:"Aade hasta 5 direcciones de correo. Tendrn permisos de edicin completos."}),m.jsx("div",{className:"space-y-2",children:e.collaborators.map(($,N)=>m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("input",{type:"email",className:"input-field flex-1 disabled:opacity-60",placeholder:"colega@ejemplo.com",value:$,onChange:F=>w(N,F.target.value),disabled:!O}),e.collaborators.length>1?m.jsx("button",{type:"button",className:"inline-flex h-9 w-9 items-center justify-center rounded-full border border-rose-500/40 text-rose-300 transition hover:border-rose-400 hover:text-rose-200 disabled:opacity-40",onClick:()=>k(N),"aria-label":"Eliminar colaborador",disabled:!O,children:""}):null]},`collaborator-${N}`))}),m.jsx("button",{type:"button",className:"btn-secondary px-3 py-1 text-xs disabled:opacity-40",onClick:S,disabled:!O||e.collaborators.length>=dS,children:"+ Aadir colaborador"})]})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Descripcin (Markdown)"}),m.jsx("textarea",{className:"input-field min-h-[140px] disabled:opacity-60",value:e.descriptionMarkdown,onChange:$=>h({descriptionMarkdown:$.target.value}),placeholder:"Usa formato markdown para resaltar puntos importantes.",disabled:!I})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Notas opcionales"}),m.jsx("textarea",{className:"input-field min-h-[100px] disabled:opacity-60",value:e.notes,onChange:$=>h({notes:$.target.value}),disabled:!I})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Vdeos de YouTube"}),m.jsx("div",{className:"space-y-3",children:e.videoUrls.map(($,N)=>m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("input",{type:"url",className:"input-field flex-1 disabled:opacity-60",value:$,onChange:F=>p(N,F.target.value),placeholder:"https://www.youtube.com/watch?v=...",disabled:!I}),e.videoUrls.length>1?m.jsx("button",{type:"button",className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-rose-500/40 text-rose-300 transition hover:border-rose-400 hover:text-rose-200",onClick:()=>y(N),"aria-label":"Eliminar enlace de vdeo",disabled:!I,children:""}):null]}),m.jsx(Om,{url:$,title:`Vista previa vdeo ${N+1}`})]},`video-field-${N}`))}),m.jsx("button",{type:"button",className:"btn-secondary px-3 py-1 text-xs disabled:opacity-50",onClick:v,disabled:!I,children:"+ Aadir vdeo"})]}),m.jsxs("div",{className:"flex flex-wrap gap-3 pt-2",children:[m.jsx("button",{type:"button",onClick:_,className:"btn-primary disabled:opacity-60",disabled:R,children:R?"Guardando":"Guardar"}),m.jsx("button",{type:"button",className:"btn-secondary disabled:opacity-50",onClick:C,disabled:R,children:"Cancelar"})]})]})}function $5(){var Pt;const e=Ce(J=>J.works),t=Ce(J=>J.objectives),n=Ce(J=>J.workTaxonomy),r=Ce(J=>J.addWork),i=Ce(J=>J.updateWork),o=Ce(J=>J.deleteWork),a=Ce(J=>J.upsertNodeType),u=Ce(J=>J.upsertTag),c=Ce(J=>J.worksLoading),f=ri(),{user:h}=Ns(),p=b.useMemo(()=>h?{actorId:h.id,actorEmail:h.email??""}:null,[h]),[v,y]=b.useState(""),[w,S]=b.useState(null),[k,_]=b.useState(new Set),[C,j]=b.useState(new Set),[I,O]=b.useState(new Set),R=b.useRef(!1),[U,re]=b.useState({}),[z,M]=b.useState(null),[L,se]=b.useState(null),[q,H]=b.useState([]),V=b.useMemo(()=>new Map(t.map(J=>[J.id,J])),[t]),te=b.useMemo(()=>[...t].sort((J,fe)=>(J.name??"").localeCompare(fe.name??"","es")),[t]),Z=b.useMemo(()=>(n.nodeTypes??[]).slice().sort((J,fe)=>J.label.localeCompare(fe.label,"en",{sensitivity:"base"})).map(J=>({value:J.key,label:J.label})),[n.nodeTypes]),B=b.useMemo(()=>(n.tags??[]).slice().sort((J,fe)=>J.name.localeCompare(fe.name,"en",{sensitivity:"base"})).map(J=>({value:J.name,label:J.name})),[n.tags]);b.useEffect(()=>{let J=!1;return(async()=>{try{const fe=await s5();if(J)return;H(fe.map(ye=>({id:ye.id,title:ye.title,indexUrl:Ec(ye.path)})))}catch{J||H([])}})(),()=>{J=!0}},[]);const $=b.useMemo(()=>new Map(e.map(J=>[J.id,J])),[e]),N=b.useMemo(()=>{const J=new Map;return e.forEach(fe=>{const ye=fe.parentWorkId;if(!ye)return;const _e=J.get(ye)??[];_e.push(fe),J.set(ye,_e)}),J.forEach(fe=>{fe.sort((ye,_e)=>ye.name.localeCompare(_e.name,"es",{sensitivity:"base"}))}),J},[e]),F=b.useMemo(()=>{const J=new Map,fe=(ye,_e)=>{if(J.has(ye))return J.get(ye);const Y=$.get(ye);if(!Y)return"";if(!Y.parentWorkId||_e.has(ye))return J.set(ye,Y.name),Y.name;_e.add(ye);const P=fe(Y.parentWorkId,_e);_e.delete(ye);const K=P?`${P}  ${Y.name}`:Y.name;return J.set(ye,K),K};return e.forEach(ye=>{fe(ye.id,new Set)}),J},[e,$]);b.useEffect(()=>{const J=f.hash,fe="#work-";let ye=null;if(J.startsWith(fe)&&(ye=J.slice(fe.length)),!ye){const P=new URLSearchParams(f.search);ye=P.get("workId")??P.get("work")}if(!ye)return;_(P=>{if(P.has(ye))return P;const K=new Set(P);return K.add(ye),K});const _e=document.getElementById(`work-${ye}`);if(!_e)return;_e.scrollIntoView({behavior:"smooth",block:"start"}),_e.classList.add("ring-2","ring-sky-500/60");const Y=window.setTimeout(()=>{_e.classList.remove("ring-2","ring-sky-500/60")},1500);return()=>{window.clearTimeout(Y),_e.classList.remove("ring-2","ring-sky-500/60")}},[f.hash,f.search,e]);const ee=b.useMemo(()=>{const J=new Map,fe=ye=>{if(J.has(ye))return J.get(ye);const _e=new Set;return(N.get(ye)??[]).forEach(P=>{_e.add(P.id),fe(P.id).forEach(K=>_e.add(K))}),J.set(ye,_e),_e};return e.forEach(ye=>fe(ye.id)),J},[e,N]),A=b.useCallback((J,fe)=>{var Y,P;const ye=new Set;J&&(ye.add(J),(Y=ee.get(J))==null||Y.forEach(K=>ye.add(K)));const _e=e.filter(K=>!ye.has(K.id)).map(K=>({id:K.id,label:(()=>{var ue;const le=F.get(K.id)??K.name,X=(ue=V.get(K.objectiveId))==null?void 0:ue.name;return X?`${X}  ${le}`:le})()})).sort((K,le)=>K.label.localeCompare(le.label,"es",{sensitivity:"base"}));if(fe&&fe.length>0&&!_e.some(K=>K.id===fe)){const K=$.get(fe),le=F.get(fe)??(K==null?void 0:K.name)??"Trabajo no disponible",X=K?(P=V.get(K.objectiveId))==null?void 0:P.name:void 0,ue=X?`${X}  ${le}`:le;_e.unshift({id:fe,label:ue})}return _e},[e,F,ee,$,V]),be=b.useMemo(()=>e.map(J=>{var Y;const fe=F.get(J.id)??J.name,ye=(Y=V.get(J.objectiveId))==null?void 0:Y.name,_e=ye?`${ye}  ${fe}`:fe;return{id:J.id,label:_e}}).sort((J,fe)=>J.label.localeCompare(fe.label,"es",{sensitivity:"base"})),[e,F,V]),he=b.useMemo(()=>{const J=v.trim().toLowerCase(),fe=Y=>{var D;if(!J)return!0;const P=((D=V.get(Y.objectiveId))==null?void 0:D.name)??"",K=Y.parentWorkId?F.get(Y.parentWorkId)??"":"",le=Y.id?F.get(Y.id)??"":"",X=(Y.nodeType??"").toLowerCase(),ue=Array.isArray(Y.tags)?Y.tags.join(" "):Y.tags??"";return Y.name.toLowerCase().includes(J)||(Y.subtitle??"").toLowerCase().includes(J)||Y.descriptionMarkdown.toLowerCase().includes(J)||P.toLowerCase().includes(J)||K.toLowerCase().includes(J)||le.toLowerCase().includes(J)||X.includes(J)||ue.toLowerCase().includes(J)},ye=[],_e=Y=>{if(!Y)return 0;let P=1,K=$.get(Y);const le=new Set(Y?[Y]:[]);for(;K&&K.parentWorkId;){const X=K.parentWorkId;if(!X||le.has(X))break;P+=1,le.add(X),K=$.get(X)}return P};return e.forEach(Y=>{const P=U[Y.id],K=(P==null?void 0:P.data)??{id:Y.id,name:Y.name,subtitle:Y.subtitle??"",nodeType:Y.nodeType??"",tags:Y.tags??[],descriptionMarkdown:Y.descriptionMarkdown,objectiveId:Y.objectiveId,parentWorkId:Y.parentWorkId??""};!P&&!fe(K)||ye.push({id:Y.id,objectiveId:K.objectiveId,parentWorkId:K.parentWorkId??"",depth:_e(K.parentWorkId),work:Y,isNew:!1,isEditing:!!P,form:P==null?void 0:P.data})}),Object.entries(U).filter(([,Y])=>Y.isNew).forEach(([Y,P])=>{fe(P.data)&&ye.push({id:Y,objectiveId:P.data.objectiveId,parentWorkId:P.data.parentWorkId,depth:_e(P.data.parentWorkId||void 0),work:void 0,isNew:!0,isEditing:!0,form:P.data})}),ye},[e,$,U,V,F,v]),ge=b.useCallback(J=>{var Y;const fe=(J.isEditing&&J.form?J.form.parentWorkId:J.parentWorkId)??"";if(!fe)return!1;let ye=fe;const _e=new Set;for(;ye&&!_e.has(ye);){if(_e.add(ye),C.has(ye))return!0;ye=(((Y=$.get(ye))==null?void 0:Y.parentWorkId)??"")||""}return!1},[C,$]),me=b.useMemo(()=>{const J=new Map;he.forEach(P=>{const K=V.has(P.objectiveId)?P.objectiveId:Vu,le=J.get(K)??[];le.push(P),J.set(K,le)});const fe=P=>{var K,le;if(P.isEditing&&P.form){const X=P.form.name.trim()||(((K=P.work)==null?void 0:K.name)??""),ue=P.form.parentWorkId&&P.form.parentWorkId.length>0?F.get(P.form.parentWorkId)??((le=$.get(P.form.parentWorkId))==null?void 0:le.name)??"":"";return ue?`${ue}  ${X}`:X}return P.work?F.get(P.work.id)??P.work.name:P.id},ye=(P,K)=>{const le=fe(P),X=fe(K);return le.localeCompare(X,"es",{sensitivity:"base"})},_e=[];te.forEach(P=>{const K=J.get(P.id);K&&K.length&&_e.push({objective:P,items:K.slice().sort(ye)})});const Y=J.get(Vu);return Y&&Y.length&&_e.push({objective:void 0,items:Y.slice().sort(ye)}),_e},[he,V,te,F,$]),je=((Pt=te[0])==null?void 0:Pt.id)??"";b.useEffect(()=>{R.current||v.trim().length>0||me.length!==0&&(R.current=!0,O(new Set(me.map(J=>{var fe;return((fe=J.objective)==null?void 0:fe.id)??Vu}))))},[me,v]);const Ne=(J,fe)=>{re(ye=>{const _e=ye[J];return _e?{...ye,[J]:fe(_e)}:ye})},Ie=J=>J.length>0?J:[""],ie=J=>J.length>0?J:[""],Te=J=>{re(fe=>{var ye,_e,Y,P,K;return fe[J.id]?fe:{...fe,[J.id]:{data:{id:J.id,name:J.name,subtitle:J.subtitle??"",objectiveId:J.objectiveId,parentWorkId:J.parentWorkId??"",nodeType:J.nodeType??"",scheduleKind:((ye=J.schedule)==null?void 0:ye.kind)??"",scheduleNumber:((_e=J.schedule)==null?void 0:_e.number)??1,ebookId:((Y=J.ebookRef)==null?void 0:Y.ebookId)??"",ebookIndexUrl:((P=J.ebookRef)==null?void 0:P.indexUrl)??"",ebookMode:((K=J.ebookRef)==null?void 0:K.mode)??"sequential",tags:J.tags??[],orderHint:J.orderHint??0,nextWorkId:J.nextWorkId??"",variantOfWorkId:J.variantOfWorkId??"",descriptionMarkdown:J.descriptionMarkdown,estimatedMinutes:J.estimatedMinutes,notes:J.notes??"",videoUrls:Ie(J.videoUrls.slice()),visibility:J.visibility??"private",collaborators:ie(J.collaboratorEmails??[])},isNew:!1,originalId:J.id}}}),_(fe=>{const ye=new Set(fe);return ye.add(J.id),ye})},Ve=()=>{const J=`draft-${Ut()}`;re(fe=>({...fe,[J]:{data:{...ub,id:J,subtitle:"",objectiveId:je},isNew:!0}})),_(fe=>{const ye=new Set(fe);return ye.add(J),ye})},Ke=J=>{const fe=`draft-${Ut()}`;re(ye=>{var _e,Y,P,K,le;return{...ye,[fe]:{data:{id:fe,name:`${J.name} (copia)`,subtitle:J.subtitle??"",objectiveId:J.objectiveId,parentWorkId:J.parentWorkId??"",nodeType:J.nodeType??"",scheduleKind:((_e=J.schedule)==null?void 0:_e.kind)??"",scheduleNumber:((Y=J.schedule)==null?void 0:Y.number)??1,ebookId:((P=J.ebookRef)==null?void 0:P.ebookId)??"",ebookIndexUrl:((K=J.ebookRef)==null?void 0:K.indexUrl)??"",ebookMode:((le=J.ebookRef)==null?void 0:le.mode)??"sequential",tags:J.tags??[],orderHint:J.orderHint??0,nextWorkId:"",variantOfWorkId:"",descriptionMarkdown:J.descriptionMarkdown,estimatedMinutes:J.estimatedMinutes,notes:J.notes??"",videoUrls:Ie(J.videoUrls.slice()),visibility:"private",collaborators:[""]},isNew:!0}}}),_(ye=>{const _e=new Set(ye);return _e.add(fe),_e}),S({type:"success",text:"Duplicacin creada. Ajusta y guarda para confirmarla."})},rt=J=>{const fe=`draft-${Ut()}`;re(ye=>({...ye,[fe]:{data:{...ub,id:fe,subtitle:"",objectiveId:J.objectiveId,parentWorkId:J.id,estimatedMinutes:J.estimatedMinutes,visibility:J.visibility??"private",collaborators:[""]},isNew:!0}})),_(ye=>{const _e=new Set(ye);return _e.add(fe),_e}),S({type:"success",text:`Creando un trabajo hijo para ${J.name}. Ajusta y guarda para confirmarlo.`})},st=J=>{_(fe=>{const ye=new Set(fe);return ye.has(J)?ye.delete(J):ye.add(J),ye})},kt=J=>{re(fe=>{const ye={...fe};return delete ye[J],ye}),J.startsWith("draft-")&&_(fe=>{const ye=new Set(fe);return ye.delete(J),ye})},un=async J=>{const fe=U[J];if(!fe||z)return;if(!p){S({type:"error",text:"Inicia sesin para guardar este trabajo."});return}const ye=(fe.data.parentWorkId??"").trim(),_e=ye.length>0?ye:void 0,Y=fe.data.nodeType.trim(),P=Y.length>0?Y:void 0,K=(P??"").trim().toLowerCase(),le=(fe.data.scheduleKind??"").trim(),X=le.length>0?le:void 0,ue=M5(X)?X:void 0,D=Number(fe.data.scheduleNumber),G=Number.isFinite(D)?Math.trunc(D):void 0,de=K==="reading"?ue:void 0,pe=de?G:void 0,Re=(fe.data.ebookId??"").trim(),Pe=(fe.data.ebookIndexUrl??"").trim(),ft=(fe.data.ebookMode??"").trim()==="daily_fixed"?"daily_fixed":"sequential",$e=K==="ebook"&&Re&&Pe?{ebookId:Re,indexUrl:Ec(Pe),mode:ft}:void 0,qe=A5(fe.data.tags??[]),Ye=Number(fe.data.orderHint)>0?Number(fe.data.orderHint):void 0,Ue=(fe.data.nextWorkId??"").trim(),ot=Ue.length>0?Ue:void 0,lt=(fe.data.variantOfWorkId??"").trim(),Fe=lt.length>0?lt:void 0,Ee={name:fe.data.name.trim(),subtitle:fe.data.subtitle.trim()||void 0,objectiveId:fe.data.objectiveId,nodeType:P,scheduleKind:de,scheduleNumber:pe,ebookRef:$e,tags:qe,orderHint:Ye,nextWorkId:ot,variantOfWorkId:Fe,descriptionMarkdown:fe.data.descriptionMarkdown,estimatedMinutes:Number(fe.data.estimatedMinutes)||0,notes:fe.data.notes.trim()||void 0,videoUrls:fe.data.videoUrls.map(et=>et.trim()).filter(Boolean),parentWorkId:_e,visibility:fe.data.visibility,collaboratorEmails:Array.from(new Set(fe.data.collaborators.map(et=>et.trim().toLowerCase()).filter(et=>et.length>0)))};if(!Ee.name){S({type:"error",text:"El nombre es obligatorio."});return}if(!Ee.objectiveId){S({type:"error",text:"Selecciona un objetivo para el trabajo."});return}if(K==="ebook"&&!Ee.ebookRef){S({type:"error",text:"Para `nodeType=ebook`, selecciona un ebook y un indexUrl vlido."});return}if(Ee.parentWorkId&&fe.originalId){if(Ee.parentWorkId===fe.originalId){S({type:"error",text:"Un trabajo no puede ser su propio padre."});return}const et=ee.get(fe.originalId);if(et&&et.has(Ee.parentWorkId)){S({type:"error",text:"Selecciona un trabajo padre que no sea un descendiente."});return}}if(fe.originalId&&Ee.nextWorkId===fe.originalId){S({type:"error",text:"Un trabajo no puede tenerse como siguiente."});return}if(fe.originalId&&Ee.variantOfWorkId===fe.originalId){S({type:"error",text:"Un trabajo no puede ser variante de s mismo."});return}const Ge=fe.originalId?$.get(fe.originalId):void 0,mt=fe.isNew||((Ge==null?void 0:Ge.isOwner)??!1);M(J);try{if(fe.isNew){const et=await r({name:Ee.name,subtitle:Ee.subtitle,objectiveId:Ee.objectiveId,parentWorkId:Ee.parentWorkId,nodeType:Ee.nodeType,scheduleKind:Ee.scheduleKind,scheduleNumber:Ee.scheduleNumber,ebookRef:Ee.ebookRef,tags:Ee.tags,orderHint:Ee.orderHint,nextWorkId:Ee.nextWorkId,variantOfWorkId:Ee.variantOfWorkId,descriptionMarkdown:Ee.descriptionMarkdown,estimatedMinutes:Ee.estimatedMinutes,notes:Ee.notes,videoUrls:Ee.videoUrls,visibility:Ee.visibility,collaboratorEmails:Ee.collaboratorEmails},p);S({type:"success",text:"Trabajo creado correctamente."}),_(Mt=>{const Rt=new Set(Mt);return Rt.delete(J),Rt.add(et.id),Rt})}else if(fe.originalId){const et={name:Ee.name,subtitle:Ee.subtitle??null,objectiveId:Ee.objectiveId,parentWorkId:Ee.parentWorkId??null,nodeType:Ee.nodeType??null,scheduleKind:Ee.scheduleKind??null,scheduleNumber:Ee.scheduleKind?Ee.scheduleNumber??null:null,ebookRef:K==="ebook"?Ee.ebookRef??null:null,tags:Ee.tags,orderHint:Ee.orderHint??null,nextWorkId:Ee.nextWorkId??null,variantOfWorkId:Ee.variantOfWorkId??null,descriptionMarkdown:Ee.descriptionMarkdown,estimatedMinutes:Ee.estimatedMinutes,notes:Ee.notes??null,videoUrls:Ee.videoUrls};mt&&(et.visibility=Ee.visibility,et.collaboratorEmails=Ee.collaboratorEmails),await i(fe.originalId,et,p),S({type:"success",text:"Trabajo actualizado."})}re(et=>{const Mt={...et};return delete Mt[J],Mt})}catch(et){console.error("No se pudo guardar el trabajo",et),S({type:"error",text:"No se han podido guardar los cambios. Comprueba tus permisos e intntalo de nuevo."})}finally{M(null)}},Jt=async J=>{var ye;if(!p){S({type:"error",text:"Inicia sesin para eliminar trabajos."});return}const fe=(((ye=ee.get(J))==null?void 0:ye.size)??0)>0;try{if(!await o(J,p)){S({type:"error",text:fe?"No se puede eliminar porque tiene trabajos hijos.":"No se puede eliminar porque est siendo usado en alguna sesin."});return}S({type:"success",text:"Trabajo eliminado."}),re(Y=>{const P={...Y};return delete P[J],P}),_(Y=>{const P=new Set(Y);return P.delete(J),P})}catch(_e){console.error("No se pudo eliminar el trabajo",_e),S({type:"error",text:"No tienes permisos para eliminar este trabajo o se ha producido un error."})}},bt=async J=>{if(!p){S({type:"error",text:"Inicia sesin para editar trabajos."});return}if(!(J.canEdit??!1)||(J.nodeType??"").trim().toLowerCase()==="style")return;const fe=(J.tags??[]).map(Y=>Y.trim().toLowerCase()).filter(Boolean),ye=fe.includes(Oa),_e=ye?fe.filter(Y=>Y!==Oa):Array.from(new Set([...fe,Oa]));se(J.id);try{await i(J.id,{tags:_e},p),S({type:"success",text:ye?"Incluido en el plan personal.":"Excluido del plan personal."}),window.setTimeout(()=>S(null),1800)}catch(Y){console.error("No se pudo actualizar el trabajo",Y),S({type:"error",text:"No se han podido guardar los cambios. Comprueba tus permisos e intntalo de nuevo."})}finally{se(null)}};return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("header",{className:"glass-panel space-y-4 p-6 sm:p-10",children:[m.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold",children:"Trabajos"}),m.jsx("p",{className:"max-w-2xl text-white/60",children:"Gestiona los ejercicios reutilizables por objetivo. Duplica, edita y ajusta los detalles sin salir del listado."})]}),m.jsxs("div",{className:"flex w-full flex-col gap-3 sm:w-auto sm:flex-row sm:items-center",children:[m.jsx("input",{type:"search",className:"input-field w-full sm:w-72",value:v,onChange:J=>y(J.target.value),placeholder:"Buscar por nombre, descripcin u objetivo"}),m.jsx(Li,{to:"/catalog/taxonomy",className:"btn-secondary",children:"Taxonomy"}),m.jsx("button",{type:"button",className:"btn-primary",onClick:Ve,children:"Nuevo trabajo"}),c?m.jsx("span",{className:"text-xs text-white/60 sm:ml-3",children:"Sincronizando trabajos"}):null]})]}),w&&m.jsx("div",{className:ze("rounded-2xl border px-4 py-3 text-sm",w.type==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-rose-500/40 bg-rose-500/10 text-rose-200"),children:w.text})]}),m.jsx("section",{className:"space-y-6",children:me.length===0?c?m.jsx("div",{className:"glass-panel p-10 text-center text-white/60",children:"Sincronizando trabajos"}):m.jsx("div",{className:"glass-panel p-10 text-center text-white/50",children:"An no hay trabajos guardados. Empieza creando uno con el botn Nuevo trabajo."}):me.map(({objective:J,items:fe})=>{const ye=J?J.name:"Sin objetivo asignado",_e=(J==null?void 0:J.id)??Vu,Y=I.has(_e);return m.jsxs("div",{className:"glass-panel space-y-4 p-6",children:[m.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("button",{type:"button",onClick:()=>O(P=>{const K=new Set(P);return K.has(_e)?K.delete(_e):K.add(_e),K}),className:"inline-flex h-8 w-8 items-center justify-center rounded-full border border-white/15 bg-white/5 text-sm font-semibold text-white/70 transition hover:border-white/30 hover:text-white","aria-label":Y?"Expandir grupo":"Colapsar grupo",title:Y?"Expandir":"Colapsar",children:Y?"":""}),m.jsx("h3",{className:"text-lg font-semibold text-white",children:ye}),m.jsx(Bi,{objective:J,size:"sm"})]}),m.jsxs("span",{className:"rounded-full border border-white/10 px-3 py-1 text-xs text-white/60",children:[fe.length," trabajo",fe.length===1?"":"s"]})]}),Y?null:m.jsx("div",{className:"space-y-4",children:fe.filter(P=>!ge(P)).map(P=>{var Re,Pe,De,ft,$e,qe,Ye;const K=k.has(P.id),le=(P.isEditing&&P.form?P.form.parentWorkId:P.parentWorkId)??"",X=P.isEditing?A((Re=P.work)==null?void 0:Re.id,le):[],D=(P.work?N.get(P.work.id)??[]:[]).length,G=C.has(P.id);if(P.isEditing&&P.form){const Ue=P.isNew||(((Pe=P.work)==null?void 0:Pe.canEdit)??!1),ot=P.isNew||(((De=P.work)==null?void 0:De.isOwner)??!1),lt=P.isNew||(((ft=P.work)==null?void 0:ft.isOwner)??!1);return m.jsx(L5,{form:P.form,objectiveOptions:te,parentOptions:X,workOptions:be,nodeTypeOptions:Z,tagOptions:B,ebookOptions:q,onCreateNodeType:a,onCreateTag:u,depth:P.depth,onFieldChange:Fe=>Ne(P.id,Ee=>{const Ge={...Ee.data,...Fe};if(Fe.parentWorkId!==void 0&&Fe.parentWorkId.length>0){const mt=$.get(Fe.parentWorkId);mt&&(Ge.objectiveId=mt.objectiveId)}return Fe.visibility==="private"&&(Ge.collaborators=[""]),{...Ee,data:Ge}}),onVideoChange:(Fe,Ee)=>Ne(P.id,Ge=>{const mt=Ge.data.videoUrls.slice();return mt[Fe]=Ee,{...Ge,data:{...Ge.data,videoUrls:mt}}}),onAddVideo:()=>Ne(P.id,Fe=>({...Fe,data:{...Fe.data,videoUrls:[...Fe.data.videoUrls,""]}})),onRemoveVideo:Fe=>Ne(P.id,Ee=>{const Ge=Ee.data.videoUrls.slice();return Ge.splice(Fe,1),{...Ee,data:{...Ee.data,videoUrls:Ge.length?Ge:[""]}}}),onCollaboratorChange:(Fe,Ee)=>Ne(P.id,Ge=>{const mt=Ge.data.collaborators.slice();return mt[Fe]=Ee,{...Ge,data:{...Ge.data,collaborators:mt}}}),onAddCollaborator:()=>Ne(P.id,Fe=>Fe.data.collaborators.length>=dS?Fe:{...Fe,data:{...Fe.data,collaborators:[...Fe.data.collaborators,""]}}),onRemoveCollaborator:Fe=>Ne(P.id,Ee=>{const Ge=Ee.data.collaborators.slice();return Ge.splice(Fe,1),Ge.length||Ge.push(""),{...Ee,data:{...Ee.data,collaborators:Ge}}}),onSave:()=>void un(P.id),onCancel:()=>kt(P.id),isNew:P.isNew,canEditContent:Ue,canManageSharing:ot,isSaving:z===P.id,isOwner:lt,ownerEmail:($e=P.work)==null?void 0:$e.ownerEmail},P.id)}if(!P.work)return null;const de=P.work.nextWorkId?F.get(P.work.nextWorkId)??((qe=$.get(P.work.nextWorkId))==null?void 0:qe.name):void 0,pe=P.work.variantOfWorkId?F.get(P.work.variantOfWorkId)??((Ye=$.get(P.work.variantOfWorkId))==null?void 0:Ye.name):void 0;return m.jsx(D5,{work:P.work,childCount:D,depth:P.depth,expanded:K,isTreeCollapsed:G,isPersonalExcluded:(P.work.tags??[]).map(Ue=>Ue.trim().toLowerCase()).includes(Oa),canTogglePersonal:(P.work.canEdit??!1)&&(P.work.nodeType??"").trim().toLowerCase()!=="style",personalToggleBusy:L===P.id,nextLabel:de,variantLabel:pe,onToggle:()=>st(P.id),onToggleTree:()=>j(Ue=>{const ot=new Set(Ue);return ot.has(P.id)?ot.delete(P.id):ot.add(P.id),ot}),onTogglePersonal:()=>{P.work&&bt(P.work)},onEdit:()=>{const Ue=P.work;Ue&&(Ue.canEdit??!1)&&Te(Ue)},onDuplicate:()=>{const Ue=P.work;Ue&&(Ue.canEdit??!1)&&Ke(Ue)},onCreateChild:()=>{const Ue=P.work;Ue&&(Ue.canEdit??!1)&&rt(Ue)},onDelete:()=>{const Ue=P.work;Ue&&(Ue.isOwner??!1)&&Jt(Ue.id)}},P.id)})})]},(J==null?void 0:J.id)??"sin-objetivo")})})]})}function cb(e){return e.reduce((t,n)=>(t[n]=(t[n]??0)+1,t),{})}function F5(){const{works:e,workTaxonomy:t,upsertNodeType:n,removeNodeType:r,upsertTag:i,removeTag:o}=Ce(k=>({works:k.works,workTaxonomy:k.workTaxonomy,upsertNodeType:k.upsertNodeType,removeNodeType:k.removeNodeType,upsertTag:k.upsertTag,removeTag:k.removeTag})),[a,u]=b.useState(""),[c,f]=b.useState(""),[h,p]=b.useState(null),v=b.useMemo(()=>{const k=e.map(_=>(_.nodeType??"").trim().toLowerCase()).filter(Boolean);return cb(k)},[e]),y=b.useMemo(()=>{const k=e.flatMap(_=>(_.tags??[]).map(C=>C.trim().toLowerCase()).filter(Boolean));return cb(k)},[e]),w=t.nodeTypes.slice().sort((k,_)=>k.label.localeCompare(_.label,"en",{sensitivity:"base"})),S=t.tags.slice().sort((k,_)=>k.name.localeCompare(_.name,"en",{sensitivity:"base"}));return m.jsxs("div",{className:"space-y-6",children:[m.jsx("header",{className:"flex flex-wrap items-start justify-between gap-4 rounded-3xl border border-white/10 bg-white/5 px-6 py-5",children:m.jsxs("div",{children:[m.jsx("p",{className:"font-display text-2xl font-semibold",children:"Taxonomy"}),m.jsx("p",{className:"mt-1 text-sm text-white/60",children:"Node types and tags used across the catalog and personal planning."}),m.jsx("p",{className:"mt-2 text-sm",children:m.jsx(Li,{to:"/catalog",className:"text-sky-300 hover:text-sky-200",children:" Back to Catalog"})})]})}),h?m.jsx("div",{className:`rounded-2xl border px-4 py-3 text-sm ${h.type==="success"?"border-emerald-500/30 bg-emerald-500/10 text-emerald-100":"border-rose-500/30 bg-rose-500/10 text-rose-100"}`,children:h.text}):null,m.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[m.jsxs("section",{className:"rounded-3xl border border-white/10 bg-white/5 p-6",children:[m.jsx("div",{className:"flex items-start justify-between gap-4",children:m.jsxs("div",{children:[m.jsx("h2",{className:"text-lg font-semibold",children:"Node types"}),m.jsx("p",{className:"mt-1 text-sm text-white/60",children:"Used by works and group rules. Keys are stored in works."})]})}),m.jsxs("div",{className:"mt-5 flex flex-col gap-3 sm:flex-row sm:items-end",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-white/50",children:"New node type"}),m.jsx("input",{className:"input-field mt-2",value:a,onChange:k=>u(k.target.value),placeholder:"e.g. Dance figures"})]}),m.jsx("button",{type:"button",className:"btn-primary",onClick:()=>{const k=n(a);if(!k){p({type:"error",text:"Please enter a valid node type."});return}u(""),p({type:"success",text:`Node type created: ${k}`})},children:"Add"})]}),m.jsxs("div",{className:"mt-6 space-y-2",children:[w.map(k=>{const _=(v[k.key]??0)>0;return m.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 rounded-2xl border border-white/10 bg-slate-950/30 px-4 py-3",children:[m.jsxs("div",{children:[m.jsx("p",{className:"font-semibold text-white",children:k.label}),m.jsxs("p",{className:"text-xs text-white/50",children:["key: ",m.jsx("span",{className:"font-mono",children:k.key}),"  used by ",v[k.key]??0," works"]})]}),m.jsx("button",{type:"button",disabled:_,className:"rounded-full border border-white/15 bg-white/5 px-3 py-2 text-xs font-semibold text-white/70 transition hover:border-white/30 hover:text-white disabled:opacity-50",title:_?"Cannot delete: in use":"Delete",onClick:()=>{const C=r(k.key);p(C?{type:"success",text:`Node type removed: ${k.key}`}:{type:"error",text:"Cannot remove node type (it may be in use)."})},children:"Delete"})]},k.key)}),w.length===0?m.jsx("p",{className:"text-sm text-white/60",children:"No node types yet."}):null]})]}),m.jsxs("section",{className:"rounded-3xl border border-white/10 bg-white/5 p-6",children:[m.jsx("div",{className:"flex items-start justify-between gap-4",children:m.jsxs("div",{children:[m.jsx("h2",{className:"text-lg font-semibold",children:"Tags"}),m.jsx("p",{className:"mt-1 text-sm text-white/60",children:"Lowercase slugs (spaces become hyphens). Deleting is blocked if used."})]})}),m.jsxs("div",{className:"mt-5 flex flex-col gap-3 sm:flex-row sm:items-end",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-white/50",children:"New tag"}),m.jsx("input",{className:"input-field mt-2",value:c,onChange:k=>f(k.target.value),placeholder:"e.g. bei-shaolin"})]}),m.jsx("button",{type:"button",className:"btn-primary",onClick:()=>{const k=i(c);if(!k){p({type:"error",text:"Please enter a valid tag."});return}f(""),p({type:"success",text:`Tag created: ${k}`})},children:"Add"})]}),m.jsxs("div",{className:"mt-6 space-y-2",children:[S.map(k=>{const _=(y[k.name]??0)>0;return m.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 rounded-2xl border border-white/10 bg-slate-950/30 px-4 py-3",children:[m.jsxs("div",{children:[m.jsx("p",{className:"font-semibold text-white",children:k.name}),m.jsxs("p",{className:"text-xs text-white/50",children:["used by ",y[k.name]??0," works"]})]}),m.jsx("button",{type:"button",disabled:_,className:"rounded-full border border-white/15 bg-white/5 px-3 py-2 text-xs font-semibold text-white/70 transition hover:border-white/30 hover:text-white disabled:opacity-50",title:_?"Cannot delete: in use":"Delete",onClick:()=>{const C=o(k.name);p(C?{type:"success",text:`Tag removed: ${k.name}`}:{type:"error",text:"Cannot remove tag (it may be in use)."})},children:"Delete"})]},k.name)}),S.length===0?m.jsx("p",{className:"text-sm text-white/60",children:"No tags yet."}):null]})]})]})]})}const Rh={name:"",colorHex:"#60a5fa",descriptionMarkdown:""},db=["#F97316","#FB7185","#F43F5E","#EC4899","#D946EF","#A855F7","#8B5CF6","#6366F1","#4F46E5","#3B82F6","#38BDF8","#0EA5E9","#06B6D4","#14B8A6","#0D9488","#10B981","#22C55E","#65A30D","#84CC16","#A3E635","#FACC15","#FBBF24","#F59E0B","#EA580C","#C2410C","#E11D48","#EF4444","#F87171","#FB923C","#F472B6","#FDE047","#7C3AED"];function B5(){const e=Ce(S=>S.objectives),t=Ce(S=>S.addObjective),n=Ce(S=>S.updateObjective),r=Ce(S=>S.deleteObjective),i=Ce(S=>S.works),[o,a]=b.useState(Rh),[u,c]=b.useState(null),f=b.useMemo(()=>{const S=new Map;return i.forEach(k=>{S.set(k.objectiveId,(S.get(k.objectiveId)??0)+1)}),S},[i]),h=b.useMemo(()=>[...e].sort((S,k)=>(S.name??"").localeCompare(k.name??"","es")),[e]),p=S=>{if(S.preventDefault(),!o.name.trim()){c({type:"error",text:"El nombre es obligatorio."});return}const k={name:o.name.trim(),colorHex:o.colorHex,descriptionMarkdown:o.descriptionMarkdown};o.id?(n(o.id,k),c({type:"success",text:"Objetivo actualizado."})):(t(k),c({type:"success",text:"Objetivo creado."})),a(Rh)},v=S=>{a({id:S.id,name:S.name,colorHex:S.colorHex,descriptionMarkdown:S.descriptionMarkdown})},y=S=>{const k=r(S);c(k?{type:"success",text:"Objetivo eliminado."}:{type:"error",text:"No se puede eliminar porque tiene trabajos asociados."})},w=()=>{if(e.length===0){c({type:"error",text:"No hay objetivos a los que asignar colores."});return}const S=[...db];e.map((_,C)=>{const j=S[C%S.length];return{id:_.id,colorHex:j}}).forEach(({id:_,colorHex:C})=>n(_,{colorHex:C})),c({type:"success",text:"Colores repartidos equitativamente entre los objetivos."})};return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("header",{className:"glass-panel p-6 sm:p-10",children:[m.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold",children:"Objetivos"}),m.jsx("p",{className:"text-white/60",children:"Define categoras de trabajo con color y contexto para identificar visualmente cada ejercicio."})]}),m.jsx("div",{className:"flex flex-wrap gap-3",children:m.jsx("button",{type:"button",className:"btn-secondary",onClick:w,children:"Repartir colores"})})]}),u&&m.jsx("div",{className:`mt-4 rounded-2xl border px-4 py-3 text-sm ${u.type==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-rose-500/40 bg-rose-500/10 text-rose-200"}`,children:u.text})]}),m.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.1fr_1.5fr]",children:[m.jsxs("section",{className:"glass-panel p-6",children:[m.jsx("h2",{className:"text-xl font-semibold text-white",children:o.id?"Editar objetivo":"Nuevo objetivo"}),m.jsxs("form",{className:"mt-4 space-y-4",onSubmit:p,children:[m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Nombre"}),m.jsx("input",{type:"text",className:"input-field",value:o.name,onChange:S=>a(k=>({...k,name:S.target.value})),placeholder:"Ej. Resistencia, Tcnica, Juego",required:!0})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Color identificativo"}),m.jsxs("div",{className:"flex flex-wrap gap-3",children:[m.jsx("input",{type:"color",className:"h-12 w-12 cursor-pointer rounded-full border border-white/20 bg-transparent",value:o.colorHex,onChange:S=>a(k=>({...k,colorHex:S.target.value})),"aria-label":"Elegir color personalizado"}),m.jsx("input",{type:"text",className:"input-field max-w-[140px]",value:o.colorHex,onChange:S=>a(k=>({...k,colorHex:S.target.value})),placeholder:"#60a5fa","aria-label":"Cdigo hex del color"})]}),m.jsx("div",{className:"grid grid-cols-8 gap-2 rounded-3xl border border-white/10 bg-white/5 p-3",children:db.map(S=>m.jsx("button",{type:"button",onClick:()=>a(k=>({...k,colorHex:S})),className:ze("relative flex h-9 w-9 items-center justify-center rounded-full border border-white/20 transition hover:scale-105 focus:outline-none focus:ring-2 focus:ring-white/60",o.colorHex.toLowerCase()===S.toLowerCase()&&"ring-2 ring-white/80 ring-offset-2 ring-offset-slate-900"),style:{backgroundColor:S},"aria-label":`Seleccionar color ${S}`,children:o.colorHex.toLowerCase()===S.toLowerCase()&&m.jsx("span",{className:"text-xs font-semibold text-slate-900",children:""})},S))})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Descripcin (Markdown)"}),m.jsx("textarea",{className:"input-field min-h-[140px]",value:o.descriptionMarkdown,onChange:S=>a(k=>({...k,descriptionMarkdown:S.target.value})),placeholder:"Explica cundo usar este tipo de trabajo, objetivos pedaggicos, etc."})]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("button",{type:"submit",className:"btn-primary",children:o.id?"Guardar objetivo":"Crear objetivo"}),o.id&&m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>a(Rh),children:"Cancelar edicin"})]})]})]}),m.jsx("section",{className:"space-y-6",children:h.length===0?m.jsx("div",{className:"glass-panel p-10 text-center text-white/50",children:"An no has creado objetivos. Crea uno con el formulario para clasificarlos por color y descripcin."}):h.map(S=>m.jsxs("div",{className:"glass-panel space-y-4 p-6",children:[m.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[m.jsx(Bi,{objective:S}),m.jsxs("div",{className:"flex items-center gap-3 text-xs text-white/60",children:[m.jsxs("span",{children:[f.get(S.id)??0," trabajos"]}),m.jsx("button",{type:"button",className:"btn-secondary px-3 py-1 text-xs",onClick:()=>v(S),children:"Editar"}),m.jsx("button",{type:"button",className:"inline-flex items-center justify-center rounded-full border border-rose-500/40 px-3 py-1 text-xs font-semibold text-rose-300",onClick:()=>y(S.id),children:"Eliminar"})]})]}),m.jsx(Ss,{content:S.descriptionMarkdown})]},S.id))})]})]})}const Ah={name:"",notes:"",active:!0};function z5(){const e=Ce(h=>h.assistants),t=Ce(h=>h.addAssistant),n=Ce(h=>h.updateAssistant),r=Ce(h=>h.deleteAssistant),[i,o]=b.useState(Ah),[a,u]=b.useState(null),c=h=>{if(h.preventDefault(),!i.name.trim()){u({type:"error",text:"El nombre es obligatorio."});return}const p={name:i.name.trim(),notes:i.notes,active:i.active};i.id?(n(i.id,p),u({type:"success",text:"Asistente actualizado."})):(t(p),u({type:"success",text:"Asistente aadido."})),o(Ah)},f=h=>{o({id:h.id,name:h.name,notes:h.notes??"",active:h.active})};return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("header",{className:"glass-panel p-6 sm:p-10",children:[m.jsx("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold",children:"Asistentes"}),m.jsx("p",{className:"text-white/60",children:"Mantn una lista base de alumnado para registrar asistencia rpidamente durante cada sesin."})]})}),a&&m.jsx("div",{className:ze("mt-4 rounded-2xl border px-4 py-3 text-sm",a.type==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-rose-500/40 bg-rose-500/10 text-rose-200"),children:a.text})]}),m.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.1fr_1.5fr]",children:[m.jsxs("section",{className:"glass-panel p-6",children:[m.jsx("h2",{className:"text-xl font-semibold text-white",children:i.id?"Editar asistente":"Nuevo asistente"}),m.jsxs("form",{className:"mt-4 space-y-4",onSubmit:c,children:[m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Nombre"}),m.jsx("input",{type:"text",className:"input-field",value:i.name,onChange:h=>o(p=>({...p,name:h.target.value})),placeholder:"Nombre y apellidos",required:!0})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Notas"}),m.jsx("textarea",{className:"input-field min-h-[120px]",value:i.notes,onChange:h=>o(p=>({...p,notes:h.target.value})),placeholder:"Observaciones, nivel, lesiones, etc."})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("input",{id:"assistant-active",type:"checkbox",className:"h-5 w-5 rounded border border-white/20 bg-white/10 text-sky-400",checked:i.active,onChange:h=>o(p=>({...p,active:h.target.checked}))}),m.jsx("label",{htmlFor:"assistant-active",className:"text-sm text-white/70",children:"Activo (aparecer en los listados de asistencia)"})]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("button",{type:"submit",className:"btn-primary",children:i.id?"Guardar asistente":"Aadir asistente"}),i.id&&m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>o(Ah),children:"Cancelar edicin"})]})]})]}),m.jsx("section",{className:"space-y-4",children:e.length===0?m.jsx("div",{className:"glass-panel p-10 text-center text-white/50",children:"Todava no tienes asistentes guardados. Crea uno desde el formulario para empezar a marcar asistencia en sesiones."}):e.map(h=>m.jsxs("div",{className:"glass-panel flex flex-col gap-4 p-6 sm:flex-row sm:items-start sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-lg font-semibold text-white",children:h.name}),h.notes?m.jsx("p",{className:"text-sm text-white/60",children:h.notes}):null]}),m.jsxs("div",{className:"flex flex-col items-start gap-3 sm:items-end",children:[m.jsx("span",{className:ze("rounded-full border px-3 py-1 text-xs font-semibold",h.active?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-white/20 bg-white/5 text-white/60"),children:h.active?"Activo":"Inactivo"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{type:"button",className:"btn-secondary px-3 py-1 text-xs",onClick:()=>f(h),children:"Editar"}),m.jsx("button",{type:"button",className:"inline-flex items-center justify-center rounded-full border border-rose-500/40 px-3 py-1 text-xs font-semibold text-rose-300",onClick:()=>r(h.id),children:"Eliminar"})]})]})]},h.id))})]})]})}function ho(e,t){return m.jsxs("div",{className:"flex items-center justify-between rounded-2xl border border-white/10 bg-white/5 px-4 py-2 text-sm text-white/70",children:[m.jsx("span",{children:e}),m.jsx("span",{className:"font-semibold text-white",children:t})]},e)}function U5(){var c,f,h,p,v,y;const e=Ce(w=>w.exportBackup),t=Ce(w=>w.importBackup),[n,r]=b.useState(null),[i,o]=b.useState(null),a=()=>{try{const w=e(),S=new Blob([JSON.stringify(w,null,2)],{type:"application/json"}),k=URL.createObjectURL(S),_=document.createElement("a");_.href=k,_.download=`sport-planner-backup-${new Date().toISOString().slice(0,10)}.json`,_.click(),URL.revokeObjectURL(k),r({type:"success",text:"Backup exportado correctamente."})}catch(w){console.error(w),r({type:"error",text:"No se pudo exportar el backup."})}},u=async w=>{var k;const S=(k=w.target.files)==null?void 0:k[0];if(S)try{const _=await S.text(),C=JSON.parse(_);t(C),o(C),r({type:"success",text:"Datos importados correctamente."})}catch(_){console.error(_),r({type:"error",text:"No se pudo importar el archivo. Revisa que sea un JSON vlido."})}finally{w.target.value=""}};return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("header",{className:"glass-panel p-6 sm:p-10",children:[m.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold",children:"Backups"}),m.jsx("p",{className:"text-white/60",children:"Exporta e importa toda tu informacin en JSON versionado para compartir o restaurar en cualquier momento."})]}),m.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row",children:[m.jsx("button",{type:"button",className:"btn-primary",onClick:a,children:"Descargar backup"}),m.jsxs("label",{className:"btn-secondary cursor-pointer",children:["Importar backup",m.jsx("input",{type:"file",accept:"application/json",className:"hidden",onChange:u})]})]})]}),n&&m.jsx("div",{className:`mt-4 rounded-2xl border px-4 py-3 text-sm ${n.type==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-rose-500/40 bg-rose-500/10 text-rose-200"}`,children:n.text})]}),i&&m.jsxs("section",{className:"glass-panel space-y-4 p-6",children:[m.jsx("h2",{className:"text-xl font-semibold text-white",children:"ltima importacin"}),m.jsxs("p",{className:"text-sm text-white/60",children:["Versin del backup: ",i.version]}),m.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[ho("Objetivos",((c=i.objetivos)==null?void 0:c.length)??0),ho("Trabajos",((f=i.trabajos)==null?void 0:f.length)??0),ho("Sesiones",((h=i.sesiones)==null?void 0:h.length)??0),ho("Asistentes",((p=i.asistentes)==null?void 0:p.length)??0),ho("Sesiones  Trabajos",((v=i.sesiones_trabajos)==null?void 0:v.length)??0),ho("Sesiones  Asistencias",((y=i.sesiones_asistencias)==null?void 0:y.length)??0)]})]}),m.jsxs("section",{className:"glass-panel space-y-3 p-6 text-sm text-white/70",children:[m.jsx("h2",{className:"text-lg font-semibold text-white",children:"Consejos"}),m.jsxs("ul",{className:"list-disc space-y-2 pl-5",children:[m.jsx("li",{children:"Guarda tus backups en un servicio en la nube para poder restaurarlos desde cualquier dispositivo."}),m.jsx("li",{children:"Antes de importar, realiza una exportacin por seguridad. La restauracin sobrescribe los datos actuales sin posibilidad de deshacer."}),m.jsx("li",{children:"Los backups mantienen los IDs, as que puedes sincronizar manualmente varias instalaciones si lo necesitas."})]})]})]})}function W5(){const{signInWithPassword:e,signUpWithPassword:t,session:n,loading:r}=Ns(),[i,o]=b.useState("login"),[a,u]=b.useState(""),[c,f]=b.useState(""),[h,p]=b.useState(""),[v,y]=b.useState(!1),[w,S]=b.useState(null),[k,_]=b.useState(null);if(!r&&n)return m.jsx(Qa,{to:"/",replace:!0});const C=async I=>{if(I.preventDefault(),S(null),_(null),!a||!c){S("Introduce tu email y contrasea.");return}if(i==="register"&&c!==h){S("Las contraseas no coinciden.");return}try{y(!0),i==="login"?await e(a,c):(await t(a,c),_("Revisa tu correo para confirmar la cuenta y vuelve a iniciar sesin."))}catch(O){const R=O instanceof Error?O.message:"No se pudo completar la operacin.";S(R)}finally{y(!1)}},j=()=>{o(I=>I==="login"?"register":"login"),S(null),_(null),f(""),p("")};return m.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-950 px-4 py-12",children:m.jsxs("div",{className:"w-full max-w-md rounded-3xl border border-white/10 bg-slate-900/80 p-8 shadow-2xl backdrop-blur",children:[m.jsxs("header",{className:"mb-8 text-center",children:[m.jsx("div",{className:"mx-auto mb-4 flex h-14 w-14 items-center justify-center rounded-full bg-gradient-to-br from-sky-500 to-indigo-500 text-xl font-bold text-white",children:"SP"}),m.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-white",children:i==="login"?"Inicia sesin":"Crea tu cuenta"}),m.jsx("p",{className:"mt-2 text-sm text-white/60",children:"Accede a tus planes desde cualquier dispositivo con Supabase."})]}),m.jsxs("form",{className:"space-y-5",onSubmit:C,children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"email",className:"block text-xs font-semibold uppercase tracking-wide text-white/50",children:"Email"}),m.jsx("input",{id:"email",type:"email",required:!0,className:"input-field w-full",value:a,onChange:I=>u(I.target.value),placeholder:"tu@correo.com",autoComplete:"email"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"password",className:"block text-xs font-semibold uppercase tracking-wide text-white/50",children:"Contrasea"}),m.jsx("input",{id:"password",type:"password",required:!0,className:"input-field w-full",value:c,onChange:I=>f(I.target.value),autoComplete:i==="login"?"current-password":"new-password"})]}),i==="register"&&m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"confirmPassword",className:"block text-xs font-semibold uppercase tracking-wide text-white/50",children:"Confirmar contrasea"}),m.jsx("input",{id:"confirmPassword",type:"password",required:!0,className:"input-field w-full",value:h,onChange:I=>p(I.target.value),autoComplete:"new-password"})]}),w&&m.jsx("div",{className:"rounded-xl border border-red-500/30 bg-red-500/10 px-4 py-3 text-sm text-red-200",children:w}),k&&m.jsx("div",{className:"rounded-xl border border-emerald-500/30 bg-emerald-500/10 px-4 py-3 text-sm text-emerald-200",children:k}),m.jsx("button",{type:"submit",className:"btn-primary w-full justify-center",disabled:v,children:v?"Procesando":i==="login"?"Entrar":"Crear cuenta"})]}),m.jsx("footer",{className:"mt-6 text-center text-sm text-white/60",children:i==="login"?m.jsx("button",{type:"button",className:"text-sky-300 hover:text-sky-200",onClick:j,children:"No tienes cuenta? Regstrate"}):m.jsx("button",{type:"button",className:"text-sky-300 hover:text-sky-200",onClick:j,children:"Ya tienes cuenta? Inicia sesin"})})]})})}He.locale("es");function H5(){const e=Ce(I=>I.plans),[t,n]=Oo(),r=(t.get("plan")??"").trim(),i=b.useMemo(()=>e.filter(I=>I.kind==="personal"&&I.enabled),[e]),o=b.useMemo(()=>i.length===0?void 0:i.find(O=>O.id===r)??i[0],[i,r]),a=(o==null?void 0:o.id)??"personal-kungfu";b.useEffect(()=>{if(!o||r===o.id)return;const I=new URLSearchParams(t);I.set("plan",o.id),n(I,{replace:!0})},[o,r,t,n]);const u=Ce(I=>I.sessions).filter(I=>I.kind==="personal"&&(I.planId??"personal-kungfu")===a),c=Ce(I=>I.works),f=Ce(I=>I.objectives),h=Ce(I=>I.assistants),p=Ce(I=>I.addSession),v=b.useMemo(()=>[...u].sort((I,O)=>He(O.date).valueOf()-He(I.date).valueOf()),[u]),y=t.get("session")??void 0,w=y?u.find(I=>I.id===y):void 0,[S,k]=b.useState(w==null?void 0:w.id);b.useEffect(()=>{if(y&&!u.some(I=>I.id===y)){k(void 0);const I=new URLSearchParams(t);I.delete("session"),n(I,{replace:!0})}},[y,u,t,n]);const _=S?u.find(I=>I.id===S):void 0,C=I=>{k(I);const O=new URLSearchParams(t);O.set("session",I),O.set("plan",a),n(O,{replace:!0})},j=()=>{const I=He().format("YYYY-MM-DD"),O=u.find(U=>U.date===I);if(O){C(O.id);return}const R=p({date:I,kind:"personal",planId:a,title:(o==null?void 0:o.name)??"Entrenamiento personal",description:"",notes:""});C(R.id)};return m.jsxs("div",{className:"space-y-6",children:[m.jsx("header",{className:"glass-panel p-6 sm:p-10",children:m.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsxs("h1",{className:"text-3xl font-bold",children:[(o==null?void 0:o.name)??"Personal","  Sesiones"]}),m.jsx("p",{className:"text-white/60",children:"Histrico y edicin de sesiones para este plan."})]}),m.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row",children:[m.jsx(Li,{to:`/personal?plan=${encodeURIComponent(a)}`,className:"btn-secondary",children:"Volver a hoy"}),m.jsx(Li,{to:`/settings?plan=${encodeURIComponent(a)}`,className:"btn-secondary",children:"Ajustes"}),m.jsx("button",{type:"button",className:"btn-primary",onClick:j,children:"Crear/abrir hoy"})]})]})}),m.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.1fr_1.9fr]",children:[m.jsxs("section",{className:"glass-panel space-y-3 p-6",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("h2",{className:"text-lg font-semibold text-white",children:"Sesiones"}),m.jsx("span",{className:"rounded-full border border-white/10 px-3 py-1 text-xs text-white/60",children:v.length})]}),v.length===0?m.jsx("div",{className:"rounded-2xl border border-dashed border-white/15 bg-white/5 p-6 text-sm text-white/50",children:"No hay sesiones personales todava. Crea la sesin de hoy para empezar a registrar tu entrenamiento."}):m.jsx("div",{className:"space-y-2",children:v.map(I=>{const O=I.workItems.filter(R=>(R.completed??!1)||typeof R.result<"u").length;return m.jsxs("button",{type:"button",onClick:()=>C(I.id),className:ze("flex w-full flex-col gap-1 rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-left transition hover:border-white/30 hover:bg-white/10",I.id===S&&"border-sky-400/60 bg-sky-500/10 shadow shadow-sky-500/10"),children:[m.jsx("p",{className:"text-sm font-semibold text-white",children:I.title||"Sesin sin ttulo"}),m.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:He(I.date).format("ddd  D MMM YYYY")}),m.jsxs("p",{className:"text-xs text-white/60",children:[O,"/",I.workItems.length," registrados"]})]},I.id)})})]}),m.jsx("section",{className:"glass-panel p-6",children:_?m.jsx(Mm,{session:_,works:c,objectives:f,assistants:h}):m.jsx("div",{className:"rounded-2xl border border-dashed border-white/15 bg-white/5 p-10 text-center text-white/50",children:"Selecciona una sesin para verla y editarla."})})]})]})}const Mp=e=>Array.from(new Set((e??[]).map(t=>t.trim().toLowerCase()).filter(Boolean))),fS=e=>Array.from(new Set(e.split(",").map(t=>t.trim()).filter(Boolean))),hS=e=>(e??[]).join(", ");function fb(e){const t=Mp(e.byTags),n=Mp(e.byNodeTypes),r=fS(hS(e.byWorkIds)),i={};return t&&t.length>0&&(i.byTags=t),n&&n.length>0&&(i.byNodeTypes=n),r&&r.length>0&&(i.byWorkIds=r),i}function V5(e){const t={};Object.entries(e.targetsDays??{}).forEach(([r,i])=>{const o=r.trim().toLowerCase(),a=Number(i);o&&Number.isFinite(a)&&(t[o]=Math.max(1,Math.round(a)))});const n=(e.overrides??[]).map(r=>{var i;return{match:{tagsAny:Mp(((i=r.match)==null?void 0:i.tagsAny)??[])},multiplier:Math.max(.1,Number(r.multiplier)||1)}}).filter(r=>r.match.tagsAny.length>0);return{targetsDays:t,overrides:n}}function q5(e){var C,j,I;const t=Math.max(1,Math.round(Number(e.maxItems)||12)),n=Math.max(1,Number(e.minutesBudget)||30),r={};Object.entries(e.defaultMinutesByNodeType??{}).forEach(([O,R])=>{const U=O.trim().toLowerCase(),re=Number(R);U&&Number.isFinite(re)&&(r[U]=Math.max(.25,re))});const i=O=>O==="count"||O==="minutes"||O==="both",o=O=>O==="work"||O==="note",a=O=>O==="overdue"||O==="weighted",u=O=>O==="allow_all"||O==="prefer_leaves",c=O=>{if(!Array.isArray(O))return[];const R=O.map(U=>Number(U)).filter(U=>Number.isFinite(U)).map(U=>Math.round(U)).filter(U=>U>=0&&U<=6);return Array.from(new Set(R)).sort((U,re)=>U-re)},f=(O,R)=>{const U=(O.id??"").trim()||Ut(),re=o(O.type)?O.type:"work",z=typeof O.enabled=="boolean"?O.enabled:!0,M=Number.isFinite(Number(O.order))?Number(O.order):R,L=(O.name??"").trim()||(re==="note"?"Recap":"Grupo"),se=i(O.limitMode)?O.limitMode:"minutes",q=Number(O.maxItems),H=Number.isFinite(q)&&Math.round(q)>0?Math.round(q):void 0,V=Number(O.minutesBudget),te=Number.isFinite(V)&&V>0?Math.max(0,V):void 0,Z=a(O.strategy)?O.strategy:"overdue",B=u(O.hierarchyRule)?O.hierarchyRule:"allow_all",$=(O.include??[]).map(fb).filter(F=>Object.keys(F).length>0),N=(O.exclude??[]).map(fb).filter(F=>Object.keys(F).length>0);return{id:U,name:L,enabled:z,order:M,type:re,daysOfWeek:c(O.daysOfWeek),limitMode:se,maxItems:H,minutesBudget:te,strategy:Z,hierarchyRule:B,include:$,exclude:N}},p=((e.groups??[]).length>0?e.groups??[]:[{id:"formas",name:"Formas",enabled:!0,order:1,type:"work",limitMode:"minutes",minutesBudget:18,strategy:"overdue",hierarchyRule:"prefer_leaves",include:[{byNodeTypes:["segment","form"]}],exclude:[]},{id:"tecnicas",name:"Tcnicas",enabled:!0,order:2,type:"work",limitMode:"minutes",minutesBudget:10,strategy:"weighted",hierarchyRule:"allow_all",include:[{byNodeTypes:["technique"]},{byTags:["roulette"]}],exclude:[]},{id:"recap",name:"Recap",enabled:!0,order:99,type:"note",limitMode:"minutes",minutesBudget:2}]).map((O,R)=>f(O,R+1)).sort((O,R)=>O.order-R.order).map((O,R)=>({...O,order:R+1})),v=p.filter(O=>(O.type??"work")!=="note"),y=p.filter(O=>O.type==="note"),w=Math.max(0,Number((C=v[0])==null?void 0:C.minutesBudget)||0),S=Math.max(0,Number((j=v[1])==null?void 0:j.minutesBudget)||0),k=Math.max(0,Number((I=y[0])==null?void 0:I.minutesBudget)||0),_=Math.max(0,w+S+k);return{limitMode:e.limitMode,maxItems:t,minutesBudget:n,template:{totalMinutes:_,focusMinutes:w,rouletteMinutes:S,recapMinutes:k},defaultMinutesByNodeType:r,focusSelectors:[],rouletteSelectors:[],groups:p}}const K5={},hb=[{label:"L",value:1},{label:"M",value:2},{label:"X",value:3},{label:"J",value:4},{label:"V",value:5},{label:"S",value:6},{label:"D",value:0}];function pb(){const e=Ce(ie=>ie.kungfuCadence),t=Ce(ie=>ie.kungfuTodayPlan),n=Ce(ie=>ie.plans),r=Ce(ie=>ie.workTaxonomy),i=Ce(ie=>ie.upsertNodeType),o=Ce(ie=>ie.upsertTag),a=Ce(ie=>ie.addPlan),u=Ce(ie=>ie.updatePlan),c=Ce(ie=>ie.duplicatePlan),f=Ce(ie=>ie.deletePlan),h=Ce(ie=>ie.setKungfuCadence),p=Ce(ie=>ie.setKungfuTodayPlan),[v,y]=Oo(),w=(v.get("plan")??"").trim(),S=b.useMemo(()=>um(n),[n]),k=b.useMemo(()=>S.length===0?void 0:S.find(Te=>Te.id===w)??S[0],[S,w]),_=(k==null?void 0:k.id)??"personal-kungfu",C=(k==null?void 0:k.cadence)??e,j=(k==null?void 0:k.todayPlan)??t,[I,O]=b.useState((k==null?void 0:k.name)??"Plan"),[R,U]=b.useState((k==null?void 0:k.enabled)??!0),[re,z]=b.useState(C),[M,L]=b.useState(j),[se,q]=b.useState(null),[H,V]=b.useState([]),[te,Z]=b.useState("personal");b.useEffect(()=>{if(k){if(w!==k.id){const ie=new URLSearchParams(v);ie.set("plan",k.id),y(ie,{replace:!0})}O(k.name),U(k.enabled),k.kind==="personal"?(z(k.cadence??e),L(k.todayPlan??t)):(z(e),L(t))}},[k,w,v,y,e,t]);const B=b.useMemo(()=>{if(!k)return!1;const ie=k.name!==I||k.enabled!==R;return k.kind!=="personal"?ie:ie||JSON.stringify(C)!==JSON.stringify(re)||JSON.stringify(j)!==JSON.stringify(M)},[k,C,j,I,R,re,M]),$=ie=>{q(ie),ie&&window.setTimeout(()=>q(null),ie.type==="success"?1800:2600)},N=()=>{try{const ie={name:I.trim()||(k==null?void 0:k.name)||"Plan",enabled:R};if((k==null?void 0:k.kind)==="personal"){const Te=V5(re),Ve=q5(M);u(_,{...ie,cadence:Te,todayPlan:Ve}),_==="personal-kungfu"&&(h(Te),p(Ve))}else u(_,ie);$({type:"success",text:"Guardado."})}catch(ie){const Te=ie instanceof Error?ie.message:"No se pudo guardar.";$({type:"error",text:Te})}},F=()=>{k&&(O(k.name),U(k.enabled)),z(C),L(j),$({type:"success",text:"Cambios descartados."})},ee=b.useMemo(()=>(r.nodeTypes??[]).slice().sort((ie,Te)=>ie.label.localeCompare(Te.label,"en",{sensitivity:"base"})).map(ie=>({value:ie.key,label:ie.label})),[r.nodeTypes]),A=b.useMemo(()=>(r.tags??[]).slice().sort((ie,Te)=>ie.name.localeCompare(Te.name,"en",{sensitivity:"base"})).map(ie=>({value:ie.name,label:ie.name})),[r.tags]),be=b.useMemo(()=>new Map(hb.map(ie=>[ie.value,ie.label])),[]),he=b.useCallback((ie,Te)=>{V(Ve=>{const Ke=Ve.includes(ie),rt=typeof Te=="boolean"?Te:!Ke;return rt===Ke?Ve:rt?[...Ve,ie]:Ve.filter(st=>st!==ie)})},[]),ge=b.useCallback(()=>{const ie=Ut();L(Te=>{const Ve=[...Te.groups??[]].sort((st,kt)=>(st.order??0)-(kt.order??0)),Ke={id:ie,name:"Nuevo grupo",enabled:!0,order:Ve.length+1,type:"work",daysOfWeek:[],limitMode:"minutes",maxItems:0,minutesBudget:5,strategy:"overdue",hierarchyRule:"allow_all",include:[],exclude:[]},rt=[...Ve,Ke].map((st,kt)=>({...st,order:kt+1}));return{...Te,groups:rt}}),he(ie,!0)},[he]),me=ie=>{const Te=new URLSearchParams(v);Te.set("plan",ie),y(Te,{replace:!0})},je=()=>{const ie=a({kind:te,name:te==="class"?"Clases":"Personal"});me(ie.id),$({type:"success",text:"Plan creado."})},Ne=()=>{if(!k)return;const ie=c(k.id);if(!ie){$({type:"error",text:"No se pudo duplicar el plan."});return}me(ie.id),$({type:"success",text:"Plan duplicado."})},Ie=()=>{if(!k||!window.confirm(`Eliminar el plan "${k.name}"? (No se borrarn sesiones)`))return;if(!f(k.id)){$({type:"error",text:"No se pudo eliminar. Puede ser un plan protegido o tener sesiones asociadas."});return}const Ve=S.find(Ke=>Ke.id!==k.id);Ve&&me(Ve.id),$({type:"success",text:"Plan eliminado."})};return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("header",{className:"glass-panel p-6 sm:p-10",children:[m.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold",children:"Ajustes  Planes"}),m.jsx("p",{className:"text-white/60",children:"Configura planes (personales y clases) y sus reglas."})]}),m.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-end",children:[m.jsxs("div",{className:"flex flex-wrap items-center justify-end gap-2",children:[m.jsxs("select",{className:"input-field h-10 w-[9.5rem] rounded-2xl px-3 text-sm",value:te,onChange:ie=>Z(ie.target.value),title:"Tipo del nuevo plan",children:[m.jsx("option",{value:"personal",children:"Personal"}),m.jsx("option",{value:"class",children:"Clases"})]}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:je,children:"Nuevo"}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:Ne,disabled:!k,children:"Duplicar"}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:Ie,disabled:!k,children:"Eliminar"})]}),m.jsxs("div",{className:"flex gap-3",children:[B?m.jsx("button",{type:"button",className:"btn-secondary",onClick:F,children:"Descartar"}):null,m.jsx("button",{type:"button",className:"btn-primary",onClick:N,disabled:!B,children:"Guardar"})]})]})]}),m.jsx("div",{className:"mt-5 flex flex-wrap gap-2",children:S.map(ie=>m.jsx("button",{type:"button",onClick:()=>me(ie.id),className:ze("rounded-full border px-4 py-2 text-sm font-semibold transition",ie.id===(k==null?void 0:k.id)?"border-sky-400/70 bg-sky-500/10 text-white":"border-white/10 bg-white/5 text-white/70 hover:border-white/30 hover:text-white"),title:ie.kind==="class"?"Plan de clases":"Plan personal",children:ie.name},ie.id))}),se?m.jsx("div",{className:ze("mt-4 rounded-2xl border px-4 py-3 text-sm",se.type==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-rose-500/40 bg-rose-500/10 text-rose-200"),children:se.text}):null]}),m.jsxs("section",{className:"glass-panel space-y-5 p-6",children:[m.jsxs("div",{className:"grid gap-4 sm:grid-cols-[1fr_auto] sm:items-end",children:[m.jsxs("label",{className:"grid gap-2",children:[m.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:"Nombre del plan"}),m.jsx("input",{type:"text",className:"input-field",value:I,onChange:ie=>O(ie.target.value)})]}),m.jsxs("label",{className:"flex items-center justify-between gap-3 rounded-2xl border border-white/10 bg-white/5 px-4 py-3",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-semibold text-white/80",children:"Plan activo"}),m.jsx("p",{className:"text-xs text-white/50",children:(k==null?void 0:k.kind)==="class"?"Clases":"Personal"})]}),m.jsx("input",{type:"checkbox",className:"h-5 w-5 accent-sky-400",checked:R,onChange:ie=>U(ie.target.checked)})]})]}),(k==null?void 0:k.kind)==="class"?m.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 text-sm text-white/70",children:[m.jsx("p",{className:"font-semibold text-white/80",children:"Este plan es de tipo Clases."}),m.jsxs("p",{className:"mt-1 text-white/60",children:["Por ahora, los grupos automticos (cadencias + Plan de hoy) solo aplican a planes personales. Para clases, planifica desde ",m.jsx("span",{className:"font-semibold text-white",children:"Sesiones"})," en modo Editar."]})]}):null]}),(k==null?void 0:k.kind)!=="personal"?null:m.jsxs(m.Fragment,{children:[m.jsxs("section",{className:"glass-panel space-y-5 p-6",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-semibold text-white",children:"Plan de hoy"}),m.jsx("p",{className:"text-sm text-white/60",children:"Controla cuntos tems se sugieren y el presupuesto de minutos."})]}),m.jsxs("div",{className:"grid gap-4 sm:grid-cols-3",children:[m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Modo de lmite"}),m.jsxs("select",{className:"input-field",value:M.limitMode,onChange:ie=>L(Te=>({...Te,limitMode:ie.target.value})),children:[m.jsx("option",{value:"count",children:"Por cantidad"}),m.jsx("option",{value:"minutes",children:"Por minutos"}),m.jsx("option",{value:"both",children:"Cantidad y minutos"})]})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Mx. tems"}),m.jsx("input",{type:"number",min:1,className:"input-field",value:M.maxItems,onChange:ie=>L(Te=>({...Te,maxItems:Number(ie.target.value)}))})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Presupuesto (min)"}),m.jsx("input",{type:"number",min:1,className:"input-field",value:M.minutesBudget,onChange:ie=>L(Te=>({...Te,minutesBudget:Number(ie.target.value)}))})]})]}),m.jsxs("div",{className:"space-y-4 rounded-3xl border border-white/10 bg-white/5 p-5",children:[m.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-white",children:"Grupos"}),m.jsx("p",{className:"text-sm text-white/60",children:"Define bloques con reglas, das de la semana y lmites."})]}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:ge,children:"+ Grupo"})]}),m.jsx("div",{className:"space-y-4",children:[...M.groups??[]].sort((ie,Te)=>(ie.order??0)-(Te.order??0)).map((ie,Te,Ve)=>{const Ke=ie.type??"work",rt=ie.daysOfWeek??[],st=rt.length===0,kt=ie.limitMode??"minutes",un=ie.strategy??"overdue",Jt=ie.hierarchyRule??"allow_all",bt=H.includes(ie.id),Pt=st?"Todos":rt.map(X=>be.get(X)??String(X)).filter(Boolean).join(" "),J=(()=>{const X=Math.round(Number(ie.maxItems??0)),ue=Number(ie.minutesBudget??0),D=Number.isFinite(X)&&X>0?`${Math.max(0,X)} tems`:"Sin lmite",G=Number.isFinite(ue)&&ue>0?`${Math.max(0,ue)} min`:"Sin lmite";return kt==="count"?D:kt==="minutes"?G:`${D}  ${G}`})(),fe=(ie.include??[]).length,ye=(ie.exclude??[]).length,_e=X=>{L(ue=>{const G=[...ue.groups??[]].sort((de,pe)=>(de.order??0)-(pe.order??0)).map(de=>de.id===ie.id?{...de,...X}:de).map((de,pe)=>({...de,order:pe+1}));return{...ue,groups:G}})},Y=X=>{L(ue=>{const D=[...ue.groups??[]].sort((Pe,De)=>(Pe.order??0)-(De.order??0)),G=D.findIndex(Pe=>Pe.id===ie.id),de=G+X;if(G<0||de<0||de>=D.length)return ue;const pe=D.slice(),Re=pe[G];return pe[G]=pe[de],pe[de]=Re,{...ue,groups:pe.map((Pe,De)=>({...Pe,order:De+1}))}})},P=()=>{L(X=>{const D=[...X.groups??[]].sort((G,de)=>(G.order??0)-(de.order??0)).filter(G=>G.id!==ie.id).map((G,de)=>({...G,order:de+1}));return{...X,groups:D.length>0?D:X.groups}}),V(X=>X.filter(ue=>ue!==ie.id))},K=()=>{const X=Ut();L(ue=>{const D=[...ue.groups??[]].sort((Pe,De)=>(Pe.order??0)-(De.order??0)),G=D.findIndex(Pe=>Pe.id===ie.id);if(G<0)return ue;const de=(ie.name??"").trim()||"Grupo",pe={...ie,id:X,name:`${de} (copia)`},Re=D.slice();return Re.splice(G+1,0,pe),{...ue,groups:Re.map((Pe,De)=>({...Pe,order:De+1}))}}),he(X,!0)},le=(X,ue)=>{const D=ie[X]??[];_e({[X]:ue(D)})};return m.jsxs("div",{className:"rounded-3xl border border-white/10 bg-slate-950/40",children:[m.jsxs("div",{className:"flex flex-col gap-3 p-4 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{className:"flex flex-1 flex-wrap items-center gap-3",children:[m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>he(ie.id),"aria-expanded":bt,title:bt?"Colapsar":"Expandir",children:bt?"":""}),m.jsxs("div",{className:"min-w-[240px] flex-1",children:[m.jsx("p",{className:"text-sm font-semibold text-white",children:(ie.name??"").trim()||"Grupo"}),m.jsxs("p",{className:"text-xs text-white/50",children:[Ke==="note"?"Nota":"Trabajos","  ",Pt,"  ",J,Ke==="work"?`  ${un==="weighted"?"Ruleta":"Cadencia"}`:"",Ke==="work"?`  Incluye:${fe||""} Excluye:${ye||""}`:""]})]}),m.jsx("span",{className:ze("rounded-full border px-3 py-1 text-xs font-semibold",ie.enabled?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-white/15 bg-white/5 text-white/60"),children:ie.enabled?"Enabled":"Disabled"})]}),m.jsxs("div",{className:"flex items-center justify-end gap-2",children:[m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>Y(-1),disabled:Te===0,title:"Subir",children:""}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>Y(1),disabled:Te===Ve.length-1,title:"Bajar",children:""}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:K,title:"Duplicar",children:"Duplicar"}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:P,disabled:Ve.length<=1,children:"Eliminar"})]})]}),bt?m.jsx("div",{className:"border-t border-white/10 p-5",children:m.jsx("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:m.jsxs("div",{className:"flex flex-1 flex-col gap-3",children:[m.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[m.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-white/70",children:[m.jsx("input",{type:"checkbox",className:"accent-sky-400",checked:ie.enabled,onChange:X=>_e({enabled:X.target.checked})}),"Enabled"]}),m.jsx("input",{type:"text",className:"input-field flex-1",value:ie.name,onChange:X=>_e({name:X.target.value}),placeholder:"Nombre del grupo"}),m.jsxs("select",{className:"input-field w-36",value:Ke,onChange:X=>_e({type:X.target.value}),children:[m.jsx("option",{value:"work",children:"Trabajos"}),m.jsx("option",{value:"note",children:"Nota"})]})]}),m.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:"Das"}),m.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[m.jsx("button",{type:"button",className:ze("rounded-full border px-3 py-1 text-xs font-semibold transition",st?"border-sky-500/40 bg-sky-500/10 text-sky-100":"border-white/15 bg-white/5 text-white/70 hover:border-white/30 hover:text-white"),onClick:()=>_e({daysOfWeek:[]}),title:"Vaco = todos los das",children:"Todos"}),hb.map(X=>{const ue=st?!0:rt.includes(X.value);return m.jsx("button",{type:"button",className:ze("h-8 w-8 rounded-full border text-xs font-semibold transition",ue?"border-emerald-500/40 bg-emerald-500/10 text-emerald-100":"border-white/15 bg-white/5 text-white/70 hover:border-white/30 hover:text-white"),onClick:()=>{const D=st?[X.value]:rt.includes(X.value)?rt.filter(G=>G!==X.value):[...rt,X.value];_e({daysOfWeek:D.sort((G,de)=>G-de)})},title:ue?"Activo":"Inactivo",children:X.label},X.value)})]}),m.jsx("p",{className:"text-xs text-white/50",children:"Si eliges das especficos, solo aparecer esos das."})]}),m.jsxs("div",{className:"grid gap-3 sm:grid-cols-3",children:[m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:"Lmite"}),m.jsxs("select",{className:"input-field",value:kt,onChange:X=>_e({limitMode:X.target.value}),children:[m.jsx("option",{value:"count",children:"Cantidad"}),m.jsx("option",{value:"minutes",children:"Minutos"}),m.jsx("option",{value:"both",children:"Ambos"})]})]}),m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:"Mx tems"}),m.jsx("input",{type:"number",min:0,className:"input-field",value:ie.maxItems??0,onChange:X=>{const ue=Number(X.target.value),D={maxItems:ue};if(Number.isFinite(ue)&&ue>0){const G=Number(ie.minutesBudget??0);kt==="minutes"&&(D.limitMode=G>0?"both":"count")}_e(D)}})]}),m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:"Mx min"}),m.jsx("input",{type:"number",min:0,className:"input-field",value:ie.minutesBudget??0,onChange:X=>{const ue=Number(X.target.value),D={minutesBudget:ue};if(Number.isFinite(ue)&&ue>0){const G=Number(ie.maxItems??0);kt==="count"&&(D.limitMode=G>0?"both":"minutes")}_e(D)}})]})]})]}),Ke==="work"?m.jsxs("div",{className:"mt-2 grid gap-4 lg:grid-cols-2",children:[m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:"Estrategia"}),m.jsxs("select",{className:"input-field",value:un,onChange:X=>_e({strategy:X.target.value}),children:[m.jsx("option",{value:"overdue",children:"Vencido (cadencia)"}),m.jsx("option",{value:"weighted",children:"Ponderado (ruleta)"})]})]}),m.jsxs("label",{className:"flex items-center gap-2 text-sm text-white/70",children:[m.jsx("input",{type:"checkbox",className:"accent-sky-400",checked:Jt==="prefer_leaves",onChange:X=>_e({hierarchyRule:X.target.checked?"prefer_leaves":"allow_all"})}),"Preferir hijos (evita padres cuando existan)"]})]}):null,Ke==="work"?m.jsx("div",{className:"mt-4 grid gap-5 lg:grid-cols-2",children:["include","exclude"].map(X=>m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("p",{className:"text-sm font-semibold text-white/80",children:X==="include"?"Include (OR)":"Exclude (OR)"}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>le(X,ue=>[...ue,{...K5}]),children:"+ Regla"})]}),(ie[X]??[]).length===0?m.jsx("p",{className:"text-xs text-white/50",children:X==="include"?"Vaco = incluye todo (se aplican excludes).":"Vaco = no excluye nada."}):null,(ie[X]??[]).map((ue,D)=>m.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:["Regla ",D+1]}),m.jsx("button",{type:"button",className:"text-xs font-semibold text-rose-200 hover:text-rose-100",onClick:()=>le(X,G=>G.filter((de,pe)=>pe!==D)),children:"Quitar"})]}),m.jsxs("div",{className:"mt-3 grid gap-3",children:[m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs text-white/50",children:"Tags (AND)"}),m.jsx(Ya,{options:A,value:ue.byTags??[],onChange:G=>le(X,de=>{const pe=[...de];return pe[D]={...pe[D],byTags:G},pe}),placeholder:"Search tags",allowCreate:!0,onCreate:G=>{const de=o(G);return de?{createdValue:de,createdLabel:de}:null}})]}),m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs text-white/50",children:"Node types"}),m.jsx(Ya,{options:ee,value:ue.byNodeTypes??[],onChange:G=>le(X,de=>{const pe=[...de];return pe[D]={...pe[D],byNodeTypes:G},pe}),placeholder:"Search node types",allowCreate:!0,onCreate:G=>{const de=i(G);return de?{createdValue:de,createdLabel:G.trim()}:null}})]}),m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs text-white/50",children:"Work IDs"}),m.jsx("input",{type:"text",className:"input-field",value:hS(ue.byWorkIds),placeholder:"id1, id2",onChange:G=>{const de=fS(G.target.value);le(X,pe=>{const Re=[...pe];return Re[D]={...Re[D],byWorkIds:de},Re})}})]})]})]},`${X}-${ie.id}-${D}`))]},`${ie.id}-${X}`))}):null]})})}):null]},ie.id)})})]}),m.jsxs("details",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[m.jsx("summary",{className:"cursor-pointer text-sm font-semibold text-white/80",children:"Estimacin de minutos por tipo"}),m.jsx("div",{className:"mt-3 grid gap-3 sm:grid-cols-2",children:Object.entries(M.defaultMinutesByNodeType).sort(([ie],[Te])=>ie.localeCompare(Te,"es",{sensitivity:"base"})).map(([ie,Te])=>m.jsxs("label",{className:"grid gap-2",children:[m.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:ie}),m.jsx("input",{type:"number",min:.25,step:.25,className:"input-field",value:Te,onChange:Ve=>L(Ke=>({...Ke,defaultMinutesByNodeType:{...Ke.defaultMinutesByNodeType,[ie]:Number(Ve.target.value)}}))})]},ie))})]})]}),m.jsxs("section",{className:"glass-panel space-y-5 p-6",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-semibold text-white",children:"Cadencias"}),m.jsx("p",{className:"text-sm text-white/60",children:"Objetivo de das por tipo, con overrides por tags."})]}),m.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:Array.from(new Set([...Object.keys(re.targetsDays??{}),...(r.nodeTypes??[]).map(ie=>ie.key)])).map(ie=>ie.trim().toLowerCase()).filter(Boolean).sort((ie,Te)=>ie.localeCompare(Te,"en",{sensitivity:"base"})).map(ie=>{var Ke;const Te=((Ke=(r.nodeTypes??[]).find(rt=>rt.key===ie))==null?void 0:Ke.label)??ie,Ve=(re.targetsDays??{})[ie]??(re.targetsDays??{}).work??7;return m.jsxs("label",{className:"grid gap-2",children:[m.jsxs("span",{className:"text-xs uppercase tracking-wide text-white/40",children:[Te," ",m.jsxs("span",{className:"text-white/30",children:["(",ie,")"]})]}),m.jsx("input",{type:"number",min:1,className:"input-field",value:Ve,onChange:rt=>z(st=>({...st,targetsDays:{...st.targetsDays,[ie]:Number(rt.target.value)}}))})]},ie)})}),m.jsxs("details",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[m.jsx("summary",{className:"cursor-pointer text-sm font-semibold text-white/80",children:"Overrides"}),m.jsxs("div",{className:"mt-3 space-y-3",children:[(re.overrides??[]).map((ie,Te)=>m.jsxs("div",{className:"rounded-2xl border border-white/10 bg-slate-950/40 p-4",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:["Override ",Te+1]}),m.jsx("button",{type:"button",className:"text-xs font-semibold text-rose-200 hover:text-rose-100",onClick:()=>z(Ve=>({...Ve,overrides:(Ve.overrides??[]).filter((Ke,rt)=>rt!==Te)})),children:"Quitar"})]}),m.jsxs("div",{className:"mt-3 grid gap-3 sm:grid-cols-2",children:[m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs text-white/50",children:"Tags (ANY)"}),m.jsx(Ya,{options:A,value:ie.match.tagsAny??[],onChange:Ve=>z(Ke=>{const rt=[...Ke.overrides??[]];return rt[Te]={...ie,match:{tagsAny:Ve}},{...Ke,overrides:rt}}),placeholder:"Search tags",allowCreate:!0,onCreate:Ve=>{const Ke=o(Ve);return Ke?{createdValue:Ke,createdLabel:Ke}:null}})]}),m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs text-white/50",children:"Multiplier"}),m.jsx("input",{type:"number",min:.1,step:.1,className:"input-field",value:ie.multiplier,onChange:Ve=>{const Ke=Number(Ve.target.value);z(rt=>{const st=[...rt.overrides??[]];return st[Te]={...ie,multiplier:Ke},{...rt,overrides:st}})}})]})]})]},`override-${Te}`)),m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>z(ie=>({...ie,overrides:[...ie.overrides??[],{match:{tagsAny:[]},multiplier:1}]})),children:"+ Aadir override"})]})]})]})]})]})}const mb=[{to:"/",label:"Sesiones"},{to:"/catalog",label:"Trabajos"},{to:"/settings",label:"Ajustes"},{to:"/objectives",label:"Objetivos"},{to:"/assistants",label:"Asistentes"},{to:"/backups",label:"Backups"}];function Y5(){const[e,t]=b.useState(!1),[n,r]=b.useState(!1),{user:i,signOut:o}=Ns(),a=async()=>{try{r(!0),await o()}catch(u){console.error("No se pudo cerrar sesin",u)}finally{r(!1),t(!1)}};return m.jsxs("header",{className:"sticky top-0 z-50 border-b border-white/10 bg-slate-950/80 backdrop-blur-xl",children:[m.jsxs("div",{className:"mx-auto flex max-w-6xl items-center justify-between px-3 py-3 sm:px-4 sm:py-4",children:[m.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[m.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-gradient-to-br from-sky-500 to-indigo-500 text-base font-bold sm:h-10 sm:w-10 sm:text-lg",children:"SP"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-display text-lg font-semibold sm:text-xl",children:"Sport Planner"}),m.jsx("p",{className:"text-[11px] text-white/50 sm:text-xs",children:"Planifica sesiones increbles"})]})]}),m.jsxs("div",{className:"hidden items-center gap-4 md:flex",children:[m.jsx("nav",{className:"flex items-center gap-2",children:mb.map(u=>m.jsx(Pv,{to:u.to,className:({isActive:c})=>`rounded-full px-4 py-2 text-sm font-medium transition ${c?"bg-white text-slate-900 shadow-lg shadow-sky-400/30":"text-white/70 hover:text-white hover:bg-white/10"}`,children:u.label},u.to))}),m.jsxs("div",{className:"flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-4 py-2",children:[m.jsxs("div",{className:"text-right",children:[m.jsx("p",{className:"text-xs text-white/50",children:"Sesin iniciada"}),m.jsx("p",{className:"text-sm font-semibold text-white",children:(i==null?void 0:i.email)??"Cuenta"})]}),m.jsx("button",{type:"button",onClick:()=>{a()},disabled:n,className:"inline-flex items-center rounded-full border border-white/20 px-3 py-1 text-xs font-semibold text-white/80 transition hover:bg-white/10 disabled:opacity-60",children:n?"Saliendo":"Cerrar sesin"})]})]}),m.jsx("button",{type:"button",className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-white/20 text-white/80 md:hidden",onClick:()=>t(!0),"aria-label":"Abrir navegacin",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"h-6 w-6",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 6h16M4 12h16M4 18h16"})})})]}),m.jsxs(yx,{open:e,onClose:t,className:"md:hidden",children:[m.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm","aria-hidden":"true"}),m.jsxs(yx.Panel,{className:"fixed inset-y-4 right-3 flex w-[17rem] flex-col rounded-3xl border border-white/10 bg-slate-900/95 p-6 shadow-2xl",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("p",{className:"text-lg font-semibold text-white",children:"Navegacin"}),m.jsx("button",{type:"button",className:"inline-flex h-9 w-9 items-center justify-center rounded-full border border-white/20 text-white/80",onClick:()=>t(!1),"aria-label":"Cerrar navegacin",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"h-5 w-5",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]}),m.jsx("div",{className:"mt-6 flex flex-col gap-2",children:mb.map(u=>m.jsx(Pv,{to:u.to,className:({isActive:c})=>`rounded-2xl px-4 py-3 text-sm font-semibold transition ${c?"bg-white text-slate-900 shadow shadow-sky-400/40":"text-white/80 hover:bg-white/10"}`,onClick:()=>t(!1),children:u.label},u.to))}),m.jsxs("div",{className:"mt-auto rounded-2xl border border-white/10 bg-white/5 p-4",children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-white/40",children:"Sesin iniciada"}),m.jsx("p",{className:"mt-1 text-sm font-semibold text-white",children:(i==null?void 0:i.email)??"Cuenta"}),m.jsx("button",{type:"button",onClick:()=>{a()},disabled:n,className:"mt-3 w-full rounded-full border border-white/20 px-3 py-2 text-sm font-semibold text-white/80 transition hover:bg-white/10 disabled:opacity-60",children:n?"Saliendo":"Cerrar sesin"})]})]})]})]})}function G5(){return cM(),dM(),m.jsxs("div",{className:"min-h-screen pb-16",children:[m.jsx(Y5,{}),m.jsx("main",{className:"mx-auto w-full max-w-6xl px-3 py-5 sm:px-6 sm:py-10",children:m.jsx(Cb,{})})]})}function J5(){return m.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-950",children:m.jsxs("div",{className:"flex flex-col items-center gap-4",children:[m.jsx("div",{className:"h-12 w-12 animate-spin rounded-full border-2 border-white/20 border-t-sky-400"}),m.jsx("p",{className:"text-sm font-medium text-white/60",children:"Cargando Sport Planner"})]})})}function Q5(){const{session:e,loading:t}=Ns(),n=ri();return t?m.jsx(J5,{}):e?m.jsx(Cb,{}):m.jsx(Qa,{to:"/login",replace:!0,state:{from:n}})}function X5(){return m.jsx(gC,{children:m.jsxs(aC,{children:[m.jsx(yn,{path:"/login",element:m.jsx(W5,{})}),m.jsx(yn,{element:m.jsx(Q5,{}),children:m.jsxs(yn,{element:m.jsx(G5,{}),children:[m.jsx(yn,{index:!0,element:m.jsx(P5,{})}),m.jsx(yn,{path:"personal",element:m.jsx(Qa,{to:"/?plan=personal-kungfu",replace:!0})}),m.jsx(yn,{path:"personal/sessions",element:m.jsx(H5,{})}),m.jsx(yn,{path:"personal/settings",element:m.jsx(pb,{})}),m.jsx(yn,{path:"settings",element:m.jsx(pb,{})}),m.jsx(yn,{path:"plan",element:m.jsx(R5,{})}),m.jsx(yn,{path:"catalog",element:m.jsx($5,{})}),m.jsx(yn,{path:"catalog/taxonomy",element:m.jsx(F5,{})}),m.jsx(yn,{path:"objectives",element:m.jsx(B5,{})}),m.jsx(yn,{path:"assistants",element:m.jsx(z5,{})}),m.jsx(yn,{path:"backups",element:m.jsx(U5,{})})]})}),m.jsx(yn,{path:"*",element:m.jsx(Qa,{to:"/",replace:!0})})]})})}function Z5({children:e}){const[t,n]=b.useState(null),[r,i]=b.useState(null),[o,a]=b.useState(!0);b.useEffect(()=>{let c=!0;(async()=>{a(!0);const{data:{session:p}}=await Yt.auth.getSession();c&&(n(p),i((p==null?void 0:p.user)??null),a(!1))})();const{data:{subscription:h}}=Yt.auth.onAuthStateChange((p,v)=>{c&&(n(v),i((v==null?void 0:v.user)??null),a(!1))});return()=>{c=!1,h.unsubscribe()}},[]);const u=b.useMemo(()=>({session:t,user:r,loading:o,signInWithPassword:async(c,f)=>{const{error:h}=await Yt.auth.signInWithPassword({email:c,password:f});if(h)throw h},signUpWithPassword:async(c,f)=>{const p=typeof window<"u"?`${window.location.origin}/sport-planner/`:void 0,{error:v}=await Yt.auth.signUp({email:c,password:f,options:{emailRedirectTo:p}});if(v)throw v},signOut:async()=>{const{error:c}=await Yt.auth.signOut();if(c)throw c}}),[o,t,r]);return m.jsx(Qw.Provider,{value:u,children:e})}Ce.getState().hydrate();g_.createRoot(document.getElementById("root")).render(m.jsx(Ae.StrictMode,{children:m.jsx(Z5,{children:m.jsx(X5,{})})}));
