function HE(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Ro(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function VE(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var Rf={exports:{}},_a={},Of={exports:{}},lt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var av;function qE(){if(av)return lt;av=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function v(F){return F===null||typeof F!="object"?null:(F=p&&F[p]||F["@@iterator"],typeof F=="function"?F:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,k={};function E(F,J,P){this.props=F,this.context=J,this.refs=k,this.updater=P||y}E.prototype.isReactComponent={},E.prototype.setState=function(F,J){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,J,"setState")},E.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function C(){}C.prototype=E.prototype;function _(F,J,P){this.props=F,this.context=J,this.refs=k,this.updater=P||y}var j=_.prototype=new C;j.constructor=_,b(j,E.prototype),j.isPureReactComponent=!0;var I=Array.isArray,M=Object.prototype.hasOwnProperty,A={current:null},B={key:!0,ref:!0,__self:!0,__source:!0};function te(F,J,P){var be,he={},ge=null,me=null;if(J!=null)for(be in J.ref!==void 0&&(me=J.ref),J.key!==void 0&&(ge=""+J.key),J)M.call(J,be)&&!B.hasOwnProperty(be)&&(he[be]=J[be]);var je=arguments.length-2;if(je===1)he.children=P;else if(1<je){for(var Ae=Array(je),Te=0;Te<je;Te++)Ae[Te]=arguments[Te+2];he.children=Ae}if(F&&F.defaultProps)for(be in je=F.defaultProps,je)he[be]===void 0&&(he[be]=je[be]);return{$$typeof:e,type:F,key:ge,ref:me,props:he,_owner:A.current}}function H(F,J){return{$$typeof:e,type:F.type,key:J,ref:F.ref,props:F.props,_owner:F._owner}}function O(F){return typeof F=="object"&&F!==null&&F.$$typeof===e}function D(F){var J={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(P){return J[P]})}var ne=/\/+/g;function W(F,J){return typeof F=="object"&&F!==null&&F.key!=null?D(""+F.key):J.toString(36)}function Y(F,J,P,be,he){var ge=typeof F;(ge==="undefined"||ge==="boolean")&&(F=null);var me=!1;if(F===null)me=!0;else switch(ge){case"string":case"number":me=!0;break;case"object":switch(F.$$typeof){case e:case t:me=!0}}if(me)return me=F,he=he(me),F=be===""?"."+W(me,0):be,I(he)?(P="",F!=null&&(P=F.replace(ne,"$&/")+"/"),Y(he,J,P,"",function(Te){return Te})):he!=null&&(O(he)&&(he=H(he,P+(!he.key||me&&me.key===he.key?"":(""+he.key).replace(ne,"$&/")+"/")+F)),J.push(he)),1;if(me=0,be=be===""?".":be+":",I(F))for(var je=0;je<F.length;je++){ge=F[je];var Ae=be+W(ge,je);me+=Y(ge,J,P,Ae,he)}else if(Ae=v(F),typeof Ae=="function")for(F=Ae.call(F),je=0;!(ge=F.next()).done;)ge=ge.value,Ae=be+W(ge,je++),me+=Y(ge,J,P,Ae,he);else if(ge==="object")throw J=String(F),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return me}function V(F,J,P){if(F==null)return F;var be=[],he=0;return Y(F,be,"","",function(ge){return J.call(P,ge,he++)}),be}function ie(F){if(F._status===-1){var J=F._result;J=J(),J.then(function(P){(F._status===0||F._status===-1)&&(F._status=1,F._result=P)},function(P){(F._status===0||F._status===-1)&&(F._status=2,F._result=P)}),F._status===-1&&(F._status=0,F._result=J)}if(F._status===1)return F._result.default;throw F._result}var z={current:null},L={transition:null},Q={ReactCurrentDispatcher:z,ReactCurrentBatchConfig:L,ReactCurrentOwner:A};function T(){throw Error("act(...) is not supported in production builds of React.")}return lt.Children={map:V,forEach:function(F,J,P){V(F,function(){J.apply(this,arguments)},P)},count:function(F){var J=0;return V(F,function(){J++}),J},toArray:function(F){return V(F,function(J){return J})||[]},only:function(F){if(!O(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},lt.Component=E,lt.Fragment=n,lt.Profiler=i,lt.PureComponent=_,lt.StrictMode=r,lt.Suspense=c,lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q,lt.act=T,lt.cloneElement=function(F,J,P){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var be=b({},F.props),he=F.key,ge=F.ref,me=F._owner;if(J!=null){if(J.ref!==void 0&&(ge=J.ref,me=A.current),J.key!==void 0&&(he=""+J.key),F.type&&F.type.defaultProps)var je=F.type.defaultProps;for(Ae in J)M.call(J,Ae)&&!B.hasOwnProperty(Ae)&&(be[Ae]=J[Ae]===void 0&&je!==void 0?je[Ae]:J[Ae])}var Ae=arguments.length-2;if(Ae===1)be.children=P;else if(1<Ae){je=Array(Ae);for(var Te=0;Te<Ae;Te++)je[Te]=arguments[Te+2];be.children=je}return{$$typeof:e,type:F.type,key:he,ref:ge,props:be,_owner:me}},lt.createContext=function(F){return F={$$typeof:l,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:o,_context:F},F.Consumer=F},lt.createElement=te,lt.createFactory=function(F){var J=te.bind(null,F);return J.type=F,J},lt.createRef=function(){return{current:null}},lt.forwardRef=function(F){return{$$typeof:u,render:F}},lt.isValidElement=O,lt.lazy=function(F){return{$$typeof:h,_payload:{_status:-1,_result:F},_init:ie}},lt.memo=function(F,J){return{$$typeof:f,type:F,compare:J===void 0?null:J}},lt.startTransition=function(F){var J=L.transition;L.transition={};try{F()}finally{L.transition=J}},lt.unstable_act=T,lt.useCallback=function(F,J){return z.current.useCallback(F,J)},lt.useContext=function(F){return z.current.useContext(F)},lt.useDebugValue=function(){},lt.useDeferredValue=function(F){return z.current.useDeferredValue(F)},lt.useEffect=function(F,J){return z.current.useEffect(F,J)},lt.useId=function(){return z.current.useId()},lt.useImperativeHandle=function(F,J,P){return z.current.useImperativeHandle(F,J,P)},lt.useInsertionEffect=function(F,J){return z.current.useInsertionEffect(F,J)},lt.useLayoutEffect=function(F,J){return z.current.useLayoutEffect(F,J)},lt.useMemo=function(F,J){return z.current.useMemo(F,J)},lt.useReducer=function(F,J,P){return z.current.useReducer(F,J,P)},lt.useRef=function(F){return z.current.useRef(F)},lt.useState=function(F){return z.current.useState(F)},lt.useSyncExternalStore=function(F,J,P){return z.current.useSyncExternalStore(F,J,P)},lt.useTransition=function(){return z.current.useTransition()},lt.version="18.3.1",lt}var lv;function Sc(){return lv||(lv=1,Of.exports=qE()),Of.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uv;function YE(){if(uv)return _a;uv=1;var e=Sc(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,c,f){var h,p={},v=null,y=null;f!==void 0&&(v=""+f),c.key!==void 0&&(v=""+c.key),c.ref!==void 0&&(y=c.ref);for(h in c)r.call(c,h)&&!o.hasOwnProperty(h)&&(p[h]=c[h]);if(u&&u.defaultProps)for(h in c=u.defaultProps,c)p[h]===void 0&&(p[h]=c[h]);return{$$typeof:t,type:u,key:v,ref:y,props:p,_owner:i.current}}return _a.Fragment=n,_a.jsx=l,_a.jsxs=l,_a}var cv;function KE(){return cv||(cv=1,Rf.exports=YE()),Rf.exports}var m=KE(),w=Sc();const Re=Ro(w),Zu=HE({__proto__:null,default:Re},[w]);var _u={},Mf={exports:{}},Pn={},Df={exports:{}},Lf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dv;function GE(){return dv||(dv=1,(function(e){function t(L,Q){var T=L.length;L.push(Q);e:for(;0<T;){var F=T-1>>>1,J=L[F];if(0<i(J,Q))L[F]=Q,L[T]=J,T=F;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var Q=L[0],T=L.pop();if(T!==Q){L[0]=T;e:for(var F=0,J=L.length,P=J>>>1;F<P;){var be=2*(F+1)-1,he=L[be],ge=be+1,me=L[ge];if(0>i(he,T))ge<J&&0>i(me,he)?(L[F]=me,L[ge]=T,F=ge):(L[F]=he,L[be]=T,F=be);else if(ge<J&&0>i(me,T))L[F]=me,L[ge]=T,F=ge;else break e}}return Q}function i(L,Q){var T=L.sortIndex-Q.sortIndex;return T!==0?T:L.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var c=[],f=[],h=1,p=null,v=3,y=!1,b=!1,k=!1,E=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(L){for(var Q=n(f);Q!==null;){if(Q.callback===null)r(f);else if(Q.startTime<=L)r(f),Q.sortIndex=Q.expirationTime,t(c,Q);else break;Q=n(f)}}function I(L){if(k=!1,j(L),!b)if(n(c)!==null)b=!0,ie(M);else{var Q=n(f);Q!==null&&z(I,Q.startTime-L)}}function M(L,Q){b=!1,k&&(k=!1,C(te),te=-1),y=!0;var T=v;try{for(j(Q),p=n(c);p!==null&&(!(p.expirationTime>Q)||L&&!D());){var F=p.callback;if(typeof F=="function"){p.callback=null,v=p.priorityLevel;var J=F(p.expirationTime<=Q);Q=e.unstable_now(),typeof J=="function"?p.callback=J:p===n(c)&&r(c),j(Q)}else r(c);p=n(c)}if(p!==null)var P=!0;else{var be=n(f);be!==null&&z(I,be.startTime-Q),P=!1}return P}finally{p=null,v=T,y=!1}}var A=!1,B=null,te=-1,H=5,O=-1;function D(){return!(e.unstable_now()-O<H)}function ne(){if(B!==null){var L=e.unstable_now();O=L;var Q=!0;try{Q=B(!0,L)}finally{Q?W():(A=!1,B=null)}}else A=!1}var W;if(typeof _=="function")W=function(){_(ne)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,V=Y.port2;Y.port1.onmessage=ne,W=function(){V.postMessage(null)}}else W=function(){E(ne,0)};function ie(L){B=L,A||(A=!0,W())}function z(L,Q){te=E(function(){L(e.unstable_now())},Q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_continueExecution=function(){b||y||(b=!0,ie(M))},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(L){switch(v){case 1:case 2:case 3:var Q=3;break;default:Q=v}var T=v;v=Q;try{return L()}finally{v=T}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(L,Q){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var T=v;v=L;try{return Q()}finally{v=T}},e.unstable_scheduleCallback=function(L,Q,T){var F=e.unstable_now();switch(typeof T=="object"&&T!==null?(T=T.delay,T=typeof T=="number"&&0<T?F+T:F):T=F,L){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=T+J,L={id:h++,callback:Q,priorityLevel:L,startTime:T,expirationTime:J,sortIndex:-1},T>F?(L.sortIndex=T,t(f,L),n(c)===null&&L===n(f)&&(k?(C(te),te=-1):k=!0,z(I,T-F))):(L.sortIndex=J,t(c,L),b||y||(b=!0,ie(M))),L},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(L){var Q=v;return function(){var T=v;v=Q;try{return L.apply(this,arguments)}finally{v=T}}}})(Lf)),Lf}var fv;function JE(){return fv||(fv=1,Df.exports=GE()),Df.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hv;function QE(){if(hv)return Pn;hv=1;var e=Sc(),t=JE();function n(s){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+s,d=1;d<arguments.length;d++)a+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(s,a){l(s,a),l(s+"Capture",a)}function l(s,a){for(i[s]=a,s=0;s<a.length;s++)r.add(a[s])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function v(s){return c.call(p,s)?!0:c.call(h,s)?!1:f.test(s)?p[s]=!0:(h[s]=!0,!1)}function y(s,a,d,g){if(d!==null&&d.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return g?!1:d!==null?!d.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function b(s,a,d,g){if(a===null||typeof a>"u"||y(s,a,d,g))return!0;if(g)return!1;if(d!==null)switch(d.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function k(s,a,d,g,x,S,N){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=g,this.attributeNamespace=x,this.mustUseProperty=d,this.propertyName=s,this.type=a,this.sanitizeURL=S,this.removeEmptyString=N}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){E[s]=new k(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var a=s[0];E[a]=new k(a,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){E[s]=new k(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){E[s]=new k(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){E[s]=new k(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){E[s]=new k(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){E[s]=new k(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){E[s]=new k(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){E[s]=new k(s,5,!1,s.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function _(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var a=s.replace(C,_);E[a]=new k(a,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var a=s.replace(C,_);E[a]=new k(a,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var a=s.replace(C,_);E[a]=new k(a,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){E[s]=new k(s,1,!1,s.toLowerCase(),null,!1,!1)}),E.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){E[s]=new k(s,1,!1,s.toLowerCase(),null,!0,!0)});function j(s,a,d,g){var x=E.hasOwnProperty(a)?E[a]:null;(x!==null?x.type!==0:g||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(b(a,d,x,g)&&(d=null),g||x===null?v(a)&&(d===null?s.removeAttribute(a):s.setAttribute(a,""+d)):x.mustUseProperty?s[x.propertyName]=d===null?x.type===3?!1:"":d:(a=x.attributeName,g=x.attributeNamespace,d===null?s.removeAttribute(a):(x=x.type,d=x===3||x===4&&d===!0?"":""+d,g?s.setAttributeNS(g,a,d):s.setAttribute(a,d))))}var I=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,M=Symbol.for("react.element"),A=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),te=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),D=Symbol.for("react.context"),ne=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),ie=Symbol.for("react.lazy"),z=Symbol.for("react.offscreen"),L=Symbol.iterator;function Q(s){return s===null||typeof s!="object"?null:(s=L&&s[L]||s["@@iterator"],typeof s=="function"?s:null)}var T=Object.assign,F;function J(s){if(F===void 0)try{throw Error()}catch(d){var a=d.stack.trim().match(/\n( *(at )?)/);F=a&&a[1]||""}return`
`+F+s}var P=!1;function be(s,a){if(!s||P)return"";P=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(ce){var g=ce}Reflect.construct(s,[],a)}else{try{a.call()}catch(ce){g=ce}s.call(a.prototype)}else{try{throw Error()}catch(ce){g=ce}s()}}catch(ce){if(ce&&g&&typeof ce.stack=="string"){for(var x=ce.stack.split(`
`),S=g.stack.split(`
`),N=x.length-1,U=S.length-1;1<=N&&0<=U&&x[N]!==S[U];)U--;for(;1<=N&&0<=U;N--,U--)if(x[N]!==S[U]){if(N!==1||U!==1)do if(N--,U--,0>U||x[N]!==S[U]){var K=`
`+x[N].replace(" at new "," at ");return s.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",s.displayName)),K}while(1<=N&&0<=U);break}}}finally{P=!1,Error.prepareStackTrace=d}return(s=s?s.displayName||s.name:"")?J(s):""}function he(s){switch(s.tag){case 5:return J(s.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return s=be(s.type,!1),s;case 11:return s=be(s.type.render,!1),s;case 1:return s=be(s.type,!0),s;default:return""}}function ge(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case B:return"Fragment";case A:return"Portal";case H:return"Profiler";case te:return"StrictMode";case W:return"Suspense";case Y:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case D:return(s.displayName||"Context")+".Consumer";case O:return(s._context.displayName||"Context")+".Provider";case ne:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case V:return a=s.displayName||null,a!==null?a:ge(s.type)||"Memo";case ie:a=s._payload,s=s._init;try{return ge(s(a))}catch{}}return null}function me(s){var a=s.type;switch(s.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=a.render,s=s.displayName||s.name||"",a.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ge(a);case 8:return a===te?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function je(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ae(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Te(s){var a=Ae(s)?"checked":"value",d=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),g=""+s[a];if(!s.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var x=d.get,S=d.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return x.call(this)},set:function(N){g=""+N,S.call(this,N)}}),Object.defineProperty(s,a,{enumerable:d.enumerable}),{getValue:function(){return g},setValue:function(N){g=""+N},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function re(s){s._valueTracker||(s._valueTracker=Te(s))}function Ie(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var d=a.getValue(),g="";return s&&(g=Ae(s)?s.checked?"true":"false":s.value),s=g,s!==d?(a.setValue(s),!0):!1}function Ue(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function We(s,a){var d=a.checked;return T({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??s._wrapperState.initialChecked})}function tt(s,a){var d=a.defaultValue==null?"":a.defaultValue,g=a.checked!=null?a.checked:a.defaultChecked;d=je(a.value!=null?a.value:d),s._wrapperState={initialChecked:g,initialValue:d,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function ot(s,a){a=a.checked,a!=null&&j(s,"checked",a,!1)}function St(s,a){ot(s,a);var d=je(a.value),g=a.type;if(d!=null)g==="number"?(d===0&&s.value===""||s.value!=d)&&(s.value=""+d):s.value!==""+d&&(s.value=""+d);else if(g==="submit"||g==="reset"){s.removeAttribute("value");return}a.hasOwnProperty("value")?qt(s,a.type,d):a.hasOwnProperty("defaultValue")&&qt(s,a.type,je(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(s.defaultChecked=!!a.defaultChecked)}function Qt(s,a,d){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var g=a.type;if(!(g!=="submit"&&g!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+s._wrapperState.initialValue,d||a===s.value||(s.value=a),s.defaultValue=a}d=s.name,d!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,d!==""&&(s.name=d)}function qt(s,a,d){(a!=="number"||Ue(s.ownerDocument)!==s)&&(d==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+d&&(s.defaultValue=""+d))}var G=Array.isArray;function fe(s,a,d,g){if(s=s.options,a){a={};for(var x=0;x<d.length;x++)a["$"+d[x]]=!0;for(d=0;d<s.length;d++)x=a.hasOwnProperty("$"+s[d].value),s[d].selected!==x&&(s[d].selected=x),x&&g&&(s[d].defaultSelected=!0)}else{for(d=""+je(d),a=null,x=0;x<s.length;x++){if(s[x].value===d){s[x].selected=!0,g&&(s[x].defaultSelected=!0);return}a!==null||s[x].disabled||(a=s[x])}a!==null&&(a.selected=!0)}}function ye(s,a){if(a.dangerouslySetInnerHTML!=null)throw Error(n(91));return T({},a,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function Pe(s,a){var d=a.value;if(d==null){if(d=a.children,a=a.defaultValue,d!=null){if(a!=null)throw Error(n(92));if(G(d)){if(1<d.length)throw Error(n(93));d=d[0]}a=d}a==null&&(a=""),d=a}s._wrapperState={initialValue:je(d)}}function Se(s,a){var d=je(a.value),g=je(a.defaultValue);d!=null&&(d=""+d,d!==s.value&&(s.value=d),a.defaultValue==null&&s.defaultValue!==d&&(s.defaultValue=d)),g!=null&&(s.defaultValue=""+g)}function ae(s){var a=s.textContent;a===s._wrapperState.initialValue&&a!==""&&a!==null&&(s.value=a)}function R(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function q(s,a){return s==null||s==="http://www.w3.org/1999/xhtml"?R(a):s==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var ue,le=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,d,g,x){MSApp.execUnsafeLocalFunction(function(){return s(a,d,g,x)})}:s})(function(s,a){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=a;else{for(ue=ue||document.createElement("div"),ue.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=ue.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;a.firstChild;)s.appendChild(a.firstChild)}});function ee(s,a){if(a){var d=s.firstChild;if(d&&d===s.lastChild&&d.nodeType===3){d.nodeValue=a;return}}s.textContent=a}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$=["Webkit","ms","Moz","O"];Object.keys(de).forEach(function(s){$.forEach(function(a){a=a+s.charAt(0).toUpperCase()+s.substring(1),de[a]=de[s]})});function Z(s,a,d){return a==null||typeof a=="boolean"||a===""?"":d||typeof a!="number"||a===0||de.hasOwnProperty(s)&&de[s]?(""+a).trim():a+"px"}function pe(s,a){s=s.style;for(var d in a)if(a.hasOwnProperty(d)){var g=d.indexOf("--")===0,x=Z(d,a[d],g);d==="float"&&(d="cssFloat"),g?s.setProperty(d,x):s[d]=x}}var ve=T({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function De(s,a){if(a){if(ve[s]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(n(137,s));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(n(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(n(61))}if(a.style!=null&&typeof a.style!="object")throw Error(n(62))}}function Je(s,a){if(s.indexOf("-")===-1)return typeof a.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nt=null;function Ee(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Qe=null,He=null,Oe=null;function it(s){if(s=ca(s)){if(typeof Qe!="function")throw Error(n(280));var a=s.stateNode;a&&(a=zl(a),Qe(s.stateNode,s.type,a))}}function Ve(s){He?Oe?Oe.push(s):Oe=[s]:He=s}function dt(){if(He){var s=He,a=Oe;if(Oe=He=null,it(s),a)for(s=0;s<a.length;s++)it(a[s])}}function ut(s,a){return s(a)}function vt(){}var xn=!1;function Er(s,a,d){if(xn)return s(a,d);xn=!0;try{return ut(s,a,d)}finally{xn=!1,(He!==null||Oe!==null)&&(vt(),dt())}}function wt(s,a){var d=s.stateNode;if(d===null)return null;var g=zl(d);if(g===null)return null;d=g[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(s=s.type,g=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!g;break e;default:s=!1}if(s)return null;if(d&&typeof d!="function")throw Error(n(231,a,typeof d));return d}var Jn=!1;if(u)try{var un={};Object.defineProperty(un,"passive",{get:function(){Jn=!0}}),window.addEventListener("test",un,un),window.removeEventListener("test",un,un)}catch{Jn=!1}function ar(s,a,d,g,x,S,N,U,K){var ce=Array.prototype.slice.call(arguments,3);try{a.apply(d,ce)}catch(we){this.onError(we)}}var lr=!1,_r=null,$n=!1,Wr=null,Vo={onError:function(s){lr=!0,_r=s}};function X1(s,a,d,g,x,S,N,U,K){lr=!1,_r=null,ar.apply(Vo,arguments)}function Z1(s,a,d,g,x,S,N,U,K){if(X1.apply(this,arguments),lr){if(lr){var ce=_r;lr=!1,_r=null}else throw Error(n(198));$n||($n=!0,Wr=ce)}}function Hi(s){var a=s,d=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(d=a.return),s=a.return;while(s)}return a.tag===3?d:null}function Im(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function Pm(s){if(Hi(s)!==s)throw Error(n(188))}function eS(s){var a=s.alternate;if(!a){if(a=Hi(s),a===null)throw Error(n(188));return a!==s?null:s}for(var d=s,g=a;;){var x=d.return;if(x===null)break;var S=x.alternate;if(S===null){if(g=x.return,g!==null){d=g;continue}break}if(x.child===S.child){for(S=x.child;S;){if(S===d)return Pm(x),s;if(S===g)return Pm(x),a;S=S.sibling}throw Error(n(188))}if(d.return!==g.return)d=x,g=S;else{for(var N=!1,U=x.child;U;){if(U===d){N=!0,d=x,g=S;break}if(U===g){N=!0,g=x,d=S;break}U=U.sibling}if(!N){for(U=S.child;U;){if(U===d){N=!0,d=S,g=x;break}if(U===g){N=!0,g=S,d=x;break}U=U.sibling}if(!N)throw Error(n(189))}}if(d.alternate!==g)throw Error(n(190))}if(d.tag!==3)throw Error(n(188));return d.stateNode.current===d?s:a}function Am(s){return s=eS(s),s!==null?Rm(s):null}function Rm(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var a=Rm(s);if(a!==null)return a;s=s.sibling}return null}var Om=t.unstable_scheduleCallback,Mm=t.unstable_cancelCallback,tS=t.unstable_shouldYield,nS=t.unstable_requestPaint,Dt=t.unstable_now,rS=t.unstable_getCurrentPriorityLevel,Xc=t.unstable_ImmediatePriority,Dm=t.unstable_UserBlockingPriority,wl=t.unstable_NormalPriority,iS=t.unstable_LowPriority,Lm=t.unstable_IdlePriority,bl=null,Cr=null;function sS(s){if(Cr&&typeof Cr.onCommitFiberRoot=="function")try{Cr.onCommitFiberRoot(bl,s,void 0,(s.current.flags&128)===128)}catch{}}var ur=Math.clz32?Math.clz32:lS,oS=Math.log,aS=Math.LN2;function lS(s){return s>>>=0,s===0?32:31-(oS(s)/aS|0)|0}var kl=64,Sl=4194304;function qo(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function El(s,a){var d=s.pendingLanes;if(d===0)return 0;var g=0,x=s.suspendedLanes,S=s.pingedLanes,N=d&268435455;if(N!==0){var U=N&~x;U!==0?g=qo(U):(S&=N,S!==0&&(g=qo(S)))}else N=d&~x,N!==0?g=qo(N):S!==0&&(g=qo(S));if(g===0)return 0;if(a!==0&&a!==g&&(a&x)===0&&(x=g&-g,S=a&-a,x>=S||x===16&&(S&4194240)!==0))return a;if((g&4)!==0&&(g|=d&16),a=s.entangledLanes,a!==0)for(s=s.entanglements,a&=g;0<a;)d=31-ur(a),x=1<<d,g|=s[d],a&=~x;return g}function uS(s,a){switch(s){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cS(s,a){for(var d=s.suspendedLanes,g=s.pingedLanes,x=s.expirationTimes,S=s.pendingLanes;0<S;){var N=31-ur(S),U=1<<N,K=x[N];K===-1?((U&d)===0||(U&g)!==0)&&(x[N]=uS(U,a)):K<=a&&(s.expiredLanes|=U),S&=~U}}function Zc(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function $m(){var s=kl;return kl<<=1,(kl&4194240)===0&&(kl=64),s}function ed(s){for(var a=[],d=0;31>d;d++)a.push(s);return a}function Yo(s,a,d){s.pendingLanes|=a,a!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,a=31-ur(a),s[a]=d}function dS(s,a){var d=s.pendingLanes&~a;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=a,s.mutableReadLanes&=a,s.entangledLanes&=a,a=s.entanglements;var g=s.eventTimes;for(s=s.expirationTimes;0<d;){var x=31-ur(d),S=1<<x;a[x]=0,g[x]=-1,s[x]=-1,d&=~S}}function td(s,a){var d=s.entangledLanes|=a;for(s=s.entanglements;d;){var g=31-ur(d),x=1<<g;x&a|s[g]&a&&(s[g]|=a),d&=~x}}var gt=0;function Fm(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var zm,nd,Bm,Um,Wm,rd=!1,_l=[],si=null,oi=null,ai=null,Ko=new Map,Go=new Map,li=[],fS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hm(s,a){switch(s){case"focusin":case"focusout":si=null;break;case"dragenter":case"dragleave":oi=null;break;case"mouseover":case"mouseout":ai=null;break;case"pointerover":case"pointerout":Ko.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Go.delete(a.pointerId)}}function Jo(s,a,d,g,x,S){return s===null||s.nativeEvent!==S?(s={blockedOn:a,domEventName:d,eventSystemFlags:g,nativeEvent:S,targetContainers:[x]},a!==null&&(a=ca(a),a!==null&&nd(a)),s):(s.eventSystemFlags|=g,a=s.targetContainers,x!==null&&a.indexOf(x)===-1&&a.push(x),s)}function hS(s,a,d,g,x){switch(a){case"focusin":return si=Jo(si,s,a,d,g,x),!0;case"dragenter":return oi=Jo(oi,s,a,d,g,x),!0;case"mouseover":return ai=Jo(ai,s,a,d,g,x),!0;case"pointerover":var S=x.pointerId;return Ko.set(S,Jo(Ko.get(S)||null,s,a,d,g,x)),!0;case"gotpointercapture":return S=x.pointerId,Go.set(S,Jo(Go.get(S)||null,s,a,d,g,x)),!0}return!1}function Vm(s){var a=Vi(s.target);if(a!==null){var d=Hi(a);if(d!==null){if(a=d.tag,a===13){if(a=Im(d),a!==null){s.blockedOn=a,Wm(s.priority,function(){Bm(d)});return}}else if(a===3&&d.stateNode.current.memoizedState.isDehydrated){s.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Cl(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var d=sd(s.domEventName,s.eventSystemFlags,a[0],s.nativeEvent);if(d===null){d=s.nativeEvent;var g=new d.constructor(d.type,d);nt=g,d.target.dispatchEvent(g),nt=null}else return a=ca(d),a!==null&&nd(a),s.blockedOn=d,!1;a.shift()}return!0}function qm(s,a,d){Cl(s)&&d.delete(a)}function pS(){rd=!1,si!==null&&Cl(si)&&(si=null),oi!==null&&Cl(oi)&&(oi=null),ai!==null&&Cl(ai)&&(ai=null),Ko.forEach(qm),Go.forEach(qm)}function Qo(s,a){s.blockedOn===a&&(s.blockedOn=null,rd||(rd=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,pS)))}function Xo(s){function a(x){return Qo(x,s)}if(0<_l.length){Qo(_l[0],s);for(var d=1;d<_l.length;d++){var g=_l[d];g.blockedOn===s&&(g.blockedOn=null)}}for(si!==null&&Qo(si,s),oi!==null&&Qo(oi,s),ai!==null&&Qo(ai,s),Ko.forEach(a),Go.forEach(a),d=0;d<li.length;d++)g=li[d],g.blockedOn===s&&(g.blockedOn=null);for(;0<li.length&&(d=li[0],d.blockedOn===null);)Vm(d),d.blockedOn===null&&li.shift()}var Is=I.ReactCurrentBatchConfig,jl=!0;function mS(s,a,d,g){var x=gt,S=Is.transition;Is.transition=null;try{gt=1,id(s,a,d,g)}finally{gt=x,Is.transition=S}}function gS(s,a,d,g){var x=gt,S=Is.transition;Is.transition=null;try{gt=4,id(s,a,d,g)}finally{gt=x,Is.transition=S}}function id(s,a,d,g){if(jl){var x=sd(s,a,d,g);if(x===null)kd(s,a,g,Nl,d),Hm(s,g);else if(hS(x,s,a,d,g))g.stopPropagation();else if(Hm(s,g),a&4&&-1<fS.indexOf(s)){for(;x!==null;){var S=ca(x);if(S!==null&&zm(S),S=sd(s,a,d,g),S===null&&kd(s,a,g,Nl,d),S===x)break;x=S}x!==null&&g.stopPropagation()}else kd(s,a,g,null,d)}}var Nl=null;function sd(s,a,d,g){if(Nl=null,s=Ee(g),s=Vi(s),s!==null)if(a=Hi(s),a===null)s=null;else if(d=a.tag,d===13){if(s=Im(a),s!==null)return s;s=null}else if(d===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null);return Nl=s,null}function Ym(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rS()){case Xc:return 1;case Dm:return 4;case wl:case iS:return 16;case Lm:return 536870912;default:return 16}default:return 16}}var ui=null,od=null,Tl=null;function Km(){if(Tl)return Tl;var s,a=od,d=a.length,g,x="value"in ui?ui.value:ui.textContent,S=x.length;for(s=0;s<d&&a[s]===x[s];s++);var N=d-s;for(g=1;g<=N&&a[d-g]===x[S-g];g++);return Tl=x.slice(s,1<g?1-g:void 0)}function Il(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Pl(){return!0}function Gm(){return!1}function Fn(s){function a(d,g,x,S,N){this._reactName=d,this._targetInst=x,this.type=g,this.nativeEvent=S,this.target=N,this.currentTarget=null;for(var U in s)s.hasOwnProperty(U)&&(d=s[U],this[U]=d?d(S):S[U]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Pl:Gm,this.isPropagationStopped=Gm,this}return T(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Pl)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Pl)},persist:function(){},isPersistent:Pl}),a}var Ps={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ad=Fn(Ps),Zo=T({},Ps,{view:0,detail:0}),yS=Fn(Zo),ld,ud,ea,Al=T({},Zo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dd,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ea&&(ea&&s.type==="mousemove"?(ld=s.screenX-ea.screenX,ud=s.screenY-ea.screenY):ud=ld=0,ea=s),ld)},movementY:function(s){return"movementY"in s?s.movementY:ud}}),Jm=Fn(Al),vS=T({},Al,{dataTransfer:0}),xS=Fn(vS),wS=T({},Zo,{relatedTarget:0}),cd=Fn(wS),bS=T({},Ps,{animationName:0,elapsedTime:0,pseudoElement:0}),kS=Fn(bS),SS=T({},Ps,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),ES=Fn(SS),_S=T({},Ps,{data:0}),Qm=Fn(_S),CS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},NS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function TS(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=NS[s])?!!a[s]:!1}function dd(){return TS}var IS=T({},Zo,{key:function(s){if(s.key){var a=CS[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=Il(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?jS[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dd,charCode:function(s){return s.type==="keypress"?Il(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Il(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),PS=Fn(IS),AS=T({},Al,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xm=Fn(AS),RS=T({},Zo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dd}),OS=Fn(RS),MS=T({},Ps,{propertyName:0,elapsedTime:0,pseudoElement:0}),DS=Fn(MS),LS=T({},Al,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),$S=Fn(LS),FS=[9,13,27,32],fd=u&&"CompositionEvent"in window,ta=null;u&&"documentMode"in document&&(ta=document.documentMode);var zS=u&&"TextEvent"in window&&!ta,Zm=u&&(!fd||ta&&8<ta&&11>=ta),eg=" ",tg=!1;function ng(s,a){switch(s){case"keyup":return FS.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rg(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var As=!1;function BS(s,a){switch(s){case"compositionend":return rg(a);case"keypress":return a.which!==32?null:(tg=!0,eg);case"textInput":return s=a.data,s===eg&&tg?null:s;default:return null}}function US(s,a){if(As)return s==="compositionend"||!fd&&ng(s,a)?(s=Km(),Tl=od=ui=null,As=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Zm&&a.locale!=="ko"?null:a.data;default:return null}}var WS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ig(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!WS[s.type]:a==="textarea"}function sg(s,a,d,g){Ve(g),a=Ll(a,"onChange"),0<a.length&&(d=new ad("onChange","change",null,d,g),s.push({event:d,listeners:a}))}var na=null,ra=null;function HS(s){Sg(s,0)}function Rl(s){var a=Ls(s);if(Ie(a))return s}function VS(s,a){if(s==="change")return a}var og=!1;if(u){var hd;if(u){var pd="oninput"in document;if(!pd){var ag=document.createElement("div");ag.setAttribute("oninput","return;"),pd=typeof ag.oninput=="function"}hd=pd}else hd=!1;og=hd&&(!document.documentMode||9<document.documentMode)}function lg(){na&&(na.detachEvent("onpropertychange",ug),ra=na=null)}function ug(s){if(s.propertyName==="value"&&Rl(ra)){var a=[];sg(a,ra,s,Ee(s)),Er(HS,a)}}function qS(s,a,d){s==="focusin"?(lg(),na=a,ra=d,na.attachEvent("onpropertychange",ug)):s==="focusout"&&lg()}function YS(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Rl(ra)}function KS(s,a){if(s==="click")return Rl(a)}function GS(s,a){if(s==="input"||s==="change")return Rl(a)}function JS(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var cr=typeof Object.is=="function"?Object.is:JS;function ia(s,a){if(cr(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var d=Object.keys(s),g=Object.keys(a);if(d.length!==g.length)return!1;for(g=0;g<d.length;g++){var x=d[g];if(!c.call(a,x)||!cr(s[x],a[x]))return!1}return!0}function cg(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function dg(s,a){var d=cg(s);s=0;for(var g;d;){if(d.nodeType===3){if(g=s+d.textContent.length,s<=a&&g>=a)return{node:d,offset:a-s};s=g}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=cg(d)}}function fg(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?fg(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function hg(){for(var s=window,a=Ue();a instanceof s.HTMLIFrameElement;){try{var d=typeof a.contentWindow.location.href=="string"}catch{d=!1}if(d)s=a.contentWindow;else break;a=Ue(s.document)}return a}function md(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}function QS(s){var a=hg(),d=s.focusedElem,g=s.selectionRange;if(a!==d&&d&&d.ownerDocument&&fg(d.ownerDocument.documentElement,d)){if(g!==null&&md(d)){if(a=g.start,s=g.end,s===void 0&&(s=a),"selectionStart"in d)d.selectionStart=a,d.selectionEnd=Math.min(s,d.value.length);else if(s=(a=d.ownerDocument||document)&&a.defaultView||window,s.getSelection){s=s.getSelection();var x=d.textContent.length,S=Math.min(g.start,x);g=g.end===void 0?S:Math.min(g.end,x),!s.extend&&S>g&&(x=g,g=S,S=x),x=dg(d,S);var N=dg(d,g);x&&N&&(s.rangeCount!==1||s.anchorNode!==x.node||s.anchorOffset!==x.offset||s.focusNode!==N.node||s.focusOffset!==N.offset)&&(a=a.createRange(),a.setStart(x.node,x.offset),s.removeAllRanges(),S>g?(s.addRange(a),s.extend(N.node,N.offset)):(a.setEnd(N.node,N.offset),s.addRange(a)))}}for(a=[],s=d;s=s.parentNode;)s.nodeType===1&&a.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<a.length;d++)s=a[d],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var XS=u&&"documentMode"in document&&11>=document.documentMode,Rs=null,gd=null,sa=null,yd=!1;function pg(s,a,d){var g=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;yd||Rs==null||Rs!==Ue(g)||(g=Rs,"selectionStart"in g&&md(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),sa&&ia(sa,g)||(sa=g,g=Ll(gd,"onSelect"),0<g.length&&(a=new ad("onSelect","select",null,a,d),s.push({event:a,listeners:g}),a.target=Rs)))}function Ol(s,a){var d={};return d[s.toLowerCase()]=a.toLowerCase(),d["Webkit"+s]="webkit"+a,d["Moz"+s]="moz"+a,d}var Os={animationend:Ol("Animation","AnimationEnd"),animationiteration:Ol("Animation","AnimationIteration"),animationstart:Ol("Animation","AnimationStart"),transitionend:Ol("Transition","TransitionEnd")},vd={},mg={};u&&(mg=document.createElement("div").style,"AnimationEvent"in window||(delete Os.animationend.animation,delete Os.animationiteration.animation,delete Os.animationstart.animation),"TransitionEvent"in window||delete Os.transitionend.transition);function Ml(s){if(vd[s])return vd[s];if(!Os[s])return s;var a=Os[s],d;for(d in a)if(a.hasOwnProperty(d)&&d in mg)return vd[s]=a[d];return s}var gg=Ml("animationend"),yg=Ml("animationiteration"),vg=Ml("animationstart"),xg=Ml("transitionend"),wg=new Map,bg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ci(s,a){wg.set(s,a),o(a,[s])}for(var xd=0;xd<bg.length;xd++){var wd=bg[xd],ZS=wd.toLowerCase(),eE=wd[0].toUpperCase()+wd.slice(1);ci(ZS,"on"+eE)}ci(gg,"onAnimationEnd"),ci(yg,"onAnimationIteration"),ci(vg,"onAnimationStart"),ci("dblclick","onDoubleClick"),ci("focusin","onFocus"),ci("focusout","onBlur"),ci(xg,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tE=new Set("cancel close invalid load scroll toggle".split(" ").concat(oa));function kg(s,a,d){var g=s.type||"unknown-event";s.currentTarget=d,Z1(g,a,void 0,s),s.currentTarget=null}function Sg(s,a){a=(a&4)!==0;for(var d=0;d<s.length;d++){var g=s[d],x=g.event;g=g.listeners;e:{var S=void 0;if(a)for(var N=g.length-1;0<=N;N--){var U=g[N],K=U.instance,ce=U.currentTarget;if(U=U.listener,K!==S&&x.isPropagationStopped())break e;kg(x,U,ce),S=K}else for(N=0;N<g.length;N++){if(U=g[N],K=U.instance,ce=U.currentTarget,U=U.listener,K!==S&&x.isPropagationStopped())break e;kg(x,U,ce),S=K}}}if($n)throw s=Wr,$n=!1,Wr=null,s}function jt(s,a){var d=a[Nd];d===void 0&&(d=a[Nd]=new Set);var g=s+"__bubble";d.has(g)||(Eg(a,s,2,!1),d.add(g))}function bd(s,a,d){var g=0;a&&(g|=4),Eg(d,s,g,a)}var Dl="_reactListening"+Math.random().toString(36).slice(2);function aa(s){if(!s[Dl]){s[Dl]=!0,r.forEach(function(d){d!=="selectionchange"&&(tE.has(d)||bd(d,!1,s),bd(d,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Dl]||(a[Dl]=!0,bd("selectionchange",!1,a))}}function Eg(s,a,d,g){switch(Ym(a)){case 1:var x=mS;break;case 4:x=gS;break;default:x=id}d=x.bind(null,a,d,s),x=void 0,!Jn||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(x=!0),g?x!==void 0?s.addEventListener(a,d,{capture:!0,passive:x}):s.addEventListener(a,d,!0):x!==void 0?s.addEventListener(a,d,{passive:x}):s.addEventListener(a,d,!1)}function kd(s,a,d,g,x){var S=g;if((a&1)===0&&(a&2)===0&&g!==null)e:for(;;){if(g===null)return;var N=g.tag;if(N===3||N===4){var U=g.stateNode.containerInfo;if(U===x||U.nodeType===8&&U.parentNode===x)break;if(N===4)for(N=g.return;N!==null;){var K=N.tag;if((K===3||K===4)&&(K=N.stateNode.containerInfo,K===x||K.nodeType===8&&K.parentNode===x))return;N=N.return}for(;U!==null;){if(N=Vi(U),N===null)return;if(K=N.tag,K===5||K===6){g=S=N;continue e}U=U.parentNode}}g=g.return}Er(function(){var ce=S,we=Ee(d),ke=[];e:{var xe=wg.get(s);if(xe!==void 0){var Me=ad,$e=s;switch(s){case"keypress":if(Il(d)===0)break e;case"keydown":case"keyup":Me=PS;break;case"focusin":$e="focus",Me=cd;break;case"focusout":$e="blur",Me=cd;break;case"beforeblur":case"afterblur":Me=cd;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Me=Jm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Me=xS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Me=OS;break;case gg:case yg:case vg:Me=kS;break;case xg:Me=DS;break;case"scroll":Me=yS;break;case"wheel":Me=$S;break;case"copy":case"cut":case"paste":Me=ES;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Me=Xm}var Fe=(a&4)!==0,Lt=!Fe&&s==="scroll",se=Fe?xe!==null?xe+"Capture":null:xe;Fe=[];for(var X=ce,oe;X!==null;){oe=X;var Ce=oe.stateNode;if(oe.tag===5&&Ce!==null&&(oe=Ce,se!==null&&(Ce=wt(X,se),Ce!=null&&Fe.push(la(X,Ce,oe)))),Lt)break;X=X.return}0<Fe.length&&(xe=new Me(xe,$e,null,d,we),ke.push({event:xe,listeners:Fe}))}}if((a&7)===0){e:{if(xe=s==="mouseover"||s==="pointerover",Me=s==="mouseout"||s==="pointerout",xe&&d!==nt&&($e=d.relatedTarget||d.fromElement)&&(Vi($e)||$e[Hr]))break e;if((Me||xe)&&(xe=we.window===we?we:(xe=we.ownerDocument)?xe.defaultView||xe.parentWindow:window,Me?($e=d.relatedTarget||d.toElement,Me=ce,$e=$e?Vi($e):null,$e!==null&&(Lt=Hi($e),$e!==Lt||$e.tag!==5&&$e.tag!==6)&&($e=null)):(Me=null,$e=ce),Me!==$e)){if(Fe=Jm,Ce="onMouseLeave",se="onMouseEnter",X="mouse",(s==="pointerout"||s==="pointerover")&&(Fe=Xm,Ce="onPointerLeave",se="onPointerEnter",X="pointer"),Lt=Me==null?xe:Ls(Me),oe=$e==null?xe:Ls($e),xe=new Fe(Ce,X+"leave",Me,d,we),xe.target=Lt,xe.relatedTarget=oe,Ce=null,Vi(we)===ce&&(Fe=new Fe(se,X+"enter",$e,d,we),Fe.target=oe,Fe.relatedTarget=Lt,Ce=Fe),Lt=Ce,Me&&$e)t:{for(Fe=Me,se=$e,X=0,oe=Fe;oe;oe=Ms(oe))X++;for(oe=0,Ce=se;Ce;Ce=Ms(Ce))oe++;for(;0<X-oe;)Fe=Ms(Fe),X--;for(;0<oe-X;)se=Ms(se),oe--;for(;X--;){if(Fe===se||se!==null&&Fe===se.alternate)break t;Fe=Ms(Fe),se=Ms(se)}Fe=null}else Fe=null;Me!==null&&_g(ke,xe,Me,Fe,!1),$e!==null&&Lt!==null&&_g(ke,Lt,$e,Fe,!0)}}e:{if(xe=ce?Ls(ce):window,Me=xe.nodeName&&xe.nodeName.toLowerCase(),Me==="select"||Me==="input"&&xe.type==="file")var Be=VS;else if(ig(xe))if(og)Be=GS;else{Be=YS;var qe=qS}else(Me=xe.nodeName)&&Me.toLowerCase()==="input"&&(xe.type==="checkbox"||xe.type==="radio")&&(Be=KS);if(Be&&(Be=Be(s,ce))){sg(ke,Be,d,we);break e}qe&&qe(s,xe,ce),s==="focusout"&&(qe=xe._wrapperState)&&qe.controlled&&xe.type==="number"&&qt(xe,"number",xe.value)}switch(qe=ce?Ls(ce):window,s){case"focusin":(ig(qe)||qe.contentEditable==="true")&&(Rs=qe,gd=ce,sa=null);break;case"focusout":sa=gd=Rs=null;break;case"mousedown":yd=!0;break;case"contextmenu":case"mouseup":case"dragend":yd=!1,pg(ke,d,we);break;case"selectionchange":if(XS)break;case"keydown":case"keyup":pg(ke,d,we)}var Ye;if(fd)e:{switch(s){case"compositionstart":var et="onCompositionStart";break e;case"compositionend":et="onCompositionEnd";break e;case"compositionupdate":et="onCompositionUpdate";break e}et=void 0}else As?ng(s,d)&&(et="onCompositionEnd"):s==="keydown"&&d.keyCode===229&&(et="onCompositionStart");et&&(Zm&&d.locale!=="ko"&&(As||et!=="onCompositionStart"?et==="onCompositionEnd"&&As&&(Ye=Km()):(ui=we,od="value"in ui?ui.value:ui.textContent,As=!0)),qe=Ll(ce,et),0<qe.length&&(et=new Qm(et,s,null,d,we),ke.push({event:et,listeners:qe}),Ye?et.data=Ye:(Ye=rg(d),Ye!==null&&(et.data=Ye)))),(Ye=zS?BS(s,d):US(s,d))&&(ce=Ll(ce,"onBeforeInput"),0<ce.length&&(we=new Qm("onBeforeInput","beforeinput",null,d,we),ke.push({event:we,listeners:ce}),we.data=Ye))}Sg(ke,a)})}function la(s,a,d){return{instance:s,listener:a,currentTarget:d}}function Ll(s,a){for(var d=a+"Capture",g=[];s!==null;){var x=s,S=x.stateNode;x.tag===5&&S!==null&&(x=S,S=wt(s,d),S!=null&&g.unshift(la(s,S,x)),S=wt(s,a),S!=null&&g.push(la(s,S,x))),s=s.return}return g}function Ms(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function _g(s,a,d,g,x){for(var S=a._reactName,N=[];d!==null&&d!==g;){var U=d,K=U.alternate,ce=U.stateNode;if(K!==null&&K===g)break;U.tag===5&&ce!==null&&(U=ce,x?(K=wt(d,S),K!=null&&N.unshift(la(d,K,U))):x||(K=wt(d,S),K!=null&&N.push(la(d,K,U)))),d=d.return}N.length!==0&&s.push({event:a,listeners:N})}var nE=/\r\n?/g,rE=/\u0000|\uFFFD/g;function Cg(s){return(typeof s=="string"?s:""+s).replace(nE,`
`).replace(rE,"")}function $l(s,a,d){if(a=Cg(a),Cg(s)!==a&&d)throw Error(n(425))}function Fl(){}var Sd=null,Ed=null;function _d(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Cd=typeof setTimeout=="function"?setTimeout:void 0,iE=typeof clearTimeout=="function"?clearTimeout:void 0,jg=typeof Promise=="function"?Promise:void 0,sE=typeof queueMicrotask=="function"?queueMicrotask:typeof jg<"u"?function(s){return jg.resolve(null).then(s).catch(oE)}:Cd;function oE(s){setTimeout(function(){throw s})}function jd(s,a){var d=a,g=0;do{var x=d.nextSibling;if(s.removeChild(d),x&&x.nodeType===8)if(d=x.data,d==="/$"){if(g===0){s.removeChild(x),Xo(a);return}g--}else d!=="$"&&d!=="$?"&&d!=="$!"||g++;d=x}while(d);Xo(a)}function di(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return s}function Ng(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var d=s.data;if(d==="$"||d==="$!"||d==="$?"){if(a===0)return s;a--}else d==="/$"&&a++}s=s.previousSibling}return null}var Ds=Math.random().toString(36).slice(2),jr="__reactFiber$"+Ds,ua="__reactProps$"+Ds,Hr="__reactContainer$"+Ds,Nd="__reactEvents$"+Ds,aE="__reactListeners$"+Ds,lE="__reactHandles$"+Ds;function Vi(s){var a=s[jr];if(a)return a;for(var d=s.parentNode;d;){if(a=d[Hr]||d[jr]){if(d=a.alternate,a.child!==null||d!==null&&d.child!==null)for(s=Ng(s);s!==null;){if(d=s[jr])return d;s=Ng(s)}return a}s=d,d=s.parentNode}return null}function ca(s){return s=s[jr]||s[Hr],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Ls(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(n(33))}function zl(s){return s[ua]||null}var Td=[],$s=-1;function fi(s){return{current:s}}function Nt(s){0>$s||(s.current=Td[$s],Td[$s]=null,$s--)}function Et(s,a){$s++,Td[$s]=s.current,s.current=a}var hi={},cn=fi(hi),Cn=fi(!1),qi=hi;function Fs(s,a){var d=s.type.contextTypes;if(!d)return hi;var g=s.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===a)return g.__reactInternalMemoizedMaskedChildContext;var x={},S;for(S in d)x[S]=a[S];return g&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=a,s.__reactInternalMemoizedMaskedChildContext=x),x}function jn(s){return s=s.childContextTypes,s!=null}function Bl(){Nt(Cn),Nt(cn)}function Tg(s,a,d){if(cn.current!==hi)throw Error(n(168));Et(cn,a),Et(Cn,d)}function Ig(s,a,d){var g=s.stateNode;if(a=a.childContextTypes,typeof g.getChildContext!="function")return d;g=g.getChildContext();for(var x in g)if(!(x in a))throw Error(n(108,me(s)||"Unknown",x));return T({},d,g)}function Ul(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||hi,qi=cn.current,Et(cn,s),Et(Cn,Cn.current),!0}function Pg(s,a,d){var g=s.stateNode;if(!g)throw Error(n(169));d?(s=Ig(s,a,qi),g.__reactInternalMemoizedMergedChildContext=s,Nt(Cn),Nt(cn),Et(cn,s)):Nt(Cn),Et(Cn,d)}var Vr=null,Wl=!1,Id=!1;function Ag(s){Vr===null?Vr=[s]:Vr.push(s)}function uE(s){Wl=!0,Ag(s)}function pi(){if(!Id&&Vr!==null){Id=!0;var s=0,a=gt;try{var d=Vr;for(gt=1;s<d.length;s++){var g=d[s];do g=g(!0);while(g!==null)}Vr=null,Wl=!1}catch(x){throw Vr!==null&&(Vr=Vr.slice(s+1)),Om(Xc,pi),x}finally{gt=a,Id=!1}}return null}var zs=[],Bs=0,Hl=null,Vl=0,Qn=[],Xn=0,Yi=null,qr=1,Yr="";function Ki(s,a){zs[Bs++]=Vl,zs[Bs++]=Hl,Hl=s,Vl=a}function Rg(s,a,d){Qn[Xn++]=qr,Qn[Xn++]=Yr,Qn[Xn++]=Yi,Yi=s;var g=qr;s=Yr;var x=32-ur(g)-1;g&=~(1<<x),d+=1;var S=32-ur(a)+x;if(30<S){var N=x-x%5;S=(g&(1<<N)-1).toString(32),g>>=N,x-=N,qr=1<<32-ur(a)+x|d<<x|g,Yr=S+s}else qr=1<<S|d<<x|g,Yr=s}function Pd(s){s.return!==null&&(Ki(s,1),Rg(s,1,0))}function Ad(s){for(;s===Hl;)Hl=zs[--Bs],zs[Bs]=null,Vl=zs[--Bs],zs[Bs]=null;for(;s===Yi;)Yi=Qn[--Xn],Qn[Xn]=null,Yr=Qn[--Xn],Qn[Xn]=null,qr=Qn[--Xn],Qn[Xn]=null}var zn=null,Bn=null,It=!1,dr=null;function Og(s,a){var d=nr(5,null,null,0);d.elementType="DELETED",d.stateNode=a,d.return=s,a=s.deletions,a===null?(s.deletions=[d],s.flags|=16):a.push(d)}function Mg(s,a){switch(s.tag){case 5:var d=s.type;return a=a.nodeType!==1||d.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(s.stateNode=a,zn=s,Bn=di(a.firstChild),!0):!1;case 6:return a=s.pendingProps===""||a.nodeType!==3?null:a,a!==null?(s.stateNode=a,zn=s,Bn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(d=Yi!==null?{id:qr,overflow:Yr}:null,s.memoizedState={dehydrated:a,treeContext:d,retryLane:1073741824},d=nr(18,null,null,0),d.stateNode=a,d.return=s,s.child=d,zn=s,Bn=null,!0):!1;default:return!1}}function Rd(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Od(s){if(It){var a=Bn;if(a){var d=a;if(!Mg(s,a)){if(Rd(s))throw Error(n(418));a=di(d.nextSibling);var g=zn;a&&Mg(s,a)?Og(g,d):(s.flags=s.flags&-4097|2,It=!1,zn=s)}}else{if(Rd(s))throw Error(n(418));s.flags=s.flags&-4097|2,It=!1,zn=s}}}function Dg(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;zn=s}function ql(s){if(s!==zn)return!1;if(!It)return Dg(s),It=!0,!1;var a;if((a=s.tag!==3)&&!(a=s.tag!==5)&&(a=s.type,a=a!=="head"&&a!=="body"&&!_d(s.type,s.memoizedProps)),a&&(a=Bn)){if(Rd(s))throw Lg(),Error(n(418));for(;a;)Og(s,a),a=di(a.nextSibling)}if(Dg(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8){var d=s.data;if(d==="/$"){if(a===0){Bn=di(s.nextSibling);break e}a--}else d!=="$"&&d!=="$!"&&d!=="$?"||a++}s=s.nextSibling}Bn=null}}else Bn=zn?di(s.stateNode.nextSibling):null;return!0}function Lg(){for(var s=Bn;s;)s=di(s.nextSibling)}function Us(){Bn=zn=null,It=!1}function Md(s){dr===null?dr=[s]:dr.push(s)}var cE=I.ReactCurrentBatchConfig;function da(s,a,d){if(s=d.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(n(309));var g=d.stateNode}if(!g)throw Error(n(147,s));var x=g,S=""+s;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===S?a.ref:(a=function(N){var U=x.refs;N===null?delete U[S]:U[S]=N},a._stringRef=S,a)}if(typeof s!="string")throw Error(n(284));if(!d._owner)throw Error(n(290,s))}return s}function Yl(s,a){throw s=Object.prototype.toString.call(a),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s))}function $g(s){var a=s._init;return a(s._payload)}function Fg(s){function a(se,X){if(s){var oe=se.deletions;oe===null?(se.deletions=[X],se.flags|=16):oe.push(X)}}function d(se,X){if(!s)return null;for(;X!==null;)a(se,X),X=X.sibling;return null}function g(se,X){for(se=new Map;X!==null;)X.key!==null?se.set(X.key,X):se.set(X.index,X),X=X.sibling;return se}function x(se,X){return se=ki(se,X),se.index=0,se.sibling=null,se}function S(se,X,oe){return se.index=oe,s?(oe=se.alternate,oe!==null?(oe=oe.index,oe<X?(se.flags|=2,X):oe):(se.flags|=2,X)):(se.flags|=1048576,X)}function N(se){return s&&se.alternate===null&&(se.flags|=2),se}function U(se,X,oe,Ce){return X===null||X.tag!==6?(X=jf(oe,se.mode,Ce),X.return=se,X):(X=x(X,oe),X.return=se,X)}function K(se,X,oe,Ce){var Be=oe.type;return Be===B?we(se,X,oe.props.children,Ce,oe.key):X!==null&&(X.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===ie&&$g(Be)===X.type)?(Ce=x(X,oe.props),Ce.ref=da(se,X,oe),Ce.return=se,Ce):(Ce=yu(oe.type,oe.key,oe.props,null,se.mode,Ce),Ce.ref=da(se,X,oe),Ce.return=se,Ce)}function ce(se,X,oe,Ce){return X===null||X.tag!==4||X.stateNode.containerInfo!==oe.containerInfo||X.stateNode.implementation!==oe.implementation?(X=Nf(oe,se.mode,Ce),X.return=se,X):(X=x(X,oe.children||[]),X.return=se,X)}function we(se,X,oe,Ce,Be){return X===null||X.tag!==7?(X=ns(oe,se.mode,Ce,Be),X.return=se,X):(X=x(X,oe),X.return=se,X)}function ke(se,X,oe){if(typeof X=="string"&&X!==""||typeof X=="number")return X=jf(""+X,se.mode,oe),X.return=se,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case M:return oe=yu(X.type,X.key,X.props,null,se.mode,oe),oe.ref=da(se,null,X),oe.return=se,oe;case A:return X=Nf(X,se.mode,oe),X.return=se,X;case ie:var Ce=X._init;return ke(se,Ce(X._payload),oe)}if(G(X)||Q(X))return X=ns(X,se.mode,oe,null),X.return=se,X;Yl(se,X)}return null}function xe(se,X,oe,Ce){var Be=X!==null?X.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number")return Be!==null?null:U(se,X,""+oe,Ce);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case M:return oe.key===Be?K(se,X,oe,Ce):null;case A:return oe.key===Be?ce(se,X,oe,Ce):null;case ie:return Be=oe._init,xe(se,X,Be(oe._payload),Ce)}if(G(oe)||Q(oe))return Be!==null?null:we(se,X,oe,Ce,null);Yl(se,oe)}return null}function Me(se,X,oe,Ce,Be){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number")return se=se.get(oe)||null,U(X,se,""+Ce,Be);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case M:return se=se.get(Ce.key===null?oe:Ce.key)||null,K(X,se,Ce,Be);case A:return se=se.get(Ce.key===null?oe:Ce.key)||null,ce(X,se,Ce,Be);case ie:var qe=Ce._init;return Me(se,X,oe,qe(Ce._payload),Be)}if(G(Ce)||Q(Ce))return se=se.get(oe)||null,we(X,se,Ce,Be,null);Yl(X,Ce)}return null}function $e(se,X,oe,Ce){for(var Be=null,qe=null,Ye=X,et=X=0,en=null;Ye!==null&&et<oe.length;et++){Ye.index>et?(en=Ye,Ye=null):en=Ye.sibling;var pt=xe(se,Ye,oe[et],Ce);if(pt===null){Ye===null&&(Ye=en);break}s&&Ye&&pt.alternate===null&&a(se,Ye),X=S(pt,X,et),qe===null?Be=pt:qe.sibling=pt,qe=pt,Ye=en}if(et===oe.length)return d(se,Ye),It&&Ki(se,et),Be;if(Ye===null){for(;et<oe.length;et++)Ye=ke(se,oe[et],Ce),Ye!==null&&(X=S(Ye,X,et),qe===null?Be=Ye:qe.sibling=Ye,qe=Ye);return It&&Ki(se,et),Be}for(Ye=g(se,Ye);et<oe.length;et++)en=Me(Ye,se,et,oe[et],Ce),en!==null&&(s&&en.alternate!==null&&Ye.delete(en.key===null?et:en.key),X=S(en,X,et),qe===null?Be=en:qe.sibling=en,qe=en);return s&&Ye.forEach(function(Si){return a(se,Si)}),It&&Ki(se,et),Be}function Fe(se,X,oe,Ce){var Be=Q(oe);if(typeof Be!="function")throw Error(n(150));if(oe=Be.call(oe),oe==null)throw Error(n(151));for(var qe=Be=null,Ye=X,et=X=0,en=null,pt=oe.next();Ye!==null&&!pt.done;et++,pt=oe.next()){Ye.index>et?(en=Ye,Ye=null):en=Ye.sibling;var Si=xe(se,Ye,pt.value,Ce);if(Si===null){Ye===null&&(Ye=en);break}s&&Ye&&Si.alternate===null&&a(se,Ye),X=S(Si,X,et),qe===null?Be=Si:qe.sibling=Si,qe=Si,Ye=en}if(pt.done)return d(se,Ye),It&&Ki(se,et),Be;if(Ye===null){for(;!pt.done;et++,pt=oe.next())pt=ke(se,pt.value,Ce),pt!==null&&(X=S(pt,X,et),qe===null?Be=pt:qe.sibling=pt,qe=pt);return It&&Ki(se,et),Be}for(Ye=g(se,Ye);!pt.done;et++,pt=oe.next())pt=Me(Ye,se,et,pt.value,Ce),pt!==null&&(s&&pt.alternate!==null&&Ye.delete(pt.key===null?et:pt.key),X=S(pt,X,et),qe===null?Be=pt:qe.sibling=pt,qe=pt);return s&&Ye.forEach(function(WE){return a(se,WE)}),It&&Ki(se,et),Be}function Lt(se,X,oe,Ce){if(typeof oe=="object"&&oe!==null&&oe.type===B&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case M:e:{for(var Be=oe.key,qe=X;qe!==null;){if(qe.key===Be){if(Be=oe.type,Be===B){if(qe.tag===7){d(se,qe.sibling),X=x(qe,oe.props.children),X.return=se,se=X;break e}}else if(qe.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===ie&&$g(Be)===qe.type){d(se,qe.sibling),X=x(qe,oe.props),X.ref=da(se,qe,oe),X.return=se,se=X;break e}d(se,qe);break}else a(se,qe);qe=qe.sibling}oe.type===B?(X=ns(oe.props.children,se.mode,Ce,oe.key),X.return=se,se=X):(Ce=yu(oe.type,oe.key,oe.props,null,se.mode,Ce),Ce.ref=da(se,X,oe),Ce.return=se,se=Ce)}return N(se);case A:e:{for(qe=oe.key;X!==null;){if(X.key===qe)if(X.tag===4&&X.stateNode.containerInfo===oe.containerInfo&&X.stateNode.implementation===oe.implementation){d(se,X.sibling),X=x(X,oe.children||[]),X.return=se,se=X;break e}else{d(se,X);break}else a(se,X);X=X.sibling}X=Nf(oe,se.mode,Ce),X.return=se,se=X}return N(se);case ie:return qe=oe._init,Lt(se,X,qe(oe._payload),Ce)}if(G(oe))return $e(se,X,oe,Ce);if(Q(oe))return Fe(se,X,oe,Ce);Yl(se,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"?(oe=""+oe,X!==null&&X.tag===6?(d(se,X.sibling),X=x(X,oe),X.return=se,se=X):(d(se,X),X=jf(oe,se.mode,Ce),X.return=se,se=X),N(se)):d(se,X)}return Lt}var Ws=Fg(!0),zg=Fg(!1),Kl=fi(null),Gl=null,Hs=null,Dd=null;function Ld(){Dd=Hs=Gl=null}function $d(s){var a=Kl.current;Nt(Kl),s._currentValue=a}function Fd(s,a,d){for(;s!==null;){var g=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,g!==null&&(g.childLanes|=a)):g!==null&&(g.childLanes&a)!==a&&(g.childLanes|=a),s===d)break;s=s.return}}function Vs(s,a){Gl=s,Dd=Hs=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&a)!==0&&(Nn=!0),s.firstContext=null)}function Zn(s){var a=s._currentValue;if(Dd!==s)if(s={context:s,memoizedValue:a,next:null},Hs===null){if(Gl===null)throw Error(n(308));Hs=s,Gl.dependencies={lanes:0,firstContext:s}}else Hs=Hs.next=s;return a}var Gi=null;function zd(s){Gi===null?Gi=[s]:Gi.push(s)}function Bg(s,a,d,g){var x=a.interleaved;return x===null?(d.next=d,zd(a)):(d.next=x.next,x.next=d),a.interleaved=d,Kr(s,g)}function Kr(s,a){s.lanes|=a;var d=s.alternate;for(d!==null&&(d.lanes|=a),d=s,s=s.return;s!==null;)s.childLanes|=a,d=s.alternate,d!==null&&(d.childLanes|=a),d=s,s=s.return;return d.tag===3?d.stateNode:null}var mi=!1;function Bd(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ug(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Gr(s,a){return{eventTime:s,lane:a,tag:0,payload:null,callback:null,next:null}}function gi(s,a,d){var g=s.updateQueue;if(g===null)return null;if(g=g.shared,(ht&2)!==0){var x=g.pending;return x===null?a.next=a:(a.next=x.next,x.next=a),g.pending=a,Kr(s,d)}return x=g.interleaved,x===null?(a.next=a,zd(g)):(a.next=x.next,x.next=a),g.interleaved=a,Kr(s,d)}function Jl(s,a,d){if(a=a.updateQueue,a!==null&&(a=a.shared,(d&4194240)!==0)){var g=a.lanes;g&=s.pendingLanes,d|=g,a.lanes=d,td(s,d)}}function Wg(s,a){var d=s.updateQueue,g=s.alternate;if(g!==null&&(g=g.updateQueue,d===g)){var x=null,S=null;if(d=d.firstBaseUpdate,d!==null){do{var N={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};S===null?x=S=N:S=S.next=N,d=d.next}while(d!==null);S===null?x=S=a:S=S.next=a}else x=S=a;d={baseState:g.baseState,firstBaseUpdate:x,lastBaseUpdate:S,shared:g.shared,effects:g.effects},s.updateQueue=d;return}s=d.lastBaseUpdate,s===null?d.firstBaseUpdate=a:s.next=a,d.lastBaseUpdate=a}function Ql(s,a,d,g){var x=s.updateQueue;mi=!1;var S=x.firstBaseUpdate,N=x.lastBaseUpdate,U=x.shared.pending;if(U!==null){x.shared.pending=null;var K=U,ce=K.next;K.next=null,N===null?S=ce:N.next=ce,N=K;var we=s.alternate;we!==null&&(we=we.updateQueue,U=we.lastBaseUpdate,U!==N&&(U===null?we.firstBaseUpdate=ce:U.next=ce,we.lastBaseUpdate=K))}if(S!==null){var ke=x.baseState;N=0,we=ce=K=null,U=S;do{var xe=U.lane,Me=U.eventTime;if((g&xe)===xe){we!==null&&(we=we.next={eventTime:Me,lane:0,tag:U.tag,payload:U.payload,callback:U.callback,next:null});e:{var $e=s,Fe=U;switch(xe=a,Me=d,Fe.tag){case 1:if($e=Fe.payload,typeof $e=="function"){ke=$e.call(Me,ke,xe);break e}ke=$e;break e;case 3:$e.flags=$e.flags&-65537|128;case 0:if($e=Fe.payload,xe=typeof $e=="function"?$e.call(Me,ke,xe):$e,xe==null)break e;ke=T({},ke,xe);break e;case 2:mi=!0}}U.callback!==null&&U.lane!==0&&(s.flags|=64,xe=x.effects,xe===null?x.effects=[U]:xe.push(U))}else Me={eventTime:Me,lane:xe,tag:U.tag,payload:U.payload,callback:U.callback,next:null},we===null?(ce=we=Me,K=ke):we=we.next=Me,N|=xe;if(U=U.next,U===null){if(U=x.shared.pending,U===null)break;xe=U,U=xe.next,xe.next=null,x.lastBaseUpdate=xe,x.shared.pending=null}}while(!0);if(we===null&&(K=ke),x.baseState=K,x.firstBaseUpdate=ce,x.lastBaseUpdate=we,a=x.shared.interleaved,a!==null){x=a;do N|=x.lane,x=x.next;while(x!==a)}else S===null&&(x.shared.lanes=0);Xi|=N,s.lanes=N,s.memoizedState=ke}}function Hg(s,a,d){if(s=a.effects,a.effects=null,s!==null)for(a=0;a<s.length;a++){var g=s[a],x=g.callback;if(x!==null){if(g.callback=null,g=d,typeof x!="function")throw Error(n(191,x));x.call(g)}}}var fa={},Nr=fi(fa),ha=fi(fa),pa=fi(fa);function Ji(s){if(s===fa)throw Error(n(174));return s}function Ud(s,a){switch(Et(pa,a),Et(ha,s),Et(Nr,fa),s=a.nodeType,s){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:q(null,"");break;default:s=s===8?a.parentNode:a,a=s.namespaceURI||null,s=s.tagName,a=q(a,s)}Nt(Nr),Et(Nr,a)}function qs(){Nt(Nr),Nt(ha),Nt(pa)}function Vg(s){Ji(pa.current);var a=Ji(Nr.current),d=q(a,s.type);a!==d&&(Et(ha,s),Et(Nr,d))}function Wd(s){ha.current===s&&(Nt(Nr),Nt(ha))}var Pt=fi(0);function Xl(s){for(var a=s;a!==null;){if(a.tag===13){var d=a.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Hd=[];function Vd(){for(var s=0;s<Hd.length;s++)Hd[s]._workInProgressVersionPrimary=null;Hd.length=0}var Zl=I.ReactCurrentDispatcher,qd=I.ReactCurrentBatchConfig,Qi=0,At=null,Yt=null,Xt=null,eu=!1,ma=!1,ga=0,dE=0;function dn(){throw Error(n(321))}function Yd(s,a){if(a===null)return!1;for(var d=0;d<a.length&&d<s.length;d++)if(!cr(s[d],a[d]))return!1;return!0}function Kd(s,a,d,g,x,S){if(Qi=S,At=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Zl.current=s===null||s.memoizedState===null?mE:gE,s=d(g,x),ma){S=0;do{if(ma=!1,ga=0,25<=S)throw Error(n(301));S+=1,Xt=Yt=null,a.updateQueue=null,Zl.current=yE,s=d(g,x)}while(ma)}if(Zl.current=ru,a=Yt!==null&&Yt.next!==null,Qi=0,Xt=Yt=At=null,eu=!1,a)throw Error(n(300));return s}function Gd(){var s=ga!==0;return ga=0,s}function Tr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xt===null?At.memoizedState=Xt=s:Xt=Xt.next=s,Xt}function er(){if(Yt===null){var s=At.alternate;s=s!==null?s.memoizedState:null}else s=Yt.next;var a=Xt===null?At.memoizedState:Xt.next;if(a!==null)Xt=a,Yt=s;else{if(s===null)throw Error(n(310));Yt=s,s={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},Xt===null?At.memoizedState=Xt=s:Xt=Xt.next=s}return Xt}function ya(s,a){return typeof a=="function"?a(s):a}function Jd(s){var a=er(),d=a.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=s;var g=Yt,x=g.baseQueue,S=d.pending;if(S!==null){if(x!==null){var N=x.next;x.next=S.next,S.next=N}g.baseQueue=x=S,d.pending=null}if(x!==null){S=x.next,g=g.baseState;var U=N=null,K=null,ce=S;do{var we=ce.lane;if((Qi&we)===we)K!==null&&(K=K.next={lane:0,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null}),g=ce.hasEagerState?ce.eagerState:s(g,ce.action);else{var ke={lane:we,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null};K===null?(U=K=ke,N=g):K=K.next=ke,At.lanes|=we,Xi|=we}ce=ce.next}while(ce!==null&&ce!==S);K===null?N=g:K.next=U,cr(g,a.memoizedState)||(Nn=!0),a.memoizedState=g,a.baseState=N,a.baseQueue=K,d.lastRenderedState=g}if(s=d.interleaved,s!==null){x=s;do S=x.lane,At.lanes|=S,Xi|=S,x=x.next;while(x!==s)}else x===null&&(d.lanes=0);return[a.memoizedState,d.dispatch]}function Qd(s){var a=er(),d=a.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=s;var g=d.dispatch,x=d.pending,S=a.memoizedState;if(x!==null){d.pending=null;var N=x=x.next;do S=s(S,N.action),N=N.next;while(N!==x);cr(S,a.memoizedState)||(Nn=!0),a.memoizedState=S,a.baseQueue===null&&(a.baseState=S),d.lastRenderedState=S}return[S,g]}function qg(){}function Yg(s,a){var d=At,g=er(),x=a(),S=!cr(g.memoizedState,x);if(S&&(g.memoizedState=x,Nn=!0),g=g.queue,Xd(Jg.bind(null,d,g,s),[s]),g.getSnapshot!==a||S||Xt!==null&&Xt.memoizedState.tag&1){if(d.flags|=2048,va(9,Gg.bind(null,d,g,x,a),void 0,null),Zt===null)throw Error(n(349));(Qi&30)!==0||Kg(d,a,x)}return x}function Kg(s,a,d){s.flags|=16384,s={getSnapshot:a,value:d},a=At.updateQueue,a===null?(a={lastEffect:null,stores:null},At.updateQueue=a,a.stores=[s]):(d=a.stores,d===null?a.stores=[s]:d.push(s))}function Gg(s,a,d,g){a.value=d,a.getSnapshot=g,Qg(a)&&Xg(s)}function Jg(s,a,d){return d(function(){Qg(a)&&Xg(s)})}function Qg(s){var a=s.getSnapshot;s=s.value;try{var d=a();return!cr(s,d)}catch{return!0}}function Xg(s){var a=Kr(s,1);a!==null&&mr(a,s,1,-1)}function Zg(s){var a=Tr();return typeof s=="function"&&(s=s()),a.memoizedState=a.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:s},a.queue=s,s=s.dispatch=pE.bind(null,At,s),[a.memoizedState,s]}function va(s,a,d,g){return s={tag:s,create:a,destroy:d,deps:g,next:null},a=At.updateQueue,a===null?(a={lastEffect:null,stores:null},At.updateQueue=a,a.lastEffect=s.next=s):(d=a.lastEffect,d===null?a.lastEffect=s.next=s:(g=d.next,d.next=s,s.next=g,a.lastEffect=s)),s}function ey(){return er().memoizedState}function tu(s,a,d,g){var x=Tr();At.flags|=s,x.memoizedState=va(1|a,d,void 0,g===void 0?null:g)}function nu(s,a,d,g){var x=er();g=g===void 0?null:g;var S=void 0;if(Yt!==null){var N=Yt.memoizedState;if(S=N.destroy,g!==null&&Yd(g,N.deps)){x.memoizedState=va(a,d,S,g);return}}At.flags|=s,x.memoizedState=va(1|a,d,S,g)}function ty(s,a){return tu(8390656,8,s,a)}function Xd(s,a){return nu(2048,8,s,a)}function ny(s,a){return nu(4,2,s,a)}function ry(s,a){return nu(4,4,s,a)}function iy(s,a){if(typeof a=="function")return s=s(),a(s),function(){a(null)};if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function sy(s,a,d){return d=d!=null?d.concat([s]):null,nu(4,4,iy.bind(null,a,s),d)}function Zd(){}function oy(s,a){var d=er();a=a===void 0?null:a;var g=d.memoizedState;return g!==null&&a!==null&&Yd(a,g[1])?g[0]:(d.memoizedState=[s,a],s)}function ay(s,a){var d=er();a=a===void 0?null:a;var g=d.memoizedState;return g!==null&&a!==null&&Yd(a,g[1])?g[0]:(s=s(),d.memoizedState=[s,a],s)}function ly(s,a,d){return(Qi&21)===0?(s.baseState&&(s.baseState=!1,Nn=!0),s.memoizedState=d):(cr(d,a)||(d=$m(),At.lanes|=d,Xi|=d,s.baseState=!0),a)}function fE(s,a){var d=gt;gt=d!==0&&4>d?d:4,s(!0);var g=qd.transition;qd.transition={};try{s(!1),a()}finally{gt=d,qd.transition=g}}function uy(){return er().memoizedState}function hE(s,a,d){var g=wi(s);if(d={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null},cy(s))dy(a,d);else if(d=Bg(s,a,d,g),d!==null){var x=bn();mr(d,s,g,x),fy(d,a,g)}}function pE(s,a,d){var g=wi(s),x={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null};if(cy(s))dy(a,x);else{var S=s.alternate;if(s.lanes===0&&(S===null||S.lanes===0)&&(S=a.lastRenderedReducer,S!==null))try{var N=a.lastRenderedState,U=S(N,d);if(x.hasEagerState=!0,x.eagerState=U,cr(U,N)){var K=a.interleaved;K===null?(x.next=x,zd(a)):(x.next=K.next,K.next=x),a.interleaved=x;return}}catch{}finally{}d=Bg(s,a,x,g),d!==null&&(x=bn(),mr(d,s,g,x),fy(d,a,g))}}function cy(s){var a=s.alternate;return s===At||a!==null&&a===At}function dy(s,a){ma=eu=!0;var d=s.pending;d===null?a.next=a:(a.next=d.next,d.next=a),s.pending=a}function fy(s,a,d){if((d&4194240)!==0){var g=a.lanes;g&=s.pendingLanes,d|=g,a.lanes=d,td(s,d)}}var ru={readContext:Zn,useCallback:dn,useContext:dn,useEffect:dn,useImperativeHandle:dn,useInsertionEffect:dn,useLayoutEffect:dn,useMemo:dn,useReducer:dn,useRef:dn,useState:dn,useDebugValue:dn,useDeferredValue:dn,useTransition:dn,useMutableSource:dn,useSyncExternalStore:dn,useId:dn,unstable_isNewReconciler:!1},mE={readContext:Zn,useCallback:function(s,a){return Tr().memoizedState=[s,a===void 0?null:a],s},useContext:Zn,useEffect:ty,useImperativeHandle:function(s,a,d){return d=d!=null?d.concat([s]):null,tu(4194308,4,iy.bind(null,a,s),d)},useLayoutEffect:function(s,a){return tu(4194308,4,s,a)},useInsertionEffect:function(s,a){return tu(4,2,s,a)},useMemo:function(s,a){var d=Tr();return a=a===void 0?null:a,s=s(),d.memoizedState=[s,a],s},useReducer:function(s,a,d){var g=Tr();return a=d!==void 0?d(a):a,g.memoizedState=g.baseState=a,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:a},g.queue=s,s=s.dispatch=hE.bind(null,At,s),[g.memoizedState,s]},useRef:function(s){var a=Tr();return s={current:s},a.memoizedState=s},useState:Zg,useDebugValue:Zd,useDeferredValue:function(s){return Tr().memoizedState=s},useTransition:function(){var s=Zg(!1),a=s[0];return s=fE.bind(null,s[1]),Tr().memoizedState=s,[a,s]},useMutableSource:function(){},useSyncExternalStore:function(s,a,d){var g=At,x=Tr();if(It){if(d===void 0)throw Error(n(407));d=d()}else{if(d=a(),Zt===null)throw Error(n(349));(Qi&30)!==0||Kg(g,a,d)}x.memoizedState=d;var S={value:d,getSnapshot:a};return x.queue=S,ty(Jg.bind(null,g,S,s),[s]),g.flags|=2048,va(9,Gg.bind(null,g,S,d,a),void 0,null),d},useId:function(){var s=Tr(),a=Zt.identifierPrefix;if(It){var d=Yr,g=qr;d=(g&~(1<<32-ur(g)-1)).toString(32)+d,a=":"+a+"R"+d,d=ga++,0<d&&(a+="H"+d.toString(32)),a+=":"}else d=dE++,a=":"+a+"r"+d.toString(32)+":";return s.memoizedState=a},unstable_isNewReconciler:!1},gE={readContext:Zn,useCallback:oy,useContext:Zn,useEffect:Xd,useImperativeHandle:sy,useInsertionEffect:ny,useLayoutEffect:ry,useMemo:ay,useReducer:Jd,useRef:ey,useState:function(){return Jd(ya)},useDebugValue:Zd,useDeferredValue:function(s){var a=er();return ly(a,Yt.memoizedState,s)},useTransition:function(){var s=Jd(ya)[0],a=er().memoizedState;return[s,a]},useMutableSource:qg,useSyncExternalStore:Yg,useId:uy,unstable_isNewReconciler:!1},yE={readContext:Zn,useCallback:oy,useContext:Zn,useEffect:Xd,useImperativeHandle:sy,useInsertionEffect:ny,useLayoutEffect:ry,useMemo:ay,useReducer:Qd,useRef:ey,useState:function(){return Qd(ya)},useDebugValue:Zd,useDeferredValue:function(s){var a=er();return Yt===null?a.memoizedState=s:ly(a,Yt.memoizedState,s)},useTransition:function(){var s=Qd(ya)[0],a=er().memoizedState;return[s,a]},useMutableSource:qg,useSyncExternalStore:Yg,useId:uy,unstable_isNewReconciler:!1};function fr(s,a){if(s&&s.defaultProps){a=T({},a),s=s.defaultProps;for(var d in s)a[d]===void 0&&(a[d]=s[d]);return a}return a}function ef(s,a,d,g){a=s.memoizedState,d=d(g,a),d=d==null?a:T({},a,d),s.memoizedState=d,s.lanes===0&&(s.updateQueue.baseState=d)}var iu={isMounted:function(s){return(s=s._reactInternals)?Hi(s)===s:!1},enqueueSetState:function(s,a,d){s=s._reactInternals;var g=bn(),x=wi(s),S=Gr(g,x);S.payload=a,d!=null&&(S.callback=d),a=gi(s,S,x),a!==null&&(mr(a,s,x,g),Jl(a,s,x))},enqueueReplaceState:function(s,a,d){s=s._reactInternals;var g=bn(),x=wi(s),S=Gr(g,x);S.tag=1,S.payload=a,d!=null&&(S.callback=d),a=gi(s,S,x),a!==null&&(mr(a,s,x,g),Jl(a,s,x))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var d=bn(),g=wi(s),x=Gr(d,g);x.tag=2,a!=null&&(x.callback=a),a=gi(s,x,g),a!==null&&(mr(a,s,g,d),Jl(a,s,g))}};function hy(s,a,d,g,x,S,N){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(g,S,N):a.prototype&&a.prototype.isPureReactComponent?!ia(d,g)||!ia(x,S):!0}function py(s,a,d){var g=!1,x=hi,S=a.contextType;return typeof S=="object"&&S!==null?S=Zn(S):(x=jn(a)?qi:cn.current,g=a.contextTypes,S=(g=g!=null)?Fs(s,x):hi),a=new a(d,S),s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=iu,s.stateNode=a,a._reactInternals=s,g&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=x,s.__reactInternalMemoizedMaskedChildContext=S),a}function my(s,a,d,g){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(d,g),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(d,g),a.state!==s&&iu.enqueueReplaceState(a,a.state,null)}function tf(s,a,d,g){var x=s.stateNode;x.props=d,x.state=s.memoizedState,x.refs={},Bd(s);var S=a.contextType;typeof S=="object"&&S!==null?x.context=Zn(S):(S=jn(a)?qi:cn.current,x.context=Fs(s,S)),x.state=s.memoizedState,S=a.getDerivedStateFromProps,typeof S=="function"&&(ef(s,a,S,d),x.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(a=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),a!==x.state&&iu.enqueueReplaceState(x,x.state,null),Ql(s,d,x,g),x.state=s.memoizedState),typeof x.componentDidMount=="function"&&(s.flags|=4194308)}function Ys(s,a){try{var d="",g=a;do d+=he(g),g=g.return;while(g);var x=d}catch(S){x=`
Error generating stack: `+S.message+`
`+S.stack}return{value:s,source:a,stack:x,digest:null}}function nf(s,a,d){return{value:s,source:null,stack:d??null,digest:a??null}}function rf(s,a){try{console.error(a.value)}catch(d){setTimeout(function(){throw d})}}var vE=typeof WeakMap=="function"?WeakMap:Map;function gy(s,a,d){d=Gr(-1,d),d.tag=3,d.payload={element:null};var g=a.value;return d.callback=function(){du||(du=!0,xf=g),rf(s,a)},d}function yy(s,a,d){d=Gr(-1,d),d.tag=3;var g=s.type.getDerivedStateFromError;if(typeof g=="function"){var x=a.value;d.payload=function(){return g(x)},d.callback=function(){rf(s,a)}}var S=s.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(d.callback=function(){rf(s,a),typeof g!="function"&&(vi===null?vi=new Set([this]):vi.add(this));var N=a.stack;this.componentDidCatch(a.value,{componentStack:N!==null?N:""})}),d}function vy(s,a,d){var g=s.pingCache;if(g===null){g=s.pingCache=new vE;var x=new Set;g.set(a,x)}else x=g.get(a),x===void 0&&(x=new Set,g.set(a,x));x.has(d)||(x.add(d),s=AE.bind(null,s,a,d),a.then(s,s))}function xy(s){do{var a;if((a=s.tag===13)&&(a=s.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return s;s=s.return}while(s!==null);return null}function wy(s,a,d,g,x){return(s.mode&1)===0?(s===a?s.flags|=65536:(s.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(a=Gr(-1,1),a.tag=2,gi(d,a,1))),d.lanes|=1),s):(s.flags|=65536,s.lanes=x,s)}var xE=I.ReactCurrentOwner,Nn=!1;function wn(s,a,d,g){a.child=s===null?zg(a,null,d,g):Ws(a,s.child,d,g)}function by(s,a,d,g,x){d=d.render;var S=a.ref;return Vs(a,x),g=Kd(s,a,d,g,S,x),d=Gd(),s!==null&&!Nn?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~x,Jr(s,a,x)):(It&&d&&Pd(a),a.flags|=1,wn(s,a,g,x),a.child)}function ky(s,a,d,g,x){if(s===null){var S=d.type;return typeof S=="function"&&!Cf(S)&&S.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(a.tag=15,a.type=S,Sy(s,a,S,g,x)):(s=yu(d.type,null,g,a,a.mode,x),s.ref=a.ref,s.return=a,a.child=s)}if(S=s.child,(s.lanes&x)===0){var N=S.memoizedProps;if(d=d.compare,d=d!==null?d:ia,d(N,g)&&s.ref===a.ref)return Jr(s,a,x)}return a.flags|=1,s=ki(S,g),s.ref=a.ref,s.return=a,a.child=s}function Sy(s,a,d,g,x){if(s!==null){var S=s.memoizedProps;if(ia(S,g)&&s.ref===a.ref)if(Nn=!1,a.pendingProps=g=S,(s.lanes&x)!==0)(s.flags&131072)!==0&&(Nn=!0);else return a.lanes=s.lanes,Jr(s,a,x)}return sf(s,a,d,g,x)}function Ey(s,a,d){var g=a.pendingProps,x=g.children,S=s!==null?s.memoizedState:null;if(g.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},Et(Gs,Un),Un|=d;else{if((d&1073741824)===0)return s=S!==null?S.baseLanes|d:d,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:s,cachePool:null,transitions:null},a.updateQueue=null,Et(Gs,Un),Un|=s,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=S!==null?S.baseLanes:d,Et(Gs,Un),Un|=g}else S!==null?(g=S.baseLanes|d,a.memoizedState=null):g=d,Et(Gs,Un),Un|=g;return wn(s,a,x,d),a.child}function _y(s,a){var d=a.ref;(s===null&&d!==null||s!==null&&s.ref!==d)&&(a.flags|=512,a.flags|=2097152)}function sf(s,a,d,g,x){var S=jn(d)?qi:cn.current;return S=Fs(a,S),Vs(a,x),d=Kd(s,a,d,g,S,x),g=Gd(),s!==null&&!Nn?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~x,Jr(s,a,x)):(It&&g&&Pd(a),a.flags|=1,wn(s,a,d,x),a.child)}function Cy(s,a,d,g,x){if(jn(d)){var S=!0;Ul(a)}else S=!1;if(Vs(a,x),a.stateNode===null)ou(s,a),py(a,d,g),tf(a,d,g,x),g=!0;else if(s===null){var N=a.stateNode,U=a.memoizedProps;N.props=U;var K=N.context,ce=d.contextType;typeof ce=="object"&&ce!==null?ce=Zn(ce):(ce=jn(d)?qi:cn.current,ce=Fs(a,ce));var we=d.getDerivedStateFromProps,ke=typeof we=="function"||typeof N.getSnapshotBeforeUpdate=="function";ke||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(U!==g||K!==ce)&&my(a,N,g,ce),mi=!1;var xe=a.memoizedState;N.state=xe,Ql(a,g,N,x),K=a.memoizedState,U!==g||xe!==K||Cn.current||mi?(typeof we=="function"&&(ef(a,d,we,g),K=a.memoizedState),(U=mi||hy(a,d,U,g,xe,K,ce))?(ke||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(a.flags|=4194308)):(typeof N.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=g,a.memoizedState=K),N.props=g,N.state=K,N.context=ce,g=U):(typeof N.componentDidMount=="function"&&(a.flags|=4194308),g=!1)}else{N=a.stateNode,Ug(s,a),U=a.memoizedProps,ce=a.type===a.elementType?U:fr(a.type,U),N.props=ce,ke=a.pendingProps,xe=N.context,K=d.contextType,typeof K=="object"&&K!==null?K=Zn(K):(K=jn(d)?qi:cn.current,K=Fs(a,K));var Me=d.getDerivedStateFromProps;(we=typeof Me=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(U!==ke||xe!==K)&&my(a,N,g,K),mi=!1,xe=a.memoizedState,N.state=xe,Ql(a,g,N,x);var $e=a.memoizedState;U!==ke||xe!==$e||Cn.current||mi?(typeof Me=="function"&&(ef(a,d,Me,g),$e=a.memoizedState),(ce=mi||hy(a,d,ce,g,xe,$e,K)||!1)?(we||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(g,$e,K),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(g,$e,K)),typeof N.componentDidUpdate=="function"&&(a.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof N.componentDidUpdate!="function"||U===s.memoizedProps&&xe===s.memoizedState||(a.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||U===s.memoizedProps&&xe===s.memoizedState||(a.flags|=1024),a.memoizedProps=g,a.memoizedState=$e),N.props=g,N.state=$e,N.context=K,g=ce):(typeof N.componentDidUpdate!="function"||U===s.memoizedProps&&xe===s.memoizedState||(a.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||U===s.memoizedProps&&xe===s.memoizedState||(a.flags|=1024),g=!1)}return of(s,a,d,g,S,x)}function of(s,a,d,g,x,S){_y(s,a);var N=(a.flags&128)!==0;if(!g&&!N)return x&&Pg(a,d,!1),Jr(s,a,S);g=a.stateNode,xE.current=a;var U=N&&typeof d.getDerivedStateFromError!="function"?null:g.render();return a.flags|=1,s!==null&&N?(a.child=Ws(a,s.child,null,S),a.child=Ws(a,null,U,S)):wn(s,a,U,S),a.memoizedState=g.state,x&&Pg(a,d,!0),a.child}function jy(s){var a=s.stateNode;a.pendingContext?Tg(s,a.pendingContext,a.pendingContext!==a.context):a.context&&Tg(s,a.context,!1),Ud(s,a.containerInfo)}function Ny(s,a,d,g,x){return Us(),Md(x),a.flags|=256,wn(s,a,d,g),a.child}var af={dehydrated:null,treeContext:null,retryLane:0};function lf(s){return{baseLanes:s,cachePool:null,transitions:null}}function Ty(s,a,d){var g=a.pendingProps,x=Pt.current,S=!1,N=(a.flags&128)!==0,U;if((U=N)||(U=s!==null&&s.memoizedState===null?!1:(x&2)!==0),U?(S=!0,a.flags&=-129):(s===null||s.memoizedState!==null)&&(x|=1),Et(Pt,x&1),s===null)return Od(a),s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((a.mode&1)===0?a.lanes=1:s.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(N=g.children,s=g.fallback,S?(g=a.mode,S=a.child,N={mode:"hidden",children:N},(g&1)===0&&S!==null?(S.childLanes=0,S.pendingProps=N):S=vu(N,g,0,null),s=ns(s,g,d,null),S.return=a,s.return=a,S.sibling=s,a.child=S,a.child.memoizedState=lf(d),a.memoizedState=af,s):uf(a,N));if(x=s.memoizedState,x!==null&&(U=x.dehydrated,U!==null))return wE(s,a,N,g,U,x,d);if(S){S=g.fallback,N=a.mode,x=s.child,U=x.sibling;var K={mode:"hidden",children:g.children};return(N&1)===0&&a.child!==x?(g=a.child,g.childLanes=0,g.pendingProps=K,a.deletions=null):(g=ki(x,K),g.subtreeFlags=x.subtreeFlags&14680064),U!==null?S=ki(U,S):(S=ns(S,N,d,null),S.flags|=2),S.return=a,g.return=a,g.sibling=S,a.child=g,g=S,S=a.child,N=s.child.memoizedState,N=N===null?lf(d):{baseLanes:N.baseLanes|d,cachePool:null,transitions:N.transitions},S.memoizedState=N,S.childLanes=s.childLanes&~d,a.memoizedState=af,g}return S=s.child,s=S.sibling,g=ki(S,{mode:"visible",children:g.children}),(a.mode&1)===0&&(g.lanes=d),g.return=a,g.sibling=null,s!==null&&(d=a.deletions,d===null?(a.deletions=[s],a.flags|=16):d.push(s)),a.child=g,a.memoizedState=null,g}function uf(s,a){return a=vu({mode:"visible",children:a},s.mode,0,null),a.return=s,s.child=a}function su(s,a,d,g){return g!==null&&Md(g),Ws(a,s.child,null,d),s=uf(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function wE(s,a,d,g,x,S,N){if(d)return a.flags&256?(a.flags&=-257,g=nf(Error(n(422))),su(s,a,N,g)):a.memoizedState!==null?(a.child=s.child,a.flags|=128,null):(S=g.fallback,x=a.mode,g=vu({mode:"visible",children:g.children},x,0,null),S=ns(S,x,N,null),S.flags|=2,g.return=a,S.return=a,g.sibling=S,a.child=g,(a.mode&1)!==0&&Ws(a,s.child,null,N),a.child.memoizedState=lf(N),a.memoizedState=af,S);if((a.mode&1)===0)return su(s,a,N,null);if(x.data==="$!"){if(g=x.nextSibling&&x.nextSibling.dataset,g)var U=g.dgst;return g=U,S=Error(n(419)),g=nf(S,g,void 0),su(s,a,N,g)}if(U=(N&s.childLanes)!==0,Nn||U){if(g=Zt,g!==null){switch(N&-N){case 4:x=2;break;case 16:x=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:x=32;break;case 536870912:x=268435456;break;default:x=0}x=(x&(g.suspendedLanes|N))!==0?0:x,x!==0&&x!==S.retryLane&&(S.retryLane=x,Kr(s,x),mr(g,s,x,-1))}return _f(),g=nf(Error(n(421))),su(s,a,N,g)}return x.data==="$?"?(a.flags|=128,a.child=s.child,a=RE.bind(null,s),x._reactRetry=a,null):(s=S.treeContext,Bn=di(x.nextSibling),zn=a,It=!0,dr=null,s!==null&&(Qn[Xn++]=qr,Qn[Xn++]=Yr,Qn[Xn++]=Yi,qr=s.id,Yr=s.overflow,Yi=a),a=uf(a,g.children),a.flags|=4096,a)}function Iy(s,a,d){s.lanes|=a;var g=s.alternate;g!==null&&(g.lanes|=a),Fd(s.return,a,d)}function cf(s,a,d,g,x){var S=s.memoizedState;S===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:g,tail:d,tailMode:x}:(S.isBackwards=a,S.rendering=null,S.renderingStartTime=0,S.last=g,S.tail=d,S.tailMode=x)}function Py(s,a,d){var g=a.pendingProps,x=g.revealOrder,S=g.tail;if(wn(s,a,g.children,d),g=Pt.current,(g&2)!==0)g=g&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Iy(s,d,a);else if(s.tag===19)Iy(s,d,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}g&=1}if(Et(Pt,g),(a.mode&1)===0)a.memoizedState=null;else switch(x){case"forwards":for(d=a.child,x=null;d!==null;)s=d.alternate,s!==null&&Xl(s)===null&&(x=d),d=d.sibling;d=x,d===null?(x=a.child,a.child=null):(x=d.sibling,d.sibling=null),cf(a,!1,x,d,S);break;case"backwards":for(d=null,x=a.child,a.child=null;x!==null;){if(s=x.alternate,s!==null&&Xl(s)===null){a.child=x;break}s=x.sibling,x.sibling=d,d=x,x=s}cf(a,!0,d,null,S);break;case"together":cf(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function ou(s,a){(a.mode&1)===0&&s!==null&&(s.alternate=null,a.alternate=null,a.flags|=2)}function Jr(s,a,d){if(s!==null&&(a.dependencies=s.dependencies),Xi|=a.lanes,(d&a.childLanes)===0)return null;if(s!==null&&a.child!==s.child)throw Error(n(153));if(a.child!==null){for(s=a.child,d=ki(s,s.pendingProps),a.child=d,d.return=a;s.sibling!==null;)s=s.sibling,d=d.sibling=ki(s,s.pendingProps),d.return=a;d.sibling=null}return a.child}function bE(s,a,d){switch(a.tag){case 3:jy(a),Us();break;case 5:Vg(a);break;case 1:jn(a.type)&&Ul(a);break;case 4:Ud(a,a.stateNode.containerInfo);break;case 10:var g=a.type._context,x=a.memoizedProps.value;Et(Kl,g._currentValue),g._currentValue=x;break;case 13:if(g=a.memoizedState,g!==null)return g.dehydrated!==null?(Et(Pt,Pt.current&1),a.flags|=128,null):(d&a.child.childLanes)!==0?Ty(s,a,d):(Et(Pt,Pt.current&1),s=Jr(s,a,d),s!==null?s.sibling:null);Et(Pt,Pt.current&1);break;case 19:if(g=(d&a.childLanes)!==0,(s.flags&128)!==0){if(g)return Py(s,a,d);a.flags|=128}if(x=a.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),Et(Pt,Pt.current),g)break;return null;case 22:case 23:return a.lanes=0,Ey(s,a,d)}return Jr(s,a,d)}var Ay,df,Ry,Oy;Ay=function(s,a){for(var d=a.child;d!==null;){if(d.tag===5||d.tag===6)s.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},df=function(){},Ry=function(s,a,d,g){var x=s.memoizedProps;if(x!==g){s=a.stateNode,Ji(Nr.current);var S=null;switch(d){case"input":x=We(s,x),g=We(s,g),S=[];break;case"select":x=T({},x,{value:void 0}),g=T({},g,{value:void 0}),S=[];break;case"textarea":x=ye(s,x),g=ye(s,g),S=[];break;default:typeof x.onClick!="function"&&typeof g.onClick=="function"&&(s.onclick=Fl)}De(d,g);var N;d=null;for(ce in x)if(!g.hasOwnProperty(ce)&&x.hasOwnProperty(ce)&&x[ce]!=null)if(ce==="style"){var U=x[ce];for(N in U)U.hasOwnProperty(N)&&(d||(d={}),d[N]="")}else ce!=="dangerouslySetInnerHTML"&&ce!=="children"&&ce!=="suppressContentEditableWarning"&&ce!=="suppressHydrationWarning"&&ce!=="autoFocus"&&(i.hasOwnProperty(ce)?S||(S=[]):(S=S||[]).push(ce,null));for(ce in g){var K=g[ce];if(U=x!=null?x[ce]:void 0,g.hasOwnProperty(ce)&&K!==U&&(K!=null||U!=null))if(ce==="style")if(U){for(N in U)!U.hasOwnProperty(N)||K&&K.hasOwnProperty(N)||(d||(d={}),d[N]="");for(N in K)K.hasOwnProperty(N)&&U[N]!==K[N]&&(d||(d={}),d[N]=K[N])}else d||(S||(S=[]),S.push(ce,d)),d=K;else ce==="dangerouslySetInnerHTML"?(K=K?K.__html:void 0,U=U?U.__html:void 0,K!=null&&U!==K&&(S=S||[]).push(ce,K)):ce==="children"?typeof K!="string"&&typeof K!="number"||(S=S||[]).push(ce,""+K):ce!=="suppressContentEditableWarning"&&ce!=="suppressHydrationWarning"&&(i.hasOwnProperty(ce)?(K!=null&&ce==="onScroll"&&jt("scroll",s),S||U===K||(S=[])):(S=S||[]).push(ce,K))}d&&(S=S||[]).push("style",d);var ce=S;(a.updateQueue=ce)&&(a.flags|=4)}},Oy=function(s,a,d,g){d!==g&&(a.flags|=4)};function xa(s,a){if(!It)switch(s.tailMode){case"hidden":a=s.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?s.tail=null:d.sibling=null;break;case"collapsed":d=s.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:g.sibling=null}}function fn(s){var a=s.alternate!==null&&s.alternate.child===s.child,d=0,g=0;if(a)for(var x=s.child;x!==null;)d|=x.lanes|x.childLanes,g|=x.subtreeFlags&14680064,g|=x.flags&14680064,x.return=s,x=x.sibling;else for(x=s.child;x!==null;)d|=x.lanes|x.childLanes,g|=x.subtreeFlags,g|=x.flags,x.return=s,x=x.sibling;return s.subtreeFlags|=g,s.childLanes=d,a}function kE(s,a,d){var g=a.pendingProps;switch(Ad(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fn(a),null;case 1:return jn(a.type)&&Bl(),fn(a),null;case 3:return g=a.stateNode,qs(),Nt(Cn),Nt(cn),Vd(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(s===null||s.child===null)&&(ql(a)?a.flags|=4:s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,dr!==null&&(kf(dr),dr=null))),df(s,a),fn(a),null;case 5:Wd(a);var x=Ji(pa.current);if(d=a.type,s!==null&&a.stateNode!=null)Ry(s,a,d,g,x),s.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!g){if(a.stateNode===null)throw Error(n(166));return fn(a),null}if(s=Ji(Nr.current),ql(a)){g=a.stateNode,d=a.type;var S=a.memoizedProps;switch(g[jr]=a,g[ua]=S,s=(a.mode&1)!==0,d){case"dialog":jt("cancel",g),jt("close",g);break;case"iframe":case"object":case"embed":jt("load",g);break;case"video":case"audio":for(x=0;x<oa.length;x++)jt(oa[x],g);break;case"source":jt("error",g);break;case"img":case"image":case"link":jt("error",g),jt("load",g);break;case"details":jt("toggle",g);break;case"input":tt(g,S),jt("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!S.multiple},jt("invalid",g);break;case"textarea":Pe(g,S),jt("invalid",g)}De(d,S),x=null;for(var N in S)if(S.hasOwnProperty(N)){var U=S[N];N==="children"?typeof U=="string"?g.textContent!==U&&(S.suppressHydrationWarning!==!0&&$l(g.textContent,U,s),x=["children",U]):typeof U=="number"&&g.textContent!==""+U&&(S.suppressHydrationWarning!==!0&&$l(g.textContent,U,s),x=["children",""+U]):i.hasOwnProperty(N)&&U!=null&&N==="onScroll"&&jt("scroll",g)}switch(d){case"input":re(g),Qt(g,S,!0);break;case"textarea":re(g),ae(g);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(g.onclick=Fl)}g=x,a.updateQueue=g,g!==null&&(a.flags|=4)}else{N=x.nodeType===9?x:x.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=R(d)),s==="http://www.w3.org/1999/xhtml"?d==="script"?(s=N.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof g.is=="string"?s=N.createElement(d,{is:g.is}):(s=N.createElement(d),d==="select"&&(N=s,g.multiple?N.multiple=!0:g.size&&(N.size=g.size))):s=N.createElementNS(s,d),s[jr]=a,s[ua]=g,Ay(s,a,!1,!1),a.stateNode=s;e:{switch(N=Je(d,g),d){case"dialog":jt("cancel",s),jt("close",s),x=g;break;case"iframe":case"object":case"embed":jt("load",s),x=g;break;case"video":case"audio":for(x=0;x<oa.length;x++)jt(oa[x],s);x=g;break;case"source":jt("error",s),x=g;break;case"img":case"image":case"link":jt("error",s),jt("load",s),x=g;break;case"details":jt("toggle",s),x=g;break;case"input":tt(s,g),x=We(s,g),jt("invalid",s);break;case"option":x=g;break;case"select":s._wrapperState={wasMultiple:!!g.multiple},x=T({},g,{value:void 0}),jt("invalid",s);break;case"textarea":Pe(s,g),x=ye(s,g),jt("invalid",s);break;default:x=g}De(d,x),U=x;for(S in U)if(U.hasOwnProperty(S)){var K=U[S];S==="style"?pe(s,K):S==="dangerouslySetInnerHTML"?(K=K?K.__html:void 0,K!=null&&le(s,K)):S==="children"?typeof K=="string"?(d!=="textarea"||K!=="")&&ee(s,K):typeof K=="number"&&ee(s,""+K):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(i.hasOwnProperty(S)?K!=null&&S==="onScroll"&&jt("scroll",s):K!=null&&j(s,S,K,N))}switch(d){case"input":re(s),Qt(s,g,!1);break;case"textarea":re(s),ae(s);break;case"option":g.value!=null&&s.setAttribute("value",""+je(g.value));break;case"select":s.multiple=!!g.multiple,S=g.value,S!=null?fe(s,!!g.multiple,S,!1):g.defaultValue!=null&&fe(s,!!g.multiple,g.defaultValue,!0);break;default:typeof x.onClick=="function"&&(s.onclick=Fl)}switch(d){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return fn(a),null;case 6:if(s&&a.stateNode!=null)Oy(s,a,s.memoizedProps,g);else{if(typeof g!="string"&&a.stateNode===null)throw Error(n(166));if(d=Ji(pa.current),Ji(Nr.current),ql(a)){if(g=a.stateNode,d=a.memoizedProps,g[jr]=a,(S=g.nodeValue!==d)&&(s=zn,s!==null))switch(s.tag){case 3:$l(g.nodeValue,d,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&$l(g.nodeValue,d,(s.mode&1)!==0)}S&&(a.flags|=4)}else g=(d.nodeType===9?d:d.ownerDocument).createTextNode(g),g[jr]=a,a.stateNode=g}return fn(a),null;case 13:if(Nt(Pt),g=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(It&&Bn!==null&&(a.mode&1)!==0&&(a.flags&128)===0)Lg(),Us(),a.flags|=98560,S=!1;else if(S=ql(a),g!==null&&g.dehydrated!==null){if(s===null){if(!S)throw Error(n(318));if(S=a.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(n(317));S[jr]=a}else Us(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;fn(a),S=!1}else dr!==null&&(kf(dr),dr=null),S=!0;if(!S)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=d,a):(g=g!==null,g!==(s!==null&&s.memoizedState!==null)&&g&&(a.child.flags|=8192,(a.mode&1)!==0&&(s===null||(Pt.current&1)!==0?Kt===0&&(Kt=3):_f())),a.updateQueue!==null&&(a.flags|=4),fn(a),null);case 4:return qs(),df(s,a),s===null&&aa(a.stateNode.containerInfo),fn(a),null;case 10:return $d(a.type._context),fn(a),null;case 17:return jn(a.type)&&Bl(),fn(a),null;case 19:if(Nt(Pt),S=a.memoizedState,S===null)return fn(a),null;if(g=(a.flags&128)!==0,N=S.rendering,N===null)if(g)xa(S,!1);else{if(Kt!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(N=Xl(s),N!==null){for(a.flags|=128,xa(S,!1),g=N.updateQueue,g!==null&&(a.updateQueue=g,a.flags|=4),a.subtreeFlags=0,g=d,d=a.child;d!==null;)S=d,s=g,S.flags&=14680066,N=S.alternate,N===null?(S.childLanes=0,S.lanes=s,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=N.childLanes,S.lanes=N.lanes,S.child=N.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=N.memoizedProps,S.memoizedState=N.memoizedState,S.updateQueue=N.updateQueue,S.type=N.type,s=N.dependencies,S.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),d=d.sibling;return Et(Pt,Pt.current&1|2),a.child}s=s.sibling}S.tail!==null&&Dt()>Js&&(a.flags|=128,g=!0,xa(S,!1),a.lanes=4194304)}else{if(!g)if(s=Xl(N),s!==null){if(a.flags|=128,g=!0,d=s.updateQueue,d!==null&&(a.updateQueue=d,a.flags|=4),xa(S,!0),S.tail===null&&S.tailMode==="hidden"&&!N.alternate&&!It)return fn(a),null}else 2*Dt()-S.renderingStartTime>Js&&d!==1073741824&&(a.flags|=128,g=!0,xa(S,!1),a.lanes=4194304);S.isBackwards?(N.sibling=a.child,a.child=N):(d=S.last,d!==null?d.sibling=N:a.child=N,S.last=N)}return S.tail!==null?(a=S.tail,S.rendering=a,S.tail=a.sibling,S.renderingStartTime=Dt(),a.sibling=null,d=Pt.current,Et(Pt,g?d&1|2:d&1),a):(fn(a),null);case 22:case 23:return Ef(),g=a.memoizedState!==null,s!==null&&s.memoizedState!==null!==g&&(a.flags|=8192),g&&(a.mode&1)!==0?(Un&1073741824)!==0&&(fn(a),a.subtreeFlags&6&&(a.flags|=8192)):fn(a),null;case 24:return null;case 25:return null}throw Error(n(156,a.tag))}function SE(s,a){switch(Ad(a),a.tag){case 1:return jn(a.type)&&Bl(),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return qs(),Nt(Cn),Nt(cn),Vd(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 5:return Wd(a),null;case 13:if(Nt(Pt),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(n(340));Us()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return Nt(Pt),null;case 4:return qs(),null;case 10:return $d(a.type._context),null;case 22:case 23:return Ef(),null;case 24:return null;default:return null}}var au=!1,hn=!1,EE=typeof WeakSet=="function"?WeakSet:Set,Le=null;function Ks(s,a){var d=s.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(g){Ot(s,a,g)}else d.current=null}function ff(s,a,d){try{d()}catch(g){Ot(s,a,g)}}var My=!1;function _E(s,a){if(Sd=jl,s=hg(),md(s)){if("selectionStart"in s)var d={start:s.selectionStart,end:s.selectionEnd};else e:{d=(d=s.ownerDocument)&&d.defaultView||window;var g=d.getSelection&&d.getSelection();if(g&&g.rangeCount!==0){d=g.anchorNode;var x=g.anchorOffset,S=g.focusNode;g=g.focusOffset;try{d.nodeType,S.nodeType}catch{d=null;break e}var N=0,U=-1,K=-1,ce=0,we=0,ke=s,xe=null;t:for(;;){for(var Me;ke!==d||x!==0&&ke.nodeType!==3||(U=N+x),ke!==S||g!==0&&ke.nodeType!==3||(K=N+g),ke.nodeType===3&&(N+=ke.nodeValue.length),(Me=ke.firstChild)!==null;)xe=ke,ke=Me;for(;;){if(ke===s)break t;if(xe===d&&++ce===x&&(U=N),xe===S&&++we===g&&(K=N),(Me=ke.nextSibling)!==null)break;ke=xe,xe=ke.parentNode}ke=Me}d=U===-1||K===-1?null:{start:U,end:K}}else d=null}d=d||{start:0,end:0}}else d=null;for(Ed={focusedElem:s,selectionRange:d},jl=!1,Le=a;Le!==null;)if(a=Le,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,Le=s;else for(;Le!==null;){a=Le;try{var $e=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if($e!==null){var Fe=$e.memoizedProps,Lt=$e.memoizedState,se=a.stateNode,X=se.getSnapshotBeforeUpdate(a.elementType===a.type?Fe:fr(a.type,Fe),Lt);se.__reactInternalSnapshotBeforeUpdate=X}break;case 3:var oe=a.stateNode.containerInfo;oe.nodeType===1?oe.textContent="":oe.nodeType===9&&oe.documentElement&&oe.removeChild(oe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Ce){Ot(a,a.return,Ce)}if(s=a.sibling,s!==null){s.return=a.return,Le=s;break}Le=a.return}return $e=My,My=!1,$e}function wa(s,a,d){var g=a.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var x=g=g.next;do{if((x.tag&s)===s){var S=x.destroy;x.destroy=void 0,S!==void 0&&ff(a,d,S)}x=x.next}while(x!==g)}}function lu(s,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var d=a=a.next;do{if((d.tag&s)===s){var g=d.create;d.destroy=g()}d=d.next}while(d!==a)}}function hf(s){var a=s.ref;if(a!==null){var d=s.stateNode;switch(s.tag){case 5:s=d;break;default:s=d}typeof a=="function"?a(s):a.current=s}}function Dy(s){var a=s.alternate;a!==null&&(s.alternate=null,Dy(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&(delete a[jr],delete a[ua],delete a[Nd],delete a[aE],delete a[lE])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function Ly(s){return s.tag===5||s.tag===3||s.tag===4}function $y(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Ly(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function pf(s,a,d){var g=s.tag;if(g===5||g===6)s=s.stateNode,a?d.nodeType===8?d.parentNode.insertBefore(s,a):d.insertBefore(s,a):(d.nodeType===8?(a=d.parentNode,a.insertBefore(s,d)):(a=d,a.appendChild(s)),d=d._reactRootContainer,d!=null||a.onclick!==null||(a.onclick=Fl));else if(g!==4&&(s=s.child,s!==null))for(pf(s,a,d),s=s.sibling;s!==null;)pf(s,a,d),s=s.sibling}function mf(s,a,d){var g=s.tag;if(g===5||g===6)s=s.stateNode,a?d.insertBefore(s,a):d.appendChild(s);else if(g!==4&&(s=s.child,s!==null))for(mf(s,a,d),s=s.sibling;s!==null;)mf(s,a,d),s=s.sibling}var on=null,hr=!1;function yi(s,a,d){for(d=d.child;d!==null;)Fy(s,a,d),d=d.sibling}function Fy(s,a,d){if(Cr&&typeof Cr.onCommitFiberUnmount=="function")try{Cr.onCommitFiberUnmount(bl,d)}catch{}switch(d.tag){case 5:hn||Ks(d,a);case 6:var g=on,x=hr;on=null,yi(s,a,d),on=g,hr=x,on!==null&&(hr?(s=on,d=d.stateNode,s.nodeType===8?s.parentNode.removeChild(d):s.removeChild(d)):on.removeChild(d.stateNode));break;case 18:on!==null&&(hr?(s=on,d=d.stateNode,s.nodeType===8?jd(s.parentNode,d):s.nodeType===1&&jd(s,d),Xo(s)):jd(on,d.stateNode));break;case 4:g=on,x=hr,on=d.stateNode.containerInfo,hr=!0,yi(s,a,d),on=g,hr=x;break;case 0:case 11:case 14:case 15:if(!hn&&(g=d.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){x=g=g.next;do{var S=x,N=S.destroy;S=S.tag,N!==void 0&&((S&2)!==0||(S&4)!==0)&&ff(d,a,N),x=x.next}while(x!==g)}yi(s,a,d);break;case 1:if(!hn&&(Ks(d,a),g=d.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=d.memoizedProps,g.state=d.memoizedState,g.componentWillUnmount()}catch(U){Ot(d,a,U)}yi(s,a,d);break;case 21:yi(s,a,d);break;case 22:d.mode&1?(hn=(g=hn)||d.memoizedState!==null,yi(s,a,d),hn=g):yi(s,a,d);break;default:yi(s,a,d)}}function zy(s){var a=s.updateQueue;if(a!==null){s.updateQueue=null;var d=s.stateNode;d===null&&(d=s.stateNode=new EE),a.forEach(function(g){var x=OE.bind(null,s,g);d.has(g)||(d.add(g),g.then(x,x))})}}function pr(s,a){var d=a.deletions;if(d!==null)for(var g=0;g<d.length;g++){var x=d[g];try{var S=s,N=a,U=N;e:for(;U!==null;){switch(U.tag){case 5:on=U.stateNode,hr=!1;break e;case 3:on=U.stateNode.containerInfo,hr=!0;break e;case 4:on=U.stateNode.containerInfo,hr=!0;break e}U=U.return}if(on===null)throw Error(n(160));Fy(S,N,x),on=null,hr=!1;var K=x.alternate;K!==null&&(K.return=null),x.return=null}catch(ce){Ot(x,a,ce)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)By(a,s),a=a.sibling}function By(s,a){var d=s.alternate,g=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(pr(a,s),Ir(s),g&4){try{wa(3,s,s.return),lu(3,s)}catch(Fe){Ot(s,s.return,Fe)}try{wa(5,s,s.return)}catch(Fe){Ot(s,s.return,Fe)}}break;case 1:pr(a,s),Ir(s),g&512&&d!==null&&Ks(d,d.return);break;case 5:if(pr(a,s),Ir(s),g&512&&d!==null&&Ks(d,d.return),s.flags&32){var x=s.stateNode;try{ee(x,"")}catch(Fe){Ot(s,s.return,Fe)}}if(g&4&&(x=s.stateNode,x!=null)){var S=s.memoizedProps,N=d!==null?d.memoizedProps:S,U=s.type,K=s.updateQueue;if(s.updateQueue=null,K!==null)try{U==="input"&&S.type==="radio"&&S.name!=null&&ot(x,S),Je(U,N);var ce=Je(U,S);for(N=0;N<K.length;N+=2){var we=K[N],ke=K[N+1];we==="style"?pe(x,ke):we==="dangerouslySetInnerHTML"?le(x,ke):we==="children"?ee(x,ke):j(x,we,ke,ce)}switch(U){case"input":St(x,S);break;case"textarea":Se(x,S);break;case"select":var xe=x._wrapperState.wasMultiple;x._wrapperState.wasMultiple=!!S.multiple;var Me=S.value;Me!=null?fe(x,!!S.multiple,Me,!1):xe!==!!S.multiple&&(S.defaultValue!=null?fe(x,!!S.multiple,S.defaultValue,!0):fe(x,!!S.multiple,S.multiple?[]:"",!1))}x[ua]=S}catch(Fe){Ot(s,s.return,Fe)}}break;case 6:if(pr(a,s),Ir(s),g&4){if(s.stateNode===null)throw Error(n(162));x=s.stateNode,S=s.memoizedProps;try{x.nodeValue=S}catch(Fe){Ot(s,s.return,Fe)}}break;case 3:if(pr(a,s),Ir(s),g&4&&d!==null&&d.memoizedState.isDehydrated)try{Xo(a.containerInfo)}catch(Fe){Ot(s,s.return,Fe)}break;case 4:pr(a,s),Ir(s);break;case 13:pr(a,s),Ir(s),x=s.child,x.flags&8192&&(S=x.memoizedState!==null,x.stateNode.isHidden=S,!S||x.alternate!==null&&x.alternate.memoizedState!==null||(vf=Dt())),g&4&&zy(s);break;case 22:if(we=d!==null&&d.memoizedState!==null,s.mode&1?(hn=(ce=hn)||we,pr(a,s),hn=ce):pr(a,s),Ir(s),g&8192){if(ce=s.memoizedState!==null,(s.stateNode.isHidden=ce)&&!we&&(s.mode&1)!==0)for(Le=s,we=s.child;we!==null;){for(ke=Le=we;Le!==null;){switch(xe=Le,Me=xe.child,xe.tag){case 0:case 11:case 14:case 15:wa(4,xe,xe.return);break;case 1:Ks(xe,xe.return);var $e=xe.stateNode;if(typeof $e.componentWillUnmount=="function"){g=xe,d=xe.return;try{a=g,$e.props=a.memoizedProps,$e.state=a.memoizedState,$e.componentWillUnmount()}catch(Fe){Ot(g,d,Fe)}}break;case 5:Ks(xe,xe.return);break;case 22:if(xe.memoizedState!==null){Hy(ke);continue}}Me!==null?(Me.return=xe,Le=Me):Hy(ke)}we=we.sibling}e:for(we=null,ke=s;;){if(ke.tag===5){if(we===null){we=ke;try{x=ke.stateNode,ce?(S=x.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(U=ke.stateNode,K=ke.memoizedProps.style,N=K!=null&&K.hasOwnProperty("display")?K.display:null,U.style.display=Z("display",N))}catch(Fe){Ot(s,s.return,Fe)}}}else if(ke.tag===6){if(we===null)try{ke.stateNode.nodeValue=ce?"":ke.memoizedProps}catch(Fe){Ot(s,s.return,Fe)}}else if((ke.tag!==22&&ke.tag!==23||ke.memoizedState===null||ke===s)&&ke.child!==null){ke.child.return=ke,ke=ke.child;continue}if(ke===s)break e;for(;ke.sibling===null;){if(ke.return===null||ke.return===s)break e;we===ke&&(we=null),ke=ke.return}we===ke&&(we=null),ke.sibling.return=ke.return,ke=ke.sibling}}break;case 19:pr(a,s),Ir(s),g&4&&zy(s);break;case 21:break;default:pr(a,s),Ir(s)}}function Ir(s){var a=s.flags;if(a&2){try{e:{for(var d=s.return;d!==null;){if(Ly(d)){var g=d;break e}d=d.return}throw Error(n(160))}switch(g.tag){case 5:var x=g.stateNode;g.flags&32&&(ee(x,""),g.flags&=-33);var S=$y(s);mf(s,S,x);break;case 3:case 4:var N=g.stateNode.containerInfo,U=$y(s);pf(s,U,N);break;default:throw Error(n(161))}}catch(K){Ot(s,s.return,K)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function CE(s,a,d){Le=s,Uy(s)}function Uy(s,a,d){for(var g=(s.mode&1)!==0;Le!==null;){var x=Le,S=x.child;if(x.tag===22&&g){var N=x.memoizedState!==null||au;if(!N){var U=x.alternate,K=U!==null&&U.memoizedState!==null||hn;U=au;var ce=hn;if(au=N,(hn=K)&&!ce)for(Le=x;Le!==null;)N=Le,K=N.child,N.tag===22&&N.memoizedState!==null?Vy(x):K!==null?(K.return=N,Le=K):Vy(x);for(;S!==null;)Le=S,Uy(S),S=S.sibling;Le=x,au=U,hn=ce}Wy(s)}else(x.subtreeFlags&8772)!==0&&S!==null?(S.return=x,Le=S):Wy(s)}}function Wy(s){for(;Le!==null;){var a=Le;if((a.flags&8772)!==0){var d=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:hn||lu(5,a);break;case 1:var g=a.stateNode;if(a.flags&4&&!hn)if(d===null)g.componentDidMount();else{var x=a.elementType===a.type?d.memoizedProps:fr(a.type,d.memoizedProps);g.componentDidUpdate(x,d.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var S=a.updateQueue;S!==null&&Hg(a,S,g);break;case 3:var N=a.updateQueue;if(N!==null){if(d=null,a.child!==null)switch(a.child.tag){case 5:d=a.child.stateNode;break;case 1:d=a.child.stateNode}Hg(a,N,d)}break;case 5:var U=a.stateNode;if(d===null&&a.flags&4){d=U;var K=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":K.autoFocus&&d.focus();break;case"img":K.src&&(d.src=K.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var ce=a.alternate;if(ce!==null){var we=ce.memoizedState;if(we!==null){var ke=we.dehydrated;ke!==null&&Xo(ke)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}hn||a.flags&512&&hf(a)}catch(xe){Ot(a,a.return,xe)}}if(a===s){Le=null;break}if(d=a.sibling,d!==null){d.return=a.return,Le=d;break}Le=a.return}}function Hy(s){for(;Le!==null;){var a=Le;if(a===s){Le=null;break}var d=a.sibling;if(d!==null){d.return=a.return,Le=d;break}Le=a.return}}function Vy(s){for(;Le!==null;){var a=Le;try{switch(a.tag){case 0:case 11:case 15:var d=a.return;try{lu(4,a)}catch(K){Ot(a,d,K)}break;case 1:var g=a.stateNode;if(typeof g.componentDidMount=="function"){var x=a.return;try{g.componentDidMount()}catch(K){Ot(a,x,K)}}var S=a.return;try{hf(a)}catch(K){Ot(a,S,K)}break;case 5:var N=a.return;try{hf(a)}catch(K){Ot(a,N,K)}}}catch(K){Ot(a,a.return,K)}if(a===s){Le=null;break}var U=a.sibling;if(U!==null){U.return=a.return,Le=U;break}Le=a.return}}var jE=Math.ceil,uu=I.ReactCurrentDispatcher,gf=I.ReactCurrentOwner,tr=I.ReactCurrentBatchConfig,ht=0,Zt=null,Ft=null,an=0,Un=0,Gs=fi(0),Kt=0,ba=null,Xi=0,cu=0,yf=0,ka=null,Tn=null,vf=0,Js=1/0,Qr=null,du=!1,xf=null,vi=null,fu=!1,xi=null,hu=0,Sa=0,wf=null,pu=-1,mu=0;function bn(){return(ht&6)!==0?Dt():pu!==-1?pu:pu=Dt()}function wi(s){return(s.mode&1)===0?1:(ht&2)!==0&&an!==0?an&-an:cE.transition!==null?(mu===0&&(mu=$m()),mu):(s=gt,s!==0||(s=window.event,s=s===void 0?16:Ym(s.type)),s)}function mr(s,a,d,g){if(50<Sa)throw Sa=0,wf=null,Error(n(185));Yo(s,d,g),((ht&2)===0||s!==Zt)&&(s===Zt&&((ht&2)===0&&(cu|=d),Kt===4&&bi(s,an)),In(s,g),d===1&&ht===0&&(a.mode&1)===0&&(Js=Dt()+500,Wl&&pi()))}function In(s,a){var d=s.callbackNode;cS(s,a);var g=El(s,s===Zt?an:0);if(g===0)d!==null&&Mm(d),s.callbackNode=null,s.callbackPriority=0;else if(a=g&-g,s.callbackPriority!==a){if(d!=null&&Mm(d),a===1)s.tag===0?uE(Yy.bind(null,s)):Ag(Yy.bind(null,s)),sE(function(){(ht&6)===0&&pi()}),d=null;else{switch(Fm(g)){case 1:d=Xc;break;case 4:d=Dm;break;case 16:d=wl;break;case 536870912:d=Lm;break;default:d=wl}d=tv(d,qy.bind(null,s))}s.callbackPriority=a,s.callbackNode=d}}function qy(s,a){if(pu=-1,mu=0,(ht&6)!==0)throw Error(n(327));var d=s.callbackNode;if(Qs()&&s.callbackNode!==d)return null;var g=El(s,s===Zt?an:0);if(g===0)return null;if((g&30)!==0||(g&s.expiredLanes)!==0||a)a=gu(s,g);else{a=g;var x=ht;ht|=2;var S=Gy();(Zt!==s||an!==a)&&(Qr=null,Js=Dt()+500,es(s,a));do try{IE();break}catch(U){Ky(s,U)}while(!0);Ld(),uu.current=S,ht=x,Ft!==null?a=0:(Zt=null,an=0,a=Kt)}if(a!==0){if(a===2&&(x=Zc(s),x!==0&&(g=x,a=bf(s,x))),a===1)throw d=ba,es(s,0),bi(s,g),In(s,Dt()),d;if(a===6)bi(s,g);else{if(x=s.current.alternate,(g&30)===0&&!NE(x)&&(a=gu(s,g),a===2&&(S=Zc(s),S!==0&&(g=S,a=bf(s,S))),a===1))throw d=ba,es(s,0),bi(s,g),In(s,Dt()),d;switch(s.finishedWork=x,s.finishedLanes=g,a){case 0:case 1:throw Error(n(345));case 2:ts(s,Tn,Qr);break;case 3:if(bi(s,g),(g&130023424)===g&&(a=vf+500-Dt(),10<a)){if(El(s,0)!==0)break;if(x=s.suspendedLanes,(x&g)!==g){bn(),s.pingedLanes|=s.suspendedLanes&x;break}s.timeoutHandle=Cd(ts.bind(null,s,Tn,Qr),a);break}ts(s,Tn,Qr);break;case 4:if(bi(s,g),(g&4194240)===g)break;for(a=s.eventTimes,x=-1;0<g;){var N=31-ur(g);S=1<<N,N=a[N],N>x&&(x=N),g&=~S}if(g=x,g=Dt()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*jE(g/1960))-g,10<g){s.timeoutHandle=Cd(ts.bind(null,s,Tn,Qr),g);break}ts(s,Tn,Qr);break;case 5:ts(s,Tn,Qr);break;default:throw Error(n(329))}}}return In(s,Dt()),s.callbackNode===d?qy.bind(null,s):null}function bf(s,a){var d=ka;return s.current.memoizedState.isDehydrated&&(es(s,a).flags|=256),s=gu(s,a),s!==2&&(a=Tn,Tn=d,a!==null&&kf(a)),s}function kf(s){Tn===null?Tn=s:Tn.push.apply(Tn,s)}function NE(s){for(var a=s;;){if(a.flags&16384){var d=a.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var g=0;g<d.length;g++){var x=d[g],S=x.getSnapshot;x=x.value;try{if(!cr(S(),x))return!1}catch{return!1}}}if(d=a.child,a.subtreeFlags&16384&&d!==null)d.return=a,a=d;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function bi(s,a){for(a&=~yf,a&=~cu,s.suspendedLanes|=a,s.pingedLanes&=~a,s=s.expirationTimes;0<a;){var d=31-ur(a),g=1<<d;s[d]=-1,a&=~g}}function Yy(s){if((ht&6)!==0)throw Error(n(327));Qs();var a=El(s,0);if((a&1)===0)return In(s,Dt()),null;var d=gu(s,a);if(s.tag!==0&&d===2){var g=Zc(s);g!==0&&(a=g,d=bf(s,g))}if(d===1)throw d=ba,es(s,0),bi(s,a),In(s,Dt()),d;if(d===6)throw Error(n(345));return s.finishedWork=s.current.alternate,s.finishedLanes=a,ts(s,Tn,Qr),In(s,Dt()),null}function Sf(s,a){var d=ht;ht|=1;try{return s(a)}finally{ht=d,ht===0&&(Js=Dt()+500,Wl&&pi())}}function Zi(s){xi!==null&&xi.tag===0&&(ht&6)===0&&Qs();var a=ht;ht|=1;var d=tr.transition,g=gt;try{if(tr.transition=null,gt=1,s)return s()}finally{gt=g,tr.transition=d,ht=a,(ht&6)===0&&pi()}}function Ef(){Un=Gs.current,Nt(Gs)}function es(s,a){s.finishedWork=null,s.finishedLanes=0;var d=s.timeoutHandle;if(d!==-1&&(s.timeoutHandle=-1,iE(d)),Ft!==null)for(d=Ft.return;d!==null;){var g=d;switch(Ad(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&Bl();break;case 3:qs(),Nt(Cn),Nt(cn),Vd();break;case 5:Wd(g);break;case 4:qs();break;case 13:Nt(Pt);break;case 19:Nt(Pt);break;case 10:$d(g.type._context);break;case 22:case 23:Ef()}d=d.return}if(Zt=s,Ft=s=ki(s.current,null),an=Un=a,Kt=0,ba=null,yf=cu=Xi=0,Tn=ka=null,Gi!==null){for(a=0;a<Gi.length;a++)if(d=Gi[a],g=d.interleaved,g!==null){d.interleaved=null;var x=g.next,S=d.pending;if(S!==null){var N=S.next;S.next=x,g.next=N}d.pending=g}Gi=null}return s}function Ky(s,a){do{var d=Ft;try{if(Ld(),Zl.current=ru,eu){for(var g=At.memoizedState;g!==null;){var x=g.queue;x!==null&&(x.pending=null),g=g.next}eu=!1}if(Qi=0,Xt=Yt=At=null,ma=!1,ga=0,gf.current=null,d===null||d.return===null){Kt=1,ba=a,Ft=null;break}e:{var S=s,N=d.return,U=d,K=a;if(a=an,U.flags|=32768,K!==null&&typeof K=="object"&&typeof K.then=="function"){var ce=K,we=U,ke=we.tag;if((we.mode&1)===0&&(ke===0||ke===11||ke===15)){var xe=we.alternate;xe?(we.updateQueue=xe.updateQueue,we.memoizedState=xe.memoizedState,we.lanes=xe.lanes):(we.updateQueue=null,we.memoizedState=null)}var Me=xy(N);if(Me!==null){Me.flags&=-257,wy(Me,N,U,S,a),Me.mode&1&&vy(S,ce,a),a=Me,K=ce;var $e=a.updateQueue;if($e===null){var Fe=new Set;Fe.add(K),a.updateQueue=Fe}else $e.add(K);break e}else{if((a&1)===0){vy(S,ce,a),_f();break e}K=Error(n(426))}}else if(It&&U.mode&1){var Lt=xy(N);if(Lt!==null){(Lt.flags&65536)===0&&(Lt.flags|=256),wy(Lt,N,U,S,a),Md(Ys(K,U));break e}}S=K=Ys(K,U),Kt!==4&&(Kt=2),ka===null?ka=[S]:ka.push(S),S=N;do{switch(S.tag){case 3:S.flags|=65536,a&=-a,S.lanes|=a;var se=gy(S,K,a);Wg(S,se);break e;case 1:U=K;var X=S.type,oe=S.stateNode;if((S.flags&128)===0&&(typeof X.getDerivedStateFromError=="function"||oe!==null&&typeof oe.componentDidCatch=="function"&&(vi===null||!vi.has(oe)))){S.flags|=65536,a&=-a,S.lanes|=a;var Ce=yy(S,U,a);Wg(S,Ce);break e}}S=S.return}while(S!==null)}Qy(d)}catch(Be){a=Be,Ft===d&&d!==null&&(Ft=d=d.return);continue}break}while(!0)}function Gy(){var s=uu.current;return uu.current=ru,s===null?ru:s}function _f(){(Kt===0||Kt===3||Kt===2)&&(Kt=4),Zt===null||(Xi&268435455)===0&&(cu&268435455)===0||bi(Zt,an)}function gu(s,a){var d=ht;ht|=2;var g=Gy();(Zt!==s||an!==a)&&(Qr=null,es(s,a));do try{TE();break}catch(x){Ky(s,x)}while(!0);if(Ld(),ht=d,uu.current=g,Ft!==null)throw Error(n(261));return Zt=null,an=0,Kt}function TE(){for(;Ft!==null;)Jy(Ft)}function IE(){for(;Ft!==null&&!tS();)Jy(Ft)}function Jy(s){var a=ev(s.alternate,s,Un);s.memoizedProps=s.pendingProps,a===null?Qy(s):Ft=a,gf.current=null}function Qy(s){var a=s;do{var d=a.alternate;if(s=a.return,(a.flags&32768)===0){if(d=kE(d,a,Un),d!==null){Ft=d;return}}else{if(d=SE(d,a),d!==null){d.flags&=32767,Ft=d;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Kt=6,Ft=null;return}}if(a=a.sibling,a!==null){Ft=a;return}Ft=a=s}while(a!==null);Kt===0&&(Kt=5)}function ts(s,a,d){var g=gt,x=tr.transition;try{tr.transition=null,gt=1,PE(s,a,d,g)}finally{tr.transition=x,gt=g}return null}function PE(s,a,d,g){do Qs();while(xi!==null);if((ht&6)!==0)throw Error(n(327));d=s.finishedWork;var x=s.finishedLanes;if(d===null)return null;if(s.finishedWork=null,s.finishedLanes=0,d===s.current)throw Error(n(177));s.callbackNode=null,s.callbackPriority=0;var S=d.lanes|d.childLanes;if(dS(s,S),s===Zt&&(Ft=Zt=null,an=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||fu||(fu=!0,tv(wl,function(){return Qs(),null})),S=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||S){S=tr.transition,tr.transition=null;var N=gt;gt=1;var U=ht;ht|=4,gf.current=null,_E(s,d),By(d,s),QS(Ed),jl=!!Sd,Ed=Sd=null,s.current=d,CE(d),nS(),ht=U,gt=N,tr.transition=S}else s.current=d;if(fu&&(fu=!1,xi=s,hu=x),S=s.pendingLanes,S===0&&(vi=null),sS(d.stateNode),In(s,Dt()),a!==null)for(g=s.onRecoverableError,d=0;d<a.length;d++)x=a[d],g(x.value,{componentStack:x.stack,digest:x.digest});if(du)throw du=!1,s=xf,xf=null,s;return(hu&1)!==0&&s.tag!==0&&Qs(),S=s.pendingLanes,(S&1)!==0?s===wf?Sa++:(Sa=0,wf=s):Sa=0,pi(),null}function Qs(){if(xi!==null){var s=Fm(hu),a=tr.transition,d=gt;try{if(tr.transition=null,gt=16>s?16:s,xi===null)var g=!1;else{if(s=xi,xi=null,hu=0,(ht&6)!==0)throw Error(n(331));var x=ht;for(ht|=4,Le=s.current;Le!==null;){var S=Le,N=S.child;if((Le.flags&16)!==0){var U=S.deletions;if(U!==null){for(var K=0;K<U.length;K++){var ce=U[K];for(Le=ce;Le!==null;){var we=Le;switch(we.tag){case 0:case 11:case 15:wa(8,we,S)}var ke=we.child;if(ke!==null)ke.return=we,Le=ke;else for(;Le!==null;){we=Le;var xe=we.sibling,Me=we.return;if(Dy(we),we===ce){Le=null;break}if(xe!==null){xe.return=Me,Le=xe;break}Le=Me}}}var $e=S.alternate;if($e!==null){var Fe=$e.child;if(Fe!==null){$e.child=null;do{var Lt=Fe.sibling;Fe.sibling=null,Fe=Lt}while(Fe!==null)}}Le=S}}if((S.subtreeFlags&2064)!==0&&N!==null)N.return=S,Le=N;else e:for(;Le!==null;){if(S=Le,(S.flags&2048)!==0)switch(S.tag){case 0:case 11:case 15:wa(9,S,S.return)}var se=S.sibling;if(se!==null){se.return=S.return,Le=se;break e}Le=S.return}}var X=s.current;for(Le=X;Le!==null;){N=Le;var oe=N.child;if((N.subtreeFlags&2064)!==0&&oe!==null)oe.return=N,Le=oe;else e:for(N=X;Le!==null;){if(U=Le,(U.flags&2048)!==0)try{switch(U.tag){case 0:case 11:case 15:lu(9,U)}}catch(Be){Ot(U,U.return,Be)}if(U===N){Le=null;break e}var Ce=U.sibling;if(Ce!==null){Ce.return=U.return,Le=Ce;break e}Le=U.return}}if(ht=x,pi(),Cr&&typeof Cr.onPostCommitFiberRoot=="function")try{Cr.onPostCommitFiberRoot(bl,s)}catch{}g=!0}return g}finally{gt=d,tr.transition=a}}return!1}function Xy(s,a,d){a=Ys(d,a),a=gy(s,a,1),s=gi(s,a,1),a=bn(),s!==null&&(Yo(s,1,a),In(s,a))}function Ot(s,a,d){if(s.tag===3)Xy(s,s,d);else for(;a!==null;){if(a.tag===3){Xy(a,s,d);break}else if(a.tag===1){var g=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(vi===null||!vi.has(g))){s=Ys(d,s),s=yy(a,s,1),a=gi(a,s,1),s=bn(),a!==null&&(Yo(a,1,s),In(a,s));break}}a=a.return}}function AE(s,a,d){var g=s.pingCache;g!==null&&g.delete(a),a=bn(),s.pingedLanes|=s.suspendedLanes&d,Zt===s&&(an&d)===d&&(Kt===4||Kt===3&&(an&130023424)===an&&500>Dt()-vf?es(s,0):yf|=d),In(s,a)}function Zy(s,a){a===0&&((s.mode&1)===0?a=1:(a=Sl,Sl<<=1,(Sl&130023424)===0&&(Sl=4194304)));var d=bn();s=Kr(s,a),s!==null&&(Yo(s,a,d),In(s,d))}function RE(s){var a=s.memoizedState,d=0;a!==null&&(d=a.retryLane),Zy(s,d)}function OE(s,a){var d=0;switch(s.tag){case 13:var g=s.stateNode,x=s.memoizedState;x!==null&&(d=x.retryLane);break;case 19:g=s.stateNode;break;default:throw Error(n(314))}g!==null&&g.delete(a),Zy(s,d)}var ev;ev=function(s,a,d){if(s!==null)if(s.memoizedProps!==a.pendingProps||Cn.current)Nn=!0;else{if((s.lanes&d)===0&&(a.flags&128)===0)return Nn=!1,bE(s,a,d);Nn=(s.flags&131072)!==0}else Nn=!1,It&&(a.flags&1048576)!==0&&Rg(a,Vl,a.index);switch(a.lanes=0,a.tag){case 2:var g=a.type;ou(s,a),s=a.pendingProps;var x=Fs(a,cn.current);Vs(a,d),x=Kd(null,a,g,s,x,d);var S=Gd();return a.flags|=1,typeof x=="object"&&x!==null&&typeof x.render=="function"&&x.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,jn(g)?(S=!0,Ul(a)):S=!1,a.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,Bd(a),x.updater=iu,a.stateNode=x,x._reactInternals=a,tf(a,g,s,d),a=of(null,a,g,!0,S,d)):(a.tag=0,It&&S&&Pd(a),wn(null,a,x,d),a=a.child),a;case 16:g=a.elementType;e:{switch(ou(s,a),s=a.pendingProps,x=g._init,g=x(g._payload),a.type=g,x=a.tag=DE(g),s=fr(g,s),x){case 0:a=sf(null,a,g,s,d);break e;case 1:a=Cy(null,a,g,s,d);break e;case 11:a=by(null,a,g,s,d);break e;case 14:a=ky(null,a,g,fr(g.type,s),d);break e}throw Error(n(306,g,""))}return a;case 0:return g=a.type,x=a.pendingProps,x=a.elementType===g?x:fr(g,x),sf(s,a,g,x,d);case 1:return g=a.type,x=a.pendingProps,x=a.elementType===g?x:fr(g,x),Cy(s,a,g,x,d);case 3:e:{if(jy(a),s===null)throw Error(n(387));g=a.pendingProps,S=a.memoizedState,x=S.element,Ug(s,a),Ql(a,g,null,d);var N=a.memoizedState;if(g=N.element,S.isDehydrated)if(S={element:g,isDehydrated:!1,cache:N.cache,pendingSuspenseBoundaries:N.pendingSuspenseBoundaries,transitions:N.transitions},a.updateQueue.baseState=S,a.memoizedState=S,a.flags&256){x=Ys(Error(n(423)),a),a=Ny(s,a,g,d,x);break e}else if(g!==x){x=Ys(Error(n(424)),a),a=Ny(s,a,g,d,x);break e}else for(Bn=di(a.stateNode.containerInfo.firstChild),zn=a,It=!0,dr=null,d=zg(a,null,g,d),a.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Us(),g===x){a=Jr(s,a,d);break e}wn(s,a,g,d)}a=a.child}return a;case 5:return Vg(a),s===null&&Od(a),g=a.type,x=a.pendingProps,S=s!==null?s.memoizedProps:null,N=x.children,_d(g,x)?N=null:S!==null&&_d(g,S)&&(a.flags|=32),_y(s,a),wn(s,a,N,d),a.child;case 6:return s===null&&Od(a),null;case 13:return Ty(s,a,d);case 4:return Ud(a,a.stateNode.containerInfo),g=a.pendingProps,s===null?a.child=Ws(a,null,g,d):wn(s,a,g,d),a.child;case 11:return g=a.type,x=a.pendingProps,x=a.elementType===g?x:fr(g,x),by(s,a,g,x,d);case 7:return wn(s,a,a.pendingProps,d),a.child;case 8:return wn(s,a,a.pendingProps.children,d),a.child;case 12:return wn(s,a,a.pendingProps.children,d),a.child;case 10:e:{if(g=a.type._context,x=a.pendingProps,S=a.memoizedProps,N=x.value,Et(Kl,g._currentValue),g._currentValue=N,S!==null)if(cr(S.value,N)){if(S.children===x.children&&!Cn.current){a=Jr(s,a,d);break e}}else for(S=a.child,S!==null&&(S.return=a);S!==null;){var U=S.dependencies;if(U!==null){N=S.child;for(var K=U.firstContext;K!==null;){if(K.context===g){if(S.tag===1){K=Gr(-1,d&-d),K.tag=2;var ce=S.updateQueue;if(ce!==null){ce=ce.shared;var we=ce.pending;we===null?K.next=K:(K.next=we.next,we.next=K),ce.pending=K}}S.lanes|=d,K=S.alternate,K!==null&&(K.lanes|=d),Fd(S.return,d,a),U.lanes|=d;break}K=K.next}}else if(S.tag===10)N=S.type===a.type?null:S.child;else if(S.tag===18){if(N=S.return,N===null)throw Error(n(341));N.lanes|=d,U=N.alternate,U!==null&&(U.lanes|=d),Fd(N,d,a),N=S.sibling}else N=S.child;if(N!==null)N.return=S;else for(N=S;N!==null;){if(N===a){N=null;break}if(S=N.sibling,S!==null){S.return=N.return,N=S;break}N=N.return}S=N}wn(s,a,x.children,d),a=a.child}return a;case 9:return x=a.type,g=a.pendingProps.children,Vs(a,d),x=Zn(x),g=g(x),a.flags|=1,wn(s,a,g,d),a.child;case 14:return g=a.type,x=fr(g,a.pendingProps),x=fr(g.type,x),ky(s,a,g,x,d);case 15:return Sy(s,a,a.type,a.pendingProps,d);case 17:return g=a.type,x=a.pendingProps,x=a.elementType===g?x:fr(g,x),ou(s,a),a.tag=1,jn(g)?(s=!0,Ul(a)):s=!1,Vs(a,d),py(a,g,x),tf(a,g,x,d),of(null,a,g,!0,s,d);case 19:return Py(s,a,d);case 22:return Ey(s,a,d)}throw Error(n(156,a.tag))};function tv(s,a){return Om(s,a)}function ME(s,a,d,g){this.tag=s,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nr(s,a,d,g){return new ME(s,a,d,g)}function Cf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function DE(s){if(typeof s=="function")return Cf(s)?1:0;if(s!=null){if(s=s.$$typeof,s===ne)return 11;if(s===V)return 14}return 2}function ki(s,a){var d=s.alternate;return d===null?(d=nr(s.tag,a,s.key,s.mode),d.elementType=s.elementType,d.type=s.type,d.stateNode=s.stateNode,d.alternate=s,s.alternate=d):(d.pendingProps=a,d.type=s.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=s.flags&14680064,d.childLanes=s.childLanes,d.lanes=s.lanes,d.child=s.child,d.memoizedProps=s.memoizedProps,d.memoizedState=s.memoizedState,d.updateQueue=s.updateQueue,a=s.dependencies,d.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},d.sibling=s.sibling,d.index=s.index,d.ref=s.ref,d}function yu(s,a,d,g,x,S){var N=2;if(g=s,typeof s=="function")Cf(s)&&(N=1);else if(typeof s=="string")N=5;else e:switch(s){case B:return ns(d.children,x,S,a);case te:N=8,x|=8;break;case H:return s=nr(12,d,a,x|2),s.elementType=H,s.lanes=S,s;case W:return s=nr(13,d,a,x),s.elementType=W,s.lanes=S,s;case Y:return s=nr(19,d,a,x),s.elementType=Y,s.lanes=S,s;case z:return vu(d,x,S,a);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case O:N=10;break e;case D:N=9;break e;case ne:N=11;break e;case V:N=14;break e;case ie:N=16,g=null;break e}throw Error(n(130,s==null?s:typeof s,""))}return a=nr(N,d,a,x),a.elementType=s,a.type=g,a.lanes=S,a}function ns(s,a,d,g){return s=nr(7,s,g,a),s.lanes=d,s}function vu(s,a,d,g){return s=nr(22,s,g,a),s.elementType=z,s.lanes=d,s.stateNode={isHidden:!1},s}function jf(s,a,d){return s=nr(6,s,null,a),s.lanes=d,s}function Nf(s,a,d){return a=nr(4,s.children!==null?s.children:[],s.key,a),a.lanes=d,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}function LE(s,a,d,g,x){this.tag=a,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ed(0),this.expirationTimes=ed(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ed(0),this.identifierPrefix=g,this.onRecoverableError=x,this.mutableSourceEagerHydrationData=null}function Tf(s,a,d,g,x,S,N,U,K){return s=new LE(s,a,d,U,K),a===1?(a=1,S===!0&&(a|=8)):a=0,S=nr(3,null,null,a),s.current=S,S.stateNode=s,S.memoizedState={element:g,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bd(S),s}function $E(s,a,d){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:A,key:g==null?null:""+g,children:s,containerInfo:a,implementation:d}}function nv(s){if(!s)return hi;s=s._reactInternals;e:{if(Hi(s)!==s||s.tag!==1)throw Error(n(170));var a=s;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(jn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(n(171))}if(s.tag===1){var d=s.type;if(jn(d))return Ig(s,d,a)}return a}function rv(s,a,d,g,x,S,N,U,K){return s=Tf(d,g,!0,s,x,S,N,U,K),s.context=nv(null),d=s.current,g=bn(),x=wi(d),S=Gr(g,x),S.callback=a??null,gi(d,S,x),s.current.lanes=x,Yo(s,x,g),In(s,g),s}function xu(s,a,d,g){var x=a.current,S=bn(),N=wi(x);return d=nv(d),a.context===null?a.context=d:a.pendingContext=d,a=Gr(S,N),a.payload={element:s},g=g===void 0?null:g,g!==null&&(a.callback=g),s=gi(x,a,N),s!==null&&(mr(s,x,N,S),Jl(s,x,N)),N}function wu(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function iv(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var d=s.retryLane;s.retryLane=d!==0&&d<a?d:a}}function If(s,a){iv(s,a),(s=s.alternate)&&iv(s,a)}function FE(){return null}var sv=typeof reportError=="function"?reportError:function(s){console.error(s)};function Pf(s){this._internalRoot=s}bu.prototype.render=Pf.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(n(409));xu(s,a,null,null)},bu.prototype.unmount=Pf.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;Zi(function(){xu(null,s,null,null)}),a[Hr]=null}};function bu(s){this._internalRoot=s}bu.prototype.unstable_scheduleHydration=function(s){if(s){var a=Um();s={blockedOn:null,target:s,priority:a};for(var d=0;d<li.length&&a!==0&&a<li[d].priority;d++);li.splice(d,0,s),d===0&&Vm(s)}};function Af(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function ku(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function ov(){}function zE(s,a,d,g,x){if(x){if(typeof g=="function"){var S=g;g=function(){var ce=wu(N);S.call(ce)}}var N=rv(a,g,s,0,null,!1,!1,"",ov);return s._reactRootContainer=N,s[Hr]=N.current,aa(s.nodeType===8?s.parentNode:s),Zi(),N}for(;x=s.lastChild;)s.removeChild(x);if(typeof g=="function"){var U=g;g=function(){var ce=wu(K);U.call(ce)}}var K=Tf(s,0,!1,null,null,!1,!1,"",ov);return s._reactRootContainer=K,s[Hr]=K.current,aa(s.nodeType===8?s.parentNode:s),Zi(function(){xu(a,K,d,g)}),K}function Su(s,a,d,g,x){var S=d._reactRootContainer;if(S){var N=S;if(typeof x=="function"){var U=x;x=function(){var K=wu(N);U.call(K)}}xu(a,N,s,x)}else N=zE(d,a,s,x,g);return wu(N)}zm=function(s){switch(s.tag){case 3:var a=s.stateNode;if(a.current.memoizedState.isDehydrated){var d=qo(a.pendingLanes);d!==0&&(td(a,d|1),In(a,Dt()),(ht&6)===0&&(Js=Dt()+500,pi()))}break;case 13:Zi(function(){var g=Kr(s,1);if(g!==null){var x=bn();mr(g,s,1,x)}}),If(s,1)}},nd=function(s){if(s.tag===13){var a=Kr(s,134217728);if(a!==null){var d=bn();mr(a,s,134217728,d)}If(s,134217728)}},Bm=function(s){if(s.tag===13){var a=wi(s),d=Kr(s,a);if(d!==null){var g=bn();mr(d,s,a,g)}If(s,a)}},Um=function(){return gt},Wm=function(s,a){var d=gt;try{return gt=s,a()}finally{gt=d}},Qe=function(s,a,d){switch(a){case"input":if(St(s,d),a=d.name,d.type==="radio"&&a!=null){for(d=s;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<d.length;a++){var g=d[a];if(g!==s&&g.form===s.form){var x=zl(g);if(!x)throw Error(n(90));Ie(g),St(g,x)}}}break;case"textarea":Se(s,d);break;case"select":a=d.value,a!=null&&fe(s,!!d.multiple,a,!1)}},ut=Sf,vt=Zi;var BE={usingClientEntryPoint:!1,Events:[ca,Ls,zl,Ve,dt,Sf]},Ea={findFiberByHostInstance:Vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},UE={bundleType:Ea.bundleType,version:Ea.version,rendererPackageName:Ea.rendererPackageName,rendererConfig:Ea.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Am(s),s===null?null:s.stateNode},findFiberByHostInstance:Ea.findFiberByHostInstance||FE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Eu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Eu.isDisabled&&Eu.supportsFiber)try{bl=Eu.inject(UE),Cr=Eu}catch{}}return Pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BE,Pn.createPortal=function(s,a){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Af(a))throw Error(n(200));return $E(s,a,null,d)},Pn.createRoot=function(s,a){if(!Af(s))throw Error(n(299));var d=!1,g="",x=sv;return a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),a=Tf(s,1,!1,null,null,d,!1,g,x),s[Hr]=a.current,aa(s.nodeType===8?s.parentNode:s),new Pf(a)},Pn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=Am(a),s=s===null?null:s.stateNode,s},Pn.flushSync=function(s){return Zi(s)},Pn.hydrate=function(s,a,d){if(!ku(a))throw Error(n(200));return Su(null,s,a,!0,d)},Pn.hydrateRoot=function(s,a,d){if(!Af(s))throw Error(n(405));var g=d!=null&&d.hydratedSources||null,x=!1,S="",N=sv;if(d!=null&&(d.unstable_strictMode===!0&&(x=!0),d.identifierPrefix!==void 0&&(S=d.identifierPrefix),d.onRecoverableError!==void 0&&(N=d.onRecoverableError)),a=rv(a,null,s,1,d??null,x,!1,S,N),s[Hr]=a.current,aa(s),g)for(s=0;s<g.length;s++)d=g[s],x=d._getVersion,x=x(d._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[d,x]:a.mutableSourceEagerHydrationData.push(d,x);return new bu(a)},Pn.render=function(s,a,d){if(!ku(a))throw Error(n(200));return Su(null,s,a,!1,d)},Pn.unmountComponentAtNode=function(s){if(!ku(s))throw Error(n(40));return s._reactRootContainer?(Zi(function(){Su(null,null,s,!1,function(){s._reactRootContainer=null,s[Hr]=null})}),!0):!1},Pn.unstable_batchedUpdates=Sf,Pn.unstable_renderSubtreeIntoContainer=function(s,a,d,g){if(!ku(d))throw Error(n(200));if(s==null||s._reactInternals===void 0)throw Error(n(38));return Su(s,a,d,!1,g)},Pn.version="18.3.1-next-f1338f8080-20240426",Pn}var pv;function ow(){if(pv)return Mf.exports;pv=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Mf.exports=QE(),Mf.exports}var mv;function XE(){if(mv)return _u;mv=1;var e=ow();return _u.createRoot=e.createRoot,_u.hydrateRoot=e.hydrateRoot,_u}var ZE=XE();const e_=Ro(ZE);var qn=ow();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ka(){return Ka=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ka.apply(this,arguments)}var Ri;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ri||(Ri={}));const gv="popstate";function t_(e){e===void 0&&(e={});function t(i,o){let{pathname:l="/",search:u="",hash:c=""}=Ss(i.location.hash.substr(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),Ih("",{pathname:l,search:u,hash:c},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){let l=i.document.querySelector("base"),u="";if(l&&l.getAttribute("href")){let c=i.location.href,f=c.indexOf("#");u=f===-1?c:c.slice(0,f)}return u+"#"+(typeof o=="string"?o:ec(o))}function r(i,o){Tp(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return r_(t,n,r,e)}function Rt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Tp(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function n_(){return Math.random().toString(36).substr(2,8)}function yv(e,t){return{usr:e.state,key:e.key,idx:t}}function Ih(e,t,n,r){return n===void 0&&(n=null),Ka({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Ss(t):t,{state:n,key:t&&t.key||r||n_()})}function ec(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Ss(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function r_(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,l=i.history,u=Ri.Pop,c=null,f=h();f==null&&(f=0,l.replaceState(Ka({},l.state,{idx:f}),""));function h(){return(l.state||{idx:null}).idx}function p(){u=Ri.Pop;let E=h(),C=E==null?null:E-f;f=E,c&&c({action:u,location:k.location,delta:C})}function v(E,C){u=Ri.Push;let _=Ih(k.location,E,C);n&&n(_,E),f=h()+1;let j=yv(_,f),I=k.createHref(_);try{l.pushState(j,"",I)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(I)}o&&c&&c({action:u,location:k.location,delta:1})}function y(E,C){u=Ri.Replace;let _=Ih(k.location,E,C);n&&n(_,E),f=h();let j=yv(_,f),I=k.createHref(_);l.replaceState(j,"",I),o&&c&&c({action:u,location:k.location,delta:0})}function b(E){let C=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof E=="string"?E:ec(E);return _=_.replace(/ $/,"%20"),Rt(C,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,C)}let k={get action(){return u},get location(){return e(i,l)},listen(E){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(gv,p),c=E,()=>{i.removeEventListener(gv,p),c=null}},createHref(E){return t(i,E)},createURL:b,encodeLocation(E){let C=b(E);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:v,replace:y,go(E){return l.go(E)}};return k}var vv;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(vv||(vv={}));function i_(e,t,n){return n===void 0&&(n="/"),s_(e,t,n)}function s_(e,t,n,r){let i=typeof t=="string"?Ss(t):t,o=Co(i.pathname||"/",n);if(o==null)return null;let l=aw(e);o_(l);let u=null;for(let c=0;u==null&&c<l.length;++c){let f=y_(o);u=m_(l[c],f)}return u}function aw(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,l,u)=>{let c={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};c.relativePath.startsWith("/")&&(Rt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let f=Di([r,c.relativePath]),h=n.concat(c);o.children&&o.children.length>0&&(Rt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),aw(o.children,t,h,f)),!(o.path==null&&!o.index)&&t.push({path:f,score:h_(f,o.index),routesMeta:h})};return e.forEach((o,l)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))i(o,l);else for(let c of lw(o.path))i(o,l,c)}),t}function lw(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let l=lw(r.join("/")),u=[];return u.push(...l.map(c=>c===""?o:[o,c].join("/"))),i&&u.push(...l),u.map(c=>e.startsWith("/")&&c===""?"/":c)}function o_(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:p_(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const a_=/^:[\w-]+$/,l_=3,u_=2,c_=1,d_=10,f_=-2,xv=e=>e==="*";function h_(e,t){let n=e.split("/"),r=n.length;return n.some(xv)&&(r+=f_),t&&(r+=u_),n.filter(i=>!xv(i)).reduce((i,o)=>i+(a_.test(o)?l_:o===""?c_:d_),r)}function p_(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function m_(e,t,n){let{routesMeta:r}=e,i={},o="/",l=[];for(let u=0;u<r.length;++u){let c=r[u],f=u===r.length-1,h=o==="/"?t:t.slice(o.length)||"/",p=Ph({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},h),v=c.route;if(!p)return null;Object.assign(i,p.params),l.push({params:i,pathname:Di([o,p.pathname]),pathnameBase:b_(Di([o,p.pathnameBase])),route:v}),p.pathnameBase!=="/"&&(o=Di([o,p.pathnameBase]))}return l}function Ph(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=g_(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],l=o.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((f,h,p)=>{let{paramName:v,isOptional:y}=h;if(v==="*"){let k=u[p]||"";l=o.slice(0,o.length-k.length).replace(/(.)\/+$/,"$1")}const b=u[p];return y&&!b?f[v]=void 0:f[v]=(b||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:e}}function g_(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Tp(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,c)=>(r.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function y_(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Tp(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Co(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function v_(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Ss(e):e;return{pathname:n?n.startsWith("/")?n:x_(n,t):t,search:k_(r),hash:S_(i)}}function x_(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function $f(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function w_(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Ip(e,t){let n=w_(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Pp(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=Ss(e):(i=Ka({},e),Rt(!i.pathname||!i.pathname.includes("?"),$f("?","pathname","search",i)),Rt(!i.pathname||!i.pathname.includes("#"),$f("#","pathname","hash",i)),Rt(!i.search||!i.search.includes("#"),$f("#","search","hash",i)));let o=e===""||i.pathname==="",l=o?"/":i.pathname,u;if(l==null)u=n;else{let p=t.length-1;if(!r&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),p-=1;i.pathname=v.join("/")}u=p>=0?t[p]:"/"}let c=v_(i,u),f=l&&l!=="/"&&l.endsWith("/"),h=(o||l===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(f||h)&&(c.pathname+="/"),c}const Di=e=>e.join("/").replace(/\/\/+/g,"/"),b_=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),k_=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,S_=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function E_(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const uw=["post","put","patch","delete"];new Set(uw);const __=["get",...uw];new Set(__);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ga(){return Ga=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ga.apply(this,arguments)}const Ec=w.createContext(null),cw=w.createContext(null),ti=w.createContext(null),_c=w.createContext(null),ni=w.createContext({outlet:null,matches:[],isDataRoute:!1}),dw=w.createContext(null);function C_(e,t){let{relative:n}=t===void 0?{}:t;Oo()||Rt(!1);let{basename:r,navigator:i}=w.useContext(ti),{hash:o,pathname:l,search:u}=Cc(e,{relative:n}),c=l;return r!=="/"&&(c=l==="/"?r:Di([r,l])),i.createHref({pathname:c,search:u,hash:o})}function Oo(){return w.useContext(_c)!=null}function ri(){return Oo()||Rt(!1),w.useContext(_c).location}function fw(e){w.useContext(ti).static||w.useLayoutEffect(e)}function Ap(){let{isDataRoute:e}=w.useContext(ni);return e?B_():j_()}function j_(){Oo()||Rt(!1);let e=w.useContext(Ec),{basename:t,future:n,navigator:r}=w.useContext(ti),{matches:i}=w.useContext(ni),{pathname:o}=ri(),l=JSON.stringify(Ip(i,n.v7_relativeSplatPath)),u=w.useRef(!1);return fw(()=>{u.current=!0}),w.useCallback(function(f,h){if(h===void 0&&(h={}),!u.current)return;if(typeof f=="number"){r.go(f);return}let p=Pp(f,JSON.parse(l),o,h.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:Di([t,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[t,r,l,o,e])}const N_=w.createContext(null);function T_(e){let t=w.useContext(ni).outlet;return t&&w.createElement(N_.Provider,{value:e},t)}function Cc(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=w.useContext(ti),{matches:i}=w.useContext(ni),{pathname:o}=ri(),l=JSON.stringify(Ip(i,r.v7_relativeSplatPath));return w.useMemo(()=>Pp(e,JSON.parse(l),o,n==="path"),[e,l,o,n])}function I_(e,t){return P_(e,t)}function P_(e,t,n,r){Oo()||Rt(!1);let{navigator:i}=w.useContext(ti),{matches:o}=w.useContext(ni),l=o[o.length-1],u=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let f=ri(),h;if(t){var p;let E=typeof t=="string"?Ss(t):t;c==="/"||(p=E.pathname)!=null&&p.startsWith(c)||Rt(!1),h=E}else h=f;let v=h.pathname||"/",y=v;if(c!=="/"){let E=c.replace(/^\//,"").split("/");y="/"+v.replace(/^\//,"").split("/").slice(E.length).join("/")}let b=i_(e,{pathname:y}),k=D_(b&&b.map(E=>Object.assign({},E,{params:Object.assign({},u,E.params),pathname:Di([c,i.encodeLocation?i.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?c:Di([c,i.encodeLocation?i.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),o,n,r);return t&&k?w.createElement(_c.Provider,{value:{location:Ga({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Ri.Pop}},k):k}function A_(){let e=z_(),t=E_(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},t),n?w.createElement("pre",{style:i},n):null,null)}const R_=w.createElement(A_,null);class O_ extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?w.createElement(ni.Provider,{value:this.props.routeContext},w.createElement(dw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function M_(e){let{routeContext:t,match:n,children:r}=e,i=w.useContext(Ec);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),w.createElement(ni.Provider,{value:t},r)}function D_(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let l=e,u=(i=n)==null?void 0:i.errors;if(u!=null){let h=l.findIndex(p=>p.route.id&&(u==null?void 0:u[p.route.id])!==void 0);h>=0||Rt(!1),l=l.slice(0,Math.min(l.length,h+1))}let c=!1,f=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<l.length;h++){let p=l[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(f=h),p.route.id){let{loaderData:v,errors:y}=n,b=p.route.loader&&v[p.route.id]===void 0&&(!y||y[p.route.id]===void 0);if(p.route.lazy||b){c=!0,f>=0?l=l.slice(0,f+1):l=[l[0]];break}}}return l.reduceRight((h,p,v)=>{let y,b=!1,k=null,E=null;n&&(y=u&&p.route.id?u[p.route.id]:void 0,k=p.route.errorElement||R_,c&&(f<0&&v===0?(U_("route-fallback"),b=!0,E=null):f===v&&(b=!0,E=p.route.hydrateFallbackElement||null)));let C=t.concat(l.slice(0,v+1)),_=()=>{let j;return y?j=k:b?j=E:p.route.Component?j=w.createElement(p.route.Component,null):p.route.element?j=p.route.element:j=h,w.createElement(M_,{match:p,routeContext:{outlet:h,matches:C,isDataRoute:n!=null},children:j})};return n&&(p.route.ErrorBoundary||p.route.errorElement||v===0)?w.createElement(O_,{location:n.location,revalidation:n.revalidation,component:k,error:y,children:_(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):_()},null)}var hw=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(hw||{}),pw=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(pw||{});function L_(e){let t=w.useContext(Ec);return t||Rt(!1),t}function $_(e){let t=w.useContext(cw);return t||Rt(!1),t}function F_(e){let t=w.useContext(ni);return t||Rt(!1),t}function mw(e){let t=F_(),n=t.matches[t.matches.length-1];return n.route.id||Rt(!1),n.route.id}function z_(){var e;let t=w.useContext(dw),n=$_(),r=mw();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function B_(){let{router:e}=L_(hw.UseNavigateStable),t=mw(pw.UseNavigateStable),n=w.useRef(!1);return fw(()=>{n.current=!0}),w.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,Ga({fromRouteId:t},o)))},[e,t])}const wv={};function U_(e,t,n){wv[e]||(wv[e]=!0)}function W_(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Ja(e){let{to:t,replace:n,state:r,relative:i}=e;Oo()||Rt(!1);let{future:o,static:l}=w.useContext(ti),{matches:u}=w.useContext(ni),{pathname:c}=ri(),f=Ap(),h=Pp(t,Ip(u,o.v7_relativeSplatPath),c,i==="path"),p=JSON.stringify(h);return w.useEffect(()=>f(JSON.parse(p),{replace:n,state:r,relative:i}),[f,p,i,n,r]),null}function gw(e){return T_(e.context)}function pn(e){Rt(!1)}function H_(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Ri.Pop,navigator:o,static:l=!1,future:u}=e;Oo()&&Rt(!1);let c=t.replace(/^\/*/,"/"),f=w.useMemo(()=>({basename:c,navigator:o,static:l,future:Ga({v7_relativeSplatPath:!1},u)}),[c,u,o,l]);typeof r=="string"&&(r=Ss(r));let{pathname:h="/",search:p="",hash:v="",state:y=null,key:b="default"}=r,k=w.useMemo(()=>{let E=Co(h,c);return E==null?null:{location:{pathname:E,search:p,hash:v,state:y,key:b},navigationType:i}},[c,h,p,v,y,b,i]);return k==null?null:w.createElement(ti.Provider,{value:f},w.createElement(_c.Provider,{children:n,value:k}))}function V_(e){let{children:t,location:n}=e;return I_(Ah(t),n)}new Promise(()=>{});function Ah(e,t){t===void 0&&(t=[]);let n=[];return w.Children.forEach(e,(r,i)=>{if(!w.isValidElement(r))return;let o=[...t,i];if(r.type===w.Fragment){n.push.apply(n,Ah(r.props.children,o));return}r.type!==pn&&Rt(!1),!r.props.index||!r.props.children||Rt(!1);let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Ah(r.props.children,o)),n.push(l)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tc(){return tc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tc.apply(this,arguments)}function yw(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function q_(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Y_(e,t){return e.button===0&&(!t||t==="_self")&&!q_(e)}function Rh(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function K_(e,t){let n=Rh(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(o=>{n.append(i,o)})}),n}const G_=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],J_=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Q_="6";try{window.__reactRouterVersion=Q_}catch{}const X_=w.createContext({isTransitioning:!1}),Z_="startTransition",bv=Zu[Z_];function eC(e){let{basename:t,children:n,future:r,window:i}=e,o=w.useRef();o.current==null&&(o.current=t_({window:i,v5Compat:!0}));let l=o.current,[u,c]=w.useState({action:l.action,location:l.location}),{v7_startTransition:f}=r||{},h=w.useCallback(p=>{f&&bv?bv(()=>c(p)):c(p)},[c,f]);return w.useLayoutEffect(()=>l.listen(h),[l,h]),w.useEffect(()=>W_(r),[r]),w.createElement(H_,{basename:t,children:n,location:u.location,navigationType:u.action,navigator:l,future:r})}const tC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",nC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Li=w.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:o,replace:l,state:u,target:c,to:f,preventScrollReset:h,viewTransition:p}=t,v=yw(t,G_),{basename:y}=w.useContext(ti),b,k=!1;if(typeof f=="string"&&nC.test(f)&&(b=f,tC))try{let j=new URL(window.location.href),I=f.startsWith("//")?new URL(j.protocol+f):new URL(f),M=Co(I.pathname,y);I.origin===j.origin&&M!=null?f=M+I.search+I.hash:k=!0}catch{}let E=C_(f,{relative:i}),C=iC(f,{replace:l,state:u,target:c,preventScrollReset:h,relative:i,viewTransition:p});function _(j){r&&r(j),j.defaultPrevented||C(j)}return w.createElement("a",tc({},v,{href:b||E,onClick:k||o?r:_,ref:n,target:c}))}),kv=w.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:i=!1,className:o="",end:l=!1,style:u,to:c,viewTransition:f,children:h}=t,p=yw(t,J_),v=Cc(c,{relative:p.relative}),y=ri(),b=w.useContext(cw),{navigator:k,basename:E}=w.useContext(ti),C=b!=null&&sC(v)&&f===!0,_=k.encodeLocation?k.encodeLocation(v).pathname:v.pathname,j=y.pathname,I=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;i||(j=j.toLowerCase(),I=I?I.toLowerCase():null,_=_.toLowerCase()),I&&E&&(I=Co(I,E)||I);const M=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let A=j===_||!l&&j.startsWith(_)&&j.charAt(M)==="/",B=I!=null&&(I===_||!l&&I.startsWith(_)&&I.charAt(_.length)==="/"),te={isActive:A,isPending:B,isTransitioning:C},H=A?r:void 0,O;typeof o=="function"?O=o(te):O=[o,A?"active":null,B?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let D=typeof u=="function"?u(te):u;return w.createElement(Li,tc({},p,{"aria-current":H,className:O,ref:n,style:D,to:c,viewTransition:f}),typeof h=="function"?h(te):h)});var Oh;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Oh||(Oh={}));var Sv;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Sv||(Sv={}));function rC(e){let t=w.useContext(Ec);return t||Rt(!1),t}function iC(e,t){let{target:n,replace:r,state:i,preventScrollReset:o,relative:l,viewTransition:u}=t===void 0?{}:t,c=Ap(),f=ri(),h=Cc(e,{relative:l});return w.useCallback(p=>{if(Y_(p,n)){p.preventDefault();let v=r!==void 0?r:ec(f)===ec(h);c(e,{replace:v,state:i,preventScrollReset:o,relative:l,viewTransition:u})}},[f,c,h,r,i,n,e,o,l,u])}function Mo(e){let t=w.useRef(Rh(e)),n=w.useRef(!1),r=ri(),i=w.useMemo(()=>K_(r.search,n.current?null:t.current),[r.search]),o=Ap(),l=w.useCallback((u,c)=>{const f=Rh(typeof u=="function"?u(i):u);n.current=!0,o("?"+f,c)},[o,i]);return[i,l]}function sC(e,t){t===void 0&&(t={});let n=w.useContext(X_);n==null&&Rt(!1);let{basename:r}=rC(Oh.useViewTransitionState),i=Cc(e,{relative:t.relative});if(!n.isTransitioning)return!1;let o=Co(n.currentLocation.pathname,r)||n.currentLocation.pathname,l=Co(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Ph(i.pathname,l)!=null||Ph(i.pathname,o)!=null}const vw=typeof document<"u"?Re.useLayoutEffect:()=>{};var Ff;const oC=(Ff=Re.useInsertionEffect)!==null&&Ff!==void 0?Ff:vw;function aC(e){const t=w.useRef(null);return oC(()=>{t.current=e},[e]),w.useCallback((...n)=>{const r=t.current;return r==null?void 0:r(...n)},[])}const Bi=e=>{var t;return(t=e==null?void 0:e.ownerDocument)!==null&&t!==void 0?t:document},gs=e=>e&&"window"in e&&e.window===e?e:Bi(e).defaultView||window;function lC(e){return e!==null&&typeof e=="object"&&"nodeType"in e&&typeof e.nodeType=="number"}function uC(e){return lC(e)&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in e}let cC=!1;function Rp(){return cC}function xw(e,t){if(!Rp())return t&&e?e.contains(t):!1;if(!e||!t)return!1;let n=t;for(;n!==null;){if(n===e)return!0;n.tagName==="SLOT"&&n.assignedSlot?n=n.assignedSlot.parentNode:uC(n)?n=n.host:n=n.parentNode}return!1}const Mh=(e=document)=>{var t;if(!Rp())return e.activeElement;let n=e.activeElement;for(;n&&"shadowRoot"in n&&(!((t=n.shadowRoot)===null||t===void 0)&&t.activeElement);)n=n.shadowRoot.activeElement;return n};function ww(e){return Rp()&&e.target.shadowRoot&&e.composedPath?e.composedPath()[0]:e.target}function bw(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=bw(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function ze(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=bw(e))&&(r&&(r+=" "),r+=t);return r}function dC(e){var t;if(typeof window>"u"||window.navigator==null)return!1;let n=(t=window.navigator.userAgentData)===null||t===void 0?void 0:t.brands;return Array.isArray(n)&&n.some(r=>e.test(r.brand))||e.test(window.navigator.userAgent)}function fC(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function kw(e){let t=null;return()=>(t==null&&(t=e()),t)}const hC=kw(function(){return fC(/^Mac/i)}),pC=kw(function(){return dC(/Android/i)});function Sw(){let e=w.useRef(new Map),t=w.useCallback((i,o,l,u)=>{let c=u!=null&&u.once?(...f)=>{e.current.delete(l),l(...f)}:l;e.current.set(l,{type:o,eventTarget:i,fn:c,options:u}),i.addEventListener(o,c,u)},[]),n=w.useCallback((i,o,l,u)=>{var c;let f=((c=e.current.get(l))===null||c===void 0?void 0:c.fn)||l;i.removeEventListener(o,f,u),e.current.delete(l)},[]),r=w.useCallback(()=>{e.current.forEach((i,o)=>{n(i.eventTarget,i.type,o,i.options)})},[n]);return w.useEffect(()=>r,[r]),{addGlobalListener:t,removeGlobalListener:n,removeAllGlobalListeners:r}}function mC(e){return e.pointerType===""&&e.isTrusted?!0:pC()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function Ew(e){let t=e;return t.nativeEvent=e,t.isDefaultPrevented=()=>t.defaultPrevented,t.isPropagationStopped=()=>t.cancelBubble,t.persist=()=>{},t}function gC(e,t){Object.defineProperty(e,"target",{value:t}),Object.defineProperty(e,"currentTarget",{value:t})}function _w(e){let t=w.useRef({isFocused:!1,observer:null});vw(()=>{const r=t.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]);let n=aC(r=>{e==null||e(r)});return w.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){t.current.isFocused=!0;let i=r.target,o=l=>{if(t.current.isFocused=!1,i.disabled){let u=Ew(l);n(u)}t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)};i.addEventListener("focusout",o,{once:!0}),t.current.observer=new MutationObserver(()=>{if(t.current.isFocused&&i.disabled){var l;(l=t.current.observer)===null||l===void 0||l.disconnect();let u=i===document.activeElement?null:document.activeElement;i.dispatchEvent(new FocusEvent("blur",{relatedTarget:u})),i.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:u}))}}),t.current.observer.observe(i,{attributes:!0,attributeFilter:["disabled"]})}},[n])}let yC=!1,al=null,Dh=new Set,Ma=new Map,xs=!1,Lh=!1;const vC={Tab:!0,Escape:!0};function Op(e,t){for(let n of Dh)n(e,t)}function xC(e){return!(e.metaKey||!hC()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function nc(e){xs=!0,xC(e)&&(al="keyboard",Op("keyboard",e))}function xo(e){al="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(xs=!0,Op("pointer",e))}function Cw(e){mC(e)&&(xs=!0,al="virtual")}function jw(e){e.target===window||e.target===document||yC||!e.isTrusted||(!xs&&!Lh&&(al="virtual",Op("virtual",e)),xs=!1,Lh=!1)}function Nw(){xs=!1,Lh=!0}function $h(e){if(typeof window>"u"||typeof document>"u"||Ma.get(gs(e)))return;const t=gs(e),n=Bi(e);let r=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){xs=!0,r.apply(this,arguments)},n.addEventListener("keydown",nc,!0),n.addEventListener("keyup",nc,!0),n.addEventListener("click",Cw,!0),t.addEventListener("focus",jw,!0),t.addEventListener("blur",Nw,!1),typeof PointerEvent<"u"&&(n.addEventListener("pointerdown",xo,!0),n.addEventListener("pointermove",xo,!0),n.addEventListener("pointerup",xo,!0)),t.addEventListener("beforeunload",()=>{Tw(e)},{once:!0}),Ma.set(t,{focus:r})}const Tw=(e,t)=>{const n=gs(e),r=Bi(e);t&&r.removeEventListener("DOMContentLoaded",t),Ma.has(n)&&(n.HTMLElement.prototype.focus=Ma.get(n).focus,r.removeEventListener("keydown",nc,!0),r.removeEventListener("keyup",nc,!0),r.removeEventListener("click",Cw,!0),n.removeEventListener("focus",jw,!0),n.removeEventListener("blur",Nw,!1),typeof PointerEvent<"u"&&(r.removeEventListener("pointerdown",xo,!0),r.removeEventListener("pointermove",xo,!0),r.removeEventListener("pointerup",xo,!0)),Ma.delete(n))};function wC(e){const t=Bi(e);let n;return t.readyState!=="loading"?$h(e):(n=()=>{$h(e)},t.addEventListener("DOMContentLoaded",n)),()=>Tw(e,n)}typeof document<"u"&&wC();function Iw(){return al!=="pointer"}const bC=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function kC(e,t,n){let r=Bi(n==null?void 0:n.target);const i=typeof window<"u"?gs(n==null?void 0:n.target).HTMLInputElement:HTMLInputElement,o=typeof window<"u"?gs(n==null?void 0:n.target).HTMLTextAreaElement:HTMLTextAreaElement,l=typeof window<"u"?gs(n==null?void 0:n.target).HTMLElement:HTMLElement,u=typeof window<"u"?gs(n==null?void 0:n.target).KeyboardEvent:KeyboardEvent;return e=e||r.activeElement instanceof i&&!bC.has(r.activeElement.type)||r.activeElement instanceof o||r.activeElement instanceof l&&r.activeElement.isContentEditable,!(e&&t==="keyboard"&&n instanceof u&&!vC[n.key])}function SC(e,t,n){$h(),w.useEffect(()=>{let r=(i,o)=>{kC(!!(n!=null&&n.isTextInput),i,o)&&e(Iw())};return Dh.add(r),()=>{Dh.delete(r)}},t)}function EC(e){let{isDisabled:t,onFocus:n,onBlur:r,onFocusChange:i}=e;const o=w.useCallback(c=>{if(c.target===c.currentTarget)return r&&r(c),i&&i(!1),!0},[r,i]),l=_w(o),u=w.useCallback(c=>{const f=Bi(c.target),h=f?Mh(f):Mh();c.target===c.currentTarget&&h===ww(c.nativeEvent)&&(n&&n(c),i&&i(!0),l(c))},[i,n,l]);return{focusProps:{onFocus:!t&&(n||i||r)?u:void 0,onBlur:!t&&(r||i)?o:void 0}}}function _C(e){let{isDisabled:t,onBlurWithin:n,onFocusWithin:r,onFocusWithinChange:i}=e,o=w.useRef({isFocusWithin:!1}),{addGlobalListener:l,removeAllGlobalListeners:u}=Sw(),c=w.useCallback(p=>{p.currentTarget.contains(p.target)&&o.current.isFocusWithin&&!p.currentTarget.contains(p.relatedTarget)&&(o.current.isFocusWithin=!1,u(),n&&n(p),i&&i(!1))},[n,i,o,u]),f=_w(c),h=w.useCallback(p=>{if(!p.currentTarget.contains(p.target))return;const v=Bi(p.target),y=Mh(v);if(!o.current.isFocusWithin&&y===ww(p.nativeEvent)){r&&r(p),i&&i(!0),o.current.isFocusWithin=!0,f(p);let b=p.currentTarget;l(v,"focus",k=>{if(o.current.isFocusWithin&&!xw(b,k.target)){let E=new v.defaultView.FocusEvent("blur",{relatedTarget:k.target});gC(E,b);let C=Ew(E);c(C)}},{capture:!0})}},[r,i,f,l,c]);return t?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:h,onBlur:c}}}let Fh=!1,Cu=0;function CC(){Fh=!0,setTimeout(()=>{Fh=!1},50)}function Ev(e){e.pointerType==="touch"&&CC()}function jC(){if(!(typeof document>"u"))return Cu===0&&typeof PointerEvent<"u"&&document.addEventListener("pointerup",Ev),Cu++,()=>{Cu--,!(Cu>0)&&typeof PointerEvent<"u"&&document.removeEventListener("pointerup",Ev)}}function NC(e){let{onHoverStart:t,onHoverChange:n,onHoverEnd:r,isDisabled:i}=e,[o,l]=w.useState(!1),u=w.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;w.useEffect(jC,[]);let{addGlobalListener:c,removeAllGlobalListeners:f}=Sw(),{hoverProps:h,triggerHoverEnd:p}=w.useMemo(()=>{let v=(k,E)=>{if(u.pointerType=E,i||E==="touch"||u.isHovered||!k.currentTarget.contains(k.target))return;u.isHovered=!0;let C=k.currentTarget;u.target=C,c(Bi(k.target),"pointerover",_=>{u.isHovered&&u.target&&!xw(u.target,_.target)&&y(_,_.pointerType)},{capture:!0}),t&&t({type:"hoverstart",target:C,pointerType:E}),n&&n(!0),l(!0)},y=(k,E)=>{let C=u.target;u.pointerType="",u.target=null,!(E==="touch"||!u.isHovered||!C)&&(u.isHovered=!1,f(),r&&r({type:"hoverend",target:C,pointerType:E}),n&&n(!1),l(!1))},b={};return typeof PointerEvent<"u"&&(b.onPointerEnter=k=>{Fh&&k.pointerType==="mouse"||v(k,k.pointerType)},b.onPointerLeave=k=>{!i&&k.currentTarget.contains(k.target)&&y(k,k.pointerType)}),{hoverProps:b,triggerHoverEnd:y}},[t,n,r,i,u,c,f]);return w.useEffect(()=>{i&&p({currentTarget:u.target},u.pointerType)},[i]),{hoverProps:h,isHovered:o}}function TC(e={}){let{autoFocus:t=!1,isTextInput:n,within:r}=e,i=w.useRef({isFocused:!1,isFocusVisible:t||Iw()}),[o,l]=w.useState(!1),[u,c]=w.useState(()=>i.current.isFocused&&i.current.isFocusVisible),f=w.useCallback(()=>c(i.current.isFocused&&i.current.isFocusVisible),[]),h=w.useCallback(y=>{i.current.isFocused=y,l(y),f()},[f]);SC(y=>{i.current.isFocusVisible=y,f()},[],{isTextInput:n});let{focusProps:p}=EC({isDisabled:r,onFocusChange:h}),{focusWithinProps:v}=_C({isDisabled:!r,onFocusWithinChange:h});return{isFocused:o,isFocusVisible:u,focusProps:r?v:p}}var IC=Object.defineProperty,PC=(e,t,n)=>t in e?IC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zf=(e,t,n)=>(PC(e,typeof t!="symbol"?t+"":t,n),n);let AC=class{constructor(){zf(this,"current",this.detect()),zf(this,"handoffState","pending"),zf(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Mr=new AC;function Es(e){var t;return Mr.isServer?null:e==null?document:(t=e==null?void 0:e.ownerDocument)!=null?t:document}function rc(e){var t,n;return Mr.isServer?null:e==null?document:(n=(t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))!=null?n:document}function Mp(e){var t,n;return(n=(t=rc(e))==null?void 0:t.activeElement)!=null?n:null}function Pw(e){return Mp(e)===e}function jc(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Mn(){let e=[],t={addEventListener(n,r,i,o){return n.addEventListener(r,i,o),t.add(()=>n.removeEventListener(r,i,o))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return jc(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},style(n,r,i){let o=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:i}),this.add(()=>{Object.assign(n.style,{[r]:o})})},group(n){let r=Mn();return n(r),this.add(()=>r.dispose())},add(n){return e.includes(n)||e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let i of e.splice(r,1))i()}},dispose(){for(let n of e.splice(0))n()}};return t}function _s(){let[e]=w.useState(Mn);return w.useEffect(()=>()=>e.dispose(),[e]),e}let Tt=(e,t)=>{Mr.isServer?w.useEffect(e,t):w.useLayoutEffect(e,t)};function Cs(e){let t=w.useRef(e);return Tt(()=>{t.current=e},[e]),t}let Ze=function(e){let t=Cs(e);return Re.useCallback((...n)=>t.current(...n),[t])};function RC(e){let t=e.width/2,n=e.height/2;return{top:e.clientY-n,right:e.clientX+t,bottom:e.clientY+n,left:e.clientX-t}}function OC(e,t){return!(!e||!t||e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom)}function MC({disabled:e=!1}={}){let t=w.useRef(null),[n,r]=w.useState(!1),i=_s(),o=Ze(()=>{t.current=null,r(!1),i.dispose()}),l=Ze(u=>{if(i.dispose(),t.current===null){t.current=u.currentTarget,r(!0);{let c=Es(u.currentTarget);i.addEventListener(c,"pointerup",o,!1),i.addEventListener(c,"pointermove",f=>{if(t.current){let h=RC(f);r(OC(h,t.current.getBoundingClientRect()))}},!1),i.addEventListener(c,"pointercancel",o,!1)}}});return{pressed:n,pressProps:e?{}:{onPointerDown:l,onPointerUp:o,onClick:o}}}function zr(e){return w.useMemo(()=>e,Object.values(e))}let DC=w.createContext(void 0);function Aw(){return w.useContext(DC)}function zh(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function br(e,t,...n){if(e in t){let i=t[e];return typeof i=="function"?i(...n):i}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(i=>`"${i}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,br),r}var jo=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(jo||{}),Oi=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Oi||{});function Vt(){let e=$C();return w.useCallback(t=>LC({mergeRefs:e,...t}),[e])}function LC({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:i,visible:o=!0,name:l,mergeRefs:u}){u=u??FC;let c=Rw(t,e);if(o)return ju(c,n,r,l,u);let f=i??0;if(f&2){let{static:h=!1,...p}=c;if(h)return ju(p,n,r,l,u)}if(f&1){let{unmount:h=!0,...p}=c;return br(h?0:1,{0(){return null},1(){return ju({...p,hidden:!0,style:{display:"none"}},n,r,l,u)}})}return ju(c,n,r,l,u)}function ju(e,t={},n,r,i){let{as:o=n,children:l,refName:u="ref",...c}=Bf(e,["unmount","static"]),f=e.ref!==void 0?{[u]:e.ref}:{},h=typeof l=="function"?l(t):l;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(t)),c["aria-labelledby"]&&c["aria-labelledby"]===c.id&&(c["aria-labelledby"]=void 0);let p={};if(t){let v=!1,y=[];for(let[b,k]of Object.entries(t))typeof k=="boolean"&&(v=!0),k===!0&&y.push(b.replace(/([A-Z])/g,E=>`-${E.toLowerCase()}`));if(v){p["data-headlessui-state"]=y.join(" ");for(let b of y)p[`data-${b}`]=""}}if(Da(o)&&(Object.keys(as(c)).length>0||Object.keys(as(p)).length>0))if(!w.isValidElement(h)||Array.isArray(h)&&h.length>1||BC(h)){if(Object.keys(as(c)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(as(c)).concat(Object.keys(as(p))).map(v=>`  - ${v}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(v=>`  - ${v}`).join(`
`)].join(`
`))}else{let v=h.props,y=v==null?void 0:v.className,b=typeof y=="function"?(...C)=>zh(y(...C),c.className):zh(y,c.className),k=b?{className:b}:{},E=Rw(h.props,as(Bf(c,["ref"])));for(let C in p)C in E&&delete p[C];return w.cloneElement(h,Object.assign({},E,p,f,{ref:i(zC(h),f.ref)},k))}return w.createElement(o,Object.assign({},Bf(c,["ref"]),!Da(o)&&f,!Da(o)&&p),h)}function $C(){let e=w.useRef([]),t=w.useCallback(n=>{for(let r of e.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return e.current=n,t}}function FC(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function Rw(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):t[i]=r[i];if(t.disabled||t["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[i=>{var o;return(o=i==null?void 0:i.preventDefault)==null?void 0:o.call(i)}]);for(let r in n)Object.assign(t,{[r](i,...o){let l=n[r];for(let u of l){if((i instanceof Event||(i==null?void 0:i.nativeEvent)instanceof Event)&&i.defaultPrevented)return;u(i,...o)}}});return t}function Ow(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):t[i]=r[i];for(let r in n)Object.assign(t,{[r](...i){let o=n[r];for(let l of o)l==null||l(...i)}});return t}function Mt(e){var t;return Object.assign(w.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function as(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function Bf(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function zC(e){return Re.version.split(".")[0]>="19"?e.props.ref:e.ref}function Da(e){return e===w.Fragment||e===Symbol.for("react.fragment")}function BC(e){return Da(e.type)}let UC="span";var ic=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(ic||{});function WC(e,t){var n;let{features:r=1,...i}=e,o={ref:t,"aria-hidden":(r&2)===2?!0:(n=i["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return Vt()({ourProps:o,theirProps:i,slot:{},defaultTag:UC,name:"Hidden"})}let Bh=Mt(WC),HC=w.createContext(void 0);function VC(){return w.useContext(HC)}function Mw(e){return typeof e!="object"||e===null?!1:"nodeType"in e}function ei(e){return Mw(e)&&"tagName"in e}function Gn(e){return ei(e)&&"accessKey"in e}function Or(e){return ei(e)&&"tabIndex"in e}function qC(e){return ei(e)&&"style"in e}function YC(e){return Gn(e)&&e.nodeName==="IFRAME"}function Dw(e){return Gn(e)&&e.nodeName==="INPUT"}function _v(e){return Gn(e)&&e.nodeName==="LABEL"}function KC(e){return Gn(e)&&e.nodeName==="FIELDSET"}function Lw(e){return Gn(e)&&e.nodeName==="LEGEND"}function GC(e){return ei(e)?e.matches('a[href],audio[controls],button,details,embed,iframe,img[usemap],input:not([type="hidden"]),label,select,textarea,video[controls]'):!1}function Cv(e){let t=e.parentElement,n=null;for(;t&&!KC(t);)Lw(t)&&(n=t),t=t.parentElement;let r=(t==null?void 0:t.getAttribute("disabled"))==="";return r&&JC(n)?!1:r}function JC(e){if(!e)return!1;let t=e.previousElementSibling;for(;t!==null;){if(Lw(t))return!1;t=t.previousElementSibling}return!0}let $w=Symbol();function QC(e,t=!0){return Object.assign(e,{[$w]:t})}function _n(...e){let t=w.useRef(e);w.useEffect(()=>{t.current=e},[e]);let n=Ze(r=>{for(let i of t.current)i!=null&&(typeof i=="function"?i(r):i.current=r)});return e.every(r=>r==null||(r==null?void 0:r[$w]))?void 0:n}let Dp=w.createContext(null);Dp.displayName="DescriptionContext";function Fw(){let e=w.useContext(Dp);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,Fw),t}return e}function zw(){let[e,t]=w.useState([]);return[e.length>0?e.join(" "):void 0,w.useMemo(()=>function(n){let r=Ze(o=>(t(l=>[...l,o]),()=>t(l=>{let u=l.slice(),c=u.indexOf(o);return c!==-1&&u.splice(c,1),u}))),i=w.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return Re.createElement(Dp.Provider,{value:i},n.children)},[t])]}let XC="p";function ZC(e,t){let n=w.useId(),r=Aw(),{id:i=`headlessui-description-${n}`,...o}=e,l=Fw(),u=_n(t);Tt(()=>l.register(i),[i,l.register]);let c=zr({...l.slot,disabled:r||!1}),f={ref:u,...l.props,id:i};return Vt()({ourProps:f,theirProps:o,slot:c,defaultTag:XC,name:l.name||"Description"})}let ej=Mt(ZC),tj=Object.assign(ej,{});var nn=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(nn||{});let Nc=w.createContext(null);Nc.displayName="LabelContext";function Lp(){let e=w.useContext(Nc);if(e===null){let t=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,Lp),t}return e}function nj(e){var t,n,r;let i=(n=(t=w.useContext(Nc))==null?void 0:t.value)!=null?n:void 0;return((r=void 0)!=null?r:0)>0?[i,...e].filter(Boolean).join(" "):i}function Bw({inherit:e=!1}={}){let t=nj(),[n,r]=w.useState([]),i=e?[t,...n].filter(Boolean):n;return[i.length>0?i.join(" "):void 0,w.useMemo(()=>function(o){let l=Ze(c=>(r(f=>[...f,c]),()=>r(f=>{let h=f.slice(),p=h.indexOf(c);return p!==-1&&h.splice(p,1),h}))),u=w.useMemo(()=>({register:l,slot:o.slot,name:o.name,props:o.props,value:o.value}),[l,o.slot,o.name,o.props,o.value]);return Re.createElement(Nc.Provider,{value:u},o.children)},[r])]}let rj="label";function ij(e,t){var n;let r=w.useId(),i=Lp(),o=VC(),l=Aw(),{id:u=`headlessui-label-${r}`,htmlFor:c=o??((n=i.props)==null?void 0:n.htmlFor),passive:f=!1,...h}=e,p=_n(t);Tt(()=>i.register(u),[u,i.register]);let v=Ze(k=>{let E=k.currentTarget;if(!(k.target!==k.currentTarget&&GC(k.target))&&(_v(E)&&k.preventDefault(),i.props&&"onClick"in i.props&&typeof i.props.onClick=="function"&&i.props.onClick(k),_v(E))){let C=document.getElementById(E.htmlFor);if(C){let _=C.getAttribute("disabled");if(_==="true"||_==="")return;let j=C.getAttribute("aria-disabled");if(j==="true"||j==="")return;(Dw(C)&&(C.type==="file"||C.type==="radio"||C.type==="checkbox")||C.role==="radio"||C.role==="checkbox"||C.role==="switch")&&C.click(),C.focus({preventScroll:!0})}}}),y=zr({...i.slot,disabled:l||!1}),b={ref:p,...i.props,id:u,htmlFor:c,onClick:v};return f&&("onClick"in b&&(delete b.htmlFor,delete b.onClick),"onClick"in h&&delete h.onClick),Vt()({ourProps:b,theirProps:h,slot:y,defaultTag:c?rj:"div",name:i.name||"Label"})}let sj=Mt(ij);Object.assign(sj,{});let oj=w.createContext(()=>{});function aj({value:e,children:t}){return Re.createElement(oj.Provider,{value:e},t)}function jv(e){if(e===null)return{width:0,height:0};let{width:t,height:n}=e.getBoundingClientRect();return{width:t,height:n}}function lj(e,t,n=!1){let[r,i]=w.useState(()=>jv(t));return Tt(()=>{if(!t||!e)return;let o=Mn();return o.requestAnimationFrame(function l(){o.requestAnimationFrame(l),i(u=>{let c=jv(t);return c.width===u.width&&c.height===u.height?u:c})}),()=>{o.dispose()}},[t,e]),n?{width:`${r.width}px`,height:`${r.height}px`}:r}var Uw=(e=>(e[e.Left=0]="Left",e[e.Right=2]="Right",e))(Uw||{});function uj(e){let t=w.useRef(null),n=Ze(i=>{t.current=i.pointerType,!Cv(i.currentTarget)&&i.pointerType==="mouse"&&i.button===Uw.Left&&(i.preventDefault(),e(i))}),r=Ze(i=>{t.current!=="mouse"&&(Cv(i.currentTarget)||e(i))});return{onPointerDown:n,onClick:r}}let Ww=class extends Map{constructor(t){super(),this.factory=t}get(t){let n=super.get(t);return n===void 0&&(n=this.factory(t),this.set(t,n)),n}};var cj=Object.defineProperty,dj=(e,t,n)=>t in e?cj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fj=(e,t,n)=>(dj(e,t+"",n),n),Hw=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},rr=(e,t,n)=>(Hw(e,t,"read from private field"),n?n.call(e):t.get(e)),Uf=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Nv=(e,t,n,r)=>(Hw(e,t,"write to private field"),t.set(e,n),n),Pr,Ia,Pa;let Vw=class{constructor(t){Uf(this,Pr,{}),Uf(this,Ia,new Ww(()=>new Set)),Uf(this,Pa,new Set),fj(this,"disposables",Mn()),Nv(this,Pr,t),Mr.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return rr(this,Pr)}subscribe(t,n){if(Mr.isServer)return()=>{};let r={selector:t,callback:n,current:t(rr(this,Pr))};return rr(this,Pa).add(r),this.disposables.add(()=>{rr(this,Pa).delete(r)})}on(t,n){return Mr.isServer?()=>{}:(rr(this,Ia).get(t).add(n),this.disposables.add(()=>{rr(this,Ia).get(t).delete(n)}))}send(t){let n=this.reduce(rr(this,Pr),t);if(n!==rr(this,Pr)){Nv(this,Pr,n);for(let r of rr(this,Pa)){let i=r.selector(rr(this,Pr));qw(r.current,i)||(r.current=i,r.callback(i))}for(let r of rr(this,Ia).get(t.type))r(rr(this,Pr),t)}}};Pr=new WeakMap,Ia=new WeakMap,Pa=new WeakMap;function qw(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:Array.isArray(e)&&Array.isArray(t)?e.length!==t.length?!1:Wf(e[Symbol.iterator](),t[Symbol.iterator]()):e instanceof Map&&t instanceof Map||e instanceof Set&&t instanceof Set?e.size!==t.size?!1:Wf(e.entries(),t.entries()):Tv(e)&&Tv(t)?Wf(Object.entries(e)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()):!1}function Wf(e,t){do{let n=e.next(),r=t.next();if(n.done&&r.done)return!0;if(n.done||r.done||!Object.is(n.value,r.value))return!1}while(!0)}function Tv(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||Object.getPrototypeOf(t)===null}function Iv(e){let[t,n]=e(),r=Mn();return(...i)=>{t(...i),r.dispose(),r.microTask(n)}}var hj=Object.defineProperty,pj=(e,t,n)=>t in e?hj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Pv=(e,t,n)=>(pj(e,typeof t!="symbol"?t+"":t,n),n),Yw=(e=>(e[e.Push=0]="Push",e[e.Pop=1]="Pop",e))(Yw||{});let mj={0(e,t){let n=t.id,r=e.stack,i=e.stack.indexOf(n);if(i!==-1){let o=e.stack.slice();return o.splice(i,1),o.push(n),r=o,{...e,stack:r}}return{...e,stack:[...e.stack,n]}},1(e,t){let n=t.id,r=e.stack.indexOf(n);if(r===-1)return e;let i=e.stack.slice();return i.splice(r,1),{...e,stack:i}}},gj=class Kw extends Vw{constructor(){super(...arguments),Pv(this,"actions",{push:t=>this.send({type:0,id:t}),pop:t=>this.send({type:1,id:t})}),Pv(this,"selectors",{isTop:(t,n)=>t.stack[t.stack.length-1]===n,inStack:(t,n)=>t.stack.includes(n)})}static new(){return new Kw({stack:[]})}reduce(t,n){return br(n.type,mj,t,n)}};const Tc=new Ww(()=>gj.new());var Hf={exports:{}},Vf={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Av;function yj(){if(Av)return Vf;Av=1;var e=Sc();function t(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,o=e.useEffect,l=e.useMemo,u=e.useDebugValue;return Vf.useSyncExternalStoreWithSelector=function(c,f,h,p,v){var y=i(null);if(y.current===null){var b={hasValue:!1,value:null};y.current=b}else b=y.current;y=l(function(){function E(M){if(!C){if(C=!0,_=M,M=p(M),v!==void 0&&b.hasValue){var A=b.value;if(v(A,M))return j=A}return j=M}if(A=j,n(_,M))return A;var B=p(M);return v!==void 0&&v(A,B)?(_=M,A):(_=M,j=B)}var C=!1,_,j,I=h===void 0?null:h;return[function(){return E(f())},I===null?void 0:function(){return E(I())}]},[f,h,p,v]);var k=r(c,y[0],y[1]);return o(function(){b.hasValue=!0,b.value=k},[k]),u(k),k},Vf}var Rv;function vj(){return Rv||(Rv=1,Hf.exports=yj()),Hf.exports}var xj=vj();function or(e,t,n=qw){return xj.useSyncExternalStoreWithSelector(Ze(r=>e.subscribe(wj,r)),Ze(()=>e.state),Ze(()=>e.state),Ze(t),n)}function wj(e){return e}function ll(e,t){let n=w.useId(),r=Tc.get(t),[i,o]=or(r,w.useCallback(l=>[r.selectors.isTop(l,n),r.selectors.inStack(l,n)],[r,n]));return Tt(()=>{if(e)return r.actions.push(n),()=>r.actions.pop(n)},[r,e,n]),e?o?i:!0:!1}let Uh=new Map,La=new Map;function Ov(e){var t;let n=(t=La.get(e))!=null?t:0;return La.set(e,n+1),n!==0?()=>Mv(e):(Uh.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>Mv(e))}function Mv(e){var t;let n=(t=La.get(e))!=null?t:1;if(n===1?La.delete(e):La.set(e,n-1),n!==1)return;let r=Uh.get(e);r&&(r["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r["aria-hidden"]),e.inert=r.inert,Uh.delete(e))}function Gw(e,{allowed:t,disallowed:n}={}){let r=ll(e,"inert-others");Tt(()=>{var i,o;if(!r)return;let l=Mn();for(let c of(i=n==null?void 0:n())!=null?i:[])c&&l.add(Ov(c));let u=(o=t==null?void 0:t())!=null?o:[];for(let c of u){if(!c)continue;let f=Es(c);if(!f)continue;let h=c.parentElement;for(;h&&h!==f.body;){for(let p of h.children)u.some(v=>p.contains(v))||l.add(Ov(p));h=h.parentElement}}return l.dispose},[r,t,n])}function Jw(e,t,n){let r=Cs(i=>{let o=i.getBoundingClientRect();o.x===0&&o.y===0&&o.width===0&&o.height===0&&n()});w.useEffect(()=>{if(!e)return;let i=t===null?null:Gn(t)?t:t.current;if(!i)return;let o=Mn();if(typeof ResizeObserver<"u"){let l=new ResizeObserver(()=>r.current(i));l.observe(i),o.add(()=>l.disconnect())}if(typeof IntersectionObserver<"u"){let l=new IntersectionObserver(()=>r.current(i));l.observe(i),o.add(()=>l.disconnect())}return()=>o.dispose()},[t,r,e])}let sc=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","details>summary","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),bj=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var xr=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(xr||{}),Wh=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Wh||{}),kj=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(kj||{});function Qw(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(sc)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function Sj(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(bj)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var $p=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))($p||{});function Fp(e,t=0){var n;return e===((n=Es(e))==null?void 0:n.body)?!1:br(t,{0(){return e.matches(sc)},1(){let r=e;for(;r!==null;){if(r.matches(sc))return!0;r=r.parentElement}return!1}})}function Xw(e){Mn().nextFrame(()=>{let t=Mp(e);t&&Or(t)&&!Fp(t,0)&&Dr(e)})}var Ej=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(Ej||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Dr(e){e==null||e.focus({preventScroll:!0})}let _j=["textarea","input"].join(",");function Cj(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,_j))!=null?n:!1}function Zw(e,t=n=>n){return e.slice().sort((n,r)=>{let i=t(n),o=t(r);if(i===null||o===null)return 0;let l=i.compareDocumentPosition(o);return l&Node.DOCUMENT_POSITION_FOLLOWING?-1:l&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function jj(e,t,n=e===null?document.body:rc(e)){return wo(Qw(n),t,{relativeTo:e})}function wo(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:i=[]}={}){let o=Array.isArray(e)?e.length>0?rc(e[0]):document:rc(e),l=Array.isArray(e)?n?Zw(e):e:t&64?Sj(e):Qw(e);i.length>0&&l.length>1&&(l=l.filter(y=>!i.some(b=>b!=null&&"current"in b?(b==null?void 0:b.current)===y:b===y))),r=r??(o==null?void 0:o.activeElement);let u=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,l.indexOf(r))-1;if(t&4)return Math.max(0,l.indexOf(r))+1;if(t&8)return l.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),f=t&32?{preventScroll:!0}:{},h=0,p=l.length,v;do{if(h>=p||h+p<=0)return 0;let y=c+h;if(t&16)y=(y+p)%p;else{if(y<0)return 3;if(y>=p)return 1}v=l[y],v==null||v.focus(f),h+=u}while(v!==Mp(v));return t&6&&Cj(v)&&v.select(),2}function eb(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function Nj(){return/Android/gi.test(window.navigator.userAgent)}function Dv(){return eb()||Nj()}function yo(e,t,n,r){let i=Cs(n);w.useEffect(()=>{if(!e)return;function o(l){i.current(l)}return document.addEventListener(t,o,r),()=>document.removeEventListener(t,o,r)},[e,t,r])}function tb(e,t,n,r){let i=Cs(n);w.useEffect(()=>{if(!e)return;function o(l){i.current(l)}return window.addEventListener(t,o,r),()=>window.removeEventListener(t,o,r)},[e,t,r])}const Lv=30;function nb(e,t,n){let r=Cs(n),i=w.useCallback(function(u,c){if(u.defaultPrevented)return;let f=c(u);if(f===null||!f.getRootNode().contains(f)||!f.isConnected)return;let h=(function p(v){return typeof v=="function"?p(v()):Array.isArray(v)||v instanceof Set?v:[v]})(t);for(let p of h)if(p!==null&&(p.contains(f)||u.composed&&u.composedPath().includes(p)))return;return!Fp(f,$p.Loose)&&f.tabIndex!==-1&&u.preventDefault(),r.current(u,f)},[r,t]),o=w.useRef(null);yo(e,"pointerdown",u=>{var c,f;Dv()||(o.current=((f=(c=u.composedPath)==null?void 0:c.call(u))==null?void 0:f[0])||u.target)},!0),yo(e,"pointerup",u=>{if(Dv()||!o.current)return;let c=o.current;return o.current=null,i(u,()=>c)},!0);let l=w.useRef({x:0,y:0});yo(e,"touchstart",u=>{l.current.x=u.touches[0].clientX,l.current.y=u.touches[0].clientY},!0),yo(e,"touchend",u=>{let c={x:u.changedTouches[0].clientX,y:u.changedTouches[0].clientY};if(!(Math.abs(c.x-l.current.x)>=Lv||Math.abs(c.y-l.current.y)>=Lv))return i(u,()=>Or(u.target)?u.target:null)},!0),tb(e,"blur",u=>i(u,()=>YC(window.document.activeElement)?window.document.activeElement:null),!0)}function Qa(...e){return w.useMemo(()=>Es(...e),[...e])}var Tj=(e=>(e[e.Ignore=0]="Ignore",e[e.Select=1]="Select",e[e.Close=2]="Close",e))(Tj||{});const Nu={Ignore:{kind:0},Select:e=>({kind:1,target:e}),Close:{kind:2}},Ij=200,$v=5;function Pj(e,{trigger:t,action:n,close:r,select:i}){let o=w.useRef(null),l=w.useRef(null),u=w.useRef(null);yo(e&&t!==null,"pointerdown",c=>{Mw(c==null?void 0:c.target)&&t!=null&&t.contains(c.target)&&(l.current=c.x,u.current=c.y,o.current=c.timeStamp)}),yo(e&&t!==null,"pointerup",c=>{var f,h;let p=o.current;if(p===null||(o.current=null,!Or(c.target))||Math.abs(c.x-((f=l.current)!=null?f:c.x))<$v&&Math.abs(c.y-((h=u.current)!=null?h:c.y))<$v)return;let v=n(c);switch(v.kind){case 0:return;case 1:{c.timeStamp-p>Ij&&(i(v.target),r());break}case 2:{r();break}}},{capture:!0})}function rb(e,t,n,r){let i=Cs(n);w.useEffect(()=>{e=e??window;function o(l){i.current(l)}return e.addEventListener(t,o,r),()=>e.removeEventListener(t,o,r)},[e,t,r])}function Aj(e,t){return w.useMemo(()=>{var n;if(e.type)return e.type;let r=(n=e.as)!=null?n:"button";if(typeof r=="string"&&r.toLowerCase()==="button"||(t==null?void 0:t.tagName)==="BUTTON"&&!t.hasAttribute("type"))return"button"},[e.type,e.as,t])}function Rj(e){return w.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}function Oj(e,t){let n=e(),r=new Set;return{getSnapshot(){return n},subscribe(i){return r.add(i),()=>r.delete(i)},dispatch(i,...o){let l=t[i].call(n,...o);l&&(n=l,r.forEach(u=>u()))}}}function Mj(){let e;return{before({doc:t}){var n;let r=t.documentElement,i=(n=t.defaultView)!=null?n:window;e=Math.max(0,i.innerWidth-r.clientWidth)},after({doc:t,d:n}){let r=t.documentElement,i=Math.max(0,r.clientWidth-r.offsetWidth),o=Math.max(0,e-i);n.style(r,"paddingRight",`${o}px`)}}}function Dj(){return eb()?{before({doc:e,d:t,meta:n}){function r(i){for(let o of n().containers)for(let l of o())if(l.contains(i))return!0;return!1}t.microTask(()=>{var i;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let u=Mn();u.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>u.dispose()))}let o=(i=window.scrollY)!=null?i:window.pageYOffset,l=null;t.addEventListener(e,"click",u=>{if(Or(u.target))try{let c=u.target.closest("a");if(!c)return;let{hash:f}=new URL(c.href),h=e.querySelector(f);Or(h)&&!r(h)&&(l=h)}catch{}},!0),t.group(u=>{t.addEventListener(e,"touchstart",c=>{if(u.dispose(),Or(c.target)&&qC(c.target))if(r(c.target)){let f=c.target;for(;f.parentElement&&r(f.parentElement);)f=f.parentElement;u.style(f,"overscrollBehavior","contain")}else u.style(c.target,"touchAction","none")})}),t.addEventListener(e,"touchmove",u=>{if(Or(u.target)){if(Dw(u.target))return;if(r(u.target)){let c=u.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&u.preventDefault()}else u.preventDefault()}},{passive:!1}),t.add(()=>{var u;let c=(u=window.scrollY)!=null?u:window.pageYOffset;o!==c&&window.scrollTo(0,o),l&&l.isConnected&&(l.scrollIntoView({block:"nearest"}),l=null)})})}}:{}}function Lj(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function Fv(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let ys=Oj(()=>new Map,{PUSH(e,t){var n;let r=(n=this.get(e))!=null?n:{doc:e,count:0,d:Mn(),meta:new Set,computedMeta:{}};return r.count++,r.meta.add(t),r.computedMeta=Fv(r.meta),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t),n.computedMeta=Fv(n.meta)),this},SCROLL_PREVENT(e){let t={doc:e.doc,d:e.d,meta(){return e.computedMeta}},n=[Dj(),Mj(),Lj()];n.forEach(({before:r})=>r==null?void 0:r(t)),n.forEach(({after:r})=>r==null?void 0:r(t))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});ys.subscribe(()=>{let e=ys.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let r=t.get(n.doc)==="hidden",i=n.count!==0;(i&&!r||!i&&r)&&ys.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&ys.dispatch("TEARDOWN",n)}});function $j(e,t,n=()=>({containers:[]})){let r=Rj(ys),i=t?r.get(t):void 0,o=i?i.count>0:!1;return Tt(()=>{if(!(!t||!e))return ys.dispatch("PUSH",t,n),()=>ys.dispatch("POP",t,n)},[e,t]),o}function ib(e,t,n=()=>[document.body]){let r=ll(e,"scroll-lock");$j(r,t,i=>{var o;return{containers:[...(o=i.containers)!=null?o:[],n]}})}function zv(e){return[e.screenX,e.screenY]}function Fj(){let e=w.useRef([-1,-1]);return{wasMoved(t){let n=zv(t);return e.current[0]===n[0]&&e.current[1]===n[1]?!1:(e.current=n,!0)},update(t){e.current=zv(t)}}}function zj(e=0){let[t,n]=w.useState(e),r=w.useCallback(c=>n(c),[]),i=w.useCallback(c=>n(f=>f|c),[]),o=w.useCallback(c=>(t&c)===c,[t]),l=w.useCallback(c=>n(f=>f&~c),[]),u=w.useCallback(c=>n(f=>f^c),[]);return{flags:t,setFlag:r,addFlag:i,hasFlag:o,removeFlag:l,toggleFlag:u}}var Bj={},Bv,Uv;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((Bv=process==null?void 0:Bj)==null?void 0:Bv.NODE_ENV)==="test"&&typeof((Uv=Element==null?void 0:Element.prototype)==null?void 0:Uv.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var Uj=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(Uj||{});function sb(e){let t={};for(let n in e)e[n]===!0&&(t[`data-${n}`]="");return t}function ob(e,t,n,r){let[i,o]=w.useState(n),{hasFlag:l,addFlag:u,removeFlag:c}=zj(e&&i?3:0),f=w.useRef(!1),h=w.useRef(!1),p=_s();return Tt(()=>{var v;if(e){if(n&&o(!0),!t){n&&u(3);return}return(v=r==null?void 0:r.start)==null||v.call(r,n),Wj(t,{inFlight:f,prepare(){h.current?h.current=!1:h.current=f.current,f.current=!0,!h.current&&(n?(u(3),c(4)):(u(4),c(2)))},run(){h.current?n?(c(3),u(4)):(c(4),u(3)):n?c(1):u(1)},done(){var y;h.current&&qj(t)||(f.current=!1,c(7),n||o(!1),(y=r==null?void 0:r.end)==null||y.call(r,n))}})}},[e,n,t,p]),e?[i,{closed:l(1),enter:l(2),leave:l(4),transition:l(2)||l(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function Wj(e,{prepare:t,run:n,done:r,inFlight:i}){let o=Mn();return Vj(e,{prepare:t,inFlight:i}),o.nextFrame(()=>{n(),o.requestAnimationFrame(()=>{o.add(Hj(e,r))})}),o.dispose}function Hj(e,t){var n,r;let i=Mn();if(!e)return i.dispose;let o=!1;i.add(()=>{o=!0});let l=(r=(n=e.getAnimations)==null?void 0:n.call(e).filter(u=>u instanceof CSSTransition))!=null?r:[];return l.length===0?(t(),i.dispose):(Promise.allSettled(l.map(u=>u.finished)).then(()=>{o||t()}),i.dispose)}function Vj(e,{inFlight:t,prepare:n}){if(t!=null&&t.current){n();return}let r=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=r}function qj(e){var t,n;return((n=(t=e.getAnimations)==null?void 0:t.call(e))!=null?n:[]).some(r=>r instanceof CSSTransition&&r.playState!=="finished")}function Yj(e,{container:t,accept:n,walk:r}){let i=w.useRef(n),o=w.useRef(r);w.useEffect(()=>{i.current=n,o.current=r},[n,r]),Tt(()=>{if(!t||!e)return;let l=Es(t);if(!l)return;let u=i.current,c=o.current,f=Object.assign(p=>u(p),{acceptNode:u}),h=l.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,f,!1);for(;h.nextNode();)c(h.currentNode)},[t,e,i,o])}function zp(e,t){let n=w.useRef([]),r=Ze(e);w.useEffect(()=>{let i=[...n.current];for(let[o,l]of t.entries())if(n.current[o]!==l){let u=r(t,i);return n.current=t,u}},[r,...t])}function Ic(){return typeof window<"u"}function Do(e){return ab(e)?(e.nodeName||"").toLowerCase():"#document"}function Yn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Br(e){var t;return(t=(ab(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function ab(e){return Ic()?e instanceof Node||e instanceof Yn(e).Node:!1}function Sn(e){return Ic()?e instanceof Element||e instanceof Yn(e).Element:!1}function $r(e){return Ic()?e instanceof HTMLElement||e instanceof Yn(e).HTMLElement:!1}function Wv(e){return!Ic()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Yn(e).ShadowRoot}const Kj=new Set(["inline","contents"]);function ul(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=kr(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!Kj.has(i)}const Gj=new Set(["table","td","th"]);function Jj(e){return Gj.has(Do(e))}const Qj=[":popover-open",":modal"];function Pc(e){return Qj.some(t=>{try{return e.matches(t)}catch{return!1}})}const Xj=["transform","translate","scale","rotate","perspective"],Zj=["transform","translate","scale","rotate","perspective","filter"],eN=["paint","layout","strict","content"];function Bp(e){const t=Up(),n=Sn(e)?kr(e):e;return Xj.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||Zj.some(r=>(n.willChange||"").includes(r))||eN.some(r=>(n.contain||"").includes(r))}function tN(e){let t=$i(e);for(;$r(t)&&!No(t);){if(Bp(t))return t;if(Pc(t))return null;t=$i(t)}return null}function Up(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const nN=new Set(["html","body","#document"]);function No(e){return nN.has(Do(e))}function kr(e){return Yn(e).getComputedStyle(e)}function Ac(e){return Sn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function $i(e){if(Do(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Wv(e)&&e.host||Br(e);return Wv(t)?t.host:t}function lb(e){const t=$i(e);return No(t)?e.ownerDocument?e.ownerDocument.body:e.body:$r(t)&&ul(t)?t:lb(t)}function Xa(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=lb(e),o=i===((r=e.ownerDocument)==null?void 0:r.body),l=Yn(i);if(o){const u=Hh(l);return t.concat(l,l.visualViewport||[],ul(i)?i:[],u&&n?Xa(u):[])}return t.concat(i,Xa(i,[],n))}function Hh(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function rN(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}const ws=Math.min,gn=Math.max,Za=Math.round,Tu=Math.floor,Lr=e=>({x:e,y:e}),iN={left:"right",right:"left",bottom:"top",top:"bottom"},sN={start:"end",end:"start"};function Hv(e,t,n){return gn(e,ws(t,n))}function Lo(e,t){return typeof e=="function"?e(t):e}function Fi(e){return e.split("-")[0]}function cl(e){return e.split("-")[1]}function ub(e){return e==="x"?"y":"x"}function cb(e){return e==="y"?"height":"width"}const oN=new Set(["top","bottom"]);function Zr(e){return oN.has(Fi(e))?"y":"x"}function db(e){return ub(Zr(e))}function aN(e,t,n){n===void 0&&(n=!1);const r=cl(e),i=db(e),o=cb(i);let l=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(l=oc(l)),[l,oc(l)]}function lN(e){const t=oc(e);return[Vh(e),t,Vh(t)]}function Vh(e){return e.replace(/start|end/g,t=>sN[t])}const Vv=["left","right"],qv=["right","left"],uN=["top","bottom"],cN=["bottom","top"];function dN(e,t,n){switch(e){case"top":case"bottom":return n?t?qv:Vv:t?Vv:qv;case"left":case"right":return t?uN:cN;default:return[]}}function fN(e,t,n,r){const i=cl(e);let o=dN(Fi(e),n==="start",r);return i&&(o=o.map(l=>l+"-"+i),t&&(o=o.concat(o.map(Vh)))),o}function oc(e){return e.replace(/left|right|bottom|top/g,t=>iN[t])}function hN(e){return{top:0,right:0,bottom:0,left:0,...e}}function pN(e){return typeof e!="number"?hN(e):{top:e,right:e,bottom:e,left:e}}function ac(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function Yv(e,t,n){let{reference:r,floating:i}=e;const o=Zr(t),l=db(t),u=cb(l),c=Fi(t),f=o==="y",h=r.x+r.width/2-i.width/2,p=r.y+r.height/2-i.height/2,v=r[u]/2-i[u]/2;let y;switch(c){case"top":y={x:h,y:r.y-i.height};break;case"bottom":y={x:h,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:p};break;case"left":y={x:r.x-i.width,y:p};break;default:y={x:r.x,y:r.y}}switch(cl(t)){case"start":y[l]-=v*(n&&f?-1:1);break;case"end":y[l]+=v*(n&&f?-1:1);break}return y}const mN=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:l}=n,u=o.filter(Boolean),c=await(l.isRTL==null?void 0:l.isRTL(t));let f=await l.getElementRects({reference:e,floating:t,strategy:i}),{x:h,y:p}=Yv(f,r,c),v=r,y={},b=0;for(let k=0;k<u.length;k++){const{name:E,fn:C}=u[k],{x:_,y:j,data:I,reset:M}=await C({x:h,y:p,initialPlacement:r,placement:v,strategy:i,middlewareData:y,rects:f,platform:l,elements:{reference:e,floating:t}});h=_??h,p=j??p,y={...y,[E]:{...y[E],...I}},M&&b<=50&&(b++,typeof M=="object"&&(M.placement&&(v=M.placement),M.rects&&(f=M.rects===!0?await l.getElementRects({reference:e,floating:t,strategy:i}):M.rects),{x:h,y:p}=Yv(f,v,c)),k=-1)}return{x:h,y:p,placement:v,strategy:i,middlewareData:y}};async function Rc(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:o,rects:l,elements:u,strategy:c}=e,{boundary:f="clippingAncestors",rootBoundary:h="viewport",elementContext:p="floating",altBoundary:v=!1,padding:y=0}=Lo(t,e),b=pN(y),E=u[v?p==="floating"?"reference":"floating":p],C=ac(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(E)))==null||n?E:E.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(u.floating)),boundary:f,rootBoundary:h,strategy:c})),_=p==="floating"?{x:r,y:i,width:l.floating.width,height:l.floating.height}:l.reference,j=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u.floating)),I=await(o.isElement==null?void 0:o.isElement(j))?await(o.getScale==null?void 0:o.getScale(j))||{x:1,y:1}:{x:1,y:1},M=ac(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:_,offsetParent:j,strategy:c}):_);return{top:(C.top-M.top+b.top)/I.y,bottom:(M.bottom-C.bottom+b.bottom)/I.y,left:(C.left-M.left+b.left)/I.x,right:(M.right-C.right+b.right)/I.x}}const gN=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:o,rects:l,initialPlacement:u,platform:c,elements:f}=t,{mainAxis:h=!0,crossAxis:p=!0,fallbackPlacements:v,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:k=!0,...E}=Lo(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const C=Fi(i),_=Zr(u),j=Fi(u)===u,I=await(c.isRTL==null?void 0:c.isRTL(f.floating)),M=v||(j||!k?[oc(u)]:lN(u)),A=b!=="none";!v&&A&&M.push(...fN(u,k,b,I));const B=[u,...M],te=await Rc(t,E),H=[];let O=((r=o.flip)==null?void 0:r.overflows)||[];if(h&&H.push(te[C]),p){const Y=aN(i,l,I);H.push(te[Y[0]],te[Y[1]])}if(O=[...O,{placement:i,overflows:H}],!H.every(Y=>Y<=0)){var D,ne;const Y=(((D=o.flip)==null?void 0:D.index)||0)+1,V=B[Y];if(V&&(!(p==="alignment"?_!==Zr(V):!1)||O.every(L=>Zr(L.placement)===_?L.overflows[0]>0:!0)))return{data:{index:Y,overflows:O},reset:{placement:V}};let ie=(ne=O.filter(z=>z.overflows[0]<=0).sort((z,L)=>z.overflows[1]-L.overflows[1])[0])==null?void 0:ne.placement;if(!ie)switch(y){case"bestFit":{var W;const z=(W=O.filter(L=>{if(A){const Q=Zr(L.placement);return Q===_||Q==="y"}return!0}).map(L=>[L.placement,L.overflows.filter(Q=>Q>0).reduce((Q,T)=>Q+T,0)]).sort((L,Q)=>L[1]-Q[1])[0])==null?void 0:W[0];z&&(ie=z);break}case"initialPlacement":ie=u;break}if(i!==ie)return{reset:{placement:ie}}}return{}}}},yN=new Set(["left","top"]);async function vN(e,t){const{placement:n,platform:r,elements:i}=e,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),l=Fi(n),u=cl(n),c=Zr(n)==="y",f=yN.has(l)?-1:1,h=o&&c?-1:1,p=Lo(t,e);let{mainAxis:v,crossAxis:y,alignmentAxis:b}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return u&&typeof b=="number"&&(y=u==="end"?b*-1:b),c?{x:y*h,y:v*f}:{x:v*f,y:y*h}}const xN=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:o,placement:l,middlewareData:u}=t,c=await vN(t,e);return l===((n=u.offset)==null?void 0:n.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:o+c.y,data:{...c,placement:l}}}}},wN=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:l=!1,limiter:u={fn:E=>{let{x:C,y:_}=E;return{x:C,y:_}}},...c}=Lo(e,t),f={x:n,y:r},h=await Rc(t,c),p=Zr(Fi(i)),v=ub(p);let y=f[v],b=f[p];if(o){const E=v==="y"?"top":"left",C=v==="y"?"bottom":"right",_=y+h[E],j=y-h[C];y=Hv(_,y,j)}if(l){const E=p==="y"?"top":"left",C=p==="y"?"bottom":"right",_=b+h[E],j=b-h[C];b=Hv(_,b,j)}const k=u.fn({...t,[v]:y,[p]:b});return{...k,data:{x:k.x-n,y:k.y-r,enabled:{[v]:o,[p]:l}}}}}},bN=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:o,platform:l,elements:u}=t,{apply:c=()=>{},...f}=Lo(e,t),h=await Rc(t,f),p=Fi(i),v=cl(i),y=Zr(i)==="y",{width:b,height:k}=o.floating;let E,C;p==="top"||p==="bottom"?(E=p,C=v===(await(l.isRTL==null?void 0:l.isRTL(u.floating))?"start":"end")?"left":"right"):(C=p,E=v==="end"?"top":"bottom");const _=k-h.top-h.bottom,j=b-h.left-h.right,I=ws(k-h[E],_),M=ws(b-h[C],j),A=!t.middlewareData.shift;let B=I,te=M;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(te=j),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(B=_),A&&!v){const O=gn(h.left,0),D=gn(h.right,0),ne=gn(h.top,0),W=gn(h.bottom,0);y?te=b-2*(O!==0||D!==0?O+D:gn(h.left,h.right)):B=k-2*(ne!==0||W!==0?ne+W:gn(h.top,h.bottom))}await c({...t,availableWidth:te,availableHeight:B});const H=await l.getDimensions(u.floating);return b!==H.width||k!==H.height?{reset:{rects:!0}}:{}}}};function fb(e){const t=kr(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=$r(e),o=i?e.offsetWidth:n,l=i?e.offsetHeight:r,u=Za(n)!==o||Za(r)!==l;return u&&(n=o,r=l),{width:n,height:r,$:u}}function Wp(e){return Sn(e)?e:e.contextElement}function bo(e){const t=Wp(e);if(!$r(t))return Lr(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=fb(t);let l=(o?Za(n.width):n.width)/r,u=(o?Za(n.height):n.height)/i;return(!l||!Number.isFinite(l))&&(l=1),(!u||!Number.isFinite(u))&&(u=1),{x:l,y:u}}const kN=Lr(0);function hb(e){const t=Yn(e);return!Up()||!t.visualViewport?kN:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function SN(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Yn(e)?!1:t}function bs(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),o=Wp(e);let l=Lr(1);t&&(r?Sn(r)&&(l=bo(r)):l=bo(e));const u=SN(o,n,r)?hb(o):Lr(0);let c=(i.left+u.x)/l.x,f=(i.top+u.y)/l.y,h=i.width/l.x,p=i.height/l.y;if(o){const v=Yn(o),y=r&&Sn(r)?Yn(r):r;let b=v,k=Hh(b);for(;k&&r&&y!==b;){const E=bo(k),C=k.getBoundingClientRect(),_=kr(k),j=C.left+(k.clientLeft+parseFloat(_.paddingLeft))*E.x,I=C.top+(k.clientTop+parseFloat(_.paddingTop))*E.y;c*=E.x,f*=E.y,h*=E.x,p*=E.y,c+=j,f+=I,b=Yn(k),k=Hh(b)}}return ac({width:h,height:p,x:c,y:f})}function Oc(e,t){const n=Ac(e).scrollLeft;return t?t.left+n:bs(Br(e)).left+n}function pb(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-Oc(e,n),i=n.top+t.scrollTop;return{x:r,y:i}}function EN(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const o=i==="fixed",l=Br(r),u=t?Pc(t.floating):!1;if(r===l||u&&o)return n;let c={scrollLeft:0,scrollTop:0},f=Lr(1);const h=Lr(0),p=$r(r);if((p||!p&&!o)&&((Do(r)!=="body"||ul(l))&&(c=Ac(r)),$r(r))){const y=bs(r);f=bo(r),h.x=y.x+r.clientLeft,h.y=y.y+r.clientTop}const v=l&&!p&&!o?pb(l,c):Lr(0);return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-c.scrollLeft*f.x+h.x+v.x,y:n.y*f.y-c.scrollTop*f.y+h.y+v.y}}function _N(e){return Array.from(e.getClientRects())}function CN(e){const t=Br(e),n=Ac(e),r=e.ownerDocument.body,i=gn(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=gn(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let l=-n.scrollLeft+Oc(e);const u=-n.scrollTop;return kr(r).direction==="rtl"&&(l+=gn(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:l,y:u}}const Kv=25;function jN(e,t){const n=Yn(e),r=Br(e),i=n.visualViewport;let o=r.clientWidth,l=r.clientHeight,u=0,c=0;if(i){o=i.width,l=i.height;const h=Up();(!h||h&&t==="fixed")&&(u=i.offsetLeft,c=i.offsetTop)}const f=Oc(r);if(f<=0){const h=r.ownerDocument,p=h.body,v=getComputedStyle(p),y=h.compatMode==="CSS1Compat"&&parseFloat(v.marginLeft)+parseFloat(v.marginRight)||0,b=Math.abs(r.clientWidth-p.clientWidth-y);b<=Kv&&(o-=b)}else f<=Kv&&(o+=f);return{width:o,height:l,x:u,y:c}}const NN=new Set(["absolute","fixed"]);function TN(e,t){const n=bs(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=$r(e)?bo(e):Lr(1),l=e.clientWidth*o.x,u=e.clientHeight*o.y,c=i*o.x,f=r*o.y;return{width:l,height:u,x:c,y:f}}function Gv(e,t,n){let r;if(t==="viewport")r=jN(e,n);else if(t==="document")r=CN(Br(e));else if(Sn(t))r=TN(t,n);else{const i=hb(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return ac(r)}function mb(e,t){const n=$i(e);return n===t||!Sn(n)||No(n)?!1:kr(n).position==="fixed"||mb(n,t)}function IN(e,t){const n=t.get(e);if(n)return n;let r=Xa(e,[],!1).filter(u=>Sn(u)&&Do(u)!=="body"),i=null;const o=kr(e).position==="fixed";let l=o?$i(e):e;for(;Sn(l)&&!No(l);){const u=kr(l),c=Bp(l);!c&&u.position==="fixed"&&(i=null),(o?!c&&!i:!c&&u.position==="static"&&!!i&&NN.has(i.position)||ul(l)&&!c&&mb(e,l))?r=r.filter(h=>h!==l):i=u,l=$i(l)}return t.set(e,r),r}function PN(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const l=[...n==="clippingAncestors"?Pc(t)?[]:IN(t,this._c):[].concat(n),r],u=l[0],c=l.reduce((f,h)=>{const p=Gv(t,h,i);return f.top=gn(p.top,f.top),f.right=ws(p.right,f.right),f.bottom=ws(p.bottom,f.bottom),f.left=gn(p.left,f.left),f},Gv(t,u,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function AN(e){const{width:t,height:n}=fb(e);return{width:t,height:n}}function RN(e,t,n){const r=$r(t),i=Br(t),o=n==="fixed",l=bs(e,!0,o,t);let u={scrollLeft:0,scrollTop:0};const c=Lr(0);function f(){c.x=Oc(i)}if(r||!r&&!o)if((Do(t)!=="body"||ul(i))&&(u=Ac(t)),r){const y=bs(t,!0,o,t);c.x=y.x+t.clientLeft,c.y=y.y+t.clientTop}else i&&f();o&&!r&&i&&f();const h=i&&!r&&!o?pb(i,u):Lr(0),p=l.left+u.scrollLeft-c.x-h.x,v=l.top+u.scrollTop-c.y-h.y;return{x:p,y:v,width:l.width,height:l.height}}function qf(e){return kr(e).position==="static"}function Jv(e,t){if(!$r(e)||kr(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Br(e)===n&&(n=n.ownerDocument.body),n}function gb(e,t){const n=Yn(e);if(Pc(e))return n;if(!$r(e)){let i=$i(e);for(;i&&!No(i);){if(Sn(i)&&!qf(i))return i;i=$i(i)}return n}let r=Jv(e,t);for(;r&&Jj(r)&&qf(r);)r=Jv(r,t);return r&&No(r)&&qf(r)&&!Bp(r)?n:r||tN(e)||n}const ON=async function(e){const t=this.getOffsetParent||gb,n=this.getDimensions,r=await n(e.floating);return{reference:RN(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function MN(e){return kr(e).direction==="rtl"}const DN={convertOffsetParentRelativeRectToViewportRelativeRect:EN,getDocumentElement:Br,getClippingRect:PN,getOffsetParent:gb,getElementRects:ON,getClientRects:_N,getDimensions:AN,getScale:bo,isElement:Sn,isRTL:MN};function yb(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function LN(e,t){let n=null,r;const i=Br(e);function o(){var u;clearTimeout(r),(u=n)==null||u.disconnect(),n=null}function l(u,c){u===void 0&&(u=!1),c===void 0&&(c=1),o();const f=e.getBoundingClientRect(),{left:h,top:p,width:v,height:y}=f;if(u||t(),!v||!y)return;const b=Tu(p),k=Tu(i.clientWidth-(h+v)),E=Tu(i.clientHeight-(p+y)),C=Tu(h),j={rootMargin:-b+"px "+-k+"px "+-E+"px "+-C+"px",threshold:gn(0,ws(1,c))||1};let I=!0;function M(A){const B=A[0].intersectionRatio;if(B!==c){if(!I)return l();B?l(!1,B):r=setTimeout(()=>{l(!1,1e-7)},1e3)}B===1&&!yb(f,e.getBoundingClientRect())&&l(),I=!1}try{n=new IntersectionObserver(M,{...j,root:i.ownerDocument})}catch{n=new IntersectionObserver(M,j)}n.observe(e)}return l(!0),o}function $N(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,f=Wp(e),h=i||o?[...f?Xa(f):[],...Xa(t)]:[];h.forEach(C=>{i&&C.addEventListener("scroll",n,{passive:!0}),o&&C.addEventListener("resize",n)});const p=f&&u?LN(f,n):null;let v=-1,y=null;l&&(y=new ResizeObserver(C=>{let[_]=C;_&&_.target===f&&y&&(y.unobserve(t),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var j;(j=y)==null||j.observe(t)})),n()}),f&&!c&&y.observe(f),y.observe(t));let b,k=c?bs(e):null;c&&E();function E(){const C=bs(e);k&&!yb(k,C)&&n(),k=C,b=requestAnimationFrame(E)}return n(),()=>{var C;h.forEach(_=>{i&&_.removeEventListener("scroll",n),o&&_.removeEventListener("resize",n)}),p==null||p(),(C=y)==null||C.disconnect(),y=null,c&&cancelAnimationFrame(b)}}const Yf=Rc,FN=xN,zN=wN,BN=gN,UN=bN,WN=(e,t,n)=>{const r=new Map,i={platform:DN,...n},o={...i.platform,_c:r};return mN(e,t,{...i,platform:o})};var HN=typeof document<"u",VN=function(){},Vu=HN?w.useLayoutEffect:VN;function lc(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!lc(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&e.$$typeof)&&!lc(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function vb(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Qv(e,t){const n=vb(e);return Math.round(t*n)/n}function Kf(e){const t=w.useRef(e);return Vu(()=>{t.current=e}),t}function qN(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:l}={},transform:u=!0,whileElementsMounted:c,open:f}=e,[h,p]=w.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[v,y]=w.useState(r);lc(v,r)||y(r);const[b,k]=w.useState(null),[E,C]=w.useState(null),_=w.useCallback(L=>{L!==A.current&&(A.current=L,k(L))},[]),j=w.useCallback(L=>{L!==B.current&&(B.current=L,C(L))},[]),I=o||b,M=l||E,A=w.useRef(null),B=w.useRef(null),te=w.useRef(h),H=c!=null,O=Kf(c),D=Kf(i),ne=Kf(f),W=w.useCallback(()=>{if(!A.current||!B.current)return;const L={placement:t,strategy:n,middleware:v};D.current&&(L.platform=D.current),WN(A.current,B.current,L).then(Q=>{const T={...Q,isPositioned:ne.current!==!1};Y.current&&!lc(te.current,T)&&(te.current=T,qn.flushSync(()=>{p(T)}))})},[v,t,n,D,ne]);Vu(()=>{f===!1&&te.current.isPositioned&&(te.current.isPositioned=!1,p(L=>({...L,isPositioned:!1})))},[f]);const Y=w.useRef(!1);Vu(()=>(Y.current=!0,()=>{Y.current=!1}),[]),Vu(()=>{if(I&&(A.current=I),M&&(B.current=M),I&&M){if(O.current)return O.current(I,M,W);W()}},[I,M,W,O,H]);const V=w.useMemo(()=>({reference:A,floating:B,setReference:_,setFloating:j}),[_,j]),ie=w.useMemo(()=>({reference:I,floating:M}),[I,M]),z=w.useMemo(()=>{const L={position:n,left:0,top:0};if(!ie.floating)return L;const Q=Qv(ie.floating,h.x),T=Qv(ie.floating,h.y);return u?{...L,transform:"translate("+Q+"px, "+T+"px)",...vb(ie.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Q,top:T}},[n,u,ie.floating,h.x,h.y]);return w.useMemo(()=>({...h,update:W,refs:V,elements:ie,floatingStyles:z}),[h,W,V,ie,z])}const xb=(e,t)=>({...FN(e),options:[e,t]}),YN=(e,t)=>({...zN(e),options:[e,t]}),KN=(e,t)=>({...BN(e),options:[e,t]}),GN=(e,t)=>({...UN(e),options:[e,t]}),wb={...Zu},JN=wb.useInsertionEffect,QN=JN||(e=>e());function bb(e){const t=w.useRef(()=>{});return QN(()=>{t.current=e}),w.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var qh=typeof document<"u"?w.useLayoutEffect:w.useEffect;let Xv=!1,XN=0;const Zv=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+XN++;function ZN(){const[e,t]=w.useState(()=>Xv?Zv():void 0);return qh(()=>{e==null&&t(Zv())},[]),w.useEffect(()=>{Xv=!0},[]),e}const eT=wb.useId,tT=eT||ZN;function nT(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const rT=w.createContext(null),iT=w.createContext(null),sT=()=>{var e;return((e=w.useContext(rT))==null?void 0:e.id)||null},oT=()=>w.useContext(iT),aT="data-floating-ui-focusable";function lT(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=tT(),o=w.useRef({}),[l]=w.useState(()=>nT()),u=sT()!=null,[c,f]=w.useState(r.reference),h=bb((y,b,k)=>{o.current.openEvent=y?b:void 0,l.emit("openchange",{open:y,event:b,reason:k,nested:u}),n==null||n(y,b,k)}),p=w.useMemo(()=>({setPositionReference:f}),[]),v=w.useMemo(()=>({reference:c||r.reference||null,floating:r.floating||null,domReference:r.reference}),[c,r.reference,r.floating]);return w.useMemo(()=>({dataRef:o,open:t,onOpenChange:h,elements:v,events:l,floatingId:i,refs:p}),[t,h,v,l,i,p])}function uT(e){e===void 0&&(e={});const{nodeId:t}=e,n=lT({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[o,l]=w.useState(null),[u,c]=w.useState(null),h=(i==null?void 0:i.domReference)||o,p=w.useRef(null),v=oT();qh(()=>{h&&(p.current=h)},[h]);const y=qN({...e,elements:{...i,...u&&{reference:u}}}),b=w.useCallback(j=>{const I=Sn(j)?{getBoundingClientRect:()=>j.getBoundingClientRect(),contextElement:j}:j;c(I),y.refs.setReference(I)},[y.refs]),k=w.useCallback(j=>{(Sn(j)||j===null)&&(p.current=j,l(j)),(Sn(y.refs.reference.current)||y.refs.reference.current===null||j!==null&&!Sn(j))&&y.refs.setReference(j)},[y.refs]),E=w.useMemo(()=>({...y.refs,setReference:k,setPositionReference:b,domReference:p}),[y.refs,k,b]),C=w.useMemo(()=>({...y.elements,domReference:h}),[y.elements,h]),_=w.useMemo(()=>({...y,...r,refs:E,elements:C,nodeId:t}),[y,E,C,t,r]);return qh(()=>{r.dataRef.current.floatingContext=_;const j=v==null?void 0:v.nodesRef.current.find(I=>I.id===t);j&&(j.context=_)}),w.useMemo(()=>({...y,context:_,refs:E,elements:C}),[y,E,C,_])}const ex="active",tx="selected";function Gf(e,t,n){const r=new Map,i=n==="item";let o=e;if(i&&e){const{[ex]:l,[tx]:u,...c}=e;o=c}return{...n==="floating"&&{tabIndex:-1,[aT]:""},...o,...t.map(l=>{const u=l?l[n]:null;return typeof u=="function"?e?u(e):null:u}).concat(e).reduce((l,u)=>(u&&Object.entries(u).forEach(c=>{let[f,h]=c;if(!(i&&[ex,tx].includes(f)))if(f.indexOf("on")===0){if(r.has(f)||r.set(f,[]),typeof h=="function"){var p;(p=r.get(f))==null||p.push(h),l[f]=function(){for(var v,y=arguments.length,b=new Array(y),k=0;k<y;k++)b[k]=arguments[k];return(v=r.get(f))==null?void 0:v.map(E=>E(...b)).find(E=>E!==void 0)}}}else l[f]=h}),l),{})}}function cT(e){e===void 0&&(e=[]);const t=e.map(u=>u==null?void 0:u.reference),n=e.map(u=>u==null?void 0:u.floating),r=e.map(u=>u==null?void 0:u.item),i=w.useCallback(u=>Gf(u,e,"reference"),t),o=w.useCallback(u=>Gf(u,e,"floating"),n),l=w.useCallback(u=>Gf(u,e,"item"),r);return w.useMemo(()=>({getReferenceProps:i,getFloatingProps:o,getItemProps:l}),[i,o,l])}function nx(e,t){return{...e,rects:{...e.rects,floating:{...e.rects.floating,height:t}}}}const dT=e=>({name:"inner",options:e,async fn(t){const{listRef:n,overflowRef:r,onFallbackChange:i,offset:o=0,index:l=0,minItemsVisible:u=4,referenceOverflowThreshold:c=0,scrollRef:f,...h}=Lo(e,t),{rects:p,elements:{floating:v}}=t,y=n.current[l],b=(f==null?void 0:f.current)||v,k=v.clientTop||b.clientTop,E=v.clientTop!==0,C=b.clientTop!==0,_=v===b;if(!y)return{};const j={...t,...await xb(-y.offsetTop-v.clientTop-p.reference.height/2-y.offsetHeight/2-o).fn(t)},I=await Yf(nx(j,b.scrollHeight+k+v.clientTop),h),M=await Yf(j,{...h,elementContext:"reference"}),A=gn(0,I.top),B=j.y+A,O=(b.scrollHeight>b.clientHeight?D=>D:Za)(gn(0,b.scrollHeight+(E&&_||C?k*2:0)-A-gn(0,I.bottom)));if(b.style.maxHeight=O+"px",b.scrollTop=A,i){const D=b.offsetHeight<y.offsetHeight*ws(u,n.current.length)-1||M.top>=-c||M.bottom>=-c;qn.flushSync(()=>i(D))}return r&&(r.current=await Yf(nx({...j,y:B},b.offsetHeight+k+v.clientTop),h)),{y:B}}});function fT(e,t){const{open:n,elements:r}=e,{enabled:i=!0,overflowRef:o,scrollRef:l,onChange:u}=t,c=bb(u),f=w.useRef(!1),h=w.useRef(null),p=w.useRef(null);w.useEffect(()=>{if(!i)return;function y(k){if(k.ctrlKey||!b||o.current==null)return;const E=k.deltaY,C=o.current.top>=-.5,_=o.current.bottom>=-.5,j=b.scrollHeight-b.clientHeight,I=E<0?-1:1,M=E<0?"max":"min";b.scrollHeight<=b.clientHeight||(!C&&E>0||!_&&E<0?(k.preventDefault(),qn.flushSync(()=>{c(A=>A+Math[M](E,j*I))})):/firefox/i.test(rN())&&(b.scrollTop+=E))}const b=(l==null?void 0:l.current)||r.floating;if(n&&b)return b.addEventListener("wheel",y),requestAnimationFrame(()=>{h.current=b.scrollTop,o.current!=null&&(p.current={...o.current})}),()=>{h.current=null,p.current=null,b.removeEventListener("wheel",y)}},[i,n,r.floating,o,l,c]);const v=w.useMemo(()=>({onKeyDown(){f.current=!0},onWheel(){f.current=!1},onPointerMove(){f.current=!1},onScroll(){const y=(l==null?void 0:l.current)||r.floating;if(!(!o.current||!y||!f.current)){if(h.current!==null){const b=y.scrollTop-h.current;(o.current.bottom<-.5&&b<-1||o.current.top<-.5&&b>1)&&qn.flushSync(()=>c(k=>k+b))}requestAnimationFrame(()=>{h.current=y.scrollTop})}}}),[r.floating,c,o,l]);return w.useMemo(()=>i?{floating:v}:{},[i,v])}let $o=w.createContext({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});$o.displayName="FloatingContext";let Hp=w.createContext(null);Hp.displayName="PlacementContext";function hT(e){return w.useMemo(()=>e?typeof e=="string"?{to:e}:e:null,[e])}function pT(){return w.useContext($o).setReference}function mT(){return w.useContext($o).getReferenceProps}function gT(){let{getFloatingProps:e,slot:t}=w.useContext($o);return w.useCallback((...n)=>Object.assign({},e(...n),{"data-anchor":t.anchor}),[e,t])}function yT(e=null){e===!1&&(e=null),typeof e=="string"&&(e={to:e});let t=w.useContext(Hp),n=w.useMemo(()=>e,[JSON.stringify(e,(i,o)=>{var l;return(l=o==null?void 0:o.outerHTML)!=null?l:o})]);Tt(()=>{t==null||t(n??null)},[t,n]);let r=w.useContext($o);return w.useMemo(()=>[r.setFloating,e?r.styles:{}],[r.setFloating,e,r.styles])}let rx=4;function vT({children:e,enabled:t=!0}){let[n,r]=w.useState(null),[i,o]=w.useState(0),l=w.useRef(null),[u,c]=w.useState(null);xT(u);let f=t&&n!==null&&u!==null,{to:h="bottom",gap:p=0,offset:v=0,padding:y=0,inner:b}=wT(n,u),[k,E="center"]=h.split(" ");Tt(()=>{f&&o(0)},[f]);let{refs:C,floatingStyles:_,context:j}=uT({open:f,placement:k==="selection"?E==="center"?"bottom":`bottom-${E}`:E==="center"?`${k}`:`${k}-${E}`,strategy:"absolute",transform:!1,middleware:[xb({mainAxis:k==="selection"?0:p,crossAxis:v}),YN({padding:y}),k!=="selection"&&KN({padding:y}),k==="selection"&&b?dT({...b,padding:y,overflowRef:l,offset:i,minItemsVisible:rx,referenceOverflowThreshold:y,onFallbackChange(D){var ne,W;if(!D)return;let Y=j.elements.floating;if(!Y)return;let V=parseFloat(getComputedStyle(Y).scrollPaddingBottom)||0,ie=Math.min(rx,Y.childElementCount),z=0,L=0;for(let Q of(W=(ne=j.elements.floating)==null?void 0:ne.childNodes)!=null?W:[])if(Gn(Q)){let T=Q.offsetTop,F=T+Q.clientHeight+V,J=Y.scrollTop,P=J+Y.clientHeight;if(T>=J&&F<=P)ie--;else{L=Math.max(0,Math.min(F,P)-Math.max(T,J)),z=Q.clientHeight;break}}ie>=1&&o(Q=>{let T=z*ie-L+V;return Q>=T?Q:T})}}):null,GN({padding:y,apply({availableWidth:D,availableHeight:ne,elements:W}){Object.assign(W.floating.style,{overflow:"auto",maxWidth:`${D}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${ne}px)`})}})].filter(Boolean),whileElementsMounted:$N}),[I=k,M=E]=j.placement.split("-");k==="selection"&&(I="selection");let A=w.useMemo(()=>({anchor:[I,M].filter(Boolean).join(" ")}),[I,M]),B=fT(j,{overflowRef:l,onChange:o}),{getReferenceProps:te,getFloatingProps:H}=cT([B]),O=Ze(D=>{c(D),C.setFloating(D)});return w.createElement(Hp.Provider,{value:r},w.createElement($o.Provider,{value:{setFloating:O,setReference:C.setReference,styles:_,getReferenceProps:te,getFloatingProps:H,slot:A}},e))}function xT(e){Tt(()=>{if(!e)return;let t=new MutationObserver(()=>{let n=window.getComputedStyle(e).maxHeight,r=parseFloat(n);if(isNaN(r))return;let i=parseInt(n);isNaN(i)||r!==i&&(e.style.maxHeight=`${Math.ceil(r)}px`)});return t.observe(e,{attributes:!0,attributeFilter:["style"]}),()=>{t.disconnect()}},[e])}function wT(e,t){var n,r,i;let o=Jf((n=e==null?void 0:e.gap)!=null?n:"var(--anchor-gap, 0)",t),l=Jf((r=e==null?void 0:e.offset)!=null?r:"var(--anchor-offset, 0)",t),u=Jf((i=e==null?void 0:e.padding)!=null?i:"var(--anchor-padding, 0)",t);return{...e,gap:o,offset:l,padding:u}}function Jf(e,t,n=void 0){let r=_s(),i=Ze((c,f)=>{if(c==null)return[n,null];if(typeof c=="number")return[c,null];if(typeof c=="string"){if(!f)return[n,null];let h=ix(c,f);return[h,p=>{let v=kb(c);{let y=v.map(b=>window.getComputedStyle(f).getPropertyValue(b));r.requestAnimationFrame(function b(){r.nextFrame(b);let k=!1;for(let[C,_]of v.entries()){let j=window.getComputedStyle(f).getPropertyValue(_);if(y[C]!==j){y[C]=j,k=!0;break}}if(!k)return;let E=ix(c,f);h!==E&&(p(E),h=E)})}return r.dispose}]}return[n,null]}),o=w.useMemo(()=>i(e,t)[0],[e,t]),[l=o,u]=w.useState();return Tt(()=>{let[c,f]=i(e,t);if(u(c),!!f)return f(u)},[e,t]),l}function kb(e){let t=/var\((.*)\)/.exec(e);if(t){let n=t[1].indexOf(",");if(n===-1)return[t[1]];let r=t[1].slice(0,n).trim(),i=t[1].slice(n+1).trim();return i?[r,...kb(i)]:[r]}return[]}function ix(e,t){let n=document.createElement("div");t.appendChild(n),n.style.setProperty("margin-top","0px","important"),n.style.setProperty("margin-top",e,"important");let r=parseFloat(window.getComputedStyle(n).marginTop)||0;return t.removeChild(n),r}let Mc=w.createContext(null);Mc.displayName="OpenClosedContext";var En=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(En||{});function dl(){return w.useContext(Mc)}function Sb({value:e,children:t}){return Re.createElement(Mc.Provider,{value:e},t)}function bT({children:e}){return Re.createElement(Mc.Provider,{value:null},e)}function kT(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Ii=[];kT(()=>{function e(t){if(!Or(t.target)||t.target===document.body||Ii[0]===t.target)return;let n=t.target;n=n.closest(sc),Ii.unshift(n??t.target),Ii=Ii.filter(r=>r!=null&&r.isConnected),Ii.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function ST(e){throw new Error("Unexpected object: "+e)}var Wt=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(Wt||{});function Iu(e,t){let n=t.resolveItems();if(n.length<=0)return null;let r=t.resolveActiveIndex(),i=r??-1;switch(e.focus){case 0:{for(let o=0;o<n.length;++o)if(!t.resolveDisabled(n[o],o,n))return o;return r}case 1:{i===-1&&(i=n.length);for(let o=i-1;o>=0;--o)if(!t.resolveDisabled(n[o],o,n))return o;return r}case 2:{for(let o=i+1;o<n.length;++o)if(!t.resolveDisabled(n[o],o,n))return o;return r}case 3:{for(let o=n.length-1;o>=0;--o)if(!t.resolveDisabled(n[o],o,n))return o;return r}case 4:{for(let o=0;o<n.length;++o)if(t.resolveId(n[o],o,n)===e.id)return o;return r}case 5:return null;default:ST(e)}}function Vp(e){let t=Ze(e),n=w.useRef(!1);w.useEffect(()=>(n.current=!1,()=>{n.current=!0,jc(()=>{n.current&&t()})}),[t])}let Eb=w.createContext(!1);function ET(){return w.useContext(Eb)}function sx(e){return Re.createElement(Eb.Provider,{value:e.force},e.children)}function _T(e){let t=ET(),n=w.useContext(Cb),[r,i]=w.useState(()=>{var o;if(!t&&n!==null)return(o=n.current)!=null?o:null;if(Mr.isServer)return null;let l=e==null?void 0:e.getElementById("headlessui-portal-root");if(l)return l;if(e===null)return null;let u=e.createElement("div");return u.setAttribute("id","headlessui-portal-root"),e.body.appendChild(u)});return w.useEffect(()=>{r!==null&&(e!=null&&e.body.contains(r)||e==null||e.body.appendChild(r))},[r,e]),w.useEffect(()=>{t||n!==null&&i(n.current)},[n,i,t]),r}let _b=w.Fragment,CT=Mt(function(e,t){let{ownerDocument:n=null,...r}=e,i=w.useRef(null),o=_n(QC(v=>{i.current=v}),t),l=Qa(i.current),u=n??l,c=_T(u),f=w.useContext(Yh),h=_s(),p=Vt();return Vp(()=>{var v;c&&c.childNodes.length<=0&&((v=c.parentElement)==null||v.removeChild(c))}),c?qn.createPortal(Re.createElement("div",{"data-headlessui-portal":"",ref:v=>{h.dispose(),f&&v&&h.add(f.register(v))}},p({ourProps:{ref:o},theirProps:r,slot:{},defaultTag:_b,name:"Portal"})),c):null});function jT(e,t){let n=_n(t),{enabled:r=!0,ownerDocument:i,...o}=e,l=Vt();return r?Re.createElement(CT,{...o,ownerDocument:i,ref:n}):l({ourProps:{ref:n},theirProps:o,slot:{},defaultTag:_b,name:"Portal"})}let NT=w.Fragment,Cb=w.createContext(null);function TT(e,t){let{target:n,...r}=e,i={ref:_n(t)},o=Vt();return Re.createElement(Cb.Provider,{value:n},o({ourProps:i,theirProps:r,defaultTag:NT,name:"Popover.Group"}))}let Yh=w.createContext(null);function IT(){let e=w.useContext(Yh),t=w.useRef([]),n=Ze(o=>(t.current.push(o),e&&e.register(o),()=>r(o))),r=Ze(o=>{let l=t.current.indexOf(o);l!==-1&&t.current.splice(l,1),e&&e.unregister(o)}),i=w.useMemo(()=>({register:n,unregister:r,portals:t}),[n,r,t]);return[t,w.useMemo(()=>function({children:o}){return Re.createElement(Yh.Provider,{value:i},o)},[i])]}let PT=Mt(jT),jb=Mt(TT),Nb=Object.assign(PT,{Group:jb});const qu={Idle:{kind:"Idle"},Tracked:e=>({kind:"Tracked",position:e}),Moved:{kind:"Moved"}};function Tb(e){let t=e.getBoundingClientRect();return`${t.x},${t.y}`}function AT(e,t,n){let r=Mn();if(t.kind==="Tracked"){let i=function(){o!==Tb(e)&&(r.dispose(),n())},{position:o}=t,l=new ResizeObserver(i);l.observe(e),r.add(()=>l.disconnect()),r.addEventListener(window,"scroll",i,{passive:!0}),r.addEventListener(window,"resize",i)}return()=>r.dispose()}function RT(e,t=typeof document<"u"?document.defaultView:null,n){let r=ll(e,"escape");rb(t,"keydown",i=>{r&&(i.defaultPrevented||i.key===nn.Escape&&n(i))})}function OT(){var e;let[t]=w.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,r]=w.useState((e=t==null?void 0:t.matches)!=null?e:!1);return Tt(()=>{if(!t)return;function i(o){r(o.matches)}return t.addEventListener("change",i),()=>t.removeEventListener("change",i)},[t]),n}function MT({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let r=Ze(()=>{var i,o;let l=Es(n),u=[];for(let c of e)c!==null&&(ei(c)?u.push(c):"current"in c&&ei(c.current)&&u.push(c.current));if(t!=null&&t.current)for(let c of t.current)u.push(c);for(let c of(i=l==null?void 0:l.querySelectorAll("html > *, body > *"))!=null?i:[])c!==document.body&&c!==document.head&&ei(c)&&c.id!=="headlessui-portal-root"&&(n&&(c.contains(n)||c.contains((o=n==null?void 0:n.getRootNode())==null?void 0:o.host))||u.some(f=>c.contains(f))||u.push(c));return u});return{resolveContainers:r,contains:Ze(i=>r().some(o=>o.contains(i)))}}let Ib=w.createContext(null);function ox({children:e,node:t}){let[n,r]=w.useState(null),i=Pb(t??n);return Re.createElement(Ib.Provider,{value:i},e,i===null&&Re.createElement(Bh,{features:ic.Hidden,ref:o=>{var l,u;if(o){for(let c of(u=(l=Es(o))==null?void 0:l.querySelectorAll("html > *, body > *"))!=null?u:[])if(c!==document.body&&c!==document.head&&ei(c)&&c!=null&&c.contains(o)){r(c);break}}}}))}function Pb(e=null){var t;return(t=w.useContext(Ib))!=null?t:e}function DT(){let e=typeof document>"u";return"useSyncExternalStore"in Zu?(t=>t.useSyncExternalStore)(Zu)(()=>()=>{},()=>!1,()=>!e):!1}function Dc(){let e=DT(),[t,n]=w.useState(Mr.isHandoffComplete);return t&&Mr.isHandoffComplete===!1&&n(!1),w.useEffect(()=>{t!==!0&&n(!0)},[t]),w.useEffect(()=>Mr.handoff(),[]),e?!1:t}function qp(){let e=w.useRef(!1);return Tt(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var Aa=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Aa||{});function LT(){let e=w.useRef(0);return tb(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function Ab(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)ei(n.current)&&t.add(n.current);return t}let $T="div";var ds=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(ds||{});function FT(e,t){let n=w.useRef(null),r=_n(n,t),{initialFocus:i,initialFocusFallback:o,containers:l,features:u=15,...c}=e;Dc()||(u=0);let f=Qa(n.current);WT(u,{ownerDocument:f});let h=HT(u,{ownerDocument:f,container:n,initialFocus:i,initialFocusFallback:o});VT(u,{ownerDocument:f,container:n,containers:l,previousActiveElement:h});let p=LT(),v=Ze(_=>{if(!Gn(n.current))return;let j=n.current;(I=>I())(()=>{br(p.current,{[Aa.Forwards]:()=>{wo(j,xr.First,{skipElements:[_.relatedTarget,o]})},[Aa.Backwards]:()=>{wo(j,xr.Last,{skipElements:[_.relatedTarget,o]})}})})}),y=ll(!!(u&2),"focus-trap#tab-lock"),b=_s(),k=w.useRef(!1),E={ref:r,onKeyDown(_){_.key=="Tab"&&(k.current=!0,b.requestAnimationFrame(()=>{k.current=!1}))},onBlur(_){if(!(u&4))return;let j=Ab(l);Gn(n.current)&&j.add(n.current);let I=_.relatedTarget;Or(I)&&I.dataset.headlessuiFocusGuard!=="true"&&(Rb(j,I)||(k.current?wo(n.current,br(p.current,{[Aa.Forwards]:()=>xr.Next,[Aa.Backwards]:()=>xr.Previous})|xr.WrapAround,{relativeTo:_.target}):Or(_.target)&&Dr(_.target)))}},C=Vt();return Re.createElement(Re.Fragment,null,y&&Re.createElement(Bh,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:v,features:ic.Focusable}),C({ourProps:E,theirProps:c,defaultTag:$T,name:"FocusTrap"}),y&&Re.createElement(Bh,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:v,features:ic.Focusable}))}let zT=Mt(FT),BT=Object.assign(zT,{features:ds});function UT(e=!0){let t=w.useRef(Ii.slice());return zp(([n],[r])=>{r===!0&&n===!1&&jc(()=>{t.current.splice(0)}),r===!1&&n===!0&&(t.current=Ii.slice())},[e,Ii,t]),Ze(()=>{var n;return(n=t.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function WT(e,{ownerDocument:t}){let n=!!(e&8),r=UT(n);zp(()=>{n||Pw(t==null?void 0:t.body)&&Dr(r())},[n]),Vp(()=>{n&&Dr(r())})}function HT(e,{ownerDocument:t,container:n,initialFocus:r,initialFocusFallback:i}){let o=w.useRef(null),l=ll(!!(e&1),"focus-trap#initial-focus"),u=qp();return zp(()=>{if(e===0)return;if(!l){i!=null&&i.current&&Dr(i.current);return}let c=n.current;c&&jc(()=>{if(!u.current)return;let f=t==null?void 0:t.activeElement;if(r!=null&&r.current){if((r==null?void 0:r.current)===f){o.current=f;return}}else if(c.contains(f)){o.current=f;return}if(r!=null&&r.current)Dr(r.current);else{if(e&16){if(wo(c,xr.First|xr.AutoFocus)!==Wh.Error)return}else if(wo(c,xr.First)!==Wh.Error)return;if(i!=null&&i.current&&(Dr(i.current),(t==null?void 0:t.activeElement)===i.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}o.current=t==null?void 0:t.activeElement})},[i,l,e]),o}function VT(e,{ownerDocument:t,container:n,containers:r,previousActiveElement:i}){let o=qp(),l=!!(e&4);rb(t==null?void 0:t.defaultView,"focus",u=>{if(!l||!o.current)return;let c=Ab(r);Gn(n.current)&&c.add(n.current);let f=i.current;if(!f)return;let h=u.target;Gn(h)?Rb(c,h)?(i.current=h,Dr(h)):(u.preventDefault(),u.stopPropagation(),Dr(f)):Dr(i.current)},!0)}function Rb(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function Ob(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||!Da((t=e.as)!=null?t:Db)||Re.Children.count(e.children)===1}let Lc=w.createContext(null);Lc.displayName="TransitionContext";var qT=(e=>(e.Visible="visible",e.Hidden="hidden",e))(qT||{});function YT(){let e=w.useContext(Lc);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function KT(){let e=w.useContext($c);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let $c=w.createContext(null);$c.displayName="NestingContext";function Fc(e){return"children"in e?Fc(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function Mb(e,t){let n=Cs(e),r=w.useRef([]),i=qp(),o=_s(),l=Ze((y,b=Oi.Hidden)=>{let k=r.current.findIndex(({el:E})=>E===y);k!==-1&&(br(b,{[Oi.Unmount](){r.current.splice(k,1)},[Oi.Hidden](){r.current[k].state="hidden"}}),o.microTask(()=>{var E;!Fc(r)&&i.current&&((E=n.current)==null||E.call(n))}))}),u=Ze(y=>{let b=r.current.find(({el:k})=>k===y);return b?b.state!=="visible"&&(b.state="visible"):r.current.push({el:y,state:"visible"}),()=>l(y,Oi.Unmount)}),c=w.useRef([]),f=w.useRef(Promise.resolve()),h=w.useRef({enter:[],leave:[]}),p=Ze((y,b,k)=>{c.current.splice(0),t&&(t.chains.current[b]=t.chains.current[b].filter(([E])=>E!==y)),t==null||t.chains.current[b].push([y,new Promise(E=>{c.current.push(E)})]),t==null||t.chains.current[b].push([y,new Promise(E=>{Promise.all(h.current[b].map(([C,_])=>_)).then(()=>E())})]),b==="enter"?f.current=f.current.then(()=>t==null?void 0:t.wait.current).then(()=>k(b)):k(b)}),v=Ze((y,b,k)=>{Promise.all(h.current[b].splice(0).map(([E,C])=>C)).then(()=>{var E;(E=c.current.shift())==null||E()}).then(()=>k(b))});return w.useMemo(()=>({children:r,register:u,unregister:l,onStart:p,onStop:v,wait:f,chains:h}),[u,l,r,p,v,h,f])}let Db=w.Fragment,Lb=jo.RenderStrategy;function GT(e,t){var n,r;let{transition:i=!0,beforeEnter:o,afterEnter:l,beforeLeave:u,afterLeave:c,enter:f,enterFrom:h,enterTo:p,entered:v,leave:y,leaveFrom:b,leaveTo:k,...E}=e,[C,_]=w.useState(null),j=w.useRef(null),I=Ob(e),M=_n(...I?[j,t,_]:t===null?[]:[t]),A=(n=E.unmount)==null||n?Oi.Unmount:Oi.Hidden,{show:B,appear:te,initial:H}=YT(),[O,D]=w.useState(B?"visible":"hidden"),ne=KT(),{register:W,unregister:Y}=ne;Tt(()=>W(j),[W,j]),Tt(()=>{if(A===Oi.Hidden&&j.current){if(B&&O!=="visible"){D("visible");return}return br(O,{hidden:()=>Y(j),visible:()=>W(j)})}},[O,j,W,Y,B,A]);let V=Dc();Tt(()=>{if(I&&V&&O==="visible"&&j.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[j,O,V,I]);let ie=H&&!te,z=te&&B&&H,L=w.useRef(!1),Q=Mb(()=>{L.current||(D("hidden"),Y(j))},ne),T=Ze(me=>{L.current=!0;let je=me?"enter":"leave";Q.onStart(j,je,Ae=>{Ae==="enter"?o==null||o():Ae==="leave"&&(u==null||u())})}),F=Ze(me=>{let je=me?"enter":"leave";L.current=!1,Q.onStop(j,je,Ae=>{Ae==="enter"?l==null||l():Ae==="leave"&&(c==null||c())}),je==="leave"&&!Fc(Q)&&(D("hidden"),Y(j))});w.useEffect(()=>{I&&i||(T(B),F(B))},[B,I,i]);let J=!(!i||!I||!V||ie),[,P]=ob(J,C,B,{start:T,end:F}),be=as({ref:M,className:((r=zh(E.className,z&&f,z&&h,P.enter&&f,P.enter&&P.closed&&h,P.enter&&!P.closed&&p,P.leave&&y,P.leave&&!P.closed&&b,P.leave&&P.closed&&k,!P.transition&&B&&v))==null?void 0:r.trim())||void 0,...sb(P)}),he=0;O==="visible"&&(he|=En.Open),O==="hidden"&&(he|=En.Closed),B&&O==="hidden"&&(he|=En.Opening),!B&&O==="visible"&&(he|=En.Closing);let ge=Vt();return Re.createElement($c.Provider,{value:Q},Re.createElement(Sb,{value:he},ge({ourProps:be,theirProps:E,defaultTag:Db,features:Lb,visible:O==="visible",name:"Transition.Child"})))}function JT(e,t){let{show:n,appear:r=!1,unmount:i=!0,...o}=e,l=w.useRef(null),u=Ob(e),c=_n(...u?[l,t]:t===null?[]:[t]);Dc();let f=dl();if(n===void 0&&f!==null&&(n=(f&En.Open)===En.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[h,p]=w.useState(n?"visible":"hidden"),v=Mb(()=>{n||p("hidden")}),[y,b]=w.useState(!0),k=w.useRef([n]);Tt(()=>{y!==!1&&k.current[k.current.length-1]!==n&&(k.current.push(n),b(!1))},[k,n]);let E=w.useMemo(()=>({show:n,appear:r,initial:y}),[n,r,y]);Tt(()=>{n?p("visible"):!Fc(v)&&l.current!==null&&p("hidden")},[n,v]);let C={unmount:i},_=Ze(()=>{var M;y&&b(!1),(M=e.beforeEnter)==null||M.call(e)}),j=Ze(()=>{var M;y&&b(!1),(M=e.beforeLeave)==null||M.call(e)}),I=Vt();return Re.createElement($c.Provider,{value:v},Re.createElement(Lc.Provider,{value:E},I({ourProps:{...C,as:w.Fragment,children:Re.createElement($b,{ref:c,...C,...o,beforeEnter:_,beforeLeave:j})},theirProps:{},defaultTag:w.Fragment,features:Lb,visible:h==="visible",name:"Transition"})))}function QT(e,t){let n=w.useContext(Lc)!==null,r=dl()!==null;return Re.createElement(Re.Fragment,null,!n&&r?Re.createElement(Kh,{ref:t,...e}):Re.createElement($b,{ref:t,...e}))}let Kh=Mt(JT),$b=Mt(GT),Yp=Mt(QT),XT=Object.assign(Kh,{Child:Yp,Root:Kh});var ZT=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(ZT||{}),eI=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(eI||{});let tI={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},Kp=w.createContext(null);Kp.displayName="DialogContext";function zc(e){let t=w.useContext(Kp);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,zc),n}return t}function nI(e,t){return br(t.type,tI,e,t)}let ax=Mt(function(e,t){let n=w.useId(),{id:r=`headlessui-dialog-${n}`,open:i,onClose:o,initialFocus:l,role:u="dialog",autoFocus:c=!0,__demoMode:f=!1,unmount:h=!1,...p}=e,v=w.useRef(!1);u=(function(){return u==="dialog"||u==="alertdialog"?u:(v.current||(v.current=!0,console.warn(`Invalid role [${u}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")})();let y=dl();i===void 0&&y!==null&&(i=(y&En.Open)===En.Open);let b=w.useRef(null),k=_n(b,t),E=Qa(b.current),C=i?0:1,[_,j]=w.useReducer(nI,{titleId:null,descriptionId:null,panelRef:w.createRef()}),I=Ze(()=>o(!1)),M=Ze(P=>j({type:0,id:P})),A=Dc()?C===0:!1,[B,te]=IT(),H={get current(){var P;return(P=_.panelRef.current)!=null?P:b.current}},O=Pb(),{resolveContainers:D}=MT({mainTreeNode:O,portals:B,defaultContainers:[H]}),ne=y!==null?(y&En.Closing)===En.Closing:!1;Gw(f||ne?!1:A,{allowed:Ze(()=>{var P,be;return[(be=(P=b.current)==null?void 0:P.closest("[data-headlessui-portal]"))!=null?be:null]}),disallowed:Ze(()=>{var P;return[(P=O==null?void 0:O.closest("body > *:not(#headlessui-portal-root)"))!=null?P:null]})});let W=Tc.get(null);Tt(()=>{if(A)return W.actions.push(r),()=>W.actions.pop(r)},[W,r,A]);let Y=or(W,w.useCallback(P=>W.selectors.isTop(P,r),[W,r]));nb(Y,D,P=>{P.preventDefault(),I()}),RT(Y,E==null?void 0:E.defaultView,P=>{P.preventDefault(),P.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),I()}),ib(f||ne?!1:A,E,D),Jw(A,b,I);let[V,ie]=zw(),z=w.useMemo(()=>[{dialogState:C,close:I,setTitleId:M,unmount:h},_],[C,I,M,h,_]),L=zr({open:C===0}),Q={ref:k,id:r,role:u,tabIndex:-1,"aria-modal":f?void 0:C===0?!0:void 0,"aria-labelledby":_.titleId,"aria-describedby":V,unmount:h},T=!OT(),F=ds.None;A&&!f&&(F|=ds.RestoreFocus,F|=ds.TabLock,c&&(F|=ds.AutoFocus),T&&(F|=ds.InitialFocus));let J=Vt();return Re.createElement(bT,null,Re.createElement(sx,{force:!0},Re.createElement(Nb,null,Re.createElement(Kp.Provider,{value:z},Re.createElement(jb,{target:b},Re.createElement(sx,{force:!1},Re.createElement(ie,{slot:L},Re.createElement(te,null,Re.createElement(BT,{initialFocus:l,initialFocusFallback:b,containers:D,features:F},Re.createElement(aj,{value:I},J({ourProps:Q,theirProps:p,slot:L,defaultTag:rI,features:iI,visible:C===0,name:"Dialog"})))))))))))}),rI="div",iI=jo.RenderStrategy|jo.Static;function sI(e,t){let{transition:n=!1,open:r,...i}=e,o=dl(),l=e.hasOwnProperty("open")||o!==null,u=e.hasOwnProperty("onClose");if(!l&&!u)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!l)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!u)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!o&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(r!==void 0||n)&&!i.static?Re.createElement(ox,null,Re.createElement(XT,{show:r,transition:n,unmount:i.unmount},Re.createElement(ax,{ref:t,...i}))):Re.createElement(ox,null,Re.createElement(ax,{ref:t,open:r,...i}))}let oI="div";function aI(e,t){let n=w.useId(),{id:r=`headlessui-dialog-panel-${n}`,transition:i=!1,...o}=e,[{dialogState:l,unmount:u},c]=zc("Dialog.Panel"),f=_n(t,c.panelRef),h=zr({open:l===0}),p=Ze(E=>{E.stopPropagation()}),v={ref:f,id:r,onClick:p},y=i?Yp:w.Fragment,b=i?{unmount:u}:{},k=Vt();return Re.createElement(y,{...b},k({ourProps:v,theirProps:o,slot:h,defaultTag:oI,name:"Dialog.Panel"}))}let lI="div";function uI(e,t){let{transition:n=!1,...r}=e,[{dialogState:i,unmount:o}]=zc("Dialog.Backdrop"),l=zr({open:i===0}),u={ref:t,"aria-hidden":!0},c=n?Yp:w.Fragment,f=n?{unmount:o}:{},h=Vt();return Re.createElement(c,{...f},h({ourProps:u,theirProps:r,slot:l,defaultTag:lI,name:"Dialog.Backdrop"}))}let cI="h2";function dI(e,t){let n=w.useId(),{id:r=`headlessui-dialog-title-${n}`,...i}=e,[{dialogState:o,setTitleId:l}]=zc("Dialog.Title"),u=_n(t);w.useEffect(()=>(l(r),()=>l(null)),[r,l]);let c=zr({open:o===0}),f={ref:u,id:r};return Vt()({ourProps:f,theirProps:i,slot:c,defaultTag:cI,name:"Dialog.Title"})}let fI=Mt(sI),hI=Mt(aI);Mt(uI);let pI=Mt(dI),lx=Object.assign(fI,{Panel:hI,Title:pI,Description:tj}),ux=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function cx(e){var t,n;let r=(t=e.innerText)!=null?t:"",i=e.cloneNode(!0);if(!Gn(i))return r;let o=!1;for(let u of i.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))u.remove(),o=!0;let l=o?(n=i.innerText)!=null?n:"":r;return ux.test(l)&&(l=l.replace(ux,"")),l}function mI(e){let t=e.getAttribute("aria-label");if(typeof t=="string")return t.trim();let n=e.getAttribute("aria-labelledby");if(n){let r=n.split(" ").map(i=>{let o=document.getElementById(i);if(o){let l=o.getAttribute("aria-label");return typeof l=="string"?l.trim():cx(o).trim()}return null}).filter(Boolean);if(r.length>0)return r.join(", ")}return cx(e).trim()}function gI(e){let t=w.useRef(""),n=w.useRef("");return Ze(()=>{let r=e.current;if(!r)return"";let i=r.innerText;if(t.current===i)return n.current;let o=mI(r).trim().toLowerCase();return t.current=i,n.current=o,o})}var yI=Object.defineProperty,vI=(e,t,n)=>t in e?yI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dx=(e,t,n)=>(vI(e,typeof t!="symbol"?t+"":t,n),n),mn=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(mn||{}),uc=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(uc||{}),bt=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItems=5]="RegisterItems",e[e.UnregisterItems=6]="UnregisterItems",e[e.SetButtonElement=7]="SetButtonElement",e[e.SetItemsElement=8]="SetItemsElement",e[e.SortItems=9]="SortItems",e[e.MarkButtonAsMoved=10]="MarkButtonAsMoved",e))(bt||{});function fx(e,t=n=>n){let n=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,r=Zw(t(e.items.slice()),o=>o.dataRef.current.domRef.current),i=n?r.indexOf(n):null;return i===-1&&(i=null),{items:r,activeItemIndex:i}}let xI={1(e){if(e.menuState===1)return e;let t=e.buttonElement?qu.Tracked(Tb(e.buttonElement)):e.buttonPositionState;return{...e,activeItemIndex:null,pendingFocus:{focus:Wt.Nothing},menuState:1,buttonPositionState:t}},0(e,t){return e.menuState===0?e:{...e,__demoMode:!1,pendingFocus:t.focus,menuState:0,buttonPositionState:qu.Idle}},2:(e,t)=>{var n,r,i,o,l;if(e.menuState===1)return e;let u={...e,searchQuery:"",activationTrigger:(n=t.trigger)!=null?n:1,__demoMode:!1};if(t.focus===Wt.Nothing)return{...u,activeItemIndex:null};if(t.focus===Wt.Specific)return{...u,activeItemIndex:e.items.findIndex(h=>h.id===t.id)};if(t.focus===Wt.Previous){let h=e.activeItemIndex;if(h!==null){let p=e.items[h].dataRef.current.domRef,v=Iu(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:y=>y.id,resolveDisabled:y=>y.dataRef.current.disabled});if(v!==null){let y=e.items[v].dataRef.current.domRef;if(((r=p.current)==null?void 0:r.previousElementSibling)===y.current||((i=y.current)==null?void 0:i.previousElementSibling)===null)return{...u,activeItemIndex:v}}}}else if(t.focus===Wt.Next){let h=e.activeItemIndex;if(h!==null){let p=e.items[h].dataRef.current.domRef,v=Iu(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:y=>y.id,resolveDisabled:y=>y.dataRef.current.disabled});if(v!==null){let y=e.items[v].dataRef.current.domRef;if(((o=p.current)==null?void 0:o.nextElementSibling)===y.current||((l=y.current)==null?void 0:l.nextElementSibling)===null)return{...u,activeItemIndex:v}}}}let c=fx(e),f=Iu(t,{resolveItems:()=>c.items,resolveActiveIndex:()=>c.activeItemIndex,resolveId:h=>h.id,resolveDisabled:h=>h.dataRef.current.disabled});return{...u,...c,activeItemIndex:f}},3:(e,t)=>{let n=e.searchQuery!==""?0:1,r=e.searchQuery+t.value.toLowerCase(),i=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+n).concat(e.items.slice(0,e.activeItemIndex+n)):e.items).find(l=>{var u;return((u=l.dataRef.current.textValue)==null?void 0:u.startsWith(r))&&!l.dataRef.current.disabled}),o=i?e.items.indexOf(i):-1;return o===-1||o===e.activeItemIndex?{...e,searchQuery:r}:{...e,searchQuery:r,activeItemIndex:o,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,t)=>{let n=e.items.concat(t.items.map(i=>i)),r=e.activeItemIndex;return e.pendingFocus.focus!==Wt.Nothing&&(r=Iu(e.pendingFocus,{resolveItems:()=>n,resolveActiveIndex:()=>e.activeItemIndex,resolveId:i=>i.id,resolveDisabled:i=>i.dataRef.current.disabled})),{...e,items:n,activeItemIndex:r,pendingFocus:{focus:Wt.Nothing},pendingShouldSort:!0}},6:(e,t)=>{let n=e.items,r=[],i=new Set(t.items);for(let[o,l]of n.entries())if(i.has(l.id)&&(r.push(o),i.delete(l.id),i.size===0))break;if(r.length>0){n=n.slice();for(let o of r.reverse())n.splice(o,1)}return{...e,items:n,activationTrigger:1}},7:(e,t)=>e.buttonElement===t.element?e:{...e,buttonElement:t.element},8:(e,t)=>e.itemsElement===t.element?e:{...e,itemsElement:t.element},9:e=>e.pendingShouldSort?{...e,...fx(e),pendingShouldSort:!1}:e,10(e){return e.buttonPositionState.kind!=="Tracked"?e:{...e,buttonPositionState:qu.Moved}}};class Gp extends Vw{constructor(t){super(t),dx(this,"actions",{registerItem:Iv(()=>{let n=[],r=new Set;return[(i,o)=>{r.has(o)||(r.add(o),n.push({id:i,dataRef:o}))},()=>(r.clear(),this.send({type:5,items:n.splice(0)}))]}),unregisterItem:Iv(()=>{let n=[];return[r=>n.push(r),()=>this.send({type:6,items:n.splice(0)})]})}),dx(this,"selectors",{activeDescendantId(n){var r;let i=n.activeItemIndex,o=n.items;return i===null||(r=o[i])==null?void 0:r.id},isActive(n,r){var i;let o=n.activeItemIndex,l=n.items;return o!==null?((i=l[o])==null?void 0:i.id)===r:!1},shouldScrollIntoView(n,r){return n.__demoMode||n.menuState!==0||n.activationTrigger===0?!1:this.isActive(n,r)},didButtonMove(n){return n.buttonPositionState.kind==="Moved"}}),this.on(5,()=>{this.disposables.requestAnimationFrame(()=>{this.send({type:9})})});{let n=this.state.id,r=Tc.get(null);this.disposables.add(r.on(Yw.Push,i=>{!r.selectors.isTop(i,n)&&this.state.menuState===0&&this.send({type:1})})),this.on(0,()=>r.actions.push(n)),this.on(1,()=>r.actions.pop(n))}this.disposables.group(n=>{this.on(1,r=>{r.buttonElement&&(n.dispose(),n.add(AT(r.buttonElement,r.buttonPositionState,()=>{this.send({type:10})})))})})}static new({id:t,__demoMode:n=!1}){return new Gp({id:t,__demoMode:n,menuState:n?0:1,buttonElement:null,itemsElement:null,items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1,pendingShouldSort:!1,pendingFocus:{focus:Wt.Nothing},buttonPositionState:qu.Idle})}reduce(t,n){return br(n.type,xI,t,n)}}const Fb=w.createContext(null);function Jp(e){let t=w.useContext(Fb);if(t===null){let n=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,zb),n}return t}function zb({id:e,__demoMode:t=!1}){let n=w.useMemo(()=>Gp.new({id:e,__demoMode:t}),[]);return Vp(()=>n.dispose()),n}let wI=w.Fragment;function bI(e,t){let n=w.useId(),{__demoMode:r=!1,...i}=e,o=zb({id:n,__demoMode:r}),[l,u,c]=or(o,E=>[E.menuState,E.itemsElement,E.buttonElement]),f=_n(t),h=Tc.get(null),p=or(h,w.useCallback(E=>h.selectors.isTop(E,n),[h,n]));nb(p,[c,u],(E,C)=>{var _;o.send({type:bt.CloseMenu}),Fp(C,$p.Loose)||(E.preventDefault(),(_=o.state.buttonElement)==null||_.focus())});let v=Ze(()=>{o.send({type:bt.CloseMenu})}),y=zr({open:l===mn.Open,close:v}),b={ref:f},k=Vt();return Re.createElement(vT,null,Re.createElement(Fb.Provider,{value:o},Re.createElement(Sb,{value:br(l,{[mn.Open]:En.Open,[mn.Closed]:En.Closed})},k({ourProps:b,theirProps:i,slot:y,defaultTag:wI,name:"Menu"}))))}let kI="button";function SI(e,t){let n=Jp("Menu.Button"),r=w.useId(),{id:i=`headlessui-menu-button-${r}`,disabled:o=!1,autoFocus:l=!1,...u}=e,c=w.useRef(null),f=mT(),h=_n(t,c,pT(),Ze(O=>n.send({type:bt.SetButtonElement,element:O}))),p=Ze(O=>{switch(O.key){case nn.Space:case nn.Enter:case nn.ArrowDown:O.preventDefault(),O.stopPropagation(),n.send({type:bt.OpenMenu,focus:{focus:Wt.First}});break;case nn.ArrowUp:O.preventDefault(),O.stopPropagation(),n.send({type:bt.OpenMenu,focus:{focus:Wt.Last}});break}}),v=Ze(O=>{switch(O.key){case nn.Space:O.preventDefault();break}}),[y,b,k]=or(n,O=>[O.menuState,O.buttonElement,O.itemsElement]),E=y===mn.Open;Pj(E,{trigger:b,action:w.useCallback(O=>{if(b!=null&&b.contains(O.target))return Nu.Ignore;let D=O.target.closest('[role="menuitem"]:not([data-disabled])');return Gn(D)?Nu.Select(D):k!=null&&k.contains(O.target)?Nu.Ignore:Nu.Close},[b,k]),close:w.useCallback(()=>n.send({type:bt.CloseMenu}),[]),select:w.useCallback(O=>O.click(),[])});let C=uj(O=>{var D;o||(y===mn.Open?(qn.flushSync(()=>n.send({type:bt.CloseMenu})),(D=c.current)==null||D.focus({preventScroll:!0})):(O.preventDefault(),n.send({type:bt.OpenMenu,focus:{focus:Wt.Nothing},trigger:uc.Pointer})))}),{isFocusVisible:_,focusProps:j}=TC({autoFocus:l}),{isHovered:I,hoverProps:M}=NC({isDisabled:o}),{pressed:A,pressProps:B}=MC({disabled:o}),te=zr({open:y===mn.Open,active:A||y===mn.Open,disabled:o,hover:I,focus:_,autofocus:l}),H=Ow(f(),{ref:h,id:i,type:Aj(e,c.current),"aria-haspopup":"menu","aria-controls":k==null?void 0:k.id,"aria-expanded":y===mn.Open,disabled:o||void 0,autoFocus:l,onKeyDown:p,onKeyUp:v},C,j,M,B);return Vt()({ourProps:H,theirProps:u,slot:te,defaultTag:kI,name:"Menu.Button"})}let EI="div",_I=jo.RenderStrategy|jo.Static;function CI(e,t){let n=w.useId(),{id:r=`headlessui-menu-items-${n}`,anchor:i,portal:o=!1,modal:l=!0,transition:u=!1,...c}=e,f=hT(i),h=Jp("Menu.Items"),[p,v]=yT(f),y=gT(),[b,k]=w.useState(null),E=_n(t,f?p:null,Ze(L=>h.send({type:bt.SetItemsElement,element:L})),k),[C,_]=or(h,L=>[L.menuState,L.buttonElement]),j=Qa(_),I=Qa(b);f&&(o=!0);let M=dl(),[A,B]=ob(u,b,M!==null?(M&En.Open)===En.Open:C===mn.Open);Jw(A,_,()=>{h.send({type:bt.CloseMenu})});let te=or(h,L=>L.__demoMode),H=te?!1:l&&C===mn.Open;ib(H,I);let O=te?!1:l&&C===mn.Open;Gw(O,{allowed:w.useCallback(()=>[_,b],[_,b])});let D=or(h,h.selectors.didButtonMove)?!1:A;w.useEffect(()=>{let L=b;L&&C===mn.Open&&(Pw(L)||L.focus({preventScroll:!0}))},[C,b]),Yj(C===mn.Open,{container:b,accept(L){return L.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:L.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(L){L.setAttribute("role","none")}});let ne=_s(),W=Ze(L=>{var Q,T,F;switch(ne.dispose(),L.key){case nn.Space:if(h.state.searchQuery!=="")return L.preventDefault(),L.stopPropagation(),h.send({type:bt.Search,value:L.key});case nn.Enter:if(L.preventDefault(),L.stopPropagation(),h.state.activeItemIndex!==null){let{dataRef:J}=h.state.items[h.state.activeItemIndex];(T=(Q=J.current)==null?void 0:Q.domRef.current)==null||T.click()}h.send({type:bt.CloseMenu}),Xw(h.state.buttonElement);break;case nn.ArrowDown:return L.preventDefault(),L.stopPropagation(),h.send({type:bt.GoToItem,focus:Wt.Next});case nn.ArrowUp:return L.preventDefault(),L.stopPropagation(),h.send({type:bt.GoToItem,focus:Wt.Previous});case nn.Home:case nn.PageUp:return L.preventDefault(),L.stopPropagation(),h.send({type:bt.GoToItem,focus:Wt.First});case nn.End:case nn.PageDown:return L.preventDefault(),L.stopPropagation(),h.send({type:bt.GoToItem,focus:Wt.Last});case nn.Escape:L.preventDefault(),L.stopPropagation(),qn.flushSync(()=>h.send({type:bt.CloseMenu})),(F=h.state.buttonElement)==null||F.focus({preventScroll:!0});break;case nn.Tab:L.preventDefault(),L.stopPropagation(),qn.flushSync(()=>h.send({type:bt.CloseMenu})),jj(h.state.buttonElement,L.shiftKey?xr.Previous:xr.Next);break;default:L.key.length===1&&(h.send({type:bt.Search,value:L.key}),ne.setTimeout(()=>h.send({type:bt.ClearSearch}),350));break}}),Y=Ze(L=>{switch(L.key){case nn.Space:L.preventDefault();break}}),V=zr({open:C===mn.Open}),ie=Ow(f?y():{},{"aria-activedescendant":or(h,h.selectors.activeDescendantId),"aria-labelledby":or(h,L=>{var Q;return(Q=L.buttonElement)==null?void 0:Q.id}),id:r,onKeyDown:W,onKeyUp:Y,role:"menu",tabIndex:C===mn.Open?0:void 0,ref:E,style:{...c.style,...v,"--button-width":lj(A,_,!0).width},...sb(B)}),z=Vt();return Re.createElement(Nb,{enabled:o?e.static||A:!1,ownerDocument:j},z({ourProps:ie,theirProps:c,slot:V,defaultTag:EI,features:_I,visible:D,name:"Menu.Items"}))}let jI=w.Fragment;function NI(e,t){let n=w.useId(),{id:r=`headlessui-menu-item-${n}`,disabled:i=!1,...o}=e,l=Jp("Menu.Item"),u=or(l,D=>l.selectors.isActive(D,r)),c=w.useRef(null),f=_n(t,c),h=or(l,D=>l.selectors.shouldScrollIntoView(D,r));Tt(()=>{if(h)return Mn().requestAnimationFrame(()=>{var D,ne;(ne=(D=c.current)==null?void 0:D.scrollIntoView)==null||ne.call(D,{block:"nearest"})})},[h,c]);let p=gI(c),v=w.useRef({disabled:i,domRef:c,get textValue(){return p()}});Tt(()=>{v.current.disabled=i},[v,i]),Tt(()=>(l.actions.registerItem(r,v),()=>l.actions.unregisterItem(r)),[v,r]);let y=Ze(()=>{l.send({type:bt.CloseMenu})}),b=Ze(D=>{if(i)return D.preventDefault();l.send({type:bt.CloseMenu}),Xw(l.state.buttonElement)}),k=Ze(()=>{if(i)return l.send({type:bt.GoToItem,focus:Wt.Nothing});l.send({type:bt.GoToItem,focus:Wt.Specific,id:r})}),E=Fj(),C=Ze(D=>E.update(D)),_=Ze(D=>{E.wasMoved(D)&&(i||u||l.send({type:bt.GoToItem,focus:Wt.Specific,id:r,trigger:uc.Pointer}))}),j=Ze(D=>{E.wasMoved(D)&&(i||u&&l.state.activationTrigger===uc.Pointer&&l.send({type:bt.GoToItem,focus:Wt.Nothing}))}),[I,M]=Bw(),[A,B]=zw(),te=zr({active:u,focus:u,disabled:i,close:y}),H={id:r,ref:f,role:"menuitem",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,"aria-labelledby":I,"aria-describedby":A,disabled:void 0,onClick:b,onFocus:k,onPointerEnter:C,onMouseEnter:C,onPointerMove:_,onMouseMove:_,onPointerLeave:j,onMouseLeave:j},O=Vt();return Re.createElement(M,null,Re.createElement(B,null,O({ourProps:H,theirProps:o,slot:te,defaultTag:jI,name:"Menu.Item"})))}let TI="div";function II(e,t){let[n,r]=Bw(),i=e,o={ref:t,"aria-labelledby":n,role:"group"},l=Vt();return Re.createElement(r,null,l({ourProps:o,theirProps:i,slot:{},defaultTag:TI,name:"Menu.Section"}))}let PI="header";function AI(e,t){let n=w.useId(),{id:r=`headlessui-menu-heading-${n}`,...i}=e,o=Lp();Tt(()=>o.register(r),[r,o.register]);let l={id:r,ref:t,role:"presentation",...o.props};return Vt()({ourProps:l,theirProps:i,slot:{},defaultTag:PI,name:"Menu.Heading"})}let RI="div";function OI(e,t){let n=e,r={ref:t,role:"separator"};return Vt()({ourProps:r,theirProps:n,slot:{},defaultTag:RI,name:"Menu.Separator"})}let MI=Mt(bI),DI=Mt(SI),LI=Mt(CI),$I=Mt(NI),FI=Mt(II),zI=Mt(AI),BI=Mt(OI),rs=Object.assign(MI,{Button:DI,Items:LI,Item:$I,Section:FI,Heading:zI,Separator:BI});const Bb=w.createContext(void 0);function js(){const e=w.useContext(Bb);if(!e)throw new Error("useAuth debe usarse dentro de un AuthProvider");return e}const UI="modulepreload",WI=function(e){return"/sport-planner/"+e},hx={},fl=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let l=function(f){return Promise.all(f.map(h=>Promise.resolve(h).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),c=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));i=l(n.map(f=>{if(f=WI(f),f in hx)return;hx[f]=!0;const h=f.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${p}`))return;const v=document.createElement("link");if(v.rel=h?"stylesheet":UI,h||(v.as="script"),v.crossOrigin="",v.href=f,c&&v.setAttribute("nonce",c),document.head.appendChild(v),h)return new Promise((y,b)=>{v.addEventListener("load",y),v.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return i.then(l=>{for(const u of l||[])u.status==="rejected"&&o(u.reason);return t().catch(o)})},HI=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>fl(async()=>{const{default:r}=await Promise.resolve().then(()=>Fo);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class Qp extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class px extends Qp{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class mx extends Qp{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class gx extends Qp{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Gh;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Gh||(Gh={}));var VI=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};class qI{constructor(t,{headers:n={},customFetch:r,region:i=Gh.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=HI(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return VI(this,arguments,void 0,function*(n,r={}){var i;try{const{headers:o,method:l,body:u,signal:c}=r;let f={},{region:h}=r;h||(h=this.region);const p=new URL(`${this.url}/${n}`);h&&h!=="any"&&(f["x-region"]=h,p.searchParams.set("forceFunctionRegion",h));let v;u&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",v=u):typeof u=="string"?(f["Content-Type"]="text/plain",v=u):typeof FormData<"u"&&u instanceof FormData?v=u:(f["Content-Type"]="application/json",v=JSON.stringify(u)));const y=yield this.fetch(p.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),o),body:v,signal:c}).catch(C=>{throw C.name==="AbortError"?C:new px(C)}),b=y.headers.get("x-relay-error");if(b&&b==="true")throw new mx(y);if(!y.ok)throw new gx(y);let k=((i=y.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),E;return k==="application/json"?E=yield y.json():k==="application/octet-stream"?E=yield y.blob():k==="text/event-stream"?E=y:k==="multipart/form-data"?E=yield y.formData():E=yield y.text(),{data:E,error:null,response:y}}catch(o){return o instanceof Error&&o.name==="AbortError"?{data:null,error:new px(o)}:{data:null,error:o,response:o instanceof gx||o instanceof mx?o.context:void 0}}})}}var tn={},Xs={},Zs={},eo={},to={},no={},YI=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},To=YI();const KI=To.fetch,Ub=To.fetch.bind(To),Wb=To.Headers,GI=To.Request,JI=To.Response,Fo=Object.freeze(Object.defineProperty({__proto__:null,Headers:Wb,Request:GI,Response:JI,default:Ub,fetch:KI},Symbol.toStringTag,{value:"Module"})),QI=VE(Fo);var Pu={},yx;function Hb(){if(yx)return Pu;yx=1,Object.defineProperty(Pu,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Pu.default=e,Pu}var vx;function Vb(){if(vx)return no;vx=1;var e=no&&no.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(no,"__esModule",{value:!0});const t=e(QI),n=e(Hb());class r{constructor(o){var l,u;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(l=o.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=o.signal,this.isMaybeSingle=(u=o.isMaybeSingle)!==null&&u!==void 0?u:!1,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,l){return this.headers=new Headers(this.headers),this.headers.set(o,l),this}then(o,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let c=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var h,p,v,y;let b=null,k=null,E=null,C=f.status,_=f.statusText;if(f.ok){if(this.method!=="HEAD"){const A=await f.text();A===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((h=this.headers.get("Accept"))===null||h===void 0)&&h.includes("application/vnd.pgrst.plan+text"))?k=A:k=JSON.parse(A))}const I=(p=this.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),M=(v=f.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");I&&M&&M.length>1&&(E=parseInt(M[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(k)&&(k.length>1?(b={code:"PGRST116",details:`Results contain ${k.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},k=null,E=null,C=406,_="Not Acceptable"):k.length===1?k=k[0]:k=null)}else{const I=await f.text();try{b=JSON.parse(I),Array.isArray(b)&&f.status===404&&(k=[],b=null,C=200,_="OK")}catch{f.status===404&&I===""?(C=204,_="No Content"):b={message:I}}if(b&&this.isMaybeSingle&&(!((y=b==null?void 0:b.details)===null||y===void 0)&&y.includes("0 rows"))&&(b=null,C=200,_="OK"),b&&this.shouldThrowOnError)throw new n.default(b)}return{error:b,data:k,count:E,status:C,statusText:_}});return this.shouldThrowOnError||(c=c.catch(f=>{var h,p,v;return{error:{message:`${(h=f==null?void 0:f.name)!==null&&h!==void 0?h:"FetchError"}: ${f==null?void 0:f.message}`,details:`${(p=f==null?void 0:f.stack)!==null&&p!==void 0?p:""}`,hint:"",code:`${(v=f==null?void 0:f.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),c.then(o,l)}returns(){return this}overrideTypes(){return this}}return no.default=r,no}var xx;function qb(){if(xx)return to;xx=1;var e=to&&to.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(to,"__esModule",{value:!0});const t=e(Vb());class n extends t.default{select(i){let o=!1;const l=(i??"*").split("").map(u=>/\s/.test(u)&&!o?"":(u==='"'&&(o=!o),u)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:o=!0,nullsFirst:l,foreignTable:u,referencedTable:c=u}={}){const f=c?`${c}.order`:"order",h=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${h?`${h},`:""}${i}.${o?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:o,referencedTable:l=o}={}){const u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${i}`),this}range(i,o,{foreignTable:l,referencedTable:u=l}={}){const c=typeof u>"u"?"offset":`${u}.offset`,f=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(c,`${i}`),this.url.searchParams.set(f,`${o-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:o=!1,settings:l=!1,buffers:u=!1,wal:c=!1,format:f="text"}={}){var h;const p=[i?"analyze":null,o?"verbose":null,l?"settings":null,u?"buffers":null,c?"wal":null].filter(Boolean).join("|"),v=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${f}; for="${v}"; options=${p};`),f==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return to.default=n,to}var wx;function Xp(){if(wx)return eo;wx=1;var e=eo&&eo.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(eo,"__esModule",{value:!0});const t=e(qb());class n extends t.default{eq(i,o){return this.url.searchParams.append(i,`eq.${o}`),this}neq(i,o){return this.url.searchParams.append(i,`neq.${o}`),this}gt(i,o){return this.url.searchParams.append(i,`gt.${o}`),this}gte(i,o){return this.url.searchParams.append(i,`gte.${o}`),this}lt(i,o){return this.url.searchParams.append(i,`lt.${o}`),this}lte(i,o){return this.url.searchParams.append(i,`lte.${o}`),this}like(i,o){return this.url.searchParams.append(i,`like.${o}`),this}likeAllOf(i,o){return this.url.searchParams.append(i,`like(all).{${o.join(",")}}`),this}likeAnyOf(i,o){return this.url.searchParams.append(i,`like(any).{${o.join(",")}}`),this}ilike(i,o){return this.url.searchParams.append(i,`ilike.${o}`),this}ilikeAllOf(i,o){return this.url.searchParams.append(i,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(i,o){return this.url.searchParams.append(i,`ilike(any).{${o.join(",")}}`),this}is(i,o){return this.url.searchParams.append(i,`is.${o}`),this}in(i,o){const l=Array.from(new Set(o)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(i,`in.(${l})`),this}contains(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cs.{${o.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(o)}`),this}containedBy(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cd.{${o.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(o)}`),this}rangeGt(i,o){return this.url.searchParams.append(i,`sr.${o}`),this}rangeGte(i,o){return this.url.searchParams.append(i,`nxl.${o}`),this}rangeLt(i,o){return this.url.searchParams.append(i,`sl.${o}`),this}rangeLte(i,o){return this.url.searchParams.append(i,`nxr.${o}`),this}rangeAdjacent(i,o){return this.url.searchParams.append(i,`adj.${o}`),this}overlaps(i,o){return typeof o=="string"?this.url.searchParams.append(i,`ov.${o}`):this.url.searchParams.append(i,`ov.{${o.join(",")}}`),this}textSearch(i,o,{config:l,type:u}={}){let c="";u==="plain"?c="pl":u==="phrase"?c="ph":u==="websearch"&&(c="w");const f=l===void 0?"":`(${l})`;return this.url.searchParams.append(i,`${c}fts${f}.${o}`),this}match(i){return Object.entries(i).forEach(([o,l])=>{this.url.searchParams.append(o,`eq.${l}`)}),this}not(i,o,l){return this.url.searchParams.append(i,`not.${o}.${l}`),this}or(i,{foreignTable:o,referencedTable:l=o}={}){const u=l?`${l}.or`:"or";return this.url.searchParams.append(u,`(${i})`),this}filter(i,o,l){return this.url.searchParams.append(i,`${o}.${l}`),this}}return eo.default=n,eo}var bx;function Yb(){if(bx)return Zs;bx=1;var e=Zs&&Zs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Zs,"__esModule",{value:!0});const t=e(Xp());class n{constructor(i,{headers:o={},schema:l,fetch:u}){this.url=i,this.headers=new Headers(o),this.schema=l,this.fetch=u}select(i,o){const{head:l=!1,count:u}=o??{},c=l?"HEAD":"GET";let f=!1;const h=(i??"*").split("").map(p=>/\s/.test(p)&&!f?"":(p==='"'&&(f=!f),p)).join("");return this.url.searchParams.set("select",h),u&&this.headers.append("Prefer",`count=${u}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:o,defaultToNull:l=!0}={}){var u;const c="POST";if(o&&this.headers.append("Prefer",`count=${o}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const f=i.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(f.length>0){const h=[...new Set(f)].map(p=>`"${p}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}upsert(i,{onConflict:o,ignoreDuplicates:l=!1,count:u,defaultToNull:c=!0}={}){var f;const h="POST";if(this.headers.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),u&&this.headers.append("Prefer",`count=${u}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const p=i.reduce((v,y)=>v.concat(Object.keys(y)),[]);if(p.length>0){const v=[...new Set(p)].map(y=>`"${y}"`);this.url.searchParams.set("columns",v.join(","))}}return new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}update(i,{count:o}={}){var l;const u="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:i}={}){var o;const l="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}}return Zs.default=n,Zs}var kx;function XI(){if(kx)return Xs;kx=1;var e=Xs&&Xs.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Xs,"__esModule",{value:!0});const t=e(Yb()),n=e(Xp());class r{constructor(o,{headers:l={},schema:u,fetch:c}={}){this.url=o,this.headers=new Headers(l),this.schemaName=u,this.fetch=c}from(o){const l=new URL(`${this.url}/${o}`);return new t.default(l,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new r(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,l={},{head:u=!1,get:c=!1,count:f}={}){var h;let p;const v=new URL(`${this.url}/rpc/${o}`);let y;u||c?(p=u?"HEAD":"GET",Object.entries(l).filter(([k,E])=>E!==void 0).map(([k,E])=>[k,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([k,E])=>{v.searchParams.append(k,E)})):(p="POST",y=l);const b=new Headers(this.headers);return f&&b.set("Prefer",`count=${f}`),new n.default({method:p,url:v,headers:b,schema:this.schemaName,body:y,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}}return Xs.default=r,Xs}var Sx;function ZI(){if(Sx)return tn;Sx=1;var e=tn&&tn.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(tn,"__esModule",{value:!0}),tn.PostgrestError=tn.PostgrestBuilder=tn.PostgrestTransformBuilder=tn.PostgrestFilterBuilder=tn.PostgrestQueryBuilder=tn.PostgrestClient=void 0;const t=e(XI());tn.PostgrestClient=t.default;const n=e(Yb());tn.PostgrestQueryBuilder=n.default;const r=e(Xp());tn.PostgrestFilterBuilder=r.default;const i=e(qb());tn.PostgrestTransformBuilder=i.default;const o=e(Vb());tn.PostgrestBuilder=o.default;const l=e(Hb());return tn.PostgrestError=l.default,tn.default={PostgrestClient:t.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:o.default,PostgrestError:l.default},tn}var eP=ZI();const tP=Ro(eP),{PostgrestClient:nP,PostgrestQueryBuilder:P5,PostgrestFilterBuilder:A5,PostgrestTransformBuilder:R5,PostgrestBuilder:O5,PostgrestError:M5}=tP;class rP{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const iP="2.75.0",sP=`realtime-js/${iP}`,oP="1.0.0",Jh=1e4,aP=1e3,lP=100;var $a;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})($a||($a={}));var Gt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Gt||(Gt={}));var vr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(vr||(vr={}));var Qh;(function(e){e.websocket="websocket"})(Qh||(Qh={}));var fs;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(fs||(fs={}));class uP{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const i=n.getUint8(1),o=n.getUint8(2);let l=this.HEADER_LENGTH+2;const u=r.decode(t.slice(l,l+i));l=l+i;const c=r.decode(t.slice(l,l+o));l=l+o;const f=JSON.parse(r.decode(t.slice(l,t.byteLength)));return{ref:null,topic:u,event:c,payload:f}}}class Kb{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var _t;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(_t||(_t={}));const Ex=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((o,l)=>(o[l]=cP(l,e,t,i),o),{}):{}},cP=(e,t,n,r)=>{const i=t.find(u=>u.name===e),o=i==null?void 0:i.type,l=n[e];return o&&!r.includes(o)?Gb(o,l):Xh(l)},Gb=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return pP(t,n)}switch(e){case _t.bool:return dP(t);case _t.float4:case _t.float8:case _t.int2:case _t.int4:case _t.int8:case _t.numeric:case _t.oid:return fP(t);case _t.json:case _t.jsonb:return hP(t);case _t.timestamp:return mP(t);case _t.abstime:case _t.date:case _t.daterange:case _t.int4range:case _t.int8range:case _t.money:case _t.reltime:case _t.text:case _t.time:case _t.timestamptz:case _t.timetz:case _t.tsrange:case _t.tstzrange:return Xh(t);default:return Xh(t)}},Xh=e=>e,dP=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},fP=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},hP=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},pP=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let o;const l=e.slice(1,n);try{o=JSON.parse("["+l+"]")}catch{o=l?l.split(","):[]}return o.map(u=>Gb(t,u))}return e},mP=e=>typeof e=="string"?e.replace(" ","T"):e,Jb=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Qf{constructor(t,n,r={},i=Jh){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var _x;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(_x||(_x={}));class Fa{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Fa.syncState(this.state,i,o,l),this.pendingDiffs.forEach(c=>{this.state=Fa.syncDiff(this.state,c,o,l)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},i=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Fa.syncDiff(this.state,i,o,l),u())}),this.onJoin((i,o,l)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:l})}),this.onLeave((i,o,l)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const o=this.cloneDeep(t),l=this.transformState(n),u={},c={};return this.map(o,(f,h)=>{l[f]||(c[f]=h)}),this.map(l,(f,h)=>{const p=o[f];if(p){const v=h.map(E=>E.presence_ref),y=p.map(E=>E.presence_ref),b=h.filter(E=>y.indexOf(E.presence_ref)<0),k=p.filter(E=>v.indexOf(E.presence_ref)<0);b.length>0&&(u[f]=b),k.length>0&&(c[f]=k)}else u[f]=h}),this.syncDiff(o,{joins:u,leaves:c},r,i)}static syncDiff(t,n,r,i){const{joins:o,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(u,c)=>{var f;const h=(f=t[u])!==null&&f!==void 0?f:[];if(t[u]=this.cloneDeep(c),h.length>0){const p=t[u].map(y=>y.presence_ref),v=h.filter(y=>p.indexOf(y.presence_ref)<0);t[u].unshift(...v)}r(u,h,c)}),this.map(l,(u,c)=>{let f=t[u];if(!f)return;const h=c.map(p=>p.presence_ref);f=f.filter(p=>h.indexOf(p.presence_ref)<0),t[u]=f,i(u,f,c),f.length===0&&delete t[u]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Cx;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Cx||(Cx={}));var za;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(za||(za={}));var Xr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Xr||(Xr={}));class Zp{constructor(t,n={config:{}},r){var i,o;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Gt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Qf(this,vr.join,this.params,this.timeout),this.rejoinTimer=new Kb(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Gt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Gt.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Gt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Gt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Gt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(vr.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new Fa(this),this.broadcastEndpointURL=Jb(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Gt.closed){const{config:{broadcast:l,presence:u,private:c}}=this.params,f=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(y=>y.filter))!==null&&i!==void 0?i:[],h=!!this.bindings[za.PRESENCE]&&this.bindings[za.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,p={},v={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:h}),postgres_changes:f,private:c};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(y=>t==null?void 0:t(Xr.CHANNEL_ERROR,y)),this._onClose(()=>t==null?void 0:t(Xr.CLOSED)),this.updateJoinPayload(Object.assign({config:v},p)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:y})=>{var b;if(this.socket.setAuth(),y===void 0){t==null||t(Xr.SUBSCRIBED);return}else{const k=this.bindings.postgres_changes,E=(b=k==null?void 0:k.length)!==null&&b!==void 0?b:0,C=[];for(let _=0;_<E;_++){const j=k[_],{filter:{event:I,schema:M,table:A,filter:B}}=j,te=y&&y[_];if(te&&te.event===I&&te.schema===M&&te.table===A&&te.filter===B)C.push(Object.assign(Object.assign({},j),{id:te.id}));else{this.unsubscribe(),this.state=Gt.errored,t==null||t(Xr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,t&&t(Xr.SUBSCRIBED);return}}).receive("error",y=>{this.state=Gt.errored,t==null||t(Xr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Xr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Gt.joined&&t===za.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){const{event:o,payload:l}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:l,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=f.body)===null||i===void 0?void 0:i.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var l,u,c;const f=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),f.receive("ok",()=>o("ok")),f.receive("error",()=>o("error")),f.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Gt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(vr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Qf(this,vr.leave,{},t),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Gt.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const i=new AbortController,o=setTimeout(()=>i.abort(),r),l=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(o),l}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Qf(this,t,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>lP){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,o;const l=t.toLocaleLowerCase(),{close:u,error:c,leave:f,join:h}=vr;if(r&&[u,c,f,h].indexOf(l)>=0&&r!==this._joinRef())return;let v=this._onMessage(l,n,r);if(n&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(y=>{var b,k,E;return((b=y.filter)===null||b===void 0?void 0:b.event)==="*"||((E=(k=y.filter)===null||k===void 0?void 0:k.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===l}).map(y=>y.callback(v,r)):(o=this.bindings[l])===null||o===void 0||o.filter(y=>{var b,k,E,C,_,j;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in y){const I=y.id,M=(b=y.filter)===null||b===void 0?void 0:b.event;return I&&((k=n.ids)===null||k===void 0?void 0:k.includes(I))&&(M==="*"||(M==null?void 0:M.toLocaleLowerCase())===((E=n.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const I=(_=(C=y==null?void 0:y.filter)===null||C===void 0?void 0:C.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return I==="*"||I===((j=n==null?void 0:n.event)===null||j===void 0?void 0:j.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===l}).map(y=>{if(typeof v=="object"&&"ids"in v){const b=v.data,{schema:k,table:E,commit_timestamp:C,type:_,errors:j}=b;v=Object.assign(Object.assign({},{schema:k,table:E,commit_timestamp:C,eventType:_,new:{},old:{},errors:j}),this._getPayloadRecords(b))}y.callback(v,r)})}_isClosed(){return this.state===Gt.closed}_isJoined(){return this.state===Gt.joined}_isJoining(){return this.state===Gt.joining}_isLeaving(){return this.state===Gt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),o={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&Zp.isEqual(i.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(vr.close,{},t)}_onError(t){this._on(vr.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Gt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Ex(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Ex(t.columns,t.old_record)),n}}const Xf=()=>{},Au={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},gP=[1e3,2e3,5e3,1e4],yP=1e4,vP=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class xP{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Jh,this.transport=null,this.heartbeatIntervalMs=Au.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Xf,this.ref=0,this.reconnectTimer=null,this.logger=Xf,this.conn=null,this.sendBuffer=[],this.serializer=new uP,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>fl(async()=>{const{default:u}=await Promise.resolve().then(()=>Fo);return{default:u}},void 0).then(({default:u})=>u(...l)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...l)=>o(...l)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Qh.websocket}`,this.httpEndpoint=Jb(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=rP.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:oP}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case $a.connecting:return fs.Connecting;case $a.open:return fs.Open;case $a.closing:return fs.Closing;default:return fs.Closed}}isConnected(){return this.connectionState()===fs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{const o=new Zp(`realtime:${t}`,n,this);return this.channels.push(o),o}}push(t){const{topic:n,event:r,payload:i,ref:o}=t,l=()=>{this.encode(t,u=>{var c;(c=this.conn)===null||c===void 0||c.send(u)})};this.log("push",`${n} ${r} (${o})`,i),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(aP,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Au.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:o,ref:l}=n,u=l?`(${l})`:"",c=o.status||"";this.log("receive",`${c} ${r} ${i} ${u}`.trim(),o),this.channels.filter(f=>f._isMember(r)).forEach(f=>f._trigger(i,o,l)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(vr.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([vP],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:sP};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(vr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Kb(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Au.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,i,o,l,u,c,f,h;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Jh,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:Au.HEARTBEAT_INTERVAL,this.worker=(o=t==null?void 0:t.worker)!==null&&o!==void 0?o:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=t==null?void 0:t.heartbeatCallback)!==null&&u!==void 0?u:Xf,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:(p=>gP[p-1]||yP),this.encode=(f=t==null?void 0:t.encode)!==null&&f!==void 0?f:((p,v)=>v(JSON.stringify(p))),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class em extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Ut(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class wP extends em{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Zh extends em{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var bP=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};const Qb=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>fl(async()=>{const{default:r}=await Promise.resolve().then(()=>Fo);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},kP=()=>bP(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield fl(()=>Promise.resolve().then(()=>Fo),void 0)).Response:Response}),ep=e=>{if(Array.isArray(e))return e.map(n=>ep(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[i]=ep(r)}),t},SP=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Ns=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};const Zf=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),EP=(e,t,n)=>Ns(void 0,void 0,void 0,function*(){const r=yield kP();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(i=>{const o=e.status||500,l=(i==null?void 0:i.statusCode)||o+"";t(new wP(Zf(i),o,l))}).catch(i=>{t(new Zh(Zf(i),i))}):t(new Zh(Zf(e),e))}),_P=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?i:(SP(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(r)):i.body=r,t!=null&&t.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),n))};function hl(e,t,n,r,i,o){return Ns(this,void 0,void 0,function*(){return new Promise((l,u)=>{e(n,_P(t,r,i,o)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>l(c)).catch(c=>EP(c,u,r))})})}function cc(e,t,n,r){return Ns(this,void 0,void 0,function*(){return hl(e,"GET",t,n,r)})}function Ar(e,t,n,r,i){return Ns(this,void 0,void 0,function*(){return hl(e,"POST",t,r,i,n)})}function tp(e,t,n,r,i){return Ns(this,void 0,void 0,function*(){return hl(e,"PUT",t,r,i,n)})}function CP(e,t,n,r){return Ns(this,void 0,void 0,function*(){return hl(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Xb(e,t,n,r,i){return Ns(this,void 0,void 0,function*(){return hl(e,"DELETE",t,r,i,n)})}var jP=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};class NP{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return jP(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ut(t))return{data:null,error:t};throw t}})}}var TP=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};class IP{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}asStream(){return new NP(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.execute().then(t,n)}execute(){return TP(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ut(t))return{data:null,error:t};throw t}})}}var An=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};const PP={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},jx={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class AP{constructor(t,n={},r,i){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=Qb(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,i){return An(this,void 0,void 0,function*(){try{let o;const l=Object.assign(Object.assign({},jx),i);let u=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const c=l.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",l.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",l.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=r,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,c&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i!=null&&i.headers&&(u=Object.assign(Object.assign({},u),i.headers));const f=this._removeEmptyFolders(n),h=this._getFinalPath(f),p=yield(t=="PUT"?tp:Ar)(this.fetch,`${this.url}/object/${h}`,o,Object.assign({headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:f,id:p.Id,fullPath:p.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ut(o))return{data:null,error:o};throw o}})}upload(t,n,r){return An(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,i){return An(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),l=this._getFinalPath(o),u=new URL(this.url+`/object/upload/sign/${l}`);u.searchParams.set("token",n);try{let c;const f=Object.assign({upsert:jx.upsert},i),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",f.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",f.cacheControl)):(c=r,h["cache-control"]=`max-age=${f.cacheControl}`,h["content-type"]=f.contentType);const p=yield tp(this.fetch,u.toString(),c,{headers:h});return{data:{path:o,fullPath:p.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ut(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return An(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const o=yield Ar(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),l=new URL(this.url+o.url),u=l.searchParams.get("token");if(!u)throw new em("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:u},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ut(r))return{data:null,error:r};throw r}})}update(t,n,r){return An(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return An(this,void 0,void 0,function*(){try{return{data:yield Ar(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ut(i))return{data:null,error:i};throw i}})}copy(t,n,r){return An(this,void 0,void 0,function*(){try{return{data:{path:(yield Ar(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ut(i))return{data:null,error:i};throw i}})}createSignedUrl(t,n,r){return An(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),o=yield Ar(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const l=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${l}`)},{data:o,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ut(i))return{data:null,error:i};throw i}})}createSignedUrls(t,n,r){return An(this,void 0,void 0,function*(){try{const i=yield Ar(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${o}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ut(i))return{data:null,error:i};throw i}})}download(t,n){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),l=o?`?${o}`:"",u=this._getFinalPath(t),c=()=>cc(this.fetch,`${this.url}/${i}/${u}${l}`,{headers:this.headers,noResolveJson:!0});return new IP(c,this.shouldThrowOnError)}info(t){return An(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield cc(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:ep(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ut(r))return{data:null,error:r};throw r}})}exists(t){return An(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield CP(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ut(r)&&r instanceof Zh){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),i=[],o=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&i.push(o);const u=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&i.push(c);let f=i.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${r}${f}`)}}}remove(t){return An(this,void 0,void 0,function*(){try{return{data:yield Xb(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ut(n))return{data:null,error:n};throw n}})}list(t,n,r){return An(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},PP),n),{prefix:t||""});return{data:yield Ar(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ut(i))return{data:null,error:i};throw i}})}listV2(t,n){return An(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield Ar(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ut(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const RP="2.75.0",OP={"X-Client-Info":`storage-js/${RP}`};var ro=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};class MP{constructor(t,n={},r,i){this.shouldThrowOnError=!1;const o=new URL(t);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},OP),n),this.fetch=Qb(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return ro(this,void 0,void 0,function*(){try{return{data:yield cc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ut(t))return{data:null,error:t};throw t}})}getBucket(t){return ro(this,void 0,void 0,function*(){try{return{data:yield cc(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ut(n))return{data:null,error:n};throw n}})}createBucket(t){return ro(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield Ar(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ut(i))return{data:null,error:i};throw i}})}updateBucket(t,n){return ro(this,void 0,void 0,function*(){try{return{data:yield tp(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ut(r))return{data:null,error:r};throw r}})}emptyBucket(t){return ro(this,void 0,void 0,function*(){try{return{data:yield Ar(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ut(n))return{data:null,error:n};throw n}})}deleteBucket(t){return ro(this,void 0,void 0,function*(){try{return{data:yield Xb(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ut(n))return{data:null,error:n};throw n}})}}class DP extends MP{constructor(t,n={},r,i){super(t,n,r,i)}from(t){return new AP(this.url,this.headers,t,this.fetch)}}const LP="2.75.0";let Ra="";typeof Deno<"u"?Ra="deno":typeof document<"u"?Ra="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ra="react-native":Ra="node";const $P={"X-Client-Info":`supabase-js-${Ra}/${LP}`},FP={headers:$P},zP={schema:"public"},BP={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},UP={};var WP=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};const HP=e=>{let t;return e?t=e:typeof fetch>"u"?t=Ub:t=fetch,(...n)=>t(...n)},VP=()=>typeof Headers>"u"?Wb:Headers,qP=(e,t,n)=>{const r=HP(n),i=VP();return(o,l)=>WP(void 0,void 0,void 0,function*(){var u;const c=(u=yield t())!==null&&u!==void 0?u:e;let f=new i(l==null?void 0:l.headers);return f.has("apikey")||f.set("apikey",e),f.has("Authorization")||f.set("Authorization",`Bearer ${c}`),r(o,Object.assign(Object.assign({},l),{headers:f}))})};var YP=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};function KP(e){return e.endsWith("/")?e:e+"/"}function GP(e,t){var n,r;const{db:i,auth:o,realtime:l,global:u}=e,{db:c,auth:f,realtime:h,global:p}=t,v={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},f),o),realtime:Object.assign(Object.assign({},h),l),storage:{},global:Object.assign(Object.assign(Object.assign({},p),u),{headers:Object.assign(Object.assign({},(n=p==null?void 0:p.headers)!==null&&n!==void 0?n:{}),(r=u==null?void 0:u.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>YP(this,void 0,void 0,function*(){return""})};return e.accessToken?v.accessToken=e.accessToken:delete v.accessToken,v}function JP(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(KP(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Zb="2.75.0",ho=30*1e3,np=3,eh=np*ho,QP="http://localhost:9999",XP="supabase.auth.token",ZP={"X-Client-Info":`gotrue-js/${Zb}`},rp="X-Supabase-Api-Version",ek={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},eA=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,tA=600*1e3;class el extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Ke(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class nA extends el{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function rA(e){return Ke(e)&&e.name==="AuthApiError"}class hs extends el{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Ui extends el{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}}class Ci extends Ui{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function iA(e){return Ke(e)&&e.name==="AuthSessionMissingError"}class io extends Ui{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ru extends Ui{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Ou extends Ui{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function sA(e){return Ke(e)&&e.name==="AuthImplicitGrantRedirectError"}class Nx extends Ui{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ip extends Ui{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function th(e){return Ke(e)&&e.name==="AuthRetryableFetchError"}class Tx extends Ui{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class sp extends Ui{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const dc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ix=` 	
\r=`.split(""),oA=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Ix.length;t+=1)e[Ix[t].charCodeAt(0)]=-2;for(let t=0;t<dc.length;t+=1)e[dc[t].charCodeAt(0)]=t;return e})();function Px(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(dc[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(dc[r]),t.queuedBits-=6}}function tk(e,t,n){const r=oA[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Ax(e){const t=[],n=l=>{t.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=l=>{uA(l,r,n)};for(let l=0;l<e.length;l+=1)tk(e.charCodeAt(l),i,o);return t.join("")}function aA(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function lA(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}aA(r,t)}}function uA(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if((e>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function ko(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)tk(e.charCodeAt(i),n,r);return new Uint8Array(t)}function cA(e){const t=[];return lA(e,n=>t.push(n)),new Uint8Array(t)}function vs(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};return e.forEach(i=>Px(i,n,r)),Px(null,n,r),t.join("")}function dA(e){return Math.round(Date.now()/1e3)+e}function fA(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Vn=()=>typeof window<"u"&&typeof document<"u",is={tested:!1,writable:!1},nk=()=>{if(!Vn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(is.tested)return is.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),is.tested=!0,is.writable=!0}catch{is.tested=!0,is.writable=!1}return is.writable};function hA(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,o)=>{t[o]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const rk=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>fl(async()=>{const{default:r}=await Promise.resolve().then(()=>Fo);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},pA=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",po=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},ss=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ei=async(e,t)=>{await e.removeItem(t)};class Bc{constructor(){this.promise=new Bc.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Bc.promiseConstructor=Promise;function nh(e){const t=e.split(".");if(t.length!==3)throw new sp("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!eA.test(t[r]))throw new sp("JWT not in base64url format");return{header:JSON.parse(Ax(t[0])),payload:JSON.parse(Ax(t[1])),signature:ko(t[2]),raw:{header:t[0],payload:t[1]}}}async function mA(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function gA(e,t){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const l=await e(o);if(!t(o,null,l)){r(l);return}}catch(l){if(!t(o,l)){i(l);return}}})()})}function yA(e){return("0"+e.toString(16)).substr(-2)}function vA(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let o=0;o<56;o++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,yA).join("")}async function xA(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function wA(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await xA(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function so(e,t,n=!1){const r=vA();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await po(e,`${t}-code-verifier`,i);const o=await wA(r);return[o,r===o?"plain":"s256"]}const bA=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function kA(e){const t=e.headers.get(rp);if(!t||!t.match(bA))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function SA(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function EA(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const _A=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function oo(e){if(!_A.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function rh(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Rx(e){return JSON.parse(JSON.stringify(e))}var CA=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const ls=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),jA=[502,503,504];async function Ox(e){var t;if(!pA(e))throw new ip(ls(e),0);if(jA.includes(e.status))throw new ip(ls(e),e.status);let n;try{n=await e.json()}catch(o){throw new hs(ls(o),o)}let r;const i=kA(e);if(i&&i.getTime()>=ek["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Tx(ls(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Ci}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,l)=>o&&typeof l=="string",!0))throw new Tx(ls(n),e.status,n.weak_password.reasons);throw new nA(ls(n),e.status||500,r)}const NA=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function rt(e,t,n,r){var i;const o=Object.assign({},r==null?void 0:r.headers);o[rp]||(o[rp]=ek["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const l=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(l.redirect_to=r.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",c=await TA(e,t,n+u,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function TA(e,t,n,r,i,o){const l=NA(t,r,i,o);let u;try{u=await e(n,Object.assign({},l))}catch(c){throw console.error(c),new ip(ls(c),0)}if(u.ok||await Ox(u),r!=null&&r.noResolveJson)return u;try{return await u.json()}catch(c){await Ox(c)}}function gr(e){var t;let n=null;AA(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=dA(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Mx(e){const t=gr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Pi(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function IA(e){return{data:e,error:null}}function PA(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o}=e,l=CA(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o},c=Object.assign({},l);return{data:{properties:u,user:c},error:null}}function Dx(e){return e}function AA(e){return e.access_token&&e.refresh_token&&e.expires_in}const ih=["global","local","others"];var RA=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class OA{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=rk(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=ih[0]){if(ih.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ih.join(", ")}`);try{return await rt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ke(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await rt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Pi})}catch(r){if(Ke(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=RA(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await rt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:PA,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ke(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await rt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Pi})}catch(n){if(Ke(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,o,l,u,c;try{const f={nextPage:null,lastPage:0,total:0},h=await rt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Dx});if(h.error)throw h.error;const p=await h.json(),v=(l=h.headers.get("x-total-count"))!==null&&l!==void 0?l:0,y=(c=(u=h.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&c!==void 0?c:[];return y.length>0&&(y.forEach(b=>{const k=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(b.split(";")[1].split("=")[1]);f[`${E}Page`]=k}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},p),f),error:null}}catch(f){if(Ke(f))return{data:{users:[]},error:f};throw f}}async getUserById(t){oo(t);try{return await rt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Pi})}catch(n){if(Ke(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){oo(t);try{return await rt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Pi})}catch(r){if(Ke(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){oo(t);try{return await rt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Pi})}catch(r){if(Ke(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){oo(t.userId);try{const{data:n,error:r}=await rt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async _deleteFactor(t){oo(t.userId),oo(t.id);try{return{data:await rt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,i,o,l,u,c;try{const f={nextPage:null,lastPage:0,total:0},h=await rt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Dx});if(h.error)throw h.error;const p=await h.json(),v=(l=h.headers.get("x-total-count"))!==null&&l!==void 0?l:0,y=(c=(u=h.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&c!==void 0?c:[];return y.length>0&&(y.forEach(b=>{const k=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(b.split(";")[1].split("=")[1]);f[`${E}Page`]=k}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},p),f),error:null}}catch(f){if(Ke(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(t){try{return await rt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await rt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await rt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await rt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ke(n))return{data:null,error:n};throw n}}}function Lx(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const ao={debug:!!(globalThis&&nk()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ik extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class MA extends ik{}async function DA(e,t,n){ao.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),ao.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){ao.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{ao.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw ao.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new MA(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ao.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function LA(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function sk(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function $A(e){return parseInt(e,16)}function FA(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function zA(e){var t;const{chainId:n,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:l,notBefore:u,requestId:c,resources:f,scheme:h,uri:p,version:v}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const y=sk(e.address),b=h?`${h}://${r}`:r,k=e.statement?`${e.statement}
`:"",E=`${b} wants you to sign in with your Ethereum account:
${y}

${k}`;let C=`URI: ${p}
Version: ${v}
Chain ID: ${n}${l?`
Nonce: ${l}`:""}
Issued At: ${o.toISOString()}`;if(i&&(C+=`
Expiration Time: ${i.toISOString()}`),u&&(C+=`
Not Before: ${u.toISOString()}`),c&&(C+=`
Request ID: ${c}`),f){let _=`
Resources:`;for(const j of f){if(!j||typeof j!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${j}`);_+=`
- ${j}`}C+=_}return`${E}
${C}`}class Bt extends Error{constructor({message:t,code:n,cause:r,name:i}){var o;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class fc extends Bt{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function BA({error:e,options:t}){var n,r,i;const{publicKey:o}=t;if(!o)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Bt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Bt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Bt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Bt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Bt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Bt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return o.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new Bt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Bt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const l=window.location.hostname;if(ak(l)){if(o.rp.id!==l)return new Bt({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Bt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Bt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Bt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Bt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function UA({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Bt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Bt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(ak(r)){if(n.rpId!==r)return new Bt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Bt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Bt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Bt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var ok=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class WA{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const HA=new WA;function VA(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,i=ok(e,["challenge","user","excludeCredentials"]),o=ko(t).buffer,l=Object.assign(Object.assign({},n),{id:ko(n.id).buffer}),u=Object.assign(Object.assign({},i),{challenge:o,user:l});if(r&&r.length>0){u.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const f=r[c];u.excludeCredentials[c]=Object.assign(Object.assign({},f),{id:ko(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return u}function qA(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=ok(e,["challenge","allowCredentials"]),i=ko(t).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const u=n[l];o.allowCredentials[l]=Object.assign(Object.assign({},u),{id:ko(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function YA(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:vs(new Uint8Array(e.response.attestationObject)),clientDataJSON:vs(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function KA(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:vs(new Uint8Array(i.authenticatorData)),clientDataJSON:vs(new Uint8Array(i.clientDataJSON)),signature:vs(new Uint8Array(i.signature)),userHandle:i.userHandle?vs(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function ak(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function $x(){var e,t;return!!(Vn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function GA(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new fc("Browser returned unexpected credential type",t)}:{data:null,error:new fc("Empty credential response",t)}}catch(t){return{data:null,error:BA({error:t,options:e})}}}async function JA(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new fc("Browser returned unexpected credential type",t)}:{data:null,error:new fc("Empty credential response",t)}}catch(t){return{data:null,error:UA({error:t,options:e})}}}const QA={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},XA={userVerification:"preferred",hints:["security-key"]};function hc(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of e)if(i)for(const o in i){const l=i[o];if(l!==void 0)if(Array.isArray(l))r[o]=l;else if(n(l))r[o]=l;else if(t(l)){const u=r[o];t(u)?r[o]=hc(u,l):r[o]=hc(l)}else r[o]=l}return r}function ZA(e,t){return hc(QA,e,t||{})}function eR(e,t){return hc(XA,e,t||{})}class tR{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:i},o){try{const{data:l,error:u}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!l)return{data:null,error:u};const c=i??HA.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:f}=l.webauthn.credential_options.publicKey;f.name||(f.name=`${f.id}:${r}`),f.displayName||(f.displayName=f.name)}switch(l.webauthn.type){case"create":{const f=ZA(l.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:h,error:p}=await GA({publicKey:f,signal:c});return h?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:h}},error:null}:{data:null,error:p}}case"request":{const f=eR(l.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:h,error:p}=await JA(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:f,signal:c}));return h?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:h}},error:null}:{data:null,error:p}}}}catch(l){return Ke(l)?{data:null,error:l}:{data:null,error:new hs("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}},o){if(!n)return{data:null,error:new el("rpId is required for WebAuthn authentication")};try{if(!$x())return{data:null,error:new hs("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:o});if(!l)return{data:null,error:u};const{webauthn:c}=l;return this._verify({factorId:t,challengeId:l.challengeId,webauthn:{type:c.type,rpId:n,rpOrigins:r,credential_response:c.credential_response}})}catch(l){return Ke(l)?{data:null,error:l}:{data:null,error:new hs("Unexpected error in authenticate",l)}}}async _register({friendlyName:t,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i},o){if(!n)return{data:null,error:new el("rpId is required for WebAuthn registration")};try{if(!$x())return{data:null,error:new hs("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this._enroll({friendlyName:t});if(!l)return await this.client.mfa.listFactors().then(h=>{var p;return(p=h.data)===null||p===void 0?void 0:p.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===t&&v.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:u};const{data:c,error:f}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:o});return c?this._verify({factorId:l.id,challengeId:c.challengeId,webauthn:{rpId:n,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:f}}catch(l){return Ke(l)?{data:null,error:l}:{data:null,error:new hs("Unexpected error in register",l)}}}}LA();const nR={url:QP,storageKey:XP,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ZP,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Fx(e,t,n){return await n()}const lo={};class tl{get jwks(){var t,n;return(n=(t=lo[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){lo[this.storageKey]=Object.assign(Object.assign({},lo[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=lo[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){lo[this.storageKey]=Object.assign(Object.assign({},lo[this.storageKey]),{cachedAt:t})}constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=tl.nextInstanceID,tl.nextInstanceID+=1,this.instanceID>0&&Vn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},nR),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new OA({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=rk(i.fetch),this.lock=i.lock||Fx,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Vn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=DA:this.lock=Fx,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new tR(this)},this.persistSession?(i.storage?this.storage=i.storage:nk()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Lx(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Lx(this.memoryStorage)),Vn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Zb}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=hA(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Vn()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),sA(o)){const c=(t=o.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:l,redirectType:u}=i;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ke(n)?{error:n}:{error:new hs("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,i;try{const o=await rt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:gr}),{data:l,error:u}=o;if(u||!l)return{data:{user:null,session:null},error:u};const c=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(o){if(Ke(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(t){var n,r,i;try{let o;if("email"in t){const{email:h,password:p,options:v}=t;let y=null,b=null;this.flowType==="pkce"&&([y,b]=await so(this.storage,this.storageKey)),o=await rt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:h,password:p,data:(n=v==null?void 0:v.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:y,code_challenge_method:b},xform:gr})}else if("phone"in t){const{phone:h,password:p,options:v}=t;o=await rt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:p,data:(r=v==null?void 0:v.data)!==null&&r!==void 0?r:{},channel:(i=v==null?void 0:v.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:gr})}else throw new Ru("You must provide either an email or phone number and a password");const{data:l,error:u}=o;if(u||!l)return{data:{user:null,session:null},error:u};const c=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(o){if(Ke(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(t){try{let n;if("email"in t){const{email:o,password:l,options:u}=t;n=await rt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Mx})}else if("phone"in t){const{phone:o,password:l,options:u}=t;n=await rt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Mx})}else throw new Ru("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new io}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(Ke(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,i,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,i,o,l,u,c,f,h,p,v;let y,b;if("message"in t)y=t.message,b=t.signature;else{const{chain:k,wallet:E,statement:C,options:_}=t;let j;if(Vn())if(typeof E=="object")j=E;else{const H=window;if("ethereum"in H&&typeof H.ethereum=="object"&&"request"in H.ethereum&&typeof H.ethereum.request=="function")j=H.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=E}const I=new URL((n=_==null?void 0:_.url)!==null&&n!==void 0?n:window.location.href),M=await j.request({method:"eth_requestAccounts"}).then(H=>H).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!M||M.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const A=sk(M[0]);let B=(r=_==null?void 0:_.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!B){const H=await j.request({method:"eth_chainId"});B=$A(H)}const te={domain:I.host,address:A,statement:C,uri:I.href,version:"1",chainId:B,nonce:(i=_==null?void 0:_.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(l=(o=_==null?void 0:_.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(u=_==null?void 0:_.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(c=_==null?void 0:_.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(f=_==null?void 0:_.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(h=_==null?void 0:_.signInWithEthereum)===null||h===void 0?void 0:h.resources};y=zA(te),b=await j.request({method:"personal_sign",params:[FA(y),A]})}try{const{data:k,error:E}=await rt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:y,signature:b},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:gr});if(E)throw E;return!k||!k.session||!k.user?{data:{user:null,session:null},error:new io}:(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),{data:Object.assign({},k),error:E})}catch(k){if(Ke(k))return{data:{user:null,session:null},error:k};throw k}}async signInWithSolana(t){var n,r,i,o,l,u,c,f,h,p,v,y;let b,k;if("message"in t)b=t.message,k=t.signature;else{const{chain:E,wallet:C,statement:_,options:j}=t;let I;if(Vn())if(typeof C=="object")I=C;else{const A=window;if("solana"in A&&typeof A.solana=="object"&&("signIn"in A.solana&&typeof A.solana.signIn=="function"||"signMessage"in A.solana&&typeof A.solana.signMessage=="function"))I=A.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!(j!=null&&j.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");I=C}const M=new URL((n=j==null?void 0:j.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in I&&I.signIn){const A=await I.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},j==null?void 0:j.signInWithSolana),{version:"1",domain:M.host,uri:M.href}),_?{statement:_}:null));let B;if(Array.isArray(A)&&A[0]&&typeof A[0]=="object")B=A[0];else if(A&&typeof A=="object"&&"signedMessage"in A&&"signature"in A)B=A;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in B&&"signature"in B&&(typeof B.signedMessage=="string"||B.signedMessage instanceof Uint8Array)&&B.signature instanceof Uint8Array)b=typeof B.signedMessage=="string"?B.signedMessage:new TextDecoder().decode(B.signedMessage),k=B.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in I)||typeof I.signMessage!="function"||!("publicKey"in I)||typeof I!="object"||!I.publicKey||!("toBase58"in I.publicKey)||typeof I.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${M.host} wants you to sign in with your Solana account:`,I.publicKey.toBase58(),..._?["",_,""]:[""],"Version: 1",`URI: ${M.href}`,`Issued At: ${(i=(r=j==null?void 0:j.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=j==null?void 0:j.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${j.signInWithSolana.notBefore}`]:[],...!((l=j==null?void 0:j.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${j.signInWithSolana.expirationTime}`]:[],...!((u=j==null?void 0:j.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${j.signInWithSolana.chainId}`]:[],...!((c=j==null?void 0:j.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${j.signInWithSolana.nonce}`]:[],...!((f=j==null?void 0:j.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${j.signInWithSolana.requestId}`]:[],...!((p=(h=j==null?void 0:j.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||p===void 0)&&p.length?["Resources",...j.signInWithSolana.resources.map(B=>`- ${B}`)]:[]].join(`
`);const A=await I.signMessage(new TextEncoder().encode(b),"utf8");if(!A||!(A instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");k=A}}try{const{data:E,error:C}=await rt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:vs(k)},!((v=t.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:gr});if(C)throw C;return!E||!E.session||!E.user?{data:{user:null,session:null},error:new io}:(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),{data:Object.assign({},E),error:C})}catch(E){if(Ke(E))return{data:{user:null,session:null},error:E};throw E}}async _exchangeCodeForSession(t){const n=await ss(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:o,error:l}=await rt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:gr});if(await Ei(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new io}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:l})}catch(o){if(Ke(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(t){try{const{options:n,provider:r,token:i,access_token:o,nonce:l}=t,u=await rt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:o,nonce:l,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:gr}),{data:c,error:f}=u;return f?{data:{user:null,session:null},error:f}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new io}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:f})}catch(n){if(Ke(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,i,o,l;try{if("email"in t){const{email:u,options:c}=t;let f=null,h=null;this.flowType==="pkce"&&([f,h]=await so(this.storage,this.storageKey));const{error:p}=await rt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:f,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in t){const{phone:u,options:c}=t,{data:f,error:h}=await rt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(l=c==null?void 0:c.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:h}}throw new Ru("You must provide either an email or phone number.")}catch(u){if(Ke(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(t){var n,r;try{let i,o;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,o=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:u}=await rt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:gr});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const c=l.session,f=l.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(i){if(Ke(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var n,r,i;try{let o=null,l=null;return this.flowType==="pkce"&&([o,l]=await so(this.storage,this.storageKey)),await rt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:IA})}catch(o){if(Ke(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Ci;const{error:i}=await rt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(Ke(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:o}=t,{error:l}=await rt(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){const{phone:r,type:i,options:o}=t,{data:l,error:u}=await rt(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new Ru("You must provide either an email or phone number and a type")}catch(n){if(Ke(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await ss(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<eh:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const l=await ss(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=rh()}if(this.storage.isServer&&t.user){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,f,h)=>(!l&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,f,h))})}return{data:{session:t},error:null}}const{data:i,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await rt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Pi}):await this._useSession(async n=>{var r,i,o;const{data:l,error:u}=n;if(u)throw u;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ci}:await rt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:Pi})})}catch(n){if(Ke(n))return iA(n)&&(await this._removeSession(),await Ei(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:i,error:o}=r;if(o)throw o;if(!i.session)throw new Ci;const l=i.session;let u=null,c=null;this.flowType==="pkce"&&t.email!=null&&([u,c]=await so(this.storage,this.storageKey));const{data:f,error:h}=await rt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:u,code_challenge_method:c}),jwt:l.access_token,xform:Pi});if(h)throw h;return l.user=f.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(r){if(Ke(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ci;const n=Date.now()/1e3;let r=n,i=!0,o=null;const{payload:l}=nh(t.access_token);if(l.exp&&(r=l.exp,i=r<=n),i){const{data:u,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!u)return{data:{user:null,session:null},error:null};o=u}else{const{data:u,error:c}=await this._getUser(t.access_token);if(c)throw c;o={access_token:t.access_token,refresh_token:t.refresh_token,user:u.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(n){if(Ke(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:l,error:u}=n;if(u)throw u;t=(r=l.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Ci;const{data:i,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Ke(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!Vn())throw new Ou("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Ou(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Nx("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ou("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Nx("No code detected.");const{data:_,error:j}=await this._exchangeCodeForSession(t.code);if(j)throw j;const I=new URL(window.location.href);return I.searchParams.delete("code"),window.history.replaceState(window.history.state,"",I.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:o,refresh_token:l,expires_in:u,expires_at:c,token_type:f}=t;if(!o||!u||!l||!f)throw new Ou("No session defined in URL");const h=Math.round(Date.now()/1e3),p=parseInt(u);let v=h+p;c&&(v=parseInt(c));const y=v-h;y*1e3<=ho&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${p}s`);const b=v-p;h-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,v,h):h-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,v,h);const{data:k,error:E}=await this._getUser(o);if(E)throw E;const C={provider_token:r,provider_refresh_token:i,access_token:o,expires_in:p,expires_at:v,refresh_token:l,token_type:f,user:k.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:C,redirectType:t.type},error:null}}catch(r){if(Ke(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await ss(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return{error:o};const l=(r=i.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:u}=await this.admin.signOut(l,t);if(u&&!(rA(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return t!=="others"&&(await this._removeSession(),await Ei(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=fA(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,i;try{const{data:{session:o},error:l}=n;if(l)throw l;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await so(this.storage,this.storageKey,!0));try{return await rt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(Ke(o))return{data:null,error:o};throw o}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:i}=await this._useSession(async o=>{var l,u,c,f,h;const{data:p,error:v}=o;if(v)throw v;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=t.options)===null||u===void 0?void 0:u.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await rt(this.fetch,"GET",y,{headers:this.headers,jwt:(h=(f=p.session)===null||f===void 0?void 0:f.access_token)!==null&&h!==void 0?h:void 0})});if(i)throw i;return Vn()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Ke(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:o}}=n;if(i)throw i;const{options:l,provider:u,token:c,access_token:f,nonce:h}=t,p=await rt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o==null?void 0:o.access_token)!==null&&r!==void 0?r:void 0,body:{provider:u,id_token:c,access_token:f,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:gr}),{data:v,error:y}=p;return y?{data:{user:null,session:null},error:y}:!v||!v.session||!v.user?{data:{user:null,session:null},error:new io}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),{data:v,error:y})}catch(i){if(Ke(i))return{data:{user:null,session:null},error:i};throw i}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,i;const{data:o,error:l}=n;if(l)throw l;return await rt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await gA(async i=>(i>0&&await mA(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await rt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:gr})),(i,o)=>{const l=200*Math.pow(2,i);return o&&th(o)&&Date.now()+l-r<ho})}catch(r){if(this._debug(n,"error",r),Ke(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Vn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await ss(this.storage,this.storageKey);if(i&&this.userStorage){let l=await ss(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:i.user},await po(this.userStorage,this.storageKey+"-user",l)),i.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:rh()}else if(i&&!i.user&&!i.user){const l=await ss(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(i.user=l.user,await Ei(this.storage,this.storageKey+"-user"),await po(this.storage,this.storageKey,i)):i.user=rh()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const o=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<eh;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${eh}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:l}=await this._callRefreshToken(i.refresh_token);l&&(console.error(l),th(l)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(i.access_token);!u&&(l!=null&&l.user)?(i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(r,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Ci;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Bc;const{data:o,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!o.session)throw new Ci;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const u={data:o.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(o){if(this._debug(i,"error",o),Ke(o)){const l={data:null,error:o};return th(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,r=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const o=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(t,n)}catch(c){o.push(c)}});if(await Promise.all(l),o.length>0){for(let u=0;u<o.length;u+=1)console.error(o[u]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await po(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const o=Rx(i);await po(this.storage,this.storageKey,o)}else{const i=Rx(n);await po(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Ei(this.storage,this.storageKey),await Ei(this.storage,this.storageKey+"-code-verifier"),await Ei(this.storage,this.storageKey+"-user"),this.userStorage&&await Ei(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Vn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ho);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-t)/ho);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${ho}ms, refresh threshold is ${np} ticks`),i<=np&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof ik)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Vn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,l]=await so(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(l)}`});i.push(u.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);i.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;return o?{data:null,error:o}:await rt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,i;const{data:o,error:l}=n;if(l)return{data:null,error:l};const u=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:f}=await rt(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return f?{data:null,error:f}:(t.factorType==="totp"&&c.type==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return{data:null,error:o};const l=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?YA(t.webauthn.credential_response):KA(t.webauthn.credential_response)})}:{code:t.code}),{data:u,error:c}=await rt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:c})})}catch(n){if(Ke(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return{data:null,error:o};const l=await rt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(l.error)return l;const{data:u}=l;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:VA(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:qA(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Ke(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const o of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])i.all.push(o),o.status==="verified"&&i[o.factor_type].push(o);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:i},error:o}=t;if(o)return{data:null,error:o};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=nh(i.access_token);let u=null;l.aal&&(u=l.aal);let c=u;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(p=>p.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const h=l.amr||[];return{data:{currentLevel:u,nextLevel:c,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(u=>u.kid===t);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(u=>u.kid===t),r&&this.jwks_cached_at+tA>i)return r;const{data:o,error:l}=await rt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,r=o.keys.find(u=>u.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:y,error:b}=await this.getSession();if(b||!y.session)return{data:null,error:b};r=y.session.access_token}const{header:i,payload:o,signature:l,raw:{header:u,payload:c}}=nh(r);n!=null&&n.allowExpired||SA(o.exp);const f=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!f){const{error:y}=await this.getUser(r);if(y)throw y;return{data:{claims:o,header:i,signature:l},error:null}}const h=EA(i.alg),p=await crypto.subtle.importKey("jwk",f,h,!0,["verify"]);if(!await crypto.subtle.verify(h,p,l,cA(`${u}.${c}`)))throw new sp("Invalid JWT signature");return{data:{claims:o,header:i,signature:l},error:null}}catch(r){if(Ke(r))return{data:null,error:r};throw r}}}tl.nextInstanceID=0;const rR=tl;class iR extends rR{constructor(t){super(t)}}var sR=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};class oR{constructor(t,n,r){var i,o,l;this.supabaseUrl=t,this.supabaseKey=n;const u=JP(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const c=`sb-${u.hostname.split(".")[0]}-auth-token`,f={db:zP,realtime:UP,auth:Object.assign(Object.assign({},BP),{storageKey:c}),global:FP},h=GP(r??{},f);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=h.global.headers)!==null&&o!==void 0?o:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(p,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=h.auth)!==null&&l!==void 0?l:{},this.headers,h.global.fetch),this.fetch=qP(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new nP(new URL("rest/v1",u).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new DP(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new qI(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return sR(this,void 0,void 0,function*(){var t,n;if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:o,storageKey:l,flowType:u,lock:c,debug:f},h,p){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new iR({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),h),storageKey:l,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:o,flowType:u,lock:c,debug:f,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new xP(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const aR=(e,t,n)=>new oR(e,t,n);function lR(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}lR()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const uR="https://kjsdmygqhxaryvfmnhqr.supabase.co",cR="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imtqc2RteWdxaHhhcnl2Zm1uaHFyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAwMTAxMDEsImV4cCI6MjA3NTU4NjEwMX0.kXL7Dgum6CepvcrS8LVY1v_EHnpyUQOFcqndUQWPrkM",Ht=aR(uR,cR,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),zx=e=>{let t;const n=new Set,r=(f,h)=>{const p=typeof f=="function"?f(t):f;if(!Object.is(p,t)){const v=t;t=h??(typeof p!="object"||p===null)?p:Object.assign({},t,p),n.forEach(y=>y(t,v))}},i=()=>t,u={setState:r,getState:i,getInitialState:()=>c,subscribe:f=>(n.add(f),()=>n.delete(f))},c=t=e(r,i,u);return u},dR=(e=>e?zx(e):zx),fR=e=>e;function hR(e,t=fR){const n=Re.useSyncExternalStore(e.subscribe,Re.useCallback(()=>t(e.getState()),[e,t]),Re.useCallback(()=>t(e.getInitialState()),[e,t]));return Re.useDebugValue(n),n}const Bx=e=>{const t=dR(e),n=r=>hR(t,r);return Object.assign(n,t),n},pR=(e=>e?Bx(e):Bx),mR="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let $t=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=mR[n[e]&63];return t};var Yu={exports:{}},gR=Yu.exports,Ux;function lk(){return Ux||(Ux=1,(function(e,t){(function(n,r){e.exports=r()})(gR,(function(){var n=1e3,r=6e4,i=36e5,o="millisecond",l="second",u="minute",c="hour",f="day",h="week",p="month",v="quarter",y="year",b="date",k="Invalid Date",E=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,C=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Y){var V=["th","st","nd","rd"],ie=Y%100;return"["+Y+(V[(ie-20)%10]||V[ie]||V[0])+"]"}},j=function(Y,V,ie){var z=String(Y);return!z||z.length>=V?Y:""+Array(V+1-z.length).join(ie)+Y},I={s:j,z:function(Y){var V=-Y.utcOffset(),ie=Math.abs(V),z=Math.floor(ie/60),L=ie%60;return(V<=0?"+":"-")+j(z,2,"0")+":"+j(L,2,"0")},m:function Y(V,ie){if(V.date()<ie.date())return-Y(ie,V);var z=12*(ie.year()-V.year())+(ie.month()-V.month()),L=V.clone().add(z,p),Q=ie-L<0,T=V.clone().add(z+(Q?-1:1),p);return+(-(z+(ie-L)/(Q?L-T:T-L))||0)},a:function(Y){return Y<0?Math.ceil(Y)||0:Math.floor(Y)},p:function(Y){return{M:p,y,w:h,d:f,D:b,h:c,m:u,s:l,ms:o,Q:v}[Y]||String(Y||"").toLowerCase().replace(/s$/,"")},u:function(Y){return Y===void 0}},M="en",A={};A[M]=_;var B="$isDayjsObject",te=function(Y){return Y instanceof ne||!(!Y||!Y[B])},H=function Y(V,ie,z){var L;if(!V)return M;if(typeof V=="string"){var Q=V.toLowerCase();A[Q]&&(L=Q),ie&&(A[Q]=ie,L=Q);var T=V.split("-");if(!L&&T.length>1)return Y(T[0])}else{var F=V.name;A[F]=V,L=F}return!z&&L&&(M=L),L||!z&&M},O=function(Y,V){if(te(Y))return Y.clone();var ie=typeof V=="object"?V:{};return ie.date=Y,ie.args=arguments,new ne(ie)},D=I;D.l=H,D.i=te,D.w=function(Y,V){return O(Y,{locale:V.$L,utc:V.$u,x:V.$x,$offset:V.$offset})};var ne=(function(){function Y(ie){this.$L=H(ie.locale,null,!0),this.parse(ie),this.$x=this.$x||ie.x||{},this[B]=!0}var V=Y.prototype;return V.parse=function(ie){this.$d=(function(z){var L=z.date,Q=z.utc;if(L===null)return new Date(NaN);if(D.u(L))return new Date;if(L instanceof Date)return new Date(L);if(typeof L=="string"&&!/Z$/i.test(L)){var T=L.match(E);if(T){var F=T[2]-1||0,J=(T[7]||"0").substring(0,3);return Q?new Date(Date.UTC(T[1],F,T[3]||1,T[4]||0,T[5]||0,T[6]||0,J)):new Date(T[1],F,T[3]||1,T[4]||0,T[5]||0,T[6]||0,J)}}return new Date(L)})(ie),this.init()},V.init=function(){var ie=this.$d;this.$y=ie.getFullYear(),this.$M=ie.getMonth(),this.$D=ie.getDate(),this.$W=ie.getDay(),this.$H=ie.getHours(),this.$m=ie.getMinutes(),this.$s=ie.getSeconds(),this.$ms=ie.getMilliseconds()},V.$utils=function(){return D},V.isValid=function(){return this.$d.toString()!==k},V.isSame=function(ie,z){var L=O(ie);return this.startOf(z)<=L&&L<=this.endOf(z)},V.isAfter=function(ie,z){return O(ie)<this.startOf(z)},V.isBefore=function(ie,z){return this.endOf(z)<O(ie)},V.$g=function(ie,z,L){return D.u(ie)?this[z]:this.set(L,ie)},V.unix=function(){return Math.floor(this.valueOf()/1e3)},V.valueOf=function(){return this.$d.getTime()},V.startOf=function(ie,z){var L=this,Q=!!D.u(z)||z,T=D.p(ie),F=function(Ae,Te){var re=D.w(L.$u?Date.UTC(L.$y,Te,Ae):new Date(L.$y,Te,Ae),L);return Q?re:re.endOf(f)},J=function(Ae,Te){return D.w(L.toDate()[Ae].apply(L.toDate("s"),(Q?[0,0,0,0]:[23,59,59,999]).slice(Te)),L)},P=this.$W,be=this.$M,he=this.$D,ge="set"+(this.$u?"UTC":"");switch(T){case y:return Q?F(1,0):F(31,11);case p:return Q?F(1,be):F(0,be+1);case h:var me=this.$locale().weekStart||0,je=(P<me?P+7:P)-me;return F(Q?he-je:he+(6-je),be);case f:case b:return J(ge+"Hours",0);case c:return J(ge+"Minutes",1);case u:return J(ge+"Seconds",2);case l:return J(ge+"Milliseconds",3);default:return this.clone()}},V.endOf=function(ie){return this.startOf(ie,!1)},V.$set=function(ie,z){var L,Q=D.p(ie),T="set"+(this.$u?"UTC":""),F=(L={},L[f]=T+"Date",L[b]=T+"Date",L[p]=T+"Month",L[y]=T+"FullYear",L[c]=T+"Hours",L[u]=T+"Minutes",L[l]=T+"Seconds",L[o]=T+"Milliseconds",L)[Q],J=Q===f?this.$D+(z-this.$W):z;if(Q===p||Q===y){var P=this.clone().set(b,1);P.$d[F](J),P.init(),this.$d=P.set(b,Math.min(this.$D,P.daysInMonth())).$d}else F&&this.$d[F](J);return this.init(),this},V.set=function(ie,z){return this.clone().$set(ie,z)},V.get=function(ie){return this[D.p(ie)]()},V.add=function(ie,z){var L,Q=this;ie=Number(ie);var T=D.p(z),F=function(be){var he=O(Q);return D.w(he.date(he.date()+Math.round(be*ie)),Q)};if(T===p)return this.set(p,this.$M+ie);if(T===y)return this.set(y,this.$y+ie);if(T===f)return F(1);if(T===h)return F(7);var J=(L={},L[u]=r,L[c]=i,L[l]=n,L)[T]||1,P=this.$d.getTime()+ie*J;return D.w(P,this)},V.subtract=function(ie,z){return this.add(-1*ie,z)},V.format=function(ie){var z=this,L=this.$locale();if(!this.isValid())return L.invalidDate||k;var Q=ie||"YYYY-MM-DDTHH:mm:ssZ",T=D.z(this),F=this.$H,J=this.$m,P=this.$M,be=L.weekdays,he=L.months,ge=L.meridiem,me=function(Te,re,Ie,Ue){return Te&&(Te[re]||Te(z,Q))||Ie[re].slice(0,Ue)},je=function(Te){return D.s(F%12||12,Te,"0")},Ae=ge||function(Te,re,Ie){var Ue=Te<12?"AM":"PM";return Ie?Ue.toLowerCase():Ue};return Q.replace(C,(function(Te,re){return re||(function(Ie){switch(Ie){case"YY":return String(z.$y).slice(-2);case"YYYY":return D.s(z.$y,4,"0");case"M":return P+1;case"MM":return D.s(P+1,2,"0");case"MMM":return me(L.monthsShort,P,he,3);case"MMMM":return me(he,P);case"D":return z.$D;case"DD":return D.s(z.$D,2,"0");case"d":return String(z.$W);case"dd":return me(L.weekdaysMin,z.$W,be,2);case"ddd":return me(L.weekdaysShort,z.$W,be,3);case"dddd":return be[z.$W];case"H":return String(F);case"HH":return D.s(F,2,"0");case"h":return je(1);case"hh":return je(2);case"a":return Ae(F,J,!0);case"A":return Ae(F,J,!1);case"m":return String(J);case"mm":return D.s(J,2,"0");case"s":return String(z.$s);case"ss":return D.s(z.$s,2,"0");case"SSS":return D.s(z.$ms,3,"0");case"Z":return T}return null})(Te)||T.replace(":","")}))},V.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},V.diff=function(ie,z,L){var Q,T=this,F=D.p(z),J=O(ie),P=(J.utcOffset()-this.utcOffset())*r,be=this-J,he=function(){return D.m(T,J)};switch(F){case y:Q=he()/12;break;case p:Q=he();break;case v:Q=he()/3;break;case h:Q=(be-P)/6048e5;break;case f:Q=(be-P)/864e5;break;case c:Q=be/i;break;case u:Q=be/r;break;case l:Q=be/n;break;default:Q=be}return L?Q:D.a(Q)},V.daysInMonth=function(){return this.endOf(p).$D},V.$locale=function(){return A[this.$L]},V.locale=function(ie,z){if(!ie)return this.$L;var L=this.clone(),Q=H(ie,z,!0);return Q&&(L.$L=Q),L},V.clone=function(){return D.w(this.$d,this)},V.toDate=function(){return new Date(this.valueOf())},V.toJSON=function(){return this.isValid()?this.toISOString():null},V.toISOString=function(){return this.$d.toISOString()},V.toString=function(){return this.$d.toUTCString()},Y})(),W=ne.prototype;return O.prototype=W,[["$ms",o],["$s",l],["$m",u],["$H",c],["$W",f],["$M",p],["$y",y],["$D",b]].forEach((function(Y){W[Y[1]]=function(V){return this.$g(V,Y[0],Y[1])}})),O.extend=function(Y,V){return Y.$i||(Y(V,ne,O),Y.$i=!0),O},O.locale=H,O.isDayjs=te,O.unix=function(Y){return O(1e3*Y)},O.en=A[M],O.Ls=A,O.p={},O}))})(Yu)),Yu.exports}var yR=lk();const Xe=Ro(yR);function sh(e){return e.trim().toLowerCase().normalize("NFKD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,"").replace(/-{2,}/g,"-")}const So=`
  id,
  name,
  subtitle,
  objective_id,
  parent_work_id,
  node_type,
  schedule_kind,
  schedule_number,
  tags,
  order_hint,
  next_work_id,
  variant_of_work_id,
  description_markdown,
  estimated_minutes,
  notes,
  video_urls,
  visibility,
  owner_id,
  owner_email,
  created_at,
  updated_at,
  work_collaborators (
    id,
    email,
    role,
    user_id,
    created_at
  )
`,uk=e=>Array.from(new Set(e.map(t=>t.trim().toLowerCase()).filter(t=>t.length>0))),vR=e=>Array.isArray(e)?e.map(t=>typeof t=="string"?t.trim():"").filter(t=>t.length>0):[],tm=e=>Array.isArray(e)?Array.from(new Set(e.map(t=>typeof t=="string"?t.trim().toLowerCase():"").filter(t=>t.length>0))):[],xR=e=>e==="day_of_year"||e==="day_of_month"||e==="day_of_week",wR=(e,t)=>{if(!xR(e))return;const n=typeof t=="number"?t:Number(t);if(Number.isFinite(n))return{kind:e,number:Math.trunc(n)}},ck=e=>(e??[]).map(t=>({id:`${t.id}`,email:t.email.toLowerCase(),role:t.role,userId:t.user_id??void 0,createdAt:t.created_at})),nm=(e,t)=>{var u,c;const n=ck(e.work_collaborators),r=n.map(f=>f.email),i=((u=t==null?void 0:t.actorEmail)==null?void 0:u.toLowerCase())??"",o=t?e.owner_id===t.actorId:!1,l=o||r.includes(i);return{id:e.id,name:e.name,subtitle:e.subtitle??void 0,objectiveId:e.objective_id,parentWorkId:e.parent_work_id??null,nodeType:e.node_type??void 0,schedule:wR(e.schedule_kind,e.schedule_number),tags:tm(e.tags),orderHint:typeof e.order_hint=="number"?e.order_hint:void 0,nextWorkId:e.next_work_id??null,variantOfWorkId:e.variant_of_work_id??null,descriptionMarkdown:e.description_markdown??"",estimatedMinutes:e.estimated_minutes??0,notes:e.notes??void 0,videoUrls:vR(e.video_urls),visibility:e.visibility??"private",ownerId:e.owner_id,ownerEmail:((c=e.owner_email)==null?void 0:c.toLowerCase())??"",collaborators:n,collaboratorEmails:r,createdAt:e.created_at,updatedAt:e.updated_at,canEdit:l,isOwner:o}};async function bR(e){const{data:t,error:n}=await Ht.from("works").select(So).order("name");if(n)throw console.error("No se pudieron cargar los trabajos compartidos",n),n;return t.map(r=>nm(r,e))}async function Wx(e,t){var E;const n=e.id??$t(),r=uk(e.collaboratorEmails),i=t.actorEmail.trim().toLowerCase(),o=(E=e.nodeType)!=null&&E.trim()?e.nodeType.trim():null,l=e.scheduleKind??null,u=typeof e.scheduleNumber=="number"&&Number.isFinite(e.scheduleNumber)?Math.trunc(e.scheduleNumber):null,c=tm(e.tags??[]),f=typeof e.orderHint=="number"&&Number.isFinite(e.orderHint)?e.orderHint:null,h=e.nextWorkId??null,p=e.variantOfWorkId??null,{data:v,error:y}=await Ht.from("works").insert({id:n,name:e.name,subtitle:e.subtitle??null,objective_id:e.objectiveId,parent_work_id:e.parentWorkId??null,node_type:o,schedule_kind:l,schedule_number:u,tags:c,order_hint:f,next_work_id:h,variant_of_work_id:p,description_markdown:e.descriptionMarkdown,estimated_minutes:e.estimatedMinutes,notes:e.notes??null,video_urls:e.videoUrls,visibility:e.visibility,owner_id:t.actorId,owner_email:i,updated_at:new Date().toISOString()}).select(So).maybeSingle();if(y||!v)throw console.error("No se pudo crear el trabajo",y),y??new Error("Falta respuesta al crear trabajo");if(r.length>0){const C=r.map(j=>({work_id:v.id,email:j})),{error:_}=await Ht.from("work_collaborators").insert(C);if(_)throw console.error("No se pudieron guardar los colaboradores",_),_}const{data:b,error:k}=await Ht.from("works").select(So).eq("id",v.id).maybeSingle();if(k||!b)throw console.error("No se pudo refrescar el trabajo creado",k),k??new Error("No se pudo cargar el trabajo creado");return nm(b,t)}async function kR(e,t,n){const r={};t.name!==void 0&&(r.name=t.name),t.subtitle!==void 0&&(r.subtitle=t.subtitle),t.objectiveId!==void 0&&(r.objective_id=t.objectiveId),t.parentWorkId!==void 0&&(r.parent_work_id=t.parentWorkId),t.nodeType!==void 0&&(r.node_type=t.nodeType),t.scheduleKind!==void 0&&(r.schedule_kind=t.scheduleKind),t.scheduleNumber!==void 0&&(r.schedule_number=t.scheduleNumber),t.tags!==void 0&&(r.tags=tm(t.tags)),t.orderHint!==void 0&&(r.order_hint=t.orderHint),t.nextWorkId!==void 0&&(r.next_work_id=t.nextWorkId),t.variantOfWorkId!==void 0&&(r.variant_of_work_id=t.variantOfWorkId),t.descriptionMarkdown!==void 0&&(r.description_markdown=t.descriptionMarkdown),t.estimatedMinutes!==void 0&&(r.estimated_minutes=t.estimatedMinutes),t.notes!==void 0&&(r.notes=t.notes),t.videoUrls!==void 0&&(r.video_urls=t.videoUrls),t.visibility!==void 0&&(r.visibility=t.visibility),r.updated_at=new Date().toISOString();let i=null;if(Object.keys(r).length>0){const{data:o,error:l}=await Ht.from("works").update(r).eq("id",e).select(So).maybeSingle();if(l||!o)throw console.error("No se pudo actualizar el trabajo",l),l??new Error("Falta respuesta al actualizar trabajo");i=o}else{const{data:o,error:l}=await Ht.from("works").select(So).eq("id",e).maybeSingle();if(l||!o)throw l??new Error("Trabajo no encontrado");i=o}if(t.collaboratorEmails){const o=uk(t.collaboratorEmails),l=ck(i.work_collaborators),u=l.map(v=>v.email),c=o.filter(v=>!u.includes(v)),f=l.filter(v=>!o.includes(v.email));if(c.length>0){const v=c.map(b=>({work_id:e,email:b})),{error:y}=await Ht.from("work_collaborators").insert(v);if(y)throw console.error("No se pudieron aadir los colaboradores",y),y}if(f.length>0){const v=f.map(b=>b.email),{error:y}=await Ht.from("work_collaborators").delete().eq("work_id",e).in("email",v);if(y)throw console.error("No se pudieron eliminar colaboradores",y),y}const{data:h,error:p}=await Ht.from("works").select(So).eq("id",e).maybeSingle();if(p||!h)throw p??new Error("Error al refrescar colaboradores");i=h}return nm(i,n)}async function SR(e){const{error:t}=await Ht.from("works").delete().eq("id",e);if(t)throw console.error("No se pudo eliminar el trabajo",t),t}const Mu=new Intl.Collator("es",{numeric:!0,sensitivity:"base"});function op(e){const t=(e??"").trim(),n=t.match(/^(\d+)\s*[\.)-]?\s*(.*)$/);if(!n)return{order:null,rest:t};const r=Number(n[1]);return Number.isFinite(r)?{order:Math.trunc(r),rest:(n[2]??"").trim()}:{order:null,rest:t}}function ER(e){return op(e.name).order!==null}function rm(e){const t=[...e],n=t.some(ER);return t.sort((r,i)=>{if(n){const u=op(r.name),c=op(i.name),f=u.order??Number.POSITIVE_INFINITY,h=c.order??Number.POSITIVE_INFINITY;if(f!==h)return f-h;const p=Mu.compare(u.rest||r.name,c.rest||i.name);return p!==0?p:Mu.compare(r.id,i.id)}const o=r.kind===i.kind?0:r.kind==="class"?-1:1;if(o!==0)return o;const l=Mu.compare(r.name,i.name);return l!==0?l:Mu.compare(r.id,i.id)}),t}const xt={objectives:"sport-planner-objetivos",works:"sport-planner-trabajos",sessions:"sport-planner-sesiones",assistants:"sport-planner-asistentes",plans:"sport-planner-plans",kungfuPrograms:"sport-planner-kungfu-programs",kungfuCadence:"sport-planner-kungfu-cadence",kungfuTodayPlan:"sport-planner-kungfu-today-plan",workTaxonomy:"sport-planner-work-taxonomy"},dk=typeof window<"u",yt=()=>new Date().toISOString(),us="18:30",ps="classes",Mi="personal-kungfu",ms=[{id:"default",name:"Kung Fu  activo",enabled:!0,include:[{byTags:["kungfu"]}],exclude:[]}],Ni={targetsDays:{work:7,technique:5,segment:8,form:10,drill:7},overrides:[]},ln={limitMode:"count",maxItems:12,minutesBudget:30,template:{totalMinutes:30,focusMinutes:18,rouletteMinutes:10,recapMinutes:2},defaultMinutesByNodeType:{work:3,technique:1.5,segment:6,form:15,drill:4,reading:5,link:2},focusSelectors:[],rouletteSelectors:[],groups:[{id:"formas",name:"Formas",enabled:!0,order:1,type:"work",limitMode:"minutes",minutesBudget:18,strategy:"overdue",hierarchyRule:"prefer_leaves",include:[{byNodeTypes:["segment","form"]}],exclude:[]},{id:"tecnicas",name:"Tcnicas",enabled:!0,order:2,type:"work",limitMode:"minutes",minutesBudget:10,strategy:"weighted",hierarchyRule:"allow_all",include:[{byNodeTypes:["technique"]},{byTags:["roulette"]}],exclude:[]},{id:"recap",name:"Recap",enabled:!0,order:99,type:"note",limitMode:"minutes",minutesBudget:2}]},Ai={nodeTypes:[{key:"form",label:"Form"},{key:"segment",label:"Segment"},{key:"application",label:"Application"},{key:"technique",label:"Technique"},{key:"drill",label:"Drill"},{key:"reading",label:"Reading"},{key:"work",label:"Work"},{key:"link",label:"Link"},{key:"style",label:"Style"}],tags:[]},_R=e=>e==="class"||e==="personal",CR=(e,t)=>{if(!e||typeof e!="object")return t;const n=e,r=String(n.id??"").trim();if(!r)return t;const i=_R(n.kind)?n.kind:t.kind,o=String(n.name??"").trim()||t.name,l=typeof n.enabled=="boolean"?n.enabled:t.enabled,u=String(n.createdAt??"").trim()||t.createdAt,c=String(n.updatedAt??"").trim()||t.updatedAt;return{...t,id:r,kind:i,name:o,enabled:l,cadence:n.cadence??t.cadence,todayPlan:n.todayPlan??t.todayPlan,createdAt:u,updatedAt:c}},fk=(e,t,n)=>[{id:ps,name:"Clases",kind:"class",enabled:!0,createdAt:e,updatedAt:e},{id:Mi,name:"Personal Kung Fu",kind:"personal",enabled:!0,cadence:t,todayPlan:n,createdAt:e,updatedAt:e}],cs=(e,t,n,r)=>{const i=fk(r,t,n),l=(Array.isArray(e)?e:[]).map(f=>{const h=String((f==null?void 0:f.id)??"").trim(),p=i.find(v=>v.id===h)??{id:h||$t(),name:"Plan",kind:"personal",enabled:!0,cadence:t,todayPlan:n,createdAt:r,updatedAt:r};return CR(f,p)}).filter(f=>f.id.length>0),u=new Map;l.forEach(f=>{u.set(f.id,f)}),i.forEach(f=>{u.has(f.id)||u.set(f.id,f)});const c=u.get(Mi);return c&&u.set(Mi,{...c,cadence:c.cadence??t,todayPlan:c.todayPlan??n}),rm(Array.from(u.values()))},jR=e=>{const n=(Array.isArray(e)?e:[]).map(i=>{if(!i||typeof i!="object")return null;const o=i,l=String(o.key??"").trim().toLowerCase(),u=String(o.label??"").trim();return l?{key:l,label:u||l}:null}).filter(Boolean),r=new Map;return n.forEach(i=>{r.set(i.key,i)}),Ai.nodeTypes.forEach(i=>{r.has(i.key)||r.set(i.key,i)}),Array.from(r.values()).sort((i,o)=>i.label.localeCompare(o.label,"en",{sensitivity:"base"}))},NR=e=>{const n=(Array.isArray(e)?e:[]).map(i=>{if(typeof i=="string"){const u=i.trim().toLowerCase();return u?{name:u}:null}if(!i||typeof i!="object")return null;const l=String(i.name??"").trim().toLowerCase();return l?{name:l}:null}).filter(Boolean),r=new Map;return n.forEach(i=>r.set(i.name,i)),Array.from(r.values()).sort((i,o)=>i.name.localeCompare(o.name,"en",{sensitivity:"base"}))},Wn=(e,t)=>{const n=(e&&typeof e=="object"?e:{})??{},r=jR(n.nodeTypes),i=NR(n.tags),o=new Map(r.map(u=>[u.key,u])),l=new Map(i.map(u=>[u.name,u]));return t.forEach(u=>{const c=(u.nodeType??"").trim().toLowerCase();c&&!o.has(c)&&o.set(c,{key:c,label:c}),(u.tags??[]).forEach(f=>{const h=String(f??"").trim().toLowerCase();h&&!l.has(h)&&l.set(h,{name:h})})}),{nodeTypes:Array.from(o.values()).sort((u,c)=>u.label.localeCompare(c.label,"en",{sensitivity:"base"})),tags:Array.from(l.values()).sort((u,c)=>u.name.localeCompare(c.name,"en",{sensitivity:"base"}))}},Hx=e=>Array.from(new Set((Array.isArray(e)?e:[]).map(t=>String(t??"").trim().toLowerCase()).filter(t=>t.length>0))),TR=e=>Array.from(new Set((Array.isArray(e)?e:[]).map(t=>String(t??"").trim()).filter(t=>t.length>0))),hk=e=>e==="count"||e==="minutes"||e==="both",IR=e=>e==="work"||e==="note",PR=e=>e==="overdue"||e==="weighted",AR=e=>e==="allow_all"||e==="prefer_leaves",RR=e=>{const t={},n=Hx(e.byTags),r=Hx(e.byNodeTypes),i=TR(e.byWorkIds);return n.length>0&&(t.byTags=n),r.length>0&&(t.byNodeTypes=r),i.length>0&&(t.byWorkIds=i),t},Io=e=>(e??[]).map(RR).filter(t=>Object.keys(t).length>0),OR=e=>{if(!Array.isArray(e))return[];const t=e.map(n=>Number(n)).filter(n=>Number.isFinite(n)).map(n=>Math.round(n)).filter(n=>n>=0&&n<=6);return Array.from(new Set(t)).sort((n,r)=>n-r)},MR=e=>{const t={};return!e||typeof e!="object"?{...ln.defaultMinutesByNodeType}:(Object.entries(e).forEach(([n,r])=>{const i=n.trim().toLowerCase(),o=Number(r);i&&Number.isFinite(o)&&(t[i]=Math.max(.25,o))}),Object.keys(t).length>0?t:{...ln.defaultMinutesByNodeType})},DR=(e,t)=>{const n=String(e.id??"").trim()||$t(),r=IR(e.type)?e.type:"work",i=typeof e.enabled=="boolean"?e.enabled:!0,o=String(e.name??"").trim()||(r==="note"?"Recap":"Grupo"),l=Number.isFinite(Number(e.order))?Number(e.order):t,u=OR(e.daysOfWeek),c=hk(e.limitMode)?e.limitMode:"minutes",f=Number(e.maxItems),h=Number.isFinite(f)&&Math.round(f)>0?Math.round(f):void 0,p=Number(e.minutesBudget),v=Number.isFinite(p)&&p>0?Math.max(0,p):void 0,y=PR(e.strategy)?e.strategy:"overdue",b=AR(e.hierarchyRule)?e.hierarchyRule:"allow_all",k=Io(e.include),E=Io(e.exclude);return{id:n,name:o,enabled:i,order:l,type:r,daysOfWeek:u,limitMode:c,maxItems:h,minutesBudget:v,strategy:y,hierarchyRule:b,include:k,exclude:E}},LR=e=>{var f,h,p;const t=Math.max(0,Number((f=e.template)==null?void 0:f.focusMinutes)||0),n=Math.max(0,Number((h=e.template)==null?void 0:h.rouletteMinutes)||0),r=Math.max(0,Number((p=e.template)==null?void 0:p.recapMinutes)||0),i=Io(e.focusSelectors),o=Io(e.rouletteSelectors),l=i.length>0?i:[{byNodeTypes:["segment","form"]}],u=o.length>0?o:[{byNodeTypes:["technique"]},{byTags:["roulette"]}],c=[{id:"formas",name:"Formas",enabled:!0,order:1,type:"work",limitMode:"minutes",minutesBudget:t>0?t:18,strategy:"overdue",hierarchyRule:"prefer_leaves",include:l,exclude:[]},{id:"tecnicas",name:"Tcnicas",enabled:!0,order:2,type:"work",limitMode:"minutes",minutesBudget:n>0?n:10,strategy:"weighted",hierarchyRule:"allow_all",include:u,exclude:[]}];return r>0&&c.push({id:"recap",name:"Recap",enabled:!0,order:99,type:"note",limitMode:"minutes",minutesBudget:r}),c},Ku=e=>{var b,k,E;const t=e??ln,n=hk(t.limitMode)?t.limitMode:ln.limitMode,r=Math.max(1,Math.round(Number(t.maxItems)||ln.maxItems)),i=Math.max(1,Number(t.minutesBudget)||ln.minutesBudget),o=Math.max(0,Number((b=t.template)==null?void 0:b.focusMinutes)||ln.template.focusMinutes),l=Math.max(0,Number((k=t.template)==null?void 0:k.rouletteMinutes)||ln.template.rouletteMinutes),u=Math.max(0,Number((E=t.template)==null?void 0:E.recapMinutes)||ln.template.recapMinutes),c=Math.max(0,o+l+u),f=MR(t.defaultMinutesByNodeType),h=Io(t.focusSelectors),p=Io(t.rouletteSelectors),y=((t.groups??[]).length>0?t.groups??[]:LR(t)).map((C,_)=>DR(C,_+1)).sort((C,_)=>C.order-_.order).map((C,_)=>({...C,order:_+1}));return{...t,limitMode:n,maxItems:r,minutesBudget:i,template:{totalMinutes:c,focusMinutes:o,rouletteMinutes:l,recapMinutes:u},defaultMinutesByNodeType:f,focusSelectors:h,rouletteSelectors:p,groups:y}},On=e=>{if(!e)return null;const t=e.trim();return t.length>0?t:null},Gu=e=>Array.from(new Set((e??[]).map(t=>(t??"").trim().toLowerCase()).filter(t=>t.length>0))),yr=e=>{if(!e)return;const t=e.trim();return t.length>0?t:void 0},$R=e=>e==="day_of_year"||e==="day_of_month"||e==="day_of_week",ap=e=>Array.from(new Set((e??[]).map(t=>(t??"").trim().toLowerCase()).filter(t=>t.length>0))),ji=e=>{var k,E,C;const t=yt(),n=On(e.parentWorkId??null),r=On(e.nextWorkId??null),i=On(e.variantOfWorkId??null),o=yr(e.nodeType??void 0),l=Gu(e.tags),u=$R((k=e.schedule)==null?void 0:k.kind)?(E=e.schedule)==null?void 0:E.kind:void 0,c=(C=e.schedule)==null?void 0:C.number,f=typeof c=="number"&&Number.isFinite(c)?Math.trunc(c):void 0,h=u&&typeof f=="number"?{kind:u,number:f}:void 0,p=typeof e.orderHint=="number"&&Number.isFinite(e.orderHint)?e.orderHint:void 0,v=(e.collaborators??[]).map((_,j)=>({id:_.id??`${e.id}-collab-${j}`,email:(_.email??"").trim().toLowerCase(),role:_.role??"editor",userId:_.userId??null,createdAt:_.createdAt??t})),y=ap([...e.collaboratorEmails??[],...v.map(_=>_.email)]),b=Array.isArray(e.videoUrls)?e.videoUrls.map(_=>typeof _=="string"?_.trim():"").filter(Boolean):[];return{id:e.id,name:e.name??"Trabajo sin nombre",subtitle:yr(e.subtitle),objectiveId:e.objectiveId??"",parentWorkId:n,nodeType:o,schedule:h,tags:l,orderHint:p,nextWorkId:r,variantOfWorkId:i,descriptionMarkdown:e.descriptionMarkdown??"",estimatedMinutes:e.estimatedMinutes??0,notes:yr(e.notes),videoUrls:b,createdAt:e.createdAt??t,updatedAt:e.updatedAt??t,visibility:e.visibility??"private",ownerId:e.ownerId??"local-owner",ownerEmail:(e.ownerEmail??"").trim().toLowerCase(),collaborators:v,collaboratorEmails:y,canEdit:e.canEdit??!0,isOwner:e.isOwner??!0}},FR=(e,t,n)=>{var o;if(!n)return!1;if(n===t)return!0;const r=new Set;let i=n;for(;i;){if(i===t)return!0;if(r.has(i))break;r.add(i),i=((o=e.find(u=>u.id===i))==null?void 0:o.parentWorkId)??null}return!1},rn=(e,t)=>{if(!dk)return t;try{const n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(n){return console.warn(`No se pudo cargar ${e} desde localStorage`,n),t}},pk=e=>e==="present"||e==="absent"||e==="pending",mk=e=>e==="present"||e==="absent",lp=e=>(e??[]).map(t=>{const n=pk(t.status)?t.status:"pending",r=mk(t.actualStatus)?t.actualStatus:void 0;return{assistantId:t.assistantId,status:n,actualStatus:r,notes:t.notes,actualNotes:t.actualNotes}}),zR=e=>{if(!e||typeof e!="object")return!1;const t=e,n=String(t.name??""),r=typeof t.code=="number"?t.code:Number(t.code);return n==="QuotaExceededError"||r===22||r===1014},BR=e=>e.map(t=>({id:t.id,name:t.name,subtitle:t.subtitle,objectiveId:t.objectiveId,parentWorkId:t.parentWorkId??null,descriptionMarkdown:"",estimatedMinutes:t.estimatedMinutes??0,notes:void 0,videoUrls:[],nodeType:t.nodeType,schedule:t.schedule,tags:t.tags??[],orderHint:t.orderHint,nextWorkId:t.nextWorkId??null,variantOfWorkId:t.variantOfWorkId??null,createdAt:t.createdAt,updatedAt:t.updatedAt,visibility:t.visibility??"private",ownerId:t.ownerId,ownerEmail:t.ownerEmail,collaborators:[],collaboratorEmails:[],canEdit:t.canEdit,isOwner:t.isOwner})),at=e=>{if(!dk)return;const t={objectives:rn(xt.objectives,[]),works:rn(xt.works,[]),sessions:rn(xt.sessions,[]),assistants:rn(xt.assistants,[]),plans:rn(xt.plans,[]),kungfuPrograms:rn(xt.kungfuPrograms,ms),kungfuCadence:rn(xt.kungfuCadence,Ni),kungfuTodayPlan:rn(xt.kungfuTodayPlan,ln),workTaxonomy:rn(xt.workTaxonomy,Ai)},n=up({...t,...e}),r=(i,o)=>{try{return window.localStorage.setItem(i,JSON.stringify(o)),!0}catch(l){if(!zR(l))return console.warn(`No se pudo persistir ${i} en localStorage`,l),!1;if(i===xt.works)try{const u=BR(n.works);return window.localStorage.setItem(i,JSON.stringify(u)),console.warn("localStorage quota alcanzada: guardando catlogo en modo reducido (sin markdown)."),!0}catch(u){return console.warn("localStorage quota alcanzada: no se pudo persistir el catlogo.",u),!1}return console.warn(`localStorage quota alcanzada: omitiendo persistencia de ${i}.`),!1}};r(xt.objectives,n.objectives),r(xt.works,n.works),r(xt.sessions,n.sessions),r(xt.assistants,n.assistants),r(xt.plans,n.plans),r(xt.kungfuPrograms,n.kungfuPrograms),r(xt.kungfuCadence,n.kungfuCadence),r(xt.kungfuTodayPlan,n.kungfuTodayPlan),r(xt.workTaxonomy,n.workTaxonomy)},up=e=>{const t=yt(),n=(e.works??[]).map(u=>{const c=u.parent_work_id;return ji({...u,id:u.id,parentWorkId:On(u.parentWorkId??c??null)})}),r=Wn(e.workTaxonomy??Ai,n),i=e.kungfuCadence??Ni,o=Ku(e.kungfuTodayPlan??ln),l=cs(e.plans,i,o,t);return{objectives:e.objectives??[],works:n,sessions:(e.sessions??[]).map(u=>({...u,planId:(u.planId??"").trim()||((u.kind??"class")==="personal"?Mi:ps),kind:u.kind??"class",startTime:u.startTime??us,workItems:(u.workItems??[]).map(c=>({...c,focusLabel:c.focusLabel,completed:c.completed??!1})),attendance:lp(u.attendance)})),assistants:e.assistants??[],plans:l,kungfuPrograms:e.kungfuPrograms??ms,kungfuCadence:i,kungfuTodayPlan:o,workTaxonomy:r}},Ne=pR((e,t)=>({ready:!1,objectives:[],works:[],worksLoading:!1,sessions:[],assistants:[],plans:fk(yt(),Ni,ln),kungfuPrograms:ms,kungfuCadence:Ni,kungfuTodayPlan:ln,workTaxonomy:Ai,hydrate:()=>{if(t().ready)return;const n=rn(xt.objectives,[]),r=rn(xt.works,[]).map(b=>{const k=b.parent_work_id;return ji({...b,id:b.id,parentWorkId:On(b.parentWorkId??k??null)})}),i=rn(xt.workTaxonomy,Ai),o=Wn(i,r),l=rn(xt.sessions,[]).map(b=>({...b,planId:(b.planId??"").trim()||((b.kind??"class")==="personal"?Mi:ps),kind:b.kind??"class",startTime:b.startTime??us,workItems:(b.workItems??[]).map(k=>({...k,focusLabel:k.focusLabel,completed:k.completed??!1})),attendance:lp(b.attendance)})),u=rn(xt.assistants,[]),c=rn(xt.kungfuPrograms,ms),f=rn(xt.kungfuCadence,Ni),h=rn(xt.kungfuTodayPlan,ln),p=Ku(h),v=rn(xt.plans,[]),y=cs(v,f,p,yt());e({objectives:n,works:r,sessions:l,assistants:u,plans:y,kungfuPrograms:c,kungfuCadence:f,kungfuTodayPlan:p,workTaxonomy:o,ready:!0})},setCollections:n=>{e(r=>{const i=up({objectives:n.objectives??r.objectives,works:n.works??r.works,sessions:n.sessions??r.sessions,assistants:n.assistants??r.assistants,plans:n.plans??r.plans,kungfuPrograms:n.kungfuPrograms??r.kungfuPrograms,kungfuCadence:n.kungfuCadence??r.kungfuCadence,kungfuTodayPlan:n.kungfuTodayPlan??r.kungfuTodayPlan,workTaxonomy:n.workTaxonomy??r.workTaxonomy}),o={...r,...i,ready:!0};return at(i),o})},setWorks:n=>{const r=n.map(i=>ji(i));e(i=>{const o=Wn(i.workTaxonomy,r),l={...i,works:r,workTaxonomy:o};return at({works:r}),l})},loadWorks:async n=>{e({worksLoading:!0});try{const i=(await bR(n)).map(p=>ji(p)),o=t().works,l=new Set(i.map(p=>p.id)),u=o.filter(p=>!l.has(p.id)&&(!p.ownerId||p.ownerId==="local-owner"||p.ownerId===n.actorId)),c=[];for(const p of u)try{const v=await Wx({id:p.id,name:p.name,subtitle:p.subtitle,objectiveId:p.objectiveId,parentWorkId:p.parentWorkId??null,nodeType:p.nodeType,tags:p.tags,orderHint:p.orderHint,nextWorkId:p.nextWorkId??null,variantOfWorkId:p.variantOfWorkId??null,descriptionMarkdown:p.descriptionMarkdown,estimatedMinutes:p.estimatedMinutes,notes:p.notes,videoUrls:p.videoUrls,visibility:p.visibility??"private",collaboratorEmails:p.collaboratorEmails??[]},n),y=ji(v);c.push(y),l.add(y.id)}catch(v){console.error(`No se pudo migrar el trabajo legacy ${p.id}`,v)}const f=[...i];c.forEach(p=>{if(!l.has(p.id))l.add(p.id),f.push(p);else{const v=f.findIndex(y=>y.id===p.id);v>=0?f[v]=p:f.push(p)}});const h=f.map(p=>ji(p)).sort((p,v)=>p.name.localeCompare(v.name,"es",{sensitivity:"base"}));e(p=>{const v=Wn(p.workTaxonomy,h),y={...p,works:h,workTaxonomy:v};return at({works:h}),y})}finally{e({worksLoading:!1})}},reset:()=>{e(n=>{const r=up({objectives:[],works:[],sessions:[],assistants:[],kungfuPrograms:ms,kungfuCadence:Ni,kungfuTodayPlan:ln,workTaxonomy:Ai}),i={...n,...r,ready:!0,worksLoading:!1};return at(i),i})},setKungfuPrograms:n=>{const r=Array.isArray(n)?n:ms;e(i=>{const o={...i,kungfuPrograms:r};return at(o),o})},setKungfuCadence:n=>{const r=n??Ni;e(i=>{const o={...i,kungfuCadence:r};return at(o),o})},setKungfuTodayPlan:n=>{const r=Ku(n??ln);e(i=>{const o={...i,kungfuTodayPlan:r};return at(o),o})},setWorkTaxonomy:n=>{e(r=>{const i=Wn(n??Ai,r.works),o={...r,workTaxonomy:i};return at(o),o})},addPlan:({name:n,kind:r})=>{const i=yt(),o={id:$t(),name:n.trim()||(r==="class"?"Clases":"Personal"),kind:r,enabled:!0,cadence:r==="personal"?t().kungfuCadence:void 0,todayPlan:r==="personal"?t().kungfuTodayPlan:void 0,createdAt:i,updatedAt:i};return e(l=>{const u=cs([...l.plans,o],l.kungfuCadence,l.kungfuTodayPlan,i),c={...l,plans:u};return at(c),c}),o},updatePlan:(n,r)=>{const i=yt();e(o=>{const l=cs(o.plans.map(c=>c.id===n?{...c,...r,updatedAt:i}:c),o.kungfuCadence,o.kungfuTodayPlan,i),u={...o,plans:l};return at(u),u})},duplicatePlan:n=>{const r=t().plans.find(l=>l.id===n);if(!r)return;const i=yt(),o={...r,id:$t(),name:`${r.name} (copia)`,createdAt:i,updatedAt:i};return e(l=>{const u=cs([...l.plans,o],l.kungfuCadence,l.kungfuTodayPlan,i),c={...l,plans:u};return at(c),c}),o},deletePlan:n=>{const r=t();return n===ps||n===Mi||r.sessions.some(o=>(o.planId??"")===n)?!1:(e(o=>{const l=yt(),u=cs(o.plans.filter(f=>f.id!==n),o.kungfuCadence,o.kungfuTodayPlan,l),c={...o,plans:u};return at(c),c}),!0)},upsertNodeType:n=>{const r=sh(n);if(!r)return null;const i=n.trim()||r;return e(o=>{const l=o.workTaxonomy.nodeTypes??[],u=l.some(h=>h.key===r)?l.map(h=>h.key===r?{...h,label:i}:h):[...l,{key:r,label:i}],c=Wn({...o.workTaxonomy,nodeTypes:u},o.works),f={...o,workTaxonomy:c};return at(f),f}),r},removeNodeType:n=>{const r=(n??"").trim().toLowerCase();return!r||t().works.some(o=>(o.nodeType??"").trim().toLowerCase()===r)?!1:(e(o=>{const l=(o.workTaxonomy.nodeTypes??[]).filter(f=>f.key!==r),u=Wn({...o.workTaxonomy,nodeTypes:l},o.works),c={...o,workTaxonomy:u};return at(c),c}),!0)},upsertTag:n=>{const r=sh(n);return r?(e(i=>{const o=i.workTaxonomy.tags??[],l=o.some(f=>f.name===r)?o:[...o,{name:r}],u=Wn({...i.workTaxonomy,tags:l},i.works),c={...i,workTaxonomy:u};return at(c),c}),r):null},removeTag:n=>{const r=sh(n??"");return!r||t().works.some(o=>(o.tags??[]).includes(r))?!1:(e(o=>{const l=(o.workTaxonomy.tags??[]).filter(f=>f.name!==r),u=Wn({...o.workTaxonomy,tags:l},o.works),c={...o,workTaxonomy:u};return at(c),c}),!0)},addObjective:n=>{const r={id:$t(),name:n.name,colorHex:n.colorHex,descriptionMarkdown:n.descriptionMarkdown,createdAt:yt(),updatedAt:yt()};return e(i=>{const o={objectives:[...i.objectives,r]},l={...i,...o};return at(l),l}),r},updateObjective:(n,r)=>{e(i=>{const o=i.objectives.map(u=>u.id===n?{...u,...r,updatedAt:yt()}:u),l={...i,objectives:o};return at(l),l})},deleteObjective:n=>t().works.some(i=>i.objectiveId===n)?!1:(e(i=>{const o=i.objectives.filter(u=>u.id!==n),l={...i,objectives:o};return at(l),l}),!0),addWork:async(n,r)=>{const i=t(),o=On(n.parentWorkId),l=o&&i.works.some(h=>h.id===o)?o:null,u={name:n.name,subtitle:yr(n.subtitle),objectiveId:n.objectiveId,parentWorkId:l,nodeType:yr(n.nodeType)??void 0,tags:Gu(n.tags),orderHint:typeof n.orderHint=="number"&&Number.isFinite(n.orderHint)?n.orderHint:void 0,nextWorkId:On(n.nextWorkId??null),variantOfWorkId:On(n.variantOfWorkId??null),descriptionMarkdown:n.descriptionMarkdown,estimatedMinutes:n.estimatedMinutes,notes:yr(n.notes),videoUrls:(n.videoUrls??[]).map(h=>h.trim()).filter(h=>h.length>0),visibility:n.visibility??"private",collaboratorEmails:ap(n.collaboratorEmails??[])},c=await Wx(u,r),f=ji(c);return e(h=>{const p=[...h.works.filter(y=>y.id!==f.id),f],v=Wn(h.workTaxonomy,p);return at({works:p,workTaxonomy:v}),{...h,works:p,workTaxonomy:v}}),f},updateWork:async(n,r,i)=>{const o=t(),l=o.works.find(p=>p.id===n);if(!l)throw new Error("Trabajo no encontrado");let u=l.parentWorkId??null;if(r.parentWorkId!==void 0){const p=On(r.parentWorkId);p&&(!o.works.some(v=>v.id===p)||FR(o.works,n,p))?u=null:u=p}const c={...r,subtitle:r.subtitle!==void 0?yr(r.subtitle)??null:void 0,parentWorkId:u,nodeType:r.nodeType!==void 0?yr(r.nodeType??void 0)??null:void 0,tags:r.tags?Gu(r.tags):void 0,orderHint:r.orderHint!==void 0?typeof r.orderHint=="number"&&Number.isFinite(r.orderHint)?r.orderHint:null:void 0,nextWorkId:r.nextWorkId!==void 0?On(r.nextWorkId??null):void 0,variantOfWorkId:r.variantOfWorkId!==void 0?On(r.variantOfWorkId??null):void 0,notes:r.notes!==void 0?yr(r.notes)??null:void 0,videoUrls:r.videoUrls?r.videoUrls.map(p=>p.trim()).filter(p=>p.length>0):void 0,collaboratorEmails:r.collaboratorEmails?ap(r.collaboratorEmails):void 0},f=await kR(n,c,i),h=ji(f);return e(p=>{const v=p.works.map(b=>b.id===h.id?h:b),y=Wn(p.workTaxonomy,v);return at({works:v,workTaxonomy:y}),{...p,works:v,workTaxonomy:y}}),h},deleteWork:async(n,r)=>t().sessions.some(l=>l.workItems.some(u=>u.workId===n))||t().works.some(l=>l.parentWorkId===n)?!1:(await SR(n),e(l=>{const u=l.works.filter(f=>f.id!==n),c=Wn(l.workTaxonomy,u);return at({works:u,workTaxonomy:c}),{...l,works:u,workTaxonomy:c}}),!0),addSession:n=>{var o;const r=(n.planId??"").trim()||((n.kind??"class")==="personal"?Mi:ps),i={id:$t(),planId:r,date:n.date,kind:n.kind??((o=t().plans.find(l=>l.id===r))==null?void 0:o.kind)??"class",title:n.title,description:n.description,notes:n.notes,notesByGroupId:n.notesByGroupId,workItems:[],attendance:[],startTime:n.startTime??us,createdAt:yt(),updatedAt:yt()};return e(l=>{const u=[...l.sessions,i],c={...l,sessions:u};return at(c),c}),i},duplicateSession:(n,r)=>{const i=t().sessions.find(u=>u.id===n);if(!i)return;const o=yt(),l={...i,id:$t(),date:r,startTime:i.startTime??us,createdAt:o,updatedAt:o,title:`${i.title} (copia)`};return l.workItems=i.workItems.slice().sort((u,c)=>u.order-c.order).map((u,c)=>({...u,id:$t(),order:c,completed:!1})),l.attendance=i.attendance.map(u=>({assistantId:u.assistantId,status:"pending",notes:u.notes,actualStatus:void 0,actualNotes:void 0})),e(u=>{const c=[...u.sessions,l],f={...u,sessions:c};return at(f),f}),l},updateSession:(n,r)=>{e(i=>{const o=i.sessions.map(u=>u.id===n?{...u,...r,updatedAt:yt()}:u),l={...i,sessions:o};return at(l),l})},deleteSession:n=>{e(r=>{const i=r.sessions.filter(l=>l.id!==n),o={...r,sessions:i};return at(o),o})},updateSessionWorkItems:(n,r)=>{e(i=>{const o=i.sessions.map(u=>u.id===n?{...u,workItems:r.map((c,f)=>({...c,order:f})),updatedAt:yt()}:u),l={...i,sessions:o};return at(l),l})},addWorkToSession:(n,r)=>{const i=t().sessions.find(u=>u.id===n);if(!i)return;const o={id:$t(),workId:r.workId,customDescriptionMarkdown:r.customDescriptionMarkdown,customDurationMinutes:r.customDurationMinutes,notes:r.notes,focusLabel:r.focusLabel,completed:!1,order:i.workItems.length},l={...i,workItems:[...i.workItems,o],updatedAt:yt()};return e(u=>{const c=u.sessions.map(h=>h.id===n?l:h),f={...u,sessions:c};return at(f),f}),o},duplicateSessionWork:(n,r)=>{let i,o=!1;return e(l=>{const u=l.sessions.map(f=>{if(f.id!==n)return f;const h=f.workItems.findIndex(k=>k.id===r);if(h===-1)return f;o=!0;const v={...f.workItems[h],id:$t(),completed:!1},y=[...f.workItems];y.splice(h+1,0,v);const b=y.map((k,E)=>{const C={...k,order:E};return k.id===v.id&&(i=C),C});return{...f,workItems:b,updatedAt:yt()}});if(!o)return l;const c={...l,sessions:u};return at(c),c}),i},removeWorkFromSession:(n,r)=>{e(i=>{const o=i.sessions.map(u=>{if(u.id!==n)return u;const c=u.workItems.filter(f=>f.id!==r).map((f,h)=>({...f,order:h}));return{...u,workItems:c,updatedAt:yt()}}),l={...i,sessions:o};return at(l),l})},toggleSessionWorkCompletion:(n,r,i)=>{e(o=>{const l=o.sessions.map(c=>c.id!==n?c:{...c,workItems:c.workItems.map(f=>f.id===r?{...f,completed:i}:f),updatedAt:yt()}),u={...o,sessions:l};return at(u),u})},reorderSessionWork:(n,r,i)=>{e(o=>{const l=o.sessions.map(c=>{if(c.id!==n)return c;const f=[...c.workItems],[h]=f.splice(r,1);return f.splice(i,0,h),{...c,workItems:f.map((p,v)=>({...p,order:v})),updatedAt:yt()}}),u={...o,sessions:l};return at(u),u})},updateSessionWorkDetails:(n,r,i)=>{e(o=>{const l=o.sessions.map(c=>c.id!==n?c:{...c,workItems:c.workItems.map(f=>f.id===r?{...f,...i}:f),updatedAt:yt()}),u={...o,sessions:l};return at(u),u})},replaceSessionWork:(n,r,i)=>{t().works.some(o=>o.id===i)&&e(o=>{const l=o.sessions.map(c=>{if(c.id!==n)return c;const f=c.workItems.map(h=>h.id!==r?h:{...h,workId:i,customDescriptionMarkdown:void 0,customDurationMinutes:void 0,notes:void 0,focusLabel:void 0,completed:!1});return{...c,workItems:f,updatedAt:yt()}}),u={...o,sessions:l};return at(u),u})},setAttendanceActualStatus:(n,r,i,o)=>{e(l=>{const u=l.sessions.map(f=>{if(f.id!==n)return f;const h=f.attendance.find(v=>v.assistantId===r);let p;if(h)p=f.attendance.map(v=>{if(v.assistantId!==r)return v;const y={...v,actualStatus:i};return typeof o<"u"&&(y.actualNotes=o),y});else{const v={assistantId:r,status:"pending",actualStatus:i};typeof o<"u"&&(v.actualNotes=o),p=[...f.attendance,v]}return{...f,attendance:p,updatedAt:yt()}}),c={...l,sessions:u};return at(c),c})},setAttendanceStatus:(n,r,i,o)=>{e(l=>{const u=l.sessions.map(f=>{if(f.id!==n)return f;const h=f.attendance.find(v=>v.assistantId===r);let p;return h?p=f.attendance.map(v=>v.assistantId===r?{...v,status:i,notes:o}:v):p=[...f.attendance,{assistantId:r,status:i,notes:o}],{...f,attendance:p,updatedAt:yt()}}),c={...l,sessions:u};return at(c),c})},addAssistant:n=>{const r={id:$t(),name:n.name,notes:n.notes,active:n.active??!0,createdAt:yt(),updatedAt:yt()};return e(i=>{const o=[...i.assistants,r],l={...i,assistants:o};return at(l),l}),r},updateAssistant:(n,r)=>{e(i=>{const o=i.assistants.map(u=>u.id===n?{...u,...r,updatedAt:yt()}:u),l={...i,assistants:o};return at(l),l})},deleteAssistant:n=>{e(r=>{const i=r.assistants.filter(u=>u.id!==n),o=r.sessions.map(u=>({...u,attendance:u.attendance.filter(c=>c.assistantId!==n)})),l={...r,assistants:i,sessions:o};return at(l),l})},importBackup:n=>{if((n.version??1)!==1)throw new Error("Versin de backup no soportada");const i=yt(),o=(n.objetivos??[]).map(_=>({..._,createdAt:_.createdAt??i,updatedAt:_.updatedAt??i})),l=(n.trabajos??[]).map(_=>{const j=_.parent_work_id,I=_.node_type,M=_.tags,A=_.order_hint,B=_.next_work_id,te=_.variant_of_work_id;return{..._,subtitle:yr(_.subtitle),parentWorkId:On(_.parentWorkId??j??null),nodeType:yr(_.nodeType??I??void 0),tags:Gu(Array.isArray(_.tags)?_.tags:Array.isArray(M)?M:[]),orderHint:typeof _.orderHint=="number"?_.orderHint:typeof A=="number"?A:void 0,nextWorkId:On(_.nextWorkId??B??null),variantOfWorkId:On(_.variantOfWorkId??te??null),createdAt:_.createdAt??i,updatedAt:_.updatedAt??i,videoUrls:_.videoUrls??[]}}),u=(n.asistentes??[]).map(_=>({..._,createdAt:_.createdAt??i,updatedAt:_.updatedAt??i,active:_.active??!0})),c=n.kungfuPrograms??ms,f=n.kungfuCadence??Ni,h=n.kungfuTodayPlan??ln,p=Wn(n.workTaxonomy??Ai,l),v=cs(n.plans,f,Ku(h),i),y=new Map;(n.sesiones??[]).forEach(_=>{const j=_.id??$t(),I=_.notesByGroupId??void 0,M={id:j,planId:(_.planId??"").trim()||((_.kind??"class")==="personal"?Mi:ps),date:_.date??Xe().format("YYYY-MM-DD"),kind:_.kind??"class",title:_.title??"Sesin importada",description:_.description,notes:_.notes,notesByGroupId:I??void 0,workItems:(_.workItems??[]).map((A,B)=>({id:A.id??$t(),workId:A.workId,order:A.order??B,customDescriptionMarkdown:A.customDescriptionMarkdown,customDurationMinutes:A.customDurationMinutes,notes:A.notes,focusLabel:A.focusLabel,completed:A.completed??!1,result:A.result,effort:A.effort})),attendance:lp(_.attendance),startTime:_.startTime??us,createdAt:_.createdAt??i,updatedAt:_.updatedAt??i};M.workItems=M.workItems.sort((A,B)=>A.order-B.order).map((A,B)=>({...A,order:B})),y.set(j,M)}),(n.sesiones_trabajos??[]).forEach(_=>{const j=_.session_id;if(!j)return;y.has(j)||y.set(j,{id:j,planId:ps,date:_.fecha?Xe(_.fecha).format("YYYY-MM-DD"):Xe().format("YYYY-MM-DD"),kind:"class",title:_.titulo??"Sesin importada",description:_.descripcion,notes:_.notasSesion??_.notas,workItems:[],attendance:[],startTime:us,createdAt:i,updatedAt:i});const I=y.get(j);I.workItems.push({id:_.id??$t(),workId:_.trabajo_id,order:_.orden??I.workItems.length,customDescriptionMarkdown:_.descripcionPersonalizada,customDurationMinutes:_.duracionPersonalizada,notes:_.notas,focusLabel:_.focusLabel??_.foco,completed:_.completed??!1,result:_.result??_.resultado,effort:_.effort??_.esfuerzo})}),y.forEach(_=>{_.workItems=_.workItems.sort((j,I)=>j.order-I.order).map((j,I)=>({...j,order:I})),_.startTime=_.startTime??us});const b=new Map,k=_=>pk(_)?_:void 0,E=_=>mk(_)?_:void 0;(n.sesiones_asistencias??[]).forEach(_=>{const j=_.session_id;if(!j)return;const I=_.assistantId??_.asistente_id;if(!I)return;const M=k(_.status??_.estado)??"pending",A=E(_.actualStatus??_.estado_real),B={assistantId:I,status:M,notes:_.notes??_.notas,actualStatus:A,actualNotes:_.actualNotes??_.notas_reales},te=b.get(j)??[];te.push(B),b.set(j,te)}),b.forEach((_,j)=>{const I=y.get(j);I&&(I.attendance=_)});const C=Array.from(y.values());e({objectives:o,works:l,sessions:C,assistants:u,plans:v,kungfuPrograms:c,kungfuCadence:f,kungfuTodayPlan:h,workTaxonomy:p,ready:!0}),at({objectives:o,works:l,sessions:C,assistants:u,plans:v,kungfuPrograms:c,kungfuCadence:f,kungfuTodayPlan:h,workTaxonomy:p})},exportBackup:()=>{const n=t(),r=n.sessions.flatMap(u=>u.workItems.map(c=>({id:c.id,session_id:u.id,trabajo_id:c.workId,orden:c.order,descripcionPersonalizada:c.customDescriptionMarkdown,duracionPersonalizada:c.customDurationMinutes,notas:c.notes,foco:c.focusLabel,focusLabel:c.focusLabel,completed:c.completed??!1,result:c.result,effort:c.effort}))),i=n.sessions.flatMap(u=>u.attendance.map(c=>({session_id:u.id,assistantId:c.assistantId,estado:c.status,notas:c.notes,...c.actualStatus?{actualStatus:c.actualStatus,estado_real:c.actualStatus}:{},...c.actualNotes?{actualNotes:c.actualNotes,notas_reales:c.actualNotes}:{}}))),o=n.sessions.map(u=>({id:u.id,planId:u.planId,date:u.date,kind:u.kind,title:u.title,description:u.description,notes:u.notes,notesByGroupId:u.notesByGroupId,startTime:u.startTime,createdAt:u.createdAt,updatedAt:u.updatedAt}));return{version:1,usuarios:[],objetivos:n.objectives,trabajos:n.works,sesiones:o,sesiones_trabajos:r,asistentes:n.assistants,sesiones_asistencias:i,plans:n.plans,kungfuPrograms:n.kungfuPrograms,kungfuCadence:n.kungfuCadence,kungfuTodayPlan:n.kungfuTodayPlan,workTaxonomy:n.workTaxonomy}}})),Vx=1,UR=[{id:"default",name:"Kung Fu  activo",enabled:!0,include:[{byTags:["kungfu"]}],exclude:[]}],WR={targetsDays:{work:7,technique:5,segment:8,form:10,drill:7},overrides:[]},HR={limitMode:"count",maxItems:12,minutesBudget:30,template:{totalMinutes:30,focusMinutes:18,rouletteMinutes:10,recapMinutes:2},defaultMinutesByNodeType:{work:3,technique:1.5,segment:6,form:15,drill:4,reading:5,link:2},focusSelectors:[],rouletteSelectors:[],groups:[{id:"formas",name:"Formas",enabled:!0,order:1,type:"work",limitMode:"minutes",minutesBudget:18,strategy:"overdue",hierarchyRule:"prefer_leaves",include:[{byNodeTypes:["segment","form"]}],exclude:[]},{id:"tecnicas",name:"Tcnicas",enabled:!0,order:2,type:"work",limitMode:"minutes",minutesBudget:10,strategy:"weighted",hierarchyRule:"allow_all",include:[{byNodeTypes:["technique"]},{byTags:["roulette"]}],exclude:[]},{id:"recap",name:"Recap",enabled:!0,order:99,type:"note",limitMode:"minutes",minutesBudget:2}]},VR={nodeTypes:[{key:"form",label:"Form"},{key:"segment",label:"Segment"},{key:"application",label:"Application"},{key:"technique",label:"Technique"},{key:"drill",label:"Drill"},{key:"reading",label:"Reading"},{key:"work",label:"Work"},{key:"link",label:"Link"},{key:"style",label:"Style"}],tags:[]},Du=e=>({objectives:e.objectives,works:[],sessions:e.sessions,assistants:e.assistants,plans:e.plans,kungfuPrograms:e.kungfuPrograms,kungfuCadence:e.kungfuCadence,kungfuTodayPlan:e.kungfuTodayPlan,workTaxonomy:e.workTaxonomy}),qR=e=>({objectives:e.objectives??[],works:[],sessions:(e.sessions??[]).map(t=>({...t,planId:(t.planId??"").trim()||void 0,kind:t.kind??"class",workItems:t.workItems??[],attendance:t.attendance??[]})),assistants:e.assistants??[],plans:e.plans??[],kungfuPrograms:e.kungfuPrograms??UR,kungfuCadence:e.kungfuCadence??WR,kungfuTodayPlan:e.kungfuTodayPlan??HR,workTaxonomy:e.workTaxonomy??VR}),YR=(e,t)=>e.objectives!==t.objectives||e.sessions!==t.sessions||e.assistants!==t.assistants||e.plans!==t.plans||e.kungfuPrograms!==t.kungfuPrograms||e.kungfuCadence!==t.kungfuCadence||e.kungfuTodayPlan!==t.kungfuTodayPlan||e.workTaxonomy!==t.workTaxonomy;function KR(){const{user:e}=js(),t=Ne(f=>f.setCollections),n=Ne(f=>f.reset),r=Ne(f=>f.ready),i=w.useRef(!1),o=w.useRef(null),l=w.useRef(null),u=w.useRef(null),c=w.useRef(Du(Ne.getState()));w.useEffect(()=>()=>{o.current&&(window.clearTimeout(o.current),o.current=null)},[]),w.useEffect(()=>{e||(n(),u.current=null,l.current=null,i.current=!1,c.current=Du(Ne.getState()),o.current&&(window.clearTimeout(o.current),o.current=null))},[e,n]),w.useEffect(()=>{if(!e)return;let f=!0;(async()=>{const{data:v,error:y}=await Ht.from("planner_states").select("data, updated_at").eq("user_id",e.id).maybeSingle();if(!f)return;if(y&&y.code!=="PGRST116"){console.error("No se pudo cargar el estado remoto",y);return}const b=v;if(b!=null&&b.data){const k=qR(b.data??{});i.current=!0,u.current=b.updated_at,c.current=k,t(k)}else if(r){const k=Du(Ne.getState());l.current=null;const{error:E,data:C}=await Ht.from("planner_states").upsert({user_id:e.id,data:{version:Vx,...k}},{onConflict:"user_id"}).select("updated_at").maybeSingle(),_=C;E?console.error("No se pudo inicializar el estado remoto",E):_&&(u.current=_.updated_at)}})();const p=Ne.subscribe(v=>{if(!f)return;const y=Du(v);if(i.current){i.current=!1,c.current=y,l.current=null;return}const b=c.current;YR(y,b)&&(c.current=y,l.current=y,o.current&&window.clearTimeout(o.current),o.current=window.setTimeout(()=>{if(!l.current)return;const k=l.current;l.current=null,(async()=>{const{error:E,data:C}=await Ht.from("planner_states").upsert({user_id:e.id,data:{version:Vx,...k}},{onConflict:"user_id"}).select("updated_at").maybeSingle(),_=C;E?console.error("No se pudo guardar el estado remoto",E):_&&(u.current=_.updated_at)})()},600))});return()=>{f=!1,p(),o.current&&(window.clearTimeout(o.current),o.current=null)}},[e,r,t])}function GR(){const{user:e}=js(),t=Ne(r=>r.loadWorks),n=Ne(r=>r.setWorks);w.useEffect(()=>{if(!e){n([]);return}const r={actorId:e.id,actorEmail:e.email??""},i=async()=>{try{await t(r)}catch(l){console.error("No se pudieron sincronizar los trabajos colaborativos",l)}};i();const o=Ht.channel("works-collaboration").on("postgres_changes",{event:"*",schema:"public",table:"works"},()=>{i()}).on("postgres_changes",{event:"*",schema:"public",table:"work_collaborators"},()=>{i()}).subscribe();return()=>{Ht.removeChannel(o)}},[e,t,n])}var Ju={exports:{}},JR=Ju.exports,qx;function QR(){return qx||(qx=1,(function(e,t){(function(n,r){e.exports=r(lk())})(JR,(function(n){function r(l){return l&&typeof l=="object"&&"default"in l?l:{default:l}}var i=r(n),o={name:"es",monthsShort:"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),weekStart:1,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},ordinal:function(l){return l+""}};return i.default.locale(o,null,!0),o}))})(Ju)),Ju.exports}QR();function zi({objective:e,size:t="md"}){if(!e)return null;const n=t==="sm"?"text-xs px-2 py-1":"text-sm px-3 py-1.5";return m.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full font-medium text-slate-950 shadow shadow-black/30 ${n}`,style:{backgroundColor:e.colorHex},children:[m.jsx("span",{className:"h-2.5 w-2.5 rounded-full border border-black/20 bg-white/70"}),e.name]})}function XR(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const ZR=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,eO=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,tO={};function Yx(e,t){return(tO.jsx?eO:ZR).test(e)}const nO=/[ \t\n\f\r]/g;function rO(e){return typeof e=="object"?e.type==="text"?Kx(e.value):!1:Kx(e)}function Kx(e){return e.replace(nO,"")===""}class pl{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}pl.prototype.normal={};pl.prototype.property={};pl.prototype.space=void 0;function gk(e,t){const n={},r={};for(const i of e)Object.assign(n,i.property),Object.assign(r,i.normal);return new pl(n,r,t)}function cp(e){return e.toLowerCase()}class Dn{constructor(t,n){this.attribute=n,this.property=t}}Dn.prototype.attribute="";Dn.prototype.booleanish=!1;Dn.prototype.boolean=!1;Dn.prototype.commaOrSpaceSeparated=!1;Dn.prototype.commaSeparated=!1;Dn.prototype.defined=!1;Dn.prototype.mustUseProperty=!1;Dn.prototype.number=!1;Dn.prototype.overloadedBoolean=!1;Dn.prototype.property="";Dn.prototype.spaceSeparated=!1;Dn.prototype.space=void 0;let iO=0;const st=Ts(),zt=Ts(),dp=Ts(),_e=Ts(),Ct=Ts(),Eo=Ts(),Hn=Ts();function Ts(){return 2**++iO}const fp=Object.freeze(Object.defineProperty({__proto__:null,boolean:st,booleanish:zt,commaOrSpaceSeparated:Hn,commaSeparated:Eo,number:_e,overloadedBoolean:dp,spaceSeparated:Ct},Symbol.toStringTag,{value:"Module"})),oh=Object.keys(fp);class im extends Dn{constructor(t,n,r,i){let o=-1;if(super(t,n),Gx(this,"space",i),typeof r=="number")for(;++o<oh.length;){const l=oh[o];Gx(this,oh[o],(r&fp[l])===fp[l])}}}im.prototype.defined=!0;function Gx(e,t,n){n&&(e[t]=n)}function zo(e){const t={},n={};for(const[r,i]of Object.entries(e.properties)){const o=new im(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(o.mustUseProperty=!0),t[r]=o,n[cp(r)]=r,n[cp(o.attribute)]=r}return new pl(t,n,e.space)}const yk=zo({properties:{ariaActiveDescendant:null,ariaAtomic:zt,ariaAutoComplete:null,ariaBusy:zt,ariaChecked:zt,ariaColCount:_e,ariaColIndex:_e,ariaColSpan:_e,ariaControls:Ct,ariaCurrent:null,ariaDescribedBy:Ct,ariaDetails:null,ariaDisabled:zt,ariaDropEffect:Ct,ariaErrorMessage:null,ariaExpanded:zt,ariaFlowTo:Ct,ariaGrabbed:zt,ariaHasPopup:null,ariaHidden:zt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Ct,ariaLevel:_e,ariaLive:null,ariaModal:zt,ariaMultiLine:zt,ariaMultiSelectable:zt,ariaOrientation:null,ariaOwns:Ct,ariaPlaceholder:null,ariaPosInSet:_e,ariaPressed:zt,ariaReadOnly:zt,ariaRelevant:null,ariaRequired:zt,ariaRoleDescription:Ct,ariaRowCount:_e,ariaRowIndex:_e,ariaRowSpan:_e,ariaSelected:zt,ariaSetSize:_e,ariaSort:null,ariaValueMax:_e,ariaValueMin:_e,ariaValueNow:_e,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function vk(e,t){return t in e?e[t]:t}function xk(e,t){return vk(e,t.toLowerCase())}const sO=zo({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Eo,acceptCharset:Ct,accessKey:Ct,action:null,allow:null,allowFullScreen:st,allowPaymentRequest:st,allowUserMedia:st,alt:null,as:null,async:st,autoCapitalize:null,autoComplete:Ct,autoFocus:st,autoPlay:st,blocking:Ct,capture:null,charSet:null,checked:st,cite:null,className:Ct,cols:_e,colSpan:null,content:null,contentEditable:zt,controls:st,controlsList:Ct,coords:_e|Eo,crossOrigin:null,data:null,dateTime:null,decoding:null,default:st,defer:st,dir:null,dirName:null,disabled:st,download:dp,draggable:zt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:st,formTarget:null,headers:Ct,height:_e,hidden:dp,high:_e,href:null,hrefLang:null,htmlFor:Ct,httpEquiv:Ct,id:null,imageSizes:null,imageSrcSet:null,inert:st,inputMode:null,integrity:null,is:null,isMap:st,itemId:null,itemProp:Ct,itemRef:Ct,itemScope:st,itemType:Ct,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:st,low:_e,manifest:null,max:null,maxLength:_e,media:null,method:null,min:null,minLength:_e,multiple:st,muted:st,name:null,nonce:null,noModule:st,noValidate:st,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:st,optimum:_e,pattern:null,ping:Ct,placeholder:null,playsInline:st,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:st,referrerPolicy:null,rel:Ct,required:st,reversed:st,rows:_e,rowSpan:_e,sandbox:Ct,scope:null,scoped:st,seamless:st,selected:st,shadowRootClonable:st,shadowRootDelegatesFocus:st,shadowRootMode:null,shape:null,size:_e,sizes:null,slot:null,span:_e,spellCheck:zt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:_e,step:null,style:null,tabIndex:_e,target:null,title:null,translate:null,type:null,typeMustMatch:st,useMap:null,value:zt,width:_e,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Ct,axis:null,background:null,bgColor:null,border:_e,borderColor:null,bottomMargin:_e,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:st,declare:st,event:null,face:null,frame:null,frameBorder:null,hSpace:_e,leftMargin:_e,link:null,longDesc:null,lowSrc:null,marginHeight:_e,marginWidth:_e,noResize:st,noHref:st,noShade:st,noWrap:st,object:null,profile:null,prompt:null,rev:null,rightMargin:_e,rules:null,scheme:null,scrolling:zt,standby:null,summary:null,text:null,topMargin:_e,valueType:null,version:null,vAlign:null,vLink:null,vSpace:_e,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:st,disableRemotePlayback:st,prefix:null,property:null,results:_e,security:null,unselectable:null},space:"html",transform:xk}),oO=zo({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Hn,accentHeight:_e,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:_e,amplitude:_e,arabicForm:null,ascent:_e,attributeName:null,attributeType:null,azimuth:_e,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:_e,by:null,calcMode:null,capHeight:_e,className:Ct,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:_e,diffuseConstant:_e,direction:null,display:null,dur:null,divisor:_e,dominantBaseline:null,download:st,dx:null,dy:null,edgeMode:null,editable:null,elevation:_e,enableBackground:null,end:null,event:null,exponent:_e,externalResourcesRequired:null,fill:null,fillOpacity:_e,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Eo,g2:Eo,glyphName:Eo,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:_e,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:_e,horizOriginX:_e,horizOriginY:_e,id:null,ideographic:_e,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:_e,k:_e,k1:_e,k2:_e,k3:_e,k4:_e,kernelMatrix:Hn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:_e,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:_e,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:_e,overlineThickness:_e,paintOrder:null,panose1:null,path:null,pathLength:_e,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Ct,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:_e,pointsAtY:_e,pointsAtZ:_e,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Hn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Hn,rev:Hn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Hn,requiredFeatures:Hn,requiredFonts:Hn,requiredFormats:Hn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:_e,specularExponent:_e,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:_e,strikethroughThickness:_e,string:null,stroke:null,strokeDashArray:Hn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:_e,strokeOpacity:_e,strokeWidth:null,style:null,surfaceScale:_e,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Hn,tabIndex:_e,tableValues:null,target:null,targetX:_e,targetY:_e,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Hn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:_e,underlineThickness:_e,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:_e,values:null,vAlphabetic:_e,vMathematical:_e,vectorEffect:null,vHanging:_e,vIdeographic:_e,version:null,vertAdvY:_e,vertOriginX:_e,vertOriginY:_e,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:_e,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:vk}),wk=zo({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),bk=zo({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:xk}),kk=zo({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),aO={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},lO=/[A-Z]/g,Jx=/-[a-z]/g,uO=/^data[-\w.:]+$/i;function cO(e,t){const n=cp(t);let r=t,i=Dn;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&uO.test(t)){if(t.charAt(4)==="-"){const o=t.slice(5).replace(Jx,fO);r="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=t.slice(4);if(!Jx.test(o)){let l=o.replace(lO,dO);l.charAt(0)!=="-"&&(l="-"+l),t="data"+l}}i=im}return new i(r,t)}function dO(e){return"-"+e.toLowerCase()}function fO(e){return e.charAt(1).toUpperCase()}const hO=gk([yk,sO,wk,bk,kk],"html"),sm=gk([yk,oO,wk,bk,kk],"svg");function pO(e){return e.join(" ").trim()}var uo={},ah,Qx;function mO(){if(Qx)return ah;Qx=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,l=/^[;\s]*/,u=/^\s+|\s+$/g,c=`
`,f="/",h="*",p="",v="comment",y="declaration";ah=function(k,E){if(typeof k!="string")throw new TypeError("First argument must be a string");if(!k)return[];E=E||{};var C=1,_=1;function j(W){var Y=W.match(t);Y&&(C+=Y.length);var V=W.lastIndexOf(c);_=~V?W.length-V:_+W.length}function I(){var W={line:C,column:_};return function(Y){return Y.position=new M(W),te(),Y}}function M(W){this.start=W,this.end={line:C,column:_},this.source=E.source}M.prototype.content=k;function A(W){var Y=new Error(E.source+":"+C+":"+_+": "+W);if(Y.reason=W,Y.filename=E.source,Y.line=C,Y.column=_,Y.source=k,!E.silent)throw Y}function B(W){var Y=W.exec(k);if(Y){var V=Y[0];return j(V),k=k.slice(V.length),Y}}function te(){B(n)}function H(W){var Y;for(W=W||[];Y=O();)Y!==!1&&W.push(Y);return W}function O(){var W=I();if(!(f!=k.charAt(0)||h!=k.charAt(1))){for(var Y=2;p!=k.charAt(Y)&&(h!=k.charAt(Y)||f!=k.charAt(Y+1));)++Y;if(Y+=2,p===k.charAt(Y-1))return A("End of comment missing");var V=k.slice(2,Y-2);return _+=2,j(V),k=k.slice(Y),_+=2,W({type:v,comment:V})}}function D(){var W=I(),Y=B(r);if(Y){if(O(),!B(i))return A("property missing ':'");var V=B(o),ie=W({type:y,property:b(Y[0].replace(e,p)),value:V?b(V[0].replace(e,p)):p});return B(l),ie}}function ne(){var W=[];H(W);for(var Y;Y=D();)Y!==!1&&(W.push(Y),H(W));return W}return te(),ne()};function b(k){return k?k.replace(u,p):p}return ah}var Xx;function gO(){if(Xx)return uo;Xx=1;var e=uo&&uo.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(uo,"__esModule",{value:!0}),uo.default=n;var t=e(mO());function n(r,i){var o=null;if(!r||typeof r!="string")return o;var l=(0,t.default)(r),u=typeof i=="function";return l.forEach(function(c){if(c.type==="declaration"){var f=c.property,h=c.value;u?i(f,h,c):h&&(o=o||{},o[f]=h)}}),o}return uo}var Ca={},Zx;function yO(){if(Zx)return Ca;Zx=1,Object.defineProperty(Ca,"__esModule",{value:!0}),Ca.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,o=function(f){return!f||n.test(f)||e.test(f)},l=function(f,h){return h.toUpperCase()},u=function(f,h){return"".concat(h,"-")},c=function(f,h){return h===void 0&&(h={}),o(f)?f:(f=f.toLowerCase(),h.reactCompat?f=f.replace(i,u):f=f.replace(r,u),f.replace(t,l))};return Ca.camelCase=c,Ca}var ja,e0;function vO(){if(e0)return ja;e0=1;var e=ja&&ja.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},t=e(gO()),n=yO();function r(i,o){var l={};return!i||typeof i!="string"||(0,t.default)(i,function(u,c){u&&c&&(l[(0,n.camelCase)(u,o)]=c)}),l}return r.default=r,ja=r,ja}var xO=vO();const wO=Ro(xO),Sk=Ek("end"),om=Ek("start");function Ek(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function bO(e){const t=om(e),n=Sk(e);if(t&&n)return{start:t,end:n}}function Ba(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?t0(e.position):"start"in e||"end"in e?t0(e):"line"in e||"column"in e?hp(e):""}function hp(e){return n0(e&&e.line)+":"+n0(e&&e.column)}function t0(e){return hp(e&&e.start)+"-"+hp(e&&e.end)}function n0(e){return e&&typeof e=="number"?e:1}class vn extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",o={},l=!1;if(n&&("line"in n&&"column"in n?o={place:n}:"start"in n&&"end"in n?o={place:n}:"type"in n?o={ancestors:[n],place:n.position}:o={...n}),typeof t=="string"?i=t:!o.cause&&t&&(l=!0,i=t.message,o.cause=t),!o.ruleId&&!o.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?o.ruleId=r:(o.source=r.slice(0,c),o.ruleId=r.slice(c+1))}if(!o.place&&o.ancestors&&o.ancestors){const c=o.ancestors[o.ancestors.length-1];c&&(o.place=c.position)}const u=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=u?u.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=u?u.line:void 0,this.name=Ba(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=l&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}vn.prototype.file="";vn.prototype.name="";vn.prototype.reason="";vn.prototype.message="";vn.prototype.stack="";vn.prototype.column=void 0;vn.prototype.line=void 0;vn.prototype.ancestors=void 0;vn.prototype.cause=void 0;vn.prototype.fatal=void 0;vn.prototype.place=void 0;vn.prototype.ruleId=void 0;vn.prototype.source=void 0;const am={}.hasOwnProperty,kO=new Map,SO=/[A-Z]/g,EO=new Set(["table","tbody","thead","tfoot","tr"]),_O=new Set(["td","th"]),_k="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function CO(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=OO(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=RO(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?sm:hO,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},o=Ck(i,e,void 0);return o&&typeof o!="string"?o:i.create(e,i.Fragment,{children:o||void 0},void 0)}function Ck(e,t,n){if(t.type==="element")return jO(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return NO(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return IO(e,t,n);if(t.type==="mdxjsEsm")return TO(e,t);if(t.type==="root")return PO(e,t,n);if(t.type==="text")return AO(e,t)}function jO(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=sm,e.schema=i),e.ancestors.push(t);const o=Nk(e,t.tagName,!1),l=MO(e,t);let u=um(e,t);return EO.has(t.tagName)&&(u=u.filter(function(c){return typeof c=="string"?!rO(c):!0})),jk(e,l,o,t),lm(l,u),e.ancestors.pop(),e.schema=r,e.create(t,o,l,n)}function NO(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}nl(e,t.position)}function TO(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);nl(e,t.position)}function IO(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=sm,e.schema=i),e.ancestors.push(t);const o=t.name===null?e.Fragment:Nk(e,t.name,!0),l=DO(e,t),u=um(e,t);return jk(e,l,o,t),lm(l,u),e.ancestors.pop(),e.schema=r,e.create(t,o,l,n)}function PO(e,t,n){const r={};return lm(r,um(e,t)),e.create(t,e.Fragment,r,n)}function AO(e,t){return t.value}function jk(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function lm(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function RO(e,t,n){return r;function r(i,o,l,u){const f=Array.isArray(l.children)?n:t;return u?f(o,l,u):f(o,l)}}function OO(e,t){return n;function n(r,i,o,l){const u=Array.isArray(o.children),c=om(r);return t(i,o,l,u,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function MO(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&am.call(t.properties,i)){const o=LO(e,i,t.properties[i]);if(o){const[l,u]=o;e.tableCellAlignToStyle&&l==="align"&&typeof u=="string"&&_O.has(t.tagName)?r=u:n[l]=u}}if(r){const o=n.style||(n.style={});o[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function DO(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const o=r.data.estree.body[0];o.type;const l=o.expression;l.type;const u=l.properties[0];u.type,Object.assign(n,e.evaluater.evaluateExpression(u.argument))}else nl(e,t.position);else{const i=r.name;let o;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const u=r.value.data.estree.body[0];u.type,o=e.evaluater.evaluateExpression(u.expression)}else nl(e,t.position);else o=r.value===null?!0:r.value;n[i]=o}return n}function um(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:kO;for(;++r<t.children.length;){const o=t.children[r];let l;if(e.passKeys){const c=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(c){const f=i.get(c)||0;l=c+"-"+f,i.set(c,f+1)}}const u=Ck(e,o,l);u!==void 0&&n.push(u)}return n}function LO(e,t,n){const r=cO(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?XR(n):pO(n)),r.property==="style"){let i=typeof n=="object"?n:$O(e,String(n));return e.stylePropertyNameCase==="css"&&(i=FO(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?aO[r.property]||r.property:r.attribute,n]}}function $O(e,t){try{return wO(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,i=new vn("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=_k+"#cannot-parse-style-attribute",i}}function Nk(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let o=-1,l;for(;++o<i.length;){const u=Yx(i[o])?{type:"Identifier",name:i[o]}:{type:"Literal",value:i[o]};l=l?{type:"MemberExpression",object:l,property:u,computed:!!(o&&u.type==="Literal"),optional:!1}:u}r=l}else r=Yx(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return am.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);nl(e)}function nl(e,t){const n=new vn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=_k+"#cannot-handle-mdx-estrees-without-createevaluater",n}function FO(e){const t={};let n;for(n in e)am.call(e,n)&&(t[zO(n)]=e[n]);return t}function zO(e){let t=e.replace(SO,BO);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function BO(e){return"-"+e.toLowerCase()}const lh={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},UO={};function cm(e,t){const n=UO,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Tk(e,r,i)}function Tk(e,t,n){if(WO(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return r0(e.children,t,n)}return Array.isArray(e)?r0(e,t,n):""}function r0(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=Tk(e[i],t,n);return r.join("")}function WO(e){return!!(e&&typeof e=="object")}const i0=document.createElement("i");function dm(e){const t="&"+e+";";i0.innerHTML=t;const n=i0.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Kn(e,t,n,r){const i=e.length;let o=0,l;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)l=Array.from(r),l.unshift(t,n),e.splice(...l);else for(n&&e.splice(t,n);o<r.length;)l=r.slice(o,o+1e4),l.unshift(t,0),e.splice(...l),o+=1e4,t+=1e4}function sr(e,t){return e.length>0?(Kn(e,e.length,0,t),e):t}const s0={}.hasOwnProperty;function Ik(e){const t={};let n=-1;for(;++n<e.length;)HO(t,e[n]);return t}function HO(e,t){let n;for(n in t){const i=(s0.call(e,n)?e[n]:void 0)||(e[n]={}),o=t[n];let l;if(o)for(l in o){s0.call(i,l)||(i[l]=[]);const u=o[l];VO(i[l],Array.isArray(u)?u:u?[u]:[])}}}function VO(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Kn(e,0,0,r)}function Pk(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function wr(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const kn=Wi(/[A-Za-z]/),yn=Wi(/[\dA-Za-z]/),qO=Wi(/[#-'*+\--9=?A-Z^-~]/);function pc(e){return e!==null&&(e<32||e===127)}const pp=Wi(/\d/),YO=Wi(/[\dA-Fa-f]/),KO=Wi(/[!-/:-@[-`{-~]/);function Ge(e){return e!==null&&e<-2}function kt(e){return e!==null&&(e<0||e===32)}function ct(e){return e===-2||e===-1||e===32}const Uc=Wi(new RegExp("\\p{P}|\\p{S}","u")),ks=Wi(/\s/);function Wi(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Bo(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const o=e.charCodeAt(n);let l="";if(o===37&&yn(e.charCodeAt(n+1))&&yn(e.charCodeAt(n+2)))i=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(l=String.fromCharCode(o));else if(o>55295&&o<57344){const u=e.charCodeAt(n+1);o<56320&&u>56319&&u<57344?(l=String.fromCharCode(o,u),i=1):l=""}else l=String.fromCharCode(o);l&&(t.push(e.slice(r,n),encodeURIComponent(l)),r=n+i+1,l=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function ft(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let o=0;return l;function l(c){return ct(c)?(e.enter(n),u(c)):t(c)}function u(c){return ct(c)&&o++<i?(e.consume(c),u):(e.exit(n),t(c))}}const GO={tokenize:JO};function JO(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(u){if(u===null){e.consume(u);return}return e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),ft(e,t,"linePrefix")}function i(u){return e.enter("paragraph"),o(u)}function o(u){const c=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,l(u)}function l(u){if(u===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(u);return}return Ge(u)?(e.consume(u),e.exit("chunkText"),o):(e.consume(u),l)}}const QO={tokenize:XO},o0={tokenize:ZO};function XO(e){const t=this,n=[];let r=0,i,o,l;return u;function u(j){if(r<n.length){const I=n[r];return t.containerState=I[1],e.attempt(I[0].continuation,c,f)(j)}return f(j)}function c(j){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&_();const I=t.events.length;let M=I,A;for(;M--;)if(t.events[M][0]==="exit"&&t.events[M][1].type==="chunkFlow"){A=t.events[M][1].end;break}C(r);let B=I;for(;B<t.events.length;)t.events[B][1].end={...A},B++;return Kn(t.events,M+1,0,t.events.slice(I)),t.events.length=B,f(j)}return u(j)}function f(j){if(r===n.length){if(!i)return v(j);if(i.currentConstruct&&i.currentConstruct.concrete)return b(j);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(o0,h,p)(j)}function h(j){return i&&_(),C(r),v(j)}function p(j){return t.parser.lazy[t.now().line]=r!==n.length,l=t.now().offset,b(j)}function v(j){return t.containerState={},e.attempt(o0,y,b)(j)}function y(j){return r++,n.push([t.currentConstruct,t.containerState]),v(j)}function b(j){if(j===null){i&&_(),C(0),e.consume(j);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:o}),k(j)}function k(j){if(j===null){E(e.exit("chunkFlow"),!0),C(0),e.consume(j);return}return Ge(j)?(e.consume(j),E(e.exit("chunkFlow")),r=0,t.interrupt=void 0,u):(e.consume(j),k)}function E(j,I){const M=t.sliceStream(j);if(I&&M.push(null),j.previous=o,o&&(o.next=j),o=j,i.defineSkip(j.start),i.write(M),t.parser.lazy[j.start.line]){let A=i.events.length;for(;A--;)if(i.events[A][1].start.offset<l&&(!i.events[A][1].end||i.events[A][1].end.offset>l))return;const B=t.events.length;let te=B,H,O;for(;te--;)if(t.events[te][0]==="exit"&&t.events[te][1].type==="chunkFlow"){if(H){O=t.events[te][1].end;break}H=!0}for(C(r),A=B;A<t.events.length;)t.events[A][1].end={...O},A++;Kn(t.events,te+1,0,t.events.slice(B)),t.events.length=A}}function C(j){let I=n.length;for(;I-- >j;){const M=n[I];t.containerState=M[1],M[0].exit.call(t,e)}n.length=j}function _(){i.write([null]),o=void 0,i=void 0,t.containerState._closeFlow=void 0}}function ZO(e,t,n){return ft(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Po(e){if(e===null||kt(e)||ks(e))return 1;if(Uc(e))return 2}function Wc(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const o=e[i].resolveAll;o&&!r.includes(o)&&(t=o(t,n),r.push(o))}return t}const mp={name:"attention",resolveAll:eM,tokenize:tM};function eM(e,t){let n=-1,r,i,o,l,u,c,f,h;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const p={...e[r][1].end},v={...e[n][1].start};a0(p,-c),a0(v,c),l={type:c>1?"strongSequence":"emphasisSequence",start:p,end:{...e[r][1].end}},u={type:c>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:v},o={type:c>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},i={type:c>1?"strong":"emphasis",start:{...l.start},end:{...u.end}},e[r][1].end={...l.start},e[n][1].start={...u.end},f=[],e[r][1].end.offset-e[r][1].start.offset&&(f=sr(f,[["enter",e[r][1],t],["exit",e[r][1],t]])),f=sr(f,[["enter",i,t],["enter",l,t],["exit",l,t],["enter",o,t]]),f=sr(f,Wc(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),f=sr(f,[["exit",o,t],["enter",u,t],["exit",u,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(h=2,f=sr(f,[["enter",e[n][1],t],["exit",e[n][1],t]])):h=0,Kn(e,r-1,n-r+3,f),n=r+f.length-h-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function tM(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Po(r);let o;return l;function l(c){return o=c,e.enter("attentionSequence"),u(c)}function u(c){if(c===o)return e.consume(c),u;const f=e.exit("attentionSequence"),h=Po(c),p=!h||h===2&&i||n.includes(c),v=!i||i===2&&h||n.includes(r);return f._open=!!(o===42?p:p&&(i||!v)),f._close=!!(o===42?v:v&&(h||!p)),t(c)}}function a0(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const nM={name:"autolink",tokenize:rM};function rM(e,t,n){let r=0;return i;function i(y){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(y),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),o}function o(y){return kn(y)?(e.consume(y),l):y===64?n(y):f(y)}function l(y){return y===43||y===45||y===46||yn(y)?(r=1,u(y)):f(y)}function u(y){return y===58?(e.consume(y),r=0,c):(y===43||y===45||y===46||yn(y))&&r++<32?(e.consume(y),u):(r=0,f(y))}function c(y){return y===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(y),e.exit("autolinkMarker"),e.exit("autolink"),t):y===null||y===32||y===60||pc(y)?n(y):(e.consume(y),c)}function f(y){return y===64?(e.consume(y),h):qO(y)?(e.consume(y),f):n(y)}function h(y){return yn(y)?p(y):n(y)}function p(y){return y===46?(e.consume(y),r=0,h):y===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(y),e.exit("autolinkMarker"),e.exit("autolink"),t):v(y)}function v(y){if((y===45||yn(y))&&r++<63){const b=y===45?v:p;return e.consume(y),b}return n(y)}}const ml={partial:!0,tokenize:iM};function iM(e,t,n){return r;function r(o){return ct(o)?ft(e,i,"linePrefix")(o):i(o)}function i(o){return o===null||Ge(o)?t(o):n(o)}}const Ak={continuation:{tokenize:oM},exit:aM,name:"blockQuote",tokenize:sM};function sM(e,t,n){const r=this;return i;function i(l){if(l===62){const u=r.containerState;return u.open||(e.enter("blockQuote",{_container:!0}),u.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(l),e.exit("blockQuoteMarker"),o}return n(l)}function o(l){return ct(l)?(e.enter("blockQuotePrefixWhitespace"),e.consume(l),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(l))}}function oM(e,t,n){const r=this;return i;function i(l){return ct(l)?ft(e,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):o(l)}function o(l){return e.attempt(Ak,t,n)(l)}}function aM(e){e.exit("blockQuote")}const Rk={name:"characterEscape",tokenize:lM};function lM(e,t,n){return r;function r(o){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(o),e.exit("escapeMarker"),i}function i(o){return KO(o)?(e.enter("characterEscapeValue"),e.consume(o),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(o)}}const Ok={name:"characterReference",tokenize:uM};function uM(e,t,n){const r=this;let i=0,o,l;return u;function u(p){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(p),e.exit("characterReferenceMarker"),c}function c(p){return p===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(p),e.exit("characterReferenceMarkerNumeric"),f):(e.enter("characterReferenceValue"),o=31,l=yn,h(p))}function f(p){return p===88||p===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(p),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),o=6,l=YO,h):(e.enter("characterReferenceValue"),o=7,l=pp,h(p))}function h(p){if(p===59&&i){const v=e.exit("characterReferenceValue");return l===yn&&!dm(r.sliceSerialize(v))?n(p):(e.enter("characterReferenceMarker"),e.consume(p),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return l(p)&&i++<o?(e.consume(p),h):n(p)}}const l0={partial:!0,tokenize:dM},u0={concrete:!0,name:"codeFenced",tokenize:cM};function cM(e,t,n){const r=this,i={partial:!0,tokenize:M};let o=0,l=0,u;return c;function c(A){return f(A)}function f(A){const B=r.events[r.events.length-1];return o=B&&B[1].type==="linePrefix"?B[2].sliceSerialize(B[1],!0).length:0,u=A,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),h(A)}function h(A){return A===u?(l++,e.consume(A),h):l<3?n(A):(e.exit("codeFencedFenceSequence"),ct(A)?ft(e,p,"whitespace")(A):p(A))}function p(A){return A===null||Ge(A)?(e.exit("codeFencedFence"),r.interrupt?t(A):e.check(l0,k,I)(A)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),v(A))}function v(A){return A===null||Ge(A)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),p(A)):ct(A)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),ft(e,y,"whitespace")(A)):A===96&&A===u?n(A):(e.consume(A),v)}function y(A){return A===null||Ge(A)?p(A):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),b(A))}function b(A){return A===null||Ge(A)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),p(A)):A===96&&A===u?n(A):(e.consume(A),b)}function k(A){return e.attempt(i,I,E)(A)}function E(A){return e.enter("lineEnding"),e.consume(A),e.exit("lineEnding"),C}function C(A){return o>0&&ct(A)?ft(e,_,"linePrefix",o+1)(A):_(A)}function _(A){return A===null||Ge(A)?e.check(l0,k,I)(A):(e.enter("codeFlowValue"),j(A))}function j(A){return A===null||Ge(A)?(e.exit("codeFlowValue"),_(A)):(e.consume(A),j)}function I(A){return e.exit("codeFenced"),t(A)}function M(A,B,te){let H=0;return O;function O(V){return A.enter("lineEnding"),A.consume(V),A.exit("lineEnding"),D}function D(V){return A.enter("codeFencedFence"),ct(V)?ft(A,ne,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(V):ne(V)}function ne(V){return V===u?(A.enter("codeFencedFenceSequence"),W(V)):te(V)}function W(V){return V===u?(H++,A.consume(V),W):H>=l?(A.exit("codeFencedFenceSequence"),ct(V)?ft(A,Y,"whitespace")(V):Y(V)):te(V)}function Y(V){return V===null||Ge(V)?(A.exit("codeFencedFence"),B(V)):te(V)}}}function dM(e,t,n){const r=this;return i;function i(l){return l===null?n(l):(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),o)}function o(l){return r.parser.lazy[r.now().line]?n(l):t(l)}}const uh={name:"codeIndented",tokenize:hM},fM={partial:!0,tokenize:pM};function hM(e,t,n){const r=this;return i;function i(f){return e.enter("codeIndented"),ft(e,o,"linePrefix",5)(f)}function o(f){const h=r.events[r.events.length-1];return h&&h[1].type==="linePrefix"&&h[2].sliceSerialize(h[1],!0).length>=4?l(f):n(f)}function l(f){return f===null?c(f):Ge(f)?e.attempt(fM,l,c)(f):(e.enter("codeFlowValue"),u(f))}function u(f){return f===null||Ge(f)?(e.exit("codeFlowValue"),l(f)):(e.consume(f),u)}function c(f){return e.exit("codeIndented"),t(f)}}function pM(e,t,n){const r=this;return i;function i(l){return r.parser.lazy[r.now().line]?n(l):Ge(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),i):ft(e,o,"linePrefix",5)(l)}function o(l){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?t(l):Ge(l)?i(l):n(l)}}const mM={name:"codeText",previous:yM,resolve:gM,tokenize:vM};function gM(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function yM(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function vM(e,t,n){let r=0,i,o;return l;function l(p){return e.enter("codeText"),e.enter("codeTextSequence"),u(p)}function u(p){return p===96?(e.consume(p),r++,u):(e.exit("codeTextSequence"),c(p))}function c(p){return p===null?n(p):p===32?(e.enter("space"),e.consume(p),e.exit("space"),c):p===96?(o=e.enter("codeTextSequence"),i=0,h(p)):Ge(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),c):(e.enter("codeTextData"),f(p))}function f(p){return p===null||p===32||p===96||Ge(p)?(e.exit("codeTextData"),c(p)):(e.consume(p),f)}function h(p){return p===96?(e.consume(p),i++,h):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(p)):(o.type="codeTextData",f(p))}}class xM{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const o=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Na(this.left,r),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Na(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Na(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);Na(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Na(this.left,n.reverse())}}}function Na(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function Mk(e){const t={};let n=-1,r,i,o,l,u,c,f;const h=new xM(e);for(;++n<h.length;){for(;n in t;)n=t[n];if(r=h.get(n),n&&r[1].type==="chunkFlow"&&h.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,o=0,o<c.length&&c[o][1].type==="lineEndingBlank"&&(o+=2),o<c.length&&c[o][1].type==="content"))for(;++o<c.length&&c[o][1].type!=="content";)c[o][1].type==="chunkText"&&(c[o][1]._isInFirstContentOfListItem=!0,o++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,wM(h,n)),n=t[n],f=!0);else if(r[1]._container){for(o=n,i=void 0;o--;)if(l=h.get(o),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(i&&(h.get(i)[1].type="lineEndingBlank"),l[1].type="lineEnding",i=o);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;i&&(r[1].end={...h.get(i)[1].start},u=h.slice(i,n),u.unshift(r),h.splice(i,n-i+1,u))}}return Kn(e,0,Number.POSITIVE_INFINITY,h.slice(0)),!f}function wM(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const o=[];let l=n._tokenizer;l||(l=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const u=l.events,c=[],f={};let h,p,v=-1,y=n,b=0,k=0;const E=[k];for(;y;){for(;e.get(++i)[1]!==y;);o.push(i),y._tokenizer||(h=r.sliceStream(y),y.next||h.push(null),p&&l.defineSkip(y.start),y._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(h),y._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),p=y,y=y.next}for(y=n;++v<u.length;)u[v][0]==="exit"&&u[v-1][0]==="enter"&&u[v][1].type===u[v-1][1].type&&u[v][1].start.line!==u[v][1].end.line&&(k=v+1,E.push(k),y._tokenizer=void 0,y.previous=void 0,y=y.next);for(l.events=[],y?(y._tokenizer=void 0,y.previous=void 0):E.pop(),v=E.length;v--;){const C=u.slice(E[v],E[v+1]),_=o.pop();c.push([_,_+C.length-1]),e.splice(_,2,C)}for(c.reverse(),v=-1;++v<c.length;)f[b+c[v][0]]=b+c[v][1],b+=c[v][1]-c[v][0]-1;return f}const bM={resolve:SM,tokenize:EM},kM={partial:!0,tokenize:_M};function SM(e){return Mk(e),e}function EM(e,t){let n;return r;function r(u){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(u)}function i(u){return u===null?o(u):Ge(u)?e.check(kM,l,o)(u):(e.consume(u),i)}function o(u){return e.exit("chunkContent"),e.exit("content"),t(u)}function l(u){return e.consume(u),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function _M(e,t,n){const r=this;return i;function i(l){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),ft(e,o,"linePrefix")}function o(l){if(l===null||Ge(l))return n(l);const u=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?t(l):e.interrupt(r.parser.constructs.flow,n,t)(l)}}function Dk(e,t,n,r,i,o,l,u,c){const f=c||Number.POSITIVE_INFINITY;let h=0;return p;function p(C){return C===60?(e.enter(r),e.enter(i),e.enter(o),e.consume(C),e.exit(o),v):C===null||C===32||C===41||pc(C)?n(C):(e.enter(r),e.enter(l),e.enter(u),e.enter("chunkString",{contentType:"string"}),k(C))}function v(C){return C===62?(e.enter(o),e.consume(C),e.exit(o),e.exit(i),e.exit(r),t):(e.enter(u),e.enter("chunkString",{contentType:"string"}),y(C))}function y(C){return C===62?(e.exit("chunkString"),e.exit(u),v(C)):C===null||C===60||Ge(C)?n(C):(e.consume(C),C===92?b:y)}function b(C){return C===60||C===62||C===92?(e.consume(C),y):y(C)}function k(C){return!h&&(C===null||C===41||kt(C))?(e.exit("chunkString"),e.exit(u),e.exit(l),e.exit(r),t(C)):h<f&&C===40?(e.consume(C),h++,k):C===41?(e.consume(C),h--,k):C===null||C===32||C===40||pc(C)?n(C):(e.consume(C),C===92?E:k)}function E(C){return C===40||C===41||C===92?(e.consume(C),k):k(C)}}function Lk(e,t,n,r,i,o){const l=this;let u=0,c;return f;function f(y){return e.enter(r),e.enter(i),e.consume(y),e.exit(i),e.enter(o),h}function h(y){return u>999||y===null||y===91||y===93&&!c||y===94&&!u&&"_hiddenFootnoteSupport"in l.parser.constructs?n(y):y===93?(e.exit(o),e.enter(i),e.consume(y),e.exit(i),e.exit(r),t):Ge(y)?(e.enter("lineEnding"),e.consume(y),e.exit("lineEnding"),h):(e.enter("chunkString",{contentType:"string"}),p(y))}function p(y){return y===null||y===91||y===93||Ge(y)||u++>999?(e.exit("chunkString"),h(y)):(e.consume(y),c||(c=!ct(y)),y===92?v:p)}function v(y){return y===91||y===92||y===93?(e.consume(y),u++,p):p(y)}}function $k(e,t,n,r,i,o){let l;return u;function u(v){return v===34||v===39||v===40?(e.enter(r),e.enter(i),e.consume(v),e.exit(i),l=v===40?41:v,c):n(v)}function c(v){return v===l?(e.enter(i),e.consume(v),e.exit(i),e.exit(r),t):(e.enter(o),f(v))}function f(v){return v===l?(e.exit(o),c(l)):v===null?n(v):Ge(v)?(e.enter("lineEnding"),e.consume(v),e.exit("lineEnding"),ft(e,f,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),h(v))}function h(v){return v===l||v===null||Ge(v)?(e.exit("chunkString"),f(v)):(e.consume(v),v===92?p:h)}function p(v){return v===l||v===92?(e.consume(v),h):h(v)}}function Ua(e,t){let n;return r;function r(i){return Ge(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):ct(i)?ft(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const CM={name:"definition",tokenize:NM},jM={partial:!0,tokenize:TM};function NM(e,t,n){const r=this;let i;return o;function o(y){return e.enter("definition"),l(y)}function l(y){return Lk.call(r,e,u,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(y)}function u(y){return i=wr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),y===58?(e.enter("definitionMarker"),e.consume(y),e.exit("definitionMarker"),c):n(y)}function c(y){return kt(y)?Ua(e,f)(y):f(y)}function f(y){return Dk(e,h,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(y)}function h(y){return e.attempt(jM,p,p)(y)}function p(y){return ct(y)?ft(e,v,"whitespace")(y):v(y)}function v(y){return y===null||Ge(y)?(e.exit("definition"),r.parser.defined.push(i),t(y)):n(y)}}function TM(e,t,n){return r;function r(u){return kt(u)?Ua(e,i)(u):n(u)}function i(u){return $k(e,o,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(u)}function o(u){return ct(u)?ft(e,l,"whitespace")(u):l(u)}function l(u){return u===null||Ge(u)?t(u):n(u)}}const IM={name:"hardBreakEscape",tokenize:PM};function PM(e,t,n){return r;function r(o){return e.enter("hardBreakEscape"),e.consume(o),i}function i(o){return Ge(o)?(e.exit("hardBreakEscape"),t(o)):n(o)}}const AM={name:"headingAtx",resolve:RM,tokenize:OM};function RM(e,t){let n=e.length-2,r=3,i,o;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},o={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Kn(e,r,n-r+1,[["enter",i,t],["enter",o,t],["exit",o,t],["exit",i,t]])),e}function OM(e,t,n){let r=0;return i;function i(h){return e.enter("atxHeading"),o(h)}function o(h){return e.enter("atxHeadingSequence"),l(h)}function l(h){return h===35&&r++<6?(e.consume(h),l):h===null||kt(h)?(e.exit("atxHeadingSequence"),u(h)):n(h)}function u(h){return h===35?(e.enter("atxHeadingSequence"),c(h)):h===null||Ge(h)?(e.exit("atxHeading"),t(h)):ct(h)?ft(e,u,"whitespace")(h):(e.enter("atxHeadingText"),f(h))}function c(h){return h===35?(e.consume(h),c):(e.exit("atxHeadingSequence"),u(h))}function f(h){return h===null||h===35||kt(h)?(e.exit("atxHeadingText"),u(h)):(e.consume(h),f)}}const MM=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],c0=["pre","script","style","textarea"],DM={concrete:!0,name:"htmlFlow",resolveTo:FM,tokenize:zM},LM={partial:!0,tokenize:UM},$M={partial:!0,tokenize:BM};function FM(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function zM(e,t,n){const r=this;let i,o,l,u,c;return f;function f(P){return h(P)}function h(P){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(P),p}function p(P){return P===33?(e.consume(P),v):P===47?(e.consume(P),o=!0,k):P===63?(e.consume(P),i=3,r.interrupt?t:T):kn(P)?(e.consume(P),l=String.fromCharCode(P),E):n(P)}function v(P){return P===45?(e.consume(P),i=2,y):P===91?(e.consume(P),i=5,u=0,b):kn(P)?(e.consume(P),i=4,r.interrupt?t:T):n(P)}function y(P){return P===45?(e.consume(P),r.interrupt?t:T):n(P)}function b(P){const be="CDATA[";return P===be.charCodeAt(u++)?(e.consume(P),u===be.length?r.interrupt?t:ne:b):n(P)}function k(P){return kn(P)?(e.consume(P),l=String.fromCharCode(P),E):n(P)}function E(P){if(P===null||P===47||P===62||kt(P)){const be=P===47,he=l.toLowerCase();return!be&&!o&&c0.includes(he)?(i=1,r.interrupt?t(P):ne(P)):MM.includes(l.toLowerCase())?(i=6,be?(e.consume(P),C):r.interrupt?t(P):ne(P)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(P):o?_(P):j(P))}return P===45||yn(P)?(e.consume(P),l+=String.fromCharCode(P),E):n(P)}function C(P){return P===62?(e.consume(P),r.interrupt?t:ne):n(P)}function _(P){return ct(P)?(e.consume(P),_):O(P)}function j(P){return P===47?(e.consume(P),O):P===58||P===95||kn(P)?(e.consume(P),I):ct(P)?(e.consume(P),j):O(P)}function I(P){return P===45||P===46||P===58||P===95||yn(P)?(e.consume(P),I):M(P)}function M(P){return P===61?(e.consume(P),A):ct(P)?(e.consume(P),M):j(P)}function A(P){return P===null||P===60||P===61||P===62||P===96?n(P):P===34||P===39?(e.consume(P),c=P,B):ct(P)?(e.consume(P),A):te(P)}function B(P){return P===c?(e.consume(P),c=null,H):P===null||Ge(P)?n(P):(e.consume(P),B)}function te(P){return P===null||P===34||P===39||P===47||P===60||P===61||P===62||P===96||kt(P)?M(P):(e.consume(P),te)}function H(P){return P===47||P===62||ct(P)?j(P):n(P)}function O(P){return P===62?(e.consume(P),D):n(P)}function D(P){return P===null||Ge(P)?ne(P):ct(P)?(e.consume(P),D):n(P)}function ne(P){return P===45&&i===2?(e.consume(P),ie):P===60&&i===1?(e.consume(P),z):P===62&&i===4?(e.consume(P),F):P===63&&i===3?(e.consume(P),T):P===93&&i===5?(e.consume(P),Q):Ge(P)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(LM,J,W)(P)):P===null||Ge(P)?(e.exit("htmlFlowData"),W(P)):(e.consume(P),ne)}function W(P){return e.check($M,Y,J)(P)}function Y(P){return e.enter("lineEnding"),e.consume(P),e.exit("lineEnding"),V}function V(P){return P===null||Ge(P)?W(P):(e.enter("htmlFlowData"),ne(P))}function ie(P){return P===45?(e.consume(P),T):ne(P)}function z(P){return P===47?(e.consume(P),l="",L):ne(P)}function L(P){if(P===62){const be=l.toLowerCase();return c0.includes(be)?(e.consume(P),F):ne(P)}return kn(P)&&l.length<8?(e.consume(P),l+=String.fromCharCode(P),L):ne(P)}function Q(P){return P===93?(e.consume(P),T):ne(P)}function T(P){return P===62?(e.consume(P),F):P===45&&i===2?(e.consume(P),T):ne(P)}function F(P){return P===null||Ge(P)?(e.exit("htmlFlowData"),J(P)):(e.consume(P),F)}function J(P){return e.exit("htmlFlow"),t(P)}}function BM(e,t,n){const r=this;return i;function i(l){return Ge(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),o):n(l)}function o(l){return r.parser.lazy[r.now().line]?n(l):t(l)}}function UM(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(ml,t,n)}}const WM={name:"htmlText",tokenize:HM};function HM(e,t,n){const r=this;let i,o,l;return u;function u(T){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(T),c}function c(T){return T===33?(e.consume(T),f):T===47?(e.consume(T),M):T===63?(e.consume(T),j):kn(T)?(e.consume(T),te):n(T)}function f(T){return T===45?(e.consume(T),h):T===91?(e.consume(T),o=0,b):kn(T)?(e.consume(T),_):n(T)}function h(T){return T===45?(e.consume(T),y):n(T)}function p(T){return T===null?n(T):T===45?(e.consume(T),v):Ge(T)?(l=p,z(T)):(e.consume(T),p)}function v(T){return T===45?(e.consume(T),y):p(T)}function y(T){return T===62?ie(T):T===45?v(T):p(T)}function b(T){const F="CDATA[";return T===F.charCodeAt(o++)?(e.consume(T),o===F.length?k:b):n(T)}function k(T){return T===null?n(T):T===93?(e.consume(T),E):Ge(T)?(l=k,z(T)):(e.consume(T),k)}function E(T){return T===93?(e.consume(T),C):k(T)}function C(T){return T===62?ie(T):T===93?(e.consume(T),C):k(T)}function _(T){return T===null||T===62?ie(T):Ge(T)?(l=_,z(T)):(e.consume(T),_)}function j(T){return T===null?n(T):T===63?(e.consume(T),I):Ge(T)?(l=j,z(T)):(e.consume(T),j)}function I(T){return T===62?ie(T):j(T)}function M(T){return kn(T)?(e.consume(T),A):n(T)}function A(T){return T===45||yn(T)?(e.consume(T),A):B(T)}function B(T){return Ge(T)?(l=B,z(T)):ct(T)?(e.consume(T),B):ie(T)}function te(T){return T===45||yn(T)?(e.consume(T),te):T===47||T===62||kt(T)?H(T):n(T)}function H(T){return T===47?(e.consume(T),ie):T===58||T===95||kn(T)?(e.consume(T),O):Ge(T)?(l=H,z(T)):ct(T)?(e.consume(T),H):ie(T)}function O(T){return T===45||T===46||T===58||T===95||yn(T)?(e.consume(T),O):D(T)}function D(T){return T===61?(e.consume(T),ne):Ge(T)?(l=D,z(T)):ct(T)?(e.consume(T),D):H(T)}function ne(T){return T===null||T===60||T===61||T===62||T===96?n(T):T===34||T===39?(e.consume(T),i=T,W):Ge(T)?(l=ne,z(T)):ct(T)?(e.consume(T),ne):(e.consume(T),Y)}function W(T){return T===i?(e.consume(T),i=void 0,V):T===null?n(T):Ge(T)?(l=W,z(T)):(e.consume(T),W)}function Y(T){return T===null||T===34||T===39||T===60||T===61||T===96?n(T):T===47||T===62||kt(T)?H(T):(e.consume(T),Y)}function V(T){return T===47||T===62||kt(T)?H(T):n(T)}function ie(T){return T===62?(e.consume(T),e.exit("htmlTextData"),e.exit("htmlText"),t):n(T)}function z(T){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(T),e.exit("lineEnding"),L}function L(T){return ct(T)?ft(e,Q,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(T):Q(T)}function Q(T){return e.enter("htmlTextData"),l(T)}}const fm={name:"labelEnd",resolveAll:KM,resolveTo:GM,tokenize:JM},VM={tokenize:QM},qM={tokenize:XM},YM={tokenize:ZM};function KM(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",t+=i}}return e.length!==n.length&&Kn(e,0,e.length,n),e}function GM(e,t){let n=e.length,r=0,i,o,l,u;for(;n--;)if(i=e[n][1],o){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(l){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(o=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(l=n);const c={type:e[o][1].type==="labelLink"?"link":"image",start:{...e[o][1].start},end:{...e[e.length-1][1].end}},f={type:"label",start:{...e[o][1].start},end:{...e[l][1].end}},h={type:"labelText",start:{...e[o+r+2][1].end},end:{...e[l-2][1].start}};return u=[["enter",c,t],["enter",f,t]],u=sr(u,e.slice(o+1,o+r+3)),u=sr(u,[["enter",h,t]]),u=sr(u,Wc(t.parser.constructs.insideSpan.null,e.slice(o+r+4,l-3),t)),u=sr(u,[["exit",h,t],e[l-2],e[l-1],["exit",f,t]]),u=sr(u,e.slice(l+1)),u=sr(u,[["exit",c,t]]),Kn(e,o,e.length,u),e}function JM(e,t,n){const r=this;let i=r.events.length,o,l;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){o=r.events[i][1];break}return u;function u(v){return o?o._inactive?p(v):(l=r.parser.defined.includes(wr(r.sliceSerialize({start:o.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(v),e.exit("labelMarker"),e.exit("labelEnd"),c):n(v)}function c(v){return v===40?e.attempt(VM,h,l?h:p)(v):v===91?e.attempt(qM,h,l?f:p)(v):l?h(v):p(v)}function f(v){return e.attempt(YM,h,p)(v)}function h(v){return t(v)}function p(v){return o._balanced=!0,n(v)}}function QM(e,t,n){return r;function r(p){return e.enter("resource"),e.enter("resourceMarker"),e.consume(p),e.exit("resourceMarker"),i}function i(p){return kt(p)?Ua(e,o)(p):o(p)}function o(p){return p===41?h(p):Dk(e,l,u,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function l(p){return kt(p)?Ua(e,c)(p):h(p)}function u(p){return n(p)}function c(p){return p===34||p===39||p===40?$k(e,f,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):h(p)}function f(p){return kt(p)?Ua(e,h)(p):h(p)}function h(p){return p===41?(e.enter("resourceMarker"),e.consume(p),e.exit("resourceMarker"),e.exit("resource"),t):n(p)}}function XM(e,t,n){const r=this;return i;function i(u){return Lk.call(r,e,o,l,"reference","referenceMarker","referenceString")(u)}function o(u){return r.parser.defined.includes(wr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(u):n(u)}function l(u){return n(u)}}function ZM(e,t,n){return r;function r(o){return e.enter("reference"),e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),i}function i(o){return o===93?(e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),e.exit("reference"),t):n(o)}}const e2={name:"labelStartImage",resolveAll:fm.resolveAll,tokenize:t2};function t2(e,t,n){const r=this;return i;function i(u){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(u),e.exit("labelImageMarker"),o}function o(u){return u===91?(e.enter("labelMarker"),e.consume(u),e.exit("labelMarker"),e.exit("labelImage"),l):n(u)}function l(u){return u===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(u):t(u)}}const n2={name:"labelStartLink",resolveAll:fm.resolveAll,tokenize:r2};function r2(e,t,n){const r=this;return i;function i(l){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelLink"),o}function o(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):t(l)}}const ch={name:"lineEnding",tokenize:i2};function i2(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),ft(e,t,"linePrefix")}}const Qu={name:"thematicBreak",tokenize:s2};function s2(e,t,n){let r=0,i;return o;function o(f){return e.enter("thematicBreak"),l(f)}function l(f){return i=f,u(f)}function u(f){return f===i?(e.enter("thematicBreakSequence"),c(f)):r>=3&&(f===null||Ge(f))?(e.exit("thematicBreak"),t(f)):n(f)}function c(f){return f===i?(e.consume(f),r++,c):(e.exit("thematicBreakSequence"),ct(f)?ft(e,u,"whitespace")(f):u(f))}}const Rn={continuation:{tokenize:u2},exit:d2,name:"list",tokenize:l2},o2={partial:!0,tokenize:f2},a2={partial:!0,tokenize:c2};function l2(e,t,n){const r=this,i=r.events[r.events.length-1];let o=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,l=0;return u;function u(y){const b=r.containerState.type||(y===42||y===43||y===45?"listUnordered":"listOrdered");if(b==="listUnordered"?!r.containerState.marker||y===r.containerState.marker:pp(y)){if(r.containerState.type||(r.containerState.type=b,e.enter(b,{_container:!0})),b==="listUnordered")return e.enter("listItemPrefix"),y===42||y===45?e.check(Qu,n,f)(y):f(y);if(!r.interrupt||y===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(y)}return n(y)}function c(y){return pp(y)&&++l<10?(e.consume(y),c):(!r.interrupt||l<2)&&(r.containerState.marker?y===r.containerState.marker:y===41||y===46)?(e.exit("listItemValue"),f(y)):n(y)}function f(y){return e.enter("listItemMarker"),e.consume(y),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||y,e.check(ml,r.interrupt?n:h,e.attempt(o2,v,p))}function h(y){return r.containerState.initialBlankLine=!0,o++,v(y)}function p(y){return ct(y)?(e.enter("listItemPrefixWhitespace"),e.consume(y),e.exit("listItemPrefixWhitespace"),v):n(y)}function v(y){return r.containerState.size=o+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(y)}}function u2(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(ml,i,o);function i(u){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,ft(e,t,"listItemIndent",r.containerState.size+1)(u)}function o(u){return r.containerState.furtherBlankLines||!ct(u)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,l(u)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(a2,t,l)(u))}function l(u){return r.containerState._closeFlow=!0,r.interrupt=void 0,ft(e,e.attempt(Rn,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u)}}function c2(e,t,n){const r=this;return ft(e,i,"listItemIndent",r.containerState.size+1);function i(o){const l=r.events[r.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===r.containerState.size?t(o):n(o)}}function d2(e){e.exit(this.containerState.type)}function f2(e,t,n){const r=this;return ft(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(o){const l=r.events[r.events.length-1];return!ct(o)&&l&&l[1].type==="listItemPrefixWhitespace"?t(o):n(o)}}const d0={name:"setextUnderline",resolveTo:h2,tokenize:p2};function h2(e,t){let n=e.length,r,i,o;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!o&&e[n][1].type==="definition"&&(o=n);const l={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[i][1].type="setextHeadingText",o?(e.splice(i,0,["enter",l,t]),e.splice(o+1,0,["exit",e[r][1],t]),e[r][1].end={...e[o][1].end}):e[r][1]=l,e.push(["exit",l,t]),e}function p2(e,t,n){const r=this;let i;return o;function o(f){let h=r.events.length,p;for(;h--;)if(r.events[h][1].type!=="lineEnding"&&r.events[h][1].type!=="linePrefix"&&r.events[h][1].type!=="content"){p=r.events[h][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||p)?(e.enter("setextHeadingLine"),i=f,l(f)):n(f)}function l(f){return e.enter("setextHeadingLineSequence"),u(f)}function u(f){return f===i?(e.consume(f),u):(e.exit("setextHeadingLineSequence"),ct(f)?ft(e,c,"lineSuffix")(f):c(f))}function c(f){return f===null||Ge(f)?(e.exit("setextHeadingLine"),t(f)):n(f)}}const m2={tokenize:g2};function g2(e){const t=this,n=e.attempt(ml,r,e.attempt(this.parser.constructs.flowInitial,i,ft(e,e.attempt(this.parser.constructs.flow,i,e.attempt(bM,i)),"linePrefix")));return n;function r(o){if(o===null){e.consume(o);return}return e.enter("lineEndingBlank"),e.consume(o),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const y2={resolveAll:zk()},v2=Fk("string"),x2=Fk("text");function Fk(e){return{resolveAll:zk(e==="text"?w2:void 0),tokenize:t};function t(n){const r=this,i=this.parser.constructs[e],o=n.attempt(i,l,u);return l;function l(h){return f(h)?o(h):u(h)}function u(h){if(h===null){n.consume(h);return}return n.enter("data"),n.consume(h),c}function c(h){return f(h)?(n.exit("data"),o(h)):(n.consume(h),c)}function f(h){if(h===null)return!0;const p=i[h];let v=-1;if(p)for(;++v<p.length;){const y=p[v];if(!y.previous||y.previous.call(r,r.previous))return!0}return!1}}}function zk(e){return t;function t(n,r){let i=-1,o;for(;++i<=n.length;)o===void 0?n[i]&&n[i][1].type==="data"&&(o=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==o+2&&(n[o][1].end=n[i-1][1].end,n.splice(o+2,i-o-2),i=o+2),o=void 0);return e?e(n,r):n}}function w2(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let o=i.length,l=-1,u=0,c;for(;o--;){const f=i[o];if(typeof f=="string"){for(l=f.length;f.charCodeAt(l-1)===32;)u++,l--;if(l)break;l=-1}else if(f===-2)c=!0,u++;else if(f!==-1){o++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(u=0),u){const f={type:n===e.length||c||u<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?l:r.start._bufferIndex+l,_index:r.start._index+o,line:r.end.line,column:r.end.column-u,offset:r.end.offset-u},end:{...r.end}};r.end={...f.start},r.start.offset===r.end.offset?Object.assign(r,f):(e.splice(n,0,["enter",f,t],["exit",f,t]),n+=2)}n++}return e}const b2={42:Rn,43:Rn,45:Rn,48:Rn,49:Rn,50:Rn,51:Rn,52:Rn,53:Rn,54:Rn,55:Rn,56:Rn,57:Rn,62:Ak},k2={91:CM},S2={[-2]:uh,[-1]:uh,32:uh},E2={35:AM,42:Qu,45:[d0,Qu],60:DM,61:d0,95:Qu,96:u0,126:u0},_2={38:Ok,92:Rk},C2={[-5]:ch,[-4]:ch,[-3]:ch,33:e2,38:Ok,42:mp,60:[nM,WM],91:n2,92:[IM,Rk],93:fm,95:mp,96:mM},j2={null:[mp,y2]},N2={null:[42,95]},T2={null:[]},I2=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:N2,contentInitial:k2,disable:T2,document:b2,flow:E2,flowInitial:S2,insideSpan:j2,string:_2,text:C2},Symbol.toStringTag,{value:"Module"}));function P2(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},o=[];let l=[],u=[];const c={attempt:B(M),check:B(A),consume:_,enter:j,exit:I,interrupt:B(A,{interrupt:!0})},f={code:null,containerState:{},defineSkip:k,events:[],now:b,parser:e,previous:null,sliceSerialize:v,sliceStream:y,write:p};let h=t.tokenize.call(f,c);return t.resolveAll&&o.push(t),f;function p(D){return l=sr(l,D),E(),l[l.length-1]!==null?[]:(te(t,0),f.events=Wc(o,f.events,f),f.events)}function v(D,ne){return R2(y(D),ne)}function y(D){return A2(l,D)}function b(){const{_bufferIndex:D,_index:ne,line:W,column:Y,offset:V}=r;return{_bufferIndex:D,_index:ne,line:W,column:Y,offset:V}}function k(D){i[D.line]=D.column,O()}function E(){let D;for(;r._index<l.length;){const ne=l[r._index];if(typeof ne=="string")for(D=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===D&&r._bufferIndex<ne.length;)C(ne.charCodeAt(r._bufferIndex));else C(ne)}}function C(D){h=h(D)}function _(D){Ge(D)?(r.line++,r.column=1,r.offset+=D===-3?2:1,O()):D!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===l[r._index].length&&(r._bufferIndex=-1,r._index++)),f.previous=D}function j(D,ne){const W=ne||{};return W.type=D,W.start=b(),f.events.push(["enter",W,f]),u.push(W),W}function I(D){const ne=u.pop();return ne.end=b(),f.events.push(["exit",ne,f]),ne}function M(D,ne){te(D,ne.from)}function A(D,ne){ne.restore()}function B(D,ne){return W;function W(Y,V,ie){let z,L,Q,T;return Array.isArray(Y)?J(Y):"tokenize"in Y?J([Y]):F(Y);function F(ge){return me;function me(je){const Ae=je!==null&&ge[je],Te=je!==null&&ge.null,re=[...Array.isArray(Ae)?Ae:Ae?[Ae]:[],...Array.isArray(Te)?Te:Te?[Te]:[]];return J(re)(je)}}function J(ge){return z=ge,L=0,ge.length===0?ie:P(ge[L])}function P(ge){return me;function me(je){return T=H(),Q=ge,ge.partial||(f.currentConstruct=ge),ge.name&&f.parser.constructs.disable.null.includes(ge.name)?he():ge.tokenize.call(ne?Object.assign(Object.create(f),ne):f,c,be,he)(je)}}function be(ge){return D(Q,T),V}function he(ge){return T.restore(),++L<z.length?P(z[L]):ie}}}function te(D,ne){D.resolveAll&&!o.includes(D)&&o.push(D),D.resolve&&Kn(f.events,ne,f.events.length-ne,D.resolve(f.events.slice(ne),f)),D.resolveTo&&(f.events=D.resolveTo(f.events,f))}function H(){const D=b(),ne=f.previous,W=f.currentConstruct,Y=f.events.length,V=Array.from(u);return{from:Y,restore:ie};function ie(){r=D,f.previous=ne,f.currentConstruct=W,f.events.length=Y,u=V,O()}}function O(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function A2(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,o=t.end._bufferIndex;let l;if(n===i)l=[e[n].slice(r,o)];else{if(l=e.slice(n,i),r>-1){const u=l[0];typeof u=="string"?l[0]=u.slice(r):l.shift()}o>0&&l.push(e[i].slice(0,o))}return l}function R2(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const o=e[n];let l;if(typeof o=="string")l=o;else switch(o){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=t?" ":"	";break}case-1:{if(!t&&i)continue;l=" ";break}default:l=String.fromCharCode(o)}i=o===-2,r.push(l)}return r.join("")}function O2(e){const r={constructs:Ik([I2,...(e||{}).extensions||[]]),content:i(GO),defined:[],document:i(QO),flow:i(m2),lazy:{},string:i(v2),text:i(x2)};return r;function i(o){return l;function l(u){return P2(r,o,u)}}}function M2(e){for(;!Mk(e););return e}const f0=/[\0\t\n\r]/g;function D2(){let e=1,t="",n=!0,r;return i;function i(o,l,u){const c=[];let f,h,p,v,y;for(o=t+(typeof o=="string"?o.toString():new TextDecoder(l||void 0).decode(o)),p=0,t="",n&&(o.charCodeAt(0)===65279&&p++,n=void 0);p<o.length;){if(f0.lastIndex=p,f=f0.exec(o),v=f&&f.index!==void 0?f.index:o.length,y=o.charCodeAt(v),!f){t=o.slice(p);break}if(y===10&&p===v&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),p<v&&(c.push(o.slice(p,v)),e+=v-p),y){case 0:{c.push(65533),e++;break}case 9:{for(h=Math.ceil(e/4)*4,c.push(-2);e++<h;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:r=!0,e=1}p=v+1}return u&&(r&&c.push(-5),t&&c.push(t),c.push(null)),c}}const L2=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function $2(e){return e.replace(L2,F2)}function F2(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),o=i===120||i===88;return Pk(n.slice(o?2:1),o?16:10)}return dm(n)||e}const Bk={}.hasOwnProperty;function z2(e,t,n){return typeof t!="string"&&(n=t,t=void 0),B2(n)(M2(O2(n).document().write(D2()(e,t,!0))))}function B2(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(qt),autolinkProtocol:H,autolinkEmail:H,atxHeading:o(tt),blockQuote:o(Te),characterEscape:H,characterReference:H,codeFenced:o(re),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:o(re,l),codeText:o(Ie,l),codeTextData:H,data:H,codeFlowValue:H,definition:o(Ue),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:o(We),hardBreakEscape:o(ot),hardBreakTrailing:o(ot),htmlFlow:o(St,l),htmlFlowData:H,htmlText:o(St,l),htmlTextData:H,image:o(Qt),label:l,link:o(qt),listItem:o(fe),listItemValue:v,listOrdered:o(G,p),listUnordered:o(G),paragraph:o(ye),reference:P,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:o(tt),strong:o(Pe),thematicBreak:o(ae)},exit:{atxHeading:c(),atxHeadingSequence:M,autolink:c(),autolinkEmail:Ae,autolinkProtocol:je,blockQuote:c(),characterEscapeValue:O,characterReferenceMarkerHexadecimal:he,characterReferenceMarkerNumeric:he,characterReferenceValue:ge,characterReference:me,codeFenced:c(E),codeFencedFence:k,codeFencedFenceInfo:y,codeFencedFenceMeta:b,codeFlowValue:O,codeIndented:c(C),codeText:c(V),codeTextData:O,data:O,definition:c(),definitionDestinationString:I,definitionLabelString:_,definitionTitleString:j,emphasis:c(),hardBreakEscape:c(ne),hardBreakTrailing:c(ne),htmlFlow:c(W),htmlFlowData:O,htmlText:c(Y),htmlTextData:O,image:c(z),label:Q,labelText:L,lineEnding:D,link:c(ie),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:be,resourceDestinationString:T,resourceTitleString:F,resource:J,setextHeading:c(te),setextHeadingLineSequence:B,setextHeadingText:A,strong:c(),thematicBreak:c()}};Uk(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(R){let q={type:"root",children:[]};const ue={stack:[q],tokenStack:[],config:t,enter:u,exit:f,buffer:l,resume:h,data:n},le=[];let ee=-1;for(;++ee<R.length;)if(R[ee][1].type==="listOrdered"||R[ee][1].type==="listUnordered")if(R[ee][0]==="enter")le.push(ee);else{const de=le.pop();ee=i(R,de,ee)}for(ee=-1;++ee<R.length;){const de=t[R[ee][0]];Bk.call(de,R[ee][1].type)&&de[R[ee][1].type].call(Object.assign({sliceSerialize:R[ee][2].sliceSerialize},ue),R[ee][1])}if(ue.tokenStack.length>0){const de=ue.tokenStack[ue.tokenStack.length-1];(de[1]||h0).call(ue,void 0,de[0])}for(q.position={start:_i(R.length>0?R[0][1].start:{line:1,column:1,offset:0}),end:_i(R.length>0?R[R.length-2][1].end:{line:1,column:1,offset:0})},ee=-1;++ee<t.transforms.length;)q=t.transforms[ee](q)||q;return q}function i(R,q,ue){let le=q-1,ee=-1,de=!1,$,Z,pe,ve;for(;++le<=ue;){const De=R[le];switch(De[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{De[0]==="enter"?ee++:ee--,ve=void 0;break}case"lineEndingBlank":{De[0]==="enter"&&($&&!ve&&!ee&&!pe&&(pe=le),ve=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:ve=void 0}if(!ee&&De[0]==="enter"&&De[1].type==="listItemPrefix"||ee===-1&&De[0]==="exit"&&(De[1].type==="listUnordered"||De[1].type==="listOrdered")){if($){let Je=le;for(Z=void 0;Je--;){const nt=R[Je];if(nt[1].type==="lineEnding"||nt[1].type==="lineEndingBlank"){if(nt[0]==="exit")continue;Z&&(R[Z][1].type="lineEndingBlank",de=!0),nt[1].type="lineEnding",Z=Je}else if(!(nt[1].type==="linePrefix"||nt[1].type==="blockQuotePrefix"||nt[1].type==="blockQuotePrefixWhitespace"||nt[1].type==="blockQuoteMarker"||nt[1].type==="listItemIndent"))break}pe&&(!Z||pe<Z)&&($._spread=!0),$.end=Object.assign({},Z?R[Z][1].start:De[1].end),R.splice(Z||le,0,["exit",$,De[2]]),le++,ue++}if(De[1].type==="listItemPrefix"){const Je={type:"listItem",_spread:!1,start:Object.assign({},De[1].start),end:void 0};$=Je,R.splice(le,0,["enter",Je,De[2]]),le++,ue++,pe=void 0,ve=!0}}}return R[q][1]._spread=de,ue}function o(R,q){return ue;function ue(le){u.call(this,R(le),le),q&&q.call(this,le)}}function l(){this.stack.push({type:"fragment",children:[]})}function u(R,q,ue){this.stack[this.stack.length-1].children.push(R),this.stack.push(R),this.tokenStack.push([q,ue||void 0]),R.position={start:_i(q.start),end:void 0}}function c(R){return q;function q(ue){R&&R.call(this,ue),f.call(this,ue)}}function f(R,q){const ue=this.stack.pop(),le=this.tokenStack.pop();if(le)le[0].type!==R.type&&(q?q.call(this,R,le[0]):(le[1]||h0).call(this,R,le[0]));else throw new Error("Cannot close `"+R.type+"` ("+Ba({start:R.start,end:R.end})+"): its not open");ue.position.end=_i(R.end)}function h(){return cm(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function v(R){if(this.data.expectingFirstListItemValue){const q=this.stack[this.stack.length-2];q.start=Number.parseInt(this.sliceSerialize(R),10),this.data.expectingFirstListItemValue=void 0}}function y(){const R=this.resume(),q=this.stack[this.stack.length-1];q.lang=R}function b(){const R=this.resume(),q=this.stack[this.stack.length-1];q.meta=R}function k(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function E(){const R=this.resume(),q=this.stack[this.stack.length-1];q.value=R.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function C(){const R=this.resume(),q=this.stack[this.stack.length-1];q.value=R.replace(/(\r?\n|\r)$/g,"")}function _(R){const q=this.resume(),ue=this.stack[this.stack.length-1];ue.label=q,ue.identifier=wr(this.sliceSerialize(R)).toLowerCase()}function j(){const R=this.resume(),q=this.stack[this.stack.length-1];q.title=R}function I(){const R=this.resume(),q=this.stack[this.stack.length-1];q.url=R}function M(R){const q=this.stack[this.stack.length-1];if(!q.depth){const ue=this.sliceSerialize(R).length;q.depth=ue}}function A(){this.data.setextHeadingSlurpLineEnding=!0}function B(R){const q=this.stack[this.stack.length-1];q.depth=this.sliceSerialize(R).codePointAt(0)===61?1:2}function te(){this.data.setextHeadingSlurpLineEnding=void 0}function H(R){const ue=this.stack[this.stack.length-1].children;let le=ue[ue.length-1];(!le||le.type!=="text")&&(le=Se(),le.position={start:_i(R.start),end:void 0},ue.push(le)),this.stack.push(le)}function O(R){const q=this.stack.pop();q.value+=this.sliceSerialize(R),q.position.end=_i(R.end)}function D(R){const q=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ue=q.children[q.children.length-1];ue.position.end=_i(R.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(q.type)&&(H.call(this,R),O.call(this,R))}function ne(){this.data.atHardBreak=!0}function W(){const R=this.resume(),q=this.stack[this.stack.length-1];q.value=R}function Y(){const R=this.resume(),q=this.stack[this.stack.length-1];q.value=R}function V(){const R=this.resume(),q=this.stack[this.stack.length-1];q.value=R}function ie(){const R=this.stack[this.stack.length-1];if(this.data.inReference){const q=this.data.referenceType||"shortcut";R.type+="Reference",R.referenceType=q,delete R.url,delete R.title}else delete R.identifier,delete R.label;this.data.referenceType=void 0}function z(){const R=this.stack[this.stack.length-1];if(this.data.inReference){const q=this.data.referenceType||"shortcut";R.type+="Reference",R.referenceType=q,delete R.url,delete R.title}else delete R.identifier,delete R.label;this.data.referenceType=void 0}function L(R){const q=this.sliceSerialize(R),ue=this.stack[this.stack.length-2];ue.label=$2(q),ue.identifier=wr(q).toLowerCase()}function Q(){const R=this.stack[this.stack.length-1],q=this.resume(),ue=this.stack[this.stack.length-1];if(this.data.inReference=!0,ue.type==="link"){const le=R.children;ue.children=le}else ue.alt=q}function T(){const R=this.resume(),q=this.stack[this.stack.length-1];q.url=R}function F(){const R=this.resume(),q=this.stack[this.stack.length-1];q.title=R}function J(){this.data.inReference=void 0}function P(){this.data.referenceType="collapsed"}function be(R){const q=this.resume(),ue=this.stack[this.stack.length-1];ue.label=q,ue.identifier=wr(this.sliceSerialize(R)).toLowerCase(),this.data.referenceType="full"}function he(R){this.data.characterReferenceType=R.type}function ge(R){const q=this.sliceSerialize(R),ue=this.data.characterReferenceType;let le;ue?(le=Pk(q,ue==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):le=dm(q);const ee=this.stack[this.stack.length-1];ee.value+=le}function me(R){const q=this.stack.pop();q.position.end=_i(R.end)}function je(R){O.call(this,R);const q=this.stack[this.stack.length-1];q.url=this.sliceSerialize(R)}function Ae(R){O.call(this,R);const q=this.stack[this.stack.length-1];q.url="mailto:"+this.sliceSerialize(R)}function Te(){return{type:"blockquote",children:[]}}function re(){return{type:"code",lang:null,meta:null,value:""}}function Ie(){return{type:"inlineCode",value:""}}function Ue(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function We(){return{type:"emphasis",children:[]}}function tt(){return{type:"heading",depth:0,children:[]}}function ot(){return{type:"break"}}function St(){return{type:"html",value:""}}function Qt(){return{type:"image",title:null,url:"",alt:null}}function qt(){return{type:"link",title:null,url:"",children:[]}}function G(R){return{type:"list",ordered:R.type==="listOrdered",start:null,spread:R._spread,children:[]}}function fe(R){return{type:"listItem",spread:R._spread,checked:null,children:[]}}function ye(){return{type:"paragraph",children:[]}}function Pe(){return{type:"strong",children:[]}}function Se(){return{type:"text",value:""}}function ae(){return{type:"thematicBreak"}}}function _i(e){return{line:e.line,column:e.column,offset:e.offset}}function Uk(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?Uk(e,r):U2(e,r)}}function U2(e,t){let n;for(n in t)if(Bk.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function h0(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Ba({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Ba({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Ba({start:t.start,end:t.end})+") is still open")}function W2(e){const t=this;t.parser=n;function n(r){return z2(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function H2(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function V2(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function q2(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function Y2(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function K2(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function G2(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=Bo(r.toLowerCase()),o=e.footnoteOrder.indexOf(r);let l,u=e.footnoteCounts.get(r);u===void 0?(u=0,e.footnoteOrder.push(r),l=e.footnoteOrder.length):l=o+1,u+=1,e.footnoteCounts.set(r,u);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(u>1?"-"+u:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(l)}]};e.patch(t,c);const f={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,f),e.applyData(t,f)}function J2(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Q2(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function Wk(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),o=i[0];o&&o.type==="text"?o.value="["+o.value:i.unshift({type:"text",value:"["});const l=i[i.length-1];return l&&l.type==="text"?l.value+=r:i.push({type:"text",value:r}),i}function X2(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Wk(e,t);const i={src:Bo(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const o={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,o),e.applyData(t,o)}function Z2(e,t){const n={src:Bo(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function eD(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function tD(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Wk(e,t);const i={href:Bo(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const o={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,o),e.applyData(t,o)}function nD(e,t){const n={href:Bo(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function rD(e,t,n){const r=e.all(t),i=n?iD(n):Hk(t),o={},l=[];if(typeof t.checked=="boolean"){const h=r[0];let p;h&&h.type==="element"&&h.tagName==="p"?p=h:(p={type:"element",tagName:"p",properties:{},children:[]},r.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let u=-1;for(;++u<r.length;){const h=r[u];(i||u!==0||h.type!=="element"||h.tagName!=="p")&&l.push({type:"text",value:`
`}),h.type==="element"&&h.tagName==="p"&&!i?l.push(...h.children):l.push(h)}const c=r[r.length-1];c&&(i||c.type!=="element"||c.tagName!=="p")&&l.push({type:"text",value:`
`});const f={type:"element",tagName:"li",properties:o,children:l};return e.patch(t,f),e.applyData(t,f)}function iD(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=Hk(n[r])}return t}function Hk(e){const t=e.spread;return t??e.children.length>1}function sD(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const l=r[i];if(l.type==="element"&&l.tagName==="li"&&l.properties&&Array.isArray(l.properties.className)&&l.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,o),e.applyData(t,o)}function oD(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function aD(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function lD(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function uD(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const l={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],l),i.push(l)}if(n.length>0){const l={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},u=om(t.children[1]),c=Sk(t.children[t.children.length-1]);u&&c&&(l.position={start:u,end:c}),i.push(l)}const o={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,o),e.applyData(t,o)}function cD(e,t,n){const r=n?n.children:void 0,o=(r?r.indexOf(t):1)===0?"th":"td",l=n&&n.type==="table"?n.align:void 0,u=l?l.length:t.children.length;let c=-1;const f=[];for(;++c<u;){const p=t.children[c],v={},y=l?l[c]:void 0;y&&(v.align=y);let b={type:"element",tagName:o,properties:v,children:[]};p&&(b.children=e.all(p),e.patch(p,b),b=e.applyData(p,b)),f.push(b)}const h={type:"element",tagName:"tr",properties:{},children:e.wrap(f,!0)};return e.patch(t,h),e.applyData(t,h)}function dD(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const p0=9,m0=32;function fD(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const o=[];for(;r;)o.push(g0(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return o.push(g0(t.slice(i),i>0,!1)),o.join("")}function g0(e,t,n){let r=0,i=e.length;if(t){let o=e.codePointAt(r);for(;o===p0||o===m0;)r++,o=e.codePointAt(r)}if(n){let o=e.codePointAt(i-1);for(;o===p0||o===m0;)i--,o=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function hD(e,t){const n={type:"text",value:fD(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function pD(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const mD={blockquote:H2,break:V2,code:q2,delete:Y2,emphasis:K2,footnoteReference:G2,heading:J2,html:Q2,imageReference:X2,image:Z2,inlineCode:eD,linkReference:tD,link:nD,listItem:rD,list:sD,paragraph:oD,root:aD,strong:lD,table:uD,tableCell:dD,tableRow:cD,text:hD,thematicBreak:pD,toml:Lu,yaml:Lu,definition:Lu,footnoteDefinition:Lu};function Lu(){}const Vk=-1,Hc=0,Wa=1,mc=2,hm=3,pm=4,mm=5,gm=6,qk=7,Yk=8,y0=typeof self=="object"?self:globalThis,gD=(e,t)=>{const n=(i,o)=>(e.set(o,i),i),r=i=>{if(e.has(i))return e.get(i);const[o,l]=t[i];switch(o){case Hc:case Vk:return n(l,i);case Wa:{const u=n([],i);for(const c of l)u.push(r(c));return u}case mc:{const u=n({},i);for(const[c,f]of l)u[r(c)]=r(f);return u}case hm:return n(new Date(l),i);case pm:{const{source:u,flags:c}=l;return n(new RegExp(u,c),i)}case mm:{const u=n(new Map,i);for(const[c,f]of l)u.set(r(c),r(f));return u}case gm:{const u=n(new Set,i);for(const c of l)u.add(r(c));return u}case qk:{const{name:u,message:c}=l;return n(new y0[u](c),i)}case Yk:return n(BigInt(l),i);case"BigInt":return n(Object(BigInt(l)),i);case"ArrayBuffer":return n(new Uint8Array(l).buffer,l);case"DataView":{const{buffer:u}=new Uint8Array(l);return n(new DataView(u),l)}}return n(new y0[o](l),i)};return r},v0=e=>gD(new Map,e)(0),co="",{toString:yD}={},{keys:vD}=Object,Ta=e=>{const t=typeof e;if(t!=="object"||!e)return[Hc,t];const n=yD.call(e).slice(8,-1);switch(n){case"Array":return[Wa,co];case"Object":return[mc,co];case"Date":return[hm,co];case"RegExp":return[pm,co];case"Map":return[mm,co];case"Set":return[gm,co];case"DataView":return[Wa,n]}return n.includes("Array")?[Wa,n]:n.includes("Error")?[qk,n]:[mc,n]},$u=([e,t])=>e===Hc&&(t==="function"||t==="symbol"),xD=(e,t,n,r)=>{const i=(l,u)=>{const c=r.push(l)-1;return n.set(u,c),c},o=l=>{if(n.has(l))return n.get(l);let[u,c]=Ta(l);switch(u){case Hc:{let h=l;switch(c){case"bigint":u=Yk,h=l.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);h=null;break;case"undefined":return i([Vk],l)}return i([u,h],l)}case Wa:{if(c){let v=l;return c==="DataView"?v=new Uint8Array(l.buffer):c==="ArrayBuffer"&&(v=new Uint8Array(l)),i([c,[...v]],l)}const h=[],p=i([u,h],l);for(const v of l)h.push(o(v));return p}case mc:{if(c)switch(c){case"BigInt":return i([c,l.toString()],l);case"Boolean":case"Number":case"String":return i([c,l.valueOf()],l)}if(t&&"toJSON"in l)return o(l.toJSON());const h=[],p=i([u,h],l);for(const v of vD(l))(e||!$u(Ta(l[v])))&&h.push([o(v),o(l[v])]);return p}case hm:return i([u,l.toISOString()],l);case pm:{const{source:h,flags:p}=l;return i([u,{source:h,flags:p}],l)}case mm:{const h=[],p=i([u,h],l);for(const[v,y]of l)(e||!($u(Ta(v))||$u(Ta(y))))&&h.push([o(v),o(y)]);return p}case gm:{const h=[],p=i([u,h],l);for(const v of l)(e||!$u(Ta(v)))&&h.push(o(v));return p}}const{message:f}=l;return i([u,{name:c,message:f}],l)};return o},x0=(e,{json:t,lossy:n}={})=>{const r=[];return xD(!(t||n),!!t,new Map,r)(e),r},gc=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?v0(x0(e,t)):structuredClone(e):(e,t)=>v0(x0(e,t));function wD(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function bD(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function kD(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||wD,r=e.options.footnoteBackLabel||bD,i=e.options.footnoteLabel||"Footnotes",o=e.options.footnoteLabelTagName||"h2",l=e.options.footnoteLabelProperties||{className:["sr-only"]},u=[];let c=-1;for(;++c<e.footnoteOrder.length;){const f=e.footnoteById.get(e.footnoteOrder[c]);if(!f)continue;const h=e.all(f),p=String(f.identifier).toUpperCase(),v=Bo(p.toLowerCase());let y=0;const b=[],k=e.footnoteCounts.get(p);for(;k!==void 0&&++y<=k;){b.length>0&&b.push({type:"text",value:" "});let _=typeof n=="string"?n:n(c,y);typeof _=="string"&&(_={type:"text",value:_}),b.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+v+(y>1?"-"+y:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,y),className:["data-footnote-backref"]},children:Array.isArray(_)?_:[_]})}const E=h[h.length-1];if(E&&E.type==="element"&&E.tagName==="p"){const _=E.children[E.children.length-1];_&&_.type==="text"?_.value+=" ":E.children.push({type:"text",value:" "}),E.children.push(...b)}else h.push(...b);const C={type:"element",tagName:"li",properties:{id:t+"fn-"+v},children:e.wrap(h,!0)};e.patch(f,C),u.push(C)}if(u.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...gc(l),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(u,!0)},{type:"text",value:`
`}]}}const Vc=(function(e){if(e==null)return CD;if(typeof e=="function")return qc(e);if(typeof e=="object")return Array.isArray(e)?SD(e):ED(e);if(typeof e=="string")return _D(e);throw new Error("Expected function, string, or object as test")});function SD(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Vc(e[n]);return qc(r);function r(...i){let o=-1;for(;++o<t.length;)if(t[o].apply(this,i))return!0;return!1}}function ED(e){const t=e;return qc(n);function n(r){const i=r;let o;for(o in e)if(i[o]!==t[o])return!1;return!0}}function _D(e){return qc(t);function t(n){return n&&n.type===e}}function qc(e){return t;function t(n,r,i){return!!(jD(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function CD(){return!0}function jD(e){return e!==null&&typeof e=="object"&&"type"in e}const Kk=[],ND=!0,gp=!1,TD="skip";function Gk(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const o=Vc(i),l=r?-1:1;u(e,void 0,[])();function u(c,f,h){const p=c&&typeof c=="object"?c:{};if(typeof p.type=="string"){const y=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(v,"name",{value:"node ("+(c.type+(y?"<"+y+">":""))+")"})}return v;function v(){let y=Kk,b,k,E;if((!t||o(c,f,h[h.length-1]||void 0))&&(y=ID(n(c,h)),y[0]===gp))return y;if("children"in c&&c.children){const C=c;if(C.children&&y[0]!==TD)for(k=(r?C.children.length:-1)+l,E=h.concat(C);k>-1&&k<C.children.length;){const _=C.children[k];if(b=u(_,k,E)(),b[0]===gp)return b;k=typeof b[1]=="number"?b[1]:k+l}}return y}}}function ID(e){return Array.isArray(e)?e:typeof e=="number"?[ND,e]:e==null?Kk:[e]}function Yc(e,t,n,r){let i,o,l;typeof t=="function"&&typeof n!="function"?(o=void 0,l=t,i=n):(o=t,l=n,i=r),Gk(e,o,u,i);function u(c,f){const h=f[f.length-1],p=h?h.children.indexOf(c):void 0;return l(c,p,h)}}const yp={}.hasOwnProperty,PD={};function AD(e,t){const n=t||PD,r=new Map,i=new Map,o=new Map,l={...mD,...n.handlers},u={all:f,applyData:OD,definitionById:r,footnoteById:i,footnoteCounts:o,footnoteOrder:[],handlers:l,one:c,options:n,patch:RD,wrap:DD};return Yc(e,function(h){if(h.type==="definition"||h.type==="footnoteDefinition"){const p=h.type==="definition"?r:i,v=String(h.identifier).toUpperCase();p.has(v)||p.set(v,h)}}),u;function c(h,p){const v=h.type,y=u.handlers[v];if(yp.call(u.handlers,v)&&y)return y(u,h,p);if(u.options.passThrough&&u.options.passThrough.includes(v)){if("children"in h){const{children:k,...E}=h,C=gc(E);return C.children=u.all(h),C}return gc(h)}return(u.options.unknownHandler||MD)(u,h,p)}function f(h){const p=[];if("children"in h){const v=h.children;let y=-1;for(;++y<v.length;){const b=u.one(v[y],h);if(b){if(y&&v[y-1].type==="break"&&(!Array.isArray(b)&&b.type==="text"&&(b.value=w0(b.value)),!Array.isArray(b)&&b.type==="element")){const k=b.children[0];k&&k.type==="text"&&(k.value=w0(k.value))}Array.isArray(b)?p.push(...b):p.push(b)}}}return p}}function RD(e,t){e.position&&(t.position=bO(e))}function OD(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,o=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const l="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:l}}n.type==="element"&&o&&Object.assign(n.properties,gc(o)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function MD(e,t){const n=t.data||{},r="value"in t&&!(yp.call(n,"hProperties")||yp.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function DD(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function w0(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function b0(e,t){const n=AD(e,t),r=n.one(e,void 0),i=kD(n),o=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&o.children.push({type:"text",value:`
`},i),o}function LD(e,t){return e&&"run"in e?async function(n,r){const i=b0(n,{file:r,...t});await e.run(i,r)}:function(n,r){return b0(n,{file:r,...e||t})}}function k0(e){if(e)throw e}var dh,S0;function $D(){if(S0)return dh;S0=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(f){return typeof Array.isArray=="function"?Array.isArray(f):t.call(f)==="[object Array]"},o=function(f){if(!f||t.call(f)!=="[object Object]")return!1;var h=e.call(f,"constructor"),p=f.constructor&&f.constructor.prototype&&e.call(f.constructor.prototype,"isPrototypeOf");if(f.constructor&&!h&&!p)return!1;var v;for(v in f);return typeof v>"u"||e.call(f,v)},l=function(f,h){n&&h.name==="__proto__"?n(f,h.name,{enumerable:!0,configurable:!0,value:h.newValue,writable:!0}):f[h.name]=h.newValue},u=function(f,h){if(h==="__proto__")if(e.call(f,h)){if(r)return r(f,h).value}else return;return f[h]};return dh=function c(){var f,h,p,v,y,b,k=arguments[0],E=1,C=arguments.length,_=!1;for(typeof k=="boolean"&&(_=k,k=arguments[1]||{},E=2),(k==null||typeof k!="object"&&typeof k!="function")&&(k={});E<C;++E)if(f=arguments[E],f!=null)for(h in f)p=u(k,h),v=u(f,h),k!==v&&(_&&v&&(o(v)||(y=i(v)))?(y?(y=!1,b=p&&i(p)?p:[]):b=p&&o(p)?p:{},l(k,{name:h,newValue:c(_,b,v)})):typeof v<"u"&&l(k,{name:h,newValue:v}));return k},dh}var FD=$D();const fh=Ro(FD);function vp(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function zD(){const e=[],t={run:n,use:r};return t;function n(...i){let o=-1;const l=i.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);u(null,...i);function u(c,...f){const h=e[++o];let p=-1;if(c){l(c);return}for(;++p<i.length;)(f[p]===null||f[p]===void 0)&&(f[p]=i[p]);i=f,h?BD(h,u)(...f):l(null,...f)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function BD(e,t){let n;return r;function r(...l){const u=e.length>l.length;let c;u&&l.push(i);try{c=e.apply(this,l)}catch(f){const h=f;if(u&&n)throw h;return i(h)}u||(c&&c.then&&typeof c.then=="function"?c.then(o,i):c instanceof Error?i(c):o(c))}function i(l,...u){n||(n=!0,t(l,...u))}function o(l){i(null,l)}}const Rr={basename:UD,dirname:WD,extname:HD,join:VD,sep:"/"};function UD(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');gl(e);let n=0,r=-1,i=e.length,o;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(o){n=i+1;break}}else r<0&&(o=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let l=-1,u=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(o){n=i+1;break}}else l<0&&(o=!0,l=i+1),u>-1&&(e.codePointAt(i)===t.codePointAt(u--)?u<0&&(r=i):(u=-1,r=l));return n===r?r=l:r<0&&(r=e.length),e.slice(n,r)}function WD(e){if(gl(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function HD(e){gl(e);let t=e.length,n=-1,r=0,i=-1,o=0,l;for(;t--;){const u=e.codePointAt(t);if(u===47){if(l){r=t+1;break}continue}n<0&&(l=!0,n=t+1),u===46?i<0?i=t:o!==1&&(o=1):i>-1&&(o=-1)}return i<0||n<0||o===0||o===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function VD(...e){let t=-1,n;for(;++t<e.length;)gl(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":qD(n)}function qD(e){gl(e);const t=e.codePointAt(0)===47;let n=YD(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function YD(e,t){let n="",r=0,i=-1,o=0,l=-1,u,c;for(;++l<=e.length;){if(l<e.length)u=e.codePointAt(l);else{if(u===47)break;u=47}if(u===47){if(!(i===l-1||o===1))if(i!==l-1&&o===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),i=l,o=0;continue}}else if(n.length>0){n="",r=0,i=l,o=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,l):n=e.slice(i+1,l),r=l-i-1;i=l,o=0}else u===46&&o>-1?o++:o=-1}return n}function gl(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const KD={cwd:GD};function GD(){return"/"}function xp(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function JD(e){if(typeof e=="string")e=new URL(e);else if(!xp(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return QD(e)}function QD(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const hh=["history","path","basename","stem","extname","dirname"];class Jk{constructor(t){let n;t?xp(t)?n={path:t}:typeof t=="string"||XD(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":KD.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<hh.length;){const o=hh[r];o in n&&n[o]!==void 0&&n[o]!==null&&(this[o]=o==="history"?[...n[o]]:n[o])}let i;for(i in n)hh.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Rr.basename(this.path):void 0}set basename(t){mh(t,"basename"),ph(t,"basename"),this.path=Rr.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Rr.dirname(this.path):void 0}set dirname(t){E0(this.basename,"dirname"),this.path=Rr.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Rr.extname(this.path):void 0}set extname(t){if(ph(t,"extname"),E0(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Rr.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){xp(t)&&(t=JD(t)),mh(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Rr.basename(this.path,this.extname):void 0}set stem(t){mh(t,"stem"),ph(t,"stem"),this.path=Rr.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new vn(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function ph(e,t){if(e&&e.includes(Rr.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Rr.sep+"`")}function mh(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function E0(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function XD(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const ZD=(function(e){const r=this.constructor.prototype,i=r[e],o=function(){return i.apply(o,arguments)};return Object.setPrototypeOf(o,r),o}),eL={}.hasOwnProperty;class ym extends ZD{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=zD()}copy(){const t=new ym;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(fh(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(vh("data",this.frozen),this.namespace[t]=n,this):eL.call(this.namespace,t)&&this.namespace[t]||void 0:t?(vh("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=Fu(t),r=this.parser||this.Parser;return gh("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),gh("process",this.parser||this.Parser),yh("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(o,l){const u=Fu(t),c=r.parse(u);r.run(c,u,function(h,p,v){if(h||!p||!v)return f(h);const y=p,b=r.stringify(y,v);rL(b)?v.value=b:v.result=b,f(h,v)});function f(h,p){h||!p?l(h):o?o(p):n(void 0,p)}}}processSync(t){let n=!1,r;return this.freeze(),gh("processSync",this.parser||this.Parser),yh("processSync",this.compiler||this.Compiler),this.process(t,i),C0("processSync","process",n),r;function i(o,l){n=!0,k0(o),r=l}}run(t,n,r){_0(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?o(void 0,r):new Promise(o);function o(l,u){const c=Fu(n);i.run(t,c,f);function f(h,p,v){const y=p||t;h?u(h):l?l(y):r(void 0,y,v)}}}runSync(t,n){let r=!1,i;return this.run(t,n,o),C0("runSync","run",r),i;function o(l,u){k0(l),i=u,r=!0}}stringify(t,n){this.freeze();const r=Fu(n),i=this.compiler||this.Compiler;return yh("stringify",i),_0(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(vh("use",this.frozen),t!=null)if(typeof t=="function")c(t,n);else if(typeof t=="object")Array.isArray(t)?u(t):l(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function o(f){if(typeof f=="function")c(f,[]);else if(typeof f=="object")if(Array.isArray(f)){const[h,...p]=f;c(h,p)}else l(f);else throw new TypeError("Expected usable value, not `"+f+"`")}function l(f){if(!("plugins"in f)&&!("settings"in f))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");u(f.plugins),f.settings&&(i.settings=fh(!0,i.settings,f.settings))}function u(f){let h=-1;if(f!=null)if(Array.isArray(f))for(;++h<f.length;){const p=f[h];o(p)}else throw new TypeError("Expected a list of plugins, not `"+f+"`")}function c(f,h){let p=-1,v=-1;for(;++p<r.length;)if(r[p][0]===f){v=p;break}if(v===-1)r.push([f,...h]);else if(h.length>0){let[y,...b]=h;const k=r[v][1];vp(k)&&vp(y)&&(y=fh(!0,k,y)),r[v]=[f,y,...b]}}}}const tL=new ym().freeze();function gh(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function yh(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function vh(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function _0(e){if(!vp(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function C0(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Fu(e){return nL(e)?e:new Jk(e)}function nL(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function rL(e){return typeof e=="string"||iL(e)}function iL(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const sL="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",j0=[],N0={allowDangerousHtml:!0},oL=/^(https?|ircs?|mailto|xmpp)$/i,aL=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function lL(e){const t=uL(e),n=cL(e);return dL(t.runSync(t.parse(n),n),e)}function uL(e){const t=e.rehypePlugins||j0,n=e.remarkPlugins||j0,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...N0}:N0;return tL().use(W2).use(n).use(LD,r).use(t)}function cL(e){const t=e.children||"",n=new Jk;return typeof t=="string"&&(n.value=t),n}function dL(e,t){const n=t.allowedElements,r=t.allowElement,i=t.components,o=t.disallowedElements,l=t.skipHtml,u=t.unwrapDisallowed,c=t.urlTransform||fL;for(const h of aL)Object.hasOwn(t,h.from)&&(""+h.from+(h.to?"use `"+h.to+"` instead":"remove it")+sL+h.id,void 0);return t.className&&(e={type:"element",tagName:"div",properties:{className:t.className},children:e.type==="root"?e.children:[e]}),Yc(e,f),CO(e,{Fragment:m.Fragment,components:i,ignoreInvalidStyle:!0,jsx:m.jsx,jsxs:m.jsxs,passKeys:!0,passNode:!0});function f(h,p,v){if(h.type==="raw"&&v&&typeof p=="number")return l?v.children.splice(p,1):v.children[p]={type:"text",value:h.value},p;if(h.type==="element"){let y;for(y in lh)if(Object.hasOwn(lh,y)&&Object.hasOwn(h.properties,y)){const b=h.properties[y],k=lh[y];(k===null||k.includes(h.tagName))&&(h.properties[y]=c(String(b||""),y,h))}}if(h.type==="element"){let y=n?!n.includes(h.tagName):o?o.includes(h.tagName):!1;if(!y&&r&&typeof p=="number"&&(y=!r(h,p,v)),y&&v&&typeof p=="number")return u&&h.children?v.children.splice(p,1,...h.children):v.children.splice(p,1),p}}}function fL(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||n!==-1&&t>n||r!==-1&&t>r||oL.test(e.slice(0,t))?e:""}function T0(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(t);for(;i!==-1;)r++,i=n.indexOf(t,i+t.length);return r}function hL(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function pL(e,t,n){const i=Vc((n||{}).ignore||[]),o=mL(t);let l=-1;for(;++l<o.length;)Gk(e,"text",u);function u(f,h){let p=-1,v;for(;++p<h.length;){const y=h[p],b=v?v.children:void 0;if(i(y,b?b.indexOf(y):void 0,v))return;v=y}if(v)return c(f,h)}function c(f,h){const p=h[h.length-1],v=o[l][0],y=o[l][1];let b=0;const E=p.children.indexOf(f);let C=!1,_=[];v.lastIndex=0;let j=v.exec(f.value);for(;j;){const I=j.index,M={index:j.index,input:j.input,stack:[...h,f]};let A=y(...j,M);if(typeof A=="string"&&(A=A.length>0?{type:"text",value:A}:void 0),A===!1?v.lastIndex=I+1:(b!==I&&_.push({type:"text",value:f.value.slice(b,I)}),Array.isArray(A)?_.push(...A):A&&_.push(A),b=I+j[0].length,C=!0),!v.global)break;j=v.exec(f.value)}return C?(b<f.value.length&&_.push({type:"text",value:f.value.slice(b)}),p.children.splice(E,1,..._)):_=[f],E+_.length}}function mL(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const i=n[r];t.push([gL(i[0]),yL(i[1])])}return t}function gL(e){return typeof e=="string"?new RegExp(hL(e),"g"):e}function yL(e){return typeof e=="function"?e:function(){return e}}const xh="phrasing",wh=["autolink","link","image","label"];function vL(){return{transforms:[_L],enter:{literalAutolink:wL,literalAutolinkEmail:bh,literalAutolinkHttp:bh,literalAutolinkWww:bh},exit:{literalAutolink:EL,literalAutolinkEmail:SL,literalAutolinkHttp:bL,literalAutolinkWww:kL}}}function xL(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:xh,notInConstruct:wh},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:xh,notInConstruct:wh},{character:":",before:"[ps]",after:"\\/",inConstruct:xh,notInConstruct:wh}]}}function wL(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function bh(e){this.config.enter.autolinkProtocol.call(this,e)}function bL(e){this.config.exit.autolinkProtocol.call(this,e)}function kL(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function SL(e){this.config.exit.autolinkEmail.call(this,e)}function EL(e){this.exit(e)}function _L(e){pL(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,CL],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),jL]],{ignore:["link","linkReference"]})}function CL(e,t,n,r,i){let o="";if(!Qk(i)||(/^w/i.test(t)&&(n=t+n,t="",o="http://"),!NL(n)))return!1;const l=TL(n+r);if(!l[0])return!1;const u={type:"link",title:null,url:o+t+l[0],children:[{type:"text",value:t+l[0]}]};return l[1]?[u,{type:"text",value:l[1]}]:u}function jL(e,t,n,r){return!Qk(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function NL(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function TL(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const i=T0(e,"(");let o=T0(e,")");for(;r!==-1&&i>o;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),o++;return[e,n]}function Qk(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||ks(n)||Uc(n))&&(!t||n!==47)}Xk.peek=$L;function IL(){this.buffer()}function PL(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function AL(){this.buffer()}function RL(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function OL(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=wr(this.sliceSerialize(e)).toLowerCase(),n.label=t}function ML(e){this.exit(e)}function DL(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=wr(this.sliceSerialize(e)).toLowerCase(),n.label=t}function LL(e){this.exit(e)}function $L(){return"["}function Xk(e,t,n,r){const i=n.createTracker(r);let o=i.move("[^");const l=n.enter("footnoteReference"),u=n.enter("reference");return o+=i.move(n.safe(n.associationId(e),{after:"]",before:o})),u(),l(),o+=i.move("]"),o}function FL(){return{enter:{gfmFootnoteCallString:IL,gfmFootnoteCall:PL,gfmFootnoteDefinitionLabelString:AL,gfmFootnoteDefinition:RL},exit:{gfmFootnoteCallString:OL,gfmFootnoteCall:ML,gfmFootnoteDefinitionLabelString:DL,gfmFootnoteDefinition:LL}}}function zL(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:Xk},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,o,l){const u=o.createTracker(l);let c=u.move("[^");const f=o.enter("footnoteDefinition"),h=o.enter("label");return c+=u.move(o.safe(o.associationId(r),{before:c,after:"]"})),h(),c+=u.move("]:"),r.children&&r.children.length>0&&(u.shift(4),c+=u.move((t?`
`:" ")+o.indentLines(o.containerFlow(r,u.current()),t?Zk:BL))),f(),c}}function BL(e,t,n){return t===0?e:Zk(e,t,n)}function Zk(e,t,n){return(n?"":"    ")+e}const UL=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];e1.peek=YL;function WL(){return{canContainEols:["delete"],enter:{strikethrough:VL},exit:{strikethrough:qL}}}function HL(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:UL}],handlers:{delete:e1}}}function VL(e){this.enter({type:"delete",children:[]},e)}function qL(e){this.exit(e)}function e1(e,t,n,r){const i=n.createTracker(r),o=n.enter("strikethrough");let l=i.move("~~");return l+=n.containerPhrasing(e,{...i.current(),before:l,after:"~"}),l+=i.move("~~"),o(),l}function YL(){return"~"}function KL(e){return e.length}function GL(e,t){const n=t||{},r=(n.align||[]).concat(),i=n.stringLength||KL,o=[],l=[],u=[],c=[];let f=0,h=-1;for(;++h<e.length;){const k=[],E=[];let C=-1;for(e[h].length>f&&(f=e[h].length);++C<e[h].length;){const _=JL(e[h][C]);if(n.alignDelimiters!==!1){const j=i(_);E[C]=j,(c[C]===void 0||j>c[C])&&(c[C]=j)}k.push(_)}l[h]=k,u[h]=E}let p=-1;if(typeof r=="object"&&"length"in r)for(;++p<f;)o[p]=I0(r[p]);else{const k=I0(r);for(;++p<f;)o[p]=k}p=-1;const v=[],y=[];for(;++p<f;){const k=o[p];let E="",C="";k===99?(E=":",C=":"):k===108?E=":":k===114&&(C=":");let _=n.alignDelimiters===!1?1:Math.max(1,c[p]-E.length-C.length);const j=E+"-".repeat(_)+C;n.alignDelimiters!==!1&&(_=E.length+_+C.length,_>c[p]&&(c[p]=_),y[p]=_),v[p]=j}l.splice(1,0,v),u.splice(1,0,y),h=-1;const b=[];for(;++h<l.length;){const k=l[h],E=u[h];p=-1;const C=[];for(;++p<f;){const _=k[p]||"";let j="",I="";if(n.alignDelimiters!==!1){const M=c[p]-(E[p]||0),A=o[p];A===114?j=" ".repeat(M):A===99?M%2?(j=" ".repeat(M/2+.5),I=" ".repeat(M/2-.5)):(j=" ".repeat(M/2),I=j):I=" ".repeat(M)}n.delimiterStart!==!1&&!p&&C.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&_==="")&&(n.delimiterStart!==!1||p)&&C.push(" "),n.alignDelimiters!==!1&&C.push(j),C.push(_),n.alignDelimiters!==!1&&C.push(I),n.padding!==!1&&C.push(" "),(n.delimiterEnd!==!1||p!==f-1)&&C.push("|")}b.push(n.delimiterEnd===!1?C.join("").replace(/ +$/,""):C.join(""))}return b.join(`
`)}function JL(e){return e==null?"":String(e)}function I0(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function QL(e,t,n,r){const i=n.enter("blockquote"),o=n.createTracker(r);o.move("> "),o.shift(2);const l=n.indentLines(n.containerFlow(e,o.current()),XL);return i(),l}function XL(e,t,n){return">"+(n?"":" ")+e}function ZL(e,t){return P0(e,t.inConstruct,!0)&&!P0(e,t.notInConstruct,!1)}function P0(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function A0(e,t,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&ZL(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function e$(e,t){const n=String(e);let r=n.indexOf(t),i=r,o=0,l=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++o>l&&(l=o):o=1,i=r+t.length,r=n.indexOf(t,i);return l}function t$(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function n$(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function r$(e,t,n,r){const i=n$(n),o=e.value||"",l=i==="`"?"GraveAccent":"Tilde";if(t$(e,n)){const p=n.enter("codeIndented"),v=n.indentLines(o,i$);return p(),v}const u=n.createTracker(r),c=i.repeat(Math.max(e$(o,i)+1,3)),f=n.enter("codeFenced");let h=u.move(c);if(e.lang){const p=n.enter(`codeFencedLang${l}`);h+=u.move(n.safe(e.lang,{before:h,after:" ",encode:["`"],...u.current()})),p()}if(e.lang&&e.meta){const p=n.enter(`codeFencedMeta${l}`);h+=u.move(" "),h+=u.move(n.safe(e.meta,{before:h,after:`
`,encode:["`"],...u.current()})),p()}return h+=u.move(`
`),o&&(h+=u.move(o+`
`)),h+=u.move(c),f(),h}function i$(e,t,n){return(n?"":"    ")+e}function vm(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function s$(e,t,n,r){const i=vm(n),o=i==='"'?"Quote":"Apostrophe",l=n.enter("definition");let u=n.enter("label");const c=n.createTracker(r);let f=c.move("[");return f+=c.move(n.safe(n.associationId(e),{before:f,after:"]",...c.current()})),f+=c.move("]: "),u(),!e.url||/[\0- \u007F]/.test(e.url)?(u=n.enter("destinationLiteral"),f+=c.move("<"),f+=c.move(n.safe(e.url,{before:f,after:">",...c.current()})),f+=c.move(">")):(u=n.enter("destinationRaw"),f+=c.move(n.safe(e.url,{before:f,after:e.title?" ":`
`,...c.current()}))),u(),e.title&&(u=n.enter(`title${o}`),f+=c.move(" "+i),f+=c.move(n.safe(e.title,{before:f,after:i,...c.current()})),f+=c.move(i),u()),l(),f}function o$(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function rl(e){return"&#x"+e.toString(16).toUpperCase()+";"}function yc(e,t,n){const r=Po(e),i=Po(t);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}t1.peek=a$;function t1(e,t,n,r){const i=o$(n),o=n.enter("emphasis"),l=n.createTracker(r),u=l.move(i);let c=l.move(n.containerPhrasing(e,{after:i,before:u,...l.current()}));const f=c.charCodeAt(0),h=yc(r.before.charCodeAt(r.before.length-1),f,i);h.inside&&(c=rl(f)+c.slice(1));const p=c.charCodeAt(c.length-1),v=yc(r.after.charCodeAt(0),p,i);v.inside&&(c=c.slice(0,-1)+rl(p));const y=l.move(i);return o(),n.attentionEncodeSurroundingInfo={after:v.outside,before:h.outside},u+c+y}function a$(e,t,n){return n.options.emphasis||"*"}function l$(e,t){let n=!1;return Yc(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,gp}),!!((!e.depth||e.depth<3)&&cm(e)&&(t.options.setext||n))}function u$(e,t,n,r){const i=Math.max(Math.min(6,e.depth||1),1),o=n.createTracker(r);if(l$(e,n)){const h=n.enter("headingSetext"),p=n.enter("phrasing"),v=n.containerPhrasing(e,{...o.current(),before:`
`,after:`
`});return p(),h(),v+`
`+(i===1?"=":"-").repeat(v.length-(Math.max(v.lastIndexOf("\r"),v.lastIndexOf(`
`))+1))}const l="#".repeat(i),u=n.enter("headingAtx"),c=n.enter("phrasing");o.move(l+" ");let f=n.containerPhrasing(e,{before:"# ",after:`
`,...o.current()});return/^[\t ]/.test(f)&&(f=rl(f.charCodeAt(0))+f.slice(1)),f=f?l+" "+f:l,n.options.closeAtx&&(f+=" "+l),c(),u(),f}n1.peek=c$;function n1(e){return e.value||""}function c$(){return"<"}r1.peek=d$;function r1(e,t,n,r){const i=vm(n),o=i==='"'?"Quote":"Apostrophe",l=n.enter("image");let u=n.enter("label");const c=n.createTracker(r);let f=c.move("![");return f+=c.move(n.safe(e.alt,{before:f,after:"]",...c.current()})),f+=c.move("]("),u(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(u=n.enter("destinationLiteral"),f+=c.move("<"),f+=c.move(n.safe(e.url,{before:f,after:">",...c.current()})),f+=c.move(">")):(u=n.enter("destinationRaw"),f+=c.move(n.safe(e.url,{before:f,after:e.title?" ":")",...c.current()}))),u(),e.title&&(u=n.enter(`title${o}`),f+=c.move(" "+i),f+=c.move(n.safe(e.title,{before:f,after:i,...c.current()})),f+=c.move(i),u()),f+=c.move(")"),l(),f}function d$(){return"!"}i1.peek=f$;function i1(e,t,n,r){const i=e.referenceType,o=n.enter("imageReference");let l=n.enter("label");const u=n.createTracker(r);let c=u.move("![");const f=n.safe(e.alt,{before:c,after:"]",...u.current()});c+=u.move(f+"]["),l();const h=n.stack;n.stack=[],l=n.enter("reference");const p=n.safe(n.associationId(e),{before:c,after:"]",...u.current()});return l(),n.stack=h,o(),i==="full"||!f||f!==p?c+=u.move(p+"]"):i==="shortcut"?c=c.slice(0,-1):c+=u.move("]"),c}function f$(){return"!"}s1.peek=h$;function s1(e,t,n){let r=e.value||"",i="`",o=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++o<n.unsafe.length;){const l=n.unsafe[o],u=n.compilePattern(l);let c;if(l.atBreak)for(;c=u.exec(r);){let f=c.index;r.charCodeAt(f)===10&&r.charCodeAt(f-1)===13&&f--,r=r.slice(0,f)+" "+r.slice(c.index+1)}}return i+r+i}function h$(){return"`"}function o1(e,t){const n=cm(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}a1.peek=p$;function a1(e,t,n,r){const i=vm(n),o=i==='"'?"Quote":"Apostrophe",l=n.createTracker(r);let u,c;if(o1(e,n)){const h=n.stack;n.stack=[],u=n.enter("autolink");let p=l.move("<");return p+=l.move(n.containerPhrasing(e,{before:p,after:">",...l.current()})),p+=l.move(">"),u(),n.stack=h,p}u=n.enter("link"),c=n.enter("label");let f=l.move("[");return f+=l.move(n.containerPhrasing(e,{before:f,after:"](",...l.current()})),f+=l.move("]("),c(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(c=n.enter("destinationLiteral"),f+=l.move("<"),f+=l.move(n.safe(e.url,{before:f,after:">",...l.current()})),f+=l.move(">")):(c=n.enter("destinationRaw"),f+=l.move(n.safe(e.url,{before:f,after:e.title?" ":")",...l.current()}))),c(),e.title&&(c=n.enter(`title${o}`),f+=l.move(" "+i),f+=l.move(n.safe(e.title,{before:f,after:i,...l.current()})),f+=l.move(i),c()),f+=l.move(")"),u(),f}function p$(e,t,n){return o1(e,n)?"<":"["}l1.peek=m$;function l1(e,t,n,r){const i=e.referenceType,o=n.enter("linkReference");let l=n.enter("label");const u=n.createTracker(r);let c=u.move("[");const f=n.containerPhrasing(e,{before:c,after:"]",...u.current()});c+=u.move(f+"]["),l();const h=n.stack;n.stack=[],l=n.enter("reference");const p=n.safe(n.associationId(e),{before:c,after:"]",...u.current()});return l(),n.stack=h,o(),i==="full"||!f||f!==p?c+=u.move(p+"]"):i==="shortcut"?c=c.slice(0,-1):c+=u.move("]"),c}function m$(){return"["}function xm(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function g$(e){const t=xm(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function y$(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function u1(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function v$(e,t,n,r){const i=n.enter("list"),o=n.bulletCurrent;let l=e.ordered?y$(n):xm(n);const u=e.ordered?l==="."?")":".":g$(n);let c=t&&n.bulletLastUsed?l===n.bulletLastUsed:!1;if(!e.ordered){const h=e.children?e.children[0]:void 0;if((l==="*"||l==="-")&&h&&(!h.children||!h.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),u1(n)===l&&h){let p=-1;for(;++p<e.children.length;){const v=e.children[p];if(v&&v.type==="listItem"&&v.children&&v.children[0]&&v.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(l=u),n.bulletCurrent=l;const f=n.containerFlow(e,r);return n.bulletLastUsed=l,n.bulletCurrent=o,i(),f}function x$(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function w$(e,t,n,r){const i=x$(n);let o=n.bulletCurrent||xm(n);t&&t.type==="list"&&t.ordered&&(o=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+o);let l=o.length+1;(i==="tab"||i==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(l=Math.ceil(l/4)*4);const u=n.createTracker(r);u.move(o+" ".repeat(l-o.length)),u.shift(l);const c=n.enter("listItem"),f=n.indentLines(n.containerFlow(e,u.current()),h);return c(),f;function h(p,v,y){return v?(y?"":" ".repeat(l))+p:(y?o:o+" ".repeat(l-o.length))+p}}function b$(e,t,n,r){const i=n.enter("paragraph"),o=n.enter("phrasing"),l=n.containerPhrasing(e,r);return o(),i(),l}const k$=Vc(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function S$(e,t,n,r){return(e.children.some(function(l){return k$(l)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function E$(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}c1.peek=_$;function c1(e,t,n,r){const i=E$(n),o=n.enter("strong"),l=n.createTracker(r),u=l.move(i+i);let c=l.move(n.containerPhrasing(e,{after:i,before:u,...l.current()}));const f=c.charCodeAt(0),h=yc(r.before.charCodeAt(r.before.length-1),f,i);h.inside&&(c=rl(f)+c.slice(1));const p=c.charCodeAt(c.length-1),v=yc(r.after.charCodeAt(0),p,i);v.inside&&(c=c.slice(0,-1)+rl(p));const y=l.move(i+i);return o(),n.attentionEncodeSurroundingInfo={after:v.outside,before:h.outside},u+c+y}function _$(e,t,n){return n.options.strong||"*"}function C$(e,t,n,r){return n.safe(e.value,r)}function j$(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function N$(e,t,n){const r=(u1(n)+(n.options.ruleSpaces?" ":"")).repeat(j$(n));return n.options.ruleSpaces?r.slice(0,-1):r}const d1={blockquote:QL,break:A0,code:r$,definition:s$,emphasis:t1,hardBreak:A0,heading:u$,html:n1,image:r1,imageReference:i1,inlineCode:s1,link:a1,linkReference:l1,list:v$,listItem:w$,paragraph:b$,root:S$,strong:c1,text:C$,thematicBreak:N$};function T$(){return{enter:{table:I$,tableData:R0,tableHeader:R0,tableRow:A$},exit:{codeText:R$,table:P$,tableData:kh,tableHeader:kh,tableRow:kh}}}function I$(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function P$(e){this.exit(e),this.data.inTable=void 0}function A$(e){this.enter({type:"tableRow",children:[]},e)}function kh(e){this.exit(e)}function R0(e){this.enter({type:"tableCell",children:[]},e)}function R$(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,O$));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function O$(e,t){return t==="|"?t:e}function M$(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,i=t.stringLength,o=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:v,table:l,tableCell:c,tableRow:u}};function l(y,b,k,E){return f(h(y,k,E),y.align)}function u(y,b,k,E){const C=p(y,k,E),_=f([C]);return _.slice(0,_.indexOf(`
`))}function c(y,b,k,E){const C=k.enter("tableCell"),_=k.enter("phrasing"),j=k.containerPhrasing(y,{...E,before:o,after:o});return _(),C(),j}function f(y,b){return GL(y,{align:b,alignDelimiters:r,padding:n,stringLength:i})}function h(y,b,k){const E=y.children;let C=-1;const _=[],j=b.enter("table");for(;++C<E.length;)_[C]=p(E[C],b,k);return j(),_}function p(y,b,k){const E=y.children;let C=-1;const _=[],j=b.enter("tableRow");for(;++C<E.length;)_[C]=c(E[C],y,b,k);return j(),_}function v(y,b,k){let E=d1.inlineCode(y,b,k);return k.stack.includes("tableCell")&&(E=E.replace(/\|/g,"\\$&")),E}}function D$(){return{exit:{taskListCheckValueChecked:O0,taskListCheckValueUnchecked:O0,paragraph:$$}}}function L$(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:F$}}}function O0(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function $$(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=t.children;let o=-1,l;for(;++o<i.length;){const u=i[o];if(u.type==="paragraph"){l=u;break}}l===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function F$(e,t,n,r){const i=e.children[0],o=typeof e.checked=="boolean"&&i&&i.type==="paragraph",l="["+(e.checked?"x":" ")+"] ",u=n.createTracker(r);o&&u.move(l);let c=d1.listItem(e,t,n,{...r,...u.current()});return o&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,f)),c;function f(h){return h+l}}function z$(){return[vL(),FL(),WL(),T$(),D$()]}function B$(e){return{extensions:[xL(),zL(e),HL(),M$(e),L$()]}}const U$={tokenize:K$,partial:!0},f1={tokenize:G$,partial:!0},h1={tokenize:J$,partial:!0},p1={tokenize:Q$,partial:!0},W$={tokenize:X$,partial:!0},m1={name:"wwwAutolink",tokenize:q$,previous:y1},g1={name:"protocolAutolink",tokenize:Y$,previous:v1},ii={name:"emailAutolink",tokenize:V$,previous:x1},Ur={};function H$(){return{text:Ur}}let os=48;for(;os<123;)Ur[os]=ii,os++,os===58?os=65:os===91&&(os=97);Ur[43]=ii;Ur[45]=ii;Ur[46]=ii;Ur[95]=ii;Ur[72]=[ii,g1];Ur[104]=[ii,g1];Ur[87]=[ii,m1];Ur[119]=[ii,m1];function V$(e,t,n){const r=this;let i,o;return l;function l(p){return!wp(p)||!x1.call(r,r.previous)||wm(r.events)?n(p):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),u(p))}function u(p){return wp(p)?(e.consume(p),u):p===64?(e.consume(p),c):n(p)}function c(p){return p===46?e.check(W$,h,f)(p):p===45||p===95||yn(p)?(o=!0,e.consume(p),c):h(p)}function f(p){return e.consume(p),i=!0,c}function h(p){return o&&i&&kn(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(p)):n(p)}}function q$(e,t,n){const r=this;return i;function i(l){return l!==87&&l!==119||!y1.call(r,r.previous)||wm(r.events)?n(l):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(U$,e.attempt(f1,e.attempt(h1,o),n),n)(l))}function o(l){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(l)}}function Y$(e,t,n){const r=this;let i="",o=!1;return l;function l(p){return(p===72||p===104)&&v1.call(r,r.previous)&&!wm(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),i+=String.fromCodePoint(p),e.consume(p),u):n(p)}function u(p){if(kn(p)&&i.length<5)return i+=String.fromCodePoint(p),e.consume(p),u;if(p===58){const v=i.toLowerCase();if(v==="http"||v==="https")return e.consume(p),c}return n(p)}function c(p){return p===47?(e.consume(p),o?f:(o=!0,c)):n(p)}function f(p){return p===null||pc(p)||kt(p)||ks(p)||Uc(p)?n(p):e.attempt(f1,e.attempt(h1,h),n)(p)}function h(p){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(p)}}function K$(e,t,n){let r=0;return i;function i(l){return(l===87||l===119)&&r<3?(r++,e.consume(l),i):l===46&&r===3?(e.consume(l),o):n(l)}function o(l){return l===null?n(l):t(l)}}function G$(e,t,n){let r,i,o;return l;function l(f){return f===46||f===95?e.check(p1,c,u)(f):f===null||kt(f)||ks(f)||f!==45&&Uc(f)?c(f):(o=!0,e.consume(f),l)}function u(f){return f===95?r=!0:(i=r,r=void 0),e.consume(f),l}function c(f){return i||r||!o?n(f):t(f)}}function J$(e,t){let n=0,r=0;return i;function i(l){return l===40?(n++,e.consume(l),i):l===41&&r<n?o(l):l===33||l===34||l===38||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===60||l===63||l===93||l===95||l===126?e.check(p1,t,o)(l):l===null||kt(l)||ks(l)?t(l):(e.consume(l),i)}function o(l){return l===41&&r++,e.consume(l),i}}function Q$(e,t,n){return r;function r(u){return u===33||u===34||u===39||u===41||u===42||u===44||u===46||u===58||u===59||u===63||u===95||u===126?(e.consume(u),r):u===38?(e.consume(u),o):u===93?(e.consume(u),i):u===60||u===null||kt(u)||ks(u)?t(u):n(u)}function i(u){return u===null||u===40||u===91||kt(u)||ks(u)?t(u):r(u)}function o(u){return kn(u)?l(u):n(u)}function l(u){return u===59?(e.consume(u),r):kn(u)?(e.consume(u),l):n(u)}}function X$(e,t,n){return r;function r(o){return e.consume(o),i}function i(o){return yn(o)?n(o):t(o)}}function y1(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||kt(e)}function v1(e){return!kn(e)}function x1(e){return!(e===47||wp(e))}function wp(e){return e===43||e===45||e===46||e===95||yn(e)}function wm(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const Z$={tokenize:a4,partial:!0};function e4(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:i4,continuation:{tokenize:s4},exit:o4}},text:{91:{name:"gfmFootnoteCall",tokenize:r4},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:t4,resolveTo:n4}}}}function t4(e,t,n){const r=this;let i=r.events.length;const o=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let l;for(;i--;){const c=r.events[i][1];if(c.type==="labelImage"){l=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return u;function u(c){if(!l||!l._balanced)return n(c);const f=wr(r.sliceSerialize({start:l.end,end:r.now()}));return f.codePointAt(0)!==94||!o.includes(f.slice(1))?n(c):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(c),e.exit("gfmFootnoteCallLabelMarker"),t(c))}}function n4(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const o={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},l={type:"chunkString",contentType:"string",start:Object.assign({},o.start),end:Object.assign({},o.end)},u=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",i,t],["exit",i,t],["enter",o,t],["enter",l,t],["exit",l,t],["exit",o,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...u),e}function r4(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o=0,l;return u;function u(p){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(p),e.exit("gfmFootnoteCallLabelMarker"),c}function c(p){return p!==94?n(p):(e.enter("gfmFootnoteCallMarker"),e.consume(p),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",f)}function f(p){if(o>999||p===93&&!l||p===null||p===91||kt(p))return n(p);if(p===93){e.exit("chunkString");const v=e.exit("gfmFootnoteCallString");return i.includes(wr(r.sliceSerialize(v)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(p),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(p)}return kt(p)||(l=!0),o++,e.consume(p),p===92?h:f}function h(p){return p===91||p===92||p===93?(e.consume(p),o++,f):f(p)}}function i4(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o,l=0,u;return c;function c(b){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(b),e.exit("gfmFootnoteDefinitionLabelMarker"),f}function f(b){return b===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(b),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",h):n(b)}function h(b){if(l>999||b===93&&!u||b===null||b===91||kt(b))return n(b);if(b===93){e.exit("chunkString");const k=e.exit("gfmFootnoteDefinitionLabelString");return o=wr(r.sliceSerialize(k)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(b),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),v}return kt(b)||(u=!0),l++,e.consume(b),b===92?p:h}function p(b){return b===91||b===92||b===93?(e.consume(b),l++,h):h(b)}function v(b){return b===58?(e.enter("definitionMarker"),e.consume(b),e.exit("definitionMarker"),i.includes(o)||i.push(o),ft(e,y,"gfmFootnoteDefinitionWhitespace")):n(b)}function y(b){return t(b)}}function s4(e,t,n){return e.check(ml,t,e.attempt(Z$,t,n))}function o4(e){e.exit("gfmFootnoteDefinition")}function a4(e,t,n){const r=this;return ft(e,i,"gfmFootnoteDefinitionIndent",5);function i(o){const l=r.events[r.events.length-1];return l&&l[1].type==="gfmFootnoteDefinitionIndent"&&l[2].sliceSerialize(l[1],!0).length===4?t(o):n(o)}}function l4(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:o,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(l,u){let c=-1;for(;++c<l.length;)if(l[c][0]==="enter"&&l[c][1].type==="strikethroughSequenceTemporary"&&l[c][1]._close){let f=c;for(;f--;)if(l[f][0]==="exit"&&l[f][1].type==="strikethroughSequenceTemporary"&&l[f][1]._open&&l[c][1].end.offset-l[c][1].start.offset===l[f][1].end.offset-l[f][1].start.offset){l[c][1].type="strikethroughSequence",l[f][1].type="strikethroughSequence";const h={type:"strikethrough",start:Object.assign({},l[f][1].start),end:Object.assign({},l[c][1].end)},p={type:"strikethroughText",start:Object.assign({},l[f][1].end),end:Object.assign({},l[c][1].start)},v=[["enter",h,u],["enter",l[f][1],u],["exit",l[f][1],u],["enter",p,u]],y=u.parser.constructs.insideSpan.null;y&&Kn(v,v.length,0,Wc(y,l.slice(f+1,c),u)),Kn(v,v.length,0,[["exit",p,u],["enter",l[c][1],u],["exit",l[c][1],u],["exit",h,u]]),Kn(l,f-1,c-f+3,v),c=f+v.length-2;break}}for(c=-1;++c<l.length;)l[c][1].type==="strikethroughSequenceTemporary"&&(l[c][1].type="data");return l}function o(l,u,c){const f=this.previous,h=this.events;let p=0;return v;function v(b){return f===126&&h[h.length-1][1].type!=="characterEscape"?c(b):(l.enter("strikethroughSequenceTemporary"),y(b))}function y(b){const k=Po(f);if(b===126)return p>1?c(b):(l.consume(b),p++,y);if(p<2&&!n)return c(b);const E=l.exit("strikethroughSequenceTemporary"),C=Po(b);return E._open=!C||C===2&&!!k,E._close=!k||k===2&&!!C,u(b)}}}class u4{constructor(){this.map=[]}add(t,n,r){c4(this,t,n,r)}consume(t){if(this.map.sort(function(o,l){return o[0]-l[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let i=r.pop();for(;i;){for(const o of i)t.push(o);i=r.pop()}this.map.length=0}}function c4(e,t,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<e.map.length;){if(e.map[i][0]===t){e.map[i][1]+=n,e.map[i][2].push(...r);return}i+=1}e.map.push([t,n,r])}}function d4(e,t){let n=!1;const r=[];for(;t<e.length;){const i=e[t];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const o=r.length-1;r[o]=r[o]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function f4(){return{flow:{null:{name:"table",tokenize:h4,resolveAll:p4}}}}function h4(e,t,n){const r=this;let i=0,o=0,l;return u;function u(O){let D=r.events.length-1;for(;D>-1;){const Y=r.events[D][1].type;if(Y==="lineEnding"||Y==="linePrefix")D--;else break}const ne=D>-1?r.events[D][1].type:null,W=ne==="tableHead"||ne==="tableRow"?A:c;return W===A&&r.parser.lazy[r.now().line]?n(O):W(O)}function c(O){return e.enter("tableHead"),e.enter("tableRow"),f(O)}function f(O){return O===124||(l=!0,o+=1),h(O)}function h(O){return O===null?n(O):Ge(O)?o>1?(o=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(O),e.exit("lineEnding"),y):n(O):ct(O)?ft(e,h,"whitespace")(O):(o+=1,l&&(l=!1,i+=1),O===124?(e.enter("tableCellDivider"),e.consume(O),e.exit("tableCellDivider"),l=!0,h):(e.enter("data"),p(O)))}function p(O){return O===null||O===124||kt(O)?(e.exit("data"),h(O)):(e.consume(O),O===92?v:p)}function v(O){return O===92||O===124?(e.consume(O),p):p(O)}function y(O){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(O):(e.enter("tableDelimiterRow"),l=!1,ct(O)?ft(e,b,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(O):b(O))}function b(O){return O===45||O===58?E(O):O===124?(l=!0,e.enter("tableCellDivider"),e.consume(O),e.exit("tableCellDivider"),k):M(O)}function k(O){return ct(O)?ft(e,E,"whitespace")(O):E(O)}function E(O){return O===58?(o+=1,l=!0,e.enter("tableDelimiterMarker"),e.consume(O),e.exit("tableDelimiterMarker"),C):O===45?(o+=1,C(O)):O===null||Ge(O)?I(O):M(O)}function C(O){return O===45?(e.enter("tableDelimiterFiller"),_(O)):M(O)}function _(O){return O===45?(e.consume(O),_):O===58?(l=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(O),e.exit("tableDelimiterMarker"),j):(e.exit("tableDelimiterFiller"),j(O))}function j(O){return ct(O)?ft(e,I,"whitespace")(O):I(O)}function I(O){return O===124?b(O):O===null||Ge(O)?!l||i!==o?M(O):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(O)):M(O)}function M(O){return n(O)}function A(O){return e.enter("tableRow"),B(O)}function B(O){return O===124?(e.enter("tableCellDivider"),e.consume(O),e.exit("tableCellDivider"),B):O===null||Ge(O)?(e.exit("tableRow"),t(O)):ct(O)?ft(e,B,"whitespace")(O):(e.enter("data"),te(O))}function te(O){return O===null||O===124||kt(O)?(e.exit("data"),B(O)):(e.consume(O),O===92?H:te)}function H(O){return O===92||O===124?(e.consume(O),te):te(O)}}function p4(e,t){let n=-1,r=!0,i=0,o=[0,0,0,0],l=[0,0,0,0],u=!1,c=0,f,h,p;const v=new u4;for(;++n<e.length;){const y=e[n],b=y[1];y[0]==="enter"?b.type==="tableHead"?(u=!1,c!==0&&(M0(v,t,c,f,h),h=void 0,c=0),f={type:"table",start:Object.assign({},b.start),end:Object.assign({},b.end)},v.add(n,0,[["enter",f,t]])):b.type==="tableRow"||b.type==="tableDelimiterRow"?(r=!0,p=void 0,o=[0,0,0,0],l=[0,n+1,0,0],u&&(u=!1,h={type:"tableBody",start:Object.assign({},b.start),end:Object.assign({},b.end)},v.add(n,0,[["enter",h,t]])),i=b.type==="tableDelimiterRow"?2:h?3:1):i&&(b.type==="data"||b.type==="tableDelimiterMarker"||b.type==="tableDelimiterFiller")?(r=!1,l[2]===0&&(o[1]!==0&&(l[0]=l[1],p=zu(v,t,o,i,void 0,p),o=[0,0,0,0]),l[2]=n)):b.type==="tableCellDivider"&&(r?r=!1:(o[1]!==0&&(l[0]=l[1],p=zu(v,t,o,i,void 0,p)),o=l,l=[o[1],n,0,0])):b.type==="tableHead"?(u=!0,c=n):b.type==="tableRow"||b.type==="tableDelimiterRow"?(c=n,o[1]!==0?(l[0]=l[1],p=zu(v,t,o,i,n,p)):l[1]!==0&&(p=zu(v,t,l,i,n,p)),i=0):i&&(b.type==="data"||b.type==="tableDelimiterMarker"||b.type==="tableDelimiterFiller")&&(l[3]=n)}for(c!==0&&M0(v,t,c,f,h),v.consume(t.events),n=-1;++n<t.events.length;){const y=t.events[n];y[0]==="enter"&&y[1].type==="table"&&(y[1]._align=d4(t.events,n))}return e}function zu(e,t,n,r,i,o){const l=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",u="tableContent";n[0]!==0&&(o.end=Object.assign({},mo(t.events,n[0])),e.add(n[0],0,[["exit",o,t]]));const c=mo(t.events,n[1]);if(o={type:l,start:Object.assign({},c),end:Object.assign({},c)},e.add(n[1],0,[["enter",o,t]]),n[2]!==0){const f=mo(t.events,n[2]),h=mo(t.events,n[3]),p={type:u,start:Object.assign({},f),end:Object.assign({},h)};if(e.add(n[2],0,[["enter",p,t]]),r!==2){const v=t.events[n[2]],y=t.events[n[3]];if(v[1].end=Object.assign({},y[1].end),v[1].type="chunkText",v[1].contentType="text",n[3]>n[2]+1){const b=n[2]+1,k=n[3]-n[2]-1;e.add(b,k,[])}}e.add(n[3]+1,0,[["exit",p,t]])}return i!==void 0&&(o.end=Object.assign({},mo(t.events,i)),e.add(i,0,[["exit",o,t]]),o=void 0),o}function M0(e,t,n,r,i){const o=[],l=mo(t.events,n);i&&(i.end=Object.assign({},l),o.push(["exit",i,t])),r.end=Object.assign({},l),o.push(["exit",r,t]),e.add(n+1,0,o)}function mo(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const m4={name:"tasklistCheck",tokenize:y4};function g4(){return{text:{91:m4}}}function y4(e,t,n){const r=this;return i;function i(c){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(c):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),o)}function o(c){return kt(c)?(e.enter("taskListCheckValueUnchecked"),e.consume(c),e.exit("taskListCheckValueUnchecked"),l):c===88||c===120?(e.enter("taskListCheckValueChecked"),e.consume(c),e.exit("taskListCheckValueChecked"),l):n(c)}function l(c){return c===93?(e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),u):n(c)}function u(c){return Ge(c)?t(c):ct(c)?e.check({tokenize:v4},t,n)(c):n(c)}}function v4(e,t,n){return ft(e,r,"whitespace");function r(i){return i===null?n(i):t(i)}}function x4(e){return Ik([H$(),e4(),l4(e),f4(),g4()])}const w4={};function b4(e){const t=this,n=e||w4,r=t.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),o=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),l=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(x4(n)),o.push(z$()),l.push(B$(n))}const k4=e=>e!=null;function S4(){const e=Ne(t=>t.works);return w.useMemo(()=>{const t=new Map;e.forEach(o=>{var c;const l=(c=o.name)==null?void 0:c.trim();if(!l)return;const u=t.get(l)??[];u.push(o),t.set(l,u)});const n=new Map,r=new Map;t.forEach((o,l)=>{o.length===1?n.set(l,o[0]):o.length>1&&r.set(l,o.filter(k4))});const i=Array.from(n.entries()).map(([o,l])=>({name:o,work:l}));return i.sort((o,l)=>l.name.length-o.name.length||o.name.localeCompare(l.name,"es")),{uniqueByName:n,duplicates:r,entries:i}},[e])}const E4=new RegExp("\\p{L}|\\p{N}","u"),D0=e=>e?E4.test(e):!1,_4=(e,t,n)=>{const r=t===0?void 0:e[t-1],i=n>=e.length?void 0:e[n];return!D0(r)&&!D0(i)},C4=(e,t)=>{const n=[];t.forEach(o=>{let l=0;for(;l<e.length;){const u=e.indexOf(o.name,l);if(u===-1)break;const c=u+o.name.length;_4(e,u,c)&&n.push({start:u,end:c,entry:o}),l=u+o.name.length}}),n.sort((o,l)=>o.start!==l.start?o.start-l.start:l.entry.name.length-o.entry.name.length);const r=[];let i=-1;return n.forEach(o=>{o.start<i||(r.push(o),i=o.end)}),r},j4=e=>e?new Set(["link","linkReference","definition","inlineCode","code"]).has(e.type):!0,N4=e=>{const t=(e==null?void 0:e.entries)??[];return t.length===0?()=>{}:n=>{Yc(n,"text",(r,i,o)=>{if(j4(o)||typeof i!="number"||!o)return;const u=r.value;if(!u)return;const c=C4(u,t);if(c.length===0)return;const f=[];let h=0;c.forEach(p=>{p.start>h&&f.push({type:"text",value:u.slice(h,p.start)}),f.push({type:"link",title:null,url:p.entry.href,children:[{type:"text",value:p.entry.name}]}),h=p.end}),h<u.length&&f.push({type:"text",value:u.slice(h)}),o.children.splice(i,1,...f)})}},T4=e=>{var f,h,p;const t="/sport-planner/".replace(/\/$/,""),r=`${t?`${t}/`:"/"}#/`,i=((f=e.href)==null?void 0:f.startsWith("#/"))??!1,o=((h=e.href)==null?void 0:h.startsWith(r))??!1,l=(((p=e.href)==null?void 0:p.startsWith("/"))??!1)||i||o,u=l?e.rel:e.rel??"noreferrer",c=l?e.target:e.target??"_blank";return m.jsx("a",{...e,className:"text-sky-300 underline decoration-dotted underline-offset-4 hover:text-sky-200",target:c,rel:u})},I4=e=>m.jsx("ul",{...e,className:ze("my-2 list-disc space-y-1 pl-6",e.className)}),P4=e=>m.jsx("ol",{...e,className:ze("my-2 list-decimal space-y-1 pl-6",e.className)}),A4=e=>m.jsx("li",{...e,className:ze("leading-relaxed",e.className)});function R4(e){const t=e.trim(),n=t.match(/^(["'])(.*)(["'])$/s);return n?n[2].trim():t}function O4(e){var l;const n=R4(e.trim()).match(/^\[!([^\]]+)\]([+-])?\s*(.*)$/i);if(!n)return null;const r=n[1].toLowerCase(),o=(((l=n[3])==null?void 0:l.trim())??"")||r;return{type:r,title:o}}function w1(e){return typeof e=="object"&&e!==null&&"props"in e&&"type"in e}function bp(e){return e==null||typeof e=="boolean"?"":typeof e=="string"||typeof e=="number"?String(e):Array.isArray(e)?e.map(bp).join(""):w1(e)?bp(e.props.children):""}const L0={danger:{icon:"",containerClassName:"border-rose-500/25 bg-rose-500/10",titleClassName:"text-rose-200"},warning:{icon:"",containerClassName:"border-amber-500/25 bg-amber-500/10",titleClassName:"text-amber-200"},info:{icon:"",containerClassName:"border-sky-500/25 bg-sky-500/10",titleClassName:"text-sky-200"},note:{icon:"",containerClassName:"border-indigo-500/25 bg-indigo-500/10",titleClassName:"text-indigo-200"},tip:{icon:"",containerClassName:"border-emerald-500/25 bg-emerald-500/10",titleClassName:"text-emerald-200"}},M4=e=>{const{node:t,children:n,...r}=e,i=Array.isArray(n)?n:[n],o=i.findIndex(p=>w1(p)&&p.type==="p"),l=o>=0?i[o]:void 0,u=bp(l).trim(),c=O4(u);if(!c)return m.jsx("blockquote",{...r,children:n});const f=L0[c.type]??L0.info,h=i.filter((p,v)=>v!==o);return m.jsxs("aside",{className:ze("my-4 rounded-2xl border p-5",f.containerClassName),children:[m.jsxs("div",{className:ze("flex items-center gap-2 text-lg font-semibold",f.titleClassName),children:[m.jsx("span",{"aria-hidden":"true",children:f.icon}),m.jsx("span",{children:c.title})]}),m.jsx("div",{className:"mt-3",children:h})]})},D4={a:T4,blockquote:M4,ul:I4,ol:P4,li:A4};function Ao({content:e,enableWorkLinks:t=!1}){const{entries:n}=S4(),r=w.useMemo(()=>{if(!t||n.length===0)return null;const o="/sport-planner/".replace(/\/$/,""),u=`${o?`${o}/`:"/"}#/catalog`;return{entries:n.map(({name:c,work:f})=>({name:c,href:`${u}?workId=${encodeURIComponent(f.id)}`}))}},[t,n]),i=w.useMemo(()=>{const o=[b4];return r&&o.push([N4,r]),o},[r]);return e?m.jsx("div",{className:"prose prose-invert max-w-none prose-headings:font-display prose-p:leading-relaxed prose-strong:text-white prose-a:text-sky-300",children:m.jsx(lL,{remarkPlugins:i,components:D4,children:e})}):null}function L4(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return w.useMemo(()=>r=>{t.forEach(i=>i(r))},t)}const Kc=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Uo(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function bm(e){return"nodeType"in e}function Ln(e){var t,n;return e?Uo(e)?e:bm(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function km(e){const{Document:t}=Ln(e);return e instanceof t}function yl(e){return Uo(e)?!1:e instanceof Ln(e).HTMLElement}function b1(e){return e instanceof Ln(e).SVGElement}function Wo(e){return e?Uo(e)?e.document:bm(e)?km(e)?e:yl(e)||b1(e)?e.ownerDocument:document:document:document}const Fr=Kc?w.useLayoutEffect:w.useEffect;function Sm(e){const t=w.useRef(e);return Fr(()=>{t.current=e}),w.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function $4(){const e=w.useRef(null),t=w.useCallback((r,i)=>{e.current=setInterval(r,i)},[]),n=w.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function il(e,t){t===void 0&&(t=[e]);const n=w.useRef(e);return Fr(()=>{n.current!==e&&(n.current=e)},t),n}function vl(e,t){const n=w.useRef();return w.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function vc(e){const t=Sm(e),n=w.useRef(null),r=w.useCallback(i=>{i!==n.current&&(t==null||t(i,n.current)),n.current=i},[]);return[n,r]}function kp(e){const t=w.useRef();return w.useEffect(()=>{t.current=e},[e]),t.current}let Sh={};function xl(e,t){return w.useMemo(()=>{if(t)return t;const n=Sh[e]==null?0:Sh[e]+1;return Sh[e]=n,e+"-"+n},[e,t])}function k1(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((o,l)=>{const u=Object.entries(l);for(const[c,f]of u){const h=o[c];h!=null&&(o[c]=h+e*f)}return o},{...t})}}const _o=k1(1),xc=k1(-1);function F4(e){return"clientX"in e&&"clientY"in e}function Em(e){if(!e)return!1;const{KeyboardEvent:t}=Ln(e.target);return t&&e instanceof t}function z4(e){if(!e)return!1;const{TouchEvent:t}=Ln(e.target);return t&&e instanceof t}function Sp(e){if(z4(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return F4(e)?{x:e.clientX,y:e.clientY}:null}const sl=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[sl.Translate.toString(e),sl.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),$0="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function B4(e){return e.matches($0)?e:e.querySelector($0)}const U4={display:"none"};function W4(e){let{id:t,value:n}=e;return Re.createElement("div",{id:t,style:U4},n)}function H4(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Re.createElement("div",{id:t,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function V4(){const[e,t]=w.useState("");return{announce:w.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const S1=w.createContext(null);function q4(e){const t=w.useContext(S1);w.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Y4(){const[e]=w.useState(()=>new Set),t=w.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[w.useCallback(r=>{let{type:i,event:o}=r;e.forEach(l=>{var u;return(u=l[i])==null?void 0:u.call(l,o)})},[e]),t]}const K4={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},G4={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function J4(e){let{announcements:t=G4,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=K4}=e;const{announce:o,announcement:l}=V4(),u=xl("DndLiveRegion"),[c,f]=w.useState(!1);if(w.useEffect(()=>{f(!0)},[]),q4(w.useMemo(()=>({onDragStart(p){let{active:v}=p;o(t.onDragStart({active:v}))},onDragMove(p){let{active:v,over:y}=p;t.onDragMove&&o(t.onDragMove({active:v,over:y}))},onDragOver(p){let{active:v,over:y}=p;o(t.onDragOver({active:v,over:y}))},onDragEnd(p){let{active:v,over:y}=p;o(t.onDragEnd({active:v,over:y}))},onDragCancel(p){let{active:v,over:y}=p;o(t.onDragCancel({active:v,over:y}))}}),[o,t])),!c)return null;const h=Re.createElement(Re.Fragment,null,Re.createElement(W4,{id:r,value:i.draggable}),Re.createElement(H4,{id:u,announcement:l}));return n?qn.createPortal(h,n):h}var Jt;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Jt||(Jt={}));function wc(){}const Sr=Object.freeze({x:0,y:0});function Q4(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function X4(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function Z4(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function eF(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function F0(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const tF=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=F0(t,t.left,t.top),o=[];for(const l of r){const{id:u}=l,c=n.get(u);if(c){const f=Q4(F0(c),i);o.push({id:u,data:{droppableContainer:l,value:f}})}}return o.sort(X4)};function nF(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),l=i-r,u=o-n;if(r<i&&n<o){const c=t.width*t.height,f=e.width*e.height,h=l*u,p=h/(c+f-h);return Number(p.toFixed(4))}return 0}const rF=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=[];for(const o of r){const{id:l}=o,u=n.get(l);if(u){const c=nF(u,t);c>0&&i.push({id:l,data:{droppableContainer:o,value:c}})}}return i.sort(Z4)};function iF(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function E1(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Sr}function sF(e){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i.reduce((l,u)=>({...l,top:l.top+e*u.y,bottom:l.bottom+e*u.y,left:l.left+e*u.x,right:l.right+e*u.x}),{...n})}}const oF=sF(1);function aF(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function lF(e,t,n){const r=aF(t);if(!r)return e;const{scaleX:i,scaleY:o,x:l,y:u}=r,c=e.left-l-(1-i)*parseFloat(n),f=e.top-u-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),h=i?e.width/i:e.width,p=o?e.height/o:e.height;return{width:h,height:p,top:f,right:c+h,bottom:f+p,left:c}}const uF={ignoreTransform:!1};function Ho(e,t){t===void 0&&(t=uF);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:f,transformOrigin:h}=Ln(e).getComputedStyle(e);f&&(n=lF(n,f,h))}const{top:r,left:i,width:o,height:l,bottom:u,right:c}=n;return{top:r,left:i,width:o,height:l,bottom:u,right:c}}function z0(e){return Ho(e,{ignoreTransform:!0})}function cF(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function dF(e,t){return t===void 0&&(t=Ln(e).getComputedStyle(e)),t.position==="fixed"}function fF(e,t){t===void 0&&(t=Ln(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const o=t[i];return typeof o=="string"?n.test(o):!1})}function _m(e,t){const n=[];function r(i){if(t!=null&&n.length>=t||!i)return n;if(km(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!yl(i)||b1(i)||n.includes(i))return n;const o=Ln(e).getComputedStyle(i);return i!==e&&fF(i,o)&&n.push(i),dF(i,o)?n:r(i.parentNode)}return e?r(e):n}function _1(e){const[t]=_m(e,1);return t??null}function Eh(e){return!Kc||!e?null:Uo(e)?e:bm(e)?km(e)||e===Wo(e).scrollingElement?window:yl(e)?e:null:null}function C1(e){return Uo(e)?e.scrollX:e.scrollLeft}function j1(e){return Uo(e)?e.scrollY:e.scrollTop}function Ep(e){return{x:C1(e),y:j1(e)}}var sn;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(sn||(sn={}));function N1(e){return!Kc||!e?!1:e===document.scrollingElement}function T1(e){const t={x:0,y:0},n=N1(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},i=e.scrollTop<=t.y,o=e.scrollLeft<=t.x,l=e.scrollTop>=r.y,u=e.scrollLeft>=r.x;return{isTop:i,isLeft:o,isBottom:l,isRight:u,maxScroll:r,minScroll:t}}const hF={x:.2,y:.2};function pF(e,t,n,r,i){let{top:o,left:l,right:u,bottom:c}=n;r===void 0&&(r=10),i===void 0&&(i=hF);const{isTop:f,isBottom:h,isLeft:p,isRight:v}=T1(e),y={x:0,y:0},b={x:0,y:0},k={height:t.height*i.y,width:t.width*i.x};return!f&&o<=t.top+k.height?(y.y=sn.Backward,b.y=r*Math.abs((t.top+k.height-o)/k.height)):!h&&c>=t.bottom-k.height&&(y.y=sn.Forward,b.y=r*Math.abs((t.bottom-k.height-c)/k.height)),!v&&u>=t.right-k.width?(y.x=sn.Forward,b.x=r*Math.abs((t.right-k.width-u)/k.width)):!p&&l<=t.left+k.width&&(y.x=sn.Backward,b.x=r*Math.abs((t.left+k.width-l)/k.width)),{direction:y,speed:b}}function mF(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:l}=window;return{top:0,left:0,right:o,bottom:l,width:o,height:l}}const{top:t,left:n,right:r,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:i,width:e.clientWidth,height:e.clientHeight}}function I1(e){return e.reduce((t,n)=>_o(t,Ep(n)),Sr)}function gF(e){return e.reduce((t,n)=>t+C1(n),0)}function yF(e){return e.reduce((t,n)=>t+j1(n),0)}function vF(e,t){if(t===void 0&&(t=Ho),!e)return;const{top:n,left:r,bottom:i,right:o}=t(e);_1(e)&&(i<=0||o<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const xF=[["x",["left","right"],gF],["y",["top","bottom"],yF]];class Cm{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=_m(n),i=I1(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,l,u]of xF)for(const c of l)Object.defineProperty(this,c,{get:()=>{const f=u(r),h=i[o]-f;return this.rect[c]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Ha{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var i;(i=this.target)==null||i.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function wF(e){const{EventTarget:t}=Ln(e);return e instanceof t?e:Wo(e)}function _h(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var ir;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(ir||(ir={}));function B0(e){e.preventDefault()}function bF(e){e.stopPropagation()}var mt;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(mt||(mt={}));const P1={start:[mt.Space,mt.Enter],cancel:[mt.Esc],end:[mt.Space,mt.Enter,mt.Tab]},kF=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case mt.Right:return{...n,x:n.x+25};case mt.Left:return{...n,x:n.x-25};case mt.Down:return{...n,y:n.y+25};case mt.Up:return{...n,y:n.y-25}}};class A1{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Ha(Wo(n)),this.windowListeners=new Ha(Ln(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ir.Resize,this.handleCancel),this.windowListeners.add(ir.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ir.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&vF(r),n(Sr)}handleKeyDown(t){if(Em(t)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:o=P1,coordinateGetter:l=kF,scrollBehavior:u="smooth"}=i,{code:c}=t;if(o.end.includes(c)){this.handleEnd(t);return}if(o.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:f}=r.current,h=f?{x:f.left,y:f.top}:Sr;this.referenceCoordinates||(this.referenceCoordinates=h);const p=l(t,{active:n,context:r.current,currentCoordinates:h});if(p){const v=xc(p,h),y={x:0,y:0},{scrollableAncestors:b}=r.current;for(const k of b){const E=t.code,{isTop:C,isRight:_,isLeft:j,isBottom:I,maxScroll:M,minScroll:A}=T1(k),B=mF(k),te={x:Math.min(E===mt.Right?B.right-B.width/2:B.right,Math.max(E===mt.Right?B.left:B.left+B.width/2,p.x)),y:Math.min(E===mt.Down?B.bottom-B.height/2:B.bottom,Math.max(E===mt.Down?B.top:B.top+B.height/2,p.y))},H=E===mt.Right&&!_||E===mt.Left&&!j,O=E===mt.Down&&!I||E===mt.Up&&!C;if(H&&te.x!==p.x){const D=k.scrollLeft+v.x,ne=E===mt.Right&&D<=M.x||E===mt.Left&&D>=A.x;if(ne&&!v.y){k.scrollTo({left:D,behavior:u});return}ne?y.x=k.scrollLeft-D:y.x=E===mt.Right?k.scrollLeft-M.x:k.scrollLeft-A.x,y.x&&k.scrollBy({left:-y.x,behavior:u});break}else if(O&&te.y!==p.y){const D=k.scrollTop+v.y,ne=E===mt.Down&&D<=M.y||E===mt.Up&&D>=A.y;if(ne&&!v.x){k.scrollTo({top:D,behavior:u});return}ne?y.y=k.scrollTop-D:y.y=E===mt.Down?k.scrollTop-M.y:k.scrollTop-A.y,y.y&&k.scrollBy({top:-y.y,behavior:u});break}}this.handleMove(t,_o(xc(p,this.referenceCoordinates),y))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}A1.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=P1,onActivation:i}=t,{active:o}=n;const{code:l}=e.nativeEvent;if(r.start.includes(l)){const u=o.activatorNode.current;return u&&e.target!==u?!1:(e.preventDefault(),i==null||i({event:e.nativeEvent}),!0)}return!1}}];function U0(e){return!!(e&&"distance"in e)}function W0(e){return!!(e&&"delay"in e)}class jm{constructor(t,n,r){var i;r===void 0&&(r=wF(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:o}=t,{target:l}=o;this.props=t,this.events=n,this.document=Wo(l),this.documentListeners=new Ha(this.document),this.listeners=new Ha(r),this.windowListeners=new Ha(Ln(l)),this.initialCoordinates=(i=Sp(o))!=null?i:Sr,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(ir.Resize,this.handleCancel),this.windowListeners.add(ir.DragStart,B0),this.windowListeners.add(ir.VisibilityChange,this.handleCancel),this.windowListeners.add(ir.ContextMenu,B0),this.documentListeners.add(ir.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(W0(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(U0(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:i}=this.props;i(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(ir.Click,bF,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ir.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:i,props:o}=this,{onMove:l,options:{activationConstraint:u}}=o;if(!i)return;const c=(n=Sp(t))!=null?n:Sr,f=xc(i,c);if(!r&&u){if(U0(u)){if(u.tolerance!=null&&_h(f,u.tolerance))return this.handleCancel();if(_h(f,u.distance))return this.handleStart()}if(W0(u)&&_h(f,u.tolerance))return this.handleCancel();this.handlePending(u,f);return}t.cancelable&&t.preventDefault(),l(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===mt.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const SF={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class R1 extends jm{constructor(t){const{event:n}=t,r=Wo(n.target);super(t,SF,r)}}R1.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const EF={move:{name:"mousemove"},end:{name:"mouseup"}};var _p;(function(e){e[e.RightClick=2]="RightClick"})(_p||(_p={}));class _F extends jm{constructor(t){super(t,EF,Wo(t.event.target))}}_F.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===_p.RightClick?!1:(r==null||r({event:n}),!0)}}];const Ch={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class CF extends jm{constructor(t){super(t,Ch)}static setup(){return window.addEventListener(Ch.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Ch.move.name,t)};function t(){}}}CF.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var Va;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Va||(Va={}));var bc;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(bc||(bc={}));function jF(e){let{acceleration:t,activator:n=Va.Pointer,canScroll:r,draggingRect:i,enabled:o,interval:l=5,order:u=bc.TreeOrder,pointerCoordinates:c,scrollableAncestors:f,scrollableAncestorRects:h,delta:p,threshold:v}=e;const y=TF({delta:p,disabled:!o}),[b,k]=$4(),E=w.useRef({x:0,y:0}),C=w.useRef({x:0,y:0}),_=w.useMemo(()=>{switch(n){case Va.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Va.DraggableRect:return i}},[n,i,c]),j=w.useRef(null),I=w.useCallback(()=>{const A=j.current;if(!A)return;const B=E.current.x*C.current.x,te=E.current.y*C.current.y;A.scrollBy(B,te)},[]),M=w.useMemo(()=>u===bc.TreeOrder?[...f].reverse():f,[u,f]);w.useEffect(()=>{if(!o||!f.length||!_){k();return}for(const A of M){if((r==null?void 0:r(A))===!1)continue;const B=f.indexOf(A),te=h[B];if(!te)continue;const{direction:H,speed:O}=pF(A,te,_,t,v);for(const D of["x","y"])y[D][H[D]]||(O[D]=0,H[D]=0);if(O.x>0||O.y>0){k(),j.current=A,b(I,l),E.current=O,C.current=H;return}}E.current={x:0,y:0},C.current={x:0,y:0},k()},[t,I,r,k,o,l,JSON.stringify(_),JSON.stringify(y),b,f,M,h,JSON.stringify(v)])}const NF={x:{[sn.Backward]:!1,[sn.Forward]:!1},y:{[sn.Backward]:!1,[sn.Forward]:!1}};function TF(e){let{delta:t,disabled:n}=e;const r=kp(t);return vl(i=>{if(n||!r||!i)return NF;const o={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[sn.Backward]:i.x[sn.Backward]||o.x===-1,[sn.Forward]:i.x[sn.Forward]||o.x===1},y:{[sn.Backward]:i.y[sn.Backward]||o.y===-1,[sn.Forward]:i.y[sn.Forward]||o.y===1}}},[n,t,r])}function IF(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return vl(i=>{var o;return t==null?null:(o=r??i)!=null?o:null},[r,t])}function PF(e,t){return w.useMemo(()=>e.reduce((n,r)=>{const{sensor:i}=r,o=i.activators.map(l=>({eventName:l.eventName,handler:t(l.handler,r)}));return[...n,...o]},[]),[e,t])}var ol;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(ol||(ol={}));var Cp;(function(e){e.Optimized="optimized"})(Cp||(Cp={}));const H0=new Map;function AF(e,t){let{dragging:n,dependencies:r,config:i}=t;const[o,l]=w.useState(null),{frequency:u,measure:c,strategy:f}=i,h=w.useRef(e),p=E(),v=il(p),y=w.useCallback(function(C){C===void 0&&(C=[]),!v.current&&l(_=>_===null?C:_.concat(C.filter(j=>!_.includes(j))))},[v]),b=w.useRef(null),k=vl(C=>{if(p&&!n)return H0;if(!C||C===H0||h.current!==e||o!=null){const _=new Map;for(let j of e){if(!j)continue;if(o&&o.length>0&&!o.includes(j.id)&&j.rect.current){_.set(j.id,j.rect.current);continue}const I=j.node.current,M=I?new Cm(c(I),I):null;j.rect.current=M,M&&_.set(j.id,M)}return _}return C},[e,o,n,p,c]);return w.useEffect(()=>{h.current=e},[e]),w.useEffect(()=>{p||y()},[n,p]),w.useEffect(()=>{o&&o.length>0&&l(null)},[JSON.stringify(o)]),w.useEffect(()=>{p||typeof u!="number"||b.current!==null||(b.current=setTimeout(()=>{y(),b.current=null},u))},[u,p,y,...r]),{droppableRects:k,measureDroppableContainers:y,measuringScheduled:o!=null};function E(){switch(f){case ol.Always:return!1;case ol.BeforeDragging:return n;default:return!n}}}function O1(e,t){return vl(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function RF(e,t){return O1(e,t)}function OF(e){let{callback:t,disabled:n}=e;const r=Sm(t),i=w.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(r)},[r,n]);return w.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Gc(e){let{callback:t,disabled:n}=e;const r=Sm(t),i=w.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(r)},[n]);return w.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function MF(e){return new Cm(Ho(e),e)}function V0(e,t,n){t===void 0&&(t=MF);const[r,i]=w.useState(null);function o(){i(c=>{if(!e)return null;if(e.isConnected===!1){var f;return(f=c??n)!=null?f:null}const h=t(e);return JSON.stringify(c)===JSON.stringify(h)?c:h})}const l=OF({callback(c){if(e)for(const f of c){const{type:h,target:p}=f;if(h==="childList"&&p instanceof HTMLElement&&p.contains(e)){o();break}}}}),u=Gc({callback:o});return Fr(()=>{o(),e?(u==null||u.observe(e),l==null||l.observe(document.body,{childList:!0,subtree:!0})):(u==null||u.disconnect(),l==null||l.disconnect())},[e]),r}function DF(e){const t=O1(e);return E1(e,t)}const q0=[];function LF(e){const t=w.useRef(e),n=vl(r=>e?r&&r!==q0&&e&&t.current&&e.parentNode===t.current.parentNode?r:_m(e):q0,[e]);return w.useEffect(()=>{t.current=e},[e]),n}function $F(e){const[t,n]=w.useState(null),r=w.useRef(e),i=w.useCallback(o=>{const l=Eh(o.target);l&&n(u=>u?(u.set(l,Ep(l)),new Map(u)):null)},[]);return w.useEffect(()=>{const o=r.current;if(e!==o){l(o);const u=e.map(c=>{const f=Eh(c);return f?(f.addEventListener("scroll",i,{passive:!0}),[f,Ep(f)]):null}).filter(c=>c!=null);n(u.length?new Map(u):null),r.current=e}return()=>{l(e),l(o)};function l(u){u.forEach(c=>{const f=Eh(c);f==null||f.removeEventListener("scroll",i)})}},[i,e]),w.useMemo(()=>e.length?t?Array.from(t.values()).reduce((o,l)=>_o(o,l),Sr):I1(e):Sr,[e,t])}function Y0(e,t){t===void 0&&(t=[]);const n=w.useRef(null);return w.useEffect(()=>{n.current=null},t),w.useEffect(()=>{const r=e!==Sr;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?xc(e,n.current):Sr}function FF(e){w.useEffect(()=>{if(!Kc)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function zF(e,t){return w.useMemo(()=>e.reduce((n,r)=>{let{eventName:i,handler:o}=r;return n[i]=l=>{o(l,t)},n},{}),[e,t])}function M1(e){return w.useMemo(()=>e?cF(e):null,[e])}const K0=[];function BF(e,t){t===void 0&&(t=Ho);const[n]=e,r=M1(n?Ln(n):null),[i,o]=w.useState(K0);function l(){o(()=>e.length?e.map(c=>N1(c)?r:new Cm(t(c),c)):K0)}const u=Gc({callback:l});return Fr(()=>{u==null||u.disconnect(),l(),e.forEach(c=>u==null?void 0:u.observe(c))},[e]),i}function UF(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return yl(t)?t:e}function WF(e){let{measure:t}=e;const[n,r]=w.useState(null),i=w.useCallback(f=>{for(const{target:h}of f)if(yl(h)){r(p=>{const v=t(h);return p?{...p,width:v.width,height:v.height}:v});break}},[t]),o=Gc({callback:i}),l=w.useCallback(f=>{const h=UF(f);o==null||o.disconnect(),h&&(o==null||o.observe(h)),r(h?t(h):null)},[t,o]),[u,c]=vc(l);return w.useMemo(()=>({nodeRef:u,rect:n,setRef:c}),[n,u,c])}const HF=[{sensor:R1,options:{}},{sensor:A1,options:{}}],VF={current:{}},Xu={draggable:{measure:z0},droppable:{measure:z0,strategy:ol.WhileDragging,frequency:Cp.Optimized},dragOverlay:{measure:Ho}};class qa extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const qF={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new qa,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:wc},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Xu,measureDroppableContainers:wc,windowRect:null,measuringScheduled:!1},YF={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:wc,draggableNodes:new Map,over:null,measureDroppableContainers:wc},Jc=w.createContext(YF),D1=w.createContext(qF);function KF(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new qa}}}function GF(e,t){switch(t.type){case Jt.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Jt.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Jt.DragEnd:case Jt.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Jt.RegisterDroppable:{const{element:n}=t,{id:r}=n,i=new qa(e.droppable.containers);return i.set(r,n),{...e,droppable:{...e.droppable,containers:i}}}case Jt.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const l=new qa(e.droppable.containers);return l.set(n,{...o,disabled:i}),{...e,droppable:{...e.droppable,containers:l}}}case Jt.UnregisterDroppable:{const{id:n,key:r}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const o=new qa(e.droppable.containers);return o.delete(n),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function JF(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:i}=w.useContext(Jc),o=kp(r),l=kp(n==null?void 0:n.id);return w.useEffect(()=>{if(!t&&!r&&o&&l!=null){if(!Em(o)||document.activeElement===o.target)return;const u=i.get(l);if(!u)return;const{activatorNode:c,node:f}=u;if(!c.current&&!f.current)return;requestAnimationFrame(()=>{for(const h of[c.current,f.current]){if(!h)continue;const p=B4(h);if(p){p.focus();break}}})}},[r,t,i,l,o]),null}function QF(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((i,o)=>o({transform:i,...r}),n):n}function XF(e){return w.useMemo(()=>({draggable:{...Xu.draggable,...e==null?void 0:e.draggable},droppable:{...Xu.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Xu.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function ZF(e){let{activeNode:t,measure:n,initialRect:r,config:i=!0}=e;const o=w.useRef(!1),{x:l,y:u}=typeof i=="boolean"?{x:i,y:i}:i;Fr(()=>{if(!l&&!u||!t){o.current=!1;return}if(o.current||!r)return;const f=t==null?void 0:t.node.current;if(!f||f.isConnected===!1)return;const h=n(f),p=E1(h,r);if(l||(p.x=0),u||(p.y=0),o.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const v=_1(f);v&&v.scrollBy({top:p.y,left:p.x})}},[t,l,u,r,n])}const L1=w.createContext({...Sr,scaleX:1,scaleY:1});var Ti;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Ti||(Ti={}));const e3=w.memo(function(t){var n,r,i,o;let{id:l,accessibility:u,autoScroll:c=!0,children:f,sensors:h=HF,collisionDetection:p=rF,measuring:v,modifiers:y,...b}=t;const k=w.useReducer(GF,void 0,KF),[E,C]=k,[_,j]=Y4(),[I,M]=w.useState(Ti.Uninitialized),A=I===Ti.Initialized,{draggable:{active:B,nodes:te,translate:H},droppable:{containers:O}}=E,D=B!=null?te.get(B):null,ne=w.useRef({initial:null,translated:null}),W=w.useMemo(()=>{var Oe;return B!=null?{id:B,data:(Oe=D==null?void 0:D.data)!=null?Oe:VF,rect:ne}:null},[B,D]),Y=w.useRef(null),[V,ie]=w.useState(null),[z,L]=w.useState(null),Q=il(b,Object.values(b)),T=xl("DndDescribedBy",l),F=w.useMemo(()=>O.getEnabled(),[O]),J=XF(v),{droppableRects:P,measureDroppableContainers:be,measuringScheduled:he}=AF(F,{dragging:A,dependencies:[H.x,H.y],config:J.droppable}),ge=IF(te,B),me=w.useMemo(()=>z?Sp(z):null,[z]),je=He(),Ae=RF(ge,J.draggable.measure);ZF({activeNode:B!=null?te.get(B):null,config:je.layoutShiftCompensation,initialRect:Ae,measure:J.draggable.measure});const Te=V0(ge,J.draggable.measure,Ae),re=V0(ge?ge.parentElement:null),Ie=w.useRef({activatorEvent:null,active:null,activeNode:ge,collisionRect:null,collisions:null,droppableRects:P,draggableNodes:te,draggingNode:null,draggingNodeRect:null,droppableContainers:O,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ue=O.getNodeFor((n=Ie.current.over)==null?void 0:n.id),We=WF({measure:J.dragOverlay.measure}),tt=(r=We.nodeRef.current)!=null?r:ge,ot=A?(i=We.rect)!=null?i:Te:null,St=!!(We.nodeRef.current&&We.rect),Qt=DF(St?null:Te),qt=M1(tt?Ln(tt):null),G=LF(A?Ue??ge:null),fe=BF(G),ye=QF(y,{transform:{x:H.x-Qt.x,y:H.y-Qt.y,scaleX:1,scaleY:1},activatorEvent:z,active:W,activeNodeRect:Te,containerNodeRect:re,draggingNodeRect:ot,over:Ie.current.over,overlayNodeRect:We.rect,scrollableAncestors:G,scrollableAncestorRects:fe,windowRect:qt}),Pe=me?_o(me,H):null,Se=$F(G),ae=Y0(Se),R=Y0(Se,[Te]),q=_o(ye,ae),ue=ot?oF(ot,ye):null,le=W&&ue?p({active:W,collisionRect:ue,droppableRects:P,droppableContainers:F,pointerCoordinates:Pe}):null,ee=eF(le,"id"),[de,$]=w.useState(null),Z=St?ye:_o(ye,R),pe=iF(Z,(o=de==null?void 0:de.rect)!=null?o:null,Te),ve=w.useRef(null),De=w.useCallback((Oe,it)=>{let{sensor:Ve,options:dt}=it;if(Y.current==null)return;const ut=te.get(Y.current);if(!ut)return;const vt=Oe.nativeEvent,xn=new Ve({active:Y.current,activeNode:ut,event:vt,options:dt,context:Ie,onAbort(wt){if(!te.get(wt))return;const{onDragAbort:un}=Q.current,ar={id:wt};un==null||un(ar),_({type:"onDragAbort",event:ar})},onPending(wt,Jn,un,ar){if(!te.get(wt))return;const{onDragPending:_r}=Q.current,$n={id:wt,constraint:Jn,initialCoordinates:un,offset:ar};_r==null||_r($n),_({type:"onDragPending",event:$n})},onStart(wt){const Jn=Y.current;if(Jn==null)return;const un=te.get(Jn);if(!un)return;const{onDragStart:ar}=Q.current,lr={activatorEvent:vt,active:{id:Jn,data:un.data,rect:ne}};qn.unstable_batchedUpdates(()=>{ar==null||ar(lr),M(Ti.Initializing),C({type:Jt.DragStart,initialCoordinates:wt,active:Jn}),_({type:"onDragStart",event:lr}),ie(ve.current),L(vt)})},onMove(wt){C({type:Jt.DragMove,coordinates:wt})},onEnd:Er(Jt.DragEnd),onCancel:Er(Jt.DragCancel)});ve.current=xn;function Er(wt){return async function(){const{active:un,collisions:ar,over:lr,scrollAdjustedTranslate:_r}=Ie.current;let $n=null;if(un&&_r){const{cancelDrop:Wr}=Q.current;$n={activatorEvent:vt,active:un,collisions:ar,delta:_r,over:lr},wt===Jt.DragEnd&&typeof Wr=="function"&&await Promise.resolve(Wr($n))&&(wt=Jt.DragCancel)}Y.current=null,qn.unstable_batchedUpdates(()=>{C({type:wt}),M(Ti.Uninitialized),$(null),ie(null),L(null),ve.current=null;const Wr=wt===Jt.DragEnd?"onDragEnd":"onDragCancel";if($n){const Vo=Q.current[Wr];Vo==null||Vo($n),_({type:Wr,event:$n})}})}}},[te]),Je=w.useCallback((Oe,it)=>(Ve,dt)=>{const ut=Ve.nativeEvent,vt=te.get(dt);if(Y.current!==null||!vt||ut.dndKit||ut.defaultPrevented)return;const xn={active:vt};Oe(Ve,it.options,xn)===!0&&(ut.dndKit={capturedBy:it.sensor},Y.current=dt,De(Ve,it))},[te,De]),nt=PF(h,Je);FF(h),Fr(()=>{Te&&I===Ti.Initializing&&M(Ti.Initialized)},[Te,I]),w.useEffect(()=>{const{onDragMove:Oe}=Q.current,{active:it,activatorEvent:Ve,collisions:dt,over:ut}=Ie.current;if(!it||!Ve)return;const vt={active:it,activatorEvent:Ve,collisions:dt,delta:{x:q.x,y:q.y},over:ut};qn.unstable_batchedUpdates(()=>{Oe==null||Oe(vt),_({type:"onDragMove",event:vt})})},[q.x,q.y]),w.useEffect(()=>{const{active:Oe,activatorEvent:it,collisions:Ve,droppableContainers:dt,scrollAdjustedTranslate:ut}=Ie.current;if(!Oe||Y.current==null||!it||!ut)return;const{onDragOver:vt}=Q.current,xn=dt.get(ee),Er=xn&&xn.rect.current?{id:xn.id,rect:xn.rect.current,data:xn.data,disabled:xn.disabled}:null,wt={active:Oe,activatorEvent:it,collisions:Ve,delta:{x:ut.x,y:ut.y},over:Er};qn.unstable_batchedUpdates(()=>{$(Er),vt==null||vt(wt),_({type:"onDragOver",event:wt})})},[ee]),Fr(()=>{Ie.current={activatorEvent:z,active:W,activeNode:ge,collisionRect:ue,collisions:le,droppableRects:P,draggableNodes:te,draggingNode:tt,draggingNodeRect:ot,droppableContainers:O,over:de,scrollableAncestors:G,scrollAdjustedTranslate:q},ne.current={initial:ot,translated:ue}},[W,ge,le,ue,te,tt,ot,P,O,de,G,q]),jF({...je,delta:H,draggingRect:ue,pointerCoordinates:Pe,scrollableAncestors:G,scrollableAncestorRects:fe});const Ee=w.useMemo(()=>({active:W,activeNode:ge,activeNodeRect:Te,activatorEvent:z,collisions:le,containerNodeRect:re,dragOverlay:We,draggableNodes:te,droppableContainers:O,droppableRects:P,over:de,measureDroppableContainers:be,scrollableAncestors:G,scrollableAncestorRects:fe,measuringConfiguration:J,measuringScheduled:he,windowRect:qt}),[W,ge,Te,z,le,re,We,te,O,P,de,be,G,fe,J,he,qt]),Qe=w.useMemo(()=>({activatorEvent:z,activators:nt,active:W,activeNodeRect:Te,ariaDescribedById:{draggable:T},dispatch:C,draggableNodes:te,over:de,measureDroppableContainers:be}),[z,nt,W,Te,C,T,te,de,be]);return Re.createElement(S1.Provider,{value:j},Re.createElement(Jc.Provider,{value:Qe},Re.createElement(D1.Provider,{value:Ee},Re.createElement(L1.Provider,{value:pe},f)),Re.createElement(JF,{disabled:(u==null?void 0:u.restoreFocus)===!1})),Re.createElement(J4,{...u,hiddenTextDescribedById:T}));function He(){const Oe=(V==null?void 0:V.autoScrollEnabled)===!1,it=typeof c=="object"?c.enabled===!1:c===!1,Ve=A&&!Oe&&!it;return typeof c=="object"?{...c,enabled:Ve}:{enabled:Ve}}}),t3=w.createContext(null),G0="button",n3="Draggable";function r3(e){let{id:t,data:n,disabled:r=!1,attributes:i}=e;const o=xl(n3),{activators:l,activatorEvent:u,active:c,activeNodeRect:f,ariaDescribedById:h,draggableNodes:p,over:v}=w.useContext(Jc),{role:y=G0,roleDescription:b="draggable",tabIndex:k=0}=i??{},E=(c==null?void 0:c.id)===t,C=w.useContext(E?L1:t3),[_,j]=vc(),[I,M]=vc(),A=zF(l,t),B=il(n);Fr(()=>(p.set(t,{id:t,key:o,node:_,activatorNode:I,data:B}),()=>{const H=p.get(t);H&&H.key===o&&p.delete(t)}),[p,t]);const te=w.useMemo(()=>({role:y,tabIndex:k,"aria-disabled":r,"aria-pressed":E&&y===G0?!0:void 0,"aria-roledescription":b,"aria-describedby":h.draggable}),[r,y,k,E,b,h.draggable]);return{active:c,activatorEvent:u,activeNodeRect:f,attributes:te,isDragging:E,listeners:r?void 0:A,node:_,over:v,setNodeRef:j,setActivatorNodeRef:M,transform:C}}function i3(){return w.useContext(D1)}const s3="Droppable",o3={timeout:25};function a3(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:i}=e;const o=xl(s3),{active:l,dispatch:u,over:c,measureDroppableContainers:f}=w.useContext(Jc),h=w.useRef({disabled:n}),p=w.useRef(!1),v=w.useRef(null),y=w.useRef(null),{disabled:b,updateMeasurementsFor:k,timeout:E}={...o3,...i},C=il(k??r),_=w.useCallback(()=>{if(!p.current){p.current=!0;return}y.current!=null&&clearTimeout(y.current),y.current=setTimeout(()=>{f(Array.isArray(C.current)?C.current:[C.current]),y.current=null},E)},[E]),j=Gc({callback:_,disabled:b||!l}),I=w.useCallback((te,H)=>{j&&(H&&(j.unobserve(H),p.current=!1),te&&j.observe(te))},[j]),[M,A]=vc(I),B=il(t);return w.useEffect(()=>{!j||!M.current||(j.disconnect(),p.current=!1,j.observe(M.current))},[M,j]),w.useEffect(()=>(u({type:Jt.RegisterDroppable,element:{id:r,key:o,disabled:n,node:M,rect:v,data:B}}),()=>u({type:Jt.UnregisterDroppable,key:o,id:r})),[r]),w.useEffect(()=>{n!==h.current.disabled&&(u({type:Jt.SetDroppableDisabled,id:r,key:o,disabled:n}),h.current.disabled=n)},[r,o,n,u]),{active:l,rect:v,isOver:(c==null?void 0:c.id)===r,node:M,over:c,setNodeRef:A}}function $1(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function l3(e,t){return e.reduce((n,r,i)=>{const o=t.get(r);return o&&(n[i]=o),n},Array(e.length))}function Bu(e){return e!==null&&e>=0}function u3(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function c3(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const F1=e=>{let{rects:t,activeIndex:n,overIndex:r,index:i}=e;const o=$1(t,r,n),l=t[i],u=o[i];return!u||!l?null:{x:u.left-l.left,y:u.top-l.top,scaleX:u.width/l.width,scaleY:u.height/l.height}},Uu={scaleX:1,scaleY:1},d3=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:i,rects:o,overIndex:l}=e;const u=(t=o[n])!=null?t:r;if(!u)return null;if(i===n){const f=o[l];return f?{x:0,y:n<l?f.top+f.height-(u.top+u.height):f.top-u.top,...Uu}:null}const c=f3(o,i,n);return i>n&&i<=l?{x:0,y:-u.height-c,...Uu}:i<n&&i>=l?{x:0,y:u.height+c,...Uu}:{x:0,y:0,...Uu}};function f3(e,t,n){const r=e[t],i=e[t-1],o=e[t+1];return r?n<t?i?r.top-(i.top+i.height):o?o.top-(r.top+r.height):0:o?o.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const z1="Sortable",B1=Re.createContext({activeIndex:-1,containerId:z1,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:F1,disabled:{draggable:!1,droppable:!1}});function h3(e){let{children:t,id:n,items:r,strategy:i=F1,disabled:o=!1}=e;const{active:l,dragOverlay:u,droppableRects:c,over:f,measureDroppableContainers:h}=i3(),p=xl(z1,n),v=u.rect!==null,y=w.useMemo(()=>r.map(A=>typeof A=="object"&&"id"in A?A.id:A),[r]),b=l!=null,k=l?y.indexOf(l.id):-1,E=f?y.indexOf(f.id):-1,C=w.useRef(y),_=!u3(y,C.current),j=E!==-1&&k===-1||_,I=c3(o);Fr(()=>{_&&b&&h(y)},[_,y,b,h]),w.useEffect(()=>{C.current=y},[y]);const M=w.useMemo(()=>({activeIndex:k,containerId:p,disabled:I,disableTransforms:j,items:y,overIndex:E,useDragOverlay:v,sortedRects:l3(y,c),strategy:i}),[k,p,I.draggable,I.droppable,j,y,E,c,v,i]);return Re.createElement(B1.Provider,{value:M},t)}const p3=e=>{let{id:t,items:n,activeIndex:r,overIndex:i}=e;return $1(n,r,i).indexOf(t)},m3=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:i,items:o,newIndex:l,previousItems:u,previousContainerId:c,transition:f}=e;return!f||!r||u!==o&&i===l?!1:n?!0:l!==i&&t===c},g3={duration:200,easing:"ease"},U1="transform",y3=sl.Transition.toString({property:U1,duration:0,easing:"linear"}),v3={roleDescription:"sortable"};function x3(e){let{disabled:t,index:n,node:r,rect:i}=e;const[o,l]=w.useState(null),u=w.useRef(n);return Fr(()=>{if(!t&&n!==u.current&&r.current){const c=i.current;if(c){const f=Ho(r.current,{ignoreTransform:!0}),h={x:c.left-f.left,y:c.top-f.top,scaleX:c.width/f.width,scaleY:c.height/f.height};(h.x||h.y)&&l(h)}}n!==u.current&&(u.current=n)},[t,n,r,i]),w.useEffect(()=>{o&&l(null)},[o]),o}function w3(e){let{animateLayoutChanges:t=m3,attributes:n,disabled:r,data:i,getNewIndex:o=p3,id:l,strategy:u,resizeObserverConfig:c,transition:f=g3}=e;const{items:h,containerId:p,activeIndex:v,disabled:y,disableTransforms:b,sortedRects:k,overIndex:E,useDragOverlay:C,strategy:_}=w.useContext(B1),j=b3(r,y),I=h.indexOf(l),M=w.useMemo(()=>({sortable:{containerId:p,index:I,items:h},...i}),[p,i,I,h]),A=w.useMemo(()=>h.slice(h.indexOf(l)),[h,l]),{rect:B,node:te,isOver:H,setNodeRef:O}=a3({id:l,data:M,disabled:j.droppable,resizeObserverConfig:{updateMeasurementsFor:A,...c}}),{active:D,activatorEvent:ne,activeNodeRect:W,attributes:Y,setNodeRef:V,listeners:ie,isDragging:z,over:L,setActivatorNodeRef:Q,transform:T}=r3({id:l,data:M,attributes:{...v3,...n},disabled:j.draggable}),F=L4(O,V),J=!!D,P=J&&!b&&Bu(v)&&Bu(E),be=!C&&z,he=be&&P?T:null,me=P?he??(u??_)({rects:k,activeNodeRect:W,activeIndex:v,overIndex:E,index:I}):null,je=Bu(v)&&Bu(E)?o({id:l,items:h,activeIndex:v,overIndex:E}):I,Ae=D==null?void 0:D.id,Te=w.useRef({activeId:Ae,items:h,newIndex:je,containerId:p}),re=h!==Te.current.items,Ie=t({active:D,containerId:p,isDragging:z,isSorting:J,id:l,index:I,items:h,newIndex:Te.current.newIndex,previousItems:Te.current.items,previousContainerId:Te.current.containerId,transition:f,wasDragging:Te.current.activeId!=null}),Ue=x3({disabled:!Ie,index:I,node:te,rect:B});return w.useEffect(()=>{J&&Te.current.newIndex!==je&&(Te.current.newIndex=je),p!==Te.current.containerId&&(Te.current.containerId=p),h!==Te.current.items&&(Te.current.items=h)},[J,je,p,h]),w.useEffect(()=>{if(Ae===Te.current.activeId)return;if(Ae&&!Te.current.activeId){Te.current.activeId=Ae;return}const tt=setTimeout(()=>{Te.current.activeId=Ae},50);return()=>clearTimeout(tt)},[Ae]),{active:D,activeIndex:v,attributes:Y,data:M,rect:B,index:I,newIndex:je,items:h,isOver:H,isSorting:J,isDragging:z,listeners:ie,node:te,overIndex:E,over:L,setNodeRef:F,setActivatorNodeRef:Q,setDroppableNodeRef:O,setDraggableNodeRef:V,transform:Ue??me,transition:We()};function We(){if(Ue||re&&Te.current.newIndex===I)return y3;if(!(be&&!Em(ne)||!f)&&(J||Ie))return sl.Transition.toString({...f,property:U1})}}function b3(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}mt.Down,mt.Right,mt.Up,mt.Left;function kc(e,t="18:30"){const n=(e??t).trim(),r=/^(\d{1,2}):(\d{2})$/.exec(n);if(!r)return kc(t,t);const i=Number(r[1]),o=Number(r[2]);return Number.isNaN(i)||Number.isNaN(o)?kc(t,t):(i*60+o)%1440}function jp(e){const t=(e%1440+1440)%1440,n=Math.floor(t/60),r=t%60,i=n.toString().padStart(2,"0"),o=r.toString().padStart(2,"0");return`${i}:${o}`}const J0={present:"Presente",absent:"Ausente",pending:"Pendiente"};function W1({work:e,objective:t,parentChain:n,onSelect:r}){const i=(e.subtitle??"").trim();return m.jsxs("button",{type:"button",onClick:()=>r(e.id),className:"flex w-full items-center justify-between gap-4 rounded-xl border border-white/10 bg-white/5 px-4 py-3 text-left transition hover:border-white/30",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-semibold text-white",children:e.name}),i?m.jsx("p",{className:"text-xs text-white/60",children:i}):null,m.jsxs("p",{className:"text-xs text-white/50",children:[e.estimatedMinutes," min"]}),n?m.jsxs("p",{className:"text-[11px] text-white/40",children:["Deriva de ",n]}):null]}),m.jsx(zi,{objective:t,size:"sm"})]})}function k3({item:e,work:t,objective:n,expanded:r,isPersonal:i,onToggleExpanded:o,onRemove:l,onDuplicate:u,onUpdateDetails:c,onReplace:f,startTimeLabel:h,durationMinutes:p,works:v,objectiveMap:y,workPathById:b}){const{attributes:k,listeners:E,setNodeRef:C,transform:_,transition:j,isDragging:I}=w3({id:e.id}),[M,A]=w.useState(!1),[B,te]=w.useState(""),H={transform:sl.Transform.toString(_),transition:j},D=(e.focusLabel??"").trim(),ne=D.length>0,W=e.customDescriptionMarkdown??(t==null?void 0:t.descriptionMarkdown)??"",Y=W.trim().length>0,V=((t==null?void 0:t.videoUrls)??[]).map(me=>me.trim()).filter(Boolean),ie=V.length>0,z=Y||ie,Q=(t!=null&&t.id?b.get(t.id)??(t==null?void 0:t.name)??"":"").split("  ").slice(0,-1).join("  "),T=((t==null?void 0:t.subtitle)??"").trim(),F=me=>{const je=me.target.value;c(e.id,{focusLabel:je===""?void 0:je})},J=B.trim().toLowerCase(),P=w.useMemo(()=>v.filter(me=>me.id!==(t==null?void 0:t.id)),[v,t==null?void 0:t.id]),be=w.useMemo(()=>J?P.filter(me=>{var Ue;const je=(me.subtitle??"").toLowerCase(),Ae=((Ue=y.get(me.objectiveId))==null?void 0:Ue.name.toLowerCase())??"",Te=(b.get(me.id)??"").toLowerCase(),re=(me.descriptionMarkdown??"").toLowerCase(),Ie=J;return me.name.toLowerCase().includes(Ie)||je.includes(Ie)||re.includes(Ie)||Ae.includes(Ie)||Te.includes(Ie)}):[],[P,J,y,b]);w.useEffect(()=>{M||te("")},[M]);const he=P.length>0,ge=e.result;return m.jsxs("article",{ref:C,style:H,className:ze("relative flex flex-col gap-3 rounded-3xl border border-white/10 bg-white/10 p-4 shadow-lg shadow-black/20 transition",I&&"ring-2 ring-sky-400/70"),children:[n?m.jsx("div",{className:"absolute inset-0 -z-[1] rounded-3xl opacity-30 blur-xl",style:{backgroundColor:n.colorHex}}):null,m.jsxs("div",{className:"flex items-start gap-4",children:[m.jsx("button",{type:"button",className:"mt-1 flex h-10 w-10 items-center justify-center rounded-full border border-white/20 text-white/70",...E,...k,"aria-label":"Reordenar trabajo",children:""}),m.jsx("div",{className:"flex-1 space-y-1",children:m.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsxs("p",{className:"text-lg font-semibold text-white",children:[(t==null?void 0:t.name)??"Trabajo eliminado",ne?m.jsxs("span",{className:"ml-2 text-sky-300",children:[" ",D]}):null]}),T?m.jsx("p",{className:"text-sm text-white/70",children:T}):null,Q?m.jsxs("p",{className:"text-xs text-white/50",children:["Deriva de ",Q]}):null,m.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm text-white/60",children:[m.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:h}),m.jsx("span",{className:"text-white/30",children:""}),m.jsxs("span",{children:[p," min"]})]}),m.jsxs("div",{className:"max-w-md",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Foco dentro del trabajo"}),m.jsx("input",{type:"text",value:e.focusLabel??"",onChange:F,placeholder:"Ej. 1/7  Apertura",className:"input-field mt-1"})]}),i?m.jsx("div",{className:"mt-3 flex flex-wrap items-center gap-3",children:m.jsx("div",{className:"flex flex-wrap items-center gap-2",children:["ok","doubt","fail"].map(me=>m.jsx("button",{type:"button",onClick:()=>c(e.id,{result:me,completed:!0}),className:ze("rounded-full border px-3 py-1 text-xs font-semibold transition",ge===me?me==="ok"?"border-emerald-500/60 bg-emerald-500/20 text-emerald-200":me==="doubt"?"border-amber-400/50 bg-amber-500/15 text-amber-200":"border-rose-500/60 bg-rose-500/15 text-rose-200":"border-white/10 text-white/60 hover:border-white/30 hover:text-white"),children:me==="ok"?"OK":me==="doubt"?"Dudosa":"Fallo"},me))})}):null]}),m.jsxs("div",{className:"flex items-center gap-2",children:[z?m.jsxs("button",{type:"button",onClick:()=>o(e.id),className:ze("inline-flex items-center gap-2 rounded-full border border-white/20 px-3 py-1 text-xs font-semibold text-white/70 transition hover:border-white/40 hover:text-white",r&&"border-white/40 text-white"),children:[m.jsx("span",{className:ze("transition-transform",r?"rotate-90":"rotate-0"),children:""}),r?"Ocultar detalles":"Ver detalles"]}):null,m.jsx(zi,{objective:n,size:"sm"})]})]})}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{type:"button",onClick:()=>A(me=>!me),disabled:!he,className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-white/20 text-white/70 transition hover:border-sky-400/60 hover:text-white disabled:opacity-40","aria-label":"Intercambiar trabajo por otro de la misma categora","aria-expanded":M,children:""}),m.jsx("button",{type:"button",onClick:u,className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-white/20 text-white/70 transition hover:border-sky-400/60 hover:text-white","aria-label":"Duplicar trabajo en la sesin",children:"x2"}),m.jsx("button",{type:"button",onClick:l,className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-rose-500/40 text-rose-300 hover:border-rose-400 hover:text-rose-200","aria-label":"Eliminar trabajo de la sesin",children:""})]})]}),M?m.jsx("div",{className:"mt-3 space-y-3 rounded-2xl border border-white/10 bg-slate-950/70 p-3",children:m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Buscar en el catlogo"}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:"search",className:"input-field",placeholder:"Buscar en el catlogo",value:B,onChange:me=>te(me.target.value)}),B?m.jsx("div",{className:"absolute top-14 z-10 max-h-60 w-full overflow-y-auto rounded-2xl border border-white/10 bg-slate-900/95 p-2 shadow-xl",children:be.length===0?m.jsx("p",{className:"p-3 text-sm text-white/50",children:"Sin resultados. Ajusta la bsqueda."}):m.jsx("div",{className:"space-y-2",children:be.map(me=>{const Ae=(b.get(me.id)??me.name).split("  ").slice(0,-1).join("  ");return m.jsx(W1,{work:me,objective:y.get(me.objectiveId),parentChain:Ae,onSelect:Te=>{f(Te),A(!1),te("")}},me.id)})})}):null]}),B?null:m.jsx("p",{className:"rounded-2xl border border-dashed border-white/15 px-3 py-2 text-xs text-white/60",children:"Escribe para encontrar un reemplazo. Se mostrarn resultados coincidentes del catlogo."})]})}):null,z&&r?m.jsxs("div",{className:"grid gap-3 rounded-2xl border border-white/10 bg-slate-950/60 p-4",children:[Y?m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Descripcin"}),m.jsx("div",{className:"rounded-2xl border border-white/10 bg-slate-950/70 p-3",children:m.jsx(Ao,{content:W,enableWorkLinks:!0})})]}):null,ie?m.jsxs("div",{className:"space-y-2",children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-white/40",children:"Vdeos de referencia"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:V.map(me=>m.jsxs("a",{href:me,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-full border border-white/15 bg-white/5 px-3 py-1 text-xs font-medium text-white/80 transition hover:border-white/30 hover:text-white",children:[m.jsx("span",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-red-500/80 text-white shadow shadow-red-500/40",children:""}),"Ver vdeo"]},me))})]}):null]}):null,m.jsx("span",{className:"absolute -left-4 top-4 flex h-8 w-8 items-center justify-center rounded-full border border-white/20 bg-slate-950/90 text-xs font-semibold text-white/60",children:e.order+1})]})}function Nm({session:e,works:t,objectives:n,assistants:r,onDateChange:i}){const o=Ne(D=>D.updateSession),l=Ne(D=>D.addWorkToSession),u=Ne(D=>D.duplicateSessionWork),c=Ne(D=>D.removeWorkFromSession),f=Ne(D=>D.reorderSessionWork),h=Ne(D=>D.updateSessionWorkDetails),p=Ne(D=>D.replaceSessionWork),v=Ne(D=>D.setAttendanceStatus),y=e.kind==="personal",[b,k]=w.useState(""),[E,C]=w.useState(new Set),_=w.useMemo(()=>new Map(n.map(D=>[D.id,D])),[n]),j=w.useMemo(()=>new Map(t.map(D=>[D.id,D])),[t]),I=w.useMemo(()=>{const D=new Map,ne=(W,Y)=>{if(D.has(W))return D.get(W);const V=j.get(W);if(!V)return"";const ie=V.parentWorkId;if(!ie||Y.has(W))return D.set(W,V.name),V.name;Y.add(W);const z=ne(ie,Y);Y.delete(W);const L=z?`${z}  ${V.name}`:V.name;return D.set(W,L),L};return t.forEach(W=>ne(W.id,new Set)),D},[t,j]),M=w.useMemo(()=>{if(!b)return t;const D=b.toLowerCase();return t.filter(ne=>{const W=_.get(ne.objectiveId),Y=I.get(ne.id)??"";return ne.name.toLowerCase().includes(D)||ne.descriptionMarkdown.toLowerCase().includes(D)||(W==null?void 0:W.name.toLowerCase().includes(D))||Y.toLowerCase().includes(D)})},[t,b,_,I]),A=w.useCallback(D=>{const ne=I.get(D);if(!ne)return"";const W=ne.split("  ");return W.pop(),W.join("  ")},[I]),B=D=>{C(ne=>{const W=new Set(ne);return W.has(D)?W.delete(D):W.add(D),W})},te=D=>{l(e.id,{workId:D}),k("")},H=D=>{const{active:ne,over:W}=D;if(!W||ne.id===W.id)return;const Y=e.workItems.findIndex(ie=>ie.id===ne.id),V=e.workItems.findIndex(ie=>ie.id===W.id);Y===-1||V===-1||f(e.id,Y,V)},O=D=>ne=>{const W=ne.target.value;o(e.id,{[D]:W}),D==="date"&&i&&i(W)};return m.jsxs("div",{className:"space-y-6",children:[y?null:m.jsxs("div",{className:"grid gap-4 rounded-3xl border border-white/10 bg-white/5 p-6",children:[m.jsxs("div",{className:"grid gap-2 sm:grid-cols-3",children:[m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Ttulo"}),m.jsx("input",{type:"text",className:"input-field",value:e.title,onChange:O("title"),placeholder:"Nombre de la sesin"})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Fecha"}),m.jsx("input",{type:"date",className:"input-field",value:e.date,onChange:O("date")})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Hora de inicio"}),m.jsx("input",{type:"time",className:"input-field",value:e.startTime??"18:30",onChange:O("startTime")})]})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Descripcin"}),m.jsx("textarea",{className:"input-field min-h-[120px]",value:e.description??"",onChange:O("description"),placeholder:"Contexto general, objetivos o recordatorios"})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Notas privadas"}),m.jsx("textarea",{className:"input-field min-h-[100px]",value:e.notes??"",onChange:O("notes"),placeholder:"Notas para ti o recordatorios de material"})]})]}),m.jsxs("section",{className:"space-y-4",children:[m.jsxs("header",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-white",children:"Trabajos en la sesin"}),m.jsx("p",{className:"text-sm text-white/60",children:"Arrastra para reorganizar, pulsa  para ajustar detalles."})]}),m.jsxs("div",{className:"relative w-full sm:w-72",children:[m.jsx("input",{type:"search",className:"input-field",value:b,onChange:D=>k(D.target.value),placeholder:"Buscar en catlogo"}),b&&m.jsx("div",{className:"absolute top-12 z-10 max-h-72 w-full overflow-y-auto rounded-2xl border border-white/10 bg-slate-900/95 p-2 shadow-xl",children:M.length===0?m.jsx("p",{className:"p-4 text-sm text-white/50",children:"Sin resultados. Revisa el catlogo."}):m.jsx("div",{className:"space-y-2",children:M.map(D=>m.jsx(W1,{work:D,objective:_.get(D.objectiveId),parentChain:A(D.id),onSelect:te},D.id))})})]})]}),m.jsx("div",{className:"space-y-4",children:m.jsx(e3,{collisionDetection:tF,onDragEnd:H,children:m.jsx(h3,{items:e.workItems.map(D=>D.id),strategy:d3,children:m.jsx("div",{className:"space-y-5",children:e.workItems.length===0?m.jsx("div",{className:"rounded-3xl border border-dashed border-white/20 p-10 text-center text-white/50",children:"Aade trabajos desde el catlogo con el buscador superior."}):(()=>{let D=0;const ne=kc(e.startTime,"18:30");return e.workItems.map(W=>{const Y=j.get(W.workId),V=Y?_.get(Y.objectiveId):void 0,ie=W.customDurationMinutes??(Y==null?void 0:Y.estimatedMinutes)??0,z=jp(ne+D);return D+=ie,m.jsx(k3,{item:W,work:Y,objective:V,expanded:E.has(W.id),isPersonal:y,onToggleExpanded:B,onRemove:()=>c(e.id,W.id),onDuplicate:()=>u(e.id,W.id),onUpdateDetails:(L,Q)=>h(e.id,L,Q),onReplace:L=>p(e.id,W.id,L),startTimeLabel:z,durationMinutes:ie,works:t,objectiveMap:_,workPathById:I},W.id)})})()})})})})]}),y?null:m.jsxs("section",{className:"space-y-4",children:[m.jsx("header",{className:"flex flex-col gap-1 sm:flex-row sm:items-baseline sm:justify-between",children:m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-white",children:"Previsin de asistencia"}),m.jsx("p",{className:"text-sm text-white/60",children:"Indica quin esperas que asista. La asistencia real se marca durante la sesin desde la Home."})]})}),m.jsx("div",{className:"space-y-2 rounded-3xl border border-white/10 bg-white/5 p-4",children:r.length===0?m.jsx("p",{className:"text-sm text-white/60",children:"An no tienes asistentes definidos. Adelos desde la seccin correspondiente para empezar a registrar asistencia."}):r.map(D=>{const ne=e.attendance.find(V=>V.assistantId===D.id),W=(ne==null?void 0:ne.status)??"pending",Y=ne==null?void 0:ne.actualStatus;return m.jsxs("div",{className:"flex flex-col gap-2 rounded-2xl border border-white/10 bg-slate-950/60 p-3 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-semibold text-white",children:D.name}),D.notes?m.jsx("p",{className:"text-xs text-white/50",children:D.notes}):null,Y?m.jsxs("p",{className:"text-xs text-white/40",children:["ltimo registro real: ",J0[Y]]}):null]}),m.jsx("div",{className:"flex items-center gap-2",children:["present","absent","pending"].map(V=>m.jsx("button",{type:"button",onClick:()=>v(e.id,D.id,V),className:ze("rounded-full px-3 py-1 text-xs font-semibold transition",W===V?V==="present"?"border border-emerald-500/60 bg-emerald-500/20 text-emerald-200":V==="absent"?"border border-rose-500/60 bg-rose-500/20 text-rose-200":"border border-white/30 bg-white/10 text-white":"border border-white/10 text-white/60 hover:border-white/30 hover:text-white"),children:J0[V]},V))})]},D.id)})})]})]})}function Q0(e){if(!e)return null;const t=e.trim().toLowerCase();if(!t)return null;if(/^\\d+(\\.\\d+)?$/.test(t))return Math.floor(Number(t));if(/^(\\d+:)+\\d+$/.test(t)){const r=t.split(":").map(i=>Number(i));return r.some(i=>Number.isNaN(i))?null:r.reduce((i,o)=>i*60+o,0)}const n=t.match(/^(?:(\\d+)h)?(?:(\\d+)m)?(?:(\\d+)s?)?$/i);if(n){const r=n[1]?Number(n[1]):0,i=n[2]?Number(n[2]):0,o=n[3]?Number(n[3]):0;if(r||i||o)return r*3600+i*60+o}return null}function S3(e){if(!e)return null;try{const t=new URL(e),n=t.hostname.replace("www.","");let r="";if(n==="youtu.be"?r=t.pathname.slice(1).split("/")[0]??"":n.endsWith("youtube.com")?t.searchParams.has("v")?r=t.searchParams.get("v")??"":(t.pathname.startsWith("/shorts/")||t.pathname.startsWith("/embed/"))&&(r=t.pathname.split("/")[2]??""):n==="youtube-nocookie.com"&&t.pathname.startsWith("/embed/")&&(r=t.pathname.split("/")[2]??""),!r)return null;const i=new URL(`https://www.youtube-nocookie.com/embed/${r}`),o=Q0(t.searchParams.get("start")??t.searchParams.get("t"));o!==null&&i.searchParams.set("start",String(o));const l=Q0(t.searchParams.get("end"));l!==null&&i.searchParams.set("end",String(l));const u=t.searchParams.get("list");return u&&i.searchParams.set("list",u),i.toString()}catch{return null}}function Tm({url:e,title:t,maxWidth:n=300,className:r}){const i=e.trim();if(!i)return null;const o=S3(i);return o?m.jsx("div",{className:ze("flex w-full justify-center",r),children:m.jsx("div",{className:"overflow-hidden rounded-2xl border border-white/10 bg-black shadow-inner shadow-black/50",style:{maxWidth:n},children:m.jsx("iframe",{src:o,title:t,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0,className:"block w-full",style:{aspectRatio:"16 / 9"}})})}):m.jsx("div",{className:ze("flex w-full justify-center",r),children:m.jsx("a",{href:i,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-full border border-amber-400/30 bg-amber-500/10 px-3 py-1 text-xs font-semibold text-amber-200 transition hover:border-amber-400 hover:text-white",children:"URL no reconocida, abrir enlace"})})}function E3(e){return Array.from(new Set((e??[]).map(t=>t.trim().toLowerCase()).filter(t=>t.length>0)))}function H1({title:e,titleExtra:t,subtitle:n,objective:r,checked:i,onCheckedChange:o,orderNumber:l,startLabel:u,durationMinutes:c,tags:f,statusPill:h,lastSeenLabel:p,descriptionMarkdown:v,notesMarkdown:y,videoUrls:b,isExpanded:k,onToggleExpanded:E,actions:C,detailsActions:_}){const j=(t??"").trim(),I=j.length>0,M=(n??"").trim(),A=(v??"").trim(),B=(y??"").trim(),te=(b??[]).map(V=>V.trim()).filter(Boolean),H=E3(f),O=H.length>0,D=!!u||typeof c=="number"||!!p,ne=A.length>0||B.length>0||te.length>0,W=!!_,Y=()=>{ne&&E()};return m.jsxs("article",{role:ne?"button":void 0,tabIndex:ne?0:void 0,onClick:()=>Y(),onKeyDown:V=>{ne&&(V.key==="Enter"||V.key===" ")&&(V.preventDefault(),Y())},className:ze("flex flex-col gap-2.5 rounded-3xl border border-white/10 bg-white/5 p-2.5 shadow shadow-black/20 sm:gap-3 sm:p-4",ne&&"cursor-pointer hover:border-white/20"),style:r?{background:`linear-gradient(120deg, ${r.colorHex}1a, rgba(15,23,42,0.8))`}:void 0,children:[m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("label",{className:"mt-1 flex items-center gap-3 text-left",onClick:V=>V.stopPropagation(),onKeyDown:V=>V.stopPropagation(),children:m.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded-full border-2 border-white/30 bg-transparent text-sky-400 transition focus:ring-sky-400",checked:i,onChange:V=>o(V.target.checked)})}),m.jsxs("div",{className:"flex-1 space-y-2",children:[m.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[m.jsxs("p",{className:"text-lg font-semibold text-white",children:[e,I?m.jsxs("span",{className:"ml-2 text-sky-300",children:[" ",j]}):null]}),h?m.jsx("span",{className:ze("inline-flex items-center rounded-full border px-2 py-0.5 text-[11px] font-semibold",h.className),children:h.label}):null]}),M?m.jsx("p",{className:"text-sm text-white/70",children:M}):null,D?m.jsxs("p",{className:"text-sm text-white/60",children:[u?m.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:u}):null,u&&typeof c=="number"?m.jsx("span",{className:"mx-2 text-white/30",children:""}):null,typeof c=="number"?m.jsxs("span",{children:[c," min"]}):null,(u||typeof c=="number")&&p?m.jsx("span",{className:"mx-2 text-white/30",children:""}):null,p?m.jsxs("span",{className:"text-xs text-white/50",children:["ltima vez: ",p]}):null]}):null]}),m.jsx(zi,{objective:r,size:"sm"})]}),O?m.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-[11px] uppercase tracking-wide text-white/40",children:[H.slice(0,8).map(V=>m.jsx("span",{className:"rounded-full border border-white/10 px-2 py-0.5",children:V},V)),H.length>8?m.jsxs("span",{className:"text-white/50",children:["+",H.length-8]}):null]}):null,ne?m.jsxs("div",{className:"flex items-center gap-3 text-xs text-white/50",children:[m.jsxs("button",{type:"button",onClick:V=>{V.stopPropagation(),Y()},className:"inline-flex items-center gap-2 rounded-full border border-white/15 px-3 py-1 text-xs font-semibold text-white/70 transition hover:border-white/30 hover:text-white",children:[m.jsx("span",{className:ze("transition-transform",k?"rotate-90":"rotate-0"),children:""}),k?"Ocultar detalles":"Ver detalles"]}),te.length>0?m.jsxs("span",{children:[te.length," vdeo",te.length>1?"s":""]}):null]}):null]}),m.jsx("div",{className:ze("mt-1 flex h-10 w-10 items-center justify-center rounded-full border border-white/10 text-xs font-semibold uppercase text-white/60",i?"bg-white/20 text-white":""),children:l})]}),C?m.jsx("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-end",onClick:V=>V.stopPropagation(),onKeyDown:V=>V.stopPropagation(),children:C}):null,ne&&k?m.jsxs("div",{className:"space-y-3 rounded-2xl border border-white/10 bg-slate-950/40 p-3 sm:p-4",onClick:V=>V.stopPropagation(),onKeyDown:V=>V.stopPropagation(),children:[A?m.jsx(Ao,{content:A,enableWorkLinks:!0}):null,B?m.jsxs("div",{className:"space-y-2",children:[m.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-white/40",children:"Notas"}),m.jsx(Ao,{content:B,enableWorkLinks:!0})]}):null,te.length>0?m.jsxs("div",{className:"space-y-3",children:[m.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-white/40",children:"Vdeos"}),m.jsx("div",{className:"grid gap-4 lg:grid-cols-3",children:te.map((V,ie)=>m.jsxs("div",{className:"space-y-2",children:[m.jsx(Tm,{url:V,title:`${e} vdeo ${ie+1}`}),m.jsx("a",{href:V,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-full border border-white/15 bg-white/5 px-3 py-1 text-xs font-medium text-white/80 transition hover:border-white/30 hover:text-white",children:"Abrir en YouTube"})]},`${e}-video-${ie}`))})]}):null,W?m.jsx("div",{className:"flex flex-wrap items-center justify-end gap-2 pt-1",children:_}):null]}):null]})}function _3(e){const t=(e.day()+6)%7;return e.subtract(t,"day")}function C3(e){const t=_3(e.startOf("month"));return Array.from({length:6},(n,r)=>Array.from({length:7},(i,o)=>t.add(r*7+o,"day")))}function Wu(e,t){return Xe(e).format("YYYY-MM-DD")===Xe(t).format("YYYY-MM-DD")}Xe.locale("es");const j3={present:"Presente",absent:"Ausente",pending:"Pendiente"},N3={present:"border border-emerald-500/40 bg-emerald-500/10 text-emerald-100",absent:"border border-rose-500/40 bg-rose-500/10 text-rose-100",pending:"border border-white/20 bg-white/10 text-white/70"},T3=["present","absent"],I3={present:"Han venido",absent:"Faltan"},P3={present:"border border-emerald-500/60 bg-emerald-500/15 text-emerald-100 shadow shadow-emerald-500/15",absent:"border border-rose-500/60 bg-rose-500/10 text-rose-100 shadow shadow-rose-500/10"},A3="group inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-400/30 sm:text-sm",R3="border-emerald-500/60 bg-emerald-500/15 text-emerald-100 shadow-sm shadow-emerald-500/20 hover:border-emerald-400 hover:bg-emerald-500/20",O3="border-white/15 bg-white/5 text-white/60 hover:border-white/40 hover:text-white",M3="flex h-6 w-6 items-center justify-center rounded-full border text-[12px] transition sm:h-7 sm:w-7",D3="border-emerald-400 bg-emerald-400/20 text-emerald-100 shadow shadow-emerald-500/25",L3="border-white/25 text-white/40 group-hover:border-white/50 group-hover:text-white/80",$3=[];function F3(e){return Xe(e).locale("es").format("dddd, D [de] MMMM")}function z3(e){return Xe(e).format("MMMM YYYY")}function X0({mode:e,onChange:t}){return m.jsxs("div",{className:"flex items-center gap-2 rounded-full border border-white/10 bg-white/5 p-1",children:[m.jsx("button",{type:"button",className:ze("rounded-full px-4 py-2 text-sm font-semibold transition",e==="view"?"bg-white text-slate-900":"text-white/70 hover:text-white"),onClick:()=>{e!=="view"&&t("view")},children:"Vista"}),m.jsx("button",{type:"button",className:ze("rounded-full px-4 py-2 text-sm font-semibold transition",e==="edit"?"bg-white text-slate-900":"text-white/70 hover:text-white"),onClick:()=>{e!=="edit"&&t("edit")},children:"Editar"})]})}function B3({session:e,objectives:t,works:n,isActive:r,onSelect:i,onDuplicate:o,onDelete:l}){const u=w.useMemo(()=>new Map(t.map(p=>[p.id,p])),[t]),c=w.useMemo(()=>new Map(n.map(p=>[p.id,p])),[n]),f=w.useMemo(()=>{const p=e.workItems[0];if(!p)return;const v=c.get(p.workId);if(v)return u.get(v.objectiveId)},[e.workItems,c,u]),h=e.workItems.reduce((p,v)=>{const y=c.get(v.workId);return p+(v.customDurationMinutes??(y==null?void 0:y.estimatedMinutes)??0)},0);return m.jsxs("button",{type:"button",onClick:i,className:ze("group relative flex flex-col gap-3 rounded-3xl border border-white/10 bg-white/5 p-5 text-left transition hover:border-sky-400/50 hover:shadow-lg hover:shadow-sky-500/10",r&&"ring-2 ring-sky-400/70"),children:[f?m.jsx("div",{className:"absolute inset-0 -z-[1] rounded-3xl opacity-20 blur-2xl transition group-hover:opacity-40",style:{backgroundColor:f.colorHex}}):null,m.jsxs("div",{className:"flex items-start justify-between gap-2",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-lg font-semibold text-white",children:e.title||"Sesin sin ttulo"}),m.jsxs("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:[e.workItems.length," trabajos  ",h," min"]})]}),m.jsx(zi,{objective:f,size:"sm"})]}),m.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-white/60",children:[e.workItems.slice(0,3).map(p=>{const v=c.get(p.workId),y=((v==null?void 0:v.subtitle)??"").trim();return m.jsx("span",{className:"rounded-full border border-white/10 px-3 py-1",children:y?`${(v==null?void 0:v.name)??"Trabajo"}  ${y}`:(v==null?void 0:v.name)??"Trabajo"},p.id)}),e.workItems.length>3?m.jsxs("span",{className:"rounded-full border border-white/10 px-3 py-1",children:["+",e.workItems.length-3]}):null]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(zi,{objective:f,size:"sm"}),m.jsxs("div",{className:"ml-auto flex gap-2",children:[m.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),o()},className:"btn-secondary px-3 py-1 text-xs",children:"Duplicar"}),m.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),l()},className:"inline-flex items-center justify-center rounded-full border border-rose-500/40 px-3 py-1 text-xs font-semibold text-rose-300 transition hover:border-rose-400 hover:text-rose-200",children:"Eliminar"})]})]})]})}function U3(){const e=Ne($=>$.sessions),t=Ne($=>$.plans),n=Ne($=>$.works),r=Ne($=>$.objectives),i=Ne($=>$.assistants),o=Ne($=>$.addSession),l=Ne($=>$.duplicateSession),u=Ne($=>$.deleteSession),c=Ne($=>$.setAttendanceActualStatus),f=Ne($=>$.toggleSessionWorkCompletion),[h,p]=Mo(),v=(h.get("plan")??"").trim(),y=h.get("session")??void 0,b=h.get("mode")==="edit"?"edit":"view",k=w.useMemo(()=>t.filter($=>$.kind==="class"&&$.enabled),[t]),E=w.useMemo(()=>k.length===0?void 0:k.find(Z=>Z.id===v)??k[0],[k,v]),C=(E==null?void 0:E.id)??"classes";w.useEffect(()=>{if(!E||v===E.id)return;const $=new URLSearchParams(h);$.set("plan",E.id),p($,{replace:!0})},[E,v,h,p]);const _=w.useMemo(()=>e.filter($=>$.kind==="class"&&($.planId??"classes")===C),[e,C]),[j,I]=w.useState(()=>b==="edit"),[M,A]=w.useState(new Set),B=w.useMemo(()=>[..._].sort(($,Z)=>Xe($.date).valueOf()-Xe(Z.date).valueOf()),[_]),te=Xe().format("YYYY-MM-DD"),H=w.useMemo(()=>B.find($=>$.date>=te)??B[B.length-1],[B,te]),[O,D]=w.useState(()=>y&&_.some($=>$.id===y)?y:H==null?void 0:H.id),ne=$=>{const Z=new URLSearchParams(h);$==="edit"?Z.set("mode","edit"):Z.delete("mode"),p(Z,{replace:!0})};w.useEffect(()=>{y&&_.some($=>$.id===y)&&D(y)},[y,_]),w.useEffect(()=>{if(!(O&&_.some($=>$.id===O))){if(y&&_.some($=>$.id===y)){D(y);return}D(H==null?void 0:H.id)}},[O,y,_,H]);const W=w.useMemo(()=>O?B.find($=>$.id===O)??H:H,[B,O,H]),Y=w.useMemo(()=>{const $=(W==null?void 0:W.workItems)??[],Z=$.length,pe=$.filter(De=>De.completed??!1).length,ve=Z>0?Math.round(pe/Z*100):0;return{total:Z,done:pe,percent:ve}},[W==null?void 0:W.workItems]),V=w.useMemo(()=>{const $=new Map;return W&&B.forEach(Z=>{Z.date>=W.date||Z.workItems.forEach(pe=>{pe.workId&&$.set(pe.workId,Z.date)})}),$},[B,W]),ie=$=>{const Z=new URLSearchParams(h);$?Z.set("session",$):Z.delete("session"),p(Z,{replace:!0})},z=$=>{D($),ie($)},L=(W==null?void 0:W.date)??te,[Q,T]=w.useState(L),[F,J]=w.useState(Xe(L).startOf("month").format("YYYY-MM-DD"));w.useEffect(()=>{W&&(T(W.date),J(Xe(W.date).startOf("month").format("YYYY-MM-DD")))},[W]);const P=w.useMemo(()=>{const $=new Map;return _.forEach(Z=>{const pe=Xe(Z.date).format("YYYY-MM-DD"),ve=$.get(pe)??[];ve.push(Z),$.set(pe,ve)}),$.forEach(Z=>Z.sort((pe,ve)=>(pe.title??"").localeCompare(ve.title??"","es"))),$},[_]),be=w.useMemo(()=>P.get(Q)??[],[P,Q]),he=w.useMemo(()=>C3(Xe(F)),[F]),ge=w.useMemo(()=>{const $=Xe(F);return _.filter(Z=>{const pe=Xe(Z.date);return pe.year()===$.year()&&pe.month()===$.month()}).sort((Z,pe)=>Xe(Z.date).valueOf()-Xe(pe.date).valueOf())},[_,F]),me=w.useMemo(()=>{const $=new Map;return ge.forEach(Z=>{const pe=Xe(Z.date).format("YYYY-MM-DD"),ve=$.get(pe)??[];ve.push(Z),$.set(pe,ve)}),Array.from($.entries()).sort((Z,pe)=>Xe(Z[0]).valueOf()-Xe(pe[0]).valueOf()).map(([Z,pe])=>({date:Z,sessions:pe.slice().sort((ve,De)=>(ve.title??"").localeCompare(De.title??"","es"))}))},[ge]),je=$=>{T($),J(Xe($).startOf("month").format("YYYY-MM-DD"));const Z=P.get($)??[];Z.length>0?z(Z[0].id):z(void 0)},Ae=()=>{const $=o({date:Q,planId:C,title:"Nueva sesin",description:"",notes:""});z($.id)},Te=$=>{const Z=l($,Q);Z&&z(Z.id)},re=$=>{u($),O===$&&z(void 0)},Ie=$=>{const Z=Xe(F).add($,"month");J(Z.format("YYYY-MM-DD")),T(pe=>{const ve=Xe(pe);return ve.month()===Z.month()&&ve.year()===Z.year()?pe:Z.startOf("month").format("YYYY-MM-DD")})},Ue=w.useMemo(()=>new Map(r.map($=>[$.id,$])),[r]),We=w.useMemo(()=>new Map(n.map($=>[$.id,$])),[n]),tt=B.length===0,ot=w.useMemo(()=>i.filter($=>$.active).slice().sort(($,Z)=>$.name.localeCompare(Z.name,"es",{sensitivity:"base"})),[i]),St=(W==null?void 0:W.attendance)??$3,Qt=w.useMemo(()=>{const $=new Map;St.forEach(ve=>{$.set(ve.assistantId,ve)});let Z=0;ot.forEach(ve=>{var De;((De=$.get(ve.id))==null?void 0:De.actualStatus)==="present"&&(Z+=1)});const pe={present:Z,absent:Math.max(ot.length-Z,0)};return{map:$,summary:pe}},[St,ot]),qt=Qt.map,G=Qt.summary,fe=w.useMemo(()=>kc(W==null?void 0:W.startTime,"18:30"),[W==null?void 0:W.startTime]),ye=w.useMemo(()=>{if(!W)return new Map;let $=0;const Z=new Map;return W.workItems.forEach(pe=>{const ve=We.get(pe.workId),De=pe.customDurationMinutes??(ve==null?void 0:ve.estimatedMinutes)??0,Je=jp(fe+$);Z.set(pe.id,{startLabel:Je,duration:De}),$+=De}),Z},[W,We,fe]),Pe=W?B.findIndex($=>$.id===W.id):-1,Se=Pe>0,ae=Pe>=0&&Pe<B.length-1,R=()=>{Se&&z(B[Pe-1].id)},q=()=>{ae&&z(B[Pe+1].id)},ue=$=>{const Z=$.target.value;if(!Z)return;je(Z);const pe=P.get(Z);pe&&pe.length>0&&z(pe[0].id)},le=$=>{A(Z=>{const pe=new Set(Z);return pe.has($)?pe.delete($):pe.add($),pe})},ee=($,Z)=>{W&&c(W.id,$,Z)},de=j?m.jsxs("section",{className:"glass-panel space-y-6 p-6",children:[m.jsxs("header",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:"Calendario"}),m.jsx("h2",{className:"text-xl font-semibold text-white",children:z3(F)})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>Ie(-1),children:" Mes anterior"}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>Ie(1),children:"Mes siguiente "})]})]}),m.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.3fr_1.7fr]",children:[m.jsxs("section",{className:"space-y-4",children:[m.jsx("div",{className:"grid grid-cols-7 gap-2 text-center text-xs font-semibold uppercase tracking-wide text-white/50",children:["L","M","X","J","V","S","D"].map($=>m.jsx("div",{className:"rounded-full bg-white/5 py-2",children:$},$))}),m.jsx("div",{className:"grid grid-cols-7 gap-2",children:he.flat().map($=>{const Z=$.format("YYYY-MM-DD"),pe=P.get(Z)??[],ve=$.month()===Xe(F).month(),De=Wu(Z,te),Je=Wu(Z,Q);return m.jsxs("button",{type:"button",onClick:()=>je(Z),className:ze("relative flex h-20 flex-col items-center justify-between rounded-2xl border p-2 text-sm transition",Je?"border-sky-400/60 bg-sky-500/20 text-white shadow-lg shadow-sky-500/20":"border-white/10 bg-white/5 text-white/70 hover:border-white/30",!ve&&"text-white/30"),children:[m.jsx("span",{className:ze("flex h-8 w-8 items-center justify-center rounded-full text-base font-semibold",De?"bg-white text-slate-900":""),children:$.format("D")}),m.jsxs("div",{className:"flex w-full flex-wrap justify-center gap-1",children:[pe.slice(0,3).map(nt=>{const Ee=nt.workItems[0],Qe=Ee?n.find(Oe=>Oe.id===Ee.workId):void 0,He=Qe?r.find(Oe=>Oe.id===Qe.objectiveId):void 0;return m.jsx("span",{className:"h-2 w-6 rounded-full",style:{backgroundColor:(He==null?void 0:He.colorHex)??"rgba(255,255,255,0.4)"}},nt.id)}),pe.length>3?m.jsx("span",{className:"h-2 w-2 rounded-full border border-white/40"}):null]})]},Z)})})]}),m.jsxs("section",{className:"space-y-4",children:[m.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:"Sesiones en"}),m.jsx("h3",{className:"text-2xl font-semibold text-white",children:Xe(Q).format("dddd, D [de] MMMM")})]}),m.jsx("div",{className:"flex gap-3",children:m.jsx("button",{type:"button",onClick:Ae,className:"btn-primary",children:"+ Nueva sesin"})})]}),m.jsx("div",{className:"space-y-3",children:be.length===0?m.jsx("div",{className:"rounded-3xl border border-dashed border-white/15 p-10 text-center text-white/50",children:"An no hay sesiones planificadas este da. Crea una con el botn superior."}):be.map($=>m.jsx(B3,{session:$,objectives:r,works:n,isActive:$.id===(W==null?void 0:W.id),onSelect:()=>z($.id),onDuplicate:()=>Te($.id),onDelete:()=>re($.id)},$.id))}),me.length>0?m.jsxs("details",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[m.jsxs("summary",{className:"cursor-pointer text-sm font-semibold text-white/80",children:["Ver sesiones del mes (",ge.length,")"]}),m.jsx("div",{className:"custom-scrollbar mt-3 max-h-[22rem] space-y-3 overflow-y-auto pr-1",children:me.map(({date:$,sessions:Z})=>{const pe=Z.length===1?"1 sesin":`${Z.length} sesiones`;return m.jsxs("div",{role:"button",tabIndex:0,onClick:()=>je($),onKeyDown:ve=>{(ve.key==="Enter"||ve.key===" ")&&(ve.preventDefault(),je($))},className:ze("cursor-pointer rounded-2xl border border-white/10 bg-white/5 p-3 text-sm transition hover:border-white/40 hover:bg-white/10",Wu($,Q)&&"border-sky-400/50 bg-sky-500/10 shadow shadow-sky-500/10"),children:[m.jsxs("p",{className:"flex flex-wrap items-center gap-2 text-xs uppercase tracking-[0.3em] text-white/40",children:[m.jsx("span",{children:Xe($).format("ddd  D MMM")}),m.jsx("span",{className:"rounded-full border border-white/15 px-2 py-0.5 text-[9px] font-semibold tracking-[0.2em] text-white/50",children:pe})]}),m.jsx("div",{className:"mt-3 space-y-2 text-xs",children:Z.map(ve=>{const De=(ve.description??"").trim(),Je=ve.workItems.reduce((nt,Ee)=>{const Qe=n.find(He=>He.id===Ee.workId);return nt+(Ee.customDurationMinutes??(Qe==null?void 0:Qe.estimatedMinutes)??0)},0);return m.jsxs("button",{type:"button",onClick:nt=>{nt.stopPropagation(),je($),z(ve.id)},className:ze("flex w-full flex-col gap-1 rounded-xl border border-white/10 bg-slate-950/60 px-3 py-2 text-left transition hover:border-white/30 hover:text-white",ve.id===(W==null?void 0:W.id)&&Wu($,Q)&&"border-sky-400/60 text-white"),children:[m.jsxs("div",{className:"flex w-full items-center justify-between gap-3",children:[m.jsx("span",{className:"truncate font-medium",children:ve.title||"Sesin sin ttulo"}),m.jsxs("span",{className:"text-[11px] uppercase tracking-wide text-white/40",children:[ve.workItems.length,"  ",Je," min"]})]}),De?m.jsx("p",{className:"text-[11px] leading-relaxed text-white/60",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:De}):null]},ve.id)})})]},$)})})]}):null]})]})]}):null;return m.jsxs("div",{className:"space-y-6",children:[tt||!W?m.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-end",children:[m.jsx(X0,{mode:b,onChange:ne}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>I($=>!$),children:j?"Ocultar calendario":"Abrir calendario"})]}):null,de,tt?m.jsxs("section",{className:"glass-panel flex flex-col items-center justify-center gap-5 p-4 text-center sm:gap-6 sm:p-10",children:[m.jsx("div",{className:"grid h-28 w-28 place-items-center rounded-full bg-gradient-to-br from-sky-500/30 to-purple-500/30 shadow-lg shadow-sky-500/20 sm:h-32 sm:w-32",children:m.jsx("svg",{width:"52",height:"52",viewBox:"0 0 24 24",fill:"none",className:"text-white/80 sm:h-14 sm:w-14",children:m.jsx("path",{d:"M6 3v2M18 3v2M3.5 10h17M5 7h14a2 2 0 0 1 2 2v9a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3V9a2 2 0 0 1 2-2Z",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})})}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("p",{className:"text-lg font-semibold text-white sm:text-2xl",children:"An no hay sesiones"}),m.jsx("p",{className:"mx-auto max-w-md text-sm text-white/60 sm:text-base",children:"Crea tu primera sesin en el calendario y empieza a construir tu plan reutilizable."})]}),m.jsx("button",{type:"button",className:"btn-primary",onClick:()=>I(!0),children:"Abrir calendario"})]}):W?m.jsxs("section",{className:"glass-panel space-y-4 p-3 sm:space-y-6 sm:p-6 lg:p-8",children:[m.jsxs("header",{className:"space-y-3 sm:flex sm:items-start sm:justify-between sm:gap-6 sm:space-y-0",children:[m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs("div",{className:"flex items-center gap-2 text-xs uppercase tracking-[0.3em] text-white/40",children:[m.jsx("span",{className:"sm:hidden",children:"Sesin"}),m.jsx("span",{className:"hidden sm:inline",children:"Fecha"})]}),m.jsx("h2",{className:"font-display text-2xl font-semibold text-white sm:text-3xl",children:F3(W.date)}),m.jsx("p",{className:"text-sm font-medium text-white/80 sm:text-lg",children:W.title})]}),m.jsxs("div",{className:"flex flex-col gap-2.5 rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-sm text-white/70 sm:w-auto",children:[m.jsxs("div",{className:"flex items-center justify-between gap-4",children:[m.jsx("p",{className:"font-semibold text-white",children:"Duracin estimada"}),m.jsxs("span",{className:"rounded-full bg-white/10 px-3 py-1 text-xs text-white/80",children:[W.workItems.map($=>{const Z=We.get($.workId);return $.customDurationMinutes??(Z==null?void 0:Z.estimatedMinutes)??0}).reduce(($,Z)=>$+Z,0)||0," ","min"]})]}),m.jsxs("div",{children:[m.jsxs("p",{className:"mt-1 text-xs text-white/60",children:["Progreso: ",Y.done,"/",Y.total,"  ",Y.percent,"%"]}),m.jsx("div",{className:"mt-2 h-2 w-full overflow-hidden rounded-full border border-white/10 bg-slate-950/50",children:m.jsx("div",{className:"h-full rounded-full bg-white/25",style:{width:`${Math.min(Math.max(Y.percent,0),100)}%`}})})]}),m.jsxs("div",{className:"flex flex-col gap-2 sm:items-end",children:[m.jsx("label",{className:"text-[11px] uppercase tracking-wide text-white/40 sm:text-xs",children:"Ir a fecha"}),m.jsx("input",{type:"date",className:"input-field w-full sm:w-auto",value:W.date??te,onChange:ue})]})]})]}),m.jsxs("div",{className:"flex flex-col gap-2.5 sm:flex-row sm:flex-wrap sm:items-center sm:justify-between",children:[m.jsxs("div",{className:"flex flex-wrap gap-2",children:[m.jsx("button",{type:"button",onClick:R,disabled:!Se,className:"btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold disabled:opacity-40 sm:h-10 sm:text-sm",children:" Anterior"}),m.jsx("button",{type:"button",onClick:q,disabled:!ae,className:"btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold disabled:opacity-40 sm:h-10 sm:text-sm",children:"Siguiente "})]}),m.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[m.jsx(X0,{mode:b,onChange:ne}),m.jsx("button",{type:"button",className:"btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold sm:h-10 sm:text-sm",onClick:()=>I($=>!$),children:j?"Ocultar calendario":"Abrir calendario"})]})]}),b==="edit"?m.jsx("div",{className:"rounded-2xl border border-white/10 bg-slate-950/40 p-3 sm:p-4",children:m.jsx(Nm,{session:W,works:n,objectives:r,assistants:i,onDateChange:$=>{T($),J(Xe($).startOf("month").format("YYYY-MM-DD"))}})}):m.jsxs(m.Fragment,{children:[W.description&&m.jsx("div",{className:"rounded-2xl border border-white/5 bg-white/5 p-3 sm:p-4",children:m.jsx(Ao,{content:W.description})}),m.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[m.jsx("h3",{className:"text-sm uppercase tracking-[0.3em] text-white/40",children:"Trabajos"}),m.jsx("div",{className:"space-y-3 sm:space-y-4",children:W.workItems.map($=>{const Z=We.get($.workId),pe=Z?Ue.get(Z.objectiveId):void 0,ve=M.has($.id),De=ye.get($.id),Je=(De==null?void 0:De.startLabel)??jp(fe),nt=(De==null?void 0:De.duration)??$.customDurationMinutes??(Z==null?void 0:Z.estimatedMinutes)??0,Ee=($.focusLabel??"").trim(),Qe=$.customDescriptionMarkdown??(Z==null?void 0:Z.descriptionMarkdown)??"",He=((Z==null?void 0:Z.videoUrls)??[]).map(it=>it.trim()).filter(Boolean),Oe=((Z==null?void 0:Z.subtitle)??"").trim();return m.jsx(H1,{title:(Z==null?void 0:Z.name)??"Trabajo eliminado",titleExtra:Ee,subtitle:Oe,objective:pe,checked:$.completed??!1,onCheckedChange:it=>f(W.id,$.id,it),orderNumber:($.order??0)+1,startLabel:Je,durationMinutes:nt,tags:Z==null?void 0:Z.tags,lastSeenLabel:V.get($.workId)?Xe(V.get($.workId)).format("D MMM YYYY"):void 0,descriptionMarkdown:Qe,videoUrls:He,isExpanded:ve,onToggleExpanded:()=>le($.id)},$.id)})})]})]}),b==="view"?i.length===0?m.jsxs("div",{className:"rounded-2xl border border-dashed border-white/15 bg-white/5 p-3 text-xs text-white/70 sm:text-sm sm:p-4",children:[m.jsx("p",{className:"font-semibold text-white",children:"Quines participan?"}),m.jsx("p",{className:"mt-1",children:"Crea tu lista de asistentes para poder registrar quin ha venido a clase en tiempo real."}),m.jsx(Li,{to:"/assistants",className:"btn-secondary mt-3 h-8 rounded-2xl px-3 text-xs",children:"Gestionar asistentes"})]}):ot.length===0?m.jsxs("div",{className:"rounded-2xl border border-dashed border-white/15 bg-white/5 p-3 text-xs text-white/70 sm:text-sm sm:p-4",children:[m.jsx("p",{className:"font-semibold text-white",children:"Todos los asistentes estn inactivos."}),m.jsx("p",{className:"mt-1",children:"Activa al menos uno desde la seccin de asistentes para poder marcar su asistencia."}),m.jsx(Li,{to:"/assistants",className:"btn-secondary mt-3 h-8 rounded-2xl px-3 text-xs",children:"Ir a asistentes"})]}):m.jsxs("div",{className:"space-y-3 rounded-2xl border border-white/10 bg-slate-950/60 p-3 sm:space-y-4 sm:p-5",children:[m.jsxs("div",{className:"flex flex-col gap-2.5 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:"Asistencia en vivo"}),m.jsx("p",{className:"text-xs text-white/50 sm:text-sm",children:"Marca quin est presente en la sesin actual."})]}),m.jsx("div",{className:"flex flex-wrap gap-2",children:T3.map($=>m.jsxs("span",{className:ze("inline-flex items-center gap-2 rounded-full px-2.5 py-0.5 text-[11px] font-semibold sm:px-3 sm:py-1 sm:text-xs",P3[$]),children:[G[$]," ",I3[$]]},$))})]}),m.jsx("div",{className:"space-y-2",children:ot.map($=>{const Z=qt.get($.id),pe=(Z==null?void 0:Z.status)??"pending",ve=(Z==null?void 0:Z.actualStatus)==="present",De=()=>ee($.id,ve?"absent":"present");return m.jsx("article",{className:"rounded-2xl border border-white/10 bg-white/5 p-2.5 sm:p-4",children:m.jsxs("div",{className:"flex flex-col gap-2.5 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-semibold text-white",children:$.name}),m.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2 text-[11px] text-white/50 sm:text-xs",children:[m.jsx("span",{className:"uppercase tracking-wide text-white/40",children:"Previsin"}),m.jsx("span",{className:ze("inline-flex items-center gap-2 rounded-full px-2 py-0.5 font-semibold",N3[pe]),children:j3[pe]}),m.jsx("span",{className:"hidden text-white/30 sm:inline",children:""}),m.jsx("span",{className:"uppercase tracking-wide text-white/40",children:"Asistencia"}),m.jsx("span",{className:ze("font-semibold",ve?"text-emerald-200":"text-white/60"),children:ve?"Presente":"No asisti"})]})]}),m.jsxs("div",{className:"flex flex-col items-end gap-1 text-right sm:flex-row sm:items-center sm:gap-3",children:[m.jsxs("button",{type:"button",onClick:De,"aria-pressed":ve,"aria-label":`${ve?"Desmarcar asistencia de":"Marcar asistencia de"} ${$.name}`,title:ve?"Desmarcar asistencia":"Marcar como presente",className:ze(A3,ve?R3:O3),children:[m.jsx("span",{className:ze(M3,ve?D3:L3),children:ve?m.jsx("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 sm:h-4 sm:w-4","aria-hidden":"true",children:m.jsx("path",{d:"M4 8.5 6.5 11l5-6",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}):m.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-white/30 transition group-hover:bg-white/60"})}),m.jsx("span",{children:ve?"Ha asistido":"Marcar asistencia"})]}),m.jsx("span",{className:ze("text-[10px] font-medium uppercase tracking-[0.25em] sm:text-[11px]",ve?"text-emerald-200":"text-white/40"),children:ve?"PRESENTE":"AUSENTE"})]})]})},$.id)})})]}):null]}):m.jsx("div",{className:"glass-panel p-10 text-center text-white/60",children:"Selecciona una sesin desde el calendario."})]})}Xe.locale("es");const V1="personal-exclude",W3={ok:"OK",doubt:"Dudosa",fail:"Fallo"},H3={ok:"border-emerald-500/50 bg-emerald-500/15 text-emerald-100 hover:border-emerald-400",doubt:"border-amber-400/40 bg-amber-500/10 text-amber-200 hover:border-amber-300",fail:"border-rose-500/50 bg-rose-500/10 text-rose-200 hover:border-rose-400"};function Qc(e){return Array.from(new Set((e??[]).map(t=>t.trim().toLowerCase()).filter(t=>t.length>0)))}function vo(e,t){const n=Qc(e.tags),r=e.nodeType??"work";return!(t.byWorkIds&&t.byWorkIds.length>0&&!t.byWorkIds.includes(e.id)||t.byNodeTypes&&t.byNodeTypes.length>0&&!t.byNodeTypes.includes(r)||t.byTags&&t.byTags.length>0&&!t.byTags.map(o=>o.trim().toLowerCase()).filter(Boolean).every(o=>n.includes(o)))}function q1(e,t){const n=e.nodeType??"work",r=t.targetsDays[n]??t.targetsDays.work??7,i=Qc(e.tags),o=(t.overrides??[]).reduce((u,c)=>{var p,v;const f=((v=(p=c.match)==null?void 0:p.tagsAny)==null?void 0:v.map(y=>y.trim().toLowerCase()).filter(Boolean))??[];return f.length===0?u:f.some(y=>i.includes(y))?u*(c.multiplier||1):u},1);return Math.max(1,Math.round(r*o))}function V3(e){return(e.nodeType??"").trim().toLowerCase()!=="style"}function go(e,t){const n=typeof e.estimatedMinutes=="number"?e.estimatedMinutes:0;if(Number.isFinite(n)&&n>0)return n;const r=(e.nodeType??"work").trim().toLowerCase()||"work",i=t.defaultMinutesByNodeType[r]??t.defaultMinutesByNodeType.work??3;return Math.max(.25,Number(i)||3)}function q3(e){return e.startOf("day").diff(e.startOf("year"),"day")+1}function Y3(e,t){const n=Xe(t),r=Math.trunc(Number(e.number));if(!Number.isFinite(r))return!1;switch(e.kind){case"day_of_year":return q3(n)===r;case"day_of_month":return n.date()===r;case"day_of_week":return n.day()===r;default:return!1}}function Y1(e){var h,p,v;const t=e.groups??[];if(t.length>0)return[...t].sort((y,b)=>(y.order??0)-(b.order??0));const n=Math.max(0,Number((h=e.template)==null?void 0:h.focusMinutes)||18),r=Math.max(0,Number((p=e.template)==null?void 0:p.rouletteMinutes)||10),i=Math.max(0,Number((v=e.template)==null?void 0:v.recapMinutes)||0),o=e.focusSelectors??[],l=e.rouletteSelectors??[],u=o.length>0?o:[{byNodeTypes:["segment","form"]}],c=l.length>0?l:[{byNodeTypes:["technique"]},{byTags:["roulette"]}],f=[{id:"formas",name:"Formas",enabled:!0,order:1,type:"work",limitMode:"minutes",minutesBudget:n,strategy:"overdue",hierarchyRule:"prefer_leaves",include:u,exclude:[]},{id:"tecnicas",name:"Tcnicas",enabled:!0,order:2,type:"work",limitMode:"minutes",minutesBudget:r,strategy:"weighted",hierarchyRule:"allow_all",include:c,exclude:[]}];return i>0&&f.push({id:"recap",name:"Recap",enabled:!0,order:99,type:"note",limitMode:"minutes",minutesBudget:i}),f}function K3({mode:e,onChange:t}){return m.jsxs("div",{className:"flex items-center gap-2 rounded-full border border-white/10 bg-white/5 p-1",children:[m.jsx("button",{type:"button",className:ze("rounded-full px-4 py-2 text-sm font-semibold transition",e==="view"?"bg-white text-slate-900":"text-white/70 hover:text-white"),onClick:()=>{e!=="view"&&t("view")},children:"Vista"}),m.jsx("button",{type:"button",className:ze("rounded-full px-4 py-2 text-sm font-semibold transition",e==="edit"?"bg-white text-slate-900":"text-white/70 hover:text-white"),onClick:()=>{e!=="edit"&&t("edit")},children:"Editar"})]})}function G3(e){let t=2166136261;for(let n=0;n<e.length;n+=1)t^=e.charCodeAt(n),t=Math.imul(t,16777619);return t>>>0}function J3(e){let t=e>>>0;return()=>{t=t+1831565813>>>0;let n=Math.imul(t^t>>>15,1|t);return n^=n+Math.imul(n^n>>>7,61|n),((n^n>>>14)>>>0)/4294967296}}function Q3(e,t,n){const r=J3(G3(n));return e.map(i=>{const o=Math.max(1e-4,t(i)),l=Math.max(1e-9,r()),u=-Math.log(l)/o;return{item:i,score:u}}).sort((i,o)=>i.score-o.score).map(({item:i})=>i)}function X3(e){const t=new Map;return e.forEach(n=>{n.workItems.forEach(r=>{if(!((r.completed??!1)||typeof r.result<"u"))return;const o=t.get(r.workId);(!o||Xe(n.date).isAfter(o.date))&&t.set(r.workId,{date:n.date,result:r.result,effort:r.effort})})}),t}function Z3(e){const{works:t,personalSessions:n,cadence:r,today:i}=e,o=X3(n);return t.filter(l=>V3(l)).filter(l=>(l.nodeType??"").trim().toLowerCase()!=="reading"||!l.schedule?!0:Y3(l.schedule,i)).filter(l=>!Qc(l.tags).includes(V1)).map(l=>{const u=o.get(l.id),c=q1(l,r);if(!u)return{work:l,targetDays:c,overdueScore:1e4};const f=Math.max(Xe(i).diff(Xe(u.date),"day"),0),h=Math.max(f-c,0);return{work:l,targetDays:c,lastSeen:u.date,daysSince:f,overdueScore:h,lastResult:u.result}}).sort((l,u)=>{if(u.overdueScore!==l.overdueScore)return u.overdueScore-l.overdueScore;const c=l.daysSince??1e4,f=u.daysSince??1e4;return f!==c?f-c:l.work.name.localeCompare(u.work.name,"es",{sensitivity:"base"})})}function e5(e){return e?Xe(e).format("D MMM YYYY"):"Nunca"}function t5(e){const{dueList:t,plan:n,today:r,childCountByWorkId:i}=e,o=n.limitMode==="count"||n.limitMode==="both",l=n.limitMode==="minutes"||n.limitMode==="both",u=o?Math.max(1,Math.round(n.maxItems||12)):Number.POSITIVE_INFINITY,c=l?Math.max(0,Number(n.minutesBudget)||0):Number.POSITIVE_INFINITY,f=new Set([].filter(H=>(H.completed??!1)||typeof H.result<"u").map(H=>H.workId)),h=t.filter(H=>!f.has(H.work.id)),p=Xe(r).day(),v=Y1(n).filter(H=>H.enabled).filter(H=>{const O=H.daysOfWeek??[];return O.length===0||O.includes(p)}).sort((H,O)=>(H.order??0)-(O.order??0)),y=v.filter(H=>(H.type??"work")==="note").reduce((H,O)=>O.limitMode==="minutes"||O.limitMode==="both"?H+Math.max(0,Number(O.minutesBudget)||0):H,0),b=Number.isFinite(c)?Math.max(0,c-y):Number.POSITIVE_INFINITY,k=`kungfu-${r}`,E=H=>{const O=H.overdueScore>=1e4?1e3:Math.max(0,H.overdueScore+1);return H.lastResult==="fail"?O*1.6:H.lastResult==="doubt"?O*1.25:O},C=H=>go(H.work,n),_=H=>{const O=(H.nodeType??"work").trim().toLowerCase()||"work";return{segment:30,drill:22,form:20,work:10,application:0,technique:0,link:0,style:-100}[O]??5},j=H=>[...H].sort((O,D)=>{if(D.overdueScore!==O.overdueScore)return D.overdueScore-O.overdueScore;const ne=O.daysSince??1e4,W=D.daysSince??1e4;if(W!==ne)return W-ne;const Y=_(D.work)-_(O.work);return Y!==0?Y:O.work.name.localeCompare(D.work.name,"es",{sensitivity:"base"})}),I=new Set,M=[];let A=0,B=0;for(const H of v){if((H.type??"work")==="note"){M.push({group:H,items:[],plannedMinutes:0});continue}const D=H.include??[],ne=H.exclude??[];let W=h.filter(ge=>I.has(ge.work.id)||!(D.length===0?!0:D.some(Ae=>vo(ge.work,Ae)))?!1:!ne.some(Ae=>vo(ge.work,Ae)));if((H.hierarchyRule??"allow_all")==="prefer_leaves"){const ge=new Set(W.map(me=>me.work.parentWorkId).filter(Boolean));W=W.filter(me=>ge.has(me.work.id)?(i.get(me.work.id)??0)===0:!0)}const ie=(H.strategy??"overdue")==="weighted"?Q3(W,E,`${k}-${H.id}`):j(W),z=H.limitMode??"minutes",L=z==="count"||z==="both",Q=z==="minutes"||z==="both",T=Number(H.maxItems),F=L&&Number.isFinite(T)?Math.max(0,Math.round(T)):Number.POSITIVE_INFINITY,J=Number(H.minutesBudget),P=Q&&Number.isFinite(J)?Math.max(0,J):Number.POSITIVE_INFINITY,be=[];let he=0;for(const ge of ie){if(B>=u||be.length>=F)break;const me=C(ge);if(!(he+me>P)&&!(A+me>b)&&(be.push(ge),he+=me,A+=me,B+=1,I.add(ge.work.id),l&&A>=b))break}if(M.push({group:H,items:be,plannedMinutes:Math.round(he*10)/10}),B>=u||l&&A>=b)break}const te=Math.round((A+y)*10)/10;return{groups:M,plannedMinutes:{work:Math.round(A*10)/10,reserved:Math.round(y*10)/10,total:te},totalItems:B}}function n5(e){const{items:t,groups:n,worksById:r,resolveGroupLabelForItem:i}=e;if(t.length===0)return t;let o=[...t];const l=u=>(u.completed??!1)||typeof u.result<"u";return n.filter(u=>(u.type??"work")!=="note").forEach(u=>{const c=u.limitMode??"minutes";if(!(c==="count"||c==="both"))return;const h=Number(u.maxItems);if(!Number.isFinite(h)||h<=0)return;const p=[];if(o.forEach((C,_)=>{const j=r.get(C.workId);!j||i(C,j)!==u.name||p.push(_)}),p.length<=h)return;const v=p.reduce((C,_)=>C+(l(o[_])?1:0),0),y=Math.max(0,h-v),b=[];if(p.forEach(C=>{l(o[C])||b.push(C)}),b.length<=y)return;const k=b.length-y,E=new Set(b.slice(-k));o=o.filter((C,_)=>!E.has(_))}),o.map((u,c)=>({...u,order:c}))}function r5(){const e=Ne(R=>R.works),t=Ne(R=>R.sessions),n=Ne(R=>R.plans),r=Ne(R=>R.objectives),i=Ne(R=>R.assistants),o=Ne(R=>R.kungfuCadence),l=Ne(R=>R.kungfuTodayPlan);js();const u=Ne(R=>R.addSession),c=Ne(R=>R.addWorkToSession),f=Ne(R=>R.updateSessionWorkDetails),h=Ne(R=>R.updateSessionWorkItems),p=Ne(R=>R.updateSession),[v,y]=Mo(),b=(v.get("plan")??"").trim(),k=Xe().format("YYYY-MM-DD"),E=(v.get("date")??"").trim(),C=Xe(E,"YYYY-MM-DD",!0).isValid()?E:k,_=v.get("mode")==="edit"?"edit":"view",j=w.useMemo(()=>n.filter(R=>R.kind==="personal"&&R.enabled),[n]),I=w.useMemo(()=>j.length===0?void 0:j.find(q=>q.id===b)??j[0],[j,b]),M=(I==null?void 0:I.id)??"personal-kungfu";w.useEffect(()=>{if(!I||b===I.id)return;const R=new URLSearchParams(v);R.set("plan",I.id),y(R,{replace:!0})},[I,b,v,y]),w.useEffect(()=>{if(!!Xe(E,"YYYY-MM-DD",!0).isValid())return;const q=new URLSearchParams(v);q.set("date",C),y(q,{replace:!0})},[C,E,v,y]);const A=(I==null?void 0:I.cadence)??o,B=(I==null?void 0:I.todayPlan)??l,te=w.useMemo(()=>t.filter(R=>R.kind==="personal"&&(R.planId??"personal-kungfu")===M),[t,M]),H=w.useMemo(()=>te.find(R=>R.date===C),[te,C]),O=w.useMemo(()=>Z3({works:e,personalSessions:te,cadence:A,today:C}),[e,te,A,C]),D=w.useMemo(()=>{const R=new Map;return e.forEach(q=>{const ue=q.parentWorkId??"";ue&&R.set(ue,(R.get(ue)??0)+1)}),R},[e]),ne=w.useMemo(()=>new Map(e.map(R=>[R.id,R])),[e]),W=w.useMemo(()=>new Map(r.map(R=>[R.id,R])),[r]),[Y,V]=w.useState(null),[ie,z]=w.useState({}),[L,Q]=w.useState(new Set),T=w.useCallback(R=>{const q=(R??C).trim()||C,ue=te.find(le=>le.date===q);return ue||u({date:q,kind:"personal",planId:M,title:(I==null?void 0:I.name)??"Entrenamiento personal",description:"",notes:""})},[C,u,te,I==null?void 0:I.name,M]),F=w.useCallback(R=>{const q=(R??[]).slice().sort((ee,de)=>(ee.order??0)-(de.order??0)),ue=new Map,le=[];return q.forEach(ee=>{const de=ee.workId;if(!de)return;const $=ue.get(de);if(!$){ue.set(de,{...ee}),le.push(de);return}const Z={...$,customDescriptionMarkdown:$.customDescriptionMarkdown??ee.customDescriptionMarkdown,customDurationMinutes:$.customDurationMinutes??ee.customDurationMinutes,notes:$.notes??ee.notes,focusLabel:$.focusLabel??ee.focusLabel,completed:!!($.completed??!1)||!!(ee.completed??!1),result:$.result??ee.result,effort:$.effort??ee.effort};ue.set(de,Z)}),le.map((ee,de)=>({...ue.get(ee),order:de}))},[]);w.useEffect(()=>{if(!H)return;const R=H.workItems??[],q=R.reduce((ee,de)=>{const $=de.workId;return $&&ee.set($,(ee.get($)??0)+1),ee},new Map);if(!Array.from(q.values()).some(ee=>ee>1))return;const le=F(R);le.length!==R.length&&h(H.id,le)},[H,h,F]);const J=w.useMemo(()=>{const R=Xe(C).day();return Y1(B).filter(q=>q.enabled).filter(q=>{const ue=q.daysOfWeek??[];return ue.length===0||ue.includes(R)}).sort((q,ue)=>(q.order??0)-(ue.order??0))},[B,C]);w.useEffect(()=>{var le;const R={},q=(H==null?void 0:H.notesByGroupId)??void 0;q&&Object.entries(q).forEach(([ee,de])=>{const $=(ee??"").trim();$&&(R[$]=String(de??""))});const ue=((H==null?void 0:H.notes)??"").toString();if(ue.trim().length>0){const ee=((le=J.find(de=>(de.type??"work")==="note"))==null?void 0:le.id)??"note";R[ee]||(R[ee]=ue)}z(R)},[H==null?void 0:H.notes,H==null?void 0:H.notesByGroupId,J]);const P=w.useMemo(()=>{const R=new Map;return J.filter(q=>(q.type??"work")!=="note").forEach((q,ue)=>{R.set(q.name,ue)}),R},[J]),be=w.useCallback(R=>{const q=J.filter(ue=>(ue.type??"work")!=="note");for(const ue of q){const le=ue.include??[],ee=ue.exclude??[];if(!(!(le.length===0||le.some(Z=>vo(R,Z)))||ee.some(Z=>vo(R,Z))))return ue.name}return"Hoy"},[J]),he=w.useMemo(()=>new Set(J.filter(R=>(R.type??"work")!=="note").map(R=>R.name).filter(Boolean)),[J]),ge=w.useCallback((R,q)=>{const ue=(R.focusLabel??"").trim();return ue&&he.has(ue)?ue:be(q)},[he,be]),me=w.useCallback(R=>{const q=Ne.getState().sessions.find(le=>le.id===R);if(!q)return null;const ue=(q.workItems??[]).map(le=>{const ee=ne.get(le.workId);if(!ee)return le;const de=ge(le,ee);return de===le.focusLabel?le:{...le,focusLabel:de}});return ue.sort((le,ee)=>{const de=le.focusLabel??"Hoy",$=ee.focusLabel??"Hoy",Z=P.get(de)??999,pe=P.get($)??999;return Z!==pe?Z-pe:(le.order??0)-(ee.order??0)}),ue},[P,ne,ge]),[je,Ae]=w.useState(!1),Te=w.useCallback(R=>{if(!je&&O.length!==0){Ae(!0);try{const q=H??T(),le=(Ne.getState().sessions.find(Ee=>Ee.id===q.id)??q).workItems??[],ee=new Set(le.map(Ee=>Ee.workId));if((B.limitMode==="count"||B.limitMode==="both")&&ee.size>=Math.max(1,Math.round(B.maxItems||12))){R!=null&&R.includeDiagnostics&&(V({type:"success",text:"Plan ya est lleno por cantidad. Sube el mximo de tems en Ajustes."}),window.setTimeout(()=>V(null),2500));return}const $=new Map;le.forEach(Ee=>{const Qe=ne.get(Ee.workId);if(!Qe)return;const He=ge(Ee,Qe),Oe=J.find(dt=>dt.name===He),it=(Oe==null?void 0:Oe.id)??He,Ve=$.get(it)??{minutes:0,items:0};$.set(it,{minutes:Ve.minutes+go(Qe,B),items:Ve.items+1})});const Z=le.reduce((Ee,Qe)=>{const He=ne.get(Qe.workId);return He?Ee+go(He,B):Ee},0),pe={...B,maxItems:Math.max(0,Math.round((B.maxItems??0)-ee.size)),minutesBudget:Math.max(0,Number(B.minutesBudget??0)-Z),groups:J.map(Ee=>{const Qe=$.get(Ee.id),He={...Ee};return Qe&&(typeof Ee.minutesBudget=="number"&&Number.isFinite(Ee.minutesBudget)&&(He.minutesBudget=Math.max(0,Ee.minutesBudget-Qe.minutes)),typeof Ee.maxItems=="number"&&Number.isFinite(Ee.maxItems)&&(He.maxItems=Math.max(0,Math.round(Ee.maxItems-Qe.items)))),He})},ve=O.filter(Ee=>!ee.has(Ee.work.id)),De=t5({dueList:ve,todaySession:void 0,plan:pe,today:C,childCountByWorkId:D});let Je=0;De.groups.filter(Ee=>(Ee.group.type??"work")!=="note").forEach(Ee=>{Ee.items.forEach(Qe=>{c(q.id,{workId:Qe.work.id,focusLabel:Ee.group.name,customDurationMinutes:go(Qe.work,B)}),Je+=1})});const nt=me(q.id);if(nt){const Ee=F(nt),Qe=n5({items:Ee,groups:J,worksById:ne,resolveGroupLabelForItem:ge});h(q.id,Qe)}if(R!=null&&R.includeDiagnostics)if(Je>0)V({type:"success",text:`Plan actualizado: +${Je} tem${Je===1?"":"s"}.`}),window.setTimeout(()=>V(null),2e3);else{const Ee=J.filter(Qe=>(Qe.type??"work")!=="note").map(Qe=>{const He=Qe.include??[],Oe=Qe.exclude??[],it=ve.filter(vt=>(He.length===0?!0:He.some(wt=>vo(vt.work,wt)))?!Oe.some(wt=>vo(vt.work,wt)):!1),Ve=Qe.limitMode==="minutes"||Qe.limitMode==="both"?Math.max(0,Number(Qe.minutesBudget)||0):void 0,dt=Qe.limitMode==="count"||Qe.limitMode==="both"?Math.max(0,Math.round(Number(Qe.maxItems)||0)):void 0;return[`${Qe.name}: ${it.length} match`,typeof Ve=="number"?`${Ve}m`:null,typeof dt=="number"?`${dt} items`:null].filter(Boolean).join("  ")}).slice(0,3).join(" | ");V({type:"success",text:Ee?`No hay nuevos tems para aadir. ${Ee}`:"No hay nuevos tems para aadir con los lmites actuales."}),window.setTimeout(()=>V(null),4e3)}}finally{Ae(!1)}}},[je,O,H,T,B,ne,J,C,D,c,h,F,me,ge]),re=w.useCallback(()=>{if(je||!window.confirm("Recrear sesin volver a planificar el da seleccionado. Mantendr los tems ya registrados (OK/Dudosa/Fallo) y las notas, pero quitar el resto. Continuar?"))return;const q=H??T(),ue=(q.workItems??[]).filter(le=>(le.completed??!1)||typeof le.result<"u").map(le=>{const ee=ne.get(le.workId);return ee?{...le,focusLabel:ge(le,ee)}:le}).sort((le,ee)=>(le.order??0)-(ee.order??0)).map((le,ee)=>({...le,order:ee}));h(q.id,F(ue)),window.setTimeout(()=>Te({reason:"recreate",includeDiagnostics:!0}),0)},[F,T,Te,je,ge,H,h,ne]);w.useEffect(()=>{O.length===0||((H??T()).workItems??[]).some(le=>!!le.focusLabel)||Te({reason:"initial-seed"})},[O,B,C,D,h,ne,J,P,be,H,T,Te]);const Ie=H?H.workItems.filter(R=>(R.completed??!1)||typeof R.result<"u").length:0,Ue=w.useMemo(()=>J.filter(R=>(R.type??"work")==="note"),[J]),We=w.useMemo(()=>{const R=(H==null?void 0:H.workItems)??[],q=R.length,ue=R.filter(pe=>(pe.completed??!1)||typeof pe.result<"u").length,le=Ue.length,ee=Ue.filter(pe=>(ie[pe.id]??"").trim().length>0).length,de=q+le,$=ue+ee,Z=de>0?Math.round($/de*100):0;return{total:de,done:$,percent:Z,totalWorks:q,doneWorks:ue,totalNotes:le,doneNotes:ee}},[ie,Ue,H==null?void 0:H.workItems]),tt=w.useMemo(()=>{const R=new Map,q=new Map;return((H==null?void 0:H.workItems)??[]).slice().sort((le,ee)=>(le.order??0)-(ee.order??0)).forEach(le=>{const ee=O.find(nt=>nt.work.id===le.workId),de=ne.get(le.workId);if(!de)return;const $=(le.completed??!1)||typeof le.result<"u",Z={work:de,targetDays:q1(de,A),overdueScore:0,lastSeen:ee==null?void 0:ee.lastSeen,daysSince:ee==null?void 0:ee.daysSince,lastResult:ee==null?void 0:ee.lastResult},pe=ee??Z,ve=ge(le,de),De=R.get(ve)??[];De.push(pe),R.set(ve,De);const Je=q.get(ve)??{total:0,done:0};Je.total+=1,$&&(Je.done+=1),q.set(ve,Je)}),Array.from(R.entries()).map(([le,ee])=>{const de=q.get(le)??{total:ee.length,done:0};return{label:le,entries:ee,total:de.total,done:de.done}}).sort((le,ee)=>{const de=P.get(le.label)??999,$=P.get(ee.label)??999;return de!==$?de-$:le.label.localeCompare(ee.label,"es",{sensitivity:"base"})})},[H==null?void 0:H.workItems,O,ne,A,P,ge]),ot=w.useMemo(()=>{const R=new Map(tt.map(le=>[le.label,le])),q=new Set,ue=[];return J.forEach(le=>{if((le.type??"work")==="note"){ue.push({kind:"note",group:le});return}const ee=R.get(le.name);ee&&(q.add(ee.label),ue.push({kind:"work",...ee}))}),tt.forEach(le=>{q.has(le.label)||ue.push({kind:"work",...le})}),ue},[J,tt]),St=R=>{const q=R.work,le=Qc(q.tags).filter(Oe=>Oe!==V1),ee=L.has(q.id),de=H==null?void 0:H.workItems.find(Oe=>Oe.workId===q.id),$=de==null?void 0:de.result,Z=!!((de==null?void 0:de.completed)??!1)||typeof(de==null?void 0:de.result)<"u",pe=(q.videoUrls??[]).map(Oe=>Oe.trim()).filter(Boolean),ve=W.get(q.objectiveId),De=(de==null?void 0:de.customDurationMinutes)??q.estimatedMinutes??go(q,B),Je=((de==null?void 0:de.focusLabel)??"").trim(),nt=Je&&he.has(Je)?"":Je,Ee=$?{label:W3[$],className:H3[$]}:void 0,Qe=()=>Q(Oe=>{const it=new Set(Oe);return it.has(q.id)?it.delete(q.id):it.add(q.id),it}),He=Oe=>{const it=T(),Ve=it.workItems.find(dt=>dt.workId===q.id);if(!Ve){const dt=c(it.id,{workId:q.id,focusLabel:ge({focusLabel:void 0},q),customDurationMinutes:De});if(!dt)return;f(it.id,dt.id,{completed:Oe,result:Oe?"ok":void 0});return}Oe?f(it.id,Ve.id,{completed:!0,result:Ve.result??"ok"}):f(it.id,Ve.id,{completed:!1,result:void 0})};return m.jsx(H1,{title:q.name,titleExtra:nt,subtitle:q.subtitle,objective:ve,checked:Z,onCheckedChange:He,orderNumber:((de==null?void 0:de.order)??0)+1,durationMinutes:De,tags:le,statusPill:Ee,lastSeenLabel:e5(R.lastSeen),descriptionMarkdown:q.descriptionMarkdown,notesMarkdown:q.notes,videoUrls:pe,isExpanded:ee,onToggleExpanded:Qe,detailsActions:m.jsx(Li,{to:`/catalog?workId=${encodeURIComponent(q.id)}`,className:"btn-secondary",children:"Editar en catlogo"})},q.id)},Qt=R=>{var Z;const q=T(),ue=(R??"").trim();if(!ue)return;const le=ie[ue]??"",ee=le.trim().length===0,de={...q.notesByGroupId??{}};ee?delete de[ue]:de[ue]=le;const $=((Z=J.find(pe=>(pe.type??"work")==="note"))==null?void 0:Z.id)??ue;p(q.id,{notesByGroupId:Object.keys(de).length>0?de:void 0,notes:de[$]??""})};w.useEffect(()=>{H||T(C)},[C,H,T]);const qt=w.useMemo(()=>{const R=(H==null?void 0:H.workItems)??[];return Math.round(R.reduce((q,ue)=>{const le=ne.get(ue.workId);if(!le)return q;const ee=ue.customDurationMinutes??le.estimatedMinutes??go(le,B);return q+ee},0))},[H==null?void 0:H.workItems,ne,B]),G=R=>{const q=new URLSearchParams(v);R==="edit"?q.set("mode","edit"):q.delete("mode"),y(q,{replace:!0})},fe=R=>{const q=new URLSearchParams(v);q.set("date",R),q.delete("session"),y(q,{replace:!0})},ye=R=>{const q=R.target.value;q&&fe(Xe(q).format("YYYY-MM-DD"))},Pe=()=>fe(Xe(C).subtract(1,"day").format("YYYY-MM-DD")),Se=()=>fe(Xe(C).add(1,"day").format("YYYY-MM-DD")),ae=()=>fe(k);return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("header",{className:"glass-panel space-y-4 p-3 sm:space-y-6 sm:p-6 lg:p-8",children:[m.jsxs("div",{className:"space-y-3 sm:flex sm:items-start sm:justify-between sm:gap-6 sm:space-y-0",children:[m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs("div",{className:"flex items-center gap-2 text-xs uppercase tracking-[0.3em] text-white/40",children:[m.jsx("span",{className:"sm:hidden",children:"Sesin"}),m.jsx("span",{className:"hidden sm:inline",children:"Fecha"})]}),m.jsx("h1",{className:"font-display text-2xl font-semibold text-white sm:text-3xl",children:Xe(C).format("dddd, D [de] MMMM")}),m.jsx("p",{className:"text-sm font-medium text-white/80 sm:text-lg",children:(H==null?void 0:H.title)??(I==null?void 0:I.name)??"Entrenamiento personal"})]}),m.jsxs("div",{className:"flex flex-col gap-2.5 rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-sm text-white/70 sm:w-auto",children:[m.jsxs("div",{className:"flex items-center justify-between gap-4",children:[m.jsx("p",{className:"font-semibold text-white",children:"Duracin estimada"}),m.jsxs("span",{className:"rounded-full bg-white/10 px-3 py-1 text-xs text-white/80",children:[qt," min"]})]}),m.jsxs("div",{children:[m.jsxs("p",{className:"mt-1 text-xs text-white/50",children:[Ie," ",Ie===1?"tem registrado":"tems registrados"]}),m.jsxs("p",{className:"mt-2 text-xs text-white/60",children:["Progreso: ",We.done,"/",We.total,"  ",We.percent,"%"]}),m.jsx("div",{className:"mt-2 h-2 w-full overflow-hidden rounded-full border border-white/10 bg-slate-950/50",children:m.jsx("div",{className:"h-full rounded-full bg-white/25",style:{width:`${Math.min(Math.max(We.percent,0),100)}%`}})})]}),m.jsxs("div",{className:"flex flex-col gap-2 sm:items-end",children:[m.jsx("label",{className:"text-[11px] uppercase tracking-wide text-white/40 sm:text-xs",children:"Ir a fecha"}),m.jsx("input",{type:"date",className:"input-field w-full sm:w-auto",value:C,onChange:ye})]})]})]}),m.jsxs("div",{className:"flex flex-col gap-2.5 sm:flex-row sm:flex-wrap sm:items-center sm:justify-between",children:[m.jsxs("div",{className:"flex flex-wrap gap-2",children:[m.jsx("button",{type:"button",onClick:Pe,className:"btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold sm:h-10 sm:text-sm",children:" Anterior"}),m.jsx("button",{type:"button",onClick:ae,disabled:C===k,className:"btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold disabled:opacity-40 sm:h-10 sm:text-sm",children:"Hoy"}),m.jsx("button",{type:"button",onClick:Se,className:"btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold sm:h-10 sm:text-sm",children:"Siguiente "})]}),m.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[m.jsx(K3,{mode:_,onChange:G}),m.jsx("button",{type:"button",onClick:re,disabled:je||O.length===0,className:"btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold disabled:opacity-50 sm:h-10 sm:text-sm",title:"Rehace la planificacin del da manteniendo lo registrado",children:je?"Recreando":"Recrear sesin"})]})]}),Y&&m.jsx("div",{className:ze("mt-4 rounded-2xl border px-4 py-3 text-sm",Y.type==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-rose-500/40 bg-rose-500/10 text-rose-200"),children:Y.text})]}),O.length===0?m.jsxs("div",{className:"glass-panel p-10 text-center text-white/50",children:["No hay ningn trabajo incluido en tu programa activo. Aade la tag ",m.jsx("span",{className:"font-semibold text-white",children:"kungfu"})," a los trabajos que quieras entrenar."]}):_==="edit"?m.jsxs("section",{className:"space-y-4",children:[H?m.jsx("div",{className:"glass-panel p-3 sm:p-4",children:m.jsx(Nm,{session:H,works:e,objectives:r,assistants:i})}):m.jsx("div",{className:"glass-panel p-10 text-center text-white/60",children:"Cargando sesin"}),ot.filter(R=>R.kind==="note").map(R=>{const q=R.group.id,ue=ie[q]??"",le=ue.trim().length>0;return m.jsxs("div",{className:"glass-panel space-y-3 p-6",children:[m.jsx("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between",children:m.jsxs("div",{children:[m.jsxs("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:[R.group.name," (",Math.max(0,Number(R.group.minutesBudget)||0)," min)"]}),m.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[m.jsx("span",{className:ze("rounded-full border px-3 py-1 text-xs font-semibold",le?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-white/15 bg-white/5 text-white/60"),children:le?"OK":"Pendiente"}),m.jsx("p",{className:"text-sm text-white/60",children:"Notas de la sesin  se guarda al salir del campo."})]})]})}),m.jsx("textarea",{className:"input-field min-h-[120px] w-full resize-y",value:ue,onChange:ee=>z(de=>({...de,[q]:ee.target.value})),onBlur:()=>Qt(q),placeholder:"Escribe aqu"})]},R.group.id)})]}):m.jsx("section",{className:"space-y-4",children:m.jsxs("div",{className:"space-y-3",children:[tt.length===0?m.jsxs("div",{className:"glass-panel p-10 text-center text-white/50",children:["No hay tems planificados para hoy. Revisa ",m.jsx("span",{className:"font-semibold text-white",children:"Ajustes"})," o marca ms trabajos como entrenables."]}):null,ot.map(R=>{if(R.kind==="note"){const ee=R.group.id,de=ie[ee]??"",$=de.trim().length>0;return m.jsxs("div",{className:"glass-panel space-y-3 p-6",children:[m.jsx("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between",children:m.jsxs("div",{children:[m.jsxs("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:[R.group.name," (",Math.max(0,Number(R.group.minutesBudget)||0)," min)"]}),m.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[m.jsx("span",{className:ze("rounded-full border px-3 py-1 text-xs font-semibold",$?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-white/15 bg-white/5 text-white/60"),children:$?"OK":"Pendiente"}),m.jsx("p",{className:"text-sm text-white/60",children:"Notas de la sesin  se guarda al salir del campo."})]})]})}),m.jsx("textarea",{className:"input-field min-h-[120px] w-full resize-y",value:de,onChange:Z=>z(pe=>({...pe,[ee]:Z.target.value})),onBlur:()=>Qt(ee),placeholder:"Escribe aqu"})]},R.group.id)}const q=Math.max(0,R.total),ue=Math.min(Math.max(0,R.done),q),le=q>0?Math.round(ue/q*100):0;return m.jsxs("section",{className:"glass-panel space-y-4 p-3 sm:space-y-5 sm:p-6",children:[m.jsx("header",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:m.jsxs("div",{children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:R.label}),m.jsxs("p",{className:"mt-1 text-sm text-white/60",children:[ue,"/",q," tem",q===1?"":"s","  ",le,"% completado"]}),m.jsx("div",{className:"mt-2 h-2 w-full overflow-hidden rounded-full border border-white/10 bg-slate-950/50",children:m.jsx("div",{className:"h-full rounded-full bg-white/25",style:{width:`${Math.min(Math.max(le,0),100)}%`}})})]})}),m.jsx("div",{className:"space-y-3 sm:space-y-4",children:R.entries.map(St)})]},R.label)})]})})]})}function i5(){const e=Ne(f=>f.plans),[t,n]=Mo(),r=(t.get("plan")??"").trim(),i=w.useMemo(()=>e.filter(f=>f.enabled),[e]),o=w.useMemo(()=>rm(i),[i]),l=w.useMemo(()=>o.length===0?void 0:o.find(h=>h.id===r)??o[0],[o,r]),u=(l==null?void 0:l.id)??"classes";w.useEffect(()=>{if(!l||r===l.id)return;const f=new URLSearchParams(t);f.set("plan",l.id),n(f,{replace:!0})},[l,r,t,n]);const c=f=>{const h=new URLSearchParams(t);h.set("plan",f),h.delete("session"),n(h,{replace:!0})};return l?m.jsxs("div",{className:"space-y-6",children:[m.jsx("header",{className:"glass-panel p-6 sm:p-10",children:m.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold",children:"Sesiones"}),m.jsx("p",{className:"text-white/60",children:"Vista unificada por planes."})]}),m.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(f=>m.jsx("button",{type:"button",onClick:()=>c(f.id),className:ze("rounded-full border px-4 py-2 text-sm font-semibold transition",f.id===u?"border-sky-400/70 bg-sky-500/10 text-white":"border-white/10 bg-white/5 text-white/70 hover:border-white/30 hover:text-white"),title:f.kind==="class"?"Plan de clases":"Plan personal",children:f.name},f.id))})]})}),l.kind==="class"?m.jsx(U3,{}):m.jsx(r5,{})]}):m.jsx("div",{className:"glass-panel p-10 text-center text-white/60",children:"No hay planes activos. Ve a Ajustes y crea/activa uno."})}function s5(){return m.jsx(i5,{})}function o5(){const[e]=Mo(),t=new URLSearchParams(e);return t.set("mode","edit"),m.jsx(Ja,{to:{pathname:"/",search:`?${t.toString()}`},replace:!0})}function jh(e){return Array.from(new Set(e))}function Ya({options:e,value:t,onChange:n,disabled:r=!1,placeholder:i="Search",allowCreate:o=!1,onCreate:l,maxSelected:u}){const[c,f]=w.useState(""),h=w.useMemo(()=>jh(t.map(C=>C.trim()).filter(Boolean)),[t]),p=w.useMemo(()=>new Set(h),[h]),v=w.useMemo(()=>new Map(e.map(C=>[C.value,C])),[e]),y=w.useMemo(()=>{const C=c.trim().toLowerCase();return C?e.filter(_=>(_.label??_.value).toLowerCase().includes(C)||_.value.toLowerCase().includes(C)):e},[e,c]),b=typeof u=="number"?h.length<u:!0,k=c.trim(),E=o&&!!k&&typeof l=="function"&&!e.some(C=>C.value.toLowerCase()===k.toLowerCase())&&!e.some(C=>(C.label??"").toLowerCase()===k.toLowerCase());return m.jsxs("div",{className:ze("space-y-2",r&&"opacity-60"),children:[h.length>0?m.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[h.map(C=>{var j;const _=((j=v.get(C))==null?void 0:j.label)??C;return m.jsxs("button",{type:"button",disabled:r,className:"inline-flex items-center gap-2 rounded-full border border-sky-500/30 bg-sky-500/10 px-3 py-1 text-xs font-semibold text-sky-100 transition hover:border-sky-400/50",onClick:()=>n(h.filter(I=>I!==C)),title:"Remove",children:[_,m.jsx("span",{className:"text-sky-200/80",children:""})]},C)}),m.jsx("button",{type:"button",disabled:r,className:"rounded-full border border-white/15 bg-white/5 px-3 py-1 text-xs font-semibold text-white/70 transition hover:border-white/30 hover:text-white",onClick:()=>n([]),children:"Clear"})]}):null,m.jsx("input",{type:"text",className:"input-field",value:c,disabled:r,placeholder:i,onChange:C=>f(C.target.value)}),m.jsx("div",{className:"max-h-48 overflow-auto rounded-2xl border border-white/10 bg-white/5 p-2",children:m.jsxs("div",{className:"flex flex-wrap gap-2",children:[E?m.jsxs("button",{type:"button",disabled:r||!b,className:"rounded-full border border-emerald-500/30 bg-emerald-500/10 px-3 py-1 text-xs font-semibold text-emerald-100 transition hover:border-emerald-400/50 disabled:opacity-50",onClick:()=>{const C=(l==null?void 0:l(k))??null;if(!C)return;const _=jh([...h,C.createdValue]);n(_),f("")},title:"Create",children:["+ Create ",k,""]}):null,y.map(C=>{const _=C.label??C.value,j=p.has(C.value);return m.jsx("button",{type:"button",disabled:r||!j&&!b,className:ze("rounded-full border px-3 py-1 text-xs font-semibold transition disabled:opacity-50",j?"border-sky-500/40 bg-sky-500/10 text-sky-100":"border-white/15 bg-white/5 text-white/70 hover:border-white/30 hover:text-white"),onClick:()=>{const I=j?h.filter(M=>M!==C.value):jh([...h,C.value]);n(I)},children:_},C.value)})]})})]})}const Z0={name:"",subtitle:"",objectiveId:"",parentWorkId:"",nodeType:"",scheduleKind:"",scheduleNumber:1,tags:[],orderHint:0,nextWorkId:"",variantOfWorkId:"",descriptionMarkdown:"",estimatedMinutes:10,notes:"",videoUrls:[""],visibility:"private",collaborators:[""]},a5=e=>Array.from(new Set((e??[]).map(t=>t.trim().toLowerCase()).filter(Boolean))),l5=e=>e==="day_of_year"||e==="day_of_month"||e==="day_of_week",Hu="__no_objective__",K1={private:"Privado",shared:"Compartido",public:"Pblico"},u5={private:"Solo t puedes ver y editar este trabajo.",shared:"Solo las personas que aadas pueden editarlo contigo.",public:"Cualquier persona con acceso al catlogo puede verlo. Solo tus editores pueden cambiarlo."},G1=5,Oa="personal-exclude";function c5({work:e,childCount:t,depth:n,expanded:r,isTreeCollapsed:i,isPersonalExcluded:o,canTogglePersonal:l,personalToggleBusy:u,nextLabel:c,variantLabel:f,onToggle:h,onToggleTree:p,onTogglePersonal:v,onEdit:y,onDuplicate:b,onCreateChild:k,onDelete:E}){var be;const C=(e.descriptionMarkdown??"").trim(),_=(e.subtitle??"").trim(),j=(e.notes??"").trim(),I=e.videoUrls.filter(he=>he.trim().length>0),M=C.length>0,A=_.length>0,B=j.length>0,te=I.length>0,H=M||B||te,O=t>0,D=n>0?{marginLeft:`${n*1.5}rem`}:void 0,ne=e.visibility??"private",W=K1[ne],Y=((be=e.collaboratorEmails)==null?void 0:be.length)??0,V=e.canEdit??!1,ie=e.isOwner??!1,z=(e.ownerEmail??"").trim(),L=(e.nodeType??"").trim(),Q=(e.tags??[]).filter(he=>he!==Oa),T=(L||"work").trim().toLowerCase(),F=Ne(he=>{var ge;return(ge=he.workTaxonomy.nodeTypes.find(me=>me.key===T))==null?void 0:ge.label}),J=(()=>{const he={form:"Forma",segment:"Segmento",application:"Aplicacin",technique:"Tcnica",drill:"Drill",reading:"Lectura",style:"Estilo",link:"Link",work:"Trabajo"},ge={form:"border-indigo-500/40 bg-indigo-500/15 text-indigo-100",segment:"border-sky-500/40 bg-sky-500/15 text-sky-100",application:"border-amber-500/40 bg-amber-500/15 text-amber-100",technique:"border-emerald-500/40 bg-emerald-500/15 text-emerald-100",drill:"border-purple-500/40 bg-purple-500/15 text-purple-100",reading:"border-fuchsia-500/40 bg-fuchsia-500/15 text-fuchsia-100",style:"border-white/20 bg-white/10 text-white/70",link:"border-white/20 bg-white/10 text-white/70",work:"border-white/20 bg-white/10 text-white/70"},me=F??he[T]??(L||"Trabajo"),je=ge[T]??ge.work;return m.jsx("span",{className:ze("inline-flex items-center rounded-full border px-3 py-1 text-xs font-semibold",je),children:me})})(),P=(()=>{const he={form:"border-indigo-500/25",segment:"border-sky-500/25",application:"border-amber-500/25",technique:"border-emerald-500/25",drill:"border-purple-500/25",reading:"border-fuchsia-500/25",work:"border-white/10"},ge={form:"bg-indigo-500",segment:"bg-sky-500",application:"bg-amber-500",technique:"bg-emerald-500",drill:"bg-purple-500",reading:"bg-fuchsia-500",work:""},me={form:"bg-indigo-400/60",segment:"bg-sky-400/60",application:"bg-amber-400/60",technique:"bg-emerald-400/60",drill:"bg-purple-400/60",reading:"bg-fuchsia-400/60",work:"bg-white/10"},je=he[T]??he.work,Ae=ge[T]??ge.work,Te=me[T]??me.work;return{borderClassName:je,glowClassName:Ae,barClassName:Te}})();return m.jsxs("article",{id:`work-${e.id}`,className:ze("group relative space-y-4 rounded-xl border bg-white/5 p-4 pb-5 shadow shadow-black/30",P.borderClassName),style:D,children:[m.jsx("div",{className:ze("absolute inset-y-0 left-0 w-1 rounded-r-full",P.barClassName),"aria-hidden":!0}),P.glowClassName?m.jsx("div",{className:ze("absolute inset-0 -z-[1] rounded-xl opacity-10 blur-3xl",P.glowClassName)}):null,m.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[m.jsxs("div",{role:H?"button":void 0,tabIndex:H?0:void 0,onClick:()=>{H&&h()},onKeyDown:he=>{H&&(he.key==="Enter"||he.key===" ")&&(he.preventDefault(),h())},className:ze("flex flex-1 items-start gap-3 border border-transparent px-2 py-2 text-left transition",H?"cursor-pointer hover:border-white/10 hover:bg-white/5 focus-visible:border-white/20 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-500/40":"cursor-default"),"aria-expanded":H?r:void 0,children:[O?m.jsx("button",{type:"button",onClick:he=>{he.stopPropagation(),p()},className:ze("mt-1 inline-flex h-8 w-8 items-center justify-center rounded-full border border-white/15 bg-white/5 text-sm font-semibold text-white/70 transition hover:border-white/30 hover:text-white"),"aria-label":i?"Mostrar trabajos hijos":"Ocultar trabajos hijos",title:i?"Mostrar hijos":"Ocultar hijos",children:i?"":""}):null,H?m.jsx("span",{className:ze("mt-1 inline-flex h-8 w-8 items-center justify-center rounded-full border border-white/15 bg-white/5 text-sm font-semibold text-white/70 transition",r?"rotate-90 border-white/30 text-white":""),"aria-hidden":!0,children:""}):null,m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-white",children:e.name}),A?m.jsx("p",{className:"text-sm text-white/70",children:_}):null,m.jsxs("p",{className:"text-sm text-white/60",children:[e.estimatedMinutes," minutos"]}),m.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-[11px] uppercase tracking-wide text-white/40",children:[m.jsx("span",{className:"rounded-full border border-white/20 px-2 py-0.5 text-[10px] font-semibold text-white/70",children:W}),Q.slice(0,3).map(he=>m.jsx("span",{className:"rounded-full border border-white/10 px-2 py-0.5 text-[10px] font-semibold text-white/60",children:he},he)),ie?m.jsx("span",{children:"Propietario"}):z?m.jsx("span",{children:z}):null,Y>0?m.jsxs("span",{children:["+",Y," colaborador",Y===1?"":"es"]}):null,f?m.jsxs("span",{className:"text-white/50",children:["Variante de: ",f]}):null,c?m.jsxs("span",{className:"text-white/50",children:["Siguiente: ",c]}):null,V?null:m.jsx("span",{className:"text-amber-300/80",children:"Solo lectura"})]})]})]}),m.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:justify-end",children:[J,m.jsx("button",{type:"button",onClick:he=>{he.stopPropagation(),v()},disabled:!l||u,className:ze("inline-flex items-center rounded-full border px-3 py-1 text-xs font-semibold transition disabled:opacity-50",o?"border-rose-500/40 bg-rose-500/10 text-rose-200 hover:border-rose-400":"border-emerald-500/40 bg-emerald-500/10 text-emerald-200 hover:border-emerald-400"),title:o?"Incluir en el plan personal":"Excluir del plan personal",children:u?"...":o?"Fuera":"En plan"}),m.jsxs(rs,{as:"div",className:"relative inline-flex",children:[m.jsxs(rs.Button,{className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-white/20 text-white/70 transition hover:border-white/40 hover:text-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-500/40",children:[m.jsx("span",{className:"sr-only",children:"Abrir acciones"}),m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",className:"h-5 w-5","aria-hidden":"true",children:[m.jsx("circle",{cx:"12",cy:"5",r:"1.5"}),m.jsx("circle",{cx:"12",cy:"12",r:"1.5"}),m.jsx("circle",{cx:"12",cy:"19",r:"1.5"})]})]}),m.jsxs(rs.Items,{className:"absolute right-0 z-10 mt-2 w-44 overflow-hidden rounded-2xl border border-white/10 bg-slate-900/95 p-1 text-sm text-white shadow-lg shadow-black/40 focus:outline-none",children:[m.jsx(rs.Item,{children:({active:he})=>m.jsx("button",{type:"button",onClick:V?y:void 0,disabled:!V,className:ze("flex w-full items-center gap-2 rounded-xl px-3 py-2 text-left disabled:opacity-40",he&&V?"bg-white/10 text-white":"text-white/70"),children:"Editar"})}),m.jsx(rs.Item,{children:({active:he})=>m.jsx("button",{type:"button",onClick:V?b:void 0,disabled:!V,className:ze("flex w-full items-center gap-2 rounded-xl px-3 py-2 text-left disabled:opacity-40",he&&V?"bg-white/10 text-white":"text-white/70"),children:"Duplicar"})}),m.jsx(rs.Item,{children:({active:he})=>m.jsx("button",{type:"button",onClick:V?k:void 0,disabled:!V,className:ze("flex w-full items-center gap-2 rounded-xl px-3 py-2 text-left disabled:opacity-40",he&&V?"bg-white/10 text-white":"text-white/70"),children:"Nuevo hijo"})}),m.jsx(rs.Item,{children:({active:he})=>m.jsx("button",{type:"button",onClick:ie?E:void 0,disabled:!ie,className:ze("flex w-full items-center gap-2 rounded-xl px-3 py-2 text-left disabled:opacity-40",he&&ie?"bg-rose-500/20 text-rose-100":"text-rose-300"),children:"Eliminar"})})]})]})]})]}),H&&r&&m.jsxs("div",{className:"space-y-4 rounded-2xl border border-white/10 bg-slate-950/60 p-4",children:[M?m.jsx(Ao,{content:e.descriptionMarkdown,enableWorkLinks:!0}):null,B?m.jsx("div",{className:"rounded-2xl border border-dashed border-white/15 bg-white/5 p-3 text-sm text-white/70",children:e.notes}):null,te?m.jsx("div",{className:"space-y-3",children:m.jsx("div",{className:"grid gap-4 lg:grid-cols-3",children:I.map((he,ge)=>m.jsxs("div",{className:"space-y-2",children:[m.jsx(Tm,{url:he,title:`${e.name} vdeo ${ge+1}`}),m.jsx("a",{href:he,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-full border border-white/20 px-3 py-1 text-xs font-semibold text-white/70 transition hover:border-white/40 hover:text-white",children:"Abrir en YouTube"})]},`${e.id}-video-${ge}`))})}):null]}),m.jsx("button",{type:"button",onClick:V?k:void 0,disabled:!V,className:ze("absolute bottom-0 left-1/2 flex -translate-x-1/2 translate-y-1/2 items-center justify-center rounded-full border border-dashed border-white/20 bg-slate-950/80 px-4 py-2 text-sm font-semibold text-white/80 opacity-0 transition hover:border-white/40 hover:text-white focus-visible:opacity-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-500/40 group-hover:opacity-100 pointer-events-none group-hover:pointer-events-auto focus-visible:pointer-events-auto",!V&&"opacity-30"),title:V?O?"Aadir trabajo hijo":"Crear primer trabajo hijo":"No tienes permisos para crear trabajos hijos","aria-label":"Crear trabajo hijo",children:"+"})]})}function d5({form:e,objectiveOptions:t,parentOptions:n,workOptions:r,nodeTypeOptions:i,tagOptions:o,onCreateNodeType:l,onCreateTag:u,depth:c,onFieldChange:f,onVideoChange:h,onAddVideo:p,onRemoveVideo:v,onCollaboratorChange:y,onAddCollaborator:b,onRemoveCollaborator:k,onSave:E,onCancel:C,isNew:_,canEditContent:j,canManageSharing:I,isSaving:M,isOwner:A,ownerEmail:B}){const te=t.find(z=>z.id===e.objectiveId),H=n.find(z=>z.id===e.parentWorkId),O=r.find(z=>z.id===e.nextWorkId),D=r.find(z=>z.id===e.variantOfWorkId),ne=c>0?{marginLeft:`${c*1.5}rem`}:void 0,W=e.id?`work-name-${e.id}`:void 0,Y=e.id?`work-subtitle-${e.id}`:void 0,ie=(e.nodeType??"").trim().toLowerCase()==="reading"||e.scheduleKind.trim().length>0;return m.jsxs("article",{className:"space-y-5 rounded-3xl border border-sky-500/40 bg-slate-950/70 p-5 shadow-lg shadow-sky-500/15",style:ne,children:[m.jsxs("header",{className:"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between",children:[m.jsxs("div",{className:"flex-1 space-y-3",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:_?"Nuevo trabajo":"Editando trabajo"}),m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",htmlFor:W,children:"Nombre"}),m.jsx("input",{id:W,type:"text",className:"input-field w-full text-base font-semibold disabled:opacity-60",placeholder:"Nombre descriptivo",value:e.name,onChange:z=>f({name:z.target.value}),disabled:!j})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",htmlFor:Y,children:"Subttulo (opcional)"}),m.jsx("input",{id:Y,type:"text",className:"input-field w-full disabled:opacity-60",placeholder:"Aade un subttulo breve",value:e.subtitle,onChange:z=>f({subtitle:z.target.value}),disabled:!j})]})]}),m.jsx(zi,{objective:te,size:"sm"})]}),j?null:m.jsx("div",{className:"rounded-2xl border border-amber-400/40 bg-amber-500/10 p-3 text-xs text-amber-200",children:"No tienes permisos para editar el contenido de este trabajo. Puedes revisar la informacin y sugerir cambios al propietario."}),m.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Objetivo"}),m.jsxs("select",{className:"input-field disabled:opacity-60",value:e.objectiveId,onChange:z=>f({objectiveId:z.target.value}),disabled:!j,children:[m.jsx("option",{value:"",children:"Selecciona un objetivo"}),t.map(z=>m.jsx("option",{value:z.id,children:z.name},z.id))]})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Trabajo padre (opcional)"}),m.jsxs("select",{className:"input-field disabled:opacity-60",value:e.parentWorkId,onChange:z=>f({parentWorkId:z.target.value}),disabled:!j,children:[m.jsx("option",{value:"",children:"Sin trabajo padre"}),n.map(z=>m.jsx("option",{value:z.id,children:z.label},z.id))]}),e.parentWorkId&&H?m.jsxs("p",{className:"text-xs text-white/40",children:["Deriva de: ",H.label]}):null]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Duracin estimada (min)"}),m.jsx("input",{type:"number",min:0,className:"input-field disabled:opacity-60",value:e.estimatedMinutes,onChange:z=>f({estimatedMinutes:Number(z.target.value)}),disabled:!j})]})]}),m.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Node type (opcional)"}),m.jsx(Ya,{options:i,value:e.nodeType?[e.nodeType]:[],maxSelected:1,onChange:z=>f({nodeType:z[0]??""}),placeholder:"Search node types",disabled:!j,allowCreate:!0,onCreate:z=>{const L=l(z);return L?{createdValue:L,createdLabel:z.trim()}:null}})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Tags"}),m.jsx(Ya,{options:o,value:e.tags??[],onChange:z=>f({tags:z}),placeholder:"Search tags",disabled:!j,allowCreate:!0,onCreate:z=>{const L=u(z);return L?{createdValue:L,createdLabel:L}:null}})]}),ie?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Schedule (para lecturas)"}),m.jsxs("select",{className:"input-field disabled:opacity-60",value:e.scheduleKind,onChange:z=>f({scheduleKind:z.target.value}),disabled:!j,children:[m.jsx("option",{value:"",children:"Sin schedule"}),m.jsx("option",{value:"day_of_year",children:"Da del ao (1-365)"}),m.jsx("option",{value:"day_of_month",children:"Da del mes (1-31)"}),m.jsx("option",{value:"day_of_week",children:"Da de la semana (0-6)"})]}),m.jsx("p",{className:"text-xs text-white/40",children:"Para `nodeType=reading`, el planificador solo propone esta lectura cuando el da coincide."})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Nmero"}),m.jsx("input",{type:"number",min:0,className:"input-field disabled:opacity-60",value:e.scheduleNumber,onChange:z=>f({scheduleNumber:Number(z.target.value)}),disabled:!j||!e.scheduleKind})]})]}):null,m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Order hint (opcional)"}),m.jsx("input",{type:"number",min:0,className:"input-field disabled:opacity-60",value:e.orderHint,onChange:z=>f({orderHint:Number(z.target.value)}),disabled:!j})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Siguiente (next)"}),m.jsxs("select",{className:"input-field disabled:opacity-60",value:e.nextWorkId,onChange:z=>f({nextWorkId:z.target.value}),disabled:!j,children:[m.jsx("option",{value:"",children:"Sin siguiente"}),r.filter(z=>z.id!==e.id).map(z=>m.jsx("option",{value:z.id,children:z.label},z.id))]}),e.nextWorkId&&O?m.jsxs("p",{className:"text-xs text-white/40",children:["Siguiente: ",O.label]}):null]}),m.jsxs("div",{className:"grid gap-2 sm:col-span-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Variante de (variant_of)"}),m.jsxs("select",{className:"input-field disabled:opacity-60",value:e.variantOfWorkId,onChange:z=>f({variantOfWorkId:z.target.value}),disabled:!j,children:[m.jsx("option",{value:"",children:"Sin base"}),r.filter(z=>z.id!==e.id).map(z=>m.jsx("option",{value:z.id,children:z.label},z.id))]}),e.variantOfWorkId&&D?m.jsxs("p",{className:"text-xs text-white/40",children:["Variante de: ",D.label]}):null]})]}),m.jsxs("section",{className:"space-y-3 rounded-3xl border border-white/10 bg-white/5 p-4",children:[m.jsxs("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-white/40",children:"Visibilidad"}),m.jsx("p",{className:"text-sm text-white/60",children:A?"Eres el propietario de este trabajo.":B?`Propietario: ${B}`:""})]}),I?null:m.jsx("p",{className:"text-xs text-amber-300/80",children:"Solo el propietario puede cambiar la visibilidad o los colaboradores."})]}),m.jsx("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:gap-3",children:["private","shared","public"].map(z=>m.jsxs("label",{className:ze("inline-flex items-center gap-2 rounded-2xl border px-3 py-2 text-sm transition",e.visibility===z?"border-sky-400/80 bg-sky-400/10 text-white":"border-white/15 text-white/70 hover:border-white/30 hover:text-white",!I&&"opacity-50"),children:[m.jsx("input",{type:"radio",className:"accent-sky-400",checked:e.visibility===z,onChange:()=>f({visibility:z}),disabled:!I}),K1[z]]},z))}),m.jsx("p",{className:"text-xs text-white/50",children:u5[e.visibility]}),e.visibility==="private"?null:m.jsxs("div",{className:"space-y-2 rounded-2xl border border-white/10 bg-white/5 p-3",children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-white/40",children:"Colaboradores (edicin)"}),m.jsx("p",{className:"text-xs text-white/50",children:"Aade hasta 5 direcciones de correo. Tendrn permisos de edicin completos."}),m.jsx("div",{className:"space-y-2",children:e.collaborators.map((z,L)=>m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("input",{type:"email",className:"input-field flex-1 disabled:opacity-60",placeholder:"colega@ejemplo.com",value:z,onChange:Q=>y(L,Q.target.value),disabled:!I}),e.collaborators.length>1?m.jsx("button",{type:"button",className:"inline-flex h-9 w-9 items-center justify-center rounded-full border border-rose-500/40 text-rose-300 transition hover:border-rose-400 hover:text-rose-200 disabled:opacity-40",onClick:()=>k(L),"aria-label":"Eliminar colaborador",disabled:!I,children:""}):null]},`collaborator-${L}`))}),m.jsx("button",{type:"button",className:"btn-secondary px-3 py-1 text-xs disabled:opacity-40",onClick:b,disabled:!I||e.collaborators.length>=G1,children:"+ Aadir colaborador"})]})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Descripcin (Markdown)"}),m.jsx("textarea",{className:"input-field min-h-[140px] disabled:opacity-60",value:e.descriptionMarkdown,onChange:z=>f({descriptionMarkdown:z.target.value}),placeholder:"Usa formato markdown para resaltar puntos importantes.",disabled:!j})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Notas opcionales"}),m.jsx("textarea",{className:"input-field min-h-[100px] disabled:opacity-60",value:e.notes,onChange:z=>f({notes:z.target.value}),disabled:!j})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Vdeos de YouTube"}),m.jsx("div",{className:"space-y-3",children:e.videoUrls.map((z,L)=>m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("input",{type:"url",className:"input-field flex-1 disabled:opacity-60",value:z,onChange:Q=>h(L,Q.target.value),placeholder:"https://www.youtube.com/watch?v=...",disabled:!j}),e.videoUrls.length>1?m.jsx("button",{type:"button",className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-rose-500/40 text-rose-300 transition hover:border-rose-400 hover:text-rose-200",onClick:()=>v(L),"aria-label":"Eliminar enlace de vdeo",disabled:!j,children:""}):null]}),m.jsx(Tm,{url:z,title:`Vista previa vdeo ${L+1}`})]},`video-field-${L}`))}),m.jsx("button",{type:"button",className:"btn-secondary px-3 py-1 text-xs disabled:opacity-50",onClick:p,disabled:!j,children:"+ Aadir vdeo"})]}),m.jsxs("div",{className:"flex flex-wrap gap-3 pt-2",children:[m.jsx("button",{type:"button",onClick:E,className:"btn-primary disabled:opacity-60",disabled:M,children:M?"Guardando":"Guardar"}),m.jsx("button",{type:"button",className:"btn-secondary disabled:opacity-50",onClick:C,disabled:M,children:"Cancelar"})]})]})}function f5(){var qt;const e=Ne(G=>G.works),t=Ne(G=>G.objectives),n=Ne(G=>G.workTaxonomy),r=Ne(G=>G.addWork),i=Ne(G=>G.updateWork),o=Ne(G=>G.deleteWork),l=Ne(G=>G.upsertNodeType),u=Ne(G=>G.upsertTag),c=Ne(G=>G.worksLoading),f=ri(),{user:h}=js(),p=w.useMemo(()=>h?{actorId:h.id,actorEmail:h.email??""}:null,[h]),[v,y]=w.useState(""),[b,k]=w.useState(null),[E,C]=w.useState(new Set),[_,j]=w.useState(new Set),[I,M]=w.useState(new Set),A=w.useRef(!1),[B,te]=w.useState({}),[H,O]=w.useState(null),[D,ne]=w.useState(null),W=w.useMemo(()=>new Map(t.map(G=>[G.id,G])),[t]),Y=w.useMemo(()=>[...t].sort((G,fe)=>(G.name??"").localeCompare(fe.name??"","es")),[t]),V=w.useMemo(()=>(n.nodeTypes??[]).slice().sort((G,fe)=>G.label.localeCompare(fe.label,"en",{sensitivity:"base"})).map(G=>({value:G.key,label:G.label})),[n.nodeTypes]),ie=w.useMemo(()=>(n.tags??[]).slice().sort((G,fe)=>G.name.localeCompare(fe.name,"en",{sensitivity:"base"})).map(G=>({value:G.name,label:G.name})),[n.tags]),z=w.useMemo(()=>new Map(e.map(G=>[G.id,G])),[e]),L=w.useMemo(()=>{const G=new Map;return e.forEach(fe=>{const ye=fe.parentWorkId;if(!ye)return;const Pe=G.get(ye)??[];Pe.push(fe),G.set(ye,Pe)}),G.forEach(fe=>{fe.sort((ye,Pe)=>ye.name.localeCompare(Pe.name,"es",{sensitivity:"base"}))}),G},[e]),Q=w.useMemo(()=>{const G=new Map,fe=(ye,Pe)=>{if(G.has(ye))return G.get(ye);const Se=z.get(ye);if(!Se)return"";if(!Se.parentWorkId||Pe.has(ye))return G.set(ye,Se.name),Se.name;Pe.add(ye);const ae=fe(Se.parentWorkId,Pe);Pe.delete(ye);const R=ae?`${ae}  ${Se.name}`:Se.name;return G.set(ye,R),R};return e.forEach(ye=>{fe(ye.id,new Set)}),G},[e,z]);w.useEffect(()=>{const G=f.hash,fe="#work-";let ye=null;if(G.startsWith(fe)&&(ye=G.slice(fe.length)),!ye){const ae=new URLSearchParams(f.search);ye=ae.get("workId")??ae.get("work")}if(!ye)return;C(ae=>{if(ae.has(ye))return ae;const R=new Set(ae);return R.add(ye),R});const Pe=document.getElementById(`work-${ye}`);if(!Pe)return;Pe.scrollIntoView({behavior:"smooth",block:"start"}),Pe.classList.add("ring-2","ring-sky-500/60");const Se=window.setTimeout(()=>{Pe.classList.remove("ring-2","ring-sky-500/60")},1500);return()=>{window.clearTimeout(Se),Pe.classList.remove("ring-2","ring-sky-500/60")}},[f.hash,f.search,e]);const T=w.useMemo(()=>{const G=new Map,fe=ye=>{if(G.has(ye))return G.get(ye);const Pe=new Set;return(L.get(ye)??[]).forEach(ae=>{Pe.add(ae.id),fe(ae.id).forEach(R=>Pe.add(R))}),G.set(ye,Pe),Pe};return e.forEach(ye=>fe(ye.id)),G},[e,L]),F=w.useCallback((G,fe)=>{var Se,ae;const ye=new Set;G&&(ye.add(G),(Se=T.get(G))==null||Se.forEach(R=>ye.add(R)));const Pe=e.filter(R=>!ye.has(R.id)).map(R=>({id:R.id,label:(()=>{var le;const q=Q.get(R.id)??R.name,ue=(le=W.get(R.objectiveId))==null?void 0:le.name;return ue?`${ue}  ${q}`:q})()})).sort((R,q)=>R.label.localeCompare(q.label,"es",{sensitivity:"base"}));if(fe&&fe.length>0&&!Pe.some(R=>R.id===fe)){const R=z.get(fe),q=Q.get(fe)??(R==null?void 0:R.name)??"Trabajo no disponible",ue=R?(ae=W.get(R.objectiveId))==null?void 0:ae.name:void 0,le=ue?`${ue}  ${q}`:q;Pe.unshift({id:fe,label:le})}return Pe},[e,Q,T,z,W]),J=w.useMemo(()=>e.map(G=>{var Se;const fe=Q.get(G.id)??G.name,ye=(Se=W.get(G.objectiveId))==null?void 0:Se.name,Pe=ye?`${ye}  ${fe}`:fe;return{id:G.id,label:Pe}}).sort((G,fe)=>G.label.localeCompare(fe.label,"es",{sensitivity:"base"})),[e,Q,W]),P=w.useMemo(()=>{const G=v.trim().toLowerCase(),fe=Se=>{var ee;if(!G)return!0;const ae=((ee=W.get(Se.objectiveId))==null?void 0:ee.name)??"",R=Se.parentWorkId?Q.get(Se.parentWorkId)??"":"",q=Se.id?Q.get(Se.id)??"":"",ue=(Se.nodeType??"").toLowerCase(),le=Array.isArray(Se.tags)?Se.tags.join(" "):Se.tags??"";return Se.name.toLowerCase().includes(G)||(Se.subtitle??"").toLowerCase().includes(G)||Se.descriptionMarkdown.toLowerCase().includes(G)||ae.toLowerCase().includes(G)||R.toLowerCase().includes(G)||q.toLowerCase().includes(G)||ue.includes(G)||le.toLowerCase().includes(G)},ye=[],Pe=Se=>{if(!Se)return 0;let ae=1,R=z.get(Se);const q=new Set(Se?[Se]:[]);for(;R&&R.parentWorkId;){const ue=R.parentWorkId;if(!ue||q.has(ue))break;ae+=1,q.add(ue),R=z.get(ue)}return ae};return e.forEach(Se=>{const ae=B[Se.id],R=(ae==null?void 0:ae.data)??{id:Se.id,name:Se.name,subtitle:Se.subtitle??"",nodeType:Se.nodeType??"",tags:Se.tags??[],descriptionMarkdown:Se.descriptionMarkdown,objectiveId:Se.objectiveId,parentWorkId:Se.parentWorkId??""};!ae&&!fe(R)||ye.push({id:Se.id,objectiveId:R.objectiveId,parentWorkId:R.parentWorkId??"",depth:Pe(R.parentWorkId),work:Se,isNew:!1,isEditing:!!ae,form:ae==null?void 0:ae.data})}),Object.entries(B).filter(([,Se])=>Se.isNew).forEach(([Se,ae])=>{fe(ae.data)&&ye.push({id:Se,objectiveId:ae.data.objectiveId,parentWorkId:ae.data.parentWorkId,depth:Pe(ae.data.parentWorkId||void 0),work:void 0,isNew:!0,isEditing:!0,form:ae.data})}),ye},[e,z,B,W,Q,v]),be=w.useCallback(G=>{var Se;const fe=(G.isEditing&&G.form?G.form.parentWorkId:G.parentWorkId)??"";if(!fe)return!1;let ye=fe;const Pe=new Set;for(;ye&&!Pe.has(ye);){if(Pe.add(ye),_.has(ye))return!0;ye=(((Se=z.get(ye))==null?void 0:Se.parentWorkId)??"")||""}return!1},[_,z]),he=w.useMemo(()=>{const G=new Map;P.forEach(ae=>{const R=W.has(ae.objectiveId)?ae.objectiveId:Hu,q=G.get(R)??[];q.push(ae),G.set(R,q)});const fe=ae=>{var R,q;if(ae.isEditing&&ae.form){const ue=ae.form.name.trim()||(((R=ae.work)==null?void 0:R.name)??""),le=ae.form.parentWorkId&&ae.form.parentWorkId.length>0?Q.get(ae.form.parentWorkId)??((q=z.get(ae.form.parentWorkId))==null?void 0:q.name)??"":"";return le?`${le}  ${ue}`:ue}return ae.work?Q.get(ae.work.id)??ae.work.name:ae.id},ye=(ae,R)=>{const q=fe(ae),ue=fe(R);return q.localeCompare(ue,"es",{sensitivity:"base"})},Pe=[];Y.forEach(ae=>{const R=G.get(ae.id);R&&R.length&&Pe.push({objective:ae,items:R.slice().sort(ye)})});const Se=G.get(Hu);return Se&&Se.length&&Pe.push({objective:void 0,items:Se.slice().sort(ye)}),Pe},[P,W,Y,Q,z]),ge=((qt=Y[0])==null?void 0:qt.id)??"";w.useEffect(()=>{A.current||v.trim().length>0||he.length!==0&&(A.current=!0,M(new Set(he.map(G=>{var fe;return((fe=G.objective)==null?void 0:fe.id)??Hu}))))},[he,v]);const me=(G,fe)=>{te(ye=>{const Pe=ye[G];return Pe?{...ye,[G]:fe(Pe)}:ye})},je=G=>G.length>0?G:[""],Ae=G=>G.length>0?G:[""],Te=G=>{te(fe=>{var ye,Pe;return fe[G.id]?fe:{...fe,[G.id]:{data:{id:G.id,name:G.name,subtitle:G.subtitle??"",objectiveId:G.objectiveId,parentWorkId:G.parentWorkId??"",nodeType:G.nodeType??"",scheduleKind:((ye=G.schedule)==null?void 0:ye.kind)??"",scheduleNumber:((Pe=G.schedule)==null?void 0:Pe.number)??1,tags:G.tags??[],orderHint:G.orderHint??0,nextWorkId:G.nextWorkId??"",variantOfWorkId:G.variantOfWorkId??"",descriptionMarkdown:G.descriptionMarkdown,estimatedMinutes:G.estimatedMinutes,notes:G.notes??"",videoUrls:je(G.videoUrls.slice()),visibility:G.visibility??"private",collaborators:Ae(G.collaboratorEmails??[])},isNew:!1,originalId:G.id}}}),C(fe=>{const ye=new Set(fe);return ye.add(G.id),ye})},re=()=>{const G=`draft-${$t()}`;te(fe=>({...fe,[G]:{data:{...Z0,id:G,subtitle:"",objectiveId:ge},isNew:!0}})),C(fe=>{const ye=new Set(fe);return ye.add(G),ye})},Ie=G=>{const fe=`draft-${$t()}`;te(ye=>{var Pe,Se;return{...ye,[fe]:{data:{id:fe,name:`${G.name} (copia)`,subtitle:G.subtitle??"",objectiveId:G.objectiveId,parentWorkId:G.parentWorkId??"",nodeType:G.nodeType??"",scheduleKind:((Pe=G.schedule)==null?void 0:Pe.kind)??"",scheduleNumber:((Se=G.schedule)==null?void 0:Se.number)??1,tags:G.tags??[],orderHint:G.orderHint??0,nextWorkId:"",variantOfWorkId:"",descriptionMarkdown:G.descriptionMarkdown,estimatedMinutes:G.estimatedMinutes,notes:G.notes??"",videoUrls:je(G.videoUrls.slice()),visibility:"private",collaborators:[""]},isNew:!0}}}),C(ye=>{const Pe=new Set(ye);return Pe.add(fe),Pe}),k({type:"success",text:"Duplicacin creada. Ajusta y guarda para confirmarla."})},Ue=G=>{const fe=`draft-${$t()}`;te(ye=>({...ye,[fe]:{data:{...Z0,id:fe,subtitle:"",objectiveId:G.objectiveId,parentWorkId:G.id,estimatedMinutes:G.estimatedMinutes,visibility:G.visibility??"private",collaborators:[""]},isNew:!0}})),C(ye=>{const Pe=new Set(ye);return Pe.add(fe),Pe}),k({type:"success",text:`Creando un trabajo hijo para ${G.name}. Ajusta y guarda para confirmarlo.`})},We=G=>{C(fe=>{const ye=new Set(fe);return ye.has(G)?ye.delete(G):ye.add(G),ye})},tt=G=>{te(fe=>{const ye={...fe};return delete ye[G],ye}),G.startsWith("draft-")&&C(fe=>{const ye=new Set(fe);return ye.delete(G),ye})},ot=async G=>{const fe=B[G];if(!fe||H)return;if(!p){k({type:"error",text:"Inicia sesin para guardar este trabajo."});return}const ye=(fe.data.parentWorkId??"").trim(),Pe=ye.length>0?ye:void 0,Se=fe.data.nodeType.trim(),ae=Se.length>0?Se:void 0,R=(fe.data.scheduleKind??"").trim(),q=R.length>0?R:void 0,ue=l5(q)?q:void 0,le=Number(fe.data.scheduleNumber),ee=Number.isFinite(le)?Math.trunc(le):void 0,de=(ae??"").trim().toLowerCase()==="reading"?ue:void 0,$=de?ee:void 0,Z=a5(fe.data.tags??[]),pe=Number(fe.data.orderHint)>0?Number(fe.data.orderHint):void 0,ve=(fe.data.nextWorkId??"").trim(),De=ve.length>0?ve:void 0,Je=(fe.data.variantOfWorkId??"").trim(),nt=Je.length>0?Je:void 0,Ee={name:fe.data.name.trim(),subtitle:fe.data.subtitle.trim()||void 0,objectiveId:fe.data.objectiveId,nodeType:ae,scheduleKind:de,scheduleNumber:$,tags:Z,orderHint:pe,nextWorkId:De,variantOfWorkId:nt,descriptionMarkdown:fe.data.descriptionMarkdown,estimatedMinutes:Number(fe.data.estimatedMinutes)||0,notes:fe.data.notes.trim()||void 0,videoUrls:fe.data.videoUrls.map(Oe=>Oe.trim()).filter(Boolean),parentWorkId:Pe,visibility:fe.data.visibility,collaboratorEmails:Array.from(new Set(fe.data.collaborators.map(Oe=>Oe.trim().toLowerCase()).filter(Oe=>Oe.length>0)))};if(!Ee.name){k({type:"error",text:"El nombre es obligatorio."});return}if(!Ee.objectiveId){k({type:"error",text:"Selecciona un objetivo para el trabajo."});return}if(Ee.parentWorkId&&fe.originalId){if(Ee.parentWorkId===fe.originalId){k({type:"error",text:"Un trabajo no puede ser su propio padre."});return}const Oe=T.get(fe.originalId);if(Oe&&Oe.has(Ee.parentWorkId)){k({type:"error",text:"Selecciona un trabajo padre que no sea un descendiente."});return}}if(fe.originalId&&Ee.nextWorkId===fe.originalId){k({type:"error",text:"Un trabajo no puede tenerse como siguiente."});return}if(fe.originalId&&Ee.variantOfWorkId===fe.originalId){k({type:"error",text:"Un trabajo no puede ser variante de s mismo."});return}const Qe=fe.originalId?z.get(fe.originalId):void 0,He=fe.isNew||((Qe==null?void 0:Qe.isOwner)??!1);O(G);try{if(fe.isNew){const Oe=await r({name:Ee.name,subtitle:Ee.subtitle,objectiveId:Ee.objectiveId,parentWorkId:Ee.parentWorkId,nodeType:Ee.nodeType,scheduleKind:Ee.scheduleKind,scheduleNumber:Ee.scheduleNumber,tags:Ee.tags,orderHint:Ee.orderHint,nextWorkId:Ee.nextWorkId,variantOfWorkId:Ee.variantOfWorkId,descriptionMarkdown:Ee.descriptionMarkdown,estimatedMinutes:Ee.estimatedMinutes,notes:Ee.notes,videoUrls:Ee.videoUrls,visibility:Ee.visibility,collaboratorEmails:Ee.collaboratorEmails},p);k({type:"success",text:"Trabajo creado correctamente."}),C(it=>{const Ve=new Set(it);return Ve.delete(G),Ve.add(Oe.id),Ve})}else if(fe.originalId){const Oe={name:Ee.name,subtitle:Ee.subtitle??null,objectiveId:Ee.objectiveId,parentWorkId:Ee.parentWorkId??null,nodeType:Ee.nodeType??null,scheduleKind:Ee.scheduleKind??null,scheduleNumber:Ee.scheduleKind?Ee.scheduleNumber??null:null,tags:Ee.tags,orderHint:Ee.orderHint??null,nextWorkId:Ee.nextWorkId??null,variantOfWorkId:Ee.variantOfWorkId??null,descriptionMarkdown:Ee.descriptionMarkdown,estimatedMinutes:Ee.estimatedMinutes,notes:Ee.notes??null,videoUrls:Ee.videoUrls};He&&(Oe.visibility=Ee.visibility,Oe.collaboratorEmails=Ee.collaboratorEmails),await i(fe.originalId,Oe,p),k({type:"success",text:"Trabajo actualizado."})}te(Oe=>{const it={...Oe};return delete it[G],it})}catch(Oe){console.error("No se pudo guardar el trabajo",Oe),k({type:"error",text:"No se han podido guardar los cambios. Comprueba tus permisos e intntalo de nuevo."})}finally{O(null)}},St=async G=>{var ye;if(!p){k({type:"error",text:"Inicia sesin para eliminar trabajos."});return}const fe=(((ye=T.get(G))==null?void 0:ye.size)??0)>0;try{if(!await o(G,p)){k({type:"error",text:fe?"No se puede eliminar porque tiene trabajos hijos.":"No se puede eliminar porque est siendo usado en alguna sesin."});return}k({type:"success",text:"Trabajo eliminado."}),te(Se=>{const ae={...Se};return delete ae[G],ae}),C(Se=>{const ae=new Set(Se);return ae.delete(G),ae})}catch(Pe){console.error("No se pudo eliminar el trabajo",Pe),k({type:"error",text:"No tienes permisos para eliminar este trabajo o se ha producido un error."})}},Qt=async G=>{if(!p){k({type:"error",text:"Inicia sesin para editar trabajos."});return}if(!(G.canEdit??!1)||(G.nodeType??"").trim().toLowerCase()==="style")return;const fe=(G.tags??[]).map(Se=>Se.trim().toLowerCase()).filter(Boolean),ye=fe.includes(Oa),Pe=ye?fe.filter(Se=>Se!==Oa):Array.from(new Set([...fe,Oa]));ne(G.id);try{await i(G.id,{tags:Pe},p),k({type:"success",text:ye?"Incluido en el plan personal.":"Excluido del plan personal."}),window.setTimeout(()=>k(null),1800)}catch(Se){console.error("No se pudo actualizar el trabajo",Se),k({type:"error",text:"No se han podido guardar los cambios. Comprueba tus permisos e intntalo de nuevo."})}finally{ne(null)}};return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("header",{className:"glass-panel space-y-4 p-6 sm:p-10",children:[m.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold",children:"Trabajos"}),m.jsx("p",{className:"max-w-2xl text-white/60",children:"Gestiona los ejercicios reutilizables por objetivo. Duplica, edita y ajusta los detalles sin salir del listado."})]}),m.jsxs("div",{className:"flex w-full flex-col gap-3 sm:w-auto sm:flex-row sm:items-center",children:[m.jsx("input",{type:"search",className:"input-field w-full sm:w-72",value:v,onChange:G=>y(G.target.value),placeholder:"Buscar por nombre, descripcin u objetivo"}),m.jsx(Li,{to:"/catalog/taxonomy",className:"btn-secondary",children:"Taxonomy"}),m.jsx("button",{type:"button",className:"btn-primary",onClick:re,children:"Nuevo trabajo"}),c?m.jsx("span",{className:"text-xs text-white/60 sm:ml-3",children:"Sincronizando trabajos"}):null]})]}),b&&m.jsx("div",{className:ze("rounded-2xl border px-4 py-3 text-sm",b.type==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-rose-500/40 bg-rose-500/10 text-rose-200"),children:b.text})]}),m.jsx("section",{className:"space-y-6",children:he.length===0?c?m.jsx("div",{className:"glass-panel p-10 text-center text-white/60",children:"Sincronizando trabajos"}):m.jsx("div",{className:"glass-panel p-10 text-center text-white/50",children:"An no hay trabajos guardados. Empieza creando uno con el botn Nuevo trabajo."}):he.map(({objective:G,items:fe})=>{const ye=G?G.name:"Sin objetivo asignado",Pe=(G==null?void 0:G.id)??Hu,Se=I.has(Pe);return m.jsxs("div",{className:"glass-panel space-y-4 p-6",children:[m.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("button",{type:"button",onClick:()=>M(ae=>{const R=new Set(ae);return R.has(Pe)?R.delete(Pe):R.add(Pe),R}),className:"inline-flex h-8 w-8 items-center justify-center rounded-full border border-white/15 bg-white/5 text-sm font-semibold text-white/70 transition hover:border-white/30 hover:text-white","aria-label":Se?"Expandir grupo":"Colapsar grupo",title:Se?"Expandir":"Colapsar",children:Se?"":""}),m.jsx("h3",{className:"text-lg font-semibold text-white",children:ye}),m.jsx(zi,{objective:G,size:"sm"})]}),m.jsxs("span",{className:"rounded-full border border-white/10 px-3 py-1 text-xs text-white/60",children:[fe.length," trabajo",fe.length===1?"":"s"]})]}),Se?null:m.jsx("div",{className:"space-y-4",children:fe.filter(ae=>!be(ae)).map(ae=>{var pe,ve,De,Je,nt,Ee,Qe;const R=E.has(ae.id),q=(ae.isEditing&&ae.form?ae.form.parentWorkId:ae.parentWorkId)??"",ue=ae.isEditing?F((pe=ae.work)==null?void 0:pe.id,q):[],ee=(ae.work?L.get(ae.work.id)??[]:[]).length,de=_.has(ae.id);if(ae.isEditing&&ae.form){const He=ae.isNew||(((ve=ae.work)==null?void 0:ve.canEdit)??!1),Oe=ae.isNew||(((De=ae.work)==null?void 0:De.isOwner)??!1),it=ae.isNew||(((Je=ae.work)==null?void 0:Je.isOwner)??!1);return m.jsx(d5,{form:ae.form,objectiveOptions:Y,parentOptions:ue,workOptions:J,nodeTypeOptions:V,tagOptions:ie,onCreateNodeType:l,onCreateTag:u,depth:ae.depth,onFieldChange:Ve=>me(ae.id,dt=>{const ut={...dt.data,...Ve};if(Ve.parentWorkId!==void 0&&Ve.parentWorkId.length>0){const vt=z.get(Ve.parentWorkId);vt&&(ut.objectiveId=vt.objectiveId)}return Ve.visibility==="private"&&(ut.collaborators=[""]),{...dt,data:ut}}),onVideoChange:(Ve,dt)=>me(ae.id,ut=>{const vt=ut.data.videoUrls.slice();return vt[Ve]=dt,{...ut,data:{...ut.data,videoUrls:vt}}}),onAddVideo:()=>me(ae.id,Ve=>({...Ve,data:{...Ve.data,videoUrls:[...Ve.data.videoUrls,""]}})),onRemoveVideo:Ve=>me(ae.id,dt=>{const ut=dt.data.videoUrls.slice();return ut.splice(Ve,1),{...dt,data:{...dt.data,videoUrls:ut.length?ut:[""]}}}),onCollaboratorChange:(Ve,dt)=>me(ae.id,ut=>{const vt=ut.data.collaborators.slice();return vt[Ve]=dt,{...ut,data:{...ut.data,collaborators:vt}}}),onAddCollaborator:()=>me(ae.id,Ve=>Ve.data.collaborators.length>=G1?Ve:{...Ve,data:{...Ve.data,collaborators:[...Ve.data.collaborators,""]}}),onRemoveCollaborator:Ve=>me(ae.id,dt=>{const ut=dt.data.collaborators.slice();return ut.splice(Ve,1),ut.length||ut.push(""),{...dt,data:{...dt.data,collaborators:ut}}}),onSave:()=>void ot(ae.id),onCancel:()=>tt(ae.id),isNew:ae.isNew,canEditContent:He,canManageSharing:Oe,isSaving:H===ae.id,isOwner:it,ownerEmail:(nt=ae.work)==null?void 0:nt.ownerEmail},ae.id)}if(!ae.work)return null;const $=ae.work.nextWorkId?Q.get(ae.work.nextWorkId)??((Ee=z.get(ae.work.nextWorkId))==null?void 0:Ee.name):void 0,Z=ae.work.variantOfWorkId?Q.get(ae.work.variantOfWorkId)??((Qe=z.get(ae.work.variantOfWorkId))==null?void 0:Qe.name):void 0;return m.jsx(c5,{work:ae.work,childCount:ee,depth:ae.depth,expanded:R,isTreeCollapsed:de,isPersonalExcluded:(ae.work.tags??[]).map(He=>He.trim().toLowerCase()).includes(Oa),canTogglePersonal:(ae.work.canEdit??!1)&&(ae.work.nodeType??"").trim().toLowerCase()!=="style",personalToggleBusy:D===ae.id,nextLabel:$,variantLabel:Z,onToggle:()=>We(ae.id),onToggleTree:()=>j(He=>{const Oe=new Set(He);return Oe.has(ae.id)?Oe.delete(ae.id):Oe.add(ae.id),Oe}),onTogglePersonal:()=>{ae.work&&Qt(ae.work)},onEdit:()=>{const He=ae.work;He&&(He.canEdit??!1)&&Te(He)},onDuplicate:()=>{const He=ae.work;He&&(He.canEdit??!1)&&Ie(He)},onCreateChild:()=>{const He=ae.work;He&&(He.canEdit??!1)&&Ue(He)},onDelete:()=>{const He=ae.work;He&&(He.isOwner??!1)&&St(He.id)}},ae.id)})})]},(G==null?void 0:G.id)??"sin-objetivo")})})]})}function ew(e){return e.reduce((t,n)=>(t[n]=(t[n]??0)+1,t),{})}function h5(){const{works:e,workTaxonomy:t,upsertNodeType:n,removeNodeType:r,upsertTag:i,removeTag:o}=Ne(E=>({works:E.works,workTaxonomy:E.workTaxonomy,upsertNodeType:E.upsertNodeType,removeNodeType:E.removeNodeType,upsertTag:E.upsertTag,removeTag:E.removeTag})),[l,u]=w.useState(""),[c,f]=w.useState(""),[h,p]=w.useState(null),v=w.useMemo(()=>{const E=e.map(C=>(C.nodeType??"").trim().toLowerCase()).filter(Boolean);return ew(E)},[e]),y=w.useMemo(()=>{const E=e.flatMap(C=>(C.tags??[]).map(_=>_.trim().toLowerCase()).filter(Boolean));return ew(E)},[e]),b=t.nodeTypes.slice().sort((E,C)=>E.label.localeCompare(C.label,"en",{sensitivity:"base"})),k=t.tags.slice().sort((E,C)=>E.name.localeCompare(C.name,"en",{sensitivity:"base"}));return m.jsxs("div",{className:"space-y-6",children:[m.jsx("header",{className:"flex flex-wrap items-start justify-between gap-4 rounded-3xl border border-white/10 bg-white/5 px-6 py-5",children:m.jsxs("div",{children:[m.jsx("p",{className:"font-display text-2xl font-semibold",children:"Taxonomy"}),m.jsx("p",{className:"mt-1 text-sm text-white/60",children:"Node types and tags used across the catalog and personal planning."}),m.jsx("p",{className:"mt-2 text-sm",children:m.jsx(Li,{to:"/catalog",className:"text-sky-300 hover:text-sky-200",children:" Back to Catalog"})})]})}),h?m.jsx("div",{className:`rounded-2xl border px-4 py-3 text-sm ${h.type==="success"?"border-emerald-500/30 bg-emerald-500/10 text-emerald-100":"border-rose-500/30 bg-rose-500/10 text-rose-100"}`,children:h.text}):null,m.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[m.jsxs("section",{className:"rounded-3xl border border-white/10 bg-white/5 p-6",children:[m.jsx("div",{className:"flex items-start justify-between gap-4",children:m.jsxs("div",{children:[m.jsx("h2",{className:"text-lg font-semibold",children:"Node types"}),m.jsx("p",{className:"mt-1 text-sm text-white/60",children:"Used by works and group rules. Keys are stored in works."})]})}),m.jsxs("div",{className:"mt-5 flex flex-col gap-3 sm:flex-row sm:items-end",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-white/50",children:"New node type"}),m.jsx("input",{className:"input-field mt-2",value:l,onChange:E=>u(E.target.value),placeholder:"e.g. Dance figures"})]}),m.jsx("button",{type:"button",className:"btn-primary",onClick:()=>{const E=n(l);if(!E){p({type:"error",text:"Please enter a valid node type."});return}u(""),p({type:"success",text:`Node type created: ${E}`})},children:"Add"})]}),m.jsxs("div",{className:"mt-6 space-y-2",children:[b.map(E=>{const C=(v[E.key]??0)>0;return m.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 rounded-2xl border border-white/10 bg-slate-950/30 px-4 py-3",children:[m.jsxs("div",{children:[m.jsx("p",{className:"font-semibold text-white",children:E.label}),m.jsxs("p",{className:"text-xs text-white/50",children:["key: ",m.jsx("span",{className:"font-mono",children:E.key}),"  used by ",v[E.key]??0," works"]})]}),m.jsx("button",{type:"button",disabled:C,className:"rounded-full border border-white/15 bg-white/5 px-3 py-2 text-xs font-semibold text-white/70 transition hover:border-white/30 hover:text-white disabled:opacity-50",title:C?"Cannot delete: in use":"Delete",onClick:()=>{const _=r(E.key);p(_?{type:"success",text:`Node type removed: ${E.key}`}:{type:"error",text:"Cannot remove node type (it may be in use)."})},children:"Delete"})]},E.key)}),b.length===0?m.jsx("p",{className:"text-sm text-white/60",children:"No node types yet."}):null]})]}),m.jsxs("section",{className:"rounded-3xl border border-white/10 bg-white/5 p-6",children:[m.jsx("div",{className:"flex items-start justify-between gap-4",children:m.jsxs("div",{children:[m.jsx("h2",{className:"text-lg font-semibold",children:"Tags"}),m.jsx("p",{className:"mt-1 text-sm text-white/60",children:"Lowercase slugs (spaces become hyphens). Deleting is blocked if used."})]})}),m.jsxs("div",{className:"mt-5 flex flex-col gap-3 sm:flex-row sm:items-end",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-white/50",children:"New tag"}),m.jsx("input",{className:"input-field mt-2",value:c,onChange:E=>f(E.target.value),placeholder:"e.g. bei-shaolin"})]}),m.jsx("button",{type:"button",className:"btn-primary",onClick:()=>{const E=i(c);if(!E){p({type:"error",text:"Please enter a valid tag."});return}f(""),p({type:"success",text:`Tag created: ${E}`})},children:"Add"})]}),m.jsxs("div",{className:"mt-6 space-y-2",children:[k.map(E=>{const C=(y[E.name]??0)>0;return m.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 rounded-2xl border border-white/10 bg-slate-950/30 px-4 py-3",children:[m.jsxs("div",{children:[m.jsx("p",{className:"font-semibold text-white",children:E.name}),m.jsxs("p",{className:"text-xs text-white/50",children:["used by ",y[E.name]??0," works"]})]}),m.jsx("button",{type:"button",disabled:C,className:"rounded-full border border-white/15 bg-white/5 px-3 py-2 text-xs font-semibold text-white/70 transition hover:border-white/30 hover:text-white disabled:opacity-50",title:C?"Cannot delete: in use":"Delete",onClick:()=>{const _=o(E.name);p(_?{type:"success",text:`Tag removed: ${E.name}`}:{type:"error",text:"Cannot remove tag (it may be in use)."})},children:"Delete"})]},E.name)}),k.length===0?m.jsx("p",{className:"text-sm text-white/60",children:"No tags yet."}):null]})]})]})]})}const Nh={name:"",colorHex:"#60a5fa",descriptionMarkdown:""},tw=["#F97316","#FB7185","#F43F5E","#EC4899","#D946EF","#A855F7","#8B5CF6","#6366F1","#4F46E5","#3B82F6","#38BDF8","#0EA5E9","#06B6D4","#14B8A6","#0D9488","#10B981","#22C55E","#65A30D","#84CC16","#A3E635","#FACC15","#FBBF24","#F59E0B","#EA580C","#C2410C","#E11D48","#EF4444","#F87171","#FB923C","#F472B6","#FDE047","#7C3AED"];function p5(){const e=Ne(k=>k.objectives),t=Ne(k=>k.addObjective),n=Ne(k=>k.updateObjective),r=Ne(k=>k.deleteObjective),i=Ne(k=>k.works),[o,l]=w.useState(Nh),[u,c]=w.useState(null),f=w.useMemo(()=>{const k=new Map;return i.forEach(E=>{k.set(E.objectiveId,(k.get(E.objectiveId)??0)+1)}),k},[i]),h=w.useMemo(()=>[...e].sort((k,E)=>(k.name??"").localeCompare(E.name??"","es")),[e]),p=k=>{if(k.preventDefault(),!o.name.trim()){c({type:"error",text:"El nombre es obligatorio."});return}const E={name:o.name.trim(),colorHex:o.colorHex,descriptionMarkdown:o.descriptionMarkdown};o.id?(n(o.id,E),c({type:"success",text:"Objetivo actualizado."})):(t(E),c({type:"success",text:"Objetivo creado."})),l(Nh)},v=k=>{l({id:k.id,name:k.name,colorHex:k.colorHex,descriptionMarkdown:k.descriptionMarkdown})},y=k=>{const E=r(k);c(E?{type:"success",text:"Objetivo eliminado."}:{type:"error",text:"No se puede eliminar porque tiene trabajos asociados."})},b=()=>{if(e.length===0){c({type:"error",text:"No hay objetivos a los que asignar colores."});return}const k=[...tw];e.map((C,_)=>{const j=k[_%k.length];return{id:C.id,colorHex:j}}).forEach(({id:C,colorHex:_})=>n(C,{colorHex:_})),c({type:"success",text:"Colores repartidos equitativamente entre los objetivos."})};return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("header",{className:"glass-panel p-6 sm:p-10",children:[m.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold",children:"Objetivos"}),m.jsx("p",{className:"text-white/60",children:"Define categoras de trabajo con color y contexto para identificar visualmente cada ejercicio."})]}),m.jsx("div",{className:"flex flex-wrap gap-3",children:m.jsx("button",{type:"button",className:"btn-secondary",onClick:b,children:"Repartir colores"})})]}),u&&m.jsx("div",{className:`mt-4 rounded-2xl border px-4 py-3 text-sm ${u.type==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-rose-500/40 bg-rose-500/10 text-rose-200"}`,children:u.text})]}),m.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.1fr_1.5fr]",children:[m.jsxs("section",{className:"glass-panel p-6",children:[m.jsx("h2",{className:"text-xl font-semibold text-white",children:o.id?"Editar objetivo":"Nuevo objetivo"}),m.jsxs("form",{className:"mt-4 space-y-4",onSubmit:p,children:[m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Nombre"}),m.jsx("input",{type:"text",className:"input-field",value:o.name,onChange:k=>l(E=>({...E,name:k.target.value})),placeholder:"Ej. Resistencia, Tcnica, Juego",required:!0})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Color identificativo"}),m.jsxs("div",{className:"flex flex-wrap gap-3",children:[m.jsx("input",{type:"color",className:"h-12 w-12 cursor-pointer rounded-full border border-white/20 bg-transparent",value:o.colorHex,onChange:k=>l(E=>({...E,colorHex:k.target.value})),"aria-label":"Elegir color personalizado"}),m.jsx("input",{type:"text",className:"input-field max-w-[140px]",value:o.colorHex,onChange:k=>l(E=>({...E,colorHex:k.target.value})),placeholder:"#60a5fa","aria-label":"Cdigo hex del color"})]}),m.jsx("div",{className:"grid grid-cols-8 gap-2 rounded-3xl border border-white/10 bg-white/5 p-3",children:tw.map(k=>m.jsx("button",{type:"button",onClick:()=>l(E=>({...E,colorHex:k})),className:ze("relative flex h-9 w-9 items-center justify-center rounded-full border border-white/20 transition hover:scale-105 focus:outline-none focus:ring-2 focus:ring-white/60",o.colorHex.toLowerCase()===k.toLowerCase()&&"ring-2 ring-white/80 ring-offset-2 ring-offset-slate-900"),style:{backgroundColor:k},"aria-label":`Seleccionar color ${k}`,children:o.colorHex.toLowerCase()===k.toLowerCase()&&m.jsx("span",{className:"text-xs font-semibold text-slate-900",children:""})},k))})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Descripcin (Markdown)"}),m.jsx("textarea",{className:"input-field min-h-[140px]",value:o.descriptionMarkdown,onChange:k=>l(E=>({...E,descriptionMarkdown:k.target.value})),placeholder:"Explica cundo usar este tipo de trabajo, objetivos pedaggicos, etc."})]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("button",{type:"submit",className:"btn-primary",children:o.id?"Guardar objetivo":"Crear objetivo"}),o.id&&m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>l(Nh),children:"Cancelar edicin"})]})]})]}),m.jsx("section",{className:"space-y-6",children:h.length===0?m.jsx("div",{className:"glass-panel p-10 text-center text-white/50",children:"An no has creado objetivos. Crea uno con el formulario para clasificarlos por color y descripcin."}):h.map(k=>m.jsxs("div",{className:"glass-panel space-y-4 p-6",children:[m.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[m.jsx(zi,{objective:k}),m.jsxs("div",{className:"flex items-center gap-3 text-xs text-white/60",children:[m.jsxs("span",{children:[f.get(k.id)??0," trabajos"]}),m.jsx("button",{type:"button",className:"btn-secondary px-3 py-1 text-xs",onClick:()=>v(k),children:"Editar"}),m.jsx("button",{type:"button",className:"inline-flex items-center justify-center rounded-full border border-rose-500/40 px-3 py-1 text-xs font-semibold text-rose-300",onClick:()=>y(k.id),children:"Eliminar"})]})]}),m.jsx(Ao,{content:k.descriptionMarkdown})]},k.id))})]})]})}const Th={name:"",notes:"",active:!0};function m5(){const e=Ne(h=>h.assistants),t=Ne(h=>h.addAssistant),n=Ne(h=>h.updateAssistant),r=Ne(h=>h.deleteAssistant),[i,o]=w.useState(Th),[l,u]=w.useState(null),c=h=>{if(h.preventDefault(),!i.name.trim()){u({type:"error",text:"El nombre es obligatorio."});return}const p={name:i.name.trim(),notes:i.notes,active:i.active};i.id?(n(i.id,p),u({type:"success",text:"Asistente actualizado."})):(t(p),u({type:"success",text:"Asistente aadido."})),o(Th)},f=h=>{o({id:h.id,name:h.name,notes:h.notes??"",active:h.active})};return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("header",{className:"glass-panel p-6 sm:p-10",children:[m.jsx("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold",children:"Asistentes"}),m.jsx("p",{className:"text-white/60",children:"Mantn una lista base de alumnado para registrar asistencia rpidamente durante cada sesin."})]})}),l&&m.jsx("div",{className:ze("mt-4 rounded-2xl border px-4 py-3 text-sm",l.type==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-rose-500/40 bg-rose-500/10 text-rose-200"),children:l.text})]}),m.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.1fr_1.5fr]",children:[m.jsxs("section",{className:"glass-panel p-6",children:[m.jsx("h2",{className:"text-xl font-semibold text-white",children:i.id?"Editar asistente":"Nuevo asistente"}),m.jsxs("form",{className:"mt-4 space-y-4",onSubmit:c,children:[m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Nombre"}),m.jsx("input",{type:"text",className:"input-field",value:i.name,onChange:h=>o(p=>({...p,name:h.target.value})),placeholder:"Nombre y apellidos",required:!0})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Notas"}),m.jsx("textarea",{className:"input-field min-h-[120px]",value:i.notes,onChange:h=>o(p=>({...p,notes:h.target.value})),placeholder:"Observaciones, nivel, lesiones, etc."})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("input",{id:"assistant-active",type:"checkbox",className:"h-5 w-5 rounded border border-white/20 bg-white/10 text-sky-400",checked:i.active,onChange:h=>o(p=>({...p,active:h.target.checked}))}),m.jsx("label",{htmlFor:"assistant-active",className:"text-sm text-white/70",children:"Activo (aparecer en los listados de asistencia)"})]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("button",{type:"submit",className:"btn-primary",children:i.id?"Guardar asistente":"Aadir asistente"}),i.id&&m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>o(Th),children:"Cancelar edicin"})]})]})]}),m.jsx("section",{className:"space-y-4",children:e.length===0?m.jsx("div",{className:"glass-panel p-10 text-center text-white/50",children:"Todava no tienes asistentes guardados. Crea uno desde el formulario para empezar a marcar asistencia en sesiones."}):e.map(h=>m.jsxs("div",{className:"glass-panel flex flex-col gap-4 p-6 sm:flex-row sm:items-start sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-lg font-semibold text-white",children:h.name}),h.notes?m.jsx("p",{className:"text-sm text-white/60",children:h.notes}):null]}),m.jsxs("div",{className:"flex flex-col items-start gap-3 sm:items-end",children:[m.jsx("span",{className:ze("rounded-full border px-3 py-1 text-xs font-semibold",h.active?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-white/20 bg-white/5 text-white/60"),children:h.active?"Activo":"Inactivo"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{type:"button",className:"btn-secondary px-3 py-1 text-xs",onClick:()=>f(h),children:"Editar"}),m.jsx("button",{type:"button",className:"inline-flex items-center justify-center rounded-full border border-rose-500/40 px-3 py-1 text-xs font-semibold text-rose-300",onClick:()=>r(h.id),children:"Eliminar"})]})]})]},h.id))})]})]})}function fo(e,t){return m.jsxs("div",{className:"flex items-center justify-between rounded-2xl border border-white/10 bg-white/5 px-4 py-2 text-sm text-white/70",children:[m.jsx("span",{children:e}),m.jsx("span",{className:"font-semibold text-white",children:t})]},e)}function g5(){var c,f,h,p,v,y;const e=Ne(b=>b.exportBackup),t=Ne(b=>b.importBackup),[n,r]=w.useState(null),[i,o]=w.useState(null),l=()=>{try{const b=e(),k=new Blob([JSON.stringify(b,null,2)],{type:"application/json"}),E=URL.createObjectURL(k),C=document.createElement("a");C.href=E,C.download=`sport-planner-backup-${new Date().toISOString().slice(0,10)}.json`,C.click(),URL.revokeObjectURL(E),r({type:"success",text:"Backup exportado correctamente."})}catch(b){console.error(b),r({type:"error",text:"No se pudo exportar el backup."})}},u=async b=>{var E;const k=(E=b.target.files)==null?void 0:E[0];if(k)try{const C=await k.text(),_=JSON.parse(C);t(_),o(_),r({type:"success",text:"Datos importados correctamente."})}catch(C){console.error(C),r({type:"error",text:"No se pudo importar el archivo. Revisa que sea un JSON vlido."})}finally{b.target.value=""}};return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("header",{className:"glass-panel p-6 sm:p-10",children:[m.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold",children:"Backups"}),m.jsx("p",{className:"text-white/60",children:"Exporta e importa toda tu informacin en JSON versionado para compartir o restaurar en cualquier momento."})]}),m.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row",children:[m.jsx("button",{type:"button",className:"btn-primary",onClick:l,children:"Descargar backup"}),m.jsxs("label",{className:"btn-secondary cursor-pointer",children:["Importar backup",m.jsx("input",{type:"file",accept:"application/json",className:"hidden",onChange:u})]})]})]}),n&&m.jsx("div",{className:`mt-4 rounded-2xl border px-4 py-3 text-sm ${n.type==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-rose-500/40 bg-rose-500/10 text-rose-200"}`,children:n.text})]}),i&&m.jsxs("section",{className:"glass-panel space-y-4 p-6",children:[m.jsx("h2",{className:"text-xl font-semibold text-white",children:"ltima importacin"}),m.jsxs("p",{className:"text-sm text-white/60",children:["Versin del backup: ",i.version]}),m.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[fo("Objetivos",((c=i.objetivos)==null?void 0:c.length)??0),fo("Trabajos",((f=i.trabajos)==null?void 0:f.length)??0),fo("Sesiones",((h=i.sesiones)==null?void 0:h.length)??0),fo("Asistentes",((p=i.asistentes)==null?void 0:p.length)??0),fo("Sesiones  Trabajos",((v=i.sesiones_trabajos)==null?void 0:v.length)??0),fo("Sesiones  Asistencias",((y=i.sesiones_asistencias)==null?void 0:y.length)??0)]})]}),m.jsxs("section",{className:"glass-panel space-y-3 p-6 text-sm text-white/70",children:[m.jsx("h2",{className:"text-lg font-semibold text-white",children:"Consejos"}),m.jsxs("ul",{className:"list-disc space-y-2 pl-5",children:[m.jsx("li",{children:"Guarda tus backups en un servicio en la nube para poder restaurarlos desde cualquier dispositivo."}),m.jsx("li",{children:"Antes de importar, realiza una exportacin por seguridad. La restauracin sobrescribe los datos actuales sin posibilidad de deshacer."}),m.jsx("li",{children:"Los backups mantienen los IDs, as que puedes sincronizar manualmente varias instalaciones si lo necesitas."})]})]})]})}function y5(){const{signInWithPassword:e,signUpWithPassword:t,session:n,loading:r}=js(),[i,o]=w.useState("login"),[l,u]=w.useState(""),[c,f]=w.useState(""),[h,p]=w.useState(""),[v,y]=w.useState(!1),[b,k]=w.useState(null),[E,C]=w.useState(null);if(!r&&n)return m.jsx(Ja,{to:"/",replace:!0});const _=async I=>{if(I.preventDefault(),k(null),C(null),!l||!c){k("Introduce tu email y contrasea.");return}if(i==="register"&&c!==h){k("Las contraseas no coinciden.");return}try{y(!0),i==="login"?await e(l,c):(await t(l,c),C("Revisa tu correo para confirmar la cuenta y vuelve a iniciar sesin."))}catch(M){const A=M instanceof Error?M.message:"No se pudo completar la operacin.";k(A)}finally{y(!1)}},j=()=>{o(I=>I==="login"?"register":"login"),k(null),C(null),f(""),p("")};return m.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-950 px-4 py-12",children:m.jsxs("div",{className:"w-full max-w-md rounded-3xl border border-white/10 bg-slate-900/80 p-8 shadow-2xl backdrop-blur",children:[m.jsxs("header",{className:"mb-8 text-center",children:[m.jsx("div",{className:"mx-auto mb-4 flex h-14 w-14 items-center justify-center rounded-full bg-gradient-to-br from-sky-500 to-indigo-500 text-xl font-bold text-white",children:"SP"}),m.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-white",children:i==="login"?"Inicia sesin":"Crea tu cuenta"}),m.jsx("p",{className:"mt-2 text-sm text-white/60",children:"Accede a tus planes desde cualquier dispositivo con Supabase."})]}),m.jsxs("form",{className:"space-y-5",onSubmit:_,children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"email",className:"block text-xs font-semibold uppercase tracking-wide text-white/50",children:"Email"}),m.jsx("input",{id:"email",type:"email",required:!0,className:"input-field w-full",value:l,onChange:I=>u(I.target.value),placeholder:"tu@correo.com",autoComplete:"email"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"password",className:"block text-xs font-semibold uppercase tracking-wide text-white/50",children:"Contrasea"}),m.jsx("input",{id:"password",type:"password",required:!0,className:"input-field w-full",value:c,onChange:I=>f(I.target.value),autoComplete:i==="login"?"current-password":"new-password"})]}),i==="register"&&m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"confirmPassword",className:"block text-xs font-semibold uppercase tracking-wide text-white/50",children:"Confirmar contrasea"}),m.jsx("input",{id:"confirmPassword",type:"password",required:!0,className:"input-field w-full",value:h,onChange:I=>p(I.target.value),autoComplete:"new-password"})]}),b&&m.jsx("div",{className:"rounded-xl border border-red-500/30 bg-red-500/10 px-4 py-3 text-sm text-red-200",children:b}),E&&m.jsx("div",{className:"rounded-xl border border-emerald-500/30 bg-emerald-500/10 px-4 py-3 text-sm text-emerald-200",children:E}),m.jsx("button",{type:"submit",className:"btn-primary w-full justify-center",disabled:v,children:v?"Procesando":i==="login"?"Entrar":"Crear cuenta"})]}),m.jsx("footer",{className:"mt-6 text-center text-sm text-white/60",children:i==="login"?m.jsx("button",{type:"button",className:"text-sky-300 hover:text-sky-200",onClick:j,children:"No tienes cuenta? Regstrate"}):m.jsx("button",{type:"button",className:"text-sky-300 hover:text-sky-200",onClick:j,children:"Ya tienes cuenta? Inicia sesin"})})]})})}Xe.locale("es");function v5(){const e=Ne(I=>I.plans),[t,n]=Mo(),r=(t.get("plan")??"").trim(),i=w.useMemo(()=>e.filter(I=>I.kind==="personal"&&I.enabled),[e]),o=w.useMemo(()=>i.length===0?void 0:i.find(M=>M.id===r)??i[0],[i,r]),l=(o==null?void 0:o.id)??"personal-kungfu";w.useEffect(()=>{if(!o||r===o.id)return;const I=new URLSearchParams(t);I.set("plan",o.id),n(I,{replace:!0})},[o,r,t,n]);const u=Ne(I=>I.sessions).filter(I=>I.kind==="personal"&&(I.planId??"personal-kungfu")===l),c=Ne(I=>I.works),f=Ne(I=>I.objectives),h=Ne(I=>I.assistants),p=Ne(I=>I.addSession),v=w.useMemo(()=>[...u].sort((I,M)=>Xe(M.date).valueOf()-Xe(I.date).valueOf()),[u]),y=t.get("session")??void 0,b=y?u.find(I=>I.id===y):void 0,[k,E]=w.useState(b==null?void 0:b.id);w.useEffect(()=>{if(y&&!u.some(I=>I.id===y)){E(void 0);const I=new URLSearchParams(t);I.delete("session"),n(I,{replace:!0})}},[y,u,t,n]);const C=k?u.find(I=>I.id===k):void 0,_=I=>{E(I);const M=new URLSearchParams(t);M.set("session",I),M.set("plan",l),n(M,{replace:!0})},j=()=>{const I=Xe().format("YYYY-MM-DD"),M=u.find(B=>B.date===I);if(M){_(M.id);return}const A=p({date:I,kind:"personal",planId:l,title:(o==null?void 0:o.name)??"Entrenamiento personal",description:"",notes:""});_(A.id)};return m.jsxs("div",{className:"space-y-6",children:[m.jsx("header",{className:"glass-panel p-6 sm:p-10",children:m.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsxs("h1",{className:"text-3xl font-bold",children:[(o==null?void 0:o.name)??"Personal","  Sesiones"]}),m.jsx("p",{className:"text-white/60",children:"Histrico y edicin de sesiones para este plan."})]}),m.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row",children:[m.jsx(Li,{to:`/personal?plan=${encodeURIComponent(l)}`,className:"btn-secondary",children:"Volver a hoy"}),m.jsx(Li,{to:`/settings?plan=${encodeURIComponent(l)}`,className:"btn-secondary",children:"Ajustes"}),m.jsx("button",{type:"button",className:"btn-primary",onClick:j,children:"Crear/abrir hoy"})]})]})}),m.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.1fr_1.9fr]",children:[m.jsxs("section",{className:"glass-panel space-y-3 p-6",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("h2",{className:"text-lg font-semibold text-white",children:"Sesiones"}),m.jsx("span",{className:"rounded-full border border-white/10 px-3 py-1 text-xs text-white/60",children:v.length})]}),v.length===0?m.jsx("div",{className:"rounded-2xl border border-dashed border-white/15 bg-white/5 p-6 text-sm text-white/50",children:"No hay sesiones personales todava. Crea la sesin de hoy para empezar a registrar tu entrenamiento."}):m.jsx("div",{className:"space-y-2",children:v.map(I=>{const M=I.workItems.filter(A=>(A.completed??!1)||typeof A.result<"u").length;return m.jsxs("button",{type:"button",onClick:()=>_(I.id),className:ze("flex w-full flex-col gap-1 rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-left transition hover:border-white/30 hover:bg-white/10",I.id===k&&"border-sky-400/60 bg-sky-500/10 shadow shadow-sky-500/10"),children:[m.jsx("p",{className:"text-sm font-semibold text-white",children:I.title||"Sesin sin ttulo"}),m.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:Xe(I.date).format("ddd  D MMM YYYY")}),m.jsxs("p",{className:"text-xs text-white/60",children:[M,"/",I.workItems.length," registrados"]})]},I.id)})})]}),m.jsx("section",{className:"glass-panel p-6",children:C?m.jsx(Nm,{session:C,works:c,objectives:f,assistants:h}):m.jsx("div",{className:"rounded-2xl border border-dashed border-white/15 bg-white/5 p-10 text-center text-white/50",children:"Selecciona una sesin para verla y editarla."})})]})]})}const Np=e=>Array.from(new Set((e??[]).map(t=>t.trim().toLowerCase()).filter(Boolean))),J1=e=>Array.from(new Set(e.split(",").map(t=>t.trim()).filter(Boolean))),Q1=e=>(e??[]).join(", ");function nw(e){const t=Np(e.byTags),n=Np(e.byNodeTypes),r=J1(Q1(e.byWorkIds)),i={};return t&&t.length>0&&(i.byTags=t),n&&n.length>0&&(i.byNodeTypes=n),r&&r.length>0&&(i.byWorkIds=r),i}function x5(e){const t={};Object.entries(e.targetsDays??{}).forEach(([r,i])=>{const o=r.trim().toLowerCase(),l=Number(i);o&&Number.isFinite(l)&&(t[o]=Math.max(1,Math.round(l)))});const n=(e.overrides??[]).map(r=>{var i;return{match:{tagsAny:Np(((i=r.match)==null?void 0:i.tagsAny)??[])},multiplier:Math.max(.1,Number(r.multiplier)||1)}}).filter(r=>r.match.tagsAny.length>0);return{targetsDays:t,overrides:n}}function w5(e){var _,j,I;const t=Math.max(1,Math.round(Number(e.maxItems)||12)),n=Math.max(1,Number(e.minutesBudget)||30),r={};Object.entries(e.defaultMinutesByNodeType??{}).forEach(([M,A])=>{const B=M.trim().toLowerCase(),te=Number(A);B&&Number.isFinite(te)&&(r[B]=Math.max(.25,te))});const i=M=>M==="count"||M==="minutes"||M==="both",o=M=>M==="work"||M==="note",l=M=>M==="overdue"||M==="weighted",u=M=>M==="allow_all"||M==="prefer_leaves",c=M=>{if(!Array.isArray(M))return[];const A=M.map(B=>Number(B)).filter(B=>Number.isFinite(B)).map(B=>Math.round(B)).filter(B=>B>=0&&B<=6);return Array.from(new Set(A)).sort((B,te)=>B-te)},f=(M,A)=>{const B=(M.id??"").trim()||$t(),te=o(M.type)?M.type:"work",H=typeof M.enabled=="boolean"?M.enabled:!0,O=Number.isFinite(Number(M.order))?Number(M.order):A,D=(M.name??"").trim()||(te==="note"?"Recap":"Grupo"),ne=i(M.limitMode)?M.limitMode:"minutes",W=Number(M.maxItems),Y=Number.isFinite(W)&&Math.round(W)>0?Math.round(W):void 0,V=Number(M.minutesBudget),ie=Number.isFinite(V)&&V>0?Math.max(0,V):void 0,z=l(M.strategy)?M.strategy:"overdue",L=u(M.hierarchyRule)?M.hierarchyRule:"allow_all",Q=(M.include??[]).map(nw).filter(F=>Object.keys(F).length>0),T=(M.exclude??[]).map(nw).filter(F=>Object.keys(F).length>0);return{id:B,name:D,enabled:H,order:O,type:te,daysOfWeek:c(M.daysOfWeek),limitMode:ne,maxItems:Y,minutesBudget:ie,strategy:z,hierarchyRule:L,include:Q,exclude:T}},p=((e.groups??[]).length>0?e.groups??[]:[{id:"formas",name:"Formas",enabled:!0,order:1,type:"work",limitMode:"minutes",minutesBudget:18,strategy:"overdue",hierarchyRule:"prefer_leaves",include:[{byNodeTypes:["segment","form"]}],exclude:[]},{id:"tecnicas",name:"Tcnicas",enabled:!0,order:2,type:"work",limitMode:"minutes",minutesBudget:10,strategy:"weighted",hierarchyRule:"allow_all",include:[{byNodeTypes:["technique"]},{byTags:["roulette"]}],exclude:[]},{id:"recap",name:"Recap",enabled:!0,order:99,type:"note",limitMode:"minutes",minutesBudget:2}]).map((M,A)=>f(M,A+1)).sort((M,A)=>M.order-A.order).map((M,A)=>({...M,order:A+1})),v=p.filter(M=>(M.type??"work")!=="note"),y=p.filter(M=>M.type==="note"),b=Math.max(0,Number((_=v[0])==null?void 0:_.minutesBudget)||0),k=Math.max(0,Number((j=v[1])==null?void 0:j.minutesBudget)||0),E=Math.max(0,Number((I=y[0])==null?void 0:I.minutesBudget)||0),C=Math.max(0,b+k+E);return{limitMode:e.limitMode,maxItems:t,minutesBudget:n,template:{totalMinutes:C,focusMinutes:b,rouletteMinutes:k,recapMinutes:E},defaultMinutesByNodeType:r,focusSelectors:[],rouletteSelectors:[],groups:p}}const b5={},rw=[{label:"L",value:1},{label:"M",value:2},{label:"X",value:3},{label:"J",value:4},{label:"V",value:5},{label:"S",value:6},{label:"D",value:0}];function iw(){const e=Ne(re=>re.kungfuCadence),t=Ne(re=>re.kungfuTodayPlan),n=Ne(re=>re.plans),r=Ne(re=>re.workTaxonomy),i=Ne(re=>re.upsertNodeType),o=Ne(re=>re.upsertTag),l=Ne(re=>re.addPlan),u=Ne(re=>re.updatePlan),c=Ne(re=>re.duplicatePlan),f=Ne(re=>re.deletePlan),h=Ne(re=>re.setKungfuCadence),p=Ne(re=>re.setKungfuTodayPlan),[v,y]=Mo(),b=(v.get("plan")??"").trim(),k=w.useMemo(()=>rm(n),[n]),E=w.useMemo(()=>k.length===0?void 0:k.find(Ie=>Ie.id===b)??k[0],[k,b]),C=(E==null?void 0:E.id)??"personal-kungfu",_=(E==null?void 0:E.cadence)??e,j=(E==null?void 0:E.todayPlan)??t,[I,M]=w.useState((E==null?void 0:E.name)??"Plan"),[A,B]=w.useState((E==null?void 0:E.enabled)??!0),[te,H]=w.useState(_),[O,D]=w.useState(j),[ne,W]=w.useState(null),[Y,V]=w.useState([]),[ie,z]=w.useState("personal");w.useEffect(()=>{if(E){if(b!==E.id){const re=new URLSearchParams(v);re.set("plan",E.id),y(re,{replace:!0})}M(E.name),B(E.enabled),E.kind==="personal"?(H(E.cadence??e),D(E.todayPlan??t)):(H(e),D(t))}},[E,b,v,y,e,t]);const L=w.useMemo(()=>{if(!E)return!1;const re=E.name!==I||E.enabled!==A;return E.kind!=="personal"?re:re||JSON.stringify(_)!==JSON.stringify(te)||JSON.stringify(j)!==JSON.stringify(O)},[E,_,j,I,A,te,O]),Q=re=>{W(re),re&&window.setTimeout(()=>W(null),re.type==="success"?1800:2600)},T=()=>{try{const re={name:I.trim()||(E==null?void 0:E.name)||"Plan",enabled:A};if((E==null?void 0:E.kind)==="personal"){const Ie=x5(te),Ue=w5(O);u(C,{...re,cadence:Ie,todayPlan:Ue}),C==="personal-kungfu"&&(h(Ie),p(Ue))}else u(C,re);Q({type:"success",text:"Guardado."})}catch(re){const Ie=re instanceof Error?re.message:"No se pudo guardar.";Q({type:"error",text:Ie})}},F=()=>{E&&(M(E.name),B(E.enabled)),H(_),D(j),Q({type:"success",text:"Cambios descartados."})},J=w.useMemo(()=>(r.nodeTypes??[]).slice().sort((re,Ie)=>re.label.localeCompare(Ie.label,"en",{sensitivity:"base"})).map(re=>({value:re.key,label:re.label})),[r.nodeTypes]),P=w.useMemo(()=>(r.tags??[]).slice().sort((re,Ie)=>re.name.localeCompare(Ie.name,"en",{sensitivity:"base"})).map(re=>({value:re.name,label:re.name})),[r.tags]),be=w.useMemo(()=>new Map(rw.map(re=>[re.value,re.label])),[]),he=w.useCallback((re,Ie)=>{V(Ue=>{const We=Ue.includes(re),tt=typeof Ie=="boolean"?Ie:!We;return tt===We?Ue:tt?[...Ue,re]:Ue.filter(ot=>ot!==re)})},[]),ge=w.useCallback(()=>{const re=$t();D(Ie=>{const Ue=[...Ie.groups??[]].sort((ot,St)=>(ot.order??0)-(St.order??0)),We={id:re,name:"Nuevo grupo",enabled:!0,order:Ue.length+1,type:"work",daysOfWeek:[],limitMode:"minutes",maxItems:0,minutesBudget:5,strategy:"overdue",hierarchyRule:"allow_all",include:[],exclude:[]},tt=[...Ue,We].map((ot,St)=>({...ot,order:St+1}));return{...Ie,groups:tt}}),he(re,!0)},[he]),me=re=>{const Ie=new URLSearchParams(v);Ie.set("plan",re),y(Ie,{replace:!0})},je=()=>{const re=l({kind:ie,name:ie==="class"?"Clases":"Personal"});me(re.id),Q({type:"success",text:"Plan creado."})},Ae=()=>{if(!E)return;const re=c(E.id);if(!re){Q({type:"error",text:"No se pudo duplicar el plan."});return}me(re.id),Q({type:"success",text:"Plan duplicado."})},Te=()=>{if(!E||!window.confirm(`Eliminar el plan "${E.name}"? (No se borrarn sesiones)`))return;if(!f(E.id)){Q({type:"error",text:"No se pudo eliminar. Puede ser un plan protegido o tener sesiones asociadas."});return}const Ue=k.find(We=>We.id!==E.id);Ue&&me(Ue.id),Q({type:"success",text:"Plan eliminado."})};return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("header",{className:"glass-panel p-6 sm:p-10",children:[m.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold",children:"Ajustes  Planes"}),m.jsx("p",{className:"text-white/60",children:"Configura planes (personales y clases) y sus reglas."})]}),m.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-end",children:[m.jsxs("div",{className:"flex flex-wrap items-center justify-end gap-2",children:[m.jsxs("select",{className:"input-field h-10 w-[9.5rem] rounded-2xl px-3 text-sm",value:ie,onChange:re=>z(re.target.value),title:"Tipo del nuevo plan",children:[m.jsx("option",{value:"personal",children:"Personal"}),m.jsx("option",{value:"class",children:"Clases"})]}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:je,children:"Nuevo"}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:Ae,disabled:!E,children:"Duplicar"}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:Te,disabled:!E,children:"Eliminar"})]}),m.jsxs("div",{className:"flex gap-3",children:[L?m.jsx("button",{type:"button",className:"btn-secondary",onClick:F,children:"Descartar"}):null,m.jsx("button",{type:"button",className:"btn-primary",onClick:T,disabled:!L,children:"Guardar"})]})]})]}),m.jsx("div",{className:"mt-5 flex flex-wrap gap-2",children:k.map(re=>m.jsx("button",{type:"button",onClick:()=>me(re.id),className:ze("rounded-full border px-4 py-2 text-sm font-semibold transition",re.id===(E==null?void 0:E.id)?"border-sky-400/70 bg-sky-500/10 text-white":"border-white/10 bg-white/5 text-white/70 hover:border-white/30 hover:text-white"),title:re.kind==="class"?"Plan de clases":"Plan personal",children:re.name},re.id))}),ne?m.jsx("div",{className:ze("mt-4 rounded-2xl border px-4 py-3 text-sm",ne.type==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-rose-500/40 bg-rose-500/10 text-rose-200"),children:ne.text}):null]}),m.jsxs("section",{className:"glass-panel space-y-5 p-6",children:[m.jsxs("div",{className:"grid gap-4 sm:grid-cols-[1fr_auto] sm:items-end",children:[m.jsxs("label",{className:"grid gap-2",children:[m.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:"Nombre del plan"}),m.jsx("input",{type:"text",className:"input-field",value:I,onChange:re=>M(re.target.value)})]}),m.jsxs("label",{className:"flex items-center justify-between gap-3 rounded-2xl border border-white/10 bg-white/5 px-4 py-3",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-semibold text-white/80",children:"Plan activo"}),m.jsx("p",{className:"text-xs text-white/50",children:(E==null?void 0:E.kind)==="class"?"Clases":"Personal"})]}),m.jsx("input",{type:"checkbox",className:"h-5 w-5 accent-sky-400",checked:A,onChange:re=>B(re.target.checked)})]})]}),(E==null?void 0:E.kind)==="class"?m.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 text-sm text-white/70",children:[m.jsx("p",{className:"font-semibold text-white/80",children:"Este plan es de tipo Clases."}),m.jsxs("p",{className:"mt-1 text-white/60",children:["Por ahora, los grupos automticos (cadencias + Plan de hoy) solo aplican a planes personales. Para clases, planifica desde ",m.jsx("span",{className:"font-semibold text-white",children:"Sesiones"})," en modo Editar."]})]}):null]}),(E==null?void 0:E.kind)!=="personal"?null:m.jsxs(m.Fragment,{children:[m.jsxs("section",{className:"glass-panel space-y-5 p-6",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-semibold text-white",children:"Plan de hoy"}),m.jsx("p",{className:"text-sm text-white/60",children:"Controla cuntos tems se sugieren y el presupuesto de minutos."})]}),m.jsxs("div",{className:"grid gap-4 sm:grid-cols-3",children:[m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Modo de lmite"}),m.jsxs("select",{className:"input-field",value:O.limitMode,onChange:re=>D(Ie=>({...Ie,limitMode:re.target.value})),children:[m.jsx("option",{value:"count",children:"Por cantidad"}),m.jsx("option",{value:"minutes",children:"Por minutos"}),m.jsx("option",{value:"both",children:"Cantidad y minutos"})]})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Mx. tems"}),m.jsx("input",{type:"number",min:1,className:"input-field",value:O.maxItems,onChange:re=>D(Ie=>({...Ie,maxItems:Number(re.target.value)}))})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Presupuesto (min)"}),m.jsx("input",{type:"number",min:1,className:"input-field",value:O.minutesBudget,onChange:re=>D(Ie=>({...Ie,minutesBudget:Number(re.target.value)}))})]})]}),m.jsxs("div",{className:"space-y-4 rounded-3xl border border-white/10 bg-white/5 p-5",children:[m.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-white",children:"Grupos"}),m.jsx("p",{className:"text-sm text-white/60",children:"Define bloques con reglas, das de la semana y lmites."})]}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:ge,children:"+ Grupo"})]}),m.jsx("div",{className:"space-y-4",children:[...O.groups??[]].sort((re,Ie)=>(re.order??0)-(Ie.order??0)).map((re,Ie,Ue)=>{const We=re.type??"work",tt=re.daysOfWeek??[],ot=tt.length===0,St=re.limitMode??"minutes",Qt=re.strategy??"overdue",qt=re.hierarchyRule??"allow_all",G=Y.includes(re.id),fe=ot?"Todos":tt.map(ee=>be.get(ee)??String(ee)).filter(Boolean).join(" "),ye=(()=>{const ee=Math.round(Number(re.maxItems??0)),de=Number(re.minutesBudget??0),$=Number.isFinite(ee)&&ee>0?`${Math.max(0,ee)} tems`:"Sin lmite",Z=Number.isFinite(de)&&de>0?`${Math.max(0,de)} min`:"Sin lmite";return St==="count"?$:St==="minutes"?Z:`${$}  ${Z}`})(),Pe=(re.include??[]).length,Se=(re.exclude??[]).length,ae=ee=>{D(de=>{const Z=[...de.groups??[]].sort((pe,ve)=>(pe.order??0)-(ve.order??0)).map(pe=>pe.id===re.id?{...pe,...ee}:pe).map((pe,ve)=>({...pe,order:ve+1}));return{...de,groups:Z}})},R=ee=>{D(de=>{const $=[...de.groups??[]].sort((Je,nt)=>(Je.order??0)-(nt.order??0)),Z=$.findIndex(Je=>Je.id===re.id),pe=Z+ee;if(Z<0||pe<0||pe>=$.length)return de;const ve=$.slice(),De=ve[Z];return ve[Z]=ve[pe],ve[pe]=De,{...de,groups:ve.map((Je,nt)=>({...Je,order:nt+1}))}})},q=()=>{D(ee=>{const $=[...ee.groups??[]].sort((Z,pe)=>(Z.order??0)-(pe.order??0)).filter(Z=>Z.id!==re.id).map((Z,pe)=>({...Z,order:pe+1}));return{...ee,groups:$.length>0?$:ee.groups}}),V(ee=>ee.filter(de=>de!==re.id))},ue=()=>{const ee=$t();D(de=>{const $=[...de.groups??[]].sort((Je,nt)=>(Je.order??0)-(nt.order??0)),Z=$.findIndex(Je=>Je.id===re.id);if(Z<0)return de;const pe=(re.name??"").trim()||"Grupo",ve={...re,id:ee,name:`${pe} (copia)`},De=$.slice();return De.splice(Z+1,0,ve),{...de,groups:De.map((Je,nt)=>({...Je,order:nt+1}))}}),he(ee,!0)},le=(ee,de)=>{const $=re[ee]??[];ae({[ee]:de($)})};return m.jsxs("div",{className:"rounded-3xl border border-white/10 bg-slate-950/40",children:[m.jsxs("div",{className:"flex flex-col gap-3 p-4 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{className:"flex flex-1 flex-wrap items-center gap-3",children:[m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>he(re.id),"aria-expanded":G,title:G?"Colapsar":"Expandir",children:G?"":""}),m.jsxs("div",{className:"min-w-[240px] flex-1",children:[m.jsx("p",{className:"text-sm font-semibold text-white",children:(re.name??"").trim()||"Grupo"}),m.jsxs("p",{className:"text-xs text-white/50",children:[We==="note"?"Nota":"Trabajos","  ",fe,"  ",ye,We==="work"?`  ${Qt==="weighted"?"Ruleta":"Cadencia"}`:"",We==="work"?`  Incluye:${Pe||""} Excluye:${Se||""}`:""]})]}),m.jsx("span",{className:ze("rounded-full border px-3 py-1 text-xs font-semibold",re.enabled?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-white/15 bg-white/5 text-white/60"),children:re.enabled?"Enabled":"Disabled"})]}),m.jsxs("div",{className:"flex items-center justify-end gap-2",children:[m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>R(-1),disabled:Ie===0,title:"Subir",children:""}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>R(1),disabled:Ie===Ue.length-1,title:"Bajar",children:""}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:ue,title:"Duplicar",children:"Duplicar"}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:q,disabled:Ue.length<=1,children:"Eliminar"})]})]}),G?m.jsx("div",{className:"border-t border-white/10 p-5",children:m.jsx("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:m.jsxs("div",{className:"flex flex-1 flex-col gap-3",children:[m.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[m.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-white/70",children:[m.jsx("input",{type:"checkbox",className:"accent-sky-400",checked:re.enabled,onChange:ee=>ae({enabled:ee.target.checked})}),"Enabled"]}),m.jsx("input",{type:"text",className:"input-field flex-1",value:re.name,onChange:ee=>ae({name:ee.target.value}),placeholder:"Nombre del grupo"}),m.jsxs("select",{className:"input-field w-36",value:We,onChange:ee=>ae({type:ee.target.value}),children:[m.jsx("option",{value:"work",children:"Trabajos"}),m.jsx("option",{value:"note",children:"Nota"})]})]}),m.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:"Das"}),m.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[m.jsx("button",{type:"button",className:ze("rounded-full border px-3 py-1 text-xs font-semibold transition",ot?"border-sky-500/40 bg-sky-500/10 text-sky-100":"border-white/15 bg-white/5 text-white/70 hover:border-white/30 hover:text-white"),onClick:()=>ae({daysOfWeek:[]}),title:"Vaco = todos los das",children:"Todos"}),rw.map(ee=>{const de=ot?!0:tt.includes(ee.value);return m.jsx("button",{type:"button",className:ze("h-8 w-8 rounded-full border text-xs font-semibold transition",de?"border-emerald-500/40 bg-emerald-500/10 text-emerald-100":"border-white/15 bg-white/5 text-white/70 hover:border-white/30 hover:text-white"),onClick:()=>{const $=ot?[ee.value]:tt.includes(ee.value)?tt.filter(Z=>Z!==ee.value):[...tt,ee.value];ae({daysOfWeek:$.sort((Z,pe)=>Z-pe)})},title:de?"Activo":"Inactivo",children:ee.label},ee.value)})]}),m.jsx("p",{className:"text-xs text-white/50",children:"Si eliges das especficos, solo aparecer esos das."})]}),m.jsxs("div",{className:"grid gap-3 sm:grid-cols-3",children:[m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:"Lmite"}),m.jsxs("select",{className:"input-field",value:St,onChange:ee=>ae({limitMode:ee.target.value}),children:[m.jsx("option",{value:"count",children:"Cantidad"}),m.jsx("option",{value:"minutes",children:"Minutos"}),m.jsx("option",{value:"both",children:"Ambos"})]})]}),m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:"Mx tems"}),m.jsx("input",{type:"number",min:0,className:"input-field",value:re.maxItems??0,onChange:ee=>{const de=Number(ee.target.value),$={maxItems:de};if(Number.isFinite(de)&&de>0){const Z=Number(re.minutesBudget??0);St==="minutes"&&($.limitMode=Z>0?"both":"count")}ae($)}})]}),m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:"Mx min"}),m.jsx("input",{type:"number",min:0,className:"input-field",value:re.minutesBudget??0,onChange:ee=>{const de=Number(ee.target.value),$={minutesBudget:de};if(Number.isFinite(de)&&de>0){const Z=Number(re.maxItems??0);St==="count"&&($.limitMode=Z>0?"both":"minutes")}ae($)}})]})]})]}),We==="work"?m.jsxs("div",{className:"mt-2 grid gap-4 lg:grid-cols-2",children:[m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:"Estrategia"}),m.jsxs("select",{className:"input-field",value:Qt,onChange:ee=>ae({strategy:ee.target.value}),children:[m.jsx("option",{value:"overdue",children:"Vencido (cadencia)"}),m.jsx("option",{value:"weighted",children:"Ponderado (ruleta)"})]})]}),m.jsxs("label",{className:"flex items-center gap-2 text-sm text-white/70",children:[m.jsx("input",{type:"checkbox",className:"accent-sky-400",checked:qt==="prefer_leaves",onChange:ee=>ae({hierarchyRule:ee.target.checked?"prefer_leaves":"allow_all"})}),"Preferir hijos (evita padres cuando existan)"]})]}):null,We==="work"?m.jsx("div",{className:"mt-4 grid gap-5 lg:grid-cols-2",children:["include","exclude"].map(ee=>m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("p",{className:"text-sm font-semibold text-white/80",children:ee==="include"?"Include (OR)":"Exclude (OR)"}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>le(ee,de=>[...de,{...b5}]),children:"+ Regla"})]}),(re[ee]??[]).length===0?m.jsx("p",{className:"text-xs text-white/50",children:ee==="include"?"Vaco = incluye todo (se aplican excludes).":"Vaco = no excluye nada."}):null,(re[ee]??[]).map((de,$)=>m.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:["Regla ",$+1]}),m.jsx("button",{type:"button",className:"text-xs font-semibold text-rose-200 hover:text-rose-100",onClick:()=>le(ee,Z=>Z.filter((pe,ve)=>ve!==$)),children:"Quitar"})]}),m.jsxs("div",{className:"mt-3 grid gap-3",children:[m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs text-white/50",children:"Tags (AND)"}),m.jsx(Ya,{options:P,value:de.byTags??[],onChange:Z=>le(ee,pe=>{const ve=[...pe];return ve[$]={...ve[$],byTags:Z},ve}),placeholder:"Search tags",allowCreate:!0,onCreate:Z=>{const pe=o(Z);return pe?{createdValue:pe,createdLabel:pe}:null}})]}),m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs text-white/50",children:"Node types"}),m.jsx(Ya,{options:J,value:de.byNodeTypes??[],onChange:Z=>le(ee,pe=>{const ve=[...pe];return ve[$]={...ve[$],byNodeTypes:Z},ve}),placeholder:"Search node types",allowCreate:!0,onCreate:Z=>{const pe=i(Z);return pe?{createdValue:pe,createdLabel:Z.trim()}:null}})]}),m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs text-white/50",children:"Work IDs"}),m.jsx("input",{type:"text",className:"input-field",value:Q1(de.byWorkIds),placeholder:"id1, id2",onChange:Z=>{const pe=J1(Z.target.value);le(ee,ve=>{const De=[...ve];return De[$]={...De[$],byWorkIds:pe},De})}})]})]})]},`${ee}-${re.id}-${$}`))]},`${re.id}-${ee}`))}):null]})})}):null]},re.id)})})]}),m.jsxs("details",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[m.jsx("summary",{className:"cursor-pointer text-sm font-semibold text-white/80",children:"Estimacin de minutos por tipo"}),m.jsx("div",{className:"mt-3 grid gap-3 sm:grid-cols-2",children:Object.entries(O.defaultMinutesByNodeType).sort(([re],[Ie])=>re.localeCompare(Ie,"es",{sensitivity:"base"})).map(([re,Ie])=>m.jsxs("label",{className:"grid gap-2",children:[m.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:re}),m.jsx("input",{type:"number",min:.25,step:.25,className:"input-field",value:Ie,onChange:Ue=>D(We=>({...We,defaultMinutesByNodeType:{...We.defaultMinutesByNodeType,[re]:Number(Ue.target.value)}}))})]},re))})]})]}),m.jsxs("section",{className:"glass-panel space-y-5 p-6",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-semibold text-white",children:"Cadencias"}),m.jsx("p",{className:"text-sm text-white/60",children:"Objetivo de das por tipo, con overrides por tags."})]}),m.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:Array.from(new Set([...Object.keys(te.targetsDays??{}),...(r.nodeTypes??[]).map(re=>re.key)])).map(re=>re.trim().toLowerCase()).filter(Boolean).sort((re,Ie)=>re.localeCompare(Ie,"en",{sensitivity:"base"})).map(re=>{var We;const Ie=((We=(r.nodeTypes??[]).find(tt=>tt.key===re))==null?void 0:We.label)??re,Ue=(te.targetsDays??{})[re]??(te.targetsDays??{}).work??7;return m.jsxs("label",{className:"grid gap-2",children:[m.jsxs("span",{className:"text-xs uppercase tracking-wide text-white/40",children:[Ie," ",m.jsxs("span",{className:"text-white/30",children:["(",re,")"]})]}),m.jsx("input",{type:"number",min:1,className:"input-field",value:Ue,onChange:tt=>H(ot=>({...ot,targetsDays:{...ot.targetsDays,[re]:Number(tt.target.value)}}))})]},re)})}),m.jsxs("details",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[m.jsx("summary",{className:"cursor-pointer text-sm font-semibold text-white/80",children:"Overrides"}),m.jsxs("div",{className:"mt-3 space-y-3",children:[(te.overrides??[]).map((re,Ie)=>m.jsxs("div",{className:"rounded-2xl border border-white/10 bg-slate-950/40 p-4",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:["Override ",Ie+1]}),m.jsx("button",{type:"button",className:"text-xs font-semibold text-rose-200 hover:text-rose-100",onClick:()=>H(Ue=>({...Ue,overrides:(Ue.overrides??[]).filter((We,tt)=>tt!==Ie)})),children:"Quitar"})]}),m.jsxs("div",{className:"mt-3 grid gap-3 sm:grid-cols-2",children:[m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs text-white/50",children:"Tags (ANY)"}),m.jsx(Ya,{options:P,value:re.match.tagsAny??[],onChange:Ue=>H(We=>{const tt=[...We.overrides??[]];return tt[Ie]={...re,match:{tagsAny:Ue}},{...We,overrides:tt}}),placeholder:"Search tags",allowCreate:!0,onCreate:Ue=>{const We=o(Ue);return We?{createdValue:We,createdLabel:We}:null}})]}),m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs text-white/50",children:"Multiplier"}),m.jsx("input",{type:"number",min:.1,step:.1,className:"input-field",value:re.multiplier,onChange:Ue=>{const We=Number(Ue.target.value);H(tt=>{const ot=[...tt.overrides??[]];return ot[Ie]={...re,multiplier:We},{...tt,overrides:ot}})}})]})]})]},`override-${Ie}`)),m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>H(re=>({...re,overrides:[...re.overrides??[],{match:{tagsAny:[]},multiplier:1}]})),children:"+ Aadir override"})]})]})]})]})]})}const sw=[{to:"/",label:"Sesiones"},{to:"/catalog",label:"Trabajos"},{to:"/settings",label:"Ajustes"},{to:"/objectives",label:"Objetivos"},{to:"/assistants",label:"Asistentes"},{to:"/backups",label:"Backups"}];function k5(){const[e,t]=w.useState(!1),[n,r]=w.useState(!1),{user:i,signOut:o}=js(),l=async()=>{try{r(!0),await o()}catch(u){console.error("No se pudo cerrar sesin",u)}finally{r(!1),t(!1)}};return m.jsxs("header",{className:"sticky top-0 z-50 border-b border-white/10 bg-slate-950/80 backdrop-blur-xl",children:[m.jsxs("div",{className:"mx-auto flex max-w-6xl items-center justify-between px-3 py-3 sm:px-4 sm:py-4",children:[m.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[m.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-gradient-to-br from-sky-500 to-indigo-500 text-base font-bold sm:h-10 sm:w-10 sm:text-lg",children:"SP"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-display text-lg font-semibold sm:text-xl",children:"Sport Planner"}),m.jsx("p",{className:"text-[11px] text-white/50 sm:text-xs",children:"Planifica sesiones increbles"})]})]}),m.jsxs("div",{className:"hidden items-center gap-4 md:flex",children:[m.jsx("nav",{className:"flex items-center gap-2",children:sw.map(u=>m.jsx(kv,{to:u.to,className:({isActive:c})=>`rounded-full px-4 py-2 text-sm font-medium transition ${c?"bg-white text-slate-900 shadow-lg shadow-sky-400/30":"text-white/70 hover:text-white hover:bg-white/10"}`,children:u.label},u.to))}),m.jsxs("div",{className:"flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-4 py-2",children:[m.jsxs("div",{className:"text-right",children:[m.jsx("p",{className:"text-xs text-white/50",children:"Sesin iniciada"}),m.jsx("p",{className:"text-sm font-semibold text-white",children:(i==null?void 0:i.email)??"Cuenta"})]}),m.jsx("button",{type:"button",onClick:()=>{l()},disabled:n,className:"inline-flex items-center rounded-full border border-white/20 px-3 py-1 text-xs font-semibold text-white/80 transition hover:bg-white/10 disabled:opacity-60",children:n?"Saliendo":"Cerrar sesin"})]})]}),m.jsx("button",{type:"button",className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-white/20 text-white/80 md:hidden",onClick:()=>t(!0),"aria-label":"Abrir navegacin",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"h-6 w-6",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 6h16M4 12h16M4 18h16"})})})]}),m.jsxs(lx,{open:e,onClose:t,className:"md:hidden",children:[m.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm","aria-hidden":"true"}),m.jsxs(lx.Panel,{className:"fixed inset-y-4 right-3 flex w-[17rem] flex-col rounded-3xl border border-white/10 bg-slate-900/95 p-6 shadow-2xl",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("p",{className:"text-lg font-semibold text-white",children:"Navegacin"}),m.jsx("button",{type:"button",className:"inline-flex h-9 w-9 items-center justify-center rounded-full border border-white/20 text-white/80",onClick:()=>t(!1),"aria-label":"Cerrar navegacin",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"h-5 w-5",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]}),m.jsx("div",{className:"mt-6 flex flex-col gap-2",children:sw.map(u=>m.jsx(kv,{to:u.to,className:({isActive:c})=>`rounded-2xl px-4 py-3 text-sm font-semibold transition ${c?"bg-white text-slate-900 shadow shadow-sky-400/40":"text-white/80 hover:bg-white/10"}`,onClick:()=>t(!1),children:u.label},u.to))}),m.jsxs("div",{className:"mt-auto rounded-2xl border border-white/10 bg-white/5 p-4",children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-white/40",children:"Sesin iniciada"}),m.jsx("p",{className:"mt-1 text-sm font-semibold text-white",children:(i==null?void 0:i.email)??"Cuenta"}),m.jsx("button",{type:"button",onClick:()=>{l()},disabled:n,className:"mt-3 w-full rounded-full border border-white/20 px-3 py-2 text-sm font-semibold text-white/80 transition hover:bg-white/10 disabled:opacity-60",children:n?"Saliendo":"Cerrar sesin"})]})]})]})]})}function S5(){return KR(),GR(),m.jsxs("div",{className:"min-h-screen pb-16",children:[m.jsx(k5,{}),m.jsx("main",{className:"mx-auto w-full max-w-6xl px-3 py-5 sm:px-6 sm:py-10",children:m.jsx(gw,{})})]})}function E5(){return m.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-950",children:m.jsxs("div",{className:"flex flex-col items-center gap-4",children:[m.jsx("div",{className:"h-12 w-12 animate-spin rounded-full border-2 border-white/20 border-t-sky-400"}),m.jsx("p",{className:"text-sm font-medium text-white/60",children:"Cargando Sport Planner"})]})})}function _5(){const{session:e,loading:t}=js(),n=ri();return t?m.jsx(E5,{}):e?m.jsx(gw,{}):m.jsx(Ja,{to:"/login",replace:!0,state:{from:n}})}function C5(){return m.jsx(eC,{children:m.jsxs(V_,{children:[m.jsx(pn,{path:"/login",element:m.jsx(y5,{})}),m.jsx(pn,{element:m.jsx(_5,{}),children:m.jsxs(pn,{element:m.jsx(S5,{}),children:[m.jsx(pn,{index:!0,element:m.jsx(s5,{})}),m.jsx(pn,{path:"personal",element:m.jsx(Ja,{to:"/?plan=personal-kungfu",replace:!0})}),m.jsx(pn,{path:"personal/sessions",element:m.jsx(v5,{})}),m.jsx(pn,{path:"personal/settings",element:m.jsx(iw,{})}),m.jsx(pn,{path:"settings",element:m.jsx(iw,{})}),m.jsx(pn,{path:"plan",element:m.jsx(o5,{})}),m.jsx(pn,{path:"catalog",element:m.jsx(f5,{})}),m.jsx(pn,{path:"catalog/taxonomy",element:m.jsx(h5,{})}),m.jsx(pn,{path:"objectives",element:m.jsx(p5,{})}),m.jsx(pn,{path:"assistants",element:m.jsx(m5,{})}),m.jsx(pn,{path:"backups",element:m.jsx(g5,{})})]})}),m.jsx(pn,{path:"*",element:m.jsx(Ja,{to:"/",replace:!0})})]})})}function j5({children:e}){const[t,n]=w.useState(null),[r,i]=w.useState(null),[o,l]=w.useState(!0);w.useEffect(()=>{let c=!0;(async()=>{l(!0);const{data:{session:p}}=await Ht.auth.getSession();c&&(n(p),i((p==null?void 0:p.user)??null),l(!1))})();const{data:{subscription:h}}=Ht.auth.onAuthStateChange((p,v)=>{c&&(n(v),i((v==null?void 0:v.user)??null),l(!1))});return()=>{c=!1,h.unsubscribe()}},[]);const u=w.useMemo(()=>({session:t,user:r,loading:o,signInWithPassword:async(c,f)=>{const{error:h}=await Ht.auth.signInWithPassword({email:c,password:f});if(h)throw h},signUpWithPassword:async(c,f)=>{const p=typeof window<"u"?`${window.location.origin}/sport-planner/`:void 0,{error:v}=await Ht.auth.signUp({email:c,password:f,options:{emailRedirectTo:p}});if(v)throw v},signOut:async()=>{const{error:c}=await Ht.auth.signOut();if(c)throw c}}),[o,t,r]);return m.jsx(Bb.Provider,{value:u,children:e})}Ne.getState().hydrate();e_.createRoot(document.getElementById("root")).render(m.jsx(Re.StrictMode,{children:m.jsx(j5,{children:m.jsx(C5,{})})}));
