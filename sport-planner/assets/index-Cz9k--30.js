function LE(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function To(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function $E(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var Nf={exports:{}},wa={},Tf={exports:{}},Je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nv;function FE(){if(nv)return Je;nv=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function y(U){return U===null||typeof U!="object"?null:(U=p&&U[p]||U["@@iterator"],typeof U=="function"?U:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,w={};function _(U,Z,I){this.props=U,this.context=Z,this.refs=w,this.updater=I||v}_.prototype.isReactComponent={},_.prototype.setState=function(U,Z){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,Z,"setState")},_.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function E(){}E.prototype=_.prototype;function j(U,Z,I){this.props=U,this.context=Z,this.refs=w,this.updater=I||v}var C=j.prototype=new E;C.constructor=j,b(C,_.prototype),C.isPureReactComponent=!0;var M=Array.isArray,D=Object.prototype.hasOwnProperty,R={current:null},z={key:!0,ref:!0,__self:!0,__source:!0};function F(U,Z,I){var ye,me={},pe=null,fe=null;if(Z!=null)for(ye in Z.ref!==void 0&&(fe=Z.ref),Z.key!==void 0&&(pe=""+Z.key),Z)D.call(Z,ye)&&!z.hasOwnProperty(ye)&&(me[ye]=Z[ye]);var W=arguments.length-2;if(W===1)me.children=I;else if(1<W){for(var te=Array(W),re=0;re<W;re++)te[re]=arguments[re+2];me.children=te}if(U&&U.defaultProps)for(ye in W=U.defaultProps,W)me[ye]===void 0&&(me[ye]=W[ye]);return{$$typeof:e,type:U,key:pe,ref:fe,props:me,_owner:R.current}}function V(U,Z){return{$$typeof:e,type:U.type,key:Z,ref:U.ref,props:U.props,_owner:U._owner}}function A(U){return typeof U=="object"&&U!==null&&U.$$typeof===e}function O(U){var Z={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(I){return Z[I]})}var Q=/\/+/g;function H(U,Z){return typeof U=="object"&&U!==null&&U.key!=null?O(""+U.key):Z.toString(36)}function q(U,Z,I,ye,me){var pe=typeof U;(pe==="undefined"||pe==="boolean")&&(U=null);var fe=!1;if(U===null)fe=!0;else switch(pe){case"string":case"number":fe=!0;break;case"object":switch(U.$$typeof){case e:case t:fe=!0}}if(fe)return fe=U,me=me(fe),U=ye===""?"."+H(fe,0):ye,M(me)?(I="",U!=null&&(I=U.replace(Q,"$&/")+"/"),q(me,Z,I,"",function(re){return re})):me!=null&&(A(me)&&(me=V(me,I+(!me.key||fe&&fe.key===me.key?"":(""+me.key).replace(Q,"$&/")+"/")+U)),Z.push(me)),1;if(fe=0,ye=ye===""?".":ye+":",M(U))for(var W=0;W<U.length;W++){pe=U[W];var te=ye+H(pe,W);fe+=q(pe,Z,I,te,me)}else if(te=y(U),typeof te=="function")for(U=te.call(U),W=0;!(pe=U.next()).done;)pe=pe.value,te=ye+H(pe,W++),fe+=q(pe,Z,I,te,me);else if(pe==="object")throw Z=String(U),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return fe}function $(U,Z,I){if(U==null)return U;var ye=[],me=0;return q(U,ye,"","",function(pe){return Z.call(I,pe,me++)}),ye}function J(U){if(U._status===-1){var Z=U._result;Z=Z(),Z.then(function(I){(U._status===0||U._status===-1)&&(U._status=1,U._result=I)},function(I){(U._status===0||U._status===-1)&&(U._status=2,U._result=I)}),U._status===-1&&(U._status=0,U._result=Z)}if(U._status===1)return U._result.default;throw U._result}var ie={current:null},L={transition:null},ne={ReactCurrentDispatcher:ie,ReactCurrentBatchConfig:L,ReactCurrentOwner:R};function T(){throw Error("act(...) is not supported in production builds of React.")}return Je.Children={map:$,forEach:function(U,Z,I){$(U,function(){Z.apply(this,arguments)},I)},count:function(U){var Z=0;return $(U,function(){Z++}),Z},toArray:function(U){return $(U,function(Z){return Z})||[]},only:function(U){if(!A(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Je.Component=_,Je.Fragment=n,Je.Profiler=i,Je.PureComponent=j,Je.StrictMode=r,Je.Suspense=c,Je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ne,Je.act=T,Je.cloneElement=function(U,Z,I){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var ye=b({},U.props),me=U.key,pe=U.ref,fe=U._owner;if(Z!=null){if(Z.ref!==void 0&&(pe=Z.ref,fe=R.current),Z.key!==void 0&&(me=""+Z.key),U.type&&U.type.defaultProps)var W=U.type.defaultProps;for(te in Z)D.call(Z,te)&&!z.hasOwnProperty(te)&&(ye[te]=Z[te]===void 0&&W!==void 0?W[te]:Z[te])}var te=arguments.length-2;if(te===1)ye.children=I;else if(1<te){W=Array(te);for(var re=0;re<te;re++)W[re]=arguments[re+2];ye.children=W}return{$$typeof:e,type:U.type,key:me,ref:pe,props:ye,_owner:fe}},Je.createContext=function(U){return U={$$typeof:l,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:o,_context:U},U.Consumer=U},Je.createElement=F,Je.createFactory=function(U){var Z=F.bind(null,U);return Z.type=U,Z},Je.createRef=function(){return{current:null}},Je.forwardRef=function(U){return{$$typeof:u,render:U}},Je.isValidElement=A,Je.lazy=function(U){return{$$typeof:h,_payload:{_status:-1,_result:U},_init:J}},Je.memo=function(U,Z){return{$$typeof:f,type:U,compare:Z===void 0?null:Z}},Je.startTransition=function(U){var Z=L.transition;L.transition={};try{U()}finally{L.transition=Z}},Je.unstable_act=T,Je.useCallback=function(U,Z){return ie.current.useCallback(U,Z)},Je.useContext=function(U){return ie.current.useContext(U)},Je.useDebugValue=function(){},Je.useDeferredValue=function(U){return ie.current.useDeferredValue(U)},Je.useEffect=function(U,Z){return ie.current.useEffect(U,Z)},Je.useId=function(){return ie.current.useId()},Je.useImperativeHandle=function(U,Z,I){return ie.current.useImperativeHandle(U,Z,I)},Je.useInsertionEffect=function(U,Z){return ie.current.useInsertionEffect(U,Z)},Je.useLayoutEffect=function(U,Z){return ie.current.useLayoutEffect(U,Z)},Je.useMemo=function(U,Z){return ie.current.useMemo(U,Z)},Je.useReducer=function(U,Z,I){return ie.current.useReducer(U,Z,I)},Je.useRef=function(U){return ie.current.useRef(U)},Je.useState=function(U){return ie.current.useState(U)},Je.useSyncExternalStore=function(U,Z,I){return ie.current.useSyncExternalStore(U,Z,I)},Je.useTransition=function(){return ie.current.useTransition()},Je.version="18.3.1",Je}var rv;function gc(){return rv||(rv=1,Tf.exports=FE()),Tf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iv;function zE(){if(iv)return wa;iv=1;var e=gc(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,c,f){var h,p={},y=null,v=null;f!==void 0&&(y=""+f),c.key!==void 0&&(y=""+c.key),c.ref!==void 0&&(v=c.ref);for(h in c)r.call(c,h)&&!o.hasOwnProperty(h)&&(p[h]=c[h]);if(u&&u.defaultProps)for(h in c=u.defaultProps,c)p[h]===void 0&&(p[h]=c[h]);return{$$typeof:t,type:u,key:y,ref:v,props:p,_owner:i.current}}return wa.Fragment=n,wa.jsx=l,wa.jsxs=l,wa}var sv;function BE(){return sv||(sv=1,Nf.exports=zE()),Nf.exports}var g=BE(),k=gc();const Ne=To(k),qu=LE({__proto__:null,default:Ne},[k]);var xu={},If={exports:{}},Pn={},Pf={exports:{}},Af={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ov;function UE(){return ov||(ov=1,(function(e){function t(L,ne){var T=L.length;L.push(ne);e:for(;0<T;){var U=T-1>>>1,Z=L[U];if(0<i(Z,ne))L[U]=ne,L[T]=Z,T=U;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var ne=L[0],T=L.pop();if(T!==ne){L[0]=T;e:for(var U=0,Z=L.length,I=Z>>>1;U<I;){var ye=2*(U+1)-1,me=L[ye],pe=ye+1,fe=L[pe];if(0>i(me,T))pe<Z&&0>i(fe,me)?(L[U]=fe,L[pe]=T,U=pe):(L[U]=me,L[ye]=T,U=ye);else if(pe<Z&&0>i(fe,T))L[U]=fe,L[pe]=T,U=pe;else break e}}return ne}function i(L,ne){var T=L.sortIndex-ne.sortIndex;return T!==0?T:L.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var c=[],f=[],h=1,p=null,y=3,v=!1,b=!1,w=!1,_=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(L){for(var ne=n(f);ne!==null;){if(ne.callback===null)r(f);else if(ne.startTime<=L)r(f),ne.sortIndex=ne.expirationTime,t(c,ne);else break;ne=n(f)}}function M(L){if(w=!1,C(L),!b)if(n(c)!==null)b=!0,J(D);else{var ne=n(f);ne!==null&&ie(M,ne.startTime-L)}}function D(L,ne){b=!1,w&&(w=!1,E(F),F=-1),v=!0;var T=y;try{for(C(ne),p=n(c);p!==null&&(!(p.expirationTime>ne)||L&&!O());){var U=p.callback;if(typeof U=="function"){p.callback=null,y=p.priorityLevel;var Z=U(p.expirationTime<=ne);ne=e.unstable_now(),typeof Z=="function"?p.callback=Z:p===n(c)&&r(c),C(ne)}else r(c);p=n(c)}if(p!==null)var I=!0;else{var ye=n(f);ye!==null&&ie(M,ye.startTime-ne),I=!1}return I}finally{p=null,y=T,v=!1}}var R=!1,z=null,F=-1,V=5,A=-1;function O(){return!(e.unstable_now()-A<V)}function Q(){if(z!==null){var L=e.unstable_now();A=L;var ne=!0;try{ne=z(!0,L)}finally{ne?H():(R=!1,z=null)}}else R=!1}var H;if(typeof j=="function")H=function(){j(Q)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,$=q.port2;q.port1.onmessage=Q,H=function(){$.postMessage(null)}}else H=function(){_(Q,0)};function J(L){z=L,R||(R=!0,H())}function ie(L,ne){F=_(function(){L(e.unstable_now())},ne)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_continueExecution=function(){b||v||(b=!0,J(D))},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(L){switch(y){case 1:case 2:case 3:var ne=3;break;default:ne=y}var T=y;y=ne;try{return L()}finally{y=T}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(L,ne){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var T=y;y=L;try{return ne()}finally{y=T}},e.unstable_scheduleCallback=function(L,ne,T){var U=e.unstable_now();switch(typeof T=="object"&&T!==null?(T=T.delay,T=typeof T=="number"&&0<T?U+T:U):T=U,L){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=T+Z,L={id:h++,callback:ne,priorityLevel:L,startTime:T,expirationTime:Z,sortIndex:-1},T>U?(L.sortIndex=T,t(f,L),n(c)===null&&L===n(f)&&(w?(E(F),F=-1):w=!0,ie(M,T-U))):(L.sortIndex=Z,t(c,L),b||v||(b=!0,J(D))),L},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(L){var ne=y;return function(){var T=y;y=ne;try{return L.apply(this,arguments)}finally{y=T}}}})(Af)),Af}var av;function WE(){return av||(av=1,Pf.exports=UE()),Pf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lv;function HE(){if(lv)return Pn;lv=1;var e=gc(),t=WE();function n(s){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+s,d=1;d<arguments.length;d++)a+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(s,a){l(s,a),l(s+"Capture",a)}function l(s,a){for(i[s]=a,s=0;s<a.length;s++)r.add(a[s])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function y(s){return c.call(p,s)?!0:c.call(h,s)?!1:f.test(s)?p[s]=!0:(h[s]=!0,!1)}function v(s,a,d,m){if(d!==null&&d.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return m?!1:d!==null?!d.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function b(s,a,d,m){if(a===null||typeof a>"u"||v(s,a,d,m))return!0;if(m)return!1;if(d!==null)switch(d.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function w(s,a,d,m,x,S,N){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=m,this.attributeNamespace=x,this.mustUseProperty=d,this.propertyName=s,this.type=a,this.sanitizeURL=S,this.removeEmptyString=N}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){_[s]=new w(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var a=s[0];_[a]=new w(a,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){_[s]=new w(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){_[s]=new w(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){_[s]=new w(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){_[s]=new w(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){_[s]=new w(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){_[s]=new w(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){_[s]=new w(s,5,!1,s.toLowerCase(),null,!1,!1)});var E=/[\-:]([a-z])/g;function j(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var a=s.replace(E,j);_[a]=new w(a,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var a=s.replace(E,j);_[a]=new w(a,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var a=s.replace(E,j);_[a]=new w(a,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){_[s]=new w(s,1,!1,s.toLowerCase(),null,!1,!1)}),_.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){_[s]=new w(s,1,!1,s.toLowerCase(),null,!0,!0)});function C(s,a,d,m){var x=_.hasOwnProperty(a)?_[a]:null;(x!==null?x.type!==0:m||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(b(a,d,x,m)&&(d=null),m||x===null?y(a)&&(d===null?s.removeAttribute(a):s.setAttribute(a,""+d)):x.mustUseProperty?s[x.propertyName]=d===null?x.type===3?!1:"":d:(a=x.attributeName,m=x.attributeNamespace,d===null?s.removeAttribute(a):(x=x.type,d=x===3||x===4&&d===!0?"":""+d,m?s.setAttributeNS(m,a,d):s.setAttribute(a,d))))}var M=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,D=Symbol.for("react.element"),R=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),O=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),ie=Symbol.for("react.offscreen"),L=Symbol.iterator;function ne(s){return s===null||typeof s!="object"?null:(s=L&&s[L]||s["@@iterator"],typeof s=="function"?s:null)}var T=Object.assign,U;function Z(s){if(U===void 0)try{throw Error()}catch(d){var a=d.stack.trim().match(/\n( *(at )?)/);U=a&&a[1]||""}return`
`+U+s}var I=!1;function ye(s,a){if(!s||I)return"";I=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(ue){var m=ue}Reflect.construct(s,[],a)}else{try{a.call()}catch(ue){m=ue}s.call(a.prototype)}else{try{throw Error()}catch(ue){m=ue}s()}}catch(ue){if(ue&&m&&typeof ue.stack=="string"){for(var x=ue.stack.split(`
`),S=m.stack.split(`
`),N=x.length-1,B=S.length-1;1<=N&&0<=B&&x[N]!==S[B];)B--;for(;1<=N&&0<=B;N--,B--)if(x[N]!==S[B]){if(N!==1||B!==1)do if(N--,B--,0>B||x[N]!==S[B]){var Y=`
`+x[N].replace(" at new "," at ");return s.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",s.displayName)),Y}while(1<=N&&0<=B);break}}}finally{I=!1,Error.prepareStackTrace=d}return(s=s?s.displayName||s.name:"")?Z(s):""}function me(s){switch(s.tag){case 5:return Z(s.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return s=ye(s.type,!1),s;case 11:return s=ye(s.type.render,!1),s;case 1:return s=ye(s.type,!0),s;default:return""}}function pe(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case z:return"Fragment";case R:return"Portal";case V:return"Profiler";case F:return"StrictMode";case H:return"Suspense";case q:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case O:return(s.displayName||"Context")+".Consumer";case A:return(s._context.displayName||"Context")+".Provider";case Q:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case $:return a=s.displayName||null,a!==null?a:pe(s.type)||"Memo";case J:a=s._payload,s=s._init;try{return pe(s(a))}catch{}}return null}function fe(s){var a=s.type;switch(s.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=a.render,s=s.displayName||s.name||"",a.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pe(a);case 8:return a===F?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function W(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function te(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function re(s){var a=te(s)?"checked":"value",d=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),m=""+s[a];if(!s.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var x=d.get,S=d.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return x.call(this)},set:function(N){m=""+N,S.call(this,N)}}),Object.defineProperty(s,a,{enumerable:d.enumerable}),{getValue:function(){return m},setValue:function(N){m=""+N},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function ce(s){s._valueTracker||(s._valueTracker=re(s))}function he(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var d=a.getValue(),m="";return s&&(m=te(s)?s.checked?"true":"false":s.value),s=m,s!==d?(a.setValue(s),!0):!1}function _e(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Ie(s,a){var d=a.checked;return T({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??s._wrapperState.initialChecked})}function We(s,a){var d=a.defaultValue==null?"":a.defaultValue,m=a.checked!=null?a.checked:a.defaultChecked;d=W(a.value!=null?a.value:d),s._wrapperState={initialChecked:m,initialValue:d,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Qe(s,a){a=a.checked,a!=null&&C(s,"checked",a,!1)}function ut(s,a){Qe(s,a);var d=W(a.value),m=a.type;if(d!=null)m==="number"?(d===0&&s.value===""||s.value!=d)&&(s.value=""+d):s.value!==""+d&&(s.value=""+d);else if(m==="submit"||m==="reset"){s.removeAttribute("value");return}a.hasOwnProperty("value")?K(s,a.type,d):a.hasOwnProperty("defaultValue")&&K(s,a.type,W(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(s.defaultChecked=!!a.defaultChecked)}function Tt(s,a,d){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var m=a.type;if(!(m!=="submit"&&m!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+s._wrapperState.initialValue,d||a===s.value||(s.value=a),s.defaultValue=a}d=s.name,d!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,d!==""&&(s.name=d)}function K(s,a,d){(a!=="number"||_e(s.ownerDocument)!==s)&&(d==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+d&&(s.defaultValue=""+d))}var ae=Array.isArray;function de(s,a,d,m){if(s=s.options,a){a={};for(var x=0;x<d.length;x++)a["$"+d[x]]=!0;for(d=0;d<s.length;d++)x=a.hasOwnProperty("$"+s[d].value),s[d].selected!==x&&(s[d].selected=x),x&&m&&(s[d].defaultSelected=!0)}else{for(d=""+W(d),a=null,x=0;x<s.length;x++){if(s[x].value===d){s[x].selected=!0,m&&(s[x].defaultSelected=!0);return}a!==null||s[x].disabled||(a=s[x])}a!==null&&(a.selected=!0)}}function Ee(s,a){if(a.dangerouslySetInnerHTML!=null)throw Error(n(91));return T({},a,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function we(s,a){var d=a.value;if(d==null){if(d=a.children,a=a.defaultValue,d!=null){if(a!=null)throw Error(n(92));if(ae(d)){if(1<d.length)throw Error(n(93));d=d[0]}a=d}a==null&&(a=""),d=a}s._wrapperState={initialValue:W(d)}}function P(s,a){var d=W(a.value),m=W(a.defaultValue);d!=null&&(d=""+d,d!==s.value&&(s.value=d),a.defaultValue==null&&s.defaultValue!==d&&(s.defaultValue=d)),m!=null&&(s.defaultValue=""+m)}function ee(s){var a=s.textContent;a===s._wrapperState.initialValue&&a!==""&&a!==null&&(s.value=a)}function G(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(s,a){return s==null||s==="http://www.w3.org/1999/xhtml"?G(a):s==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var be,Oe=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,d,m,x){MSApp.execUnsafeLocalFunction(function(){return s(a,d,m,x)})}:s})(function(s,a){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=a;else{for(be=be||document.createElement("div"),be.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=be.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;a.firstChild;)s.appendChild(a.firstChild)}});function Be(s,a){if(a){var d=s.firstChild;if(d&&d===s.lastChild&&d.nodeType===3){d.nodeValue=a;return}}s.textContent=a}var Ce={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dt=["Webkit","ms","Moz","O"];Object.keys(Ce).forEach(function(s){dt.forEach(function(a){a=a+s.charAt(0).toUpperCase()+s.substring(1),Ce[a]=Ce[s]})});function ct(s,a,d){return a==null||typeof a=="boolean"||a===""?"":d||typeof a!="number"||a===0||Ce.hasOwnProperty(s)&&Ce[s]?(""+a).trim():a+"px"}function Ke(s,a){s=s.style;for(var d in a)if(a.hasOwnProperty(d)){var m=d.indexOf("--")===0,x=ct(d,a[d],m);d==="float"&&(d="cssFloat"),m?s.setProperty(d,x):s[d]=x}}var bt=T({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nt(s,a){if(a){if(bt[s]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(n(137,s));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(n(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(n(61))}if(a.style!=null&&typeof a.style!="object")throw Error(n(62))}}function Wt(s,a){if(s.indexOf("-")===-1)return typeof a.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var It=null;function gn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var at=null,yn=null,yt=null;function Ge(s){if(s=sa(s)){if(typeof at!="function")throw Error(n(280));var a=s.stateNode;a&&(a=Ol(a),at(s.stateNode,s.type,a))}}function st(s){yn?yt?yt.push(s):yt=[s]:yn=s}function rt(){if(yn){var s=yn,a=yt;if(yt=yn=null,Ge(s),a)for(s=0;s<a.length;s++)Ge(a[s])}}function kt(s,a){return s(a)}function rn(){}var _n=!1;function Wr(s,a,d){if(_n)return s(a,d);_n=!0;try{return kt(s,a,d)}finally{_n=!1,(yn!==null||yt!==null)&&(rn(),rt())}}function _t(s,a){var d=s.stateNode;if(d===null)return null;var m=Ol(d);if(m===null)return null;d=m[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(s=s.type,m=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!m;break e;default:s=!1}if(s)return null;if(d&&typeof d!="function")throw Error(n(231,a,typeof d));return d}var Jn=!1;if(u)try{var sn={};Object.defineProperty(sn,"passive",{get:function(){Jn=!0}}),window.addEventListener("test",sn,sn),window.removeEventListener("test",sn,sn)}catch{Jn=!1}function ar(s,a,d,m,x,S,N,B,Y){var ue=Array.prototype.slice.call(arguments,3);try{a.apply(d,ue)}catch(ve){this.onError(ve)}}var lr=!1,_r=null,$n=!1,Hr=null,zo={onError:function(s){lr=!0,_r=s}};function V1(s,a,d,m,x,S,N,B,Y){lr=!1,_r=null,ar.apply(zo,arguments)}function q1(s,a,d,m,x,S,N,B,Y){if(V1.apply(this,arguments),lr){if(lr){var ue=_r;lr=!1,_r=null}else throw Error(n(198));$n||($n=!0,Hr=ue)}}function Ui(s){var a=s,d=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(d=a.return),s=a.return;while(s)}return a.tag===3?d:null}function _m(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function Cm(s){if(Ui(s)!==s)throw Error(n(188))}function Y1(s){var a=s.alternate;if(!a){if(a=Ui(s),a===null)throw Error(n(188));return a!==s?null:s}for(var d=s,m=a;;){var x=d.return;if(x===null)break;var S=x.alternate;if(S===null){if(m=x.return,m!==null){d=m;continue}break}if(x.child===S.child){for(S=x.child;S;){if(S===d)return Cm(x),s;if(S===m)return Cm(x),a;S=S.sibling}throw Error(n(188))}if(d.return!==m.return)d=x,m=S;else{for(var N=!1,B=x.child;B;){if(B===d){N=!0,d=x,m=S;break}if(B===m){N=!0,m=x,d=S;break}B=B.sibling}if(!N){for(B=S.child;B;){if(B===d){N=!0,d=S,m=x;break}if(B===m){N=!0,m=S,d=x;break}B=B.sibling}if(!N)throw Error(n(189))}}if(d.alternate!==m)throw Error(n(190))}if(d.tag!==3)throw Error(n(188));return d.stateNode.current===d?s:a}function jm(s){return s=Y1(s),s!==null?Nm(s):null}function Nm(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var a=Nm(s);if(a!==null)return a;s=s.sibling}return null}var Tm=t.unstable_scheduleCallback,Im=t.unstable_cancelCallback,G1=t.unstable_shouldYield,K1=t.unstable_requestPaint,Ot=t.unstable_now,J1=t.unstable_getCurrentPriorityLevel,Yc=t.unstable_ImmediatePriority,Pm=t.unstable_UserBlockingPriority,pl=t.unstable_NormalPriority,Q1=t.unstable_LowPriority,Am=t.unstable_IdlePriority,ml=null,Cr=null;function X1(s){if(Cr&&typeof Cr.onCommitFiberRoot=="function")try{Cr.onCommitFiberRoot(ml,s,void 0,(s.current.flags&128)===128)}catch{}}var ur=Math.clz32?Math.clz32:tS,Z1=Math.log,eS=Math.LN2;function tS(s){return s>>>=0,s===0?32:31-(Z1(s)/eS|0)|0}var gl=64,yl=4194304;function Bo(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function vl(s,a){var d=s.pendingLanes;if(d===0)return 0;var m=0,x=s.suspendedLanes,S=s.pingedLanes,N=d&268435455;if(N!==0){var B=N&~x;B!==0?m=Bo(B):(S&=N,S!==0&&(m=Bo(S)))}else N=d&~x,N!==0?m=Bo(N):S!==0&&(m=Bo(S));if(m===0)return 0;if(a!==0&&a!==m&&(a&x)===0&&(x=m&-m,S=a&-a,x>=S||x===16&&(S&4194240)!==0))return a;if((m&4)!==0&&(m|=d&16),a=s.entangledLanes,a!==0)for(s=s.entanglements,a&=m;0<a;)d=31-ur(a),x=1<<d,m|=s[d],a&=~x;return m}function nS(s,a){switch(s){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rS(s,a){for(var d=s.suspendedLanes,m=s.pingedLanes,x=s.expirationTimes,S=s.pendingLanes;0<S;){var N=31-ur(S),B=1<<N,Y=x[N];Y===-1?((B&d)===0||(B&m)!==0)&&(x[N]=nS(B,a)):Y<=a&&(s.expiredLanes|=B),S&=~B}}function Gc(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Rm(){var s=gl;return gl<<=1,(gl&4194240)===0&&(gl=64),s}function Kc(s){for(var a=[],d=0;31>d;d++)a.push(s);return a}function Uo(s,a,d){s.pendingLanes|=a,a!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,a=31-ur(a),s[a]=d}function iS(s,a){var d=s.pendingLanes&~a;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=a,s.mutableReadLanes&=a,s.entangledLanes&=a,a=s.entanglements;var m=s.eventTimes;for(s=s.expirationTimes;0<d;){var x=31-ur(d),S=1<<x;a[x]=0,m[x]=-1,s[x]=-1,d&=~S}}function Jc(s,a){var d=s.entangledLanes|=a;for(s=s.entanglements;d;){var m=31-ur(d),x=1<<m;x&a|s[m]&a&&(s[m]|=a),d&=~x}}var lt=0;function Om(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var Mm,Qc,Dm,Lm,$m,Xc=!1,xl=[],oi=null,ai=null,li=null,Wo=new Map,Ho=new Map,ui=[],sS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fm(s,a){switch(s){case"focusin":case"focusout":oi=null;break;case"dragenter":case"dragleave":ai=null;break;case"mouseover":case"mouseout":li=null;break;case"pointerover":case"pointerout":Wo.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ho.delete(a.pointerId)}}function Vo(s,a,d,m,x,S){return s===null||s.nativeEvent!==S?(s={blockedOn:a,domEventName:d,eventSystemFlags:m,nativeEvent:S,targetContainers:[x]},a!==null&&(a=sa(a),a!==null&&Qc(a)),s):(s.eventSystemFlags|=m,a=s.targetContainers,x!==null&&a.indexOf(x)===-1&&a.push(x),s)}function oS(s,a,d,m,x){switch(a){case"focusin":return oi=Vo(oi,s,a,d,m,x),!0;case"dragenter":return ai=Vo(ai,s,a,d,m,x),!0;case"mouseover":return li=Vo(li,s,a,d,m,x),!0;case"pointerover":var S=x.pointerId;return Wo.set(S,Vo(Wo.get(S)||null,s,a,d,m,x)),!0;case"gotpointercapture":return S=x.pointerId,Ho.set(S,Vo(Ho.get(S)||null,s,a,d,m,x)),!0}return!1}function zm(s){var a=Wi(s.target);if(a!==null){var d=Ui(a);if(d!==null){if(a=d.tag,a===13){if(a=_m(d),a!==null){s.blockedOn=a,$m(s.priority,function(){Dm(d)});return}}else if(a===3&&d.stateNode.current.memoizedState.isDehydrated){s.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}s.blockedOn=null}function wl(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var d=ed(s.domEventName,s.eventSystemFlags,a[0],s.nativeEvent);if(d===null){d=s.nativeEvent;var m=new d.constructor(d.type,d);It=m,d.target.dispatchEvent(m),It=null}else return a=sa(d),a!==null&&Qc(a),s.blockedOn=d,!1;a.shift()}return!0}function Bm(s,a,d){wl(s)&&d.delete(a)}function aS(){Xc=!1,oi!==null&&wl(oi)&&(oi=null),ai!==null&&wl(ai)&&(ai=null),li!==null&&wl(li)&&(li=null),Wo.forEach(Bm),Ho.forEach(Bm)}function qo(s,a){s.blockedOn===a&&(s.blockedOn=null,Xc||(Xc=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,aS)))}function Yo(s){function a(x){return qo(x,s)}if(0<xl.length){qo(xl[0],s);for(var d=1;d<xl.length;d++){var m=xl[d];m.blockedOn===s&&(m.blockedOn=null)}}for(oi!==null&&qo(oi,s),ai!==null&&qo(ai,s),li!==null&&qo(li,s),Wo.forEach(a),Ho.forEach(a),d=0;d<ui.length;d++)m=ui[d],m.blockedOn===s&&(m.blockedOn=null);for(;0<ui.length&&(d=ui[0],d.blockedOn===null);)zm(d),d.blockedOn===null&&ui.shift()}var Ns=M.ReactCurrentBatchConfig,bl=!0;function lS(s,a,d,m){var x=lt,S=Ns.transition;Ns.transition=null;try{lt=1,Zc(s,a,d,m)}finally{lt=x,Ns.transition=S}}function uS(s,a,d,m){var x=lt,S=Ns.transition;Ns.transition=null;try{lt=4,Zc(s,a,d,m)}finally{lt=x,Ns.transition=S}}function Zc(s,a,d,m){if(bl){var x=ed(s,a,d,m);if(x===null)yd(s,a,m,kl,d),Fm(s,m);else if(oS(x,s,a,d,m))m.stopPropagation();else if(Fm(s,m),a&4&&-1<sS.indexOf(s)){for(;x!==null;){var S=sa(x);if(S!==null&&Mm(S),S=ed(s,a,d,m),S===null&&yd(s,a,m,kl,d),S===x)break;x=S}x!==null&&m.stopPropagation()}else yd(s,a,m,null,d)}}var kl=null;function ed(s,a,d,m){if(kl=null,s=gn(m),s=Wi(s),s!==null)if(a=Ui(s),a===null)s=null;else if(d=a.tag,d===13){if(s=_m(a),s!==null)return s;s=null}else if(d===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null);return kl=s,null}function Um(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(J1()){case Yc:return 1;case Pm:return 4;case pl:case Q1:return 16;case Am:return 536870912;default:return 16}default:return 16}}var ci=null,td=null,Sl=null;function Wm(){if(Sl)return Sl;var s,a=td,d=a.length,m,x="value"in ci?ci.value:ci.textContent,S=x.length;for(s=0;s<d&&a[s]===x[s];s++);var N=d-s;for(m=1;m<=N&&a[d-m]===x[S-m];m++);return Sl=x.slice(s,1<m?1-m:void 0)}function El(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function _l(){return!0}function Hm(){return!1}function Fn(s){function a(d,m,x,S,N){this._reactName=d,this._targetInst=x,this.type=m,this.nativeEvent=S,this.target=N,this.currentTarget=null;for(var B in s)s.hasOwnProperty(B)&&(d=s[B],this[B]=d?d(S):S[B]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?_l:Hm,this.isPropagationStopped=Hm,this}return T(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=_l)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=_l)},persist:function(){},isPersistent:_l}),a}var Ts={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nd=Fn(Ts),Go=T({},Ts,{view:0,detail:0}),cS=Fn(Go),rd,id,Ko,Cl=T({},Go,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:od,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ko&&(Ko&&s.type==="mousemove"?(rd=s.screenX-Ko.screenX,id=s.screenY-Ko.screenY):id=rd=0,Ko=s),rd)},movementY:function(s){return"movementY"in s?s.movementY:id}}),Vm=Fn(Cl),dS=T({},Cl,{dataTransfer:0}),fS=Fn(dS),hS=T({},Go,{relatedTarget:0}),sd=Fn(hS),pS=T({},Ts,{animationName:0,elapsedTime:0,pseudoElement:0}),mS=Fn(pS),gS=T({},Ts,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),yS=Fn(gS),vS=T({},Ts,{data:0}),qm=Fn(vS),xS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kS(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=bS[s])?!!a[s]:!1}function od(){return kS}var SS=T({},Go,{key:function(s){if(s.key){var a=xS[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=El(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?wS[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:od,charCode:function(s){return s.type==="keypress"?El(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?El(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),ES=Fn(SS),_S=T({},Cl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ym=Fn(_S),CS=T({},Go,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:od}),jS=Fn(CS),NS=T({},Ts,{propertyName:0,elapsedTime:0,pseudoElement:0}),TS=Fn(NS),IS=T({},Cl,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),PS=Fn(IS),AS=[9,13,27,32],ad=u&&"CompositionEvent"in window,Jo=null;u&&"documentMode"in document&&(Jo=document.documentMode);var RS=u&&"TextEvent"in window&&!Jo,Gm=u&&(!ad||Jo&&8<Jo&&11>=Jo),Km=" ",Jm=!1;function Qm(s,a){switch(s){case"keyup":return AS.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xm(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Is=!1;function OS(s,a){switch(s){case"compositionend":return Xm(a);case"keypress":return a.which!==32?null:(Jm=!0,Km);case"textInput":return s=a.data,s===Km&&Jm?null:s;default:return null}}function MS(s,a){if(Is)return s==="compositionend"||!ad&&Qm(s,a)?(s=Wm(),Sl=td=ci=null,Is=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Gm&&a.locale!=="ko"?null:a.data;default:return null}}var DS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zm(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!DS[s.type]:a==="textarea"}function eg(s,a,d,m){st(m),a=Pl(a,"onChange"),0<a.length&&(d=new nd("onChange","change",null,d,m),s.push({event:d,listeners:a}))}var Qo=null,Xo=null;function LS(s){vg(s,0)}function jl(s){var a=Ms(s);if(he(a))return s}function $S(s,a){if(s==="change")return a}var tg=!1;if(u){var ld;if(u){var ud="oninput"in document;if(!ud){var ng=document.createElement("div");ng.setAttribute("oninput","return;"),ud=typeof ng.oninput=="function"}ld=ud}else ld=!1;tg=ld&&(!document.documentMode||9<document.documentMode)}function rg(){Qo&&(Qo.detachEvent("onpropertychange",ig),Xo=Qo=null)}function ig(s){if(s.propertyName==="value"&&jl(Xo)){var a=[];eg(a,Xo,s,gn(s)),Wr(LS,a)}}function FS(s,a,d){s==="focusin"?(rg(),Qo=a,Xo=d,Qo.attachEvent("onpropertychange",ig)):s==="focusout"&&rg()}function zS(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return jl(Xo)}function BS(s,a){if(s==="click")return jl(a)}function US(s,a){if(s==="input"||s==="change")return jl(a)}function WS(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var cr=typeof Object.is=="function"?Object.is:WS;function Zo(s,a){if(cr(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var d=Object.keys(s),m=Object.keys(a);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var x=d[m];if(!c.call(a,x)||!cr(s[x],a[x]))return!1}return!0}function sg(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function og(s,a){var d=sg(s);s=0;for(var m;d;){if(d.nodeType===3){if(m=s+d.textContent.length,s<=a&&m>=a)return{node:d,offset:a-s};s=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=sg(d)}}function ag(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?ag(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function lg(){for(var s=window,a=_e();a instanceof s.HTMLIFrameElement;){try{var d=typeof a.contentWindow.location.href=="string"}catch{d=!1}if(d)s=a.contentWindow;else break;a=_e(s.document)}return a}function cd(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}function HS(s){var a=lg(),d=s.focusedElem,m=s.selectionRange;if(a!==d&&d&&d.ownerDocument&&ag(d.ownerDocument.documentElement,d)){if(m!==null&&cd(d)){if(a=m.start,s=m.end,s===void 0&&(s=a),"selectionStart"in d)d.selectionStart=a,d.selectionEnd=Math.min(s,d.value.length);else if(s=(a=d.ownerDocument||document)&&a.defaultView||window,s.getSelection){s=s.getSelection();var x=d.textContent.length,S=Math.min(m.start,x);m=m.end===void 0?S:Math.min(m.end,x),!s.extend&&S>m&&(x=m,m=S,S=x),x=og(d,S);var N=og(d,m);x&&N&&(s.rangeCount!==1||s.anchorNode!==x.node||s.anchorOffset!==x.offset||s.focusNode!==N.node||s.focusOffset!==N.offset)&&(a=a.createRange(),a.setStart(x.node,x.offset),s.removeAllRanges(),S>m?(s.addRange(a),s.extend(N.node,N.offset)):(a.setEnd(N.node,N.offset),s.addRange(a)))}}for(a=[],s=d;s=s.parentNode;)s.nodeType===1&&a.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<a.length;d++)s=a[d],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var VS=u&&"documentMode"in document&&11>=document.documentMode,Ps=null,dd=null,ea=null,fd=!1;function ug(s,a,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;fd||Ps==null||Ps!==_e(m)||(m=Ps,"selectionStart"in m&&cd(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),ea&&Zo(ea,m)||(ea=m,m=Pl(dd,"onSelect"),0<m.length&&(a=new nd("onSelect","select",null,a,d),s.push({event:a,listeners:m}),a.target=Ps)))}function Nl(s,a){var d={};return d[s.toLowerCase()]=a.toLowerCase(),d["Webkit"+s]="webkit"+a,d["Moz"+s]="moz"+a,d}var As={animationend:Nl("Animation","AnimationEnd"),animationiteration:Nl("Animation","AnimationIteration"),animationstart:Nl("Animation","AnimationStart"),transitionend:Nl("Transition","TransitionEnd")},hd={},cg={};u&&(cg=document.createElement("div").style,"AnimationEvent"in window||(delete As.animationend.animation,delete As.animationiteration.animation,delete As.animationstart.animation),"TransitionEvent"in window||delete As.transitionend.transition);function Tl(s){if(hd[s])return hd[s];if(!As[s])return s;var a=As[s],d;for(d in a)if(a.hasOwnProperty(d)&&d in cg)return hd[s]=a[d];return s}var dg=Tl("animationend"),fg=Tl("animationiteration"),hg=Tl("animationstart"),pg=Tl("transitionend"),mg=new Map,gg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function di(s,a){mg.set(s,a),o(a,[s])}for(var pd=0;pd<gg.length;pd++){var md=gg[pd],qS=md.toLowerCase(),YS=md[0].toUpperCase()+md.slice(1);di(qS,"on"+YS)}di(dg,"onAnimationEnd"),di(fg,"onAnimationIteration"),di(hg,"onAnimationStart"),di("dblclick","onDoubleClick"),di("focusin","onFocus"),di("focusout","onBlur"),di(pg,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ta="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GS=new Set("cancel close invalid load scroll toggle".split(" ").concat(ta));function yg(s,a,d){var m=s.type||"unknown-event";s.currentTarget=d,q1(m,a,void 0,s),s.currentTarget=null}function vg(s,a){a=(a&4)!==0;for(var d=0;d<s.length;d++){var m=s[d],x=m.event;m=m.listeners;e:{var S=void 0;if(a)for(var N=m.length-1;0<=N;N--){var B=m[N],Y=B.instance,ue=B.currentTarget;if(B=B.listener,Y!==S&&x.isPropagationStopped())break e;yg(x,B,ue),S=Y}else for(N=0;N<m.length;N++){if(B=m[N],Y=B.instance,ue=B.currentTarget,B=B.listener,Y!==S&&x.isPropagationStopped())break e;yg(x,B,ue),S=Y}}}if($n)throw s=Hr,$n=!1,Hr=null,s}function vt(s,a){var d=a[Sd];d===void 0&&(d=a[Sd]=new Set);var m=s+"__bubble";d.has(m)||(xg(a,s,2,!1),d.add(m))}function gd(s,a,d){var m=0;a&&(m|=4),xg(d,s,m,a)}var Il="_reactListening"+Math.random().toString(36).slice(2);function na(s){if(!s[Il]){s[Il]=!0,r.forEach(function(d){d!=="selectionchange"&&(GS.has(d)||gd(d,!1,s),gd(d,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Il]||(a[Il]=!0,gd("selectionchange",!1,a))}}function xg(s,a,d,m){switch(Um(a)){case 1:var x=lS;break;case 4:x=uS;break;default:x=Zc}d=x.bind(null,a,d,s),x=void 0,!Jn||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(x=!0),m?x!==void 0?s.addEventListener(a,d,{capture:!0,passive:x}):s.addEventListener(a,d,!0):x!==void 0?s.addEventListener(a,d,{passive:x}):s.addEventListener(a,d,!1)}function yd(s,a,d,m,x){var S=m;if((a&1)===0&&(a&2)===0&&m!==null)e:for(;;){if(m===null)return;var N=m.tag;if(N===3||N===4){var B=m.stateNode.containerInfo;if(B===x||B.nodeType===8&&B.parentNode===x)break;if(N===4)for(N=m.return;N!==null;){var Y=N.tag;if((Y===3||Y===4)&&(Y=N.stateNode.containerInfo,Y===x||Y.nodeType===8&&Y.parentNode===x))return;N=N.return}for(;B!==null;){if(N=Wi(B),N===null)return;if(Y=N.tag,Y===5||Y===6){m=S=N;continue e}B=B.parentNode}}m=m.return}Wr(function(){var ue=S,ve=gn(d),xe=[];e:{var ge=mg.get(s);if(ge!==void 0){var Te=nd,Ae=s;switch(s){case"keypress":if(El(d)===0)break e;case"keydown":case"keyup":Te=ES;break;case"focusin":Ae="focus",Te=sd;break;case"focusout":Ae="blur",Te=sd;break;case"beforeblur":case"afterblur":Te=sd;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Te=Vm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Te=fS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Te=jS;break;case dg:case fg:case hg:Te=mS;break;case pg:Te=TS;break;case"scroll":Te=cS;break;case"wheel":Te=PS;break;case"copy":case"cut":case"paste":Te=yS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Te=Ym}var Re=(a&4)!==0,Mt=!Re&&s==="scroll",oe=Re?ge!==null?ge+"Capture":null:ge;Re=[];for(var X=ue,le;X!==null;){le=X;var Se=le.stateNode;if(le.tag===5&&Se!==null&&(le=Se,oe!==null&&(Se=_t(X,oe),Se!=null&&Re.push(ra(X,Se,le)))),Mt)break;X=X.return}0<Re.length&&(ge=new Te(ge,Ae,null,d,ve),xe.push({event:ge,listeners:Re}))}}if((a&7)===0){e:{if(ge=s==="mouseover"||s==="pointerover",Te=s==="mouseout"||s==="pointerout",ge&&d!==It&&(Ae=d.relatedTarget||d.fromElement)&&(Wi(Ae)||Ae[Vr]))break e;if((Te||ge)&&(ge=ve.window===ve?ve:(ge=ve.ownerDocument)?ge.defaultView||ge.parentWindow:window,Te?(Ae=d.relatedTarget||d.toElement,Te=ue,Ae=Ae?Wi(Ae):null,Ae!==null&&(Mt=Ui(Ae),Ae!==Mt||Ae.tag!==5&&Ae.tag!==6)&&(Ae=null)):(Te=null,Ae=ue),Te!==Ae)){if(Re=Vm,Se="onMouseLeave",oe="onMouseEnter",X="mouse",(s==="pointerout"||s==="pointerover")&&(Re=Ym,Se="onPointerLeave",oe="onPointerEnter",X="pointer"),Mt=Te==null?ge:Ms(Te),le=Ae==null?ge:Ms(Ae),ge=new Re(Se,X+"leave",Te,d,ve),ge.target=Mt,ge.relatedTarget=le,Se=null,Wi(ve)===ue&&(Re=new Re(oe,X+"enter",Ae,d,ve),Re.target=le,Re.relatedTarget=Mt,Se=Re),Mt=Se,Te&&Ae)t:{for(Re=Te,oe=Ae,X=0,le=Re;le;le=Rs(le))X++;for(le=0,Se=oe;Se;Se=Rs(Se))le++;for(;0<X-le;)Re=Rs(Re),X--;for(;0<le-X;)oe=Rs(oe),le--;for(;X--;){if(Re===oe||oe!==null&&Re===oe.alternate)break t;Re=Rs(Re),oe=Rs(oe)}Re=null}else Re=null;Te!==null&&wg(xe,ge,Te,Re,!1),Ae!==null&&Mt!==null&&wg(xe,Mt,Ae,Re,!0)}}e:{if(ge=ue?Ms(ue):window,Te=ge.nodeName&&ge.nodeName.toLowerCase(),Te==="select"||Te==="input"&&ge.type==="file")var Me=$S;else if(Zm(ge))if(tg)Me=US;else{Me=zS;var Le=FS}else(Te=ge.nodeName)&&Te.toLowerCase()==="input"&&(ge.type==="checkbox"||ge.type==="radio")&&(Me=BS);if(Me&&(Me=Me(s,ue))){eg(xe,Me,d,ve);break e}Le&&Le(s,ge,ue),s==="focusout"&&(Le=ge._wrapperState)&&Le.controlled&&ge.type==="number"&&K(ge,"number",ge.value)}switch(Le=ue?Ms(ue):window,s){case"focusin":(Zm(Le)||Le.contentEditable==="true")&&(Ps=Le,dd=ue,ea=null);break;case"focusout":ea=dd=Ps=null;break;case"mousedown":fd=!0;break;case"contextmenu":case"mouseup":case"dragend":fd=!1,ug(xe,d,ve);break;case"selectionchange":if(VS)break;case"keydown":case"keyup":ug(xe,d,ve)}var $e;if(ad)e:{switch(s){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else Is?Qm(s,d)&&(He="onCompositionEnd"):s==="keydown"&&d.keyCode===229&&(He="onCompositionStart");He&&(Gm&&d.locale!=="ko"&&(Is||He!=="onCompositionStart"?He==="onCompositionEnd"&&Is&&($e=Wm()):(ci=ve,td="value"in ci?ci.value:ci.textContent,Is=!0)),Le=Pl(ue,He),0<Le.length&&(He=new qm(He,s,null,d,ve),xe.push({event:He,listeners:Le}),$e?He.data=$e:($e=Xm(d),$e!==null&&(He.data=$e)))),($e=RS?OS(s,d):MS(s,d))&&(ue=Pl(ue,"onBeforeInput"),0<ue.length&&(ve=new qm("onBeforeInput","beforeinput",null,d,ve),xe.push({event:ve,listeners:ue}),ve.data=$e))}vg(xe,a)})}function ra(s,a,d){return{instance:s,listener:a,currentTarget:d}}function Pl(s,a){for(var d=a+"Capture",m=[];s!==null;){var x=s,S=x.stateNode;x.tag===5&&S!==null&&(x=S,S=_t(s,d),S!=null&&m.unshift(ra(s,S,x)),S=_t(s,a),S!=null&&m.push(ra(s,S,x))),s=s.return}return m}function Rs(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function wg(s,a,d,m,x){for(var S=a._reactName,N=[];d!==null&&d!==m;){var B=d,Y=B.alternate,ue=B.stateNode;if(Y!==null&&Y===m)break;B.tag===5&&ue!==null&&(B=ue,x?(Y=_t(d,S),Y!=null&&N.unshift(ra(d,Y,B))):x||(Y=_t(d,S),Y!=null&&N.push(ra(d,Y,B)))),d=d.return}N.length!==0&&s.push({event:a,listeners:N})}var KS=/\r\n?/g,JS=/\u0000|\uFFFD/g;function bg(s){return(typeof s=="string"?s:""+s).replace(KS,`
`).replace(JS,"")}function Al(s,a,d){if(a=bg(a),bg(s)!==a&&d)throw Error(n(425))}function Rl(){}var vd=null,xd=null;function wd(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var bd=typeof setTimeout=="function"?setTimeout:void 0,QS=typeof clearTimeout=="function"?clearTimeout:void 0,kg=typeof Promise=="function"?Promise:void 0,XS=typeof queueMicrotask=="function"?queueMicrotask:typeof kg<"u"?function(s){return kg.resolve(null).then(s).catch(ZS)}:bd;function ZS(s){setTimeout(function(){throw s})}function kd(s,a){var d=a,m=0;do{var x=d.nextSibling;if(s.removeChild(d),x&&x.nodeType===8)if(d=x.data,d==="/$"){if(m===0){s.removeChild(x),Yo(a);return}m--}else d!=="$"&&d!=="$?"&&d!=="$!"||m++;d=x}while(d);Yo(a)}function fi(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return s}function Sg(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var d=s.data;if(d==="$"||d==="$!"||d==="$?"){if(a===0)return s;a--}else d==="/$"&&a++}s=s.previousSibling}return null}var Os=Math.random().toString(36).slice(2),jr="__reactFiber$"+Os,ia="__reactProps$"+Os,Vr="__reactContainer$"+Os,Sd="__reactEvents$"+Os,eE="__reactListeners$"+Os,tE="__reactHandles$"+Os;function Wi(s){var a=s[jr];if(a)return a;for(var d=s.parentNode;d;){if(a=d[Vr]||d[jr]){if(d=a.alternate,a.child!==null||d!==null&&d.child!==null)for(s=Sg(s);s!==null;){if(d=s[jr])return d;s=Sg(s)}return a}s=d,d=s.parentNode}return null}function sa(s){return s=s[jr]||s[Vr],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Ms(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(n(33))}function Ol(s){return s[ia]||null}var Ed=[],Ds=-1;function hi(s){return{current:s}}function xt(s){0>Ds||(s.current=Ed[Ds],Ed[Ds]=null,Ds--)}function pt(s,a){Ds++,Ed[Ds]=s.current,s.current=a}var pi={},on=hi(pi),Cn=hi(!1),Hi=pi;function Ls(s,a){var d=s.type.contextTypes;if(!d)return pi;var m=s.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===a)return m.__reactInternalMemoizedMaskedChildContext;var x={},S;for(S in d)x[S]=a[S];return m&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=a,s.__reactInternalMemoizedMaskedChildContext=x),x}function jn(s){return s=s.childContextTypes,s!=null}function Ml(){xt(Cn),xt(on)}function Eg(s,a,d){if(on.current!==pi)throw Error(n(168));pt(on,a),pt(Cn,d)}function _g(s,a,d){var m=s.stateNode;if(a=a.childContextTypes,typeof m.getChildContext!="function")return d;m=m.getChildContext();for(var x in m)if(!(x in a))throw Error(n(108,fe(s)||"Unknown",x));return T({},d,m)}function Dl(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||pi,Hi=on.current,pt(on,s),pt(Cn,Cn.current),!0}function Cg(s,a,d){var m=s.stateNode;if(!m)throw Error(n(169));d?(s=_g(s,a,Hi),m.__reactInternalMemoizedMergedChildContext=s,xt(Cn),xt(on),pt(on,s)):xt(Cn),pt(Cn,d)}var qr=null,Ll=!1,_d=!1;function jg(s){qr===null?qr=[s]:qr.push(s)}function nE(s){Ll=!0,jg(s)}function mi(){if(!_d&&qr!==null){_d=!0;var s=0,a=lt;try{var d=qr;for(lt=1;s<d.length;s++){var m=d[s];do m=m(!0);while(m!==null)}qr=null,Ll=!1}catch(x){throw qr!==null&&(qr=qr.slice(s+1)),Tm(Yc,mi),x}finally{lt=a,_d=!1}}return null}var $s=[],Fs=0,$l=null,Fl=0,Qn=[],Xn=0,Vi=null,Yr=1,Gr="";function qi(s,a){$s[Fs++]=Fl,$s[Fs++]=$l,$l=s,Fl=a}function Ng(s,a,d){Qn[Xn++]=Yr,Qn[Xn++]=Gr,Qn[Xn++]=Vi,Vi=s;var m=Yr;s=Gr;var x=32-ur(m)-1;m&=~(1<<x),d+=1;var S=32-ur(a)+x;if(30<S){var N=x-x%5;S=(m&(1<<N)-1).toString(32),m>>=N,x-=N,Yr=1<<32-ur(a)+x|d<<x|m,Gr=S+s}else Yr=1<<S|d<<x|m,Gr=s}function Cd(s){s.return!==null&&(qi(s,1),Ng(s,1,0))}function jd(s){for(;s===$l;)$l=$s[--Fs],$s[Fs]=null,Fl=$s[--Fs],$s[Fs]=null;for(;s===Vi;)Vi=Qn[--Xn],Qn[Xn]=null,Gr=Qn[--Xn],Qn[Xn]=null,Yr=Qn[--Xn],Qn[Xn]=null}var zn=null,Bn=null,St=!1,dr=null;function Tg(s,a){var d=nr(5,null,null,0);d.elementType="DELETED",d.stateNode=a,d.return=s,a=s.deletions,a===null?(s.deletions=[d],s.flags|=16):a.push(d)}function Ig(s,a){switch(s.tag){case 5:var d=s.type;return a=a.nodeType!==1||d.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(s.stateNode=a,zn=s,Bn=fi(a.firstChild),!0):!1;case 6:return a=s.pendingProps===""||a.nodeType!==3?null:a,a!==null?(s.stateNode=a,zn=s,Bn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(d=Vi!==null?{id:Yr,overflow:Gr}:null,s.memoizedState={dehydrated:a,treeContext:d,retryLane:1073741824},d=nr(18,null,null,0),d.stateNode=a,d.return=s,s.child=d,zn=s,Bn=null,!0):!1;default:return!1}}function Nd(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Td(s){if(St){var a=Bn;if(a){var d=a;if(!Ig(s,a)){if(Nd(s))throw Error(n(418));a=fi(d.nextSibling);var m=zn;a&&Ig(s,a)?Tg(m,d):(s.flags=s.flags&-4097|2,St=!1,zn=s)}}else{if(Nd(s))throw Error(n(418));s.flags=s.flags&-4097|2,St=!1,zn=s}}}function Pg(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;zn=s}function zl(s){if(s!==zn)return!1;if(!St)return Pg(s),St=!0,!1;var a;if((a=s.tag!==3)&&!(a=s.tag!==5)&&(a=s.type,a=a!=="head"&&a!=="body"&&!wd(s.type,s.memoizedProps)),a&&(a=Bn)){if(Nd(s))throw Ag(),Error(n(418));for(;a;)Tg(s,a),a=fi(a.nextSibling)}if(Pg(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8){var d=s.data;if(d==="/$"){if(a===0){Bn=fi(s.nextSibling);break e}a--}else d!=="$"&&d!=="$!"&&d!=="$?"||a++}s=s.nextSibling}Bn=null}}else Bn=zn?fi(s.stateNode.nextSibling):null;return!0}function Ag(){for(var s=Bn;s;)s=fi(s.nextSibling)}function zs(){Bn=zn=null,St=!1}function Id(s){dr===null?dr=[s]:dr.push(s)}var rE=M.ReactCurrentBatchConfig;function oa(s,a,d){if(s=d.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(n(309));var m=d.stateNode}if(!m)throw Error(n(147,s));var x=m,S=""+s;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===S?a.ref:(a=function(N){var B=x.refs;N===null?delete B[S]:B[S]=N},a._stringRef=S,a)}if(typeof s!="string")throw Error(n(284));if(!d._owner)throw Error(n(290,s))}return s}function Bl(s,a){throw s=Object.prototype.toString.call(a),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s))}function Rg(s){var a=s._init;return a(s._payload)}function Og(s){function a(oe,X){if(s){var le=oe.deletions;le===null?(oe.deletions=[X],oe.flags|=16):le.push(X)}}function d(oe,X){if(!s)return null;for(;X!==null;)a(oe,X),X=X.sibling;return null}function m(oe,X){for(oe=new Map;X!==null;)X.key!==null?oe.set(X.key,X):oe.set(X.index,X),X=X.sibling;return oe}function x(oe,X){return oe=Si(oe,X),oe.index=0,oe.sibling=null,oe}function S(oe,X,le){return oe.index=le,s?(le=oe.alternate,le!==null?(le=le.index,le<X?(oe.flags|=2,X):le):(oe.flags|=2,X)):(oe.flags|=1048576,X)}function N(oe){return s&&oe.alternate===null&&(oe.flags|=2),oe}function B(oe,X,le,Se){return X===null||X.tag!==6?(X=kf(le,oe.mode,Se),X.return=oe,X):(X=x(X,le),X.return=oe,X)}function Y(oe,X,le,Se){var Me=le.type;return Me===z?ve(oe,X,le.props.children,Se,le.key):X!==null&&(X.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===J&&Rg(Me)===X.type)?(Se=x(X,le.props),Se.ref=oa(oe,X,le),Se.return=oe,Se):(Se=du(le.type,le.key,le.props,null,oe.mode,Se),Se.ref=oa(oe,X,le),Se.return=oe,Se)}function ue(oe,X,le,Se){return X===null||X.tag!==4||X.stateNode.containerInfo!==le.containerInfo||X.stateNode.implementation!==le.implementation?(X=Sf(le,oe.mode,Se),X.return=oe,X):(X=x(X,le.children||[]),X.return=oe,X)}function ve(oe,X,le,Se,Me){return X===null||X.tag!==7?(X=es(le,oe.mode,Se,Me),X.return=oe,X):(X=x(X,le),X.return=oe,X)}function xe(oe,X,le){if(typeof X=="string"&&X!==""||typeof X=="number")return X=kf(""+X,oe.mode,le),X.return=oe,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case D:return le=du(X.type,X.key,X.props,null,oe.mode,le),le.ref=oa(oe,null,X),le.return=oe,le;case R:return X=Sf(X,oe.mode,le),X.return=oe,X;case J:var Se=X._init;return xe(oe,Se(X._payload),le)}if(ae(X)||ne(X))return X=es(X,oe.mode,le,null),X.return=oe,X;Bl(oe,X)}return null}function ge(oe,X,le,Se){var Me=X!==null?X.key:null;if(typeof le=="string"&&le!==""||typeof le=="number")return Me!==null?null:B(oe,X,""+le,Se);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case D:return le.key===Me?Y(oe,X,le,Se):null;case R:return le.key===Me?ue(oe,X,le,Se):null;case J:return Me=le._init,ge(oe,X,Me(le._payload),Se)}if(ae(le)||ne(le))return Me!==null?null:ve(oe,X,le,Se,null);Bl(oe,le)}return null}function Te(oe,X,le,Se,Me){if(typeof Se=="string"&&Se!==""||typeof Se=="number")return oe=oe.get(le)||null,B(X,oe,""+Se,Me);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case D:return oe=oe.get(Se.key===null?le:Se.key)||null,Y(X,oe,Se,Me);case R:return oe=oe.get(Se.key===null?le:Se.key)||null,ue(X,oe,Se,Me);case J:var Le=Se._init;return Te(oe,X,le,Le(Se._payload),Me)}if(ae(Se)||ne(Se))return oe=oe.get(le)||null,ve(X,oe,Se,Me,null);Bl(X,Se)}return null}function Ae(oe,X,le,Se){for(var Me=null,Le=null,$e=X,He=X=0,Jt=null;$e!==null&&He<le.length;He++){$e.index>He?(Jt=$e,$e=null):Jt=$e.sibling;var it=ge(oe,$e,le[He],Se);if(it===null){$e===null&&($e=Jt);break}s&&$e&&it.alternate===null&&a(oe,$e),X=S(it,X,He),Le===null?Me=it:Le.sibling=it,Le=it,$e=Jt}if(He===le.length)return d(oe,$e),St&&qi(oe,He),Me;if($e===null){for(;He<le.length;He++)$e=xe(oe,le[He],Se),$e!==null&&(X=S($e,X,He),Le===null?Me=$e:Le.sibling=$e,Le=$e);return St&&qi(oe,He),Me}for($e=m(oe,$e);He<le.length;He++)Jt=Te($e,oe,He,le[He],Se),Jt!==null&&(s&&Jt.alternate!==null&&$e.delete(Jt.key===null?He:Jt.key),X=S(Jt,X,He),Le===null?Me=Jt:Le.sibling=Jt,Le=Jt);return s&&$e.forEach(function(Ei){return a(oe,Ei)}),St&&qi(oe,He),Me}function Re(oe,X,le,Se){var Me=ne(le);if(typeof Me!="function")throw Error(n(150));if(le=Me.call(le),le==null)throw Error(n(151));for(var Le=Me=null,$e=X,He=X=0,Jt=null,it=le.next();$e!==null&&!it.done;He++,it=le.next()){$e.index>He?(Jt=$e,$e=null):Jt=$e.sibling;var Ei=ge(oe,$e,it.value,Se);if(Ei===null){$e===null&&($e=Jt);break}s&&$e&&Ei.alternate===null&&a(oe,$e),X=S(Ei,X,He),Le===null?Me=Ei:Le.sibling=Ei,Le=Ei,$e=Jt}if(it.done)return d(oe,$e),St&&qi(oe,He),Me;if($e===null){for(;!it.done;He++,it=le.next())it=xe(oe,it.value,Se),it!==null&&(X=S(it,X,He),Le===null?Me=it:Le.sibling=it,Le=it);return St&&qi(oe,He),Me}for($e=m(oe,$e);!it.done;He++,it=le.next())it=Te($e,oe,He,it.value,Se),it!==null&&(s&&it.alternate!==null&&$e.delete(it.key===null?He:it.key),X=S(it,X,He),Le===null?Me=it:Le.sibling=it,Le=it);return s&&$e.forEach(function(DE){return a(oe,DE)}),St&&qi(oe,He),Me}function Mt(oe,X,le,Se){if(typeof le=="object"&&le!==null&&le.type===z&&le.key===null&&(le=le.props.children),typeof le=="object"&&le!==null){switch(le.$$typeof){case D:e:{for(var Me=le.key,Le=X;Le!==null;){if(Le.key===Me){if(Me=le.type,Me===z){if(Le.tag===7){d(oe,Le.sibling),X=x(Le,le.props.children),X.return=oe,oe=X;break e}}else if(Le.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===J&&Rg(Me)===Le.type){d(oe,Le.sibling),X=x(Le,le.props),X.ref=oa(oe,Le,le),X.return=oe,oe=X;break e}d(oe,Le);break}else a(oe,Le);Le=Le.sibling}le.type===z?(X=es(le.props.children,oe.mode,Se,le.key),X.return=oe,oe=X):(Se=du(le.type,le.key,le.props,null,oe.mode,Se),Se.ref=oa(oe,X,le),Se.return=oe,oe=Se)}return N(oe);case R:e:{for(Le=le.key;X!==null;){if(X.key===Le)if(X.tag===4&&X.stateNode.containerInfo===le.containerInfo&&X.stateNode.implementation===le.implementation){d(oe,X.sibling),X=x(X,le.children||[]),X.return=oe,oe=X;break e}else{d(oe,X);break}else a(oe,X);X=X.sibling}X=Sf(le,oe.mode,Se),X.return=oe,oe=X}return N(oe);case J:return Le=le._init,Mt(oe,X,Le(le._payload),Se)}if(ae(le))return Ae(oe,X,le,Se);if(ne(le))return Re(oe,X,le,Se);Bl(oe,le)}return typeof le=="string"&&le!==""||typeof le=="number"?(le=""+le,X!==null&&X.tag===6?(d(oe,X.sibling),X=x(X,le),X.return=oe,oe=X):(d(oe,X),X=kf(le,oe.mode,Se),X.return=oe,oe=X),N(oe)):d(oe,X)}return Mt}var Bs=Og(!0),Mg=Og(!1),Ul=hi(null),Wl=null,Us=null,Pd=null;function Ad(){Pd=Us=Wl=null}function Rd(s){var a=Ul.current;xt(Ul),s._currentValue=a}function Od(s,a,d){for(;s!==null;){var m=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,m!==null&&(m.childLanes|=a)):m!==null&&(m.childLanes&a)!==a&&(m.childLanes|=a),s===d)break;s=s.return}}function Ws(s,a){Wl=s,Pd=Us=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&a)!==0&&(Nn=!0),s.firstContext=null)}function Zn(s){var a=s._currentValue;if(Pd!==s)if(s={context:s,memoizedValue:a,next:null},Us===null){if(Wl===null)throw Error(n(308));Us=s,Wl.dependencies={lanes:0,firstContext:s}}else Us=Us.next=s;return a}var Yi=null;function Md(s){Yi===null?Yi=[s]:Yi.push(s)}function Dg(s,a,d,m){var x=a.interleaved;return x===null?(d.next=d,Md(a)):(d.next=x.next,x.next=d),a.interleaved=d,Kr(s,m)}function Kr(s,a){s.lanes|=a;var d=s.alternate;for(d!==null&&(d.lanes|=a),d=s,s=s.return;s!==null;)s.childLanes|=a,d=s.alternate,d!==null&&(d.childLanes|=a),d=s,s=s.return;return d.tag===3?d.stateNode:null}var gi=!1;function Dd(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lg(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Jr(s,a){return{eventTime:s,lane:a,tag:0,payload:null,callback:null,next:null}}function yi(s,a,d){var m=s.updateQueue;if(m===null)return null;if(m=m.shared,(tt&2)!==0){var x=m.pending;return x===null?a.next=a:(a.next=x.next,x.next=a),m.pending=a,Kr(s,d)}return x=m.interleaved,x===null?(a.next=a,Md(m)):(a.next=x.next,x.next=a),m.interleaved=a,Kr(s,d)}function Hl(s,a,d){if(a=a.updateQueue,a!==null&&(a=a.shared,(d&4194240)!==0)){var m=a.lanes;m&=s.pendingLanes,d|=m,a.lanes=d,Jc(s,d)}}function $g(s,a){var d=s.updateQueue,m=s.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var x=null,S=null;if(d=d.firstBaseUpdate,d!==null){do{var N={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};S===null?x=S=N:S=S.next=N,d=d.next}while(d!==null);S===null?x=S=a:S=S.next=a}else x=S=a;d={baseState:m.baseState,firstBaseUpdate:x,lastBaseUpdate:S,shared:m.shared,effects:m.effects},s.updateQueue=d;return}s=d.lastBaseUpdate,s===null?d.firstBaseUpdate=a:s.next=a,d.lastBaseUpdate=a}function Vl(s,a,d,m){var x=s.updateQueue;gi=!1;var S=x.firstBaseUpdate,N=x.lastBaseUpdate,B=x.shared.pending;if(B!==null){x.shared.pending=null;var Y=B,ue=Y.next;Y.next=null,N===null?S=ue:N.next=ue,N=Y;var ve=s.alternate;ve!==null&&(ve=ve.updateQueue,B=ve.lastBaseUpdate,B!==N&&(B===null?ve.firstBaseUpdate=ue:B.next=ue,ve.lastBaseUpdate=Y))}if(S!==null){var xe=x.baseState;N=0,ve=ue=Y=null,B=S;do{var ge=B.lane,Te=B.eventTime;if((m&ge)===ge){ve!==null&&(ve=ve.next={eventTime:Te,lane:0,tag:B.tag,payload:B.payload,callback:B.callback,next:null});e:{var Ae=s,Re=B;switch(ge=a,Te=d,Re.tag){case 1:if(Ae=Re.payload,typeof Ae=="function"){xe=Ae.call(Te,xe,ge);break e}xe=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Re.payload,ge=typeof Ae=="function"?Ae.call(Te,xe,ge):Ae,ge==null)break e;xe=T({},xe,ge);break e;case 2:gi=!0}}B.callback!==null&&B.lane!==0&&(s.flags|=64,ge=x.effects,ge===null?x.effects=[B]:ge.push(B))}else Te={eventTime:Te,lane:ge,tag:B.tag,payload:B.payload,callback:B.callback,next:null},ve===null?(ue=ve=Te,Y=xe):ve=ve.next=Te,N|=ge;if(B=B.next,B===null){if(B=x.shared.pending,B===null)break;ge=B,B=ge.next,ge.next=null,x.lastBaseUpdate=ge,x.shared.pending=null}}while(!0);if(ve===null&&(Y=xe),x.baseState=Y,x.firstBaseUpdate=ue,x.lastBaseUpdate=ve,a=x.shared.interleaved,a!==null){x=a;do N|=x.lane,x=x.next;while(x!==a)}else S===null&&(x.shared.lanes=0);Ji|=N,s.lanes=N,s.memoizedState=xe}}function Fg(s,a,d){if(s=a.effects,a.effects=null,s!==null)for(a=0;a<s.length;a++){var m=s[a],x=m.callback;if(x!==null){if(m.callback=null,m=d,typeof x!="function")throw Error(n(191,x));x.call(m)}}}var aa={},Nr=hi(aa),la=hi(aa),ua=hi(aa);function Gi(s){if(s===aa)throw Error(n(174));return s}function Ld(s,a){switch(pt(ua,a),pt(la,s),pt(Nr,aa),s=a.nodeType,s){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:se(null,"");break;default:s=s===8?a.parentNode:a,a=s.namespaceURI||null,s=s.tagName,a=se(a,s)}xt(Nr),pt(Nr,a)}function Hs(){xt(Nr),xt(la),xt(ua)}function zg(s){Gi(ua.current);var a=Gi(Nr.current),d=se(a,s.type);a!==d&&(pt(la,s),pt(Nr,d))}function $d(s){la.current===s&&(xt(Nr),xt(la))}var Ct=hi(0);function ql(s){for(var a=s;a!==null;){if(a.tag===13){var d=a.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Fd=[];function zd(){for(var s=0;s<Fd.length;s++)Fd[s]._workInProgressVersionPrimary=null;Fd.length=0}var Yl=M.ReactCurrentDispatcher,Bd=M.ReactCurrentBatchConfig,Ki=0,jt=null,Ht=null,Gt=null,Gl=!1,ca=!1,da=0,iE=0;function an(){throw Error(n(321))}function Ud(s,a){if(a===null)return!1;for(var d=0;d<a.length&&d<s.length;d++)if(!cr(s[d],a[d]))return!1;return!0}function Wd(s,a,d,m,x,S){if(Ki=S,jt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Yl.current=s===null||s.memoizedState===null?lE:uE,s=d(m,x),ca){S=0;do{if(ca=!1,da=0,25<=S)throw Error(n(301));S+=1,Gt=Ht=null,a.updateQueue=null,Yl.current=cE,s=d(m,x)}while(ca)}if(Yl.current=Ql,a=Ht!==null&&Ht.next!==null,Ki=0,Gt=Ht=jt=null,Gl=!1,a)throw Error(n(300));return s}function Hd(){var s=da!==0;return da=0,s}function Tr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?jt.memoizedState=Gt=s:Gt=Gt.next=s,Gt}function er(){if(Ht===null){var s=jt.alternate;s=s!==null?s.memoizedState:null}else s=Ht.next;var a=Gt===null?jt.memoizedState:Gt.next;if(a!==null)Gt=a,Ht=s;else{if(s===null)throw Error(n(310));Ht=s,s={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},Gt===null?jt.memoizedState=Gt=s:Gt=Gt.next=s}return Gt}function fa(s,a){return typeof a=="function"?a(s):a}function Vd(s){var a=er(),d=a.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=s;var m=Ht,x=m.baseQueue,S=d.pending;if(S!==null){if(x!==null){var N=x.next;x.next=S.next,S.next=N}m.baseQueue=x=S,d.pending=null}if(x!==null){S=x.next,m=m.baseState;var B=N=null,Y=null,ue=S;do{var ve=ue.lane;if((Ki&ve)===ve)Y!==null&&(Y=Y.next={lane:0,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null}),m=ue.hasEagerState?ue.eagerState:s(m,ue.action);else{var xe={lane:ve,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null};Y===null?(B=Y=xe,N=m):Y=Y.next=xe,jt.lanes|=ve,Ji|=ve}ue=ue.next}while(ue!==null&&ue!==S);Y===null?N=m:Y.next=B,cr(m,a.memoizedState)||(Nn=!0),a.memoizedState=m,a.baseState=N,a.baseQueue=Y,d.lastRenderedState=m}if(s=d.interleaved,s!==null){x=s;do S=x.lane,jt.lanes|=S,Ji|=S,x=x.next;while(x!==s)}else x===null&&(d.lanes=0);return[a.memoizedState,d.dispatch]}function qd(s){var a=er(),d=a.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=s;var m=d.dispatch,x=d.pending,S=a.memoizedState;if(x!==null){d.pending=null;var N=x=x.next;do S=s(S,N.action),N=N.next;while(N!==x);cr(S,a.memoizedState)||(Nn=!0),a.memoizedState=S,a.baseQueue===null&&(a.baseState=S),d.lastRenderedState=S}return[S,m]}function Bg(){}function Ug(s,a){var d=jt,m=er(),x=a(),S=!cr(m.memoizedState,x);if(S&&(m.memoizedState=x,Nn=!0),m=m.queue,Yd(Vg.bind(null,d,m,s),[s]),m.getSnapshot!==a||S||Gt!==null&&Gt.memoizedState.tag&1){if(d.flags|=2048,ha(9,Hg.bind(null,d,m,x,a),void 0,null),Kt===null)throw Error(n(349));(Ki&30)!==0||Wg(d,a,x)}return x}function Wg(s,a,d){s.flags|=16384,s={getSnapshot:a,value:d},a=jt.updateQueue,a===null?(a={lastEffect:null,stores:null},jt.updateQueue=a,a.stores=[s]):(d=a.stores,d===null?a.stores=[s]:d.push(s))}function Hg(s,a,d,m){a.value=d,a.getSnapshot=m,qg(a)&&Yg(s)}function Vg(s,a,d){return d(function(){qg(a)&&Yg(s)})}function qg(s){var a=s.getSnapshot;s=s.value;try{var d=a();return!cr(s,d)}catch{return!0}}function Yg(s){var a=Kr(s,1);a!==null&&mr(a,s,1,-1)}function Gg(s){var a=Tr();return typeof s=="function"&&(s=s()),a.memoizedState=a.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:s},a.queue=s,s=s.dispatch=aE.bind(null,jt,s),[a.memoizedState,s]}function ha(s,a,d,m){return s={tag:s,create:a,destroy:d,deps:m,next:null},a=jt.updateQueue,a===null?(a={lastEffect:null,stores:null},jt.updateQueue=a,a.lastEffect=s.next=s):(d=a.lastEffect,d===null?a.lastEffect=s.next=s:(m=d.next,d.next=s,s.next=m,a.lastEffect=s)),s}function Kg(){return er().memoizedState}function Kl(s,a,d,m){var x=Tr();jt.flags|=s,x.memoizedState=ha(1|a,d,void 0,m===void 0?null:m)}function Jl(s,a,d,m){var x=er();m=m===void 0?null:m;var S=void 0;if(Ht!==null){var N=Ht.memoizedState;if(S=N.destroy,m!==null&&Ud(m,N.deps)){x.memoizedState=ha(a,d,S,m);return}}jt.flags|=s,x.memoizedState=ha(1|a,d,S,m)}function Jg(s,a){return Kl(8390656,8,s,a)}function Yd(s,a){return Jl(2048,8,s,a)}function Qg(s,a){return Jl(4,2,s,a)}function Xg(s,a){return Jl(4,4,s,a)}function Zg(s,a){if(typeof a=="function")return s=s(),a(s),function(){a(null)};if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function ey(s,a,d){return d=d!=null?d.concat([s]):null,Jl(4,4,Zg.bind(null,a,s),d)}function Gd(){}function ty(s,a){var d=er();a=a===void 0?null:a;var m=d.memoizedState;return m!==null&&a!==null&&Ud(a,m[1])?m[0]:(d.memoizedState=[s,a],s)}function ny(s,a){var d=er();a=a===void 0?null:a;var m=d.memoizedState;return m!==null&&a!==null&&Ud(a,m[1])?m[0]:(s=s(),d.memoizedState=[s,a],s)}function ry(s,a,d){return(Ki&21)===0?(s.baseState&&(s.baseState=!1,Nn=!0),s.memoizedState=d):(cr(d,a)||(d=Rm(),jt.lanes|=d,Ji|=d,s.baseState=!0),a)}function sE(s,a){var d=lt;lt=d!==0&&4>d?d:4,s(!0);var m=Bd.transition;Bd.transition={};try{s(!1),a()}finally{lt=d,Bd.transition=m}}function iy(){return er().memoizedState}function oE(s,a,d){var m=bi(s);if(d={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null},sy(s))oy(a,d);else if(d=Dg(s,a,d,m),d!==null){var x=xn();mr(d,s,m,x),ay(d,a,m)}}function aE(s,a,d){var m=bi(s),x={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null};if(sy(s))oy(a,x);else{var S=s.alternate;if(s.lanes===0&&(S===null||S.lanes===0)&&(S=a.lastRenderedReducer,S!==null))try{var N=a.lastRenderedState,B=S(N,d);if(x.hasEagerState=!0,x.eagerState=B,cr(B,N)){var Y=a.interleaved;Y===null?(x.next=x,Md(a)):(x.next=Y.next,Y.next=x),a.interleaved=x;return}}catch{}finally{}d=Dg(s,a,x,m),d!==null&&(x=xn(),mr(d,s,m,x),ay(d,a,m))}}function sy(s){var a=s.alternate;return s===jt||a!==null&&a===jt}function oy(s,a){ca=Gl=!0;var d=s.pending;d===null?a.next=a:(a.next=d.next,d.next=a),s.pending=a}function ay(s,a,d){if((d&4194240)!==0){var m=a.lanes;m&=s.pendingLanes,d|=m,a.lanes=d,Jc(s,d)}}var Ql={readContext:Zn,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useInsertionEffect:an,useLayoutEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useMutableSource:an,useSyncExternalStore:an,useId:an,unstable_isNewReconciler:!1},lE={readContext:Zn,useCallback:function(s,a){return Tr().memoizedState=[s,a===void 0?null:a],s},useContext:Zn,useEffect:Jg,useImperativeHandle:function(s,a,d){return d=d!=null?d.concat([s]):null,Kl(4194308,4,Zg.bind(null,a,s),d)},useLayoutEffect:function(s,a){return Kl(4194308,4,s,a)},useInsertionEffect:function(s,a){return Kl(4,2,s,a)},useMemo:function(s,a){var d=Tr();return a=a===void 0?null:a,s=s(),d.memoizedState=[s,a],s},useReducer:function(s,a,d){var m=Tr();return a=d!==void 0?d(a):a,m.memoizedState=m.baseState=a,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:a},m.queue=s,s=s.dispatch=oE.bind(null,jt,s),[m.memoizedState,s]},useRef:function(s){var a=Tr();return s={current:s},a.memoizedState=s},useState:Gg,useDebugValue:Gd,useDeferredValue:function(s){return Tr().memoizedState=s},useTransition:function(){var s=Gg(!1),a=s[0];return s=sE.bind(null,s[1]),Tr().memoizedState=s,[a,s]},useMutableSource:function(){},useSyncExternalStore:function(s,a,d){var m=jt,x=Tr();if(St){if(d===void 0)throw Error(n(407));d=d()}else{if(d=a(),Kt===null)throw Error(n(349));(Ki&30)!==0||Wg(m,a,d)}x.memoizedState=d;var S={value:d,getSnapshot:a};return x.queue=S,Jg(Vg.bind(null,m,S,s),[s]),m.flags|=2048,ha(9,Hg.bind(null,m,S,d,a),void 0,null),d},useId:function(){var s=Tr(),a=Kt.identifierPrefix;if(St){var d=Gr,m=Yr;d=(m&~(1<<32-ur(m)-1)).toString(32)+d,a=":"+a+"R"+d,d=da++,0<d&&(a+="H"+d.toString(32)),a+=":"}else d=iE++,a=":"+a+"r"+d.toString(32)+":";return s.memoizedState=a},unstable_isNewReconciler:!1},uE={readContext:Zn,useCallback:ty,useContext:Zn,useEffect:Yd,useImperativeHandle:ey,useInsertionEffect:Qg,useLayoutEffect:Xg,useMemo:ny,useReducer:Vd,useRef:Kg,useState:function(){return Vd(fa)},useDebugValue:Gd,useDeferredValue:function(s){var a=er();return ry(a,Ht.memoizedState,s)},useTransition:function(){var s=Vd(fa)[0],a=er().memoizedState;return[s,a]},useMutableSource:Bg,useSyncExternalStore:Ug,useId:iy,unstable_isNewReconciler:!1},cE={readContext:Zn,useCallback:ty,useContext:Zn,useEffect:Yd,useImperativeHandle:ey,useInsertionEffect:Qg,useLayoutEffect:Xg,useMemo:ny,useReducer:qd,useRef:Kg,useState:function(){return qd(fa)},useDebugValue:Gd,useDeferredValue:function(s){var a=er();return Ht===null?a.memoizedState=s:ry(a,Ht.memoizedState,s)},useTransition:function(){var s=qd(fa)[0],a=er().memoizedState;return[s,a]},useMutableSource:Bg,useSyncExternalStore:Ug,useId:iy,unstable_isNewReconciler:!1};function fr(s,a){if(s&&s.defaultProps){a=T({},a),s=s.defaultProps;for(var d in s)a[d]===void 0&&(a[d]=s[d]);return a}return a}function Kd(s,a,d,m){a=s.memoizedState,d=d(m,a),d=d==null?a:T({},a,d),s.memoizedState=d,s.lanes===0&&(s.updateQueue.baseState=d)}var Xl={isMounted:function(s){return(s=s._reactInternals)?Ui(s)===s:!1},enqueueSetState:function(s,a,d){s=s._reactInternals;var m=xn(),x=bi(s),S=Jr(m,x);S.payload=a,d!=null&&(S.callback=d),a=yi(s,S,x),a!==null&&(mr(a,s,x,m),Hl(a,s,x))},enqueueReplaceState:function(s,a,d){s=s._reactInternals;var m=xn(),x=bi(s),S=Jr(m,x);S.tag=1,S.payload=a,d!=null&&(S.callback=d),a=yi(s,S,x),a!==null&&(mr(a,s,x,m),Hl(a,s,x))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var d=xn(),m=bi(s),x=Jr(d,m);x.tag=2,a!=null&&(x.callback=a),a=yi(s,x,m),a!==null&&(mr(a,s,m,d),Hl(a,s,m))}};function ly(s,a,d,m,x,S,N){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(m,S,N):a.prototype&&a.prototype.isPureReactComponent?!Zo(d,m)||!Zo(x,S):!0}function uy(s,a,d){var m=!1,x=pi,S=a.contextType;return typeof S=="object"&&S!==null?S=Zn(S):(x=jn(a)?Hi:on.current,m=a.contextTypes,S=(m=m!=null)?Ls(s,x):pi),a=new a(d,S),s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Xl,s.stateNode=a,a._reactInternals=s,m&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=x,s.__reactInternalMemoizedMaskedChildContext=S),a}function cy(s,a,d,m){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(d,m),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(d,m),a.state!==s&&Xl.enqueueReplaceState(a,a.state,null)}function Jd(s,a,d,m){var x=s.stateNode;x.props=d,x.state=s.memoizedState,x.refs={},Dd(s);var S=a.contextType;typeof S=="object"&&S!==null?x.context=Zn(S):(S=jn(a)?Hi:on.current,x.context=Ls(s,S)),x.state=s.memoizedState,S=a.getDerivedStateFromProps,typeof S=="function"&&(Kd(s,a,S,d),x.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(a=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),a!==x.state&&Xl.enqueueReplaceState(x,x.state,null),Vl(s,d,x,m),x.state=s.memoizedState),typeof x.componentDidMount=="function"&&(s.flags|=4194308)}function Vs(s,a){try{var d="",m=a;do d+=me(m),m=m.return;while(m);var x=d}catch(S){x=`
Error generating stack: `+S.message+`
`+S.stack}return{value:s,source:a,stack:x,digest:null}}function Qd(s,a,d){return{value:s,source:null,stack:d??null,digest:a??null}}function Xd(s,a){try{console.error(a.value)}catch(d){setTimeout(function(){throw d})}}var dE=typeof WeakMap=="function"?WeakMap:Map;function dy(s,a,d){d=Jr(-1,d),d.tag=3,d.payload={element:null};var m=a.value;return d.callback=function(){su||(su=!0,pf=m),Xd(s,a)},d}function fy(s,a,d){d=Jr(-1,d),d.tag=3;var m=s.type.getDerivedStateFromError;if(typeof m=="function"){var x=a.value;d.payload=function(){return m(x)},d.callback=function(){Xd(s,a)}}var S=s.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(d.callback=function(){Xd(s,a),typeof m!="function"&&(xi===null?xi=new Set([this]):xi.add(this));var N=a.stack;this.componentDidCatch(a.value,{componentStack:N!==null?N:""})}),d}function hy(s,a,d){var m=s.pingCache;if(m===null){m=s.pingCache=new dE;var x=new Set;m.set(a,x)}else x=m.get(a),x===void 0&&(x=new Set,m.set(a,x));x.has(d)||(x.add(d),s=_E.bind(null,s,a,d),a.then(s,s))}function py(s){do{var a;if((a=s.tag===13)&&(a=s.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return s;s=s.return}while(s!==null);return null}function my(s,a,d,m,x){return(s.mode&1)===0?(s===a?s.flags|=65536:(s.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(a=Jr(-1,1),a.tag=2,yi(d,a,1))),d.lanes|=1),s):(s.flags|=65536,s.lanes=x,s)}var fE=M.ReactCurrentOwner,Nn=!1;function vn(s,a,d,m){a.child=s===null?Mg(a,null,d,m):Bs(a,s.child,d,m)}function gy(s,a,d,m,x){d=d.render;var S=a.ref;return Ws(a,x),m=Wd(s,a,d,m,S,x),d=Hd(),s!==null&&!Nn?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~x,Qr(s,a,x)):(St&&d&&Cd(a),a.flags|=1,vn(s,a,m,x),a.child)}function yy(s,a,d,m,x){if(s===null){var S=d.type;return typeof S=="function"&&!bf(S)&&S.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(a.tag=15,a.type=S,vy(s,a,S,m,x)):(s=du(d.type,null,m,a,a.mode,x),s.ref=a.ref,s.return=a,a.child=s)}if(S=s.child,(s.lanes&x)===0){var N=S.memoizedProps;if(d=d.compare,d=d!==null?d:Zo,d(N,m)&&s.ref===a.ref)return Qr(s,a,x)}return a.flags|=1,s=Si(S,m),s.ref=a.ref,s.return=a,a.child=s}function vy(s,a,d,m,x){if(s!==null){var S=s.memoizedProps;if(Zo(S,m)&&s.ref===a.ref)if(Nn=!1,a.pendingProps=m=S,(s.lanes&x)!==0)(s.flags&131072)!==0&&(Nn=!0);else return a.lanes=s.lanes,Qr(s,a,x)}return Zd(s,a,d,m,x)}function xy(s,a,d){var m=a.pendingProps,x=m.children,S=s!==null?s.memoizedState:null;if(m.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},pt(Ys,Un),Un|=d;else{if((d&1073741824)===0)return s=S!==null?S.baseLanes|d:d,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:s,cachePool:null,transitions:null},a.updateQueue=null,pt(Ys,Un),Un|=s,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=S!==null?S.baseLanes:d,pt(Ys,Un),Un|=m}else S!==null?(m=S.baseLanes|d,a.memoizedState=null):m=d,pt(Ys,Un),Un|=m;return vn(s,a,x,d),a.child}function wy(s,a){var d=a.ref;(s===null&&d!==null||s!==null&&s.ref!==d)&&(a.flags|=512,a.flags|=2097152)}function Zd(s,a,d,m,x){var S=jn(d)?Hi:on.current;return S=Ls(a,S),Ws(a,x),d=Wd(s,a,d,m,S,x),m=Hd(),s!==null&&!Nn?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~x,Qr(s,a,x)):(St&&m&&Cd(a),a.flags|=1,vn(s,a,d,x),a.child)}function by(s,a,d,m,x){if(jn(d)){var S=!0;Dl(a)}else S=!1;if(Ws(a,x),a.stateNode===null)eu(s,a),uy(a,d,m),Jd(a,d,m,x),m=!0;else if(s===null){var N=a.stateNode,B=a.memoizedProps;N.props=B;var Y=N.context,ue=d.contextType;typeof ue=="object"&&ue!==null?ue=Zn(ue):(ue=jn(d)?Hi:on.current,ue=Ls(a,ue));var ve=d.getDerivedStateFromProps,xe=typeof ve=="function"||typeof N.getSnapshotBeforeUpdate=="function";xe||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(B!==m||Y!==ue)&&cy(a,N,m,ue),gi=!1;var ge=a.memoizedState;N.state=ge,Vl(a,m,N,x),Y=a.memoizedState,B!==m||ge!==Y||Cn.current||gi?(typeof ve=="function"&&(Kd(a,d,ve,m),Y=a.memoizedState),(B=gi||ly(a,d,B,m,ge,Y,ue))?(xe||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(a.flags|=4194308)):(typeof N.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=m,a.memoizedState=Y),N.props=m,N.state=Y,N.context=ue,m=B):(typeof N.componentDidMount=="function"&&(a.flags|=4194308),m=!1)}else{N=a.stateNode,Lg(s,a),B=a.memoizedProps,ue=a.type===a.elementType?B:fr(a.type,B),N.props=ue,xe=a.pendingProps,ge=N.context,Y=d.contextType,typeof Y=="object"&&Y!==null?Y=Zn(Y):(Y=jn(d)?Hi:on.current,Y=Ls(a,Y));var Te=d.getDerivedStateFromProps;(ve=typeof Te=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(B!==xe||ge!==Y)&&cy(a,N,m,Y),gi=!1,ge=a.memoizedState,N.state=ge,Vl(a,m,N,x);var Ae=a.memoizedState;B!==xe||ge!==Ae||Cn.current||gi?(typeof Te=="function"&&(Kd(a,d,Te,m),Ae=a.memoizedState),(ue=gi||ly(a,d,ue,m,ge,Ae,Y)||!1)?(ve||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(m,Ae,Y),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(m,Ae,Y)),typeof N.componentDidUpdate=="function"&&(a.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof N.componentDidUpdate!="function"||B===s.memoizedProps&&ge===s.memoizedState||(a.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||B===s.memoizedProps&&ge===s.memoizedState||(a.flags|=1024),a.memoizedProps=m,a.memoizedState=Ae),N.props=m,N.state=Ae,N.context=Y,m=ue):(typeof N.componentDidUpdate!="function"||B===s.memoizedProps&&ge===s.memoizedState||(a.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||B===s.memoizedProps&&ge===s.memoizedState||(a.flags|=1024),m=!1)}return ef(s,a,d,m,S,x)}function ef(s,a,d,m,x,S){wy(s,a);var N=(a.flags&128)!==0;if(!m&&!N)return x&&Cg(a,d,!1),Qr(s,a,S);m=a.stateNode,fE.current=a;var B=N&&typeof d.getDerivedStateFromError!="function"?null:m.render();return a.flags|=1,s!==null&&N?(a.child=Bs(a,s.child,null,S),a.child=Bs(a,null,B,S)):vn(s,a,B,S),a.memoizedState=m.state,x&&Cg(a,d,!0),a.child}function ky(s){var a=s.stateNode;a.pendingContext?Eg(s,a.pendingContext,a.pendingContext!==a.context):a.context&&Eg(s,a.context,!1),Ld(s,a.containerInfo)}function Sy(s,a,d,m,x){return zs(),Id(x),a.flags|=256,vn(s,a,d,m),a.child}var tf={dehydrated:null,treeContext:null,retryLane:0};function nf(s){return{baseLanes:s,cachePool:null,transitions:null}}function Ey(s,a,d){var m=a.pendingProps,x=Ct.current,S=!1,N=(a.flags&128)!==0,B;if((B=N)||(B=s!==null&&s.memoizedState===null?!1:(x&2)!==0),B?(S=!0,a.flags&=-129):(s===null||s.memoizedState!==null)&&(x|=1),pt(Ct,x&1),s===null)return Td(a),s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((a.mode&1)===0?a.lanes=1:s.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(N=m.children,s=m.fallback,S?(m=a.mode,S=a.child,N={mode:"hidden",children:N},(m&1)===0&&S!==null?(S.childLanes=0,S.pendingProps=N):S=fu(N,m,0,null),s=es(s,m,d,null),S.return=a,s.return=a,S.sibling=s,a.child=S,a.child.memoizedState=nf(d),a.memoizedState=tf,s):rf(a,N));if(x=s.memoizedState,x!==null&&(B=x.dehydrated,B!==null))return hE(s,a,N,m,B,x,d);if(S){S=m.fallback,N=a.mode,x=s.child,B=x.sibling;var Y={mode:"hidden",children:m.children};return(N&1)===0&&a.child!==x?(m=a.child,m.childLanes=0,m.pendingProps=Y,a.deletions=null):(m=Si(x,Y),m.subtreeFlags=x.subtreeFlags&14680064),B!==null?S=Si(B,S):(S=es(S,N,d,null),S.flags|=2),S.return=a,m.return=a,m.sibling=S,a.child=m,m=S,S=a.child,N=s.child.memoizedState,N=N===null?nf(d):{baseLanes:N.baseLanes|d,cachePool:null,transitions:N.transitions},S.memoizedState=N,S.childLanes=s.childLanes&~d,a.memoizedState=tf,m}return S=s.child,s=S.sibling,m=Si(S,{mode:"visible",children:m.children}),(a.mode&1)===0&&(m.lanes=d),m.return=a,m.sibling=null,s!==null&&(d=a.deletions,d===null?(a.deletions=[s],a.flags|=16):d.push(s)),a.child=m,a.memoizedState=null,m}function rf(s,a){return a=fu({mode:"visible",children:a},s.mode,0,null),a.return=s,s.child=a}function Zl(s,a,d,m){return m!==null&&Id(m),Bs(a,s.child,null,d),s=rf(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function hE(s,a,d,m,x,S,N){if(d)return a.flags&256?(a.flags&=-257,m=Qd(Error(n(422))),Zl(s,a,N,m)):a.memoizedState!==null?(a.child=s.child,a.flags|=128,null):(S=m.fallback,x=a.mode,m=fu({mode:"visible",children:m.children},x,0,null),S=es(S,x,N,null),S.flags|=2,m.return=a,S.return=a,m.sibling=S,a.child=m,(a.mode&1)!==0&&Bs(a,s.child,null,N),a.child.memoizedState=nf(N),a.memoizedState=tf,S);if((a.mode&1)===0)return Zl(s,a,N,null);if(x.data==="$!"){if(m=x.nextSibling&&x.nextSibling.dataset,m)var B=m.dgst;return m=B,S=Error(n(419)),m=Qd(S,m,void 0),Zl(s,a,N,m)}if(B=(N&s.childLanes)!==0,Nn||B){if(m=Kt,m!==null){switch(N&-N){case 4:x=2;break;case 16:x=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:x=32;break;case 536870912:x=268435456;break;default:x=0}x=(x&(m.suspendedLanes|N))!==0?0:x,x!==0&&x!==S.retryLane&&(S.retryLane=x,Kr(s,x),mr(m,s,x,-1))}return wf(),m=Qd(Error(n(421))),Zl(s,a,N,m)}return x.data==="$?"?(a.flags|=128,a.child=s.child,a=CE.bind(null,s),x._reactRetry=a,null):(s=S.treeContext,Bn=fi(x.nextSibling),zn=a,St=!0,dr=null,s!==null&&(Qn[Xn++]=Yr,Qn[Xn++]=Gr,Qn[Xn++]=Vi,Yr=s.id,Gr=s.overflow,Vi=a),a=rf(a,m.children),a.flags|=4096,a)}function _y(s,a,d){s.lanes|=a;var m=s.alternate;m!==null&&(m.lanes|=a),Od(s.return,a,d)}function sf(s,a,d,m,x){var S=s.memoizedState;S===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:x}:(S.isBackwards=a,S.rendering=null,S.renderingStartTime=0,S.last=m,S.tail=d,S.tailMode=x)}function Cy(s,a,d){var m=a.pendingProps,x=m.revealOrder,S=m.tail;if(vn(s,a,m.children,d),m=Ct.current,(m&2)!==0)m=m&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&_y(s,d,a);else if(s.tag===19)_y(s,d,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}m&=1}if(pt(Ct,m),(a.mode&1)===0)a.memoizedState=null;else switch(x){case"forwards":for(d=a.child,x=null;d!==null;)s=d.alternate,s!==null&&ql(s)===null&&(x=d),d=d.sibling;d=x,d===null?(x=a.child,a.child=null):(x=d.sibling,d.sibling=null),sf(a,!1,x,d,S);break;case"backwards":for(d=null,x=a.child,a.child=null;x!==null;){if(s=x.alternate,s!==null&&ql(s)===null){a.child=x;break}s=x.sibling,x.sibling=d,d=x,x=s}sf(a,!0,d,null,S);break;case"together":sf(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function eu(s,a){(a.mode&1)===0&&s!==null&&(s.alternate=null,a.alternate=null,a.flags|=2)}function Qr(s,a,d){if(s!==null&&(a.dependencies=s.dependencies),Ji|=a.lanes,(d&a.childLanes)===0)return null;if(s!==null&&a.child!==s.child)throw Error(n(153));if(a.child!==null){for(s=a.child,d=Si(s,s.pendingProps),a.child=d,d.return=a;s.sibling!==null;)s=s.sibling,d=d.sibling=Si(s,s.pendingProps),d.return=a;d.sibling=null}return a.child}function pE(s,a,d){switch(a.tag){case 3:ky(a),zs();break;case 5:zg(a);break;case 1:jn(a.type)&&Dl(a);break;case 4:Ld(a,a.stateNode.containerInfo);break;case 10:var m=a.type._context,x=a.memoizedProps.value;pt(Ul,m._currentValue),m._currentValue=x;break;case 13:if(m=a.memoizedState,m!==null)return m.dehydrated!==null?(pt(Ct,Ct.current&1),a.flags|=128,null):(d&a.child.childLanes)!==0?Ey(s,a,d):(pt(Ct,Ct.current&1),s=Qr(s,a,d),s!==null?s.sibling:null);pt(Ct,Ct.current&1);break;case 19:if(m=(d&a.childLanes)!==0,(s.flags&128)!==0){if(m)return Cy(s,a,d);a.flags|=128}if(x=a.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),pt(Ct,Ct.current),m)break;return null;case 22:case 23:return a.lanes=0,xy(s,a,d)}return Qr(s,a,d)}var jy,of,Ny,Ty;jy=function(s,a){for(var d=a.child;d!==null;){if(d.tag===5||d.tag===6)s.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},of=function(){},Ny=function(s,a,d,m){var x=s.memoizedProps;if(x!==m){s=a.stateNode,Gi(Nr.current);var S=null;switch(d){case"input":x=Ie(s,x),m=Ie(s,m),S=[];break;case"select":x=T({},x,{value:void 0}),m=T({},m,{value:void 0}),S=[];break;case"textarea":x=Ee(s,x),m=Ee(s,m),S=[];break;default:typeof x.onClick!="function"&&typeof m.onClick=="function"&&(s.onclick=Rl)}nt(d,m);var N;d=null;for(ue in x)if(!m.hasOwnProperty(ue)&&x.hasOwnProperty(ue)&&x[ue]!=null)if(ue==="style"){var B=x[ue];for(N in B)B.hasOwnProperty(N)&&(d||(d={}),d[N]="")}else ue!=="dangerouslySetInnerHTML"&&ue!=="children"&&ue!=="suppressContentEditableWarning"&&ue!=="suppressHydrationWarning"&&ue!=="autoFocus"&&(i.hasOwnProperty(ue)?S||(S=[]):(S=S||[]).push(ue,null));for(ue in m){var Y=m[ue];if(B=x!=null?x[ue]:void 0,m.hasOwnProperty(ue)&&Y!==B&&(Y!=null||B!=null))if(ue==="style")if(B){for(N in B)!B.hasOwnProperty(N)||Y&&Y.hasOwnProperty(N)||(d||(d={}),d[N]="");for(N in Y)Y.hasOwnProperty(N)&&B[N]!==Y[N]&&(d||(d={}),d[N]=Y[N])}else d||(S||(S=[]),S.push(ue,d)),d=Y;else ue==="dangerouslySetInnerHTML"?(Y=Y?Y.__html:void 0,B=B?B.__html:void 0,Y!=null&&B!==Y&&(S=S||[]).push(ue,Y)):ue==="children"?typeof Y!="string"&&typeof Y!="number"||(S=S||[]).push(ue,""+Y):ue!=="suppressContentEditableWarning"&&ue!=="suppressHydrationWarning"&&(i.hasOwnProperty(ue)?(Y!=null&&ue==="onScroll"&&vt("scroll",s),S||B===Y||(S=[])):(S=S||[]).push(ue,Y))}d&&(S=S||[]).push("style",d);var ue=S;(a.updateQueue=ue)&&(a.flags|=4)}},Ty=function(s,a,d,m){d!==m&&(a.flags|=4)};function pa(s,a){if(!St)switch(s.tailMode){case"hidden":a=s.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?s.tail=null:d.sibling=null;break;case"collapsed":d=s.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:m.sibling=null}}function ln(s){var a=s.alternate!==null&&s.alternate.child===s.child,d=0,m=0;if(a)for(var x=s.child;x!==null;)d|=x.lanes|x.childLanes,m|=x.subtreeFlags&14680064,m|=x.flags&14680064,x.return=s,x=x.sibling;else for(x=s.child;x!==null;)d|=x.lanes|x.childLanes,m|=x.subtreeFlags,m|=x.flags,x.return=s,x=x.sibling;return s.subtreeFlags|=m,s.childLanes=d,a}function mE(s,a,d){var m=a.pendingProps;switch(jd(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ln(a),null;case 1:return jn(a.type)&&Ml(),ln(a),null;case 3:return m=a.stateNode,Hs(),xt(Cn),xt(on),zd(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(s===null||s.child===null)&&(zl(a)?a.flags|=4:s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,dr!==null&&(yf(dr),dr=null))),of(s,a),ln(a),null;case 5:$d(a);var x=Gi(ua.current);if(d=a.type,s!==null&&a.stateNode!=null)Ny(s,a,d,m,x),s.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!m){if(a.stateNode===null)throw Error(n(166));return ln(a),null}if(s=Gi(Nr.current),zl(a)){m=a.stateNode,d=a.type;var S=a.memoizedProps;switch(m[jr]=a,m[ia]=S,s=(a.mode&1)!==0,d){case"dialog":vt("cancel",m),vt("close",m);break;case"iframe":case"object":case"embed":vt("load",m);break;case"video":case"audio":for(x=0;x<ta.length;x++)vt(ta[x],m);break;case"source":vt("error",m);break;case"img":case"image":case"link":vt("error",m),vt("load",m);break;case"details":vt("toggle",m);break;case"input":We(m,S),vt("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!S.multiple},vt("invalid",m);break;case"textarea":we(m,S),vt("invalid",m)}nt(d,S),x=null;for(var N in S)if(S.hasOwnProperty(N)){var B=S[N];N==="children"?typeof B=="string"?m.textContent!==B&&(S.suppressHydrationWarning!==!0&&Al(m.textContent,B,s),x=["children",B]):typeof B=="number"&&m.textContent!==""+B&&(S.suppressHydrationWarning!==!0&&Al(m.textContent,B,s),x=["children",""+B]):i.hasOwnProperty(N)&&B!=null&&N==="onScroll"&&vt("scroll",m)}switch(d){case"input":ce(m),Tt(m,S,!0);break;case"textarea":ce(m),ee(m);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(m.onclick=Rl)}m=x,a.updateQueue=m,m!==null&&(a.flags|=4)}else{N=x.nodeType===9?x:x.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=G(d)),s==="http://www.w3.org/1999/xhtml"?d==="script"?(s=N.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof m.is=="string"?s=N.createElement(d,{is:m.is}):(s=N.createElement(d),d==="select"&&(N=s,m.multiple?N.multiple=!0:m.size&&(N.size=m.size))):s=N.createElementNS(s,d),s[jr]=a,s[ia]=m,jy(s,a,!1,!1),a.stateNode=s;e:{switch(N=Wt(d,m),d){case"dialog":vt("cancel",s),vt("close",s),x=m;break;case"iframe":case"object":case"embed":vt("load",s),x=m;break;case"video":case"audio":for(x=0;x<ta.length;x++)vt(ta[x],s);x=m;break;case"source":vt("error",s),x=m;break;case"img":case"image":case"link":vt("error",s),vt("load",s),x=m;break;case"details":vt("toggle",s),x=m;break;case"input":We(s,m),x=Ie(s,m),vt("invalid",s);break;case"option":x=m;break;case"select":s._wrapperState={wasMultiple:!!m.multiple},x=T({},m,{value:void 0}),vt("invalid",s);break;case"textarea":we(s,m),x=Ee(s,m),vt("invalid",s);break;default:x=m}nt(d,x),B=x;for(S in B)if(B.hasOwnProperty(S)){var Y=B[S];S==="style"?Ke(s,Y):S==="dangerouslySetInnerHTML"?(Y=Y?Y.__html:void 0,Y!=null&&Oe(s,Y)):S==="children"?typeof Y=="string"?(d!=="textarea"||Y!=="")&&Be(s,Y):typeof Y=="number"&&Be(s,""+Y):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(i.hasOwnProperty(S)?Y!=null&&S==="onScroll"&&vt("scroll",s):Y!=null&&C(s,S,Y,N))}switch(d){case"input":ce(s),Tt(s,m,!1);break;case"textarea":ce(s),ee(s);break;case"option":m.value!=null&&s.setAttribute("value",""+W(m.value));break;case"select":s.multiple=!!m.multiple,S=m.value,S!=null?de(s,!!m.multiple,S,!1):m.defaultValue!=null&&de(s,!!m.multiple,m.defaultValue,!0);break;default:typeof x.onClick=="function"&&(s.onclick=Rl)}switch(d){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return ln(a),null;case 6:if(s&&a.stateNode!=null)Ty(s,a,s.memoizedProps,m);else{if(typeof m!="string"&&a.stateNode===null)throw Error(n(166));if(d=Gi(ua.current),Gi(Nr.current),zl(a)){if(m=a.stateNode,d=a.memoizedProps,m[jr]=a,(S=m.nodeValue!==d)&&(s=zn,s!==null))switch(s.tag){case 3:Al(m.nodeValue,d,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Al(m.nodeValue,d,(s.mode&1)!==0)}S&&(a.flags|=4)}else m=(d.nodeType===9?d:d.ownerDocument).createTextNode(m),m[jr]=a,a.stateNode=m}return ln(a),null;case 13:if(xt(Ct),m=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(St&&Bn!==null&&(a.mode&1)!==0&&(a.flags&128)===0)Ag(),zs(),a.flags|=98560,S=!1;else if(S=zl(a),m!==null&&m.dehydrated!==null){if(s===null){if(!S)throw Error(n(318));if(S=a.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(n(317));S[jr]=a}else zs(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;ln(a),S=!1}else dr!==null&&(yf(dr),dr=null),S=!0;if(!S)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=d,a):(m=m!==null,m!==(s!==null&&s.memoizedState!==null)&&m&&(a.child.flags|=8192,(a.mode&1)!==0&&(s===null||(Ct.current&1)!==0?Vt===0&&(Vt=3):wf())),a.updateQueue!==null&&(a.flags|=4),ln(a),null);case 4:return Hs(),of(s,a),s===null&&na(a.stateNode.containerInfo),ln(a),null;case 10:return Rd(a.type._context),ln(a),null;case 17:return jn(a.type)&&Ml(),ln(a),null;case 19:if(xt(Ct),S=a.memoizedState,S===null)return ln(a),null;if(m=(a.flags&128)!==0,N=S.rendering,N===null)if(m)pa(S,!1);else{if(Vt!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(N=ql(s),N!==null){for(a.flags|=128,pa(S,!1),m=N.updateQueue,m!==null&&(a.updateQueue=m,a.flags|=4),a.subtreeFlags=0,m=d,d=a.child;d!==null;)S=d,s=m,S.flags&=14680066,N=S.alternate,N===null?(S.childLanes=0,S.lanes=s,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=N.childLanes,S.lanes=N.lanes,S.child=N.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=N.memoizedProps,S.memoizedState=N.memoizedState,S.updateQueue=N.updateQueue,S.type=N.type,s=N.dependencies,S.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),d=d.sibling;return pt(Ct,Ct.current&1|2),a.child}s=s.sibling}S.tail!==null&&Ot()>Gs&&(a.flags|=128,m=!0,pa(S,!1),a.lanes=4194304)}else{if(!m)if(s=ql(N),s!==null){if(a.flags|=128,m=!0,d=s.updateQueue,d!==null&&(a.updateQueue=d,a.flags|=4),pa(S,!0),S.tail===null&&S.tailMode==="hidden"&&!N.alternate&&!St)return ln(a),null}else 2*Ot()-S.renderingStartTime>Gs&&d!==1073741824&&(a.flags|=128,m=!0,pa(S,!1),a.lanes=4194304);S.isBackwards?(N.sibling=a.child,a.child=N):(d=S.last,d!==null?d.sibling=N:a.child=N,S.last=N)}return S.tail!==null?(a=S.tail,S.rendering=a,S.tail=a.sibling,S.renderingStartTime=Ot(),a.sibling=null,d=Ct.current,pt(Ct,m?d&1|2:d&1),a):(ln(a),null);case 22:case 23:return xf(),m=a.memoizedState!==null,s!==null&&s.memoizedState!==null!==m&&(a.flags|=8192),m&&(a.mode&1)!==0?(Un&1073741824)!==0&&(ln(a),a.subtreeFlags&6&&(a.flags|=8192)):ln(a),null;case 24:return null;case 25:return null}throw Error(n(156,a.tag))}function gE(s,a){switch(jd(a),a.tag){case 1:return jn(a.type)&&Ml(),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return Hs(),xt(Cn),xt(on),zd(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 5:return $d(a),null;case 13:if(xt(Ct),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(n(340));zs()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return xt(Ct),null;case 4:return Hs(),null;case 10:return Rd(a.type._context),null;case 22:case 23:return xf(),null;case 24:return null;default:return null}}var tu=!1,un=!1,yE=typeof WeakSet=="function"?WeakSet:Set,Pe=null;function qs(s,a){var d=s.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(m){Pt(s,a,m)}else d.current=null}function af(s,a,d){try{d()}catch(m){Pt(s,a,m)}}var Iy=!1;function vE(s,a){if(vd=bl,s=lg(),cd(s)){if("selectionStart"in s)var d={start:s.selectionStart,end:s.selectionEnd};else e:{d=(d=s.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var x=m.anchorOffset,S=m.focusNode;m=m.focusOffset;try{d.nodeType,S.nodeType}catch{d=null;break e}var N=0,B=-1,Y=-1,ue=0,ve=0,xe=s,ge=null;t:for(;;){for(var Te;xe!==d||x!==0&&xe.nodeType!==3||(B=N+x),xe!==S||m!==0&&xe.nodeType!==3||(Y=N+m),xe.nodeType===3&&(N+=xe.nodeValue.length),(Te=xe.firstChild)!==null;)ge=xe,xe=Te;for(;;){if(xe===s)break t;if(ge===d&&++ue===x&&(B=N),ge===S&&++ve===m&&(Y=N),(Te=xe.nextSibling)!==null)break;xe=ge,ge=xe.parentNode}xe=Te}d=B===-1||Y===-1?null:{start:B,end:Y}}else d=null}d=d||{start:0,end:0}}else d=null;for(xd={focusedElem:s,selectionRange:d},bl=!1,Pe=a;Pe!==null;)if(a=Pe,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,Pe=s;else for(;Pe!==null;){a=Pe;try{var Ae=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(Ae!==null){var Re=Ae.memoizedProps,Mt=Ae.memoizedState,oe=a.stateNode,X=oe.getSnapshotBeforeUpdate(a.elementType===a.type?Re:fr(a.type,Re),Mt);oe.__reactInternalSnapshotBeforeUpdate=X}break;case 3:var le=a.stateNode.containerInfo;le.nodeType===1?le.textContent="":le.nodeType===9&&le.documentElement&&le.removeChild(le.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Se){Pt(a,a.return,Se)}if(s=a.sibling,s!==null){s.return=a.return,Pe=s;break}Pe=a.return}return Ae=Iy,Iy=!1,Ae}function ma(s,a,d){var m=a.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var x=m=m.next;do{if((x.tag&s)===s){var S=x.destroy;x.destroy=void 0,S!==void 0&&af(a,d,S)}x=x.next}while(x!==m)}}function nu(s,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var d=a=a.next;do{if((d.tag&s)===s){var m=d.create;d.destroy=m()}d=d.next}while(d!==a)}}function lf(s){var a=s.ref;if(a!==null){var d=s.stateNode;switch(s.tag){case 5:s=d;break;default:s=d}typeof a=="function"?a(s):a.current=s}}function Py(s){var a=s.alternate;a!==null&&(s.alternate=null,Py(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&(delete a[jr],delete a[ia],delete a[Sd],delete a[eE],delete a[tE])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function Ay(s){return s.tag===5||s.tag===3||s.tag===4}function Ry(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Ay(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function uf(s,a,d){var m=s.tag;if(m===5||m===6)s=s.stateNode,a?d.nodeType===8?d.parentNode.insertBefore(s,a):d.insertBefore(s,a):(d.nodeType===8?(a=d.parentNode,a.insertBefore(s,d)):(a=d,a.appendChild(s)),d=d._reactRootContainer,d!=null||a.onclick!==null||(a.onclick=Rl));else if(m!==4&&(s=s.child,s!==null))for(uf(s,a,d),s=s.sibling;s!==null;)uf(s,a,d),s=s.sibling}function cf(s,a,d){var m=s.tag;if(m===5||m===6)s=s.stateNode,a?d.insertBefore(s,a):d.appendChild(s);else if(m!==4&&(s=s.child,s!==null))for(cf(s,a,d),s=s.sibling;s!==null;)cf(s,a,d),s=s.sibling}var tn=null,hr=!1;function vi(s,a,d){for(d=d.child;d!==null;)Oy(s,a,d),d=d.sibling}function Oy(s,a,d){if(Cr&&typeof Cr.onCommitFiberUnmount=="function")try{Cr.onCommitFiberUnmount(ml,d)}catch{}switch(d.tag){case 5:un||qs(d,a);case 6:var m=tn,x=hr;tn=null,vi(s,a,d),tn=m,hr=x,tn!==null&&(hr?(s=tn,d=d.stateNode,s.nodeType===8?s.parentNode.removeChild(d):s.removeChild(d)):tn.removeChild(d.stateNode));break;case 18:tn!==null&&(hr?(s=tn,d=d.stateNode,s.nodeType===8?kd(s.parentNode,d):s.nodeType===1&&kd(s,d),Yo(s)):kd(tn,d.stateNode));break;case 4:m=tn,x=hr,tn=d.stateNode.containerInfo,hr=!0,vi(s,a,d),tn=m,hr=x;break;case 0:case 11:case 14:case 15:if(!un&&(m=d.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){x=m=m.next;do{var S=x,N=S.destroy;S=S.tag,N!==void 0&&((S&2)!==0||(S&4)!==0)&&af(d,a,N),x=x.next}while(x!==m)}vi(s,a,d);break;case 1:if(!un&&(qs(d,a),m=d.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=d.memoizedProps,m.state=d.memoizedState,m.componentWillUnmount()}catch(B){Pt(d,a,B)}vi(s,a,d);break;case 21:vi(s,a,d);break;case 22:d.mode&1?(un=(m=un)||d.memoizedState!==null,vi(s,a,d),un=m):vi(s,a,d);break;default:vi(s,a,d)}}function My(s){var a=s.updateQueue;if(a!==null){s.updateQueue=null;var d=s.stateNode;d===null&&(d=s.stateNode=new yE),a.forEach(function(m){var x=jE.bind(null,s,m);d.has(m)||(d.add(m),m.then(x,x))})}}function pr(s,a){var d=a.deletions;if(d!==null)for(var m=0;m<d.length;m++){var x=d[m];try{var S=s,N=a,B=N;e:for(;B!==null;){switch(B.tag){case 5:tn=B.stateNode,hr=!1;break e;case 3:tn=B.stateNode.containerInfo,hr=!0;break e;case 4:tn=B.stateNode.containerInfo,hr=!0;break e}B=B.return}if(tn===null)throw Error(n(160));Oy(S,N,x),tn=null,hr=!1;var Y=x.alternate;Y!==null&&(Y.return=null),x.return=null}catch(ue){Pt(x,a,ue)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)Dy(a,s),a=a.sibling}function Dy(s,a){var d=s.alternate,m=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(pr(a,s),Ir(s),m&4){try{ma(3,s,s.return),nu(3,s)}catch(Re){Pt(s,s.return,Re)}try{ma(5,s,s.return)}catch(Re){Pt(s,s.return,Re)}}break;case 1:pr(a,s),Ir(s),m&512&&d!==null&&qs(d,d.return);break;case 5:if(pr(a,s),Ir(s),m&512&&d!==null&&qs(d,d.return),s.flags&32){var x=s.stateNode;try{Be(x,"")}catch(Re){Pt(s,s.return,Re)}}if(m&4&&(x=s.stateNode,x!=null)){var S=s.memoizedProps,N=d!==null?d.memoizedProps:S,B=s.type,Y=s.updateQueue;if(s.updateQueue=null,Y!==null)try{B==="input"&&S.type==="radio"&&S.name!=null&&Qe(x,S),Wt(B,N);var ue=Wt(B,S);for(N=0;N<Y.length;N+=2){var ve=Y[N],xe=Y[N+1];ve==="style"?Ke(x,xe):ve==="dangerouslySetInnerHTML"?Oe(x,xe):ve==="children"?Be(x,xe):C(x,ve,xe,ue)}switch(B){case"input":ut(x,S);break;case"textarea":P(x,S);break;case"select":var ge=x._wrapperState.wasMultiple;x._wrapperState.wasMultiple=!!S.multiple;var Te=S.value;Te!=null?de(x,!!S.multiple,Te,!1):ge!==!!S.multiple&&(S.defaultValue!=null?de(x,!!S.multiple,S.defaultValue,!0):de(x,!!S.multiple,S.multiple?[]:"",!1))}x[ia]=S}catch(Re){Pt(s,s.return,Re)}}break;case 6:if(pr(a,s),Ir(s),m&4){if(s.stateNode===null)throw Error(n(162));x=s.stateNode,S=s.memoizedProps;try{x.nodeValue=S}catch(Re){Pt(s,s.return,Re)}}break;case 3:if(pr(a,s),Ir(s),m&4&&d!==null&&d.memoizedState.isDehydrated)try{Yo(a.containerInfo)}catch(Re){Pt(s,s.return,Re)}break;case 4:pr(a,s),Ir(s);break;case 13:pr(a,s),Ir(s),x=s.child,x.flags&8192&&(S=x.memoizedState!==null,x.stateNode.isHidden=S,!S||x.alternate!==null&&x.alternate.memoizedState!==null||(hf=Ot())),m&4&&My(s);break;case 22:if(ve=d!==null&&d.memoizedState!==null,s.mode&1?(un=(ue=un)||ve,pr(a,s),un=ue):pr(a,s),Ir(s),m&8192){if(ue=s.memoizedState!==null,(s.stateNode.isHidden=ue)&&!ve&&(s.mode&1)!==0)for(Pe=s,ve=s.child;ve!==null;){for(xe=Pe=ve;Pe!==null;){switch(ge=Pe,Te=ge.child,ge.tag){case 0:case 11:case 14:case 15:ma(4,ge,ge.return);break;case 1:qs(ge,ge.return);var Ae=ge.stateNode;if(typeof Ae.componentWillUnmount=="function"){m=ge,d=ge.return;try{a=m,Ae.props=a.memoizedProps,Ae.state=a.memoizedState,Ae.componentWillUnmount()}catch(Re){Pt(m,d,Re)}}break;case 5:qs(ge,ge.return);break;case 22:if(ge.memoizedState!==null){Fy(xe);continue}}Te!==null?(Te.return=ge,Pe=Te):Fy(xe)}ve=ve.sibling}e:for(ve=null,xe=s;;){if(xe.tag===5){if(ve===null){ve=xe;try{x=xe.stateNode,ue?(S=x.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(B=xe.stateNode,Y=xe.memoizedProps.style,N=Y!=null&&Y.hasOwnProperty("display")?Y.display:null,B.style.display=ct("display",N))}catch(Re){Pt(s,s.return,Re)}}}else if(xe.tag===6){if(ve===null)try{xe.stateNode.nodeValue=ue?"":xe.memoizedProps}catch(Re){Pt(s,s.return,Re)}}else if((xe.tag!==22&&xe.tag!==23||xe.memoizedState===null||xe===s)&&xe.child!==null){xe.child.return=xe,xe=xe.child;continue}if(xe===s)break e;for(;xe.sibling===null;){if(xe.return===null||xe.return===s)break e;ve===xe&&(ve=null),xe=xe.return}ve===xe&&(ve=null),xe.sibling.return=xe.return,xe=xe.sibling}}break;case 19:pr(a,s),Ir(s),m&4&&My(s);break;case 21:break;default:pr(a,s),Ir(s)}}function Ir(s){var a=s.flags;if(a&2){try{e:{for(var d=s.return;d!==null;){if(Ay(d)){var m=d;break e}d=d.return}throw Error(n(160))}switch(m.tag){case 5:var x=m.stateNode;m.flags&32&&(Be(x,""),m.flags&=-33);var S=Ry(s);cf(s,S,x);break;case 3:case 4:var N=m.stateNode.containerInfo,B=Ry(s);uf(s,B,N);break;default:throw Error(n(161))}}catch(Y){Pt(s,s.return,Y)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function xE(s,a,d){Pe=s,Ly(s)}function Ly(s,a,d){for(var m=(s.mode&1)!==0;Pe!==null;){var x=Pe,S=x.child;if(x.tag===22&&m){var N=x.memoizedState!==null||tu;if(!N){var B=x.alternate,Y=B!==null&&B.memoizedState!==null||un;B=tu;var ue=un;if(tu=N,(un=Y)&&!ue)for(Pe=x;Pe!==null;)N=Pe,Y=N.child,N.tag===22&&N.memoizedState!==null?zy(x):Y!==null?(Y.return=N,Pe=Y):zy(x);for(;S!==null;)Pe=S,Ly(S),S=S.sibling;Pe=x,tu=B,un=ue}$y(s)}else(x.subtreeFlags&8772)!==0&&S!==null?(S.return=x,Pe=S):$y(s)}}function $y(s){for(;Pe!==null;){var a=Pe;if((a.flags&8772)!==0){var d=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:un||nu(5,a);break;case 1:var m=a.stateNode;if(a.flags&4&&!un)if(d===null)m.componentDidMount();else{var x=a.elementType===a.type?d.memoizedProps:fr(a.type,d.memoizedProps);m.componentDidUpdate(x,d.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var S=a.updateQueue;S!==null&&Fg(a,S,m);break;case 3:var N=a.updateQueue;if(N!==null){if(d=null,a.child!==null)switch(a.child.tag){case 5:d=a.child.stateNode;break;case 1:d=a.child.stateNode}Fg(a,N,d)}break;case 5:var B=a.stateNode;if(d===null&&a.flags&4){d=B;var Y=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":Y.autoFocus&&d.focus();break;case"img":Y.src&&(d.src=Y.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var ue=a.alternate;if(ue!==null){var ve=ue.memoizedState;if(ve!==null){var xe=ve.dehydrated;xe!==null&&Yo(xe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}un||a.flags&512&&lf(a)}catch(ge){Pt(a,a.return,ge)}}if(a===s){Pe=null;break}if(d=a.sibling,d!==null){d.return=a.return,Pe=d;break}Pe=a.return}}function Fy(s){for(;Pe!==null;){var a=Pe;if(a===s){Pe=null;break}var d=a.sibling;if(d!==null){d.return=a.return,Pe=d;break}Pe=a.return}}function zy(s){for(;Pe!==null;){var a=Pe;try{switch(a.tag){case 0:case 11:case 15:var d=a.return;try{nu(4,a)}catch(Y){Pt(a,d,Y)}break;case 1:var m=a.stateNode;if(typeof m.componentDidMount=="function"){var x=a.return;try{m.componentDidMount()}catch(Y){Pt(a,x,Y)}}var S=a.return;try{lf(a)}catch(Y){Pt(a,S,Y)}break;case 5:var N=a.return;try{lf(a)}catch(Y){Pt(a,N,Y)}}}catch(Y){Pt(a,a.return,Y)}if(a===s){Pe=null;break}var B=a.sibling;if(B!==null){B.return=a.return,Pe=B;break}Pe=a.return}}var wE=Math.ceil,ru=M.ReactCurrentDispatcher,df=M.ReactCurrentOwner,tr=M.ReactCurrentBatchConfig,tt=0,Kt=null,Dt=null,nn=0,Un=0,Ys=hi(0),Vt=0,ga=null,Ji=0,iu=0,ff=0,ya=null,Tn=null,hf=0,Gs=1/0,Xr=null,su=!1,pf=null,xi=null,ou=!1,wi=null,au=0,va=0,mf=null,lu=-1,uu=0;function xn(){return(tt&6)!==0?Ot():lu!==-1?lu:lu=Ot()}function bi(s){return(s.mode&1)===0?1:(tt&2)!==0&&nn!==0?nn&-nn:rE.transition!==null?(uu===0&&(uu=Rm()),uu):(s=lt,s!==0||(s=window.event,s=s===void 0?16:Um(s.type)),s)}function mr(s,a,d,m){if(50<va)throw va=0,mf=null,Error(n(185));Uo(s,d,m),((tt&2)===0||s!==Kt)&&(s===Kt&&((tt&2)===0&&(iu|=d),Vt===4&&ki(s,nn)),In(s,m),d===1&&tt===0&&(a.mode&1)===0&&(Gs=Ot()+500,Ll&&mi()))}function In(s,a){var d=s.callbackNode;rS(s,a);var m=vl(s,s===Kt?nn:0);if(m===0)d!==null&&Im(d),s.callbackNode=null,s.callbackPriority=0;else if(a=m&-m,s.callbackPriority!==a){if(d!=null&&Im(d),a===1)s.tag===0?nE(Uy.bind(null,s)):jg(Uy.bind(null,s)),XS(function(){(tt&6)===0&&mi()}),d=null;else{switch(Om(m)){case 1:d=Yc;break;case 4:d=Pm;break;case 16:d=pl;break;case 536870912:d=Am;break;default:d=pl}d=Jy(d,By.bind(null,s))}s.callbackPriority=a,s.callbackNode=d}}function By(s,a){if(lu=-1,uu=0,(tt&6)!==0)throw Error(n(327));var d=s.callbackNode;if(Ks()&&s.callbackNode!==d)return null;var m=vl(s,s===Kt?nn:0);if(m===0)return null;if((m&30)!==0||(m&s.expiredLanes)!==0||a)a=cu(s,m);else{a=m;var x=tt;tt|=2;var S=Hy();(Kt!==s||nn!==a)&&(Xr=null,Gs=Ot()+500,Xi(s,a));do try{SE();break}catch(B){Wy(s,B)}while(!0);Ad(),ru.current=S,tt=x,Dt!==null?a=0:(Kt=null,nn=0,a=Vt)}if(a!==0){if(a===2&&(x=Gc(s),x!==0&&(m=x,a=gf(s,x))),a===1)throw d=ga,Xi(s,0),ki(s,m),In(s,Ot()),d;if(a===6)ki(s,m);else{if(x=s.current.alternate,(m&30)===0&&!bE(x)&&(a=cu(s,m),a===2&&(S=Gc(s),S!==0&&(m=S,a=gf(s,S))),a===1))throw d=ga,Xi(s,0),ki(s,m),In(s,Ot()),d;switch(s.finishedWork=x,s.finishedLanes=m,a){case 0:case 1:throw Error(n(345));case 2:Zi(s,Tn,Xr);break;case 3:if(ki(s,m),(m&130023424)===m&&(a=hf+500-Ot(),10<a)){if(vl(s,0)!==0)break;if(x=s.suspendedLanes,(x&m)!==m){xn(),s.pingedLanes|=s.suspendedLanes&x;break}s.timeoutHandle=bd(Zi.bind(null,s,Tn,Xr),a);break}Zi(s,Tn,Xr);break;case 4:if(ki(s,m),(m&4194240)===m)break;for(a=s.eventTimes,x=-1;0<m;){var N=31-ur(m);S=1<<N,N=a[N],N>x&&(x=N),m&=~S}if(m=x,m=Ot()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*wE(m/1960))-m,10<m){s.timeoutHandle=bd(Zi.bind(null,s,Tn,Xr),m);break}Zi(s,Tn,Xr);break;case 5:Zi(s,Tn,Xr);break;default:throw Error(n(329))}}}return In(s,Ot()),s.callbackNode===d?By.bind(null,s):null}function gf(s,a){var d=ya;return s.current.memoizedState.isDehydrated&&(Xi(s,a).flags|=256),s=cu(s,a),s!==2&&(a=Tn,Tn=d,a!==null&&yf(a)),s}function yf(s){Tn===null?Tn=s:Tn.push.apply(Tn,s)}function bE(s){for(var a=s;;){if(a.flags&16384){var d=a.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var m=0;m<d.length;m++){var x=d[m],S=x.getSnapshot;x=x.value;try{if(!cr(S(),x))return!1}catch{return!1}}}if(d=a.child,a.subtreeFlags&16384&&d!==null)d.return=a,a=d;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ki(s,a){for(a&=~ff,a&=~iu,s.suspendedLanes|=a,s.pingedLanes&=~a,s=s.expirationTimes;0<a;){var d=31-ur(a),m=1<<d;s[d]=-1,a&=~m}}function Uy(s){if((tt&6)!==0)throw Error(n(327));Ks();var a=vl(s,0);if((a&1)===0)return In(s,Ot()),null;var d=cu(s,a);if(s.tag!==0&&d===2){var m=Gc(s);m!==0&&(a=m,d=gf(s,m))}if(d===1)throw d=ga,Xi(s,0),ki(s,a),In(s,Ot()),d;if(d===6)throw Error(n(345));return s.finishedWork=s.current.alternate,s.finishedLanes=a,Zi(s,Tn,Xr),In(s,Ot()),null}function vf(s,a){var d=tt;tt|=1;try{return s(a)}finally{tt=d,tt===0&&(Gs=Ot()+500,Ll&&mi())}}function Qi(s){wi!==null&&wi.tag===0&&(tt&6)===0&&Ks();var a=tt;tt|=1;var d=tr.transition,m=lt;try{if(tr.transition=null,lt=1,s)return s()}finally{lt=m,tr.transition=d,tt=a,(tt&6)===0&&mi()}}function xf(){Un=Ys.current,xt(Ys)}function Xi(s,a){s.finishedWork=null,s.finishedLanes=0;var d=s.timeoutHandle;if(d!==-1&&(s.timeoutHandle=-1,QS(d)),Dt!==null)for(d=Dt.return;d!==null;){var m=d;switch(jd(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&Ml();break;case 3:Hs(),xt(Cn),xt(on),zd();break;case 5:$d(m);break;case 4:Hs();break;case 13:xt(Ct);break;case 19:xt(Ct);break;case 10:Rd(m.type._context);break;case 22:case 23:xf()}d=d.return}if(Kt=s,Dt=s=Si(s.current,null),nn=Un=a,Vt=0,ga=null,ff=iu=Ji=0,Tn=ya=null,Yi!==null){for(a=0;a<Yi.length;a++)if(d=Yi[a],m=d.interleaved,m!==null){d.interleaved=null;var x=m.next,S=d.pending;if(S!==null){var N=S.next;S.next=x,m.next=N}d.pending=m}Yi=null}return s}function Wy(s,a){do{var d=Dt;try{if(Ad(),Yl.current=Ql,Gl){for(var m=jt.memoizedState;m!==null;){var x=m.queue;x!==null&&(x.pending=null),m=m.next}Gl=!1}if(Ki=0,Gt=Ht=jt=null,ca=!1,da=0,df.current=null,d===null||d.return===null){Vt=1,ga=a,Dt=null;break}e:{var S=s,N=d.return,B=d,Y=a;if(a=nn,B.flags|=32768,Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var ue=Y,ve=B,xe=ve.tag;if((ve.mode&1)===0&&(xe===0||xe===11||xe===15)){var ge=ve.alternate;ge?(ve.updateQueue=ge.updateQueue,ve.memoizedState=ge.memoizedState,ve.lanes=ge.lanes):(ve.updateQueue=null,ve.memoizedState=null)}var Te=py(N);if(Te!==null){Te.flags&=-257,my(Te,N,B,S,a),Te.mode&1&&hy(S,ue,a),a=Te,Y=ue;var Ae=a.updateQueue;if(Ae===null){var Re=new Set;Re.add(Y),a.updateQueue=Re}else Ae.add(Y);break e}else{if((a&1)===0){hy(S,ue,a),wf();break e}Y=Error(n(426))}}else if(St&&B.mode&1){var Mt=py(N);if(Mt!==null){(Mt.flags&65536)===0&&(Mt.flags|=256),my(Mt,N,B,S,a),Id(Vs(Y,B));break e}}S=Y=Vs(Y,B),Vt!==4&&(Vt=2),ya===null?ya=[S]:ya.push(S),S=N;do{switch(S.tag){case 3:S.flags|=65536,a&=-a,S.lanes|=a;var oe=dy(S,Y,a);$g(S,oe);break e;case 1:B=Y;var X=S.type,le=S.stateNode;if((S.flags&128)===0&&(typeof X.getDerivedStateFromError=="function"||le!==null&&typeof le.componentDidCatch=="function"&&(xi===null||!xi.has(le)))){S.flags|=65536,a&=-a,S.lanes|=a;var Se=fy(S,B,a);$g(S,Se);break e}}S=S.return}while(S!==null)}qy(d)}catch(Me){a=Me,Dt===d&&d!==null&&(Dt=d=d.return);continue}break}while(!0)}function Hy(){var s=ru.current;return ru.current=Ql,s===null?Ql:s}function wf(){(Vt===0||Vt===3||Vt===2)&&(Vt=4),Kt===null||(Ji&268435455)===0&&(iu&268435455)===0||ki(Kt,nn)}function cu(s,a){var d=tt;tt|=2;var m=Hy();(Kt!==s||nn!==a)&&(Xr=null,Xi(s,a));do try{kE();break}catch(x){Wy(s,x)}while(!0);if(Ad(),tt=d,ru.current=m,Dt!==null)throw Error(n(261));return Kt=null,nn=0,Vt}function kE(){for(;Dt!==null;)Vy(Dt)}function SE(){for(;Dt!==null&&!G1();)Vy(Dt)}function Vy(s){var a=Ky(s.alternate,s,Un);s.memoizedProps=s.pendingProps,a===null?qy(s):Dt=a,df.current=null}function qy(s){var a=s;do{var d=a.alternate;if(s=a.return,(a.flags&32768)===0){if(d=mE(d,a,Un),d!==null){Dt=d;return}}else{if(d=gE(d,a),d!==null){d.flags&=32767,Dt=d;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Vt=6,Dt=null;return}}if(a=a.sibling,a!==null){Dt=a;return}Dt=a=s}while(a!==null);Vt===0&&(Vt=5)}function Zi(s,a,d){var m=lt,x=tr.transition;try{tr.transition=null,lt=1,EE(s,a,d,m)}finally{tr.transition=x,lt=m}return null}function EE(s,a,d,m){do Ks();while(wi!==null);if((tt&6)!==0)throw Error(n(327));d=s.finishedWork;var x=s.finishedLanes;if(d===null)return null;if(s.finishedWork=null,s.finishedLanes=0,d===s.current)throw Error(n(177));s.callbackNode=null,s.callbackPriority=0;var S=d.lanes|d.childLanes;if(iS(s,S),s===Kt&&(Dt=Kt=null,nn=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||ou||(ou=!0,Jy(pl,function(){return Ks(),null})),S=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||S){S=tr.transition,tr.transition=null;var N=lt;lt=1;var B=tt;tt|=4,df.current=null,vE(s,d),Dy(d,s),HS(xd),bl=!!vd,xd=vd=null,s.current=d,xE(d),K1(),tt=B,lt=N,tr.transition=S}else s.current=d;if(ou&&(ou=!1,wi=s,au=x),S=s.pendingLanes,S===0&&(xi=null),X1(d.stateNode),In(s,Ot()),a!==null)for(m=s.onRecoverableError,d=0;d<a.length;d++)x=a[d],m(x.value,{componentStack:x.stack,digest:x.digest});if(su)throw su=!1,s=pf,pf=null,s;return(au&1)!==0&&s.tag!==0&&Ks(),S=s.pendingLanes,(S&1)!==0?s===mf?va++:(va=0,mf=s):va=0,mi(),null}function Ks(){if(wi!==null){var s=Om(au),a=tr.transition,d=lt;try{if(tr.transition=null,lt=16>s?16:s,wi===null)var m=!1;else{if(s=wi,wi=null,au=0,(tt&6)!==0)throw Error(n(331));var x=tt;for(tt|=4,Pe=s.current;Pe!==null;){var S=Pe,N=S.child;if((Pe.flags&16)!==0){var B=S.deletions;if(B!==null){for(var Y=0;Y<B.length;Y++){var ue=B[Y];for(Pe=ue;Pe!==null;){var ve=Pe;switch(ve.tag){case 0:case 11:case 15:ma(8,ve,S)}var xe=ve.child;if(xe!==null)xe.return=ve,Pe=xe;else for(;Pe!==null;){ve=Pe;var ge=ve.sibling,Te=ve.return;if(Py(ve),ve===ue){Pe=null;break}if(ge!==null){ge.return=Te,Pe=ge;break}Pe=Te}}}var Ae=S.alternate;if(Ae!==null){var Re=Ae.child;if(Re!==null){Ae.child=null;do{var Mt=Re.sibling;Re.sibling=null,Re=Mt}while(Re!==null)}}Pe=S}}if((S.subtreeFlags&2064)!==0&&N!==null)N.return=S,Pe=N;else e:for(;Pe!==null;){if(S=Pe,(S.flags&2048)!==0)switch(S.tag){case 0:case 11:case 15:ma(9,S,S.return)}var oe=S.sibling;if(oe!==null){oe.return=S.return,Pe=oe;break e}Pe=S.return}}var X=s.current;for(Pe=X;Pe!==null;){N=Pe;var le=N.child;if((N.subtreeFlags&2064)!==0&&le!==null)le.return=N,Pe=le;else e:for(N=X;Pe!==null;){if(B=Pe,(B.flags&2048)!==0)try{switch(B.tag){case 0:case 11:case 15:nu(9,B)}}catch(Me){Pt(B,B.return,Me)}if(B===N){Pe=null;break e}var Se=B.sibling;if(Se!==null){Se.return=B.return,Pe=Se;break e}Pe=B.return}}if(tt=x,mi(),Cr&&typeof Cr.onPostCommitFiberRoot=="function")try{Cr.onPostCommitFiberRoot(ml,s)}catch{}m=!0}return m}finally{lt=d,tr.transition=a}}return!1}function Yy(s,a,d){a=Vs(d,a),a=dy(s,a,1),s=yi(s,a,1),a=xn(),s!==null&&(Uo(s,1,a),In(s,a))}function Pt(s,a,d){if(s.tag===3)Yy(s,s,d);else for(;a!==null;){if(a.tag===3){Yy(a,s,d);break}else if(a.tag===1){var m=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(xi===null||!xi.has(m))){s=Vs(d,s),s=fy(a,s,1),a=yi(a,s,1),s=xn(),a!==null&&(Uo(a,1,s),In(a,s));break}}a=a.return}}function _E(s,a,d){var m=s.pingCache;m!==null&&m.delete(a),a=xn(),s.pingedLanes|=s.suspendedLanes&d,Kt===s&&(nn&d)===d&&(Vt===4||Vt===3&&(nn&130023424)===nn&&500>Ot()-hf?Xi(s,0):ff|=d),In(s,a)}function Gy(s,a){a===0&&((s.mode&1)===0?a=1:(a=yl,yl<<=1,(yl&130023424)===0&&(yl=4194304)));var d=xn();s=Kr(s,a),s!==null&&(Uo(s,a,d),In(s,d))}function CE(s){var a=s.memoizedState,d=0;a!==null&&(d=a.retryLane),Gy(s,d)}function jE(s,a){var d=0;switch(s.tag){case 13:var m=s.stateNode,x=s.memoizedState;x!==null&&(d=x.retryLane);break;case 19:m=s.stateNode;break;default:throw Error(n(314))}m!==null&&m.delete(a),Gy(s,d)}var Ky;Ky=function(s,a,d){if(s!==null)if(s.memoizedProps!==a.pendingProps||Cn.current)Nn=!0;else{if((s.lanes&d)===0&&(a.flags&128)===0)return Nn=!1,pE(s,a,d);Nn=(s.flags&131072)!==0}else Nn=!1,St&&(a.flags&1048576)!==0&&Ng(a,Fl,a.index);switch(a.lanes=0,a.tag){case 2:var m=a.type;eu(s,a),s=a.pendingProps;var x=Ls(a,on.current);Ws(a,d),x=Wd(null,a,m,s,x,d);var S=Hd();return a.flags|=1,typeof x=="object"&&x!==null&&typeof x.render=="function"&&x.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,jn(m)?(S=!0,Dl(a)):S=!1,a.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,Dd(a),x.updater=Xl,a.stateNode=x,x._reactInternals=a,Jd(a,m,s,d),a=ef(null,a,m,!0,S,d)):(a.tag=0,St&&S&&Cd(a),vn(null,a,x,d),a=a.child),a;case 16:m=a.elementType;e:{switch(eu(s,a),s=a.pendingProps,x=m._init,m=x(m._payload),a.type=m,x=a.tag=TE(m),s=fr(m,s),x){case 0:a=Zd(null,a,m,s,d);break e;case 1:a=by(null,a,m,s,d);break e;case 11:a=gy(null,a,m,s,d);break e;case 14:a=yy(null,a,m,fr(m.type,s),d);break e}throw Error(n(306,m,""))}return a;case 0:return m=a.type,x=a.pendingProps,x=a.elementType===m?x:fr(m,x),Zd(s,a,m,x,d);case 1:return m=a.type,x=a.pendingProps,x=a.elementType===m?x:fr(m,x),by(s,a,m,x,d);case 3:e:{if(ky(a),s===null)throw Error(n(387));m=a.pendingProps,S=a.memoizedState,x=S.element,Lg(s,a),Vl(a,m,null,d);var N=a.memoizedState;if(m=N.element,S.isDehydrated)if(S={element:m,isDehydrated:!1,cache:N.cache,pendingSuspenseBoundaries:N.pendingSuspenseBoundaries,transitions:N.transitions},a.updateQueue.baseState=S,a.memoizedState=S,a.flags&256){x=Vs(Error(n(423)),a),a=Sy(s,a,m,d,x);break e}else if(m!==x){x=Vs(Error(n(424)),a),a=Sy(s,a,m,d,x);break e}else for(Bn=fi(a.stateNode.containerInfo.firstChild),zn=a,St=!0,dr=null,d=Mg(a,null,m,d),a.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(zs(),m===x){a=Qr(s,a,d);break e}vn(s,a,m,d)}a=a.child}return a;case 5:return zg(a),s===null&&Td(a),m=a.type,x=a.pendingProps,S=s!==null?s.memoizedProps:null,N=x.children,wd(m,x)?N=null:S!==null&&wd(m,S)&&(a.flags|=32),wy(s,a),vn(s,a,N,d),a.child;case 6:return s===null&&Td(a),null;case 13:return Ey(s,a,d);case 4:return Ld(a,a.stateNode.containerInfo),m=a.pendingProps,s===null?a.child=Bs(a,null,m,d):vn(s,a,m,d),a.child;case 11:return m=a.type,x=a.pendingProps,x=a.elementType===m?x:fr(m,x),gy(s,a,m,x,d);case 7:return vn(s,a,a.pendingProps,d),a.child;case 8:return vn(s,a,a.pendingProps.children,d),a.child;case 12:return vn(s,a,a.pendingProps.children,d),a.child;case 10:e:{if(m=a.type._context,x=a.pendingProps,S=a.memoizedProps,N=x.value,pt(Ul,m._currentValue),m._currentValue=N,S!==null)if(cr(S.value,N)){if(S.children===x.children&&!Cn.current){a=Qr(s,a,d);break e}}else for(S=a.child,S!==null&&(S.return=a);S!==null;){var B=S.dependencies;if(B!==null){N=S.child;for(var Y=B.firstContext;Y!==null;){if(Y.context===m){if(S.tag===1){Y=Jr(-1,d&-d),Y.tag=2;var ue=S.updateQueue;if(ue!==null){ue=ue.shared;var ve=ue.pending;ve===null?Y.next=Y:(Y.next=ve.next,ve.next=Y),ue.pending=Y}}S.lanes|=d,Y=S.alternate,Y!==null&&(Y.lanes|=d),Od(S.return,d,a),B.lanes|=d;break}Y=Y.next}}else if(S.tag===10)N=S.type===a.type?null:S.child;else if(S.tag===18){if(N=S.return,N===null)throw Error(n(341));N.lanes|=d,B=N.alternate,B!==null&&(B.lanes|=d),Od(N,d,a),N=S.sibling}else N=S.child;if(N!==null)N.return=S;else for(N=S;N!==null;){if(N===a){N=null;break}if(S=N.sibling,S!==null){S.return=N.return,N=S;break}N=N.return}S=N}vn(s,a,x.children,d),a=a.child}return a;case 9:return x=a.type,m=a.pendingProps.children,Ws(a,d),x=Zn(x),m=m(x),a.flags|=1,vn(s,a,m,d),a.child;case 14:return m=a.type,x=fr(m,a.pendingProps),x=fr(m.type,x),yy(s,a,m,x,d);case 15:return vy(s,a,a.type,a.pendingProps,d);case 17:return m=a.type,x=a.pendingProps,x=a.elementType===m?x:fr(m,x),eu(s,a),a.tag=1,jn(m)?(s=!0,Dl(a)):s=!1,Ws(a,d),uy(a,m,x),Jd(a,m,x,d),ef(null,a,m,!0,s,d);case 19:return Cy(s,a,d);case 22:return xy(s,a,d)}throw Error(n(156,a.tag))};function Jy(s,a){return Tm(s,a)}function NE(s,a,d,m){this.tag=s,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nr(s,a,d,m){return new NE(s,a,d,m)}function bf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function TE(s){if(typeof s=="function")return bf(s)?1:0;if(s!=null){if(s=s.$$typeof,s===Q)return 11;if(s===$)return 14}return 2}function Si(s,a){var d=s.alternate;return d===null?(d=nr(s.tag,a,s.key,s.mode),d.elementType=s.elementType,d.type=s.type,d.stateNode=s.stateNode,d.alternate=s,s.alternate=d):(d.pendingProps=a,d.type=s.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=s.flags&14680064,d.childLanes=s.childLanes,d.lanes=s.lanes,d.child=s.child,d.memoizedProps=s.memoizedProps,d.memoizedState=s.memoizedState,d.updateQueue=s.updateQueue,a=s.dependencies,d.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},d.sibling=s.sibling,d.index=s.index,d.ref=s.ref,d}function du(s,a,d,m,x,S){var N=2;if(m=s,typeof s=="function")bf(s)&&(N=1);else if(typeof s=="string")N=5;else e:switch(s){case z:return es(d.children,x,S,a);case F:N=8,x|=8;break;case V:return s=nr(12,d,a,x|2),s.elementType=V,s.lanes=S,s;case H:return s=nr(13,d,a,x),s.elementType=H,s.lanes=S,s;case q:return s=nr(19,d,a,x),s.elementType=q,s.lanes=S,s;case ie:return fu(d,x,S,a);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case A:N=10;break e;case O:N=9;break e;case Q:N=11;break e;case $:N=14;break e;case J:N=16,m=null;break e}throw Error(n(130,s==null?s:typeof s,""))}return a=nr(N,d,a,x),a.elementType=s,a.type=m,a.lanes=S,a}function es(s,a,d,m){return s=nr(7,s,m,a),s.lanes=d,s}function fu(s,a,d,m){return s=nr(22,s,m,a),s.elementType=ie,s.lanes=d,s.stateNode={isHidden:!1},s}function kf(s,a,d){return s=nr(6,s,null,a),s.lanes=d,s}function Sf(s,a,d){return a=nr(4,s.children!==null?s.children:[],s.key,a),a.lanes=d,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}function IE(s,a,d,m,x){this.tag=a,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kc(0),this.expirationTimes=Kc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kc(0),this.identifierPrefix=m,this.onRecoverableError=x,this.mutableSourceEagerHydrationData=null}function Ef(s,a,d,m,x,S,N,B,Y){return s=new IE(s,a,d,B,Y),a===1?(a=1,S===!0&&(a|=8)):a=0,S=nr(3,null,null,a),s.current=S,S.stateNode=s,S.memoizedState={element:m,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dd(S),s}function PE(s,a,d){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:R,key:m==null?null:""+m,children:s,containerInfo:a,implementation:d}}function Qy(s){if(!s)return pi;s=s._reactInternals;e:{if(Ui(s)!==s||s.tag!==1)throw Error(n(170));var a=s;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(jn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(n(171))}if(s.tag===1){var d=s.type;if(jn(d))return _g(s,d,a)}return a}function Xy(s,a,d,m,x,S,N,B,Y){return s=Ef(d,m,!0,s,x,S,N,B,Y),s.context=Qy(null),d=s.current,m=xn(),x=bi(d),S=Jr(m,x),S.callback=a??null,yi(d,S,x),s.current.lanes=x,Uo(s,x,m),In(s,m),s}function hu(s,a,d,m){var x=a.current,S=xn(),N=bi(x);return d=Qy(d),a.context===null?a.context=d:a.pendingContext=d,a=Jr(S,N),a.payload={element:s},m=m===void 0?null:m,m!==null&&(a.callback=m),s=yi(x,a,N),s!==null&&(mr(s,x,N,S),Hl(s,x,N)),N}function pu(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function Zy(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var d=s.retryLane;s.retryLane=d!==0&&d<a?d:a}}function _f(s,a){Zy(s,a),(s=s.alternate)&&Zy(s,a)}function AE(){return null}var ev=typeof reportError=="function"?reportError:function(s){console.error(s)};function Cf(s){this._internalRoot=s}mu.prototype.render=Cf.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(n(409));hu(s,a,null,null)},mu.prototype.unmount=Cf.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;Qi(function(){hu(null,s,null,null)}),a[Vr]=null}};function mu(s){this._internalRoot=s}mu.prototype.unstable_scheduleHydration=function(s){if(s){var a=Lm();s={blockedOn:null,target:s,priority:a};for(var d=0;d<ui.length&&a!==0&&a<ui[d].priority;d++);ui.splice(d,0,s),d===0&&zm(s)}};function jf(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function gu(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function tv(){}function RE(s,a,d,m,x){if(x){if(typeof m=="function"){var S=m;m=function(){var ue=pu(N);S.call(ue)}}var N=Xy(a,m,s,0,null,!1,!1,"",tv);return s._reactRootContainer=N,s[Vr]=N.current,na(s.nodeType===8?s.parentNode:s),Qi(),N}for(;x=s.lastChild;)s.removeChild(x);if(typeof m=="function"){var B=m;m=function(){var ue=pu(Y);B.call(ue)}}var Y=Ef(s,0,!1,null,null,!1,!1,"",tv);return s._reactRootContainer=Y,s[Vr]=Y.current,na(s.nodeType===8?s.parentNode:s),Qi(function(){hu(a,Y,d,m)}),Y}function yu(s,a,d,m,x){var S=d._reactRootContainer;if(S){var N=S;if(typeof x=="function"){var B=x;x=function(){var Y=pu(N);B.call(Y)}}hu(a,N,s,x)}else N=RE(d,a,s,x,m);return pu(N)}Mm=function(s){switch(s.tag){case 3:var a=s.stateNode;if(a.current.memoizedState.isDehydrated){var d=Bo(a.pendingLanes);d!==0&&(Jc(a,d|1),In(a,Ot()),(tt&6)===0&&(Gs=Ot()+500,mi()))}break;case 13:Qi(function(){var m=Kr(s,1);if(m!==null){var x=xn();mr(m,s,1,x)}}),_f(s,1)}},Qc=function(s){if(s.tag===13){var a=Kr(s,134217728);if(a!==null){var d=xn();mr(a,s,134217728,d)}_f(s,134217728)}},Dm=function(s){if(s.tag===13){var a=bi(s),d=Kr(s,a);if(d!==null){var m=xn();mr(d,s,a,m)}_f(s,a)}},Lm=function(){return lt},$m=function(s,a){var d=lt;try{return lt=s,a()}finally{lt=d}},at=function(s,a,d){switch(a){case"input":if(ut(s,d),a=d.name,d.type==="radio"&&a!=null){for(d=s;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<d.length;a++){var m=d[a];if(m!==s&&m.form===s.form){var x=Ol(m);if(!x)throw Error(n(90));he(m),ut(m,x)}}}break;case"textarea":P(s,d);break;case"select":a=d.value,a!=null&&de(s,!!d.multiple,a,!1)}},kt=vf,rn=Qi;var OE={usingClientEntryPoint:!1,Events:[sa,Ms,Ol,st,rt,vf]},xa={findFiberByHostInstance:Wi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ME={bundleType:xa.bundleType,version:xa.version,rendererPackageName:xa.rendererPackageName,rendererConfig:xa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:M.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=jm(s),s===null?null:s.stateNode},findFiberByHostInstance:xa.findFiberByHostInstance||AE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vu.isDisabled&&vu.supportsFiber)try{ml=vu.inject(ME),Cr=vu}catch{}}return Pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OE,Pn.createPortal=function(s,a){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jf(a))throw Error(n(200));return PE(s,a,null,d)},Pn.createRoot=function(s,a){if(!jf(s))throw Error(n(299));var d=!1,m="",x=ev;return a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),a=Ef(s,1,!1,null,null,d,!1,m,x),s[Vr]=a.current,na(s.nodeType===8?s.parentNode:s),new Cf(a)},Pn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=jm(a),s=s===null?null:s.stateNode,s},Pn.flushSync=function(s){return Qi(s)},Pn.hydrate=function(s,a,d){if(!gu(a))throw Error(n(200));return yu(null,s,a,!0,d)},Pn.hydrateRoot=function(s,a,d){if(!jf(s))throw Error(n(405));var m=d!=null&&d.hydratedSources||null,x=!1,S="",N=ev;if(d!=null&&(d.unstable_strictMode===!0&&(x=!0),d.identifierPrefix!==void 0&&(S=d.identifierPrefix),d.onRecoverableError!==void 0&&(N=d.onRecoverableError)),a=Xy(a,null,s,1,d??null,x,!1,S,N),s[Vr]=a.current,na(s),m)for(s=0;s<m.length;s++)d=m[s],x=d._getVersion,x=x(d._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[d,x]:a.mutableSourceEagerHydrationData.push(d,x);return new mu(a)},Pn.render=function(s,a,d){if(!gu(a))throw Error(n(200));return yu(null,s,a,!1,d)},Pn.unmountComponentAtNode=function(s){if(!gu(s))throw Error(n(40));return s._reactRootContainer?(Qi(function(){yu(null,null,s,!1,function(){s._reactRootContainer=null,s[Vr]=null})}),!0):!1},Pn.unstable_batchedUpdates=vf,Pn.unstable_renderSubtreeIntoContainer=function(s,a,d,m){if(!gu(d))throw Error(n(200));if(s==null||s._reactInternals===void 0)throw Error(n(38));return yu(s,a,d,!1,m)},Pn.version="18.3.1-next-f1338f8080-20240426",Pn}var uv;function tw(){if(uv)return If.exports;uv=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),If.exports=HE(),If.exports}var cv;function VE(){if(cv)return xu;cv=1;var e=tw();return xu.createRoot=e.createRoot,xu.hydrateRoot=e.hydrateRoot,xu}var qE=VE();const YE=To(qE);var qn=tw();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wa(){return Wa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wa.apply(this,arguments)}var Ri;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ri||(Ri={}));const dv="popstate";function GE(e){e===void 0&&(e={});function t(i,o){let{pathname:l="/",search:u="",hash:c=""}=bs(i.location.hash.substr(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),jh("",{pathname:l,search:u,hash:c},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){let l=i.document.querySelector("base"),u="";if(l&&l.getAttribute("href")){let c=i.location.href,f=c.indexOf("#");u=f===-1?c:c.slice(0,f)}return u+"#"+(typeof o=="string"?o:Yu(o))}function r(i,o){Cp(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return JE(t,n,r,e)}function Nt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Cp(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function KE(){return Math.random().toString(36).substr(2,8)}function fv(e,t){return{usr:e.state,key:e.key,idx:t}}function jh(e,t,n,r){return n===void 0&&(n=null),Wa({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?bs(t):t,{state:n,key:t&&t.key||r||KE()})}function Yu(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function bs(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function JE(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,l=i.history,u=Ri.Pop,c=null,f=h();f==null&&(f=0,l.replaceState(Wa({},l.state,{idx:f}),""));function h(){return(l.state||{idx:null}).idx}function p(){u=Ri.Pop;let _=h(),E=_==null?null:_-f;f=_,c&&c({action:u,location:w.location,delta:E})}function y(_,E){u=Ri.Push;let j=jh(w.location,_,E);n&&n(j,_),f=h()+1;let C=fv(j,f),M=w.createHref(j);try{l.pushState(C,"",M)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;i.location.assign(M)}o&&c&&c({action:u,location:w.location,delta:1})}function v(_,E){u=Ri.Replace;let j=jh(w.location,_,E);n&&n(j,_),f=h();let C=fv(j,f),M=w.createHref(j);l.replaceState(C,"",M),o&&c&&c({action:u,location:w.location,delta:0})}function b(_){let E=i.location.origin!=="null"?i.location.origin:i.location.href,j=typeof _=="string"?_:Yu(_);return j=j.replace(/ $/,"%20"),Nt(E,"No window.location.(origin|href) available to create URL for href: "+j),new URL(j,E)}let w={get action(){return u},get location(){return e(i,l)},listen(_){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(dv,p),c=_,()=>{i.removeEventListener(dv,p),c=null}},createHref(_){return t(i,_)},createURL:b,encodeLocation(_){let E=b(_);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:y,replace:v,go(_){return l.go(_)}};return w}var hv;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(hv||(hv={}));function QE(e,t,n){return n===void 0&&(n="/"),XE(e,t,n)}function XE(e,t,n,r){let i=typeof t=="string"?bs(t):t,o=So(i.pathname||"/",n);if(o==null)return null;let l=nw(e);ZE(l);let u=null;for(let c=0;u==null&&c<l.length;++c){let f=c_(o);u=l_(l[c],f)}return u}function nw(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,l,u)=>{let c={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};c.relativePath.startsWith("/")&&(Nt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let f=Mi([r,c.relativePath]),h=n.concat(c);o.children&&o.children.length>0&&(Nt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),nw(o.children,t,h,f)),!(o.path==null&&!o.index)&&t.push({path:f,score:o_(f,o.index),routesMeta:h})};return e.forEach((o,l)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))i(o,l);else for(let c of rw(o.path))i(o,l,c)}),t}function rw(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let l=rw(r.join("/")),u=[];return u.push(...l.map(c=>c===""?o:[o,c].join("/"))),i&&u.push(...l),u.map(c=>e.startsWith("/")&&c===""?"/":c)}function ZE(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:a_(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const e_=/^:[\w-]+$/,t_=3,n_=2,r_=1,i_=10,s_=-2,pv=e=>e==="*";function o_(e,t){let n=e.split("/"),r=n.length;return n.some(pv)&&(r+=s_),t&&(r+=n_),n.filter(i=>!pv(i)).reduce((i,o)=>i+(e_.test(o)?t_:o===""?r_:i_),r)}function a_(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function l_(e,t,n){let{routesMeta:r}=e,i={},o="/",l=[];for(let u=0;u<r.length;++u){let c=r[u],f=u===r.length-1,h=o==="/"?t:t.slice(o.length)||"/",p=Nh({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},h),y=c.route;if(!p)return null;Object.assign(i,p.params),l.push({params:i,pathname:Mi([o,p.pathname]),pathnameBase:p_(Mi([o,p.pathnameBase])),route:y}),p.pathnameBase!=="/"&&(o=Mi([o,p.pathnameBase]))}return l}function Nh(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=u_(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],l=o.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((f,h,p)=>{let{paramName:y,isOptional:v}=h;if(y==="*"){let w=u[p]||"";l=o.slice(0,o.length-w.length).replace(/(.)\/+$/,"$1")}const b=u[p];return v&&!b?f[y]=void 0:f[y]=(b||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:e}}function u_(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Cp(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,c)=>(r.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function c_(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Cp(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function So(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function d_(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?bs(e):e;return{pathname:n?n.startsWith("/")?n:f_(n,t):t,search:m_(r),hash:g_(i)}}function f_(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Rf(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function h_(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function jp(e,t){let n=h_(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Np(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=bs(e):(i=Wa({},e),Nt(!i.pathname||!i.pathname.includes("?"),Rf("?","pathname","search",i)),Nt(!i.pathname||!i.pathname.includes("#"),Rf("#","pathname","hash",i)),Nt(!i.search||!i.search.includes("#"),Rf("#","search","hash",i)));let o=e===""||i.pathname==="",l=o?"/":i.pathname,u;if(l==null)u=n;else{let p=t.length-1;if(!r&&l.startsWith("..")){let y=l.split("/");for(;y[0]==="..";)y.shift(),p-=1;i.pathname=y.join("/")}u=p>=0?t[p]:"/"}let c=d_(i,u),f=l&&l!=="/"&&l.endsWith("/"),h=(o||l===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(f||h)&&(c.pathname+="/"),c}const Mi=e=>e.join("/").replace(/\/\/+/g,"/"),p_=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),m_=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,g_=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function y_(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const iw=["post","put","patch","delete"];new Set(iw);const v_=["get",...iw];new Set(v_);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ha(){return Ha=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ha.apply(this,arguments)}const yc=k.createContext(null),sw=k.createContext(null),ni=k.createContext(null),vc=k.createContext(null),ri=k.createContext({outlet:null,matches:[],isDataRoute:!1}),ow=k.createContext(null);function x_(e,t){let{relative:n}=t===void 0?{}:t;Io()||Nt(!1);let{basename:r,navigator:i}=k.useContext(ni),{hash:o,pathname:l,search:u}=xc(e,{relative:n}),c=l;return r!=="/"&&(c=l==="/"?r:Mi([r,l])),i.createHref({pathname:c,search:u,hash:o})}function Io(){return k.useContext(vc)!=null}function ii(){return Io()||Nt(!1),k.useContext(vc).location}function aw(e){k.useContext(ni).static||k.useLayoutEffect(e)}function Tp(){let{isDataRoute:e}=k.useContext(ri);return e?O_():w_()}function w_(){Io()||Nt(!1);let e=k.useContext(yc),{basename:t,future:n,navigator:r}=k.useContext(ni),{matches:i}=k.useContext(ri),{pathname:o}=ii(),l=JSON.stringify(jp(i,n.v7_relativeSplatPath)),u=k.useRef(!1);return aw(()=>{u.current=!0}),k.useCallback(function(f,h){if(h===void 0&&(h={}),!u.current)return;if(typeof f=="number"){r.go(f);return}let p=Np(f,JSON.parse(l),o,h.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:Mi([t,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[t,r,l,o,e])}const b_=k.createContext(null);function k_(e){let t=k.useContext(ri).outlet;return t&&k.createElement(b_.Provider,{value:e},t)}function xc(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=k.useContext(ni),{matches:i}=k.useContext(ri),{pathname:o}=ii(),l=JSON.stringify(jp(i,r.v7_relativeSplatPath));return k.useMemo(()=>Np(e,JSON.parse(l),o,n==="path"),[e,l,o,n])}function S_(e,t){return E_(e,t)}function E_(e,t,n,r){Io()||Nt(!1);let{navigator:i}=k.useContext(ni),{matches:o}=k.useContext(ri),l=o[o.length-1],u=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let f=ii(),h;if(t){var p;let _=typeof t=="string"?bs(t):t;c==="/"||(p=_.pathname)!=null&&p.startsWith(c)||Nt(!1),h=_}else h=f;let y=h.pathname||"/",v=y;if(c!=="/"){let _=c.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(_.length).join("/")}let b=QE(e,{pathname:v}),w=T_(b&&b.map(_=>Object.assign({},_,{params:Object.assign({},u,_.params),pathname:Mi([c,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?c:Mi([c,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),o,n,r);return t&&w?k.createElement(vc.Provider,{value:{location:Ha({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Ri.Pop}},w):w}function __(){let e=R_(),t=y_(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},t),n?k.createElement("pre",{style:i},n):null,null)}const C_=k.createElement(__,null);class j_ extends k.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?k.createElement(ri.Provider,{value:this.props.routeContext},k.createElement(ow.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function N_(e){let{routeContext:t,match:n,children:r}=e,i=k.useContext(yc);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(ri.Provider,{value:t},r)}function T_(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let l=e,u=(i=n)==null?void 0:i.errors;if(u!=null){let h=l.findIndex(p=>p.route.id&&(u==null?void 0:u[p.route.id])!==void 0);h>=0||Nt(!1),l=l.slice(0,Math.min(l.length,h+1))}let c=!1,f=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<l.length;h++){let p=l[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(f=h),p.route.id){let{loaderData:y,errors:v}=n,b=p.route.loader&&y[p.route.id]===void 0&&(!v||v[p.route.id]===void 0);if(p.route.lazy||b){c=!0,f>=0?l=l.slice(0,f+1):l=[l[0]];break}}}return l.reduceRight((h,p,y)=>{let v,b=!1,w=null,_=null;n&&(v=u&&p.route.id?u[p.route.id]:void 0,w=p.route.errorElement||C_,c&&(f<0&&y===0?(M_("route-fallback"),b=!0,_=null):f===y&&(b=!0,_=p.route.hydrateFallbackElement||null)));let E=t.concat(l.slice(0,y+1)),j=()=>{let C;return v?C=w:b?C=_:p.route.Component?C=k.createElement(p.route.Component,null):p.route.element?C=p.route.element:C=h,k.createElement(N_,{match:p,routeContext:{outlet:h,matches:E,isDataRoute:n!=null},children:C})};return n&&(p.route.ErrorBoundary||p.route.errorElement||y===0)?k.createElement(j_,{location:n.location,revalidation:n.revalidation,component:w,error:v,children:j(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):j()},null)}var lw=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(lw||{}),uw=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(uw||{});function I_(e){let t=k.useContext(yc);return t||Nt(!1),t}function P_(e){let t=k.useContext(sw);return t||Nt(!1),t}function A_(e){let t=k.useContext(ri);return t||Nt(!1),t}function cw(e){let t=A_(),n=t.matches[t.matches.length-1];return n.route.id||Nt(!1),n.route.id}function R_(){var e;let t=k.useContext(ow),n=P_(),r=cw();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function O_(){let{router:e}=I_(lw.UseNavigateStable),t=cw(uw.UseNavigateStable),n=k.useRef(!1);return aw(()=>{n.current=!0}),k.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,Ha({fromRouteId:t},o)))},[e,t])}const mv={};function M_(e,t,n){mv[e]||(mv[e]=!0)}function D_(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function wc(e){let{to:t,replace:n,state:r,relative:i}=e;Io()||Nt(!1);let{future:o,static:l}=k.useContext(ni),{matches:u}=k.useContext(ri),{pathname:c}=ii(),f=Tp(),h=Np(t,jp(u,o.v7_relativeSplatPath),c,i==="path"),p=JSON.stringify(h);return k.useEffect(()=>f(JSON.parse(p),{replace:n,state:r,relative:i}),[f,p,i,n,r]),null}function dw(e){return k_(e.context)}function wn(e){Nt(!1)}function L_(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Ri.Pop,navigator:o,static:l=!1,future:u}=e;Io()&&Nt(!1);let c=t.replace(/^\/*/,"/"),f=k.useMemo(()=>({basename:c,navigator:o,static:l,future:Ha({v7_relativeSplatPath:!1},u)}),[c,u,o,l]);typeof r=="string"&&(r=bs(r));let{pathname:h="/",search:p="",hash:y="",state:v=null,key:b="default"}=r,w=k.useMemo(()=>{let _=So(h,c);return _==null?null:{location:{pathname:_,search:p,hash:y,state:v,key:b},navigationType:i}},[c,h,p,y,v,b,i]);return w==null?null:k.createElement(ni.Provider,{value:f},k.createElement(vc.Provider,{children:n,value:w}))}function $_(e){let{children:t,location:n}=e;return S_(Th(t),n)}new Promise(()=>{});function Th(e,t){t===void 0&&(t=[]);let n=[];return k.Children.forEach(e,(r,i)=>{if(!k.isValidElement(r))return;let o=[...t,i];if(r.type===k.Fragment){n.push.apply(n,Th(r.props.children,o));return}r.type!==wn&&Nt(!1),!r.props.index||!r.props.children||Nt(!1);let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Th(r.props.children,o)),n.push(l)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gu(){return Gu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gu.apply(this,arguments)}function fw(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function F_(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function z_(e,t){return e.button===0&&(!t||t==="_self")&&!F_(e)}function Ih(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function B_(e,t){let n=Ih(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(o=>{n.append(i,o)})}),n}const U_=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],W_=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],H_="6";try{window.__reactRouterVersion=H_}catch{}const V_=k.createContext({isTransitioning:!1}),q_="startTransition",gv=qu[q_];function Y_(e){let{basename:t,children:n,future:r,window:i}=e,o=k.useRef();o.current==null&&(o.current=GE({window:i,v5Compat:!0}));let l=o.current,[u,c]=k.useState({action:l.action,location:l.location}),{v7_startTransition:f}=r||{},h=k.useCallback(p=>{f&&gv?gv(()=>c(p)):c(p)},[c,f]);return k.useLayoutEffect(()=>l.listen(h),[l,h]),k.useEffect(()=>D_(r),[r]),k.createElement(L_,{basename:t,children:n,location:u.location,navigationType:u.action,navigator:l,future:r})}const G_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",K_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wr=k.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:o,replace:l,state:u,target:c,to:f,preventScrollReset:h,viewTransition:p}=t,y=fw(t,U_),{basename:v}=k.useContext(ni),b,w=!1;if(typeof f=="string"&&K_.test(f)&&(b=f,G_))try{let C=new URL(window.location.href),M=f.startsWith("//")?new URL(C.protocol+f):new URL(f),D=So(M.pathname,v);M.origin===C.origin&&D!=null?f=D+M.search+M.hash:w=!0}catch{}let _=x_(f,{relative:i}),E=Q_(f,{replace:l,state:u,target:c,preventScrollReset:h,relative:i,viewTransition:p});function j(C){r&&r(C),C.defaultPrevented||E(C)}return k.createElement("a",Gu({},y,{href:b||_,onClick:w||o?r:j,ref:n,target:c}))}),yv=k.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:i=!1,className:o="",end:l=!1,style:u,to:c,viewTransition:f,children:h}=t,p=fw(t,W_),y=xc(c,{relative:p.relative}),v=ii(),b=k.useContext(sw),{navigator:w,basename:_}=k.useContext(ni),E=b!=null&&X_(y)&&f===!0,j=w.encodeLocation?w.encodeLocation(y).pathname:y.pathname,C=v.pathname,M=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;i||(C=C.toLowerCase(),M=M?M.toLowerCase():null,j=j.toLowerCase()),M&&_&&(M=So(M,_)||M);const D=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let R=C===j||!l&&C.startsWith(j)&&C.charAt(D)==="/",z=M!=null&&(M===j||!l&&M.startsWith(j)&&M.charAt(j.length)==="/"),F={isActive:R,isPending:z,isTransitioning:E},V=R?r:void 0,A;typeof o=="function"?A=o(F):A=[o,R?"active":null,z?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let O=typeof u=="function"?u(F):u;return k.createElement(wr,Gu({},p,{"aria-current":V,className:A,ref:n,style:O,to:c,viewTransition:f}),typeof h=="function"?h(F):h)});var Ph;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ph||(Ph={}));var vv;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(vv||(vv={}));function J_(e){let t=k.useContext(yc);return t||Nt(!1),t}function Q_(e,t){let{target:n,replace:r,state:i,preventScrollReset:o,relative:l,viewTransition:u}=t===void 0?{}:t,c=Tp(),f=ii(),h=xc(e,{relative:l});return k.useCallback(p=>{if(z_(p,n)){p.preventDefault();let y=r!==void 0?r:Yu(f)===Yu(h);c(e,{replace:y,state:i,preventScrollReset:o,relative:l,viewTransition:u})}},[f,c,h,r,i,n,e,o,l,u])}function Ip(e){let t=k.useRef(Ih(e)),n=k.useRef(!1),r=ii(),i=k.useMemo(()=>B_(r.search,n.current?null:t.current),[r.search]),o=Tp(),l=k.useCallback((u,c)=>{const f=Ih(typeof u=="function"?u(i):u);n.current=!0,o("?"+f,c)},[o,i]);return[i,l]}function X_(e,t){t===void 0&&(t={});let n=k.useContext(V_);n==null&&Nt(!1);let{basename:r}=J_(Ph.useViewTransitionState),i=xc(e,{relative:t.relative});if(!n.isTransitioning)return!1;let o=So(n.currentLocation.pathname,r)||n.currentLocation.pathname,l=So(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Nh(i.pathname,l)!=null||Nh(i.pathname,o)!=null}const hw=typeof document<"u"?Ne.useLayoutEffect:()=>{};var Of;const Z_=(Of=Ne.useInsertionEffect)!==null&&Of!==void 0?Of:hw;function eC(e){const t=k.useRef(null);return Z_(()=>{t.current=e},[e]),k.useCallback((...n)=>{const r=t.current;return r==null?void 0:r(...n)},[])}const Fi=e=>{var t;return(t=e==null?void 0:e.ownerDocument)!==null&&t!==void 0?t:document},hs=e=>e&&"window"in e&&e.window===e?e:Fi(e).defaultView||window;function tC(e){return e!==null&&typeof e=="object"&&"nodeType"in e&&typeof e.nodeType=="number"}function nC(e){return tC(e)&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in e}let rC=!1;function Pp(){return rC}function pw(e,t){if(!Pp())return t&&e?e.contains(t):!1;if(!e||!t)return!1;let n=t;for(;n!==null;){if(n===e)return!0;n.tagName==="SLOT"&&n.assignedSlot?n=n.assignedSlot.parentNode:nC(n)?n=n.host:n=n.parentNode}return!1}const Ah=(e=document)=>{var t;if(!Pp())return e.activeElement;let n=e.activeElement;for(;n&&"shadowRoot"in n&&(!((t=n.shadowRoot)===null||t===void 0)&&t.activeElement);)n=n.shadowRoot.activeElement;return n};function mw(e){return Pp()&&e.target.shadowRoot&&e.composedPath?e.composedPath()[0]:e.target}function gw(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=gw(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function De(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=gw(e))&&(r&&(r+=" "),r+=t);return r}function iC(e){var t;if(typeof window>"u"||window.navigator==null)return!1;let n=(t=window.navigator.userAgentData)===null||t===void 0?void 0:t.brands;return Array.isArray(n)&&n.some(r=>e.test(r.brand))||e.test(window.navigator.userAgent)}function sC(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function yw(e){let t=null;return()=>(t==null&&(t=e()),t)}const oC=yw(function(){return sC(/^Mac/i)}),aC=yw(function(){return iC(/Android/i)});function vw(){let e=k.useRef(new Map),t=k.useCallback((i,o,l,u)=>{let c=u!=null&&u.once?(...f)=>{e.current.delete(l),l(...f)}:l;e.current.set(l,{type:o,eventTarget:i,fn:c,options:u}),i.addEventListener(o,c,u)},[]),n=k.useCallback((i,o,l,u)=>{var c;let f=((c=e.current.get(l))===null||c===void 0?void 0:c.fn)||l;i.removeEventListener(o,f,u),e.current.delete(l)},[]),r=k.useCallback(()=>{e.current.forEach((i,o)=>{n(i.eventTarget,i.type,o,i.options)})},[n]);return k.useEffect(()=>r,[r]),{addGlobalListener:t,removeGlobalListener:n,removeAllGlobalListeners:r}}function lC(e){return e.pointerType===""&&e.isTrusted?!0:aC()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function xw(e){let t=e;return t.nativeEvent=e,t.isDefaultPrevented=()=>t.defaultPrevented,t.isPropagationStopped=()=>t.cancelBubble,t.persist=()=>{},t}function uC(e,t){Object.defineProperty(e,"target",{value:t}),Object.defineProperty(e,"currentTarget",{value:t})}function ww(e){let t=k.useRef({isFocused:!1,observer:null});hw(()=>{const r=t.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]);let n=eC(r=>{e==null||e(r)});return k.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){t.current.isFocused=!0;let i=r.target,o=l=>{if(t.current.isFocused=!1,i.disabled){let u=xw(l);n(u)}t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)};i.addEventListener("focusout",o,{once:!0}),t.current.observer=new MutationObserver(()=>{if(t.current.isFocused&&i.disabled){var l;(l=t.current.observer)===null||l===void 0||l.disconnect();let u=i===document.activeElement?null:document.activeElement;i.dispatchEvent(new FocusEvent("blur",{relatedTarget:u})),i.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:u}))}}),t.current.observer.observe(i,{attributes:!0,attributeFilter:["disabled"]})}},[n])}let cC=!1,tl=null,Rh=new Set,Ia=new Map,gs=!1,Oh=!1;const dC={Tab:!0,Escape:!0};function Ap(e,t){for(let n of Rh)n(e,t)}function fC(e){return!(e.metaKey||!oC()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function Ku(e){gs=!0,fC(e)&&(tl="keyboard",Ap("keyboard",e))}function go(e){tl="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(gs=!0,Ap("pointer",e))}function bw(e){lC(e)&&(gs=!0,tl="virtual")}function kw(e){e.target===window||e.target===document||cC||!e.isTrusted||(!gs&&!Oh&&(tl="virtual",Ap("virtual",e)),gs=!1,Oh=!1)}function Sw(){gs=!1,Oh=!0}function Mh(e){if(typeof window>"u"||typeof document>"u"||Ia.get(hs(e)))return;const t=hs(e),n=Fi(e);let r=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){gs=!0,r.apply(this,arguments)},n.addEventListener("keydown",Ku,!0),n.addEventListener("keyup",Ku,!0),n.addEventListener("click",bw,!0),t.addEventListener("focus",kw,!0),t.addEventListener("blur",Sw,!1),typeof PointerEvent<"u"&&(n.addEventListener("pointerdown",go,!0),n.addEventListener("pointermove",go,!0),n.addEventListener("pointerup",go,!0)),t.addEventListener("beforeunload",()=>{Ew(e)},{once:!0}),Ia.set(t,{focus:r})}const Ew=(e,t)=>{const n=hs(e),r=Fi(e);t&&r.removeEventListener("DOMContentLoaded",t),Ia.has(n)&&(n.HTMLElement.prototype.focus=Ia.get(n).focus,r.removeEventListener("keydown",Ku,!0),r.removeEventListener("keyup",Ku,!0),r.removeEventListener("click",bw,!0),n.removeEventListener("focus",kw,!0),n.removeEventListener("blur",Sw,!1),typeof PointerEvent<"u"&&(r.removeEventListener("pointerdown",go,!0),r.removeEventListener("pointermove",go,!0),r.removeEventListener("pointerup",go,!0)),Ia.delete(n))};function hC(e){const t=Fi(e);let n;return t.readyState!=="loading"?Mh(e):(n=()=>{Mh(e)},t.addEventListener("DOMContentLoaded",n)),()=>Ew(e,n)}typeof document<"u"&&hC();function _w(){return tl!=="pointer"}const pC=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function mC(e,t,n){let r=Fi(n==null?void 0:n.target);const i=typeof window<"u"?hs(n==null?void 0:n.target).HTMLInputElement:HTMLInputElement,o=typeof window<"u"?hs(n==null?void 0:n.target).HTMLTextAreaElement:HTMLTextAreaElement,l=typeof window<"u"?hs(n==null?void 0:n.target).HTMLElement:HTMLElement,u=typeof window<"u"?hs(n==null?void 0:n.target).KeyboardEvent:KeyboardEvent;return e=e||r.activeElement instanceof i&&!pC.has(r.activeElement.type)||r.activeElement instanceof o||r.activeElement instanceof l&&r.activeElement.isContentEditable,!(e&&t==="keyboard"&&n instanceof u&&!dC[n.key])}function gC(e,t,n){Mh(),k.useEffect(()=>{let r=(i,o)=>{mC(!!(n!=null&&n.isTextInput),i,o)&&e(_w())};return Rh.add(r),()=>{Rh.delete(r)}},t)}function yC(e){let{isDisabled:t,onFocus:n,onBlur:r,onFocusChange:i}=e;const o=k.useCallback(c=>{if(c.target===c.currentTarget)return r&&r(c),i&&i(!1),!0},[r,i]),l=ww(o),u=k.useCallback(c=>{const f=Fi(c.target),h=f?Ah(f):Ah();c.target===c.currentTarget&&h===mw(c.nativeEvent)&&(n&&n(c),i&&i(!0),l(c))},[i,n,l]);return{focusProps:{onFocus:!t&&(n||i||r)?u:void 0,onBlur:!t&&(r||i)?o:void 0}}}function vC(e){let{isDisabled:t,onBlurWithin:n,onFocusWithin:r,onFocusWithinChange:i}=e,o=k.useRef({isFocusWithin:!1}),{addGlobalListener:l,removeAllGlobalListeners:u}=vw(),c=k.useCallback(p=>{p.currentTarget.contains(p.target)&&o.current.isFocusWithin&&!p.currentTarget.contains(p.relatedTarget)&&(o.current.isFocusWithin=!1,u(),n&&n(p),i&&i(!1))},[n,i,o,u]),f=ww(c),h=k.useCallback(p=>{if(!p.currentTarget.contains(p.target))return;const y=Fi(p.target),v=Ah(y);if(!o.current.isFocusWithin&&v===mw(p.nativeEvent)){r&&r(p),i&&i(!0),o.current.isFocusWithin=!0,f(p);let b=p.currentTarget;l(y,"focus",w=>{if(o.current.isFocusWithin&&!pw(b,w.target)){let _=new y.defaultView.FocusEvent("blur",{relatedTarget:w.target});uC(_,b);let E=xw(_);c(E)}},{capture:!0})}},[r,i,f,l,c]);return t?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:h,onBlur:c}}}let Dh=!1,wu=0;function xC(){Dh=!0,setTimeout(()=>{Dh=!1},50)}function xv(e){e.pointerType==="touch"&&xC()}function wC(){if(!(typeof document>"u"))return wu===0&&typeof PointerEvent<"u"&&document.addEventListener("pointerup",xv),wu++,()=>{wu--,!(wu>0)&&typeof PointerEvent<"u"&&document.removeEventListener("pointerup",xv)}}function bC(e){let{onHoverStart:t,onHoverChange:n,onHoverEnd:r,isDisabled:i}=e,[o,l]=k.useState(!1),u=k.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;k.useEffect(wC,[]);let{addGlobalListener:c,removeAllGlobalListeners:f}=vw(),{hoverProps:h,triggerHoverEnd:p}=k.useMemo(()=>{let y=(w,_)=>{if(u.pointerType=_,i||_==="touch"||u.isHovered||!w.currentTarget.contains(w.target))return;u.isHovered=!0;let E=w.currentTarget;u.target=E,c(Fi(w.target),"pointerover",j=>{u.isHovered&&u.target&&!pw(u.target,j.target)&&v(j,j.pointerType)},{capture:!0}),t&&t({type:"hoverstart",target:E,pointerType:_}),n&&n(!0),l(!0)},v=(w,_)=>{let E=u.target;u.pointerType="",u.target=null,!(_==="touch"||!u.isHovered||!E)&&(u.isHovered=!1,f(),r&&r({type:"hoverend",target:E,pointerType:_}),n&&n(!1),l(!1))},b={};return typeof PointerEvent<"u"&&(b.onPointerEnter=w=>{Dh&&w.pointerType==="mouse"||y(w,w.pointerType)},b.onPointerLeave=w=>{!i&&w.currentTarget.contains(w.target)&&v(w,w.pointerType)}),{hoverProps:b,triggerHoverEnd:v}},[t,n,r,i,u,c,f]);return k.useEffect(()=>{i&&p({currentTarget:u.target},u.pointerType)},[i]),{hoverProps:h,isHovered:o}}function kC(e={}){let{autoFocus:t=!1,isTextInput:n,within:r}=e,i=k.useRef({isFocused:!1,isFocusVisible:t||_w()}),[o,l]=k.useState(!1),[u,c]=k.useState(()=>i.current.isFocused&&i.current.isFocusVisible),f=k.useCallback(()=>c(i.current.isFocused&&i.current.isFocusVisible),[]),h=k.useCallback(v=>{i.current.isFocused=v,l(v),f()},[f]);gC(v=>{i.current.isFocusVisible=v,f()},[],{isTextInput:n});let{focusProps:p}=yC({isDisabled:r,onFocusChange:h}),{focusWithinProps:y}=vC({isDisabled:!r,onFocusWithinChange:h});return{isFocused:o,isFocusVisible:u,focusProps:r?y:p}}var SC=Object.defineProperty,EC=(e,t,n)=>t in e?SC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Mf=(e,t,n)=>(EC(e,typeof t!="symbol"?t+"":t,n),n);let _C=class{constructor(){Mf(this,"current",this.detect()),Mf(this,"handoffState","pending"),Mf(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Mr=new _C;function ks(e){var t;return Mr.isServer?null:e==null?document:(t=e==null?void 0:e.ownerDocument)!=null?t:document}function Ju(e){var t,n;return Mr.isServer?null:e==null?document:(n=(t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))!=null?n:document}function Rp(e){var t,n;return(n=(t=Ju(e))==null?void 0:t.activeElement)!=null?n:null}function Cw(e){return Rp(e)===e}function bc(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Mn(){let e=[],t={addEventListener(n,r,i,o){return n.addEventListener(r,i,o),t.add(()=>n.removeEventListener(r,i,o))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return bc(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},style(n,r,i){let o=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:i}),this.add(()=>{Object.assign(n.style,{[r]:o})})},group(n){let r=Mn();return n(r),this.add(()=>r.dispose())},add(n){return e.includes(n)||e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let i of e.splice(r,1))i()}},dispose(){for(let n of e.splice(0))n()}};return t}function Ss(){let[e]=k.useState(Mn);return k.useEffect(()=>()=>e.dispose(),[e]),e}let wt=(e,t)=>{Mr.isServer?k.useEffect(e,t):k.useLayoutEffect(e,t)};function Es(e){let t=k.useRef(e);return wt(()=>{t.current=e},[e]),t}let Ue=function(e){let t=Es(e);return Ne.useCallback((...n)=>t.current(...n),[t])};function CC(e){let t=e.width/2,n=e.height/2;return{top:e.clientY-n,right:e.clientX+t,bottom:e.clientY+n,left:e.clientX-t}}function jC(e,t){return!(!e||!t||e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom)}function NC({disabled:e=!1}={}){let t=k.useRef(null),[n,r]=k.useState(!1),i=Ss(),o=Ue(()=>{t.current=null,r(!1),i.dispose()}),l=Ue(u=>{if(i.dispose(),t.current===null){t.current=u.currentTarget,r(!0);{let c=ks(u.currentTarget);i.addEventListener(c,"pointerup",o,!1),i.addEventListener(c,"pointermove",f=>{if(t.current){let h=CC(f);r(jC(h,t.current.getBoundingClientRect()))}},!1),i.addEventListener(c,"pointercancel",o,!1)}}});return{pressed:n,pressProps:e?{}:{onPointerDown:l,onPointerUp:o,onClick:o}}}function zr(e){return k.useMemo(()=>e,Object.values(e))}let TC=k.createContext(void 0);function jw(){return k.useContext(TC)}function Lh(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function kr(e,t,...n){if(e in t){let i=t[e];return typeof i=="function"?i(...n):i}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(i=>`"${i}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,kr),r}var Eo=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Eo||{}),Oi=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Oi||{});function Ut(){let e=PC();return k.useCallback(t=>IC({mergeRefs:e,...t}),[e])}function IC({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:i,visible:o=!0,name:l,mergeRefs:u}){u=u??AC;let c=Nw(t,e);if(o)return bu(c,n,r,l,u);let f=i??0;if(f&2){let{static:h=!1,...p}=c;if(h)return bu(p,n,r,l,u)}if(f&1){let{unmount:h=!0,...p}=c;return kr(h?0:1,{0(){return null},1(){return bu({...p,hidden:!0,style:{display:"none"}},n,r,l,u)}})}return bu(c,n,r,l,u)}function bu(e,t={},n,r,i){let{as:o=n,children:l,refName:u="ref",...c}=Df(e,["unmount","static"]),f=e.ref!==void 0?{[u]:e.ref}:{},h=typeof l=="function"?l(t):l;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(t)),c["aria-labelledby"]&&c["aria-labelledby"]===c.id&&(c["aria-labelledby"]=void 0);let p={};if(t){let y=!1,v=[];for(let[b,w]of Object.entries(t))typeof w=="boolean"&&(y=!0),w===!0&&v.push(b.replace(/([A-Z])/g,_=>`-${_.toLowerCase()}`));if(y){p["data-headlessui-state"]=v.join(" ");for(let b of v)p[`data-${b}`]=""}}if(Pa(o)&&(Object.keys(ss(c)).length>0||Object.keys(ss(p)).length>0))if(!k.isValidElement(h)||Array.isArray(h)&&h.length>1||OC(h)){if(Object.keys(ss(c)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(ss(c)).concat(Object.keys(ss(p))).map(y=>`  - ${y}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(y=>`  - ${y}`).join(`
`)].join(`
`))}else{let y=h.props,v=y==null?void 0:y.className,b=typeof v=="function"?(...E)=>Lh(v(...E),c.className):Lh(v,c.className),w=b?{className:b}:{},_=Nw(h.props,ss(Df(c,["ref"])));for(let E in p)E in _&&delete p[E];return k.cloneElement(h,Object.assign({},_,p,f,{ref:i(RC(h),f.ref)},w))}return k.createElement(o,Object.assign({},Df(c,["ref"]),!Pa(o)&&f,!Pa(o)&&p),h)}function PC(){let e=k.useRef([]),t=k.useCallback(n=>{for(let r of e.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return e.current=n,t}}function AC(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function Nw(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):t[i]=r[i];if(t.disabled||t["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[i=>{var o;return(o=i==null?void 0:i.preventDefault)==null?void 0:o.call(i)}]);for(let r in n)Object.assign(t,{[r](i,...o){let l=n[r];for(let u of l){if((i instanceof Event||(i==null?void 0:i.nativeEvent)instanceof Event)&&i.defaultPrevented)return;u(i,...o)}}});return t}function Tw(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):t[i]=r[i];for(let r in n)Object.assign(t,{[r](...i){let o=n[r];for(let l of o)l==null||l(...i)}});return t}function Rt(e){var t;return Object.assign(k.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function ss(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function Df(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function RC(e){return Ne.version.split(".")[0]>="19"?e.props.ref:e.ref}function Pa(e){return e===k.Fragment||e===Symbol.for("react.fragment")}function OC(e){return Pa(e.type)}let MC="span";var Qu=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Qu||{});function DC(e,t){var n;let{features:r=1,...i}=e,o={ref:t,"aria-hidden":(r&2)===2?!0:(n=i["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return Ut()({ourProps:o,theirProps:i,slot:{},defaultTag:MC,name:"Hidden"})}let $h=Rt(DC),LC=k.createContext(void 0);function $C(){return k.useContext(LC)}function Iw(e){return typeof e!="object"||e===null?!1:"nodeType"in e}function ti(e){return Iw(e)&&"tagName"in e}function Kn(e){return ti(e)&&"accessKey"in e}function Or(e){return ti(e)&&"tabIndex"in e}function FC(e){return ti(e)&&"style"in e}function zC(e){return Kn(e)&&e.nodeName==="IFRAME"}function Pw(e){return Kn(e)&&e.nodeName==="INPUT"}function wv(e){return Kn(e)&&e.nodeName==="LABEL"}function BC(e){return Kn(e)&&e.nodeName==="FIELDSET"}function Aw(e){return Kn(e)&&e.nodeName==="LEGEND"}function UC(e){return ti(e)?e.matches('a[href],audio[controls],button,details,embed,iframe,img[usemap],input:not([type="hidden"]),label,select,textarea,video[controls]'):!1}function bv(e){let t=e.parentElement,n=null;for(;t&&!BC(t);)Aw(t)&&(n=t),t=t.parentElement;let r=(t==null?void 0:t.getAttribute("disabled"))==="";return r&&WC(n)?!1:r}function WC(e){if(!e)return!1;let t=e.previousElementSibling;for(;t!==null;){if(Aw(t))return!1;t=t.previousElementSibling}return!0}let Rw=Symbol();function HC(e,t=!0){return Object.assign(e,{[Rw]:t})}function En(...e){let t=k.useRef(e);k.useEffect(()=>{t.current=e},[e]);let n=Ue(r=>{for(let i of t.current)i!=null&&(typeof i=="function"?i(r):i.current=r)});return e.every(r=>r==null||(r==null?void 0:r[Rw]))?void 0:n}let Op=k.createContext(null);Op.displayName="DescriptionContext";function Ow(){let e=k.useContext(Op);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,Ow),t}return e}function Mw(){let[e,t]=k.useState([]);return[e.length>0?e.join(" "):void 0,k.useMemo(()=>function(n){let r=Ue(o=>(t(l=>[...l,o]),()=>t(l=>{let u=l.slice(),c=u.indexOf(o);return c!==-1&&u.splice(c,1),u}))),i=k.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return Ne.createElement(Op.Provider,{value:i},n.children)},[t])]}let VC="p";function qC(e,t){let n=k.useId(),r=jw(),{id:i=`headlessui-description-${n}`,...o}=e,l=Ow(),u=En(t);wt(()=>l.register(i),[i,l.register]);let c=zr({...l.slot,disabled:r||!1}),f={ref:u,...l.props,id:i};return Ut()({ourProps:f,theirProps:o,slot:c,defaultTag:VC,name:l.name||"Description"})}let YC=Rt(qC),GC=Object.assign(YC,{});var Xt=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(Xt||{});let kc=k.createContext(null);kc.displayName="LabelContext";function Mp(){let e=k.useContext(kc);if(e===null){let t=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,Mp),t}return e}function KC(e){var t,n,r;let i=(n=(t=k.useContext(kc))==null?void 0:t.value)!=null?n:void 0;return((r=void 0)!=null?r:0)>0?[i,...e].filter(Boolean).join(" "):i}function Dw({inherit:e=!1}={}){let t=KC(),[n,r]=k.useState([]),i=e?[t,...n].filter(Boolean):n;return[i.length>0?i.join(" "):void 0,k.useMemo(()=>function(o){let l=Ue(c=>(r(f=>[...f,c]),()=>r(f=>{let h=f.slice(),p=h.indexOf(c);return p!==-1&&h.splice(p,1),h}))),u=k.useMemo(()=>({register:l,slot:o.slot,name:o.name,props:o.props,value:o.value}),[l,o.slot,o.name,o.props,o.value]);return Ne.createElement(kc.Provider,{value:u},o.children)},[r])]}let JC="label";function QC(e,t){var n;let r=k.useId(),i=Mp(),o=$C(),l=jw(),{id:u=`headlessui-label-${r}`,htmlFor:c=o??((n=i.props)==null?void 0:n.htmlFor),passive:f=!1,...h}=e,p=En(t);wt(()=>i.register(u),[u,i.register]);let y=Ue(w=>{let _=w.currentTarget;if(!(w.target!==w.currentTarget&&UC(w.target))&&(wv(_)&&w.preventDefault(),i.props&&"onClick"in i.props&&typeof i.props.onClick=="function"&&i.props.onClick(w),wv(_))){let E=document.getElementById(_.htmlFor);if(E){let j=E.getAttribute("disabled");if(j==="true"||j==="")return;let C=E.getAttribute("aria-disabled");if(C==="true"||C==="")return;(Pw(E)&&(E.type==="file"||E.type==="radio"||E.type==="checkbox")||E.role==="radio"||E.role==="checkbox"||E.role==="switch")&&E.click(),E.focus({preventScroll:!0})}}}),v=zr({...i.slot,disabled:l||!1}),b={ref:p,...i.props,id:u,htmlFor:c,onClick:y};return f&&("onClick"in b&&(delete b.htmlFor,delete b.onClick),"onClick"in h&&delete h.onClick),Ut()({ourProps:b,theirProps:h,slot:v,defaultTag:c?JC:"div",name:i.name||"Label"})}let XC=Rt(QC);Object.assign(XC,{});let ZC=k.createContext(()=>{});function ej({value:e,children:t}){return Ne.createElement(ZC.Provider,{value:e},t)}function kv(e){if(e===null)return{width:0,height:0};let{width:t,height:n}=e.getBoundingClientRect();return{width:t,height:n}}function tj(e,t,n=!1){let[r,i]=k.useState(()=>kv(t));return wt(()=>{if(!t||!e)return;let o=Mn();return o.requestAnimationFrame(function l(){o.requestAnimationFrame(l),i(u=>{let c=kv(t);return c.width===u.width&&c.height===u.height?u:c})}),()=>{o.dispose()}},[t,e]),n?{width:`${r.width}px`,height:`${r.height}px`}:r}var Lw=(e=>(e[e.Left=0]="Left",e[e.Right=2]="Right",e))(Lw||{});function nj(e){let t=k.useRef(null),n=Ue(i=>{t.current=i.pointerType,!bv(i.currentTarget)&&i.pointerType==="mouse"&&i.button===Lw.Left&&(i.preventDefault(),e(i))}),r=Ue(i=>{t.current!=="mouse"&&(bv(i.currentTarget)||e(i))});return{onPointerDown:n,onClick:r}}let $w=class extends Map{constructor(t){super(),this.factory=t}get(t){let n=super.get(t);return n===void 0&&(n=this.factory(t),this.set(t,n)),n}};var rj=Object.defineProperty,ij=(e,t,n)=>t in e?rj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sj=(e,t,n)=>(ij(e,t+"",n),n),Fw=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},rr=(e,t,n)=>(Fw(e,t,"read from private field"),n?n.call(e):t.get(e)),Lf=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Sv=(e,t,n,r)=>(Fw(e,t,"write to private field"),t.set(e,n),n),Pr,_a,Ca;let zw=class{constructor(t){Lf(this,Pr,{}),Lf(this,_a,new $w(()=>new Set)),Lf(this,Ca,new Set),sj(this,"disposables",Mn()),Sv(this,Pr,t),Mr.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return rr(this,Pr)}subscribe(t,n){if(Mr.isServer)return()=>{};let r={selector:t,callback:n,current:t(rr(this,Pr))};return rr(this,Ca).add(r),this.disposables.add(()=>{rr(this,Ca).delete(r)})}on(t,n){return Mr.isServer?()=>{}:(rr(this,_a).get(t).add(n),this.disposables.add(()=>{rr(this,_a).get(t).delete(n)}))}send(t){let n=this.reduce(rr(this,Pr),t);if(n!==rr(this,Pr)){Sv(this,Pr,n);for(let r of rr(this,Ca)){let i=r.selector(rr(this,Pr));Bw(r.current,i)||(r.current=i,r.callback(i))}for(let r of rr(this,_a).get(t.type))r(rr(this,Pr),t)}}};Pr=new WeakMap,_a=new WeakMap,Ca=new WeakMap;function Bw(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:Array.isArray(e)&&Array.isArray(t)?e.length!==t.length?!1:$f(e[Symbol.iterator](),t[Symbol.iterator]()):e instanceof Map&&t instanceof Map||e instanceof Set&&t instanceof Set?e.size!==t.size?!1:$f(e.entries(),t.entries()):Ev(e)&&Ev(t)?$f(Object.entries(e)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()):!1}function $f(e,t){do{let n=e.next(),r=t.next();if(n.done&&r.done)return!0;if(n.done||r.done||!Object.is(n.value,r.value))return!1}while(!0)}function Ev(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||Object.getPrototypeOf(t)===null}function _v(e){let[t,n]=e(),r=Mn();return(...i)=>{t(...i),r.dispose(),r.microTask(n)}}var oj=Object.defineProperty,aj=(e,t,n)=>t in e?oj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Cv=(e,t,n)=>(aj(e,typeof t!="symbol"?t+"":t,n),n),Uw=(e=>(e[e.Push=0]="Push",e[e.Pop=1]="Pop",e))(Uw||{});let lj={0(e,t){let n=t.id,r=e.stack,i=e.stack.indexOf(n);if(i!==-1){let o=e.stack.slice();return o.splice(i,1),o.push(n),r=o,{...e,stack:r}}return{...e,stack:[...e.stack,n]}},1(e,t){let n=t.id,r=e.stack.indexOf(n);if(r===-1)return e;let i=e.stack.slice();return i.splice(r,1),{...e,stack:i}}},uj=class Ww extends zw{constructor(){super(...arguments),Cv(this,"actions",{push:t=>this.send({type:0,id:t}),pop:t=>this.send({type:1,id:t})}),Cv(this,"selectors",{isTop:(t,n)=>t.stack[t.stack.length-1]===n,inStack:(t,n)=>t.stack.includes(n)})}static new(){return new Ww({stack:[]})}reduce(t,n){return kr(n.type,lj,t,n)}};const Sc=new $w(()=>uj.new());var Ff={exports:{}},zf={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jv;function cj(){if(jv)return zf;jv=1;var e=gc();function t(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,o=e.useEffect,l=e.useMemo,u=e.useDebugValue;return zf.useSyncExternalStoreWithSelector=function(c,f,h,p,y){var v=i(null);if(v.current===null){var b={hasValue:!1,value:null};v.current=b}else b=v.current;v=l(function(){function _(D){if(!E){if(E=!0,j=D,D=p(D),y!==void 0&&b.hasValue){var R=b.value;if(y(R,D))return C=R}return C=D}if(R=C,n(j,D))return R;var z=p(D);return y!==void 0&&y(R,z)?(j=D,R):(j=D,C=z)}var E=!1,j,C,M=h===void 0?null:h;return[function(){return _(f())},M===null?void 0:function(){return _(M())}]},[f,h,p,y]);var w=r(c,v[0],v[1]);return o(function(){b.hasValue=!0,b.value=w},[w]),u(w),w},zf}var Nv;function dj(){return Nv||(Nv=1,Ff.exports=cj()),Ff.exports}var fj=dj();function or(e,t,n=Bw){return fj.useSyncExternalStoreWithSelector(Ue(r=>e.subscribe(hj,r)),Ue(()=>e.state),Ue(()=>e.state),Ue(t),n)}function hj(e){return e}function nl(e,t){let n=k.useId(),r=Sc.get(t),[i,o]=or(r,k.useCallback(l=>[r.selectors.isTop(l,n),r.selectors.inStack(l,n)],[r,n]));return wt(()=>{if(e)return r.actions.push(n),()=>r.actions.pop(n)},[r,e,n]),e?o?i:!0:!1}let Fh=new Map,Aa=new Map;function Tv(e){var t;let n=(t=Aa.get(e))!=null?t:0;return Aa.set(e,n+1),n!==0?()=>Iv(e):(Fh.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>Iv(e))}function Iv(e){var t;let n=(t=Aa.get(e))!=null?t:1;if(n===1?Aa.delete(e):Aa.set(e,n-1),n!==1)return;let r=Fh.get(e);r&&(r["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r["aria-hidden"]),e.inert=r.inert,Fh.delete(e))}function Hw(e,{allowed:t,disallowed:n}={}){let r=nl(e,"inert-others");wt(()=>{var i,o;if(!r)return;let l=Mn();for(let c of(i=n==null?void 0:n())!=null?i:[])c&&l.add(Tv(c));let u=(o=t==null?void 0:t())!=null?o:[];for(let c of u){if(!c)continue;let f=ks(c);if(!f)continue;let h=c.parentElement;for(;h&&h!==f.body;){for(let p of h.children)u.some(y=>p.contains(y))||l.add(Tv(p));h=h.parentElement}}return l.dispose},[r,t,n])}function Vw(e,t,n){let r=Es(i=>{let o=i.getBoundingClientRect();o.x===0&&o.y===0&&o.width===0&&o.height===0&&n()});k.useEffect(()=>{if(!e)return;let i=t===null?null:Kn(t)?t:t.current;if(!i)return;let o=Mn();if(typeof ResizeObserver<"u"){let l=new ResizeObserver(()=>r.current(i));l.observe(i),o.add(()=>l.disconnect())}if(typeof IntersectionObserver<"u"){let l=new IntersectionObserver(()=>r.current(i));l.observe(i),o.add(()=>l.disconnect())}return()=>o.dispose()},[t,r,e])}let Xu=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","details>summary","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),pj=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var xr=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(xr||{}),zh=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(zh||{}),mj=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(mj||{});function qw(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Xu)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function gj(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(pj)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var Dp=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(Dp||{});function Lp(e,t=0){var n;return e===((n=ks(e))==null?void 0:n.body)?!1:kr(t,{0(){return e.matches(Xu)},1(){let r=e;for(;r!==null;){if(r.matches(Xu))return!0;r=r.parentElement}return!1}})}function Yw(e){Mn().nextFrame(()=>{let t=Rp(e);t&&Or(t)&&!Lp(t,0)&&Dr(e)})}var yj=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(yj||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Dr(e){e==null||e.focus({preventScroll:!0})}let vj=["textarea","input"].join(",");function xj(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,vj))!=null?n:!1}function Gw(e,t=n=>n){return e.slice().sort((n,r)=>{let i=t(n),o=t(r);if(i===null||o===null)return 0;let l=i.compareDocumentPosition(o);return l&Node.DOCUMENT_POSITION_FOLLOWING?-1:l&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function wj(e,t,n=e===null?document.body:Ju(e)){return yo(qw(n),t,{relativeTo:e})}function yo(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:i=[]}={}){let o=Array.isArray(e)?e.length>0?Ju(e[0]):document:Ju(e),l=Array.isArray(e)?n?Gw(e):e:t&64?gj(e):qw(e);i.length>0&&l.length>1&&(l=l.filter(v=>!i.some(b=>b!=null&&"current"in b?(b==null?void 0:b.current)===v:b===v))),r=r??(o==null?void 0:o.activeElement);let u=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,l.indexOf(r))-1;if(t&4)return Math.max(0,l.indexOf(r))+1;if(t&8)return l.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),f=t&32?{preventScroll:!0}:{},h=0,p=l.length,y;do{if(h>=p||h+p<=0)return 0;let v=c+h;if(t&16)v=(v+p)%p;else{if(v<0)return 3;if(v>=p)return 1}y=l[v],y==null||y.focus(f),h+=u}while(y!==Rp(y));return t&6&&xj(y)&&y.select(),2}function Kw(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function bj(){return/Android/gi.test(window.navigator.userAgent)}function Pv(){return Kw()||bj()}function po(e,t,n,r){let i=Es(n);k.useEffect(()=>{if(!e)return;function o(l){i.current(l)}return document.addEventListener(t,o,r),()=>document.removeEventListener(t,o,r)},[e,t,r])}function Jw(e,t,n,r){let i=Es(n);k.useEffect(()=>{if(!e)return;function o(l){i.current(l)}return window.addEventListener(t,o,r),()=>window.removeEventListener(t,o,r)},[e,t,r])}const Av=30;function Qw(e,t,n){let r=Es(n),i=k.useCallback(function(u,c){if(u.defaultPrevented)return;let f=c(u);if(f===null||!f.getRootNode().contains(f)||!f.isConnected)return;let h=(function p(y){return typeof y=="function"?p(y()):Array.isArray(y)||y instanceof Set?y:[y]})(t);for(let p of h)if(p!==null&&(p.contains(f)||u.composed&&u.composedPath().includes(p)))return;return!Lp(f,Dp.Loose)&&f.tabIndex!==-1&&u.preventDefault(),r.current(u,f)},[r,t]),o=k.useRef(null);po(e,"pointerdown",u=>{var c,f;Pv()||(o.current=((f=(c=u.composedPath)==null?void 0:c.call(u))==null?void 0:f[0])||u.target)},!0),po(e,"pointerup",u=>{if(Pv()||!o.current)return;let c=o.current;return o.current=null,i(u,()=>c)},!0);let l=k.useRef({x:0,y:0});po(e,"touchstart",u=>{l.current.x=u.touches[0].clientX,l.current.y=u.touches[0].clientY},!0),po(e,"touchend",u=>{let c={x:u.changedTouches[0].clientX,y:u.changedTouches[0].clientY};if(!(Math.abs(c.x-l.current.x)>=Av||Math.abs(c.y-l.current.y)>=Av))return i(u,()=>Or(u.target)?u.target:null)},!0),Jw(e,"blur",u=>i(u,()=>zC(window.document.activeElement)?window.document.activeElement:null),!0)}function Va(...e){return k.useMemo(()=>ks(...e),[...e])}var kj=(e=>(e[e.Ignore=0]="Ignore",e[e.Select=1]="Select",e[e.Close=2]="Close",e))(kj||{});const ku={Ignore:{kind:0},Select:e=>({kind:1,target:e}),Close:{kind:2}},Sj=200,Rv=5;function Ej(e,{trigger:t,action:n,close:r,select:i}){let o=k.useRef(null),l=k.useRef(null),u=k.useRef(null);po(e&&t!==null,"pointerdown",c=>{Iw(c==null?void 0:c.target)&&t!=null&&t.contains(c.target)&&(l.current=c.x,u.current=c.y,o.current=c.timeStamp)}),po(e&&t!==null,"pointerup",c=>{var f,h;let p=o.current;if(p===null||(o.current=null,!Or(c.target))||Math.abs(c.x-((f=l.current)!=null?f:c.x))<Rv&&Math.abs(c.y-((h=u.current)!=null?h:c.y))<Rv)return;let y=n(c);switch(y.kind){case 0:return;case 1:{c.timeStamp-p>Sj&&(i(y.target),r());break}case 2:{r();break}}},{capture:!0})}function Xw(e,t,n,r){let i=Es(n);k.useEffect(()=>{e=e??window;function o(l){i.current(l)}return e.addEventListener(t,o,r),()=>e.removeEventListener(t,o,r)},[e,t,r])}function _j(e,t){return k.useMemo(()=>{var n;if(e.type)return e.type;let r=(n=e.as)!=null?n:"button";if(typeof r=="string"&&r.toLowerCase()==="button"||(t==null?void 0:t.tagName)==="BUTTON"&&!t.hasAttribute("type"))return"button"},[e.type,e.as,t])}function Cj(e){return k.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}function jj(e,t){let n=e(),r=new Set;return{getSnapshot(){return n},subscribe(i){return r.add(i),()=>r.delete(i)},dispatch(i,...o){let l=t[i].call(n,...o);l&&(n=l,r.forEach(u=>u()))}}}function Nj(){let e;return{before({doc:t}){var n;let r=t.documentElement,i=(n=t.defaultView)!=null?n:window;e=Math.max(0,i.innerWidth-r.clientWidth)},after({doc:t,d:n}){let r=t.documentElement,i=Math.max(0,r.clientWidth-r.offsetWidth),o=Math.max(0,e-i);n.style(r,"paddingRight",`${o}px`)}}}function Tj(){return Kw()?{before({doc:e,d:t,meta:n}){function r(i){for(let o of n().containers)for(let l of o())if(l.contains(i))return!0;return!1}t.microTask(()=>{var i;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let u=Mn();u.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>u.dispose()))}let o=(i=window.scrollY)!=null?i:window.pageYOffset,l=null;t.addEventListener(e,"click",u=>{if(Or(u.target))try{let c=u.target.closest("a");if(!c)return;let{hash:f}=new URL(c.href),h=e.querySelector(f);Or(h)&&!r(h)&&(l=h)}catch{}},!0),t.group(u=>{t.addEventListener(e,"touchstart",c=>{if(u.dispose(),Or(c.target)&&FC(c.target))if(r(c.target)){let f=c.target;for(;f.parentElement&&r(f.parentElement);)f=f.parentElement;u.style(f,"overscrollBehavior","contain")}else u.style(c.target,"touchAction","none")})}),t.addEventListener(e,"touchmove",u=>{if(Or(u.target)){if(Pw(u.target))return;if(r(u.target)){let c=u.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&u.preventDefault()}else u.preventDefault()}},{passive:!1}),t.add(()=>{var u;let c=(u=window.scrollY)!=null?u:window.pageYOffset;o!==c&&window.scrollTo(0,o),l&&l.isConnected&&(l.scrollIntoView({block:"nearest"}),l=null)})})}}:{}}function Ij(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function Ov(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let ps=jj(()=>new Map,{PUSH(e,t){var n;let r=(n=this.get(e))!=null?n:{doc:e,count:0,d:Mn(),meta:new Set,computedMeta:{}};return r.count++,r.meta.add(t),r.computedMeta=Ov(r.meta),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t),n.computedMeta=Ov(n.meta)),this},SCROLL_PREVENT(e){let t={doc:e.doc,d:e.d,meta(){return e.computedMeta}},n=[Tj(),Nj(),Ij()];n.forEach(({before:r})=>r==null?void 0:r(t)),n.forEach(({after:r})=>r==null?void 0:r(t))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});ps.subscribe(()=>{let e=ps.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let r=t.get(n.doc)==="hidden",i=n.count!==0;(i&&!r||!i&&r)&&ps.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&ps.dispatch("TEARDOWN",n)}});function Pj(e,t,n=()=>({containers:[]})){let r=Cj(ps),i=t?r.get(t):void 0,o=i?i.count>0:!1;return wt(()=>{if(!(!t||!e))return ps.dispatch("PUSH",t,n),()=>ps.dispatch("POP",t,n)},[e,t]),o}function Zw(e,t,n=()=>[document.body]){let r=nl(e,"scroll-lock");Pj(r,t,i=>{var o;return{containers:[...(o=i.containers)!=null?o:[],n]}})}function Mv(e){return[e.screenX,e.screenY]}function Aj(){let e=k.useRef([-1,-1]);return{wasMoved(t){let n=Mv(t);return e.current[0]===n[0]&&e.current[1]===n[1]?!1:(e.current=n,!0)},update(t){e.current=Mv(t)}}}function Rj(e=0){let[t,n]=k.useState(e),r=k.useCallback(c=>n(c),[]),i=k.useCallback(c=>n(f=>f|c),[]),o=k.useCallback(c=>(t&c)===c,[t]),l=k.useCallback(c=>n(f=>f&~c),[]),u=k.useCallback(c=>n(f=>f^c),[]);return{flags:t,setFlag:r,addFlag:i,hasFlag:o,removeFlag:l,toggleFlag:u}}var Oj={},Dv,Lv;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((Dv=process==null?void 0:Oj)==null?void 0:Dv.NODE_ENV)==="test"&&typeof((Lv=Element==null?void 0:Element.prototype)==null?void 0:Lv.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var Mj=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(Mj||{});function eb(e){let t={};for(let n in e)e[n]===!0&&(t[`data-${n}`]="");return t}function tb(e,t,n,r){let[i,o]=k.useState(n),{hasFlag:l,addFlag:u,removeFlag:c}=Rj(e&&i?3:0),f=k.useRef(!1),h=k.useRef(!1),p=Ss();return wt(()=>{var y;if(e){if(n&&o(!0),!t){n&&u(3);return}return(y=r==null?void 0:r.start)==null||y.call(r,n),Dj(t,{inFlight:f,prepare(){h.current?h.current=!1:h.current=f.current,f.current=!0,!h.current&&(n?(u(3),c(4)):(u(4),c(2)))},run(){h.current?n?(c(3),u(4)):(c(4),u(3)):n?c(1):u(1)},done(){var v;h.current&&Fj(t)||(f.current=!1,c(7),n||o(!1),(v=r==null?void 0:r.end)==null||v.call(r,n))}})}},[e,n,t,p]),e?[i,{closed:l(1),enter:l(2),leave:l(4),transition:l(2)||l(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function Dj(e,{prepare:t,run:n,done:r,inFlight:i}){let o=Mn();return $j(e,{prepare:t,inFlight:i}),o.nextFrame(()=>{n(),o.requestAnimationFrame(()=>{o.add(Lj(e,r))})}),o.dispose}function Lj(e,t){var n,r;let i=Mn();if(!e)return i.dispose;let o=!1;i.add(()=>{o=!0});let l=(r=(n=e.getAnimations)==null?void 0:n.call(e).filter(u=>u instanceof CSSTransition))!=null?r:[];return l.length===0?(t(),i.dispose):(Promise.allSettled(l.map(u=>u.finished)).then(()=>{o||t()}),i.dispose)}function $j(e,{inFlight:t,prepare:n}){if(t!=null&&t.current){n();return}let r=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=r}function Fj(e){var t,n;return((n=(t=e.getAnimations)==null?void 0:t.call(e))!=null?n:[]).some(r=>r instanceof CSSTransition&&r.playState!=="finished")}function zj(e,{container:t,accept:n,walk:r}){let i=k.useRef(n),o=k.useRef(r);k.useEffect(()=>{i.current=n,o.current=r},[n,r]),wt(()=>{if(!t||!e)return;let l=ks(t);if(!l)return;let u=i.current,c=o.current,f=Object.assign(p=>u(p),{acceptNode:u}),h=l.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,f,!1);for(;h.nextNode();)c(h.currentNode)},[t,e,i,o])}function $p(e,t){let n=k.useRef([]),r=Ue(e);k.useEffect(()=>{let i=[...n.current];for(let[o,l]of t.entries())if(n.current[o]!==l){let u=r(t,i);return n.current=t,u}},[r,...t])}function Ec(){return typeof window<"u"}function Po(e){return nb(e)?(e.nodeName||"").toLowerCase():"#document"}function Yn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Br(e){var t;return(t=(nb(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function nb(e){return Ec()?e instanceof Node||e instanceof Yn(e).Node:!1}function kn(e){return Ec()?e instanceof Element||e instanceof Yn(e).Element:!1}function $r(e){return Ec()?e instanceof HTMLElement||e instanceof Yn(e).HTMLElement:!1}function $v(e){return!Ec()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Yn(e).ShadowRoot}const Bj=new Set(["inline","contents"]);function rl(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Sr(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!Bj.has(i)}const Uj=new Set(["table","td","th"]);function Wj(e){return Uj.has(Po(e))}const Hj=[":popover-open",":modal"];function _c(e){return Hj.some(t=>{try{return e.matches(t)}catch{return!1}})}const Vj=["transform","translate","scale","rotate","perspective"],qj=["transform","translate","scale","rotate","perspective","filter"],Yj=["paint","layout","strict","content"];function Fp(e){const t=zp(),n=kn(e)?Sr(e):e;return Vj.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||qj.some(r=>(n.willChange||"").includes(r))||Yj.some(r=>(n.contain||"").includes(r))}function Gj(e){let t=Di(e);for(;$r(t)&&!_o(t);){if(Fp(t))return t;if(_c(t))return null;t=Di(t)}return null}function zp(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Kj=new Set(["html","body","#document"]);function _o(e){return Kj.has(Po(e))}function Sr(e){return Yn(e).getComputedStyle(e)}function Cc(e){return kn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Di(e){if(Po(e)==="html")return e;const t=e.assignedSlot||e.parentNode||$v(e)&&e.host||Br(e);return $v(t)?t.host:t}function rb(e){const t=Di(e);return _o(t)?e.ownerDocument?e.ownerDocument.body:e.body:$r(t)&&rl(t)?t:rb(t)}function qa(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=rb(e),o=i===((r=e.ownerDocument)==null?void 0:r.body),l=Yn(i);if(o){const u=Bh(l);return t.concat(l,l.visualViewport||[],rl(i)?i:[],u&&n?qa(u):[])}return t.concat(i,qa(i,[],n))}function Bh(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Jj(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}const ys=Math.min,hn=Math.max,Ya=Math.round,Su=Math.floor,Lr=e=>({x:e,y:e}),Qj={left:"right",right:"left",bottom:"top",top:"bottom"},Xj={start:"end",end:"start"};function Fv(e,t,n){return hn(e,ys(t,n))}function Ao(e,t){return typeof e=="function"?e(t):e}function Li(e){return e.split("-")[0]}function il(e){return e.split("-")[1]}function ib(e){return e==="x"?"y":"x"}function sb(e){return e==="y"?"height":"width"}const Zj=new Set(["top","bottom"]);function ei(e){return Zj.has(Li(e))?"y":"x"}function ob(e){return ib(ei(e))}function eN(e,t,n){n===void 0&&(n=!1);const r=il(e),i=ob(e),o=sb(i);let l=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(l=Zu(l)),[l,Zu(l)]}function tN(e){const t=Zu(e);return[Uh(e),t,Uh(t)]}function Uh(e){return e.replace(/start|end/g,t=>Xj[t])}const zv=["left","right"],Bv=["right","left"],nN=["top","bottom"],rN=["bottom","top"];function iN(e,t,n){switch(e){case"top":case"bottom":return n?t?Bv:zv:t?zv:Bv;case"left":case"right":return t?nN:rN;default:return[]}}function sN(e,t,n,r){const i=il(e);let o=iN(Li(e),n==="start",r);return i&&(o=o.map(l=>l+"-"+i),t&&(o=o.concat(o.map(Uh)))),o}function Zu(e){return e.replace(/left|right|bottom|top/g,t=>Qj[t])}function oN(e){return{top:0,right:0,bottom:0,left:0,...e}}function aN(e){return typeof e!="number"?oN(e):{top:e,right:e,bottom:e,left:e}}function ec(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function Uv(e,t,n){let{reference:r,floating:i}=e;const o=ei(t),l=ob(t),u=sb(l),c=Li(t),f=o==="y",h=r.x+r.width/2-i.width/2,p=r.y+r.height/2-i.height/2,y=r[u]/2-i[u]/2;let v;switch(c){case"top":v={x:h,y:r.y-i.height};break;case"bottom":v={x:h,y:r.y+r.height};break;case"right":v={x:r.x+r.width,y:p};break;case"left":v={x:r.x-i.width,y:p};break;default:v={x:r.x,y:r.y}}switch(il(t)){case"start":v[l]-=y*(n&&f?-1:1);break;case"end":v[l]+=y*(n&&f?-1:1);break}return v}const lN=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:l}=n,u=o.filter(Boolean),c=await(l.isRTL==null?void 0:l.isRTL(t));let f=await l.getElementRects({reference:e,floating:t,strategy:i}),{x:h,y:p}=Uv(f,r,c),y=r,v={},b=0;for(let w=0;w<u.length;w++){const{name:_,fn:E}=u[w],{x:j,y:C,data:M,reset:D}=await E({x:h,y:p,initialPlacement:r,placement:y,strategy:i,middlewareData:v,rects:f,platform:l,elements:{reference:e,floating:t}});h=j??h,p=C??p,v={...v,[_]:{...v[_],...M}},D&&b<=50&&(b++,typeof D=="object"&&(D.placement&&(y=D.placement),D.rects&&(f=D.rects===!0?await l.getElementRects({reference:e,floating:t,strategy:i}):D.rects),{x:h,y:p}=Uv(f,y,c)),w=-1)}return{x:h,y:p,placement:y,strategy:i,middlewareData:v}};async function jc(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:o,rects:l,elements:u,strategy:c}=e,{boundary:f="clippingAncestors",rootBoundary:h="viewport",elementContext:p="floating",altBoundary:y=!1,padding:v=0}=Ao(t,e),b=aN(v),_=u[y?p==="floating"?"reference":"floating":p],E=ec(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(_)))==null||n?_:_.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(u.floating)),boundary:f,rootBoundary:h,strategy:c})),j=p==="floating"?{x:r,y:i,width:l.floating.width,height:l.floating.height}:l.reference,C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u.floating)),M=await(o.isElement==null?void 0:o.isElement(C))?await(o.getScale==null?void 0:o.getScale(C))||{x:1,y:1}:{x:1,y:1},D=ec(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:j,offsetParent:C,strategy:c}):j);return{top:(E.top-D.top+b.top)/M.y,bottom:(D.bottom-E.bottom+b.bottom)/M.y,left:(E.left-D.left+b.left)/M.x,right:(D.right-E.right+b.right)/M.x}}const uN=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:o,rects:l,initialPlacement:u,platform:c,elements:f}=t,{mainAxis:h=!0,crossAxis:p=!0,fallbackPlacements:y,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:w=!0,..._}=Ao(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const E=Li(i),j=ei(u),C=Li(u)===u,M=await(c.isRTL==null?void 0:c.isRTL(f.floating)),D=y||(C||!w?[Zu(u)]:tN(u)),R=b!=="none";!y&&R&&D.push(...sN(u,w,b,M));const z=[u,...D],F=await jc(t,_),V=[];let A=((r=o.flip)==null?void 0:r.overflows)||[];if(h&&V.push(F[E]),p){const q=eN(i,l,M);V.push(F[q[0]],F[q[1]])}if(A=[...A,{placement:i,overflows:V}],!V.every(q=>q<=0)){var O,Q;const q=(((O=o.flip)==null?void 0:O.index)||0)+1,$=z[q];if($&&(!(p==="alignment"?j!==ei($):!1)||A.every(L=>ei(L.placement)===j?L.overflows[0]>0:!0)))return{data:{index:q,overflows:A},reset:{placement:$}};let J=(Q=A.filter(ie=>ie.overflows[0]<=0).sort((ie,L)=>ie.overflows[1]-L.overflows[1])[0])==null?void 0:Q.placement;if(!J)switch(v){case"bestFit":{var H;const ie=(H=A.filter(L=>{if(R){const ne=ei(L.placement);return ne===j||ne==="y"}return!0}).map(L=>[L.placement,L.overflows.filter(ne=>ne>0).reduce((ne,T)=>ne+T,0)]).sort((L,ne)=>L[1]-ne[1])[0])==null?void 0:H[0];ie&&(J=ie);break}case"initialPlacement":J=u;break}if(i!==J)return{reset:{placement:J}}}return{}}}},cN=new Set(["left","top"]);async function dN(e,t){const{placement:n,platform:r,elements:i}=e,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),l=Li(n),u=il(n),c=ei(n)==="y",f=cN.has(l)?-1:1,h=o&&c?-1:1,p=Ao(t,e);let{mainAxis:y,crossAxis:v,alignmentAxis:b}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return u&&typeof b=="number"&&(v=u==="end"?b*-1:b),c?{x:v*h,y:y*f}:{x:y*f,y:v*h}}const fN=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:o,placement:l,middlewareData:u}=t,c=await dN(t,e);return l===((n=u.offset)==null?void 0:n.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:o+c.y,data:{...c,placement:l}}}}},hN=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:l=!1,limiter:u={fn:_=>{let{x:E,y:j}=_;return{x:E,y:j}}},...c}=Ao(e,t),f={x:n,y:r},h=await jc(t,c),p=ei(Li(i)),y=ib(p);let v=f[y],b=f[p];if(o){const _=y==="y"?"top":"left",E=y==="y"?"bottom":"right",j=v+h[_],C=v-h[E];v=Fv(j,v,C)}if(l){const _=p==="y"?"top":"left",E=p==="y"?"bottom":"right",j=b+h[_],C=b-h[E];b=Fv(j,b,C)}const w=u.fn({...t,[y]:v,[p]:b});return{...w,data:{x:w.x-n,y:w.y-r,enabled:{[y]:o,[p]:l}}}}}},pN=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:o,platform:l,elements:u}=t,{apply:c=()=>{},...f}=Ao(e,t),h=await jc(t,f),p=Li(i),y=il(i),v=ei(i)==="y",{width:b,height:w}=o.floating;let _,E;p==="top"||p==="bottom"?(_=p,E=y===(await(l.isRTL==null?void 0:l.isRTL(u.floating))?"start":"end")?"left":"right"):(E=p,_=y==="end"?"top":"bottom");const j=w-h.top-h.bottom,C=b-h.left-h.right,M=ys(w-h[_],j),D=ys(b-h[E],C),R=!t.middlewareData.shift;let z=M,F=D;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(F=C),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(z=j),R&&!y){const A=hn(h.left,0),O=hn(h.right,0),Q=hn(h.top,0),H=hn(h.bottom,0);v?F=b-2*(A!==0||O!==0?A+O:hn(h.left,h.right)):z=w-2*(Q!==0||H!==0?Q+H:hn(h.top,h.bottom))}await c({...t,availableWidth:F,availableHeight:z});const V=await l.getDimensions(u.floating);return b!==V.width||w!==V.height?{reset:{rects:!0}}:{}}}};function ab(e){const t=Sr(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=$r(e),o=i?e.offsetWidth:n,l=i?e.offsetHeight:r,u=Ya(n)!==o||Ya(r)!==l;return u&&(n=o,r=l),{width:n,height:r,$:u}}function Bp(e){return kn(e)?e:e.contextElement}function vo(e){const t=Bp(e);if(!$r(t))return Lr(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=ab(t);let l=(o?Ya(n.width):n.width)/r,u=(o?Ya(n.height):n.height)/i;return(!l||!Number.isFinite(l))&&(l=1),(!u||!Number.isFinite(u))&&(u=1),{x:l,y:u}}const mN=Lr(0);function lb(e){const t=Yn(e);return!zp()||!t.visualViewport?mN:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function gN(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Yn(e)?!1:t}function vs(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),o=Bp(e);let l=Lr(1);t&&(r?kn(r)&&(l=vo(r)):l=vo(e));const u=gN(o,n,r)?lb(o):Lr(0);let c=(i.left+u.x)/l.x,f=(i.top+u.y)/l.y,h=i.width/l.x,p=i.height/l.y;if(o){const y=Yn(o),v=r&&kn(r)?Yn(r):r;let b=y,w=Bh(b);for(;w&&r&&v!==b;){const _=vo(w),E=w.getBoundingClientRect(),j=Sr(w),C=E.left+(w.clientLeft+parseFloat(j.paddingLeft))*_.x,M=E.top+(w.clientTop+parseFloat(j.paddingTop))*_.y;c*=_.x,f*=_.y,h*=_.x,p*=_.y,c+=C,f+=M,b=Yn(w),w=Bh(b)}}return ec({width:h,height:p,x:c,y:f})}function Nc(e,t){const n=Cc(e).scrollLeft;return t?t.left+n:vs(Br(e)).left+n}function ub(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-Nc(e,n),i=n.top+t.scrollTop;return{x:r,y:i}}function yN(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const o=i==="fixed",l=Br(r),u=t?_c(t.floating):!1;if(r===l||u&&o)return n;let c={scrollLeft:0,scrollTop:0},f=Lr(1);const h=Lr(0),p=$r(r);if((p||!p&&!o)&&((Po(r)!=="body"||rl(l))&&(c=Cc(r)),$r(r))){const v=vs(r);f=vo(r),h.x=v.x+r.clientLeft,h.y=v.y+r.clientTop}const y=l&&!p&&!o?ub(l,c):Lr(0);return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-c.scrollLeft*f.x+h.x+y.x,y:n.y*f.y-c.scrollTop*f.y+h.y+y.y}}function vN(e){return Array.from(e.getClientRects())}function xN(e){const t=Br(e),n=Cc(e),r=e.ownerDocument.body,i=hn(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=hn(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let l=-n.scrollLeft+Nc(e);const u=-n.scrollTop;return Sr(r).direction==="rtl"&&(l+=hn(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:l,y:u}}const Wv=25;function wN(e,t){const n=Yn(e),r=Br(e),i=n.visualViewport;let o=r.clientWidth,l=r.clientHeight,u=0,c=0;if(i){o=i.width,l=i.height;const h=zp();(!h||h&&t==="fixed")&&(u=i.offsetLeft,c=i.offsetTop)}const f=Nc(r);if(f<=0){const h=r.ownerDocument,p=h.body,y=getComputedStyle(p),v=h.compatMode==="CSS1Compat"&&parseFloat(y.marginLeft)+parseFloat(y.marginRight)||0,b=Math.abs(r.clientWidth-p.clientWidth-v);b<=Wv&&(o-=b)}else f<=Wv&&(o+=f);return{width:o,height:l,x:u,y:c}}const bN=new Set(["absolute","fixed"]);function kN(e,t){const n=vs(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=$r(e)?vo(e):Lr(1),l=e.clientWidth*o.x,u=e.clientHeight*o.y,c=i*o.x,f=r*o.y;return{width:l,height:u,x:c,y:f}}function Hv(e,t,n){let r;if(t==="viewport")r=wN(e,n);else if(t==="document")r=xN(Br(e));else if(kn(t))r=kN(t,n);else{const i=lb(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return ec(r)}function cb(e,t){const n=Di(e);return n===t||!kn(n)||_o(n)?!1:Sr(n).position==="fixed"||cb(n,t)}function SN(e,t){const n=t.get(e);if(n)return n;let r=qa(e,[],!1).filter(u=>kn(u)&&Po(u)!=="body"),i=null;const o=Sr(e).position==="fixed";let l=o?Di(e):e;for(;kn(l)&&!_o(l);){const u=Sr(l),c=Fp(l);!c&&u.position==="fixed"&&(i=null),(o?!c&&!i:!c&&u.position==="static"&&!!i&&bN.has(i.position)||rl(l)&&!c&&cb(e,l))?r=r.filter(h=>h!==l):i=u,l=Di(l)}return t.set(e,r),r}function EN(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const l=[...n==="clippingAncestors"?_c(t)?[]:SN(t,this._c):[].concat(n),r],u=l[0],c=l.reduce((f,h)=>{const p=Hv(t,h,i);return f.top=hn(p.top,f.top),f.right=ys(p.right,f.right),f.bottom=ys(p.bottom,f.bottom),f.left=hn(p.left,f.left),f},Hv(t,u,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function _N(e){const{width:t,height:n}=ab(e);return{width:t,height:n}}function CN(e,t,n){const r=$r(t),i=Br(t),o=n==="fixed",l=vs(e,!0,o,t);let u={scrollLeft:0,scrollTop:0};const c=Lr(0);function f(){c.x=Nc(i)}if(r||!r&&!o)if((Po(t)!=="body"||rl(i))&&(u=Cc(t)),r){const v=vs(t,!0,o,t);c.x=v.x+t.clientLeft,c.y=v.y+t.clientTop}else i&&f();o&&!r&&i&&f();const h=i&&!r&&!o?ub(i,u):Lr(0),p=l.left+u.scrollLeft-c.x-h.x,y=l.top+u.scrollTop-c.y-h.y;return{x:p,y,width:l.width,height:l.height}}function Bf(e){return Sr(e).position==="static"}function Vv(e,t){if(!$r(e)||Sr(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Br(e)===n&&(n=n.ownerDocument.body),n}function db(e,t){const n=Yn(e);if(_c(e))return n;if(!$r(e)){let i=Di(e);for(;i&&!_o(i);){if(kn(i)&&!Bf(i))return i;i=Di(i)}return n}let r=Vv(e,t);for(;r&&Wj(r)&&Bf(r);)r=Vv(r,t);return r&&_o(r)&&Bf(r)&&!Fp(r)?n:r||Gj(e)||n}const jN=async function(e){const t=this.getOffsetParent||db,n=this.getDimensions,r=await n(e.floating);return{reference:CN(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function NN(e){return Sr(e).direction==="rtl"}const TN={convertOffsetParentRelativeRectToViewportRelativeRect:yN,getDocumentElement:Br,getClippingRect:EN,getOffsetParent:db,getElementRects:jN,getClientRects:vN,getDimensions:_N,getScale:vo,isElement:kn,isRTL:NN};function fb(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function IN(e,t){let n=null,r;const i=Br(e);function o(){var u;clearTimeout(r),(u=n)==null||u.disconnect(),n=null}function l(u,c){u===void 0&&(u=!1),c===void 0&&(c=1),o();const f=e.getBoundingClientRect(),{left:h,top:p,width:y,height:v}=f;if(u||t(),!y||!v)return;const b=Su(p),w=Su(i.clientWidth-(h+y)),_=Su(i.clientHeight-(p+v)),E=Su(h),C={rootMargin:-b+"px "+-w+"px "+-_+"px "+-E+"px",threshold:hn(0,ys(1,c))||1};let M=!0;function D(R){const z=R[0].intersectionRatio;if(z!==c){if(!M)return l();z?l(!1,z):r=setTimeout(()=>{l(!1,1e-7)},1e3)}z===1&&!fb(f,e.getBoundingClientRect())&&l(),M=!1}try{n=new IntersectionObserver(D,{...C,root:i.ownerDocument})}catch{n=new IntersectionObserver(D,C)}n.observe(e)}return l(!0),o}function PN(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,f=Bp(e),h=i||o?[...f?qa(f):[],...qa(t)]:[];h.forEach(E=>{i&&E.addEventListener("scroll",n,{passive:!0}),o&&E.addEventListener("resize",n)});const p=f&&u?IN(f,n):null;let y=-1,v=null;l&&(v=new ResizeObserver(E=>{let[j]=E;j&&j.target===f&&v&&(v.unobserve(t),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var C;(C=v)==null||C.observe(t)})),n()}),f&&!c&&v.observe(f),v.observe(t));let b,w=c?vs(e):null;c&&_();function _(){const E=vs(e);w&&!fb(w,E)&&n(),w=E,b=requestAnimationFrame(_)}return n(),()=>{var E;h.forEach(j=>{i&&j.removeEventListener("scroll",n),o&&j.removeEventListener("resize",n)}),p==null||p(),(E=v)==null||E.disconnect(),v=null,c&&cancelAnimationFrame(b)}}const Uf=jc,AN=fN,RN=hN,ON=uN,MN=pN,DN=(e,t,n)=>{const r=new Map,i={platform:TN,...n},o={...i.platform,_c:r};return lN(e,t,{...i,platform:o})};var LN=typeof document<"u",$N=function(){},Lu=LN?k.useLayoutEffect:$N;function tc(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!tc(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&e.$$typeof)&&!tc(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function hb(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function qv(e,t){const n=hb(e);return Math.round(t*n)/n}function Wf(e){const t=k.useRef(e);return Lu(()=>{t.current=e}),t}function FN(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:l}={},transform:u=!0,whileElementsMounted:c,open:f}=e,[h,p]=k.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[y,v]=k.useState(r);tc(y,r)||v(r);const[b,w]=k.useState(null),[_,E]=k.useState(null),j=k.useCallback(L=>{L!==R.current&&(R.current=L,w(L))},[]),C=k.useCallback(L=>{L!==z.current&&(z.current=L,E(L))},[]),M=o||b,D=l||_,R=k.useRef(null),z=k.useRef(null),F=k.useRef(h),V=c!=null,A=Wf(c),O=Wf(i),Q=Wf(f),H=k.useCallback(()=>{if(!R.current||!z.current)return;const L={placement:t,strategy:n,middleware:y};O.current&&(L.platform=O.current),DN(R.current,z.current,L).then(ne=>{const T={...ne,isPositioned:Q.current!==!1};q.current&&!tc(F.current,T)&&(F.current=T,qn.flushSync(()=>{p(T)}))})},[y,t,n,O,Q]);Lu(()=>{f===!1&&F.current.isPositioned&&(F.current.isPositioned=!1,p(L=>({...L,isPositioned:!1})))},[f]);const q=k.useRef(!1);Lu(()=>(q.current=!0,()=>{q.current=!1}),[]),Lu(()=>{if(M&&(R.current=M),D&&(z.current=D),M&&D){if(A.current)return A.current(M,D,H);H()}},[M,D,H,A,V]);const $=k.useMemo(()=>({reference:R,floating:z,setReference:j,setFloating:C}),[j,C]),J=k.useMemo(()=>({reference:M,floating:D}),[M,D]),ie=k.useMemo(()=>{const L={position:n,left:0,top:0};if(!J.floating)return L;const ne=qv(J.floating,h.x),T=qv(J.floating,h.y);return u?{...L,transform:"translate("+ne+"px, "+T+"px)",...hb(J.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ne,top:T}},[n,u,J.floating,h.x,h.y]);return k.useMemo(()=>({...h,update:H,refs:$,elements:J,floatingStyles:ie}),[h,H,$,J,ie])}const pb=(e,t)=>({...AN(e),options:[e,t]}),zN=(e,t)=>({...RN(e),options:[e,t]}),BN=(e,t)=>({...ON(e),options:[e,t]}),UN=(e,t)=>({...MN(e),options:[e,t]}),mb={...qu},WN=mb.useInsertionEffect,HN=WN||(e=>e());function gb(e){const t=k.useRef(()=>{});return HN(()=>{t.current=e}),k.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var Wh=typeof document<"u"?k.useLayoutEffect:k.useEffect;let Yv=!1,VN=0;const Gv=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+VN++;function qN(){const[e,t]=k.useState(()=>Yv?Gv():void 0);return Wh(()=>{e==null&&t(Gv())},[]),k.useEffect(()=>{Yv=!0},[]),e}const YN=mb.useId,GN=YN||qN;function KN(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const JN=k.createContext(null),QN=k.createContext(null),XN=()=>{var e;return((e=k.useContext(JN))==null?void 0:e.id)||null},ZN=()=>k.useContext(QN),eT="data-floating-ui-focusable";function tT(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=GN(),o=k.useRef({}),[l]=k.useState(()=>KN()),u=XN()!=null,[c,f]=k.useState(r.reference),h=gb((v,b,w)=>{o.current.openEvent=v?b:void 0,l.emit("openchange",{open:v,event:b,reason:w,nested:u}),n==null||n(v,b,w)}),p=k.useMemo(()=>({setPositionReference:f}),[]),y=k.useMemo(()=>({reference:c||r.reference||null,floating:r.floating||null,domReference:r.reference}),[c,r.reference,r.floating]);return k.useMemo(()=>({dataRef:o,open:t,onOpenChange:h,elements:y,events:l,floatingId:i,refs:p}),[t,h,y,l,i,p])}function nT(e){e===void 0&&(e={});const{nodeId:t}=e,n=tT({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[o,l]=k.useState(null),[u,c]=k.useState(null),h=(i==null?void 0:i.domReference)||o,p=k.useRef(null),y=ZN();Wh(()=>{h&&(p.current=h)},[h]);const v=FN({...e,elements:{...i,...u&&{reference:u}}}),b=k.useCallback(C=>{const M=kn(C)?{getBoundingClientRect:()=>C.getBoundingClientRect(),contextElement:C}:C;c(M),v.refs.setReference(M)},[v.refs]),w=k.useCallback(C=>{(kn(C)||C===null)&&(p.current=C,l(C)),(kn(v.refs.reference.current)||v.refs.reference.current===null||C!==null&&!kn(C))&&v.refs.setReference(C)},[v.refs]),_=k.useMemo(()=>({...v.refs,setReference:w,setPositionReference:b,domReference:p}),[v.refs,w,b]),E=k.useMemo(()=>({...v.elements,domReference:h}),[v.elements,h]),j=k.useMemo(()=>({...v,...r,refs:_,elements:E,nodeId:t}),[v,_,E,t,r]);return Wh(()=>{r.dataRef.current.floatingContext=j;const C=y==null?void 0:y.nodesRef.current.find(M=>M.id===t);C&&(C.context=j)}),k.useMemo(()=>({...v,context:j,refs:_,elements:E}),[v,_,E,j])}const Kv="active",Jv="selected";function Hf(e,t,n){const r=new Map,i=n==="item";let o=e;if(i&&e){const{[Kv]:l,[Jv]:u,...c}=e;o=c}return{...n==="floating"&&{tabIndex:-1,[eT]:""},...o,...t.map(l=>{const u=l?l[n]:null;return typeof u=="function"?e?u(e):null:u}).concat(e).reduce((l,u)=>(u&&Object.entries(u).forEach(c=>{let[f,h]=c;if(!(i&&[Kv,Jv].includes(f)))if(f.indexOf("on")===0){if(r.has(f)||r.set(f,[]),typeof h=="function"){var p;(p=r.get(f))==null||p.push(h),l[f]=function(){for(var y,v=arguments.length,b=new Array(v),w=0;w<v;w++)b[w]=arguments[w];return(y=r.get(f))==null?void 0:y.map(_=>_(...b)).find(_=>_!==void 0)}}}else l[f]=h}),l),{})}}function rT(e){e===void 0&&(e=[]);const t=e.map(u=>u==null?void 0:u.reference),n=e.map(u=>u==null?void 0:u.floating),r=e.map(u=>u==null?void 0:u.item),i=k.useCallback(u=>Hf(u,e,"reference"),t),o=k.useCallback(u=>Hf(u,e,"floating"),n),l=k.useCallback(u=>Hf(u,e,"item"),r);return k.useMemo(()=>({getReferenceProps:i,getFloatingProps:o,getItemProps:l}),[i,o,l])}function Qv(e,t){return{...e,rects:{...e.rects,floating:{...e.rects.floating,height:t}}}}const iT=e=>({name:"inner",options:e,async fn(t){const{listRef:n,overflowRef:r,onFallbackChange:i,offset:o=0,index:l=0,minItemsVisible:u=4,referenceOverflowThreshold:c=0,scrollRef:f,...h}=Ao(e,t),{rects:p,elements:{floating:y}}=t,v=n.current[l],b=(f==null?void 0:f.current)||y,w=y.clientTop||b.clientTop,_=y.clientTop!==0,E=b.clientTop!==0,j=y===b;if(!v)return{};const C={...t,...await pb(-v.offsetTop-y.clientTop-p.reference.height/2-v.offsetHeight/2-o).fn(t)},M=await Uf(Qv(C,b.scrollHeight+w+y.clientTop),h),D=await Uf(C,{...h,elementContext:"reference"}),R=hn(0,M.top),z=C.y+R,A=(b.scrollHeight>b.clientHeight?O=>O:Ya)(hn(0,b.scrollHeight+(_&&j||E?w*2:0)-R-hn(0,M.bottom)));if(b.style.maxHeight=A+"px",b.scrollTop=R,i){const O=b.offsetHeight<v.offsetHeight*ys(u,n.current.length)-1||D.top>=-c||D.bottom>=-c;qn.flushSync(()=>i(O))}return r&&(r.current=await Uf(Qv({...C,y:z},b.offsetHeight+w+y.clientTop),h)),{y:z}}});function sT(e,t){const{open:n,elements:r}=e,{enabled:i=!0,overflowRef:o,scrollRef:l,onChange:u}=t,c=gb(u),f=k.useRef(!1),h=k.useRef(null),p=k.useRef(null);k.useEffect(()=>{if(!i)return;function v(w){if(w.ctrlKey||!b||o.current==null)return;const _=w.deltaY,E=o.current.top>=-.5,j=o.current.bottom>=-.5,C=b.scrollHeight-b.clientHeight,M=_<0?-1:1,D=_<0?"max":"min";b.scrollHeight<=b.clientHeight||(!E&&_>0||!j&&_<0?(w.preventDefault(),qn.flushSync(()=>{c(R=>R+Math[D](_,C*M))})):/firefox/i.test(Jj())&&(b.scrollTop+=_))}const b=(l==null?void 0:l.current)||r.floating;if(n&&b)return b.addEventListener("wheel",v),requestAnimationFrame(()=>{h.current=b.scrollTop,o.current!=null&&(p.current={...o.current})}),()=>{h.current=null,p.current=null,b.removeEventListener("wheel",v)}},[i,n,r.floating,o,l,c]);const y=k.useMemo(()=>({onKeyDown(){f.current=!0},onWheel(){f.current=!1},onPointerMove(){f.current=!1},onScroll(){const v=(l==null?void 0:l.current)||r.floating;if(!(!o.current||!v||!f.current)){if(h.current!==null){const b=v.scrollTop-h.current;(o.current.bottom<-.5&&b<-1||o.current.top<-.5&&b>1)&&qn.flushSync(()=>c(w=>w+b))}requestAnimationFrame(()=>{h.current=v.scrollTop})}}}),[r.floating,c,o,l]);return k.useMemo(()=>i?{floating:y}:{},[i,y])}let Ro=k.createContext({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});Ro.displayName="FloatingContext";let Up=k.createContext(null);Up.displayName="PlacementContext";function oT(e){return k.useMemo(()=>e?typeof e=="string"?{to:e}:e:null,[e])}function aT(){return k.useContext(Ro).setReference}function lT(){return k.useContext(Ro).getReferenceProps}function uT(){let{getFloatingProps:e,slot:t}=k.useContext(Ro);return k.useCallback((...n)=>Object.assign({},e(...n),{"data-anchor":t.anchor}),[e,t])}function cT(e=null){e===!1&&(e=null),typeof e=="string"&&(e={to:e});let t=k.useContext(Up),n=k.useMemo(()=>e,[JSON.stringify(e,(i,o)=>{var l;return(l=o==null?void 0:o.outerHTML)!=null?l:o})]);wt(()=>{t==null||t(n??null)},[t,n]);let r=k.useContext(Ro);return k.useMemo(()=>[r.setFloating,e?r.styles:{}],[r.setFloating,e,r.styles])}let Xv=4;function dT({children:e,enabled:t=!0}){let[n,r]=k.useState(null),[i,o]=k.useState(0),l=k.useRef(null),[u,c]=k.useState(null);fT(u);let f=t&&n!==null&&u!==null,{to:h="bottom",gap:p=0,offset:y=0,padding:v=0,inner:b}=hT(n,u),[w,_="center"]=h.split(" ");wt(()=>{f&&o(0)},[f]);let{refs:E,floatingStyles:j,context:C}=nT({open:f,placement:w==="selection"?_==="center"?"bottom":`bottom-${_}`:_==="center"?`${w}`:`${w}-${_}`,strategy:"absolute",transform:!1,middleware:[pb({mainAxis:w==="selection"?0:p,crossAxis:y}),zN({padding:v}),w!=="selection"&&BN({padding:v}),w==="selection"&&b?iT({...b,padding:v,overflowRef:l,offset:i,minItemsVisible:Xv,referenceOverflowThreshold:v,onFallbackChange(O){var Q,H;if(!O)return;let q=C.elements.floating;if(!q)return;let $=parseFloat(getComputedStyle(q).scrollPaddingBottom)||0,J=Math.min(Xv,q.childElementCount),ie=0,L=0;for(let ne of(H=(Q=C.elements.floating)==null?void 0:Q.childNodes)!=null?H:[])if(Kn(ne)){let T=ne.offsetTop,U=T+ne.clientHeight+$,Z=q.scrollTop,I=Z+q.clientHeight;if(T>=Z&&U<=I)J--;else{L=Math.max(0,Math.min(U,I)-Math.max(T,Z)),ie=ne.clientHeight;break}}J>=1&&o(ne=>{let T=ie*J-L+$;return ne>=T?ne:T})}}):null,UN({padding:v,apply({availableWidth:O,availableHeight:Q,elements:H}){Object.assign(H.floating.style,{overflow:"auto",maxWidth:`${O}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${Q}px)`})}})].filter(Boolean),whileElementsMounted:PN}),[M=w,D=_]=C.placement.split("-");w==="selection"&&(M="selection");let R=k.useMemo(()=>({anchor:[M,D].filter(Boolean).join(" ")}),[M,D]),z=sT(C,{overflowRef:l,onChange:o}),{getReferenceProps:F,getFloatingProps:V}=rT([z]),A=Ue(O=>{c(O),E.setFloating(O)});return k.createElement(Up.Provider,{value:r},k.createElement(Ro.Provider,{value:{setFloating:A,setReference:E.setReference,styles:j,getReferenceProps:F,getFloatingProps:V,slot:R}},e))}function fT(e){wt(()=>{if(!e)return;let t=new MutationObserver(()=>{let n=window.getComputedStyle(e).maxHeight,r=parseFloat(n);if(isNaN(r))return;let i=parseInt(n);isNaN(i)||r!==i&&(e.style.maxHeight=`${Math.ceil(r)}px`)});return t.observe(e,{attributes:!0,attributeFilter:["style"]}),()=>{t.disconnect()}},[e])}function hT(e,t){var n,r,i;let o=Vf((n=e==null?void 0:e.gap)!=null?n:"var(--anchor-gap, 0)",t),l=Vf((r=e==null?void 0:e.offset)!=null?r:"var(--anchor-offset, 0)",t),u=Vf((i=e==null?void 0:e.padding)!=null?i:"var(--anchor-padding, 0)",t);return{...e,gap:o,offset:l,padding:u}}function Vf(e,t,n=void 0){let r=Ss(),i=Ue((c,f)=>{if(c==null)return[n,null];if(typeof c=="number")return[c,null];if(typeof c=="string"){if(!f)return[n,null];let h=Zv(c,f);return[h,p=>{let y=yb(c);{let v=y.map(b=>window.getComputedStyle(f).getPropertyValue(b));r.requestAnimationFrame(function b(){r.nextFrame(b);let w=!1;for(let[E,j]of y.entries()){let C=window.getComputedStyle(f).getPropertyValue(j);if(v[E]!==C){v[E]=C,w=!0;break}}if(!w)return;let _=Zv(c,f);h!==_&&(p(_),h=_)})}return r.dispose}]}return[n,null]}),o=k.useMemo(()=>i(e,t)[0],[e,t]),[l=o,u]=k.useState();return wt(()=>{let[c,f]=i(e,t);if(u(c),!!f)return f(u)},[e,t]),l}function yb(e){let t=/var\((.*)\)/.exec(e);if(t){let n=t[1].indexOf(",");if(n===-1)return[t[1]];let r=t[1].slice(0,n).trim(),i=t[1].slice(n+1).trim();return i?[r,...yb(i)]:[r]}return[]}function Zv(e,t){let n=document.createElement("div");t.appendChild(n),n.style.setProperty("margin-top","0px","important"),n.style.setProperty("margin-top",e,"important");let r=parseFloat(window.getComputedStyle(n).marginTop)||0;return t.removeChild(n),r}let Tc=k.createContext(null);Tc.displayName="OpenClosedContext";var Sn=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Sn||{});function sl(){return k.useContext(Tc)}function vb({value:e,children:t}){return Ne.createElement(Tc.Provider,{value:e},t)}function pT({children:e}){return Ne.createElement(Tc.Provider,{value:null},e)}function mT(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Ii=[];mT(()=>{function e(t){if(!Or(t.target)||t.target===document.body||Ii[0]===t.target)return;let n=t.target;n=n.closest(Xu),Ii.unshift(n??t.target),Ii=Ii.filter(r=>r!=null&&r.isConnected),Ii.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function gT(e){throw new Error("Unexpected object: "+e)}var zt=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(zt||{});function Eu(e,t){let n=t.resolveItems();if(n.length<=0)return null;let r=t.resolveActiveIndex(),i=r??-1;switch(e.focus){case 0:{for(let o=0;o<n.length;++o)if(!t.resolveDisabled(n[o],o,n))return o;return r}case 1:{i===-1&&(i=n.length);for(let o=i-1;o>=0;--o)if(!t.resolveDisabled(n[o],o,n))return o;return r}case 2:{for(let o=i+1;o<n.length;++o)if(!t.resolveDisabled(n[o],o,n))return o;return r}case 3:{for(let o=n.length-1;o>=0;--o)if(!t.resolveDisabled(n[o],o,n))return o;return r}case 4:{for(let o=0;o<n.length;++o)if(t.resolveId(n[o],o,n)===e.id)return o;return r}case 5:return null;default:gT(e)}}function Wp(e){let t=Ue(e),n=k.useRef(!1);k.useEffect(()=>(n.current=!1,()=>{n.current=!0,bc(()=>{n.current&&t()})}),[t])}let xb=k.createContext(!1);function yT(){return k.useContext(xb)}function ex(e){return Ne.createElement(xb.Provider,{value:e.force},e.children)}function vT(e){let t=yT(),n=k.useContext(bb),[r,i]=k.useState(()=>{var o;if(!t&&n!==null)return(o=n.current)!=null?o:null;if(Mr.isServer)return null;let l=e==null?void 0:e.getElementById("headlessui-portal-root");if(l)return l;if(e===null)return null;let u=e.createElement("div");return u.setAttribute("id","headlessui-portal-root"),e.body.appendChild(u)});return k.useEffect(()=>{r!==null&&(e!=null&&e.body.contains(r)||e==null||e.body.appendChild(r))},[r,e]),k.useEffect(()=>{t||n!==null&&i(n.current)},[n,i,t]),r}let wb=k.Fragment,xT=Rt(function(e,t){let{ownerDocument:n=null,...r}=e,i=k.useRef(null),o=En(HC(y=>{i.current=y}),t),l=Va(i.current),u=n??l,c=vT(u),f=k.useContext(Hh),h=Ss(),p=Ut();return Wp(()=>{var y;c&&c.childNodes.length<=0&&((y=c.parentElement)==null||y.removeChild(c))}),c?qn.createPortal(Ne.createElement("div",{"data-headlessui-portal":"",ref:y=>{h.dispose(),f&&y&&h.add(f.register(y))}},p({ourProps:{ref:o},theirProps:r,slot:{},defaultTag:wb,name:"Portal"})),c):null});function wT(e,t){let n=En(t),{enabled:r=!0,ownerDocument:i,...o}=e,l=Ut();return r?Ne.createElement(xT,{...o,ownerDocument:i,ref:n}):l({ourProps:{ref:n},theirProps:o,slot:{},defaultTag:wb,name:"Portal"})}let bT=k.Fragment,bb=k.createContext(null);function kT(e,t){let{target:n,...r}=e,i={ref:En(t)},o=Ut();return Ne.createElement(bb.Provider,{value:n},o({ourProps:i,theirProps:r,defaultTag:bT,name:"Popover.Group"}))}let Hh=k.createContext(null);function ST(){let e=k.useContext(Hh),t=k.useRef([]),n=Ue(o=>(t.current.push(o),e&&e.register(o),()=>r(o))),r=Ue(o=>{let l=t.current.indexOf(o);l!==-1&&t.current.splice(l,1),e&&e.unregister(o)}),i=k.useMemo(()=>({register:n,unregister:r,portals:t}),[n,r,t]);return[t,k.useMemo(()=>function({children:o}){return Ne.createElement(Hh.Provider,{value:i},o)},[i])]}let ET=Rt(wT),kb=Rt(kT),Sb=Object.assign(ET,{Group:kb});const $u={Idle:{kind:"Idle"},Tracked:e=>({kind:"Tracked",position:e}),Moved:{kind:"Moved"}};function Eb(e){let t=e.getBoundingClientRect();return`${t.x},${t.y}`}function _T(e,t,n){let r=Mn();if(t.kind==="Tracked"){let i=function(){o!==Eb(e)&&(r.dispose(),n())},{position:o}=t,l=new ResizeObserver(i);l.observe(e),r.add(()=>l.disconnect()),r.addEventListener(window,"scroll",i,{passive:!0}),r.addEventListener(window,"resize",i)}return()=>r.dispose()}function CT(e,t=typeof document<"u"?document.defaultView:null,n){let r=nl(e,"escape");Xw(t,"keydown",i=>{r&&(i.defaultPrevented||i.key===Xt.Escape&&n(i))})}function jT(){var e;let[t]=k.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,r]=k.useState((e=t==null?void 0:t.matches)!=null?e:!1);return wt(()=>{if(!t)return;function i(o){r(o.matches)}return t.addEventListener("change",i),()=>t.removeEventListener("change",i)},[t]),n}function NT({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let r=Ue(()=>{var i,o;let l=ks(n),u=[];for(let c of e)c!==null&&(ti(c)?u.push(c):"current"in c&&ti(c.current)&&u.push(c.current));if(t!=null&&t.current)for(let c of t.current)u.push(c);for(let c of(i=l==null?void 0:l.querySelectorAll("html > *, body > *"))!=null?i:[])c!==document.body&&c!==document.head&&ti(c)&&c.id!=="headlessui-portal-root"&&(n&&(c.contains(n)||c.contains((o=n==null?void 0:n.getRootNode())==null?void 0:o.host))||u.some(f=>c.contains(f))||u.push(c));return u});return{resolveContainers:r,contains:Ue(i=>r().some(o=>o.contains(i)))}}let _b=k.createContext(null);function tx({children:e,node:t}){let[n,r]=k.useState(null),i=Cb(t??n);return Ne.createElement(_b.Provider,{value:i},e,i===null&&Ne.createElement($h,{features:Qu.Hidden,ref:o=>{var l,u;if(o){for(let c of(u=(l=ks(o))==null?void 0:l.querySelectorAll("html > *, body > *"))!=null?u:[])if(c!==document.body&&c!==document.head&&ti(c)&&c!=null&&c.contains(o)){r(c);break}}}}))}function Cb(e=null){var t;return(t=k.useContext(_b))!=null?t:e}function TT(){let e=typeof document>"u";return"useSyncExternalStore"in qu?(t=>t.useSyncExternalStore)(qu)(()=>()=>{},()=>!1,()=>!e):!1}function Ic(){let e=TT(),[t,n]=k.useState(Mr.isHandoffComplete);return t&&Mr.isHandoffComplete===!1&&n(!1),k.useEffect(()=>{t!==!0&&n(!0)},[t]),k.useEffect(()=>Mr.handoff(),[]),e?!1:t}function Hp(){let e=k.useRef(!1);return wt(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var ja=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(ja||{});function IT(){let e=k.useRef(0);return Jw(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function jb(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)ti(n.current)&&t.add(n.current);return t}let PT="div";var ls=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(ls||{});function AT(e,t){let n=k.useRef(null),r=En(n,t),{initialFocus:i,initialFocusFallback:o,containers:l,features:u=15,...c}=e;Ic()||(u=0);let f=Va(n.current);DT(u,{ownerDocument:f});let h=LT(u,{ownerDocument:f,container:n,initialFocus:i,initialFocusFallback:o});$T(u,{ownerDocument:f,container:n,containers:l,previousActiveElement:h});let p=IT(),y=Ue(j=>{if(!Kn(n.current))return;let C=n.current;(M=>M())(()=>{kr(p.current,{[ja.Forwards]:()=>{yo(C,xr.First,{skipElements:[j.relatedTarget,o]})},[ja.Backwards]:()=>{yo(C,xr.Last,{skipElements:[j.relatedTarget,o]})}})})}),v=nl(!!(u&2),"focus-trap#tab-lock"),b=Ss(),w=k.useRef(!1),_={ref:r,onKeyDown(j){j.key=="Tab"&&(w.current=!0,b.requestAnimationFrame(()=>{w.current=!1}))},onBlur(j){if(!(u&4))return;let C=jb(l);Kn(n.current)&&C.add(n.current);let M=j.relatedTarget;Or(M)&&M.dataset.headlessuiFocusGuard!=="true"&&(Nb(C,M)||(w.current?yo(n.current,kr(p.current,{[ja.Forwards]:()=>xr.Next,[ja.Backwards]:()=>xr.Previous})|xr.WrapAround,{relativeTo:j.target}):Or(j.target)&&Dr(j.target)))}},E=Ut();return Ne.createElement(Ne.Fragment,null,v&&Ne.createElement($h,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:y,features:Qu.Focusable}),E({ourProps:_,theirProps:c,defaultTag:PT,name:"FocusTrap"}),v&&Ne.createElement($h,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:y,features:Qu.Focusable}))}let RT=Rt(AT),OT=Object.assign(RT,{features:ls});function MT(e=!0){let t=k.useRef(Ii.slice());return $p(([n],[r])=>{r===!0&&n===!1&&bc(()=>{t.current.splice(0)}),r===!1&&n===!0&&(t.current=Ii.slice())},[e,Ii,t]),Ue(()=>{var n;return(n=t.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function DT(e,{ownerDocument:t}){let n=!!(e&8),r=MT(n);$p(()=>{n||Cw(t==null?void 0:t.body)&&Dr(r())},[n]),Wp(()=>{n&&Dr(r())})}function LT(e,{ownerDocument:t,container:n,initialFocus:r,initialFocusFallback:i}){let o=k.useRef(null),l=nl(!!(e&1),"focus-trap#initial-focus"),u=Hp();return $p(()=>{if(e===0)return;if(!l){i!=null&&i.current&&Dr(i.current);return}let c=n.current;c&&bc(()=>{if(!u.current)return;let f=t==null?void 0:t.activeElement;if(r!=null&&r.current){if((r==null?void 0:r.current)===f){o.current=f;return}}else if(c.contains(f)){o.current=f;return}if(r!=null&&r.current)Dr(r.current);else{if(e&16){if(yo(c,xr.First|xr.AutoFocus)!==zh.Error)return}else if(yo(c,xr.First)!==zh.Error)return;if(i!=null&&i.current&&(Dr(i.current),(t==null?void 0:t.activeElement)===i.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}o.current=t==null?void 0:t.activeElement})},[i,l,e]),o}function $T(e,{ownerDocument:t,container:n,containers:r,previousActiveElement:i}){let o=Hp(),l=!!(e&4);Xw(t==null?void 0:t.defaultView,"focus",u=>{if(!l||!o.current)return;let c=jb(r);Kn(n.current)&&c.add(n.current);let f=i.current;if(!f)return;let h=u.target;Kn(h)?Nb(c,h)?(i.current=h,Dr(h)):(u.preventDefault(),u.stopPropagation(),Dr(f)):Dr(i.current)},!0)}function Nb(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function Tb(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||!Pa((t=e.as)!=null?t:Pb)||Ne.Children.count(e.children)===1}let Pc=k.createContext(null);Pc.displayName="TransitionContext";var FT=(e=>(e.Visible="visible",e.Hidden="hidden",e))(FT||{});function zT(){let e=k.useContext(Pc);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function BT(){let e=k.useContext(Ac);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let Ac=k.createContext(null);Ac.displayName="NestingContext";function Rc(e){return"children"in e?Rc(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function Ib(e,t){let n=Es(e),r=k.useRef([]),i=Hp(),o=Ss(),l=Ue((v,b=Oi.Hidden)=>{let w=r.current.findIndex(({el:_})=>_===v);w!==-1&&(kr(b,{[Oi.Unmount](){r.current.splice(w,1)},[Oi.Hidden](){r.current[w].state="hidden"}}),o.microTask(()=>{var _;!Rc(r)&&i.current&&((_=n.current)==null||_.call(n))}))}),u=Ue(v=>{let b=r.current.find(({el:w})=>w===v);return b?b.state!=="visible"&&(b.state="visible"):r.current.push({el:v,state:"visible"}),()=>l(v,Oi.Unmount)}),c=k.useRef([]),f=k.useRef(Promise.resolve()),h=k.useRef({enter:[],leave:[]}),p=Ue((v,b,w)=>{c.current.splice(0),t&&(t.chains.current[b]=t.chains.current[b].filter(([_])=>_!==v)),t==null||t.chains.current[b].push([v,new Promise(_=>{c.current.push(_)})]),t==null||t.chains.current[b].push([v,new Promise(_=>{Promise.all(h.current[b].map(([E,j])=>j)).then(()=>_())})]),b==="enter"?f.current=f.current.then(()=>t==null?void 0:t.wait.current).then(()=>w(b)):w(b)}),y=Ue((v,b,w)=>{Promise.all(h.current[b].splice(0).map(([_,E])=>E)).then(()=>{var _;(_=c.current.shift())==null||_()}).then(()=>w(b))});return k.useMemo(()=>({children:r,register:u,unregister:l,onStart:p,onStop:y,wait:f,chains:h}),[u,l,r,p,y,h,f])}let Pb=k.Fragment,Ab=Eo.RenderStrategy;function UT(e,t){var n,r;let{transition:i=!0,beforeEnter:o,afterEnter:l,beforeLeave:u,afterLeave:c,enter:f,enterFrom:h,enterTo:p,entered:y,leave:v,leaveFrom:b,leaveTo:w,..._}=e,[E,j]=k.useState(null),C=k.useRef(null),M=Tb(e),D=En(...M?[C,t,j]:t===null?[]:[t]),R=(n=_.unmount)==null||n?Oi.Unmount:Oi.Hidden,{show:z,appear:F,initial:V}=zT(),[A,O]=k.useState(z?"visible":"hidden"),Q=BT(),{register:H,unregister:q}=Q;wt(()=>H(C),[H,C]),wt(()=>{if(R===Oi.Hidden&&C.current){if(z&&A!=="visible"){O("visible");return}return kr(A,{hidden:()=>q(C),visible:()=>H(C)})}},[A,C,H,q,z,R]);let $=Ic();wt(()=>{if(M&&$&&A==="visible"&&C.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[C,A,$,M]);let J=V&&!F,ie=F&&z&&V,L=k.useRef(!1),ne=Ib(()=>{L.current||(O("hidden"),q(C))},Q),T=Ue(fe=>{L.current=!0;let W=fe?"enter":"leave";ne.onStart(C,W,te=>{te==="enter"?o==null||o():te==="leave"&&(u==null||u())})}),U=Ue(fe=>{let W=fe?"enter":"leave";L.current=!1,ne.onStop(C,W,te=>{te==="enter"?l==null||l():te==="leave"&&(c==null||c())}),W==="leave"&&!Rc(ne)&&(O("hidden"),q(C))});k.useEffect(()=>{M&&i||(T(z),U(z))},[z,M,i]);let Z=!(!i||!M||!$||J),[,I]=tb(Z,E,z,{start:T,end:U}),ye=ss({ref:D,className:((r=Lh(_.className,ie&&f,ie&&h,I.enter&&f,I.enter&&I.closed&&h,I.enter&&!I.closed&&p,I.leave&&v,I.leave&&!I.closed&&b,I.leave&&I.closed&&w,!I.transition&&z&&y))==null?void 0:r.trim())||void 0,...eb(I)}),me=0;A==="visible"&&(me|=Sn.Open),A==="hidden"&&(me|=Sn.Closed),z&&A==="hidden"&&(me|=Sn.Opening),!z&&A==="visible"&&(me|=Sn.Closing);let pe=Ut();return Ne.createElement(Ac.Provider,{value:ne},Ne.createElement(vb,{value:me},pe({ourProps:ye,theirProps:_,defaultTag:Pb,features:Ab,visible:A==="visible",name:"Transition.Child"})))}function WT(e,t){let{show:n,appear:r=!1,unmount:i=!0,...o}=e,l=k.useRef(null),u=Tb(e),c=En(...u?[l,t]:t===null?[]:[t]);Ic();let f=sl();if(n===void 0&&f!==null&&(n=(f&Sn.Open)===Sn.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[h,p]=k.useState(n?"visible":"hidden"),y=Ib(()=>{n||p("hidden")}),[v,b]=k.useState(!0),w=k.useRef([n]);wt(()=>{v!==!1&&w.current[w.current.length-1]!==n&&(w.current.push(n),b(!1))},[w,n]);let _=k.useMemo(()=>({show:n,appear:r,initial:v}),[n,r,v]);wt(()=>{n?p("visible"):!Rc(y)&&l.current!==null&&p("hidden")},[n,y]);let E={unmount:i},j=Ue(()=>{var D;v&&b(!1),(D=e.beforeEnter)==null||D.call(e)}),C=Ue(()=>{var D;v&&b(!1),(D=e.beforeLeave)==null||D.call(e)}),M=Ut();return Ne.createElement(Ac.Provider,{value:y},Ne.createElement(Pc.Provider,{value:_},M({ourProps:{...E,as:k.Fragment,children:Ne.createElement(Rb,{ref:c,...E,...o,beforeEnter:j,beforeLeave:C})},theirProps:{},defaultTag:k.Fragment,features:Ab,visible:h==="visible",name:"Transition"})))}function HT(e,t){let n=k.useContext(Pc)!==null,r=sl()!==null;return Ne.createElement(Ne.Fragment,null,!n&&r?Ne.createElement(Vh,{ref:t,...e}):Ne.createElement(Rb,{ref:t,...e}))}let Vh=Rt(WT),Rb=Rt(UT),Vp=Rt(HT),VT=Object.assign(Vh,{Child:Vp,Root:Vh});var qT=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(qT||{}),YT=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(YT||{});let GT={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},qp=k.createContext(null);qp.displayName="DialogContext";function Oc(e){let t=k.useContext(qp);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Oc),n}return t}function KT(e,t){return kr(t.type,GT,e,t)}let nx=Rt(function(e,t){let n=k.useId(),{id:r=`headlessui-dialog-${n}`,open:i,onClose:o,initialFocus:l,role:u="dialog",autoFocus:c=!0,__demoMode:f=!1,unmount:h=!1,...p}=e,y=k.useRef(!1);u=(function(){return u==="dialog"||u==="alertdialog"?u:(y.current||(y.current=!0,console.warn(`Invalid role [${u}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")})();let v=sl();i===void 0&&v!==null&&(i=(v&Sn.Open)===Sn.Open);let b=k.useRef(null),w=En(b,t),_=Va(b.current),E=i?0:1,[j,C]=k.useReducer(KT,{titleId:null,descriptionId:null,panelRef:k.createRef()}),M=Ue(()=>o(!1)),D=Ue(I=>C({type:0,id:I})),R=Ic()?E===0:!1,[z,F]=ST(),V={get current(){var I;return(I=j.panelRef.current)!=null?I:b.current}},A=Cb(),{resolveContainers:O}=NT({mainTreeNode:A,portals:z,defaultContainers:[V]}),Q=v!==null?(v&Sn.Closing)===Sn.Closing:!1;Hw(f||Q?!1:R,{allowed:Ue(()=>{var I,ye;return[(ye=(I=b.current)==null?void 0:I.closest("[data-headlessui-portal]"))!=null?ye:null]}),disallowed:Ue(()=>{var I;return[(I=A==null?void 0:A.closest("body > *:not(#headlessui-portal-root)"))!=null?I:null]})});let H=Sc.get(null);wt(()=>{if(R)return H.actions.push(r),()=>H.actions.pop(r)},[H,r,R]);let q=or(H,k.useCallback(I=>H.selectors.isTop(I,r),[H,r]));Qw(q,O,I=>{I.preventDefault(),M()}),CT(q,_==null?void 0:_.defaultView,I=>{I.preventDefault(),I.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),M()}),Zw(f||Q?!1:R,_,O),Vw(R,b,M);let[$,J]=Mw(),ie=k.useMemo(()=>[{dialogState:E,close:M,setTitleId:D,unmount:h},j],[E,M,D,h,j]),L=zr({open:E===0}),ne={ref:w,id:r,role:u,tabIndex:-1,"aria-modal":f?void 0:E===0?!0:void 0,"aria-labelledby":j.titleId,"aria-describedby":$,unmount:h},T=!jT(),U=ls.None;R&&!f&&(U|=ls.RestoreFocus,U|=ls.TabLock,c&&(U|=ls.AutoFocus),T&&(U|=ls.InitialFocus));let Z=Ut();return Ne.createElement(pT,null,Ne.createElement(ex,{force:!0},Ne.createElement(Sb,null,Ne.createElement(qp.Provider,{value:ie},Ne.createElement(kb,{target:b},Ne.createElement(ex,{force:!1},Ne.createElement(J,{slot:L},Ne.createElement(F,null,Ne.createElement(OT,{initialFocus:l,initialFocusFallback:b,containers:O,features:U},Ne.createElement(ej,{value:M},Z({ourProps:ne,theirProps:p,slot:L,defaultTag:JT,features:QT,visible:E===0,name:"Dialog"})))))))))))}),JT="div",QT=Eo.RenderStrategy|Eo.Static;function XT(e,t){let{transition:n=!1,open:r,...i}=e,o=sl(),l=e.hasOwnProperty("open")||o!==null,u=e.hasOwnProperty("onClose");if(!l&&!u)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!l)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!u)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!o&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(r!==void 0||n)&&!i.static?Ne.createElement(tx,null,Ne.createElement(VT,{show:r,transition:n,unmount:i.unmount},Ne.createElement(nx,{ref:t,...i}))):Ne.createElement(tx,null,Ne.createElement(nx,{ref:t,open:r,...i}))}let ZT="div";function eI(e,t){let n=k.useId(),{id:r=`headlessui-dialog-panel-${n}`,transition:i=!1,...o}=e,[{dialogState:l,unmount:u},c]=Oc("Dialog.Panel"),f=En(t,c.panelRef),h=zr({open:l===0}),p=Ue(_=>{_.stopPropagation()}),y={ref:f,id:r,onClick:p},v=i?Vp:k.Fragment,b=i?{unmount:u}:{},w=Ut();return Ne.createElement(v,{...b},w({ourProps:y,theirProps:o,slot:h,defaultTag:ZT,name:"Dialog.Panel"}))}let tI="div";function nI(e,t){let{transition:n=!1,...r}=e,[{dialogState:i,unmount:o}]=Oc("Dialog.Backdrop"),l=zr({open:i===0}),u={ref:t,"aria-hidden":!0},c=n?Vp:k.Fragment,f=n?{unmount:o}:{},h=Ut();return Ne.createElement(c,{...f},h({ourProps:u,theirProps:r,slot:l,defaultTag:tI,name:"Dialog.Backdrop"}))}let rI="h2";function iI(e,t){let n=k.useId(),{id:r=`headlessui-dialog-title-${n}`,...i}=e,[{dialogState:o,setTitleId:l}]=Oc("Dialog.Title"),u=En(t);k.useEffect(()=>(l(r),()=>l(null)),[r,l]);let c=zr({open:o===0}),f={ref:u,id:r};return Ut()({ourProps:f,theirProps:i,slot:c,defaultTag:rI,name:"Dialog.Title"})}let sI=Rt(XT),oI=Rt(eI);Rt(nI);let aI=Rt(iI),rx=Object.assign(sI,{Panel:oI,Title:aI,Description:GC}),ix=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function sx(e){var t,n;let r=(t=e.innerText)!=null?t:"",i=e.cloneNode(!0);if(!Kn(i))return r;let o=!1;for(let u of i.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))u.remove(),o=!0;let l=o?(n=i.innerText)!=null?n:"":r;return ix.test(l)&&(l=l.replace(ix,"")),l}function lI(e){let t=e.getAttribute("aria-label");if(typeof t=="string")return t.trim();let n=e.getAttribute("aria-labelledby");if(n){let r=n.split(" ").map(i=>{let o=document.getElementById(i);if(o){let l=o.getAttribute("aria-label");return typeof l=="string"?l.trim():sx(o).trim()}return null}).filter(Boolean);if(r.length>0)return r.join(", ")}return sx(e).trim()}function uI(e){let t=k.useRef(""),n=k.useRef("");return Ue(()=>{let r=e.current;if(!r)return"";let i=r.innerText;if(t.current===i)return n.current;let o=lI(r).trim().toLowerCase();return t.current=i,n.current=o,o})}var cI=Object.defineProperty,dI=(e,t,n)=>t in e?cI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ox=(e,t,n)=>(dI(e,typeof t!="symbol"?t+"":t,n),n),dn=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(dn||{}),nc=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(nc||{}),ft=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItems=5]="RegisterItems",e[e.UnregisterItems=6]="UnregisterItems",e[e.SetButtonElement=7]="SetButtonElement",e[e.SetItemsElement=8]="SetItemsElement",e[e.SortItems=9]="SortItems",e[e.MarkButtonAsMoved=10]="MarkButtonAsMoved",e))(ft||{});function ax(e,t=n=>n){let n=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,r=Gw(t(e.items.slice()),o=>o.dataRef.current.domRef.current),i=n?r.indexOf(n):null;return i===-1&&(i=null),{items:r,activeItemIndex:i}}let fI={1(e){if(e.menuState===1)return e;let t=e.buttonElement?$u.Tracked(Eb(e.buttonElement)):e.buttonPositionState;return{...e,activeItemIndex:null,pendingFocus:{focus:zt.Nothing},menuState:1,buttonPositionState:t}},0(e,t){return e.menuState===0?e:{...e,__demoMode:!1,pendingFocus:t.focus,menuState:0,buttonPositionState:$u.Idle}},2:(e,t)=>{var n,r,i,o,l;if(e.menuState===1)return e;let u={...e,searchQuery:"",activationTrigger:(n=t.trigger)!=null?n:1,__demoMode:!1};if(t.focus===zt.Nothing)return{...u,activeItemIndex:null};if(t.focus===zt.Specific)return{...u,activeItemIndex:e.items.findIndex(h=>h.id===t.id)};if(t.focus===zt.Previous){let h=e.activeItemIndex;if(h!==null){let p=e.items[h].dataRef.current.domRef,y=Eu(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:v=>v.id,resolveDisabled:v=>v.dataRef.current.disabled});if(y!==null){let v=e.items[y].dataRef.current.domRef;if(((r=p.current)==null?void 0:r.previousElementSibling)===v.current||((i=v.current)==null?void 0:i.previousElementSibling)===null)return{...u,activeItemIndex:y}}}}else if(t.focus===zt.Next){let h=e.activeItemIndex;if(h!==null){let p=e.items[h].dataRef.current.domRef,y=Eu(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:v=>v.id,resolveDisabled:v=>v.dataRef.current.disabled});if(y!==null){let v=e.items[y].dataRef.current.domRef;if(((o=p.current)==null?void 0:o.nextElementSibling)===v.current||((l=v.current)==null?void 0:l.nextElementSibling)===null)return{...u,activeItemIndex:y}}}}let c=ax(e),f=Eu(t,{resolveItems:()=>c.items,resolveActiveIndex:()=>c.activeItemIndex,resolveId:h=>h.id,resolveDisabled:h=>h.dataRef.current.disabled});return{...u,...c,activeItemIndex:f}},3:(e,t)=>{let n=e.searchQuery!==""?0:1,r=e.searchQuery+t.value.toLowerCase(),i=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+n).concat(e.items.slice(0,e.activeItemIndex+n)):e.items).find(l=>{var u;return((u=l.dataRef.current.textValue)==null?void 0:u.startsWith(r))&&!l.dataRef.current.disabled}),o=i?e.items.indexOf(i):-1;return o===-1||o===e.activeItemIndex?{...e,searchQuery:r}:{...e,searchQuery:r,activeItemIndex:o,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,t)=>{let n=e.items.concat(t.items.map(i=>i)),r=e.activeItemIndex;return e.pendingFocus.focus!==zt.Nothing&&(r=Eu(e.pendingFocus,{resolveItems:()=>n,resolveActiveIndex:()=>e.activeItemIndex,resolveId:i=>i.id,resolveDisabled:i=>i.dataRef.current.disabled})),{...e,items:n,activeItemIndex:r,pendingFocus:{focus:zt.Nothing},pendingShouldSort:!0}},6:(e,t)=>{let n=e.items,r=[],i=new Set(t.items);for(let[o,l]of n.entries())if(i.has(l.id)&&(r.push(o),i.delete(l.id),i.size===0))break;if(r.length>0){n=n.slice();for(let o of r.reverse())n.splice(o,1)}return{...e,items:n,activationTrigger:1}},7:(e,t)=>e.buttonElement===t.element?e:{...e,buttonElement:t.element},8:(e,t)=>e.itemsElement===t.element?e:{...e,itemsElement:t.element},9:e=>e.pendingShouldSort?{...e,...ax(e),pendingShouldSort:!1}:e,10(e){return e.buttonPositionState.kind!=="Tracked"?e:{...e,buttonPositionState:$u.Moved}}};class Yp extends zw{constructor(t){super(t),ox(this,"actions",{registerItem:_v(()=>{let n=[],r=new Set;return[(i,o)=>{r.has(o)||(r.add(o),n.push({id:i,dataRef:o}))},()=>(r.clear(),this.send({type:5,items:n.splice(0)}))]}),unregisterItem:_v(()=>{let n=[];return[r=>n.push(r),()=>this.send({type:6,items:n.splice(0)})]})}),ox(this,"selectors",{activeDescendantId(n){var r;let i=n.activeItemIndex,o=n.items;return i===null||(r=o[i])==null?void 0:r.id},isActive(n,r){var i;let o=n.activeItemIndex,l=n.items;return o!==null?((i=l[o])==null?void 0:i.id)===r:!1},shouldScrollIntoView(n,r){return n.__demoMode||n.menuState!==0||n.activationTrigger===0?!1:this.isActive(n,r)},didButtonMove(n){return n.buttonPositionState.kind==="Moved"}}),this.on(5,()=>{this.disposables.requestAnimationFrame(()=>{this.send({type:9})})});{let n=this.state.id,r=Sc.get(null);this.disposables.add(r.on(Uw.Push,i=>{!r.selectors.isTop(i,n)&&this.state.menuState===0&&this.send({type:1})})),this.on(0,()=>r.actions.push(n)),this.on(1,()=>r.actions.pop(n))}this.disposables.group(n=>{this.on(1,r=>{r.buttonElement&&(n.dispose(),n.add(_T(r.buttonElement,r.buttonPositionState,()=>{this.send({type:10})})))})})}static new({id:t,__demoMode:n=!1}){return new Yp({id:t,__demoMode:n,menuState:n?0:1,buttonElement:null,itemsElement:null,items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1,pendingShouldSort:!1,pendingFocus:{focus:zt.Nothing},buttonPositionState:$u.Idle})}reduce(t,n){return kr(n.type,fI,t,n)}}const Ob=k.createContext(null);function Gp(e){let t=k.useContext(Ob);if(t===null){let n=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Mb),n}return t}function Mb({id:e,__demoMode:t=!1}){let n=k.useMemo(()=>Yp.new({id:e,__demoMode:t}),[]);return Wp(()=>n.dispose()),n}let hI=k.Fragment;function pI(e,t){let n=k.useId(),{__demoMode:r=!1,...i}=e,o=Mb({id:n,__demoMode:r}),[l,u,c]=or(o,_=>[_.menuState,_.itemsElement,_.buttonElement]),f=En(t),h=Sc.get(null),p=or(h,k.useCallback(_=>h.selectors.isTop(_,n),[h,n]));Qw(p,[c,u],(_,E)=>{var j;o.send({type:ft.CloseMenu}),Lp(E,Dp.Loose)||(_.preventDefault(),(j=o.state.buttonElement)==null||j.focus())});let y=Ue(()=>{o.send({type:ft.CloseMenu})}),v=zr({open:l===dn.Open,close:y}),b={ref:f},w=Ut();return Ne.createElement(dT,null,Ne.createElement(Ob.Provider,{value:o},Ne.createElement(vb,{value:kr(l,{[dn.Open]:Sn.Open,[dn.Closed]:Sn.Closed})},w({ourProps:b,theirProps:i,slot:v,defaultTag:hI,name:"Menu"}))))}let mI="button";function gI(e,t){let n=Gp("Menu.Button"),r=k.useId(),{id:i=`headlessui-menu-button-${r}`,disabled:o=!1,autoFocus:l=!1,...u}=e,c=k.useRef(null),f=lT(),h=En(t,c,aT(),Ue(A=>n.send({type:ft.SetButtonElement,element:A}))),p=Ue(A=>{switch(A.key){case Xt.Space:case Xt.Enter:case Xt.ArrowDown:A.preventDefault(),A.stopPropagation(),n.send({type:ft.OpenMenu,focus:{focus:zt.First}});break;case Xt.ArrowUp:A.preventDefault(),A.stopPropagation(),n.send({type:ft.OpenMenu,focus:{focus:zt.Last}});break}}),y=Ue(A=>{switch(A.key){case Xt.Space:A.preventDefault();break}}),[v,b,w]=or(n,A=>[A.menuState,A.buttonElement,A.itemsElement]),_=v===dn.Open;Ej(_,{trigger:b,action:k.useCallback(A=>{if(b!=null&&b.contains(A.target))return ku.Ignore;let O=A.target.closest('[role="menuitem"]:not([data-disabled])');return Kn(O)?ku.Select(O):w!=null&&w.contains(A.target)?ku.Ignore:ku.Close},[b,w]),close:k.useCallback(()=>n.send({type:ft.CloseMenu}),[]),select:k.useCallback(A=>A.click(),[])});let E=nj(A=>{var O;o||(v===dn.Open?(qn.flushSync(()=>n.send({type:ft.CloseMenu})),(O=c.current)==null||O.focus({preventScroll:!0})):(A.preventDefault(),n.send({type:ft.OpenMenu,focus:{focus:zt.Nothing},trigger:nc.Pointer})))}),{isFocusVisible:j,focusProps:C}=kC({autoFocus:l}),{isHovered:M,hoverProps:D}=bC({isDisabled:o}),{pressed:R,pressProps:z}=NC({disabled:o}),F=zr({open:v===dn.Open,active:R||v===dn.Open,disabled:o,hover:M,focus:j,autofocus:l}),V=Tw(f(),{ref:h,id:i,type:_j(e,c.current),"aria-haspopup":"menu","aria-controls":w==null?void 0:w.id,"aria-expanded":v===dn.Open,disabled:o||void 0,autoFocus:l,onKeyDown:p,onKeyUp:y},E,C,D,z);return Ut()({ourProps:V,theirProps:u,slot:F,defaultTag:mI,name:"Menu.Button"})}let yI="div",vI=Eo.RenderStrategy|Eo.Static;function xI(e,t){let n=k.useId(),{id:r=`headlessui-menu-items-${n}`,anchor:i,portal:o=!1,modal:l=!0,transition:u=!1,...c}=e,f=oT(i),h=Gp("Menu.Items"),[p,y]=cT(f),v=uT(),[b,w]=k.useState(null),_=En(t,f?p:null,Ue(L=>h.send({type:ft.SetItemsElement,element:L})),w),[E,j]=or(h,L=>[L.menuState,L.buttonElement]),C=Va(j),M=Va(b);f&&(o=!0);let D=sl(),[R,z]=tb(u,b,D!==null?(D&Sn.Open)===Sn.Open:E===dn.Open);Vw(R,j,()=>{h.send({type:ft.CloseMenu})});let F=or(h,L=>L.__demoMode),V=F?!1:l&&E===dn.Open;Zw(V,M);let A=F?!1:l&&E===dn.Open;Hw(A,{allowed:k.useCallback(()=>[j,b],[j,b])});let O=or(h,h.selectors.didButtonMove)?!1:R;k.useEffect(()=>{let L=b;L&&E===dn.Open&&(Cw(L)||L.focus({preventScroll:!0}))},[E,b]),zj(E===dn.Open,{container:b,accept(L){return L.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:L.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(L){L.setAttribute("role","none")}});let Q=Ss(),H=Ue(L=>{var ne,T,U;switch(Q.dispose(),L.key){case Xt.Space:if(h.state.searchQuery!=="")return L.preventDefault(),L.stopPropagation(),h.send({type:ft.Search,value:L.key});case Xt.Enter:if(L.preventDefault(),L.stopPropagation(),h.state.activeItemIndex!==null){let{dataRef:Z}=h.state.items[h.state.activeItemIndex];(T=(ne=Z.current)==null?void 0:ne.domRef.current)==null||T.click()}h.send({type:ft.CloseMenu}),Yw(h.state.buttonElement);break;case Xt.ArrowDown:return L.preventDefault(),L.stopPropagation(),h.send({type:ft.GoToItem,focus:zt.Next});case Xt.ArrowUp:return L.preventDefault(),L.stopPropagation(),h.send({type:ft.GoToItem,focus:zt.Previous});case Xt.Home:case Xt.PageUp:return L.preventDefault(),L.stopPropagation(),h.send({type:ft.GoToItem,focus:zt.First});case Xt.End:case Xt.PageDown:return L.preventDefault(),L.stopPropagation(),h.send({type:ft.GoToItem,focus:zt.Last});case Xt.Escape:L.preventDefault(),L.stopPropagation(),qn.flushSync(()=>h.send({type:ft.CloseMenu})),(U=h.state.buttonElement)==null||U.focus({preventScroll:!0});break;case Xt.Tab:L.preventDefault(),L.stopPropagation(),qn.flushSync(()=>h.send({type:ft.CloseMenu})),wj(h.state.buttonElement,L.shiftKey?xr.Previous:xr.Next);break;default:L.key.length===1&&(h.send({type:ft.Search,value:L.key}),Q.setTimeout(()=>h.send({type:ft.ClearSearch}),350));break}}),q=Ue(L=>{switch(L.key){case Xt.Space:L.preventDefault();break}}),$=zr({open:E===dn.Open}),J=Tw(f?v():{},{"aria-activedescendant":or(h,h.selectors.activeDescendantId),"aria-labelledby":or(h,L=>{var ne;return(ne=L.buttonElement)==null?void 0:ne.id}),id:r,onKeyDown:H,onKeyUp:q,role:"menu",tabIndex:E===dn.Open?0:void 0,ref:_,style:{...c.style,...y,"--button-width":tj(R,j,!0).width},...eb(z)}),ie=Ut();return Ne.createElement(Sb,{enabled:o?e.static||R:!1,ownerDocument:C},ie({ourProps:J,theirProps:c,slot:$,defaultTag:yI,features:vI,visible:O,name:"Menu.Items"}))}let wI=k.Fragment;function bI(e,t){let n=k.useId(),{id:r=`headlessui-menu-item-${n}`,disabled:i=!1,...o}=e,l=Gp("Menu.Item"),u=or(l,O=>l.selectors.isActive(O,r)),c=k.useRef(null),f=En(t,c),h=or(l,O=>l.selectors.shouldScrollIntoView(O,r));wt(()=>{if(h)return Mn().requestAnimationFrame(()=>{var O,Q;(Q=(O=c.current)==null?void 0:O.scrollIntoView)==null||Q.call(O,{block:"nearest"})})},[h,c]);let p=uI(c),y=k.useRef({disabled:i,domRef:c,get textValue(){return p()}});wt(()=>{y.current.disabled=i},[y,i]),wt(()=>(l.actions.registerItem(r,y),()=>l.actions.unregisterItem(r)),[y,r]);let v=Ue(()=>{l.send({type:ft.CloseMenu})}),b=Ue(O=>{if(i)return O.preventDefault();l.send({type:ft.CloseMenu}),Yw(l.state.buttonElement)}),w=Ue(()=>{if(i)return l.send({type:ft.GoToItem,focus:zt.Nothing});l.send({type:ft.GoToItem,focus:zt.Specific,id:r})}),_=Aj(),E=Ue(O=>_.update(O)),j=Ue(O=>{_.wasMoved(O)&&(i||u||l.send({type:ft.GoToItem,focus:zt.Specific,id:r,trigger:nc.Pointer}))}),C=Ue(O=>{_.wasMoved(O)&&(i||u&&l.state.activationTrigger===nc.Pointer&&l.send({type:ft.GoToItem,focus:zt.Nothing}))}),[M,D]=Dw(),[R,z]=Mw(),F=zr({active:u,focus:u,disabled:i,close:v}),V={id:r,ref:f,role:"menuitem",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,"aria-labelledby":M,"aria-describedby":R,disabled:void 0,onClick:b,onFocus:w,onPointerEnter:E,onMouseEnter:E,onPointerMove:j,onMouseMove:j,onPointerLeave:C,onMouseLeave:C},A=Ut();return Ne.createElement(D,null,Ne.createElement(z,null,A({ourProps:V,theirProps:o,slot:F,defaultTag:wI,name:"Menu.Item"})))}let kI="div";function SI(e,t){let[n,r]=Dw(),i=e,o={ref:t,"aria-labelledby":n,role:"group"},l=Ut();return Ne.createElement(r,null,l({ourProps:o,theirProps:i,slot:{},defaultTag:kI,name:"Menu.Section"}))}let EI="header";function _I(e,t){let n=k.useId(),{id:r=`headlessui-menu-heading-${n}`,...i}=e,o=Mp();wt(()=>o.register(r),[r,o.register]);let l={id:r,ref:t,role:"presentation",...o.props};return Ut()({ourProps:l,theirProps:i,slot:{},defaultTag:EI,name:"Menu.Heading"})}let CI="div";function jI(e,t){let n=e,r={ref:t,role:"separator"};return Ut()({ourProps:r,theirProps:n,slot:{},defaultTag:CI,name:"Menu.Separator"})}let NI=Rt(pI),TI=Rt(gI),II=Rt(xI),PI=Rt(bI),AI=Rt(SI),RI=Rt(_I),OI=Rt(jI),ts=Object.assign(NI,{Button:TI,Items:II,Item:PI,Section:AI,Heading:RI,Separator:OI});const Db=k.createContext(void 0);function _s(){const e=k.useContext(Db);if(!e)throw new Error("useAuth debe usarse dentro de un AuthProvider");return e}const MI="modulepreload",DI=function(e){return"/sport-planner/"+e},lx={},ol=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let l=function(f){return Promise.all(f.map(h=>Promise.resolve(h).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),c=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));i=l(n.map(f=>{if(f=DI(f),f in lx)return;lx[f]=!0;const h=f.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${p}`))return;const y=document.createElement("link");if(y.rel=h?"stylesheet":MI,h||(y.as="script"),y.crossOrigin="",y.href=f,c&&y.setAttribute("nonce",c),document.head.appendChild(y),h)return new Promise((v,b)=>{y.addEventListener("load",v),y.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return i.then(l=>{for(const u of l||[])u.status==="rejected"&&o(u.reason);return t().catch(o)})},LI=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>ol(async()=>{const{default:r}=await Promise.resolve().then(()=>Oo);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class Kp extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class ux extends Kp{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class cx extends Kp{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class dx extends Kp{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var qh;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(qh||(qh={}));var $I=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};class FI{constructor(t,{headers:n={},customFetch:r,region:i=qh.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=LI(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return $I(this,arguments,void 0,function*(n,r={}){var i;try{const{headers:o,method:l,body:u,signal:c}=r;let f={},{region:h}=r;h||(h=this.region);const p=new URL(`${this.url}/${n}`);h&&h!=="any"&&(f["x-region"]=h,p.searchParams.set("forceFunctionRegion",h));let y;u&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",y=u):typeof u=="string"?(f["Content-Type"]="text/plain",y=u):typeof FormData<"u"&&u instanceof FormData?y=u:(f["Content-Type"]="application/json",y=JSON.stringify(u)));const v=yield this.fetch(p.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),o),body:y,signal:c}).catch(E=>{throw E.name==="AbortError"?E:new ux(E)}),b=v.headers.get("x-relay-error");if(b&&b==="true")throw new cx(v);if(!v.ok)throw new dx(v);let w=((i=v.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),_;return w==="application/json"?_=yield v.json():w==="application/octet-stream"?_=yield v.blob():w==="text/event-stream"?_=v:w==="multipart/form-data"?_=yield v.formData():_=yield v.text(),{data:_,error:null,response:v}}catch(o){return o instanceof Error&&o.name==="AbortError"?{data:null,error:new ux(o)}:{data:null,error:o,response:o instanceof dx||o instanceof cx?o.context:void 0}}})}}var Qt={},Js={},Qs={},Xs={},Zs={},eo={},zI=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Co=zI();const BI=Co.fetch,Lb=Co.fetch.bind(Co),$b=Co.Headers,UI=Co.Request,WI=Co.Response,Oo=Object.freeze(Object.defineProperty({__proto__:null,Headers:$b,Request:UI,Response:WI,default:Lb,fetch:BI},Symbol.toStringTag,{value:"Module"})),HI=$E(Oo);var _u={},fx;function Fb(){if(fx)return _u;fx=1,Object.defineProperty(_u,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return _u.default=e,_u}var hx;function zb(){if(hx)return eo;hx=1;var e=eo&&eo.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(eo,"__esModule",{value:!0});const t=e(HI),n=e(Fb());class r{constructor(o){var l,u;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(l=o.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=o.signal,this.isMaybeSingle=(u=o.isMaybeSingle)!==null&&u!==void 0?u:!1,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,l){return this.headers=new Headers(this.headers),this.headers.set(o,l),this}then(o,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let c=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var h,p,y,v;let b=null,w=null,_=null,E=f.status,j=f.statusText;if(f.ok){if(this.method!=="HEAD"){const R=await f.text();R===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((h=this.headers.get("Accept"))===null||h===void 0)&&h.includes("application/vnd.pgrst.plan+text"))?w=R:w=JSON.parse(R))}const M=(p=this.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),D=(y=f.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");M&&D&&D.length>1&&(_=parseInt(D[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(w)&&(w.length>1?(b={code:"PGRST116",details:`Results contain ${w.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},w=null,_=null,E=406,j="Not Acceptable"):w.length===1?w=w[0]:w=null)}else{const M=await f.text();try{b=JSON.parse(M),Array.isArray(b)&&f.status===404&&(w=[],b=null,E=200,j="OK")}catch{f.status===404&&M===""?(E=204,j="No Content"):b={message:M}}if(b&&this.isMaybeSingle&&(!((v=b==null?void 0:b.details)===null||v===void 0)&&v.includes("0 rows"))&&(b=null,E=200,j="OK"),b&&this.shouldThrowOnError)throw new n.default(b)}return{error:b,data:w,count:_,status:E,statusText:j}});return this.shouldThrowOnError||(c=c.catch(f=>{var h,p,y;return{error:{message:`${(h=f==null?void 0:f.name)!==null&&h!==void 0?h:"FetchError"}: ${f==null?void 0:f.message}`,details:`${(p=f==null?void 0:f.stack)!==null&&p!==void 0?p:""}`,hint:"",code:`${(y=f==null?void 0:f.code)!==null&&y!==void 0?y:""}`},data:null,count:null,status:0,statusText:""}})),c.then(o,l)}returns(){return this}overrideTypes(){return this}}return eo.default=r,eo}var px;function Bb(){if(px)return Zs;px=1;var e=Zs&&Zs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Zs,"__esModule",{value:!0});const t=e(zb());class n extends t.default{select(i){let o=!1;const l=(i??"*").split("").map(u=>/\s/.test(u)&&!o?"":(u==='"'&&(o=!o),u)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:o=!0,nullsFirst:l,foreignTable:u,referencedTable:c=u}={}){const f=c?`${c}.order`:"order",h=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${h?`${h},`:""}${i}.${o?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:o,referencedTable:l=o}={}){const u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${i}`),this}range(i,o,{foreignTable:l,referencedTable:u=l}={}){const c=typeof u>"u"?"offset":`${u}.offset`,f=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(c,`${i}`),this.url.searchParams.set(f,`${o-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:o=!1,settings:l=!1,buffers:u=!1,wal:c=!1,format:f="text"}={}){var h;const p=[i?"analyze":null,o?"verbose":null,l?"settings":null,u?"buffers":null,c?"wal":null].filter(Boolean).join("|"),y=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${f}; for="${y}"; options=${p};`),f==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return Zs.default=n,Zs}var mx;function Jp(){if(mx)return Xs;mx=1;var e=Xs&&Xs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Xs,"__esModule",{value:!0});const t=e(Bb());class n extends t.default{eq(i,o){return this.url.searchParams.append(i,`eq.${o}`),this}neq(i,o){return this.url.searchParams.append(i,`neq.${o}`),this}gt(i,o){return this.url.searchParams.append(i,`gt.${o}`),this}gte(i,o){return this.url.searchParams.append(i,`gte.${o}`),this}lt(i,o){return this.url.searchParams.append(i,`lt.${o}`),this}lte(i,o){return this.url.searchParams.append(i,`lte.${o}`),this}like(i,o){return this.url.searchParams.append(i,`like.${o}`),this}likeAllOf(i,o){return this.url.searchParams.append(i,`like(all).{${o.join(",")}}`),this}likeAnyOf(i,o){return this.url.searchParams.append(i,`like(any).{${o.join(",")}}`),this}ilike(i,o){return this.url.searchParams.append(i,`ilike.${o}`),this}ilikeAllOf(i,o){return this.url.searchParams.append(i,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(i,o){return this.url.searchParams.append(i,`ilike(any).{${o.join(",")}}`),this}is(i,o){return this.url.searchParams.append(i,`is.${o}`),this}in(i,o){const l=Array.from(new Set(o)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(i,`in.(${l})`),this}contains(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cs.{${o.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(o)}`),this}containedBy(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cd.{${o.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(o)}`),this}rangeGt(i,o){return this.url.searchParams.append(i,`sr.${o}`),this}rangeGte(i,o){return this.url.searchParams.append(i,`nxl.${o}`),this}rangeLt(i,o){return this.url.searchParams.append(i,`sl.${o}`),this}rangeLte(i,o){return this.url.searchParams.append(i,`nxr.${o}`),this}rangeAdjacent(i,o){return this.url.searchParams.append(i,`adj.${o}`),this}overlaps(i,o){return typeof o=="string"?this.url.searchParams.append(i,`ov.${o}`):this.url.searchParams.append(i,`ov.{${o.join(",")}}`),this}textSearch(i,o,{config:l,type:u}={}){let c="";u==="plain"?c="pl":u==="phrase"?c="ph":u==="websearch"&&(c="w");const f=l===void 0?"":`(${l})`;return this.url.searchParams.append(i,`${c}fts${f}.${o}`),this}match(i){return Object.entries(i).forEach(([o,l])=>{this.url.searchParams.append(o,`eq.${l}`)}),this}not(i,o,l){return this.url.searchParams.append(i,`not.${o}.${l}`),this}or(i,{foreignTable:o,referencedTable:l=o}={}){const u=l?`${l}.or`:"or";return this.url.searchParams.append(u,`(${i})`),this}filter(i,o,l){return this.url.searchParams.append(i,`${o}.${l}`),this}}return Xs.default=n,Xs}var gx;function Ub(){if(gx)return Qs;gx=1;var e=Qs&&Qs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Qs,"__esModule",{value:!0});const t=e(Jp());class n{constructor(i,{headers:o={},schema:l,fetch:u}){this.url=i,this.headers=new Headers(o),this.schema=l,this.fetch=u}select(i,o){const{head:l=!1,count:u}=o??{},c=l?"HEAD":"GET";let f=!1;const h=(i??"*").split("").map(p=>/\s/.test(p)&&!f?"":(p==='"'&&(f=!f),p)).join("");return this.url.searchParams.set("select",h),u&&this.headers.append("Prefer",`count=${u}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:o,defaultToNull:l=!0}={}){var u;const c="POST";if(o&&this.headers.append("Prefer",`count=${o}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const f=i.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(f.length>0){const h=[...new Set(f)].map(p=>`"${p}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}upsert(i,{onConflict:o,ignoreDuplicates:l=!1,count:u,defaultToNull:c=!0}={}){var f;const h="POST";if(this.headers.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),u&&this.headers.append("Prefer",`count=${u}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const p=i.reduce((y,v)=>y.concat(Object.keys(v)),[]);if(p.length>0){const y=[...new Set(p)].map(v=>`"${v}"`);this.url.searchParams.set("columns",y.join(","))}}return new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}update(i,{count:o}={}){var l;const u="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:i}={}){var o;const l="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}}return Qs.default=n,Qs}var yx;function VI(){if(yx)return Js;yx=1;var e=Js&&Js.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Js,"__esModule",{value:!0});const t=e(Ub()),n=e(Jp());class r{constructor(o,{headers:l={},schema:u,fetch:c}={}){this.url=o,this.headers=new Headers(l),this.schemaName=u,this.fetch=c}from(o){const l=new URL(`${this.url}/${o}`);return new t.default(l,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new r(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,l={},{head:u=!1,get:c=!1,count:f}={}){var h;let p;const y=new URL(`${this.url}/rpc/${o}`);let v;u||c?(p=u?"HEAD":"GET",Object.entries(l).filter(([w,_])=>_!==void 0).map(([w,_])=>[w,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([w,_])=>{y.searchParams.append(w,_)})):(p="POST",v=l);const b=new Headers(this.headers);return f&&b.set("Prefer",`count=${f}`),new n.default({method:p,url:y,headers:b,schema:this.schemaName,body:v,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}}return Js.default=r,Js}var vx;function qI(){if(vx)return Qt;vx=1;var e=Qt&&Qt.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.PostgrestError=Qt.PostgrestBuilder=Qt.PostgrestTransformBuilder=Qt.PostgrestFilterBuilder=Qt.PostgrestQueryBuilder=Qt.PostgrestClient=void 0;const t=e(VI());Qt.PostgrestClient=t.default;const n=e(Ub());Qt.PostgrestQueryBuilder=n.default;const r=e(Jp());Qt.PostgrestFilterBuilder=r.default;const i=e(Bb());Qt.PostgrestTransformBuilder=i.default;const o=e(zb());Qt.PostgrestBuilder=o.default;const l=e(Fb());return Qt.PostgrestError=l.default,Qt.default={PostgrestClient:t.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:o.default,PostgrestError:l.default},Qt}var YI=qI();const GI=To(YI),{PostgrestClient:KI,PostgrestQueryBuilder:u5,PostgrestFilterBuilder:c5,PostgrestTransformBuilder:d5,PostgrestBuilder:f5,PostgrestError:h5}=GI;class JI{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const QI="2.75.0",XI=`realtime-js/${QI}`,ZI="1.0.0",Yh=1e4,eP=1e3,tP=100;var Ra;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ra||(Ra={}));var qt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(qt||(qt={}));var vr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(vr||(vr={}));var Gh;(function(e){e.websocket="websocket"})(Gh||(Gh={}));var us;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(us||(us={}));class nP{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const i=n.getUint8(1),o=n.getUint8(2);let l=this.HEADER_LENGTH+2;const u=r.decode(t.slice(l,l+i));l=l+i;const c=r.decode(t.slice(l,l+o));l=l+o;const f=JSON.parse(r.decode(t.slice(l,t.byteLength)));return{ref:null,topic:u,event:c,payload:f}}}class Wb{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var mt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(mt||(mt={}));const xx=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((o,l)=>(o[l]=rP(l,e,t,i),o),{}):{}},rP=(e,t,n,r)=>{const i=t.find(u=>u.name===e),o=i==null?void 0:i.type,l=n[e];return o&&!r.includes(o)?Hb(o,l):Kh(l)},Hb=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return aP(t,n)}switch(e){case mt.bool:return iP(t);case mt.float4:case mt.float8:case mt.int2:case mt.int4:case mt.int8:case mt.numeric:case mt.oid:return sP(t);case mt.json:case mt.jsonb:return oP(t);case mt.timestamp:return lP(t);case mt.abstime:case mt.date:case mt.daterange:case mt.int4range:case mt.int8range:case mt.money:case mt.reltime:case mt.text:case mt.time:case mt.timestamptz:case mt.timetz:case mt.tsrange:case mt.tstzrange:return Kh(t);default:return Kh(t)}},Kh=e=>e,iP=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},sP=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},oP=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},aP=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let o;const l=e.slice(1,n);try{o=JSON.parse("["+l+"]")}catch{o=l?l.split(","):[]}return o.map(u=>Hb(t,u))}return e},lP=e=>typeof e=="string"?e.replace(" ","T"):e,Vb=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class qf{constructor(t,n,r={},i=Yh){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var wx;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(wx||(wx={}));class Oa{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Oa.syncState(this.state,i,o,l),this.pendingDiffs.forEach(c=>{this.state=Oa.syncDiff(this.state,c,o,l)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},i=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Oa.syncDiff(this.state,i,o,l),u())}),this.onJoin((i,o,l)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:l})}),this.onLeave((i,o,l)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const o=this.cloneDeep(t),l=this.transformState(n),u={},c={};return this.map(o,(f,h)=>{l[f]||(c[f]=h)}),this.map(l,(f,h)=>{const p=o[f];if(p){const y=h.map(_=>_.presence_ref),v=p.map(_=>_.presence_ref),b=h.filter(_=>v.indexOf(_.presence_ref)<0),w=p.filter(_=>y.indexOf(_.presence_ref)<0);b.length>0&&(u[f]=b),w.length>0&&(c[f]=w)}else u[f]=h}),this.syncDiff(o,{joins:u,leaves:c},r,i)}static syncDiff(t,n,r,i){const{joins:o,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(u,c)=>{var f;const h=(f=t[u])!==null&&f!==void 0?f:[];if(t[u]=this.cloneDeep(c),h.length>0){const p=t[u].map(v=>v.presence_ref),y=h.filter(v=>p.indexOf(v.presence_ref)<0);t[u].unshift(...y)}r(u,h,c)}),this.map(l,(u,c)=>{let f=t[u];if(!f)return;const h=c.map(p=>p.presence_ref);f=f.filter(p=>h.indexOf(p.presence_ref)<0),t[u]=f,i(u,f,c),f.length===0&&delete t[u]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var bx;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(bx||(bx={}));var Ma;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Ma||(Ma={}));var Zr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Zr||(Zr={}));class Qp{constructor(t,n={config:{}},r){var i,o;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=qt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new qf(this,vr.join,this.params,this.timeout),this.rejoinTimer=new Wb(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=qt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=qt.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=qt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=qt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=qt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(vr.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new Oa(this),this.broadcastEndpointURL=Vb(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==qt.closed){const{config:{broadcast:l,presence:u,private:c}}=this.params,f=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(v=>v.filter))!==null&&i!==void 0?i:[],h=!!this.bindings[Ma.PRESENCE]&&this.bindings[Ma.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,p={},y={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:h}),postgres_changes:f,private:c};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(v=>t==null?void 0:t(Zr.CHANNEL_ERROR,v)),this._onClose(()=>t==null?void 0:t(Zr.CLOSED)),this.updateJoinPayload(Object.assign({config:y},p)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:v})=>{var b;if(this.socket.setAuth(),v===void 0){t==null||t(Zr.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,_=(b=w==null?void 0:w.length)!==null&&b!==void 0?b:0,E=[];for(let j=0;j<_;j++){const C=w[j],{filter:{event:M,schema:D,table:R,filter:z}}=C,F=v&&v[j];if(F&&F.event===M&&F.schema===D&&F.table===R&&F.filter===z)E.push(Object.assign(Object.assign({},C),{id:F.id}));else{this.unsubscribe(),this.state=qt.errored,t==null||t(Zr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=E,t&&t(Zr.SUBSCRIBED);return}}).receive("error",v=>{this.state=qt.errored,t==null||t(Zr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Zr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===qt.joined&&t===Ma.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){const{event:o,payload:l}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:l,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=f.body)===null||i===void 0?void 0:i.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var l,u,c;const f=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),f.receive("ok",()=>o("ok")),f.receive("error",()=>o("error")),f.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=qt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(vr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new qf(this,vr.leave,{},t),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=qt.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const i=new AbortController,o=setTimeout(()=>i.abort(),r),l=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(o),l}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new qf(this,t,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>tP){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,o;const l=t.toLocaleLowerCase(),{close:u,error:c,leave:f,join:h}=vr;if(r&&[u,c,f,h].indexOf(l)>=0&&r!==this._joinRef())return;let y=this._onMessage(l,n,r);if(n&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(v=>{var b,w,_;return((b=v.filter)===null||b===void 0?void 0:b.event)==="*"||((_=(w=v.filter)===null||w===void 0?void 0:w.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===l}).map(v=>v.callback(y,r)):(o=this.bindings[l])===null||o===void 0||o.filter(v=>{var b,w,_,E,j,C;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in v){const M=v.id,D=(b=v.filter)===null||b===void 0?void 0:b.event;return M&&((w=n.ids)===null||w===void 0?void 0:w.includes(M))&&(D==="*"||(D==null?void 0:D.toLocaleLowerCase())===((_=n.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const M=(j=(E=v==null?void 0:v.filter)===null||E===void 0?void 0:E.event)===null||j===void 0?void 0:j.toLocaleLowerCase();return M==="*"||M===((C=n==null?void 0:n.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===l}).map(v=>{if(typeof y=="object"&&"ids"in y){const b=y.data,{schema:w,table:_,commit_timestamp:E,type:j,errors:C}=b;y=Object.assign(Object.assign({},{schema:w,table:_,commit_timestamp:E,eventType:j,new:{},old:{},errors:C}),this._getPayloadRecords(b))}v.callback(y,r)})}_isClosed(){return this.state===qt.closed}_isJoined(){return this.state===qt.joined}_isJoining(){return this.state===qt.joining}_isLeaving(){return this.state===qt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),o={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&Qp.isEqual(i.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(vr.close,{},t)}_onError(t){this._on(vr.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=qt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=xx(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=xx(t.columns,t.old_record)),n}}const Yf=()=>{},Cu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},uP=[1e3,2e3,5e3,1e4],cP=1e4,dP=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class fP{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Yh,this.transport=null,this.heartbeatIntervalMs=Cu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Yf,this.ref=0,this.reconnectTimer=null,this.logger=Yf,this.conn=null,this.sendBuffer=[],this.serializer=new nP,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>ol(async()=>{const{default:u}=await Promise.resolve().then(()=>Oo);return{default:u}},void 0).then(({default:u})=>u(...l)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...l)=>o(...l)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Gh.websocket}`,this.httpEndpoint=Vb(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=JI.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ZI}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ra.connecting:return us.Connecting;case Ra.open:return us.Open;case Ra.closing:return us.Closing;default:return us.Closed}}isConnected(){return this.connectionState()===us.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{const o=new Qp(`realtime:${t}`,n,this);return this.channels.push(o),o}}push(t){const{topic:n,event:r,payload:i,ref:o}=t,l=()=>{this.encode(t,u=>{var c;(c=this.conn)===null||c===void 0||c.send(u)})};this.log("push",`${n} ${r} (${o})`,i),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(eP,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Cu.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:o,ref:l}=n,u=l?`(${l})`:"",c=o.status||"";this.log("receive",`${c} ${r} ${i} ${u}`.trim(),o),this.channels.filter(f=>f._isMember(r)).forEach(f=>f._trigger(i,o,l)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(vr.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([dP],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:XI};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(vr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Wb(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Cu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,i,o,l,u,c,f,h;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Yh,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:Cu.HEARTBEAT_INTERVAL,this.worker=(o=t==null?void 0:t.worker)!==null&&o!==void 0?o:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=t==null?void 0:t.heartbeatCallback)!==null&&u!==void 0?u:Yf,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:(p=>uP[p-1]||cP),this.encode=(f=t==null?void 0:t.encode)!==null&&f!==void 0?f:((p,y)=>y(JSON.stringify(p))),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Xp extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Ft(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class hP extends Xp{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Jh extends Xp{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var pP=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};const qb=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>ol(async()=>{const{default:r}=await Promise.resolve().then(()=>Oo);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},mP=()=>pP(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ol(()=>Promise.resolve().then(()=>Oo),void 0)).Response:Response}),Qh=e=>{if(Array.isArray(e))return e.map(n=>Qh(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[i]=Qh(r)}),t},gP=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Cs=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};const Gf=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),yP=(e,t,n)=>Cs(void 0,void 0,void 0,function*(){const r=yield mP();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(i=>{const o=e.status||500,l=(i==null?void 0:i.statusCode)||o+"";t(new hP(Gf(i),o,l))}).catch(i=>{t(new Jh(Gf(i),i))}):t(new Jh(Gf(e),e))}),vP=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?i:(gP(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(r)):i.body=r,t!=null&&t.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),n))};function al(e,t,n,r,i,o){return Cs(this,void 0,void 0,function*(){return new Promise((l,u)=>{e(n,vP(t,r,i,o)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>l(c)).catch(c=>yP(c,u,r))})})}function rc(e,t,n,r){return Cs(this,void 0,void 0,function*(){return al(e,"GET",t,n,r)})}function Ar(e,t,n,r,i){return Cs(this,void 0,void 0,function*(){return al(e,"POST",t,r,i,n)})}function Xh(e,t,n,r,i){return Cs(this,void 0,void 0,function*(){return al(e,"PUT",t,r,i,n)})}function xP(e,t,n,r){return Cs(this,void 0,void 0,function*(){return al(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Yb(e,t,n,r,i){return Cs(this,void 0,void 0,function*(){return al(e,"DELETE",t,r,i,n)})}var wP=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};class bP{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return wP(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ft(t))return{data:null,error:t};throw t}})}}var kP=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};class SP{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}asStream(){return new bP(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.execute().then(t,n)}execute(){return kP(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ft(t))return{data:null,error:t};throw t}})}}var An=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};const EP={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},kx={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class _P{constructor(t,n={},r,i){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=qb(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,i){return An(this,void 0,void 0,function*(){try{let o;const l=Object.assign(Object.assign({},kx),i);let u=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const c=l.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",l.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",l.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=r,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,c&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i!=null&&i.headers&&(u=Object.assign(Object.assign({},u),i.headers));const f=this._removeEmptyFolders(n),h=this._getFinalPath(f),p=yield(t=="PUT"?Xh:Ar)(this.fetch,`${this.url}/object/${h}`,o,Object.assign({headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:f,id:p.Id,fullPath:p.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ft(o))return{data:null,error:o};throw o}})}upload(t,n,r){return An(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,i){return An(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),l=this._getFinalPath(o),u=new URL(this.url+`/object/upload/sign/${l}`);u.searchParams.set("token",n);try{let c;const f=Object.assign({upsert:kx.upsert},i),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",f.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",f.cacheControl)):(c=r,h["cache-control"]=`max-age=${f.cacheControl}`,h["content-type"]=f.contentType);const p=yield Xh(this.fetch,u.toString(),c,{headers:h});return{data:{path:o,fullPath:p.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ft(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return An(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const o=yield Ar(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),l=new URL(this.url+o.url),u=l.searchParams.get("token");if(!u)throw new Xp("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:u},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ft(r))return{data:null,error:r};throw r}})}update(t,n,r){return An(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return An(this,void 0,void 0,function*(){try{return{data:yield Ar(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ft(i))return{data:null,error:i};throw i}})}copy(t,n,r){return An(this,void 0,void 0,function*(){try{return{data:{path:(yield Ar(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ft(i))return{data:null,error:i};throw i}})}createSignedUrl(t,n,r){return An(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),o=yield Ar(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const l=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${l}`)},{data:o,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ft(i))return{data:null,error:i};throw i}})}createSignedUrls(t,n,r){return An(this,void 0,void 0,function*(){try{const i=yield Ar(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${o}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ft(i))return{data:null,error:i};throw i}})}download(t,n){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),l=o?`?${o}`:"",u=this._getFinalPath(t),c=()=>rc(this.fetch,`${this.url}/${i}/${u}${l}`,{headers:this.headers,noResolveJson:!0});return new SP(c,this.shouldThrowOnError)}info(t){return An(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield rc(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Qh(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ft(r))return{data:null,error:r};throw r}})}exists(t){return An(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield xP(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ft(r)&&r instanceof Jh){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),i=[],o=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&i.push(o);const u=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&i.push(c);let f=i.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${r}${f}`)}}}remove(t){return An(this,void 0,void 0,function*(){try{return{data:yield Yb(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ft(n))return{data:null,error:n};throw n}})}list(t,n,r){return An(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},EP),n),{prefix:t||""});return{data:yield Ar(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ft(i))return{data:null,error:i};throw i}})}listV2(t,n){return An(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield Ar(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ft(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const CP="2.75.0",jP={"X-Client-Info":`storage-js/${CP}`};var to=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};class NP{constructor(t,n={},r,i){this.shouldThrowOnError=!1;const o=new URL(t);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},jP),n),this.fetch=qb(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return to(this,void 0,void 0,function*(){try{return{data:yield rc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ft(t))return{data:null,error:t};throw t}})}getBucket(t){return to(this,void 0,void 0,function*(){try{return{data:yield rc(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ft(n))return{data:null,error:n};throw n}})}createBucket(t){return to(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield Ar(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ft(i))return{data:null,error:i};throw i}})}updateBucket(t,n){return to(this,void 0,void 0,function*(){try{return{data:yield Xh(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ft(r))return{data:null,error:r};throw r}})}emptyBucket(t){return to(this,void 0,void 0,function*(){try{return{data:yield Ar(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ft(n))return{data:null,error:n};throw n}})}deleteBucket(t){return to(this,void 0,void 0,function*(){try{return{data:yield Yb(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ft(n))return{data:null,error:n};throw n}})}}class TP extends NP{constructor(t,n={},r,i){super(t,n,r,i)}from(t){return new _P(this.url,this.headers,t,this.fetch)}}const IP="2.75.0";let Na="";typeof Deno<"u"?Na="deno":typeof document<"u"?Na="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Na="react-native":Na="node";const PP={"X-Client-Info":`supabase-js-${Na}/${IP}`},AP={headers:PP},RP={schema:"public"},OP={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},MP={};var DP=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};const LP=e=>{let t;return e?t=e:typeof fetch>"u"?t=Lb:t=fetch,(...n)=>t(...n)},$P=()=>typeof Headers>"u"?$b:Headers,FP=(e,t,n)=>{const r=LP(n),i=$P();return(o,l)=>DP(void 0,void 0,void 0,function*(){var u;const c=(u=yield t())!==null&&u!==void 0?u:e;let f=new i(l==null?void 0:l.headers);return f.has("apikey")||f.set("apikey",e),f.has("Authorization")||f.set("Authorization",`Bearer ${c}`),r(o,Object.assign(Object.assign({},l),{headers:f}))})};var zP=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};function BP(e){return e.endsWith("/")?e:e+"/"}function UP(e,t){var n,r;const{db:i,auth:o,realtime:l,global:u}=e,{db:c,auth:f,realtime:h,global:p}=t,y={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},f),o),realtime:Object.assign(Object.assign({},h),l),storage:{},global:Object.assign(Object.assign(Object.assign({},p),u),{headers:Object.assign(Object.assign({},(n=p==null?void 0:p.headers)!==null&&n!==void 0?n:{}),(r=u==null?void 0:u.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>zP(this,void 0,void 0,function*(){return""})};return e.accessToken?y.accessToken=e.accessToken:delete y.accessToken,y}function WP(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(BP(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Gb="2.75.0",co=30*1e3,Zh=3,Kf=Zh*co,HP="http://localhost:9999",VP="supabase.auth.token",qP={"X-Client-Info":`gotrue-js/${Gb}`},ep="X-Supabase-Api-Version",Kb={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},YP=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,GP=600*1e3;class Ga extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Fe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class KP extends Ga{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function JP(e){return Fe(e)&&e.name==="AuthApiError"}class cs extends Ga{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class zi extends Ga{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}}class ji extends zi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function QP(e){return Fe(e)&&e.name==="AuthSessionMissingError"}class no extends zi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ju extends zi{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Nu extends zi{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function XP(e){return Fe(e)&&e.name==="AuthImplicitGrantRedirectError"}class Sx extends zi{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class tp extends zi{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Jf(e){return Fe(e)&&e.name==="AuthRetryableFetchError"}class Ex extends zi{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class np extends zi{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const ic="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),_x=` 	
\r=`.split(""),ZP=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<_x.length;t+=1)e[_x[t].charCodeAt(0)]=-2;for(let t=0;t<ic.length;t+=1)e[ic[t].charCodeAt(0)]=t;return e})();function Cx(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(ic[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(ic[r]),t.queuedBits-=6}}function Jb(e,t,n){const r=ZP[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function jx(e){const t=[],n=l=>{t.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=l=>{nA(l,r,n)};for(let l=0;l<e.length;l+=1)Jb(e.charCodeAt(l),i,o);return t.join("")}function eA(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function tA(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}eA(r,t)}}function nA(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if((e>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function xo(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)Jb(e.charCodeAt(i),n,r);return new Uint8Array(t)}function rA(e){const t=[];return tA(e,n=>t.push(n)),new Uint8Array(t)}function ms(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};return e.forEach(i=>Cx(i,n,r)),Cx(null,n,r),t.join("")}function iA(e){return Math.round(Date.now()/1e3)+e}function sA(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Vn=()=>typeof window<"u"&&typeof document<"u",ns={tested:!1,writable:!1},Qb=()=>{if(!Vn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ns.tested)return ns.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ns.tested=!0,ns.writable=!0}catch{ns.tested=!0,ns.writable=!1}return ns.writable};function oA(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,o)=>{t[o]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const Xb=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>ol(async()=>{const{default:r}=await Promise.resolve().then(()=>Oo);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},aA=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",fo=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},rs=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},_i=async(e,t)=>{await e.removeItem(t)};class Mc{constructor(){this.promise=new Mc.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Mc.promiseConstructor=Promise;function Qf(e){const t=e.split(".");if(t.length!==3)throw new np("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!YP.test(t[r]))throw new np("JWT not in base64url format");return{header:JSON.parse(jx(t[0])),payload:JSON.parse(jx(t[1])),signature:xo(t[2]),raw:{header:t[0],payload:t[1]}}}async function lA(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function uA(e,t){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const l=await e(o);if(!t(o,null,l)){r(l);return}}catch(l){if(!t(o,l)){i(l);return}}})()})}function cA(e){return("0"+e.toString(16)).substr(-2)}function dA(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let o=0;o<56;o++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,cA).join("")}async function fA(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function hA(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await fA(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ro(e,t,n=!1){const r=dA();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await fo(e,`${t}-code-verifier`,i);const o=await hA(r);return[o,r===o?"plain":"s256"]}const pA=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function mA(e){const t=e.headers.get(ep);if(!t||!t.match(pA))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function gA(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function yA(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const vA=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function io(e){if(!vA.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Xf(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Nx(e){return JSON.parse(JSON.stringify(e))}var xA=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const os=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),wA=[502,503,504];async function Tx(e){var t;if(!aA(e))throw new tp(os(e),0);if(wA.includes(e.status))throw new tp(os(e),e.status);let n;try{n=await e.json()}catch(o){throw new cs(os(o),o)}let r;const i=mA(e);if(i&&i.getTime()>=Kb["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Ex(os(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new ji}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,l)=>o&&typeof l=="string",!0))throw new Ex(os(n),e.status,n.weak_password.reasons);throw new KP(os(n),e.status||500,r)}const bA=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function Ve(e,t,n,r){var i;const o=Object.assign({},r==null?void 0:r.headers);o[ep]||(o[ep]=Kb["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const l=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(l.redirect_to=r.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",c=await kA(e,t,n+u,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function kA(e,t,n,r,i,o){const l=bA(t,r,i,o);let u;try{u=await e(n,Object.assign({},l))}catch(c){throw console.error(c),new tp(os(c),0)}if(u.ok||await Tx(u),r!=null&&r.noResolveJson)return u;try{return await u.json()}catch(c){await Tx(c)}}function gr(e){var t;let n=null;_A(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=iA(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Ix(e){const t=gr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Pi(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function SA(e){return{data:e,error:null}}function EA(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o}=e,l=xA(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o},c=Object.assign({},l);return{data:{properties:u,user:c},error:null}}function Px(e){return e}function _A(e){return e.access_token&&e.refresh_token&&e.expires_in}const Zf=["global","local","others"];var CA=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class jA{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=Xb(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=Zf[0]){if(Zf.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Zf.join(", ")}`);try{return await Ve(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Fe(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await Ve(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Pi})}catch(r){if(Fe(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=CA(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await Ve(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:EA,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Fe(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Ve(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Pi})}catch(n){if(Fe(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,o,l,u,c;try{const f={nextPage:null,lastPage:0,total:0},h=await Ve(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Px});if(h.error)throw h.error;const p=await h.json(),y=(l=h.headers.get("x-total-count"))!==null&&l!==void 0?l:0,v=(c=(u=h.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&c!==void 0?c:[];return v.length>0&&(v.forEach(b=>{const w=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(b.split(";")[1].split("=")[1]);f[`${_}Page`]=w}),f.total=parseInt(y)),{data:Object.assign(Object.assign({},p),f),error:null}}catch(f){if(Fe(f))return{data:{users:[]},error:f};throw f}}async getUserById(t){io(t);try{return await Ve(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Pi})}catch(n){if(Fe(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){io(t);try{return await Ve(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Pi})}catch(r){if(Fe(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){io(t);try{return await Ve(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Pi})}catch(r){if(Fe(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){io(t.userId);try{const{data:n,error:r}=await Ve(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(Fe(n))return{data:null,error:n};throw n}}async _deleteFactor(t){io(t.userId),io(t.id);try{return{data:await Ve(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Fe(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,i,o,l,u,c;try{const f={nextPage:null,lastPage:0,total:0},h=await Ve(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Px});if(h.error)throw h.error;const p=await h.json(),y=(l=h.headers.get("x-total-count"))!==null&&l!==void 0?l:0,v=(c=(u=h.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&c!==void 0?c:[];return v.length>0&&(v.forEach(b=>{const w=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(b.split(";")[1].split("=")[1]);f[`${_}Page`]=w}),f.total=parseInt(y)),{data:Object.assign(Object.assign({},p),f),error:null}}catch(f){if(Fe(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(t){try{return await Ve(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Fe(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await Ve(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Fe(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await Ve(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Fe(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await Ve(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Fe(n))return{data:null,error:n};throw n}}}function Ax(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const so={debug:!!(globalThis&&Qb()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Zb extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class NA extends Zb{}async function TA(e,t,n){so.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),so.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){so.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{so.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw so.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new NA(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(so.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function IA(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function ek(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function PA(e){return parseInt(e,16)}function AA(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function RA(e){var t;const{chainId:n,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:l,notBefore:u,requestId:c,resources:f,scheme:h,uri:p,version:y}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const v=ek(e.address),b=h?`${h}://${r}`:r,w=e.statement?`${e.statement}
`:"",_=`${b} wants you to sign in with your Ethereum account:
${v}

${w}`;let E=`URI: ${p}
Version: ${y}
Chain ID: ${n}${l?`
Nonce: ${l}`:""}
Issued At: ${o.toISOString()}`;if(i&&(E+=`
Expiration Time: ${i.toISOString()}`),u&&(E+=`
Not Before: ${u.toISOString()}`),c&&(E+=`
Request ID: ${c}`),f){let j=`
Resources:`;for(const C of f){if(!C||typeof C!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${C}`);j+=`
- ${C}`}E+=j}return`${_}
${E}`}class $t extends Error{constructor({message:t,code:n,cause:r,name:i}){var o;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class sc extends $t{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function OA({error:e,options:t}){var n,r,i;const{publicKey:o}=t;if(!o)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new $t({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new $t({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new $t({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new $t({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new $t({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new $t({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return o.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new $t({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new $t({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const l=window.location.hostname;if(nk(l)){if(o.rp.id!==l)return new $t({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new $t({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new $t({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new $t({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new $t({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function MA({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new $t({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new $t({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(nk(r)){if(n.rpId!==r)return new $t({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new $t({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new $t({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new $t({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var tk=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class DA{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const LA=new DA;function $A(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,i=tk(e,["challenge","user","excludeCredentials"]),o=xo(t).buffer,l=Object.assign(Object.assign({},n),{id:xo(n.id).buffer}),u=Object.assign(Object.assign({},i),{challenge:o,user:l});if(r&&r.length>0){u.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const f=r[c];u.excludeCredentials[c]=Object.assign(Object.assign({},f),{id:xo(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return u}function FA(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=tk(e,["challenge","allowCredentials"]),i=xo(t).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const u=n[l];o.allowCredentials[l]=Object.assign(Object.assign({},u),{id:xo(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function zA(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:ms(new Uint8Array(e.response.attestationObject)),clientDataJSON:ms(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function BA(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:ms(new Uint8Array(i.authenticatorData)),clientDataJSON:ms(new Uint8Array(i.clientDataJSON)),signature:ms(new Uint8Array(i.signature)),userHandle:i.userHandle?ms(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function nk(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Rx(){var e,t;return!!(Vn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function UA(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new sc("Browser returned unexpected credential type",t)}:{data:null,error:new sc("Empty credential response",t)}}catch(t){return{data:null,error:OA({error:t,options:e})}}}async function WA(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new sc("Browser returned unexpected credential type",t)}:{data:null,error:new sc("Empty credential response",t)}}catch(t){return{data:null,error:MA({error:t,options:e})}}}const HA={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},VA={userVerification:"preferred",hints:["security-key"]};function oc(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of e)if(i)for(const o in i){const l=i[o];if(l!==void 0)if(Array.isArray(l))r[o]=l;else if(n(l))r[o]=l;else if(t(l)){const u=r[o];t(u)?r[o]=oc(u,l):r[o]=oc(l)}else r[o]=l}return r}function qA(e,t){return oc(HA,e,t||{})}function YA(e,t){return oc(VA,e,t||{})}class GA{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:i},o){try{const{data:l,error:u}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!l)return{data:null,error:u};const c=i??LA.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:f}=l.webauthn.credential_options.publicKey;f.name||(f.name=`${f.id}:${r}`),f.displayName||(f.displayName=f.name)}switch(l.webauthn.type){case"create":{const f=qA(l.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:h,error:p}=await UA({publicKey:f,signal:c});return h?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:h}},error:null}:{data:null,error:p}}case"request":{const f=YA(l.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:h,error:p}=await WA(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:f,signal:c}));return h?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:h}},error:null}:{data:null,error:p}}}}catch(l){return Fe(l)?{data:null,error:l}:{data:null,error:new cs("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}},o){if(!n)return{data:null,error:new Ga("rpId is required for WebAuthn authentication")};try{if(!Rx())return{data:null,error:new cs("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:o});if(!l)return{data:null,error:u};const{webauthn:c}=l;return this._verify({factorId:t,challengeId:l.challengeId,webauthn:{type:c.type,rpId:n,rpOrigins:r,credential_response:c.credential_response}})}catch(l){return Fe(l)?{data:null,error:l}:{data:null,error:new cs("Unexpected error in authenticate",l)}}}async _register({friendlyName:t,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i},o){if(!n)return{data:null,error:new Ga("rpId is required for WebAuthn registration")};try{if(!Rx())return{data:null,error:new cs("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this._enroll({friendlyName:t});if(!l)return await this.client.mfa.listFactors().then(h=>{var p;return(p=h.data)===null||p===void 0?void 0:p.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===t&&y.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:u};const{data:c,error:f}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:o});return c?this._verify({factorId:l.id,challengeId:c.challengeId,webauthn:{rpId:n,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:f}}catch(l){return Fe(l)?{data:null,error:l}:{data:null,error:new cs("Unexpected error in register",l)}}}}IA();const KA={url:HP,storageKey:VP,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:qP,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ox(e,t,n){return await n()}const oo={};class Ka{get jwks(){var t,n;return(n=(t=oo[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){oo[this.storageKey]=Object.assign(Object.assign({},oo[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=oo[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){oo[this.storageKey]=Object.assign(Object.assign({},oo[this.storageKey]),{cachedAt:t})}constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ka.nextInstanceID,Ka.nextInstanceID+=1,this.instanceID>0&&Vn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},KA),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new jA({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Xb(i.fetch),this.lock=i.lock||Ox,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Vn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=TA:this.lock=Ox,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new GA(this)},this.persistSession?(i.storage?this.storage=i.storage:Qb()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ax(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Ax(this.memoryStorage)),Vn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Gb}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=oA(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Vn()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),XP(o)){const c=(t=o.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:l,redirectType:u}=i;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Fe(n)?{error:n}:{error:new cs("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,i;try{const o=await Ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:gr}),{data:l,error:u}=o;if(u||!l)return{data:{user:null,session:null},error:u};const c=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(o){if(Fe(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(t){var n,r,i;try{let o;if("email"in t){const{email:h,password:p,options:y}=t;let v=null,b=null;this.flowType==="pkce"&&([v,b]=await ro(this.storage,this.storageKey)),o=await Ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:h,password:p,data:(n=y==null?void 0:y.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:v,code_challenge_method:b},xform:gr})}else if("phone"in t){const{phone:h,password:p,options:y}=t;o=await Ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:p,data:(r=y==null?void 0:y.data)!==null&&r!==void 0?r:{},channel:(i=y==null?void 0:y.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:gr})}else throw new ju("You must provide either an email or phone number and a password");const{data:l,error:u}=o;if(u||!l)return{data:{user:null,session:null},error:u};const c=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(o){if(Fe(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(t){try{let n;if("email"in t){const{email:o,password:l,options:u}=t;n=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Ix})}else if("phone"in t){const{phone:o,password:l,options:u}=t;n=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Ix})}else throw new ju("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new no}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(Fe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,i,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,i,o,l,u,c,f,h,p,y;let v,b;if("message"in t)v=t.message,b=t.signature;else{const{chain:w,wallet:_,statement:E,options:j}=t;let C;if(Vn())if(typeof _=="object")C=_;else{const V=window;if("ethereum"in V&&typeof V.ethereum=="object"&&"request"in V.ethereum&&typeof V.ethereum.request=="function")C=V.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(j!=null&&j.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=_}const M=new URL((n=j==null?void 0:j.url)!==null&&n!==void 0?n:window.location.href),D=await C.request({method:"eth_requestAccounts"}).then(V=>V).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!D||D.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const R=ek(D[0]);let z=(r=j==null?void 0:j.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!z){const V=await C.request({method:"eth_chainId"});z=PA(V)}const F={domain:M.host,address:R,statement:E,uri:M.href,version:"1",chainId:z,nonce:(i=j==null?void 0:j.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(l=(o=j==null?void 0:j.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(u=j==null?void 0:j.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(c=j==null?void 0:j.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(f=j==null?void 0:j.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(h=j==null?void 0:j.signInWithEthereum)===null||h===void 0?void 0:h.resources};v=RA(F),b=await C.request({method:"personal_sign",params:[AA(v),R]})}try{const{data:w,error:_}=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:v,signature:b},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:gr});if(_)throw _;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new no}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:_})}catch(w){if(Fe(w))return{data:{user:null,session:null},error:w};throw w}}async signInWithSolana(t){var n,r,i,o,l,u,c,f,h,p,y,v;let b,w;if("message"in t)b=t.message,w=t.signature;else{const{chain:_,wallet:E,statement:j,options:C}=t;let M;if(Vn())if(typeof E=="object")M=E;else{const R=window;if("solana"in R&&typeof R.solana=="object"&&("signIn"in R.solana&&typeof R.solana.signIn=="function"||"signMessage"in R.solana&&typeof R.solana.signMessage=="function"))M=R.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!(C!=null&&C.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=E}const D=new URL((n=C==null?void 0:C.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in M&&M.signIn){const R=await M.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},C==null?void 0:C.signInWithSolana),{version:"1",domain:D.host,uri:D.href}),j?{statement:j}:null));let z;if(Array.isArray(R)&&R[0]&&typeof R[0]=="object")z=R[0];else if(R&&typeof R=="object"&&"signedMessage"in R&&"signature"in R)z=R;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in z&&"signature"in z&&(typeof z.signedMessage=="string"||z.signedMessage instanceof Uint8Array)&&z.signature instanceof Uint8Array)b=typeof z.signedMessage=="string"?z.signedMessage:new TextDecoder().decode(z.signedMessage),w=z.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in M)||typeof M.signMessage!="function"||!("publicKey"in M)||typeof M!="object"||!M.publicKey||!("toBase58"in M.publicKey)||typeof M.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${D.host} wants you to sign in with your Solana account:`,M.publicKey.toBase58(),...j?["",j,""]:[""],"Version: 1",`URI: ${D.href}`,`Issued At: ${(i=(r=C==null?void 0:C.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=C==null?void 0:C.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${C.signInWithSolana.notBefore}`]:[],...!((l=C==null?void 0:C.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${C.signInWithSolana.expirationTime}`]:[],...!((u=C==null?void 0:C.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${C.signInWithSolana.chainId}`]:[],...!((c=C==null?void 0:C.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${C.signInWithSolana.nonce}`]:[],...!((f=C==null?void 0:C.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${C.signInWithSolana.requestId}`]:[],...!((p=(h=C==null?void 0:C.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||p===void 0)&&p.length?["Resources",...C.signInWithSolana.resources.map(z=>`- ${z}`)]:[]].join(`
`);const R=await M.signMessage(new TextEncoder().encode(b),"utf8");if(!R||!(R instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=R}}try{const{data:_,error:E}=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:ms(w)},!((y=t.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:gr});if(E)throw E;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new no}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:E})}catch(_){if(Fe(_))return{data:{user:null,session:null},error:_};throw _}}async _exchangeCodeForSession(t){const n=await rs(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:o,error:l}=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:gr});if(await _i(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new no}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:l})}catch(o){if(Fe(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(t){try{const{options:n,provider:r,token:i,access_token:o,nonce:l}=t,u=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:o,nonce:l,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:gr}),{data:c,error:f}=u;return f?{data:{user:null,session:null},error:f}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new no}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:f})}catch(n){if(Fe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,i,o,l;try{if("email"in t){const{email:u,options:c}=t;let f=null,h=null;this.flowType==="pkce"&&([f,h]=await ro(this.storage,this.storageKey));const{error:p}=await Ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:f,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in t){const{phone:u,options:c}=t,{data:f,error:h}=await Ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(l=c==null?void 0:c.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:h}}throw new ju("You must provide either an email or phone number.")}catch(u){if(Fe(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(t){var n,r;try{let i,o;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,o=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:u}=await Ve(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:gr});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const c=l.session,f=l.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(i){if(Fe(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var n,r,i;try{let o=null,l=null;return this.flowType==="pkce"&&([o,l]=await ro(this.storage,this.storageKey)),await Ve(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:SA})}catch(o){if(Fe(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new ji;const{error:i}=await Ve(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(Fe(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:o}=t,{error:l}=await Ve(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){const{phone:r,type:i,options:o}=t,{data:l,error:u}=await Ve(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new ju("You must provide either an email or phone number and a type")}catch(n){if(Fe(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await rs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<Kf:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const l=await rs(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=Xf()}if(this.storage.isServer&&t.user){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,f,h)=>(!l&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,f,h))})}return{data:{session:t},error:null}}const{data:i,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Pi}):await this._useSession(async n=>{var r,i,o;const{data:l,error:u}=n;if(u)throw u;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ji}:await Ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:Pi})})}catch(n){if(Fe(n))return QP(n)&&(await this._removeSession(),await _i(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:i,error:o}=r;if(o)throw o;if(!i.session)throw new ji;const l=i.session;let u=null,c=null;this.flowType==="pkce"&&t.email!=null&&([u,c]=await ro(this.storage,this.storageKey));const{data:f,error:h}=await Ve(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:u,code_challenge_method:c}),jwt:l.access_token,xform:Pi});if(h)throw h;return l.user=f.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(r){if(Fe(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new ji;const n=Date.now()/1e3;let r=n,i=!0,o=null;const{payload:l}=Qf(t.access_token);if(l.exp&&(r=l.exp,i=r<=n),i){const{data:u,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!u)return{data:{user:null,session:null},error:null};o=u}else{const{data:u,error:c}=await this._getUser(t.access_token);if(c)throw c;o={access_token:t.access_token,refresh_token:t.refresh_token,user:u.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(n){if(Fe(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:l,error:u}=n;if(u)throw u;t=(r=l.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new ji;const{data:i,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Fe(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!Vn())throw new Nu("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Nu(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Sx("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Nu("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Sx("No code detected.");const{data:j,error:C}=await this._exchangeCodeForSession(t.code);if(C)throw C;const M=new URL(window.location.href);return M.searchParams.delete("code"),window.history.replaceState(window.history.state,"",M.toString()),{data:{session:j.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:o,refresh_token:l,expires_in:u,expires_at:c,token_type:f}=t;if(!o||!u||!l||!f)throw new Nu("No session defined in URL");const h=Math.round(Date.now()/1e3),p=parseInt(u);let y=h+p;c&&(y=parseInt(c));const v=y-h;v*1e3<=co&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${p}s`);const b=y-p;h-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,y,h):h-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,y,h);const{data:w,error:_}=await this._getUser(o);if(_)throw _;const E={provider_token:r,provider_refresh_token:i,access_token:o,expires_in:p,expires_at:y,refresh_token:l,token_type:f,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:E,redirectType:t.type},error:null}}catch(r){if(Fe(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await rs(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return{error:o};const l=(r=i.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:u}=await this.admin.signOut(l,t);if(u&&!(JP(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return t!=="others"&&(await this._removeSession(),await _i(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=sA(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,i;try{const{data:{session:o},error:l}=n;if(l)throw l;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await ro(this.storage,this.storageKey,!0));try{return await Ve(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(Fe(o))return{data:null,error:o};throw o}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(Fe(n))return{data:null,error:n};throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:i}=await this._useSession(async o=>{var l,u,c,f,h;const{data:p,error:y}=o;if(y)throw y;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=t.options)===null||u===void 0?void 0:u.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Ve(this.fetch,"GET",v,{headers:this.headers,jwt:(h=(f=p.session)===null||f===void 0?void 0:f.access_token)!==null&&h!==void 0?h:void 0})});if(i)throw i;return Vn()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Fe(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:o}}=n;if(i)throw i;const{options:l,provider:u,token:c,access_token:f,nonce:h}=t,p=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o==null?void 0:o.access_token)!==null&&r!==void 0?r:void 0,body:{provider:u,id_token:c,access_token:f,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:gr}),{data:y,error:v}=p;return v?{data:{user:null,session:null},error:v}:!y||!y.session||!y.user?{data:{user:null,session:null},error:new no}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),{data:y,error:v})}catch(i){if(Fe(i))return{data:{user:null,session:null},error:i};throw i}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,i;const{data:o,error:l}=n;if(l)throw l;return await Ve(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Fe(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await uA(async i=>(i>0&&await lA(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await Ve(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:gr})),(i,o)=>{const l=200*Math.pow(2,i);return o&&Jf(o)&&Date.now()+l-r<co})}catch(r){if(this._debug(n,"error",r),Fe(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Vn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await rs(this.storage,this.storageKey);if(i&&this.userStorage){let l=await rs(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:i.user},await fo(this.userStorage,this.storageKey+"-user",l)),i.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:Xf()}else if(i&&!i.user&&!i.user){const l=await rs(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(i.user=l.user,await _i(this.storage,this.storageKey+"-user"),await fo(this.storage,this.storageKey,i)):i.user=Xf()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const o=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Kf;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${Kf}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:l}=await this._callRefreshToken(i.refresh_token);l&&(console.error(l),Jf(l)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(i.access_token);!u&&(l!=null&&l.user)?(i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(r,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new ji;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Mc;const{data:o,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!o.session)throw new ji;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const u={data:o.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(o){if(this._debug(i,"error",o),Fe(o)){const l={data:null,error:o};return Jf(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,r=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const o=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(t,n)}catch(c){o.push(c)}});if(await Promise.all(l),o.length>0){for(let u=0;u<o.length;u+=1)console.error(o[u]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await fo(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const o=Nx(i);await fo(this.storage,this.storageKey,o)}else{const i=Nx(n);await fo(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await _i(this.storage,this.storageKey),await _i(this.storage,this.storageKey+"-code-verifier"),await _i(this.storage,this.storageKey+"-user"),this.userStorage&&await _i(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Vn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),co);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-t)/co);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${co}ms, refresh threshold is ${Zh} ticks`),i<=Zh&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Zb)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Vn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,l]=await ro(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(l)}`});i.push(u.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);i.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;return o?{data:null,error:o}:await Ve(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Fe(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,i;const{data:o,error:l}=n;if(l)return{data:null,error:l};const u=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:f}=await Ve(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return f?{data:null,error:f}:(t.factorType==="totp"&&c.type==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(Fe(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return{data:null,error:o};const l=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?zA(t.webauthn.credential_response):BA(t.webauthn.credential_response)})}:{code:t.code}),{data:u,error:c}=await Ve(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:c})})}catch(n){if(Fe(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return{data:null,error:o};const l=await Ve(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(l.error)return l;const{data:u}=l;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:$A(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:FA(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Fe(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const o of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])i.all.push(o),o.status==="verified"&&i[o.factor_type].push(o);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:i},error:o}=t;if(o)return{data:null,error:o};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Qf(i.access_token);let u=null;l.aal&&(u=l.aal);let c=u;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(p=>p.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const h=l.amr||[];return{data:{currentLevel:u,nextLevel:c,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(u=>u.kid===t);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(u=>u.kid===t),r&&this.jwks_cached_at+GP>i)return r;const{data:o,error:l}=await Ve(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,r=o.keys.find(u=>u.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:v,error:b}=await this.getSession();if(b||!v.session)return{data:null,error:b};r=v.session.access_token}const{header:i,payload:o,signature:l,raw:{header:u,payload:c}}=Qf(r);n!=null&&n.allowExpired||gA(o.exp);const f=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!f){const{error:v}=await this.getUser(r);if(v)throw v;return{data:{claims:o,header:i,signature:l},error:null}}const h=yA(i.alg),p=await crypto.subtle.importKey("jwk",f,h,!0,["verify"]);if(!await crypto.subtle.verify(h,p,l,rA(`${u}.${c}`)))throw new np("Invalid JWT signature");return{data:{claims:o,header:i,signature:l},error:null}}catch(r){if(Fe(r))return{data:null,error:r};throw r}}}Ka.nextInstanceID=0;const JA=Ka;class QA extends JA{constructor(t){super(t)}}var XA=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};class ZA{constructor(t,n,r){var i,o,l;this.supabaseUrl=t,this.supabaseKey=n;const u=WP(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const c=`sb-${u.hostname.split(".")[0]}-auth-token`,f={db:RP,realtime:MP,auth:Object.assign(Object.assign({},OP),{storageKey:c}),global:AP},h=UP(r??{},f);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=h.global.headers)!==null&&o!==void 0?o:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(p,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=h.auth)!==null&&l!==void 0?l:{},this.headers,h.global.fetch),this.fetch=FP(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new KI(new URL("rest/v1",u).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new TP(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new FI(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return XA(this,void 0,void 0,function*(){var t,n;if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:o,storageKey:l,flowType:u,lock:c,debug:f},h,p){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new QA({url:this.authUrl.href,headers:Object.assign(Object.assign({},y),h),storageKey:l,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:o,flowType:u,lock:c,debug:f,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new fP(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const eR=(e,t,n)=>new ZA(e,t,n);function tR(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}tR()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const nR="https://kjsdmygqhxaryvfmnhqr.supabase.co",rR="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imtqc2RteWdxaHhhcnl2Zm1uaHFyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAwMTAxMDEsImV4cCI6MjA3NTU4NjEwMX0.kXL7Dgum6CepvcrS8LVY1v_EHnpyUQOFcqndUQWPrkM",Bt=eR(nR,rR,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),Mx=e=>{let t;const n=new Set,r=(f,h)=>{const p=typeof f=="function"?f(t):f;if(!Object.is(p,t)){const y=t;t=h??(typeof p!="object"||p===null)?p:Object.assign({},t,p),n.forEach(v=>v(t,y))}},i=()=>t,u={setState:r,getState:i,getInitialState:()=>c,subscribe:f=>(n.add(f),()=>n.delete(f))},c=t=e(r,i,u);return u},iR=(e=>e?Mx(e):Mx),sR=e=>e;function oR(e,t=sR){const n=Ne.useSyncExternalStore(e.subscribe,Ne.useCallback(()=>t(e.getState()),[e,t]),Ne.useCallback(()=>t(e.getInitialState()),[e,t]));return Ne.useDebugValue(n),n}const Dx=e=>{const t=iR(e),n=r=>oR(t,r);return Object.assign(n,t),n},aR=(e=>e?Dx(e):Dx),lR="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Zt=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=lR[n[e]&63];return t};var Fu={exports:{}},uR=Fu.exports,Lx;function rk(){return Lx||(Lx=1,(function(e,t){(function(n,r){e.exports=r()})(uR,(function(){var n=1e3,r=6e4,i=36e5,o="millisecond",l="second",u="minute",c="hour",f="day",h="week",p="month",y="quarter",v="year",b="date",w="Invalid Date",_=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,E=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,j={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(q){var $=["th","st","nd","rd"],J=q%100;return"["+q+($[(J-20)%10]||$[J]||$[0])+"]"}},C=function(q,$,J){var ie=String(q);return!ie||ie.length>=$?q:""+Array($+1-ie.length).join(J)+q},M={s:C,z:function(q){var $=-q.utcOffset(),J=Math.abs($),ie=Math.floor(J/60),L=J%60;return($<=0?"+":"-")+C(ie,2,"0")+":"+C(L,2,"0")},m:function q($,J){if($.date()<J.date())return-q(J,$);var ie=12*(J.year()-$.year())+(J.month()-$.month()),L=$.clone().add(ie,p),ne=J-L<0,T=$.clone().add(ie+(ne?-1:1),p);return+(-(ie+(J-L)/(ne?L-T:T-L))||0)},a:function(q){return q<0?Math.ceil(q)||0:Math.floor(q)},p:function(q){return{M:p,y:v,w:h,d:f,D:b,h:c,m:u,s:l,ms:o,Q:y}[q]||String(q||"").toLowerCase().replace(/s$/,"")},u:function(q){return q===void 0}},D="en",R={};R[D]=j;var z="$isDayjsObject",F=function(q){return q instanceof Q||!(!q||!q[z])},V=function q($,J,ie){var L;if(!$)return D;if(typeof $=="string"){var ne=$.toLowerCase();R[ne]&&(L=ne),J&&(R[ne]=J,L=ne);var T=$.split("-");if(!L&&T.length>1)return q(T[0])}else{var U=$.name;R[U]=$,L=U}return!ie&&L&&(D=L),L||!ie&&D},A=function(q,$){if(F(q))return q.clone();var J=typeof $=="object"?$:{};return J.date=q,J.args=arguments,new Q(J)},O=M;O.l=V,O.i=F,O.w=function(q,$){return A(q,{locale:$.$L,utc:$.$u,x:$.$x,$offset:$.$offset})};var Q=(function(){function q(J){this.$L=V(J.locale,null,!0),this.parse(J),this.$x=this.$x||J.x||{},this[z]=!0}var $=q.prototype;return $.parse=function(J){this.$d=(function(ie){var L=ie.date,ne=ie.utc;if(L===null)return new Date(NaN);if(O.u(L))return new Date;if(L instanceof Date)return new Date(L);if(typeof L=="string"&&!/Z$/i.test(L)){var T=L.match(_);if(T){var U=T[2]-1||0,Z=(T[7]||"0").substring(0,3);return ne?new Date(Date.UTC(T[1],U,T[3]||1,T[4]||0,T[5]||0,T[6]||0,Z)):new Date(T[1],U,T[3]||1,T[4]||0,T[5]||0,T[6]||0,Z)}}return new Date(L)})(J),this.init()},$.init=function(){var J=this.$d;this.$y=J.getFullYear(),this.$M=J.getMonth(),this.$D=J.getDate(),this.$W=J.getDay(),this.$H=J.getHours(),this.$m=J.getMinutes(),this.$s=J.getSeconds(),this.$ms=J.getMilliseconds()},$.$utils=function(){return O},$.isValid=function(){return this.$d.toString()!==w},$.isSame=function(J,ie){var L=A(J);return this.startOf(ie)<=L&&L<=this.endOf(ie)},$.isAfter=function(J,ie){return A(J)<this.startOf(ie)},$.isBefore=function(J,ie){return this.endOf(ie)<A(J)},$.$g=function(J,ie,L){return O.u(J)?this[ie]:this.set(L,J)},$.unix=function(){return Math.floor(this.valueOf()/1e3)},$.valueOf=function(){return this.$d.getTime()},$.startOf=function(J,ie){var L=this,ne=!!O.u(ie)||ie,T=O.p(J),U=function(te,re){var ce=O.w(L.$u?Date.UTC(L.$y,re,te):new Date(L.$y,re,te),L);return ne?ce:ce.endOf(f)},Z=function(te,re){return O.w(L.toDate()[te].apply(L.toDate("s"),(ne?[0,0,0,0]:[23,59,59,999]).slice(re)),L)},I=this.$W,ye=this.$M,me=this.$D,pe="set"+(this.$u?"UTC":"");switch(T){case v:return ne?U(1,0):U(31,11);case p:return ne?U(1,ye):U(0,ye+1);case h:var fe=this.$locale().weekStart||0,W=(I<fe?I+7:I)-fe;return U(ne?me-W:me+(6-W),ye);case f:case b:return Z(pe+"Hours",0);case c:return Z(pe+"Minutes",1);case u:return Z(pe+"Seconds",2);case l:return Z(pe+"Milliseconds",3);default:return this.clone()}},$.endOf=function(J){return this.startOf(J,!1)},$.$set=function(J,ie){var L,ne=O.p(J),T="set"+(this.$u?"UTC":""),U=(L={},L[f]=T+"Date",L[b]=T+"Date",L[p]=T+"Month",L[v]=T+"FullYear",L[c]=T+"Hours",L[u]=T+"Minutes",L[l]=T+"Seconds",L[o]=T+"Milliseconds",L)[ne],Z=ne===f?this.$D+(ie-this.$W):ie;if(ne===p||ne===v){var I=this.clone().set(b,1);I.$d[U](Z),I.init(),this.$d=I.set(b,Math.min(this.$D,I.daysInMonth())).$d}else U&&this.$d[U](Z);return this.init(),this},$.set=function(J,ie){return this.clone().$set(J,ie)},$.get=function(J){return this[O.p(J)]()},$.add=function(J,ie){var L,ne=this;J=Number(J);var T=O.p(ie),U=function(ye){var me=A(ne);return O.w(me.date(me.date()+Math.round(ye*J)),ne)};if(T===p)return this.set(p,this.$M+J);if(T===v)return this.set(v,this.$y+J);if(T===f)return U(1);if(T===h)return U(7);var Z=(L={},L[u]=r,L[c]=i,L[l]=n,L)[T]||1,I=this.$d.getTime()+J*Z;return O.w(I,this)},$.subtract=function(J,ie){return this.add(-1*J,ie)},$.format=function(J){var ie=this,L=this.$locale();if(!this.isValid())return L.invalidDate||w;var ne=J||"YYYY-MM-DDTHH:mm:ssZ",T=O.z(this),U=this.$H,Z=this.$m,I=this.$M,ye=L.weekdays,me=L.months,pe=L.meridiem,fe=function(re,ce,he,_e){return re&&(re[ce]||re(ie,ne))||he[ce].slice(0,_e)},W=function(re){return O.s(U%12||12,re,"0")},te=pe||function(re,ce,he){var _e=re<12?"AM":"PM";return he?_e.toLowerCase():_e};return ne.replace(E,(function(re,ce){return ce||(function(he){switch(he){case"YY":return String(ie.$y).slice(-2);case"YYYY":return O.s(ie.$y,4,"0");case"M":return I+1;case"MM":return O.s(I+1,2,"0");case"MMM":return fe(L.monthsShort,I,me,3);case"MMMM":return fe(me,I);case"D":return ie.$D;case"DD":return O.s(ie.$D,2,"0");case"d":return String(ie.$W);case"dd":return fe(L.weekdaysMin,ie.$W,ye,2);case"ddd":return fe(L.weekdaysShort,ie.$W,ye,3);case"dddd":return ye[ie.$W];case"H":return String(U);case"HH":return O.s(U,2,"0");case"h":return W(1);case"hh":return W(2);case"a":return te(U,Z,!0);case"A":return te(U,Z,!1);case"m":return String(Z);case"mm":return O.s(Z,2,"0");case"s":return String(ie.$s);case"ss":return O.s(ie.$s,2,"0");case"SSS":return O.s(ie.$ms,3,"0");case"Z":return T}return null})(re)||T.replace(":","")}))},$.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},$.diff=function(J,ie,L){var ne,T=this,U=O.p(ie),Z=A(J),I=(Z.utcOffset()-this.utcOffset())*r,ye=this-Z,me=function(){return O.m(T,Z)};switch(U){case v:ne=me()/12;break;case p:ne=me();break;case y:ne=me()/3;break;case h:ne=(ye-I)/6048e5;break;case f:ne=(ye-I)/864e5;break;case c:ne=ye/i;break;case u:ne=ye/r;break;case l:ne=ye/n;break;default:ne=ye}return L?ne:O.a(ne)},$.daysInMonth=function(){return this.endOf(p).$D},$.$locale=function(){return R[this.$L]},$.locale=function(J,ie){if(!J)return this.$L;var L=this.clone(),ne=V(J,ie,!0);return ne&&(L.$L=ne),L},$.clone=function(){return O.w(this.$d,this)},$.toDate=function(){return new Date(this.valueOf())},$.toJSON=function(){return this.isValid()?this.toISOString():null},$.toISOString=function(){return this.$d.toISOString()},$.toString=function(){return this.$d.toUTCString()},q})(),H=Q.prototype;return A.prototype=H,[["$ms",o],["$s",l],["$m",u],["$H",c],["$W",f],["$M",p],["$y",v],["$D",b]].forEach((function(q){H[q[1]]=function($){return this.$g($,q[0],q[1])}})),A.extend=function(q,$){return q.$i||(q($,Q,A),q.$i=!0),A},A.locale=V,A.isDayjs=F,A.unix=function(q){return A(1e3*q)},A.en=R[D],A.Ls=R,A.p={},A}))})(Fu)),Fu.exports}var cR=rk();const qe=To(cR);function eh(e){return e.trim().toLowerCase().normalize("NFKD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,"").replace(/-{2,}/g,"-")}const wo=`
  id,
  name,
  subtitle,
  objective_id,
  parent_work_id,
  node_type,
  tags,
  order_hint,
  next_work_id,
  variant_of_work_id,
  description_markdown,
  estimated_minutes,
  notes,
  video_urls,
  visibility,
  owner_id,
  owner_email,
  created_at,
  updated_at,
  work_collaborators (
    id,
    email,
    role,
    user_id,
    created_at
  )
`,ik=e=>Array.from(new Set(e.map(t=>t.trim().toLowerCase()).filter(t=>t.length>0))),dR=e=>Array.isArray(e)?e.map(t=>typeof t=="string"?t.trim():"").filter(t=>t.length>0):[],Zp=e=>Array.isArray(e)?Array.from(new Set(e.map(t=>typeof t=="string"?t.trim().toLowerCase():"").filter(t=>t.length>0))):[],sk=e=>(e??[]).map(t=>({id:`${t.id}`,email:t.email.toLowerCase(),role:t.role,userId:t.user_id??void 0,createdAt:t.created_at})),em=(e,t)=>{var u,c;const n=sk(e.work_collaborators),r=n.map(f=>f.email),i=((u=t==null?void 0:t.actorEmail)==null?void 0:u.toLowerCase())??"",o=t?e.owner_id===t.actorId:!1,l=o||r.includes(i);return{id:e.id,name:e.name,subtitle:e.subtitle??void 0,objectiveId:e.objective_id,parentWorkId:e.parent_work_id??null,nodeType:e.node_type??void 0,tags:Zp(e.tags),orderHint:typeof e.order_hint=="number"?e.order_hint:void 0,nextWorkId:e.next_work_id??null,variantOfWorkId:e.variant_of_work_id??null,descriptionMarkdown:e.description_markdown??"",estimatedMinutes:e.estimated_minutes??0,notes:e.notes??void 0,videoUrls:dR(e.video_urls),visibility:e.visibility??"private",ownerId:e.owner_id,ownerEmail:((c=e.owner_email)==null?void 0:c.toLowerCase())??"",collaborators:n,collaboratorEmails:r,createdAt:e.created_at,updatedAt:e.updated_at,canEdit:l,isOwner:o}};async function fR(e){const{data:t,error:n}=await Bt.from("works").select(wo).order("name");if(n)throw console.error("No se pudieron cargar los trabajos compartidos",n),n;return t.map(r=>em(r,e))}async function $x(e,t){var b;const n=e.id??Zt(),r=ik(e.collaboratorEmails),i=t.actorEmail.trim().toLowerCase(),o=(b=e.nodeType)!=null&&b.trim()?e.nodeType.trim():null,l=Zp(e.tags??[]),u=typeof e.orderHint=="number"&&Number.isFinite(e.orderHint)?e.orderHint:null,c=e.nextWorkId??null,f=e.variantOfWorkId??null,{data:h,error:p}=await Bt.from("works").insert({id:n,name:e.name,subtitle:e.subtitle??null,objective_id:e.objectiveId,parent_work_id:e.parentWorkId??null,node_type:o,tags:l,order_hint:u,next_work_id:c,variant_of_work_id:f,description_markdown:e.descriptionMarkdown,estimated_minutes:e.estimatedMinutes,notes:e.notes??null,video_urls:e.videoUrls,visibility:e.visibility,owner_id:t.actorId,owner_email:i,updated_at:new Date().toISOString()}).select(wo).maybeSingle();if(p||!h)throw console.error("No se pudo crear el trabajo",p),p??new Error("Falta respuesta al crear trabajo");if(r.length>0){const w=r.map(E=>({work_id:h.id,email:E})),{error:_}=await Bt.from("work_collaborators").insert(w);if(_)throw console.error("No se pudieron guardar los colaboradores",_),_}const{data:y,error:v}=await Bt.from("works").select(wo).eq("id",h.id).maybeSingle();if(v||!y)throw console.error("No se pudo refrescar el trabajo creado",v),v??new Error("No se pudo cargar el trabajo creado");return em(y,t)}async function hR(e,t,n){const r={};t.name!==void 0&&(r.name=t.name),t.subtitle!==void 0&&(r.subtitle=t.subtitle),t.objectiveId!==void 0&&(r.objective_id=t.objectiveId),t.parentWorkId!==void 0&&(r.parent_work_id=t.parentWorkId),t.nodeType!==void 0&&(r.node_type=t.nodeType),t.tags!==void 0&&(r.tags=Zp(t.tags)),t.orderHint!==void 0&&(r.order_hint=t.orderHint),t.nextWorkId!==void 0&&(r.next_work_id=t.nextWorkId),t.variantOfWorkId!==void 0&&(r.variant_of_work_id=t.variantOfWorkId),t.descriptionMarkdown!==void 0&&(r.description_markdown=t.descriptionMarkdown),t.estimatedMinutes!==void 0&&(r.estimated_minutes=t.estimatedMinutes),t.notes!==void 0&&(r.notes=t.notes),t.videoUrls!==void 0&&(r.video_urls=t.videoUrls),t.visibility!==void 0&&(r.visibility=t.visibility),r.updated_at=new Date().toISOString();let i=null;if(Object.keys(r).length>0){const{data:o,error:l}=await Bt.from("works").update(r).eq("id",e).select(wo).maybeSingle();if(l||!o)throw console.error("No se pudo actualizar el trabajo",l),l??new Error("Falta respuesta al actualizar trabajo");i=o}else{const{data:o,error:l}=await Bt.from("works").select(wo).eq("id",e).maybeSingle();if(l||!o)throw l??new Error("Trabajo no encontrado");i=o}if(t.collaboratorEmails){const o=ik(t.collaboratorEmails),l=sk(i.work_collaborators),u=l.map(y=>y.email),c=o.filter(y=>!u.includes(y)),f=l.filter(y=>!o.includes(y.email));if(c.length>0){const y=c.map(b=>({work_id:e,email:b})),{error:v}=await Bt.from("work_collaborators").insert(y);if(v)throw console.error("No se pudieron aadir los colaboradores",v),v}if(f.length>0){const y=f.map(b=>b.email),{error:v}=await Bt.from("work_collaborators").delete().eq("work_id",e).in("email",y);if(v)throw console.error("No se pudieron eliminar colaboradores",v),v}const{data:h,error:p}=await Bt.from("works").select(wo).eq("id",e).maybeSingle();if(p||!h)throw p??new Error("Error al refrescar colaboradores");i=h}return em(i,n)}async function pR(e){const{error:t}=await Bt.from("works").delete().eq("id",e);if(t)throw console.error("No se pudo eliminar el trabajo",t),t}const Et={objectives:"sport-planner-objetivos",works:"sport-planner-trabajos",sessions:"sport-planner-sesiones",assistants:"sport-planner-asistentes",kungfuPrograms:"sport-planner-kungfu-programs",kungfuCadence:"sport-planner-kungfu-cadence",kungfuTodayPlan:"sport-planner-kungfu-today-plan",workTaxonomy:"sport-planner-work-taxonomy"},ok=typeof window<"u",At=()=>new Date().toISOString(),as="18:30",ds=[{id:"default",name:"Kung Fu  activo",enabled:!0,include:[{byTags:["kungfu"]}],exclude:[]}],fs={targetsDays:{work:7,technique:5,segment:8,form:10,drill:7},overrides:[]},fn={limitMode:"count",maxItems:12,minutesBudget:30,template:{totalMinutes:30,focusMinutes:18,rouletteMinutes:10,recapMinutes:2},defaultMinutesByNodeType:{work:3,technique:1.5,segment:6,form:15,drill:4,link:2},focusSelectors:[],rouletteSelectors:[],groups:[{id:"formas",name:"Formas",enabled:!0,order:1,type:"work",limitMode:"minutes",minutesBudget:18,strategy:"overdue",hierarchyRule:"prefer_leaves",include:[{byNodeTypes:["segment","form"]}],exclude:[]},{id:"tecnicas",name:"Tcnicas",enabled:!0,order:2,type:"work",limitMode:"minutes",minutesBudget:10,strategy:"weighted",hierarchyRule:"allow_all",include:[{byNodeTypes:["technique"]},{byTags:["roulette"]}],exclude:[]},{id:"recap",name:"Recap",enabled:!0,order:99,type:"note",limitMode:"minutes",minutesBudget:2}]},Ai={nodeTypes:[{key:"form",label:"Form"},{key:"segment",label:"Segment"},{key:"application",label:"Application"},{key:"technique",label:"Technique"},{key:"drill",label:"Drill"},{key:"work",label:"Work"},{key:"link",label:"Link"},{key:"style",label:"Style"}],tags:[]},mR=e=>{const n=(Array.isArray(e)?e:[]).map(i=>{if(!i||typeof i!="object")return null;const o=i,l=String(o.key??"").trim().toLowerCase(),u=String(o.label??"").trim();return l?{key:l,label:u||l}:null}).filter(Boolean),r=new Map;return n.forEach(i=>{r.set(i.key,i)}),Ai.nodeTypes.forEach(i=>{r.has(i.key)||r.set(i.key,i)}),Array.from(r.values()).sort((i,o)=>i.label.localeCompare(o.label,"en",{sensitivity:"base"}))},gR=e=>{const n=(Array.isArray(e)?e:[]).map(i=>{if(typeof i=="string"){const u=i.trim().toLowerCase();return u?{name:u}:null}if(!i||typeof i!="object")return null;const l=String(i.name??"").trim().toLowerCase();return l?{name:l}:null}).filter(Boolean),r=new Map;return n.forEach(i=>r.set(i.name,i)),Array.from(r.values()).sort((i,o)=>i.name.localeCompare(o.name,"en",{sensitivity:"base"}))},Wn=(e,t)=>{const n=(e&&typeof e=="object"?e:{})??{},r=mR(n.nodeTypes),i=gR(n.tags),o=new Map(r.map(u=>[u.key,u])),l=new Map(i.map(u=>[u.name,u]));return t.forEach(u=>{const c=(u.nodeType??"").trim().toLowerCase();c&&!o.has(c)&&o.set(c,{key:c,label:c}),(u.tags??[]).forEach(f=>{const h=String(f??"").trim().toLowerCase();h&&!l.has(h)&&l.set(h,{name:h})})}),{nodeTypes:Array.from(o.values()).sort((u,c)=>u.label.localeCompare(c.label,"en",{sensitivity:"base"})),tags:Array.from(l.values()).sort((u,c)=>u.name.localeCompare(c.name,"en",{sensitivity:"base"}))}},Fx=e=>Array.from(new Set((Array.isArray(e)?e:[]).map(t=>String(t??"").trim().toLowerCase()).filter(t=>t.length>0))),yR=e=>Array.from(new Set((Array.isArray(e)?e:[]).map(t=>String(t??"").trim()).filter(t=>t.length>0))),ak=e=>e==="count"||e==="minutes"||e==="both",vR=e=>e==="work"||e==="note",xR=e=>e==="overdue"||e==="weighted",wR=e=>e==="allow_all"||e==="prefer_leaves",bR=e=>{const t={},n=Fx(e.byTags),r=Fx(e.byNodeTypes),i=yR(e.byWorkIds);return n.length>0&&(t.byTags=n),r.length>0&&(t.byNodeTypes=r),i.length>0&&(t.byWorkIds=i),t},jo=e=>(e??[]).map(bR).filter(t=>Object.keys(t).length>0),kR=e=>{if(!Array.isArray(e))return[];const t=e.map(n=>Number(n)).filter(n=>Number.isFinite(n)).map(n=>Math.round(n)).filter(n=>n>=0&&n<=6);return Array.from(new Set(t)).sort((n,r)=>n-r)},SR=e=>{const t={};return!e||typeof e!="object"?{...fn.defaultMinutesByNodeType}:(Object.entries(e).forEach(([n,r])=>{const i=n.trim().toLowerCase(),o=Number(r);i&&Number.isFinite(o)&&(t[i]=Math.max(.25,o))}),Object.keys(t).length>0?t:{...fn.defaultMinutesByNodeType})},ER=(e,t)=>{const n=String(e.id??"").trim()||Zt(),r=vR(e.type)?e.type:"work",i=typeof e.enabled=="boolean"?e.enabled:!0,o=String(e.name??"").trim()||(r==="note"?"Recap":"Grupo"),l=Number.isFinite(Number(e.order))?Number(e.order):t,u=kR(e.daysOfWeek),c=ak(e.limitMode)?e.limitMode:"minutes",f=Number.isFinite(Number(e.maxItems))?Math.max(0,Math.round(Number(e.maxItems))):void 0,h=Number.isFinite(Number(e.minutesBudget))?Math.max(0,Number(e.minutesBudget)):void 0,p=xR(e.strategy)?e.strategy:"overdue",y=wR(e.hierarchyRule)?e.hierarchyRule:"allow_all",v=jo(e.include),b=jo(e.exclude);return{id:n,name:o,enabled:i,order:l,type:r,daysOfWeek:u,limitMode:c,maxItems:f,minutesBudget:h,strategy:p,hierarchyRule:y,include:v,exclude:b}},_R=e=>{var f,h,p;const t=Math.max(0,Number((f=e.template)==null?void 0:f.focusMinutes)||0),n=Math.max(0,Number((h=e.template)==null?void 0:h.rouletteMinutes)||0),r=Math.max(0,Number((p=e.template)==null?void 0:p.recapMinutes)||0),i=jo(e.focusSelectors),o=jo(e.rouletteSelectors),l=i.length>0?i:[{byNodeTypes:["segment","form"]}],u=o.length>0?o:[{byNodeTypes:["technique"]},{byTags:["roulette"]}],c=[{id:"formas",name:"Formas",enabled:!0,order:1,type:"work",limitMode:"minutes",minutesBudget:t>0?t:18,strategy:"overdue",hierarchyRule:"prefer_leaves",include:l,exclude:[]},{id:"tecnicas",name:"Tcnicas",enabled:!0,order:2,type:"work",limitMode:"minutes",minutesBudget:n>0?n:10,strategy:"weighted",hierarchyRule:"allow_all",include:u,exclude:[]}];return r>0&&c.push({id:"recap",name:"Recap",enabled:!0,order:99,type:"note",limitMode:"minutes",minutesBudget:r}),c},rp=e=>{var b,w,_;const t=e??fn,n=ak(t.limitMode)?t.limitMode:fn.limitMode,r=Math.max(1,Math.round(Number(t.maxItems)||fn.maxItems)),i=Math.max(1,Number(t.minutesBudget)||fn.minutesBudget),o=Math.max(0,Number((b=t.template)==null?void 0:b.focusMinutes)||fn.template.focusMinutes),l=Math.max(0,Number((w=t.template)==null?void 0:w.rouletteMinutes)||fn.template.rouletteMinutes),u=Math.max(0,Number((_=t.template)==null?void 0:_.recapMinutes)||fn.template.recapMinutes),c=Math.max(0,o+l+u),f=SR(t.defaultMinutesByNodeType),h=jo(t.focusSelectors),p=jo(t.rouletteSelectors),v=((t.groups??[]).length>0?t.groups??[]:_R(t)).map((E,j)=>ER(E,j+1)).sort((E,j)=>E.order-j.order).map((E,j)=>({...E,order:j+1}));return{...t,limitMode:n,maxItems:r,minutesBudget:i,template:{totalMinutes:c,focusMinutes:o,rouletteMinutes:l,recapMinutes:u},defaultMinutesByNodeType:f,focusSelectors:h,rouletteSelectors:p,groups:v}},On=e=>{if(!e)return null;const t=e.trim();return t.length>0?t:null},zu=e=>Array.from(new Set((e??[]).map(t=>(t??"").trim().toLowerCase()).filter(t=>t.length>0))),yr=e=>{if(!e)return;const t=e.trim();return t.length>0?t:void 0},ip=e=>Array.from(new Set((e??[]).map(t=>(t??"").trim().toLowerCase()).filter(t=>t.length>0))),Ni=e=>{const t=At(),n=On(e.parentWorkId??null),r=On(e.nextWorkId??null),i=On(e.variantOfWorkId??null),o=yr(e.nodeType??void 0),l=zu(e.tags),u=typeof e.orderHint=="number"&&Number.isFinite(e.orderHint)?e.orderHint:void 0,c=(e.collaborators??[]).map((p,y)=>({id:p.id??`${e.id}-collab-${y}`,email:(p.email??"").trim().toLowerCase(),role:p.role??"editor",userId:p.userId??null,createdAt:p.createdAt??t})),f=ip([...e.collaboratorEmails??[],...c.map(p=>p.email)]),h=Array.isArray(e.videoUrls)?e.videoUrls.map(p=>typeof p=="string"?p.trim():"").filter(Boolean):[];return{id:e.id,name:e.name??"Trabajo sin nombre",subtitle:yr(e.subtitle),objectiveId:e.objectiveId??"",parentWorkId:n,nodeType:o,tags:l,orderHint:u,nextWorkId:r,variantOfWorkId:i,descriptionMarkdown:e.descriptionMarkdown??"",estimatedMinutes:e.estimatedMinutes??0,notes:yr(e.notes),videoUrls:h,createdAt:e.createdAt??t,updatedAt:e.updatedAt??t,visibility:e.visibility??"private",ownerId:e.ownerId??"local-owner",ownerEmail:(e.ownerEmail??"").trim().toLowerCase(),collaborators:c,collaboratorEmails:f,canEdit:e.canEdit??!0,isOwner:e.isOwner??!0}},CR=(e,t,n)=>{var o;if(!n)return!1;if(n===t)return!0;const r=new Set;let i=n;for(;i;){if(i===t)return!0;if(r.has(i))break;r.add(i),i=((o=e.find(u=>u.id===i))==null?void 0:o.parentWorkId)??null}return!1},cn=(e,t)=>{if(!ok)return t;try{const n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(n){return console.warn(`No se pudo cargar ${e} desde localStorage`,n),t}},lk=e=>e==="present"||e==="absent"||e==="pending",uk=e=>e==="present"||e==="absent",sp=e=>(e??[]).map(t=>{const n=lk(t.status)?t.status:"pending",r=uk(t.actualStatus)?t.actualStatus:void 0;return{assistantId:t.assistantId,status:n,actualStatus:r,notes:t.notes,actualNotes:t.actualNotes}}),Ze=e=>{if(!ok)return;const t={objectives:cn(Et.objectives,[]),works:cn(Et.works,[]),sessions:cn(Et.sessions,[]),assistants:cn(Et.assistants,[]),kungfuPrograms:cn(Et.kungfuPrograms,ds),kungfuCadence:cn(Et.kungfuCadence,fs),kungfuTodayPlan:cn(Et.kungfuTodayPlan,fn),workTaxonomy:cn(Et.workTaxonomy,Ai)},n=op({...t,...e});window.localStorage.setItem(Et.objectives,JSON.stringify(n.objectives)),window.localStorage.setItem(Et.works,JSON.stringify(n.works)),window.localStorage.setItem(Et.sessions,JSON.stringify(n.sessions)),window.localStorage.setItem(Et.assistants,JSON.stringify(n.assistants)),window.localStorage.setItem(Et.kungfuPrograms,JSON.stringify(n.kungfuPrograms)),window.localStorage.setItem(Et.kungfuCadence,JSON.stringify(n.kungfuCadence)),window.localStorage.setItem(Et.kungfuTodayPlan,JSON.stringify(n.kungfuTodayPlan)),window.localStorage.setItem(Et.workTaxonomy,JSON.stringify(n.workTaxonomy))},op=e=>{const t=(e.works??[]).map(r=>{const i=r.parent_work_id;return Ni({...r,id:r.id,parentWorkId:On(r.parentWorkId??i??null)})}),n=Wn(e.workTaxonomy??Ai,t);return{objectives:e.objectives??[],works:t,sessions:(e.sessions??[]).map(r=>({...r,kind:r.kind??"class",startTime:r.startTime??as,workItems:(r.workItems??[]).map(i=>({...i,focusLabel:i.focusLabel,completed:i.completed??!1})),attendance:sp(r.attendance)})),assistants:e.assistants??[],kungfuPrograms:e.kungfuPrograms??ds,kungfuCadence:e.kungfuCadence??fs,kungfuTodayPlan:rp(e.kungfuTodayPlan??fn),workTaxonomy:n}},je=aR((e,t)=>({ready:!1,objectives:[],works:[],worksLoading:!1,sessions:[],assistants:[],kungfuPrograms:ds,kungfuCadence:fs,kungfuTodayPlan:fn,workTaxonomy:Ai,hydrate:()=>{if(t().ready)return;const n=cn(Et.objectives,[]),r=cn(Et.works,[]).map(p=>{const y=p.parent_work_id;return Ni({...p,id:p.id,parentWorkId:On(p.parentWorkId??y??null)})}),i=cn(Et.workTaxonomy,Ai),o=Wn(i,r),l=cn(Et.sessions,[]).map(p=>({...p,kind:p.kind??"class",startTime:p.startTime??as,workItems:(p.workItems??[]).map(y=>({...y,focusLabel:y.focusLabel,completed:y.completed??!1})),attendance:sp(p.attendance)})),u=cn(Et.assistants,[]),c=cn(Et.kungfuPrograms,ds),f=cn(Et.kungfuCadence,fs),h=cn(Et.kungfuTodayPlan,fn);e({objectives:n,works:r,sessions:l,assistants:u,kungfuPrograms:c,kungfuCadence:f,kungfuTodayPlan:rp(h),workTaxonomy:o,ready:!0})},setCollections:n=>{e(r=>{const i=op({objectives:n.objectives??r.objectives,works:n.works??r.works,sessions:n.sessions??r.sessions,assistants:n.assistants??r.assistants,kungfuPrograms:n.kungfuPrograms??r.kungfuPrograms,kungfuCadence:n.kungfuCadence??r.kungfuCadence,kungfuTodayPlan:n.kungfuTodayPlan??r.kungfuTodayPlan,workTaxonomy:n.workTaxonomy??r.workTaxonomy}),o={...r,...i,ready:!0};return Ze(i),o})},setWorks:n=>{const r=n.map(i=>Ni(i));e(i=>{const o=Wn(i.workTaxonomy,r),l={...i,works:r,workTaxonomy:o};return Ze({works:r}),l})},loadWorks:async n=>{e({worksLoading:!0});try{const i=(await fR(n)).map(p=>Ni(p)),o=t().works,l=new Set(i.map(p=>p.id)),u=o.filter(p=>!l.has(p.id)&&(!p.ownerId||p.ownerId==="local-owner"||p.ownerId===n.actorId)),c=[];for(const p of u)try{const y=await $x({id:p.id,name:p.name,subtitle:p.subtitle,objectiveId:p.objectiveId,parentWorkId:p.parentWorkId??null,nodeType:p.nodeType,tags:p.tags,orderHint:p.orderHint,nextWorkId:p.nextWorkId??null,variantOfWorkId:p.variantOfWorkId??null,descriptionMarkdown:p.descriptionMarkdown,estimatedMinutes:p.estimatedMinutes,notes:p.notes,videoUrls:p.videoUrls,visibility:p.visibility??"private",collaboratorEmails:p.collaboratorEmails??[]},n),v=Ni(y);c.push(v),l.add(v.id)}catch(y){console.error(`No se pudo migrar el trabajo legacy ${p.id}`,y)}const f=[...i];c.forEach(p=>{if(!l.has(p.id))l.add(p.id),f.push(p);else{const y=f.findIndex(v=>v.id===p.id);y>=0?f[y]=p:f.push(p)}});const h=f.map(p=>Ni(p)).sort((p,y)=>p.name.localeCompare(y.name,"es",{sensitivity:"base"}));e(p=>{const y=Wn(p.workTaxonomy,h),v={...p,works:h,workTaxonomy:y};return Ze({works:h}),v})}finally{e({worksLoading:!1})}},reset:()=>{e(n=>{const r=op({objectives:[],works:[],sessions:[],assistants:[],kungfuPrograms:ds,kungfuCadence:fs,kungfuTodayPlan:fn,workTaxonomy:Ai}),i={...n,...r,ready:!0,worksLoading:!1};return Ze(i),i})},setKungfuPrograms:n=>{const r=Array.isArray(n)?n:ds;e(i=>{const o={...i,kungfuPrograms:r};return Ze(o),o})},setKungfuCadence:n=>{const r=n??fs;e(i=>{const o={...i,kungfuCadence:r};return Ze(o),o})},setKungfuTodayPlan:n=>{const r=rp(n??fn);e(i=>{const o={...i,kungfuTodayPlan:r};return Ze(o),o})},setWorkTaxonomy:n=>{e(r=>{const i=Wn(n??Ai,r.works),o={...r,workTaxonomy:i};return Ze(o),o})},upsertNodeType:n=>{const r=eh(n);if(!r)return null;const i=n.trim()||r;return e(o=>{const l=o.workTaxonomy.nodeTypes??[],u=l.some(h=>h.key===r)?l.map(h=>h.key===r?{...h,label:i}:h):[...l,{key:r,label:i}],c=Wn({...o.workTaxonomy,nodeTypes:u},o.works),f={...o,workTaxonomy:c};return Ze(f),f}),r},removeNodeType:n=>{const r=(n??"").trim().toLowerCase();return!r||t().works.some(o=>(o.nodeType??"").trim().toLowerCase()===r)?!1:(e(o=>{const l=(o.workTaxonomy.nodeTypes??[]).filter(f=>f.key!==r),u=Wn({...o.workTaxonomy,nodeTypes:l},o.works),c={...o,workTaxonomy:u};return Ze(c),c}),!0)},upsertTag:n=>{const r=eh(n);return r?(e(i=>{const o=i.workTaxonomy.tags??[],l=o.some(f=>f.name===r)?o:[...o,{name:r}],u=Wn({...i.workTaxonomy,tags:l},i.works),c={...i,workTaxonomy:u};return Ze(c),c}),r):null},removeTag:n=>{const r=eh(n??"");return!r||t().works.some(o=>(o.tags??[]).includes(r))?!1:(e(o=>{const l=(o.workTaxonomy.tags??[]).filter(f=>f.name!==r),u=Wn({...o.workTaxonomy,tags:l},o.works),c={...o,workTaxonomy:u};return Ze(c),c}),!0)},addObjective:n=>{const r={id:Zt(),name:n.name,colorHex:n.colorHex,descriptionMarkdown:n.descriptionMarkdown,createdAt:At(),updatedAt:At()};return e(i=>{const o={objectives:[...i.objectives,r]},l={...i,...o};return Ze(l),l}),r},updateObjective:(n,r)=>{e(i=>{const o=i.objectives.map(u=>u.id===n?{...u,...r,updatedAt:At()}:u),l={...i,objectives:o};return Ze(l),l})},deleteObjective:n=>t().works.some(i=>i.objectiveId===n)?!1:(e(i=>{const o=i.objectives.filter(u=>u.id!==n),l={...i,objectives:o};return Ze(l),l}),!0),addWork:async(n,r)=>{const i=t(),o=On(n.parentWorkId),l=o&&i.works.some(h=>h.id===o)?o:null,u={name:n.name,subtitle:yr(n.subtitle),objectiveId:n.objectiveId,parentWorkId:l,nodeType:yr(n.nodeType)??void 0,tags:zu(n.tags),orderHint:typeof n.orderHint=="number"&&Number.isFinite(n.orderHint)?n.orderHint:void 0,nextWorkId:On(n.nextWorkId??null),variantOfWorkId:On(n.variantOfWorkId??null),descriptionMarkdown:n.descriptionMarkdown,estimatedMinutes:n.estimatedMinutes,notes:yr(n.notes),videoUrls:(n.videoUrls??[]).map(h=>h.trim()).filter(h=>h.length>0),visibility:n.visibility??"private",collaboratorEmails:ip(n.collaboratorEmails??[])},c=await $x(u,r),f=Ni(c);return e(h=>{const p=[...h.works.filter(v=>v.id!==f.id),f],y=Wn(h.workTaxonomy,p);return Ze({works:p,workTaxonomy:y}),{...h,works:p,workTaxonomy:y}}),f},updateWork:async(n,r,i)=>{const o=t(),l=o.works.find(p=>p.id===n);if(!l)throw new Error("Trabajo no encontrado");let u=l.parentWorkId??null;if(r.parentWorkId!==void 0){const p=On(r.parentWorkId);p&&(!o.works.some(y=>y.id===p)||CR(o.works,n,p))?u=null:u=p}const c={...r,subtitle:r.subtitle!==void 0?yr(r.subtitle)??null:void 0,parentWorkId:u,nodeType:r.nodeType!==void 0?yr(r.nodeType??void 0)??null:void 0,tags:r.tags?zu(r.tags):void 0,orderHint:r.orderHint!==void 0?typeof r.orderHint=="number"&&Number.isFinite(r.orderHint)?r.orderHint:null:void 0,nextWorkId:r.nextWorkId!==void 0?On(r.nextWorkId??null):void 0,variantOfWorkId:r.variantOfWorkId!==void 0?On(r.variantOfWorkId??null):void 0,notes:r.notes!==void 0?yr(r.notes)??null:void 0,videoUrls:r.videoUrls?r.videoUrls.map(p=>p.trim()).filter(p=>p.length>0):void 0,collaboratorEmails:r.collaboratorEmails?ip(r.collaboratorEmails):void 0},f=await hR(n,c,i),h=Ni(f);return e(p=>{const y=p.works.map(b=>b.id===h.id?h:b),v=Wn(p.workTaxonomy,y);return Ze({works:y,workTaxonomy:v}),{...p,works:y,workTaxonomy:v}}),h},deleteWork:async(n,r)=>t().sessions.some(l=>l.workItems.some(u=>u.workId===n))||t().works.some(l=>l.parentWorkId===n)?!1:(await pR(n),e(l=>{const u=l.works.filter(f=>f.id!==n),c=Wn(l.workTaxonomy,u);return Ze({works:u,workTaxonomy:c}),{...l,works:u,workTaxonomy:c}}),!0),addSession:n=>{const r={id:Zt(),date:n.date,kind:n.kind??"class",title:n.title,description:n.description,notes:n.notes,notesByGroupId:n.notesByGroupId,workItems:[],attendance:[],startTime:n.startTime??as,createdAt:At(),updatedAt:At()};return e(i=>{const o=[...i.sessions,r],l={...i,sessions:o};return Ze(l),l}),r},duplicateSession:(n,r)=>{const i=t().sessions.find(u=>u.id===n);if(!i)return;const o=At(),l={...i,id:Zt(),date:r,startTime:i.startTime??as,createdAt:o,updatedAt:o,title:`${i.title} (copia)`};return l.workItems=i.workItems.slice().sort((u,c)=>u.order-c.order).map((u,c)=>({...u,id:Zt(),order:c,completed:!1})),l.attendance=i.attendance.map(u=>({assistantId:u.assistantId,status:"pending",notes:u.notes,actualStatus:void 0,actualNotes:void 0})),e(u=>{const c=[...u.sessions,l],f={...u,sessions:c};return Ze(f),f}),l},updateSession:(n,r)=>{e(i=>{const o=i.sessions.map(u=>u.id===n?{...u,...r,updatedAt:At()}:u),l={...i,sessions:o};return Ze(l),l})},deleteSession:n=>{e(r=>{const i=r.sessions.filter(l=>l.id!==n),o={...r,sessions:i};return Ze(o),o})},updateSessionWorkItems:(n,r)=>{e(i=>{const o=i.sessions.map(u=>u.id===n?{...u,workItems:r.map((c,f)=>({...c,order:f})),updatedAt:At()}:u),l={...i,sessions:o};return Ze(l),l})},addWorkToSession:(n,r)=>{const i=t().sessions.find(u=>u.id===n);if(!i)return;const o={id:Zt(),workId:r.workId,customDescriptionMarkdown:r.customDescriptionMarkdown,customDurationMinutes:r.customDurationMinutes,notes:r.notes,focusLabel:r.focusLabel,completed:!1,order:i.workItems.length},l={...i,workItems:[...i.workItems,o],updatedAt:At()};return e(u=>{const c=u.sessions.map(h=>h.id===n?l:h),f={...u,sessions:c};return Ze(f),f}),o},duplicateSessionWork:(n,r)=>{let i,o=!1;return e(l=>{const u=l.sessions.map(f=>{if(f.id!==n)return f;const h=f.workItems.findIndex(w=>w.id===r);if(h===-1)return f;o=!0;const y={...f.workItems[h],id:Zt(),completed:!1},v=[...f.workItems];v.splice(h+1,0,y);const b=v.map((w,_)=>{const E={...w,order:_};return w.id===y.id&&(i=E),E});return{...f,workItems:b,updatedAt:At()}});if(!o)return l;const c={...l,sessions:u};return Ze(c),c}),i},removeWorkFromSession:(n,r)=>{e(i=>{const o=i.sessions.map(u=>{if(u.id!==n)return u;const c=u.workItems.filter(f=>f.id!==r).map((f,h)=>({...f,order:h}));return{...u,workItems:c,updatedAt:At()}}),l={...i,sessions:o};return Ze(l),l})},toggleSessionWorkCompletion:(n,r,i)=>{e(o=>{const l=o.sessions.map(c=>c.id!==n?c:{...c,workItems:c.workItems.map(f=>f.id===r?{...f,completed:i}:f),updatedAt:At()}),u={...o,sessions:l};return Ze(u),u})},reorderSessionWork:(n,r,i)=>{e(o=>{const l=o.sessions.map(c=>{if(c.id!==n)return c;const f=[...c.workItems],[h]=f.splice(r,1);return f.splice(i,0,h),{...c,workItems:f.map((p,y)=>({...p,order:y})),updatedAt:At()}}),u={...o,sessions:l};return Ze(u),u})},updateSessionWorkDetails:(n,r,i)=>{e(o=>{const l=o.sessions.map(c=>c.id!==n?c:{...c,workItems:c.workItems.map(f=>f.id===r?{...f,...i}:f),updatedAt:At()}),u={...o,sessions:l};return Ze(u),u})},replaceSessionWork:(n,r,i)=>{t().works.some(o=>o.id===i)&&e(o=>{const l=o.sessions.map(c=>{if(c.id!==n)return c;const f=c.workItems.map(h=>h.id!==r?h:{...h,workId:i,customDescriptionMarkdown:void 0,customDurationMinutes:void 0,notes:void 0,focusLabel:void 0,completed:!1});return{...c,workItems:f,updatedAt:At()}}),u={...o,sessions:l};return Ze(u),u})},setAttendanceActualStatus:(n,r,i,o)=>{e(l=>{const u=l.sessions.map(f=>{if(f.id!==n)return f;const h=f.attendance.find(y=>y.assistantId===r);let p;if(h)p=f.attendance.map(y=>{if(y.assistantId!==r)return y;const v={...y,actualStatus:i};return typeof o<"u"&&(v.actualNotes=o),v});else{const y={assistantId:r,status:"pending",actualStatus:i};typeof o<"u"&&(y.actualNotes=o),p=[...f.attendance,y]}return{...f,attendance:p,updatedAt:At()}}),c={...l,sessions:u};return Ze(c),c})},setAttendanceStatus:(n,r,i,o)=>{e(l=>{const u=l.sessions.map(f=>{if(f.id!==n)return f;const h=f.attendance.find(y=>y.assistantId===r);let p;return h?p=f.attendance.map(y=>y.assistantId===r?{...y,status:i,notes:o}:y):p=[...f.attendance,{assistantId:r,status:i,notes:o}],{...f,attendance:p,updatedAt:At()}}),c={...l,sessions:u};return Ze(c),c})},addAssistant:n=>{const r={id:Zt(),name:n.name,notes:n.notes,active:n.active??!0,createdAt:At(),updatedAt:At()};return e(i=>{const o=[...i.assistants,r],l={...i,assistants:o};return Ze(l),l}),r},updateAssistant:(n,r)=>{e(i=>{const o=i.assistants.map(u=>u.id===n?{...u,...r,updatedAt:At()}:u),l={...i,assistants:o};return Ze(l),l})},deleteAssistant:n=>{e(r=>{const i=r.assistants.filter(u=>u.id!==n),o=r.sessions.map(u=>({...u,attendance:u.attendance.filter(c=>c.assistantId!==n)})),l={...r,assistants:i,sessions:o};return Ze(l),l})},importBackup:n=>{if((n.version??1)!==1)throw new Error("Versin de backup no soportada");const i=At(),o=(n.objetivos??[]).map(E=>({...E,createdAt:E.createdAt??i,updatedAt:E.updatedAt??i})),l=(n.trabajos??[]).map(E=>{const j=E.parent_work_id,C=E.node_type,M=E.tags,D=E.order_hint,R=E.next_work_id,z=E.variant_of_work_id;return{...E,subtitle:yr(E.subtitle),parentWorkId:On(E.parentWorkId??j??null),nodeType:yr(E.nodeType??C??void 0),tags:zu(Array.isArray(E.tags)?E.tags:Array.isArray(M)?M:[]),orderHint:typeof E.orderHint=="number"?E.orderHint:typeof D=="number"?D:void 0,nextWorkId:On(E.nextWorkId??R??null),variantOfWorkId:On(E.variantOfWorkId??z??null),createdAt:E.createdAt??i,updatedAt:E.updatedAt??i,videoUrls:E.videoUrls??[]}}),u=(n.asistentes??[]).map(E=>({...E,createdAt:E.createdAt??i,updatedAt:E.updatedAt??i,active:E.active??!0})),c=n.kungfuPrograms??ds,f=n.kungfuCadence??fs,h=n.kungfuTodayPlan??fn,p=Wn(n.workTaxonomy??Ai,l),y=new Map;(n.sesiones??[]).forEach(E=>{const j=E.id??Zt(),C=E.notesByGroupId??void 0,M={id:j,date:E.date??qe().format("YYYY-MM-DD"),kind:E.kind??"class",title:E.title??"Sesin importada",description:E.description,notes:E.notes,notesByGroupId:C??void 0,workItems:(E.workItems??[]).map((D,R)=>({id:D.id??Zt(),workId:D.workId,order:D.order??R,customDescriptionMarkdown:D.customDescriptionMarkdown,customDurationMinutes:D.customDurationMinutes,notes:D.notes,focusLabel:D.focusLabel,completed:D.completed??!1,result:D.result,effort:D.effort})),attendance:sp(E.attendance),startTime:E.startTime??as,createdAt:E.createdAt??i,updatedAt:E.updatedAt??i};M.workItems=M.workItems.sort((D,R)=>D.order-R.order).map((D,R)=>({...D,order:R})),y.set(j,M)}),(n.sesiones_trabajos??[]).forEach(E=>{const j=E.session_id;if(!j)return;y.has(j)||y.set(j,{id:j,date:E.fecha?qe(E.fecha).format("YYYY-MM-DD"):qe().format("YYYY-MM-DD"),kind:"class",title:E.titulo??"Sesin importada",description:E.descripcion,notes:E.notasSesion??E.notas,workItems:[],attendance:[],startTime:as,createdAt:i,updatedAt:i});const C=y.get(j);C.workItems.push({id:E.id??Zt(),workId:E.trabajo_id,order:E.orden??C.workItems.length,customDescriptionMarkdown:E.descripcionPersonalizada,customDurationMinutes:E.duracionPersonalizada,notes:E.notas,focusLabel:E.focusLabel??E.foco,completed:E.completed??!1,result:E.result??E.resultado,effort:E.effort??E.esfuerzo})}),y.forEach(E=>{E.workItems=E.workItems.sort((j,C)=>j.order-C.order).map((j,C)=>({...j,order:C})),E.startTime=E.startTime??as});const v=new Map,b=E=>lk(E)?E:void 0,w=E=>uk(E)?E:void 0;(n.sesiones_asistencias??[]).forEach(E=>{const j=E.session_id;if(!j)return;const C=E.assistantId??E.asistente_id;if(!C)return;const M=b(E.status??E.estado)??"pending",D=w(E.actualStatus??E.estado_real),R={assistantId:C,status:M,notes:E.notes??E.notas,actualStatus:D,actualNotes:E.actualNotes??E.notas_reales},z=v.get(j)??[];z.push(R),v.set(j,z)}),v.forEach((E,j)=>{const C=y.get(j);C&&(C.attendance=E)});const _=Array.from(y.values());e({objectives:o,works:l,sessions:_,assistants:u,kungfuPrograms:c,kungfuCadence:f,kungfuTodayPlan:h,workTaxonomy:p,ready:!0}),Ze({objectives:o,works:l,sessions:_,assistants:u,kungfuPrograms:c,kungfuCadence:f,kungfuTodayPlan:h,workTaxonomy:p})},exportBackup:()=>{const n=t(),r=n.sessions.flatMap(u=>u.workItems.map(c=>({id:c.id,session_id:u.id,trabajo_id:c.workId,orden:c.order,descripcionPersonalizada:c.customDescriptionMarkdown,duracionPersonalizada:c.customDurationMinutes,notas:c.notes,foco:c.focusLabel,focusLabel:c.focusLabel,completed:c.completed??!1,result:c.result,effort:c.effort}))),i=n.sessions.flatMap(u=>u.attendance.map(c=>({session_id:u.id,assistantId:c.assistantId,estado:c.status,notas:c.notes,...c.actualStatus?{actualStatus:c.actualStatus,estado_real:c.actualStatus}:{},...c.actualNotes?{actualNotes:c.actualNotes,notas_reales:c.actualNotes}:{}}))),o=n.sessions.map(u=>({id:u.id,date:u.date,kind:u.kind,title:u.title,description:u.description,notes:u.notes,notesByGroupId:u.notesByGroupId,startTime:u.startTime,createdAt:u.createdAt,updatedAt:u.updatedAt}));return{version:1,usuarios:[],objetivos:n.objectives,trabajos:n.works,sesiones:o,sesiones_trabajos:r,asistentes:n.assistants,sesiones_asistencias:i,kungfuPrograms:n.kungfuPrograms,kungfuCadence:n.kungfuCadence,kungfuTodayPlan:n.kungfuTodayPlan,workTaxonomy:n.workTaxonomy}}})),zx=1,jR=[{id:"default",name:"Kung Fu  activo",enabled:!0,include:[{byTags:["kungfu"]}],exclude:[]}],NR={targetsDays:{work:7,technique:5,segment:8,form:10,drill:7},overrides:[]},TR={limitMode:"count",maxItems:12,minutesBudget:30,template:{totalMinutes:30,focusMinutes:18,rouletteMinutes:10,recapMinutes:2},defaultMinutesByNodeType:{work:3,technique:1.5,segment:6,form:15,drill:4,link:2},focusSelectors:[],rouletteSelectors:[],groups:[{id:"formas",name:"Formas",enabled:!0,order:1,type:"work",limitMode:"minutes",minutesBudget:18,strategy:"overdue",hierarchyRule:"prefer_leaves",include:[{byNodeTypes:["segment","form"]}],exclude:[]},{id:"tecnicas",name:"Tcnicas",enabled:!0,order:2,type:"work",limitMode:"minutes",minutesBudget:10,strategy:"weighted",hierarchyRule:"allow_all",include:[{byNodeTypes:["technique"]},{byTags:["roulette"]}],exclude:[]},{id:"recap",name:"Recap",enabled:!0,order:99,type:"note",limitMode:"minutes",minutesBudget:2}]},IR={nodeTypes:[{key:"form",label:"Form"},{key:"segment",label:"Segment"},{key:"application",label:"Application"},{key:"technique",label:"Technique"},{key:"drill",label:"Drill"},{key:"work",label:"Work"},{key:"link",label:"Link"},{key:"style",label:"Style"}],tags:[]},Tu=e=>({objectives:e.objectives,works:e.works,sessions:e.sessions,assistants:e.assistants,kungfuPrograms:e.kungfuPrograms,kungfuCadence:e.kungfuCadence,kungfuTodayPlan:e.kungfuTodayPlan,workTaxonomy:e.workTaxonomy}),PR=e=>({objectives:e.objectives??[],works:e.works??[],sessions:(e.sessions??[]).map(t=>({...t,kind:t.kind??"class",workItems:t.workItems??[],attendance:t.attendance??[]})),assistants:e.assistants??[],kungfuPrograms:e.kungfuPrograms??jR,kungfuCadence:e.kungfuCadence??NR,kungfuTodayPlan:e.kungfuTodayPlan??TR,workTaxonomy:e.workTaxonomy??IR}),AR=(e,t)=>e.objectives!==t.objectives||e.works!==t.works||e.sessions!==t.sessions||e.assistants!==t.assistants||e.kungfuPrograms!==t.kungfuPrograms||e.kungfuCadence!==t.kungfuCadence||e.kungfuTodayPlan!==t.kungfuTodayPlan||e.workTaxonomy!==t.workTaxonomy;function RR(){const{user:e}=_s(),t=je(f=>f.setCollections),n=je(f=>f.reset),r=je(f=>f.ready),i=k.useRef(!1),o=k.useRef(null),l=k.useRef(null),u=k.useRef(null),c=k.useRef(Tu(je.getState()));k.useEffect(()=>()=>{o.current&&(window.clearTimeout(o.current),o.current=null)},[]),k.useEffect(()=>{e||(n(),u.current=null,l.current=null,i.current=!1,c.current=Tu(je.getState()),o.current&&(window.clearTimeout(o.current),o.current=null))},[e,n]),k.useEffect(()=>{if(!e)return;let f=!0;(async()=>{const{data:y,error:v}=await Bt.from("planner_states").select("data, updated_at").eq("user_id",e.id).maybeSingle();if(!f)return;if(v&&v.code!=="PGRST116"){console.error("No se pudo cargar el estado remoto",v);return}const b=y;if(b!=null&&b.data){const w=PR(b.data??{});i.current=!0,u.current=b.updated_at,c.current=w,t(w)}else if(r){const w=Tu(je.getState());l.current=null;const{error:_,data:E}=await Bt.from("planner_states").upsert({user_id:e.id,data:{version:zx,...w}},{onConflict:"user_id"}).select("updated_at").maybeSingle(),j=E;_?console.error("No se pudo inicializar el estado remoto",_):j&&(u.current=j.updated_at)}})();const p=je.subscribe(y=>{if(!f)return;const v=Tu(y);if(i.current){i.current=!1,c.current=v,l.current=null;return}const b=c.current;AR(v,b)&&(c.current=v,l.current=v,o.current&&window.clearTimeout(o.current),o.current=window.setTimeout(()=>{if(!l.current)return;const w=l.current;l.current=null,(async()=>{const{error:_,data:E}=await Bt.from("planner_states").upsert({user_id:e.id,data:{version:zx,...w}},{onConflict:"user_id"}).select("updated_at").maybeSingle(),j=E;_?console.error("No se pudo guardar el estado remoto",_):j&&(u.current=j.updated_at)})()},600))});return()=>{f=!1,p(),o.current&&(window.clearTimeout(o.current),o.current=null)}},[e,r,t])}function OR(){const{user:e}=_s(),t=je(r=>r.loadWorks),n=je(r=>r.setWorks);k.useEffect(()=>{if(!e){n([]);return}const r={actorId:e.id,actorEmail:e.email??""},i=async()=>{try{await t(r)}catch(l){console.error("No se pudieron sincronizar los trabajos colaborativos",l)}};i();const o=Bt.channel("works-collaboration").on("postgres_changes",{event:"*",schema:"public",table:"works"},()=>{i()}).on("postgres_changes",{event:"*",schema:"public",table:"work_collaborators"},()=>{i()}).subscribe();return()=>{Bt.removeChannel(o)}},[e,t,n])}var Bu={exports:{}},MR=Bu.exports,Bx;function DR(){return Bx||(Bx=1,(function(e,t){(function(n,r){e.exports=r(rk())})(MR,(function(n){function r(l){return l&&typeof l=="object"&&"default"in l?l:{default:l}}var i=r(n),o={name:"es",monthsShort:"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),weekStart:1,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},ordinal:function(l){return l+""}};return i.default.locale(o,null,!0),o}))})(Bu)),Bu.exports}DR();function $i({objective:e,size:t="md"}){if(!e)return null;const n=t==="sm"?"text-xs px-2 py-1":"text-sm px-3 py-1.5";return g.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full font-medium text-slate-950 shadow shadow-black/30 ${n}`,style:{backgroundColor:e.colorHex},children:[g.jsx("span",{className:"h-2.5 w-2.5 rounded-full border border-black/20 bg-white/70"}),e.name]})}function LR(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const $R=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,FR=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,zR={};function Ux(e,t){return(zR.jsx?FR:$R).test(e)}const BR=/[ \t\n\f\r]/g;function UR(e){return typeof e=="object"?e.type==="text"?Wx(e.value):!1:Wx(e)}function Wx(e){return e.replace(BR,"")===""}class ll{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}ll.prototype.normal={};ll.prototype.property={};ll.prototype.space=void 0;function ck(e,t){const n={},r={};for(const i of e)Object.assign(n,i.property),Object.assign(r,i.normal);return new ll(n,r,t)}function ap(e){return e.toLowerCase()}class Dn{constructor(t,n){this.attribute=n,this.property=t}}Dn.prototype.attribute="";Dn.prototype.booleanish=!1;Dn.prototype.boolean=!1;Dn.prototype.commaOrSpaceSeparated=!1;Dn.prototype.commaSeparated=!1;Dn.prototype.defined=!1;Dn.prototype.mustUseProperty=!1;Dn.prototype.number=!1;Dn.prototype.overloadedBoolean=!1;Dn.prototype.property="";Dn.prototype.spaceSeparated=!1;Dn.prototype.space=void 0;let WR=0;const Ye=js(),Lt=js(),lp=js(),ke=js(),gt=js(),bo=js(),Hn=js();function js(){return 2**++WR}const up=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ye,booleanish:Lt,commaOrSpaceSeparated:Hn,commaSeparated:bo,number:ke,overloadedBoolean:lp,spaceSeparated:gt},Symbol.toStringTag,{value:"Module"})),th=Object.keys(up);class tm extends Dn{constructor(t,n,r,i){let o=-1;if(super(t,n),Hx(this,"space",i),typeof r=="number")for(;++o<th.length;){const l=th[o];Hx(this,th[o],(r&up[l])===up[l])}}}tm.prototype.defined=!0;function Hx(e,t,n){n&&(e[t]=n)}function Mo(e){const t={},n={};for(const[r,i]of Object.entries(e.properties)){const o=new tm(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(o.mustUseProperty=!0),t[r]=o,n[ap(r)]=r,n[ap(o.attribute)]=r}return new ll(t,n,e.space)}const dk=Mo({properties:{ariaActiveDescendant:null,ariaAtomic:Lt,ariaAutoComplete:null,ariaBusy:Lt,ariaChecked:Lt,ariaColCount:ke,ariaColIndex:ke,ariaColSpan:ke,ariaControls:gt,ariaCurrent:null,ariaDescribedBy:gt,ariaDetails:null,ariaDisabled:Lt,ariaDropEffect:gt,ariaErrorMessage:null,ariaExpanded:Lt,ariaFlowTo:gt,ariaGrabbed:Lt,ariaHasPopup:null,ariaHidden:Lt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:gt,ariaLevel:ke,ariaLive:null,ariaModal:Lt,ariaMultiLine:Lt,ariaMultiSelectable:Lt,ariaOrientation:null,ariaOwns:gt,ariaPlaceholder:null,ariaPosInSet:ke,ariaPressed:Lt,ariaReadOnly:Lt,ariaRelevant:null,ariaRequired:Lt,ariaRoleDescription:gt,ariaRowCount:ke,ariaRowIndex:ke,ariaRowSpan:ke,ariaSelected:Lt,ariaSetSize:ke,ariaSort:null,ariaValueMax:ke,ariaValueMin:ke,ariaValueNow:ke,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function fk(e,t){return t in e?e[t]:t}function hk(e,t){return fk(e,t.toLowerCase())}const HR=Mo({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:bo,acceptCharset:gt,accessKey:gt,action:null,allow:null,allowFullScreen:Ye,allowPaymentRequest:Ye,allowUserMedia:Ye,alt:null,as:null,async:Ye,autoCapitalize:null,autoComplete:gt,autoFocus:Ye,autoPlay:Ye,blocking:gt,capture:null,charSet:null,checked:Ye,cite:null,className:gt,cols:ke,colSpan:null,content:null,contentEditable:Lt,controls:Ye,controlsList:gt,coords:ke|bo,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ye,defer:Ye,dir:null,dirName:null,disabled:Ye,download:lp,draggable:Lt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ye,formTarget:null,headers:gt,height:ke,hidden:lp,high:ke,href:null,hrefLang:null,htmlFor:gt,httpEquiv:gt,id:null,imageSizes:null,imageSrcSet:null,inert:Ye,inputMode:null,integrity:null,is:null,isMap:Ye,itemId:null,itemProp:gt,itemRef:gt,itemScope:Ye,itemType:gt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ye,low:ke,manifest:null,max:null,maxLength:ke,media:null,method:null,min:null,minLength:ke,multiple:Ye,muted:Ye,name:null,nonce:null,noModule:Ye,noValidate:Ye,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ye,optimum:ke,pattern:null,ping:gt,placeholder:null,playsInline:Ye,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ye,referrerPolicy:null,rel:gt,required:Ye,reversed:Ye,rows:ke,rowSpan:ke,sandbox:gt,scope:null,scoped:Ye,seamless:Ye,selected:Ye,shadowRootClonable:Ye,shadowRootDelegatesFocus:Ye,shadowRootMode:null,shape:null,size:ke,sizes:null,slot:null,span:ke,spellCheck:Lt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ke,step:null,style:null,tabIndex:ke,target:null,title:null,translate:null,type:null,typeMustMatch:Ye,useMap:null,value:Lt,width:ke,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:gt,axis:null,background:null,bgColor:null,border:ke,borderColor:null,bottomMargin:ke,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ye,declare:Ye,event:null,face:null,frame:null,frameBorder:null,hSpace:ke,leftMargin:ke,link:null,longDesc:null,lowSrc:null,marginHeight:ke,marginWidth:ke,noResize:Ye,noHref:Ye,noShade:Ye,noWrap:Ye,object:null,profile:null,prompt:null,rev:null,rightMargin:ke,rules:null,scheme:null,scrolling:Lt,standby:null,summary:null,text:null,topMargin:ke,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ke,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ye,disableRemotePlayback:Ye,prefix:null,property:null,results:ke,security:null,unselectable:null},space:"html",transform:hk}),VR=Mo({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Hn,accentHeight:ke,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ke,amplitude:ke,arabicForm:null,ascent:ke,attributeName:null,attributeType:null,azimuth:ke,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ke,by:null,calcMode:null,capHeight:ke,className:gt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ke,diffuseConstant:ke,direction:null,display:null,dur:null,divisor:ke,dominantBaseline:null,download:Ye,dx:null,dy:null,edgeMode:null,editable:null,elevation:ke,enableBackground:null,end:null,event:null,exponent:ke,externalResourcesRequired:null,fill:null,fillOpacity:ke,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:bo,g2:bo,glyphName:bo,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ke,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ke,horizOriginX:ke,horizOriginY:ke,id:null,ideographic:ke,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ke,k:ke,k1:ke,k2:ke,k3:ke,k4:ke,kernelMatrix:Hn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ke,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ke,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ke,overlineThickness:ke,paintOrder:null,panose1:null,path:null,pathLength:ke,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:gt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ke,pointsAtY:ke,pointsAtZ:ke,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Hn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Hn,rev:Hn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Hn,requiredFeatures:Hn,requiredFonts:Hn,requiredFormats:Hn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ke,specularExponent:ke,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ke,strikethroughThickness:ke,string:null,stroke:null,strokeDashArray:Hn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ke,strokeOpacity:ke,strokeWidth:null,style:null,surfaceScale:ke,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Hn,tabIndex:ke,tableValues:null,target:null,targetX:ke,targetY:ke,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Hn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ke,underlineThickness:ke,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ke,values:null,vAlphabetic:ke,vMathematical:ke,vectorEffect:null,vHanging:ke,vIdeographic:ke,version:null,vertAdvY:ke,vertOriginX:ke,vertOriginY:ke,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ke,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:fk}),pk=Mo({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),mk=Mo({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:hk}),gk=Mo({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),qR={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},YR=/[A-Z]/g,Vx=/-[a-z]/g,GR=/^data[-\w.:]+$/i;function KR(e,t){const n=ap(t);let r=t,i=Dn;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&GR.test(t)){if(t.charAt(4)==="-"){const o=t.slice(5).replace(Vx,QR);r="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=t.slice(4);if(!Vx.test(o)){let l=o.replace(YR,JR);l.charAt(0)!=="-"&&(l="-"+l),t="data"+l}}i=tm}return new i(r,t)}function JR(e){return"-"+e.toLowerCase()}function QR(e){return e.charAt(1).toUpperCase()}const XR=ck([dk,HR,pk,mk,gk],"html"),nm=ck([dk,VR,pk,mk,gk],"svg");function ZR(e){return e.join(" ").trim()}var ao={},nh,qx;function eO(){if(qx)return nh;qx=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,l=/^[;\s]*/,u=/^\s+|\s+$/g,c=`
`,f="/",h="*",p="",y="comment",v="declaration";nh=function(w,_){if(typeof w!="string")throw new TypeError("First argument must be a string");if(!w)return[];_=_||{};var E=1,j=1;function C(H){var q=H.match(t);q&&(E+=q.length);var $=H.lastIndexOf(c);j=~$?H.length-$:j+H.length}function M(){var H={line:E,column:j};return function(q){return q.position=new D(H),F(),q}}function D(H){this.start=H,this.end={line:E,column:j},this.source=_.source}D.prototype.content=w;function R(H){var q=new Error(_.source+":"+E+":"+j+": "+H);if(q.reason=H,q.filename=_.source,q.line=E,q.column=j,q.source=w,!_.silent)throw q}function z(H){var q=H.exec(w);if(q){var $=q[0];return C($),w=w.slice($.length),q}}function F(){z(n)}function V(H){var q;for(H=H||[];q=A();)q!==!1&&H.push(q);return H}function A(){var H=M();if(!(f!=w.charAt(0)||h!=w.charAt(1))){for(var q=2;p!=w.charAt(q)&&(h!=w.charAt(q)||f!=w.charAt(q+1));)++q;if(q+=2,p===w.charAt(q-1))return R("End of comment missing");var $=w.slice(2,q-2);return j+=2,C($),w=w.slice(q),j+=2,H({type:y,comment:$})}}function O(){var H=M(),q=z(r);if(q){if(A(),!z(i))return R("property missing ':'");var $=z(o),J=H({type:v,property:b(q[0].replace(e,p)),value:$?b($[0].replace(e,p)):p});return z(l),J}}function Q(){var H=[];V(H);for(var q;q=O();)q!==!1&&(H.push(q),V(H));return H}return F(),Q()};function b(w){return w?w.replace(u,p):p}return nh}var Yx;function tO(){if(Yx)return ao;Yx=1;var e=ao&&ao.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ao,"__esModule",{value:!0}),ao.default=n;var t=e(eO());function n(r,i){var o=null;if(!r||typeof r!="string")return o;var l=(0,t.default)(r),u=typeof i=="function";return l.forEach(function(c){if(c.type==="declaration"){var f=c.property,h=c.value;u?i(f,h,c):h&&(o=o||{},o[f]=h)}}),o}return ao}var ba={},Gx;function nO(){if(Gx)return ba;Gx=1,Object.defineProperty(ba,"__esModule",{value:!0}),ba.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,o=function(f){return!f||n.test(f)||e.test(f)},l=function(f,h){return h.toUpperCase()},u=function(f,h){return"".concat(h,"-")},c=function(f,h){return h===void 0&&(h={}),o(f)?f:(f=f.toLowerCase(),h.reactCompat?f=f.replace(i,u):f=f.replace(r,u),f.replace(t,l))};return ba.camelCase=c,ba}var ka,Kx;function rO(){if(Kx)return ka;Kx=1;var e=ka&&ka.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},t=e(tO()),n=nO();function r(i,o){var l={};return!i||typeof i!="string"||(0,t.default)(i,function(u,c){u&&c&&(l[(0,n.camelCase)(u,o)]=c)}),l}return r.default=r,ka=r,ka}var iO=rO();const sO=To(iO),yk=vk("end"),rm=vk("start");function vk(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function oO(e){const t=rm(e),n=yk(e);if(t&&n)return{start:t,end:n}}function Da(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Jx(e.position):"start"in e||"end"in e?Jx(e):"line"in e||"column"in e?cp(e):""}function cp(e){return Qx(e&&e.line)+":"+Qx(e&&e.column)}function Jx(e){return cp(e&&e.start)+"-"+cp(e&&e.end)}function Qx(e){return e&&typeof e=="number"?e:1}class mn extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",o={},l=!1;if(n&&("line"in n&&"column"in n?o={place:n}:"start"in n&&"end"in n?o={place:n}:"type"in n?o={ancestors:[n],place:n.position}:o={...n}),typeof t=="string"?i=t:!o.cause&&t&&(l=!0,i=t.message,o.cause=t),!o.ruleId&&!o.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?o.ruleId=r:(o.source=r.slice(0,c),o.ruleId=r.slice(c+1))}if(!o.place&&o.ancestors&&o.ancestors){const c=o.ancestors[o.ancestors.length-1];c&&(o.place=c.position)}const u=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=u?u.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=u?u.line:void 0,this.name=Da(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=l&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}mn.prototype.file="";mn.prototype.name="";mn.prototype.reason="";mn.prototype.message="";mn.prototype.stack="";mn.prototype.column=void 0;mn.prototype.line=void 0;mn.prototype.ancestors=void 0;mn.prototype.cause=void 0;mn.prototype.fatal=void 0;mn.prototype.place=void 0;mn.prototype.ruleId=void 0;mn.prototype.source=void 0;const im={}.hasOwnProperty,aO=new Map,lO=/[A-Z]/g,uO=new Set(["table","tbody","thead","tfoot","tr"]),cO=new Set(["td","th"]),xk="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function dO(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=xO(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=vO(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?nm:XR,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},o=wk(i,e,void 0);return o&&typeof o!="string"?o:i.create(e,i.Fragment,{children:o||void 0},void 0)}function wk(e,t,n){if(t.type==="element")return fO(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return hO(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return mO(e,t,n);if(t.type==="mdxjsEsm")return pO(e,t);if(t.type==="root")return gO(e,t,n);if(t.type==="text")return yO(e,t)}function fO(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=nm,e.schema=i),e.ancestors.push(t);const o=kk(e,t.tagName,!1),l=wO(e,t);let u=om(e,t);return uO.has(t.tagName)&&(u=u.filter(function(c){return typeof c=="string"?!UR(c):!0})),bk(e,l,o,t),sm(l,u),e.ancestors.pop(),e.schema=r,e.create(t,o,l,n)}function hO(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}Ja(e,t.position)}function pO(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Ja(e,t.position)}function mO(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=nm,e.schema=i),e.ancestors.push(t);const o=t.name===null?e.Fragment:kk(e,t.name,!0),l=bO(e,t),u=om(e,t);return bk(e,l,o,t),sm(l,u),e.ancestors.pop(),e.schema=r,e.create(t,o,l,n)}function gO(e,t,n){const r={};return sm(r,om(e,t)),e.create(t,e.Fragment,r,n)}function yO(e,t){return t.value}function bk(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function sm(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function vO(e,t,n){return r;function r(i,o,l,u){const f=Array.isArray(l.children)?n:t;return u?f(o,l,u):f(o,l)}}function xO(e,t){return n;function n(r,i,o,l){const u=Array.isArray(o.children),c=rm(r);return t(i,o,l,u,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function wO(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&im.call(t.properties,i)){const o=kO(e,i,t.properties[i]);if(o){const[l,u]=o;e.tableCellAlignToStyle&&l==="align"&&typeof u=="string"&&cO.has(t.tagName)?r=u:n[l]=u}}if(r){const o=n.style||(n.style={});o[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function bO(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const o=r.data.estree.body[0];o.type;const l=o.expression;l.type;const u=l.properties[0];u.type,Object.assign(n,e.evaluater.evaluateExpression(u.argument))}else Ja(e,t.position);else{const i=r.name;let o;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const u=r.value.data.estree.body[0];u.type,o=e.evaluater.evaluateExpression(u.expression)}else Ja(e,t.position);else o=r.value===null?!0:r.value;n[i]=o}return n}function om(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:aO;for(;++r<t.children.length;){const o=t.children[r];let l;if(e.passKeys){const c=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(c){const f=i.get(c)||0;l=c+"-"+f,i.set(c,f+1)}}const u=wk(e,o,l);u!==void 0&&n.push(u)}return n}function kO(e,t,n){const r=KR(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?LR(n):ZR(n)),r.property==="style"){let i=typeof n=="object"?n:SO(e,String(n));return e.stylePropertyNameCase==="css"&&(i=EO(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?qR[r.property]||r.property:r.attribute,n]}}function SO(e,t){try{return sO(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,i=new mn("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=xk+"#cannot-parse-style-attribute",i}}function kk(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let o=-1,l;for(;++o<i.length;){const u=Ux(i[o])?{type:"Identifier",name:i[o]}:{type:"Literal",value:i[o]};l=l?{type:"MemberExpression",object:l,property:u,computed:!!(o&&u.type==="Literal"),optional:!1}:u}r=l}else r=Ux(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return im.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);Ja(e)}function Ja(e,t){const n=new mn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=xk+"#cannot-handle-mdx-estrees-without-createevaluater",n}function EO(e){const t={};let n;for(n in e)im.call(e,n)&&(t[_O(n)]=e[n]);return t}function _O(e){let t=e.replace(lO,CO);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function CO(e){return"-"+e.toLowerCase()}const rh={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},jO={};function am(e,t){const n=jO,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Sk(e,r,i)}function Sk(e,t,n){if(NO(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Xx(e.children,t,n)}return Array.isArray(e)?Xx(e,t,n):""}function Xx(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=Sk(e[i],t,n);return r.join("")}function NO(e){return!!(e&&typeof e=="object")}const Zx=document.createElement("i");function lm(e){const t="&"+e+";";Zx.innerHTML=t;const n=Zx.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Gn(e,t,n,r){const i=e.length;let o=0,l;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)l=Array.from(r),l.unshift(t,n),e.splice(...l);else for(n&&e.splice(t,n);o<r.length;)l=r.slice(o,o+1e4),l.unshift(t,0),e.splice(...l),o+=1e4,t+=1e4}function sr(e,t){return e.length>0?(Gn(e,e.length,0,t),e):t}const e0={}.hasOwnProperty;function Ek(e){const t={};let n=-1;for(;++n<e.length;)TO(t,e[n]);return t}function TO(e,t){let n;for(n in t){const i=(e0.call(e,n)?e[n]:void 0)||(e[n]={}),o=t[n];let l;if(o)for(l in o){e0.call(i,l)||(i[l]=[]);const u=o[l];IO(i[l],Array.isArray(u)?u:u?[u]:[])}}}function IO(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Gn(e,0,0,r)}function _k(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function br(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const bn=Bi(/[A-Za-z]/),pn=Bi(/[\dA-Za-z]/),PO=Bi(/[#-'*+\--9=?A-Z^-~]/);function ac(e){return e!==null&&(e<32||e===127)}const dp=Bi(/\d/),AO=Bi(/[\dA-Fa-f]/),RO=Bi(/[!-/:-@[-`{-~]/);function ze(e){return e!==null&&e<-2}function ht(e){return e!==null&&(e<0||e===32)}function Xe(e){return e===-2||e===-1||e===32}const Dc=Bi(new RegExp("\\p{P}|\\p{S}","u")),xs=Bi(/\s/);function Bi(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Do(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const o=e.charCodeAt(n);let l="";if(o===37&&pn(e.charCodeAt(n+1))&&pn(e.charCodeAt(n+2)))i=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(l=String.fromCharCode(o));else if(o>55295&&o<57344){const u=e.charCodeAt(n+1);o<56320&&u>56319&&u<57344?(l=String.fromCharCode(o,u),i=1):l=""}else l=String.fromCharCode(o);l&&(t.push(e.slice(r,n),encodeURIComponent(l)),r=n+i+1,l=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function et(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let o=0;return l;function l(c){return Xe(c)?(e.enter(n),u(c)):t(c)}function u(c){return Xe(c)&&o++<i?(e.consume(c),u):(e.exit(n),t(c))}}const OO={tokenize:MO};function MO(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(u){if(u===null){e.consume(u);return}return e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),et(e,t,"linePrefix")}function i(u){return e.enter("paragraph"),o(u)}function o(u){const c=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,l(u)}function l(u){if(u===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(u);return}return ze(u)?(e.consume(u),e.exit("chunkText"),o):(e.consume(u),l)}}const DO={tokenize:LO},t0={tokenize:$O};function LO(e){const t=this,n=[];let r=0,i,o,l;return u;function u(C){if(r<n.length){const M=n[r];return t.containerState=M[1],e.attempt(M[0].continuation,c,f)(C)}return f(C)}function c(C){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&j();const M=t.events.length;let D=M,R;for(;D--;)if(t.events[D][0]==="exit"&&t.events[D][1].type==="chunkFlow"){R=t.events[D][1].end;break}E(r);let z=M;for(;z<t.events.length;)t.events[z][1].end={...R},z++;return Gn(t.events,D+1,0,t.events.slice(M)),t.events.length=z,f(C)}return u(C)}function f(C){if(r===n.length){if(!i)return y(C);if(i.currentConstruct&&i.currentConstruct.concrete)return b(C);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(t0,h,p)(C)}function h(C){return i&&j(),E(r),y(C)}function p(C){return t.parser.lazy[t.now().line]=r!==n.length,l=t.now().offset,b(C)}function y(C){return t.containerState={},e.attempt(t0,v,b)(C)}function v(C){return r++,n.push([t.currentConstruct,t.containerState]),y(C)}function b(C){if(C===null){i&&j(),E(0),e.consume(C);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:o}),w(C)}function w(C){if(C===null){_(e.exit("chunkFlow"),!0),E(0),e.consume(C);return}return ze(C)?(e.consume(C),_(e.exit("chunkFlow")),r=0,t.interrupt=void 0,u):(e.consume(C),w)}function _(C,M){const D=t.sliceStream(C);if(M&&D.push(null),C.previous=o,o&&(o.next=C),o=C,i.defineSkip(C.start),i.write(D),t.parser.lazy[C.start.line]){let R=i.events.length;for(;R--;)if(i.events[R][1].start.offset<l&&(!i.events[R][1].end||i.events[R][1].end.offset>l))return;const z=t.events.length;let F=z,V,A;for(;F--;)if(t.events[F][0]==="exit"&&t.events[F][1].type==="chunkFlow"){if(V){A=t.events[F][1].end;break}V=!0}for(E(r),R=z;R<t.events.length;)t.events[R][1].end={...A},R++;Gn(t.events,F+1,0,t.events.slice(z)),t.events.length=R}}function E(C){let M=n.length;for(;M-- >C;){const D=n[M];t.containerState=D[1],D[0].exit.call(t,e)}n.length=C}function j(){i.write([null]),o=void 0,i=void 0,t.containerState._closeFlow=void 0}}function $O(e,t,n){return et(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function No(e){if(e===null||ht(e)||xs(e))return 1;if(Dc(e))return 2}function Lc(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const o=e[i].resolveAll;o&&!r.includes(o)&&(t=o(t,n),r.push(o))}return t}const fp={name:"attention",resolveAll:FO,tokenize:zO};function FO(e,t){let n=-1,r,i,o,l,u,c,f,h;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const p={...e[r][1].end},y={...e[n][1].start};n0(p,-c),n0(y,c),l={type:c>1?"strongSequence":"emphasisSequence",start:p,end:{...e[r][1].end}},u={type:c>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:y},o={type:c>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},i={type:c>1?"strong":"emphasis",start:{...l.start},end:{...u.end}},e[r][1].end={...l.start},e[n][1].start={...u.end},f=[],e[r][1].end.offset-e[r][1].start.offset&&(f=sr(f,[["enter",e[r][1],t],["exit",e[r][1],t]])),f=sr(f,[["enter",i,t],["enter",l,t],["exit",l,t],["enter",o,t]]),f=sr(f,Lc(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),f=sr(f,[["exit",o,t],["enter",u,t],["exit",u,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(h=2,f=sr(f,[["enter",e[n][1],t],["exit",e[n][1],t]])):h=0,Gn(e,r-1,n-r+3,f),n=r+f.length-h-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function zO(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=No(r);let o;return l;function l(c){return o=c,e.enter("attentionSequence"),u(c)}function u(c){if(c===o)return e.consume(c),u;const f=e.exit("attentionSequence"),h=No(c),p=!h||h===2&&i||n.includes(c),y=!i||i===2&&h||n.includes(r);return f._open=!!(o===42?p:p&&(i||!y)),f._close=!!(o===42?y:y&&(h||!p)),t(c)}}function n0(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const BO={name:"autolink",tokenize:UO};function UO(e,t,n){let r=0;return i;function i(v){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(v),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),o}function o(v){return bn(v)?(e.consume(v),l):v===64?n(v):f(v)}function l(v){return v===43||v===45||v===46||pn(v)?(r=1,u(v)):f(v)}function u(v){return v===58?(e.consume(v),r=0,c):(v===43||v===45||v===46||pn(v))&&r++<32?(e.consume(v),u):(r=0,f(v))}function c(v){return v===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(v),e.exit("autolinkMarker"),e.exit("autolink"),t):v===null||v===32||v===60||ac(v)?n(v):(e.consume(v),c)}function f(v){return v===64?(e.consume(v),h):PO(v)?(e.consume(v),f):n(v)}function h(v){return pn(v)?p(v):n(v)}function p(v){return v===46?(e.consume(v),r=0,h):v===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(v),e.exit("autolinkMarker"),e.exit("autolink"),t):y(v)}function y(v){if((v===45||pn(v))&&r++<63){const b=v===45?y:p;return e.consume(v),b}return n(v)}}const ul={partial:!0,tokenize:WO};function WO(e,t,n){return r;function r(o){return Xe(o)?et(e,i,"linePrefix")(o):i(o)}function i(o){return o===null||ze(o)?t(o):n(o)}}const Ck={continuation:{tokenize:VO},exit:qO,name:"blockQuote",tokenize:HO};function HO(e,t,n){const r=this;return i;function i(l){if(l===62){const u=r.containerState;return u.open||(e.enter("blockQuote",{_container:!0}),u.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(l),e.exit("blockQuoteMarker"),o}return n(l)}function o(l){return Xe(l)?(e.enter("blockQuotePrefixWhitespace"),e.consume(l),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(l))}}function VO(e,t,n){const r=this;return i;function i(l){return Xe(l)?et(e,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):o(l)}function o(l){return e.attempt(Ck,t,n)(l)}}function qO(e){e.exit("blockQuote")}const jk={name:"characterEscape",tokenize:YO};function YO(e,t,n){return r;function r(o){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(o),e.exit("escapeMarker"),i}function i(o){return RO(o)?(e.enter("characterEscapeValue"),e.consume(o),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(o)}}const Nk={name:"characterReference",tokenize:GO};function GO(e,t,n){const r=this;let i=0,o,l;return u;function u(p){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(p),e.exit("characterReferenceMarker"),c}function c(p){return p===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(p),e.exit("characterReferenceMarkerNumeric"),f):(e.enter("characterReferenceValue"),o=31,l=pn,h(p))}function f(p){return p===88||p===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(p),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),o=6,l=AO,h):(e.enter("characterReferenceValue"),o=7,l=dp,h(p))}function h(p){if(p===59&&i){const y=e.exit("characterReferenceValue");return l===pn&&!lm(r.sliceSerialize(y))?n(p):(e.enter("characterReferenceMarker"),e.consume(p),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return l(p)&&i++<o?(e.consume(p),h):n(p)}}const r0={partial:!0,tokenize:JO},i0={concrete:!0,name:"codeFenced",tokenize:KO};function KO(e,t,n){const r=this,i={partial:!0,tokenize:D};let o=0,l=0,u;return c;function c(R){return f(R)}function f(R){const z=r.events[r.events.length-1];return o=z&&z[1].type==="linePrefix"?z[2].sliceSerialize(z[1],!0).length:0,u=R,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),h(R)}function h(R){return R===u?(l++,e.consume(R),h):l<3?n(R):(e.exit("codeFencedFenceSequence"),Xe(R)?et(e,p,"whitespace")(R):p(R))}function p(R){return R===null||ze(R)?(e.exit("codeFencedFence"),r.interrupt?t(R):e.check(r0,w,M)(R)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),y(R))}function y(R){return R===null||ze(R)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),p(R)):Xe(R)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),et(e,v,"whitespace")(R)):R===96&&R===u?n(R):(e.consume(R),y)}function v(R){return R===null||ze(R)?p(R):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),b(R))}function b(R){return R===null||ze(R)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),p(R)):R===96&&R===u?n(R):(e.consume(R),b)}function w(R){return e.attempt(i,M,_)(R)}function _(R){return e.enter("lineEnding"),e.consume(R),e.exit("lineEnding"),E}function E(R){return o>0&&Xe(R)?et(e,j,"linePrefix",o+1)(R):j(R)}function j(R){return R===null||ze(R)?e.check(r0,w,M)(R):(e.enter("codeFlowValue"),C(R))}function C(R){return R===null||ze(R)?(e.exit("codeFlowValue"),j(R)):(e.consume(R),C)}function M(R){return e.exit("codeFenced"),t(R)}function D(R,z,F){let V=0;return A;function A($){return R.enter("lineEnding"),R.consume($),R.exit("lineEnding"),O}function O($){return R.enter("codeFencedFence"),Xe($)?et(R,Q,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)($):Q($)}function Q($){return $===u?(R.enter("codeFencedFenceSequence"),H($)):F($)}function H($){return $===u?(V++,R.consume($),H):V>=l?(R.exit("codeFencedFenceSequence"),Xe($)?et(R,q,"whitespace")($):q($)):F($)}function q($){return $===null||ze($)?(R.exit("codeFencedFence"),z($)):F($)}}}function JO(e,t,n){const r=this;return i;function i(l){return l===null?n(l):(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),o)}function o(l){return r.parser.lazy[r.now().line]?n(l):t(l)}}const ih={name:"codeIndented",tokenize:XO},QO={partial:!0,tokenize:ZO};function XO(e,t,n){const r=this;return i;function i(f){return e.enter("codeIndented"),et(e,o,"linePrefix",5)(f)}function o(f){const h=r.events[r.events.length-1];return h&&h[1].type==="linePrefix"&&h[2].sliceSerialize(h[1],!0).length>=4?l(f):n(f)}function l(f){return f===null?c(f):ze(f)?e.attempt(QO,l,c)(f):(e.enter("codeFlowValue"),u(f))}function u(f){return f===null||ze(f)?(e.exit("codeFlowValue"),l(f)):(e.consume(f),u)}function c(f){return e.exit("codeIndented"),t(f)}}function ZO(e,t,n){const r=this;return i;function i(l){return r.parser.lazy[r.now().line]?n(l):ze(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),i):et(e,o,"linePrefix",5)(l)}function o(l){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?t(l):ze(l)?i(l):n(l)}}const eM={name:"codeText",previous:nM,resolve:tM,tokenize:rM};function tM(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function nM(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function rM(e,t,n){let r=0,i,o;return l;function l(p){return e.enter("codeText"),e.enter("codeTextSequence"),u(p)}function u(p){return p===96?(e.consume(p),r++,u):(e.exit("codeTextSequence"),c(p))}function c(p){return p===null?n(p):p===32?(e.enter("space"),e.consume(p),e.exit("space"),c):p===96?(o=e.enter("codeTextSequence"),i=0,h(p)):ze(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),c):(e.enter("codeTextData"),f(p))}function f(p){return p===null||p===32||p===96||ze(p)?(e.exit("codeTextData"),c(p)):(e.consume(p),f)}function h(p){return p===96?(e.consume(p),i++,h):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(p)):(o.type="codeTextData",f(p))}}class iM{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const o=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Sa(this.left,r),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Sa(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Sa(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);Sa(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Sa(this.left,n.reverse())}}}function Sa(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function Tk(e){const t={};let n=-1,r,i,o,l,u,c,f;const h=new iM(e);for(;++n<h.length;){for(;n in t;)n=t[n];if(r=h.get(n),n&&r[1].type==="chunkFlow"&&h.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,o=0,o<c.length&&c[o][1].type==="lineEndingBlank"&&(o+=2),o<c.length&&c[o][1].type==="content"))for(;++o<c.length&&c[o][1].type!=="content";)c[o][1].type==="chunkText"&&(c[o][1]._isInFirstContentOfListItem=!0,o++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,sM(h,n)),n=t[n],f=!0);else if(r[1]._container){for(o=n,i=void 0;o--;)if(l=h.get(o),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(i&&(h.get(i)[1].type="lineEndingBlank"),l[1].type="lineEnding",i=o);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;i&&(r[1].end={...h.get(i)[1].start},u=h.slice(i,n),u.unshift(r),h.splice(i,n-i+1,u))}}return Gn(e,0,Number.POSITIVE_INFINITY,h.slice(0)),!f}function sM(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const o=[];let l=n._tokenizer;l||(l=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const u=l.events,c=[],f={};let h,p,y=-1,v=n,b=0,w=0;const _=[w];for(;v;){for(;e.get(++i)[1]!==v;);o.push(i),v._tokenizer||(h=r.sliceStream(v),v.next||h.push(null),p&&l.defineSkip(v.start),v._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(h),v._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),p=v,v=v.next}for(v=n;++y<u.length;)u[y][0]==="exit"&&u[y-1][0]==="enter"&&u[y][1].type===u[y-1][1].type&&u[y][1].start.line!==u[y][1].end.line&&(w=y+1,_.push(w),v._tokenizer=void 0,v.previous=void 0,v=v.next);for(l.events=[],v?(v._tokenizer=void 0,v.previous=void 0):_.pop(),y=_.length;y--;){const E=u.slice(_[y],_[y+1]),j=o.pop();c.push([j,j+E.length-1]),e.splice(j,2,E)}for(c.reverse(),y=-1;++y<c.length;)f[b+c[y][0]]=b+c[y][1],b+=c[y][1]-c[y][0]-1;return f}const oM={resolve:lM,tokenize:uM},aM={partial:!0,tokenize:cM};function lM(e){return Tk(e),e}function uM(e,t){let n;return r;function r(u){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(u)}function i(u){return u===null?o(u):ze(u)?e.check(aM,l,o)(u):(e.consume(u),i)}function o(u){return e.exit("chunkContent"),e.exit("content"),t(u)}function l(u){return e.consume(u),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function cM(e,t,n){const r=this;return i;function i(l){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),et(e,o,"linePrefix")}function o(l){if(l===null||ze(l))return n(l);const u=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?t(l):e.interrupt(r.parser.constructs.flow,n,t)(l)}}function Ik(e,t,n,r,i,o,l,u,c){const f=c||Number.POSITIVE_INFINITY;let h=0;return p;function p(E){return E===60?(e.enter(r),e.enter(i),e.enter(o),e.consume(E),e.exit(o),y):E===null||E===32||E===41||ac(E)?n(E):(e.enter(r),e.enter(l),e.enter(u),e.enter("chunkString",{contentType:"string"}),w(E))}function y(E){return E===62?(e.enter(o),e.consume(E),e.exit(o),e.exit(i),e.exit(r),t):(e.enter(u),e.enter("chunkString",{contentType:"string"}),v(E))}function v(E){return E===62?(e.exit("chunkString"),e.exit(u),y(E)):E===null||E===60||ze(E)?n(E):(e.consume(E),E===92?b:v)}function b(E){return E===60||E===62||E===92?(e.consume(E),v):v(E)}function w(E){return!h&&(E===null||E===41||ht(E))?(e.exit("chunkString"),e.exit(u),e.exit(l),e.exit(r),t(E)):h<f&&E===40?(e.consume(E),h++,w):E===41?(e.consume(E),h--,w):E===null||E===32||E===40||ac(E)?n(E):(e.consume(E),E===92?_:w)}function _(E){return E===40||E===41||E===92?(e.consume(E),w):w(E)}}function Pk(e,t,n,r,i,o){const l=this;let u=0,c;return f;function f(v){return e.enter(r),e.enter(i),e.consume(v),e.exit(i),e.enter(o),h}function h(v){return u>999||v===null||v===91||v===93&&!c||v===94&&!u&&"_hiddenFootnoteSupport"in l.parser.constructs?n(v):v===93?(e.exit(o),e.enter(i),e.consume(v),e.exit(i),e.exit(r),t):ze(v)?(e.enter("lineEnding"),e.consume(v),e.exit("lineEnding"),h):(e.enter("chunkString",{contentType:"string"}),p(v))}function p(v){return v===null||v===91||v===93||ze(v)||u++>999?(e.exit("chunkString"),h(v)):(e.consume(v),c||(c=!Xe(v)),v===92?y:p)}function y(v){return v===91||v===92||v===93?(e.consume(v),u++,p):p(v)}}function Ak(e,t,n,r,i,o){let l;return u;function u(y){return y===34||y===39||y===40?(e.enter(r),e.enter(i),e.consume(y),e.exit(i),l=y===40?41:y,c):n(y)}function c(y){return y===l?(e.enter(i),e.consume(y),e.exit(i),e.exit(r),t):(e.enter(o),f(y))}function f(y){return y===l?(e.exit(o),c(l)):y===null?n(y):ze(y)?(e.enter("lineEnding"),e.consume(y),e.exit("lineEnding"),et(e,f,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===l||y===null||ze(y)?(e.exit("chunkString"),f(y)):(e.consume(y),y===92?p:h)}function p(y){return y===l||y===92?(e.consume(y),h):h(y)}}function La(e,t){let n;return r;function r(i){return ze(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):Xe(i)?et(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const dM={name:"definition",tokenize:hM},fM={partial:!0,tokenize:pM};function hM(e,t,n){const r=this;let i;return o;function o(v){return e.enter("definition"),l(v)}function l(v){return Pk.call(r,e,u,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(v)}function u(v){return i=br(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),v===58?(e.enter("definitionMarker"),e.consume(v),e.exit("definitionMarker"),c):n(v)}function c(v){return ht(v)?La(e,f)(v):f(v)}function f(v){return Ik(e,h,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(v)}function h(v){return e.attempt(fM,p,p)(v)}function p(v){return Xe(v)?et(e,y,"whitespace")(v):y(v)}function y(v){return v===null||ze(v)?(e.exit("definition"),r.parser.defined.push(i),t(v)):n(v)}}function pM(e,t,n){return r;function r(u){return ht(u)?La(e,i)(u):n(u)}function i(u){return Ak(e,o,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(u)}function o(u){return Xe(u)?et(e,l,"whitespace")(u):l(u)}function l(u){return u===null||ze(u)?t(u):n(u)}}const mM={name:"hardBreakEscape",tokenize:gM};function gM(e,t,n){return r;function r(o){return e.enter("hardBreakEscape"),e.consume(o),i}function i(o){return ze(o)?(e.exit("hardBreakEscape"),t(o)):n(o)}}const yM={name:"headingAtx",resolve:vM,tokenize:xM};function vM(e,t){let n=e.length-2,r=3,i,o;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},o={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Gn(e,r,n-r+1,[["enter",i,t],["enter",o,t],["exit",o,t],["exit",i,t]])),e}function xM(e,t,n){let r=0;return i;function i(h){return e.enter("atxHeading"),o(h)}function o(h){return e.enter("atxHeadingSequence"),l(h)}function l(h){return h===35&&r++<6?(e.consume(h),l):h===null||ht(h)?(e.exit("atxHeadingSequence"),u(h)):n(h)}function u(h){return h===35?(e.enter("atxHeadingSequence"),c(h)):h===null||ze(h)?(e.exit("atxHeading"),t(h)):Xe(h)?et(e,u,"whitespace")(h):(e.enter("atxHeadingText"),f(h))}function c(h){return h===35?(e.consume(h),c):(e.exit("atxHeadingSequence"),u(h))}function f(h){return h===null||h===35||ht(h)?(e.exit("atxHeadingText"),u(h)):(e.consume(h),f)}}const wM=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],s0=["pre","script","style","textarea"],bM={concrete:!0,name:"htmlFlow",resolveTo:EM,tokenize:_M},kM={partial:!0,tokenize:jM},SM={partial:!0,tokenize:CM};function EM(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function _M(e,t,n){const r=this;let i,o,l,u,c;return f;function f(I){return h(I)}function h(I){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(I),p}function p(I){return I===33?(e.consume(I),y):I===47?(e.consume(I),o=!0,w):I===63?(e.consume(I),i=3,r.interrupt?t:T):bn(I)?(e.consume(I),l=String.fromCharCode(I),_):n(I)}function y(I){return I===45?(e.consume(I),i=2,v):I===91?(e.consume(I),i=5,u=0,b):bn(I)?(e.consume(I),i=4,r.interrupt?t:T):n(I)}function v(I){return I===45?(e.consume(I),r.interrupt?t:T):n(I)}function b(I){const ye="CDATA[";return I===ye.charCodeAt(u++)?(e.consume(I),u===ye.length?r.interrupt?t:Q:b):n(I)}function w(I){return bn(I)?(e.consume(I),l=String.fromCharCode(I),_):n(I)}function _(I){if(I===null||I===47||I===62||ht(I)){const ye=I===47,me=l.toLowerCase();return!ye&&!o&&s0.includes(me)?(i=1,r.interrupt?t(I):Q(I)):wM.includes(l.toLowerCase())?(i=6,ye?(e.consume(I),E):r.interrupt?t(I):Q(I)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(I):o?j(I):C(I))}return I===45||pn(I)?(e.consume(I),l+=String.fromCharCode(I),_):n(I)}function E(I){return I===62?(e.consume(I),r.interrupt?t:Q):n(I)}function j(I){return Xe(I)?(e.consume(I),j):A(I)}function C(I){return I===47?(e.consume(I),A):I===58||I===95||bn(I)?(e.consume(I),M):Xe(I)?(e.consume(I),C):A(I)}function M(I){return I===45||I===46||I===58||I===95||pn(I)?(e.consume(I),M):D(I)}function D(I){return I===61?(e.consume(I),R):Xe(I)?(e.consume(I),D):C(I)}function R(I){return I===null||I===60||I===61||I===62||I===96?n(I):I===34||I===39?(e.consume(I),c=I,z):Xe(I)?(e.consume(I),R):F(I)}function z(I){return I===c?(e.consume(I),c=null,V):I===null||ze(I)?n(I):(e.consume(I),z)}function F(I){return I===null||I===34||I===39||I===47||I===60||I===61||I===62||I===96||ht(I)?D(I):(e.consume(I),F)}function V(I){return I===47||I===62||Xe(I)?C(I):n(I)}function A(I){return I===62?(e.consume(I),O):n(I)}function O(I){return I===null||ze(I)?Q(I):Xe(I)?(e.consume(I),O):n(I)}function Q(I){return I===45&&i===2?(e.consume(I),J):I===60&&i===1?(e.consume(I),ie):I===62&&i===4?(e.consume(I),U):I===63&&i===3?(e.consume(I),T):I===93&&i===5?(e.consume(I),ne):ze(I)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(kM,Z,H)(I)):I===null||ze(I)?(e.exit("htmlFlowData"),H(I)):(e.consume(I),Q)}function H(I){return e.check(SM,q,Z)(I)}function q(I){return e.enter("lineEnding"),e.consume(I),e.exit("lineEnding"),$}function $(I){return I===null||ze(I)?H(I):(e.enter("htmlFlowData"),Q(I))}function J(I){return I===45?(e.consume(I),T):Q(I)}function ie(I){return I===47?(e.consume(I),l="",L):Q(I)}function L(I){if(I===62){const ye=l.toLowerCase();return s0.includes(ye)?(e.consume(I),U):Q(I)}return bn(I)&&l.length<8?(e.consume(I),l+=String.fromCharCode(I),L):Q(I)}function ne(I){return I===93?(e.consume(I),T):Q(I)}function T(I){return I===62?(e.consume(I),U):I===45&&i===2?(e.consume(I),T):Q(I)}function U(I){return I===null||ze(I)?(e.exit("htmlFlowData"),Z(I)):(e.consume(I),U)}function Z(I){return e.exit("htmlFlow"),t(I)}}function CM(e,t,n){const r=this;return i;function i(l){return ze(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),o):n(l)}function o(l){return r.parser.lazy[r.now().line]?n(l):t(l)}}function jM(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(ul,t,n)}}const NM={name:"htmlText",tokenize:TM};function TM(e,t,n){const r=this;let i,o,l;return u;function u(T){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(T),c}function c(T){return T===33?(e.consume(T),f):T===47?(e.consume(T),D):T===63?(e.consume(T),C):bn(T)?(e.consume(T),F):n(T)}function f(T){return T===45?(e.consume(T),h):T===91?(e.consume(T),o=0,b):bn(T)?(e.consume(T),j):n(T)}function h(T){return T===45?(e.consume(T),v):n(T)}function p(T){return T===null?n(T):T===45?(e.consume(T),y):ze(T)?(l=p,ie(T)):(e.consume(T),p)}function y(T){return T===45?(e.consume(T),v):p(T)}function v(T){return T===62?J(T):T===45?y(T):p(T)}function b(T){const U="CDATA[";return T===U.charCodeAt(o++)?(e.consume(T),o===U.length?w:b):n(T)}function w(T){return T===null?n(T):T===93?(e.consume(T),_):ze(T)?(l=w,ie(T)):(e.consume(T),w)}function _(T){return T===93?(e.consume(T),E):w(T)}function E(T){return T===62?J(T):T===93?(e.consume(T),E):w(T)}function j(T){return T===null||T===62?J(T):ze(T)?(l=j,ie(T)):(e.consume(T),j)}function C(T){return T===null?n(T):T===63?(e.consume(T),M):ze(T)?(l=C,ie(T)):(e.consume(T),C)}function M(T){return T===62?J(T):C(T)}function D(T){return bn(T)?(e.consume(T),R):n(T)}function R(T){return T===45||pn(T)?(e.consume(T),R):z(T)}function z(T){return ze(T)?(l=z,ie(T)):Xe(T)?(e.consume(T),z):J(T)}function F(T){return T===45||pn(T)?(e.consume(T),F):T===47||T===62||ht(T)?V(T):n(T)}function V(T){return T===47?(e.consume(T),J):T===58||T===95||bn(T)?(e.consume(T),A):ze(T)?(l=V,ie(T)):Xe(T)?(e.consume(T),V):J(T)}function A(T){return T===45||T===46||T===58||T===95||pn(T)?(e.consume(T),A):O(T)}function O(T){return T===61?(e.consume(T),Q):ze(T)?(l=O,ie(T)):Xe(T)?(e.consume(T),O):V(T)}function Q(T){return T===null||T===60||T===61||T===62||T===96?n(T):T===34||T===39?(e.consume(T),i=T,H):ze(T)?(l=Q,ie(T)):Xe(T)?(e.consume(T),Q):(e.consume(T),q)}function H(T){return T===i?(e.consume(T),i=void 0,$):T===null?n(T):ze(T)?(l=H,ie(T)):(e.consume(T),H)}function q(T){return T===null||T===34||T===39||T===60||T===61||T===96?n(T):T===47||T===62||ht(T)?V(T):(e.consume(T),q)}function $(T){return T===47||T===62||ht(T)?V(T):n(T)}function J(T){return T===62?(e.consume(T),e.exit("htmlTextData"),e.exit("htmlText"),t):n(T)}function ie(T){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(T),e.exit("lineEnding"),L}function L(T){return Xe(T)?et(e,ne,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(T):ne(T)}function ne(T){return e.enter("htmlTextData"),l(T)}}const um={name:"labelEnd",resolveAll:RM,resolveTo:OM,tokenize:MM},IM={tokenize:DM},PM={tokenize:LM},AM={tokenize:$M};function RM(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",t+=i}}return e.length!==n.length&&Gn(e,0,e.length,n),e}function OM(e,t){let n=e.length,r=0,i,o,l,u;for(;n--;)if(i=e[n][1],o){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(l){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(o=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(l=n);const c={type:e[o][1].type==="labelLink"?"link":"image",start:{...e[o][1].start},end:{...e[e.length-1][1].end}},f={type:"label",start:{...e[o][1].start},end:{...e[l][1].end}},h={type:"labelText",start:{...e[o+r+2][1].end},end:{...e[l-2][1].start}};return u=[["enter",c,t],["enter",f,t]],u=sr(u,e.slice(o+1,o+r+3)),u=sr(u,[["enter",h,t]]),u=sr(u,Lc(t.parser.constructs.insideSpan.null,e.slice(o+r+4,l-3),t)),u=sr(u,[["exit",h,t],e[l-2],e[l-1],["exit",f,t]]),u=sr(u,e.slice(l+1)),u=sr(u,[["exit",c,t]]),Gn(e,o,e.length,u),e}function MM(e,t,n){const r=this;let i=r.events.length,o,l;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){o=r.events[i][1];break}return u;function u(y){return o?o._inactive?p(y):(l=r.parser.defined.includes(br(r.sliceSerialize({start:o.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(y),e.exit("labelMarker"),e.exit("labelEnd"),c):n(y)}function c(y){return y===40?e.attempt(IM,h,l?h:p)(y):y===91?e.attempt(PM,h,l?f:p)(y):l?h(y):p(y)}function f(y){return e.attempt(AM,h,p)(y)}function h(y){return t(y)}function p(y){return o._balanced=!0,n(y)}}function DM(e,t,n){return r;function r(p){return e.enter("resource"),e.enter("resourceMarker"),e.consume(p),e.exit("resourceMarker"),i}function i(p){return ht(p)?La(e,o)(p):o(p)}function o(p){return p===41?h(p):Ik(e,l,u,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function l(p){return ht(p)?La(e,c)(p):h(p)}function u(p){return n(p)}function c(p){return p===34||p===39||p===40?Ak(e,f,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):h(p)}function f(p){return ht(p)?La(e,h)(p):h(p)}function h(p){return p===41?(e.enter("resourceMarker"),e.consume(p),e.exit("resourceMarker"),e.exit("resource"),t):n(p)}}function LM(e,t,n){const r=this;return i;function i(u){return Pk.call(r,e,o,l,"reference","referenceMarker","referenceString")(u)}function o(u){return r.parser.defined.includes(br(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(u):n(u)}function l(u){return n(u)}}function $M(e,t,n){return r;function r(o){return e.enter("reference"),e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),i}function i(o){return o===93?(e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),e.exit("reference"),t):n(o)}}const FM={name:"labelStartImage",resolveAll:um.resolveAll,tokenize:zM};function zM(e,t,n){const r=this;return i;function i(u){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(u),e.exit("labelImageMarker"),o}function o(u){return u===91?(e.enter("labelMarker"),e.consume(u),e.exit("labelMarker"),e.exit("labelImage"),l):n(u)}function l(u){return u===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(u):t(u)}}const BM={name:"labelStartLink",resolveAll:um.resolveAll,tokenize:UM};function UM(e,t,n){const r=this;return i;function i(l){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelLink"),o}function o(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):t(l)}}const sh={name:"lineEnding",tokenize:WM};function WM(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),et(e,t,"linePrefix")}}const Uu={name:"thematicBreak",tokenize:HM};function HM(e,t,n){let r=0,i;return o;function o(f){return e.enter("thematicBreak"),l(f)}function l(f){return i=f,u(f)}function u(f){return f===i?(e.enter("thematicBreakSequence"),c(f)):r>=3&&(f===null||ze(f))?(e.exit("thematicBreak"),t(f)):n(f)}function c(f){return f===i?(e.consume(f),r++,c):(e.exit("thematicBreakSequence"),Xe(f)?et(e,u,"whitespace")(f):u(f))}}const Rn={continuation:{tokenize:GM},exit:JM,name:"list",tokenize:YM},VM={partial:!0,tokenize:QM},qM={partial:!0,tokenize:KM};function YM(e,t,n){const r=this,i=r.events[r.events.length-1];let o=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,l=0;return u;function u(v){const b=r.containerState.type||(v===42||v===43||v===45?"listUnordered":"listOrdered");if(b==="listUnordered"?!r.containerState.marker||v===r.containerState.marker:dp(v)){if(r.containerState.type||(r.containerState.type=b,e.enter(b,{_container:!0})),b==="listUnordered")return e.enter("listItemPrefix"),v===42||v===45?e.check(Uu,n,f)(v):f(v);if(!r.interrupt||v===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(v)}return n(v)}function c(v){return dp(v)&&++l<10?(e.consume(v),c):(!r.interrupt||l<2)&&(r.containerState.marker?v===r.containerState.marker:v===41||v===46)?(e.exit("listItemValue"),f(v)):n(v)}function f(v){return e.enter("listItemMarker"),e.consume(v),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||v,e.check(ul,r.interrupt?n:h,e.attempt(VM,y,p))}function h(v){return r.containerState.initialBlankLine=!0,o++,y(v)}function p(v){return Xe(v)?(e.enter("listItemPrefixWhitespace"),e.consume(v),e.exit("listItemPrefixWhitespace"),y):n(v)}function y(v){return r.containerState.size=o+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(v)}}function GM(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(ul,i,o);function i(u){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,et(e,t,"listItemIndent",r.containerState.size+1)(u)}function o(u){return r.containerState.furtherBlankLines||!Xe(u)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,l(u)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(qM,t,l)(u))}function l(u){return r.containerState._closeFlow=!0,r.interrupt=void 0,et(e,e.attempt(Rn,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u)}}function KM(e,t,n){const r=this;return et(e,i,"listItemIndent",r.containerState.size+1);function i(o){const l=r.events[r.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===r.containerState.size?t(o):n(o)}}function JM(e){e.exit(this.containerState.type)}function QM(e,t,n){const r=this;return et(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(o){const l=r.events[r.events.length-1];return!Xe(o)&&l&&l[1].type==="listItemPrefixWhitespace"?t(o):n(o)}}const o0={name:"setextUnderline",resolveTo:XM,tokenize:ZM};function XM(e,t){let n=e.length,r,i,o;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!o&&e[n][1].type==="definition"&&(o=n);const l={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[i][1].type="setextHeadingText",o?(e.splice(i,0,["enter",l,t]),e.splice(o+1,0,["exit",e[r][1],t]),e[r][1].end={...e[o][1].end}):e[r][1]=l,e.push(["exit",l,t]),e}function ZM(e,t,n){const r=this;let i;return o;function o(f){let h=r.events.length,p;for(;h--;)if(r.events[h][1].type!=="lineEnding"&&r.events[h][1].type!=="linePrefix"&&r.events[h][1].type!=="content"){p=r.events[h][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||p)?(e.enter("setextHeadingLine"),i=f,l(f)):n(f)}function l(f){return e.enter("setextHeadingLineSequence"),u(f)}function u(f){return f===i?(e.consume(f),u):(e.exit("setextHeadingLineSequence"),Xe(f)?et(e,c,"lineSuffix")(f):c(f))}function c(f){return f===null||ze(f)?(e.exit("setextHeadingLine"),t(f)):n(f)}}const e2={tokenize:t2};function t2(e){const t=this,n=e.attempt(ul,r,e.attempt(this.parser.constructs.flowInitial,i,et(e,e.attempt(this.parser.constructs.flow,i,e.attempt(oM,i)),"linePrefix")));return n;function r(o){if(o===null){e.consume(o);return}return e.enter("lineEndingBlank"),e.consume(o),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const n2={resolveAll:Ok()},r2=Rk("string"),i2=Rk("text");function Rk(e){return{resolveAll:Ok(e==="text"?s2:void 0),tokenize:t};function t(n){const r=this,i=this.parser.constructs[e],o=n.attempt(i,l,u);return l;function l(h){return f(h)?o(h):u(h)}function u(h){if(h===null){n.consume(h);return}return n.enter("data"),n.consume(h),c}function c(h){return f(h)?(n.exit("data"),o(h)):(n.consume(h),c)}function f(h){if(h===null)return!0;const p=i[h];let y=-1;if(p)for(;++y<p.length;){const v=p[y];if(!v.previous||v.previous.call(r,r.previous))return!0}return!1}}}function Ok(e){return t;function t(n,r){let i=-1,o;for(;++i<=n.length;)o===void 0?n[i]&&n[i][1].type==="data"&&(o=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==o+2&&(n[o][1].end=n[i-1][1].end,n.splice(o+2,i-o-2),i=o+2),o=void 0);return e?e(n,r):n}}function s2(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let o=i.length,l=-1,u=0,c;for(;o--;){const f=i[o];if(typeof f=="string"){for(l=f.length;f.charCodeAt(l-1)===32;)u++,l--;if(l)break;l=-1}else if(f===-2)c=!0,u++;else if(f!==-1){o++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(u=0),u){const f={type:n===e.length||c||u<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?l:r.start._bufferIndex+l,_index:r.start._index+o,line:r.end.line,column:r.end.column-u,offset:r.end.offset-u},end:{...r.end}};r.end={...f.start},r.start.offset===r.end.offset?Object.assign(r,f):(e.splice(n,0,["enter",f,t],["exit",f,t]),n+=2)}n++}return e}const o2={42:Rn,43:Rn,45:Rn,48:Rn,49:Rn,50:Rn,51:Rn,52:Rn,53:Rn,54:Rn,55:Rn,56:Rn,57:Rn,62:Ck},a2={91:dM},l2={[-2]:ih,[-1]:ih,32:ih},u2={35:yM,42:Uu,45:[o0,Uu],60:bM,61:o0,95:Uu,96:i0,126:i0},c2={38:Nk,92:jk},d2={[-5]:sh,[-4]:sh,[-3]:sh,33:FM,38:Nk,42:fp,60:[BO,NM],91:BM,92:[mM,jk],93:um,95:fp,96:eM},f2={null:[fp,n2]},h2={null:[42,95]},p2={null:[]},m2=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:h2,contentInitial:a2,disable:p2,document:o2,flow:u2,flowInitial:l2,insideSpan:f2,string:c2,text:d2},Symbol.toStringTag,{value:"Module"}));function g2(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},o=[];let l=[],u=[];const c={attempt:z(D),check:z(R),consume:j,enter:C,exit:M,interrupt:z(R,{interrupt:!0})},f={code:null,containerState:{},defineSkip:w,events:[],now:b,parser:e,previous:null,sliceSerialize:y,sliceStream:v,write:p};let h=t.tokenize.call(f,c);return t.resolveAll&&o.push(t),f;function p(O){return l=sr(l,O),_(),l[l.length-1]!==null?[]:(F(t,0),f.events=Lc(o,f.events,f),f.events)}function y(O,Q){return v2(v(O),Q)}function v(O){return y2(l,O)}function b(){const{_bufferIndex:O,_index:Q,line:H,column:q,offset:$}=r;return{_bufferIndex:O,_index:Q,line:H,column:q,offset:$}}function w(O){i[O.line]=O.column,A()}function _(){let O;for(;r._index<l.length;){const Q=l[r._index];if(typeof Q=="string")for(O=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===O&&r._bufferIndex<Q.length;)E(Q.charCodeAt(r._bufferIndex));else E(Q)}}function E(O){h=h(O)}function j(O){ze(O)?(r.line++,r.column=1,r.offset+=O===-3?2:1,A()):O!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===l[r._index].length&&(r._bufferIndex=-1,r._index++)),f.previous=O}function C(O,Q){const H=Q||{};return H.type=O,H.start=b(),f.events.push(["enter",H,f]),u.push(H),H}function M(O){const Q=u.pop();return Q.end=b(),f.events.push(["exit",Q,f]),Q}function D(O,Q){F(O,Q.from)}function R(O,Q){Q.restore()}function z(O,Q){return H;function H(q,$,J){let ie,L,ne,T;return Array.isArray(q)?Z(q):"tokenize"in q?Z([q]):U(q);function U(pe){return fe;function fe(W){const te=W!==null&&pe[W],re=W!==null&&pe.null,ce=[...Array.isArray(te)?te:te?[te]:[],...Array.isArray(re)?re:re?[re]:[]];return Z(ce)(W)}}function Z(pe){return ie=pe,L=0,pe.length===0?J:I(pe[L])}function I(pe){return fe;function fe(W){return T=V(),ne=pe,pe.partial||(f.currentConstruct=pe),pe.name&&f.parser.constructs.disable.null.includes(pe.name)?me():pe.tokenize.call(Q?Object.assign(Object.create(f),Q):f,c,ye,me)(W)}}function ye(pe){return O(ne,T),$}function me(pe){return T.restore(),++L<ie.length?I(ie[L]):J}}}function F(O,Q){O.resolveAll&&!o.includes(O)&&o.push(O),O.resolve&&Gn(f.events,Q,f.events.length-Q,O.resolve(f.events.slice(Q),f)),O.resolveTo&&(f.events=O.resolveTo(f.events,f))}function V(){const O=b(),Q=f.previous,H=f.currentConstruct,q=f.events.length,$=Array.from(u);return{from:q,restore:J};function J(){r=O,f.previous=Q,f.currentConstruct=H,f.events.length=q,u=$,A()}}function A(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function y2(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,o=t.end._bufferIndex;let l;if(n===i)l=[e[n].slice(r,o)];else{if(l=e.slice(n,i),r>-1){const u=l[0];typeof u=="string"?l[0]=u.slice(r):l.shift()}o>0&&l.push(e[i].slice(0,o))}return l}function v2(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const o=e[n];let l;if(typeof o=="string")l=o;else switch(o){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=t?" ":"	";break}case-1:{if(!t&&i)continue;l=" ";break}default:l=String.fromCharCode(o)}i=o===-2,r.push(l)}return r.join("")}function x2(e){const r={constructs:Ek([m2,...(e||{}).extensions||[]]),content:i(OO),defined:[],document:i(DO),flow:i(e2),lazy:{},string:i(r2),text:i(i2)};return r;function i(o){return l;function l(u){return g2(r,o,u)}}}function w2(e){for(;!Tk(e););return e}const a0=/[\0\t\n\r]/g;function b2(){let e=1,t="",n=!0,r;return i;function i(o,l,u){const c=[];let f,h,p,y,v;for(o=t+(typeof o=="string"?o.toString():new TextDecoder(l||void 0).decode(o)),p=0,t="",n&&(o.charCodeAt(0)===65279&&p++,n=void 0);p<o.length;){if(a0.lastIndex=p,f=a0.exec(o),y=f&&f.index!==void 0?f.index:o.length,v=o.charCodeAt(y),!f){t=o.slice(p);break}if(v===10&&p===y&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),p<y&&(c.push(o.slice(p,y)),e+=y-p),v){case 0:{c.push(65533),e++;break}case 9:{for(h=Math.ceil(e/4)*4,c.push(-2);e++<h;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:r=!0,e=1}p=y+1}return u&&(r&&c.push(-5),t&&c.push(t),c.push(null)),c}}const k2=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function S2(e){return e.replace(k2,E2)}function E2(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),o=i===120||i===88;return _k(n.slice(o?2:1),o?16:10)}return lm(n)||e}const Mk={}.hasOwnProperty;function _2(e,t,n){return typeof t!="string"&&(n=t,t=void 0),C2(n)(w2(x2(n).document().write(b2()(e,t,!0))))}function C2(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(K),autolinkProtocol:V,autolinkEmail:V,atxHeading:o(We),blockQuote:o(re),characterEscape:V,characterReference:V,codeFenced:o(ce),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:o(ce,l),codeText:o(he,l),codeTextData:V,data:V,codeFlowValue:V,definition:o(_e),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:o(Ie),hardBreakEscape:o(Qe),hardBreakTrailing:o(Qe),htmlFlow:o(ut,l),htmlFlowData:V,htmlText:o(ut,l),htmlTextData:V,image:o(Tt),label:l,link:o(K),listItem:o(de),listItemValue:y,listOrdered:o(ae,p),listUnordered:o(ae),paragraph:o(Ee),reference:I,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:o(We),strong:o(we),thematicBreak:o(ee)},exit:{atxHeading:c(),atxHeadingSequence:D,autolink:c(),autolinkEmail:te,autolinkProtocol:W,blockQuote:c(),characterEscapeValue:A,characterReferenceMarkerHexadecimal:me,characterReferenceMarkerNumeric:me,characterReferenceValue:pe,characterReference:fe,codeFenced:c(_),codeFencedFence:w,codeFencedFenceInfo:v,codeFencedFenceMeta:b,codeFlowValue:A,codeIndented:c(E),codeText:c($),codeTextData:A,data:A,definition:c(),definitionDestinationString:M,definitionLabelString:j,definitionTitleString:C,emphasis:c(),hardBreakEscape:c(Q),hardBreakTrailing:c(Q),htmlFlow:c(H),htmlFlowData:A,htmlText:c(q),htmlTextData:A,image:c(ie),label:ne,labelText:L,lineEnding:O,link:c(J),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:ye,resourceDestinationString:T,resourceTitleString:U,resource:Z,setextHeading:c(F),setextHeadingLineSequence:z,setextHeadingText:R,strong:c(),thematicBreak:c()}};Dk(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(G){let se={type:"root",children:[]};const be={stack:[se],tokenStack:[],config:t,enter:u,exit:f,buffer:l,resume:h,data:n},Oe=[];let Be=-1;for(;++Be<G.length;)if(G[Be][1].type==="listOrdered"||G[Be][1].type==="listUnordered")if(G[Be][0]==="enter")Oe.push(Be);else{const Ce=Oe.pop();Be=i(G,Ce,Be)}for(Be=-1;++Be<G.length;){const Ce=t[G[Be][0]];Mk.call(Ce,G[Be][1].type)&&Ce[G[Be][1].type].call(Object.assign({sliceSerialize:G[Be][2].sliceSerialize},be),G[Be][1])}if(be.tokenStack.length>0){const Ce=be.tokenStack[be.tokenStack.length-1];(Ce[1]||l0).call(be,void 0,Ce[0])}for(se.position={start:Ci(G.length>0?G[0][1].start:{line:1,column:1,offset:0}),end:Ci(G.length>0?G[G.length-2][1].end:{line:1,column:1,offset:0})},Be=-1;++Be<t.transforms.length;)se=t.transforms[Be](se)||se;return se}function i(G,se,be){let Oe=se-1,Be=-1,Ce=!1,dt,ct,Ke,bt;for(;++Oe<=be;){const nt=G[Oe];switch(nt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{nt[0]==="enter"?Be++:Be--,bt=void 0;break}case"lineEndingBlank":{nt[0]==="enter"&&(dt&&!bt&&!Be&&!Ke&&(Ke=Oe),bt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:bt=void 0}if(!Be&&nt[0]==="enter"&&nt[1].type==="listItemPrefix"||Be===-1&&nt[0]==="exit"&&(nt[1].type==="listUnordered"||nt[1].type==="listOrdered")){if(dt){let Wt=Oe;for(ct=void 0;Wt--;){const It=G[Wt];if(It[1].type==="lineEnding"||It[1].type==="lineEndingBlank"){if(It[0]==="exit")continue;ct&&(G[ct][1].type="lineEndingBlank",Ce=!0),It[1].type="lineEnding",ct=Wt}else if(!(It[1].type==="linePrefix"||It[1].type==="blockQuotePrefix"||It[1].type==="blockQuotePrefixWhitespace"||It[1].type==="blockQuoteMarker"||It[1].type==="listItemIndent"))break}Ke&&(!ct||Ke<ct)&&(dt._spread=!0),dt.end=Object.assign({},ct?G[ct][1].start:nt[1].end),G.splice(ct||Oe,0,["exit",dt,nt[2]]),Oe++,be++}if(nt[1].type==="listItemPrefix"){const Wt={type:"listItem",_spread:!1,start:Object.assign({},nt[1].start),end:void 0};dt=Wt,G.splice(Oe,0,["enter",Wt,nt[2]]),Oe++,be++,Ke=void 0,bt=!0}}}return G[se][1]._spread=Ce,be}function o(G,se){return be;function be(Oe){u.call(this,G(Oe),Oe),se&&se.call(this,Oe)}}function l(){this.stack.push({type:"fragment",children:[]})}function u(G,se,be){this.stack[this.stack.length-1].children.push(G),this.stack.push(G),this.tokenStack.push([se,be||void 0]),G.position={start:Ci(se.start),end:void 0}}function c(G){return se;function se(be){G&&G.call(this,be),f.call(this,be)}}function f(G,se){const be=this.stack.pop(),Oe=this.tokenStack.pop();if(Oe)Oe[0].type!==G.type&&(se?se.call(this,G,Oe[0]):(Oe[1]||l0).call(this,G,Oe[0]));else throw new Error("Cannot close `"+G.type+"` ("+Da({start:G.start,end:G.end})+"): its not open");be.position.end=Ci(G.end)}function h(){return am(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function y(G){if(this.data.expectingFirstListItemValue){const se=this.stack[this.stack.length-2];se.start=Number.parseInt(this.sliceSerialize(G),10),this.data.expectingFirstListItemValue=void 0}}function v(){const G=this.resume(),se=this.stack[this.stack.length-1];se.lang=G}function b(){const G=this.resume(),se=this.stack[this.stack.length-1];se.meta=G}function w(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function _(){const G=this.resume(),se=this.stack[this.stack.length-1];se.value=G.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function E(){const G=this.resume(),se=this.stack[this.stack.length-1];se.value=G.replace(/(\r?\n|\r)$/g,"")}function j(G){const se=this.resume(),be=this.stack[this.stack.length-1];be.label=se,be.identifier=br(this.sliceSerialize(G)).toLowerCase()}function C(){const G=this.resume(),se=this.stack[this.stack.length-1];se.title=G}function M(){const G=this.resume(),se=this.stack[this.stack.length-1];se.url=G}function D(G){const se=this.stack[this.stack.length-1];if(!se.depth){const be=this.sliceSerialize(G).length;se.depth=be}}function R(){this.data.setextHeadingSlurpLineEnding=!0}function z(G){const se=this.stack[this.stack.length-1];se.depth=this.sliceSerialize(G).codePointAt(0)===61?1:2}function F(){this.data.setextHeadingSlurpLineEnding=void 0}function V(G){const be=this.stack[this.stack.length-1].children;let Oe=be[be.length-1];(!Oe||Oe.type!=="text")&&(Oe=P(),Oe.position={start:Ci(G.start),end:void 0},be.push(Oe)),this.stack.push(Oe)}function A(G){const se=this.stack.pop();se.value+=this.sliceSerialize(G),se.position.end=Ci(G.end)}function O(G){const se=this.stack[this.stack.length-1];if(this.data.atHardBreak){const be=se.children[se.children.length-1];be.position.end=Ci(G.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(se.type)&&(V.call(this,G),A.call(this,G))}function Q(){this.data.atHardBreak=!0}function H(){const G=this.resume(),se=this.stack[this.stack.length-1];se.value=G}function q(){const G=this.resume(),se=this.stack[this.stack.length-1];se.value=G}function $(){const G=this.resume(),se=this.stack[this.stack.length-1];se.value=G}function J(){const G=this.stack[this.stack.length-1];if(this.data.inReference){const se=this.data.referenceType||"shortcut";G.type+="Reference",G.referenceType=se,delete G.url,delete G.title}else delete G.identifier,delete G.label;this.data.referenceType=void 0}function ie(){const G=this.stack[this.stack.length-1];if(this.data.inReference){const se=this.data.referenceType||"shortcut";G.type+="Reference",G.referenceType=se,delete G.url,delete G.title}else delete G.identifier,delete G.label;this.data.referenceType=void 0}function L(G){const se=this.sliceSerialize(G),be=this.stack[this.stack.length-2];be.label=S2(se),be.identifier=br(se).toLowerCase()}function ne(){const G=this.stack[this.stack.length-1],se=this.resume(),be=this.stack[this.stack.length-1];if(this.data.inReference=!0,be.type==="link"){const Oe=G.children;be.children=Oe}else be.alt=se}function T(){const G=this.resume(),se=this.stack[this.stack.length-1];se.url=G}function U(){const G=this.resume(),se=this.stack[this.stack.length-1];se.title=G}function Z(){this.data.inReference=void 0}function I(){this.data.referenceType="collapsed"}function ye(G){const se=this.resume(),be=this.stack[this.stack.length-1];be.label=se,be.identifier=br(this.sliceSerialize(G)).toLowerCase(),this.data.referenceType="full"}function me(G){this.data.characterReferenceType=G.type}function pe(G){const se=this.sliceSerialize(G),be=this.data.characterReferenceType;let Oe;be?(Oe=_k(se,be==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Oe=lm(se);const Be=this.stack[this.stack.length-1];Be.value+=Oe}function fe(G){const se=this.stack.pop();se.position.end=Ci(G.end)}function W(G){A.call(this,G);const se=this.stack[this.stack.length-1];se.url=this.sliceSerialize(G)}function te(G){A.call(this,G);const se=this.stack[this.stack.length-1];se.url="mailto:"+this.sliceSerialize(G)}function re(){return{type:"blockquote",children:[]}}function ce(){return{type:"code",lang:null,meta:null,value:""}}function he(){return{type:"inlineCode",value:""}}function _e(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ie(){return{type:"emphasis",children:[]}}function We(){return{type:"heading",depth:0,children:[]}}function Qe(){return{type:"break"}}function ut(){return{type:"html",value:""}}function Tt(){return{type:"image",title:null,url:"",alt:null}}function K(){return{type:"link",title:null,url:"",children:[]}}function ae(G){return{type:"list",ordered:G.type==="listOrdered",start:null,spread:G._spread,children:[]}}function de(G){return{type:"listItem",spread:G._spread,checked:null,children:[]}}function Ee(){return{type:"paragraph",children:[]}}function we(){return{type:"strong",children:[]}}function P(){return{type:"text",value:""}}function ee(){return{type:"thematicBreak"}}}function Ci(e){return{line:e.line,column:e.column,offset:e.offset}}function Dk(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?Dk(e,r):j2(e,r)}}function j2(e,t){let n;for(n in t)if(Mk.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function l0(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Da({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Da({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Da({start:t.start,end:t.end})+") is still open")}function N2(e){const t=this;t.parser=n;function n(r){return _2(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function T2(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function I2(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function P2(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function A2(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function R2(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function O2(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=Do(r.toLowerCase()),o=e.footnoteOrder.indexOf(r);let l,u=e.footnoteCounts.get(r);u===void 0?(u=0,e.footnoteOrder.push(r),l=e.footnoteOrder.length):l=o+1,u+=1,e.footnoteCounts.set(r,u);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(u>1?"-"+u:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(l)}]};e.patch(t,c);const f={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,f),e.applyData(t,f)}function M2(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function D2(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function Lk(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),o=i[0];o&&o.type==="text"?o.value="["+o.value:i.unshift({type:"text",value:"["});const l=i[i.length-1];return l&&l.type==="text"?l.value+=r:i.push({type:"text",value:r}),i}function L2(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Lk(e,t);const i={src:Do(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const o={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,o),e.applyData(t,o)}function $2(e,t){const n={src:Do(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function F2(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function z2(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Lk(e,t);const i={href:Do(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const o={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,o),e.applyData(t,o)}function B2(e,t){const n={href:Do(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function U2(e,t,n){const r=e.all(t),i=n?W2(n):$k(t),o={},l=[];if(typeof t.checked=="boolean"){const h=r[0];let p;h&&h.type==="element"&&h.tagName==="p"?p=h:(p={type:"element",tagName:"p",properties:{},children:[]},r.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let u=-1;for(;++u<r.length;){const h=r[u];(i||u!==0||h.type!=="element"||h.tagName!=="p")&&l.push({type:"text",value:`
`}),h.type==="element"&&h.tagName==="p"&&!i?l.push(...h.children):l.push(h)}const c=r[r.length-1];c&&(i||c.type!=="element"||c.tagName!=="p")&&l.push({type:"text",value:`
`});const f={type:"element",tagName:"li",properties:o,children:l};return e.patch(t,f),e.applyData(t,f)}function W2(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=$k(n[r])}return t}function $k(e){const t=e.spread;return t??e.children.length>1}function H2(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const l=r[i];if(l.type==="element"&&l.tagName==="li"&&l.properties&&Array.isArray(l.properties.className)&&l.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,o),e.applyData(t,o)}function V2(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function q2(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function Y2(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function G2(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const l={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],l),i.push(l)}if(n.length>0){const l={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},u=rm(t.children[1]),c=yk(t.children[t.children.length-1]);u&&c&&(l.position={start:u,end:c}),i.push(l)}const o={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,o),e.applyData(t,o)}function K2(e,t,n){const r=n?n.children:void 0,o=(r?r.indexOf(t):1)===0?"th":"td",l=n&&n.type==="table"?n.align:void 0,u=l?l.length:t.children.length;let c=-1;const f=[];for(;++c<u;){const p=t.children[c],y={},v=l?l[c]:void 0;v&&(y.align=v);let b={type:"element",tagName:o,properties:y,children:[]};p&&(b.children=e.all(p),e.patch(p,b),b=e.applyData(p,b)),f.push(b)}const h={type:"element",tagName:"tr",properties:{},children:e.wrap(f,!0)};return e.patch(t,h),e.applyData(t,h)}function J2(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const u0=9,c0=32;function Q2(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const o=[];for(;r;)o.push(d0(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return o.push(d0(t.slice(i),i>0,!1)),o.join("")}function d0(e,t,n){let r=0,i=e.length;if(t){let o=e.codePointAt(r);for(;o===u0||o===c0;)r++,o=e.codePointAt(r)}if(n){let o=e.codePointAt(i-1);for(;o===u0||o===c0;)i--,o=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function X2(e,t){const n={type:"text",value:Q2(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function Z2(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const eD={blockquote:T2,break:I2,code:P2,delete:A2,emphasis:R2,footnoteReference:O2,heading:M2,html:D2,imageReference:L2,image:$2,inlineCode:F2,linkReference:z2,link:B2,listItem:U2,list:H2,paragraph:V2,root:q2,strong:Y2,table:G2,tableCell:J2,tableRow:K2,text:X2,thematicBreak:Z2,toml:Iu,yaml:Iu,definition:Iu,footnoteDefinition:Iu};function Iu(){}const Fk=-1,$c=0,$a=1,lc=2,cm=3,dm=4,fm=5,hm=6,zk=7,Bk=8,f0=typeof self=="object"?self:globalThis,tD=(e,t)=>{const n=(i,o)=>(e.set(o,i),i),r=i=>{if(e.has(i))return e.get(i);const[o,l]=t[i];switch(o){case $c:case Fk:return n(l,i);case $a:{const u=n([],i);for(const c of l)u.push(r(c));return u}case lc:{const u=n({},i);for(const[c,f]of l)u[r(c)]=r(f);return u}case cm:return n(new Date(l),i);case dm:{const{source:u,flags:c}=l;return n(new RegExp(u,c),i)}case fm:{const u=n(new Map,i);for(const[c,f]of l)u.set(r(c),r(f));return u}case hm:{const u=n(new Set,i);for(const c of l)u.add(r(c));return u}case zk:{const{name:u,message:c}=l;return n(new f0[u](c),i)}case Bk:return n(BigInt(l),i);case"BigInt":return n(Object(BigInt(l)),i);case"ArrayBuffer":return n(new Uint8Array(l).buffer,l);case"DataView":{const{buffer:u}=new Uint8Array(l);return n(new DataView(u),l)}}return n(new f0[o](l),i)};return r},h0=e=>tD(new Map,e)(0),lo="",{toString:nD}={},{keys:rD}=Object,Ea=e=>{const t=typeof e;if(t!=="object"||!e)return[$c,t];const n=nD.call(e).slice(8,-1);switch(n){case"Array":return[$a,lo];case"Object":return[lc,lo];case"Date":return[cm,lo];case"RegExp":return[dm,lo];case"Map":return[fm,lo];case"Set":return[hm,lo];case"DataView":return[$a,n]}return n.includes("Array")?[$a,n]:n.includes("Error")?[zk,n]:[lc,n]},Pu=([e,t])=>e===$c&&(t==="function"||t==="symbol"),iD=(e,t,n,r)=>{const i=(l,u)=>{const c=r.push(l)-1;return n.set(u,c),c},o=l=>{if(n.has(l))return n.get(l);let[u,c]=Ea(l);switch(u){case $c:{let h=l;switch(c){case"bigint":u=Bk,h=l.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);h=null;break;case"undefined":return i([Fk],l)}return i([u,h],l)}case $a:{if(c){let y=l;return c==="DataView"?y=new Uint8Array(l.buffer):c==="ArrayBuffer"&&(y=new Uint8Array(l)),i([c,[...y]],l)}const h=[],p=i([u,h],l);for(const y of l)h.push(o(y));return p}case lc:{if(c)switch(c){case"BigInt":return i([c,l.toString()],l);case"Boolean":case"Number":case"String":return i([c,l.valueOf()],l)}if(t&&"toJSON"in l)return o(l.toJSON());const h=[],p=i([u,h],l);for(const y of rD(l))(e||!Pu(Ea(l[y])))&&h.push([o(y),o(l[y])]);return p}case cm:return i([u,l.toISOString()],l);case dm:{const{source:h,flags:p}=l;return i([u,{source:h,flags:p}],l)}case fm:{const h=[],p=i([u,h],l);for(const[y,v]of l)(e||!(Pu(Ea(y))||Pu(Ea(v))))&&h.push([o(y),o(v)]);return p}case hm:{const h=[],p=i([u,h],l);for(const y of l)(e||!Pu(Ea(y)))&&h.push(o(y));return p}}const{message:f}=l;return i([u,{name:c,message:f}],l)};return o},p0=(e,{json:t,lossy:n}={})=>{const r=[];return iD(!(t||n),!!t,new Map,r)(e),r},uc=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?h0(p0(e,t)):structuredClone(e):(e,t)=>h0(p0(e,t));function sD(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function oD(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function aD(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||sD,r=e.options.footnoteBackLabel||oD,i=e.options.footnoteLabel||"Footnotes",o=e.options.footnoteLabelTagName||"h2",l=e.options.footnoteLabelProperties||{className:["sr-only"]},u=[];let c=-1;for(;++c<e.footnoteOrder.length;){const f=e.footnoteById.get(e.footnoteOrder[c]);if(!f)continue;const h=e.all(f),p=String(f.identifier).toUpperCase(),y=Do(p.toLowerCase());let v=0;const b=[],w=e.footnoteCounts.get(p);for(;w!==void 0&&++v<=w;){b.length>0&&b.push({type:"text",value:" "});let j=typeof n=="string"?n:n(c,v);typeof j=="string"&&(j={type:"text",value:j}),b.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+y+(v>1?"-"+v:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,v),className:["data-footnote-backref"]},children:Array.isArray(j)?j:[j]})}const _=h[h.length-1];if(_&&_.type==="element"&&_.tagName==="p"){const j=_.children[_.children.length-1];j&&j.type==="text"?j.value+=" ":_.children.push({type:"text",value:" "}),_.children.push(...b)}else h.push(...b);const E={type:"element",tagName:"li",properties:{id:t+"fn-"+y},children:e.wrap(h,!0)};e.patch(f,E),u.push(E)}if(u.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...uc(l),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(u,!0)},{type:"text",value:`
`}]}}const Fc=(function(e){if(e==null)return dD;if(typeof e=="function")return zc(e);if(typeof e=="object")return Array.isArray(e)?lD(e):uD(e);if(typeof e=="string")return cD(e);throw new Error("Expected function, string, or object as test")});function lD(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Fc(e[n]);return zc(r);function r(...i){let o=-1;for(;++o<t.length;)if(t[o].apply(this,i))return!0;return!1}}function uD(e){const t=e;return zc(n);function n(r){const i=r;let o;for(o in e)if(i[o]!==t[o])return!1;return!0}}function cD(e){return zc(t);function t(n){return n&&n.type===e}}function zc(e){return t;function t(n,r,i){return!!(fD(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function dD(){return!0}function fD(e){return e!==null&&typeof e=="object"&&"type"in e}const Uk=[],hD=!0,hp=!1,pD="skip";function Wk(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const o=Fc(i),l=r?-1:1;u(e,void 0,[])();function u(c,f,h){const p=c&&typeof c=="object"?c:{};if(typeof p.type=="string"){const v=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(y,"name",{value:"node ("+(c.type+(v?"<"+v+">":""))+")"})}return y;function y(){let v=Uk,b,w,_;if((!t||o(c,f,h[h.length-1]||void 0))&&(v=mD(n(c,h)),v[0]===hp))return v;if("children"in c&&c.children){const E=c;if(E.children&&v[0]!==pD)for(w=(r?E.children.length:-1)+l,_=h.concat(E);w>-1&&w<E.children.length;){const j=E.children[w];if(b=u(j,w,_)(),b[0]===hp)return b;w=typeof b[1]=="number"?b[1]:w+l}}return v}}}function mD(e){return Array.isArray(e)?e:typeof e=="number"?[hD,e]:e==null?Uk:[e]}function Bc(e,t,n,r){let i,o,l;typeof t=="function"&&typeof n!="function"?(o=void 0,l=t,i=n):(o=t,l=n,i=r),Wk(e,o,u,i);function u(c,f){const h=f[f.length-1],p=h?h.children.indexOf(c):void 0;return l(c,p,h)}}const pp={}.hasOwnProperty,gD={};function yD(e,t){const n=t||gD,r=new Map,i=new Map,o=new Map,l={...eD,...n.handlers},u={all:f,applyData:xD,definitionById:r,footnoteById:i,footnoteCounts:o,footnoteOrder:[],handlers:l,one:c,options:n,patch:vD,wrap:bD};return Bc(e,function(h){if(h.type==="definition"||h.type==="footnoteDefinition"){const p=h.type==="definition"?r:i,y=String(h.identifier).toUpperCase();p.has(y)||p.set(y,h)}}),u;function c(h,p){const y=h.type,v=u.handlers[y];if(pp.call(u.handlers,y)&&v)return v(u,h,p);if(u.options.passThrough&&u.options.passThrough.includes(y)){if("children"in h){const{children:w,..._}=h,E=uc(_);return E.children=u.all(h),E}return uc(h)}return(u.options.unknownHandler||wD)(u,h,p)}function f(h){const p=[];if("children"in h){const y=h.children;let v=-1;for(;++v<y.length;){const b=u.one(y[v],h);if(b){if(v&&y[v-1].type==="break"&&(!Array.isArray(b)&&b.type==="text"&&(b.value=m0(b.value)),!Array.isArray(b)&&b.type==="element")){const w=b.children[0];w&&w.type==="text"&&(w.value=m0(w.value))}Array.isArray(b)?p.push(...b):p.push(b)}}}return p}}function vD(e,t){e.position&&(t.position=oO(e))}function xD(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,o=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const l="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:l}}n.type==="element"&&o&&Object.assign(n.properties,uc(o)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function wD(e,t){const n=t.data||{},r="value"in t&&!(pp.call(n,"hProperties")||pp.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function bD(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function m0(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function g0(e,t){const n=yD(e,t),r=n.one(e,void 0),i=aD(n),o=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&o.children.push({type:"text",value:`
`},i),o}function kD(e,t){return e&&"run"in e?async function(n,r){const i=g0(n,{file:r,...t});await e.run(i,r)}:function(n,r){return g0(n,{file:r,...e||t})}}function y0(e){if(e)throw e}var oh,v0;function SD(){if(v0)return oh;v0=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(f){return typeof Array.isArray=="function"?Array.isArray(f):t.call(f)==="[object Array]"},o=function(f){if(!f||t.call(f)!=="[object Object]")return!1;var h=e.call(f,"constructor"),p=f.constructor&&f.constructor.prototype&&e.call(f.constructor.prototype,"isPrototypeOf");if(f.constructor&&!h&&!p)return!1;var y;for(y in f);return typeof y>"u"||e.call(f,y)},l=function(f,h){n&&h.name==="__proto__"?n(f,h.name,{enumerable:!0,configurable:!0,value:h.newValue,writable:!0}):f[h.name]=h.newValue},u=function(f,h){if(h==="__proto__")if(e.call(f,h)){if(r)return r(f,h).value}else return;return f[h]};return oh=function c(){var f,h,p,y,v,b,w=arguments[0],_=1,E=arguments.length,j=!1;for(typeof w=="boolean"&&(j=w,w=arguments[1]||{},_=2),(w==null||typeof w!="object"&&typeof w!="function")&&(w={});_<E;++_)if(f=arguments[_],f!=null)for(h in f)p=u(w,h),y=u(f,h),w!==y&&(j&&y&&(o(y)||(v=i(y)))?(v?(v=!1,b=p&&i(p)?p:[]):b=p&&o(p)?p:{},l(w,{name:h,newValue:c(j,b,y)})):typeof y<"u"&&l(w,{name:h,newValue:y}));return w},oh}var ED=SD();const ah=To(ED);function mp(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function _D(){const e=[],t={run:n,use:r};return t;function n(...i){let o=-1;const l=i.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);u(null,...i);function u(c,...f){const h=e[++o];let p=-1;if(c){l(c);return}for(;++p<i.length;)(f[p]===null||f[p]===void 0)&&(f[p]=i[p]);i=f,h?CD(h,u)(...f):l(null,...f)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function CD(e,t){let n;return r;function r(...l){const u=e.length>l.length;let c;u&&l.push(i);try{c=e.apply(this,l)}catch(f){const h=f;if(u&&n)throw h;return i(h)}u||(c&&c.then&&typeof c.then=="function"?c.then(o,i):c instanceof Error?i(c):o(c))}function i(l,...u){n||(n=!0,t(l,...u))}function o(l){i(null,l)}}const Rr={basename:jD,dirname:ND,extname:TD,join:ID,sep:"/"};function jD(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');cl(e);let n=0,r=-1,i=e.length,o;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(o){n=i+1;break}}else r<0&&(o=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let l=-1,u=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(o){n=i+1;break}}else l<0&&(o=!0,l=i+1),u>-1&&(e.codePointAt(i)===t.codePointAt(u--)?u<0&&(r=i):(u=-1,r=l));return n===r?r=l:r<0&&(r=e.length),e.slice(n,r)}function ND(e){if(cl(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function TD(e){cl(e);let t=e.length,n=-1,r=0,i=-1,o=0,l;for(;t--;){const u=e.codePointAt(t);if(u===47){if(l){r=t+1;break}continue}n<0&&(l=!0,n=t+1),u===46?i<0?i=t:o!==1&&(o=1):i>-1&&(o=-1)}return i<0||n<0||o===0||o===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function ID(...e){let t=-1,n;for(;++t<e.length;)cl(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":PD(n)}function PD(e){cl(e);const t=e.codePointAt(0)===47;let n=AD(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function AD(e,t){let n="",r=0,i=-1,o=0,l=-1,u,c;for(;++l<=e.length;){if(l<e.length)u=e.codePointAt(l);else{if(u===47)break;u=47}if(u===47){if(!(i===l-1||o===1))if(i!==l-1&&o===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),i=l,o=0;continue}}else if(n.length>0){n="",r=0,i=l,o=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,l):n=e.slice(i+1,l),r=l-i-1;i=l,o=0}else u===46&&o>-1?o++:o=-1}return n}function cl(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const RD={cwd:OD};function OD(){return"/"}function gp(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function MD(e){if(typeof e=="string")e=new URL(e);else if(!gp(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return DD(e)}function DD(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const lh=["history","path","basename","stem","extname","dirname"];class Hk{constructor(t){let n;t?gp(t)?n={path:t}:typeof t=="string"||LD(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":RD.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<lh.length;){const o=lh[r];o in n&&n[o]!==void 0&&n[o]!==null&&(this[o]=o==="history"?[...n[o]]:n[o])}let i;for(i in n)lh.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Rr.basename(this.path):void 0}set basename(t){ch(t,"basename"),uh(t,"basename"),this.path=Rr.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Rr.dirname(this.path):void 0}set dirname(t){x0(this.basename,"dirname"),this.path=Rr.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Rr.extname(this.path):void 0}set extname(t){if(uh(t,"extname"),x0(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Rr.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){gp(t)&&(t=MD(t)),ch(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Rr.basename(this.path,this.extname):void 0}set stem(t){ch(t,"stem"),uh(t,"stem"),this.path=Rr.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new mn(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function uh(e,t){if(e&&e.includes(Rr.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Rr.sep+"`")}function ch(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function x0(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function LD(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const $D=(function(e){const r=this.constructor.prototype,i=r[e],o=function(){return i.apply(o,arguments)};return Object.setPrototypeOf(o,r),o}),FD={}.hasOwnProperty;class pm extends $D{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=_D()}copy(){const t=new pm;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(ah(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(hh("data",this.frozen),this.namespace[t]=n,this):FD.call(this.namespace,t)&&this.namespace[t]||void 0:t?(hh("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=Au(t),r=this.parser||this.Parser;return dh("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),dh("process",this.parser||this.Parser),fh("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(o,l){const u=Au(t),c=r.parse(u);r.run(c,u,function(h,p,y){if(h||!p||!y)return f(h);const v=p,b=r.stringify(v,y);UD(b)?y.value=b:y.result=b,f(h,y)});function f(h,p){h||!p?l(h):o?o(p):n(void 0,p)}}}processSync(t){let n=!1,r;return this.freeze(),dh("processSync",this.parser||this.Parser),fh("processSync",this.compiler||this.Compiler),this.process(t,i),b0("processSync","process",n),r;function i(o,l){n=!0,y0(o),r=l}}run(t,n,r){w0(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?o(void 0,r):new Promise(o);function o(l,u){const c=Au(n);i.run(t,c,f);function f(h,p,y){const v=p||t;h?u(h):l?l(v):r(void 0,v,y)}}}runSync(t,n){let r=!1,i;return this.run(t,n,o),b0("runSync","run",r),i;function o(l,u){y0(l),i=u,r=!0}}stringify(t,n){this.freeze();const r=Au(n),i=this.compiler||this.Compiler;return fh("stringify",i),w0(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(hh("use",this.frozen),t!=null)if(typeof t=="function")c(t,n);else if(typeof t=="object")Array.isArray(t)?u(t):l(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function o(f){if(typeof f=="function")c(f,[]);else if(typeof f=="object")if(Array.isArray(f)){const[h,...p]=f;c(h,p)}else l(f);else throw new TypeError("Expected usable value, not `"+f+"`")}function l(f){if(!("plugins"in f)&&!("settings"in f))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");u(f.plugins),f.settings&&(i.settings=ah(!0,i.settings,f.settings))}function u(f){let h=-1;if(f!=null)if(Array.isArray(f))for(;++h<f.length;){const p=f[h];o(p)}else throw new TypeError("Expected a list of plugins, not `"+f+"`")}function c(f,h){let p=-1,y=-1;for(;++p<r.length;)if(r[p][0]===f){y=p;break}if(y===-1)r.push([f,...h]);else if(h.length>0){let[v,...b]=h;const w=r[y][1];mp(w)&&mp(v)&&(v=ah(!0,w,v)),r[y]=[f,v,...b]}}}}const zD=new pm().freeze();function dh(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function fh(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function hh(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function w0(e){if(!mp(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function b0(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Au(e){return BD(e)?e:new Hk(e)}function BD(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function UD(e){return typeof e=="string"||WD(e)}function WD(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const HD="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",k0=[],S0={allowDangerousHtml:!0},VD=/^(https?|ircs?|mailto|xmpp)$/i,qD=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function YD(e){const t=GD(e),n=KD(e);return JD(t.runSync(t.parse(n),n),e)}function GD(e){const t=e.rehypePlugins||k0,n=e.remarkPlugins||k0,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...S0}:S0;return zD().use(N2).use(n).use(kD,r).use(t)}function KD(e){const t=e.children||"",n=new Hk;return typeof t=="string"&&(n.value=t),n}function JD(e,t){const n=t.allowedElements,r=t.allowElement,i=t.components,o=t.disallowedElements,l=t.skipHtml,u=t.unwrapDisallowed,c=t.urlTransform||QD;for(const h of qD)Object.hasOwn(t,h.from)&&(""+h.from+(h.to?"use `"+h.to+"` instead":"remove it")+HD+h.id,void 0);return t.className&&(e={type:"element",tagName:"div",properties:{className:t.className},children:e.type==="root"?e.children:[e]}),Bc(e,f),dO(e,{Fragment:g.Fragment,components:i,ignoreInvalidStyle:!0,jsx:g.jsx,jsxs:g.jsxs,passKeys:!0,passNode:!0});function f(h,p,y){if(h.type==="raw"&&y&&typeof p=="number")return l?y.children.splice(p,1):y.children[p]={type:"text",value:h.value},p;if(h.type==="element"){let v;for(v in rh)if(Object.hasOwn(rh,v)&&Object.hasOwn(h.properties,v)){const b=h.properties[v],w=rh[v];(w===null||w.includes(h.tagName))&&(h.properties[v]=c(String(b||""),v,h))}}if(h.type==="element"){let v=n?!n.includes(h.tagName):o?o.includes(h.tagName):!1;if(!v&&r&&typeof p=="number"&&(v=!r(h,p,y)),v&&y&&typeof p=="number")return u&&h.children?y.children.splice(p,1,...h.children):y.children.splice(p,1),p}}}function QD(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||n!==-1&&t>n||r!==-1&&t>r||VD.test(e.slice(0,t))?e:""}function E0(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(t);for(;i!==-1;)r++,i=n.indexOf(t,i+t.length);return r}function XD(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function ZD(e,t,n){const i=Fc((n||{}).ignore||[]),o=eL(t);let l=-1;for(;++l<o.length;)Wk(e,"text",u);function u(f,h){let p=-1,y;for(;++p<h.length;){const v=h[p],b=y?y.children:void 0;if(i(v,b?b.indexOf(v):void 0,y))return;y=v}if(y)return c(f,h)}function c(f,h){const p=h[h.length-1],y=o[l][0],v=o[l][1];let b=0;const _=p.children.indexOf(f);let E=!1,j=[];y.lastIndex=0;let C=y.exec(f.value);for(;C;){const M=C.index,D={index:C.index,input:C.input,stack:[...h,f]};let R=v(...C,D);if(typeof R=="string"&&(R=R.length>0?{type:"text",value:R}:void 0),R===!1?y.lastIndex=M+1:(b!==M&&j.push({type:"text",value:f.value.slice(b,M)}),Array.isArray(R)?j.push(...R):R&&j.push(R),b=M+C[0].length,E=!0),!y.global)break;C=y.exec(f.value)}return E?(b<f.value.length&&j.push({type:"text",value:f.value.slice(b)}),p.children.splice(_,1,...j)):j=[f],_+j.length}}function eL(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const i=n[r];t.push([tL(i[0]),nL(i[1])])}return t}function tL(e){return typeof e=="string"?new RegExp(XD(e),"g"):e}function nL(e){return typeof e=="function"?e:function(){return e}}const ph="phrasing",mh=["autolink","link","image","label"];function rL(){return{transforms:[cL],enter:{literalAutolink:sL,literalAutolinkEmail:gh,literalAutolinkHttp:gh,literalAutolinkWww:gh},exit:{literalAutolink:uL,literalAutolinkEmail:lL,literalAutolinkHttp:oL,literalAutolinkWww:aL}}}function iL(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:ph,notInConstruct:mh},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:ph,notInConstruct:mh},{character:":",before:"[ps]",after:"\\/",inConstruct:ph,notInConstruct:mh}]}}function sL(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function gh(e){this.config.enter.autolinkProtocol.call(this,e)}function oL(e){this.config.exit.autolinkProtocol.call(this,e)}function aL(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function lL(e){this.config.exit.autolinkEmail.call(this,e)}function uL(e){this.exit(e)}function cL(e){ZD(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,dL],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),fL]],{ignore:["link","linkReference"]})}function dL(e,t,n,r,i){let o="";if(!Vk(i)||(/^w/i.test(t)&&(n=t+n,t="",o="http://"),!hL(n)))return!1;const l=pL(n+r);if(!l[0])return!1;const u={type:"link",title:null,url:o+t+l[0],children:[{type:"text",value:t+l[0]}]};return l[1]?[u,{type:"text",value:l[1]}]:u}function fL(e,t,n,r){return!Vk(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function hL(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function pL(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const i=E0(e,"(");let o=E0(e,")");for(;r!==-1&&i>o;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),o++;return[e,n]}function Vk(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||xs(n)||Dc(n))&&(!t||n!==47)}qk.peek=SL;function mL(){this.buffer()}function gL(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function yL(){this.buffer()}function vL(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function xL(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=br(this.sliceSerialize(e)).toLowerCase(),n.label=t}function wL(e){this.exit(e)}function bL(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=br(this.sliceSerialize(e)).toLowerCase(),n.label=t}function kL(e){this.exit(e)}function SL(){return"["}function qk(e,t,n,r){const i=n.createTracker(r);let o=i.move("[^");const l=n.enter("footnoteReference"),u=n.enter("reference");return o+=i.move(n.safe(n.associationId(e),{after:"]",before:o})),u(),l(),o+=i.move("]"),o}function EL(){return{enter:{gfmFootnoteCallString:mL,gfmFootnoteCall:gL,gfmFootnoteDefinitionLabelString:yL,gfmFootnoteDefinition:vL},exit:{gfmFootnoteCallString:xL,gfmFootnoteCall:wL,gfmFootnoteDefinitionLabelString:bL,gfmFootnoteDefinition:kL}}}function _L(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:qk},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,o,l){const u=o.createTracker(l);let c=u.move("[^");const f=o.enter("footnoteDefinition"),h=o.enter("label");return c+=u.move(o.safe(o.associationId(r),{before:c,after:"]"})),h(),c+=u.move("]:"),r.children&&r.children.length>0&&(u.shift(4),c+=u.move((t?`
`:" ")+o.indentLines(o.containerFlow(r,u.current()),t?Yk:CL))),f(),c}}function CL(e,t,n){return t===0?e:Yk(e,t,n)}function Yk(e,t,n){return(n?"":"    ")+e}const jL=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];Gk.peek=AL;function NL(){return{canContainEols:["delete"],enter:{strikethrough:IL},exit:{strikethrough:PL}}}function TL(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:jL}],handlers:{delete:Gk}}}function IL(e){this.enter({type:"delete",children:[]},e)}function PL(e){this.exit(e)}function Gk(e,t,n,r){const i=n.createTracker(r),o=n.enter("strikethrough");let l=i.move("~~");return l+=n.containerPhrasing(e,{...i.current(),before:l,after:"~"}),l+=i.move("~~"),o(),l}function AL(){return"~"}function RL(e){return e.length}function OL(e,t){const n=t||{},r=(n.align||[]).concat(),i=n.stringLength||RL,o=[],l=[],u=[],c=[];let f=0,h=-1;for(;++h<e.length;){const w=[],_=[];let E=-1;for(e[h].length>f&&(f=e[h].length);++E<e[h].length;){const j=ML(e[h][E]);if(n.alignDelimiters!==!1){const C=i(j);_[E]=C,(c[E]===void 0||C>c[E])&&(c[E]=C)}w.push(j)}l[h]=w,u[h]=_}let p=-1;if(typeof r=="object"&&"length"in r)for(;++p<f;)o[p]=_0(r[p]);else{const w=_0(r);for(;++p<f;)o[p]=w}p=-1;const y=[],v=[];for(;++p<f;){const w=o[p];let _="",E="";w===99?(_=":",E=":"):w===108?_=":":w===114&&(E=":");let j=n.alignDelimiters===!1?1:Math.max(1,c[p]-_.length-E.length);const C=_+"-".repeat(j)+E;n.alignDelimiters!==!1&&(j=_.length+j+E.length,j>c[p]&&(c[p]=j),v[p]=j),y[p]=C}l.splice(1,0,y),u.splice(1,0,v),h=-1;const b=[];for(;++h<l.length;){const w=l[h],_=u[h];p=-1;const E=[];for(;++p<f;){const j=w[p]||"";let C="",M="";if(n.alignDelimiters!==!1){const D=c[p]-(_[p]||0),R=o[p];R===114?C=" ".repeat(D):R===99?D%2?(C=" ".repeat(D/2+.5),M=" ".repeat(D/2-.5)):(C=" ".repeat(D/2),M=C):M=" ".repeat(D)}n.delimiterStart!==!1&&!p&&E.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&j==="")&&(n.delimiterStart!==!1||p)&&E.push(" "),n.alignDelimiters!==!1&&E.push(C),E.push(j),n.alignDelimiters!==!1&&E.push(M),n.padding!==!1&&E.push(" "),(n.delimiterEnd!==!1||p!==f-1)&&E.push("|")}b.push(n.delimiterEnd===!1?E.join("").replace(/ +$/,""):E.join(""))}return b.join(`
`)}function ML(e){return e==null?"":String(e)}function _0(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function DL(e,t,n,r){const i=n.enter("blockquote"),o=n.createTracker(r);o.move("> "),o.shift(2);const l=n.indentLines(n.containerFlow(e,o.current()),LL);return i(),l}function LL(e,t,n){return">"+(n?"":" ")+e}function $L(e,t){return C0(e,t.inConstruct,!0)&&!C0(e,t.notInConstruct,!1)}function C0(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function j0(e,t,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&$L(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function FL(e,t){const n=String(e);let r=n.indexOf(t),i=r,o=0,l=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++o>l&&(l=o):o=1,i=r+t.length,r=n.indexOf(t,i);return l}function zL(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function BL(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function UL(e,t,n,r){const i=BL(n),o=e.value||"",l=i==="`"?"GraveAccent":"Tilde";if(zL(e,n)){const p=n.enter("codeIndented"),y=n.indentLines(o,WL);return p(),y}const u=n.createTracker(r),c=i.repeat(Math.max(FL(o,i)+1,3)),f=n.enter("codeFenced");let h=u.move(c);if(e.lang){const p=n.enter(`codeFencedLang${l}`);h+=u.move(n.safe(e.lang,{before:h,after:" ",encode:["`"],...u.current()})),p()}if(e.lang&&e.meta){const p=n.enter(`codeFencedMeta${l}`);h+=u.move(" "),h+=u.move(n.safe(e.meta,{before:h,after:`
`,encode:["`"],...u.current()})),p()}return h+=u.move(`
`),o&&(h+=u.move(o+`
`)),h+=u.move(c),f(),h}function WL(e,t,n){return(n?"":"    ")+e}function mm(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function HL(e,t,n,r){const i=mm(n),o=i==='"'?"Quote":"Apostrophe",l=n.enter("definition");let u=n.enter("label");const c=n.createTracker(r);let f=c.move("[");return f+=c.move(n.safe(n.associationId(e),{before:f,after:"]",...c.current()})),f+=c.move("]: "),u(),!e.url||/[\0- \u007F]/.test(e.url)?(u=n.enter("destinationLiteral"),f+=c.move("<"),f+=c.move(n.safe(e.url,{before:f,after:">",...c.current()})),f+=c.move(">")):(u=n.enter("destinationRaw"),f+=c.move(n.safe(e.url,{before:f,after:e.title?" ":`
`,...c.current()}))),u(),e.title&&(u=n.enter(`title${o}`),f+=c.move(" "+i),f+=c.move(n.safe(e.title,{before:f,after:i,...c.current()})),f+=c.move(i),u()),l(),f}function VL(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function Qa(e){return"&#x"+e.toString(16).toUpperCase()+";"}function cc(e,t,n){const r=No(e),i=No(t);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}Kk.peek=qL;function Kk(e,t,n,r){const i=VL(n),o=n.enter("emphasis"),l=n.createTracker(r),u=l.move(i);let c=l.move(n.containerPhrasing(e,{after:i,before:u,...l.current()}));const f=c.charCodeAt(0),h=cc(r.before.charCodeAt(r.before.length-1),f,i);h.inside&&(c=Qa(f)+c.slice(1));const p=c.charCodeAt(c.length-1),y=cc(r.after.charCodeAt(0),p,i);y.inside&&(c=c.slice(0,-1)+Qa(p));const v=l.move(i);return o(),n.attentionEncodeSurroundingInfo={after:y.outside,before:h.outside},u+c+v}function qL(e,t,n){return n.options.emphasis||"*"}function YL(e,t){let n=!1;return Bc(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,hp}),!!((!e.depth||e.depth<3)&&am(e)&&(t.options.setext||n))}function GL(e,t,n,r){const i=Math.max(Math.min(6,e.depth||1),1),o=n.createTracker(r);if(YL(e,n)){const h=n.enter("headingSetext"),p=n.enter("phrasing"),y=n.containerPhrasing(e,{...o.current(),before:`
`,after:`
`});return p(),h(),y+`
`+(i===1?"=":"-").repeat(y.length-(Math.max(y.lastIndexOf("\r"),y.lastIndexOf(`
`))+1))}const l="#".repeat(i),u=n.enter("headingAtx"),c=n.enter("phrasing");o.move(l+" ");let f=n.containerPhrasing(e,{before:"# ",after:`
`,...o.current()});return/^[\t ]/.test(f)&&(f=Qa(f.charCodeAt(0))+f.slice(1)),f=f?l+" "+f:l,n.options.closeAtx&&(f+=" "+l),c(),u(),f}Jk.peek=KL;function Jk(e){return e.value||""}function KL(){return"<"}Qk.peek=JL;function Qk(e,t,n,r){const i=mm(n),o=i==='"'?"Quote":"Apostrophe",l=n.enter("image");let u=n.enter("label");const c=n.createTracker(r);let f=c.move("![");return f+=c.move(n.safe(e.alt,{before:f,after:"]",...c.current()})),f+=c.move("]("),u(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(u=n.enter("destinationLiteral"),f+=c.move("<"),f+=c.move(n.safe(e.url,{before:f,after:">",...c.current()})),f+=c.move(">")):(u=n.enter("destinationRaw"),f+=c.move(n.safe(e.url,{before:f,after:e.title?" ":")",...c.current()}))),u(),e.title&&(u=n.enter(`title${o}`),f+=c.move(" "+i),f+=c.move(n.safe(e.title,{before:f,after:i,...c.current()})),f+=c.move(i),u()),f+=c.move(")"),l(),f}function JL(){return"!"}Xk.peek=QL;function Xk(e,t,n,r){const i=e.referenceType,o=n.enter("imageReference");let l=n.enter("label");const u=n.createTracker(r);let c=u.move("![");const f=n.safe(e.alt,{before:c,after:"]",...u.current()});c+=u.move(f+"]["),l();const h=n.stack;n.stack=[],l=n.enter("reference");const p=n.safe(n.associationId(e),{before:c,after:"]",...u.current()});return l(),n.stack=h,o(),i==="full"||!f||f!==p?c+=u.move(p+"]"):i==="shortcut"?c=c.slice(0,-1):c+=u.move("]"),c}function QL(){return"!"}Zk.peek=XL;function Zk(e,t,n){let r=e.value||"",i="`",o=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++o<n.unsafe.length;){const l=n.unsafe[o],u=n.compilePattern(l);let c;if(l.atBreak)for(;c=u.exec(r);){let f=c.index;r.charCodeAt(f)===10&&r.charCodeAt(f-1)===13&&f--,r=r.slice(0,f)+" "+r.slice(c.index+1)}}return i+r+i}function XL(){return"`"}function e1(e,t){const n=am(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}t1.peek=ZL;function t1(e,t,n,r){const i=mm(n),o=i==='"'?"Quote":"Apostrophe",l=n.createTracker(r);let u,c;if(e1(e,n)){const h=n.stack;n.stack=[],u=n.enter("autolink");let p=l.move("<");return p+=l.move(n.containerPhrasing(e,{before:p,after:">",...l.current()})),p+=l.move(">"),u(),n.stack=h,p}u=n.enter("link"),c=n.enter("label");let f=l.move("[");return f+=l.move(n.containerPhrasing(e,{before:f,after:"](",...l.current()})),f+=l.move("]("),c(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(c=n.enter("destinationLiteral"),f+=l.move("<"),f+=l.move(n.safe(e.url,{before:f,after:">",...l.current()})),f+=l.move(">")):(c=n.enter("destinationRaw"),f+=l.move(n.safe(e.url,{before:f,after:e.title?" ":")",...l.current()}))),c(),e.title&&(c=n.enter(`title${o}`),f+=l.move(" "+i),f+=l.move(n.safe(e.title,{before:f,after:i,...l.current()})),f+=l.move(i),c()),f+=l.move(")"),u(),f}function ZL(e,t,n){return e1(e,n)?"<":"["}n1.peek=e$;function n1(e,t,n,r){const i=e.referenceType,o=n.enter("linkReference");let l=n.enter("label");const u=n.createTracker(r);let c=u.move("[");const f=n.containerPhrasing(e,{before:c,after:"]",...u.current()});c+=u.move(f+"]["),l();const h=n.stack;n.stack=[],l=n.enter("reference");const p=n.safe(n.associationId(e),{before:c,after:"]",...u.current()});return l(),n.stack=h,o(),i==="full"||!f||f!==p?c+=u.move(p+"]"):i==="shortcut"?c=c.slice(0,-1):c+=u.move("]"),c}function e$(){return"["}function gm(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function t$(e){const t=gm(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function n$(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function r1(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function r$(e,t,n,r){const i=n.enter("list"),o=n.bulletCurrent;let l=e.ordered?n$(n):gm(n);const u=e.ordered?l==="."?")":".":t$(n);let c=t&&n.bulletLastUsed?l===n.bulletLastUsed:!1;if(!e.ordered){const h=e.children?e.children[0]:void 0;if((l==="*"||l==="-")&&h&&(!h.children||!h.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),r1(n)===l&&h){let p=-1;for(;++p<e.children.length;){const y=e.children[p];if(y&&y.type==="listItem"&&y.children&&y.children[0]&&y.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(l=u),n.bulletCurrent=l;const f=n.containerFlow(e,r);return n.bulletLastUsed=l,n.bulletCurrent=o,i(),f}function i$(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function s$(e,t,n,r){const i=i$(n);let o=n.bulletCurrent||gm(n);t&&t.type==="list"&&t.ordered&&(o=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+o);let l=o.length+1;(i==="tab"||i==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(l=Math.ceil(l/4)*4);const u=n.createTracker(r);u.move(o+" ".repeat(l-o.length)),u.shift(l);const c=n.enter("listItem"),f=n.indentLines(n.containerFlow(e,u.current()),h);return c(),f;function h(p,y,v){return y?(v?"":" ".repeat(l))+p:(v?o:o+" ".repeat(l-o.length))+p}}function o$(e,t,n,r){const i=n.enter("paragraph"),o=n.enter("phrasing"),l=n.containerPhrasing(e,r);return o(),i(),l}const a$=Fc(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function l$(e,t,n,r){return(e.children.some(function(l){return a$(l)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function u$(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}i1.peek=c$;function i1(e,t,n,r){const i=u$(n),o=n.enter("strong"),l=n.createTracker(r),u=l.move(i+i);let c=l.move(n.containerPhrasing(e,{after:i,before:u,...l.current()}));const f=c.charCodeAt(0),h=cc(r.before.charCodeAt(r.before.length-1),f,i);h.inside&&(c=Qa(f)+c.slice(1));const p=c.charCodeAt(c.length-1),y=cc(r.after.charCodeAt(0),p,i);y.inside&&(c=c.slice(0,-1)+Qa(p));const v=l.move(i+i);return o(),n.attentionEncodeSurroundingInfo={after:y.outside,before:h.outside},u+c+v}function c$(e,t,n){return n.options.strong||"*"}function d$(e,t,n,r){return n.safe(e.value,r)}function f$(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function h$(e,t,n){const r=(r1(n)+(n.options.ruleSpaces?" ":"")).repeat(f$(n));return n.options.ruleSpaces?r.slice(0,-1):r}const s1={blockquote:DL,break:j0,code:UL,definition:HL,emphasis:Kk,hardBreak:j0,heading:GL,html:Jk,image:Qk,imageReference:Xk,inlineCode:Zk,link:t1,linkReference:n1,list:r$,listItem:s$,paragraph:o$,root:l$,strong:i1,text:d$,thematicBreak:h$};function p$(){return{enter:{table:m$,tableData:N0,tableHeader:N0,tableRow:y$},exit:{codeText:v$,table:g$,tableData:yh,tableHeader:yh,tableRow:yh}}}function m$(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function g$(e){this.exit(e),this.data.inTable=void 0}function y$(e){this.enter({type:"tableRow",children:[]},e)}function yh(e){this.exit(e)}function N0(e){this.enter({type:"tableCell",children:[]},e)}function v$(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,x$));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function x$(e,t){return t==="|"?t:e}function w$(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,i=t.stringLength,o=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:y,table:l,tableCell:c,tableRow:u}};function l(v,b,w,_){return f(h(v,w,_),v.align)}function u(v,b,w,_){const E=p(v,w,_),j=f([E]);return j.slice(0,j.indexOf(`
`))}function c(v,b,w,_){const E=w.enter("tableCell"),j=w.enter("phrasing"),C=w.containerPhrasing(v,{..._,before:o,after:o});return j(),E(),C}function f(v,b){return OL(v,{align:b,alignDelimiters:r,padding:n,stringLength:i})}function h(v,b,w){const _=v.children;let E=-1;const j=[],C=b.enter("table");for(;++E<_.length;)j[E]=p(_[E],b,w);return C(),j}function p(v,b,w){const _=v.children;let E=-1;const j=[],C=b.enter("tableRow");for(;++E<_.length;)j[E]=c(_[E],v,b,w);return C(),j}function y(v,b,w){let _=s1.inlineCode(v,b,w);return w.stack.includes("tableCell")&&(_=_.replace(/\|/g,"\\$&")),_}}function b$(){return{exit:{taskListCheckValueChecked:T0,taskListCheckValueUnchecked:T0,paragraph:S$}}}function k$(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:E$}}}function T0(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function S$(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=t.children;let o=-1,l;for(;++o<i.length;){const u=i[o];if(u.type==="paragraph"){l=u;break}}l===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function E$(e,t,n,r){const i=e.children[0],o=typeof e.checked=="boolean"&&i&&i.type==="paragraph",l="["+(e.checked?"x":" ")+"] ",u=n.createTracker(r);o&&u.move(l);let c=s1.listItem(e,t,n,{...r,...u.current()});return o&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,f)),c;function f(h){return h+l}}function _$(){return[rL(),EL(),NL(),p$(),b$()]}function C$(e){return{extensions:[iL(),_L(e),TL(),w$(e),k$()]}}const j$={tokenize:R$,partial:!0},o1={tokenize:O$,partial:!0},a1={tokenize:M$,partial:!0},l1={tokenize:D$,partial:!0},N$={tokenize:L$,partial:!0},u1={name:"wwwAutolink",tokenize:P$,previous:d1},c1={name:"protocolAutolink",tokenize:A$,previous:f1},si={name:"emailAutolink",tokenize:I$,previous:h1},Ur={};function T$(){return{text:Ur}}let is=48;for(;is<123;)Ur[is]=si,is++,is===58?is=65:is===91&&(is=97);Ur[43]=si;Ur[45]=si;Ur[46]=si;Ur[95]=si;Ur[72]=[si,c1];Ur[104]=[si,c1];Ur[87]=[si,u1];Ur[119]=[si,u1];function I$(e,t,n){const r=this;let i,o;return l;function l(p){return!yp(p)||!h1.call(r,r.previous)||ym(r.events)?n(p):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),u(p))}function u(p){return yp(p)?(e.consume(p),u):p===64?(e.consume(p),c):n(p)}function c(p){return p===46?e.check(N$,h,f)(p):p===45||p===95||pn(p)?(o=!0,e.consume(p),c):h(p)}function f(p){return e.consume(p),i=!0,c}function h(p){return o&&i&&bn(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(p)):n(p)}}function P$(e,t,n){const r=this;return i;function i(l){return l!==87&&l!==119||!d1.call(r,r.previous)||ym(r.events)?n(l):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(j$,e.attempt(o1,e.attempt(a1,o),n),n)(l))}function o(l){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(l)}}function A$(e,t,n){const r=this;let i="",o=!1;return l;function l(p){return(p===72||p===104)&&f1.call(r,r.previous)&&!ym(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),i+=String.fromCodePoint(p),e.consume(p),u):n(p)}function u(p){if(bn(p)&&i.length<5)return i+=String.fromCodePoint(p),e.consume(p),u;if(p===58){const y=i.toLowerCase();if(y==="http"||y==="https")return e.consume(p),c}return n(p)}function c(p){return p===47?(e.consume(p),o?f:(o=!0,c)):n(p)}function f(p){return p===null||ac(p)||ht(p)||xs(p)||Dc(p)?n(p):e.attempt(o1,e.attempt(a1,h),n)(p)}function h(p){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(p)}}function R$(e,t,n){let r=0;return i;function i(l){return(l===87||l===119)&&r<3?(r++,e.consume(l),i):l===46&&r===3?(e.consume(l),o):n(l)}function o(l){return l===null?n(l):t(l)}}function O$(e,t,n){let r,i,o;return l;function l(f){return f===46||f===95?e.check(l1,c,u)(f):f===null||ht(f)||xs(f)||f!==45&&Dc(f)?c(f):(o=!0,e.consume(f),l)}function u(f){return f===95?r=!0:(i=r,r=void 0),e.consume(f),l}function c(f){return i||r||!o?n(f):t(f)}}function M$(e,t){let n=0,r=0;return i;function i(l){return l===40?(n++,e.consume(l),i):l===41&&r<n?o(l):l===33||l===34||l===38||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===60||l===63||l===93||l===95||l===126?e.check(l1,t,o)(l):l===null||ht(l)||xs(l)?t(l):(e.consume(l),i)}function o(l){return l===41&&r++,e.consume(l),i}}function D$(e,t,n){return r;function r(u){return u===33||u===34||u===39||u===41||u===42||u===44||u===46||u===58||u===59||u===63||u===95||u===126?(e.consume(u),r):u===38?(e.consume(u),o):u===93?(e.consume(u),i):u===60||u===null||ht(u)||xs(u)?t(u):n(u)}function i(u){return u===null||u===40||u===91||ht(u)||xs(u)?t(u):r(u)}function o(u){return bn(u)?l(u):n(u)}function l(u){return u===59?(e.consume(u),r):bn(u)?(e.consume(u),l):n(u)}}function L$(e,t,n){return r;function r(o){return e.consume(o),i}function i(o){return pn(o)?n(o):t(o)}}function d1(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||ht(e)}function f1(e){return!bn(e)}function h1(e){return!(e===47||yp(e))}function yp(e){return e===43||e===45||e===46||e===95||pn(e)}function ym(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const $$={tokenize:q$,partial:!0};function F$(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:W$,continuation:{tokenize:H$},exit:V$}},text:{91:{name:"gfmFootnoteCall",tokenize:U$},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:z$,resolveTo:B$}}}}function z$(e,t,n){const r=this;let i=r.events.length;const o=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let l;for(;i--;){const c=r.events[i][1];if(c.type==="labelImage"){l=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return u;function u(c){if(!l||!l._balanced)return n(c);const f=br(r.sliceSerialize({start:l.end,end:r.now()}));return f.codePointAt(0)!==94||!o.includes(f.slice(1))?n(c):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(c),e.exit("gfmFootnoteCallLabelMarker"),t(c))}}function B$(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const o={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},l={type:"chunkString",contentType:"string",start:Object.assign({},o.start),end:Object.assign({},o.end)},u=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",i,t],["exit",i,t],["enter",o,t],["enter",l,t],["exit",l,t],["exit",o,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...u),e}function U$(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o=0,l;return u;function u(p){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(p),e.exit("gfmFootnoteCallLabelMarker"),c}function c(p){return p!==94?n(p):(e.enter("gfmFootnoteCallMarker"),e.consume(p),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",f)}function f(p){if(o>999||p===93&&!l||p===null||p===91||ht(p))return n(p);if(p===93){e.exit("chunkString");const y=e.exit("gfmFootnoteCallString");return i.includes(br(r.sliceSerialize(y)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(p),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(p)}return ht(p)||(l=!0),o++,e.consume(p),p===92?h:f}function h(p){return p===91||p===92||p===93?(e.consume(p),o++,f):f(p)}}function W$(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o,l=0,u;return c;function c(b){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(b),e.exit("gfmFootnoteDefinitionLabelMarker"),f}function f(b){return b===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(b),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",h):n(b)}function h(b){if(l>999||b===93&&!u||b===null||b===91||ht(b))return n(b);if(b===93){e.exit("chunkString");const w=e.exit("gfmFootnoteDefinitionLabelString");return o=br(r.sliceSerialize(w)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(b),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),y}return ht(b)||(u=!0),l++,e.consume(b),b===92?p:h}function p(b){return b===91||b===92||b===93?(e.consume(b),l++,h):h(b)}function y(b){return b===58?(e.enter("definitionMarker"),e.consume(b),e.exit("definitionMarker"),i.includes(o)||i.push(o),et(e,v,"gfmFootnoteDefinitionWhitespace")):n(b)}function v(b){return t(b)}}function H$(e,t,n){return e.check(ul,t,e.attempt($$,t,n))}function V$(e){e.exit("gfmFootnoteDefinition")}function q$(e,t,n){const r=this;return et(e,i,"gfmFootnoteDefinitionIndent",5);function i(o){const l=r.events[r.events.length-1];return l&&l[1].type==="gfmFootnoteDefinitionIndent"&&l[2].sliceSerialize(l[1],!0).length===4?t(o):n(o)}}function Y$(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:o,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(l,u){let c=-1;for(;++c<l.length;)if(l[c][0]==="enter"&&l[c][1].type==="strikethroughSequenceTemporary"&&l[c][1]._close){let f=c;for(;f--;)if(l[f][0]==="exit"&&l[f][1].type==="strikethroughSequenceTemporary"&&l[f][1]._open&&l[c][1].end.offset-l[c][1].start.offset===l[f][1].end.offset-l[f][1].start.offset){l[c][1].type="strikethroughSequence",l[f][1].type="strikethroughSequence";const h={type:"strikethrough",start:Object.assign({},l[f][1].start),end:Object.assign({},l[c][1].end)},p={type:"strikethroughText",start:Object.assign({},l[f][1].end),end:Object.assign({},l[c][1].start)},y=[["enter",h,u],["enter",l[f][1],u],["exit",l[f][1],u],["enter",p,u]],v=u.parser.constructs.insideSpan.null;v&&Gn(y,y.length,0,Lc(v,l.slice(f+1,c),u)),Gn(y,y.length,0,[["exit",p,u],["enter",l[c][1],u],["exit",l[c][1],u],["exit",h,u]]),Gn(l,f-1,c-f+3,y),c=f+y.length-2;break}}for(c=-1;++c<l.length;)l[c][1].type==="strikethroughSequenceTemporary"&&(l[c][1].type="data");return l}function o(l,u,c){const f=this.previous,h=this.events;let p=0;return y;function y(b){return f===126&&h[h.length-1][1].type!=="characterEscape"?c(b):(l.enter("strikethroughSequenceTemporary"),v(b))}function v(b){const w=No(f);if(b===126)return p>1?c(b):(l.consume(b),p++,v);if(p<2&&!n)return c(b);const _=l.exit("strikethroughSequenceTemporary"),E=No(b);return _._open=!E||E===2&&!!w,_._close=!w||w===2&&!!E,u(b)}}}class G${constructor(){this.map=[]}add(t,n,r){K$(this,t,n,r)}consume(t){if(this.map.sort(function(o,l){return o[0]-l[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let i=r.pop();for(;i;){for(const o of i)t.push(o);i=r.pop()}this.map.length=0}}function K$(e,t,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<e.map.length;){if(e.map[i][0]===t){e.map[i][1]+=n,e.map[i][2].push(...r);return}i+=1}e.map.push([t,n,r])}}function J$(e,t){let n=!1;const r=[];for(;t<e.length;){const i=e[t];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const o=r.length-1;r[o]=r[o]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function Q$(){return{flow:{null:{name:"table",tokenize:X$,resolveAll:Z$}}}}function X$(e,t,n){const r=this;let i=0,o=0,l;return u;function u(A){let O=r.events.length-1;for(;O>-1;){const q=r.events[O][1].type;if(q==="lineEnding"||q==="linePrefix")O--;else break}const Q=O>-1?r.events[O][1].type:null,H=Q==="tableHead"||Q==="tableRow"?R:c;return H===R&&r.parser.lazy[r.now().line]?n(A):H(A)}function c(A){return e.enter("tableHead"),e.enter("tableRow"),f(A)}function f(A){return A===124||(l=!0,o+=1),h(A)}function h(A){return A===null?n(A):ze(A)?o>1?(o=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(A),e.exit("lineEnding"),v):n(A):Xe(A)?et(e,h,"whitespace")(A):(o+=1,l&&(l=!1,i+=1),A===124?(e.enter("tableCellDivider"),e.consume(A),e.exit("tableCellDivider"),l=!0,h):(e.enter("data"),p(A)))}function p(A){return A===null||A===124||ht(A)?(e.exit("data"),h(A)):(e.consume(A),A===92?y:p)}function y(A){return A===92||A===124?(e.consume(A),p):p(A)}function v(A){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(A):(e.enter("tableDelimiterRow"),l=!1,Xe(A)?et(e,b,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(A):b(A))}function b(A){return A===45||A===58?_(A):A===124?(l=!0,e.enter("tableCellDivider"),e.consume(A),e.exit("tableCellDivider"),w):D(A)}function w(A){return Xe(A)?et(e,_,"whitespace")(A):_(A)}function _(A){return A===58?(o+=1,l=!0,e.enter("tableDelimiterMarker"),e.consume(A),e.exit("tableDelimiterMarker"),E):A===45?(o+=1,E(A)):A===null||ze(A)?M(A):D(A)}function E(A){return A===45?(e.enter("tableDelimiterFiller"),j(A)):D(A)}function j(A){return A===45?(e.consume(A),j):A===58?(l=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(A),e.exit("tableDelimiterMarker"),C):(e.exit("tableDelimiterFiller"),C(A))}function C(A){return Xe(A)?et(e,M,"whitespace")(A):M(A)}function M(A){return A===124?b(A):A===null||ze(A)?!l||i!==o?D(A):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(A)):D(A)}function D(A){return n(A)}function R(A){return e.enter("tableRow"),z(A)}function z(A){return A===124?(e.enter("tableCellDivider"),e.consume(A),e.exit("tableCellDivider"),z):A===null||ze(A)?(e.exit("tableRow"),t(A)):Xe(A)?et(e,z,"whitespace")(A):(e.enter("data"),F(A))}function F(A){return A===null||A===124||ht(A)?(e.exit("data"),z(A)):(e.consume(A),A===92?V:F)}function V(A){return A===92||A===124?(e.consume(A),F):F(A)}}function Z$(e,t){let n=-1,r=!0,i=0,o=[0,0,0,0],l=[0,0,0,0],u=!1,c=0,f,h,p;const y=new G$;for(;++n<e.length;){const v=e[n],b=v[1];v[0]==="enter"?b.type==="tableHead"?(u=!1,c!==0&&(I0(y,t,c,f,h),h=void 0,c=0),f={type:"table",start:Object.assign({},b.start),end:Object.assign({},b.end)},y.add(n,0,[["enter",f,t]])):b.type==="tableRow"||b.type==="tableDelimiterRow"?(r=!0,p=void 0,o=[0,0,0,0],l=[0,n+1,0,0],u&&(u=!1,h={type:"tableBody",start:Object.assign({},b.start),end:Object.assign({},b.end)},y.add(n,0,[["enter",h,t]])),i=b.type==="tableDelimiterRow"?2:h?3:1):i&&(b.type==="data"||b.type==="tableDelimiterMarker"||b.type==="tableDelimiterFiller")?(r=!1,l[2]===0&&(o[1]!==0&&(l[0]=l[1],p=Ru(y,t,o,i,void 0,p),o=[0,0,0,0]),l[2]=n)):b.type==="tableCellDivider"&&(r?r=!1:(o[1]!==0&&(l[0]=l[1],p=Ru(y,t,o,i,void 0,p)),o=l,l=[o[1],n,0,0])):b.type==="tableHead"?(u=!0,c=n):b.type==="tableRow"||b.type==="tableDelimiterRow"?(c=n,o[1]!==0?(l[0]=l[1],p=Ru(y,t,o,i,n,p)):l[1]!==0&&(p=Ru(y,t,l,i,n,p)),i=0):i&&(b.type==="data"||b.type==="tableDelimiterMarker"||b.type==="tableDelimiterFiller")&&(l[3]=n)}for(c!==0&&I0(y,t,c,f,h),y.consume(t.events),n=-1;++n<t.events.length;){const v=t.events[n];v[0]==="enter"&&v[1].type==="table"&&(v[1]._align=J$(t.events,n))}return e}function Ru(e,t,n,r,i,o){const l=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",u="tableContent";n[0]!==0&&(o.end=Object.assign({},ho(t.events,n[0])),e.add(n[0],0,[["exit",o,t]]));const c=ho(t.events,n[1]);if(o={type:l,start:Object.assign({},c),end:Object.assign({},c)},e.add(n[1],0,[["enter",o,t]]),n[2]!==0){const f=ho(t.events,n[2]),h=ho(t.events,n[3]),p={type:u,start:Object.assign({},f),end:Object.assign({},h)};if(e.add(n[2],0,[["enter",p,t]]),r!==2){const y=t.events[n[2]],v=t.events[n[3]];if(y[1].end=Object.assign({},v[1].end),y[1].type="chunkText",y[1].contentType="text",n[3]>n[2]+1){const b=n[2]+1,w=n[3]-n[2]-1;e.add(b,w,[])}}e.add(n[3]+1,0,[["exit",p,t]])}return i!==void 0&&(o.end=Object.assign({},ho(t.events,i)),e.add(i,0,[["exit",o,t]]),o=void 0),o}function I0(e,t,n,r,i){const o=[],l=ho(t.events,n);i&&(i.end=Object.assign({},l),o.push(["exit",i,t])),r.end=Object.assign({},l),o.push(["exit",r,t]),e.add(n+1,0,o)}function ho(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const e4={name:"tasklistCheck",tokenize:n4};function t4(){return{text:{91:e4}}}function n4(e,t,n){const r=this;return i;function i(c){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(c):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),o)}function o(c){return ht(c)?(e.enter("taskListCheckValueUnchecked"),e.consume(c),e.exit("taskListCheckValueUnchecked"),l):c===88||c===120?(e.enter("taskListCheckValueChecked"),e.consume(c),e.exit("taskListCheckValueChecked"),l):n(c)}function l(c){return c===93?(e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),u):n(c)}function u(c){return ze(c)?t(c):Xe(c)?e.check({tokenize:r4},t,n)(c):n(c)}}function r4(e,t,n){return et(e,r,"whitespace");function r(i){return i===null?n(i):t(i)}}function i4(e){return Ek([T$(),F$(),Y$(e),Q$(),t4()])}const s4={};function o4(e){const t=this,n=e||s4,r=t.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),o=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),l=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(i4(n)),o.push(_$()),l.push(C$(n))}const a4=e=>e!=null;function l4(){const e=je(t=>t.works);return k.useMemo(()=>{const t=new Map;e.forEach(o=>{var c;const l=(c=o.name)==null?void 0:c.trim();if(!l)return;const u=t.get(l)??[];u.push(o),t.set(l,u)});const n=new Map,r=new Map;t.forEach((o,l)=>{o.length===1?n.set(l,o[0]):o.length>1&&r.set(l,o.filter(a4))});const i=Array.from(n.entries()).map(([o,l])=>({name:o,work:l}));return i.sort((o,l)=>l.name.length-o.name.length||o.name.localeCompare(l.name,"es")),{uniqueByName:n,duplicates:r,entries:i}},[e])}const u4=new RegExp("\\p{L}|\\p{N}","u"),P0=e=>e?u4.test(e):!1,c4=(e,t,n)=>{const r=t===0?void 0:e[t-1],i=n>=e.length?void 0:e[n];return!P0(r)&&!P0(i)},d4=(e,t)=>{const n=[];t.forEach(o=>{let l=0;for(;l<e.length;){const u=e.indexOf(o.name,l);if(u===-1)break;const c=u+o.name.length;c4(e,u,c)&&n.push({start:u,end:c,entry:o}),l=u+o.name.length}}),n.sort((o,l)=>o.start!==l.start?o.start-l.start:l.entry.name.length-o.entry.name.length);const r=[];let i=-1;return n.forEach(o=>{o.start<i||(r.push(o),i=o.end)}),r},f4=e=>e?new Set(["link","linkReference","definition","inlineCode","code"]).has(e.type):!0,h4=e=>{const t=(e==null?void 0:e.entries)??[];return t.length===0?()=>{}:n=>{Bc(n,"text",(r,i,o)=>{if(f4(o)||typeof i!="number"||!o)return;const u=r.value;if(!u)return;const c=d4(u,t);if(c.length===0)return;const f=[];let h=0;c.forEach(p=>{p.start>h&&f.push({type:"text",value:u.slice(h,p.start)}),f.push({type:"link",title:null,url:p.entry.href,children:[{type:"text",value:p.entry.name}]}),h=p.end}),h<u.length&&f.push({type:"text",value:u.slice(h)}),o.children.splice(i,1,...f)})}},p4=e=>{var f,h,p;const t="/sport-planner/".replace(/\/$/,""),r=`${t?`${t}/`:"/"}#/`,i=((f=e.href)==null?void 0:f.startsWith("#/"))??!1,o=((h=e.href)==null?void 0:h.startsWith(r))??!1,l=(((p=e.href)==null?void 0:p.startsWith("/"))??!1)||i||o,u=l?e.rel:e.rel??"noreferrer",c=l?e.target:e.target??"_blank";return g.jsx("a",{...e,className:"text-sky-300 underline decoration-dotted underline-offset-4 hover:text-sky-200",target:c,rel:u})},m4=e=>g.jsx("ul",{...e,className:De("my-2 list-disc space-y-1 pl-6",e.className)}),g4=e=>g.jsx("ol",{...e,className:De("my-2 list-decimal space-y-1 pl-6",e.className)}),y4=e=>g.jsx("li",{...e,className:De("leading-relaxed",e.className)});function v4(e){const t=e.trim(),n=t.match(/^(["'])(.*)(["'])$/s);return n?n[2].trim():t}function x4(e){var l;const n=v4(e.trim()).match(/^\[!([^\]]+)\]([+-])?\s*(.*)$/i);if(!n)return null;const r=n[1].toLowerCase(),o=(((l=n[3])==null?void 0:l.trim())??"")||r;return{type:r,title:o}}function p1(e){return typeof e=="object"&&e!==null&&"props"in e&&"type"in e}function vp(e){return e==null||typeof e=="boolean"?"":typeof e=="string"||typeof e=="number"?String(e):Array.isArray(e)?e.map(vp).join(""):p1(e)?vp(e.props.children):""}const A0={danger:{icon:"",containerClassName:"border-rose-500/25 bg-rose-500/10",titleClassName:"text-rose-200"},warning:{icon:"",containerClassName:"border-amber-500/25 bg-amber-500/10",titleClassName:"text-amber-200"},info:{icon:"",containerClassName:"border-sky-500/25 bg-sky-500/10",titleClassName:"text-sky-200"},note:{icon:"",containerClassName:"border-indigo-500/25 bg-indigo-500/10",titleClassName:"text-indigo-200"},tip:{icon:"",containerClassName:"border-emerald-500/25 bg-emerald-500/10",titleClassName:"text-emerald-200"}},w4=e=>{const{node:t,children:n,...r}=e,i=Array.isArray(n)?n:[n],o=i.findIndex(p=>p1(p)&&p.type==="p"),l=o>=0?i[o]:void 0,u=vp(l).trim(),c=x4(u);if(!c)return g.jsx("blockquote",{...r,children:n});const f=A0[c.type]??A0.info,h=i.filter((p,y)=>y!==o);return g.jsxs("aside",{className:De("my-4 rounded-2xl border p-5",f.containerClassName),children:[g.jsxs("div",{className:De("flex items-center gap-2 text-lg font-semibold",f.titleClassName),children:[g.jsx("span",{"aria-hidden":"true",children:f.icon}),g.jsx("span",{children:c.title})]}),g.jsx("div",{className:"mt-3",children:h})]})},b4={a:p4,blockquote:w4,ul:m4,ol:g4,li:y4};function ws({content:e,enableWorkLinks:t=!1}){const{entries:n}=l4(),r=k.useMemo(()=>{if(!t||n.length===0)return null;const o="/sport-planner/".replace(/\/$/,""),u=`${o?`${o}/`:"/"}#/catalog`;return{entries:n.map(({name:c,work:f})=>({name:c,href:`${u}?workId=${encodeURIComponent(f.id)}`}))}},[t,n]),i=k.useMemo(()=>{const o=[o4];return r&&o.push([h4,r]),o},[r]);return e?g.jsx("div",{className:"prose prose-invert max-w-none prose-headings:font-display prose-p:leading-relaxed prose-strong:text-white prose-a:text-sky-300",children:g.jsx(YD,{remarkPlugins:i,components:b4,children:e})}):null}function R0(e){if(!e)return null;const t=e.trim().toLowerCase();if(!t)return null;if(/^\\d+(\\.\\d+)?$/.test(t))return Math.floor(Number(t));if(/^(\\d+:)+\\d+$/.test(t)){const r=t.split(":").map(i=>Number(i));return r.some(i=>Number.isNaN(i))?null:r.reduce((i,o)=>i*60+o,0)}const n=t.match(/^(?:(\\d+)h)?(?:(\\d+)m)?(?:(\\d+)s?)?$/i);if(n){const r=n[1]?Number(n[1]):0,i=n[2]?Number(n[2]):0,o=n[3]?Number(n[3]):0;if(r||i||o)return r*3600+i*60+o}return null}function k4(e){if(!e)return null;try{const t=new URL(e),n=t.hostname.replace("www.","");let r="";if(n==="youtu.be"?r=t.pathname.slice(1).split("/")[0]??"":n.endsWith("youtube.com")?t.searchParams.has("v")?r=t.searchParams.get("v")??"":(t.pathname.startsWith("/shorts/")||t.pathname.startsWith("/embed/"))&&(r=t.pathname.split("/")[2]??""):n==="youtube-nocookie.com"&&t.pathname.startsWith("/embed/")&&(r=t.pathname.split("/")[2]??""),!r)return null;const i=new URL(`https://www.youtube-nocookie.com/embed/${r}`),o=R0(t.searchParams.get("start")??t.searchParams.get("t"));o!==null&&i.searchParams.set("start",String(o));const l=R0(t.searchParams.get("end"));l!==null&&i.searchParams.set("end",String(l));const u=t.searchParams.get("list");return u&&i.searchParams.set("list",u),i.toString()}catch{return null}}function Uc({url:e,title:t,maxWidth:n=300,className:r}){const i=e.trim();if(!i)return null;const o=k4(i);return o?g.jsx("div",{className:De("flex w-full justify-center",r),children:g.jsx("div",{className:"overflow-hidden rounded-2xl border border-white/10 bg-black shadow-inner shadow-black/50",style:{maxWidth:n},children:g.jsx("iframe",{src:o,title:t,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0,className:"block w-full",style:{aspectRatio:"16 / 9"}})})}):g.jsx("div",{className:De("flex w-full justify-center",r),children:g.jsx("a",{href:i,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-full border border-amber-400/30 bg-amber-500/10 px-3 py-1 text-xs font-semibold text-amber-200 transition hover:border-amber-400 hover:text-white",children:"URL no reconocida, abrir enlace"})})}function S4(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return k.useMemo(()=>r=>{t.forEach(i=>i(r))},t)}const Wc=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Lo(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function vm(e){return"nodeType"in e}function Ln(e){var t,n;return e?Lo(e)?e:vm(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function xm(e){const{Document:t}=Ln(e);return e instanceof t}function dl(e){return Lo(e)?!1:e instanceof Ln(e).HTMLElement}function m1(e){return e instanceof Ln(e).SVGElement}function $o(e){return e?Lo(e)?e.document:vm(e)?xm(e)?e:dl(e)||m1(e)?e.ownerDocument:document:document:document}const Fr=Wc?k.useLayoutEffect:k.useEffect;function wm(e){const t=k.useRef(e);return Fr(()=>{t.current=e}),k.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function E4(){const e=k.useRef(null),t=k.useCallback((r,i)=>{e.current=setInterval(r,i)},[]),n=k.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Xa(e,t){t===void 0&&(t=[e]);const n=k.useRef(e);return Fr(()=>{n.current!==e&&(n.current=e)},t),n}function fl(e,t){const n=k.useRef();return k.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function dc(e){const t=wm(e),n=k.useRef(null),r=k.useCallback(i=>{i!==n.current&&(t==null||t(i,n.current)),n.current=i},[]);return[n,r]}function xp(e){const t=k.useRef();return k.useEffect(()=>{t.current=e},[e]),t.current}let vh={};function hl(e,t){return k.useMemo(()=>{if(t)return t;const n=vh[e]==null?0:vh[e]+1;return vh[e]=n,e+"-"+n},[e,t])}function g1(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((o,l)=>{const u=Object.entries(l);for(const[c,f]of u){const h=o[c];h!=null&&(o[c]=h+e*f)}return o},{...t})}}const ko=g1(1),fc=g1(-1);function _4(e){return"clientX"in e&&"clientY"in e}function bm(e){if(!e)return!1;const{KeyboardEvent:t}=Ln(e.target);return t&&e instanceof t}function C4(e){if(!e)return!1;const{TouchEvent:t}=Ln(e.target);return t&&e instanceof t}function wp(e){if(C4(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return _4(e)?{x:e.clientX,y:e.clientY}:null}const Za=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Za.Translate.toString(e),Za.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),O0="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function j4(e){return e.matches(O0)?e:e.querySelector(O0)}const N4={display:"none"};function T4(e){let{id:t,value:n}=e;return Ne.createElement("div",{id:t,style:N4},n)}function I4(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Ne.createElement("div",{id:t,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function P4(){const[e,t]=k.useState("");return{announce:k.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const y1=k.createContext(null);function A4(e){const t=k.useContext(y1);k.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function R4(){const[e]=k.useState(()=>new Set),t=k.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[k.useCallback(r=>{let{type:i,event:o}=r;e.forEach(l=>{var u;return(u=l[i])==null?void 0:u.call(l,o)})},[e]),t]}const O4={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},M4={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function D4(e){let{announcements:t=M4,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=O4}=e;const{announce:o,announcement:l}=P4(),u=hl("DndLiveRegion"),[c,f]=k.useState(!1);if(k.useEffect(()=>{f(!0)},[]),A4(k.useMemo(()=>({onDragStart(p){let{active:y}=p;o(t.onDragStart({active:y}))},onDragMove(p){let{active:y,over:v}=p;t.onDragMove&&o(t.onDragMove({active:y,over:v}))},onDragOver(p){let{active:y,over:v}=p;o(t.onDragOver({active:y,over:v}))},onDragEnd(p){let{active:y,over:v}=p;o(t.onDragEnd({active:y,over:v}))},onDragCancel(p){let{active:y,over:v}=p;o(t.onDragCancel({active:y,over:v}))}}),[o,t])),!c)return null;const h=Ne.createElement(Ne.Fragment,null,Ne.createElement(T4,{id:r,value:i.draggable}),Ne.createElement(I4,{id:u,announcement:l}));return n?qn.createPortal(h,n):h}var Yt;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Yt||(Yt={}));function hc(){}const Er=Object.freeze({x:0,y:0});function L4(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function $4(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function F4(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function z4(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function M0(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const B4=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=M0(t,t.left,t.top),o=[];for(const l of r){const{id:u}=l,c=n.get(u);if(c){const f=L4(M0(c),i);o.push({id:u,data:{droppableContainer:l,value:f}})}}return o.sort($4)};function U4(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),l=i-r,u=o-n;if(r<i&&n<o){const c=t.width*t.height,f=e.width*e.height,h=l*u,p=h/(c+f-h);return Number(p.toFixed(4))}return 0}const W4=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=[];for(const o of r){const{id:l}=o,u=n.get(l);if(u){const c=U4(u,t);c>0&&i.push({id:l,data:{droppableContainer:o,value:c}})}}return i.sort(F4)};function H4(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function v1(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Er}function V4(e){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i.reduce((l,u)=>({...l,top:l.top+e*u.y,bottom:l.bottom+e*u.y,left:l.left+e*u.x,right:l.right+e*u.x}),{...n})}}const q4=V4(1);function Y4(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function G4(e,t,n){const r=Y4(t);if(!r)return e;const{scaleX:i,scaleY:o,x:l,y:u}=r,c=e.left-l-(1-i)*parseFloat(n),f=e.top-u-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),h=i?e.width/i:e.width,p=o?e.height/o:e.height;return{width:h,height:p,top:f,right:c+h,bottom:f+p,left:c}}const K4={ignoreTransform:!1};function Fo(e,t){t===void 0&&(t=K4);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:f,transformOrigin:h}=Ln(e).getComputedStyle(e);f&&(n=G4(n,f,h))}const{top:r,left:i,width:o,height:l,bottom:u,right:c}=n;return{top:r,left:i,width:o,height:l,bottom:u,right:c}}function D0(e){return Fo(e,{ignoreTransform:!0})}function J4(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Q4(e,t){return t===void 0&&(t=Ln(e).getComputedStyle(e)),t.position==="fixed"}function X4(e,t){t===void 0&&(t=Ln(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const o=t[i];return typeof o=="string"?n.test(o):!1})}function km(e,t){const n=[];function r(i){if(t!=null&&n.length>=t||!i)return n;if(xm(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!dl(i)||m1(i)||n.includes(i))return n;const o=Ln(e).getComputedStyle(i);return i!==e&&X4(i,o)&&n.push(i),Q4(i,o)?n:r(i.parentNode)}return e?r(e):n}function x1(e){const[t]=km(e,1);return t??null}function xh(e){return!Wc||!e?null:Lo(e)?e:vm(e)?xm(e)||e===$o(e).scrollingElement?window:dl(e)?e:null:null}function w1(e){return Lo(e)?e.scrollX:e.scrollLeft}function b1(e){return Lo(e)?e.scrollY:e.scrollTop}function bp(e){return{x:w1(e),y:b1(e)}}var en;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(en||(en={}));function k1(e){return!Wc||!e?!1:e===document.scrollingElement}function S1(e){const t={x:0,y:0},n=k1(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},i=e.scrollTop<=t.y,o=e.scrollLeft<=t.x,l=e.scrollTop>=r.y,u=e.scrollLeft>=r.x;return{isTop:i,isLeft:o,isBottom:l,isRight:u,maxScroll:r,minScroll:t}}const Z4={x:.2,y:.2};function eF(e,t,n,r,i){let{top:o,left:l,right:u,bottom:c}=n;r===void 0&&(r=10),i===void 0&&(i=Z4);const{isTop:f,isBottom:h,isLeft:p,isRight:y}=S1(e),v={x:0,y:0},b={x:0,y:0},w={height:t.height*i.y,width:t.width*i.x};return!f&&o<=t.top+w.height?(v.y=en.Backward,b.y=r*Math.abs((t.top+w.height-o)/w.height)):!h&&c>=t.bottom-w.height&&(v.y=en.Forward,b.y=r*Math.abs((t.bottom-w.height-c)/w.height)),!y&&u>=t.right-w.width?(v.x=en.Forward,b.x=r*Math.abs((t.right-w.width-u)/w.width)):!p&&l<=t.left+w.width&&(v.x=en.Backward,b.x=r*Math.abs((t.left+w.width-l)/w.width)),{direction:v,speed:b}}function tF(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:l}=window;return{top:0,left:0,right:o,bottom:l,width:o,height:l}}const{top:t,left:n,right:r,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:i,width:e.clientWidth,height:e.clientHeight}}function E1(e){return e.reduce((t,n)=>ko(t,bp(n)),Er)}function nF(e){return e.reduce((t,n)=>t+w1(n),0)}function rF(e){return e.reduce((t,n)=>t+b1(n),0)}function iF(e,t){if(t===void 0&&(t=Fo),!e)return;const{top:n,left:r,bottom:i,right:o}=t(e);x1(e)&&(i<=0||o<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const sF=[["x",["left","right"],nF],["y",["top","bottom"],rF]];class Sm{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=km(n),i=E1(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,l,u]of sF)for(const c of l)Object.defineProperty(this,c,{get:()=>{const f=u(r),h=i[o]-f;return this.rect[c]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Fa{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var i;(i=this.target)==null||i.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function oF(e){const{EventTarget:t}=Ln(e);return e instanceof t?e:$o(e)}function wh(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var ir;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(ir||(ir={}));function L0(e){e.preventDefault()}function aF(e){e.stopPropagation()}var ot;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(ot||(ot={}));const _1={start:[ot.Space,ot.Enter],cancel:[ot.Esc],end:[ot.Space,ot.Enter,ot.Tab]},lF=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case ot.Right:return{...n,x:n.x+25};case ot.Left:return{...n,x:n.x-25};case ot.Down:return{...n,y:n.y+25};case ot.Up:return{...n,y:n.y-25}}};class C1{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Fa($o(n)),this.windowListeners=new Fa(Ln(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ir.Resize,this.handleCancel),this.windowListeners.add(ir.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ir.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&iF(r),n(Er)}handleKeyDown(t){if(bm(t)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:o=_1,coordinateGetter:l=lF,scrollBehavior:u="smooth"}=i,{code:c}=t;if(o.end.includes(c)){this.handleEnd(t);return}if(o.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:f}=r.current,h=f?{x:f.left,y:f.top}:Er;this.referenceCoordinates||(this.referenceCoordinates=h);const p=l(t,{active:n,context:r.current,currentCoordinates:h});if(p){const y=fc(p,h),v={x:0,y:0},{scrollableAncestors:b}=r.current;for(const w of b){const _=t.code,{isTop:E,isRight:j,isLeft:C,isBottom:M,maxScroll:D,minScroll:R}=S1(w),z=tF(w),F={x:Math.min(_===ot.Right?z.right-z.width/2:z.right,Math.max(_===ot.Right?z.left:z.left+z.width/2,p.x)),y:Math.min(_===ot.Down?z.bottom-z.height/2:z.bottom,Math.max(_===ot.Down?z.top:z.top+z.height/2,p.y))},V=_===ot.Right&&!j||_===ot.Left&&!C,A=_===ot.Down&&!M||_===ot.Up&&!E;if(V&&F.x!==p.x){const O=w.scrollLeft+y.x,Q=_===ot.Right&&O<=D.x||_===ot.Left&&O>=R.x;if(Q&&!y.y){w.scrollTo({left:O,behavior:u});return}Q?v.x=w.scrollLeft-O:v.x=_===ot.Right?w.scrollLeft-D.x:w.scrollLeft-R.x,v.x&&w.scrollBy({left:-v.x,behavior:u});break}else if(A&&F.y!==p.y){const O=w.scrollTop+y.y,Q=_===ot.Down&&O<=D.y||_===ot.Up&&O>=R.y;if(Q&&!y.x){w.scrollTo({top:O,behavior:u});return}Q?v.y=w.scrollTop-O:v.y=_===ot.Down?w.scrollTop-D.y:w.scrollTop-R.y,v.y&&w.scrollBy({top:-v.y,behavior:u});break}}this.handleMove(t,ko(fc(p,this.referenceCoordinates),v))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}C1.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=_1,onActivation:i}=t,{active:o}=n;const{code:l}=e.nativeEvent;if(r.start.includes(l)){const u=o.activatorNode.current;return u&&e.target!==u?!1:(e.preventDefault(),i==null||i({event:e.nativeEvent}),!0)}return!1}}];function $0(e){return!!(e&&"distance"in e)}function F0(e){return!!(e&&"delay"in e)}class Em{constructor(t,n,r){var i;r===void 0&&(r=oF(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:o}=t,{target:l}=o;this.props=t,this.events=n,this.document=$o(l),this.documentListeners=new Fa(this.document),this.listeners=new Fa(r),this.windowListeners=new Fa(Ln(l)),this.initialCoordinates=(i=wp(o))!=null?i:Er,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(ir.Resize,this.handleCancel),this.windowListeners.add(ir.DragStart,L0),this.windowListeners.add(ir.VisibilityChange,this.handleCancel),this.windowListeners.add(ir.ContextMenu,L0),this.documentListeners.add(ir.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(F0(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if($0(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:i}=this.props;i(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(ir.Click,aF,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ir.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:i,props:o}=this,{onMove:l,options:{activationConstraint:u}}=o;if(!i)return;const c=(n=wp(t))!=null?n:Er,f=fc(i,c);if(!r&&u){if($0(u)){if(u.tolerance!=null&&wh(f,u.tolerance))return this.handleCancel();if(wh(f,u.distance))return this.handleStart()}if(F0(u)&&wh(f,u.tolerance))return this.handleCancel();this.handlePending(u,f);return}t.cancelable&&t.preventDefault(),l(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===ot.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const uF={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class j1 extends Em{constructor(t){const{event:n}=t,r=$o(n.target);super(t,uF,r)}}j1.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const cF={move:{name:"mousemove"},end:{name:"mouseup"}};var kp;(function(e){e[e.RightClick=2]="RightClick"})(kp||(kp={}));class dF extends Em{constructor(t){super(t,cF,$o(t.event.target))}}dF.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===kp.RightClick?!1:(r==null||r({event:n}),!0)}}];const bh={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class fF extends Em{constructor(t){super(t,bh)}static setup(){return window.addEventListener(bh.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(bh.move.name,t)};function t(){}}}fF.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var za;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(za||(za={}));var pc;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(pc||(pc={}));function hF(e){let{acceleration:t,activator:n=za.Pointer,canScroll:r,draggingRect:i,enabled:o,interval:l=5,order:u=pc.TreeOrder,pointerCoordinates:c,scrollableAncestors:f,scrollableAncestorRects:h,delta:p,threshold:y}=e;const v=mF({delta:p,disabled:!o}),[b,w]=E4(),_=k.useRef({x:0,y:0}),E=k.useRef({x:0,y:0}),j=k.useMemo(()=>{switch(n){case za.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case za.DraggableRect:return i}},[n,i,c]),C=k.useRef(null),M=k.useCallback(()=>{const R=C.current;if(!R)return;const z=_.current.x*E.current.x,F=_.current.y*E.current.y;R.scrollBy(z,F)},[]),D=k.useMemo(()=>u===pc.TreeOrder?[...f].reverse():f,[u,f]);k.useEffect(()=>{if(!o||!f.length||!j){w();return}for(const R of D){if((r==null?void 0:r(R))===!1)continue;const z=f.indexOf(R),F=h[z];if(!F)continue;const{direction:V,speed:A}=eF(R,F,j,t,y);for(const O of["x","y"])v[O][V[O]]||(A[O]=0,V[O]=0);if(A.x>0||A.y>0){w(),C.current=R,b(M,l),_.current=A,E.current=V;return}}_.current={x:0,y:0},E.current={x:0,y:0},w()},[t,M,r,w,o,l,JSON.stringify(j),JSON.stringify(v),b,f,D,h,JSON.stringify(y)])}const pF={x:{[en.Backward]:!1,[en.Forward]:!1},y:{[en.Backward]:!1,[en.Forward]:!1}};function mF(e){let{delta:t,disabled:n}=e;const r=xp(t);return fl(i=>{if(n||!r||!i)return pF;const o={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[en.Backward]:i.x[en.Backward]||o.x===-1,[en.Forward]:i.x[en.Forward]||o.x===1},y:{[en.Backward]:i.y[en.Backward]||o.y===-1,[en.Forward]:i.y[en.Forward]||o.y===1}}},[n,t,r])}function gF(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return fl(i=>{var o;return t==null?null:(o=r??i)!=null?o:null},[r,t])}function yF(e,t){return k.useMemo(()=>e.reduce((n,r)=>{const{sensor:i}=r,o=i.activators.map(l=>({eventName:l.eventName,handler:t(l.handler,r)}));return[...n,...o]},[]),[e,t])}var el;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(el||(el={}));var Sp;(function(e){e.Optimized="optimized"})(Sp||(Sp={}));const z0=new Map;function vF(e,t){let{dragging:n,dependencies:r,config:i}=t;const[o,l]=k.useState(null),{frequency:u,measure:c,strategy:f}=i,h=k.useRef(e),p=_(),y=Xa(p),v=k.useCallback(function(E){E===void 0&&(E=[]),!y.current&&l(j=>j===null?E:j.concat(E.filter(C=>!j.includes(C))))},[y]),b=k.useRef(null),w=fl(E=>{if(p&&!n)return z0;if(!E||E===z0||h.current!==e||o!=null){const j=new Map;for(let C of e){if(!C)continue;if(o&&o.length>0&&!o.includes(C.id)&&C.rect.current){j.set(C.id,C.rect.current);continue}const M=C.node.current,D=M?new Sm(c(M),M):null;C.rect.current=D,D&&j.set(C.id,D)}return j}return E},[e,o,n,p,c]);return k.useEffect(()=>{h.current=e},[e]),k.useEffect(()=>{p||v()},[n,p]),k.useEffect(()=>{o&&o.length>0&&l(null)},[JSON.stringify(o)]),k.useEffect(()=>{p||typeof u!="number"||b.current!==null||(b.current=setTimeout(()=>{v(),b.current=null},u))},[u,p,v,...r]),{droppableRects:w,measureDroppableContainers:v,measuringScheduled:o!=null};function _(){switch(f){case el.Always:return!1;case el.BeforeDragging:return n;default:return!n}}}function N1(e,t){return fl(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function xF(e,t){return N1(e,t)}function wF(e){let{callback:t,disabled:n}=e;const r=wm(t),i=k.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(r)},[r,n]);return k.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Hc(e){let{callback:t,disabled:n}=e;const r=wm(t),i=k.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(r)},[n]);return k.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function bF(e){return new Sm(Fo(e),e)}function B0(e,t,n){t===void 0&&(t=bF);const[r,i]=k.useState(null);function o(){i(c=>{if(!e)return null;if(e.isConnected===!1){var f;return(f=c??n)!=null?f:null}const h=t(e);return JSON.stringify(c)===JSON.stringify(h)?c:h})}const l=wF({callback(c){if(e)for(const f of c){const{type:h,target:p}=f;if(h==="childList"&&p instanceof HTMLElement&&p.contains(e)){o();break}}}}),u=Hc({callback:o});return Fr(()=>{o(),e?(u==null||u.observe(e),l==null||l.observe(document.body,{childList:!0,subtree:!0})):(u==null||u.disconnect(),l==null||l.disconnect())},[e]),r}function kF(e){const t=N1(e);return v1(e,t)}const U0=[];function SF(e){const t=k.useRef(e),n=fl(r=>e?r&&r!==U0&&e&&t.current&&e.parentNode===t.current.parentNode?r:km(e):U0,[e]);return k.useEffect(()=>{t.current=e},[e]),n}function EF(e){const[t,n]=k.useState(null),r=k.useRef(e),i=k.useCallback(o=>{const l=xh(o.target);l&&n(u=>u?(u.set(l,bp(l)),new Map(u)):null)},[]);return k.useEffect(()=>{const o=r.current;if(e!==o){l(o);const u=e.map(c=>{const f=xh(c);return f?(f.addEventListener("scroll",i,{passive:!0}),[f,bp(f)]):null}).filter(c=>c!=null);n(u.length?new Map(u):null),r.current=e}return()=>{l(e),l(o)};function l(u){u.forEach(c=>{const f=xh(c);f==null||f.removeEventListener("scroll",i)})}},[i,e]),k.useMemo(()=>e.length?t?Array.from(t.values()).reduce((o,l)=>ko(o,l),Er):E1(e):Er,[e,t])}function W0(e,t){t===void 0&&(t=[]);const n=k.useRef(null);return k.useEffect(()=>{n.current=null},t),k.useEffect(()=>{const r=e!==Er;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?fc(e,n.current):Er}function _F(e){k.useEffect(()=>{if(!Wc)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function CF(e,t){return k.useMemo(()=>e.reduce((n,r)=>{let{eventName:i,handler:o}=r;return n[i]=l=>{o(l,t)},n},{}),[e,t])}function T1(e){return k.useMemo(()=>e?J4(e):null,[e])}const H0=[];function jF(e,t){t===void 0&&(t=Fo);const[n]=e,r=T1(n?Ln(n):null),[i,o]=k.useState(H0);function l(){o(()=>e.length?e.map(c=>k1(c)?r:new Sm(t(c),c)):H0)}const u=Hc({callback:l});return Fr(()=>{u==null||u.disconnect(),l(),e.forEach(c=>u==null?void 0:u.observe(c))},[e]),i}function NF(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return dl(t)?t:e}function TF(e){let{measure:t}=e;const[n,r]=k.useState(null),i=k.useCallback(f=>{for(const{target:h}of f)if(dl(h)){r(p=>{const y=t(h);return p?{...p,width:y.width,height:y.height}:y});break}},[t]),o=Hc({callback:i}),l=k.useCallback(f=>{const h=NF(f);o==null||o.disconnect(),h&&(o==null||o.observe(h)),r(h?t(h):null)},[t,o]),[u,c]=dc(l);return k.useMemo(()=>({nodeRef:u,rect:n,setRef:c}),[n,u,c])}const IF=[{sensor:j1,options:{}},{sensor:C1,options:{}}],PF={current:{}},Wu={draggable:{measure:D0},droppable:{measure:D0,strategy:el.WhileDragging,frequency:Sp.Optimized},dragOverlay:{measure:Fo}};class Ba extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const AF={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ba,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:hc},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Wu,measureDroppableContainers:hc,windowRect:null,measuringScheduled:!1},RF={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:hc,draggableNodes:new Map,over:null,measureDroppableContainers:hc},Vc=k.createContext(RF),I1=k.createContext(AF);function OF(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ba}}}function MF(e,t){switch(t.type){case Yt.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Yt.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Yt.DragEnd:case Yt.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Yt.RegisterDroppable:{const{element:n}=t,{id:r}=n,i=new Ba(e.droppable.containers);return i.set(r,n),{...e,droppable:{...e.droppable,containers:i}}}case Yt.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const l=new Ba(e.droppable.containers);return l.set(n,{...o,disabled:i}),{...e,droppable:{...e.droppable,containers:l}}}case Yt.UnregisterDroppable:{const{id:n,key:r}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const o=new Ba(e.droppable.containers);return o.delete(n),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function DF(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:i}=k.useContext(Vc),o=xp(r),l=xp(n==null?void 0:n.id);return k.useEffect(()=>{if(!t&&!r&&o&&l!=null){if(!bm(o)||document.activeElement===o.target)return;const u=i.get(l);if(!u)return;const{activatorNode:c,node:f}=u;if(!c.current&&!f.current)return;requestAnimationFrame(()=>{for(const h of[c.current,f.current]){if(!h)continue;const p=j4(h);if(p){p.focus();break}}})}},[r,t,i,l,o]),null}function LF(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((i,o)=>o({transform:i,...r}),n):n}function $F(e){return k.useMemo(()=>({draggable:{...Wu.draggable,...e==null?void 0:e.draggable},droppable:{...Wu.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Wu.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function FF(e){let{activeNode:t,measure:n,initialRect:r,config:i=!0}=e;const o=k.useRef(!1),{x:l,y:u}=typeof i=="boolean"?{x:i,y:i}:i;Fr(()=>{if(!l&&!u||!t){o.current=!1;return}if(o.current||!r)return;const f=t==null?void 0:t.node.current;if(!f||f.isConnected===!1)return;const h=n(f),p=v1(h,r);if(l||(p.x=0),u||(p.y=0),o.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const y=x1(f);y&&y.scrollBy({top:p.y,left:p.x})}},[t,l,u,r,n])}const P1=k.createContext({...Er,scaleX:1,scaleY:1});var Ti;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Ti||(Ti={}));const zF=k.memo(function(t){var n,r,i,o;let{id:l,accessibility:u,autoScroll:c=!0,children:f,sensors:h=IF,collisionDetection:p=W4,measuring:y,modifiers:v,...b}=t;const w=k.useReducer(MF,void 0,OF),[_,E]=w,[j,C]=R4(),[M,D]=k.useState(Ti.Uninitialized),R=M===Ti.Initialized,{draggable:{active:z,nodes:F,translate:V},droppable:{containers:A}}=_,O=z!=null?F.get(z):null,Q=k.useRef({initial:null,translated:null}),H=k.useMemo(()=>{var yt;return z!=null?{id:z,data:(yt=O==null?void 0:O.data)!=null?yt:PF,rect:Q}:null},[z,O]),q=k.useRef(null),[$,J]=k.useState(null),[ie,L]=k.useState(null),ne=Xa(b,Object.values(b)),T=hl("DndDescribedBy",l),U=k.useMemo(()=>A.getEnabled(),[A]),Z=$F(y),{droppableRects:I,measureDroppableContainers:ye,measuringScheduled:me}=vF(U,{dragging:R,dependencies:[V.x,V.y],config:Z.droppable}),pe=gF(F,z),fe=k.useMemo(()=>ie?wp(ie):null,[ie]),W=yn(),te=xF(pe,Z.draggable.measure);FF({activeNode:z!=null?F.get(z):null,config:W.layoutShiftCompensation,initialRect:te,measure:Z.draggable.measure});const re=B0(pe,Z.draggable.measure,te),ce=B0(pe?pe.parentElement:null),he=k.useRef({activatorEvent:null,active:null,activeNode:pe,collisionRect:null,collisions:null,droppableRects:I,draggableNodes:F,draggingNode:null,draggingNodeRect:null,droppableContainers:A,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),_e=A.getNodeFor((n=he.current.over)==null?void 0:n.id),Ie=TF({measure:Z.dragOverlay.measure}),We=(r=Ie.nodeRef.current)!=null?r:pe,Qe=R?(i=Ie.rect)!=null?i:re:null,ut=!!(Ie.nodeRef.current&&Ie.rect),Tt=kF(ut?null:re),K=T1(We?Ln(We):null),ae=SF(R?_e??pe:null),de=jF(ae),Ee=LF(v,{transform:{x:V.x-Tt.x,y:V.y-Tt.y,scaleX:1,scaleY:1},activatorEvent:ie,active:H,activeNodeRect:re,containerNodeRect:ce,draggingNodeRect:Qe,over:he.current.over,overlayNodeRect:Ie.rect,scrollableAncestors:ae,scrollableAncestorRects:de,windowRect:K}),we=fe?ko(fe,V):null,P=EF(ae),ee=W0(P),G=W0(P,[re]),se=ko(Ee,ee),be=Qe?q4(Qe,Ee):null,Oe=H&&be?p({active:H,collisionRect:be,droppableRects:I,droppableContainers:U,pointerCoordinates:we}):null,Be=z4(Oe,"id"),[Ce,dt]=k.useState(null),ct=ut?Ee:ko(Ee,G),Ke=H4(ct,(o=Ce==null?void 0:Ce.rect)!=null?o:null,re),bt=k.useRef(null),nt=k.useCallback((yt,Ge)=>{let{sensor:st,options:rt}=Ge;if(q.current==null)return;const kt=F.get(q.current);if(!kt)return;const rn=yt.nativeEvent,_n=new st({active:q.current,activeNode:kt,event:rn,options:rt,context:he,onAbort(_t){if(!F.get(_t))return;const{onDragAbort:sn}=ne.current,ar={id:_t};sn==null||sn(ar),j({type:"onDragAbort",event:ar})},onPending(_t,Jn,sn,ar){if(!F.get(_t))return;const{onDragPending:_r}=ne.current,$n={id:_t,constraint:Jn,initialCoordinates:sn,offset:ar};_r==null||_r($n),j({type:"onDragPending",event:$n})},onStart(_t){const Jn=q.current;if(Jn==null)return;const sn=F.get(Jn);if(!sn)return;const{onDragStart:ar}=ne.current,lr={activatorEvent:rn,active:{id:Jn,data:sn.data,rect:Q}};qn.unstable_batchedUpdates(()=>{ar==null||ar(lr),D(Ti.Initializing),E({type:Yt.DragStart,initialCoordinates:_t,active:Jn}),j({type:"onDragStart",event:lr}),J(bt.current),L(rn)})},onMove(_t){E({type:Yt.DragMove,coordinates:_t})},onEnd:Wr(Yt.DragEnd),onCancel:Wr(Yt.DragCancel)});bt.current=_n;function Wr(_t){return async function(){const{active:sn,collisions:ar,over:lr,scrollAdjustedTranslate:_r}=he.current;let $n=null;if(sn&&_r){const{cancelDrop:Hr}=ne.current;$n={activatorEvent:rn,active:sn,collisions:ar,delta:_r,over:lr},_t===Yt.DragEnd&&typeof Hr=="function"&&await Promise.resolve(Hr($n))&&(_t=Yt.DragCancel)}q.current=null,qn.unstable_batchedUpdates(()=>{E({type:_t}),D(Ti.Uninitialized),dt(null),J(null),L(null),bt.current=null;const Hr=_t===Yt.DragEnd?"onDragEnd":"onDragCancel";if($n){const zo=ne.current[Hr];zo==null||zo($n),j({type:Hr,event:$n})}})}}},[F]),Wt=k.useCallback((yt,Ge)=>(st,rt)=>{const kt=st.nativeEvent,rn=F.get(rt);if(q.current!==null||!rn||kt.dndKit||kt.defaultPrevented)return;const _n={active:rn};yt(st,Ge.options,_n)===!0&&(kt.dndKit={capturedBy:Ge.sensor},q.current=rt,nt(st,Ge))},[F,nt]),It=yF(h,Wt);_F(h),Fr(()=>{re&&M===Ti.Initializing&&D(Ti.Initialized)},[re,M]),k.useEffect(()=>{const{onDragMove:yt}=ne.current,{active:Ge,activatorEvent:st,collisions:rt,over:kt}=he.current;if(!Ge||!st)return;const rn={active:Ge,activatorEvent:st,collisions:rt,delta:{x:se.x,y:se.y},over:kt};qn.unstable_batchedUpdates(()=>{yt==null||yt(rn),j({type:"onDragMove",event:rn})})},[se.x,se.y]),k.useEffect(()=>{const{active:yt,activatorEvent:Ge,collisions:st,droppableContainers:rt,scrollAdjustedTranslate:kt}=he.current;if(!yt||q.current==null||!Ge||!kt)return;const{onDragOver:rn}=ne.current,_n=rt.get(Be),Wr=_n&&_n.rect.current?{id:_n.id,rect:_n.rect.current,data:_n.data,disabled:_n.disabled}:null,_t={active:yt,activatorEvent:Ge,collisions:st,delta:{x:kt.x,y:kt.y},over:Wr};qn.unstable_batchedUpdates(()=>{dt(Wr),rn==null||rn(_t),j({type:"onDragOver",event:_t})})},[Be]),Fr(()=>{he.current={activatorEvent:ie,active:H,activeNode:pe,collisionRect:be,collisions:Oe,droppableRects:I,draggableNodes:F,draggingNode:We,draggingNodeRect:Qe,droppableContainers:A,over:Ce,scrollableAncestors:ae,scrollAdjustedTranslate:se},Q.current={initial:Qe,translated:be}},[H,pe,Oe,be,F,We,Qe,I,A,Ce,ae,se]),hF({...W,delta:V,draggingRect:be,pointerCoordinates:we,scrollableAncestors:ae,scrollableAncestorRects:de});const gn=k.useMemo(()=>({active:H,activeNode:pe,activeNodeRect:re,activatorEvent:ie,collisions:Oe,containerNodeRect:ce,dragOverlay:Ie,draggableNodes:F,droppableContainers:A,droppableRects:I,over:Ce,measureDroppableContainers:ye,scrollableAncestors:ae,scrollableAncestorRects:de,measuringConfiguration:Z,measuringScheduled:me,windowRect:K}),[H,pe,re,ie,Oe,ce,Ie,F,A,I,Ce,ye,ae,de,Z,me,K]),at=k.useMemo(()=>({activatorEvent:ie,activators:It,active:H,activeNodeRect:re,ariaDescribedById:{draggable:T},dispatch:E,draggableNodes:F,over:Ce,measureDroppableContainers:ye}),[ie,It,H,re,E,T,F,Ce,ye]);return Ne.createElement(y1.Provider,{value:C},Ne.createElement(Vc.Provider,{value:at},Ne.createElement(I1.Provider,{value:gn},Ne.createElement(P1.Provider,{value:Ke},f)),Ne.createElement(DF,{disabled:(u==null?void 0:u.restoreFocus)===!1})),Ne.createElement(D4,{...u,hiddenTextDescribedById:T}));function yn(){const yt=($==null?void 0:$.autoScrollEnabled)===!1,Ge=typeof c=="object"?c.enabled===!1:c===!1,st=R&&!yt&&!Ge;return typeof c=="object"?{...c,enabled:st}:{enabled:st}}}),BF=k.createContext(null),V0="button",UF="Draggable";function WF(e){let{id:t,data:n,disabled:r=!1,attributes:i}=e;const o=hl(UF),{activators:l,activatorEvent:u,active:c,activeNodeRect:f,ariaDescribedById:h,draggableNodes:p,over:y}=k.useContext(Vc),{role:v=V0,roleDescription:b="draggable",tabIndex:w=0}=i??{},_=(c==null?void 0:c.id)===t,E=k.useContext(_?P1:BF),[j,C]=dc(),[M,D]=dc(),R=CF(l,t),z=Xa(n);Fr(()=>(p.set(t,{id:t,key:o,node:j,activatorNode:M,data:z}),()=>{const V=p.get(t);V&&V.key===o&&p.delete(t)}),[p,t]);const F=k.useMemo(()=>({role:v,tabIndex:w,"aria-disabled":r,"aria-pressed":_&&v===V0?!0:void 0,"aria-roledescription":b,"aria-describedby":h.draggable}),[r,v,w,_,b,h.draggable]);return{active:c,activatorEvent:u,activeNodeRect:f,attributes:F,isDragging:_,listeners:r?void 0:R,node:j,over:y,setNodeRef:C,setActivatorNodeRef:D,transform:E}}function HF(){return k.useContext(I1)}const VF="Droppable",qF={timeout:25};function YF(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:i}=e;const o=hl(VF),{active:l,dispatch:u,over:c,measureDroppableContainers:f}=k.useContext(Vc),h=k.useRef({disabled:n}),p=k.useRef(!1),y=k.useRef(null),v=k.useRef(null),{disabled:b,updateMeasurementsFor:w,timeout:_}={...qF,...i},E=Xa(w??r),j=k.useCallback(()=>{if(!p.current){p.current=!0;return}v.current!=null&&clearTimeout(v.current),v.current=setTimeout(()=>{f(Array.isArray(E.current)?E.current:[E.current]),v.current=null},_)},[_]),C=Hc({callback:j,disabled:b||!l}),M=k.useCallback((F,V)=>{C&&(V&&(C.unobserve(V),p.current=!1),F&&C.observe(F))},[C]),[D,R]=dc(M),z=Xa(t);return k.useEffect(()=>{!C||!D.current||(C.disconnect(),p.current=!1,C.observe(D.current))},[D,C]),k.useEffect(()=>(u({type:Yt.RegisterDroppable,element:{id:r,key:o,disabled:n,node:D,rect:y,data:z}}),()=>u({type:Yt.UnregisterDroppable,key:o,id:r})),[r]),k.useEffect(()=>{n!==h.current.disabled&&(u({type:Yt.SetDroppableDisabled,id:r,key:o,disabled:n}),h.current.disabled=n)},[r,o,n,u]),{active:l,rect:y,isOver:(c==null?void 0:c.id)===r,node:D,over:c,setNodeRef:R}}function A1(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function GF(e,t){return e.reduce((n,r,i)=>{const o=t.get(r);return o&&(n[i]=o),n},Array(e.length))}function Ou(e){return e!==null&&e>=0}function KF(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function JF(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const R1=e=>{let{rects:t,activeIndex:n,overIndex:r,index:i}=e;const o=A1(t,r,n),l=t[i],u=o[i];return!u||!l?null:{x:u.left-l.left,y:u.top-l.top,scaleX:u.width/l.width,scaleY:u.height/l.height}},Mu={scaleX:1,scaleY:1},QF=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:i,rects:o,overIndex:l}=e;const u=(t=o[n])!=null?t:r;if(!u)return null;if(i===n){const f=o[l];return f?{x:0,y:n<l?f.top+f.height-(u.top+u.height):f.top-u.top,...Mu}:null}const c=XF(o,i,n);return i>n&&i<=l?{x:0,y:-u.height-c,...Mu}:i<n&&i>=l?{x:0,y:u.height+c,...Mu}:{x:0,y:0,...Mu}};function XF(e,t,n){const r=e[t],i=e[t-1],o=e[t+1];return r?n<t?i?r.top-(i.top+i.height):o?o.top-(r.top+r.height):0:o?o.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const O1="Sortable",M1=Ne.createContext({activeIndex:-1,containerId:O1,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:R1,disabled:{draggable:!1,droppable:!1}});function ZF(e){let{children:t,id:n,items:r,strategy:i=R1,disabled:o=!1}=e;const{active:l,dragOverlay:u,droppableRects:c,over:f,measureDroppableContainers:h}=HF(),p=hl(O1,n),y=u.rect!==null,v=k.useMemo(()=>r.map(R=>typeof R=="object"&&"id"in R?R.id:R),[r]),b=l!=null,w=l?v.indexOf(l.id):-1,_=f?v.indexOf(f.id):-1,E=k.useRef(v),j=!KF(v,E.current),C=_!==-1&&w===-1||j,M=JF(o);Fr(()=>{j&&b&&h(v)},[j,v,b,h]),k.useEffect(()=>{E.current=v},[v]);const D=k.useMemo(()=>({activeIndex:w,containerId:p,disabled:M,disableTransforms:C,items:v,overIndex:_,useDragOverlay:y,sortedRects:GF(v,c),strategy:i}),[w,p,M.draggable,M.droppable,C,v,_,c,y,i]);return Ne.createElement(M1.Provider,{value:D},t)}const e3=e=>{let{id:t,items:n,activeIndex:r,overIndex:i}=e;return A1(n,r,i).indexOf(t)},t3=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:i,items:o,newIndex:l,previousItems:u,previousContainerId:c,transition:f}=e;return!f||!r||u!==o&&i===l?!1:n?!0:l!==i&&t===c},n3={duration:200,easing:"ease"},D1="transform",r3=Za.Transition.toString({property:D1,duration:0,easing:"linear"}),i3={roleDescription:"sortable"};function s3(e){let{disabled:t,index:n,node:r,rect:i}=e;const[o,l]=k.useState(null),u=k.useRef(n);return Fr(()=>{if(!t&&n!==u.current&&r.current){const c=i.current;if(c){const f=Fo(r.current,{ignoreTransform:!0}),h={x:c.left-f.left,y:c.top-f.top,scaleX:c.width/f.width,scaleY:c.height/f.height};(h.x||h.y)&&l(h)}}n!==u.current&&(u.current=n)},[t,n,r,i]),k.useEffect(()=>{o&&l(null)},[o]),o}function o3(e){let{animateLayoutChanges:t=t3,attributes:n,disabled:r,data:i,getNewIndex:o=e3,id:l,strategy:u,resizeObserverConfig:c,transition:f=n3}=e;const{items:h,containerId:p,activeIndex:y,disabled:v,disableTransforms:b,sortedRects:w,overIndex:_,useDragOverlay:E,strategy:j}=k.useContext(M1),C=a3(r,v),M=h.indexOf(l),D=k.useMemo(()=>({sortable:{containerId:p,index:M,items:h},...i}),[p,i,M,h]),R=k.useMemo(()=>h.slice(h.indexOf(l)),[h,l]),{rect:z,node:F,isOver:V,setNodeRef:A}=YF({id:l,data:D,disabled:C.droppable,resizeObserverConfig:{updateMeasurementsFor:R,...c}}),{active:O,activatorEvent:Q,activeNodeRect:H,attributes:q,setNodeRef:$,listeners:J,isDragging:ie,over:L,setActivatorNodeRef:ne,transform:T}=WF({id:l,data:D,attributes:{...i3,...n},disabled:C.draggable}),U=S4(A,$),Z=!!O,I=Z&&!b&&Ou(y)&&Ou(_),ye=!E&&ie,me=ye&&I?T:null,fe=I?me??(u??j)({rects:w,activeNodeRect:H,activeIndex:y,overIndex:_,index:M}):null,W=Ou(y)&&Ou(_)?o({id:l,items:h,activeIndex:y,overIndex:_}):M,te=O==null?void 0:O.id,re=k.useRef({activeId:te,items:h,newIndex:W,containerId:p}),ce=h!==re.current.items,he=t({active:O,containerId:p,isDragging:ie,isSorting:Z,id:l,index:M,items:h,newIndex:re.current.newIndex,previousItems:re.current.items,previousContainerId:re.current.containerId,transition:f,wasDragging:re.current.activeId!=null}),_e=s3({disabled:!he,index:M,node:F,rect:z});return k.useEffect(()=>{Z&&re.current.newIndex!==W&&(re.current.newIndex=W),p!==re.current.containerId&&(re.current.containerId=p),h!==re.current.items&&(re.current.items=h)},[Z,W,p,h]),k.useEffect(()=>{if(te===re.current.activeId)return;if(te&&!re.current.activeId){re.current.activeId=te;return}const We=setTimeout(()=>{re.current.activeId=te},50);return()=>clearTimeout(We)},[te]),{active:O,activeIndex:y,attributes:q,data:D,rect:z,index:M,newIndex:W,items:h,isOver:V,isSorting:Z,isDragging:ie,listeners:J,node:F,overIndex:_,over:L,setNodeRef:U,setActivatorNodeRef:ne,setDroppableNodeRef:A,setDraggableNodeRef:$,transform:_e??fe,transition:Ie()};function Ie(){if(_e||ce&&re.current.newIndex===M)return r3;if(!(ye&&!bm(Q)||!f)&&(Z||he))return Za.Transition.toString({...f,property:D1})}}function a3(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}ot.Down,ot.Right,ot.Up,ot.Left;function mc(e,t="18:30"){const n=(e??t).trim(),r=/^(\d{1,2}):(\d{2})$/.exec(n);if(!r)return mc(t,t);const i=Number(r[1]),o=Number(r[2]);return Number.isNaN(i)||Number.isNaN(o)?mc(t,t):(i*60+o)%1440}function Ep(e){const t=(e%1440+1440)%1440,n=Math.floor(t/60),r=t%60,i=n.toString().padStart(2,"0"),o=r.toString().padStart(2,"0");return`${i}:${o}`}const q0={present:"Presente",absent:"Ausente",pending:"Pendiente"};function L1({work:e,objective:t,parentChain:n,onSelect:r}){const i=(e.subtitle??"").trim();return g.jsxs("button",{type:"button",onClick:()=>r(e.id),className:"flex w-full items-center justify-between gap-4 rounded-xl border border-white/10 bg-white/5 px-4 py-3 text-left transition hover:border-white/30",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm font-semibold text-white",children:e.name}),i?g.jsx("p",{className:"text-xs text-white/60",children:i}):null,g.jsxs("p",{className:"text-xs text-white/50",children:[e.estimatedMinutes," min"]}),n?g.jsxs("p",{className:"text-[11px] text-white/40",children:["Deriva de ",n]}):null]}),g.jsx($i,{objective:t,size:"sm"})]})}function l3({item:e,work:t,objective:n,expanded:r,isPersonal:i,onToggleExpanded:o,onRemove:l,onDuplicate:u,onUpdateDetails:c,onReplace:f,startTimeLabel:h,durationMinutes:p,works:y,objectiveMap:v,workPathById:b}){const{attributes:w,listeners:_,setNodeRef:E,transform:j,transition:C,isDragging:M}=o3({id:e.id}),[D,R]=k.useState(!1),[z,F]=k.useState(""),V={transform:Za.Transform.toString(j),transition:C},O=(e.focusLabel??"").trim(),Q=O.length>0,H=e.customDescriptionMarkdown??(t==null?void 0:t.descriptionMarkdown)??"",q=H.trim().length>0,$=((t==null?void 0:t.videoUrls)??[]).map(W=>W.trim()).filter(Boolean),J=$.length>0,ie=q||J,ne=(t!=null&&t.id?b.get(t.id)??(t==null?void 0:t.name)??"":"").split("  ").slice(0,-1).join("  "),T=((t==null?void 0:t.subtitle)??"").trim(),U=W=>{const te=W.target.value;c(e.id,{focusLabel:te===""?void 0:te})},Z=z.trim().toLowerCase(),I=k.useMemo(()=>y.filter(W=>W.id!==(t==null?void 0:t.id)),[y,t==null?void 0:t.id]),ye=k.useMemo(()=>Z?I.filter(W=>{var Ie;const te=(W.subtitle??"").toLowerCase(),re=((Ie=v.get(W.objectiveId))==null?void 0:Ie.name.toLowerCase())??"",ce=(b.get(W.id)??"").toLowerCase(),he=(W.descriptionMarkdown??"").toLowerCase(),_e=Z;return W.name.toLowerCase().includes(_e)||te.includes(_e)||he.includes(_e)||re.includes(_e)||ce.includes(_e)}):[],[I,Z,v,b]);k.useEffect(()=>{D||F("")},[D]);const me=I.length>0,pe=e.effort??6,fe=e.result;return g.jsxs("article",{ref:E,style:V,className:De("relative flex flex-col gap-3 rounded-3xl border border-white/10 bg-white/10 p-4 shadow-lg shadow-black/20 transition",M&&"ring-2 ring-sky-400/70"),children:[n?g.jsx("div",{className:"absolute inset-0 -z-[1] rounded-3xl opacity-30 blur-xl",style:{backgroundColor:n.colorHex}}):null,g.jsxs("div",{className:"flex items-start gap-4",children:[g.jsx("button",{type:"button",className:"mt-1 flex h-10 w-10 items-center justify-center rounded-full border border-white/20 text-white/70",..._,...w,"aria-label":"Reordenar trabajo",children:""}),g.jsx("div",{className:"flex-1 space-y-1",children:g.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsxs("p",{className:"text-lg font-semibold text-white",children:[(t==null?void 0:t.name)??"Trabajo eliminado",Q?g.jsxs("span",{className:"ml-2 text-sky-300",children:[" ",O]}):null]}),T?g.jsx("p",{className:"text-sm text-white/70",children:T}):null,ne?g.jsxs("p",{className:"text-xs text-white/50",children:["Deriva de ",ne]}):null,g.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm text-white/60",children:[g.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:h}),g.jsx("span",{className:"text-white/30",children:""}),g.jsxs("span",{children:[p," min"]})]}),g.jsxs("div",{className:"max-w-md",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Foco dentro del trabajo"}),g.jsx("input",{type:"text",value:e.focusLabel??"",onChange:U,placeholder:"Ej. 1/7  Apertura",className:"input-field mt-1"})]}),i?g.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-3",children:[g.jsx("div",{className:"flex flex-wrap items-center gap-2",children:["ok","doubt","fail"].map(W=>g.jsx("button",{type:"button",onClick:()=>c(e.id,{result:W,completed:!0}),className:De("rounded-full border px-3 py-1 text-xs font-semibold transition",fe===W?W==="ok"?"border-emerald-500/60 bg-emerald-500/20 text-emerald-200":W==="doubt"?"border-amber-400/50 bg-amber-500/15 text-amber-200":"border-rose-500/60 bg-rose-500/15 text-rose-200":"border-white/10 text-white/60 hover:border-white/30 hover:text-white"),children:W==="ok"?"OK":W==="doubt"?"Dudosa":"Fallo"},W))}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"RPE"}),g.jsx("input",{type:"number",min:1,max:10,value:pe,onChange:W=>{const te=Number(W.target.value),re=Number.isFinite(te)?Math.min(Math.max(te,1),10):6;c(e.id,{effort:re,completed:!0})},className:"input-field w-20 text-center"})]})]}):null]}),g.jsxs("div",{className:"flex items-center gap-2",children:[ie?g.jsxs("button",{type:"button",onClick:()=>o(e.id),className:De("inline-flex items-center gap-2 rounded-full border border-white/20 px-3 py-1 text-xs font-semibold text-white/70 transition hover:border-white/40 hover:text-white",r&&"border-white/40 text-white"),children:[g.jsx("span",{className:De("transition-transform",r?"rotate-90":"rotate-0"),children:""}),r?"Ocultar detalles":"Ver detalles"]}):null,g.jsx($i,{objective:n,size:"sm"})]})]})}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{type:"button",onClick:()=>R(W=>!W),disabled:!me,className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-white/20 text-white/70 transition hover:border-sky-400/60 hover:text-white disabled:opacity-40","aria-label":"Intercambiar trabajo por otro de la misma categora","aria-expanded":D,children:""}),g.jsx("button",{type:"button",onClick:u,className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-white/20 text-white/70 transition hover:border-sky-400/60 hover:text-white","aria-label":"Duplicar trabajo en la sesin",children:"x2"}),g.jsx("button",{type:"button",onClick:l,className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-rose-500/40 text-rose-300 hover:border-rose-400 hover:text-rose-200","aria-label":"Eliminar trabajo de la sesin",children:""})]})]}),D?g.jsx("div",{className:"mt-3 space-y-3 rounded-2xl border border-white/10 bg-slate-950/70 p-3",children:g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Buscar en el catlogo"}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:"search",className:"input-field",placeholder:"Buscar en el catlogo",value:z,onChange:W=>F(W.target.value)}),z?g.jsx("div",{className:"absolute top-14 z-10 max-h-60 w-full overflow-y-auto rounded-2xl border border-white/10 bg-slate-900/95 p-2 shadow-xl",children:ye.length===0?g.jsx("p",{className:"p-3 text-sm text-white/50",children:"Sin resultados. Ajusta la bsqueda."}):g.jsx("div",{className:"space-y-2",children:ye.map(W=>{const re=(b.get(W.id)??W.name).split("  ").slice(0,-1).join("  ");return g.jsx(L1,{work:W,objective:v.get(W.objectiveId),parentChain:re,onSelect:ce=>{f(ce),R(!1),F("")}},W.id)})})}):null]}),z?null:g.jsx("p",{className:"rounded-2xl border border-dashed border-white/15 px-3 py-2 text-xs text-white/60",children:"Escribe para encontrar un reemplazo. Se mostrarn resultados coincidentes del catlogo."})]})}):null,ie&&r?g.jsxs("div",{className:"grid gap-3 rounded-2xl border border-white/10 bg-slate-950/60 p-4",children:[q?g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Descripcin"}),g.jsx("div",{className:"rounded-2xl border border-white/10 bg-slate-950/70 p-3",children:g.jsx(ws,{content:H,enableWorkLinks:!0})})]}):null,J?g.jsxs("div",{className:"space-y-2",children:[g.jsx("p",{className:"text-xs uppercase tracking-wide text-white/40",children:"Vdeos de referencia"}),g.jsx("div",{className:"flex flex-wrap gap-2",children:$.map(W=>g.jsxs("a",{href:W,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-full border border-white/15 bg-white/5 px-3 py-1 text-xs font-medium text-white/80 transition hover:border-white/30 hover:text-white",children:[g.jsx("span",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-red-500/80 text-white shadow shadow-red-500/40",children:""}),"Ver vdeo"]},W))})]}):null]}):null,g.jsx("span",{className:"absolute -left-4 top-4 flex h-8 w-8 items-center justify-center rounded-full border border-white/20 bg-slate-950/90 text-xs font-semibold text-white/60",children:e.order+1})]})}function $1({session:e,works:t,objectives:n,assistants:r,onDateChange:i}){const o=je(O=>O.updateSession),l=je(O=>O.addWorkToSession),u=je(O=>O.duplicateSessionWork),c=je(O=>O.removeWorkFromSession),f=je(O=>O.reorderSessionWork),h=je(O=>O.updateSessionWorkDetails),p=je(O=>O.replaceSessionWork),y=je(O=>O.setAttendanceStatus),v=e.kind==="personal",[b,w]=k.useState(""),[_,E]=k.useState(new Set),j=k.useMemo(()=>new Map(n.map(O=>[O.id,O])),[n]),C=k.useMemo(()=>new Map(t.map(O=>[O.id,O])),[t]),M=k.useMemo(()=>{const O=new Map,Q=(H,q)=>{if(O.has(H))return O.get(H);const $=C.get(H);if(!$)return"";const J=$.parentWorkId;if(!J||q.has(H))return O.set(H,$.name),$.name;q.add(H);const ie=Q(J,q);q.delete(H);const L=ie?`${ie}  ${$.name}`:$.name;return O.set(H,L),L};return t.forEach(H=>Q(H.id,new Set)),O},[t,C]),D=k.useMemo(()=>{if(!b)return t;const O=b.toLowerCase();return t.filter(Q=>{const H=j.get(Q.objectiveId),q=M.get(Q.id)??"";return Q.name.toLowerCase().includes(O)||Q.descriptionMarkdown.toLowerCase().includes(O)||(H==null?void 0:H.name.toLowerCase().includes(O))||q.toLowerCase().includes(O)})},[t,b,j,M]),R=k.useCallback(O=>{const Q=M.get(O);if(!Q)return"";const H=Q.split("  ");return H.pop(),H.join("  ")},[M]),z=O=>{E(Q=>{const H=new Set(Q);return H.has(O)?H.delete(O):H.add(O),H})},F=O=>{l(e.id,{workId:O}),w("")},V=O=>{const{active:Q,over:H}=O;if(!H||Q.id===H.id)return;const q=e.workItems.findIndex(J=>J.id===Q.id),$=e.workItems.findIndex(J=>J.id===H.id);q===-1||$===-1||f(e.id,q,$)},A=O=>Q=>{const H=Q.target.value;o(e.id,{[O]:H}),O==="date"&&i&&i(H)};return g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"grid gap-4 rounded-3xl border border-white/10 bg-white/5 p-6",children:[g.jsxs("div",{className:"grid gap-2 sm:grid-cols-3",children:[g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Ttulo"}),g.jsx("input",{type:"text",className:"input-field",value:e.title,onChange:A("title"),placeholder:"Nombre de la sesin"})]}),g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Fecha"}),g.jsx("input",{type:"date",className:"input-field",value:e.date,onChange:A("date")})]}),g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Hora de inicio"}),g.jsx("input",{type:"time",className:"input-field",value:e.startTime??"18:30",onChange:A("startTime")})]})]}),g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Descripcin"}),g.jsx("textarea",{className:"input-field min-h-[120px]",value:e.description??"",onChange:A("description"),placeholder:"Contexto general, objetivos o recordatorios"})]}),g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Notas privadas"}),g.jsx("textarea",{className:"input-field min-h-[100px]",value:e.notes??"",onChange:A("notes"),placeholder:"Notas para ti o recordatorios de material"})]})]}),g.jsxs("section",{className:"space-y-4",children:[g.jsxs("header",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-semibold text-white",children:"Trabajos en la sesin"}),g.jsx("p",{className:"text-sm text-white/60",children:"Arrastra para reorganizar, pulsa  para ajustar detalles."})]}),g.jsxs("div",{className:"relative w-full sm:w-72",children:[g.jsx("input",{type:"search",className:"input-field",value:b,onChange:O=>w(O.target.value),placeholder:"Buscar en catlogo"}),b&&g.jsx("div",{className:"absolute top-12 z-10 max-h-72 w-full overflow-y-auto rounded-2xl border border-white/10 bg-slate-900/95 p-2 shadow-xl",children:D.length===0?g.jsx("p",{className:"p-4 text-sm text-white/50",children:"Sin resultados. Revisa el catlogo."}):g.jsx("div",{className:"space-y-2",children:D.map(O=>g.jsx(L1,{work:O,objective:j.get(O.objectiveId),parentChain:R(O.id),onSelect:F},O.id))})})]})]}),g.jsx("div",{className:"space-y-4",children:g.jsx(zF,{collisionDetection:B4,onDragEnd:V,children:g.jsx(ZF,{items:e.workItems.map(O=>O.id),strategy:QF,children:g.jsx("div",{className:"space-y-5",children:e.workItems.length===0?g.jsx("div",{className:"rounded-3xl border border-dashed border-white/20 p-10 text-center text-white/50",children:"Aade trabajos desde el catlogo con el buscador superior."}):(()=>{let O=0;const Q=mc(e.startTime,"18:30");return e.workItems.map(H=>{const q=C.get(H.workId),$=q?j.get(q.objectiveId):void 0,J=H.customDurationMinutes??(q==null?void 0:q.estimatedMinutes)??0,ie=Ep(Q+O);return O+=J,g.jsx(l3,{item:H,work:q,objective:$,expanded:_.has(H.id),isPersonal:v,onToggleExpanded:z,onRemove:()=>c(e.id,H.id),onDuplicate:()=>u(e.id,H.id),onUpdateDetails:(L,ne)=>h(e.id,L,ne),onReplace:L=>p(e.id,H.id,L),startTimeLabel:ie,durationMinutes:J,works:t,objectiveMap:j,workPathById:M},H.id)})})()})})})})]}),v?null:g.jsxs("section",{className:"space-y-4",children:[g.jsx("header",{className:"flex flex-col gap-1 sm:flex-row sm:items-baseline sm:justify-between",children:g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-semibold text-white",children:"Previsin de asistencia"}),g.jsx("p",{className:"text-sm text-white/60",children:"Indica quin esperas que asista. La asistencia real se marca durante la sesin desde la Home."})]})}),g.jsx("div",{className:"space-y-2 rounded-3xl border border-white/10 bg-white/5 p-4",children:r.length===0?g.jsx("p",{className:"text-sm text-white/60",children:"An no tienes asistentes definidos. Adelos desde la seccin correspondiente para empezar a registrar asistencia."}):r.map(O=>{const Q=e.attendance.find($=>$.assistantId===O.id),H=(Q==null?void 0:Q.status)??"pending",q=Q==null?void 0:Q.actualStatus;return g.jsxs("div",{className:"flex flex-col gap-2 rounded-2xl border border-white/10 bg-slate-950/60 p-3 sm:flex-row sm:items-center sm:justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm font-semibold text-white",children:O.name}),O.notes?g.jsx("p",{className:"text-xs text-white/50",children:O.notes}):null,q?g.jsxs("p",{className:"text-xs text-white/40",children:["ltimo registro real: ",q0[q]]}):null]}),g.jsx("div",{className:"flex items-center gap-2",children:["present","absent","pending"].map($=>g.jsx("button",{type:"button",onClick:()=>y(e.id,O.id,$),className:De("rounded-full px-3 py-1 text-xs font-semibold transition",H===$?$==="present"?"border border-emerald-500/60 bg-emerald-500/20 text-emerald-200":$==="absent"?"border border-rose-500/60 bg-rose-500/20 text-rose-200":"border border-white/30 bg-white/10 text-white":"border border-white/10 text-white/60 hover:border-white/30 hover:text-white"),children:q0[$]},$))})]},O.id)})})]})]})}function u3(e){const t=(e.day()+6)%7;return e.subtract(t,"day")}function c3(e){const t=u3(e.startOf("month"));return Array.from({length:6},(n,r)=>Array.from({length:7},(i,o)=>t.add(r*7+o,"day")))}function Du(e,t){return qe(e).format("YYYY-MM-DD")===qe(t).format("YYYY-MM-DD")}qe.locale("es");const d3={present:"Presente",absent:"Ausente",pending:"Pendiente"},f3={present:"border border-emerald-500/40 bg-emerald-500/10 text-emerald-100",absent:"border border-rose-500/40 bg-rose-500/10 text-rose-100",pending:"border border-white/20 bg-white/10 text-white/70"},h3=["present","absent"],p3={present:"Han venido",absent:"Faltan"},m3={present:"border border-emerald-500/60 bg-emerald-500/15 text-emerald-100 shadow shadow-emerald-500/15",absent:"border border-rose-500/60 bg-rose-500/10 text-rose-100 shadow shadow-rose-500/10"},g3="group inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-400/30 sm:text-sm",y3="border-emerald-500/60 bg-emerald-500/15 text-emerald-100 shadow-sm shadow-emerald-500/20 hover:border-emerald-400 hover:bg-emerald-500/20",v3="border-white/15 bg-white/5 text-white/60 hover:border-white/40 hover:text-white",x3="flex h-6 w-6 items-center justify-center rounded-full border text-[12px] transition sm:h-7 sm:w-7",w3="border-emerald-400 bg-emerald-400/20 text-emerald-100 shadow shadow-emerald-500/25",b3="border-white/25 text-white/40 group-hover:border-white/50 group-hover:text-white/80",k3=[];function S3(e){return qe(e).locale("es").format("dddd, D [de] MMMM")}function E3(e){return qe(e).format("MMMM YYYY")}function Y0({mode:e,onChange:t}){return g.jsxs("div",{className:"flex items-center gap-2 rounded-full border border-white/10 bg-white/5 p-1",children:[g.jsx("button",{type:"button",className:De("rounded-full px-4 py-2 text-sm font-semibold transition",e==="view"?"bg-white text-slate-900":"text-white/70 hover:text-white"),onClick:()=>{e!=="view"&&t("view")},children:"Vista"}),g.jsx("button",{type:"button",className:De("rounded-full px-4 py-2 text-sm font-semibold transition",e==="edit"?"bg-white text-slate-900":"text-white/70 hover:text-white"),onClick:()=>{e!=="edit"&&t("edit")},children:"Editar"})]})}function _3({session:e,objectives:t,works:n,isActive:r,onSelect:i,onDuplicate:o,onDelete:l}){const u=k.useMemo(()=>new Map(t.map(p=>[p.id,p])),[t]),c=k.useMemo(()=>new Map(n.map(p=>[p.id,p])),[n]),f=k.useMemo(()=>{const p=e.workItems[0];if(!p)return;const y=c.get(p.workId);if(y)return u.get(y.objectiveId)},[e.workItems,c,u]),h=e.workItems.reduce((p,y)=>{const v=c.get(y.workId);return p+(y.customDurationMinutes??(v==null?void 0:v.estimatedMinutes)??0)},0);return g.jsxs("button",{type:"button",onClick:i,className:De("group relative flex flex-col gap-3 rounded-3xl border border-white/10 bg-white/5 p-5 text-left transition hover:border-sky-400/50 hover:shadow-lg hover:shadow-sky-500/10",r&&"ring-2 ring-sky-400/70"),children:[f?g.jsx("div",{className:"absolute inset-0 -z-[1] rounded-3xl opacity-20 blur-2xl transition group-hover:opacity-40",style:{backgroundColor:f.colorHex}}):null,g.jsxs("div",{className:"flex items-start justify-between gap-2",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-lg font-semibold text-white",children:e.title||"Sesin sin ttulo"}),g.jsxs("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:[e.workItems.length," trabajos  ",h," min"]})]}),g.jsx($i,{objective:f,size:"sm"})]}),g.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-white/60",children:[e.workItems.slice(0,3).map(p=>{const y=c.get(p.workId),v=((y==null?void 0:y.subtitle)??"").trim();return g.jsx("span",{className:"rounded-full border border-white/10 px-3 py-1",children:v?`${(y==null?void 0:y.name)??"Trabajo"}  ${v}`:(y==null?void 0:y.name)??"Trabajo"},p.id)}),e.workItems.length>3?g.jsxs("span",{className:"rounded-full border border-white/10 px-3 py-1",children:["+",e.workItems.length-3]}):null]}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx($i,{objective:f,size:"sm"}),g.jsxs("div",{className:"ml-auto flex gap-2",children:[g.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),o()},className:"btn-secondary px-3 py-1 text-xs",children:"Duplicar"}),g.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),l()},className:"inline-flex items-center justify-center rounded-full border border-rose-500/40 px-3 py-1 text-xs font-semibold text-rose-300 transition hover:border-rose-400 hover:text-rose-200",children:"Eliminar"})]})]})]})}function C3(){const e=je(P=>P.sessions).filter(P=>P.kind==="class"),t=je(P=>P.works),n=je(P=>P.objectives),r=je(P=>P.assistants),i=je(P=>P.addSession),o=je(P=>P.duplicateSession),l=je(P=>P.deleteSession),u=je(P=>P.setAttendanceActualStatus),c=je(P=>P.toggleSessionWorkCompletion),[f,h]=Ip(),p=f.get("session")??void 0,y=f.get("mode")==="edit"?"edit":"view",[v,b]=k.useState(()=>y==="edit"),[w,_]=k.useState(new Set),E=k.useMemo(()=>[...e].sort((P,ee)=>qe(P.date).valueOf()-qe(ee.date).valueOf()),[e]),j=qe().format("YYYY-MM-DD"),C=k.useMemo(()=>E.find(P=>P.date>=j)??E[E.length-1],[E,j]),[M,D]=k.useState(()=>p&&e.some(P=>P.id===p)?p:C==null?void 0:C.id),R=P=>{const ee=new URLSearchParams(f);P==="edit"?ee.set("mode","edit"):ee.delete("mode"),h(ee,{replace:!0})};k.useEffect(()=>{p&&e.some(P=>P.id===p)&&D(p)},[p,e]),k.useEffect(()=>{if(!(M&&e.some(P=>P.id===M))){if(p&&e.some(P=>P.id===p)){D(p);return}D(C==null?void 0:C.id)}},[M,p,e,C]);const z=k.useMemo(()=>M?E.find(P=>P.id===M)??C:C,[E,M,C]),F=P=>{const ee=new URLSearchParams(f);P?ee.set("session",P):ee.delete("session"),h(ee,{replace:!0})},V=P=>{D(P),F(P)},A=(z==null?void 0:z.date)??j,[O,Q]=k.useState(A),[H,q]=k.useState(qe(A).startOf("month").format("YYYY-MM-DD"));k.useEffect(()=>{z&&(Q(z.date),q(qe(z.date).startOf("month").format("YYYY-MM-DD")))},[z]);const $=k.useMemo(()=>{const P=new Map;return e.forEach(ee=>{const G=qe(ee.date).format("YYYY-MM-DD"),se=P.get(G)??[];se.push(ee),P.set(G,se)}),P.forEach(ee=>ee.sort((G,se)=>(G.title??"").localeCompare(se.title??"","es"))),P},[e]),J=k.useMemo(()=>$.get(O)??[],[$,O]),ie=k.useMemo(()=>c3(qe(H)),[H]),L=k.useMemo(()=>{const P=qe(H);return e.filter(ee=>{const G=qe(ee.date);return G.year()===P.year()&&G.month()===P.month()}).sort((ee,G)=>qe(ee.date).valueOf()-qe(G.date).valueOf())},[e,H]),ne=k.useMemo(()=>{const P=new Map;return L.forEach(ee=>{const G=qe(ee.date).format("YYYY-MM-DD"),se=P.get(G)??[];se.push(ee),P.set(G,se)}),Array.from(P.entries()).sort((ee,G)=>qe(ee[0]).valueOf()-qe(G[0]).valueOf()).map(([ee,G])=>({date:ee,sessions:G.slice().sort((se,be)=>(se.title??"").localeCompare(be.title??"","es"))}))},[L]),T=P=>{Q(P),q(qe(P).startOf("month").format("YYYY-MM-DD"));const ee=$.get(P)??[];ee.length>0?V(ee[0].id):V(void 0)},U=()=>{const P=i({date:O,title:"Nueva sesin",description:"",notes:""});V(P.id)},Z=P=>{const ee=o(P,O);ee&&V(ee.id)},I=P=>{l(P),M===P&&V(void 0)},ye=P=>{const ee=qe(H).add(P,"month");q(ee.format("YYYY-MM-DD")),Q(G=>{const se=qe(G);return se.month()===ee.month()&&se.year()===ee.year()?G:ee.startOf("month").format("YYYY-MM-DD")})},me=k.useMemo(()=>new Map(n.map(P=>[P.id,P])),[n]),pe=k.useMemo(()=>new Map(t.map(P=>[P.id,P])),[t]),fe=E.length===0,W=k.useMemo(()=>r.filter(P=>P.active).slice().sort((P,ee)=>P.name.localeCompare(ee.name,"es",{sensitivity:"base"})),[r]),te=(z==null?void 0:z.attendance)??k3,re=k.useMemo(()=>{const P=new Map;te.forEach(se=>{P.set(se.assistantId,se)});let ee=0;W.forEach(se=>{var be;((be=P.get(se.id))==null?void 0:be.actualStatus)==="present"&&(ee+=1)});const G={present:ee,absent:Math.max(W.length-ee,0)};return{map:P,summary:G}},[te,W]),ce=re.map,he=re.summary,_e=k.useMemo(()=>mc(z==null?void 0:z.startTime,"18:30"),[z==null?void 0:z.startTime]),Ie=k.useMemo(()=>{if(!z)return new Map;let P=0;const ee=new Map;return z.workItems.forEach(G=>{const se=pe.get(G.workId),be=G.customDurationMinutes??(se==null?void 0:se.estimatedMinutes)??0,Oe=Ep(_e+P);ee.set(G.id,{startLabel:Oe,duration:be}),P+=be}),ee},[z,pe,_e]),We=z?E.findIndex(P=>P.id===z.id):-1,Qe=We>0,ut=We>=0&&We<E.length-1,Tt=()=>{Qe&&V(E[We-1].id)},K=()=>{ut&&V(E[We+1].id)},ae=P=>{const ee=P.target.value;if(!ee)return;T(ee);const G=$.get(ee);G&&G.length>0&&V(G[0].id)},de=P=>{_(ee=>{const G=new Set(ee);return G.has(P)?G.delete(P):G.add(P),G})},Ee=(P,ee)=>{z&&u(z.id,P,ee)},we=v?g.jsxs("section",{className:"glass-panel space-y-6 p-6",children:[g.jsxs("header",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:"Calendario"}),g.jsx("h2",{className:"text-xl font-semibold text-white",children:E3(H)})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>ye(-1),children:" Mes anterior"}),g.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>ye(1),children:"Mes siguiente "})]})]}),g.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.3fr_1.7fr]",children:[g.jsxs("section",{className:"space-y-4",children:[g.jsx("div",{className:"grid grid-cols-7 gap-2 text-center text-xs font-semibold uppercase tracking-wide text-white/50",children:["L","M","X","J","V","S","D"].map(P=>g.jsx("div",{className:"rounded-full bg-white/5 py-2",children:P},P))}),g.jsx("div",{className:"grid grid-cols-7 gap-2",children:ie.flat().map(P=>{const ee=P.format("YYYY-MM-DD"),G=$.get(ee)??[],se=P.month()===qe(H).month(),be=Du(ee,j),Oe=Du(ee,O);return g.jsxs("button",{type:"button",onClick:()=>T(ee),className:De("relative flex h-20 flex-col items-center justify-between rounded-2xl border p-2 text-sm transition",Oe?"border-sky-400/60 bg-sky-500/20 text-white shadow-lg shadow-sky-500/20":"border-white/10 bg-white/5 text-white/70 hover:border-white/30",!se&&"text-white/30"),children:[g.jsx("span",{className:De("flex h-8 w-8 items-center justify-center rounded-full text-base font-semibold",be?"bg-white text-slate-900":""),children:P.format("D")}),g.jsxs("div",{className:"flex w-full flex-wrap justify-center gap-1",children:[G.slice(0,3).map(Be=>{const Ce=Be.workItems[0],dt=Ce?t.find(Ke=>Ke.id===Ce.workId):void 0,ct=dt?n.find(Ke=>Ke.id===dt.objectiveId):void 0;return g.jsx("span",{className:"h-2 w-6 rounded-full",style:{backgroundColor:(ct==null?void 0:ct.colorHex)??"rgba(255,255,255,0.4)"}},Be.id)}),G.length>3?g.jsx("span",{className:"h-2 w-2 rounded-full border border-white/40"}):null]})]},ee)})})]}),g.jsxs("section",{className:"space-y-4",children:[g.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:"Sesiones en"}),g.jsx("h3",{className:"text-2xl font-semibold text-white",children:qe(O).format("dddd, D [de] MMMM")})]}),g.jsx("div",{className:"flex gap-3",children:g.jsx("button",{type:"button",onClick:U,className:"btn-primary",children:"+ Nueva sesin"})})]}),g.jsx("div",{className:"space-y-3",children:J.length===0?g.jsx("div",{className:"rounded-3xl border border-dashed border-white/15 p-10 text-center text-white/50",children:"An no hay sesiones planificadas este da. Crea una con el botn superior."}):J.map(P=>g.jsx(_3,{session:P,objectives:n,works:t,isActive:P.id===(z==null?void 0:z.id),onSelect:()=>V(P.id),onDuplicate:()=>Z(P.id),onDelete:()=>I(P.id)},P.id))}),ne.length>0?g.jsxs("details",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[g.jsxs("summary",{className:"cursor-pointer text-sm font-semibold text-white/80",children:["Ver sesiones del mes (",L.length,")"]}),g.jsx("div",{className:"custom-scrollbar mt-3 max-h-[22rem] space-y-3 overflow-y-auto pr-1",children:ne.map(({date:P,sessions:ee})=>{const G=ee.length===1?"1 sesin":`${ee.length} sesiones`;return g.jsxs("div",{role:"button",tabIndex:0,onClick:()=>T(P),onKeyDown:se=>{(se.key==="Enter"||se.key===" ")&&(se.preventDefault(),T(P))},className:De("cursor-pointer rounded-2xl border border-white/10 bg-white/5 p-3 text-sm transition hover:border-white/40 hover:bg-white/10",Du(P,O)&&"border-sky-400/50 bg-sky-500/10 shadow shadow-sky-500/10"),children:[g.jsxs("p",{className:"flex flex-wrap items-center gap-2 text-xs uppercase tracking-[0.3em] text-white/40",children:[g.jsx("span",{children:qe(P).format("ddd  D MMM")}),g.jsx("span",{className:"rounded-full border border-white/15 px-2 py-0.5 text-[9px] font-semibold tracking-[0.2em] text-white/50",children:G})]}),g.jsx("div",{className:"mt-3 space-y-2 text-xs",children:ee.map(se=>{const be=(se.description??"").trim(),Oe=se.workItems.reduce((Be,Ce)=>{const dt=t.find(ct=>ct.id===Ce.workId);return Be+(Ce.customDurationMinutes??(dt==null?void 0:dt.estimatedMinutes)??0)},0);return g.jsxs("button",{type:"button",onClick:Be=>{Be.stopPropagation(),T(P),V(se.id)},className:De("flex w-full flex-col gap-1 rounded-xl border border-white/10 bg-slate-950/60 px-3 py-2 text-left transition hover:border-white/30 hover:text-white",se.id===(z==null?void 0:z.id)&&Du(P,O)&&"border-sky-400/60 text-white"),children:[g.jsxs("div",{className:"flex w-full items-center justify-between gap-3",children:[g.jsx("span",{className:"truncate font-medium",children:se.title||"Sesin sin ttulo"}),g.jsxs("span",{className:"text-[11px] uppercase tracking-wide text-white/40",children:[se.workItems.length,"  ",Oe," min"]})]}),be?g.jsx("p",{className:"text-[11px] leading-relaxed text-white/60",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:be}):null]},se.id)})})]},P)})})]}):null]})]})]}):null;return g.jsxs("div",{className:"space-y-6",children:[fe||!z?g.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-end",children:[g.jsx(Y0,{mode:y,onChange:R}),g.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>b(P=>!P),children:v?"Ocultar calendario":"Abrir calendario"})]}):null,we,fe?g.jsxs("section",{className:"glass-panel flex flex-col items-center justify-center gap-5 p-4 text-center sm:gap-6 sm:p-10",children:[g.jsx("div",{className:"grid h-28 w-28 place-items-center rounded-full bg-gradient-to-br from-sky-500/30 to-purple-500/30 shadow-lg shadow-sky-500/20 sm:h-32 sm:w-32",children:g.jsx("svg",{width:"52",height:"52",viewBox:"0 0 24 24",fill:"none",className:"text-white/80 sm:h-14 sm:w-14",children:g.jsx("path",{d:"M6 3v2M18 3v2M3.5 10h17M5 7h14a2 2 0 0 1 2 2v9a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3V9a2 2 0 0 1 2-2Z",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})})}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("p",{className:"text-lg font-semibold text-white sm:text-2xl",children:"An no hay sesiones"}),g.jsx("p",{className:"mx-auto max-w-md text-sm text-white/60 sm:text-base",children:"Crea tu primera sesin en el calendario y empieza a construir tu plan reutilizable."})]}),g.jsx("button",{type:"button",className:"btn-primary",onClick:()=>b(!0),children:"Abrir calendario"})]}):z?g.jsxs("section",{className:"glass-panel space-y-4 p-3 sm:space-y-6 sm:p-6 lg:p-8",children:[g.jsxs("header",{className:"space-y-3 sm:flex sm:items-start sm:justify-between sm:gap-6 sm:space-y-0",children:[g.jsxs("div",{className:"space-y-1.5",children:[g.jsxs("div",{className:"flex items-center gap-2 text-xs uppercase tracking-[0.3em] text-white/40",children:[g.jsx("span",{className:"sm:hidden",children:"Sesin"}),g.jsx("span",{className:"hidden sm:inline",children:"Fecha"})]}),g.jsx("h2",{className:"font-display text-2xl font-semibold text-white sm:text-3xl",children:S3(z.date)}),g.jsx("p",{className:"text-sm font-medium text-white/80 sm:text-lg",children:z.title})]}),g.jsxs("div",{className:"flex flex-col gap-2.5 rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-sm text-white/70 sm:w-auto",children:[g.jsxs("div",{className:"flex items-center justify-between gap-4",children:[g.jsx("p",{className:"font-semibold text-white",children:"Duracin estimada"}),g.jsxs("span",{className:"rounded-full bg-white/10 px-3 py-1 text-xs text-white/80",children:[z.workItems.map(P=>{const ee=pe.get(P.workId);return P.customDurationMinutes??(ee==null?void 0:ee.estimatedMinutes)??0}).reduce((P,ee)=>P+ee,0)||0," ","min"]})]}),g.jsxs("div",{className:"flex flex-col gap-2 sm:items-end",children:[g.jsx("label",{className:"text-[11px] uppercase tracking-wide text-white/40 sm:text-xs",children:"Ir a fecha"}),g.jsx("input",{type:"date",className:"input-field w-full sm:w-auto",value:z.date??j,onChange:ae})]})]})]}),g.jsxs("div",{className:"flex flex-col gap-2.5 sm:flex-row sm:flex-wrap sm:items-center sm:justify-between",children:[g.jsxs("div",{className:"flex flex-wrap gap-2",children:[g.jsx("button",{type:"button",onClick:Tt,disabled:!Qe,className:"btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold disabled:opacity-40 sm:h-10 sm:text-sm",children:" Anterior"}),g.jsx("button",{type:"button",onClick:K,disabled:!ut,className:"btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold disabled:opacity-40 sm:h-10 sm:text-sm",children:"Siguiente "})]}),g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsx(Y0,{mode:y,onChange:R}),g.jsx("button",{type:"button",className:"btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold sm:h-10 sm:text-sm",onClick:()=>b(P=>!P),children:v?"Ocultar calendario":"Abrir calendario"})]})]}),y==="edit"?g.jsx("div",{className:"rounded-2xl border border-white/10 bg-slate-950/40 p-3 sm:p-4",children:g.jsx($1,{session:z,works:t,objectives:n,assistants:r,onDateChange:P=>{Q(P),q(qe(P).startOf("month").format("YYYY-MM-DD"))}})}):g.jsxs(g.Fragment,{children:[z.description&&g.jsx("div",{className:"rounded-2xl border border-white/5 bg-white/5 p-3 sm:p-4",children:g.jsx(ws,{content:z.description})}),g.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[g.jsx("h3",{className:"text-sm uppercase tracking-[0.3em] text-white/40",children:"Trabajos"}),g.jsx("div",{className:"space-y-3 sm:space-y-4",children:z.workItems.map(P=>{const ee=pe.get(P.workId),G=ee?me.get(ee.objectiveId):void 0,se=w.has(P.id),be=Ie.get(P.id),Oe=(be==null?void 0:be.startLabel)??Ep(_e),Be=(be==null?void 0:be.duration)??P.customDurationMinutes??(ee==null?void 0:ee.estimatedMinutes)??0,Ce=(P.focusLabel??"").trim(),dt=Ce.length>0,ct=P.customDescriptionMarkdown??(ee==null?void 0:ee.descriptionMarkdown)??"",Ke=ct.trim().length>0,bt=((ee==null?void 0:ee.videoUrls)??[]).map(gn=>gn.trim()).filter(Boolean),nt=bt.length>0,Wt=Ke||nt,It=((ee==null?void 0:ee.subtitle)??"").trim();return g.jsxs("article",{className:"flex flex-col gap-2.5 rounded-3xl border border-white/10 bg-white/5 p-2.5 shadow shadow-black/20 sm:gap-3 sm:p-4",style:G?{background:`linear-gradient(120deg, ${G.colorHex}1a, rgba(15,23,42,0.8))`}:void 0,children:[g.jsxs("div",{className:"flex items-start gap-3",children:[g.jsx("label",{className:"mt-1 flex items-center gap-3 text-left",children:g.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded-full border-2 border-white/30 bg-transparent text-sky-400 transition focus:ring-sky-400",checked:P.completed??!1,onChange:gn=>c(z.id,P.id,gn.target.checked)})}),g.jsxs("div",{className:"flex-1 space-y-2",children:[g.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[g.jsxs("div",{children:[g.jsxs("p",{className:"text-lg font-semibold text-white",children:[(ee==null?void 0:ee.name)??"Trabajo eliminado",dt?g.jsxs("span",{className:"ml-2 text-sky-300",children:[" ",Ce]}):null]}),It?g.jsx("p",{className:"text-sm text-white/70",children:It}):null,g.jsxs("p",{className:"text-sm text-white/60",children:[g.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:Oe}),g.jsx("span",{className:"mx-2 text-white/30",children:""}),g.jsxs("span",{children:[Be," min"]})]})]}),g.jsx($i,{objective:G,size:"sm"})]}),(Wt||nt)&&g.jsxs("div",{className:"flex items-center gap-3 text-xs text-white/50",children:[Wt?g.jsxs("button",{type:"button",onClick:()=>de(P.id),className:"inline-flex items-center gap-2 rounded-full border border-white/15 px-3 py-1 text-xs font-semibold text-white/70 transition hover:border-white/30 hover:text-white",children:[g.jsx("span",{className:De("transition-transform",se?"rotate-90":"rotate-0"),children:""}),se?"Ocultar detalles":"Ver detalles"]}):null,nt?g.jsxs("span",{children:[bt.length," vdeo",bt.length>1?"s":""]}):null]})]}),g.jsx("div",{className:De("mt-1 flex h-10 w-10 items-center justify-center rounded-full border border-white/10 text-xs font-semibold uppercase text-white/60",P.completed?"bg-white/20 text-white":""),children:P.order+1})]}),Wt&&se&&g.jsxs("div",{className:"space-y-3 rounded-2xl border border-white/10 bg-slate-950/60 p-4",children:[Ke?g.jsx(ws,{content:ct,enableWorkLinks:!0}):null,nt?g.jsx("div",{className:"space-y-3",children:bt.map((gn,at)=>g.jsxs("div",{className:"space-y-2",children:[g.jsx(Uc,{url:gn,title:`${(ee==null?void 0:ee.name)??"Trabajo"} vdeo ${at+1}`}),g.jsx("a",{href:gn,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-full border border-white/15 bg-white/5 px-3 py-1 text-xs font-medium text-white/80 transition hover:border-white/30 hover:text-white",children:"Abrir en YouTube"})]},`${P.id}-video-${at}`))}):null]})]},P.id)})})]})]}),y==="view"?r.length===0?g.jsxs("div",{className:"rounded-2xl border border-dashed border-white/15 bg-white/5 p-3 text-xs text-white/70 sm:text-sm sm:p-4",children:[g.jsx("p",{className:"font-semibold text-white",children:"Quines participan?"}),g.jsx("p",{className:"mt-1",children:"Crea tu lista de asistentes para poder registrar quin ha venido a clase en tiempo real."}),g.jsx(wr,{to:"/assistants",className:"btn-secondary mt-3 h-8 rounded-2xl px-3 text-xs",children:"Gestionar asistentes"})]}):W.length===0?g.jsxs("div",{className:"rounded-2xl border border-dashed border-white/15 bg-white/5 p-3 text-xs text-white/70 sm:text-sm sm:p-4",children:[g.jsx("p",{className:"font-semibold text-white",children:"Todos los asistentes estn inactivos."}),g.jsx("p",{className:"mt-1",children:"Activa al menos uno desde la seccin de asistentes para poder marcar su asistencia."}),g.jsx(wr,{to:"/assistants",className:"btn-secondary mt-3 h-8 rounded-2xl px-3 text-xs",children:"Ir a asistentes"})]}):g.jsxs("div",{className:"space-y-3 rounded-2xl border border-white/10 bg-slate-950/60 p-3 sm:space-y-4 sm:p-5",children:[g.jsxs("div",{className:"flex flex-col gap-2.5 sm:flex-row sm:items-center sm:justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:"Asistencia en vivo"}),g.jsx("p",{className:"text-xs text-white/50 sm:text-sm",children:"Marca quin est presente en la sesin actual."})]}),g.jsx("div",{className:"flex flex-wrap gap-2",children:h3.map(P=>g.jsxs("span",{className:De("inline-flex items-center gap-2 rounded-full px-2.5 py-0.5 text-[11px] font-semibold sm:px-3 sm:py-1 sm:text-xs",m3[P]),children:[he[P]," ",p3[P]]},P))})]}),g.jsx("div",{className:"space-y-2",children:W.map(P=>{const ee=ce.get(P.id),G=(ee==null?void 0:ee.status)??"pending",se=(ee==null?void 0:ee.actualStatus)==="present",be=()=>Ee(P.id,se?"absent":"present");return g.jsx("article",{className:"rounded-2xl border border-white/10 bg-white/5 p-2.5 sm:p-4",children:g.jsxs("div",{className:"flex flex-col gap-2.5 sm:flex-row sm:items-center sm:justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm font-semibold text-white",children:P.name}),g.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2 text-[11px] text-white/50 sm:text-xs",children:[g.jsx("span",{className:"uppercase tracking-wide text-white/40",children:"Previsin"}),g.jsx("span",{className:De("inline-flex items-center gap-2 rounded-full px-2 py-0.5 font-semibold",f3[G]),children:d3[G]}),g.jsx("span",{className:"hidden text-white/30 sm:inline",children:""}),g.jsx("span",{className:"uppercase tracking-wide text-white/40",children:"Asistencia"}),g.jsx("span",{className:De("font-semibold",se?"text-emerald-200":"text-white/60"),children:se?"Presente":"No asisti"})]})]}),g.jsxs("div",{className:"flex flex-col items-end gap-1 text-right sm:flex-row sm:items-center sm:gap-3",children:[g.jsxs("button",{type:"button",onClick:be,"aria-pressed":se,"aria-label":`${se?"Desmarcar asistencia de":"Marcar asistencia de"} ${P.name}`,title:se?"Desmarcar asistencia":"Marcar como presente",className:De(g3,se?y3:v3),children:[g.jsx("span",{className:De(x3,se?w3:b3),children:se?g.jsx("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 sm:h-4 sm:w-4","aria-hidden":"true",children:g.jsx("path",{d:"M4 8.5 6.5 11l5-6",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}):g.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-white/30 transition group-hover:bg-white/60"})}),g.jsx("span",{children:se?"Ha asistido":"Marcar asistencia"})]}),g.jsx("span",{className:De("text-[10px] font-medium uppercase tracking-[0.25em] sm:text-[11px]",se?"text-emerald-200":"text-white/40"),children:se?"PRESENTE":"AUSENTE"})]})]})},P.id)})})]}):null]}):g.jsx("div",{className:"glass-panel p-10 text-center text-white/60",children:"Selecciona una sesin desde el calendario."})]})}function j3(){return g.jsx(C3,{})}function N3(){const[e]=Ip(),t=new URLSearchParams(e);return t.set("mode","edit"),g.jsx(wc,{to:{pathname:"/",search:`?${t.toString()}`},replace:!0})}function kh(e){return Array.from(new Set(e))}function Ua({options:e,value:t,onChange:n,disabled:r=!1,placeholder:i="Search",allowCreate:o=!1,onCreate:l,maxSelected:u}){const[c,f]=k.useState(""),h=k.useMemo(()=>kh(t.map(E=>E.trim()).filter(Boolean)),[t]),p=k.useMemo(()=>new Set(h),[h]),y=k.useMemo(()=>new Map(e.map(E=>[E.value,E])),[e]),v=k.useMemo(()=>{const E=c.trim().toLowerCase();return E?e.filter(j=>(j.label??j.value).toLowerCase().includes(E)||j.value.toLowerCase().includes(E)):e},[e,c]),b=typeof u=="number"?h.length<u:!0,w=c.trim(),_=o&&!!w&&typeof l=="function"&&!e.some(E=>E.value.toLowerCase()===w.toLowerCase())&&!e.some(E=>(E.label??"").toLowerCase()===w.toLowerCase());return g.jsxs("div",{className:De("space-y-2",r&&"opacity-60"),children:[h.length>0?g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[h.map(E=>{var C;const j=((C=y.get(E))==null?void 0:C.label)??E;return g.jsxs("button",{type:"button",disabled:r,className:"inline-flex items-center gap-2 rounded-full border border-sky-500/30 bg-sky-500/10 px-3 py-1 text-xs font-semibold text-sky-100 transition hover:border-sky-400/50",onClick:()=>n(h.filter(M=>M!==E)),title:"Remove",children:[j,g.jsx("span",{className:"text-sky-200/80",children:""})]},E)}),g.jsx("button",{type:"button",disabled:r,className:"rounded-full border border-white/15 bg-white/5 px-3 py-1 text-xs font-semibold text-white/70 transition hover:border-white/30 hover:text-white",onClick:()=>n([]),children:"Clear"})]}):null,g.jsx("input",{type:"text",className:"input-field",value:c,disabled:r,placeholder:i,onChange:E=>f(E.target.value)}),g.jsx("div",{className:"max-h-48 overflow-auto rounded-2xl border border-white/10 bg-white/5 p-2",children:g.jsxs("div",{className:"flex flex-wrap gap-2",children:[_?g.jsxs("button",{type:"button",disabled:r||!b,className:"rounded-full border border-emerald-500/30 bg-emerald-500/10 px-3 py-1 text-xs font-semibold text-emerald-100 transition hover:border-emerald-400/50 disabled:opacity-50",onClick:()=>{const E=(l==null?void 0:l(w))??null;if(!E)return;const j=kh([...h,E.createdValue]);n(j),f("")},title:"Create",children:["+ Create ",w,""]}):null,v.map(E=>{const j=E.label??E.value,C=p.has(E.value);return g.jsx("button",{type:"button",disabled:r||!C&&!b,className:De("rounded-full border px-3 py-1 text-xs font-semibold transition disabled:opacity-50",C?"border-sky-500/40 bg-sky-500/10 text-sky-100":"border-white/15 bg-white/5 text-white/70 hover:border-white/30 hover:text-white"),onClick:()=>{const M=C?h.filter(D=>D!==E.value):kh([...h,E.value]);n(M)},children:j},E.value)})]})})]})}const G0={name:"",subtitle:"",objectiveId:"",parentWorkId:"",nodeType:"",tags:[],orderHint:0,nextWorkId:"",variantOfWorkId:"",descriptionMarkdown:"",estimatedMinutes:10,notes:"",videoUrls:[""],visibility:"private",collaborators:[""]},T3=e=>Array.from(new Set((e??[]).map(t=>t.trim().toLowerCase()).filter(Boolean))),Sh="__no_objective__",F1={private:"Privado",shared:"Compartido",public:"Pblico"},I3={private:"Solo t puedes ver y editar este trabajo.",shared:"Solo las personas que aadas pueden editarlo contigo.",public:"Cualquier persona con acceso al catlogo puede verlo. Solo tus editores pueden cambiarlo."},z1=5,Ta="personal-exclude";function P3({work:e,childCount:t,depth:n,expanded:r,isTreeCollapsed:i,isPersonalExcluded:o,canTogglePersonal:l,personalToggleBusy:u,nextLabel:c,variantLabel:f,onToggle:h,onToggleTree:p,onTogglePersonal:y,onEdit:v,onDuplicate:b,onCreateChild:w,onDelete:_}){var ye;const E=(e.descriptionMarkdown??"").trim(),j=(e.subtitle??"").trim(),C=(e.notes??"").trim(),M=e.videoUrls.filter(me=>me.trim().length>0),D=E.length>0,R=j.length>0,z=C.length>0,F=M.length>0,V=D||z||F,A=t>0,O=n>0?{marginLeft:`${n*1.5}rem`}:void 0,Q=e.visibility??"private",H=F1[Q],q=((ye=e.collaboratorEmails)==null?void 0:ye.length)??0,$=e.canEdit??!1,J=e.isOwner??!1,ie=(e.ownerEmail??"").trim(),L=(e.nodeType??"").trim(),ne=(e.tags??[]).filter(me=>me!==Ta),T=(L||"work").trim().toLowerCase(),U=je(me=>{var pe;return(pe=me.workTaxonomy.nodeTypes.find(fe=>fe.key===T))==null?void 0:pe.label}),Z=(()=>{const me={form:"Forma",segment:"Segmento",application:"Aplicacin",technique:"Tcnica",drill:"Drill",style:"Estilo",link:"Link",work:"Trabajo"},pe={form:"border-indigo-500/40 bg-indigo-500/15 text-indigo-100",segment:"border-sky-500/40 bg-sky-500/15 text-sky-100",application:"border-amber-500/40 bg-amber-500/15 text-amber-100",technique:"border-emerald-500/40 bg-emerald-500/15 text-emerald-100",drill:"border-purple-500/40 bg-purple-500/15 text-purple-100",style:"border-white/20 bg-white/10 text-white/70",link:"border-white/20 bg-white/10 text-white/70",work:"border-white/20 bg-white/10 text-white/70"},fe=U??me[T]??(L||"Trabajo"),W=pe[T]??pe.work;return g.jsx("span",{className:De("inline-flex items-center rounded-full border px-3 py-1 text-xs font-semibold",W),children:fe})})(),I=(()=>{const me={form:"border-indigo-500/25",segment:"border-sky-500/25",application:"border-amber-500/25",technique:"border-emerald-500/25",drill:"border-purple-500/25",work:"border-white/10"},pe={form:"bg-indigo-500",segment:"bg-sky-500",application:"bg-amber-500",technique:"bg-emerald-500",drill:"bg-purple-500",work:""},fe={form:"bg-indigo-400/60",segment:"bg-sky-400/60",application:"bg-amber-400/60",technique:"bg-emerald-400/60",drill:"bg-purple-400/60",work:"bg-white/10"},W=me[T]??me.work,te=pe[T]??pe.work,re=fe[T]??fe.work;return{borderClassName:W,glowClassName:te,barClassName:re}})();return g.jsxs("article",{id:`work-${e.id}`,className:De("group relative space-y-4 rounded-xl border bg-white/5 p-4 pb-5 shadow shadow-black/30",I.borderClassName),style:O,children:[g.jsx("div",{className:De("absolute inset-y-0 left-0 w-1 rounded-r-full",I.barClassName),"aria-hidden":!0}),I.glowClassName?g.jsx("div",{className:De("absolute inset-0 -z-[1] rounded-xl opacity-10 blur-3xl",I.glowClassName)}):null,g.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[g.jsxs("div",{role:V?"button":void 0,tabIndex:V?0:void 0,onClick:()=>{V&&h()},onKeyDown:me=>{V&&(me.key==="Enter"||me.key===" ")&&(me.preventDefault(),h())},className:De("flex flex-1 items-start gap-3 border border-transparent px-2 py-2 text-left transition",V?"cursor-pointer hover:border-white/10 hover:bg-white/5 focus-visible:border-white/20 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-500/40":"cursor-default"),"aria-expanded":V?r:void 0,children:[A?g.jsx("button",{type:"button",onClick:me=>{me.stopPropagation(),p()},className:De("mt-1 inline-flex h-8 w-8 items-center justify-center rounded-full border border-white/15 bg-white/5 text-sm font-semibold text-white/70 transition hover:border-white/30 hover:text-white"),"aria-label":i?"Mostrar trabajos hijos":"Ocultar trabajos hijos",title:i?"Mostrar hijos":"Ocultar hijos",children:i?"":""}):null,V?g.jsx("span",{className:De("mt-1 inline-flex h-8 w-8 items-center justify-center rounded-full border border-white/15 bg-white/5 text-sm font-semibold text-white/70 transition",r?"rotate-90 border-white/30 text-white":""),"aria-hidden":!0,children:""}):null,g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-semibold text-white",children:e.name}),R?g.jsx("p",{className:"text-sm text-white/70",children:j}):null,g.jsxs("p",{className:"text-sm text-white/60",children:[e.estimatedMinutes," minutos"]}),g.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-[11px] uppercase tracking-wide text-white/40",children:[g.jsx("span",{className:"rounded-full border border-white/20 px-2 py-0.5 text-[10px] font-semibold text-white/70",children:H}),ne.slice(0,3).map(me=>g.jsx("span",{className:"rounded-full border border-white/10 px-2 py-0.5 text-[10px] font-semibold text-white/60",children:me},me)),J?g.jsx("span",{children:"Propietario"}):ie?g.jsx("span",{children:ie}):null,q>0?g.jsxs("span",{children:["+",q," colaborador",q===1?"":"es"]}):null,f?g.jsxs("span",{className:"text-white/50",children:["Variante de: ",f]}):null,c?g.jsxs("span",{className:"text-white/50",children:["Siguiente: ",c]}):null,$?null:g.jsx("span",{className:"text-amber-300/80",children:"Solo lectura"})]})]})]}),g.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:justify-end",children:[Z,g.jsx("button",{type:"button",onClick:me=>{me.stopPropagation(),y()},disabled:!l||u,className:De("inline-flex items-center rounded-full border px-3 py-1 text-xs font-semibold transition disabled:opacity-50",o?"border-rose-500/40 bg-rose-500/10 text-rose-200 hover:border-rose-400":"border-emerald-500/40 bg-emerald-500/10 text-emerald-200 hover:border-emerald-400"),title:o?"Incluir en el plan personal":"Excluir del plan personal",children:u?"...":o?"Fuera":"En plan"}),g.jsxs(ts,{as:"div",className:"relative inline-flex",children:[g.jsxs(ts.Button,{className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-white/20 text-white/70 transition hover:border-white/40 hover:text-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-500/40",children:[g.jsx("span",{className:"sr-only",children:"Abrir acciones"}),g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",className:"h-5 w-5","aria-hidden":"true",children:[g.jsx("circle",{cx:"12",cy:"5",r:"1.5"}),g.jsx("circle",{cx:"12",cy:"12",r:"1.5"}),g.jsx("circle",{cx:"12",cy:"19",r:"1.5"})]})]}),g.jsxs(ts.Items,{className:"absolute right-0 z-10 mt-2 w-44 overflow-hidden rounded-2xl border border-white/10 bg-slate-900/95 p-1 text-sm text-white shadow-lg shadow-black/40 focus:outline-none",children:[g.jsx(ts.Item,{children:({active:me})=>g.jsx("button",{type:"button",onClick:$?v:void 0,disabled:!$,className:De("flex w-full items-center gap-2 rounded-xl px-3 py-2 text-left disabled:opacity-40",me&&$?"bg-white/10 text-white":"text-white/70"),children:"Editar"})}),g.jsx(ts.Item,{children:({active:me})=>g.jsx("button",{type:"button",onClick:$?b:void 0,disabled:!$,className:De("flex w-full items-center gap-2 rounded-xl px-3 py-2 text-left disabled:opacity-40",me&&$?"bg-white/10 text-white":"text-white/70"),children:"Duplicar"})}),g.jsx(ts.Item,{children:({active:me})=>g.jsx("button",{type:"button",onClick:$?w:void 0,disabled:!$,className:De("flex w-full items-center gap-2 rounded-xl px-3 py-2 text-left disabled:opacity-40",me&&$?"bg-white/10 text-white":"text-white/70"),children:"Nuevo hijo"})}),g.jsx(ts.Item,{children:({active:me})=>g.jsx("button",{type:"button",onClick:J?_:void 0,disabled:!J,className:De("flex w-full items-center gap-2 rounded-xl px-3 py-2 text-left disabled:opacity-40",me&&J?"bg-rose-500/20 text-rose-100":"text-rose-300"),children:"Eliminar"})})]})]})]})]}),V&&r&&g.jsxs("div",{className:"space-y-4 rounded-2xl border border-white/10 bg-slate-950/60 p-4",children:[D?g.jsx(ws,{content:e.descriptionMarkdown,enableWorkLinks:!0}):null,z?g.jsx("div",{className:"rounded-2xl border border-dashed border-white/15 bg-white/5 p-3 text-sm text-white/70",children:e.notes}):null,F?g.jsx("div",{className:"space-y-3",children:g.jsx("div",{className:"grid gap-4 lg:grid-cols-3",children:M.map((me,pe)=>g.jsxs("div",{className:"space-y-2",children:[g.jsx(Uc,{url:me,title:`${e.name} vdeo ${pe+1}`}),g.jsx("a",{href:me,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-full border border-white/20 px-3 py-1 text-xs font-semibold text-white/70 transition hover:border-white/40 hover:text-white",children:"Abrir en YouTube"})]},`${e.id}-video-${pe}`))})}):null]}),g.jsx("button",{type:"button",onClick:$?w:void 0,disabled:!$,className:De("absolute bottom-0 left-1/2 flex -translate-x-1/2 translate-y-1/2 items-center justify-center rounded-full border border-dashed border-white/20 bg-slate-950/80 px-4 py-2 text-sm font-semibold text-white/80 opacity-0 transition hover:border-white/40 hover:text-white focus-visible:opacity-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-500/40 group-hover:opacity-100 pointer-events-none group-hover:pointer-events-auto focus-visible:pointer-events-auto",!$&&"opacity-30"),title:$?A?"Aadir trabajo hijo":"Crear primer trabajo hijo":"No tienes permisos para crear trabajos hijos","aria-label":"Crear trabajo hijo",children:"+"})]})}function A3({form:e,objectiveOptions:t,parentOptions:n,workOptions:r,nodeTypeOptions:i,tagOptions:o,onCreateNodeType:l,onCreateTag:u,depth:c,onFieldChange:f,onVideoChange:h,onAddVideo:p,onRemoveVideo:y,onCollaboratorChange:v,onAddCollaborator:b,onRemoveCollaborator:w,onSave:_,onCancel:E,isNew:j,canEditContent:C,canManageSharing:M,isSaving:D,isOwner:R,ownerEmail:z}){const F=t.find($=>$.id===e.objectiveId),V=n.find($=>$.id===e.parentWorkId),A=r.find($=>$.id===e.nextWorkId),O=r.find($=>$.id===e.variantOfWorkId),Q=c>0?{marginLeft:`${c*1.5}rem`}:void 0,H=e.id?`work-name-${e.id}`:void 0,q=e.id?`work-subtitle-${e.id}`:void 0;return g.jsxs("article",{className:"space-y-5 rounded-3xl border border-sky-500/40 bg-slate-950/70 p-5 shadow-lg shadow-sky-500/15",style:Q,children:[g.jsxs("header",{className:"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between",children:[g.jsxs("div",{className:"flex-1 space-y-3",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:j?"Nuevo trabajo":"Editando trabajo"}),g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",htmlFor:H,children:"Nombre"}),g.jsx("input",{id:H,type:"text",className:"input-field w-full text-base font-semibold disabled:opacity-60",placeholder:"Nombre descriptivo",value:e.name,onChange:$=>f({name:$.target.value}),disabled:!C})]}),g.jsxs("div",{className:"space-y-1",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",htmlFor:q,children:"Subttulo (opcional)"}),g.jsx("input",{id:q,type:"text",className:"input-field w-full disabled:opacity-60",placeholder:"Aade un subttulo breve",value:e.subtitle,onChange:$=>f({subtitle:$.target.value}),disabled:!C})]})]}),g.jsx($i,{objective:F,size:"sm"})]}),C?null:g.jsx("div",{className:"rounded-2xl border border-amber-400/40 bg-amber-500/10 p-3 text-xs text-amber-200",children:"No tienes permisos para editar el contenido de este trabajo. Puedes revisar la informacin y sugerir cambios al propietario."}),g.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Objetivo"}),g.jsxs("select",{className:"input-field disabled:opacity-60",value:e.objectiveId,onChange:$=>f({objectiveId:$.target.value}),disabled:!C,children:[g.jsx("option",{value:"",children:"Selecciona un objetivo"}),t.map($=>g.jsx("option",{value:$.id,children:$.name},$.id))]})]}),g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Trabajo padre (opcional)"}),g.jsxs("select",{className:"input-field disabled:opacity-60",value:e.parentWorkId,onChange:$=>f({parentWorkId:$.target.value}),disabled:!C,children:[g.jsx("option",{value:"",children:"Sin trabajo padre"}),n.map($=>g.jsx("option",{value:$.id,children:$.label},$.id))]}),e.parentWorkId&&V?g.jsxs("p",{className:"text-xs text-white/40",children:["Deriva de: ",V.label]}):null]}),g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Duracin estimada (min)"}),g.jsx("input",{type:"number",min:0,className:"input-field disabled:opacity-60",value:e.estimatedMinutes,onChange:$=>f({estimatedMinutes:Number($.target.value)}),disabled:!C})]})]}),g.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Node type (opcional)"}),g.jsx(Ua,{options:i,value:e.nodeType?[e.nodeType]:[],maxSelected:1,onChange:$=>f({nodeType:$[0]??""}),placeholder:"Search node types",disabled:!C,allowCreate:!0,onCreate:$=>{const J=l($);return J?{createdValue:J,createdLabel:$.trim()}:null}})]}),g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Tags"}),g.jsx(Ua,{options:o,value:e.tags??[],onChange:$=>f({tags:$}),placeholder:"Search tags",disabled:!C,allowCreate:!0,onCreate:$=>{const J=u($);return J?{createdValue:J,createdLabel:J}:null}})]}),g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Order hint (opcional)"}),g.jsx("input",{type:"number",min:0,className:"input-field disabled:opacity-60",value:e.orderHint,onChange:$=>f({orderHint:Number($.target.value)}),disabled:!C})]}),g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Siguiente (next)"}),g.jsxs("select",{className:"input-field disabled:opacity-60",value:e.nextWorkId,onChange:$=>f({nextWorkId:$.target.value}),disabled:!C,children:[g.jsx("option",{value:"",children:"Sin siguiente"}),r.filter($=>$.id!==e.id).map($=>g.jsx("option",{value:$.id,children:$.label},$.id))]}),e.nextWorkId&&A?g.jsxs("p",{className:"text-xs text-white/40",children:["Siguiente: ",A.label]}):null]}),g.jsxs("div",{className:"grid gap-2 sm:col-span-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Variante de (variant_of)"}),g.jsxs("select",{className:"input-field disabled:opacity-60",value:e.variantOfWorkId,onChange:$=>f({variantOfWorkId:$.target.value}),disabled:!C,children:[g.jsx("option",{value:"",children:"Sin base"}),r.filter($=>$.id!==e.id).map($=>g.jsx("option",{value:$.id,children:$.label},$.id))]}),e.variantOfWorkId&&O?g.jsxs("p",{className:"text-xs text-white/40",children:["Variante de: ",O.label]}):null]})]}),g.jsxs("section",{className:"space-y-3 rounded-3xl border border-white/10 bg-white/5 p-4",children:[g.jsxs("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-xs uppercase tracking-wide text-white/40",children:"Visibilidad"}),g.jsx("p",{className:"text-sm text-white/60",children:R?"Eres el propietario de este trabajo.":z?`Propietario: ${z}`:""})]}),M?null:g.jsx("p",{className:"text-xs text-amber-300/80",children:"Solo el propietario puede cambiar la visibilidad o los colaboradores."})]}),g.jsx("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:gap-3",children:["private","shared","public"].map($=>g.jsxs("label",{className:De("inline-flex items-center gap-2 rounded-2xl border px-3 py-2 text-sm transition",e.visibility===$?"border-sky-400/80 bg-sky-400/10 text-white":"border-white/15 text-white/70 hover:border-white/30 hover:text-white",!M&&"opacity-50"),children:[g.jsx("input",{type:"radio",className:"accent-sky-400",checked:e.visibility===$,onChange:()=>f({visibility:$}),disabled:!M}),F1[$]]},$))}),g.jsx("p",{className:"text-xs text-white/50",children:I3[e.visibility]}),e.visibility==="private"?null:g.jsxs("div",{className:"space-y-2 rounded-2xl border border-white/10 bg-white/5 p-3",children:[g.jsx("p",{className:"text-xs uppercase tracking-wide text-white/40",children:"Colaboradores (edicin)"}),g.jsx("p",{className:"text-xs text-white/50",children:"Aade hasta 5 direcciones de correo. Tendrn permisos de edicin completos."}),g.jsx("div",{className:"space-y-2",children:e.collaborators.map(($,J)=>g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"email",className:"input-field flex-1 disabled:opacity-60",placeholder:"colega@ejemplo.com",value:$,onChange:ie=>v(J,ie.target.value),disabled:!M}),e.collaborators.length>1?g.jsx("button",{type:"button",className:"inline-flex h-9 w-9 items-center justify-center rounded-full border border-rose-500/40 text-rose-300 transition hover:border-rose-400 hover:text-rose-200 disabled:opacity-40",onClick:()=>w(J),"aria-label":"Eliminar colaborador",disabled:!M,children:""}):null]},`collaborator-${J}`))}),g.jsx("button",{type:"button",className:"btn-secondary px-3 py-1 text-xs disabled:opacity-40",onClick:b,disabled:!M||e.collaborators.length>=z1,children:"+ Aadir colaborador"})]})]}),g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Descripcin (Markdown)"}),g.jsx("textarea",{className:"input-field min-h-[140px] disabled:opacity-60",value:e.descriptionMarkdown,onChange:$=>f({descriptionMarkdown:$.target.value}),placeholder:"Usa formato markdown para resaltar puntos importantes.",disabled:!C})]}),g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Notas opcionales"}),g.jsx("textarea",{className:"input-field min-h-[100px] disabled:opacity-60",value:e.notes,onChange:$=>f({notes:$.target.value}),disabled:!C})]}),g.jsxs("div",{className:"space-y-3",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Vdeos de YouTube"}),g.jsx("div",{className:"space-y-3",children:e.videoUrls.map(($,J)=>g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"url",className:"input-field flex-1 disabled:opacity-60",value:$,onChange:ie=>h(J,ie.target.value),placeholder:"https://www.youtube.com/watch?v=...",disabled:!C}),e.videoUrls.length>1?g.jsx("button",{type:"button",className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-rose-500/40 text-rose-300 transition hover:border-rose-400 hover:text-rose-200",onClick:()=>y(J),"aria-label":"Eliminar enlace de vdeo",disabled:!C,children:""}):null]}),g.jsx(Uc,{url:$,title:`Vista previa vdeo ${J+1}`})]},`video-field-${J}`))}),g.jsx("button",{type:"button",className:"btn-secondary px-3 py-1 text-xs disabled:opacity-50",onClick:p,disabled:!C,children:"+ Aadir vdeo"})]}),g.jsxs("div",{className:"flex flex-wrap gap-3 pt-2",children:[g.jsx("button",{type:"button",onClick:_,className:"btn-primary disabled:opacity-60",disabled:D,children:D?"Guardando":"Guardar"}),g.jsx("button",{type:"button",className:"btn-secondary disabled:opacity-50",onClick:E,disabled:D,children:"Cancelar"})]})]})}function R3(){var Tt;const e=je(K=>K.works),t=je(K=>K.objectives),n=je(K=>K.workTaxonomy),r=je(K=>K.addWork),i=je(K=>K.updateWork),o=je(K=>K.deleteWork),l=je(K=>K.upsertNodeType),u=je(K=>K.upsertTag),c=je(K=>K.worksLoading),f=ii(),{user:h}=_s(),p=k.useMemo(()=>h?{actorId:h.id,actorEmail:h.email??""}:null,[h]),[y,v]=k.useState(""),[b,w]=k.useState(null),[_,E]=k.useState(new Set),[j,C]=k.useState(new Set),[M,D]=k.useState(new Set),[R,z]=k.useState({}),[F,V]=k.useState(null),[A,O]=k.useState(null),Q=k.useMemo(()=>new Map(t.map(K=>[K.id,K])),[t]),H=k.useMemo(()=>[...t].sort((K,ae)=>(K.name??"").localeCompare(ae.name??"","es")),[t]),q=k.useMemo(()=>(n.nodeTypes??[]).slice().sort((K,ae)=>K.label.localeCompare(ae.label,"en",{sensitivity:"base"})).map(K=>({value:K.key,label:K.label})),[n.nodeTypes]),$=k.useMemo(()=>(n.tags??[]).slice().sort((K,ae)=>K.name.localeCompare(ae.name,"en",{sensitivity:"base"})).map(K=>({value:K.name,label:K.name})),[n.tags]),J=k.useMemo(()=>new Map(e.map(K=>[K.id,K])),[e]),ie=k.useMemo(()=>{const K=new Map;return e.forEach(ae=>{const de=ae.parentWorkId;if(!de)return;const Ee=K.get(de)??[];Ee.push(ae),K.set(de,Ee)}),K.forEach(ae=>{ae.sort((de,Ee)=>de.name.localeCompare(Ee.name,"es",{sensitivity:"base"}))}),K},[e]),L=k.useMemo(()=>{const K=new Map,ae=(de,Ee)=>{if(K.has(de))return K.get(de);const we=J.get(de);if(!we)return"";if(!we.parentWorkId||Ee.has(de))return K.set(de,we.name),we.name;Ee.add(de);const P=ae(we.parentWorkId,Ee);Ee.delete(de);const ee=P?`${P}  ${we.name}`:we.name;return K.set(de,ee),ee};return e.forEach(de=>{ae(de.id,new Set)}),K},[e,J]);k.useEffect(()=>{const K=f.hash,ae="#work-";let de=null;if(K.startsWith(ae)&&(de=K.slice(ae.length)),!de){const P=new URLSearchParams(f.search);de=P.get("workId")??P.get("work")}if(!de)return;E(P=>{if(P.has(de))return P;const ee=new Set(P);return ee.add(de),ee});const Ee=document.getElementById(`work-${de}`);if(!Ee)return;Ee.scrollIntoView({behavior:"smooth",block:"start"}),Ee.classList.add("ring-2","ring-sky-500/60");const we=window.setTimeout(()=>{Ee.classList.remove("ring-2","ring-sky-500/60")},1500);return()=>{window.clearTimeout(we),Ee.classList.remove("ring-2","ring-sky-500/60")}},[f.hash,f.search,e]);const ne=k.useMemo(()=>{const K=new Map,ae=de=>{if(K.has(de))return K.get(de);const Ee=new Set;return(ie.get(de)??[]).forEach(P=>{Ee.add(P.id),ae(P.id).forEach(ee=>Ee.add(ee))}),K.set(de,Ee),Ee};return e.forEach(de=>ae(de.id)),K},[e,ie]),T=k.useCallback((K,ae)=>{var we,P;const de=new Set;K&&(de.add(K),(we=ne.get(K))==null||we.forEach(ee=>de.add(ee)));const Ee=e.filter(ee=>!de.has(ee.id)).map(ee=>({id:ee.id,label:(()=>{var be;const G=L.get(ee.id)??ee.name,se=(be=Q.get(ee.objectiveId))==null?void 0:be.name;return se?`${se}  ${G}`:G})()})).sort((ee,G)=>ee.label.localeCompare(G.label,"es",{sensitivity:"base"}));if(ae&&ae.length>0&&!Ee.some(ee=>ee.id===ae)){const ee=J.get(ae),G=L.get(ae)??(ee==null?void 0:ee.name)??"Trabajo no disponible",se=ee?(P=Q.get(ee.objectiveId))==null?void 0:P.name:void 0,be=se?`${se}  ${G}`:G;Ee.unshift({id:ae,label:be})}return Ee},[e,L,ne,J,Q]),U=k.useMemo(()=>e.map(K=>{var we;const ae=L.get(K.id)??K.name,de=(we=Q.get(K.objectiveId))==null?void 0:we.name,Ee=de?`${de}  ${ae}`:ae;return{id:K.id,label:Ee}}).sort((K,ae)=>K.label.localeCompare(ae.label,"es",{sensitivity:"base"})),[e,L,Q]),Z=k.useMemo(()=>{const K=y.trim().toLowerCase(),ae=we=>{var Oe;if(!K)return!0;const P=((Oe=Q.get(we.objectiveId))==null?void 0:Oe.name)??"",ee=we.parentWorkId?L.get(we.parentWorkId)??"":"",G=we.id?L.get(we.id)??"":"",se=(we.nodeType??"").toLowerCase(),be=Array.isArray(we.tags)?we.tags.join(" "):we.tags??"";return we.name.toLowerCase().includes(K)||(we.subtitle??"").toLowerCase().includes(K)||we.descriptionMarkdown.toLowerCase().includes(K)||P.toLowerCase().includes(K)||ee.toLowerCase().includes(K)||G.toLowerCase().includes(K)||se.includes(K)||be.toLowerCase().includes(K)},de=[],Ee=we=>{if(!we)return 0;let P=1,ee=J.get(we);const G=new Set(we?[we]:[]);for(;ee&&ee.parentWorkId;){const se=ee.parentWorkId;if(!se||G.has(se))break;P+=1,G.add(se),ee=J.get(se)}return P};return e.forEach(we=>{const P=R[we.id],ee=(P==null?void 0:P.data)??{id:we.id,name:we.name,subtitle:we.subtitle??"",nodeType:we.nodeType??"",tags:we.tags??[],descriptionMarkdown:we.descriptionMarkdown,objectiveId:we.objectiveId,parentWorkId:we.parentWorkId??""};!P&&!ae(ee)||de.push({id:we.id,objectiveId:ee.objectiveId,parentWorkId:ee.parentWorkId??"",depth:Ee(ee.parentWorkId),work:we,isNew:!1,isEditing:!!P,form:P==null?void 0:P.data})}),Object.entries(R).filter(([,we])=>we.isNew).forEach(([we,P])=>{ae(P.data)&&de.push({id:we,objectiveId:P.data.objectiveId,parentWorkId:P.data.parentWorkId,depth:Ee(P.data.parentWorkId||void 0),work:void 0,isNew:!0,isEditing:!0,form:P.data})}),de},[e,J,R,Q,L,y]),I=k.useCallback(K=>{var we;const ae=(K.isEditing&&K.form?K.form.parentWorkId:K.parentWorkId)??"";if(!ae)return!1;let de=ae;const Ee=new Set;for(;de&&!Ee.has(de);){if(Ee.add(de),j.has(de))return!0;de=(((we=J.get(de))==null?void 0:we.parentWorkId)??"")||""}return!1},[j,J]),ye=k.useMemo(()=>{const K=new Map;Z.forEach(P=>{const ee=Q.has(P.objectiveId)?P.objectiveId:Sh,G=K.get(ee)??[];G.push(P),K.set(ee,G)});const ae=P=>{var ee,G;if(P.isEditing&&P.form){const se=P.form.name.trim()||(((ee=P.work)==null?void 0:ee.name)??""),be=P.form.parentWorkId&&P.form.parentWorkId.length>0?L.get(P.form.parentWorkId)??((G=J.get(P.form.parentWorkId))==null?void 0:G.name)??"":"";return be?`${be}  ${se}`:se}return P.work?L.get(P.work.id)??P.work.name:P.id},de=(P,ee)=>{const G=ae(P),se=ae(ee);return G.localeCompare(se,"es",{sensitivity:"base"})},Ee=[];H.forEach(P=>{const ee=K.get(P.id);ee&&ee.length&&Ee.push({objective:P,items:ee.slice().sort(de)})});const we=K.get(Sh);return we&&we.length&&Ee.push({objective:void 0,items:we.slice().sort(de)}),Ee},[Z,Q,H,L,J]),me=((Tt=H[0])==null?void 0:Tt.id)??"",pe=(K,ae)=>{z(de=>{const Ee=de[K];return Ee?{...de,[K]:ae(Ee)}:de})},fe=K=>K.length>0?K:[""],W=K=>K.length>0?K:[""],te=K=>{z(ae=>ae[K.id]?ae:{...ae,[K.id]:{data:{id:K.id,name:K.name,subtitle:K.subtitle??"",objectiveId:K.objectiveId,parentWorkId:K.parentWorkId??"",nodeType:K.nodeType??"",tags:K.tags??[],orderHint:K.orderHint??0,nextWorkId:K.nextWorkId??"",variantOfWorkId:K.variantOfWorkId??"",descriptionMarkdown:K.descriptionMarkdown,estimatedMinutes:K.estimatedMinutes,notes:K.notes??"",videoUrls:fe(K.videoUrls.slice()),visibility:K.visibility??"private",collaborators:W(K.collaboratorEmails??[])},isNew:!1,originalId:K.id}}),E(ae=>{const de=new Set(ae);return de.add(K.id),de})},re=()=>{const K=`draft-${Zt()}`;z(ae=>({...ae,[K]:{data:{...G0,id:K,subtitle:"",objectiveId:me},isNew:!0}})),E(ae=>{const de=new Set(ae);return de.add(K),de})},ce=K=>{const ae=`draft-${Zt()}`;z(de=>({...de,[ae]:{data:{id:ae,name:`${K.name} (copia)`,subtitle:K.subtitle??"",objectiveId:K.objectiveId,parentWorkId:K.parentWorkId??"",nodeType:K.nodeType??"",tags:K.tags??[],orderHint:K.orderHint??0,nextWorkId:"",variantOfWorkId:"",descriptionMarkdown:K.descriptionMarkdown,estimatedMinutes:K.estimatedMinutes,notes:K.notes??"",videoUrls:fe(K.videoUrls.slice()),visibility:"private",collaborators:[""]},isNew:!0}})),E(de=>{const Ee=new Set(de);return Ee.add(ae),Ee}),w({type:"success",text:"Duplicacin creada. Ajusta y guarda para confirmarla."})},he=K=>{const ae=`draft-${Zt()}`;z(de=>({...de,[ae]:{data:{...G0,id:ae,subtitle:"",objectiveId:K.objectiveId,parentWorkId:K.id,estimatedMinutes:K.estimatedMinutes,visibility:K.visibility??"private",collaborators:[""]},isNew:!0}})),E(de=>{const Ee=new Set(de);return Ee.add(ae),Ee}),w({type:"success",text:`Creando un trabajo hijo para ${K.name}. Ajusta y guarda para confirmarlo.`})},_e=K=>{E(ae=>{const de=new Set(ae);return de.has(K)?de.delete(K):de.add(K),de})},Ie=K=>{z(ae=>{const de={...ae};return delete de[K],de}),K.startsWith("draft-")&&E(ae=>{const de=new Set(ae);return de.delete(K),de})},We=async K=>{const ae=R[K];if(!ae||F)return;if(!p){w({type:"error",text:"Inicia sesin para guardar este trabajo."});return}const de=(ae.data.parentWorkId??"").trim(),Ee=de.length>0?de:void 0,we=ae.data.nodeType.trim(),P=we.length>0?we:void 0,ee=T3(ae.data.tags??[]),G=Number(ae.data.orderHint)>0?Number(ae.data.orderHint):void 0,se=(ae.data.nextWorkId??"").trim(),be=se.length>0?se:void 0,Oe=(ae.data.variantOfWorkId??"").trim(),Be=Oe.length>0?Oe:void 0,Ce={name:ae.data.name.trim(),subtitle:ae.data.subtitle.trim()||void 0,objectiveId:ae.data.objectiveId,nodeType:P,tags:ee,orderHint:G,nextWorkId:be,variantOfWorkId:Be,descriptionMarkdown:ae.data.descriptionMarkdown,estimatedMinutes:Number(ae.data.estimatedMinutes)||0,notes:ae.data.notes.trim()||void 0,videoUrls:ae.data.videoUrls.map(Ke=>Ke.trim()).filter(Boolean),parentWorkId:Ee,visibility:ae.data.visibility,collaboratorEmails:Array.from(new Set(ae.data.collaborators.map(Ke=>Ke.trim().toLowerCase()).filter(Ke=>Ke.length>0)))};if(!Ce.name){w({type:"error",text:"El nombre es obligatorio."});return}if(!Ce.objectiveId){w({type:"error",text:"Selecciona un objetivo para el trabajo."});return}if(Ce.parentWorkId&&ae.originalId){if(Ce.parentWorkId===ae.originalId){w({type:"error",text:"Un trabajo no puede ser su propio padre."});return}const Ke=ne.get(ae.originalId);if(Ke&&Ke.has(Ce.parentWorkId)){w({type:"error",text:"Selecciona un trabajo padre que no sea un descendiente."});return}}if(ae.originalId&&Ce.nextWorkId===ae.originalId){w({type:"error",text:"Un trabajo no puede tenerse como siguiente."});return}if(ae.originalId&&Ce.variantOfWorkId===ae.originalId){w({type:"error",text:"Un trabajo no puede ser variante de s mismo."});return}const dt=ae.originalId?J.get(ae.originalId):void 0,ct=ae.isNew||((dt==null?void 0:dt.isOwner)??!1);V(K);try{if(ae.isNew){const Ke=await r({name:Ce.name,subtitle:Ce.subtitle,objectiveId:Ce.objectiveId,parentWorkId:Ce.parentWorkId,nodeType:Ce.nodeType,tags:Ce.tags,orderHint:Ce.orderHint,nextWorkId:Ce.nextWorkId,variantOfWorkId:Ce.variantOfWorkId,descriptionMarkdown:Ce.descriptionMarkdown,estimatedMinutes:Ce.estimatedMinutes,notes:Ce.notes,videoUrls:Ce.videoUrls,visibility:Ce.visibility,collaboratorEmails:Ce.collaboratorEmails},p);w({type:"success",text:"Trabajo creado correctamente."}),E(bt=>{const nt=new Set(bt);return nt.delete(K),nt.add(Ke.id),nt})}else if(ae.originalId){const Ke={name:Ce.name,subtitle:Ce.subtitle??null,objectiveId:Ce.objectiveId,parentWorkId:Ce.parentWorkId??null,nodeType:Ce.nodeType??null,tags:Ce.tags,orderHint:Ce.orderHint??null,nextWorkId:Ce.nextWorkId??null,variantOfWorkId:Ce.variantOfWorkId??null,descriptionMarkdown:Ce.descriptionMarkdown,estimatedMinutes:Ce.estimatedMinutes,notes:Ce.notes??null,videoUrls:Ce.videoUrls};ct&&(Ke.visibility=Ce.visibility,Ke.collaboratorEmails=Ce.collaboratorEmails),await i(ae.originalId,Ke,p),w({type:"success",text:"Trabajo actualizado."})}z(Ke=>{const bt={...Ke};return delete bt[K],bt})}catch(Ke){console.error("No se pudo guardar el trabajo",Ke),w({type:"error",text:"No se han podido guardar los cambios. Comprueba tus permisos e intntalo de nuevo."})}finally{V(null)}},Qe=async K=>{var de;if(!p){w({type:"error",text:"Inicia sesin para eliminar trabajos."});return}const ae=(((de=ne.get(K))==null?void 0:de.size)??0)>0;try{if(!await o(K,p)){w({type:"error",text:ae?"No se puede eliminar porque tiene trabajos hijos.":"No se puede eliminar porque est siendo usado en alguna sesin."});return}w({type:"success",text:"Trabajo eliminado."}),z(we=>{const P={...we};return delete P[K],P}),E(we=>{const P=new Set(we);return P.delete(K),P})}catch(Ee){console.error("No se pudo eliminar el trabajo",Ee),w({type:"error",text:"No tienes permisos para eliminar este trabajo o se ha producido un error."})}},ut=async K=>{if(!p){w({type:"error",text:"Inicia sesin para editar trabajos."});return}if(!(K.canEdit??!1)||(K.nodeType??"").trim().toLowerCase()==="style")return;const ae=(K.tags??[]).map(we=>we.trim().toLowerCase()).filter(Boolean),de=ae.includes(Ta),Ee=de?ae.filter(we=>we!==Ta):Array.from(new Set([...ae,Ta]));O(K.id);try{await i(K.id,{tags:Ee},p),w({type:"success",text:de?"Incluido en el plan personal.":"Excluido del plan personal."}),window.setTimeout(()=>w(null),1800)}catch(we){console.error("No se pudo actualizar el trabajo",we),w({type:"error",text:"No se han podido guardar los cambios. Comprueba tus permisos e intntalo de nuevo."})}finally{O(null)}};return g.jsxs("div",{className:"space-y-6",children:[g.jsxs("header",{className:"glass-panel space-y-4 p-6 sm:p-10",children:[g.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-3xl font-bold",children:"Trabajos"}),g.jsx("p",{className:"max-w-2xl text-white/60",children:"Gestiona los ejercicios reutilizables por objetivo. Duplica, edita y ajusta los detalles sin salir del listado."})]}),g.jsxs("div",{className:"flex w-full flex-col gap-3 sm:w-auto sm:flex-row sm:items-center",children:[g.jsx("input",{type:"search",className:"input-field w-full sm:w-72",value:y,onChange:K=>v(K.target.value),placeholder:"Buscar por nombre, descripcin u objetivo"}),g.jsx(wr,{to:"/catalog/taxonomy",className:"btn-secondary",children:"Taxonomy"}),g.jsx("button",{type:"button",className:"btn-primary",onClick:re,children:"Nuevo trabajo"}),c?g.jsx("span",{className:"text-xs text-white/60 sm:ml-3",children:"Sincronizando trabajos"}):null]})]}),b&&g.jsx("div",{className:De("rounded-2xl border px-4 py-3 text-sm",b.type==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-rose-500/40 bg-rose-500/10 text-rose-200"),children:b.text})]}),g.jsx("section",{className:"space-y-6",children:ye.length===0?c?g.jsx("div",{className:"glass-panel p-10 text-center text-white/60",children:"Sincronizando trabajos"}):g.jsx("div",{className:"glass-panel p-10 text-center text-white/50",children:"An no hay trabajos guardados. Empieza creando uno con el botn Nuevo trabajo."}):ye.map(({objective:K,items:ae})=>{const de=K?K.name:"Sin objetivo asignado",Ee=(K==null?void 0:K.id)??Sh,we=M.has(Ee);return g.jsxs("div",{className:"glass-panel space-y-4 p-6",children:[g.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("button",{type:"button",onClick:()=>D(P=>{const ee=new Set(P);return ee.has(Ee)?ee.delete(Ee):ee.add(Ee),ee}),className:"inline-flex h-8 w-8 items-center justify-center rounded-full border border-white/15 bg-white/5 text-sm font-semibold text-white/70 transition hover:border-white/30 hover:text-white","aria-label":we?"Expandir grupo":"Colapsar grupo",title:we?"Expandir":"Colapsar",children:we?"":""}),g.jsx("h3",{className:"text-lg font-semibold text-white",children:de}),g.jsx($i,{objective:K,size:"sm"})]}),g.jsxs("span",{className:"rounded-full border border-white/10 px-3 py-1 text-xs text-white/60",children:[ae.length," trabajo",ae.length===1?"":"s"]})]}),we?null:g.jsx("div",{className:"space-y-4",children:ae.filter(P=>!I(P)).map(P=>{var ct,Ke,bt,nt,Wt,It,gn;const ee=_.has(P.id),G=(P.isEditing&&P.form?P.form.parentWorkId:P.parentWorkId)??"",se=P.isEditing?T((ct=P.work)==null?void 0:ct.id,G):[],Oe=(P.work?ie.get(P.work.id)??[]:[]).length,Be=j.has(P.id);if(P.isEditing&&P.form){const at=P.isNew||(((Ke=P.work)==null?void 0:Ke.canEdit)??!1),yn=P.isNew||(((bt=P.work)==null?void 0:bt.isOwner)??!1),yt=P.isNew||(((nt=P.work)==null?void 0:nt.isOwner)??!1);return g.jsx(A3,{form:P.form,objectiveOptions:H,parentOptions:se,workOptions:U,nodeTypeOptions:q,tagOptions:$,onCreateNodeType:l,onCreateTag:u,depth:P.depth,onFieldChange:Ge=>pe(P.id,st=>{const rt={...st.data,...Ge};if(Ge.parentWorkId!==void 0&&Ge.parentWorkId.length>0){const kt=J.get(Ge.parentWorkId);kt&&(rt.objectiveId=kt.objectiveId)}return Ge.visibility==="private"&&(rt.collaborators=[""]),{...st,data:rt}}),onVideoChange:(Ge,st)=>pe(P.id,rt=>{const kt=rt.data.videoUrls.slice();return kt[Ge]=st,{...rt,data:{...rt.data,videoUrls:kt}}}),onAddVideo:()=>pe(P.id,Ge=>({...Ge,data:{...Ge.data,videoUrls:[...Ge.data.videoUrls,""]}})),onRemoveVideo:Ge=>pe(P.id,st=>{const rt=st.data.videoUrls.slice();return rt.splice(Ge,1),{...st,data:{...st.data,videoUrls:rt.length?rt:[""]}}}),onCollaboratorChange:(Ge,st)=>pe(P.id,rt=>{const kt=rt.data.collaborators.slice();return kt[Ge]=st,{...rt,data:{...rt.data,collaborators:kt}}}),onAddCollaborator:()=>pe(P.id,Ge=>Ge.data.collaborators.length>=z1?Ge:{...Ge,data:{...Ge.data,collaborators:[...Ge.data.collaborators,""]}}),onRemoveCollaborator:Ge=>pe(P.id,st=>{const rt=st.data.collaborators.slice();return rt.splice(Ge,1),rt.length||rt.push(""),{...st,data:{...st.data,collaborators:rt}}}),onSave:()=>void We(P.id),onCancel:()=>Ie(P.id),isNew:P.isNew,canEditContent:at,canManageSharing:yn,isSaving:F===P.id,isOwner:yt,ownerEmail:(Wt=P.work)==null?void 0:Wt.ownerEmail},P.id)}if(!P.work)return null;const Ce=P.work.nextWorkId?L.get(P.work.nextWorkId)??((It=J.get(P.work.nextWorkId))==null?void 0:It.name):void 0,dt=P.work.variantOfWorkId?L.get(P.work.variantOfWorkId)??((gn=J.get(P.work.variantOfWorkId))==null?void 0:gn.name):void 0;return g.jsx(P3,{work:P.work,childCount:Oe,depth:P.depth,expanded:ee,isTreeCollapsed:Be,isPersonalExcluded:(P.work.tags??[]).map(at=>at.trim().toLowerCase()).includes(Ta),canTogglePersonal:(P.work.canEdit??!1)&&(P.work.nodeType??"").trim().toLowerCase()!=="style",personalToggleBusy:A===P.id,nextLabel:Ce,variantLabel:dt,onToggle:()=>_e(P.id),onToggleTree:()=>C(at=>{const yn=new Set(at);return yn.has(P.id)?yn.delete(P.id):yn.add(P.id),yn}),onTogglePersonal:()=>{P.work&&ut(P.work)},onEdit:()=>{const at=P.work;at&&(at.canEdit??!1)&&te(at)},onDuplicate:()=>{const at=P.work;at&&(at.canEdit??!1)&&ce(at)},onCreateChild:()=>{const at=P.work;at&&(at.canEdit??!1)&&he(at)},onDelete:()=>{const at=P.work;at&&(at.isOwner??!1)&&Qe(at.id)}},P.id)})})]},(K==null?void 0:K.id)??"sin-objetivo")})})]})}function K0(e){return e.reduce((t,n)=>(t[n]=(t[n]??0)+1,t),{})}function O3(){const{works:e,workTaxonomy:t,upsertNodeType:n,removeNodeType:r,upsertTag:i,removeTag:o}=je(_=>({works:_.works,workTaxonomy:_.workTaxonomy,upsertNodeType:_.upsertNodeType,removeNodeType:_.removeNodeType,upsertTag:_.upsertTag,removeTag:_.removeTag})),[l,u]=k.useState(""),[c,f]=k.useState(""),[h,p]=k.useState(null),y=k.useMemo(()=>{const _=e.map(E=>(E.nodeType??"").trim().toLowerCase()).filter(Boolean);return K0(_)},[e]),v=k.useMemo(()=>{const _=e.flatMap(E=>(E.tags??[]).map(j=>j.trim().toLowerCase()).filter(Boolean));return K0(_)},[e]),b=t.nodeTypes.slice().sort((_,E)=>_.label.localeCompare(E.label,"en",{sensitivity:"base"})),w=t.tags.slice().sort((_,E)=>_.name.localeCompare(E.name,"en",{sensitivity:"base"}));return g.jsxs("div",{className:"space-y-6",children:[g.jsx("header",{className:"flex flex-wrap items-start justify-between gap-4 rounded-3xl border border-white/10 bg-white/5 px-6 py-5",children:g.jsxs("div",{children:[g.jsx("p",{className:"font-display text-2xl font-semibold",children:"Taxonomy"}),g.jsx("p",{className:"mt-1 text-sm text-white/60",children:"Node types and tags used across the catalog and personal planning."}),g.jsx("p",{className:"mt-2 text-sm",children:g.jsx(wr,{to:"/catalog",className:"text-sky-300 hover:text-sky-200",children:" Back to Catalog"})})]})}),h?g.jsx("div",{className:`rounded-2xl border px-4 py-3 text-sm ${h.type==="success"?"border-emerald-500/30 bg-emerald-500/10 text-emerald-100":"border-rose-500/30 bg-rose-500/10 text-rose-100"}`,children:h.text}):null,g.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[g.jsxs("section",{className:"rounded-3xl border border-white/10 bg-white/5 p-6",children:[g.jsx("div",{className:"flex items-start justify-between gap-4",children:g.jsxs("div",{children:[g.jsx("h2",{className:"text-lg font-semibold",children:"Node types"}),g.jsx("p",{className:"mt-1 text-sm text-white/60",children:"Used by works and group rules. Keys are stored in works."})]})}),g.jsxs("div",{className:"mt-5 flex flex-col gap-3 sm:flex-row sm:items-end",children:[g.jsxs("div",{className:"flex-1",children:[g.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-white/50",children:"New node type"}),g.jsx("input",{className:"input-field mt-2",value:l,onChange:_=>u(_.target.value),placeholder:"e.g. Dance figures"})]}),g.jsx("button",{type:"button",className:"btn-primary",onClick:()=>{const _=n(l);if(!_){p({type:"error",text:"Please enter a valid node type."});return}u(""),p({type:"success",text:`Node type created: ${_}`})},children:"Add"})]}),g.jsxs("div",{className:"mt-6 space-y-2",children:[b.map(_=>{const E=(y[_.key]??0)>0;return g.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 rounded-2xl border border-white/10 bg-slate-950/30 px-4 py-3",children:[g.jsxs("div",{children:[g.jsx("p",{className:"font-semibold text-white",children:_.label}),g.jsxs("p",{className:"text-xs text-white/50",children:["key: ",g.jsx("span",{className:"font-mono",children:_.key}),"  used by ",y[_.key]??0," works"]})]}),g.jsx("button",{type:"button",disabled:E,className:"rounded-full border border-white/15 bg-white/5 px-3 py-2 text-xs font-semibold text-white/70 transition hover:border-white/30 hover:text-white disabled:opacity-50",title:E?"Cannot delete: in use":"Delete",onClick:()=>{const j=r(_.key);p(j?{type:"success",text:`Node type removed: ${_.key}`}:{type:"error",text:"Cannot remove node type (it may be in use)."})},children:"Delete"})]},_.key)}),b.length===0?g.jsx("p",{className:"text-sm text-white/60",children:"No node types yet."}):null]})]}),g.jsxs("section",{className:"rounded-3xl border border-white/10 bg-white/5 p-6",children:[g.jsx("div",{className:"flex items-start justify-between gap-4",children:g.jsxs("div",{children:[g.jsx("h2",{className:"text-lg font-semibold",children:"Tags"}),g.jsx("p",{className:"mt-1 text-sm text-white/60",children:"Lowercase slugs (spaces become hyphens). Deleting is blocked if used."})]})}),g.jsxs("div",{className:"mt-5 flex flex-col gap-3 sm:flex-row sm:items-end",children:[g.jsxs("div",{className:"flex-1",children:[g.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-white/50",children:"New tag"}),g.jsx("input",{className:"input-field mt-2",value:c,onChange:_=>f(_.target.value),placeholder:"e.g. bei-shaolin"})]}),g.jsx("button",{type:"button",className:"btn-primary",onClick:()=>{const _=i(c);if(!_){p({type:"error",text:"Please enter a valid tag."});return}f(""),p({type:"success",text:`Tag created: ${_}`})},children:"Add"})]}),g.jsxs("div",{className:"mt-6 space-y-2",children:[w.map(_=>{const E=(v[_.name]??0)>0;return g.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 rounded-2xl border border-white/10 bg-slate-950/30 px-4 py-3",children:[g.jsxs("div",{children:[g.jsx("p",{className:"font-semibold text-white",children:_.name}),g.jsxs("p",{className:"text-xs text-white/50",children:["used by ",v[_.name]??0," works"]})]}),g.jsx("button",{type:"button",disabled:E,className:"rounded-full border border-white/15 bg-white/5 px-3 py-2 text-xs font-semibold text-white/70 transition hover:border-white/30 hover:text-white disabled:opacity-50",title:E?"Cannot delete: in use":"Delete",onClick:()=>{const j=o(_.name);p(j?{type:"success",text:`Tag removed: ${_.name}`}:{type:"error",text:"Cannot remove tag (it may be in use)."})},children:"Delete"})]},_.name)}),w.length===0?g.jsx("p",{className:"text-sm text-white/60",children:"No tags yet."}):null]})]})]})]})}const Eh={name:"",colorHex:"#60a5fa",descriptionMarkdown:""},J0=["#F97316","#FB7185","#F43F5E","#EC4899","#D946EF","#A855F7","#8B5CF6","#6366F1","#4F46E5","#3B82F6","#38BDF8","#0EA5E9","#06B6D4","#14B8A6","#0D9488","#10B981","#22C55E","#65A30D","#84CC16","#A3E635","#FACC15","#FBBF24","#F59E0B","#EA580C","#C2410C","#E11D48","#EF4444","#F87171","#FB923C","#F472B6","#FDE047","#7C3AED"];function M3(){const e=je(w=>w.objectives),t=je(w=>w.addObjective),n=je(w=>w.updateObjective),r=je(w=>w.deleteObjective),i=je(w=>w.works),[o,l]=k.useState(Eh),[u,c]=k.useState(null),f=k.useMemo(()=>{const w=new Map;return i.forEach(_=>{w.set(_.objectiveId,(w.get(_.objectiveId)??0)+1)}),w},[i]),h=k.useMemo(()=>[...e].sort((w,_)=>(w.name??"").localeCompare(_.name??"","es")),[e]),p=w=>{if(w.preventDefault(),!o.name.trim()){c({type:"error",text:"El nombre es obligatorio."});return}const _={name:o.name.trim(),colorHex:o.colorHex,descriptionMarkdown:o.descriptionMarkdown};o.id?(n(o.id,_),c({type:"success",text:"Objetivo actualizado."})):(t(_),c({type:"success",text:"Objetivo creado."})),l(Eh)},y=w=>{l({id:w.id,name:w.name,colorHex:w.colorHex,descriptionMarkdown:w.descriptionMarkdown})},v=w=>{const _=r(w);c(_?{type:"success",text:"Objetivo eliminado."}:{type:"error",text:"No se puede eliminar porque tiene trabajos asociados."})},b=()=>{if(e.length===0){c({type:"error",text:"No hay objetivos a los que asignar colores."});return}const w=[...J0];e.map((E,j)=>{const C=w[j%w.length];return{id:E.id,colorHex:C}}).forEach(({id:E,colorHex:j})=>n(E,{colorHex:j})),c({type:"success",text:"Colores repartidos equitativamente entre los objetivos."})};return g.jsxs("div",{className:"space-y-6",children:[g.jsxs("header",{className:"glass-panel p-6 sm:p-10",children:[g.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-3xl font-bold",children:"Objetivos"}),g.jsx("p",{className:"text-white/60",children:"Define categoras de trabajo con color y contexto para identificar visualmente cada ejercicio."})]}),g.jsx("div",{className:"flex flex-wrap gap-3",children:g.jsx("button",{type:"button",className:"btn-secondary",onClick:b,children:"Repartir colores"})})]}),u&&g.jsx("div",{className:`mt-4 rounded-2xl border px-4 py-3 text-sm ${u.type==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-rose-500/40 bg-rose-500/10 text-rose-200"}`,children:u.text})]}),g.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.1fr_1.5fr]",children:[g.jsxs("section",{className:"glass-panel p-6",children:[g.jsx("h2",{className:"text-xl font-semibold text-white",children:o.id?"Editar objetivo":"Nuevo objetivo"}),g.jsxs("form",{className:"mt-4 space-y-4",onSubmit:p,children:[g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Nombre"}),g.jsx("input",{type:"text",className:"input-field",value:o.name,onChange:w=>l(_=>({..._,name:w.target.value})),placeholder:"Ej. Resistencia, Tcnica, Juego",required:!0})]}),g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Color identificativo"}),g.jsxs("div",{className:"flex flex-wrap gap-3",children:[g.jsx("input",{type:"color",className:"h-12 w-12 cursor-pointer rounded-full border border-white/20 bg-transparent",value:o.colorHex,onChange:w=>l(_=>({..._,colorHex:w.target.value})),"aria-label":"Elegir color personalizado"}),g.jsx("input",{type:"text",className:"input-field max-w-[140px]",value:o.colorHex,onChange:w=>l(_=>({..._,colorHex:w.target.value})),placeholder:"#60a5fa","aria-label":"Cdigo hex del color"})]}),g.jsx("div",{className:"grid grid-cols-8 gap-2 rounded-3xl border border-white/10 bg-white/5 p-3",children:J0.map(w=>g.jsx("button",{type:"button",onClick:()=>l(_=>({..._,colorHex:w})),className:De("relative flex h-9 w-9 items-center justify-center rounded-full border border-white/20 transition hover:scale-105 focus:outline-none focus:ring-2 focus:ring-white/60",o.colorHex.toLowerCase()===w.toLowerCase()&&"ring-2 ring-white/80 ring-offset-2 ring-offset-slate-900"),style:{backgroundColor:w},"aria-label":`Seleccionar color ${w}`,children:o.colorHex.toLowerCase()===w.toLowerCase()&&g.jsx("span",{className:"text-xs font-semibold text-slate-900",children:""})},w))})]}),g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Descripcin (Markdown)"}),g.jsx("textarea",{className:"input-field min-h-[140px]",value:o.descriptionMarkdown,onChange:w=>l(_=>({..._,descriptionMarkdown:w.target.value})),placeholder:"Explica cundo usar este tipo de trabajo, objetivos pedaggicos, etc."})]}),g.jsxs("div",{className:"flex gap-3",children:[g.jsx("button",{type:"submit",className:"btn-primary",children:o.id?"Guardar objetivo":"Crear objetivo"}),o.id&&g.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>l(Eh),children:"Cancelar edicin"})]})]})]}),g.jsx("section",{className:"space-y-6",children:h.length===0?g.jsx("div",{className:"glass-panel p-10 text-center text-white/50",children:"An no has creado objetivos. Crea uno con el formulario para clasificarlos por color y descripcin."}):h.map(w=>g.jsxs("div",{className:"glass-panel space-y-4 p-6",children:[g.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[g.jsx($i,{objective:w}),g.jsxs("div",{className:"flex items-center gap-3 text-xs text-white/60",children:[g.jsxs("span",{children:[f.get(w.id)??0," trabajos"]}),g.jsx("button",{type:"button",className:"btn-secondary px-3 py-1 text-xs",onClick:()=>y(w),children:"Editar"}),g.jsx("button",{type:"button",className:"inline-flex items-center justify-center rounded-full border border-rose-500/40 px-3 py-1 text-xs font-semibold text-rose-300",onClick:()=>v(w.id),children:"Eliminar"})]})]}),g.jsx(ws,{content:w.descriptionMarkdown})]},w.id))})]})]})}const _h={name:"",notes:"",active:!0};function D3(){const e=je(h=>h.assistants),t=je(h=>h.addAssistant),n=je(h=>h.updateAssistant),r=je(h=>h.deleteAssistant),[i,o]=k.useState(_h),[l,u]=k.useState(null),c=h=>{if(h.preventDefault(),!i.name.trim()){u({type:"error",text:"El nombre es obligatorio."});return}const p={name:i.name.trim(),notes:i.notes,active:i.active};i.id?(n(i.id,p),u({type:"success",text:"Asistente actualizado."})):(t(p),u({type:"success",text:"Asistente aadido."})),o(_h)},f=h=>{o({id:h.id,name:h.name,notes:h.notes??"",active:h.active})};return g.jsxs("div",{className:"space-y-6",children:[g.jsxs("header",{className:"glass-panel p-6 sm:p-10",children:[g.jsx("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:g.jsxs("div",{children:[g.jsx("h1",{className:"text-3xl font-bold",children:"Asistentes"}),g.jsx("p",{className:"text-white/60",children:"Mantn una lista base de alumnado para registrar asistencia rpidamente durante cada sesin."})]})}),l&&g.jsx("div",{className:De("mt-4 rounded-2xl border px-4 py-3 text-sm",l.type==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-rose-500/40 bg-rose-500/10 text-rose-200"),children:l.text})]}),g.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.1fr_1.5fr]",children:[g.jsxs("section",{className:"glass-panel p-6",children:[g.jsx("h2",{className:"text-xl font-semibold text-white",children:i.id?"Editar asistente":"Nuevo asistente"}),g.jsxs("form",{className:"mt-4 space-y-4",onSubmit:c,children:[g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Nombre"}),g.jsx("input",{type:"text",className:"input-field",value:i.name,onChange:h=>o(p=>({...p,name:h.target.value})),placeholder:"Nombre y apellidos",required:!0})]}),g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Notas"}),g.jsx("textarea",{className:"input-field min-h-[120px]",value:i.notes,onChange:h=>o(p=>({...p,notes:h.target.value})),placeholder:"Observaciones, nivel, lesiones, etc."})]}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("input",{id:"assistant-active",type:"checkbox",className:"h-5 w-5 rounded border border-white/20 bg-white/10 text-sky-400",checked:i.active,onChange:h=>o(p=>({...p,active:h.target.checked}))}),g.jsx("label",{htmlFor:"assistant-active",className:"text-sm text-white/70",children:"Activo (aparecer en los listados de asistencia)"})]}),g.jsxs("div",{className:"flex gap-3",children:[g.jsx("button",{type:"submit",className:"btn-primary",children:i.id?"Guardar asistente":"Aadir asistente"}),i.id&&g.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>o(_h),children:"Cancelar edicin"})]})]})]}),g.jsx("section",{className:"space-y-4",children:e.length===0?g.jsx("div",{className:"glass-panel p-10 text-center text-white/50",children:"Todava no tienes asistentes guardados. Crea uno desde el formulario para empezar a marcar asistencia en sesiones."}):e.map(h=>g.jsxs("div",{className:"glass-panel flex flex-col gap-4 p-6 sm:flex-row sm:items-start sm:justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-lg font-semibold text-white",children:h.name}),h.notes?g.jsx("p",{className:"text-sm text-white/60",children:h.notes}):null]}),g.jsxs("div",{className:"flex flex-col items-start gap-3 sm:items-end",children:[g.jsx("span",{className:De("rounded-full border px-3 py-1 text-xs font-semibold",h.active?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-white/20 bg-white/5 text-white/60"),children:h.active?"Activo":"Inactivo"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{type:"button",className:"btn-secondary px-3 py-1 text-xs",onClick:()=>f(h),children:"Editar"}),g.jsx("button",{type:"button",className:"inline-flex items-center justify-center rounded-full border border-rose-500/40 px-3 py-1 text-xs font-semibold text-rose-300",onClick:()=>r(h.id),children:"Eliminar"})]})]})]},h.id))})]})]})}function uo(e,t){return g.jsxs("div",{className:"flex items-center justify-between rounded-2xl border border-white/10 bg-white/5 px-4 py-2 text-sm text-white/70",children:[g.jsx("span",{children:e}),g.jsx("span",{className:"font-semibold text-white",children:t})]},e)}function L3(){var c,f,h,p,y,v;const e=je(b=>b.exportBackup),t=je(b=>b.importBackup),[n,r]=k.useState(null),[i,o]=k.useState(null),l=()=>{try{const b=e(),w=new Blob([JSON.stringify(b,null,2)],{type:"application/json"}),_=URL.createObjectURL(w),E=document.createElement("a");E.href=_,E.download=`sport-planner-backup-${new Date().toISOString().slice(0,10)}.json`,E.click(),URL.revokeObjectURL(_),r({type:"success",text:"Backup exportado correctamente."})}catch(b){console.error(b),r({type:"error",text:"No se pudo exportar el backup."})}},u=async b=>{var _;const w=(_=b.target.files)==null?void 0:_[0];if(w)try{const E=await w.text(),j=JSON.parse(E);t(j),o(j),r({type:"success",text:"Datos importados correctamente."})}catch(E){console.error(E),r({type:"error",text:"No se pudo importar el archivo. Revisa que sea un JSON vlido."})}finally{b.target.value=""}};return g.jsxs("div",{className:"space-y-6",children:[g.jsxs("header",{className:"glass-panel p-6 sm:p-10",children:[g.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-3xl font-bold",children:"Backups"}),g.jsx("p",{className:"text-white/60",children:"Exporta e importa toda tu informacin en JSON versionado para compartir o restaurar en cualquier momento."})]}),g.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row",children:[g.jsx("button",{type:"button",className:"btn-primary",onClick:l,children:"Descargar backup"}),g.jsxs("label",{className:"btn-secondary cursor-pointer",children:["Importar backup",g.jsx("input",{type:"file",accept:"application/json",className:"hidden",onChange:u})]})]})]}),n&&g.jsx("div",{className:`mt-4 rounded-2xl border px-4 py-3 text-sm ${n.type==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-rose-500/40 bg-rose-500/10 text-rose-200"}`,children:n.text})]}),i&&g.jsxs("section",{className:"glass-panel space-y-4 p-6",children:[g.jsx("h2",{className:"text-xl font-semibold text-white",children:"ltima importacin"}),g.jsxs("p",{className:"text-sm text-white/60",children:["Versin del backup: ",i.version]}),g.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[uo("Objetivos",((c=i.objetivos)==null?void 0:c.length)??0),uo("Trabajos",((f=i.trabajos)==null?void 0:f.length)??0),uo("Sesiones",((h=i.sesiones)==null?void 0:h.length)??0),uo("Asistentes",((p=i.asistentes)==null?void 0:p.length)??0),uo("Sesiones  Trabajos",((y=i.sesiones_trabajos)==null?void 0:y.length)??0),uo("Sesiones  Asistencias",((v=i.sesiones_asistencias)==null?void 0:v.length)??0)]})]}),g.jsxs("section",{className:"glass-panel space-y-3 p-6 text-sm text-white/70",children:[g.jsx("h2",{className:"text-lg font-semibold text-white",children:"Consejos"}),g.jsxs("ul",{className:"list-disc space-y-2 pl-5",children:[g.jsx("li",{children:"Guarda tus backups en un servicio en la nube para poder restaurarlos desde cualquier dispositivo."}),g.jsx("li",{children:"Antes de importar, realiza una exportacin por seguridad. La restauracin sobrescribe los datos actuales sin posibilidad de deshacer."}),g.jsx("li",{children:"Los backups mantienen los IDs, as que puedes sincronizar manualmente varias instalaciones si lo necesitas."})]})]})]})}function $3(){const{signInWithPassword:e,signUpWithPassword:t,session:n,loading:r}=_s(),[i,o]=k.useState("login"),[l,u]=k.useState(""),[c,f]=k.useState(""),[h,p]=k.useState(""),[y,v]=k.useState(!1),[b,w]=k.useState(null),[_,E]=k.useState(null);if(!r&&n)return g.jsx(wc,{to:"/",replace:!0});const j=async M=>{if(M.preventDefault(),w(null),E(null),!l||!c){w("Introduce tu email y contrasea.");return}if(i==="register"&&c!==h){w("Las contraseas no coinciden.");return}try{v(!0),i==="login"?await e(l,c):(await t(l,c),E("Revisa tu correo para confirmar la cuenta y vuelve a iniciar sesin."))}catch(D){const R=D instanceof Error?D.message:"No se pudo completar la operacin.";w(R)}finally{v(!1)}},C=()=>{o(M=>M==="login"?"register":"login"),w(null),E(null),f(""),p("")};return g.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-950 px-4 py-12",children:g.jsxs("div",{className:"w-full max-w-md rounded-3xl border border-white/10 bg-slate-900/80 p-8 shadow-2xl backdrop-blur",children:[g.jsxs("header",{className:"mb-8 text-center",children:[g.jsx("div",{className:"mx-auto mb-4 flex h-14 w-14 items-center justify-center rounded-full bg-gradient-to-br from-sky-500 to-indigo-500 text-xl font-bold text-white",children:"SP"}),g.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-white",children:i==="login"?"Inicia sesin":"Crea tu cuenta"}),g.jsx("p",{className:"mt-2 text-sm text-white/60",children:"Accede a tus planes desde cualquier dispositivo con Supabase."})]}),g.jsxs("form",{className:"space-y-5",onSubmit:j,children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{htmlFor:"email",className:"block text-xs font-semibold uppercase tracking-wide text-white/50",children:"Email"}),g.jsx("input",{id:"email",type:"email",required:!0,className:"input-field w-full",value:l,onChange:M=>u(M.target.value),placeholder:"tu@correo.com",autoComplete:"email"})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{htmlFor:"password",className:"block text-xs font-semibold uppercase tracking-wide text-white/50",children:"Contrasea"}),g.jsx("input",{id:"password",type:"password",required:!0,className:"input-field w-full",value:c,onChange:M=>f(M.target.value),autoComplete:i==="login"?"current-password":"new-password"})]}),i==="register"&&g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{htmlFor:"confirmPassword",className:"block text-xs font-semibold uppercase tracking-wide text-white/50",children:"Confirmar contrasea"}),g.jsx("input",{id:"confirmPassword",type:"password",required:!0,className:"input-field w-full",value:h,onChange:M=>p(M.target.value),autoComplete:"new-password"})]}),b&&g.jsx("div",{className:"rounded-xl border border-red-500/30 bg-red-500/10 px-4 py-3 text-sm text-red-200",children:b}),_&&g.jsx("div",{className:"rounded-xl border border-emerald-500/30 bg-emerald-500/10 px-4 py-3 text-sm text-emerald-200",children:_}),g.jsx("button",{type:"submit",className:"btn-primary w-full justify-center",disabled:y,children:y?"Procesando":i==="login"?"Entrar":"Crear cuenta"})]}),g.jsx("footer",{className:"mt-6 text-center text-sm text-white/60",children:i==="login"?g.jsx("button",{type:"button",className:"text-sky-300 hover:text-sky-200",onClick:C,children:"No tienes cuenta? Regstrate"}):g.jsx("button",{type:"button",className:"text-sky-300 hover:text-sky-200",onClick:C,children:"Ya tienes cuenta? Inicia sesin"})})]})})}qe.locale("es");const Hu="personal-exclude",Ch={ok:"OK",doubt:"Dudosa",fail:"Fallo"},Q0={ok:"border-emerald-500/50 bg-emerald-500/15 text-emerald-100 hover:border-emerald-400",doubt:"border-amber-400/40 bg-amber-500/10 text-amber-200 hover:border-amber-300",fail:"border-rose-500/50 bg-rose-500/10 text-rose-200 hover:border-rose-400"},F3={ok:"border-emerald-500/25 bg-emerald-500/10",doubt:"border-amber-400/25 bg-amber-500/10",fail:"border-rose-500/25 bg-rose-500/10"};function qc(e){return Array.from(new Set((e??[]).map(t=>t.trim().toLowerCase()).filter(t=>t.length>0)))}function mo(e,t){const n=qc(e.tags),r=e.nodeType??"work";return!(t.byWorkIds&&t.byWorkIds.length>0&&!t.byWorkIds.includes(e.id)||t.byNodeTypes&&t.byNodeTypes.length>0&&!t.byNodeTypes.includes(r)||t.byTags&&t.byTags.length>0&&!t.byTags.map(o=>o.trim().toLowerCase()).filter(Boolean).every(o=>n.includes(o)))}function B1(e,t){const n=e.nodeType??"work",r=t.targetsDays[n]??t.targetsDays.work??7,i=qc(e.tags),o=(t.overrides??[]).reduce((u,c)=>{var p,y;const f=((y=(p=c.match)==null?void 0:p.tagsAny)==null?void 0:y.map(v=>v.trim().toLowerCase()).filter(Boolean))??[];return f.length===0?u:f.some(v=>i.includes(v))?u*(c.multiplier||1):u},1);return Math.max(1,Math.round(r*o))}function z3(e){return(e.nodeType??"").trim().toLowerCase()!=="style"}function Vu(e,t){const n=typeof e.estimatedMinutes=="number"?e.estimatedMinutes:0;if(Number.isFinite(n)&&n>0)return n;const r=(e.nodeType??"work").trim().toLowerCase()||"work",i=t.defaultMinutesByNodeType[r]??t.defaultMinutesByNodeType.work??3;return Math.max(.25,Number(i)||3)}function U1(e){var h,p,y;const t=e.groups??[];if(t.length>0)return[...t].sort((v,b)=>(v.order??0)-(b.order??0));const n=Math.max(0,Number((h=e.template)==null?void 0:h.focusMinutes)||18),r=Math.max(0,Number((p=e.template)==null?void 0:p.rouletteMinutes)||10),i=Math.max(0,Number((y=e.template)==null?void 0:y.recapMinutes)||0),o=e.focusSelectors??[],l=e.rouletteSelectors??[],u=o.length>0?o:[{byNodeTypes:["segment","form"]}],c=l.length>0?l:[{byNodeTypes:["technique"]},{byTags:["roulette"]}],f=[{id:"formas",name:"Formas",enabled:!0,order:1,type:"work",limitMode:"minutes",minutesBudget:n,strategy:"overdue",hierarchyRule:"prefer_leaves",include:u,exclude:[]},{id:"tecnicas",name:"Tcnicas",enabled:!0,order:2,type:"work",limitMode:"minutes",minutesBudget:r,strategy:"weighted",hierarchyRule:"allow_all",include:c,exclude:[]}];return i>0&&f.push({id:"recap",name:"Recap",enabled:!0,order:99,type:"note",limitMode:"minutes",minutesBudget:i}),f}function B3(e){let t=2166136261;for(let n=0;n<e.length;n+=1)t^=e.charCodeAt(n),t=Math.imul(t,16777619);return t>>>0}function U3(e){let t=e>>>0;return()=>{t=t+1831565813>>>0;let n=Math.imul(t^t>>>15,1|t);return n^=n+Math.imul(n^n>>>7,61|n),((n^n>>>14)>>>0)/4294967296}}function W3(e,t,n){const r=U3(B3(n));return e.map(i=>{const o=Math.max(1e-4,t(i)),l=Math.max(1e-9,r()),u=-Math.log(l)/o;return{item:i,score:u}}).sort((i,o)=>i.score-o.score).map(({item:i})=>i)}function H3(e){const t=new Map;return e.forEach(n=>{n.workItems.forEach(r=>{if(!((r.completed??!1)||typeof r.result<"u"))return;const o=t.get(r.workId);(!o||qe(n.date).isAfter(o.date))&&t.set(r.workId,{date:n.date,result:r.result,effort:r.effort})})}),t}function V3(e){const{works:t,personalSessions:n,cadence:r,today:i}=e,o=H3(n);return t.filter(l=>z3(l)).filter(l=>!qc(l.tags).includes(Hu)).map(l=>{const u=o.get(l.id),c=B1(l,r);if(!u)return{work:l,targetDays:c,overdueScore:1e4};const f=Math.max(qe(i).diff(qe(u.date),"day"),0),h=Math.max(f-c,0);return{work:l,targetDays:c,lastSeen:u.date,daysSince:f,overdueScore:h,lastResult:u.result}}).sort((l,u)=>{if(u.overdueScore!==l.overdueScore)return u.overdueScore-l.overdueScore;const c=l.daysSince??1e4,f=u.daysSince??1e4;return f!==c?f-c:l.work.name.localeCompare(u.work.name,"es",{sensitivity:"base"})})}function q3(e){return e?qe(e).format("D MMM YYYY"):"Nunca"}function Y3(e){const{dueList:t,plan:n,today:r,childCountByWorkId:i}=e,o=n.limitMode==="count"||n.limitMode==="both",l=n.limitMode==="minutes"||n.limitMode==="both",u=o?Math.max(1,Math.round(n.maxItems||12)):Number.POSITIVE_INFINITY,c=l?Math.max(0,Number(n.minutesBudget)||0):Number.POSITIVE_INFINITY,f=new Set([].filter(V=>(V.completed??!1)||typeof V.result<"u").map(V=>V.workId)),h=t.filter(V=>!f.has(V.work.id)),p=qe(r).day(),y=U1(n).filter(V=>V.enabled).filter(V=>{const A=V.daysOfWeek??[];return A.length===0||A.includes(p)}).sort((V,A)=>(V.order??0)-(A.order??0)),v=y.filter(V=>(V.type??"work")==="note").reduce((V,A)=>A.limitMode==="minutes"||A.limitMode==="both"?V+Math.max(0,Number(A.minutesBudget)||0):V,0),b=Number.isFinite(c)?Math.max(0,c-v):Number.POSITIVE_INFINITY,w=`kungfu-${r}`,_=V=>{const A=V.overdueScore>=1e4?1e3:Math.max(0,V.overdueScore+1);return V.lastResult==="fail"?A*1.6:V.lastResult==="doubt"?A*1.25:A},E=V=>Vu(V.work,n),j=V=>{const A=(V.nodeType??"work").trim().toLowerCase()||"work";return{segment:30,drill:22,form:20,work:10,application:0,technique:0,link:0,style:-100}[A]??5},C=V=>[...V].sort((A,O)=>{if(O.overdueScore!==A.overdueScore)return O.overdueScore-A.overdueScore;const Q=A.daysSince??1e4,H=O.daysSince??1e4;if(H!==Q)return H-Q;const q=j(O.work)-j(A.work);return q!==0?q:A.work.name.localeCompare(O.work.name,"es",{sensitivity:"base"})}),M=new Set,D=[];let R=0,z=0;for(const V of y){if((V.type??"work")==="note"){D.push({group:V,items:[],plannedMinutes:0});continue}const O=V.include??[],Q=V.exclude??[];let H=h.filter(pe=>M.has(pe.work.id)||!(O.length===0?!0:O.some(te=>mo(pe.work,te)))?!1:!Q.some(te=>mo(pe.work,te)));if((V.hierarchyRule??"allow_all")==="prefer_leaves"){const pe=new Set(H.map(fe=>fe.work.parentWorkId).filter(Boolean));H=H.filter(fe=>pe.has(fe.work.id)?(i.get(fe.work.id)??0)===0:!0)}const J=(V.strategy??"overdue")==="weighted"?W3(H,_,`${w}-${V.id}`):C(H),ie=V.limitMode??"minutes",L=ie==="count"||ie==="both",ne=ie==="minutes"||ie==="both",T=Number(V.maxItems),U=L&&Number.isFinite(T)&&T>0?Math.round(T):Number.POSITIVE_INFINITY,Z=Number(V.minutesBudget),I=ne&&Number.isFinite(Z)?Math.max(0,Z):Number.POSITIVE_INFINITY,ye=[];let me=0;for(const pe of J){if(z>=u||ye.length>=U)break;const fe=E(pe);if(!(me+fe>I)&&!(R+fe>b)&&(ye.push(pe),me+=fe,R+=fe,z+=1,M.add(pe.work.id),l&&R>=b))break}if(D.push({group:V,items:ye,plannedMinutes:Math.round(me*10)/10}),z>=u||l&&R>=b)break}const F=Math.round((R+v)*10)/10;return{groups:D,plannedMinutes:{work:Math.round(R*10)/10,reserved:Math.round(v*10)/10,total:F},totalItems:z}}function G3(){const e=je(W=>W.works),t=je(W=>W.sessions),n=je(W=>W.kungfuCadence),r=je(W=>W.kungfuTodayPlan),i=je(W=>W.updateWork),{user:o}=_s(),l=je(W=>W.addSession),u=je(W=>W.addWorkToSession),c=je(W=>W.updateSessionWorkDetails),f=je(W=>W.updateSessionWorkItems),h=je(W=>W.updateSession),p=je(W=>W.removeWorkFromSession),y=qe().format("YYYY-MM-DD"),v=k.useMemo(()=>t.filter(W=>W.kind==="personal"),[t]),b=k.useMemo(()=>v.find(W=>W.date===y),[v,y]),w=k.useMemo(()=>V3({works:e,personalSessions:v,cadence:n,today:y}),[e,v,n,y]),_=k.useMemo(()=>{const W=new Map;return e.forEach(te=>{const re=te.parentWorkId??"";re&&W.set(re,(W.get(re)??0)+1)}),W},[e]),E=k.useMemo(()=>new Map(e.map(W=>[W.id,W])),[e]),j=k.useMemo(()=>o?{actorId:o.id,actorEmail:o.email??""}:null,[o]),[C,M]=k.useState(null),[D,R]=k.useState({}),[z,F]=k.useState(null),[V,A]=k.useState(new Set),O=k.useCallback(()=>b||l({date:y,kind:"personal",title:"Entrenamiento personal",description:"",notes:""}),[l,y,b]),Q=k.useCallback(W=>{const te=(W??[]).slice().sort((he,_e)=>(he.order??0)-(_e.order??0)),re=new Map,ce=[];return te.forEach(he=>{const _e=he.workId;if(!_e)return;const Ie=re.get(_e);if(!Ie){re.set(_e,{...he}),ce.push(_e);return}const We={...Ie,customDescriptionMarkdown:Ie.customDescriptionMarkdown??he.customDescriptionMarkdown,customDurationMinutes:Ie.customDurationMinutes??he.customDurationMinutes,notes:Ie.notes??he.notes,focusLabel:Ie.focusLabel??he.focusLabel,completed:!!(Ie.completed??!1)||!!(he.completed??!1),result:Ie.result??he.result,effort:Ie.effort??he.effort};re.set(_e,We)}),ce.map((he,_e)=>({...re.get(he),order:_e}))},[]);k.useEffect(()=>{if(!b)return;const W=b.workItems??[],te=W.reduce((he,_e)=>{const Ie=_e.workId;return Ie&&he.set(Ie,(he.get(Ie)??0)+1),he},new Map);if(!Array.from(te.values()).some(he=>he>1))return;const ce=Q(W);ce.length!==W.length&&f(b.id,ce)},[b,f,Q]);const H=k.useMemo(()=>{const W=qe(y).day();return U1(r).filter(te=>te.enabled).filter(te=>{const re=te.daysOfWeek??[];return re.length===0||re.includes(W)}).sort((te,re)=>(te.order??0)-(re.order??0))},[r,y]);k.useEffect(()=>{var ce;const W={},te=(b==null?void 0:b.notesByGroupId)??void 0;te&&Object.entries(te).forEach(([he,_e])=>{const Ie=(he??"").trim();Ie&&(W[Ie]=String(_e??""))});const re=((b==null?void 0:b.notes)??"").toString();if(re.trim().length>0){const he=((ce=H.find(_e=>(_e.type??"work")==="note"))==null?void 0:ce.id)??"note";W[he]||(W[he]=re)}R(W)},[b==null?void 0:b.notes,b==null?void 0:b.notesByGroupId,H]);const q=k.useMemo(()=>{const W=new Map;return H.filter(te=>(te.type??"work")!=="note").forEach((te,re)=>{W.set(te.name,re)}),W},[H]),$=k.useCallback(W=>{const te=H.filter(re=>(re.type??"work")!=="note");for(const re of te){const ce=re.include??[],he=re.exclude??[];if(!(!(ce.length===0||ce.some(We=>mo(W,We)))||he.some(We=>mo(W,We))))return re.name}return"Hoy"},[H]),J=k.useMemo(()=>new Set(H.filter(W=>(W.type??"work")!=="note").map(W=>W.name).filter(Boolean)),[H]),ie=k.useCallback((W,te)=>{const re=(W.focusLabel??"").trim();return re&&J.has(re)?re:$(te)},[J,$]),L=k.useCallback(W=>{const te=je.getState().sessions.find(ce=>ce.id===W);if(!te)return null;const re=(te.workItems??[]).map(ce=>{const he=E.get(ce.workId);if(!he)return ce;const _e=ie(ce,he);return _e===ce.focusLabel?ce:{...ce,focusLabel:_e}});return re.sort((ce,he)=>{const _e=ce.focusLabel??"Hoy",Ie=he.focusLabel??"Hoy",We=q.get(_e)??999,Qe=q.get(Ie)??999;return We!==Qe?We-Qe:(ce.order??0)-(he.order??0)}),re},[q,E,ie]),[ne,T]=k.useState(!1),U=k.useCallback(W=>{if(!ne&&w.length!==0){T(!0);try{const te=b??O(),re=te.workItems??[],ce=new Set(re.map(ae=>ae.workId));if((r.limitMode==="count"||r.limitMode==="both")&&ce.size>=Math.max(1,Math.round(r.maxItems||12))){W!=null&&W.includeDiagnostics&&(M({type:"success",text:"Plan ya est lleno por cantidad. Sube el mximo de tems en Ajustes."}),window.setTimeout(()=>M(null),2500));return}const _e=new Map;re.forEach(ae=>{const de=E.get(ae.workId);if(!de)return;const Ee=ie(ae,de),we=H.find(G=>G.name===Ee),P=(we==null?void 0:we.id)??Ee,ee=_e.get(P)??{minutes:0,items:0};_e.set(P,{minutes:ee.minutes+Vu(de,r),items:ee.items+1})});const Ie=re.reduce((ae,de)=>{const Ee=E.get(de.workId);return Ee?ae+Vu(Ee,r):ae},0),We={...r,maxItems:Math.max(0,Math.round((r.maxItems??0)-ce.size)),minutesBudget:Math.max(0,Number(r.minutesBudget??0)-Ie),groups:H.map(ae=>{const de=_e.get(ae.id),Ee={...ae};return de&&(typeof ae.minutesBudget=="number"&&Number.isFinite(ae.minutesBudget)&&(Ee.minutesBudget=Math.max(0,ae.minutesBudget-de.minutes)),typeof ae.maxItems=="number"&&Number.isFinite(ae.maxItems)&&(Ee.maxItems=Math.max(0,Math.round(ae.maxItems-de.items)))),Ee})},Qe=w.filter(ae=>!ce.has(ae.work.id)),ut=Y3({dueList:Qe,todaySession:void 0,plan:We,today:y,childCountByWorkId:_});let Tt=0;ut.groups.filter(ae=>(ae.group.type??"work")!=="note").forEach(ae=>{ae.items.forEach(de=>{u(te.id,{workId:de.work.id,focusLabel:ae.group.name,customDurationMinutes:Vu(de.work,r)}),Tt+=1})});const K=L(te.id);if(K&&f(te.id,Q(K)),W!=null&&W.includeDiagnostics)if(Tt>0)M({type:"success",text:`Plan actualizado: +${Tt} tem${Tt===1?"":"s"}.`}),window.setTimeout(()=>M(null),2e3);else{const ae=H.filter(de=>(de.type??"work")!=="note").map(de=>{const Ee=de.include??[],we=de.exclude??[],P=Qe.filter(be=>(Ee.length===0?!0:Ee.some(Ce=>mo(be.work,Ce)))?!we.some(Ce=>mo(be.work,Ce)):!1),ee=de.limitMode==="minutes"||de.limitMode==="both"?Math.max(0,Number(de.minutesBudget)||0):void 0,G=de.limitMode==="count"||de.limitMode==="both"?Math.max(0,Math.round(Number(de.maxItems)||0)):void 0;return[`${de.name}: ${P.length} match`,typeof ee=="number"?`${ee}m`:null,typeof G=="number"?`${G} items`:null].filter(Boolean).join("  ")}).slice(0,3).join(" | ");M({type:"success",text:ae?`No hay nuevos tems para aadir. ${ae}`:"No hay nuevos tems para aadir con los lmites actuales."}),window.setTimeout(()=>M(null),4e3)}}finally{T(!1)}}},[ne,w,b,O,r,E,$,H,y,_,u,f,Q,L]);k.useEffect(()=>{w.length===0||((b??O()).workItems??[]).some(ce=>!!ce.focusLabel)||U({reason:"initial-seed"})},[w,b,r,y,_,f,E,H,q,$,O,U]);const Z=(W,te)=>{try{const re=O(),ce=re.workItems.find(he=>he.workId===W);if(ce)c(re.id,ce.id,{result:te,completed:!0});else{const he=u(re.id,{workId:W});if(!he)throw new Error("No se pudo aadir el trabajo a la sesin.");c(re.id,he.id,{result:te,completed:!0})}M({type:"success",text:"Registrado."}),window.setTimeout(()=>M(null),1800)}catch(re){const ce=re instanceof Error?re.message:"No se pudo registrar.";M({type:"error",text:ce}),window.setTimeout(()=>M(null),2500)}},I=b?b.workItems.filter(W=>(W.completed??!1)||typeof W.result<"u").length:0,ye=k.useMemo(()=>{const W=new Map,te=new Map;return((b==null?void 0:b.workItems)??[]).slice().sort((ce,he)=>(ce.order??0)-(he.order??0)).forEach(ce=>{const he=w.find(ae=>ae.work.id===ce.workId),_e=E.get(ce.workId);if(!_e)return;const Ie=(ce.completed??!1)||typeof ce.result<"u",We={work:_e,targetDays:B1(_e,n),overdueScore:0,lastSeen:he==null?void 0:he.lastSeen,daysSince:he==null?void 0:he.daysSince,lastResult:he==null?void 0:he.lastResult},Qe=he??We,ut=ie(ce,_e),Tt=W.get(ut)??[];Tt.push(Qe),W.set(ut,Tt);const K=te.get(ut)??{total:0,done:0};K.total+=1,Ie&&(K.done+=1),te.set(ut,K)}),Array.from(W.entries()).map(([ce,he])=>{const _e=te.get(ce)??{total:he.length,done:0};return{label:ce,entries:he,total:_e.total,done:_e.done}}).sort((ce,he)=>{const _e=q.get(ce.label)??999,Ie=q.get(he.label)??999;return _e!==Ie?_e-Ie:ce.label.localeCompare(he.label,"es",{sensitivity:"base"})})},[b==null?void 0:b.workItems,w,E,n,q,ie]),me=k.useMemo(()=>{const W=new Map(ye.map(ce=>[ce.label,ce])),te=new Set,re=[];return H.forEach(ce=>{if((ce.type??"work")==="note"){re.push({kind:"note",group:ce});return}const he=W.get(ce.name);he&&(te.add(he.label),re.push({kind:"work",...he}))}),ye.forEach(ce=>{te.has(ce.label)||re.push({kind:"work",...ce})}),re},[H,ye]),pe=W=>{const te=W.work,re=qc(te.tags),ce=re.includes(Hu),he=re.filter(P=>P!==Hu),_e=(te.canEdit??!1)&&(te.nodeType??"").trim().toLowerCase()!=="style",Ie=z===te.id,We=V.has(te.id),Qe=b==null?void 0:b.workItems.find(P=>P.workId===te.id),ut=Qe==null?void 0:Qe.result,Tt=!!((Qe==null?void 0:Qe.completed)??!1)||typeof(Qe==null?void 0:Qe.result)<"u",K=(te.descriptionMarkdown??"").trim(),ae=(te.notes??"").trim(),de=(te.videoUrls??[]).map(P=>P.trim()).filter(Boolean),Ee=K.length>0||ae.length>0||de.length>0,we=async()=>{if(!j){M({type:"error",text:"Inicia sesin para editar trabajos."}),window.setTimeout(()=>M(null),2500);return}if(_e){F(te.id);try{const P=ce?he:Array.from(new Set([...he,Hu]));await i(te.id,{tags:P},j),M({type:"success",text:ce?"Incluido en el plan personal.":"Excluido del plan personal."}),window.setTimeout(()=>M(null),1800)}catch(P){console.error("No se pudo actualizar el trabajo",P),M({type:"error",text:"No se pudo actualizar el trabajo."}),window.setTimeout(()=>M(null),2500)}finally{F(null)}}};return g.jsxs("article",{className:De("flex flex-col gap-3 rounded-3xl border p-4 shadow shadow-black/15",ut?F3[ut]:"border-white/10 bg-white/5"),children:[g.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[g.jsxs("div",{className:"space-y-1",children:[g.jsxs("div",{className:"flex items-start gap-3",children:[Ee?g.jsx("button",{type:"button",onClick:()=>A(P=>{const ee=new Set(P);return ee.has(te.id)?ee.delete(te.id):ee.add(te.id),ee}),className:De("mt-0.5 inline-flex h-8 w-8 items-center justify-center rounded-full border border-white/15 bg-white/5 text-sm font-semibold text-white/70 transition hover:border-white/30 hover:text-white",We?"rotate-90 border-white/30 text-white":""),"aria-label":We?"Ocultar detalles":"Ver detalles",title:We?"Ocultar detalles":"Ver detalles",children:""}):null,g.jsxs("div",{children:[g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsx("p",{className:"text-lg font-semibold text-white",children:te.name}),ut?g.jsx("span",{className:De("inline-flex items-center rounded-full border px-2 py-0.5 text-[11px] font-semibold",Q0[ut]),children:Ch[ut]}):null]}),te.subtitle?g.jsx("p",{className:"text-sm text-white/70",children:te.subtitle}):null]})]}),g.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-[11px] uppercase tracking-wide text-white/40",children:[g.jsx("span",{className:"rounded-full border border-white/15 bg-white/5 px-2 py-0.5 text-[10px] font-semibold text-white/70",children:te.nodeType??"work"}),he.slice(0,6).map(P=>g.jsx("span",{className:"rounded-full border border-white/10 px-2 py-0.5",children:P},P)),he.length>6?g.jsxs("span",{className:"text-white/50",children:["+",he.length-6]}):null]})]}),g.jsx("div",{className:"flex flex-col items-start gap-2 sm:items-end",children:g.jsxs("div",{className:"rounded-2xl border border-white/10 bg-slate-950/60 px-4 py-3 text-sm text-white/70",children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:"ltima vez"}),g.jsx("p",{className:"mt-1 font-semibold text-white",children:q3(W.lastSeen)}),g.jsxs("p",{className:"mt-1 text-xs text-white/50",children:["Objetivo: ",W.targetDays," da",W.targetDays===1?"":"s"," "," ",W.overdueScore>=1e4?"Nuevo":`${W.overdueScore} vencido`]})]})})]}),Ee&&We?g.jsxs("div",{className:"space-y-3 rounded-2xl border border-white/10 bg-slate-950/60 p-4",children:[K.length>0?g.jsx(ws,{content:K,enableWorkLinks:!0}):null,ae.length>0?g.jsxs("div",{className:"space-y-2",children:[g.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-white/40",children:"Notas"}),g.jsx(ws,{content:ae,enableWorkLinks:!0})]}):null,de.length>0?g.jsxs("div",{className:"space-y-3",children:[g.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-white/40",children:"Vdeos"}),g.jsx("div",{className:"grid gap-4 lg:grid-cols-3",children:de.map((P,ee)=>g.jsxs("div",{className:"space-y-2",children:[g.jsx(Uc,{url:P,title:`${te.name} vdeo ${ee+1}`}),g.jsx("a",{href:P,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-full border border-white/15 bg-white/5 px-3 py-1 text-xs font-medium text-white/80 transition hover:border-white/30 hover:text-white",children:"Abrir en YouTube"})]},`${te.id}-video-${ee}`))})]}):null]}):null,g.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[g.jsx("div",{className:"flex flex-wrap items-center gap-2",children:Object.keys(Ch).map(P=>g.jsx("button",{type:"button",className:De("inline-flex items-center justify-center rounded-full border px-3 py-1 text-xs font-semibold transition",Q0[P],ut===P?"ring-2 ring-white/30":"opacity-90 hover:opacity-100"),onClick:()=>Z(te.id,P),children:Ch[P]},P))}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx(wr,{to:`/catalog?workId=${encodeURIComponent(te.id)}`,className:"btn-secondary",children:"Ver en catlogo"}),b&&Qe?g.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>{Tt&&!window.confirm("Este tem ya est marcado/registrado hoy. Quieres quitarlo igualmente de la sesin?")||(p(b.id,Qe.id),M({type:"success",text:"Quitado de la sesin de hoy."}),window.setTimeout(()=>M(null),1800))},title:"Quitar de la sesin de hoy",children:"Quitar"}):null,g.jsx("button",{type:"button",onClick:we,disabled:!_e||Ie,className:De("inline-flex items-center rounded-full border px-4 py-2 text-xs font-semibold transition disabled:opacity-50",ce?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200 hover:border-emerald-400":"border-rose-500/40 bg-rose-500/10 text-rose-200 hover:border-rose-400"),title:ce?"Incluir en el plan personal":"Excluir del plan personal",children:Ie?"...":ce?"Incluir":"Excluir"})]})]})]},te.id)},fe=W=>{var _e;const te=O(),re=(W??"").trim();if(!re)return;const ce={...te.notesByGroupId??{},[re]:D[re]??""},he=((_e=H.find(Ie=>(Ie.type??"work")==="note"))==null?void 0:_e.id)??re;h(te.id,{notesByGroupId:ce,notes:ce[he]??""}),M({type:"success",text:"Guardado."}),window.setTimeout(()=>M(null),1800)};return g.jsxs("div",{className:"space-y-6",children:[g.jsxs("header",{className:"glass-panel p-6 sm:p-10",children:[g.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-3xl font-bold",children:"Kung Fu  Hoy"}),g.jsx("p",{className:"text-white/60",children:"Plan directo de entrenamiento basado en cadencias y tu histrico personal."})]}),g.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:[g.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-sm text-white/70",children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:"Sesin de hoy"}),g.jsx("p",{className:"mt-1 font-semibold text-white",children:qe(y).format("dddd, D [de] MMMM")}),g.jsxs("p",{className:"mt-1 text-xs text-white/50",children:[I," ",I===1?"tem registrado":"tems registrados"]})]}),g.jsxs("div",{className:"flex gap-3",children:[g.jsx(wr,{to:"/personal/sessions",className:"btn-secondary",children:"Ver sesiones"}),g.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>U({reason:"manual-refresh",includeDiagnostics:!0}),disabled:ne||w.length===0,title:"Aade tems si has cambiado la configuracin de grupos o lmites",children:ne?"Actualizando":"Actualizar plan"}),g.jsx(wr,{to:"/personal/settings",className:"btn-secondary",children:"Ajustes"})]})]})]}),C&&g.jsx("div",{className:De("mt-4 rounded-2xl border px-4 py-3 text-sm",C.type==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-rose-500/40 bg-rose-500/10 text-rose-200"),children:C.text})]}),w.length===0?g.jsxs("div",{className:"glass-panel p-10 text-center text-white/50",children:["No hay ningn trabajo incluido en tu programa activo. Aade la tag ",g.jsx("span",{className:"font-semibold text-white",children:"kungfu"})," a los trabajos que quieras entrenar."]}):g.jsx("section",{className:"space-y-4",children:g.jsxs("div",{className:"space-y-3",children:[ye.length===0?g.jsxs("div",{className:"glass-panel p-10 text-center text-white/50",children:["No hay tems planificados para hoy. Revisa ",g.jsx("span",{className:"font-semibold text-white",children:"Ajustes"})," o marca ms trabajos como entrenables."]}):null,me.map(W=>{if(W.kind==="note"){const he=W.group.id,_e=D[he]??"";return g.jsxs("div",{className:"glass-panel space-y-3 p-6",children:[g.jsxs("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between",children:[g.jsxs("div",{children:[g.jsxs("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:[W.group.name," (",Math.max(0,Number(W.group.minutesBudget)||0)," min)"]}),g.jsx("p",{className:"text-sm text-white/60",children:"Notas de la sesin."})]}),g.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>fe(he),children:"Guardar"})]}),g.jsx("textarea",{className:"input-field min-h-[120px] w-full resize-y",value:_e,onChange:Ie=>R(We=>({...We,[he]:Ie.target.value})),placeholder:"Escribe aqu"})]},W.group.id)}const te=Math.max(0,W.total),re=Math.min(Math.max(0,W.done),te),ce=te>0?Math.round(re/te*100):0;return g.jsxs("section",{className:"glass-panel space-y-4 p-3 sm:space-y-5 sm:p-6",children:[g.jsx("header",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:g.jsxs("div",{children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:W.label}),g.jsxs("p",{className:"mt-1 text-sm text-white/60",children:[re,"/",te," tem",te===1?"":"s","  ",ce,"% completado"]}),g.jsx("div",{className:"mt-2 h-2 w-full overflow-hidden rounded-full border border-white/10 bg-slate-950/50",children:g.jsx("div",{className:"h-full rounded-full bg-white/25",style:{width:`${Math.min(Math.max(ce,0),100)}%`}})})]})}),g.jsx("div",{className:"space-y-3 sm:space-y-4",children:W.entries.map(pe)})]},W.label)})]})})]})}qe.locale("es");function K3(){const e=je(w=>w.sessions).filter(w=>w.kind==="personal"),t=je(w=>w.works),n=je(w=>w.objectives),r=je(w=>w.assistants),i=je(w=>w.addSession),[o,l]=Ip(),u=k.useMemo(()=>[...e].sort((w,_)=>qe(_.date).valueOf()-qe(w.date).valueOf()),[e]),c=o.get("session")??void 0,f=c?e.find(w=>w.id===c):void 0,[h,p]=k.useState(f==null?void 0:f.id);k.useEffect(()=>{c&&!e.some(w=>w.id===c)&&(p(void 0),l({},{replace:!0}))},[c,e,l]);const y=h?e.find(w=>w.id===h):void 0,v=w=>{p(w),l({session:w},{replace:!0})},b=()=>{const w=qe().format("YYYY-MM-DD"),_=e.find(j=>j.date===w);if(_){v(_.id);return}const E=i({date:w,kind:"personal",title:"Entrenamiento personal",description:"",notes:""});v(E.id)};return g.jsxs("div",{className:"space-y-6",children:[g.jsx("header",{className:"glass-panel p-6 sm:p-10",children:g.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-3xl font-bold",children:"Kung Fu  Sesiones"}),g.jsx("p",{className:"text-white/60",children:"Histrico y edicin de sesiones de entreno personal."})]}),g.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row",children:[g.jsx(wr,{to:"/personal",className:"btn-secondary",children:"Volver a hoy"}),g.jsx(wr,{to:"/personal/settings",className:"btn-secondary",children:"Ajustes"}),g.jsx("button",{type:"button",className:"btn-primary",onClick:b,children:"Crear/abrir hoy"})]})]})}),g.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.1fr_1.9fr]",children:[g.jsxs("section",{className:"glass-panel space-y-3 p-6",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("h2",{className:"text-lg font-semibold text-white",children:"Sesiones"}),g.jsx("span",{className:"rounded-full border border-white/10 px-3 py-1 text-xs text-white/60",children:u.length})]}),u.length===0?g.jsx("div",{className:"rounded-2xl border border-dashed border-white/15 bg-white/5 p-6 text-sm text-white/50",children:"No hay sesiones personales todava. Crea la sesin de hoy para empezar a registrar tu entrenamiento."}):g.jsx("div",{className:"space-y-2",children:u.map(w=>{const _=w.workItems.filter(E=>(E.completed??!1)||typeof E.result<"u").length;return g.jsxs("button",{type:"button",onClick:()=>v(w.id),className:De("flex w-full flex-col gap-1 rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-left transition hover:border-white/30 hover:bg-white/10",w.id===h&&"border-sky-400/60 bg-sky-500/10 shadow shadow-sky-500/10"),children:[g.jsx("p",{className:"text-sm font-semibold text-white",children:w.title||"Sesin sin ttulo"}),g.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:qe(w.date).format("ddd  D MMM YYYY")}),g.jsxs("p",{className:"text-xs text-white/60",children:[_,"/",w.workItems.length," registrados"]})]},w.id)})})]}),g.jsx("section",{className:"glass-panel p-6",children:y?g.jsx($1,{session:y,works:t,objectives:n,assistants:r}):g.jsx("div",{className:"rounded-2xl border border-dashed border-white/15 bg-white/5 p-10 text-center text-white/50",children:"Selecciona una sesin para verla y editarla."})})]})]})}const _p=e=>Array.from(new Set((e??[]).map(t=>t.trim().toLowerCase()).filter(Boolean))),W1=e=>Array.from(new Set(e.split(",").map(t=>t.trim()).filter(Boolean))),H1=e=>(e??[]).join(", ");function X0(e){const t=_p(e.byTags),n=_p(e.byNodeTypes),r=W1(H1(e.byWorkIds)),i={};return t&&t.length>0&&(i.byTags=t),n&&n.length>0&&(i.byNodeTypes=n),r&&r.length>0&&(i.byWorkIds=r),i}function J3(e){const t={};Object.entries(e.targetsDays??{}).forEach(([r,i])=>{const o=r.trim().toLowerCase(),l=Number(i);o&&Number.isFinite(l)&&(t[o]=Math.max(1,Math.round(l)))});const n=(e.overrides??[]).map(r=>{var i;return{match:{tagsAny:_p(((i=r.match)==null?void 0:i.tagsAny)??[])},multiplier:Math.max(.1,Number(r.multiplier)||1)}}).filter(r=>r.match.tagsAny.length>0);return{targetsDays:t,overrides:n}}function Q3(e){var j,C,M;const t=Math.max(1,Math.round(Number(e.maxItems)||12)),n=Math.max(1,Number(e.minutesBudget)||30),r={};Object.entries(e.defaultMinutesByNodeType??{}).forEach(([D,R])=>{const z=D.trim().toLowerCase(),F=Number(R);z&&Number.isFinite(F)&&(r[z]=Math.max(.25,F))});const i=D=>D==="count"||D==="minutes"||D==="both",o=D=>D==="work"||D==="note",l=D=>D==="overdue"||D==="weighted",u=D=>D==="allow_all"||D==="prefer_leaves",c=D=>{if(!Array.isArray(D))return[];const R=D.map(z=>Number(z)).filter(z=>Number.isFinite(z)).map(z=>Math.round(z)).filter(z=>z>=0&&z<=6);return Array.from(new Set(R)).sort((z,F)=>z-F)},f=(D,R)=>{const z=(D.id??"").trim()||Zt(),F=o(D.type)?D.type:"work",V=typeof D.enabled=="boolean"?D.enabled:!0,A=Number.isFinite(Number(D.order))?Number(D.order):R,O=(D.name??"").trim()||(F==="note"?"Recap":"Grupo"),Q=i(D.limitMode)?D.limitMode:"minutes",H=Number.isFinite(Number(D.maxItems))?Math.max(0,Math.round(Number(D.maxItems))):void 0,q=Number.isFinite(Number(D.minutesBudget))?Math.max(0,Number(D.minutesBudget)):void 0,$=l(D.strategy)?D.strategy:"overdue",J=u(D.hierarchyRule)?D.hierarchyRule:"allow_all",ie=(D.include??[]).map(X0).filter(ne=>Object.keys(ne).length>0),L=(D.exclude??[]).map(X0).filter(ne=>Object.keys(ne).length>0);return{id:z,name:O,enabled:V,order:A,type:F,daysOfWeek:c(D.daysOfWeek),limitMode:Q,maxItems:H,minutesBudget:q,strategy:$,hierarchyRule:J,include:ie,exclude:L}},p=((e.groups??[]).length>0?e.groups??[]:[{id:"formas",name:"Formas",enabled:!0,order:1,type:"work",limitMode:"minutes",minutesBudget:18,strategy:"overdue",hierarchyRule:"prefer_leaves",include:[{byNodeTypes:["segment","form"]}],exclude:[]},{id:"tecnicas",name:"Tcnicas",enabled:!0,order:2,type:"work",limitMode:"minutes",minutesBudget:10,strategy:"weighted",hierarchyRule:"allow_all",include:[{byNodeTypes:["technique"]},{byTags:["roulette"]}],exclude:[]},{id:"recap",name:"Recap",enabled:!0,order:99,type:"note",limitMode:"minutes",minutesBudget:2}]).map((D,R)=>f(D,R+1)).sort((D,R)=>D.order-R.order).map((D,R)=>({...D,order:R+1})),y=p.filter(D=>(D.type??"work")!=="note"),v=p.filter(D=>D.type==="note"),b=Math.max(0,Number((j=y[0])==null?void 0:j.minutesBudget)||0),w=Math.max(0,Number((C=y[1])==null?void 0:C.minutesBudget)||0),_=Math.max(0,Number((M=v[0])==null?void 0:M.minutesBudget)||0),E=Math.max(0,b+w+_);return{limitMode:e.limitMode,maxItems:t,minutesBudget:n,template:{totalMinutes:E,focusMinutes:b,rouletteMinutes:w,recapMinutes:_},defaultMinutesByNodeType:r,focusSelectors:[],rouletteSelectors:[],groups:p}}const X3={},Z0=[{label:"L",value:1},{label:"M",value:2},{label:"X",value:3},{label:"J",value:4},{label:"V",value:5},{label:"S",value:6},{label:"D",value:0}];function Z3(){const e=je(F=>F.kungfuCadence),t=je(F=>F.kungfuTodayPlan),n=je(F=>F.workTaxonomy),r=je(F=>F.upsertNodeType),i=je(F=>F.upsertTag),o=je(F=>F.setKungfuCadence),l=je(F=>F.setKungfuTodayPlan),[u,c]=k.useState(e),[f,h]=k.useState(t),[p,y]=k.useState(null),[v,b]=k.useState([]);k.useEffect(()=>{c(e)},[e]),k.useEffect(()=>{h(t)},[t]);const w=k.useMemo(()=>JSON.stringify(e)!==JSON.stringify(u)||JSON.stringify(t)!==JSON.stringify(f),[e,t,u,f]),_=F=>{y(F),F&&window.setTimeout(()=>y(null),F.type==="success"?1800:2600)},E=()=>{try{const F=J3(u),V=Q3(f);o(F),l(V),_({type:"success",text:"Guardado."})}catch(F){const V=F instanceof Error?F.message:"No se pudo guardar.";_({type:"error",text:V})}},j=()=>{c(e),h(t),_({type:"success",text:"Cambios descartados."})},C=k.useMemo(()=>(n.nodeTypes??[]).slice().sort((F,V)=>F.label.localeCompare(V.label,"en",{sensitivity:"base"})).map(F=>({value:F.key,label:F.label})),[n.nodeTypes]),M=k.useMemo(()=>(n.tags??[]).slice().sort((F,V)=>F.name.localeCompare(V.name,"en",{sensitivity:"base"})).map(F=>({value:F.name,label:F.name})),[n.tags]),D=k.useMemo(()=>new Map(Z0.map(F=>[F.value,F.label])),[]),R=k.useCallback((F,V)=>{b(A=>{const O=A.includes(F),Q=typeof V=="boolean"?V:!O;return Q===O?A:Q?[...A,F]:A.filter(H=>H!==F)})},[]),z=k.useCallback(()=>{const F=Zt();h(V=>{const A=[...V.groups??[]].sort((H,q)=>(H.order??0)-(q.order??0)),O={id:F,name:"Nuevo grupo",enabled:!0,order:A.length+1,type:"work",daysOfWeek:[],limitMode:"minutes",maxItems:12,minutesBudget:5,strategy:"overdue",hierarchyRule:"allow_all",include:[],exclude:[]},Q=[...A,O].map((H,q)=>({...H,order:q+1}));return{...V,groups:Q}}),R(F,!0)},[R]);return g.jsxs("div",{className:"space-y-6",children:[g.jsxs("header",{className:"glass-panel p-6 sm:p-10",children:[g.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-3xl font-bold",children:"Kung Fu  Ajustes"}),g.jsx("p",{className:"text-white/60",children:"Grupos, cadencias y plantilla de sesin para el modo Personal."})]}),g.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:[g.jsx(wr,{to:"/personal",className:"btn-secondary",children:"Volver a hoy"}),g.jsxs("div",{className:"flex gap-3",children:[g.jsx("button",{type:"button",className:"btn-secondary",onClick:j,disabled:!w,children:"Descartar"}),g.jsx("button",{type:"button",className:"btn-primary",onClick:E,disabled:!w,children:"Guardar"})]})]})]}),p?g.jsx("div",{className:De("mt-4 rounded-2xl border px-4 py-3 text-sm",p.type==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-rose-500/40 bg-rose-500/10 text-rose-200"),children:p.text}):null]}),g.jsxs("section",{className:"glass-panel space-y-5 p-6",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-xl font-semibold text-white",children:"Plan de hoy"}),g.jsx("p",{className:"text-sm text-white/60",children:"Controla cuntos tems se sugieren y el presupuesto de minutos."})]}),g.jsxs("div",{className:"grid gap-4 sm:grid-cols-3",children:[g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Modo de lmite"}),g.jsxs("select",{className:"input-field",value:f.limitMode,onChange:F=>h(V=>({...V,limitMode:F.target.value})),children:[g.jsx("option",{value:"count",children:"Por cantidad"}),g.jsx("option",{value:"minutes",children:"Por minutos"}),g.jsx("option",{value:"both",children:"Cantidad y minutos"})]})]}),g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Mx. tems"}),g.jsx("input",{type:"number",min:1,className:"input-field",value:f.maxItems,onChange:F=>h(V=>({...V,maxItems:Number(F.target.value)}))})]}),g.jsxs("div",{className:"grid gap-2",children:[g.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Presupuesto (min)"}),g.jsx("input",{type:"number",min:1,className:"input-field",value:f.minutesBudget,onChange:F=>h(V=>({...V,minutesBudget:Number(F.target.value)}))})]})]}),g.jsxs("div",{className:"space-y-4 rounded-3xl border border-white/10 bg-white/5 p-5",children:[g.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-semibold text-white",children:"Grupos"}),g.jsx("p",{className:"text-sm text-white/60",children:"Define bloques con reglas, das de la semana y lmites."})]}),g.jsx("button",{type:"button",className:"btn-secondary",onClick:z,children:"+ Grupo"})]}),g.jsx("div",{className:"space-y-4",children:[...f.groups??[]].sort((F,V)=>(F.order??0)-(V.order??0)).map((F,V,A)=>{const O=F.type??"work",Q=F.daysOfWeek??[],H=Q.length===0,q=F.limitMode??"minutes",$=F.strategy??"overdue",J=F.hierarchyRule??"allow_all",ie=v.includes(F.id),L=H?"Todos":Q.map(fe=>D.get(fe)??String(fe)).filter(Boolean).join(" "),ne=(()=>{const fe=Math.max(0,Math.round(Number(F.maxItems??0))),W=Math.max(0,Number(F.minutesBudget??0));return q==="count"?`${fe} tems`:q==="minutes"?`${W} min`:`${fe} tems  ${W} min`})(),T=(F.include??[]).length,U=(F.exclude??[]).length,Z=fe=>{h(W=>{const re=[...W.groups??[]].sort((ce,he)=>(ce.order??0)-(he.order??0)).map(ce=>ce.id===F.id?{...ce,...fe}:ce).map((ce,he)=>({...ce,order:he+1}));return{...W,groups:re}})},I=fe=>{h(W=>{const te=[...W.groups??[]].sort((Ie,We)=>(Ie.order??0)-(We.order??0)),re=te.findIndex(Ie=>Ie.id===F.id),ce=re+fe;if(re<0||ce<0||ce>=te.length)return W;const he=te.slice(),_e=he[re];return he[re]=he[ce],he[ce]=_e,{...W,groups:he.map((Ie,We)=>({...Ie,order:We+1}))}})},ye=()=>{h(fe=>{const te=[...fe.groups??[]].sort((re,ce)=>(re.order??0)-(ce.order??0)).filter(re=>re.id!==F.id).map((re,ce)=>({...re,order:ce+1}));return{...fe,groups:te.length>0?te:fe.groups}}),b(fe=>fe.filter(W=>W!==F.id))},me=()=>{const fe=Zt();h(W=>{const te=[...W.groups??[]].sort((Ie,We)=>(Ie.order??0)-(We.order??0)),re=te.findIndex(Ie=>Ie.id===F.id);if(re<0)return W;const ce=(F.name??"").trim()||"Grupo",he={...F,id:fe,name:`${ce} (copia)`},_e=te.slice();return _e.splice(re+1,0,he),{...W,groups:_e.map((Ie,We)=>({...Ie,order:We+1}))}}),R(fe,!0)},pe=(fe,W)=>{const te=F[fe]??[];Z({[fe]:W(te)})};return g.jsxs("div",{className:"rounded-3xl border border-white/10 bg-slate-950/40",children:[g.jsxs("div",{className:"flex flex-col gap-3 p-4 sm:flex-row sm:items-center sm:justify-between",children:[g.jsxs("div",{className:"flex flex-1 flex-wrap items-center gap-3",children:[g.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>R(F.id),"aria-expanded":ie,title:ie?"Colapsar":"Expandir",children:ie?"":""}),g.jsxs("div",{className:"min-w-[240px] flex-1",children:[g.jsx("p",{className:"text-sm font-semibold text-white",children:(F.name??"").trim()||"Grupo"}),g.jsxs("p",{className:"text-xs text-white/50",children:[O==="note"?"Nota":"Trabajos","  ",L,"  ",ne,O==="work"?`  ${$==="weighted"?"Ruleta":"Cadencia"}`:"",O==="work"?`  Incluye:${T||""} Excluye:${U||""}`:""]})]}),g.jsx("span",{className:De("rounded-full border px-3 py-1 text-xs font-semibold",F.enabled?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-white/15 bg-white/5 text-white/60"),children:F.enabled?"Enabled":"Disabled"})]}),g.jsxs("div",{className:"flex items-center justify-end gap-2",children:[g.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>I(-1),disabled:V===0,title:"Subir",children:""}),g.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>I(1),disabled:V===A.length-1,title:"Bajar",children:""}),g.jsx("button",{type:"button",className:"btn-secondary",onClick:me,title:"Duplicar",children:"Duplicar"}),g.jsx("button",{type:"button",className:"btn-secondary",onClick:ye,disabled:A.length<=1,children:"Eliminar"})]})]}),ie?g.jsx("div",{className:"border-t border-white/10 p-5",children:g.jsx("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:g.jsxs("div",{className:"flex flex-1 flex-col gap-3",children:[g.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[g.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-white/70",children:[g.jsx("input",{type:"checkbox",className:"accent-sky-400",checked:F.enabled,onChange:fe=>Z({enabled:fe.target.checked})}),"Enabled"]}),g.jsx("input",{type:"text",className:"input-field flex-1",value:F.name,onChange:fe=>Z({name:fe.target.value}),placeholder:"Nombre del grupo"}),g.jsxs("select",{className:"input-field w-36",value:O,onChange:fe=>Z({type:fe.target.value}),children:[g.jsx("option",{value:"work",children:"Trabajos"}),g.jsx("option",{value:"note",children:"Nota"})]})]}),g.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:"Das"}),g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsx("button",{type:"button",className:De("rounded-full border px-3 py-1 text-xs font-semibold transition",H?"border-sky-500/40 bg-sky-500/10 text-sky-100":"border-white/15 bg-white/5 text-white/70 hover:border-white/30 hover:text-white"),onClick:()=>Z({daysOfWeek:[]}),title:"Vaco = todos los das",children:"Todos"}),Z0.map(fe=>{const W=H?!0:Q.includes(fe.value);return g.jsx("button",{type:"button",className:De("h-8 w-8 rounded-full border text-xs font-semibold transition",W?"border-emerald-500/40 bg-emerald-500/10 text-emerald-100":"border-white/15 bg-white/5 text-white/70 hover:border-white/30 hover:text-white"),onClick:()=>{const te=H?[fe.value]:Q.includes(fe.value)?Q.filter(re=>re!==fe.value):[...Q,fe.value];Z({daysOfWeek:te.sort((re,ce)=>re-ce)})},title:W?"Activo":"Inactivo",children:fe.label},fe.value)})]}),g.jsx("p",{className:"text-xs text-white/50",children:"Si eliges das especficos, solo aparecer esos das."})]}),g.jsxs("div",{className:"grid gap-3 sm:grid-cols-3",children:[g.jsxs("label",{className:"grid gap-1",children:[g.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:"Lmite"}),g.jsxs("select",{className:"input-field",value:q,onChange:fe=>Z({limitMode:fe.target.value}),children:[g.jsx("option",{value:"count",children:"Cantidad"}),g.jsx("option",{value:"minutes",children:"Minutos"}),g.jsx("option",{value:"both",children:"Ambos"})]})]}),g.jsxs("label",{className:"grid gap-1",children:[g.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:"Mx tems"}),g.jsx("input",{type:"number",min:0,className:"input-field",value:F.maxItems??0,onChange:fe=>Z({maxItems:Number(fe.target.value)})})]}),g.jsxs("label",{className:"grid gap-1",children:[g.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:"Mx min"}),g.jsx("input",{type:"number",min:0,className:"input-field",value:F.minutesBudget??0,onChange:fe=>Z({minutesBudget:Number(fe.target.value)})})]})]})]}),O==="work"?g.jsxs("div",{className:"mt-2 grid gap-4 lg:grid-cols-2",children:[g.jsxs("label",{className:"grid gap-1",children:[g.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:"Estrategia"}),g.jsxs("select",{className:"input-field",value:$,onChange:fe=>Z({strategy:fe.target.value}),children:[g.jsx("option",{value:"overdue",children:"Vencido (cadencia)"}),g.jsx("option",{value:"weighted",children:"Ponderado (ruleta)"})]})]}),g.jsxs("label",{className:"flex items-center gap-2 text-sm text-white/70",children:[g.jsx("input",{type:"checkbox",className:"accent-sky-400",checked:J==="prefer_leaves",onChange:fe=>Z({hierarchyRule:fe.target.checked?"prefer_leaves":"allow_all"})}),"Preferir hijos (evita padres cuando existan)"]})]}):null,O==="work"?g.jsx("div",{className:"mt-4 grid gap-5 lg:grid-cols-2",children:["include","exclude"].map(fe=>g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("p",{className:"text-sm font-semibold text-white/80",children:fe==="include"?"Include (OR)":"Exclude (OR)"}),g.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>pe(fe,W=>[...W,{...X3}]),children:"+ Regla"})]}),(F[fe]??[]).length===0?g.jsx("p",{className:"text-xs text-white/50",children:fe==="include"?"Vaco = incluye todo (se aplican excludes).":"Vaco = no excluye nada."}):null,(F[fe]??[]).map((W,te)=>g.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:["Regla ",te+1]}),g.jsx("button",{type:"button",className:"text-xs font-semibold text-rose-200 hover:text-rose-100",onClick:()=>pe(fe,re=>re.filter((ce,he)=>he!==te)),children:"Quitar"})]}),g.jsxs("div",{className:"mt-3 grid gap-3",children:[g.jsxs("label",{className:"grid gap-1",children:[g.jsx("span",{className:"text-xs text-white/50",children:"Tags (AND)"}),g.jsx(Ua,{options:M,value:W.byTags??[],onChange:re=>pe(fe,ce=>{const he=[...ce];return he[te]={...he[te],byTags:re},he}),placeholder:"Search tags",allowCreate:!0,onCreate:re=>{const ce=i(re);return ce?{createdValue:ce,createdLabel:ce}:null}})]}),g.jsxs("label",{className:"grid gap-1",children:[g.jsx("span",{className:"text-xs text-white/50",children:"Node types"}),g.jsx(Ua,{options:C,value:W.byNodeTypes??[],onChange:re=>pe(fe,ce=>{const he=[...ce];return he[te]={...he[te],byNodeTypes:re},he}),placeholder:"Search node types",allowCreate:!0,onCreate:re=>{const ce=r(re);return ce?{createdValue:ce,createdLabel:re.trim()}:null}})]}),g.jsxs("label",{className:"grid gap-1",children:[g.jsx("span",{className:"text-xs text-white/50",children:"Work IDs"}),g.jsx("input",{type:"text",className:"input-field",value:H1(W.byWorkIds),placeholder:"id1, id2",onChange:re=>{const ce=W1(re.target.value);pe(fe,he=>{const _e=[...he];return _e[te]={..._e[te],byWorkIds:ce},_e})}})]})]})]},`${fe}-${F.id}-${te}`))]},`${F.id}-${fe}`))}):null]})})}):null]},F.id)})})]}),g.jsxs("details",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[g.jsx("summary",{className:"cursor-pointer text-sm font-semibold text-white/80",children:"Estimacin de minutos por tipo"}),g.jsx("div",{className:"mt-3 grid gap-3 sm:grid-cols-2",children:Object.entries(f.defaultMinutesByNodeType).sort(([F],[V])=>F.localeCompare(V,"es",{sensitivity:"base"})).map(([F,V])=>g.jsxs("label",{className:"grid gap-2",children:[g.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:F}),g.jsx("input",{type:"number",min:.25,step:.25,className:"input-field",value:V,onChange:A=>h(O=>({...O,defaultMinutesByNodeType:{...O.defaultMinutesByNodeType,[F]:Number(A.target.value)}}))})]},F))})]})]}),g.jsxs("section",{className:"glass-panel space-y-5 p-6",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-xl font-semibold text-white",children:"Cadencias"}),g.jsx("p",{className:"text-sm text-white/60",children:"Objetivo de das por tipo, con overrides por tags."})]}),g.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:Array.from(new Set([...Object.keys(u.targetsDays??{}),...(n.nodeTypes??[]).map(F=>F.key)])).map(F=>F.trim().toLowerCase()).filter(Boolean).sort((F,V)=>F.localeCompare(V,"en",{sensitivity:"base"})).map(F=>{var O;const V=((O=(n.nodeTypes??[]).find(Q=>Q.key===F))==null?void 0:O.label)??F,A=(u.targetsDays??{})[F]??(u.targetsDays??{}).work??7;return g.jsxs("label",{className:"grid gap-2",children:[g.jsxs("span",{className:"text-xs uppercase tracking-wide text-white/40",children:[V," ",g.jsxs("span",{className:"text-white/30",children:["(",F,")"]})]}),g.jsx("input",{type:"number",min:1,className:"input-field",value:A,onChange:Q=>c(H=>({...H,targetsDays:{...H.targetsDays,[F]:Number(Q.target.value)}}))})]},F)})}),g.jsxs("details",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[g.jsx("summary",{className:"cursor-pointer text-sm font-semibold text-white/80",children:"Overrides"}),g.jsxs("div",{className:"mt-3 space-y-3",children:[(u.overrides??[]).map((F,V)=>g.jsxs("div",{className:"rounded-2xl border border-white/10 bg-slate-950/40 p-4",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:["Override ",V+1]}),g.jsx("button",{type:"button",className:"text-xs font-semibold text-rose-200 hover:text-rose-100",onClick:()=>c(A=>({...A,overrides:(A.overrides??[]).filter((O,Q)=>Q!==V)})),children:"Quitar"})]}),g.jsxs("div",{className:"mt-3 grid gap-3 sm:grid-cols-2",children:[g.jsxs("label",{className:"grid gap-1",children:[g.jsx("span",{className:"text-xs text-white/50",children:"Tags (ANY)"}),g.jsx(Ua,{options:M,value:F.match.tagsAny??[],onChange:A=>c(O=>{const Q=[...O.overrides??[]];return Q[V]={...F,match:{tagsAny:A}},{...O,overrides:Q}}),placeholder:"Search tags",allowCreate:!0,onCreate:A=>{const O=i(A);return O?{createdValue:O,createdLabel:O}:null}})]}),g.jsxs("label",{className:"grid gap-1",children:[g.jsx("span",{className:"text-xs text-white/50",children:"Multiplier"}),g.jsx("input",{type:"number",min:.1,step:.1,className:"input-field",value:F.multiplier,onChange:A=>{const O=Number(A.target.value);c(Q=>{const H=[...Q.overrides??[]];return H[V]={...F,multiplier:O},{...Q,overrides:H}})}})]})]})]},`override-${V}`)),g.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>c(F=>({...F,overrides:[...F.overrides??[],{match:{tagsAny:[]},multiplier:1}]})),children:"+ Aadir override"})]})]})]})]})}const ew=[{to:"/",label:"Sesiones"},{to:"/personal",label:"Personal"},{to:"/catalog",label:"Trabajos"},{to:"/objectives",label:"Objetivos"},{to:"/assistants",label:"Asistentes"},{to:"/backups",label:"Backups"}];function e5(){const[e,t]=k.useState(!1),[n,r]=k.useState(!1),{user:i,signOut:o}=_s(),l=async()=>{try{r(!0),await o()}catch(u){console.error("No se pudo cerrar sesin",u)}finally{r(!1),t(!1)}};return g.jsxs("header",{className:"sticky top-0 z-50 border-b border-white/10 bg-slate-950/80 backdrop-blur-xl",children:[g.jsxs("div",{className:"mx-auto flex max-w-6xl items-center justify-between px-3 py-3 sm:px-4 sm:py-4",children:[g.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[g.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-gradient-to-br from-sky-500 to-indigo-500 text-base font-bold sm:h-10 sm:w-10 sm:text-lg",children:"SP"}),g.jsxs("div",{children:[g.jsx("p",{className:"font-display text-lg font-semibold sm:text-xl",children:"Sport Planner"}),g.jsx("p",{className:"text-[11px] text-white/50 sm:text-xs",children:"Planifica sesiones increbles"})]})]}),g.jsxs("div",{className:"hidden items-center gap-4 md:flex",children:[g.jsx("nav",{className:"flex items-center gap-2",children:ew.map(u=>g.jsx(yv,{to:u.to,className:({isActive:c})=>`rounded-full px-4 py-2 text-sm font-medium transition ${c?"bg-white text-slate-900 shadow-lg shadow-sky-400/30":"text-white/70 hover:text-white hover:bg-white/10"}`,children:u.label},u.to))}),g.jsxs("div",{className:"flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-4 py-2",children:[g.jsxs("div",{className:"text-right",children:[g.jsx("p",{className:"text-xs text-white/50",children:"Sesin iniciada"}),g.jsx("p",{className:"text-sm font-semibold text-white",children:(i==null?void 0:i.email)??"Cuenta"})]}),g.jsx("button",{type:"button",onClick:()=>{l()},disabled:n,className:"inline-flex items-center rounded-full border border-white/20 px-3 py-1 text-xs font-semibold text-white/80 transition hover:bg-white/10 disabled:opacity-60",children:n?"Saliendo":"Cerrar sesin"})]})]}),g.jsx("button",{type:"button",className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-white/20 text-white/80 md:hidden",onClick:()=>t(!0),"aria-label":"Abrir navegacin",children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"h-6 w-6",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 6h16M4 12h16M4 18h16"})})})]}),g.jsxs(rx,{open:e,onClose:t,className:"md:hidden",children:[g.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm","aria-hidden":"true"}),g.jsxs(rx.Panel,{className:"fixed inset-y-4 right-3 flex w-[17rem] flex-col rounded-3xl border border-white/10 bg-slate-900/95 p-6 shadow-2xl",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("p",{className:"text-lg font-semibold text-white",children:"Navegacin"}),g.jsx("button",{type:"button",className:"inline-flex h-9 w-9 items-center justify-center rounded-full border border-white/20 text-white/80",onClick:()=>t(!1),"aria-label":"Cerrar navegacin",children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"h-5 w-5",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]}),g.jsx("div",{className:"mt-6 flex flex-col gap-2",children:ew.map(u=>g.jsx(yv,{to:u.to,className:({isActive:c})=>`rounded-2xl px-4 py-3 text-sm font-semibold transition ${c?"bg-white text-slate-900 shadow shadow-sky-400/40":"text-white/80 hover:bg-white/10"}`,onClick:()=>t(!1),children:u.label},u.to))}),g.jsxs("div",{className:"mt-auto rounded-2xl border border-white/10 bg-white/5 p-4",children:[g.jsx("p",{className:"text-xs uppercase tracking-wide text-white/40",children:"Sesin iniciada"}),g.jsx("p",{className:"mt-1 text-sm font-semibold text-white",children:(i==null?void 0:i.email)??"Cuenta"}),g.jsx("button",{type:"button",onClick:()=>{l()},disabled:n,className:"mt-3 w-full rounded-full border border-white/20 px-3 py-2 text-sm font-semibold text-white/80 transition hover:bg-white/10 disabled:opacity-60",children:n?"Saliendo":"Cerrar sesin"})]})]})]})]})}function t5(){return RR(),OR(),g.jsxs("div",{className:"min-h-screen pb-16",children:[g.jsx(e5,{}),g.jsx("main",{className:"mx-auto w-full max-w-6xl px-3 py-5 sm:px-6 sm:py-10",children:g.jsx(dw,{})})]})}function n5(){return g.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-950",children:g.jsxs("div",{className:"flex flex-col items-center gap-4",children:[g.jsx("div",{className:"h-12 w-12 animate-spin rounded-full border-2 border-white/20 border-t-sky-400"}),g.jsx("p",{className:"text-sm font-medium text-white/60",children:"Cargando Sport Planner"})]})})}function r5(){const{session:e,loading:t}=_s(),n=ii();return t?g.jsx(n5,{}):e?g.jsx(dw,{}):g.jsx(wc,{to:"/login",replace:!0,state:{from:n}})}function i5(){return g.jsx(Y_,{children:g.jsxs($_,{children:[g.jsx(wn,{path:"/login",element:g.jsx($3,{})}),g.jsx(wn,{element:g.jsx(r5,{}),children:g.jsxs(wn,{element:g.jsx(t5,{}),children:[g.jsx(wn,{index:!0,element:g.jsx(j3,{})}),g.jsx(wn,{path:"personal",element:g.jsx(G3,{})}),g.jsx(wn,{path:"personal/sessions",element:g.jsx(K3,{})}),g.jsx(wn,{path:"personal/settings",element:g.jsx(Z3,{})}),g.jsx(wn,{path:"plan",element:g.jsx(N3,{})}),g.jsx(wn,{path:"catalog",element:g.jsx(R3,{})}),g.jsx(wn,{path:"catalog/taxonomy",element:g.jsx(O3,{})}),g.jsx(wn,{path:"objectives",element:g.jsx(M3,{})}),g.jsx(wn,{path:"assistants",element:g.jsx(D3,{})}),g.jsx(wn,{path:"backups",element:g.jsx(L3,{})})]})}),g.jsx(wn,{path:"*",element:g.jsx(wc,{to:"/",replace:!0})})]})})}function s5({children:e}){const[t,n]=k.useState(null),[r,i]=k.useState(null),[o,l]=k.useState(!0);k.useEffect(()=>{let c=!0;(async()=>{l(!0);const{data:{session:p}}=await Bt.auth.getSession();c&&(n(p),i((p==null?void 0:p.user)??null),l(!1))})();const{data:{subscription:h}}=Bt.auth.onAuthStateChange((p,y)=>{c&&(n(y),i((y==null?void 0:y.user)??null),l(!1))});return()=>{c=!1,h.unsubscribe()}},[]);const u=k.useMemo(()=>({session:t,user:r,loading:o,signInWithPassword:async(c,f)=>{const{error:h}=await Bt.auth.signInWithPassword({email:c,password:f});if(h)throw h},signUpWithPassword:async(c,f)=>{const p=typeof window<"u"?`${window.location.origin}/sport-planner/`:void 0,{error:y}=await Bt.auth.signUp({email:c,password:f,options:{emailRedirectTo:p}});if(y)throw y},signOut:async()=>{const{error:c}=await Bt.auth.signOut();if(c)throw c}}),[o,t,r]);return g.jsx(Db.Provider,{value:u,children:e})}je.getState().hydrate();YE.createRoot(document.getElementById("root")).render(g.jsx(Ne.StrictMode,{children:g.jsx(s5,{children:g.jsx(i5,{})})}));
