function WE(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Ao(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function HE(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var Rf={exports:{}},Ea={},Of={exports:{}},ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ov;function VE(){if(ov)return ct;ov=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function y(U){return U===null||typeof U!="object"?null:(U=p&&U[p]||U["@@iterator"],typeof U=="function"?U:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,k={};function E(U,te,A){this.props=U,this.context=te,this.refs=k,this.updater=A||v}E.prototype.isReactComponent={},E.prototype.setState=function(U,te){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,te,"setState")},E.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function C(){}C.prototype=E.prototype;function _(U,te,A){this.props=U,this.context=te,this.refs=k,this.updater=A||v}var j=_.prototype=new C;j.constructor=_,S(j,E.prototype),j.isPureReactComponent=!0;var I=Array.isArray,M=Object.prototype.hasOwnProperty,P={current:null},z={key:!0,ref:!0,__self:!0,__source:!0};function ne(U,te,A){var we,he={},me=null,de=null;if(te!=null)for(we in te.ref!==void 0&&(de=te.ref),te.key!==void 0&&(me=""+te.key),te)M.call(te,we)&&!z.hasOwnProperty(we)&&(he[we]=te[we]);var Ne=arguments.length-2;if(Ne===1)he.children=A;else if(1<Ne){for(var Ae=Array(Ne),Ie=0;Ie<Ne;Ie++)Ae[Ie]=arguments[Ie+2];he.children=Ae}if(U&&U.defaultProps)for(we in Ne=U.defaultProps,Ne)he[we]===void 0&&(he[we]=Ne[we]);return{$$typeof:e,type:U,key:me,ref:de,props:he,_owner:P.current}}function Z(U,te){return{$$typeof:e,type:U.type,key:te,ref:U.ref,props:U.props,_owner:U._owner}}function R(U){return typeof U=="object"&&U!==null&&U.$$typeof===e}function D(U){var te={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(A){return te[A]})}var H=/\/+/g;function W(U,te){return typeof U=="object"&&U!==null&&U.key!=null?D(""+U.key):te.toString(36)}function G(U,te,A,we,he){var me=typeof U;(me==="undefined"||me==="boolean")&&(U=null);var de=!1;if(U===null)de=!0;else switch(me){case"string":case"number":de=!0;break;case"object":switch(U.$$typeof){case e:case t:de=!0}}if(de)return de=U,he=he(de),U=we===""?"."+W(de,0):we,I(he)?(A="",U!=null&&(A=U.replace(H,"$&/")+"/"),G(he,te,A,"",function(Ie){return Ie})):he!=null&&(R(he)&&(he=Z(he,A+(!he.key||de&&de.key===he.key?"":(""+he.key).replace(H,"$&/")+"/")+U)),te.push(he)),1;if(de=0,we=we===""?".":we+":",I(U))for(var Ne=0;Ne<U.length;Ne++){me=U[Ne];var Ae=we+W(me,Ne);de+=G(me,te,A,Ae,he)}else if(Ae=y(U),typeof Ae=="function")for(U=Ae.call(U),Ne=0;!(me=U.next()).done;)me=me.value,Ae=we+W(me,Ne++),de+=G(me,te,A,Ae,he);else if(me==="object")throw te=String(U),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.");return de}function $(U,te,A){if(U==null)return U;var we=[],he=0;return G(U,we,"","",function(me){return te.call(A,me,he++)}),we}function Y(U){if(U._status===-1){var te=U._result;te=te(),te.then(function(A){(U._status===0||U._status===-1)&&(U._status=1,U._result=A)},function(A){(U._status===0||U._status===-1)&&(U._status=2,U._result=A)}),U._status===-1&&(U._status=0,U._result=te)}if(U._status===1)return U._result.default;throw U._result}var re={current:null},O={transition:null},ee={ReactCurrentDispatcher:re,ReactCurrentBatchConfig:O,ReactCurrentOwner:P};function T(){throw Error("act(...) is not supported in production builds of React.")}return ct.Children={map:$,forEach:function(U,te,A){$(U,function(){te.apply(this,arguments)},A)},count:function(U){var te=0;return $(U,function(){te++}),te},toArray:function(U){return $(U,function(te){return te})||[]},only:function(U){if(!R(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},ct.Component=E,ct.Fragment=n,ct.Profiler=i,ct.PureComponent=_,ct.StrictMode=r,ct.Suspense=c,ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ee,ct.act=T,ct.cloneElement=function(U,te,A){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var we=S({},U.props),he=U.key,me=U.ref,de=U._owner;if(te!=null){if(te.ref!==void 0&&(me=te.ref,de=P.current),te.key!==void 0&&(he=""+te.key),U.type&&U.type.defaultProps)var Ne=U.type.defaultProps;for(Ae in te)M.call(te,Ae)&&!z.hasOwnProperty(Ae)&&(we[Ae]=te[Ae]===void 0&&Ne!==void 0?Ne[Ae]:te[Ae])}var Ae=arguments.length-2;if(Ae===1)we.children=A;else if(1<Ae){Ne=Array(Ae);for(var Ie=0;Ie<Ae;Ie++)Ne[Ie]=arguments[Ie+2];we.children=Ne}return{$$typeof:e,type:U.type,key:he,ref:me,props:we,_owner:de}},ct.createContext=function(U){return U={$$typeof:l,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:o,_context:U},U.Consumer=U},ct.createElement=ne,ct.createFactory=function(U){var te=ne.bind(null,U);return te.type=U,te},ct.createRef=function(){return{current:null}},ct.forwardRef=function(U){return{$$typeof:u,render:U}},ct.isValidElement=R,ct.lazy=function(U){return{$$typeof:h,_payload:{_status:-1,_result:U},_init:Y}},ct.memo=function(U,te){return{$$typeof:f,type:U,compare:te===void 0?null:te}},ct.startTransition=function(U){var te=O.transition;O.transition={};try{U()}finally{O.transition=te}},ct.unstable_act=T,ct.useCallback=function(U,te){return re.current.useCallback(U,te)},ct.useContext=function(U){return re.current.useContext(U)},ct.useDebugValue=function(){},ct.useDeferredValue=function(U){return re.current.useDeferredValue(U)},ct.useEffect=function(U,te){return re.current.useEffect(U,te)},ct.useId=function(){return re.current.useId()},ct.useImperativeHandle=function(U,te,A){return re.current.useImperativeHandle(U,te,A)},ct.useInsertionEffect=function(U,te){return re.current.useInsertionEffect(U,te)},ct.useLayoutEffect=function(U,te){return re.current.useLayoutEffect(U,te)},ct.useMemo=function(U,te){return re.current.useMemo(U,te)},ct.useReducer=function(U,te,A){return re.current.useReducer(U,te,A)},ct.useRef=function(U){return re.current.useRef(U)},ct.useState=function(U){return re.current.useState(U)},ct.useSyncExternalStore=function(U,te,A){return re.current.useSyncExternalStore(U,te,A)},ct.useTransition=function(){return re.current.useTransition()},ct.version="18.3.1",ct}var av;function kc(){return av||(av=1,Of.exports=VE()),Of.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lv;function qE(){if(lv)return Ea;lv=1;var e=kc(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,c,f){var h,p={},y=null,v=null;f!==void 0&&(y=""+f),c.key!==void 0&&(y=""+c.key),c.ref!==void 0&&(v=c.ref);for(h in c)r.call(c,h)&&!o.hasOwnProperty(h)&&(p[h]=c[h]);if(u&&u.defaultProps)for(h in c=u.defaultProps,c)p[h]===void 0&&(p[h]=c[h]);return{$$typeof:t,type:u,key:y,ref:v,props:p,_owner:i.current}}return Ea.Fragment=n,Ea.jsx=l,Ea.jsxs=l,Ea}var uv;function YE(){return uv||(uv=1,Rf.exports=qE()),Rf.exports}var m=YE(),w=kc();const Me=Ao(w),Xu=WE({__proto__:null,default:Me},[w]);var _u={},Mf={exports:{}},Rn={},Df={exports:{}},Lf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cv;function GE(){return cv||(cv=1,(function(e){function t(O,ee){var T=O.length;O.push(ee);e:for(;0<T;){var U=T-1>>>1,te=O[U];if(0<i(te,ee))O[U]=ee,O[T]=te,T=U;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var ee=O[0],T=O.pop();if(T!==ee){O[0]=T;e:for(var U=0,te=O.length,A=te>>>1;U<A;){var we=2*(U+1)-1,he=O[we],me=we+1,de=O[me];if(0>i(he,T))me<te&&0>i(de,he)?(O[U]=de,O[me]=T,U=me):(O[U]=he,O[we]=T,U=we);else if(me<te&&0>i(de,T))O[U]=de,O[me]=T,U=me;else break e}}return ee}function i(O,ee){var T=O.sortIndex-ee.sortIndex;return T!==0?T:O.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var c=[],f=[],h=1,p=null,y=3,v=!1,S=!1,k=!1,E=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(O){for(var ee=n(f);ee!==null;){if(ee.callback===null)r(f);else if(ee.startTime<=O)r(f),ee.sortIndex=ee.expirationTime,t(c,ee);else break;ee=n(f)}}function I(O){if(k=!1,j(O),!S)if(n(c)!==null)S=!0,Y(M);else{var ee=n(f);ee!==null&&re(I,ee.startTime-O)}}function M(O,ee){S=!1,k&&(k=!1,C(ne),ne=-1),v=!0;var T=y;try{for(j(ee),p=n(c);p!==null&&(!(p.expirationTime>ee)||O&&!D());){var U=p.callback;if(typeof U=="function"){p.callback=null,y=p.priorityLevel;var te=U(p.expirationTime<=ee);ee=e.unstable_now(),typeof te=="function"?p.callback=te:p===n(c)&&r(c),j(ee)}else r(c);p=n(c)}if(p!==null)var A=!0;else{var we=n(f);we!==null&&re(I,we.startTime-ee),A=!1}return A}finally{p=null,y=T,v=!1}}var P=!1,z=null,ne=-1,Z=5,R=-1;function D(){return!(e.unstable_now()-R<Z)}function H(){if(z!==null){var O=e.unstable_now();R=O;var ee=!0;try{ee=z(!0,O)}finally{ee?W():(P=!1,z=null)}}else P=!1}var W;if(typeof _=="function")W=function(){_(H)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,$=G.port2;G.port1.onmessage=H,W=function(){$.postMessage(null)}}else W=function(){E(H,0)};function Y(O){z=O,P||(P=!0,W())}function re(O,ee){ne=E(function(){O(e.unstable_now())},ee)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){S||v||(S=!0,Y(M))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(O){switch(y){case 1:case 2:case 3:var ee=3;break;default:ee=y}var T=y;y=ee;try{return O()}finally{y=T}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,ee){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var T=y;y=O;try{return ee()}finally{y=T}},e.unstable_scheduleCallback=function(O,ee,T){var U=e.unstable_now();switch(typeof T=="object"&&T!==null?(T=T.delay,T=typeof T=="number"&&0<T?U+T:U):T=U,O){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=T+te,O={id:h++,callback:ee,priorityLevel:O,startTime:T,expirationTime:te,sortIndex:-1},T>U?(O.sortIndex=T,t(f,O),n(c)===null&&O===n(f)&&(k?(C(ne),ne=-1):k=!0,re(I,T-U))):(O.sortIndex=te,t(c,O),S||v||(S=!0,Y(M))),O},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(O){var ee=y;return function(){var T=y;y=ee;try{return O.apply(this,arguments)}finally{y=T}}}})(Lf)),Lf}var dv;function KE(){return dv||(dv=1,Df.exports=GE()),Df.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fv;function JE(){if(fv)return Rn;fv=1;var e=kc(),t=KE();function n(s){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+s,d=1;d<arguments.length;d++)a+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(s,a){l(s,a),l(s+"Capture",a)}function l(s,a){for(i[s]=a,s=0;s<a.length;s++)r.add(a[s])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function y(s){return c.call(p,s)?!0:c.call(h,s)?!1:f.test(s)?p[s]=!0:(h[s]=!0,!1)}function v(s,a,d,g){if(d!==null&&d.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return g?!1:d!==null?!d.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function S(s,a,d,g){if(a===null||typeof a>"u"||v(s,a,d,g))return!0;if(g)return!1;if(d!==null)switch(d.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function k(s,a,d,g,x,b,N){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=g,this.attributeNamespace=x,this.mustUseProperty=d,this.propertyName=s,this.type=a,this.sanitizeURL=b,this.removeEmptyString=N}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){E[s]=new k(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var a=s[0];E[a]=new k(a,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){E[s]=new k(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){E[s]=new k(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){E[s]=new k(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){E[s]=new k(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){E[s]=new k(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){E[s]=new k(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){E[s]=new k(s,5,!1,s.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function _(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var a=s.replace(C,_);E[a]=new k(a,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var a=s.replace(C,_);E[a]=new k(a,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var a=s.replace(C,_);E[a]=new k(a,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){E[s]=new k(s,1,!1,s.toLowerCase(),null,!1,!1)}),E.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){E[s]=new k(s,1,!1,s.toLowerCase(),null,!0,!0)});function j(s,a,d,g){var x=E.hasOwnProperty(a)?E[a]:null;(x!==null?x.type!==0:g||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(S(a,d,x,g)&&(d=null),g||x===null?y(a)&&(d===null?s.removeAttribute(a):s.setAttribute(a,""+d)):x.mustUseProperty?s[x.propertyName]=d===null?x.type===3?!1:"":d:(a=x.attributeName,g=x.attributeNamespace,d===null?s.removeAttribute(a):(x=x.type,d=x===3||x===4&&d===!0?"":""+d,g?s.setAttributeNS(g,a,d):s.setAttribute(a,d))))}var I=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,M=Symbol.for("react.element"),P=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),ne=Symbol.for("react.strict_mode"),Z=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),D=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),re=Symbol.for("react.offscreen"),O=Symbol.iterator;function ee(s){return s===null||typeof s!="object"?null:(s=O&&s[O]||s["@@iterator"],typeof s=="function"?s:null)}var T=Object.assign,U;function te(s){if(U===void 0)try{throw Error()}catch(d){var a=d.stack.trim().match(/\n( *(at )?)/);U=a&&a[1]||""}return`
`+U+s}var A=!1;function we(s,a){if(!s||A)return"";A=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(le){var g=le}Reflect.construct(s,[],a)}else{try{a.call()}catch(le){g=le}s.call(a.prototype)}else{try{throw Error()}catch(le){g=le}s()}}catch(le){if(le&&g&&typeof le.stack=="string"){for(var x=le.stack.split(`
`),b=g.stack.split(`
`),N=x.length-1,B=b.length-1;1<=N&&0<=B&&x[N]!==b[B];)B--;for(;1<=N&&0<=B;N--,B--)if(x[N]!==b[B]){if(N!==1||B!==1)do if(N--,B--,0>B||x[N]!==b[B]){var q=`
`+x[N].replace(" at new "," at ");return s.displayName&&q.includes("<anonymous>")&&(q=q.replace("<anonymous>",s.displayName)),q}while(1<=N&&0<=B);break}}}finally{A=!1,Error.prepareStackTrace=d}return(s=s?s.displayName||s.name:"")?te(s):""}function he(s){switch(s.tag){case 5:return te(s.type);case 16:return te("Lazy");case 13:return te("Suspense");case 19:return te("SuspenseList");case 0:case 2:case 15:return s=we(s.type,!1),s;case 11:return s=we(s.type.render,!1),s;case 1:return s=we(s.type,!0),s;default:return""}}function me(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case z:return"Fragment";case P:return"Portal";case Z:return"Profiler";case ne:return"StrictMode";case W:return"Suspense";case G:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case D:return(s.displayName||"Context")+".Consumer";case R:return(s._context.displayName||"Context")+".Provider";case H:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case $:return a=s.displayName||null,a!==null?a:me(s.type)||"Memo";case Y:a=s._payload,s=s._init;try{return me(s(a))}catch{}}return null}function de(s){var a=s.type;switch(s.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=a.render,s=s.displayName||s.name||"",a.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return me(a);case 8:return a===ne?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Ne(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ae(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Ie(s){var a=Ae(s)?"checked":"value",d=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),g=""+s[a];if(!s.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var x=d.get,b=d.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return x.call(this)},set:function(N){g=""+N,b.call(this,N)}}),Object.defineProperty(s,a,{enumerable:d.enumerable}),{getValue:function(){return g},setValue:function(N){g=""+N},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function X(s){s._valueTracker||(s._valueTracker=Ie(s))}function je(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var d=a.getValue(),g="";return s&&(g=Ae(s)?s.checked?"true":"false":s.value),s=g,s!==d?(a.setValue(s),!0):!1}function De(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Ye(s,a){var d=a.checked;return T({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??s._wrapperState.initialChecked})}function Ze(s,a){var d=a.defaultValue==null?"":a.defaultValue,g=a.checked!=null?a.checked:a.defaultChecked;d=Ne(a.value!=null?a.value:d),s._wrapperState={initialChecked:g,initialValue:d,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function ft(s,a){a=a.checked,a!=null&&j(s,"checked",a,!1)}function Pt(s,a){ft(s,a);var d=Ne(a.value),g=a.type;if(d!=null)g==="number"?(d===0&&s.value===""||s.value!=d)&&(s.value=""+d):s.value!==""+d&&(s.value=""+d);else if(g==="submit"||g==="reset"){s.removeAttribute("value");return}a.hasOwnProperty("value")?J(s,a.type,d):a.hasOwnProperty("defaultValue")&&J(s,a.type,Ne(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(s.defaultChecked=!!a.defaultChecked)}function en(s,a,d){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var g=a.type;if(!(g!=="submit"&&g!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+s._wrapperState.initialValue,d||a===s.value||(s.value=a),s.defaultValue=a}d=s.name,d!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,d!==""&&(s.name=d)}function J(s,a,d){(a!=="number"||De(s.ownerDocument)!==s)&&(d==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+d&&(s.defaultValue=""+d))}var ce=Array.isArray;function ge(s,a,d,g){if(s=s.options,a){a={};for(var x=0;x<d.length;x++)a["$"+d[x]]=!0;for(d=0;d<s.length;d++)x=a.hasOwnProperty("$"+s[d].value),s[d].selected!==x&&(s[d].selected=x),x&&g&&(s[d].defaultSelected=!0)}else{for(d=""+Ne(d),a=null,x=0;x<s.length;x++){if(s[x].value===d){s[x].selected=!0,g&&(s[x].defaultSelected=!0);return}a!==null||s[x].disabled||(a=s[x])}a!==null&&(a.selected=!0)}}function Pe(s,a){if(a.dangerouslySetInnerHTML!=null)throw Error(n(91));return T({},a,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function ke(s,a){var d=a.value;if(d==null){if(d=a.children,a=a.defaultValue,d!=null){if(a!=null)throw Error(n(92));if(ce(d)){if(1<d.length)throw Error(n(93));d=d[0]}a=d}a==null&&(a=""),d=a}s._wrapperState={initialValue:Ne(d)}}function ue(s,a){var d=Ne(a.value),g=Ne(a.defaultValue);d!=null&&(d=""+d,d!==s.value&&(s.value=d),a.defaultValue==null&&s.defaultValue!==d&&(s.defaultValue=d)),g!=null&&(s.defaultValue=""+g)}function Te(s){var a=s.textContent;a===s._wrapperState.initialValue&&a!==""&&a!==null&&(s.value=a)}function ae(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(s,a){return s==null||s==="http://www.w3.org/1999/xhtml"?ae(a):s==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Re,He=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,d,g,x){MSApp.execUnsafeLocalFunction(function(){return s(a,d,g,x)})}:s})(function(s,a){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=a;else{for(Re=Re||document.createElement("div"),Re.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=Re.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;a.firstChild;)s.appendChild(a.firstChild)}});function ve(s,a){if(a){var d=s.firstChild;if(d&&d===s.lastChild&&d.nodeType===3){d.nodeValue=a;return}}s.textContent=a}var F={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},L=["Webkit","ms","Moz","O"];Object.keys(F).forEach(function(s){L.forEach(function(a){a=a+s.charAt(0).toUpperCase()+s.substring(1),F[a]=F[s]})});function V(s,a,d){return a==null||typeof a=="boolean"||a===""?"":d||typeof a!="number"||a===0||F.hasOwnProperty(s)&&F[s]?(""+a).trim():a+"px"}function K(s,a){s=s.style;for(var d in a)if(a.hasOwnProperty(d)){var g=d.indexOf("--")===0,x=V(d,a[d],g);d==="float"&&(d="cssFloat"),g?s.setProperty(d,x):s[d]=x}}var se=T({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fe(s,a){if(a){if(se[s]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(n(137,s));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(n(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(n(61))}if(a.style!=null&&typeof a.style!="object")throw Error(n(62))}}function Se(s,a){if(s.indexOf("-")===-1)return typeof a.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oe=null;function ot(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Be=null,ht=null,lt=null;function Ge(s){if(s=ua(s)){if(typeof Be!="function")throw Error(n(280));var a=s.stateNode;a&&(a=zl(a),Be(s.stateNode,s.type,a))}}function $e(s){ht?lt?lt.push(s):lt=[s]:ht=s}function Ue(){if(ht){var s=ht,a=lt;if(lt=ht=null,Ge(s),a)for(s=0;s<a.length;s++)Ge(a[s])}}function nt(s,a){return s(a)}function bt(){}var it=!1;function Rt(s,a,d){if(it)return s(a,d);it=!0;try{return nt(s,a,d)}finally{it=!1,(ht!==null||lt!==null)&&(bt(),Ue())}}function wt(s,a){var d=s.stateNode;if(d===null)return null;var g=zl(d);if(g===null)return null;d=g[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(s=s.type,g=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!g;break e;default:s=!1}if(s)return null;if(d&&typeof d!="function")throw Error(n(231,a,typeof d));return d}var zn=!1;if(u)try{var Kt={};Object.defineProperty(Kt,"passive",{get:function(){zn=!0}}),window.addEventListener("test",Kt,Kt),window.removeEventListener("test",Kt,Kt)}catch{zn=!1}function Zn(s,a,d,g,x,b,N,B,q){var le=Array.prototype.slice.call(arguments,3);try{a.apply(d,le)}catch(xe){this.onError(xe)}}var er=!1,jn=null,Bn=!1,Hr=null,Ho={onError:function(s){er=!0,jn=s}};function Q1(s,a,d,g,x,b,N,B,q){er=!1,jn=null,Zn.apply(Ho,arguments)}function X1(s,a,d,g,x,b,N,B,q){if(Q1.apply(this,arguments),er){if(er){var le=jn;er=!1,jn=null}else throw Error(n(198));Bn||(Bn=!0,Hr=le)}}function Vi(s){var a=s,d=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(d=a.return),s=a.return;while(s)}return a.tag===3?d:null}function Tm(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function Im(s){if(Vi(s)!==s)throw Error(n(188))}function Z1(s){var a=s.alternate;if(!a){if(a=Vi(s),a===null)throw Error(n(188));return a!==s?null:s}for(var d=s,g=a;;){var x=d.return;if(x===null)break;var b=x.alternate;if(b===null){if(g=x.return,g!==null){d=g;continue}break}if(x.child===b.child){for(b=x.child;b;){if(b===d)return Im(x),s;if(b===g)return Im(x),a;b=b.sibling}throw Error(n(188))}if(d.return!==g.return)d=x,g=b;else{for(var N=!1,B=x.child;B;){if(B===d){N=!0,d=x,g=b;break}if(B===g){N=!0,g=x,d=b;break}B=B.sibling}if(!N){for(B=b.child;B;){if(B===d){N=!0,d=b,g=x;break}if(B===g){N=!0,g=b,d=x;break}B=B.sibling}if(!N)throw Error(n(189))}}if(d.alternate!==g)throw Error(n(190))}if(d.tag!==3)throw Error(n(188));return d.stateNode.current===d?s:a}function Pm(s){return s=Z1(s),s!==null?Am(s):null}function Am(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var a=Am(s);if(a!==null)return a;s=s.sibling}return null}var Rm=t.unstable_scheduleCallback,Om=t.unstable_cancelCallback,eS=t.unstable_shouldYield,tS=t.unstable_requestPaint,Ft=t.unstable_now,nS=t.unstable_getCurrentPriorityLevel,Xc=t.unstable_ImmediatePriority,Mm=t.unstable_UserBlockingPriority,wl=t.unstable_NormalPriority,rS=t.unstable_LowPriority,Dm=t.unstable_IdlePriority,bl=null,jr=null;function iS(s){if(jr&&typeof jr.onCommitFiberRoot=="function")try{jr.onCommitFiberRoot(bl,s,void 0,(s.current.flags&128)===128)}catch{}}var fr=Math.clz32?Math.clz32:aS,sS=Math.log,oS=Math.LN2;function aS(s){return s>>>=0,s===0?32:31-(sS(s)/oS|0)|0}var kl=64,Sl=4194304;function Vo(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function El(s,a){var d=s.pendingLanes;if(d===0)return 0;var g=0,x=s.suspendedLanes,b=s.pingedLanes,N=d&268435455;if(N!==0){var B=N&~x;B!==0?g=Vo(B):(b&=N,b!==0&&(g=Vo(b)))}else N=d&~x,N!==0?g=Vo(N):b!==0&&(g=Vo(b));if(g===0)return 0;if(a!==0&&a!==g&&(a&x)===0&&(x=g&-g,b=a&-a,x>=b||x===16&&(b&4194240)!==0))return a;if((g&4)!==0&&(g|=d&16),a=s.entangledLanes,a!==0)for(s=s.entanglements,a&=g;0<a;)d=31-fr(a),x=1<<d,g|=s[d],a&=~x;return g}function lS(s,a){switch(s){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uS(s,a){for(var d=s.suspendedLanes,g=s.pingedLanes,x=s.expirationTimes,b=s.pendingLanes;0<b;){var N=31-fr(b),B=1<<N,q=x[N];q===-1?((B&d)===0||(B&g)!==0)&&(x[N]=lS(B,a)):q<=a&&(s.expiredLanes|=B),b&=~B}}function Zc(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Lm(){var s=kl;return kl<<=1,(kl&4194240)===0&&(kl=64),s}function ed(s){for(var a=[],d=0;31>d;d++)a.push(s);return a}function qo(s,a,d){s.pendingLanes|=a,a!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,a=31-fr(a),s[a]=d}function cS(s,a){var d=s.pendingLanes&~a;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=a,s.mutableReadLanes&=a,s.entangledLanes&=a,a=s.entanglements;var g=s.eventTimes;for(s=s.expirationTimes;0<d;){var x=31-fr(d),b=1<<x;a[x]=0,g[x]=-1,s[x]=-1,d&=~b}}function td(s,a){var d=s.entangledLanes|=a;for(s=s.entanglements;d;){var g=31-fr(d),x=1<<g;x&a|s[g]&a&&(s[g]|=a),d&=~x}}var vt=0;function $m(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var Fm,nd,zm,Bm,Um,rd=!1,_l=[],oi=null,ai=null,li=null,Yo=new Map,Go=new Map,ui=[],dS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wm(s,a){switch(s){case"focusin":case"focusout":oi=null;break;case"dragenter":case"dragleave":ai=null;break;case"mouseover":case"mouseout":li=null;break;case"pointerover":case"pointerout":Yo.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Go.delete(a.pointerId)}}function Ko(s,a,d,g,x,b){return s===null||s.nativeEvent!==b?(s={blockedOn:a,domEventName:d,eventSystemFlags:g,nativeEvent:b,targetContainers:[x]},a!==null&&(a=ua(a),a!==null&&nd(a)),s):(s.eventSystemFlags|=g,a=s.targetContainers,x!==null&&a.indexOf(x)===-1&&a.push(x),s)}function fS(s,a,d,g,x){switch(a){case"focusin":return oi=Ko(oi,s,a,d,g,x),!0;case"dragenter":return ai=Ko(ai,s,a,d,g,x),!0;case"mouseover":return li=Ko(li,s,a,d,g,x),!0;case"pointerover":var b=x.pointerId;return Yo.set(b,Ko(Yo.get(b)||null,s,a,d,g,x)),!0;case"gotpointercapture":return b=x.pointerId,Go.set(b,Ko(Go.get(b)||null,s,a,d,g,x)),!0}return!1}function Hm(s){var a=qi(s.target);if(a!==null){var d=Vi(a);if(d!==null){if(a=d.tag,a===13){if(a=Tm(d),a!==null){s.blockedOn=a,Um(s.priority,function(){zm(d)});return}}else if(a===3&&d.stateNode.current.memoizedState.isDehydrated){s.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Cl(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var d=sd(s.domEventName,s.eventSystemFlags,a[0],s.nativeEvent);if(d===null){d=s.nativeEvent;var g=new d.constructor(d.type,d);Oe=g,d.target.dispatchEvent(g),Oe=null}else return a=ua(d),a!==null&&nd(a),s.blockedOn=d,!1;a.shift()}return!0}function Vm(s,a,d){Cl(s)&&d.delete(a)}function hS(){rd=!1,oi!==null&&Cl(oi)&&(oi=null),ai!==null&&Cl(ai)&&(ai=null),li!==null&&Cl(li)&&(li=null),Yo.forEach(Vm),Go.forEach(Vm)}function Jo(s,a){s.blockedOn===a&&(s.blockedOn=null,rd||(rd=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,hS)))}function Qo(s){function a(x){return Jo(x,s)}if(0<_l.length){Jo(_l[0],s);for(var d=1;d<_l.length;d++){var g=_l[d];g.blockedOn===s&&(g.blockedOn=null)}}for(oi!==null&&Jo(oi,s),ai!==null&&Jo(ai,s),li!==null&&Jo(li,s),Yo.forEach(a),Go.forEach(a),d=0;d<ui.length;d++)g=ui[d],g.blockedOn===s&&(g.blockedOn=null);for(;0<ui.length&&(d=ui[0],d.blockedOn===null);)Hm(d),d.blockedOn===null&&ui.shift()}var Ps=I.ReactCurrentBatchConfig,jl=!0;function pS(s,a,d,g){var x=vt,b=Ps.transition;Ps.transition=null;try{vt=1,id(s,a,d,g)}finally{vt=x,Ps.transition=b}}function mS(s,a,d,g){var x=vt,b=Ps.transition;Ps.transition=null;try{vt=4,id(s,a,d,g)}finally{vt=x,Ps.transition=b}}function id(s,a,d,g){if(jl){var x=sd(s,a,d,g);if(x===null)kd(s,a,g,Nl,d),Wm(s,g);else if(fS(x,s,a,d,g))g.stopPropagation();else if(Wm(s,g),a&4&&-1<dS.indexOf(s)){for(;x!==null;){var b=ua(x);if(b!==null&&Fm(b),b=sd(s,a,d,g),b===null&&kd(s,a,g,Nl,d),b===x)break;x=b}x!==null&&g.stopPropagation()}else kd(s,a,g,null,d)}}var Nl=null;function sd(s,a,d,g){if(Nl=null,s=ot(g),s=qi(s),s!==null)if(a=Vi(s),a===null)s=null;else if(d=a.tag,d===13){if(s=Tm(a),s!==null)return s;s=null}else if(d===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null);return Nl=s,null}function qm(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nS()){case Xc:return 1;case Mm:return 4;case wl:case rS:return 16;case Dm:return 536870912;default:return 16}default:return 16}}var ci=null,od=null,Tl=null;function Ym(){if(Tl)return Tl;var s,a=od,d=a.length,g,x="value"in ci?ci.value:ci.textContent,b=x.length;for(s=0;s<d&&a[s]===x[s];s++);var N=d-s;for(g=1;g<=N&&a[d-g]===x[b-g];g++);return Tl=x.slice(s,1<g?1-g:void 0)}function Il(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Pl(){return!0}function Gm(){return!1}function Un(s){function a(d,g,x,b,N){this._reactName=d,this._targetInst=x,this.type=g,this.nativeEvent=b,this.target=N,this.currentTarget=null;for(var B in s)s.hasOwnProperty(B)&&(d=s[B],this[B]=d?d(b):b[B]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Pl:Gm,this.isPropagationStopped=Gm,this}return T(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Pl)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Pl)},persist:function(){},isPersistent:Pl}),a}var As={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ad=Un(As),Xo=T({},As,{view:0,detail:0}),gS=Un(Xo),ld,ud,Zo,Al=T({},Xo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dd,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Zo&&(Zo&&s.type==="mousemove"?(ld=s.screenX-Zo.screenX,ud=s.screenY-Zo.screenY):ud=ld=0,Zo=s),ld)},movementY:function(s){return"movementY"in s?s.movementY:ud}}),Km=Un(Al),yS=T({},Al,{dataTransfer:0}),vS=Un(yS),xS=T({},Xo,{relatedTarget:0}),cd=Un(xS),wS=T({},As,{animationName:0,elapsedTime:0,pseudoElement:0}),bS=Un(wS),kS=T({},As,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),SS=Un(kS),ES=T({},As,{data:0}),Jm=Un(ES),_S={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},CS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function NS(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=jS[s])?!!a[s]:!1}function dd(){return NS}var TS=T({},Xo,{key:function(s){if(s.key){var a=_S[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=Il(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?CS[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dd,charCode:function(s){return s.type==="keypress"?Il(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Il(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),IS=Un(TS),PS=T({},Al,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qm=Un(PS),AS=T({},Xo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dd}),RS=Un(AS),OS=T({},As,{propertyName:0,elapsedTime:0,pseudoElement:0}),MS=Un(OS),DS=T({},Al,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),LS=Un(DS),$S=[9,13,27,32],fd=u&&"CompositionEvent"in window,ea=null;u&&"documentMode"in document&&(ea=document.documentMode);var FS=u&&"TextEvent"in window&&!ea,Xm=u&&(!fd||ea&&8<ea&&11>=ea),Zm=" ",eg=!1;function tg(s,a){switch(s){case"keyup":return $S.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ng(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Rs=!1;function zS(s,a){switch(s){case"compositionend":return ng(a);case"keypress":return a.which!==32?null:(eg=!0,Zm);case"textInput":return s=a.data,s===Zm&&eg?null:s;default:return null}}function BS(s,a){if(Rs)return s==="compositionend"||!fd&&tg(s,a)?(s=Ym(),Tl=od=ci=null,Rs=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Xm&&a.locale!=="ko"?null:a.data;default:return null}}var US={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rg(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!US[s.type]:a==="textarea"}function ig(s,a,d,g){$e(g),a=Ll(a,"onChange"),0<a.length&&(d=new ad("onChange","change",null,d,g),s.push({event:d,listeners:a}))}var ta=null,na=null;function WS(s){kg(s,0)}function Rl(s){var a=$s(s);if(je(a))return s}function HS(s,a){if(s==="change")return a}var sg=!1;if(u){var hd;if(u){var pd="oninput"in document;if(!pd){var og=document.createElement("div");og.setAttribute("oninput","return;"),pd=typeof og.oninput=="function"}hd=pd}else hd=!1;sg=hd&&(!document.documentMode||9<document.documentMode)}function ag(){ta&&(ta.detachEvent("onpropertychange",lg),na=ta=null)}function lg(s){if(s.propertyName==="value"&&Rl(na)){var a=[];ig(a,na,s,ot(s)),Rt(WS,a)}}function VS(s,a,d){s==="focusin"?(ag(),ta=a,na=d,ta.attachEvent("onpropertychange",lg)):s==="focusout"&&ag()}function qS(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Rl(na)}function YS(s,a){if(s==="click")return Rl(a)}function GS(s,a){if(s==="input"||s==="change")return Rl(a)}function KS(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var hr=typeof Object.is=="function"?Object.is:KS;function ra(s,a){if(hr(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var d=Object.keys(s),g=Object.keys(a);if(d.length!==g.length)return!1;for(g=0;g<d.length;g++){var x=d[g];if(!c.call(a,x)||!hr(s[x],a[x]))return!1}return!0}function ug(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function cg(s,a){var d=ug(s);s=0;for(var g;d;){if(d.nodeType===3){if(g=s+d.textContent.length,s<=a&&g>=a)return{node:d,offset:a-s};s=g}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=ug(d)}}function dg(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?dg(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function fg(){for(var s=window,a=De();a instanceof s.HTMLIFrameElement;){try{var d=typeof a.contentWindow.location.href=="string"}catch{d=!1}if(d)s=a.contentWindow;else break;a=De(s.document)}return a}function md(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}function JS(s){var a=fg(),d=s.focusedElem,g=s.selectionRange;if(a!==d&&d&&d.ownerDocument&&dg(d.ownerDocument.documentElement,d)){if(g!==null&&md(d)){if(a=g.start,s=g.end,s===void 0&&(s=a),"selectionStart"in d)d.selectionStart=a,d.selectionEnd=Math.min(s,d.value.length);else if(s=(a=d.ownerDocument||document)&&a.defaultView||window,s.getSelection){s=s.getSelection();var x=d.textContent.length,b=Math.min(g.start,x);g=g.end===void 0?b:Math.min(g.end,x),!s.extend&&b>g&&(x=g,g=b,b=x),x=cg(d,b);var N=cg(d,g);x&&N&&(s.rangeCount!==1||s.anchorNode!==x.node||s.anchorOffset!==x.offset||s.focusNode!==N.node||s.focusOffset!==N.offset)&&(a=a.createRange(),a.setStart(x.node,x.offset),s.removeAllRanges(),b>g?(s.addRange(a),s.extend(N.node,N.offset)):(a.setEnd(N.node,N.offset),s.addRange(a)))}}for(a=[],s=d;s=s.parentNode;)s.nodeType===1&&a.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<a.length;d++)s=a[d],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var QS=u&&"documentMode"in document&&11>=document.documentMode,Os=null,gd=null,ia=null,yd=!1;function hg(s,a,d){var g=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;yd||Os==null||Os!==De(g)||(g=Os,"selectionStart"in g&&md(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),ia&&ra(ia,g)||(ia=g,g=Ll(gd,"onSelect"),0<g.length&&(a=new ad("onSelect","select",null,a,d),s.push({event:a,listeners:g}),a.target=Os)))}function Ol(s,a){var d={};return d[s.toLowerCase()]=a.toLowerCase(),d["Webkit"+s]="webkit"+a,d["Moz"+s]="moz"+a,d}var Ms={animationend:Ol("Animation","AnimationEnd"),animationiteration:Ol("Animation","AnimationIteration"),animationstart:Ol("Animation","AnimationStart"),transitionend:Ol("Transition","TransitionEnd")},vd={},pg={};u&&(pg=document.createElement("div").style,"AnimationEvent"in window||(delete Ms.animationend.animation,delete Ms.animationiteration.animation,delete Ms.animationstart.animation),"TransitionEvent"in window||delete Ms.transitionend.transition);function Ml(s){if(vd[s])return vd[s];if(!Ms[s])return s;var a=Ms[s],d;for(d in a)if(a.hasOwnProperty(d)&&d in pg)return vd[s]=a[d];return s}var mg=Ml("animationend"),gg=Ml("animationiteration"),yg=Ml("animationstart"),vg=Ml("transitionend"),xg=new Map,wg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function di(s,a){xg.set(s,a),o(a,[s])}for(var xd=0;xd<wg.length;xd++){var wd=wg[xd],XS=wd.toLowerCase(),ZS=wd[0].toUpperCase()+wd.slice(1);di(XS,"on"+ZS)}di(mg,"onAnimationEnd"),di(gg,"onAnimationIteration"),di(yg,"onAnimationStart"),di("dblclick","onDoubleClick"),di("focusin","onFocus"),di("focusout","onBlur"),di(vg,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eE=new Set("cancel close invalid load scroll toggle".split(" ").concat(sa));function bg(s,a,d){var g=s.type||"unknown-event";s.currentTarget=d,X1(g,a,void 0,s),s.currentTarget=null}function kg(s,a){a=(a&4)!==0;for(var d=0;d<s.length;d++){var g=s[d],x=g.event;g=g.listeners;e:{var b=void 0;if(a)for(var N=g.length-1;0<=N;N--){var B=g[N],q=B.instance,le=B.currentTarget;if(B=B.listener,q!==b&&x.isPropagationStopped())break e;bg(x,B,le),b=q}else for(N=0;N<g.length;N++){if(B=g[N],q=B.instance,le=B.currentTarget,B=B.listener,q!==b&&x.isPropagationStopped())break e;bg(x,B,le),b=q}}}if(Bn)throw s=Hr,Bn=!1,Hr=null,s}function Nt(s,a){var d=a[Nd];d===void 0&&(d=a[Nd]=new Set);var g=s+"__bubble";d.has(g)||(Sg(a,s,2,!1),d.add(g))}function bd(s,a,d){var g=0;a&&(g|=4),Sg(d,s,g,a)}var Dl="_reactListening"+Math.random().toString(36).slice(2);function oa(s){if(!s[Dl]){s[Dl]=!0,r.forEach(function(d){d!=="selectionchange"&&(eE.has(d)||bd(d,!1,s),bd(d,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Dl]||(a[Dl]=!0,bd("selectionchange",!1,a))}}function Sg(s,a,d,g){switch(qm(a)){case 1:var x=pS;break;case 4:x=mS;break;default:x=id}d=x.bind(null,a,d,s),x=void 0,!zn||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(x=!0),g?x!==void 0?s.addEventListener(a,d,{capture:!0,passive:x}):s.addEventListener(a,d,!0):x!==void 0?s.addEventListener(a,d,{passive:x}):s.addEventListener(a,d,!1)}function kd(s,a,d,g,x){var b=g;if((a&1)===0&&(a&2)===0&&g!==null)e:for(;;){if(g===null)return;var N=g.tag;if(N===3||N===4){var B=g.stateNode.containerInfo;if(B===x||B.nodeType===8&&B.parentNode===x)break;if(N===4)for(N=g.return;N!==null;){var q=N.tag;if((q===3||q===4)&&(q=N.stateNode.containerInfo,q===x||q.nodeType===8&&q.parentNode===x))return;N=N.return}for(;B!==null;){if(N=qi(B),N===null)return;if(q=N.tag,q===5||q===6){g=b=N;continue e}B=B.parentNode}}g=g.return}Rt(function(){var le=b,xe=ot(d),be=[];e:{var ye=xg.get(s);if(ye!==void 0){var Le=ad,We=s;switch(s){case"keypress":if(Il(d)===0)break e;case"keydown":case"keyup":Le=IS;break;case"focusin":We="focus",Le=cd;break;case"focusout":We="blur",Le=cd;break;case"beforeblur":case"afterblur":Le=cd;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Le=Km;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Le=vS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Le=RS;break;case mg:case gg:case yg:Le=bS;break;case vg:Le=MS;break;case"scroll":Le=gS;break;case"wheel":Le=LS;break;case"copy":case"cut":case"paste":Le=SS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Le=Qm}var Ve=(a&4)!==0,zt=!Ve&&s==="scroll",ie=Ve?ye!==null?ye+"Capture":null:ye;Ve=[];for(var Q=le,oe;Q!==null;){oe=Q;var _e=oe.stateNode;if(oe.tag===5&&_e!==null&&(oe=_e,ie!==null&&(_e=wt(Q,ie),_e!=null&&Ve.push(aa(Q,_e,oe)))),zt)break;Q=Q.return}0<Ve.length&&(ye=new Le(ye,We,null,d,xe),be.push({event:ye,listeners:Ve}))}}if((a&7)===0){e:{if(ye=s==="mouseover"||s==="pointerover",Le=s==="mouseout"||s==="pointerout",ye&&d!==Oe&&(We=d.relatedTarget||d.fromElement)&&(qi(We)||We[Vr]))break e;if((Le||ye)&&(ye=xe.window===xe?xe:(ye=xe.ownerDocument)?ye.defaultView||ye.parentWindow:window,Le?(We=d.relatedTarget||d.toElement,Le=le,We=We?qi(We):null,We!==null&&(zt=Vi(We),We!==zt||We.tag!==5&&We.tag!==6)&&(We=null)):(Le=null,We=le),Le!==We)){if(Ve=Km,_e="onMouseLeave",ie="onMouseEnter",Q="mouse",(s==="pointerout"||s==="pointerover")&&(Ve=Qm,_e="onPointerLeave",ie="onPointerEnter",Q="pointer"),zt=Le==null?ye:$s(Le),oe=We==null?ye:$s(We),ye=new Ve(_e,Q+"leave",Le,d,xe),ye.target=zt,ye.relatedTarget=oe,_e=null,qi(xe)===le&&(Ve=new Ve(ie,Q+"enter",We,d,xe),Ve.target=oe,Ve.relatedTarget=zt,_e=Ve),zt=_e,Le&&We)t:{for(Ve=Le,ie=We,Q=0,oe=Ve;oe;oe=Ds(oe))Q++;for(oe=0,_e=ie;_e;_e=Ds(_e))oe++;for(;0<Q-oe;)Ve=Ds(Ve),Q--;for(;0<oe-Q;)ie=Ds(ie),oe--;for(;Q--;){if(Ve===ie||ie!==null&&Ve===ie.alternate)break t;Ve=Ds(Ve),ie=Ds(ie)}Ve=null}else Ve=null;Le!==null&&Eg(be,ye,Le,Ve,!1),We!==null&&zt!==null&&Eg(be,zt,We,Ve,!0)}}e:{if(ye=le?$s(le):window,Le=ye.nodeName&&ye.nodeName.toLowerCase(),Le==="select"||Le==="input"&&ye.type==="file")var qe=HS;else if(rg(ye))if(sg)qe=GS;else{qe=qS;var Ke=VS}else(Le=ye.nodeName)&&Le.toLowerCase()==="input"&&(ye.type==="checkbox"||ye.type==="radio")&&(qe=YS);if(qe&&(qe=qe(s,le))){ig(be,qe,d,xe);break e}Ke&&Ke(s,ye,le),s==="focusout"&&(Ke=ye._wrapperState)&&Ke.controlled&&ye.type==="number"&&J(ye,"number",ye.value)}switch(Ke=le?$s(le):window,s){case"focusin":(rg(Ke)||Ke.contentEditable==="true")&&(Os=Ke,gd=le,ia=null);break;case"focusout":ia=gd=Os=null;break;case"mousedown":yd=!0;break;case"contextmenu":case"mouseup":case"dragend":yd=!1,hg(be,d,xe);break;case"selectionchange":if(QS)break;case"keydown":case"keyup":hg(be,d,xe)}var Je;if(fd)e:{switch(s){case"compositionstart":var rt="onCompositionStart";break e;case"compositionend":rt="onCompositionEnd";break e;case"compositionupdate":rt="onCompositionUpdate";break e}rt=void 0}else Rs?tg(s,d)&&(rt="onCompositionEnd"):s==="keydown"&&d.keyCode===229&&(rt="onCompositionStart");rt&&(Xm&&d.locale!=="ko"&&(Rs||rt!=="onCompositionStart"?rt==="onCompositionEnd"&&Rs&&(Je=Ym()):(ci=xe,od="value"in ci?ci.value:ci.textContent,Rs=!0)),Ke=Ll(le,rt),0<Ke.length&&(rt=new Jm(rt,s,null,d,xe),be.push({event:rt,listeners:Ke}),Je?rt.data=Je:(Je=ng(d),Je!==null&&(rt.data=Je)))),(Je=FS?zS(s,d):BS(s,d))&&(le=Ll(le,"onBeforeInput"),0<le.length&&(xe=new Jm("onBeforeInput","beforeinput",null,d,xe),be.push({event:xe,listeners:le}),xe.data=Je))}kg(be,a)})}function aa(s,a,d){return{instance:s,listener:a,currentTarget:d}}function Ll(s,a){for(var d=a+"Capture",g=[];s!==null;){var x=s,b=x.stateNode;x.tag===5&&b!==null&&(x=b,b=wt(s,d),b!=null&&g.unshift(aa(s,b,x)),b=wt(s,a),b!=null&&g.push(aa(s,b,x))),s=s.return}return g}function Ds(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Eg(s,a,d,g,x){for(var b=a._reactName,N=[];d!==null&&d!==g;){var B=d,q=B.alternate,le=B.stateNode;if(q!==null&&q===g)break;B.tag===5&&le!==null&&(B=le,x?(q=wt(d,b),q!=null&&N.unshift(aa(d,q,B))):x||(q=wt(d,b),q!=null&&N.push(aa(d,q,B)))),d=d.return}N.length!==0&&s.push({event:a,listeners:N})}var tE=/\r\n?/g,nE=/\u0000|\uFFFD/g;function _g(s){return(typeof s=="string"?s:""+s).replace(tE,`
`).replace(nE,"")}function $l(s,a,d){if(a=_g(a),_g(s)!==a&&d)throw Error(n(425))}function Fl(){}var Sd=null,Ed=null;function _d(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Cd=typeof setTimeout=="function"?setTimeout:void 0,rE=typeof clearTimeout=="function"?clearTimeout:void 0,Cg=typeof Promise=="function"?Promise:void 0,iE=typeof queueMicrotask=="function"?queueMicrotask:typeof Cg<"u"?function(s){return Cg.resolve(null).then(s).catch(sE)}:Cd;function sE(s){setTimeout(function(){throw s})}function jd(s,a){var d=a,g=0;do{var x=d.nextSibling;if(s.removeChild(d),x&&x.nodeType===8)if(d=x.data,d==="/$"){if(g===0){s.removeChild(x),Qo(a);return}g--}else d!=="$"&&d!=="$?"&&d!=="$!"||g++;d=x}while(d);Qo(a)}function fi(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return s}function jg(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var d=s.data;if(d==="$"||d==="$!"||d==="$?"){if(a===0)return s;a--}else d==="/$"&&a++}s=s.previousSibling}return null}var Ls=Math.random().toString(36).slice(2),Nr="__reactFiber$"+Ls,la="__reactProps$"+Ls,Vr="__reactContainer$"+Ls,Nd="__reactEvents$"+Ls,oE="__reactListeners$"+Ls,aE="__reactHandles$"+Ls;function qi(s){var a=s[Nr];if(a)return a;for(var d=s.parentNode;d;){if(a=d[Vr]||d[Nr]){if(d=a.alternate,a.child!==null||d!==null&&d.child!==null)for(s=jg(s);s!==null;){if(d=s[Nr])return d;s=jg(s)}return a}s=d,d=s.parentNode}return null}function ua(s){return s=s[Nr]||s[Vr],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function $s(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(n(33))}function zl(s){return s[la]||null}var Td=[],Fs=-1;function hi(s){return{current:s}}function Tt(s){0>Fs||(s.current=Td[Fs],Td[Fs]=null,Fs--)}function _t(s,a){Fs++,Td[Fs]=s.current,s.current=a}var pi={},fn=hi(pi),Nn=hi(!1),Yi=pi;function zs(s,a){var d=s.type.contextTypes;if(!d)return pi;var g=s.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===a)return g.__reactInternalMemoizedMaskedChildContext;var x={},b;for(b in d)x[b]=a[b];return g&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=a,s.__reactInternalMemoizedMaskedChildContext=x),x}function Tn(s){return s=s.childContextTypes,s!=null}function Bl(){Tt(Nn),Tt(fn)}function Ng(s,a,d){if(fn.current!==pi)throw Error(n(168));_t(fn,a),_t(Nn,d)}function Tg(s,a,d){var g=s.stateNode;if(a=a.childContextTypes,typeof g.getChildContext!="function")return d;g=g.getChildContext();for(var x in g)if(!(x in a))throw Error(n(108,de(s)||"Unknown",x));return T({},d,g)}function Ul(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||pi,Yi=fn.current,_t(fn,s),_t(Nn,Nn.current),!0}function Ig(s,a,d){var g=s.stateNode;if(!g)throw Error(n(169));d?(s=Tg(s,a,Yi),g.__reactInternalMemoizedMergedChildContext=s,Tt(Nn),Tt(fn),_t(fn,s)):Tt(Nn),_t(Nn,d)}var qr=null,Wl=!1,Id=!1;function Pg(s){qr===null?qr=[s]:qr.push(s)}function lE(s){Wl=!0,Pg(s)}function mi(){if(!Id&&qr!==null){Id=!0;var s=0,a=vt;try{var d=qr;for(vt=1;s<d.length;s++){var g=d[s];do g=g(!0);while(g!==null)}qr=null,Wl=!1}catch(x){throw qr!==null&&(qr=qr.slice(s+1)),Rm(Xc,mi),x}finally{vt=a,Id=!1}}return null}var Bs=[],Us=0,Hl=null,Vl=0,tr=[],nr=0,Gi=null,Yr=1,Gr="";function Ki(s,a){Bs[Us++]=Vl,Bs[Us++]=Hl,Hl=s,Vl=a}function Ag(s,a,d){tr[nr++]=Yr,tr[nr++]=Gr,tr[nr++]=Gi,Gi=s;var g=Yr;s=Gr;var x=32-fr(g)-1;g&=~(1<<x),d+=1;var b=32-fr(a)+x;if(30<b){var N=x-x%5;b=(g&(1<<N)-1).toString(32),g>>=N,x-=N,Yr=1<<32-fr(a)+x|d<<x|g,Gr=b+s}else Yr=1<<b|d<<x|g,Gr=s}function Pd(s){s.return!==null&&(Ki(s,1),Ag(s,1,0))}function Ad(s){for(;s===Hl;)Hl=Bs[--Us],Bs[Us]=null,Vl=Bs[--Us],Bs[Us]=null;for(;s===Gi;)Gi=tr[--nr],tr[nr]=null,Gr=tr[--nr],tr[nr]=null,Yr=tr[--nr],tr[nr]=null}var Wn=null,Hn=null,At=!1,pr=null;function Rg(s,a){var d=or(5,null,null,0);d.elementType="DELETED",d.stateNode=a,d.return=s,a=s.deletions,a===null?(s.deletions=[d],s.flags|=16):a.push(d)}function Og(s,a){switch(s.tag){case 5:var d=s.type;return a=a.nodeType!==1||d.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(s.stateNode=a,Wn=s,Hn=fi(a.firstChild),!0):!1;case 6:return a=s.pendingProps===""||a.nodeType!==3?null:a,a!==null?(s.stateNode=a,Wn=s,Hn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(d=Gi!==null?{id:Yr,overflow:Gr}:null,s.memoizedState={dehydrated:a,treeContext:d,retryLane:1073741824},d=or(18,null,null,0),d.stateNode=a,d.return=s,s.child=d,Wn=s,Hn=null,!0):!1;default:return!1}}function Rd(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Od(s){if(At){var a=Hn;if(a){var d=a;if(!Og(s,a)){if(Rd(s))throw Error(n(418));a=fi(d.nextSibling);var g=Wn;a&&Og(s,a)?Rg(g,d):(s.flags=s.flags&-4097|2,At=!1,Wn=s)}}else{if(Rd(s))throw Error(n(418));s.flags=s.flags&-4097|2,At=!1,Wn=s}}}function Mg(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Wn=s}function ql(s){if(s!==Wn)return!1;if(!At)return Mg(s),At=!0,!1;var a;if((a=s.tag!==3)&&!(a=s.tag!==5)&&(a=s.type,a=a!=="head"&&a!=="body"&&!_d(s.type,s.memoizedProps)),a&&(a=Hn)){if(Rd(s))throw Dg(),Error(n(418));for(;a;)Rg(s,a),a=fi(a.nextSibling)}if(Mg(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8){var d=s.data;if(d==="/$"){if(a===0){Hn=fi(s.nextSibling);break e}a--}else d!=="$"&&d!=="$!"&&d!=="$?"||a++}s=s.nextSibling}Hn=null}}else Hn=Wn?fi(s.stateNode.nextSibling):null;return!0}function Dg(){for(var s=Hn;s;)s=fi(s.nextSibling)}function Ws(){Hn=Wn=null,At=!1}function Md(s){pr===null?pr=[s]:pr.push(s)}var uE=I.ReactCurrentBatchConfig;function ca(s,a,d){if(s=d.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(n(309));var g=d.stateNode}if(!g)throw Error(n(147,s));var x=g,b=""+s;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===b?a.ref:(a=function(N){var B=x.refs;N===null?delete B[b]:B[b]=N},a._stringRef=b,a)}if(typeof s!="string")throw Error(n(284));if(!d._owner)throw Error(n(290,s))}return s}function Yl(s,a){throw s=Object.prototype.toString.call(a),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s))}function Lg(s){var a=s._init;return a(s._payload)}function $g(s){function a(ie,Q){if(s){var oe=ie.deletions;oe===null?(ie.deletions=[Q],ie.flags|=16):oe.push(Q)}}function d(ie,Q){if(!s)return null;for(;Q!==null;)a(ie,Q),Q=Q.sibling;return null}function g(ie,Q){for(ie=new Map;Q!==null;)Q.key!==null?ie.set(Q.key,Q):ie.set(Q.index,Q),Q=Q.sibling;return ie}function x(ie,Q){return ie=Si(ie,Q),ie.index=0,ie.sibling=null,ie}function b(ie,Q,oe){return ie.index=oe,s?(oe=ie.alternate,oe!==null?(oe=oe.index,oe<Q?(ie.flags|=2,Q):oe):(ie.flags|=2,Q)):(ie.flags|=1048576,Q)}function N(ie){return s&&ie.alternate===null&&(ie.flags|=2),ie}function B(ie,Q,oe,_e){return Q===null||Q.tag!==6?(Q=jf(oe,ie.mode,_e),Q.return=ie,Q):(Q=x(Q,oe),Q.return=ie,Q)}function q(ie,Q,oe,_e){var qe=oe.type;return qe===z?xe(ie,Q,oe.props.children,_e,oe.key):Q!==null&&(Q.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===Y&&Lg(qe)===Q.type)?(_e=x(Q,oe.props),_e.ref=ca(ie,Q,oe),_e.return=ie,_e):(_e=yu(oe.type,oe.key,oe.props,null,ie.mode,_e),_e.ref=ca(ie,Q,oe),_e.return=ie,_e)}function le(ie,Q,oe,_e){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==oe.containerInfo||Q.stateNode.implementation!==oe.implementation?(Q=Nf(oe,ie.mode,_e),Q.return=ie,Q):(Q=x(Q,oe.children||[]),Q.return=ie,Q)}function xe(ie,Q,oe,_e,qe){return Q===null||Q.tag!==7?(Q=rs(oe,ie.mode,_e,qe),Q.return=ie,Q):(Q=x(Q,oe),Q.return=ie,Q)}function be(ie,Q,oe){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Q=jf(""+Q,ie.mode,oe),Q.return=ie,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case M:return oe=yu(Q.type,Q.key,Q.props,null,ie.mode,oe),oe.ref=ca(ie,null,Q),oe.return=ie,oe;case P:return Q=Nf(Q,ie.mode,oe),Q.return=ie,Q;case Y:var _e=Q._init;return be(ie,_e(Q._payload),oe)}if(ce(Q)||ee(Q))return Q=rs(Q,ie.mode,oe,null),Q.return=ie,Q;Yl(ie,Q)}return null}function ye(ie,Q,oe,_e){var qe=Q!==null?Q.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number")return qe!==null?null:B(ie,Q,""+oe,_e);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case M:return oe.key===qe?q(ie,Q,oe,_e):null;case P:return oe.key===qe?le(ie,Q,oe,_e):null;case Y:return qe=oe._init,ye(ie,Q,qe(oe._payload),_e)}if(ce(oe)||ee(oe))return qe!==null?null:xe(ie,Q,oe,_e,null);Yl(ie,oe)}return null}function Le(ie,Q,oe,_e,qe){if(typeof _e=="string"&&_e!==""||typeof _e=="number")return ie=ie.get(oe)||null,B(Q,ie,""+_e,qe);if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case M:return ie=ie.get(_e.key===null?oe:_e.key)||null,q(Q,ie,_e,qe);case P:return ie=ie.get(_e.key===null?oe:_e.key)||null,le(Q,ie,_e,qe);case Y:var Ke=_e._init;return Le(ie,Q,oe,Ke(_e._payload),qe)}if(ce(_e)||ee(_e))return ie=ie.get(oe)||null,xe(Q,ie,_e,qe,null);Yl(Q,_e)}return null}function We(ie,Q,oe,_e){for(var qe=null,Ke=null,Je=Q,rt=Q=0,rn=null;Je!==null&&rt<oe.length;rt++){Je.index>rt?(rn=Je,Je=null):rn=Je.sibling;var gt=ye(ie,Je,oe[rt],_e);if(gt===null){Je===null&&(Je=rn);break}s&&Je&&gt.alternate===null&&a(ie,Je),Q=b(gt,Q,rt),Ke===null?qe=gt:Ke.sibling=gt,Ke=gt,Je=rn}if(rt===oe.length)return d(ie,Je),At&&Ki(ie,rt),qe;if(Je===null){for(;rt<oe.length;rt++)Je=be(ie,oe[rt],_e),Je!==null&&(Q=b(Je,Q,rt),Ke===null?qe=Je:Ke.sibling=Je,Ke=Je);return At&&Ki(ie,rt),qe}for(Je=g(ie,Je);rt<oe.length;rt++)rn=Le(Je,ie,rt,oe[rt],_e),rn!==null&&(s&&rn.alternate!==null&&Je.delete(rn.key===null?rt:rn.key),Q=b(rn,Q,rt),Ke===null?qe=rn:Ke.sibling=rn,Ke=rn);return s&&Je.forEach(function(Ei){return a(ie,Ei)}),At&&Ki(ie,rt),qe}function Ve(ie,Q,oe,_e){var qe=ee(oe);if(typeof qe!="function")throw Error(n(150));if(oe=qe.call(oe),oe==null)throw Error(n(151));for(var Ke=qe=null,Je=Q,rt=Q=0,rn=null,gt=oe.next();Je!==null&&!gt.done;rt++,gt=oe.next()){Je.index>rt?(rn=Je,Je=null):rn=Je.sibling;var Ei=ye(ie,Je,gt.value,_e);if(Ei===null){Je===null&&(Je=rn);break}s&&Je&&Ei.alternate===null&&a(ie,Je),Q=b(Ei,Q,rt),Ke===null?qe=Ei:Ke.sibling=Ei,Ke=Ei,Je=rn}if(gt.done)return d(ie,Je),At&&Ki(ie,rt),qe;if(Je===null){for(;!gt.done;rt++,gt=oe.next())gt=be(ie,gt.value,_e),gt!==null&&(Q=b(gt,Q,rt),Ke===null?qe=gt:Ke.sibling=gt,Ke=gt);return At&&Ki(ie,rt),qe}for(Je=g(ie,Je);!gt.done;rt++,gt=oe.next())gt=Le(Je,ie,rt,gt.value,_e),gt!==null&&(s&&gt.alternate!==null&&Je.delete(gt.key===null?rt:gt.key),Q=b(gt,Q,rt),Ke===null?qe=gt:Ke.sibling=gt,Ke=gt);return s&&Je.forEach(function(UE){return a(ie,UE)}),At&&Ki(ie,rt),qe}function zt(ie,Q,oe,_e){if(typeof oe=="object"&&oe!==null&&oe.type===z&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case M:e:{for(var qe=oe.key,Ke=Q;Ke!==null;){if(Ke.key===qe){if(qe=oe.type,qe===z){if(Ke.tag===7){d(ie,Ke.sibling),Q=x(Ke,oe.props.children),Q.return=ie,ie=Q;break e}}else if(Ke.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===Y&&Lg(qe)===Ke.type){d(ie,Ke.sibling),Q=x(Ke,oe.props),Q.ref=ca(ie,Ke,oe),Q.return=ie,ie=Q;break e}d(ie,Ke);break}else a(ie,Ke);Ke=Ke.sibling}oe.type===z?(Q=rs(oe.props.children,ie.mode,_e,oe.key),Q.return=ie,ie=Q):(_e=yu(oe.type,oe.key,oe.props,null,ie.mode,_e),_e.ref=ca(ie,Q,oe),_e.return=ie,ie=_e)}return N(ie);case P:e:{for(Ke=oe.key;Q!==null;){if(Q.key===Ke)if(Q.tag===4&&Q.stateNode.containerInfo===oe.containerInfo&&Q.stateNode.implementation===oe.implementation){d(ie,Q.sibling),Q=x(Q,oe.children||[]),Q.return=ie,ie=Q;break e}else{d(ie,Q);break}else a(ie,Q);Q=Q.sibling}Q=Nf(oe,ie.mode,_e),Q.return=ie,ie=Q}return N(ie);case Y:return Ke=oe._init,zt(ie,Q,Ke(oe._payload),_e)}if(ce(oe))return We(ie,Q,oe,_e);if(ee(oe))return Ve(ie,Q,oe,_e);Yl(ie,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"?(oe=""+oe,Q!==null&&Q.tag===6?(d(ie,Q.sibling),Q=x(Q,oe),Q.return=ie,ie=Q):(d(ie,Q),Q=jf(oe,ie.mode,_e),Q.return=ie,ie=Q),N(ie)):d(ie,Q)}return zt}var Hs=$g(!0),Fg=$g(!1),Gl=hi(null),Kl=null,Vs=null,Dd=null;function Ld(){Dd=Vs=Kl=null}function $d(s){var a=Gl.current;Tt(Gl),s._currentValue=a}function Fd(s,a,d){for(;s!==null;){var g=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,g!==null&&(g.childLanes|=a)):g!==null&&(g.childLanes&a)!==a&&(g.childLanes|=a),s===d)break;s=s.return}}function qs(s,a){Kl=s,Dd=Vs=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&a)!==0&&(In=!0),s.firstContext=null)}function rr(s){var a=s._currentValue;if(Dd!==s)if(s={context:s,memoizedValue:a,next:null},Vs===null){if(Kl===null)throw Error(n(308));Vs=s,Kl.dependencies={lanes:0,firstContext:s}}else Vs=Vs.next=s;return a}var Ji=null;function zd(s){Ji===null?Ji=[s]:Ji.push(s)}function zg(s,a,d,g){var x=a.interleaved;return x===null?(d.next=d,zd(a)):(d.next=x.next,x.next=d),a.interleaved=d,Kr(s,g)}function Kr(s,a){s.lanes|=a;var d=s.alternate;for(d!==null&&(d.lanes|=a),d=s,s=s.return;s!==null;)s.childLanes|=a,d=s.alternate,d!==null&&(d.childLanes|=a),d=s,s=s.return;return d.tag===3?d.stateNode:null}var gi=!1;function Bd(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bg(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Jr(s,a){return{eventTime:s,lane:a,tag:0,payload:null,callback:null,next:null}}function yi(s,a,d){var g=s.updateQueue;if(g===null)return null;if(g=g.shared,(mt&2)!==0){var x=g.pending;return x===null?a.next=a:(a.next=x.next,x.next=a),g.pending=a,Kr(s,d)}return x=g.interleaved,x===null?(a.next=a,zd(g)):(a.next=x.next,x.next=a),g.interleaved=a,Kr(s,d)}function Jl(s,a,d){if(a=a.updateQueue,a!==null&&(a=a.shared,(d&4194240)!==0)){var g=a.lanes;g&=s.pendingLanes,d|=g,a.lanes=d,td(s,d)}}function Ug(s,a){var d=s.updateQueue,g=s.alternate;if(g!==null&&(g=g.updateQueue,d===g)){var x=null,b=null;if(d=d.firstBaseUpdate,d!==null){do{var N={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};b===null?x=b=N:b=b.next=N,d=d.next}while(d!==null);b===null?x=b=a:b=b.next=a}else x=b=a;d={baseState:g.baseState,firstBaseUpdate:x,lastBaseUpdate:b,shared:g.shared,effects:g.effects},s.updateQueue=d;return}s=d.lastBaseUpdate,s===null?d.firstBaseUpdate=a:s.next=a,d.lastBaseUpdate=a}function Ql(s,a,d,g){var x=s.updateQueue;gi=!1;var b=x.firstBaseUpdate,N=x.lastBaseUpdate,B=x.shared.pending;if(B!==null){x.shared.pending=null;var q=B,le=q.next;q.next=null,N===null?b=le:N.next=le,N=q;var xe=s.alternate;xe!==null&&(xe=xe.updateQueue,B=xe.lastBaseUpdate,B!==N&&(B===null?xe.firstBaseUpdate=le:B.next=le,xe.lastBaseUpdate=q))}if(b!==null){var be=x.baseState;N=0,xe=le=q=null,B=b;do{var ye=B.lane,Le=B.eventTime;if((g&ye)===ye){xe!==null&&(xe=xe.next={eventTime:Le,lane:0,tag:B.tag,payload:B.payload,callback:B.callback,next:null});e:{var We=s,Ve=B;switch(ye=a,Le=d,Ve.tag){case 1:if(We=Ve.payload,typeof We=="function"){be=We.call(Le,be,ye);break e}be=We;break e;case 3:We.flags=We.flags&-65537|128;case 0:if(We=Ve.payload,ye=typeof We=="function"?We.call(Le,be,ye):We,ye==null)break e;be=T({},be,ye);break e;case 2:gi=!0}}B.callback!==null&&B.lane!==0&&(s.flags|=64,ye=x.effects,ye===null?x.effects=[B]:ye.push(B))}else Le={eventTime:Le,lane:ye,tag:B.tag,payload:B.payload,callback:B.callback,next:null},xe===null?(le=xe=Le,q=be):xe=xe.next=Le,N|=ye;if(B=B.next,B===null){if(B=x.shared.pending,B===null)break;ye=B,B=ye.next,ye.next=null,x.lastBaseUpdate=ye,x.shared.pending=null}}while(!0);if(xe===null&&(q=be),x.baseState=q,x.firstBaseUpdate=le,x.lastBaseUpdate=xe,a=x.shared.interleaved,a!==null){x=a;do N|=x.lane,x=x.next;while(x!==a)}else b===null&&(x.shared.lanes=0);Zi|=N,s.lanes=N,s.memoizedState=be}}function Wg(s,a,d){if(s=a.effects,a.effects=null,s!==null)for(a=0;a<s.length;a++){var g=s[a],x=g.callback;if(x!==null){if(g.callback=null,g=d,typeof x!="function")throw Error(n(191,x));x.call(g)}}}var da={},Tr=hi(da),fa=hi(da),ha=hi(da);function Qi(s){if(s===da)throw Error(n(174));return s}function Ud(s,a){switch(_t(ha,a),_t(fa,s),_t(Tr,da),s=a.nodeType,s){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:pe(null,"");break;default:s=s===8?a.parentNode:a,a=s.namespaceURI||null,s=s.tagName,a=pe(a,s)}Tt(Tr),_t(Tr,a)}function Ys(){Tt(Tr),Tt(fa),Tt(ha)}function Hg(s){Qi(ha.current);var a=Qi(Tr.current),d=pe(a,s.type);a!==d&&(_t(fa,s),_t(Tr,d))}function Wd(s){fa.current===s&&(Tt(Tr),Tt(fa))}var Ot=hi(0);function Xl(s){for(var a=s;a!==null;){if(a.tag===13){var d=a.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Hd=[];function Vd(){for(var s=0;s<Hd.length;s++)Hd[s]._workInProgressVersionPrimary=null;Hd.length=0}var Zl=I.ReactCurrentDispatcher,qd=I.ReactCurrentBatchConfig,Xi=0,Mt=null,Jt=null,tn=null,eu=!1,pa=!1,ma=0,cE=0;function hn(){throw Error(n(321))}function Yd(s,a){if(a===null)return!1;for(var d=0;d<a.length&&d<s.length;d++)if(!hr(s[d],a[d]))return!1;return!0}function Gd(s,a,d,g,x,b){if(Xi=b,Mt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Zl.current=s===null||s.memoizedState===null?pE:mE,s=d(g,x),pa){b=0;do{if(pa=!1,ma=0,25<=b)throw Error(n(301));b+=1,tn=Jt=null,a.updateQueue=null,Zl.current=gE,s=d(g,x)}while(pa)}if(Zl.current=ru,a=Jt!==null&&Jt.next!==null,Xi=0,tn=Jt=Mt=null,eu=!1,a)throw Error(n(300));return s}function Kd(){var s=ma!==0;return ma=0,s}function Ir(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?Mt.memoizedState=tn=s:tn=tn.next=s,tn}function ir(){if(Jt===null){var s=Mt.alternate;s=s!==null?s.memoizedState:null}else s=Jt.next;var a=tn===null?Mt.memoizedState:tn.next;if(a!==null)tn=a,Jt=s;else{if(s===null)throw Error(n(310));Jt=s,s={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},tn===null?Mt.memoizedState=tn=s:tn=tn.next=s}return tn}function ga(s,a){return typeof a=="function"?a(s):a}function Jd(s){var a=ir(),d=a.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=s;var g=Jt,x=g.baseQueue,b=d.pending;if(b!==null){if(x!==null){var N=x.next;x.next=b.next,b.next=N}g.baseQueue=x=b,d.pending=null}if(x!==null){b=x.next,g=g.baseState;var B=N=null,q=null,le=b;do{var xe=le.lane;if((Xi&xe)===xe)q!==null&&(q=q.next={lane:0,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),g=le.hasEagerState?le.eagerState:s(g,le.action);else{var be={lane:xe,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null};q===null?(B=q=be,N=g):q=q.next=be,Mt.lanes|=xe,Zi|=xe}le=le.next}while(le!==null&&le!==b);q===null?N=g:q.next=B,hr(g,a.memoizedState)||(In=!0),a.memoizedState=g,a.baseState=N,a.baseQueue=q,d.lastRenderedState=g}if(s=d.interleaved,s!==null){x=s;do b=x.lane,Mt.lanes|=b,Zi|=b,x=x.next;while(x!==s)}else x===null&&(d.lanes=0);return[a.memoizedState,d.dispatch]}function Qd(s){var a=ir(),d=a.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=s;var g=d.dispatch,x=d.pending,b=a.memoizedState;if(x!==null){d.pending=null;var N=x=x.next;do b=s(b,N.action),N=N.next;while(N!==x);hr(b,a.memoizedState)||(In=!0),a.memoizedState=b,a.baseQueue===null&&(a.baseState=b),d.lastRenderedState=b}return[b,g]}function Vg(){}function qg(s,a){var d=Mt,g=ir(),x=a(),b=!hr(g.memoizedState,x);if(b&&(g.memoizedState=x,In=!0),g=g.queue,Xd(Kg.bind(null,d,g,s),[s]),g.getSnapshot!==a||b||tn!==null&&tn.memoizedState.tag&1){if(d.flags|=2048,ya(9,Gg.bind(null,d,g,x,a),void 0,null),nn===null)throw Error(n(349));(Xi&30)!==0||Yg(d,a,x)}return x}function Yg(s,a,d){s.flags|=16384,s={getSnapshot:a,value:d},a=Mt.updateQueue,a===null?(a={lastEffect:null,stores:null},Mt.updateQueue=a,a.stores=[s]):(d=a.stores,d===null?a.stores=[s]:d.push(s))}function Gg(s,a,d,g){a.value=d,a.getSnapshot=g,Jg(a)&&Qg(s)}function Kg(s,a,d){return d(function(){Jg(a)&&Qg(s)})}function Jg(s){var a=s.getSnapshot;s=s.value;try{var d=a();return!hr(s,d)}catch{return!0}}function Qg(s){var a=Kr(s,1);a!==null&&vr(a,s,1,-1)}function Xg(s){var a=Ir();return typeof s=="function"&&(s=s()),a.memoizedState=a.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:s},a.queue=s,s=s.dispatch=hE.bind(null,Mt,s),[a.memoizedState,s]}function ya(s,a,d,g){return s={tag:s,create:a,destroy:d,deps:g,next:null},a=Mt.updateQueue,a===null?(a={lastEffect:null,stores:null},Mt.updateQueue=a,a.lastEffect=s.next=s):(d=a.lastEffect,d===null?a.lastEffect=s.next=s:(g=d.next,d.next=s,s.next=g,a.lastEffect=s)),s}function Zg(){return ir().memoizedState}function tu(s,a,d,g){var x=Ir();Mt.flags|=s,x.memoizedState=ya(1|a,d,void 0,g===void 0?null:g)}function nu(s,a,d,g){var x=ir();g=g===void 0?null:g;var b=void 0;if(Jt!==null){var N=Jt.memoizedState;if(b=N.destroy,g!==null&&Yd(g,N.deps)){x.memoizedState=ya(a,d,b,g);return}}Mt.flags|=s,x.memoizedState=ya(1|a,d,b,g)}function ey(s,a){return tu(8390656,8,s,a)}function Xd(s,a){return nu(2048,8,s,a)}function ty(s,a){return nu(4,2,s,a)}function ny(s,a){return nu(4,4,s,a)}function ry(s,a){if(typeof a=="function")return s=s(),a(s),function(){a(null)};if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function iy(s,a,d){return d=d!=null?d.concat([s]):null,nu(4,4,ry.bind(null,a,s),d)}function Zd(){}function sy(s,a){var d=ir();a=a===void 0?null:a;var g=d.memoizedState;return g!==null&&a!==null&&Yd(a,g[1])?g[0]:(d.memoizedState=[s,a],s)}function oy(s,a){var d=ir();a=a===void 0?null:a;var g=d.memoizedState;return g!==null&&a!==null&&Yd(a,g[1])?g[0]:(s=s(),d.memoizedState=[s,a],s)}function ay(s,a,d){return(Xi&21)===0?(s.baseState&&(s.baseState=!1,In=!0),s.memoizedState=d):(hr(d,a)||(d=Lm(),Mt.lanes|=d,Zi|=d,s.baseState=!0),a)}function dE(s,a){var d=vt;vt=d!==0&&4>d?d:4,s(!0);var g=qd.transition;qd.transition={};try{s(!1),a()}finally{vt=d,qd.transition=g}}function ly(){return ir().memoizedState}function fE(s,a,d){var g=bi(s);if(d={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null},uy(s))cy(a,d);else if(d=zg(s,a,d,g),d!==null){var x=kn();vr(d,s,g,x),dy(d,a,g)}}function hE(s,a,d){var g=bi(s),x={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null};if(uy(s))cy(a,x);else{var b=s.alternate;if(s.lanes===0&&(b===null||b.lanes===0)&&(b=a.lastRenderedReducer,b!==null))try{var N=a.lastRenderedState,B=b(N,d);if(x.hasEagerState=!0,x.eagerState=B,hr(B,N)){var q=a.interleaved;q===null?(x.next=x,zd(a)):(x.next=q.next,q.next=x),a.interleaved=x;return}}catch{}finally{}d=zg(s,a,x,g),d!==null&&(x=kn(),vr(d,s,g,x),dy(d,a,g))}}function uy(s){var a=s.alternate;return s===Mt||a!==null&&a===Mt}function cy(s,a){pa=eu=!0;var d=s.pending;d===null?a.next=a:(a.next=d.next,d.next=a),s.pending=a}function dy(s,a,d){if((d&4194240)!==0){var g=a.lanes;g&=s.pendingLanes,d|=g,a.lanes=d,td(s,d)}}var ru={readContext:rr,useCallback:hn,useContext:hn,useEffect:hn,useImperativeHandle:hn,useInsertionEffect:hn,useLayoutEffect:hn,useMemo:hn,useReducer:hn,useRef:hn,useState:hn,useDebugValue:hn,useDeferredValue:hn,useTransition:hn,useMutableSource:hn,useSyncExternalStore:hn,useId:hn,unstable_isNewReconciler:!1},pE={readContext:rr,useCallback:function(s,a){return Ir().memoizedState=[s,a===void 0?null:a],s},useContext:rr,useEffect:ey,useImperativeHandle:function(s,a,d){return d=d!=null?d.concat([s]):null,tu(4194308,4,ry.bind(null,a,s),d)},useLayoutEffect:function(s,a){return tu(4194308,4,s,a)},useInsertionEffect:function(s,a){return tu(4,2,s,a)},useMemo:function(s,a){var d=Ir();return a=a===void 0?null:a,s=s(),d.memoizedState=[s,a],s},useReducer:function(s,a,d){var g=Ir();return a=d!==void 0?d(a):a,g.memoizedState=g.baseState=a,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:a},g.queue=s,s=s.dispatch=fE.bind(null,Mt,s),[g.memoizedState,s]},useRef:function(s){var a=Ir();return s={current:s},a.memoizedState=s},useState:Xg,useDebugValue:Zd,useDeferredValue:function(s){return Ir().memoizedState=s},useTransition:function(){var s=Xg(!1),a=s[0];return s=dE.bind(null,s[1]),Ir().memoizedState=s,[a,s]},useMutableSource:function(){},useSyncExternalStore:function(s,a,d){var g=Mt,x=Ir();if(At){if(d===void 0)throw Error(n(407));d=d()}else{if(d=a(),nn===null)throw Error(n(349));(Xi&30)!==0||Yg(g,a,d)}x.memoizedState=d;var b={value:d,getSnapshot:a};return x.queue=b,ey(Kg.bind(null,g,b,s),[s]),g.flags|=2048,ya(9,Gg.bind(null,g,b,d,a),void 0,null),d},useId:function(){var s=Ir(),a=nn.identifierPrefix;if(At){var d=Gr,g=Yr;d=(g&~(1<<32-fr(g)-1)).toString(32)+d,a=":"+a+"R"+d,d=ma++,0<d&&(a+="H"+d.toString(32)),a+=":"}else d=cE++,a=":"+a+"r"+d.toString(32)+":";return s.memoizedState=a},unstable_isNewReconciler:!1},mE={readContext:rr,useCallback:sy,useContext:rr,useEffect:Xd,useImperativeHandle:iy,useInsertionEffect:ty,useLayoutEffect:ny,useMemo:oy,useReducer:Jd,useRef:Zg,useState:function(){return Jd(ga)},useDebugValue:Zd,useDeferredValue:function(s){var a=ir();return ay(a,Jt.memoizedState,s)},useTransition:function(){var s=Jd(ga)[0],a=ir().memoizedState;return[s,a]},useMutableSource:Vg,useSyncExternalStore:qg,useId:ly,unstable_isNewReconciler:!1},gE={readContext:rr,useCallback:sy,useContext:rr,useEffect:Xd,useImperativeHandle:iy,useInsertionEffect:ty,useLayoutEffect:ny,useMemo:oy,useReducer:Qd,useRef:Zg,useState:function(){return Qd(ga)},useDebugValue:Zd,useDeferredValue:function(s){var a=ir();return Jt===null?a.memoizedState=s:ay(a,Jt.memoizedState,s)},useTransition:function(){var s=Qd(ga)[0],a=ir().memoizedState;return[s,a]},useMutableSource:Vg,useSyncExternalStore:qg,useId:ly,unstable_isNewReconciler:!1};function mr(s,a){if(s&&s.defaultProps){a=T({},a),s=s.defaultProps;for(var d in s)a[d]===void 0&&(a[d]=s[d]);return a}return a}function ef(s,a,d,g){a=s.memoizedState,d=d(g,a),d=d==null?a:T({},a,d),s.memoizedState=d,s.lanes===0&&(s.updateQueue.baseState=d)}var iu={isMounted:function(s){return(s=s._reactInternals)?Vi(s)===s:!1},enqueueSetState:function(s,a,d){s=s._reactInternals;var g=kn(),x=bi(s),b=Jr(g,x);b.payload=a,d!=null&&(b.callback=d),a=yi(s,b,x),a!==null&&(vr(a,s,x,g),Jl(a,s,x))},enqueueReplaceState:function(s,a,d){s=s._reactInternals;var g=kn(),x=bi(s),b=Jr(g,x);b.tag=1,b.payload=a,d!=null&&(b.callback=d),a=yi(s,b,x),a!==null&&(vr(a,s,x,g),Jl(a,s,x))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var d=kn(),g=bi(s),x=Jr(d,g);x.tag=2,a!=null&&(x.callback=a),a=yi(s,x,g),a!==null&&(vr(a,s,g,d),Jl(a,s,g))}};function fy(s,a,d,g,x,b,N){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(g,b,N):a.prototype&&a.prototype.isPureReactComponent?!ra(d,g)||!ra(x,b):!0}function hy(s,a,d){var g=!1,x=pi,b=a.contextType;return typeof b=="object"&&b!==null?b=rr(b):(x=Tn(a)?Yi:fn.current,g=a.contextTypes,b=(g=g!=null)?zs(s,x):pi),a=new a(d,b),s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=iu,s.stateNode=a,a._reactInternals=s,g&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=x,s.__reactInternalMemoizedMaskedChildContext=b),a}function py(s,a,d,g){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(d,g),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(d,g),a.state!==s&&iu.enqueueReplaceState(a,a.state,null)}function tf(s,a,d,g){var x=s.stateNode;x.props=d,x.state=s.memoizedState,x.refs={},Bd(s);var b=a.contextType;typeof b=="object"&&b!==null?x.context=rr(b):(b=Tn(a)?Yi:fn.current,x.context=zs(s,b)),x.state=s.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(ef(s,a,b,d),x.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(a=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),a!==x.state&&iu.enqueueReplaceState(x,x.state,null),Ql(s,d,x,g),x.state=s.memoizedState),typeof x.componentDidMount=="function"&&(s.flags|=4194308)}function Gs(s,a){try{var d="",g=a;do d+=he(g),g=g.return;while(g);var x=d}catch(b){x=`
Error generating stack: `+b.message+`
`+b.stack}return{value:s,source:a,stack:x,digest:null}}function nf(s,a,d){return{value:s,source:null,stack:d??null,digest:a??null}}function rf(s,a){try{console.error(a.value)}catch(d){setTimeout(function(){throw d})}}var yE=typeof WeakMap=="function"?WeakMap:Map;function my(s,a,d){d=Jr(-1,d),d.tag=3,d.payload={element:null};var g=a.value;return d.callback=function(){du||(du=!0,xf=g),rf(s,a)},d}function gy(s,a,d){d=Jr(-1,d),d.tag=3;var g=s.type.getDerivedStateFromError;if(typeof g=="function"){var x=a.value;d.payload=function(){return g(x)},d.callback=function(){rf(s,a)}}var b=s.stateNode;return b!==null&&typeof b.componentDidCatch=="function"&&(d.callback=function(){rf(s,a),typeof g!="function"&&(xi===null?xi=new Set([this]):xi.add(this));var N=a.stack;this.componentDidCatch(a.value,{componentStack:N!==null?N:""})}),d}function yy(s,a,d){var g=s.pingCache;if(g===null){g=s.pingCache=new yE;var x=new Set;g.set(a,x)}else x=g.get(a),x===void 0&&(x=new Set,g.set(a,x));x.has(d)||(x.add(d),s=PE.bind(null,s,a,d),a.then(s,s))}function vy(s){do{var a;if((a=s.tag===13)&&(a=s.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return s;s=s.return}while(s!==null);return null}function xy(s,a,d,g,x){return(s.mode&1)===0?(s===a?s.flags|=65536:(s.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(a=Jr(-1,1),a.tag=2,yi(d,a,1))),d.lanes|=1),s):(s.flags|=65536,s.lanes=x,s)}var vE=I.ReactCurrentOwner,In=!1;function bn(s,a,d,g){a.child=s===null?Fg(a,null,d,g):Hs(a,s.child,d,g)}function wy(s,a,d,g,x){d=d.render;var b=a.ref;return qs(a,x),g=Gd(s,a,d,g,b,x),d=Kd(),s!==null&&!In?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~x,Qr(s,a,x)):(At&&d&&Pd(a),a.flags|=1,bn(s,a,g,x),a.child)}function by(s,a,d,g,x){if(s===null){var b=d.type;return typeof b=="function"&&!Cf(b)&&b.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(a.tag=15,a.type=b,ky(s,a,b,g,x)):(s=yu(d.type,null,g,a,a.mode,x),s.ref=a.ref,s.return=a,a.child=s)}if(b=s.child,(s.lanes&x)===0){var N=b.memoizedProps;if(d=d.compare,d=d!==null?d:ra,d(N,g)&&s.ref===a.ref)return Qr(s,a,x)}return a.flags|=1,s=Si(b,g),s.ref=a.ref,s.return=a,a.child=s}function ky(s,a,d,g,x){if(s!==null){var b=s.memoizedProps;if(ra(b,g)&&s.ref===a.ref)if(In=!1,a.pendingProps=g=b,(s.lanes&x)!==0)(s.flags&131072)!==0&&(In=!0);else return a.lanes=s.lanes,Qr(s,a,x)}return sf(s,a,d,g,x)}function Sy(s,a,d){var g=a.pendingProps,x=g.children,b=s!==null?s.memoizedState:null;if(g.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},_t(Js,Vn),Vn|=d;else{if((d&1073741824)===0)return s=b!==null?b.baseLanes|d:d,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:s,cachePool:null,transitions:null},a.updateQueue=null,_t(Js,Vn),Vn|=s,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=b!==null?b.baseLanes:d,_t(Js,Vn),Vn|=g}else b!==null?(g=b.baseLanes|d,a.memoizedState=null):g=d,_t(Js,Vn),Vn|=g;return bn(s,a,x,d),a.child}function Ey(s,a){var d=a.ref;(s===null&&d!==null||s!==null&&s.ref!==d)&&(a.flags|=512,a.flags|=2097152)}function sf(s,a,d,g,x){var b=Tn(d)?Yi:fn.current;return b=zs(a,b),qs(a,x),d=Gd(s,a,d,g,b,x),g=Kd(),s!==null&&!In?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~x,Qr(s,a,x)):(At&&g&&Pd(a),a.flags|=1,bn(s,a,d,x),a.child)}function _y(s,a,d,g,x){if(Tn(d)){var b=!0;Ul(a)}else b=!1;if(qs(a,x),a.stateNode===null)ou(s,a),hy(a,d,g),tf(a,d,g,x),g=!0;else if(s===null){var N=a.stateNode,B=a.memoizedProps;N.props=B;var q=N.context,le=d.contextType;typeof le=="object"&&le!==null?le=rr(le):(le=Tn(d)?Yi:fn.current,le=zs(a,le));var xe=d.getDerivedStateFromProps,be=typeof xe=="function"||typeof N.getSnapshotBeforeUpdate=="function";be||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(B!==g||q!==le)&&py(a,N,g,le),gi=!1;var ye=a.memoizedState;N.state=ye,Ql(a,g,N,x),q=a.memoizedState,B!==g||ye!==q||Nn.current||gi?(typeof xe=="function"&&(ef(a,d,xe,g),q=a.memoizedState),(B=gi||fy(a,d,B,g,ye,q,le))?(be||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(a.flags|=4194308)):(typeof N.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=g,a.memoizedState=q),N.props=g,N.state=q,N.context=le,g=B):(typeof N.componentDidMount=="function"&&(a.flags|=4194308),g=!1)}else{N=a.stateNode,Bg(s,a),B=a.memoizedProps,le=a.type===a.elementType?B:mr(a.type,B),N.props=le,be=a.pendingProps,ye=N.context,q=d.contextType,typeof q=="object"&&q!==null?q=rr(q):(q=Tn(d)?Yi:fn.current,q=zs(a,q));var Le=d.getDerivedStateFromProps;(xe=typeof Le=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(B!==be||ye!==q)&&py(a,N,g,q),gi=!1,ye=a.memoizedState,N.state=ye,Ql(a,g,N,x);var We=a.memoizedState;B!==be||ye!==We||Nn.current||gi?(typeof Le=="function"&&(ef(a,d,Le,g),We=a.memoizedState),(le=gi||fy(a,d,le,g,ye,We,q)||!1)?(xe||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(g,We,q),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(g,We,q)),typeof N.componentDidUpdate=="function"&&(a.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof N.componentDidUpdate!="function"||B===s.memoizedProps&&ye===s.memoizedState||(a.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||B===s.memoizedProps&&ye===s.memoizedState||(a.flags|=1024),a.memoizedProps=g,a.memoizedState=We),N.props=g,N.state=We,N.context=q,g=le):(typeof N.componentDidUpdate!="function"||B===s.memoizedProps&&ye===s.memoizedState||(a.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||B===s.memoizedProps&&ye===s.memoizedState||(a.flags|=1024),g=!1)}return of(s,a,d,g,b,x)}function of(s,a,d,g,x,b){Ey(s,a);var N=(a.flags&128)!==0;if(!g&&!N)return x&&Ig(a,d,!1),Qr(s,a,b);g=a.stateNode,vE.current=a;var B=N&&typeof d.getDerivedStateFromError!="function"?null:g.render();return a.flags|=1,s!==null&&N?(a.child=Hs(a,s.child,null,b),a.child=Hs(a,null,B,b)):bn(s,a,B,b),a.memoizedState=g.state,x&&Ig(a,d,!0),a.child}function Cy(s){var a=s.stateNode;a.pendingContext?Ng(s,a.pendingContext,a.pendingContext!==a.context):a.context&&Ng(s,a.context,!1),Ud(s,a.containerInfo)}function jy(s,a,d,g,x){return Ws(),Md(x),a.flags|=256,bn(s,a,d,g),a.child}var af={dehydrated:null,treeContext:null,retryLane:0};function lf(s){return{baseLanes:s,cachePool:null,transitions:null}}function Ny(s,a,d){var g=a.pendingProps,x=Ot.current,b=!1,N=(a.flags&128)!==0,B;if((B=N)||(B=s!==null&&s.memoizedState===null?!1:(x&2)!==0),B?(b=!0,a.flags&=-129):(s===null||s.memoizedState!==null)&&(x|=1),_t(Ot,x&1),s===null)return Od(a),s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((a.mode&1)===0?a.lanes=1:s.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(N=g.children,s=g.fallback,b?(g=a.mode,b=a.child,N={mode:"hidden",children:N},(g&1)===0&&b!==null?(b.childLanes=0,b.pendingProps=N):b=vu(N,g,0,null),s=rs(s,g,d,null),b.return=a,s.return=a,b.sibling=s,a.child=b,a.child.memoizedState=lf(d),a.memoizedState=af,s):uf(a,N));if(x=s.memoizedState,x!==null&&(B=x.dehydrated,B!==null))return xE(s,a,N,g,B,x,d);if(b){b=g.fallback,N=a.mode,x=s.child,B=x.sibling;var q={mode:"hidden",children:g.children};return(N&1)===0&&a.child!==x?(g=a.child,g.childLanes=0,g.pendingProps=q,a.deletions=null):(g=Si(x,q),g.subtreeFlags=x.subtreeFlags&14680064),B!==null?b=Si(B,b):(b=rs(b,N,d,null),b.flags|=2),b.return=a,g.return=a,g.sibling=b,a.child=g,g=b,b=a.child,N=s.child.memoizedState,N=N===null?lf(d):{baseLanes:N.baseLanes|d,cachePool:null,transitions:N.transitions},b.memoizedState=N,b.childLanes=s.childLanes&~d,a.memoizedState=af,g}return b=s.child,s=b.sibling,g=Si(b,{mode:"visible",children:g.children}),(a.mode&1)===0&&(g.lanes=d),g.return=a,g.sibling=null,s!==null&&(d=a.deletions,d===null?(a.deletions=[s],a.flags|=16):d.push(s)),a.child=g,a.memoizedState=null,g}function uf(s,a){return a=vu({mode:"visible",children:a},s.mode,0,null),a.return=s,s.child=a}function su(s,a,d,g){return g!==null&&Md(g),Hs(a,s.child,null,d),s=uf(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function xE(s,a,d,g,x,b,N){if(d)return a.flags&256?(a.flags&=-257,g=nf(Error(n(422))),su(s,a,N,g)):a.memoizedState!==null?(a.child=s.child,a.flags|=128,null):(b=g.fallback,x=a.mode,g=vu({mode:"visible",children:g.children},x,0,null),b=rs(b,x,N,null),b.flags|=2,g.return=a,b.return=a,g.sibling=b,a.child=g,(a.mode&1)!==0&&Hs(a,s.child,null,N),a.child.memoizedState=lf(N),a.memoizedState=af,b);if((a.mode&1)===0)return su(s,a,N,null);if(x.data==="$!"){if(g=x.nextSibling&&x.nextSibling.dataset,g)var B=g.dgst;return g=B,b=Error(n(419)),g=nf(b,g,void 0),su(s,a,N,g)}if(B=(N&s.childLanes)!==0,In||B){if(g=nn,g!==null){switch(N&-N){case 4:x=2;break;case 16:x=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:x=32;break;case 536870912:x=268435456;break;default:x=0}x=(x&(g.suspendedLanes|N))!==0?0:x,x!==0&&x!==b.retryLane&&(b.retryLane=x,Kr(s,x),vr(g,s,x,-1))}return _f(),g=nf(Error(n(421))),su(s,a,N,g)}return x.data==="$?"?(a.flags|=128,a.child=s.child,a=AE.bind(null,s),x._reactRetry=a,null):(s=b.treeContext,Hn=fi(x.nextSibling),Wn=a,At=!0,pr=null,s!==null&&(tr[nr++]=Yr,tr[nr++]=Gr,tr[nr++]=Gi,Yr=s.id,Gr=s.overflow,Gi=a),a=uf(a,g.children),a.flags|=4096,a)}function Ty(s,a,d){s.lanes|=a;var g=s.alternate;g!==null&&(g.lanes|=a),Fd(s.return,a,d)}function cf(s,a,d,g,x){var b=s.memoizedState;b===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:g,tail:d,tailMode:x}:(b.isBackwards=a,b.rendering=null,b.renderingStartTime=0,b.last=g,b.tail=d,b.tailMode=x)}function Iy(s,a,d){var g=a.pendingProps,x=g.revealOrder,b=g.tail;if(bn(s,a,g.children,d),g=Ot.current,(g&2)!==0)g=g&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Ty(s,d,a);else if(s.tag===19)Ty(s,d,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}g&=1}if(_t(Ot,g),(a.mode&1)===0)a.memoizedState=null;else switch(x){case"forwards":for(d=a.child,x=null;d!==null;)s=d.alternate,s!==null&&Xl(s)===null&&(x=d),d=d.sibling;d=x,d===null?(x=a.child,a.child=null):(x=d.sibling,d.sibling=null),cf(a,!1,x,d,b);break;case"backwards":for(d=null,x=a.child,a.child=null;x!==null;){if(s=x.alternate,s!==null&&Xl(s)===null){a.child=x;break}s=x.sibling,x.sibling=d,d=x,x=s}cf(a,!0,d,null,b);break;case"together":cf(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function ou(s,a){(a.mode&1)===0&&s!==null&&(s.alternate=null,a.alternate=null,a.flags|=2)}function Qr(s,a,d){if(s!==null&&(a.dependencies=s.dependencies),Zi|=a.lanes,(d&a.childLanes)===0)return null;if(s!==null&&a.child!==s.child)throw Error(n(153));if(a.child!==null){for(s=a.child,d=Si(s,s.pendingProps),a.child=d,d.return=a;s.sibling!==null;)s=s.sibling,d=d.sibling=Si(s,s.pendingProps),d.return=a;d.sibling=null}return a.child}function wE(s,a,d){switch(a.tag){case 3:Cy(a),Ws();break;case 5:Hg(a);break;case 1:Tn(a.type)&&Ul(a);break;case 4:Ud(a,a.stateNode.containerInfo);break;case 10:var g=a.type._context,x=a.memoizedProps.value;_t(Gl,g._currentValue),g._currentValue=x;break;case 13:if(g=a.memoizedState,g!==null)return g.dehydrated!==null?(_t(Ot,Ot.current&1),a.flags|=128,null):(d&a.child.childLanes)!==0?Ny(s,a,d):(_t(Ot,Ot.current&1),s=Qr(s,a,d),s!==null?s.sibling:null);_t(Ot,Ot.current&1);break;case 19:if(g=(d&a.childLanes)!==0,(s.flags&128)!==0){if(g)return Iy(s,a,d);a.flags|=128}if(x=a.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),_t(Ot,Ot.current),g)break;return null;case 22:case 23:return a.lanes=0,Sy(s,a,d)}return Qr(s,a,d)}var Py,df,Ay,Ry;Py=function(s,a){for(var d=a.child;d!==null;){if(d.tag===5||d.tag===6)s.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},df=function(){},Ay=function(s,a,d,g){var x=s.memoizedProps;if(x!==g){s=a.stateNode,Qi(Tr.current);var b=null;switch(d){case"input":x=Ye(s,x),g=Ye(s,g),b=[];break;case"select":x=T({},x,{value:void 0}),g=T({},g,{value:void 0}),b=[];break;case"textarea":x=Pe(s,x),g=Pe(s,g),b=[];break;default:typeof x.onClick!="function"&&typeof g.onClick=="function"&&(s.onclick=Fl)}fe(d,g);var N;d=null;for(le in x)if(!g.hasOwnProperty(le)&&x.hasOwnProperty(le)&&x[le]!=null)if(le==="style"){var B=x[le];for(N in B)B.hasOwnProperty(N)&&(d||(d={}),d[N]="")}else le!=="dangerouslySetInnerHTML"&&le!=="children"&&le!=="suppressContentEditableWarning"&&le!=="suppressHydrationWarning"&&le!=="autoFocus"&&(i.hasOwnProperty(le)?b||(b=[]):(b=b||[]).push(le,null));for(le in g){var q=g[le];if(B=x!=null?x[le]:void 0,g.hasOwnProperty(le)&&q!==B&&(q!=null||B!=null))if(le==="style")if(B){for(N in B)!B.hasOwnProperty(N)||q&&q.hasOwnProperty(N)||(d||(d={}),d[N]="");for(N in q)q.hasOwnProperty(N)&&B[N]!==q[N]&&(d||(d={}),d[N]=q[N])}else d||(b||(b=[]),b.push(le,d)),d=q;else le==="dangerouslySetInnerHTML"?(q=q?q.__html:void 0,B=B?B.__html:void 0,q!=null&&B!==q&&(b=b||[]).push(le,q)):le==="children"?typeof q!="string"&&typeof q!="number"||(b=b||[]).push(le,""+q):le!=="suppressContentEditableWarning"&&le!=="suppressHydrationWarning"&&(i.hasOwnProperty(le)?(q!=null&&le==="onScroll"&&Nt("scroll",s),b||B===q||(b=[])):(b=b||[]).push(le,q))}d&&(b=b||[]).push("style",d);var le=b;(a.updateQueue=le)&&(a.flags|=4)}},Ry=function(s,a,d,g){d!==g&&(a.flags|=4)};function va(s,a){if(!At)switch(s.tailMode){case"hidden":a=s.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?s.tail=null:d.sibling=null;break;case"collapsed":d=s.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:g.sibling=null}}function pn(s){var a=s.alternate!==null&&s.alternate.child===s.child,d=0,g=0;if(a)for(var x=s.child;x!==null;)d|=x.lanes|x.childLanes,g|=x.subtreeFlags&14680064,g|=x.flags&14680064,x.return=s,x=x.sibling;else for(x=s.child;x!==null;)d|=x.lanes|x.childLanes,g|=x.subtreeFlags,g|=x.flags,x.return=s,x=x.sibling;return s.subtreeFlags|=g,s.childLanes=d,a}function bE(s,a,d){var g=a.pendingProps;switch(Ad(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pn(a),null;case 1:return Tn(a.type)&&Bl(),pn(a),null;case 3:return g=a.stateNode,Ys(),Tt(Nn),Tt(fn),Vd(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(s===null||s.child===null)&&(ql(a)?a.flags|=4:s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,pr!==null&&(kf(pr),pr=null))),df(s,a),pn(a),null;case 5:Wd(a);var x=Qi(ha.current);if(d=a.type,s!==null&&a.stateNode!=null)Ay(s,a,d,g,x),s.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!g){if(a.stateNode===null)throw Error(n(166));return pn(a),null}if(s=Qi(Tr.current),ql(a)){g=a.stateNode,d=a.type;var b=a.memoizedProps;switch(g[Nr]=a,g[la]=b,s=(a.mode&1)!==0,d){case"dialog":Nt("cancel",g),Nt("close",g);break;case"iframe":case"object":case"embed":Nt("load",g);break;case"video":case"audio":for(x=0;x<sa.length;x++)Nt(sa[x],g);break;case"source":Nt("error",g);break;case"img":case"image":case"link":Nt("error",g),Nt("load",g);break;case"details":Nt("toggle",g);break;case"input":Ze(g,b),Nt("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!b.multiple},Nt("invalid",g);break;case"textarea":ke(g,b),Nt("invalid",g)}fe(d,b),x=null;for(var N in b)if(b.hasOwnProperty(N)){var B=b[N];N==="children"?typeof B=="string"?g.textContent!==B&&(b.suppressHydrationWarning!==!0&&$l(g.textContent,B,s),x=["children",B]):typeof B=="number"&&g.textContent!==""+B&&(b.suppressHydrationWarning!==!0&&$l(g.textContent,B,s),x=["children",""+B]):i.hasOwnProperty(N)&&B!=null&&N==="onScroll"&&Nt("scroll",g)}switch(d){case"input":X(g),en(g,b,!0);break;case"textarea":X(g),Te(g);break;case"select":case"option":break;default:typeof b.onClick=="function"&&(g.onclick=Fl)}g=x,a.updateQueue=g,g!==null&&(a.flags|=4)}else{N=x.nodeType===9?x:x.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=ae(d)),s==="http://www.w3.org/1999/xhtml"?d==="script"?(s=N.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof g.is=="string"?s=N.createElement(d,{is:g.is}):(s=N.createElement(d),d==="select"&&(N=s,g.multiple?N.multiple=!0:g.size&&(N.size=g.size))):s=N.createElementNS(s,d),s[Nr]=a,s[la]=g,Py(s,a,!1,!1),a.stateNode=s;e:{switch(N=Se(d,g),d){case"dialog":Nt("cancel",s),Nt("close",s),x=g;break;case"iframe":case"object":case"embed":Nt("load",s),x=g;break;case"video":case"audio":for(x=0;x<sa.length;x++)Nt(sa[x],s);x=g;break;case"source":Nt("error",s),x=g;break;case"img":case"image":case"link":Nt("error",s),Nt("load",s),x=g;break;case"details":Nt("toggle",s),x=g;break;case"input":Ze(s,g),x=Ye(s,g),Nt("invalid",s);break;case"option":x=g;break;case"select":s._wrapperState={wasMultiple:!!g.multiple},x=T({},g,{value:void 0}),Nt("invalid",s);break;case"textarea":ke(s,g),x=Pe(s,g),Nt("invalid",s);break;default:x=g}fe(d,x),B=x;for(b in B)if(B.hasOwnProperty(b)){var q=B[b];b==="style"?K(s,q):b==="dangerouslySetInnerHTML"?(q=q?q.__html:void 0,q!=null&&He(s,q)):b==="children"?typeof q=="string"?(d!=="textarea"||q!=="")&&ve(s,q):typeof q=="number"&&ve(s,""+q):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(i.hasOwnProperty(b)?q!=null&&b==="onScroll"&&Nt("scroll",s):q!=null&&j(s,b,q,N))}switch(d){case"input":X(s),en(s,g,!1);break;case"textarea":X(s),Te(s);break;case"option":g.value!=null&&s.setAttribute("value",""+Ne(g.value));break;case"select":s.multiple=!!g.multiple,b=g.value,b!=null?ge(s,!!g.multiple,b,!1):g.defaultValue!=null&&ge(s,!!g.multiple,g.defaultValue,!0);break;default:typeof x.onClick=="function"&&(s.onclick=Fl)}switch(d){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return pn(a),null;case 6:if(s&&a.stateNode!=null)Ry(s,a,s.memoizedProps,g);else{if(typeof g!="string"&&a.stateNode===null)throw Error(n(166));if(d=Qi(ha.current),Qi(Tr.current),ql(a)){if(g=a.stateNode,d=a.memoizedProps,g[Nr]=a,(b=g.nodeValue!==d)&&(s=Wn,s!==null))switch(s.tag){case 3:$l(g.nodeValue,d,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&$l(g.nodeValue,d,(s.mode&1)!==0)}b&&(a.flags|=4)}else g=(d.nodeType===9?d:d.ownerDocument).createTextNode(g),g[Nr]=a,a.stateNode=g}return pn(a),null;case 13:if(Tt(Ot),g=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(At&&Hn!==null&&(a.mode&1)!==0&&(a.flags&128)===0)Dg(),Ws(),a.flags|=98560,b=!1;else if(b=ql(a),g!==null&&g.dehydrated!==null){if(s===null){if(!b)throw Error(n(318));if(b=a.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(n(317));b[Nr]=a}else Ws(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;pn(a),b=!1}else pr!==null&&(kf(pr),pr=null),b=!0;if(!b)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=d,a):(g=g!==null,g!==(s!==null&&s.memoizedState!==null)&&g&&(a.child.flags|=8192,(a.mode&1)!==0&&(s===null||(Ot.current&1)!==0?Qt===0&&(Qt=3):_f())),a.updateQueue!==null&&(a.flags|=4),pn(a),null);case 4:return Ys(),df(s,a),s===null&&oa(a.stateNode.containerInfo),pn(a),null;case 10:return $d(a.type._context),pn(a),null;case 17:return Tn(a.type)&&Bl(),pn(a),null;case 19:if(Tt(Ot),b=a.memoizedState,b===null)return pn(a),null;if(g=(a.flags&128)!==0,N=b.rendering,N===null)if(g)va(b,!1);else{if(Qt!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(N=Xl(s),N!==null){for(a.flags|=128,va(b,!1),g=N.updateQueue,g!==null&&(a.updateQueue=g,a.flags|=4),a.subtreeFlags=0,g=d,d=a.child;d!==null;)b=d,s=g,b.flags&=14680066,N=b.alternate,N===null?(b.childLanes=0,b.lanes=s,b.child=null,b.subtreeFlags=0,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=N.childLanes,b.lanes=N.lanes,b.child=N.child,b.subtreeFlags=0,b.deletions=null,b.memoizedProps=N.memoizedProps,b.memoizedState=N.memoizedState,b.updateQueue=N.updateQueue,b.type=N.type,s=N.dependencies,b.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),d=d.sibling;return _t(Ot,Ot.current&1|2),a.child}s=s.sibling}b.tail!==null&&Ft()>Qs&&(a.flags|=128,g=!0,va(b,!1),a.lanes=4194304)}else{if(!g)if(s=Xl(N),s!==null){if(a.flags|=128,g=!0,d=s.updateQueue,d!==null&&(a.updateQueue=d,a.flags|=4),va(b,!0),b.tail===null&&b.tailMode==="hidden"&&!N.alternate&&!At)return pn(a),null}else 2*Ft()-b.renderingStartTime>Qs&&d!==1073741824&&(a.flags|=128,g=!0,va(b,!1),a.lanes=4194304);b.isBackwards?(N.sibling=a.child,a.child=N):(d=b.last,d!==null?d.sibling=N:a.child=N,b.last=N)}return b.tail!==null?(a=b.tail,b.rendering=a,b.tail=a.sibling,b.renderingStartTime=Ft(),a.sibling=null,d=Ot.current,_t(Ot,g?d&1|2:d&1),a):(pn(a),null);case 22:case 23:return Ef(),g=a.memoizedState!==null,s!==null&&s.memoizedState!==null!==g&&(a.flags|=8192),g&&(a.mode&1)!==0?(Vn&1073741824)!==0&&(pn(a),a.subtreeFlags&6&&(a.flags|=8192)):pn(a),null;case 24:return null;case 25:return null}throw Error(n(156,a.tag))}function kE(s,a){switch(Ad(a),a.tag){case 1:return Tn(a.type)&&Bl(),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return Ys(),Tt(Nn),Tt(fn),Vd(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 5:return Wd(a),null;case 13:if(Tt(Ot),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(n(340));Ws()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return Tt(Ot),null;case 4:return Ys(),null;case 10:return $d(a.type._context),null;case 22:case 23:return Ef(),null;case 24:return null;default:return null}}var au=!1,mn=!1,SE=typeof WeakSet=="function"?WeakSet:Set,Fe=null;function Ks(s,a){var d=s.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(g){Lt(s,a,g)}else d.current=null}function ff(s,a,d){try{d()}catch(g){Lt(s,a,g)}}var Oy=!1;function EE(s,a){if(Sd=jl,s=fg(),md(s)){if("selectionStart"in s)var d={start:s.selectionStart,end:s.selectionEnd};else e:{d=(d=s.ownerDocument)&&d.defaultView||window;var g=d.getSelection&&d.getSelection();if(g&&g.rangeCount!==0){d=g.anchorNode;var x=g.anchorOffset,b=g.focusNode;g=g.focusOffset;try{d.nodeType,b.nodeType}catch{d=null;break e}var N=0,B=-1,q=-1,le=0,xe=0,be=s,ye=null;t:for(;;){for(var Le;be!==d||x!==0&&be.nodeType!==3||(B=N+x),be!==b||g!==0&&be.nodeType!==3||(q=N+g),be.nodeType===3&&(N+=be.nodeValue.length),(Le=be.firstChild)!==null;)ye=be,be=Le;for(;;){if(be===s)break t;if(ye===d&&++le===x&&(B=N),ye===b&&++xe===g&&(q=N),(Le=be.nextSibling)!==null)break;be=ye,ye=be.parentNode}be=Le}d=B===-1||q===-1?null:{start:B,end:q}}else d=null}d=d||{start:0,end:0}}else d=null;for(Ed={focusedElem:s,selectionRange:d},jl=!1,Fe=a;Fe!==null;)if(a=Fe,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,Fe=s;else for(;Fe!==null;){a=Fe;try{var We=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(We!==null){var Ve=We.memoizedProps,zt=We.memoizedState,ie=a.stateNode,Q=ie.getSnapshotBeforeUpdate(a.elementType===a.type?Ve:mr(a.type,Ve),zt);ie.__reactInternalSnapshotBeforeUpdate=Q}break;case 3:var oe=a.stateNode.containerInfo;oe.nodeType===1?oe.textContent="":oe.nodeType===9&&oe.documentElement&&oe.removeChild(oe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(_e){Lt(a,a.return,_e)}if(s=a.sibling,s!==null){s.return=a.return,Fe=s;break}Fe=a.return}return We=Oy,Oy=!1,We}function xa(s,a,d){var g=a.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var x=g=g.next;do{if((x.tag&s)===s){var b=x.destroy;x.destroy=void 0,b!==void 0&&ff(a,d,b)}x=x.next}while(x!==g)}}function lu(s,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var d=a=a.next;do{if((d.tag&s)===s){var g=d.create;d.destroy=g()}d=d.next}while(d!==a)}}function hf(s){var a=s.ref;if(a!==null){var d=s.stateNode;switch(s.tag){case 5:s=d;break;default:s=d}typeof a=="function"?a(s):a.current=s}}function My(s){var a=s.alternate;a!==null&&(s.alternate=null,My(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&(delete a[Nr],delete a[la],delete a[Nd],delete a[oE],delete a[aE])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function Dy(s){return s.tag===5||s.tag===3||s.tag===4}function Ly(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Dy(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function pf(s,a,d){var g=s.tag;if(g===5||g===6)s=s.stateNode,a?d.nodeType===8?d.parentNode.insertBefore(s,a):d.insertBefore(s,a):(d.nodeType===8?(a=d.parentNode,a.insertBefore(s,d)):(a=d,a.appendChild(s)),d=d._reactRootContainer,d!=null||a.onclick!==null||(a.onclick=Fl));else if(g!==4&&(s=s.child,s!==null))for(pf(s,a,d),s=s.sibling;s!==null;)pf(s,a,d),s=s.sibling}function mf(s,a,d){var g=s.tag;if(g===5||g===6)s=s.stateNode,a?d.insertBefore(s,a):d.appendChild(s);else if(g!==4&&(s=s.child,s!==null))for(mf(s,a,d),s=s.sibling;s!==null;)mf(s,a,d),s=s.sibling}var un=null,gr=!1;function vi(s,a,d){for(d=d.child;d!==null;)$y(s,a,d),d=d.sibling}function $y(s,a,d){if(jr&&typeof jr.onCommitFiberUnmount=="function")try{jr.onCommitFiberUnmount(bl,d)}catch{}switch(d.tag){case 5:mn||Ks(d,a);case 6:var g=un,x=gr;un=null,vi(s,a,d),un=g,gr=x,un!==null&&(gr?(s=un,d=d.stateNode,s.nodeType===8?s.parentNode.removeChild(d):s.removeChild(d)):un.removeChild(d.stateNode));break;case 18:un!==null&&(gr?(s=un,d=d.stateNode,s.nodeType===8?jd(s.parentNode,d):s.nodeType===1&&jd(s,d),Qo(s)):jd(un,d.stateNode));break;case 4:g=un,x=gr,un=d.stateNode.containerInfo,gr=!0,vi(s,a,d),un=g,gr=x;break;case 0:case 11:case 14:case 15:if(!mn&&(g=d.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){x=g=g.next;do{var b=x,N=b.destroy;b=b.tag,N!==void 0&&((b&2)!==0||(b&4)!==0)&&ff(d,a,N),x=x.next}while(x!==g)}vi(s,a,d);break;case 1:if(!mn&&(Ks(d,a),g=d.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=d.memoizedProps,g.state=d.memoizedState,g.componentWillUnmount()}catch(B){Lt(d,a,B)}vi(s,a,d);break;case 21:vi(s,a,d);break;case 22:d.mode&1?(mn=(g=mn)||d.memoizedState!==null,vi(s,a,d),mn=g):vi(s,a,d);break;default:vi(s,a,d)}}function Fy(s){var a=s.updateQueue;if(a!==null){s.updateQueue=null;var d=s.stateNode;d===null&&(d=s.stateNode=new SE),a.forEach(function(g){var x=RE.bind(null,s,g);d.has(g)||(d.add(g),g.then(x,x))})}}function yr(s,a){var d=a.deletions;if(d!==null)for(var g=0;g<d.length;g++){var x=d[g];try{var b=s,N=a,B=N;e:for(;B!==null;){switch(B.tag){case 5:un=B.stateNode,gr=!1;break e;case 3:un=B.stateNode.containerInfo,gr=!0;break e;case 4:un=B.stateNode.containerInfo,gr=!0;break e}B=B.return}if(un===null)throw Error(n(160));$y(b,N,x),un=null,gr=!1;var q=x.alternate;q!==null&&(q.return=null),x.return=null}catch(le){Lt(x,a,le)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)zy(a,s),a=a.sibling}function zy(s,a){var d=s.alternate,g=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(yr(a,s),Pr(s),g&4){try{xa(3,s,s.return),lu(3,s)}catch(Ve){Lt(s,s.return,Ve)}try{xa(5,s,s.return)}catch(Ve){Lt(s,s.return,Ve)}}break;case 1:yr(a,s),Pr(s),g&512&&d!==null&&Ks(d,d.return);break;case 5:if(yr(a,s),Pr(s),g&512&&d!==null&&Ks(d,d.return),s.flags&32){var x=s.stateNode;try{ve(x,"")}catch(Ve){Lt(s,s.return,Ve)}}if(g&4&&(x=s.stateNode,x!=null)){var b=s.memoizedProps,N=d!==null?d.memoizedProps:b,B=s.type,q=s.updateQueue;if(s.updateQueue=null,q!==null)try{B==="input"&&b.type==="radio"&&b.name!=null&&ft(x,b),Se(B,N);var le=Se(B,b);for(N=0;N<q.length;N+=2){var xe=q[N],be=q[N+1];xe==="style"?K(x,be):xe==="dangerouslySetInnerHTML"?He(x,be):xe==="children"?ve(x,be):j(x,xe,be,le)}switch(B){case"input":Pt(x,b);break;case"textarea":ue(x,b);break;case"select":var ye=x._wrapperState.wasMultiple;x._wrapperState.wasMultiple=!!b.multiple;var Le=b.value;Le!=null?ge(x,!!b.multiple,Le,!1):ye!==!!b.multiple&&(b.defaultValue!=null?ge(x,!!b.multiple,b.defaultValue,!0):ge(x,!!b.multiple,b.multiple?[]:"",!1))}x[la]=b}catch(Ve){Lt(s,s.return,Ve)}}break;case 6:if(yr(a,s),Pr(s),g&4){if(s.stateNode===null)throw Error(n(162));x=s.stateNode,b=s.memoizedProps;try{x.nodeValue=b}catch(Ve){Lt(s,s.return,Ve)}}break;case 3:if(yr(a,s),Pr(s),g&4&&d!==null&&d.memoizedState.isDehydrated)try{Qo(a.containerInfo)}catch(Ve){Lt(s,s.return,Ve)}break;case 4:yr(a,s),Pr(s);break;case 13:yr(a,s),Pr(s),x=s.child,x.flags&8192&&(b=x.memoizedState!==null,x.stateNode.isHidden=b,!b||x.alternate!==null&&x.alternate.memoizedState!==null||(vf=Ft())),g&4&&Fy(s);break;case 22:if(xe=d!==null&&d.memoizedState!==null,s.mode&1?(mn=(le=mn)||xe,yr(a,s),mn=le):yr(a,s),Pr(s),g&8192){if(le=s.memoizedState!==null,(s.stateNode.isHidden=le)&&!xe&&(s.mode&1)!==0)for(Fe=s,xe=s.child;xe!==null;){for(be=Fe=xe;Fe!==null;){switch(ye=Fe,Le=ye.child,ye.tag){case 0:case 11:case 14:case 15:xa(4,ye,ye.return);break;case 1:Ks(ye,ye.return);var We=ye.stateNode;if(typeof We.componentWillUnmount=="function"){g=ye,d=ye.return;try{a=g,We.props=a.memoizedProps,We.state=a.memoizedState,We.componentWillUnmount()}catch(Ve){Lt(g,d,Ve)}}break;case 5:Ks(ye,ye.return);break;case 22:if(ye.memoizedState!==null){Wy(be);continue}}Le!==null?(Le.return=ye,Fe=Le):Wy(be)}xe=xe.sibling}e:for(xe=null,be=s;;){if(be.tag===5){if(xe===null){xe=be;try{x=be.stateNode,le?(b=x.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none"):(B=be.stateNode,q=be.memoizedProps.style,N=q!=null&&q.hasOwnProperty("display")?q.display:null,B.style.display=V("display",N))}catch(Ve){Lt(s,s.return,Ve)}}}else if(be.tag===6){if(xe===null)try{be.stateNode.nodeValue=le?"":be.memoizedProps}catch(Ve){Lt(s,s.return,Ve)}}else if((be.tag!==22&&be.tag!==23||be.memoizedState===null||be===s)&&be.child!==null){be.child.return=be,be=be.child;continue}if(be===s)break e;for(;be.sibling===null;){if(be.return===null||be.return===s)break e;xe===be&&(xe=null),be=be.return}xe===be&&(xe=null),be.sibling.return=be.return,be=be.sibling}}break;case 19:yr(a,s),Pr(s),g&4&&Fy(s);break;case 21:break;default:yr(a,s),Pr(s)}}function Pr(s){var a=s.flags;if(a&2){try{e:{for(var d=s.return;d!==null;){if(Dy(d)){var g=d;break e}d=d.return}throw Error(n(160))}switch(g.tag){case 5:var x=g.stateNode;g.flags&32&&(ve(x,""),g.flags&=-33);var b=Ly(s);mf(s,b,x);break;case 3:case 4:var N=g.stateNode.containerInfo,B=Ly(s);pf(s,B,N);break;default:throw Error(n(161))}}catch(q){Lt(s,s.return,q)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function _E(s,a,d){Fe=s,By(s)}function By(s,a,d){for(var g=(s.mode&1)!==0;Fe!==null;){var x=Fe,b=x.child;if(x.tag===22&&g){var N=x.memoizedState!==null||au;if(!N){var B=x.alternate,q=B!==null&&B.memoizedState!==null||mn;B=au;var le=mn;if(au=N,(mn=q)&&!le)for(Fe=x;Fe!==null;)N=Fe,q=N.child,N.tag===22&&N.memoizedState!==null?Hy(x):q!==null?(q.return=N,Fe=q):Hy(x);for(;b!==null;)Fe=b,By(b),b=b.sibling;Fe=x,au=B,mn=le}Uy(s)}else(x.subtreeFlags&8772)!==0&&b!==null?(b.return=x,Fe=b):Uy(s)}}function Uy(s){for(;Fe!==null;){var a=Fe;if((a.flags&8772)!==0){var d=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:mn||lu(5,a);break;case 1:var g=a.stateNode;if(a.flags&4&&!mn)if(d===null)g.componentDidMount();else{var x=a.elementType===a.type?d.memoizedProps:mr(a.type,d.memoizedProps);g.componentDidUpdate(x,d.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var b=a.updateQueue;b!==null&&Wg(a,b,g);break;case 3:var N=a.updateQueue;if(N!==null){if(d=null,a.child!==null)switch(a.child.tag){case 5:d=a.child.stateNode;break;case 1:d=a.child.stateNode}Wg(a,N,d)}break;case 5:var B=a.stateNode;if(d===null&&a.flags&4){d=B;var q=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":q.autoFocus&&d.focus();break;case"img":q.src&&(d.src=q.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var le=a.alternate;if(le!==null){var xe=le.memoizedState;if(xe!==null){var be=xe.dehydrated;be!==null&&Qo(be)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}mn||a.flags&512&&hf(a)}catch(ye){Lt(a,a.return,ye)}}if(a===s){Fe=null;break}if(d=a.sibling,d!==null){d.return=a.return,Fe=d;break}Fe=a.return}}function Wy(s){for(;Fe!==null;){var a=Fe;if(a===s){Fe=null;break}var d=a.sibling;if(d!==null){d.return=a.return,Fe=d;break}Fe=a.return}}function Hy(s){for(;Fe!==null;){var a=Fe;try{switch(a.tag){case 0:case 11:case 15:var d=a.return;try{lu(4,a)}catch(q){Lt(a,d,q)}break;case 1:var g=a.stateNode;if(typeof g.componentDidMount=="function"){var x=a.return;try{g.componentDidMount()}catch(q){Lt(a,x,q)}}var b=a.return;try{hf(a)}catch(q){Lt(a,b,q)}break;case 5:var N=a.return;try{hf(a)}catch(q){Lt(a,N,q)}}}catch(q){Lt(a,a.return,q)}if(a===s){Fe=null;break}var B=a.sibling;if(B!==null){B.return=a.return,Fe=B;break}Fe=a.return}}var CE=Math.ceil,uu=I.ReactCurrentDispatcher,gf=I.ReactCurrentOwner,sr=I.ReactCurrentBatchConfig,mt=0,nn=null,Ut=null,cn=0,Vn=0,Js=hi(0),Qt=0,wa=null,Zi=0,cu=0,yf=0,ba=null,Pn=null,vf=0,Qs=1/0,Xr=null,du=!1,xf=null,xi=null,fu=!1,wi=null,hu=0,ka=0,wf=null,pu=-1,mu=0;function kn(){return(mt&6)!==0?Ft():pu!==-1?pu:pu=Ft()}function bi(s){return(s.mode&1)===0?1:(mt&2)!==0&&cn!==0?cn&-cn:uE.transition!==null?(mu===0&&(mu=Lm()),mu):(s=vt,s!==0||(s=window.event,s=s===void 0?16:qm(s.type)),s)}function vr(s,a,d,g){if(50<ka)throw ka=0,wf=null,Error(n(185));qo(s,d,g),((mt&2)===0||s!==nn)&&(s===nn&&((mt&2)===0&&(cu|=d),Qt===4&&ki(s,cn)),An(s,g),d===1&&mt===0&&(a.mode&1)===0&&(Qs=Ft()+500,Wl&&mi()))}function An(s,a){var d=s.callbackNode;uS(s,a);var g=El(s,s===nn?cn:0);if(g===0)d!==null&&Om(d),s.callbackNode=null,s.callbackPriority=0;else if(a=g&-g,s.callbackPriority!==a){if(d!=null&&Om(d),a===1)s.tag===0?lE(qy.bind(null,s)):Pg(qy.bind(null,s)),iE(function(){(mt&6)===0&&mi()}),d=null;else{switch($m(g)){case 1:d=Xc;break;case 4:d=Mm;break;case 16:d=wl;break;case 536870912:d=Dm;break;default:d=wl}d=ev(d,Vy.bind(null,s))}s.callbackPriority=a,s.callbackNode=d}}function Vy(s,a){if(pu=-1,mu=0,(mt&6)!==0)throw Error(n(327));var d=s.callbackNode;if(Xs()&&s.callbackNode!==d)return null;var g=El(s,s===nn?cn:0);if(g===0)return null;if((g&30)!==0||(g&s.expiredLanes)!==0||a)a=gu(s,g);else{a=g;var x=mt;mt|=2;var b=Gy();(nn!==s||cn!==a)&&(Xr=null,Qs=Ft()+500,ts(s,a));do try{TE();break}catch(B){Yy(s,B)}while(!0);Ld(),uu.current=b,mt=x,Ut!==null?a=0:(nn=null,cn=0,a=Qt)}if(a!==0){if(a===2&&(x=Zc(s),x!==0&&(g=x,a=bf(s,x))),a===1)throw d=wa,ts(s,0),ki(s,g),An(s,Ft()),d;if(a===6)ki(s,g);else{if(x=s.current.alternate,(g&30)===0&&!jE(x)&&(a=gu(s,g),a===2&&(b=Zc(s),b!==0&&(g=b,a=bf(s,b))),a===1))throw d=wa,ts(s,0),ki(s,g),An(s,Ft()),d;switch(s.finishedWork=x,s.finishedLanes=g,a){case 0:case 1:throw Error(n(345));case 2:ns(s,Pn,Xr);break;case 3:if(ki(s,g),(g&130023424)===g&&(a=vf+500-Ft(),10<a)){if(El(s,0)!==0)break;if(x=s.suspendedLanes,(x&g)!==g){kn(),s.pingedLanes|=s.suspendedLanes&x;break}s.timeoutHandle=Cd(ns.bind(null,s,Pn,Xr),a);break}ns(s,Pn,Xr);break;case 4:if(ki(s,g),(g&4194240)===g)break;for(a=s.eventTimes,x=-1;0<g;){var N=31-fr(g);b=1<<N,N=a[N],N>x&&(x=N),g&=~b}if(g=x,g=Ft()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*CE(g/1960))-g,10<g){s.timeoutHandle=Cd(ns.bind(null,s,Pn,Xr),g);break}ns(s,Pn,Xr);break;case 5:ns(s,Pn,Xr);break;default:throw Error(n(329))}}}return An(s,Ft()),s.callbackNode===d?Vy.bind(null,s):null}function bf(s,a){var d=ba;return s.current.memoizedState.isDehydrated&&(ts(s,a).flags|=256),s=gu(s,a),s!==2&&(a=Pn,Pn=d,a!==null&&kf(a)),s}function kf(s){Pn===null?Pn=s:Pn.push.apply(Pn,s)}function jE(s){for(var a=s;;){if(a.flags&16384){var d=a.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var g=0;g<d.length;g++){var x=d[g],b=x.getSnapshot;x=x.value;try{if(!hr(b(),x))return!1}catch{return!1}}}if(d=a.child,a.subtreeFlags&16384&&d!==null)d.return=a,a=d;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ki(s,a){for(a&=~yf,a&=~cu,s.suspendedLanes|=a,s.pingedLanes&=~a,s=s.expirationTimes;0<a;){var d=31-fr(a),g=1<<d;s[d]=-1,a&=~g}}function qy(s){if((mt&6)!==0)throw Error(n(327));Xs();var a=El(s,0);if((a&1)===0)return An(s,Ft()),null;var d=gu(s,a);if(s.tag!==0&&d===2){var g=Zc(s);g!==0&&(a=g,d=bf(s,g))}if(d===1)throw d=wa,ts(s,0),ki(s,a),An(s,Ft()),d;if(d===6)throw Error(n(345));return s.finishedWork=s.current.alternate,s.finishedLanes=a,ns(s,Pn,Xr),An(s,Ft()),null}function Sf(s,a){var d=mt;mt|=1;try{return s(a)}finally{mt=d,mt===0&&(Qs=Ft()+500,Wl&&mi())}}function es(s){wi!==null&&wi.tag===0&&(mt&6)===0&&Xs();var a=mt;mt|=1;var d=sr.transition,g=vt;try{if(sr.transition=null,vt=1,s)return s()}finally{vt=g,sr.transition=d,mt=a,(mt&6)===0&&mi()}}function Ef(){Vn=Js.current,Tt(Js)}function ts(s,a){s.finishedWork=null,s.finishedLanes=0;var d=s.timeoutHandle;if(d!==-1&&(s.timeoutHandle=-1,rE(d)),Ut!==null)for(d=Ut.return;d!==null;){var g=d;switch(Ad(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&Bl();break;case 3:Ys(),Tt(Nn),Tt(fn),Vd();break;case 5:Wd(g);break;case 4:Ys();break;case 13:Tt(Ot);break;case 19:Tt(Ot);break;case 10:$d(g.type._context);break;case 22:case 23:Ef()}d=d.return}if(nn=s,Ut=s=Si(s.current,null),cn=Vn=a,Qt=0,wa=null,yf=cu=Zi=0,Pn=ba=null,Ji!==null){for(a=0;a<Ji.length;a++)if(d=Ji[a],g=d.interleaved,g!==null){d.interleaved=null;var x=g.next,b=d.pending;if(b!==null){var N=b.next;b.next=x,g.next=N}d.pending=g}Ji=null}return s}function Yy(s,a){do{var d=Ut;try{if(Ld(),Zl.current=ru,eu){for(var g=Mt.memoizedState;g!==null;){var x=g.queue;x!==null&&(x.pending=null),g=g.next}eu=!1}if(Xi=0,tn=Jt=Mt=null,pa=!1,ma=0,gf.current=null,d===null||d.return===null){Qt=1,wa=a,Ut=null;break}e:{var b=s,N=d.return,B=d,q=a;if(a=cn,B.flags|=32768,q!==null&&typeof q=="object"&&typeof q.then=="function"){var le=q,xe=B,be=xe.tag;if((xe.mode&1)===0&&(be===0||be===11||be===15)){var ye=xe.alternate;ye?(xe.updateQueue=ye.updateQueue,xe.memoizedState=ye.memoizedState,xe.lanes=ye.lanes):(xe.updateQueue=null,xe.memoizedState=null)}var Le=vy(N);if(Le!==null){Le.flags&=-257,xy(Le,N,B,b,a),Le.mode&1&&yy(b,le,a),a=Le,q=le;var We=a.updateQueue;if(We===null){var Ve=new Set;Ve.add(q),a.updateQueue=Ve}else We.add(q);break e}else{if((a&1)===0){yy(b,le,a),_f();break e}q=Error(n(426))}}else if(At&&B.mode&1){var zt=vy(N);if(zt!==null){(zt.flags&65536)===0&&(zt.flags|=256),xy(zt,N,B,b,a),Md(Gs(q,B));break e}}b=q=Gs(q,B),Qt!==4&&(Qt=2),ba===null?ba=[b]:ba.push(b),b=N;do{switch(b.tag){case 3:b.flags|=65536,a&=-a,b.lanes|=a;var ie=my(b,q,a);Ug(b,ie);break e;case 1:B=q;var Q=b.type,oe=b.stateNode;if((b.flags&128)===0&&(typeof Q.getDerivedStateFromError=="function"||oe!==null&&typeof oe.componentDidCatch=="function"&&(xi===null||!xi.has(oe)))){b.flags|=65536,a&=-a,b.lanes|=a;var _e=gy(b,B,a);Ug(b,_e);break e}}b=b.return}while(b!==null)}Jy(d)}catch(qe){a=qe,Ut===d&&d!==null&&(Ut=d=d.return);continue}break}while(!0)}function Gy(){var s=uu.current;return uu.current=ru,s===null?ru:s}function _f(){(Qt===0||Qt===3||Qt===2)&&(Qt=4),nn===null||(Zi&268435455)===0&&(cu&268435455)===0||ki(nn,cn)}function gu(s,a){var d=mt;mt|=2;var g=Gy();(nn!==s||cn!==a)&&(Xr=null,ts(s,a));do try{NE();break}catch(x){Yy(s,x)}while(!0);if(Ld(),mt=d,uu.current=g,Ut!==null)throw Error(n(261));return nn=null,cn=0,Qt}function NE(){for(;Ut!==null;)Ky(Ut)}function TE(){for(;Ut!==null&&!eS();)Ky(Ut)}function Ky(s){var a=Zy(s.alternate,s,Vn);s.memoizedProps=s.pendingProps,a===null?Jy(s):Ut=a,gf.current=null}function Jy(s){var a=s;do{var d=a.alternate;if(s=a.return,(a.flags&32768)===0){if(d=bE(d,a,Vn),d!==null){Ut=d;return}}else{if(d=kE(d,a),d!==null){d.flags&=32767,Ut=d;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Qt=6,Ut=null;return}}if(a=a.sibling,a!==null){Ut=a;return}Ut=a=s}while(a!==null);Qt===0&&(Qt=5)}function ns(s,a,d){var g=vt,x=sr.transition;try{sr.transition=null,vt=1,IE(s,a,d,g)}finally{sr.transition=x,vt=g}return null}function IE(s,a,d,g){do Xs();while(wi!==null);if((mt&6)!==0)throw Error(n(327));d=s.finishedWork;var x=s.finishedLanes;if(d===null)return null;if(s.finishedWork=null,s.finishedLanes=0,d===s.current)throw Error(n(177));s.callbackNode=null,s.callbackPriority=0;var b=d.lanes|d.childLanes;if(cS(s,b),s===nn&&(Ut=nn=null,cn=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||fu||(fu=!0,ev(wl,function(){return Xs(),null})),b=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||b){b=sr.transition,sr.transition=null;var N=vt;vt=1;var B=mt;mt|=4,gf.current=null,EE(s,d),zy(d,s),JS(Ed),jl=!!Sd,Ed=Sd=null,s.current=d,_E(d),tS(),mt=B,vt=N,sr.transition=b}else s.current=d;if(fu&&(fu=!1,wi=s,hu=x),b=s.pendingLanes,b===0&&(xi=null),iS(d.stateNode),An(s,Ft()),a!==null)for(g=s.onRecoverableError,d=0;d<a.length;d++)x=a[d],g(x.value,{componentStack:x.stack,digest:x.digest});if(du)throw du=!1,s=xf,xf=null,s;return(hu&1)!==0&&s.tag!==0&&Xs(),b=s.pendingLanes,(b&1)!==0?s===wf?ka++:(ka=0,wf=s):ka=0,mi(),null}function Xs(){if(wi!==null){var s=$m(hu),a=sr.transition,d=vt;try{if(sr.transition=null,vt=16>s?16:s,wi===null)var g=!1;else{if(s=wi,wi=null,hu=0,(mt&6)!==0)throw Error(n(331));var x=mt;for(mt|=4,Fe=s.current;Fe!==null;){var b=Fe,N=b.child;if((Fe.flags&16)!==0){var B=b.deletions;if(B!==null){for(var q=0;q<B.length;q++){var le=B[q];for(Fe=le;Fe!==null;){var xe=Fe;switch(xe.tag){case 0:case 11:case 15:xa(8,xe,b)}var be=xe.child;if(be!==null)be.return=xe,Fe=be;else for(;Fe!==null;){xe=Fe;var ye=xe.sibling,Le=xe.return;if(My(xe),xe===le){Fe=null;break}if(ye!==null){ye.return=Le,Fe=ye;break}Fe=Le}}}var We=b.alternate;if(We!==null){var Ve=We.child;if(Ve!==null){We.child=null;do{var zt=Ve.sibling;Ve.sibling=null,Ve=zt}while(Ve!==null)}}Fe=b}}if((b.subtreeFlags&2064)!==0&&N!==null)N.return=b,Fe=N;else e:for(;Fe!==null;){if(b=Fe,(b.flags&2048)!==0)switch(b.tag){case 0:case 11:case 15:xa(9,b,b.return)}var ie=b.sibling;if(ie!==null){ie.return=b.return,Fe=ie;break e}Fe=b.return}}var Q=s.current;for(Fe=Q;Fe!==null;){N=Fe;var oe=N.child;if((N.subtreeFlags&2064)!==0&&oe!==null)oe.return=N,Fe=oe;else e:for(N=Q;Fe!==null;){if(B=Fe,(B.flags&2048)!==0)try{switch(B.tag){case 0:case 11:case 15:lu(9,B)}}catch(qe){Lt(B,B.return,qe)}if(B===N){Fe=null;break e}var _e=B.sibling;if(_e!==null){_e.return=B.return,Fe=_e;break e}Fe=B.return}}if(mt=x,mi(),jr&&typeof jr.onPostCommitFiberRoot=="function")try{jr.onPostCommitFiberRoot(bl,s)}catch{}g=!0}return g}finally{vt=d,sr.transition=a}}return!1}function Qy(s,a,d){a=Gs(d,a),a=my(s,a,1),s=yi(s,a,1),a=kn(),s!==null&&(qo(s,1,a),An(s,a))}function Lt(s,a,d){if(s.tag===3)Qy(s,s,d);else for(;a!==null;){if(a.tag===3){Qy(a,s,d);break}else if(a.tag===1){var g=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(xi===null||!xi.has(g))){s=Gs(d,s),s=gy(a,s,1),a=yi(a,s,1),s=kn(),a!==null&&(qo(a,1,s),An(a,s));break}}a=a.return}}function PE(s,a,d){var g=s.pingCache;g!==null&&g.delete(a),a=kn(),s.pingedLanes|=s.suspendedLanes&d,nn===s&&(cn&d)===d&&(Qt===4||Qt===3&&(cn&130023424)===cn&&500>Ft()-vf?ts(s,0):yf|=d),An(s,a)}function Xy(s,a){a===0&&((s.mode&1)===0?a=1:(a=Sl,Sl<<=1,(Sl&130023424)===0&&(Sl=4194304)));var d=kn();s=Kr(s,a),s!==null&&(qo(s,a,d),An(s,d))}function AE(s){var a=s.memoizedState,d=0;a!==null&&(d=a.retryLane),Xy(s,d)}function RE(s,a){var d=0;switch(s.tag){case 13:var g=s.stateNode,x=s.memoizedState;x!==null&&(d=x.retryLane);break;case 19:g=s.stateNode;break;default:throw Error(n(314))}g!==null&&g.delete(a),Xy(s,d)}var Zy;Zy=function(s,a,d){if(s!==null)if(s.memoizedProps!==a.pendingProps||Nn.current)In=!0;else{if((s.lanes&d)===0&&(a.flags&128)===0)return In=!1,wE(s,a,d);In=(s.flags&131072)!==0}else In=!1,At&&(a.flags&1048576)!==0&&Ag(a,Vl,a.index);switch(a.lanes=0,a.tag){case 2:var g=a.type;ou(s,a),s=a.pendingProps;var x=zs(a,fn.current);qs(a,d),x=Gd(null,a,g,s,x,d);var b=Kd();return a.flags|=1,typeof x=="object"&&x!==null&&typeof x.render=="function"&&x.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Tn(g)?(b=!0,Ul(a)):b=!1,a.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,Bd(a),x.updater=iu,a.stateNode=x,x._reactInternals=a,tf(a,g,s,d),a=of(null,a,g,!0,b,d)):(a.tag=0,At&&b&&Pd(a),bn(null,a,x,d),a=a.child),a;case 16:g=a.elementType;e:{switch(ou(s,a),s=a.pendingProps,x=g._init,g=x(g._payload),a.type=g,x=a.tag=ME(g),s=mr(g,s),x){case 0:a=sf(null,a,g,s,d);break e;case 1:a=_y(null,a,g,s,d);break e;case 11:a=wy(null,a,g,s,d);break e;case 14:a=by(null,a,g,mr(g.type,s),d);break e}throw Error(n(306,g,""))}return a;case 0:return g=a.type,x=a.pendingProps,x=a.elementType===g?x:mr(g,x),sf(s,a,g,x,d);case 1:return g=a.type,x=a.pendingProps,x=a.elementType===g?x:mr(g,x),_y(s,a,g,x,d);case 3:e:{if(Cy(a),s===null)throw Error(n(387));g=a.pendingProps,b=a.memoizedState,x=b.element,Bg(s,a),Ql(a,g,null,d);var N=a.memoizedState;if(g=N.element,b.isDehydrated)if(b={element:g,isDehydrated:!1,cache:N.cache,pendingSuspenseBoundaries:N.pendingSuspenseBoundaries,transitions:N.transitions},a.updateQueue.baseState=b,a.memoizedState=b,a.flags&256){x=Gs(Error(n(423)),a),a=jy(s,a,g,d,x);break e}else if(g!==x){x=Gs(Error(n(424)),a),a=jy(s,a,g,d,x);break e}else for(Hn=fi(a.stateNode.containerInfo.firstChild),Wn=a,At=!0,pr=null,d=Fg(a,null,g,d),a.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Ws(),g===x){a=Qr(s,a,d);break e}bn(s,a,g,d)}a=a.child}return a;case 5:return Hg(a),s===null&&Od(a),g=a.type,x=a.pendingProps,b=s!==null?s.memoizedProps:null,N=x.children,_d(g,x)?N=null:b!==null&&_d(g,b)&&(a.flags|=32),Ey(s,a),bn(s,a,N,d),a.child;case 6:return s===null&&Od(a),null;case 13:return Ny(s,a,d);case 4:return Ud(a,a.stateNode.containerInfo),g=a.pendingProps,s===null?a.child=Hs(a,null,g,d):bn(s,a,g,d),a.child;case 11:return g=a.type,x=a.pendingProps,x=a.elementType===g?x:mr(g,x),wy(s,a,g,x,d);case 7:return bn(s,a,a.pendingProps,d),a.child;case 8:return bn(s,a,a.pendingProps.children,d),a.child;case 12:return bn(s,a,a.pendingProps.children,d),a.child;case 10:e:{if(g=a.type._context,x=a.pendingProps,b=a.memoizedProps,N=x.value,_t(Gl,g._currentValue),g._currentValue=N,b!==null)if(hr(b.value,N)){if(b.children===x.children&&!Nn.current){a=Qr(s,a,d);break e}}else for(b=a.child,b!==null&&(b.return=a);b!==null;){var B=b.dependencies;if(B!==null){N=b.child;for(var q=B.firstContext;q!==null;){if(q.context===g){if(b.tag===1){q=Jr(-1,d&-d),q.tag=2;var le=b.updateQueue;if(le!==null){le=le.shared;var xe=le.pending;xe===null?q.next=q:(q.next=xe.next,xe.next=q),le.pending=q}}b.lanes|=d,q=b.alternate,q!==null&&(q.lanes|=d),Fd(b.return,d,a),B.lanes|=d;break}q=q.next}}else if(b.tag===10)N=b.type===a.type?null:b.child;else if(b.tag===18){if(N=b.return,N===null)throw Error(n(341));N.lanes|=d,B=N.alternate,B!==null&&(B.lanes|=d),Fd(N,d,a),N=b.sibling}else N=b.child;if(N!==null)N.return=b;else for(N=b;N!==null;){if(N===a){N=null;break}if(b=N.sibling,b!==null){b.return=N.return,N=b;break}N=N.return}b=N}bn(s,a,x.children,d),a=a.child}return a;case 9:return x=a.type,g=a.pendingProps.children,qs(a,d),x=rr(x),g=g(x),a.flags|=1,bn(s,a,g,d),a.child;case 14:return g=a.type,x=mr(g,a.pendingProps),x=mr(g.type,x),by(s,a,g,x,d);case 15:return ky(s,a,a.type,a.pendingProps,d);case 17:return g=a.type,x=a.pendingProps,x=a.elementType===g?x:mr(g,x),ou(s,a),a.tag=1,Tn(g)?(s=!0,Ul(a)):s=!1,qs(a,d),hy(a,g,x),tf(a,g,x,d),of(null,a,g,!0,s,d);case 19:return Iy(s,a,d);case 22:return Sy(s,a,d)}throw Error(n(156,a.tag))};function ev(s,a){return Rm(s,a)}function OE(s,a,d,g){this.tag=s,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function or(s,a,d,g){return new OE(s,a,d,g)}function Cf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ME(s){if(typeof s=="function")return Cf(s)?1:0;if(s!=null){if(s=s.$$typeof,s===H)return 11;if(s===$)return 14}return 2}function Si(s,a){var d=s.alternate;return d===null?(d=or(s.tag,a,s.key,s.mode),d.elementType=s.elementType,d.type=s.type,d.stateNode=s.stateNode,d.alternate=s,s.alternate=d):(d.pendingProps=a,d.type=s.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=s.flags&14680064,d.childLanes=s.childLanes,d.lanes=s.lanes,d.child=s.child,d.memoizedProps=s.memoizedProps,d.memoizedState=s.memoizedState,d.updateQueue=s.updateQueue,a=s.dependencies,d.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},d.sibling=s.sibling,d.index=s.index,d.ref=s.ref,d}function yu(s,a,d,g,x,b){var N=2;if(g=s,typeof s=="function")Cf(s)&&(N=1);else if(typeof s=="string")N=5;else e:switch(s){case z:return rs(d.children,x,b,a);case ne:N=8,x|=8;break;case Z:return s=or(12,d,a,x|2),s.elementType=Z,s.lanes=b,s;case W:return s=or(13,d,a,x),s.elementType=W,s.lanes=b,s;case G:return s=or(19,d,a,x),s.elementType=G,s.lanes=b,s;case re:return vu(d,x,b,a);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case R:N=10;break e;case D:N=9;break e;case H:N=11;break e;case $:N=14;break e;case Y:N=16,g=null;break e}throw Error(n(130,s==null?s:typeof s,""))}return a=or(N,d,a,x),a.elementType=s,a.type=g,a.lanes=b,a}function rs(s,a,d,g){return s=or(7,s,g,a),s.lanes=d,s}function vu(s,a,d,g){return s=or(22,s,g,a),s.elementType=re,s.lanes=d,s.stateNode={isHidden:!1},s}function jf(s,a,d){return s=or(6,s,null,a),s.lanes=d,s}function Nf(s,a,d){return a=or(4,s.children!==null?s.children:[],s.key,a),a.lanes=d,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}function DE(s,a,d,g,x){this.tag=a,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ed(0),this.expirationTimes=ed(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ed(0),this.identifierPrefix=g,this.onRecoverableError=x,this.mutableSourceEagerHydrationData=null}function Tf(s,a,d,g,x,b,N,B,q){return s=new DE(s,a,d,B,q),a===1?(a=1,b===!0&&(a|=8)):a=0,b=or(3,null,null,a),s.current=b,b.stateNode=s,b.memoizedState={element:g,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bd(b),s}function LE(s,a,d){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:P,key:g==null?null:""+g,children:s,containerInfo:a,implementation:d}}function tv(s){if(!s)return pi;s=s._reactInternals;e:{if(Vi(s)!==s||s.tag!==1)throw Error(n(170));var a=s;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Tn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(n(171))}if(s.tag===1){var d=s.type;if(Tn(d))return Tg(s,d,a)}return a}function nv(s,a,d,g,x,b,N,B,q){return s=Tf(d,g,!0,s,x,b,N,B,q),s.context=tv(null),d=s.current,g=kn(),x=bi(d),b=Jr(g,x),b.callback=a??null,yi(d,b,x),s.current.lanes=x,qo(s,x,g),An(s,g),s}function xu(s,a,d,g){var x=a.current,b=kn(),N=bi(x);return d=tv(d),a.context===null?a.context=d:a.pendingContext=d,a=Jr(b,N),a.payload={element:s},g=g===void 0?null:g,g!==null&&(a.callback=g),s=yi(x,a,N),s!==null&&(vr(s,x,N,b),Jl(s,x,N)),N}function wu(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function rv(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var d=s.retryLane;s.retryLane=d!==0&&d<a?d:a}}function If(s,a){rv(s,a),(s=s.alternate)&&rv(s,a)}function $E(){return null}var iv=typeof reportError=="function"?reportError:function(s){console.error(s)};function Pf(s){this._internalRoot=s}bu.prototype.render=Pf.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(n(409));xu(s,a,null,null)},bu.prototype.unmount=Pf.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;es(function(){xu(null,s,null,null)}),a[Vr]=null}};function bu(s){this._internalRoot=s}bu.prototype.unstable_scheduleHydration=function(s){if(s){var a=Bm();s={blockedOn:null,target:s,priority:a};for(var d=0;d<ui.length&&a!==0&&a<ui[d].priority;d++);ui.splice(d,0,s),d===0&&Hm(s)}};function Af(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function ku(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function sv(){}function FE(s,a,d,g,x){if(x){if(typeof g=="function"){var b=g;g=function(){var le=wu(N);b.call(le)}}var N=nv(a,g,s,0,null,!1,!1,"",sv);return s._reactRootContainer=N,s[Vr]=N.current,oa(s.nodeType===8?s.parentNode:s),es(),N}for(;x=s.lastChild;)s.removeChild(x);if(typeof g=="function"){var B=g;g=function(){var le=wu(q);B.call(le)}}var q=Tf(s,0,!1,null,null,!1,!1,"",sv);return s._reactRootContainer=q,s[Vr]=q.current,oa(s.nodeType===8?s.parentNode:s),es(function(){xu(a,q,d,g)}),q}function Su(s,a,d,g,x){var b=d._reactRootContainer;if(b){var N=b;if(typeof x=="function"){var B=x;x=function(){var q=wu(N);B.call(q)}}xu(a,N,s,x)}else N=FE(d,a,s,x,g);return wu(N)}Fm=function(s){switch(s.tag){case 3:var a=s.stateNode;if(a.current.memoizedState.isDehydrated){var d=Vo(a.pendingLanes);d!==0&&(td(a,d|1),An(a,Ft()),(mt&6)===0&&(Qs=Ft()+500,mi()))}break;case 13:es(function(){var g=Kr(s,1);if(g!==null){var x=kn();vr(g,s,1,x)}}),If(s,1)}},nd=function(s){if(s.tag===13){var a=Kr(s,134217728);if(a!==null){var d=kn();vr(a,s,134217728,d)}If(s,134217728)}},zm=function(s){if(s.tag===13){var a=bi(s),d=Kr(s,a);if(d!==null){var g=kn();vr(d,s,a,g)}If(s,a)}},Bm=function(){return vt},Um=function(s,a){var d=vt;try{return vt=s,a()}finally{vt=d}},Be=function(s,a,d){switch(a){case"input":if(Pt(s,d),a=d.name,d.type==="radio"&&a!=null){for(d=s;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<d.length;a++){var g=d[a];if(g!==s&&g.form===s.form){var x=zl(g);if(!x)throw Error(n(90));je(g),Pt(g,x)}}}break;case"textarea":ue(s,d);break;case"select":a=d.value,a!=null&&ge(s,!!d.multiple,a,!1)}},nt=Sf,bt=es;var zE={usingClientEntryPoint:!1,Events:[ua,$s,zl,$e,Ue,Sf]},Sa={findFiberByHostInstance:qi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},BE={bundleType:Sa.bundleType,version:Sa.version,rendererPackageName:Sa.rendererPackageName,rendererConfig:Sa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Pm(s),s===null?null:s.stateNode},findFiberByHostInstance:Sa.findFiberByHostInstance||$E,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Eu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Eu.isDisabled&&Eu.supportsFiber)try{bl=Eu.inject(BE),jr=Eu}catch{}}return Rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zE,Rn.createPortal=function(s,a){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Af(a))throw Error(n(200));return LE(s,a,null,d)},Rn.createRoot=function(s,a){if(!Af(s))throw Error(n(299));var d=!1,g="",x=iv;return a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),a=Tf(s,1,!1,null,null,d,!1,g,x),s[Vr]=a.current,oa(s.nodeType===8?s.parentNode:s),new Pf(a)},Rn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=Pm(a),s=s===null?null:s.stateNode,s},Rn.flushSync=function(s){return es(s)},Rn.hydrate=function(s,a,d){if(!ku(a))throw Error(n(200));return Su(null,s,a,!0,d)},Rn.hydrateRoot=function(s,a,d){if(!Af(s))throw Error(n(405));var g=d!=null&&d.hydratedSources||null,x=!1,b="",N=iv;if(d!=null&&(d.unstable_strictMode===!0&&(x=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onRecoverableError!==void 0&&(N=d.onRecoverableError)),a=nv(a,null,s,1,d??null,x,!1,b,N),s[Vr]=a.current,oa(s),g)for(s=0;s<g.length;s++)d=g[s],x=d._getVersion,x=x(d._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[d,x]:a.mutableSourceEagerHydrationData.push(d,x);return new bu(a)},Rn.render=function(s,a,d){if(!ku(a))throw Error(n(200));return Su(null,s,a,!1,d)},Rn.unmountComponentAtNode=function(s){if(!ku(s))throw Error(n(40));return s._reactRootContainer?(es(function(){Su(null,null,s,!1,function(){s._reactRootContainer=null,s[Vr]=null})}),!0):!1},Rn.unstable_batchedUpdates=Sf,Rn.unstable_renderSubtreeIntoContainer=function(s,a,d,g){if(!ku(d))throw Error(n(200));if(s==null||s._reactInternals===void 0)throw Error(n(38));return Su(s,a,d,!1,g)},Rn.version="18.3.1-next-f1338f8080-20240426",Rn}var hv;function ow(){if(hv)return Mf.exports;hv=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Mf.exports=JE(),Mf.exports}var pv;function QE(){if(pv)return _u;pv=1;var e=ow();return _u.createRoot=e.createRoot,_u.hydrateRoot=e.hydrateRoot,_u}var XE=QE();const ZE=Ao(XE);var Kn=ow();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ga(){return Ga=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ga.apply(this,arguments)}var Oi;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Oi||(Oi={}));const mv="popstate";function e_(e){e===void 0&&(e={});function t(i,o){let{pathname:l="/",search:u="",hash:c=""}=Es(i.location.hash.substr(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),Ah("",{pathname:l,search:u,hash:c},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){let l=i.document.querySelector("base"),u="";if(l&&l.getAttribute("href")){let c=i.location.href,f=c.indexOf("#");u=f===-1?c:c.slice(0,f)}return u+"#"+(typeof o=="string"?o:Zu(o))}function r(i,o){Ip(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return n_(t,n,r,e)}function Dt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ip(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function t_(){return Math.random().toString(36).substr(2,8)}function gv(e,t){return{usr:e.state,key:e.key,idx:t}}function Ah(e,t,n,r){return n===void 0&&(n=null),Ga({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Es(t):t,{state:n,key:t&&t.key||r||t_()})}function Zu(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Es(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function n_(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,l=i.history,u=Oi.Pop,c=null,f=h();f==null&&(f=0,l.replaceState(Ga({},l.state,{idx:f}),""));function h(){return(l.state||{idx:null}).idx}function p(){u=Oi.Pop;let E=h(),C=E==null?null:E-f;f=E,c&&c({action:u,location:k.location,delta:C})}function y(E,C){u=Oi.Push;let _=Ah(k.location,E,C);n&&n(_,E),f=h()+1;let j=gv(_,f),I=k.createHref(_);try{l.pushState(j,"",I)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(I)}o&&c&&c({action:u,location:k.location,delta:1})}function v(E,C){u=Oi.Replace;let _=Ah(k.location,E,C);n&&n(_,E),f=h();let j=gv(_,f),I=k.createHref(_);l.replaceState(j,"",I),o&&c&&c({action:u,location:k.location,delta:0})}function S(E){let C=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof E=="string"?E:Zu(E);return _=_.replace(/ $/,"%20"),Dt(C,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,C)}let k={get action(){return u},get location(){return e(i,l)},listen(E){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(mv,p),c=E,()=>{i.removeEventListener(mv,p),c=null}},createHref(E){return t(i,E)},createURL:S,encodeLocation(E){let C=S(E);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:y,replace:v,go(E){return l.go(E)}};return k}var yv;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(yv||(yv={}));function r_(e,t,n){return n===void 0&&(n="/"),i_(e,t,n)}function i_(e,t,n,r){let i=typeof t=="string"?Es(t):t,o=Co(i.pathname||"/",n);if(o==null)return null;let l=aw(e);s_(l);let u=null;for(let c=0;u==null&&c<l.length;++c){let f=g_(o);u=p_(l[c],f)}return u}function aw(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,l,u)=>{let c={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};c.relativePath.startsWith("/")&&(Dt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let f=Li([r,c.relativePath]),h=n.concat(c);o.children&&o.children.length>0&&(Dt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),aw(o.children,t,h,f)),!(o.path==null&&!o.index)&&t.push({path:f,score:f_(f,o.index),routesMeta:h})};return e.forEach((o,l)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))i(o,l);else for(let c of lw(o.path))i(o,l,c)}),t}function lw(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let l=lw(r.join("/")),u=[];return u.push(...l.map(c=>c===""?o:[o,c].join("/"))),i&&u.push(...l),u.map(c=>e.startsWith("/")&&c===""?"/":c)}function s_(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:h_(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const o_=/^:[\w-]+$/,a_=3,l_=2,u_=1,c_=10,d_=-2,vv=e=>e==="*";function f_(e,t){let n=e.split("/"),r=n.length;return n.some(vv)&&(r+=d_),t&&(r+=l_),n.filter(i=>!vv(i)).reduce((i,o)=>i+(o_.test(o)?a_:o===""?u_:c_),r)}function h_(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function p_(e,t,n){let{routesMeta:r}=e,i={},o="/",l=[];for(let u=0;u<r.length;++u){let c=r[u],f=u===r.length-1,h=o==="/"?t:t.slice(o.length)||"/",p=Rh({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},h),y=c.route;if(!p)return null;Object.assign(i,p.params),l.push({params:i,pathname:Li([o,p.pathname]),pathnameBase:w_(Li([o,p.pathnameBase])),route:y}),p.pathnameBase!=="/"&&(o=Li([o,p.pathnameBase]))}return l}function Rh(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=m_(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],l=o.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((f,h,p)=>{let{paramName:y,isOptional:v}=h;if(y==="*"){let k=u[p]||"";l=o.slice(0,o.length-k.length).replace(/(.)\/+$/,"$1")}const S=u[p];return v&&!S?f[y]=void 0:f[y]=(S||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:e}}function m_(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Ip(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,c)=>(r.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function g_(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ip(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Co(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function y_(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Es(e):e;return{pathname:n?n.startsWith("/")?n:v_(n,t):t,search:b_(r),hash:k_(i)}}function v_(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function $f(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function x_(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Pp(e,t){let n=x_(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Ap(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=Es(e):(i=Ga({},e),Dt(!i.pathname||!i.pathname.includes("?"),$f("?","pathname","search",i)),Dt(!i.pathname||!i.pathname.includes("#"),$f("#","pathname","hash",i)),Dt(!i.search||!i.search.includes("#"),$f("#","search","hash",i)));let o=e===""||i.pathname==="",l=o?"/":i.pathname,u;if(l==null)u=n;else{let p=t.length-1;if(!r&&l.startsWith("..")){let y=l.split("/");for(;y[0]==="..";)y.shift(),p-=1;i.pathname=y.join("/")}u=p>=0?t[p]:"/"}let c=y_(i,u),f=l&&l!=="/"&&l.endsWith("/"),h=(o||l===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(f||h)&&(c.pathname+="/"),c}const Li=e=>e.join("/").replace(/\/\/+/g,"/"),w_=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),b_=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,k_=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function S_(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const uw=["post","put","patch","delete"];new Set(uw);const E_=["get",...uw];new Set(E_);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ka(){return Ka=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ka.apply(this,arguments)}const Sc=w.createContext(null),cw=w.createContext(null),ni=w.createContext(null),Ec=w.createContext(null),ri=w.createContext({outlet:null,matches:[],isDataRoute:!1}),dw=w.createContext(null);function __(e,t){let{relative:n}=t===void 0?{}:t;Ro()||Dt(!1);let{basename:r,navigator:i}=w.useContext(ni),{hash:o,pathname:l,search:u}=_c(e,{relative:n}),c=l;return r!=="/"&&(c=l==="/"?r:Li([r,l])),i.createHref({pathname:c,search:u,hash:o})}function Ro(){return w.useContext(Ec)!=null}function ii(){return Ro()||Dt(!1),w.useContext(Ec).location}function fw(e){w.useContext(ni).static||w.useLayoutEffect(e)}function Rp(){let{isDataRoute:e}=w.useContext(ri);return e?z_():C_()}function C_(){Ro()||Dt(!1);let e=w.useContext(Sc),{basename:t,future:n,navigator:r}=w.useContext(ni),{matches:i}=w.useContext(ri),{pathname:o}=ii(),l=JSON.stringify(Pp(i,n.v7_relativeSplatPath)),u=w.useRef(!1);return fw(()=>{u.current=!0}),w.useCallback(function(f,h){if(h===void 0&&(h={}),!u.current)return;if(typeof f=="number"){r.go(f);return}let p=Ap(f,JSON.parse(l),o,h.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:Li([t,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[t,r,l,o,e])}const j_=w.createContext(null);function N_(e){let t=w.useContext(ri).outlet;return t&&w.createElement(j_.Provider,{value:e},t)}function _c(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=w.useContext(ni),{matches:i}=w.useContext(ri),{pathname:o}=ii(),l=JSON.stringify(Pp(i,r.v7_relativeSplatPath));return w.useMemo(()=>Ap(e,JSON.parse(l),o,n==="path"),[e,l,o,n])}function T_(e,t){return I_(e,t)}function I_(e,t,n,r){Ro()||Dt(!1);let{navigator:i}=w.useContext(ni),{matches:o}=w.useContext(ri),l=o[o.length-1],u=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let f=ii(),h;if(t){var p;let E=typeof t=="string"?Es(t):t;c==="/"||(p=E.pathname)!=null&&p.startsWith(c)||Dt(!1),h=E}else h=f;let y=h.pathname||"/",v=y;if(c!=="/"){let E=c.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(E.length).join("/")}let S=r_(e,{pathname:v}),k=M_(S&&S.map(E=>Object.assign({},E,{params:Object.assign({},u,E.params),pathname:Li([c,i.encodeLocation?i.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?c:Li([c,i.encodeLocation?i.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),o,n,r);return t&&k?w.createElement(Ec.Provider,{value:{location:Ka({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Oi.Pop}},k):k}function P_(){let e=F_(),t=S_(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},t),n?w.createElement("pre",{style:i},n):null,null)}const A_=w.createElement(P_,null);class R_ extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?w.createElement(ri.Provider,{value:this.props.routeContext},w.createElement(dw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function O_(e){let{routeContext:t,match:n,children:r}=e,i=w.useContext(Sc);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),w.createElement(ri.Provider,{value:t},r)}function M_(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let l=e,u=(i=n)==null?void 0:i.errors;if(u!=null){let h=l.findIndex(p=>p.route.id&&(u==null?void 0:u[p.route.id])!==void 0);h>=0||Dt(!1),l=l.slice(0,Math.min(l.length,h+1))}let c=!1,f=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<l.length;h++){let p=l[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(f=h),p.route.id){let{loaderData:y,errors:v}=n,S=p.route.loader&&y[p.route.id]===void 0&&(!v||v[p.route.id]===void 0);if(p.route.lazy||S){c=!0,f>=0?l=l.slice(0,f+1):l=[l[0]];break}}}return l.reduceRight((h,p,y)=>{let v,S=!1,k=null,E=null;n&&(v=u&&p.route.id?u[p.route.id]:void 0,k=p.route.errorElement||A_,c&&(f<0&&y===0?(B_("route-fallback"),S=!0,E=null):f===y&&(S=!0,E=p.route.hydrateFallbackElement||null)));let C=t.concat(l.slice(0,y+1)),_=()=>{let j;return v?j=k:S?j=E:p.route.Component?j=w.createElement(p.route.Component,null):p.route.element?j=p.route.element:j=h,w.createElement(O_,{match:p,routeContext:{outlet:h,matches:C,isDataRoute:n!=null},children:j})};return n&&(p.route.ErrorBoundary||p.route.errorElement||y===0)?w.createElement(R_,{location:n.location,revalidation:n.revalidation,component:k,error:v,children:_(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):_()},null)}var hw=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(hw||{}),pw=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(pw||{});function D_(e){let t=w.useContext(Sc);return t||Dt(!1),t}function L_(e){let t=w.useContext(cw);return t||Dt(!1),t}function $_(e){let t=w.useContext(ri);return t||Dt(!1),t}function mw(e){let t=$_(),n=t.matches[t.matches.length-1];return n.route.id||Dt(!1),n.route.id}function F_(){var e;let t=w.useContext(dw),n=L_(),r=mw();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function z_(){let{router:e}=D_(hw.UseNavigateStable),t=mw(pw.UseNavigateStable),n=w.useRef(!1);return fw(()=>{n.current=!0}),w.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,Ka({fromRouteId:t},o)))},[e,t])}const xv={};function B_(e,t,n){xv[e]||(xv[e]=!0)}function U_(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Ja(e){let{to:t,replace:n,state:r,relative:i}=e;Ro()||Dt(!1);let{future:o,static:l}=w.useContext(ni),{matches:u}=w.useContext(ri),{pathname:c}=ii(),f=Rp(),h=Ap(t,Pp(u,o.v7_relativeSplatPath),c,i==="path"),p=JSON.stringify(h);return w.useEffect(()=>f(JSON.parse(p),{replace:n,state:r,relative:i}),[f,p,i,n,r]),null}function gw(e){return N_(e.context)}function gn(e){Dt(!1)}function W_(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Oi.Pop,navigator:o,static:l=!1,future:u}=e;Ro()&&Dt(!1);let c=t.replace(/^\/*/,"/"),f=w.useMemo(()=>({basename:c,navigator:o,static:l,future:Ka({v7_relativeSplatPath:!1},u)}),[c,u,o,l]);typeof r=="string"&&(r=Es(r));let{pathname:h="/",search:p="",hash:y="",state:v=null,key:S="default"}=r,k=w.useMemo(()=>{let E=Co(h,c);return E==null?null:{location:{pathname:E,search:p,hash:y,state:v,key:S},navigationType:i}},[c,h,p,y,v,S,i]);return k==null?null:w.createElement(ni.Provider,{value:f},w.createElement(Ec.Provider,{children:n,value:k}))}function H_(e){let{children:t,location:n}=e;return T_(Oh(t),n)}new Promise(()=>{});function Oh(e,t){t===void 0&&(t=[]);let n=[];return w.Children.forEach(e,(r,i)=>{if(!w.isValidElement(r))return;let o=[...t,i];if(r.type===w.Fragment){n.push.apply(n,Oh(r.props.children,o));return}r.type!==gn&&Dt(!1),!r.props.index||!r.props.children||Dt(!1);let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Oh(r.props.children,o)),n.push(l)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ec(){return ec=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ec.apply(this,arguments)}function yw(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function V_(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function q_(e,t){return e.button===0&&(!t||t==="_self")&&!V_(e)}function Mh(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function Y_(e,t){let n=Mh(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(o=>{n.append(i,o)})}),n}const G_=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],K_=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],J_="6";try{window.__reactRouterVersion=J_}catch{}const Q_=w.createContext({isTransitioning:!1}),X_="startTransition",wv=Xu[X_];function Z_(e){let{basename:t,children:n,future:r,window:i}=e,o=w.useRef();o.current==null&&(o.current=e_({window:i,v5Compat:!0}));let l=o.current,[u,c]=w.useState({action:l.action,location:l.location}),{v7_startTransition:f}=r||{},h=w.useCallback(p=>{f&&wv?wv(()=>c(p)):c(p)},[c,f]);return w.useLayoutEffect(()=>l.listen(h),[l,h]),w.useEffect(()=>U_(r),[r]),w.createElement(W_,{basename:t,children:n,location:u.location,navigationType:u.action,navigator:l,future:r})}const eC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",tC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$i=w.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:o,replace:l,state:u,target:c,to:f,preventScrollReset:h,viewTransition:p}=t,y=yw(t,G_),{basename:v}=w.useContext(ni),S,k=!1;if(typeof f=="string"&&tC.test(f)&&(S=f,eC))try{let j=new URL(window.location.href),I=f.startsWith("//")?new URL(j.protocol+f):new URL(f),M=Co(I.pathname,v);I.origin===j.origin&&M!=null?f=M+I.search+I.hash:k=!0}catch{}let E=__(f,{relative:i}),C=rC(f,{replace:l,state:u,target:c,preventScrollReset:h,relative:i,viewTransition:p});function _(j){r&&r(j),j.defaultPrevented||C(j)}return w.createElement("a",ec({},y,{href:S||E,onClick:k||o?r:_,ref:n,target:c}))}),bv=w.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:i=!1,className:o="",end:l=!1,style:u,to:c,viewTransition:f,children:h}=t,p=yw(t,K_),y=_c(c,{relative:p.relative}),v=ii(),S=w.useContext(cw),{navigator:k,basename:E}=w.useContext(ni),C=S!=null&&iC(y)&&f===!0,_=k.encodeLocation?k.encodeLocation(y).pathname:y.pathname,j=v.pathname,I=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;i||(j=j.toLowerCase(),I=I?I.toLowerCase():null,_=_.toLowerCase()),I&&E&&(I=Co(I,E)||I);const M=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let P=j===_||!l&&j.startsWith(_)&&j.charAt(M)==="/",z=I!=null&&(I===_||!l&&I.startsWith(_)&&I.charAt(_.length)==="/"),ne={isActive:P,isPending:z,isTransitioning:C},Z=P?r:void 0,R;typeof o=="function"?R=o(ne):R=[o,P?"active":null,z?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let D=typeof u=="function"?u(ne):u;return w.createElement($i,ec({},p,{"aria-current":Z,className:R,ref:n,style:D,to:c,viewTransition:f}),typeof h=="function"?h(ne):h)});var Dh;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Dh||(Dh={}));var kv;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(kv||(kv={}));function nC(e){let t=w.useContext(Sc);return t||Dt(!1),t}function rC(e,t){let{target:n,replace:r,state:i,preventScrollReset:o,relative:l,viewTransition:u}=t===void 0?{}:t,c=Rp(),f=ii(),h=_c(e,{relative:l});return w.useCallback(p=>{if(q_(p,n)){p.preventDefault();let y=r!==void 0?r:Zu(f)===Zu(h);c(e,{replace:y,state:i,preventScrollReset:o,relative:l,viewTransition:u})}},[f,c,h,r,i,n,e,o,l,u])}function Oo(e){let t=w.useRef(Mh(e)),n=w.useRef(!1),r=ii(),i=w.useMemo(()=>Y_(r.search,n.current?null:t.current),[r.search]),o=Rp(),l=w.useCallback((u,c)=>{const f=Mh(typeof u=="function"?u(i):u);n.current=!0,o("?"+f,c)},[o,i]);return[i,l]}function iC(e,t){t===void 0&&(t={});let n=w.useContext(Q_);n==null&&Dt(!1);let{basename:r}=nC(Dh.useViewTransitionState),i=_c(e,{relative:t.relative});if(!n.isTransitioning)return!1;let o=Co(n.currentLocation.pathname,r)||n.currentLocation.pathname,l=Co(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Rh(i.pathname,l)!=null||Rh(i.pathname,o)!=null}const vw=typeof document<"u"?Me.useLayoutEffect:()=>{};var Ff;const sC=(Ff=Me.useInsertionEffect)!==null&&Ff!==void 0?Ff:vw;function oC(e){const t=w.useRef(null);return sC(()=>{t.current=e},[e]),w.useCallback((...n)=>{const r=t.current;return r==null?void 0:r(...n)},[])}const Ui=e=>{var t;return(t=e==null?void 0:e.ownerDocument)!==null&&t!==void 0?t:document},gs=e=>e&&"window"in e&&e.window===e?e:Ui(e).defaultView||window;function aC(e){return e!==null&&typeof e=="object"&&"nodeType"in e&&typeof e.nodeType=="number"}function lC(e){return aC(e)&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in e}let uC=!1;function Op(){return uC}function xw(e,t){if(!Op())return t&&e?e.contains(t):!1;if(!e||!t)return!1;let n=t;for(;n!==null;){if(n===e)return!0;n.tagName==="SLOT"&&n.assignedSlot?n=n.assignedSlot.parentNode:lC(n)?n=n.host:n=n.parentNode}return!1}const Lh=(e=document)=>{var t;if(!Op())return e.activeElement;let n=e.activeElement;for(;n&&"shadowRoot"in n&&(!((t=n.shadowRoot)===null||t===void 0)&&t.activeElement);)n=n.shadowRoot.activeElement;return n};function ww(e){return Op()&&e.target.shadowRoot&&e.composedPath?e.composedPath()[0]:e.target}function bw(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=bw(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function ze(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=bw(e))&&(r&&(r+=" "),r+=t);return r}function cC(e){var t;if(typeof window>"u"||window.navigator==null)return!1;let n=(t=window.navigator.userAgentData)===null||t===void 0?void 0:t.brands;return Array.isArray(n)&&n.some(r=>e.test(r.brand))||e.test(window.navigator.userAgent)}function dC(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function kw(e){let t=null;return()=>(t==null&&(t=e()),t)}const fC=kw(function(){return dC(/^Mac/i)}),hC=kw(function(){return cC(/Android/i)});function Sw(){let e=w.useRef(new Map),t=w.useCallback((i,o,l,u)=>{let c=u!=null&&u.once?(...f)=>{e.current.delete(l),l(...f)}:l;e.current.set(l,{type:o,eventTarget:i,fn:c,options:u}),i.addEventListener(o,c,u)},[]),n=w.useCallback((i,o,l,u)=>{var c;let f=((c=e.current.get(l))===null||c===void 0?void 0:c.fn)||l;i.removeEventListener(o,f,u),e.current.delete(l)},[]),r=w.useCallback(()=>{e.current.forEach((i,o)=>{n(i.eventTarget,i.type,o,i.options)})},[n]);return w.useEffect(()=>r,[r]),{addGlobalListener:t,removeGlobalListener:n,removeAllGlobalListeners:r}}function pC(e){return e.pointerType===""&&e.isTrusted?!0:hC()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function Ew(e){let t=e;return t.nativeEvent=e,t.isDefaultPrevented=()=>t.defaultPrevented,t.isPropagationStopped=()=>t.cancelBubble,t.persist=()=>{},t}function mC(e,t){Object.defineProperty(e,"target",{value:t}),Object.defineProperty(e,"currentTarget",{value:t})}function _w(e){let t=w.useRef({isFocused:!1,observer:null});vw(()=>{const r=t.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]);let n=oC(r=>{e==null||e(r)});return w.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){t.current.isFocused=!0;let i=r.target,o=l=>{if(t.current.isFocused=!1,i.disabled){let u=Ew(l);n(u)}t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)};i.addEventListener("focusout",o,{once:!0}),t.current.observer=new MutationObserver(()=>{if(t.current.isFocused&&i.disabled){var l;(l=t.current.observer)===null||l===void 0||l.disconnect();let u=i===document.activeElement?null:document.activeElement;i.dispatchEvent(new FocusEvent("blur",{relatedTarget:u})),i.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:u}))}}),t.current.observer.observe(i,{attributes:!0,attributeFilter:["disabled"]})}},[n])}let gC=!1,al=null,$h=new Set,Ma=new Map,xs=!1,Fh=!1;const yC={Tab:!0,Escape:!0};function Mp(e,t){for(let n of $h)n(e,t)}function vC(e){return!(e.metaKey||!fC()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function tc(e){xs=!0,vC(e)&&(al="keyboard",Mp("keyboard",e))}function xo(e){al="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(xs=!0,Mp("pointer",e))}function Cw(e){pC(e)&&(xs=!0,al="virtual")}function jw(e){e.target===window||e.target===document||gC||!e.isTrusted||(!xs&&!Fh&&(al="virtual",Mp("virtual",e)),xs=!1,Fh=!1)}function Nw(){xs=!1,Fh=!0}function zh(e){if(typeof window>"u"||typeof document>"u"||Ma.get(gs(e)))return;const t=gs(e),n=Ui(e);let r=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){xs=!0,r.apply(this,arguments)},n.addEventListener("keydown",tc,!0),n.addEventListener("keyup",tc,!0),n.addEventListener("click",Cw,!0),t.addEventListener("focus",jw,!0),t.addEventListener("blur",Nw,!1),typeof PointerEvent<"u"&&(n.addEventListener("pointerdown",xo,!0),n.addEventListener("pointermove",xo,!0),n.addEventListener("pointerup",xo,!0)),t.addEventListener("beforeunload",()=>{Tw(e)},{once:!0}),Ma.set(t,{focus:r})}const Tw=(e,t)=>{const n=gs(e),r=Ui(e);t&&r.removeEventListener("DOMContentLoaded",t),Ma.has(n)&&(n.HTMLElement.prototype.focus=Ma.get(n).focus,r.removeEventListener("keydown",tc,!0),r.removeEventListener("keyup",tc,!0),r.removeEventListener("click",Cw,!0),n.removeEventListener("focus",jw,!0),n.removeEventListener("blur",Nw,!1),typeof PointerEvent<"u"&&(r.removeEventListener("pointerdown",xo,!0),r.removeEventListener("pointermove",xo,!0),r.removeEventListener("pointerup",xo,!0)),Ma.delete(n))};function xC(e){const t=Ui(e);let n;return t.readyState!=="loading"?zh(e):(n=()=>{zh(e)},t.addEventListener("DOMContentLoaded",n)),()=>Tw(e,n)}typeof document<"u"&&xC();function Iw(){return al!=="pointer"}const wC=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function bC(e,t,n){let r=Ui(n==null?void 0:n.target);const i=typeof window<"u"?gs(n==null?void 0:n.target).HTMLInputElement:HTMLInputElement,o=typeof window<"u"?gs(n==null?void 0:n.target).HTMLTextAreaElement:HTMLTextAreaElement,l=typeof window<"u"?gs(n==null?void 0:n.target).HTMLElement:HTMLElement,u=typeof window<"u"?gs(n==null?void 0:n.target).KeyboardEvent:KeyboardEvent;return e=e||r.activeElement instanceof i&&!wC.has(r.activeElement.type)||r.activeElement instanceof o||r.activeElement instanceof l&&r.activeElement.isContentEditable,!(e&&t==="keyboard"&&n instanceof u&&!yC[n.key])}function kC(e,t,n){zh(),w.useEffect(()=>{let r=(i,o)=>{bC(!!(n!=null&&n.isTextInput),i,o)&&e(Iw())};return $h.add(r),()=>{$h.delete(r)}},t)}function SC(e){let{isDisabled:t,onFocus:n,onBlur:r,onFocusChange:i}=e;const o=w.useCallback(c=>{if(c.target===c.currentTarget)return r&&r(c),i&&i(!1),!0},[r,i]),l=_w(o),u=w.useCallback(c=>{const f=Ui(c.target),h=f?Lh(f):Lh();c.target===c.currentTarget&&h===ww(c.nativeEvent)&&(n&&n(c),i&&i(!0),l(c))},[i,n,l]);return{focusProps:{onFocus:!t&&(n||i||r)?u:void 0,onBlur:!t&&(r||i)?o:void 0}}}function EC(e){let{isDisabled:t,onBlurWithin:n,onFocusWithin:r,onFocusWithinChange:i}=e,o=w.useRef({isFocusWithin:!1}),{addGlobalListener:l,removeAllGlobalListeners:u}=Sw(),c=w.useCallback(p=>{p.currentTarget.contains(p.target)&&o.current.isFocusWithin&&!p.currentTarget.contains(p.relatedTarget)&&(o.current.isFocusWithin=!1,u(),n&&n(p),i&&i(!1))},[n,i,o,u]),f=_w(c),h=w.useCallback(p=>{if(!p.currentTarget.contains(p.target))return;const y=Ui(p.target),v=Lh(y);if(!o.current.isFocusWithin&&v===ww(p.nativeEvent)){r&&r(p),i&&i(!0),o.current.isFocusWithin=!0,f(p);let S=p.currentTarget;l(y,"focus",k=>{if(o.current.isFocusWithin&&!xw(S,k.target)){let E=new y.defaultView.FocusEvent("blur",{relatedTarget:k.target});mC(E,S);let C=Ew(E);c(C)}},{capture:!0})}},[r,i,f,l,c]);return t?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:h,onBlur:c}}}let Bh=!1,Cu=0;function _C(){Bh=!0,setTimeout(()=>{Bh=!1},50)}function Sv(e){e.pointerType==="touch"&&_C()}function CC(){if(!(typeof document>"u"))return Cu===0&&typeof PointerEvent<"u"&&document.addEventListener("pointerup",Sv),Cu++,()=>{Cu--,!(Cu>0)&&typeof PointerEvent<"u"&&document.removeEventListener("pointerup",Sv)}}function jC(e){let{onHoverStart:t,onHoverChange:n,onHoverEnd:r,isDisabled:i}=e,[o,l]=w.useState(!1),u=w.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;w.useEffect(CC,[]);let{addGlobalListener:c,removeAllGlobalListeners:f}=Sw(),{hoverProps:h,triggerHoverEnd:p}=w.useMemo(()=>{let y=(k,E)=>{if(u.pointerType=E,i||E==="touch"||u.isHovered||!k.currentTarget.contains(k.target))return;u.isHovered=!0;let C=k.currentTarget;u.target=C,c(Ui(k.target),"pointerover",_=>{u.isHovered&&u.target&&!xw(u.target,_.target)&&v(_,_.pointerType)},{capture:!0}),t&&t({type:"hoverstart",target:C,pointerType:E}),n&&n(!0),l(!0)},v=(k,E)=>{let C=u.target;u.pointerType="",u.target=null,!(E==="touch"||!u.isHovered||!C)&&(u.isHovered=!1,f(),r&&r({type:"hoverend",target:C,pointerType:E}),n&&n(!1),l(!1))},S={};return typeof PointerEvent<"u"&&(S.onPointerEnter=k=>{Bh&&k.pointerType==="mouse"||y(k,k.pointerType)},S.onPointerLeave=k=>{!i&&k.currentTarget.contains(k.target)&&v(k,k.pointerType)}),{hoverProps:S,triggerHoverEnd:v}},[t,n,r,i,u,c,f]);return w.useEffect(()=>{i&&p({currentTarget:u.target},u.pointerType)},[i]),{hoverProps:h,isHovered:o}}function NC(e={}){let{autoFocus:t=!1,isTextInput:n,within:r}=e,i=w.useRef({isFocused:!1,isFocusVisible:t||Iw()}),[o,l]=w.useState(!1),[u,c]=w.useState(()=>i.current.isFocused&&i.current.isFocusVisible),f=w.useCallback(()=>c(i.current.isFocused&&i.current.isFocusVisible),[]),h=w.useCallback(v=>{i.current.isFocused=v,l(v),f()},[f]);kC(v=>{i.current.isFocusVisible=v,f()},[],{isTextInput:n});let{focusProps:p}=SC({isDisabled:r,onFocusChange:h}),{focusWithinProps:y}=EC({isDisabled:!r,onFocusWithinChange:h});return{isFocused:o,isFocusVisible:u,focusProps:r?y:p}}var TC=Object.defineProperty,IC=(e,t,n)=>t in e?TC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zf=(e,t,n)=>(IC(e,typeof t!="symbol"?t+"":t,n),n);let PC=class{constructor(){zf(this,"current",this.detect()),zf(this,"handoffState","pending"),zf(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Dr=new PC;function _s(e){var t;return Dr.isServer?null:e==null?document:(t=e==null?void 0:e.ownerDocument)!=null?t:document}function nc(e){var t,n;return Dr.isServer?null:e==null?document:(n=(t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))!=null?n:document}function Dp(e){var t,n;return(n=(t=nc(e))==null?void 0:t.activeElement)!=null?n:null}function Pw(e){return Dp(e)===e}function Cc(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Ln(){let e=[],t={addEventListener(n,r,i,o){return n.addEventListener(r,i,o),t.add(()=>n.removeEventListener(r,i,o))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return Cc(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},style(n,r,i){let o=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:i}),this.add(()=>{Object.assign(n.style,{[r]:o})})},group(n){let r=Ln();return n(r),this.add(()=>r.dispose())},add(n){return e.includes(n)||e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let i of e.splice(r,1))i()}},dispose(){for(let n of e.splice(0))n()}};return t}function Cs(){let[e]=w.useState(Ln);return w.useEffect(()=>()=>e.dispose(),[e]),e}let It=(e,t)=>{Dr.isServer?w.useEffect(e,t):w.useLayoutEffect(e,t)};function js(e){let t=w.useRef(e);return It(()=>{t.current=e},[e]),t}let et=function(e){let t=js(e);return Me.useCallback((...n)=>t.current(...n),[t])};function AC(e){let t=e.width/2,n=e.height/2;return{top:e.clientY-n,right:e.clientX+t,bottom:e.clientY+n,left:e.clientX-t}}function RC(e,t){return!(!e||!t||e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom)}function OC({disabled:e=!1}={}){let t=w.useRef(null),[n,r]=w.useState(!1),i=Cs(),o=et(()=>{t.current=null,r(!1),i.dispose()}),l=et(u=>{if(i.dispose(),t.current===null){t.current=u.currentTarget,r(!0);{let c=_s(u.currentTarget);i.addEventListener(c,"pointerup",o,!1),i.addEventListener(c,"pointermove",f=>{if(t.current){let h=AC(f);r(RC(h,t.current.getBoundingClientRect()))}},!1),i.addEventListener(c,"pointercancel",o,!1)}}});return{pressed:n,pressProps:e?{}:{onPointerDown:l,onPointerUp:o,onClick:o}}}function Br(e){return w.useMemo(()=>e,Object.values(e))}let MC=w.createContext(void 0);function Aw(){return w.useContext(MC)}function Uh(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function Er(e,t,...n){if(e in t){let i=t[e];return typeof i=="function"?i(...n):i}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(i=>`"${i}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Er),r}var jo=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(jo||{}),Mi=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Mi||{});function Gt(){let e=LC();return w.useCallback(t=>DC({mergeRefs:e,...t}),[e])}function DC({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:i,visible:o=!0,name:l,mergeRefs:u}){u=u??$C;let c=Rw(t,e);if(o)return ju(c,n,r,l,u);let f=i??0;if(f&2){let{static:h=!1,...p}=c;if(h)return ju(p,n,r,l,u)}if(f&1){let{unmount:h=!0,...p}=c;return Er(h?0:1,{0(){return null},1(){return ju({...p,hidden:!0,style:{display:"none"}},n,r,l,u)}})}return ju(c,n,r,l,u)}function ju(e,t={},n,r,i){let{as:o=n,children:l,refName:u="ref",...c}=Bf(e,["unmount","static"]),f=e.ref!==void 0?{[u]:e.ref}:{},h=typeof l=="function"?l(t):l;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(t)),c["aria-labelledby"]&&c["aria-labelledby"]===c.id&&(c["aria-labelledby"]=void 0);let p={};if(t){let y=!1,v=[];for(let[S,k]of Object.entries(t))typeof k=="boolean"&&(y=!0),k===!0&&v.push(S.replace(/([A-Z])/g,E=>`-${E.toLowerCase()}`));if(y){p["data-headlessui-state"]=v.join(" ");for(let S of v)p[`data-${S}`]=""}}if(Da(o)&&(Object.keys(as(c)).length>0||Object.keys(as(p)).length>0))if(!w.isValidElement(h)||Array.isArray(h)&&h.length>1||zC(h)){if(Object.keys(as(c)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(as(c)).concat(Object.keys(as(p))).map(y=>`  - ${y}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(y=>`  - ${y}`).join(`
`)].join(`
`))}else{let y=h.props,v=y==null?void 0:y.className,S=typeof v=="function"?(...C)=>Uh(v(...C),c.className):Uh(v,c.className),k=S?{className:S}:{},E=Rw(h.props,as(Bf(c,["ref"])));for(let C in p)C in E&&delete p[C];return w.cloneElement(h,Object.assign({},E,p,f,{ref:i(FC(h),f.ref)},k))}return w.createElement(o,Object.assign({},Bf(c,["ref"]),!Da(o)&&f,!Da(o)&&p),h)}function LC(){let e=w.useRef([]),t=w.useCallback(n=>{for(let r of e.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return e.current=n,t}}function $C(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function Rw(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):t[i]=r[i];if(t.disabled||t["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[i=>{var o;return(o=i==null?void 0:i.preventDefault)==null?void 0:o.call(i)}]);for(let r in n)Object.assign(t,{[r](i,...o){let l=n[r];for(let u of l){if((i instanceof Event||(i==null?void 0:i.nativeEvent)instanceof Event)&&i.defaultPrevented)return;u(i,...o)}}});return t}function Ow(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):t[i]=r[i];for(let r in n)Object.assign(t,{[r](...i){let o=n[r];for(let l of o)l==null||l(...i)}});return t}function $t(e){var t;return Object.assign(w.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function as(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function Bf(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function FC(e){return Me.version.split(".")[0]>="19"?e.props.ref:e.ref}function Da(e){return e===w.Fragment||e===Symbol.for("react.fragment")}function zC(e){return Da(e.type)}let BC="span";var rc=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(rc||{});function UC(e,t){var n;let{features:r=1,...i}=e,o={ref:t,"aria-hidden":(r&2)===2?!0:(n=i["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return Gt()({ourProps:o,theirProps:i,slot:{},defaultTag:BC,name:"Hidden"})}let Wh=$t(UC),WC=w.createContext(void 0);function HC(){return w.useContext(WC)}function Mw(e){return typeof e!="object"||e===null?!1:"nodeType"in e}function ti(e){return Mw(e)&&"tagName"in e}function Xn(e){return ti(e)&&"accessKey"in e}function Mr(e){return ti(e)&&"tabIndex"in e}function VC(e){return ti(e)&&"style"in e}function qC(e){return Xn(e)&&e.nodeName==="IFRAME"}function Dw(e){return Xn(e)&&e.nodeName==="INPUT"}function Ev(e){return Xn(e)&&e.nodeName==="LABEL"}function YC(e){return Xn(e)&&e.nodeName==="FIELDSET"}function Lw(e){return Xn(e)&&e.nodeName==="LEGEND"}function GC(e){return ti(e)?e.matches('a[href],audio[controls],button,details,embed,iframe,img[usemap],input:not([type="hidden"]),label,select,textarea,video[controls]'):!1}function _v(e){let t=e.parentElement,n=null;for(;t&&!YC(t);)Lw(t)&&(n=t),t=t.parentElement;let r=(t==null?void 0:t.getAttribute("disabled"))==="";return r&&KC(n)?!1:r}function KC(e){if(!e)return!1;let t=e.previousElementSibling;for(;t!==null;){if(Lw(t))return!1;t=t.previousElementSibling}return!0}let $w=Symbol();function JC(e,t=!0){return Object.assign(e,{[$w]:t})}function Cn(...e){let t=w.useRef(e);w.useEffect(()=>{t.current=e},[e]);let n=et(r=>{for(let i of t.current)i!=null&&(typeof i=="function"?i(r):i.current=r)});return e.every(r=>r==null||(r==null?void 0:r[$w]))?void 0:n}let Lp=w.createContext(null);Lp.displayName="DescriptionContext";function Fw(){let e=w.useContext(Lp);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,Fw),t}return e}function zw(){let[e,t]=w.useState([]);return[e.length>0?e.join(" "):void 0,w.useMemo(()=>function(n){let r=et(o=>(t(l=>[...l,o]),()=>t(l=>{let u=l.slice(),c=u.indexOf(o);return c!==-1&&u.splice(c,1),u}))),i=w.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return Me.createElement(Lp.Provider,{value:i},n.children)},[t])]}let QC="p";function XC(e,t){let n=w.useId(),r=Aw(),{id:i=`headlessui-description-${n}`,...o}=e,l=Fw(),u=Cn(t);It(()=>l.register(i),[i,l.register]);let c=Br({...l.slot,disabled:r||!1}),f={ref:u,...l.props,id:i};return Gt()({ourProps:f,theirProps:o,slot:c,defaultTag:QC,name:l.name||"Description"})}let ZC=$t(XC),ej=Object.assign(ZC,{});var on=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(on||{});let jc=w.createContext(null);jc.displayName="LabelContext";function $p(){let e=w.useContext(jc);if(e===null){let t=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,$p),t}return e}function tj(e){var t,n,r;let i=(n=(t=w.useContext(jc))==null?void 0:t.value)!=null?n:void 0;return((r=void 0)!=null?r:0)>0?[i,...e].filter(Boolean).join(" "):i}function Bw({inherit:e=!1}={}){let t=tj(),[n,r]=w.useState([]),i=e?[t,...n].filter(Boolean):n;return[i.length>0?i.join(" "):void 0,w.useMemo(()=>function(o){let l=et(c=>(r(f=>[...f,c]),()=>r(f=>{let h=f.slice(),p=h.indexOf(c);return p!==-1&&h.splice(p,1),h}))),u=w.useMemo(()=>({register:l,slot:o.slot,name:o.name,props:o.props,value:o.value}),[l,o.slot,o.name,o.props,o.value]);return Me.createElement(jc.Provider,{value:u},o.children)},[r])]}let nj="label";function rj(e,t){var n;let r=w.useId(),i=$p(),o=HC(),l=Aw(),{id:u=`headlessui-label-${r}`,htmlFor:c=o??((n=i.props)==null?void 0:n.htmlFor),passive:f=!1,...h}=e,p=Cn(t);It(()=>i.register(u),[u,i.register]);let y=et(k=>{let E=k.currentTarget;if(!(k.target!==k.currentTarget&&GC(k.target))&&(Ev(E)&&k.preventDefault(),i.props&&"onClick"in i.props&&typeof i.props.onClick=="function"&&i.props.onClick(k),Ev(E))){let C=document.getElementById(E.htmlFor);if(C){let _=C.getAttribute("disabled");if(_==="true"||_==="")return;let j=C.getAttribute("aria-disabled");if(j==="true"||j==="")return;(Dw(C)&&(C.type==="file"||C.type==="radio"||C.type==="checkbox")||C.role==="radio"||C.role==="checkbox"||C.role==="switch")&&C.click(),C.focus({preventScroll:!0})}}}),v=Br({...i.slot,disabled:l||!1}),S={ref:p,...i.props,id:u,htmlFor:c,onClick:y};return f&&("onClick"in S&&(delete S.htmlFor,delete S.onClick),"onClick"in h&&delete h.onClick),Gt()({ourProps:S,theirProps:h,slot:v,defaultTag:c?nj:"div",name:i.name||"Label"})}let ij=$t(rj);Object.assign(ij,{});let sj=w.createContext(()=>{});function oj({value:e,children:t}){return Me.createElement(sj.Provider,{value:e},t)}function Cv(e){if(e===null)return{width:0,height:0};let{width:t,height:n}=e.getBoundingClientRect();return{width:t,height:n}}function aj(e,t,n=!1){let[r,i]=w.useState(()=>Cv(t));return It(()=>{if(!t||!e)return;let o=Ln();return o.requestAnimationFrame(function l(){o.requestAnimationFrame(l),i(u=>{let c=Cv(t);return c.width===u.width&&c.height===u.height?u:c})}),()=>{o.dispose()}},[t,e]),n?{width:`${r.width}px`,height:`${r.height}px`}:r}var Uw=(e=>(e[e.Left=0]="Left",e[e.Right=2]="Right",e))(Uw||{});function lj(e){let t=w.useRef(null),n=et(i=>{t.current=i.pointerType,!_v(i.currentTarget)&&i.pointerType==="mouse"&&i.button===Uw.Left&&(i.preventDefault(),e(i))}),r=et(i=>{t.current!=="mouse"&&(_v(i.currentTarget)||e(i))});return{onPointerDown:n,onClick:r}}let Ww=class extends Map{constructor(t){super(),this.factory=t}get(t){let n=super.get(t);return n===void 0&&(n=this.factory(t),this.set(t,n)),n}};var uj=Object.defineProperty,cj=(e,t,n)=>t in e?uj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dj=(e,t,n)=>(cj(e,t+"",n),n),Hw=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},ar=(e,t,n)=>(Hw(e,t,"read from private field"),n?n.call(e):t.get(e)),Uf=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},jv=(e,t,n,r)=>(Hw(e,t,"write to private field"),t.set(e,n),n),Ar,Ta,Ia;let Vw=class{constructor(t){Uf(this,Ar,{}),Uf(this,Ta,new Ww(()=>new Set)),Uf(this,Ia,new Set),dj(this,"disposables",Ln()),jv(this,Ar,t),Dr.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return ar(this,Ar)}subscribe(t,n){if(Dr.isServer)return()=>{};let r={selector:t,callback:n,current:t(ar(this,Ar))};return ar(this,Ia).add(r),this.disposables.add(()=>{ar(this,Ia).delete(r)})}on(t,n){return Dr.isServer?()=>{}:(ar(this,Ta).get(t).add(n),this.disposables.add(()=>{ar(this,Ta).get(t).delete(n)}))}send(t){let n=this.reduce(ar(this,Ar),t);if(n!==ar(this,Ar)){jv(this,Ar,n);for(let r of ar(this,Ia)){let i=r.selector(ar(this,Ar));qw(r.current,i)||(r.current=i,r.callback(i))}for(let r of ar(this,Ta).get(t.type))r(ar(this,Ar),t)}}};Ar=new WeakMap,Ta=new WeakMap,Ia=new WeakMap;function qw(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:Array.isArray(e)&&Array.isArray(t)?e.length!==t.length?!1:Wf(e[Symbol.iterator](),t[Symbol.iterator]()):e instanceof Map&&t instanceof Map||e instanceof Set&&t instanceof Set?e.size!==t.size?!1:Wf(e.entries(),t.entries()):Nv(e)&&Nv(t)?Wf(Object.entries(e)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()):!1}function Wf(e,t){do{let n=e.next(),r=t.next();if(n.done&&r.done)return!0;if(n.done||r.done||!Object.is(n.value,r.value))return!1}while(!0)}function Nv(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||Object.getPrototypeOf(t)===null}function Tv(e){let[t,n]=e(),r=Ln();return(...i)=>{t(...i),r.dispose(),r.microTask(n)}}var fj=Object.defineProperty,hj=(e,t,n)=>t in e?fj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Iv=(e,t,n)=>(hj(e,typeof t!="symbol"?t+"":t,n),n),Yw=(e=>(e[e.Push=0]="Push",e[e.Pop=1]="Pop",e))(Yw||{});let pj={0(e,t){let n=t.id,r=e.stack,i=e.stack.indexOf(n);if(i!==-1){let o=e.stack.slice();return o.splice(i,1),o.push(n),r=o,{...e,stack:r}}return{...e,stack:[...e.stack,n]}},1(e,t){let n=t.id,r=e.stack.indexOf(n);if(r===-1)return e;let i=e.stack.slice();return i.splice(r,1),{...e,stack:i}}},mj=class Gw extends Vw{constructor(){super(...arguments),Iv(this,"actions",{push:t=>this.send({type:0,id:t}),pop:t=>this.send({type:1,id:t})}),Iv(this,"selectors",{isTop:(t,n)=>t.stack[t.stack.length-1]===n,inStack:(t,n)=>t.stack.includes(n)})}static new(){return new Gw({stack:[]})}reduce(t,n){return Er(n.type,pj,t,n)}};const Nc=new Ww(()=>mj.new());var Hf={exports:{}},Vf={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pv;function gj(){if(Pv)return Vf;Pv=1;var e=kc();function t(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,o=e.useEffect,l=e.useMemo,u=e.useDebugValue;return Vf.useSyncExternalStoreWithSelector=function(c,f,h,p,y){var v=i(null);if(v.current===null){var S={hasValue:!1,value:null};v.current=S}else S=v.current;v=l(function(){function E(M){if(!C){if(C=!0,_=M,M=p(M),y!==void 0&&S.hasValue){var P=S.value;if(y(P,M))return j=P}return j=M}if(P=j,n(_,M))return P;var z=p(M);return y!==void 0&&y(P,z)?(_=M,P):(_=M,j=z)}var C=!1,_,j,I=h===void 0?null:h;return[function(){return E(f())},I===null?void 0:function(){return E(I())}]},[f,h,p,y]);var k=r(c,v[0],v[1]);return o(function(){S.hasValue=!0,S.value=k},[k]),u(k),k},Vf}var Av;function yj(){return Av||(Av=1,Hf.exports=gj()),Hf.exports}var vj=yj();function dr(e,t,n=qw){return vj.useSyncExternalStoreWithSelector(et(r=>e.subscribe(xj,r)),et(()=>e.state),et(()=>e.state),et(t),n)}function xj(e){return e}function ll(e,t){let n=w.useId(),r=Nc.get(t),[i,o]=dr(r,w.useCallback(l=>[r.selectors.isTop(l,n),r.selectors.inStack(l,n)],[r,n]));return It(()=>{if(e)return r.actions.push(n),()=>r.actions.pop(n)},[r,e,n]),e?o?i:!0:!1}let Hh=new Map,La=new Map;function Rv(e){var t;let n=(t=La.get(e))!=null?t:0;return La.set(e,n+1),n!==0?()=>Ov(e):(Hh.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>Ov(e))}function Ov(e){var t;let n=(t=La.get(e))!=null?t:1;if(n===1?La.delete(e):La.set(e,n-1),n!==1)return;let r=Hh.get(e);r&&(r["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r["aria-hidden"]),e.inert=r.inert,Hh.delete(e))}function Kw(e,{allowed:t,disallowed:n}={}){let r=ll(e,"inert-others");It(()=>{var i,o;if(!r)return;let l=Ln();for(let c of(i=n==null?void 0:n())!=null?i:[])c&&l.add(Rv(c));let u=(o=t==null?void 0:t())!=null?o:[];for(let c of u){if(!c)continue;let f=_s(c);if(!f)continue;let h=c.parentElement;for(;h&&h!==f.body;){for(let p of h.children)u.some(y=>p.contains(y))||l.add(Rv(p));h=h.parentElement}}return l.dispose},[r,t,n])}function Jw(e,t,n){let r=js(i=>{let o=i.getBoundingClientRect();o.x===0&&o.y===0&&o.width===0&&o.height===0&&n()});w.useEffect(()=>{if(!e)return;let i=t===null?null:Xn(t)?t:t.current;if(!i)return;let o=Ln();if(typeof ResizeObserver<"u"){let l=new ResizeObserver(()=>r.current(i));l.observe(i),o.add(()=>l.disconnect())}if(typeof IntersectionObserver<"u"){let l=new IntersectionObserver(()=>r.current(i));l.observe(i),o.add(()=>l.disconnect())}return()=>o.dispose()},[t,r,e])}let ic=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","details>summary","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),wj=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var kr=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(kr||{}),Vh=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Vh||{}),bj=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(bj||{});function Qw(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(ic)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function kj(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(wj)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var Fp=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(Fp||{});function zp(e,t=0){var n;return e===((n=_s(e))==null?void 0:n.body)?!1:Er(t,{0(){return e.matches(ic)},1(){let r=e;for(;r!==null;){if(r.matches(ic))return!0;r=r.parentElement}return!1}})}function Xw(e){Ln().nextFrame(()=>{let t=Dp(e);t&&Mr(t)&&!zp(t,0)&&Lr(e)})}var Sj=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(Sj||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Lr(e){e==null||e.focus({preventScroll:!0})}let Ej=["textarea","input"].join(",");function _j(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,Ej))!=null?n:!1}function Zw(e,t=n=>n){return e.slice().sort((n,r)=>{let i=t(n),o=t(r);if(i===null||o===null)return 0;let l=i.compareDocumentPosition(o);return l&Node.DOCUMENT_POSITION_FOLLOWING?-1:l&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Cj(e,t,n=e===null?document.body:nc(e)){return wo(Qw(n),t,{relativeTo:e})}function wo(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:i=[]}={}){let o=Array.isArray(e)?e.length>0?nc(e[0]):document:nc(e),l=Array.isArray(e)?n?Zw(e):e:t&64?kj(e):Qw(e);i.length>0&&l.length>1&&(l=l.filter(v=>!i.some(S=>S!=null&&"current"in S?(S==null?void 0:S.current)===v:S===v))),r=r??(o==null?void 0:o.activeElement);let u=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,l.indexOf(r))-1;if(t&4)return Math.max(0,l.indexOf(r))+1;if(t&8)return l.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),f=t&32?{preventScroll:!0}:{},h=0,p=l.length,y;do{if(h>=p||h+p<=0)return 0;let v=c+h;if(t&16)v=(v+p)%p;else{if(v<0)return 3;if(v>=p)return 1}y=l[v],y==null||y.focus(f),h+=u}while(y!==Dp(y));return t&6&&_j(y)&&y.select(),2}function eb(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function jj(){return/Android/gi.test(window.navigator.userAgent)}function Mv(){return eb()||jj()}function yo(e,t,n,r){let i=js(n);w.useEffect(()=>{if(!e)return;function o(l){i.current(l)}return document.addEventListener(t,o,r),()=>document.removeEventListener(t,o,r)},[e,t,r])}function tb(e,t,n,r){let i=js(n);w.useEffect(()=>{if(!e)return;function o(l){i.current(l)}return window.addEventListener(t,o,r),()=>window.removeEventListener(t,o,r)},[e,t,r])}const Dv=30;function nb(e,t,n){let r=js(n),i=w.useCallback(function(u,c){if(u.defaultPrevented)return;let f=c(u);if(f===null||!f.getRootNode().contains(f)||!f.isConnected)return;let h=(function p(y){return typeof y=="function"?p(y()):Array.isArray(y)||y instanceof Set?y:[y]})(t);for(let p of h)if(p!==null&&(p.contains(f)||u.composed&&u.composedPath().includes(p)))return;return!zp(f,Fp.Loose)&&f.tabIndex!==-1&&u.preventDefault(),r.current(u,f)},[r,t]),o=w.useRef(null);yo(e,"pointerdown",u=>{var c,f;Mv()||(o.current=((f=(c=u.composedPath)==null?void 0:c.call(u))==null?void 0:f[0])||u.target)},!0),yo(e,"pointerup",u=>{if(Mv()||!o.current)return;let c=o.current;return o.current=null,i(u,()=>c)},!0);let l=w.useRef({x:0,y:0});yo(e,"touchstart",u=>{l.current.x=u.touches[0].clientX,l.current.y=u.touches[0].clientY},!0),yo(e,"touchend",u=>{let c={x:u.changedTouches[0].clientX,y:u.changedTouches[0].clientY};if(!(Math.abs(c.x-l.current.x)>=Dv||Math.abs(c.y-l.current.y)>=Dv))return i(u,()=>Mr(u.target)?u.target:null)},!0),tb(e,"blur",u=>i(u,()=>qC(window.document.activeElement)?window.document.activeElement:null),!0)}function Qa(...e){return w.useMemo(()=>_s(...e),[...e])}var Nj=(e=>(e[e.Ignore=0]="Ignore",e[e.Select=1]="Select",e[e.Close=2]="Close",e))(Nj||{});const Nu={Ignore:{kind:0},Select:e=>({kind:1,target:e}),Close:{kind:2}},Tj=200,Lv=5;function Ij(e,{trigger:t,action:n,close:r,select:i}){let o=w.useRef(null),l=w.useRef(null),u=w.useRef(null);yo(e&&t!==null,"pointerdown",c=>{Mw(c==null?void 0:c.target)&&t!=null&&t.contains(c.target)&&(l.current=c.x,u.current=c.y,o.current=c.timeStamp)}),yo(e&&t!==null,"pointerup",c=>{var f,h;let p=o.current;if(p===null||(o.current=null,!Mr(c.target))||Math.abs(c.x-((f=l.current)!=null?f:c.x))<Lv&&Math.abs(c.y-((h=u.current)!=null?h:c.y))<Lv)return;let y=n(c);switch(y.kind){case 0:return;case 1:{c.timeStamp-p>Tj&&(i(y.target),r());break}case 2:{r();break}}},{capture:!0})}function rb(e,t,n,r){let i=js(n);w.useEffect(()=>{e=e??window;function o(l){i.current(l)}return e.addEventListener(t,o,r),()=>e.removeEventListener(t,o,r)},[e,t,r])}function Pj(e,t){return w.useMemo(()=>{var n;if(e.type)return e.type;let r=(n=e.as)!=null?n:"button";if(typeof r=="string"&&r.toLowerCase()==="button"||(t==null?void 0:t.tagName)==="BUTTON"&&!t.hasAttribute("type"))return"button"},[e.type,e.as,t])}function Aj(e){return w.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}function Rj(e,t){let n=e(),r=new Set;return{getSnapshot(){return n},subscribe(i){return r.add(i),()=>r.delete(i)},dispatch(i,...o){let l=t[i].call(n,...o);l&&(n=l,r.forEach(u=>u()))}}}function Oj(){let e;return{before({doc:t}){var n;let r=t.documentElement,i=(n=t.defaultView)!=null?n:window;e=Math.max(0,i.innerWidth-r.clientWidth)},after({doc:t,d:n}){let r=t.documentElement,i=Math.max(0,r.clientWidth-r.offsetWidth),o=Math.max(0,e-i);n.style(r,"paddingRight",`${o}px`)}}}function Mj(){return eb()?{before({doc:e,d:t,meta:n}){function r(i){for(let o of n().containers)for(let l of o())if(l.contains(i))return!0;return!1}t.microTask(()=>{var i;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let u=Ln();u.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>u.dispose()))}let o=(i=window.scrollY)!=null?i:window.pageYOffset,l=null;t.addEventListener(e,"click",u=>{if(Mr(u.target))try{let c=u.target.closest("a");if(!c)return;let{hash:f}=new URL(c.href),h=e.querySelector(f);Mr(h)&&!r(h)&&(l=h)}catch{}},!0),t.group(u=>{t.addEventListener(e,"touchstart",c=>{if(u.dispose(),Mr(c.target)&&VC(c.target))if(r(c.target)){let f=c.target;for(;f.parentElement&&r(f.parentElement);)f=f.parentElement;u.style(f,"overscrollBehavior","contain")}else u.style(c.target,"touchAction","none")})}),t.addEventListener(e,"touchmove",u=>{if(Mr(u.target)){if(Dw(u.target))return;if(r(u.target)){let c=u.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&u.preventDefault()}else u.preventDefault()}},{passive:!1}),t.add(()=>{var u;let c=(u=window.scrollY)!=null?u:window.pageYOffset;o!==c&&window.scrollTo(0,o),l&&l.isConnected&&(l.scrollIntoView({block:"nearest"}),l=null)})})}}:{}}function Dj(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function $v(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let ys=Rj(()=>new Map,{PUSH(e,t){var n;let r=(n=this.get(e))!=null?n:{doc:e,count:0,d:Ln(),meta:new Set,computedMeta:{}};return r.count++,r.meta.add(t),r.computedMeta=$v(r.meta),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t),n.computedMeta=$v(n.meta)),this},SCROLL_PREVENT(e){let t={doc:e.doc,d:e.d,meta(){return e.computedMeta}},n=[Mj(),Oj(),Dj()];n.forEach(({before:r})=>r==null?void 0:r(t)),n.forEach(({after:r})=>r==null?void 0:r(t))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});ys.subscribe(()=>{let e=ys.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let r=t.get(n.doc)==="hidden",i=n.count!==0;(i&&!r||!i&&r)&&ys.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&ys.dispatch("TEARDOWN",n)}});function Lj(e,t,n=()=>({containers:[]})){let r=Aj(ys),i=t?r.get(t):void 0,o=i?i.count>0:!1;return It(()=>{if(!(!t||!e))return ys.dispatch("PUSH",t,n),()=>ys.dispatch("POP",t,n)},[e,t]),o}function ib(e,t,n=()=>[document.body]){let r=ll(e,"scroll-lock");Lj(r,t,i=>{var o;return{containers:[...(o=i.containers)!=null?o:[],n]}})}function Fv(e){return[e.screenX,e.screenY]}function $j(){let e=w.useRef([-1,-1]);return{wasMoved(t){let n=Fv(t);return e.current[0]===n[0]&&e.current[1]===n[1]?!1:(e.current=n,!0)},update(t){e.current=Fv(t)}}}function Fj(e=0){let[t,n]=w.useState(e),r=w.useCallback(c=>n(c),[]),i=w.useCallback(c=>n(f=>f|c),[]),o=w.useCallback(c=>(t&c)===c,[t]),l=w.useCallback(c=>n(f=>f&~c),[]),u=w.useCallback(c=>n(f=>f^c),[]);return{flags:t,setFlag:r,addFlag:i,hasFlag:o,removeFlag:l,toggleFlag:u}}var zj={},zv,Bv;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((zv=process==null?void 0:zj)==null?void 0:zv.NODE_ENV)==="test"&&typeof((Bv=Element==null?void 0:Element.prototype)==null?void 0:Bv.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var Bj=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(Bj||{});function sb(e){let t={};for(let n in e)e[n]===!0&&(t[`data-${n}`]="");return t}function ob(e,t,n,r){let[i,o]=w.useState(n),{hasFlag:l,addFlag:u,removeFlag:c}=Fj(e&&i?3:0),f=w.useRef(!1),h=w.useRef(!1),p=Cs();return It(()=>{var y;if(e){if(n&&o(!0),!t){n&&u(3);return}return(y=r==null?void 0:r.start)==null||y.call(r,n),Uj(t,{inFlight:f,prepare(){h.current?h.current=!1:h.current=f.current,f.current=!0,!h.current&&(n?(u(3),c(4)):(u(4),c(2)))},run(){h.current?n?(c(3),u(4)):(c(4),u(3)):n?c(1):u(1)},done(){var v;h.current&&Vj(t)||(f.current=!1,c(7),n||o(!1),(v=r==null?void 0:r.end)==null||v.call(r,n))}})}},[e,n,t,p]),e?[i,{closed:l(1),enter:l(2),leave:l(4),transition:l(2)||l(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function Uj(e,{prepare:t,run:n,done:r,inFlight:i}){let o=Ln();return Hj(e,{prepare:t,inFlight:i}),o.nextFrame(()=>{n(),o.requestAnimationFrame(()=>{o.add(Wj(e,r))})}),o.dispose}function Wj(e,t){var n,r;let i=Ln();if(!e)return i.dispose;let o=!1;i.add(()=>{o=!0});let l=(r=(n=e.getAnimations)==null?void 0:n.call(e).filter(u=>u instanceof CSSTransition))!=null?r:[];return l.length===0?(t(),i.dispose):(Promise.allSettled(l.map(u=>u.finished)).then(()=>{o||t()}),i.dispose)}function Hj(e,{inFlight:t,prepare:n}){if(t!=null&&t.current){n();return}let r=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=r}function Vj(e){var t,n;return((n=(t=e.getAnimations)==null?void 0:t.call(e))!=null?n:[]).some(r=>r instanceof CSSTransition&&r.playState!=="finished")}function qj(e,{container:t,accept:n,walk:r}){let i=w.useRef(n),o=w.useRef(r);w.useEffect(()=>{i.current=n,o.current=r},[n,r]),It(()=>{if(!t||!e)return;let l=_s(t);if(!l)return;let u=i.current,c=o.current,f=Object.assign(p=>u(p),{acceptNode:u}),h=l.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,f,!1);for(;h.nextNode();)c(h.currentNode)},[t,e,i,o])}function Bp(e,t){let n=w.useRef([]),r=et(e);w.useEffect(()=>{let i=[...n.current];for(let[o,l]of t.entries())if(n.current[o]!==l){let u=r(t,i);return n.current=t,u}},[r,...t])}function Tc(){return typeof window<"u"}function Mo(e){return ab(e)?(e.nodeName||"").toLowerCase():"#document"}function Jn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ur(e){var t;return(t=(ab(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function ab(e){return Tc()?e instanceof Node||e instanceof Jn(e).Node:!1}function En(e){return Tc()?e instanceof Element||e instanceof Jn(e).Element:!1}function Fr(e){return Tc()?e instanceof HTMLElement||e instanceof Jn(e).HTMLElement:!1}function Uv(e){return!Tc()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Jn(e).ShadowRoot}const Yj=new Set(["inline","contents"]);function ul(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=_r(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!Yj.has(i)}const Gj=new Set(["table","td","th"]);function Kj(e){return Gj.has(Mo(e))}const Jj=[":popover-open",":modal"];function Ic(e){return Jj.some(t=>{try{return e.matches(t)}catch{return!1}})}const Qj=["transform","translate","scale","rotate","perspective"],Xj=["transform","translate","scale","rotate","perspective","filter"],Zj=["paint","layout","strict","content"];function Up(e){const t=Wp(),n=En(e)?_r(e):e;return Qj.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||Xj.some(r=>(n.willChange||"").includes(r))||Zj.some(r=>(n.contain||"").includes(r))}function eN(e){let t=Fi(e);for(;Fr(t)&&!No(t);){if(Up(t))return t;if(Ic(t))return null;t=Fi(t)}return null}function Wp(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const tN=new Set(["html","body","#document"]);function No(e){return tN.has(Mo(e))}function _r(e){return Jn(e).getComputedStyle(e)}function Pc(e){return En(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Fi(e){if(Mo(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Uv(e)&&e.host||Ur(e);return Uv(t)?t.host:t}function lb(e){const t=Fi(e);return No(t)?e.ownerDocument?e.ownerDocument.body:e.body:Fr(t)&&ul(t)?t:lb(t)}function Xa(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=lb(e),o=i===((r=e.ownerDocument)==null?void 0:r.body),l=Jn(i);if(o){const u=qh(l);return t.concat(l,l.visualViewport||[],ul(i)?i:[],u&&n?Xa(u):[])}return t.concat(i,Xa(i,[],n))}function qh(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function nN(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}const ws=Math.min,vn=Math.max,Za=Math.round,Tu=Math.floor,$r=e=>({x:e,y:e}),rN={left:"right",right:"left",bottom:"top",top:"bottom"},iN={start:"end",end:"start"};function Wv(e,t,n){return vn(e,ws(t,n))}function Do(e,t){return typeof e=="function"?e(t):e}function zi(e){return e.split("-")[0]}function cl(e){return e.split("-")[1]}function ub(e){return e==="x"?"y":"x"}function cb(e){return e==="y"?"height":"width"}const sN=new Set(["top","bottom"]);function ei(e){return sN.has(zi(e))?"y":"x"}function db(e){return ub(ei(e))}function oN(e,t,n){n===void 0&&(n=!1);const r=cl(e),i=db(e),o=cb(i);let l=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(l=sc(l)),[l,sc(l)]}function aN(e){const t=sc(e);return[Yh(e),t,Yh(t)]}function Yh(e){return e.replace(/start|end/g,t=>iN[t])}const Hv=["left","right"],Vv=["right","left"],lN=["top","bottom"],uN=["bottom","top"];function cN(e,t,n){switch(e){case"top":case"bottom":return n?t?Vv:Hv:t?Hv:Vv;case"left":case"right":return t?lN:uN;default:return[]}}function dN(e,t,n,r){const i=cl(e);let o=cN(zi(e),n==="start",r);return i&&(o=o.map(l=>l+"-"+i),t&&(o=o.concat(o.map(Yh)))),o}function sc(e){return e.replace(/left|right|bottom|top/g,t=>rN[t])}function fN(e){return{top:0,right:0,bottom:0,left:0,...e}}function hN(e){return typeof e!="number"?fN(e):{top:e,right:e,bottom:e,left:e}}function oc(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function qv(e,t,n){let{reference:r,floating:i}=e;const o=ei(t),l=db(t),u=cb(l),c=zi(t),f=o==="y",h=r.x+r.width/2-i.width/2,p=r.y+r.height/2-i.height/2,y=r[u]/2-i[u]/2;let v;switch(c){case"top":v={x:h,y:r.y-i.height};break;case"bottom":v={x:h,y:r.y+r.height};break;case"right":v={x:r.x+r.width,y:p};break;case"left":v={x:r.x-i.width,y:p};break;default:v={x:r.x,y:r.y}}switch(cl(t)){case"start":v[l]-=y*(n&&f?-1:1);break;case"end":v[l]+=y*(n&&f?-1:1);break}return v}const pN=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:l}=n,u=o.filter(Boolean),c=await(l.isRTL==null?void 0:l.isRTL(t));let f=await l.getElementRects({reference:e,floating:t,strategy:i}),{x:h,y:p}=qv(f,r,c),y=r,v={},S=0;for(let k=0;k<u.length;k++){const{name:E,fn:C}=u[k],{x:_,y:j,data:I,reset:M}=await C({x:h,y:p,initialPlacement:r,placement:y,strategy:i,middlewareData:v,rects:f,platform:l,elements:{reference:e,floating:t}});h=_??h,p=j??p,v={...v,[E]:{...v[E],...I}},M&&S<=50&&(S++,typeof M=="object"&&(M.placement&&(y=M.placement),M.rects&&(f=M.rects===!0?await l.getElementRects({reference:e,floating:t,strategy:i}):M.rects),{x:h,y:p}=qv(f,y,c)),k=-1)}return{x:h,y:p,placement:y,strategy:i,middlewareData:v}};async function Ac(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:o,rects:l,elements:u,strategy:c}=e,{boundary:f="clippingAncestors",rootBoundary:h="viewport",elementContext:p="floating",altBoundary:y=!1,padding:v=0}=Do(t,e),S=hN(v),E=u[y?p==="floating"?"reference":"floating":p],C=oc(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(E)))==null||n?E:E.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(u.floating)),boundary:f,rootBoundary:h,strategy:c})),_=p==="floating"?{x:r,y:i,width:l.floating.width,height:l.floating.height}:l.reference,j=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u.floating)),I=await(o.isElement==null?void 0:o.isElement(j))?await(o.getScale==null?void 0:o.getScale(j))||{x:1,y:1}:{x:1,y:1},M=oc(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:_,offsetParent:j,strategy:c}):_);return{top:(C.top-M.top+S.top)/I.y,bottom:(M.bottom-C.bottom+S.bottom)/I.y,left:(C.left-M.left+S.left)/I.x,right:(M.right-C.right+S.right)/I.x}}const mN=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:o,rects:l,initialPlacement:u,platform:c,elements:f}=t,{mainAxis:h=!0,crossAxis:p=!0,fallbackPlacements:y,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:k=!0,...E}=Do(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const C=zi(i),_=ei(u),j=zi(u)===u,I=await(c.isRTL==null?void 0:c.isRTL(f.floating)),M=y||(j||!k?[sc(u)]:aN(u)),P=S!=="none";!y&&P&&M.push(...dN(u,k,S,I));const z=[u,...M],ne=await Ac(t,E),Z=[];let R=((r=o.flip)==null?void 0:r.overflows)||[];if(h&&Z.push(ne[C]),p){const G=oN(i,l,I);Z.push(ne[G[0]],ne[G[1]])}if(R=[...R,{placement:i,overflows:Z}],!Z.every(G=>G<=0)){var D,H;const G=(((D=o.flip)==null?void 0:D.index)||0)+1,$=z[G];if($&&(!(p==="alignment"?_!==ei($):!1)||R.every(O=>ei(O.placement)===_?O.overflows[0]>0:!0)))return{data:{index:G,overflows:R},reset:{placement:$}};let Y=(H=R.filter(re=>re.overflows[0]<=0).sort((re,O)=>re.overflows[1]-O.overflows[1])[0])==null?void 0:H.placement;if(!Y)switch(v){case"bestFit":{var W;const re=(W=R.filter(O=>{if(P){const ee=ei(O.placement);return ee===_||ee==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(ee=>ee>0).reduce((ee,T)=>ee+T,0)]).sort((O,ee)=>O[1]-ee[1])[0])==null?void 0:W[0];re&&(Y=re);break}case"initialPlacement":Y=u;break}if(i!==Y)return{reset:{placement:Y}}}return{}}}},gN=new Set(["left","top"]);async function yN(e,t){const{placement:n,platform:r,elements:i}=e,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),l=zi(n),u=cl(n),c=ei(n)==="y",f=gN.has(l)?-1:1,h=o&&c?-1:1,p=Do(t,e);let{mainAxis:y,crossAxis:v,alignmentAxis:S}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return u&&typeof S=="number"&&(v=u==="end"?S*-1:S),c?{x:v*h,y:y*f}:{x:y*f,y:v*h}}const vN=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:o,placement:l,middlewareData:u}=t,c=await yN(t,e);return l===((n=u.offset)==null?void 0:n.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:o+c.y,data:{...c,placement:l}}}}},xN=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:l=!1,limiter:u={fn:E=>{let{x:C,y:_}=E;return{x:C,y:_}}},...c}=Do(e,t),f={x:n,y:r},h=await Ac(t,c),p=ei(zi(i)),y=ub(p);let v=f[y],S=f[p];if(o){const E=y==="y"?"top":"left",C=y==="y"?"bottom":"right",_=v+h[E],j=v-h[C];v=Wv(_,v,j)}if(l){const E=p==="y"?"top":"left",C=p==="y"?"bottom":"right",_=S+h[E],j=S-h[C];S=Wv(_,S,j)}const k=u.fn({...t,[y]:v,[p]:S});return{...k,data:{x:k.x-n,y:k.y-r,enabled:{[y]:o,[p]:l}}}}}},wN=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:o,platform:l,elements:u}=t,{apply:c=()=>{},...f}=Do(e,t),h=await Ac(t,f),p=zi(i),y=cl(i),v=ei(i)==="y",{width:S,height:k}=o.floating;let E,C;p==="top"||p==="bottom"?(E=p,C=y===(await(l.isRTL==null?void 0:l.isRTL(u.floating))?"start":"end")?"left":"right"):(C=p,E=y==="end"?"top":"bottom");const _=k-h.top-h.bottom,j=S-h.left-h.right,I=ws(k-h[E],_),M=ws(S-h[C],j),P=!t.middlewareData.shift;let z=I,ne=M;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(ne=j),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(z=_),P&&!y){const R=vn(h.left,0),D=vn(h.right,0),H=vn(h.top,0),W=vn(h.bottom,0);v?ne=S-2*(R!==0||D!==0?R+D:vn(h.left,h.right)):z=k-2*(H!==0||W!==0?H+W:vn(h.top,h.bottom))}await c({...t,availableWidth:ne,availableHeight:z});const Z=await l.getDimensions(u.floating);return S!==Z.width||k!==Z.height?{reset:{rects:!0}}:{}}}};function fb(e){const t=_r(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Fr(e),o=i?e.offsetWidth:n,l=i?e.offsetHeight:r,u=Za(n)!==o||Za(r)!==l;return u&&(n=o,r=l),{width:n,height:r,$:u}}function Hp(e){return En(e)?e:e.contextElement}function bo(e){const t=Hp(e);if(!Fr(t))return $r(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=fb(t);let l=(o?Za(n.width):n.width)/r,u=(o?Za(n.height):n.height)/i;return(!l||!Number.isFinite(l))&&(l=1),(!u||!Number.isFinite(u))&&(u=1),{x:l,y:u}}const bN=$r(0);function hb(e){const t=Jn(e);return!Wp()||!t.visualViewport?bN:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function kN(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Jn(e)?!1:t}function bs(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),o=Hp(e);let l=$r(1);t&&(r?En(r)&&(l=bo(r)):l=bo(e));const u=kN(o,n,r)?hb(o):$r(0);let c=(i.left+u.x)/l.x,f=(i.top+u.y)/l.y,h=i.width/l.x,p=i.height/l.y;if(o){const y=Jn(o),v=r&&En(r)?Jn(r):r;let S=y,k=qh(S);for(;k&&r&&v!==S;){const E=bo(k),C=k.getBoundingClientRect(),_=_r(k),j=C.left+(k.clientLeft+parseFloat(_.paddingLeft))*E.x,I=C.top+(k.clientTop+parseFloat(_.paddingTop))*E.y;c*=E.x,f*=E.y,h*=E.x,p*=E.y,c+=j,f+=I,S=Jn(k),k=qh(S)}}return oc({width:h,height:p,x:c,y:f})}function Rc(e,t){const n=Pc(e).scrollLeft;return t?t.left+n:bs(Ur(e)).left+n}function pb(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-Rc(e,n),i=n.top+t.scrollTop;return{x:r,y:i}}function SN(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const o=i==="fixed",l=Ur(r),u=t?Ic(t.floating):!1;if(r===l||u&&o)return n;let c={scrollLeft:0,scrollTop:0},f=$r(1);const h=$r(0),p=Fr(r);if((p||!p&&!o)&&((Mo(r)!=="body"||ul(l))&&(c=Pc(r)),Fr(r))){const v=bs(r);f=bo(r),h.x=v.x+r.clientLeft,h.y=v.y+r.clientTop}const y=l&&!p&&!o?pb(l,c):$r(0);return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-c.scrollLeft*f.x+h.x+y.x,y:n.y*f.y-c.scrollTop*f.y+h.y+y.y}}function EN(e){return Array.from(e.getClientRects())}function _N(e){const t=Ur(e),n=Pc(e),r=e.ownerDocument.body,i=vn(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=vn(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let l=-n.scrollLeft+Rc(e);const u=-n.scrollTop;return _r(r).direction==="rtl"&&(l+=vn(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:l,y:u}}const Yv=25;function CN(e,t){const n=Jn(e),r=Ur(e),i=n.visualViewport;let o=r.clientWidth,l=r.clientHeight,u=0,c=0;if(i){o=i.width,l=i.height;const h=Wp();(!h||h&&t==="fixed")&&(u=i.offsetLeft,c=i.offsetTop)}const f=Rc(r);if(f<=0){const h=r.ownerDocument,p=h.body,y=getComputedStyle(p),v=h.compatMode==="CSS1Compat"&&parseFloat(y.marginLeft)+parseFloat(y.marginRight)||0,S=Math.abs(r.clientWidth-p.clientWidth-v);S<=Yv&&(o-=S)}else f<=Yv&&(o+=f);return{width:o,height:l,x:u,y:c}}const jN=new Set(["absolute","fixed"]);function NN(e,t){const n=bs(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=Fr(e)?bo(e):$r(1),l=e.clientWidth*o.x,u=e.clientHeight*o.y,c=i*o.x,f=r*o.y;return{width:l,height:u,x:c,y:f}}function Gv(e,t,n){let r;if(t==="viewport")r=CN(e,n);else if(t==="document")r=_N(Ur(e));else if(En(t))r=NN(t,n);else{const i=hb(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return oc(r)}function mb(e,t){const n=Fi(e);return n===t||!En(n)||No(n)?!1:_r(n).position==="fixed"||mb(n,t)}function TN(e,t){const n=t.get(e);if(n)return n;let r=Xa(e,[],!1).filter(u=>En(u)&&Mo(u)!=="body"),i=null;const o=_r(e).position==="fixed";let l=o?Fi(e):e;for(;En(l)&&!No(l);){const u=_r(l),c=Up(l);!c&&u.position==="fixed"&&(i=null),(o?!c&&!i:!c&&u.position==="static"&&!!i&&jN.has(i.position)||ul(l)&&!c&&mb(e,l))?r=r.filter(h=>h!==l):i=u,l=Fi(l)}return t.set(e,r),r}function IN(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const l=[...n==="clippingAncestors"?Ic(t)?[]:TN(t,this._c):[].concat(n),r],u=l[0],c=l.reduce((f,h)=>{const p=Gv(t,h,i);return f.top=vn(p.top,f.top),f.right=ws(p.right,f.right),f.bottom=ws(p.bottom,f.bottom),f.left=vn(p.left,f.left),f},Gv(t,u,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function PN(e){const{width:t,height:n}=fb(e);return{width:t,height:n}}function AN(e,t,n){const r=Fr(t),i=Ur(t),o=n==="fixed",l=bs(e,!0,o,t);let u={scrollLeft:0,scrollTop:0};const c=$r(0);function f(){c.x=Rc(i)}if(r||!r&&!o)if((Mo(t)!=="body"||ul(i))&&(u=Pc(t)),r){const v=bs(t,!0,o,t);c.x=v.x+t.clientLeft,c.y=v.y+t.clientTop}else i&&f();o&&!r&&i&&f();const h=i&&!r&&!o?pb(i,u):$r(0),p=l.left+u.scrollLeft-c.x-h.x,y=l.top+u.scrollTop-c.y-h.y;return{x:p,y,width:l.width,height:l.height}}function qf(e){return _r(e).position==="static"}function Kv(e,t){if(!Fr(e)||_r(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Ur(e)===n&&(n=n.ownerDocument.body),n}function gb(e,t){const n=Jn(e);if(Ic(e))return n;if(!Fr(e)){let i=Fi(e);for(;i&&!No(i);){if(En(i)&&!qf(i))return i;i=Fi(i)}return n}let r=Kv(e,t);for(;r&&Kj(r)&&qf(r);)r=Kv(r,t);return r&&No(r)&&qf(r)&&!Up(r)?n:r||eN(e)||n}const RN=async function(e){const t=this.getOffsetParent||gb,n=this.getDimensions,r=await n(e.floating);return{reference:AN(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function ON(e){return _r(e).direction==="rtl"}const MN={convertOffsetParentRelativeRectToViewportRelativeRect:SN,getDocumentElement:Ur,getClippingRect:IN,getOffsetParent:gb,getElementRects:RN,getClientRects:EN,getDimensions:PN,getScale:bo,isElement:En,isRTL:ON};function yb(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function DN(e,t){let n=null,r;const i=Ur(e);function o(){var u;clearTimeout(r),(u=n)==null||u.disconnect(),n=null}function l(u,c){u===void 0&&(u=!1),c===void 0&&(c=1),o();const f=e.getBoundingClientRect(),{left:h,top:p,width:y,height:v}=f;if(u||t(),!y||!v)return;const S=Tu(p),k=Tu(i.clientWidth-(h+y)),E=Tu(i.clientHeight-(p+v)),C=Tu(h),j={rootMargin:-S+"px "+-k+"px "+-E+"px "+-C+"px",threshold:vn(0,ws(1,c))||1};let I=!0;function M(P){const z=P[0].intersectionRatio;if(z!==c){if(!I)return l();z?l(!1,z):r=setTimeout(()=>{l(!1,1e-7)},1e3)}z===1&&!yb(f,e.getBoundingClientRect())&&l(),I=!1}try{n=new IntersectionObserver(M,{...j,root:i.ownerDocument})}catch{n=new IntersectionObserver(M,j)}n.observe(e)}return l(!0),o}function LN(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,f=Hp(e),h=i||o?[...f?Xa(f):[],...Xa(t)]:[];h.forEach(C=>{i&&C.addEventListener("scroll",n,{passive:!0}),o&&C.addEventListener("resize",n)});const p=f&&u?DN(f,n):null;let y=-1,v=null;l&&(v=new ResizeObserver(C=>{let[_]=C;_&&_.target===f&&v&&(v.unobserve(t),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var j;(j=v)==null||j.observe(t)})),n()}),f&&!c&&v.observe(f),v.observe(t));let S,k=c?bs(e):null;c&&E();function E(){const C=bs(e);k&&!yb(k,C)&&n(),k=C,S=requestAnimationFrame(E)}return n(),()=>{var C;h.forEach(_=>{i&&_.removeEventListener("scroll",n),o&&_.removeEventListener("resize",n)}),p==null||p(),(C=v)==null||C.disconnect(),v=null,c&&cancelAnimationFrame(S)}}const Yf=Ac,$N=vN,FN=xN,zN=mN,BN=wN,UN=(e,t,n)=>{const r=new Map,i={platform:MN,...n},o={...i.platform,_c:r};return pN(e,t,{...i,platform:o})};var WN=typeof document<"u",HN=function(){},Wu=WN?w.useLayoutEffect:HN;function ac(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!ac(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&e.$$typeof)&&!ac(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function vb(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Jv(e,t){const n=vb(e);return Math.round(t*n)/n}function Gf(e){const t=w.useRef(e);return Wu(()=>{t.current=e}),t}function VN(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:l}={},transform:u=!0,whileElementsMounted:c,open:f}=e,[h,p]=w.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[y,v]=w.useState(r);ac(y,r)||v(r);const[S,k]=w.useState(null),[E,C]=w.useState(null),_=w.useCallback(O=>{O!==P.current&&(P.current=O,k(O))},[]),j=w.useCallback(O=>{O!==z.current&&(z.current=O,C(O))},[]),I=o||S,M=l||E,P=w.useRef(null),z=w.useRef(null),ne=w.useRef(h),Z=c!=null,R=Gf(c),D=Gf(i),H=Gf(f),W=w.useCallback(()=>{if(!P.current||!z.current)return;const O={placement:t,strategy:n,middleware:y};D.current&&(O.platform=D.current),UN(P.current,z.current,O).then(ee=>{const T={...ee,isPositioned:H.current!==!1};G.current&&!ac(ne.current,T)&&(ne.current=T,Kn.flushSync(()=>{p(T)}))})},[y,t,n,D,H]);Wu(()=>{f===!1&&ne.current.isPositioned&&(ne.current.isPositioned=!1,p(O=>({...O,isPositioned:!1})))},[f]);const G=w.useRef(!1);Wu(()=>(G.current=!0,()=>{G.current=!1}),[]),Wu(()=>{if(I&&(P.current=I),M&&(z.current=M),I&&M){if(R.current)return R.current(I,M,W);W()}},[I,M,W,R,Z]);const $=w.useMemo(()=>({reference:P,floating:z,setReference:_,setFloating:j}),[_,j]),Y=w.useMemo(()=>({reference:I,floating:M}),[I,M]),re=w.useMemo(()=>{const O={position:n,left:0,top:0};if(!Y.floating)return O;const ee=Jv(Y.floating,h.x),T=Jv(Y.floating,h.y);return u?{...O,transform:"translate("+ee+"px, "+T+"px)",...vb(Y.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ee,top:T}},[n,u,Y.floating,h.x,h.y]);return w.useMemo(()=>({...h,update:W,refs:$,elements:Y,floatingStyles:re}),[h,W,$,Y,re])}const xb=(e,t)=>({...$N(e),options:[e,t]}),qN=(e,t)=>({...FN(e),options:[e,t]}),YN=(e,t)=>({...zN(e),options:[e,t]}),GN=(e,t)=>({...BN(e),options:[e,t]}),wb={...Xu},KN=wb.useInsertionEffect,JN=KN||(e=>e());function bb(e){const t=w.useRef(()=>{});return JN(()=>{t.current=e}),w.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var Gh=typeof document<"u"?w.useLayoutEffect:w.useEffect;let Qv=!1,QN=0;const Xv=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+QN++;function XN(){const[e,t]=w.useState(()=>Qv?Xv():void 0);return Gh(()=>{e==null&&t(Xv())},[]),w.useEffect(()=>{Qv=!0},[]),e}const ZN=wb.useId,eT=ZN||XN;function tT(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const nT=w.createContext(null),rT=w.createContext(null),iT=()=>{var e;return((e=w.useContext(nT))==null?void 0:e.id)||null},sT=()=>w.useContext(rT),oT="data-floating-ui-focusable";function aT(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=eT(),o=w.useRef({}),[l]=w.useState(()=>tT()),u=iT()!=null,[c,f]=w.useState(r.reference),h=bb((v,S,k)=>{o.current.openEvent=v?S:void 0,l.emit("openchange",{open:v,event:S,reason:k,nested:u}),n==null||n(v,S,k)}),p=w.useMemo(()=>({setPositionReference:f}),[]),y=w.useMemo(()=>({reference:c||r.reference||null,floating:r.floating||null,domReference:r.reference}),[c,r.reference,r.floating]);return w.useMemo(()=>({dataRef:o,open:t,onOpenChange:h,elements:y,events:l,floatingId:i,refs:p}),[t,h,y,l,i,p])}function lT(e){e===void 0&&(e={});const{nodeId:t}=e,n=aT({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[o,l]=w.useState(null),[u,c]=w.useState(null),h=(i==null?void 0:i.domReference)||o,p=w.useRef(null),y=sT();Gh(()=>{h&&(p.current=h)},[h]);const v=VN({...e,elements:{...i,...u&&{reference:u}}}),S=w.useCallback(j=>{const I=En(j)?{getBoundingClientRect:()=>j.getBoundingClientRect(),contextElement:j}:j;c(I),v.refs.setReference(I)},[v.refs]),k=w.useCallback(j=>{(En(j)||j===null)&&(p.current=j,l(j)),(En(v.refs.reference.current)||v.refs.reference.current===null||j!==null&&!En(j))&&v.refs.setReference(j)},[v.refs]),E=w.useMemo(()=>({...v.refs,setReference:k,setPositionReference:S,domReference:p}),[v.refs,k,S]),C=w.useMemo(()=>({...v.elements,domReference:h}),[v.elements,h]),_=w.useMemo(()=>({...v,...r,refs:E,elements:C,nodeId:t}),[v,E,C,t,r]);return Gh(()=>{r.dataRef.current.floatingContext=_;const j=y==null?void 0:y.nodesRef.current.find(I=>I.id===t);j&&(j.context=_)}),w.useMemo(()=>({...v,context:_,refs:E,elements:C}),[v,E,C,_])}const Zv="active",ex="selected";function Kf(e,t,n){const r=new Map,i=n==="item";let o=e;if(i&&e){const{[Zv]:l,[ex]:u,...c}=e;o=c}return{...n==="floating"&&{tabIndex:-1,[oT]:""},...o,...t.map(l=>{const u=l?l[n]:null;return typeof u=="function"?e?u(e):null:u}).concat(e).reduce((l,u)=>(u&&Object.entries(u).forEach(c=>{let[f,h]=c;if(!(i&&[Zv,ex].includes(f)))if(f.indexOf("on")===0){if(r.has(f)||r.set(f,[]),typeof h=="function"){var p;(p=r.get(f))==null||p.push(h),l[f]=function(){for(var y,v=arguments.length,S=new Array(v),k=0;k<v;k++)S[k]=arguments[k];return(y=r.get(f))==null?void 0:y.map(E=>E(...S)).find(E=>E!==void 0)}}}else l[f]=h}),l),{})}}function uT(e){e===void 0&&(e=[]);const t=e.map(u=>u==null?void 0:u.reference),n=e.map(u=>u==null?void 0:u.floating),r=e.map(u=>u==null?void 0:u.item),i=w.useCallback(u=>Kf(u,e,"reference"),t),o=w.useCallback(u=>Kf(u,e,"floating"),n),l=w.useCallback(u=>Kf(u,e,"item"),r);return w.useMemo(()=>({getReferenceProps:i,getFloatingProps:o,getItemProps:l}),[i,o,l])}function tx(e,t){return{...e,rects:{...e.rects,floating:{...e.rects.floating,height:t}}}}const cT=e=>({name:"inner",options:e,async fn(t){const{listRef:n,overflowRef:r,onFallbackChange:i,offset:o=0,index:l=0,minItemsVisible:u=4,referenceOverflowThreshold:c=0,scrollRef:f,...h}=Do(e,t),{rects:p,elements:{floating:y}}=t,v=n.current[l],S=(f==null?void 0:f.current)||y,k=y.clientTop||S.clientTop,E=y.clientTop!==0,C=S.clientTop!==0,_=y===S;if(!v)return{};const j={...t,...await xb(-v.offsetTop-y.clientTop-p.reference.height/2-v.offsetHeight/2-o).fn(t)},I=await Yf(tx(j,S.scrollHeight+k+y.clientTop),h),M=await Yf(j,{...h,elementContext:"reference"}),P=vn(0,I.top),z=j.y+P,R=(S.scrollHeight>S.clientHeight?D=>D:Za)(vn(0,S.scrollHeight+(E&&_||C?k*2:0)-P-vn(0,I.bottom)));if(S.style.maxHeight=R+"px",S.scrollTop=P,i){const D=S.offsetHeight<v.offsetHeight*ws(u,n.current.length)-1||M.top>=-c||M.bottom>=-c;Kn.flushSync(()=>i(D))}return r&&(r.current=await Yf(tx({...j,y:z},S.offsetHeight+k+y.clientTop),h)),{y:z}}});function dT(e,t){const{open:n,elements:r}=e,{enabled:i=!0,overflowRef:o,scrollRef:l,onChange:u}=t,c=bb(u),f=w.useRef(!1),h=w.useRef(null),p=w.useRef(null);w.useEffect(()=>{if(!i)return;function v(k){if(k.ctrlKey||!S||o.current==null)return;const E=k.deltaY,C=o.current.top>=-.5,_=o.current.bottom>=-.5,j=S.scrollHeight-S.clientHeight,I=E<0?-1:1,M=E<0?"max":"min";S.scrollHeight<=S.clientHeight||(!C&&E>0||!_&&E<0?(k.preventDefault(),Kn.flushSync(()=>{c(P=>P+Math[M](E,j*I))})):/firefox/i.test(nN())&&(S.scrollTop+=E))}const S=(l==null?void 0:l.current)||r.floating;if(n&&S)return S.addEventListener("wheel",v),requestAnimationFrame(()=>{h.current=S.scrollTop,o.current!=null&&(p.current={...o.current})}),()=>{h.current=null,p.current=null,S.removeEventListener("wheel",v)}},[i,n,r.floating,o,l,c]);const y=w.useMemo(()=>({onKeyDown(){f.current=!0},onWheel(){f.current=!1},onPointerMove(){f.current=!1},onScroll(){const v=(l==null?void 0:l.current)||r.floating;if(!(!o.current||!v||!f.current)){if(h.current!==null){const S=v.scrollTop-h.current;(o.current.bottom<-.5&&S<-1||o.current.top<-.5&&S>1)&&Kn.flushSync(()=>c(k=>k+S))}requestAnimationFrame(()=>{h.current=v.scrollTop})}}}),[r.floating,c,o,l]);return w.useMemo(()=>i?{floating:y}:{},[i,y])}let Lo=w.createContext({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});Lo.displayName="FloatingContext";let Vp=w.createContext(null);Vp.displayName="PlacementContext";function fT(e){return w.useMemo(()=>e?typeof e=="string"?{to:e}:e:null,[e])}function hT(){return w.useContext(Lo).setReference}function pT(){return w.useContext(Lo).getReferenceProps}function mT(){let{getFloatingProps:e,slot:t}=w.useContext(Lo);return w.useCallback((...n)=>Object.assign({},e(...n),{"data-anchor":t.anchor}),[e,t])}function gT(e=null){e===!1&&(e=null),typeof e=="string"&&(e={to:e});let t=w.useContext(Vp),n=w.useMemo(()=>e,[JSON.stringify(e,(i,o)=>{var l;return(l=o==null?void 0:o.outerHTML)!=null?l:o})]);It(()=>{t==null||t(n??null)},[t,n]);let r=w.useContext(Lo);return w.useMemo(()=>[r.setFloating,e?r.styles:{}],[r.setFloating,e,r.styles])}let nx=4;function yT({children:e,enabled:t=!0}){let[n,r]=w.useState(null),[i,o]=w.useState(0),l=w.useRef(null),[u,c]=w.useState(null);vT(u);let f=t&&n!==null&&u!==null,{to:h="bottom",gap:p=0,offset:y=0,padding:v=0,inner:S}=xT(n,u),[k,E="center"]=h.split(" ");It(()=>{f&&o(0)},[f]);let{refs:C,floatingStyles:_,context:j}=lT({open:f,placement:k==="selection"?E==="center"?"bottom":`bottom-${E}`:E==="center"?`${k}`:`${k}-${E}`,strategy:"absolute",transform:!1,middleware:[xb({mainAxis:k==="selection"?0:p,crossAxis:y}),qN({padding:v}),k!=="selection"&&YN({padding:v}),k==="selection"&&S?cT({...S,padding:v,overflowRef:l,offset:i,minItemsVisible:nx,referenceOverflowThreshold:v,onFallbackChange(D){var H,W;if(!D)return;let G=j.elements.floating;if(!G)return;let $=parseFloat(getComputedStyle(G).scrollPaddingBottom)||0,Y=Math.min(nx,G.childElementCount),re=0,O=0;for(let ee of(W=(H=j.elements.floating)==null?void 0:H.childNodes)!=null?W:[])if(Xn(ee)){let T=ee.offsetTop,U=T+ee.clientHeight+$,te=G.scrollTop,A=te+G.clientHeight;if(T>=te&&U<=A)Y--;else{O=Math.max(0,Math.min(U,A)-Math.max(T,te)),re=ee.clientHeight;break}}Y>=1&&o(ee=>{let T=re*Y-O+$;return ee>=T?ee:T})}}):null,GN({padding:v,apply({availableWidth:D,availableHeight:H,elements:W}){Object.assign(W.floating.style,{overflow:"auto",maxWidth:`${D}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${H}px)`})}})].filter(Boolean),whileElementsMounted:LN}),[I=k,M=E]=j.placement.split("-");k==="selection"&&(I="selection");let P=w.useMemo(()=>({anchor:[I,M].filter(Boolean).join(" ")}),[I,M]),z=dT(j,{overflowRef:l,onChange:o}),{getReferenceProps:ne,getFloatingProps:Z}=uT([z]),R=et(D=>{c(D),C.setFloating(D)});return w.createElement(Vp.Provider,{value:r},w.createElement(Lo.Provider,{value:{setFloating:R,setReference:C.setReference,styles:_,getReferenceProps:ne,getFloatingProps:Z,slot:P}},e))}function vT(e){It(()=>{if(!e)return;let t=new MutationObserver(()=>{let n=window.getComputedStyle(e).maxHeight,r=parseFloat(n);if(isNaN(r))return;let i=parseInt(n);isNaN(i)||r!==i&&(e.style.maxHeight=`${Math.ceil(r)}px`)});return t.observe(e,{attributes:!0,attributeFilter:["style"]}),()=>{t.disconnect()}},[e])}function xT(e,t){var n,r,i;let o=Jf((n=e==null?void 0:e.gap)!=null?n:"var(--anchor-gap, 0)",t),l=Jf((r=e==null?void 0:e.offset)!=null?r:"var(--anchor-offset, 0)",t),u=Jf((i=e==null?void 0:e.padding)!=null?i:"var(--anchor-padding, 0)",t);return{...e,gap:o,offset:l,padding:u}}function Jf(e,t,n=void 0){let r=Cs(),i=et((c,f)=>{if(c==null)return[n,null];if(typeof c=="number")return[c,null];if(typeof c=="string"){if(!f)return[n,null];let h=rx(c,f);return[h,p=>{let y=kb(c);{let v=y.map(S=>window.getComputedStyle(f).getPropertyValue(S));r.requestAnimationFrame(function S(){r.nextFrame(S);let k=!1;for(let[C,_]of y.entries()){let j=window.getComputedStyle(f).getPropertyValue(_);if(v[C]!==j){v[C]=j,k=!0;break}}if(!k)return;let E=rx(c,f);h!==E&&(p(E),h=E)})}return r.dispose}]}return[n,null]}),o=w.useMemo(()=>i(e,t)[0],[e,t]),[l=o,u]=w.useState();return It(()=>{let[c,f]=i(e,t);if(u(c),!!f)return f(u)},[e,t]),l}function kb(e){let t=/var\((.*)\)/.exec(e);if(t){let n=t[1].indexOf(",");if(n===-1)return[t[1]];let r=t[1].slice(0,n).trim(),i=t[1].slice(n+1).trim();return i?[r,...kb(i)]:[r]}return[]}function rx(e,t){let n=document.createElement("div");t.appendChild(n),n.style.setProperty("margin-top","0px","important"),n.style.setProperty("margin-top",e,"important");let r=parseFloat(window.getComputedStyle(n).marginTop)||0;return t.removeChild(n),r}let Oc=w.createContext(null);Oc.displayName="OpenClosedContext";var _n=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(_n||{});function dl(){return w.useContext(Oc)}function Sb({value:e,children:t}){return Me.createElement(Oc.Provider,{value:e},t)}function wT({children:e}){return Me.createElement(Oc.Provider,{value:null},e)}function bT(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Pi=[];bT(()=>{function e(t){if(!Mr(t.target)||t.target===document.body||Pi[0]===t.target)return;let n=t.target;n=n.closest(ic),Pi.unshift(n??t.target),Pi=Pi.filter(r=>r!=null&&r.isConnected),Pi.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function kT(e){throw new Error("Unexpected object: "+e)}var qt=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(qt||{});function Iu(e,t){let n=t.resolveItems();if(n.length<=0)return null;let r=t.resolveActiveIndex(),i=r??-1;switch(e.focus){case 0:{for(let o=0;o<n.length;++o)if(!t.resolveDisabled(n[o],o,n))return o;return r}case 1:{i===-1&&(i=n.length);for(let o=i-1;o>=0;--o)if(!t.resolveDisabled(n[o],o,n))return o;return r}case 2:{for(let o=i+1;o<n.length;++o)if(!t.resolveDisabled(n[o],o,n))return o;return r}case 3:{for(let o=n.length-1;o>=0;--o)if(!t.resolveDisabled(n[o],o,n))return o;return r}case 4:{for(let o=0;o<n.length;++o)if(t.resolveId(n[o],o,n)===e.id)return o;return r}case 5:return null;default:kT(e)}}function qp(e){let t=et(e),n=w.useRef(!1);w.useEffect(()=>(n.current=!1,()=>{n.current=!0,Cc(()=>{n.current&&t()})}),[t])}let Eb=w.createContext(!1);function ST(){return w.useContext(Eb)}function ix(e){return Me.createElement(Eb.Provider,{value:e.force},e.children)}function ET(e){let t=ST(),n=w.useContext(Cb),[r,i]=w.useState(()=>{var o;if(!t&&n!==null)return(o=n.current)!=null?o:null;if(Dr.isServer)return null;let l=e==null?void 0:e.getElementById("headlessui-portal-root");if(l)return l;if(e===null)return null;let u=e.createElement("div");return u.setAttribute("id","headlessui-portal-root"),e.body.appendChild(u)});return w.useEffect(()=>{r!==null&&(e!=null&&e.body.contains(r)||e==null||e.body.appendChild(r))},[r,e]),w.useEffect(()=>{t||n!==null&&i(n.current)},[n,i,t]),r}let _b=w.Fragment,_T=$t(function(e,t){let{ownerDocument:n=null,...r}=e,i=w.useRef(null),o=Cn(JC(y=>{i.current=y}),t),l=Qa(i.current),u=n??l,c=ET(u),f=w.useContext(Kh),h=Cs(),p=Gt();return qp(()=>{var y;c&&c.childNodes.length<=0&&((y=c.parentElement)==null||y.removeChild(c))}),c?Kn.createPortal(Me.createElement("div",{"data-headlessui-portal":"",ref:y=>{h.dispose(),f&&y&&h.add(f.register(y))}},p({ourProps:{ref:o},theirProps:r,slot:{},defaultTag:_b,name:"Portal"})),c):null});function CT(e,t){let n=Cn(t),{enabled:r=!0,ownerDocument:i,...o}=e,l=Gt();return r?Me.createElement(_T,{...o,ownerDocument:i,ref:n}):l({ourProps:{ref:n},theirProps:o,slot:{},defaultTag:_b,name:"Portal"})}let jT=w.Fragment,Cb=w.createContext(null);function NT(e,t){let{target:n,...r}=e,i={ref:Cn(t)},o=Gt();return Me.createElement(Cb.Provider,{value:n},o({ourProps:i,theirProps:r,defaultTag:jT,name:"Popover.Group"}))}let Kh=w.createContext(null);function TT(){let e=w.useContext(Kh),t=w.useRef([]),n=et(o=>(t.current.push(o),e&&e.register(o),()=>r(o))),r=et(o=>{let l=t.current.indexOf(o);l!==-1&&t.current.splice(l,1),e&&e.unregister(o)}),i=w.useMemo(()=>({register:n,unregister:r,portals:t}),[n,r,t]);return[t,w.useMemo(()=>function({children:o}){return Me.createElement(Kh.Provider,{value:i},o)},[i])]}let IT=$t(CT),jb=$t(NT),Nb=Object.assign(IT,{Group:jb});const Hu={Idle:{kind:"Idle"},Tracked:e=>({kind:"Tracked",position:e}),Moved:{kind:"Moved"}};function Tb(e){let t=e.getBoundingClientRect();return`${t.x},${t.y}`}function PT(e,t,n){let r=Ln();if(t.kind==="Tracked"){let i=function(){o!==Tb(e)&&(r.dispose(),n())},{position:o}=t,l=new ResizeObserver(i);l.observe(e),r.add(()=>l.disconnect()),r.addEventListener(window,"scroll",i,{passive:!0}),r.addEventListener(window,"resize",i)}return()=>r.dispose()}function AT(e,t=typeof document<"u"?document.defaultView:null,n){let r=ll(e,"escape");rb(t,"keydown",i=>{r&&(i.defaultPrevented||i.key===on.Escape&&n(i))})}function RT(){var e;let[t]=w.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,r]=w.useState((e=t==null?void 0:t.matches)!=null?e:!1);return It(()=>{if(!t)return;function i(o){r(o.matches)}return t.addEventListener("change",i),()=>t.removeEventListener("change",i)},[t]),n}function OT({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let r=et(()=>{var i,o;let l=_s(n),u=[];for(let c of e)c!==null&&(ti(c)?u.push(c):"current"in c&&ti(c.current)&&u.push(c.current));if(t!=null&&t.current)for(let c of t.current)u.push(c);for(let c of(i=l==null?void 0:l.querySelectorAll("html > *, body > *"))!=null?i:[])c!==document.body&&c!==document.head&&ti(c)&&c.id!=="headlessui-portal-root"&&(n&&(c.contains(n)||c.contains((o=n==null?void 0:n.getRootNode())==null?void 0:o.host))||u.some(f=>c.contains(f))||u.push(c));return u});return{resolveContainers:r,contains:et(i=>r().some(o=>o.contains(i)))}}let Ib=w.createContext(null);function sx({children:e,node:t}){let[n,r]=w.useState(null),i=Pb(t??n);return Me.createElement(Ib.Provider,{value:i},e,i===null&&Me.createElement(Wh,{features:rc.Hidden,ref:o=>{var l,u;if(o){for(let c of(u=(l=_s(o))==null?void 0:l.querySelectorAll("html > *, body > *"))!=null?u:[])if(c!==document.body&&c!==document.head&&ti(c)&&c!=null&&c.contains(o)){r(c);break}}}}))}function Pb(e=null){var t;return(t=w.useContext(Ib))!=null?t:e}function MT(){let e=typeof document>"u";return"useSyncExternalStore"in Xu?(t=>t.useSyncExternalStore)(Xu)(()=>()=>{},()=>!1,()=>!e):!1}function Mc(){let e=MT(),[t,n]=w.useState(Dr.isHandoffComplete);return t&&Dr.isHandoffComplete===!1&&n(!1),w.useEffect(()=>{t!==!0&&n(!0)},[t]),w.useEffect(()=>Dr.handoff(),[]),e?!1:t}function Yp(){let e=w.useRef(!1);return It(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var Pa=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Pa||{});function DT(){let e=w.useRef(0);return tb(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function Ab(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)ti(n.current)&&t.add(n.current);return t}let LT="div";var ds=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(ds||{});function $T(e,t){let n=w.useRef(null),r=Cn(n,t),{initialFocus:i,initialFocusFallback:o,containers:l,features:u=15,...c}=e;Mc()||(u=0);let f=Qa(n.current);UT(u,{ownerDocument:f});let h=WT(u,{ownerDocument:f,container:n,initialFocus:i,initialFocusFallback:o});HT(u,{ownerDocument:f,container:n,containers:l,previousActiveElement:h});let p=DT(),y=et(_=>{if(!Xn(n.current))return;let j=n.current;(I=>I())(()=>{Er(p.current,{[Pa.Forwards]:()=>{wo(j,kr.First,{skipElements:[_.relatedTarget,o]})},[Pa.Backwards]:()=>{wo(j,kr.Last,{skipElements:[_.relatedTarget,o]})}})})}),v=ll(!!(u&2),"focus-trap#tab-lock"),S=Cs(),k=w.useRef(!1),E={ref:r,onKeyDown(_){_.key=="Tab"&&(k.current=!0,S.requestAnimationFrame(()=>{k.current=!1}))},onBlur(_){if(!(u&4))return;let j=Ab(l);Xn(n.current)&&j.add(n.current);let I=_.relatedTarget;Mr(I)&&I.dataset.headlessuiFocusGuard!=="true"&&(Rb(j,I)||(k.current?wo(n.current,Er(p.current,{[Pa.Forwards]:()=>kr.Next,[Pa.Backwards]:()=>kr.Previous})|kr.WrapAround,{relativeTo:_.target}):Mr(_.target)&&Lr(_.target)))}},C=Gt();return Me.createElement(Me.Fragment,null,v&&Me.createElement(Wh,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:y,features:rc.Focusable}),C({ourProps:E,theirProps:c,defaultTag:LT,name:"FocusTrap"}),v&&Me.createElement(Wh,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:y,features:rc.Focusable}))}let FT=$t($T),zT=Object.assign(FT,{features:ds});function BT(e=!0){let t=w.useRef(Pi.slice());return Bp(([n],[r])=>{r===!0&&n===!1&&Cc(()=>{t.current.splice(0)}),r===!1&&n===!0&&(t.current=Pi.slice())},[e,Pi,t]),et(()=>{var n;return(n=t.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function UT(e,{ownerDocument:t}){let n=!!(e&8),r=BT(n);Bp(()=>{n||Pw(t==null?void 0:t.body)&&Lr(r())},[n]),qp(()=>{n&&Lr(r())})}function WT(e,{ownerDocument:t,container:n,initialFocus:r,initialFocusFallback:i}){let o=w.useRef(null),l=ll(!!(e&1),"focus-trap#initial-focus"),u=Yp();return Bp(()=>{if(e===0)return;if(!l){i!=null&&i.current&&Lr(i.current);return}let c=n.current;c&&Cc(()=>{if(!u.current)return;let f=t==null?void 0:t.activeElement;if(r!=null&&r.current){if((r==null?void 0:r.current)===f){o.current=f;return}}else if(c.contains(f)){o.current=f;return}if(r!=null&&r.current)Lr(r.current);else{if(e&16){if(wo(c,kr.First|kr.AutoFocus)!==Vh.Error)return}else if(wo(c,kr.First)!==Vh.Error)return;if(i!=null&&i.current&&(Lr(i.current),(t==null?void 0:t.activeElement)===i.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}o.current=t==null?void 0:t.activeElement})},[i,l,e]),o}function HT(e,{ownerDocument:t,container:n,containers:r,previousActiveElement:i}){let o=Yp(),l=!!(e&4);rb(t==null?void 0:t.defaultView,"focus",u=>{if(!l||!o.current)return;let c=Ab(r);Xn(n.current)&&c.add(n.current);let f=i.current;if(!f)return;let h=u.target;Xn(h)?Rb(c,h)?(i.current=h,Lr(h)):(u.preventDefault(),u.stopPropagation(),Lr(f)):Lr(i.current)},!0)}function Rb(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function Ob(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||!Da((t=e.as)!=null?t:Db)||Me.Children.count(e.children)===1}let Dc=w.createContext(null);Dc.displayName="TransitionContext";var VT=(e=>(e.Visible="visible",e.Hidden="hidden",e))(VT||{});function qT(){let e=w.useContext(Dc);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function YT(){let e=w.useContext(Lc);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let Lc=w.createContext(null);Lc.displayName="NestingContext";function $c(e){return"children"in e?$c(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function Mb(e,t){let n=js(e),r=w.useRef([]),i=Yp(),o=Cs(),l=et((v,S=Mi.Hidden)=>{let k=r.current.findIndex(({el:E})=>E===v);k!==-1&&(Er(S,{[Mi.Unmount](){r.current.splice(k,1)},[Mi.Hidden](){r.current[k].state="hidden"}}),o.microTask(()=>{var E;!$c(r)&&i.current&&((E=n.current)==null||E.call(n))}))}),u=et(v=>{let S=r.current.find(({el:k})=>k===v);return S?S.state!=="visible"&&(S.state="visible"):r.current.push({el:v,state:"visible"}),()=>l(v,Mi.Unmount)}),c=w.useRef([]),f=w.useRef(Promise.resolve()),h=w.useRef({enter:[],leave:[]}),p=et((v,S,k)=>{c.current.splice(0),t&&(t.chains.current[S]=t.chains.current[S].filter(([E])=>E!==v)),t==null||t.chains.current[S].push([v,new Promise(E=>{c.current.push(E)})]),t==null||t.chains.current[S].push([v,new Promise(E=>{Promise.all(h.current[S].map(([C,_])=>_)).then(()=>E())})]),S==="enter"?f.current=f.current.then(()=>t==null?void 0:t.wait.current).then(()=>k(S)):k(S)}),y=et((v,S,k)=>{Promise.all(h.current[S].splice(0).map(([E,C])=>C)).then(()=>{var E;(E=c.current.shift())==null||E()}).then(()=>k(S))});return w.useMemo(()=>({children:r,register:u,unregister:l,onStart:p,onStop:y,wait:f,chains:h}),[u,l,r,p,y,h,f])}let Db=w.Fragment,Lb=jo.RenderStrategy;function GT(e,t){var n,r;let{transition:i=!0,beforeEnter:o,afterEnter:l,beforeLeave:u,afterLeave:c,enter:f,enterFrom:h,enterTo:p,entered:y,leave:v,leaveFrom:S,leaveTo:k,...E}=e,[C,_]=w.useState(null),j=w.useRef(null),I=Ob(e),M=Cn(...I?[j,t,_]:t===null?[]:[t]),P=(n=E.unmount)==null||n?Mi.Unmount:Mi.Hidden,{show:z,appear:ne,initial:Z}=qT(),[R,D]=w.useState(z?"visible":"hidden"),H=YT(),{register:W,unregister:G}=H;It(()=>W(j),[W,j]),It(()=>{if(P===Mi.Hidden&&j.current){if(z&&R!=="visible"){D("visible");return}return Er(R,{hidden:()=>G(j),visible:()=>W(j)})}},[R,j,W,G,z,P]);let $=Mc();It(()=>{if(I&&$&&R==="visible"&&j.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[j,R,$,I]);let Y=Z&&!ne,re=ne&&z&&Z,O=w.useRef(!1),ee=Mb(()=>{O.current||(D("hidden"),G(j))},H),T=et(de=>{O.current=!0;let Ne=de?"enter":"leave";ee.onStart(j,Ne,Ae=>{Ae==="enter"?o==null||o():Ae==="leave"&&(u==null||u())})}),U=et(de=>{let Ne=de?"enter":"leave";O.current=!1,ee.onStop(j,Ne,Ae=>{Ae==="enter"?l==null||l():Ae==="leave"&&(c==null||c())}),Ne==="leave"&&!$c(ee)&&(D("hidden"),G(j))});w.useEffect(()=>{I&&i||(T(z),U(z))},[z,I,i]);let te=!(!i||!I||!$||Y),[,A]=ob(te,C,z,{start:T,end:U}),we=as({ref:M,className:((r=Uh(E.className,re&&f,re&&h,A.enter&&f,A.enter&&A.closed&&h,A.enter&&!A.closed&&p,A.leave&&v,A.leave&&!A.closed&&S,A.leave&&A.closed&&k,!A.transition&&z&&y))==null?void 0:r.trim())||void 0,...sb(A)}),he=0;R==="visible"&&(he|=_n.Open),R==="hidden"&&(he|=_n.Closed),z&&R==="hidden"&&(he|=_n.Opening),!z&&R==="visible"&&(he|=_n.Closing);let me=Gt();return Me.createElement(Lc.Provider,{value:ee},Me.createElement(Sb,{value:he},me({ourProps:we,theirProps:E,defaultTag:Db,features:Lb,visible:R==="visible",name:"Transition.Child"})))}function KT(e,t){let{show:n,appear:r=!1,unmount:i=!0,...o}=e,l=w.useRef(null),u=Ob(e),c=Cn(...u?[l,t]:t===null?[]:[t]);Mc();let f=dl();if(n===void 0&&f!==null&&(n=(f&_n.Open)===_n.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[h,p]=w.useState(n?"visible":"hidden"),y=Mb(()=>{n||p("hidden")}),[v,S]=w.useState(!0),k=w.useRef([n]);It(()=>{v!==!1&&k.current[k.current.length-1]!==n&&(k.current.push(n),S(!1))},[k,n]);let E=w.useMemo(()=>({show:n,appear:r,initial:v}),[n,r,v]);It(()=>{n?p("visible"):!$c(y)&&l.current!==null&&p("hidden")},[n,y]);let C={unmount:i},_=et(()=>{var M;v&&S(!1),(M=e.beforeEnter)==null||M.call(e)}),j=et(()=>{var M;v&&S(!1),(M=e.beforeLeave)==null||M.call(e)}),I=Gt();return Me.createElement(Lc.Provider,{value:y},Me.createElement(Dc.Provider,{value:E},I({ourProps:{...C,as:w.Fragment,children:Me.createElement($b,{ref:c,...C,...o,beforeEnter:_,beforeLeave:j})},theirProps:{},defaultTag:w.Fragment,features:Lb,visible:h==="visible",name:"Transition"})))}function JT(e,t){let n=w.useContext(Dc)!==null,r=dl()!==null;return Me.createElement(Me.Fragment,null,!n&&r?Me.createElement(Jh,{ref:t,...e}):Me.createElement($b,{ref:t,...e}))}let Jh=$t(KT),$b=$t(GT),Gp=$t(JT),Fb=Object.assign(Jh,{Child:Gp,Root:Jh});var QT=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(QT||{}),XT=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(XT||{});let ZT={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},Kp=w.createContext(null);Kp.displayName="DialogContext";function Fc(e){let t=w.useContext(Kp);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Fc),n}return t}function eI(e,t){return Er(t.type,ZT,e,t)}let ox=$t(function(e,t){let n=w.useId(),{id:r=`headlessui-dialog-${n}`,open:i,onClose:o,initialFocus:l,role:u="dialog",autoFocus:c=!0,__demoMode:f=!1,unmount:h=!1,...p}=e,y=w.useRef(!1);u=(function(){return u==="dialog"||u==="alertdialog"?u:(y.current||(y.current=!0,console.warn(`Invalid role [${u}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")})();let v=dl();i===void 0&&v!==null&&(i=(v&_n.Open)===_n.Open);let S=w.useRef(null),k=Cn(S,t),E=Qa(S.current),C=i?0:1,[_,j]=w.useReducer(eI,{titleId:null,descriptionId:null,panelRef:w.createRef()}),I=et(()=>o(!1)),M=et(A=>j({type:0,id:A})),P=Mc()?C===0:!1,[z,ne]=TT(),Z={get current(){var A;return(A=_.panelRef.current)!=null?A:S.current}},R=Pb(),{resolveContainers:D}=OT({mainTreeNode:R,portals:z,defaultContainers:[Z]}),H=v!==null?(v&_n.Closing)===_n.Closing:!1;Kw(f||H?!1:P,{allowed:et(()=>{var A,we;return[(we=(A=S.current)==null?void 0:A.closest("[data-headlessui-portal]"))!=null?we:null]}),disallowed:et(()=>{var A;return[(A=R==null?void 0:R.closest("body > *:not(#headlessui-portal-root)"))!=null?A:null]})});let W=Nc.get(null);It(()=>{if(P)return W.actions.push(r),()=>W.actions.pop(r)},[W,r,P]);let G=dr(W,w.useCallback(A=>W.selectors.isTop(A,r),[W,r]));nb(G,D,A=>{A.preventDefault(),I()}),AT(G,E==null?void 0:E.defaultView,A=>{A.preventDefault(),A.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),I()}),ib(f||H?!1:P,E,D),Jw(P,S,I);let[$,Y]=zw(),re=w.useMemo(()=>[{dialogState:C,close:I,setTitleId:M,unmount:h},_],[C,I,M,h,_]),O=Br({open:C===0}),ee={ref:k,id:r,role:u,tabIndex:-1,"aria-modal":f?void 0:C===0?!0:void 0,"aria-labelledby":_.titleId,"aria-describedby":$,unmount:h},T=!RT(),U=ds.None;P&&!f&&(U|=ds.RestoreFocus,U|=ds.TabLock,c&&(U|=ds.AutoFocus),T&&(U|=ds.InitialFocus));let te=Gt();return Me.createElement(wT,null,Me.createElement(ix,{force:!0},Me.createElement(Nb,null,Me.createElement(Kp.Provider,{value:re},Me.createElement(jb,{target:S},Me.createElement(ix,{force:!1},Me.createElement(Y,{slot:O},Me.createElement(ne,null,Me.createElement(zT,{initialFocus:l,initialFocusFallback:S,containers:D,features:U},Me.createElement(oj,{value:I},te({ourProps:ee,theirProps:p,slot:O,defaultTag:tI,features:nI,visible:C===0,name:"Dialog"})))))))))))}),tI="div",nI=jo.RenderStrategy|jo.Static;function rI(e,t){let{transition:n=!1,open:r,...i}=e,o=dl(),l=e.hasOwnProperty("open")||o!==null,u=e.hasOwnProperty("onClose");if(!l&&!u)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!l)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!u)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!o&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(r!==void 0||n)&&!i.static?Me.createElement(sx,null,Me.createElement(Fb,{show:r,transition:n,unmount:i.unmount},Me.createElement(ox,{ref:t,...i}))):Me.createElement(sx,null,Me.createElement(ox,{ref:t,open:r,...i}))}let iI="div";function sI(e,t){let n=w.useId(),{id:r=`headlessui-dialog-panel-${n}`,transition:i=!1,...o}=e,[{dialogState:l,unmount:u},c]=Fc("Dialog.Panel"),f=Cn(t,c.panelRef),h=Br({open:l===0}),p=et(E=>{E.stopPropagation()}),y={ref:f,id:r,onClick:p},v=i?Gp:w.Fragment,S=i?{unmount:u}:{},k=Gt();return Me.createElement(v,{...S},k({ourProps:y,theirProps:o,slot:h,defaultTag:iI,name:"Dialog.Panel"}))}let oI="div";function aI(e,t){let{transition:n=!1,...r}=e,[{dialogState:i,unmount:o}]=Fc("Dialog.Backdrop"),l=Br({open:i===0}),u={ref:t,"aria-hidden":!0},c=n?Gp:w.Fragment,f=n?{unmount:o}:{},h=Gt();return Me.createElement(c,{...f},h({ourProps:u,theirProps:r,slot:l,defaultTag:oI,name:"Dialog.Backdrop"}))}let lI="h2";function uI(e,t){let n=w.useId(),{id:r=`headlessui-dialog-title-${n}`,...i}=e,[{dialogState:o,setTitleId:l}]=Fc("Dialog.Title"),u=Cn(t);w.useEffect(()=>(l(r),()=>l(null)),[r,l]);let c=Br({open:o===0}),f={ref:u,id:r};return Gt()({ourProps:f,theirProps:i,slot:c,defaultTag:lI,name:"Dialog.Title"})}let cI=$t(rI),dI=$t(sI);$t(aI);let fI=$t(uI),ax=Object.assign(cI,{Panel:dI,Title:fI,Description:ej}),lx=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function ux(e){var t,n;let r=(t=e.innerText)!=null?t:"",i=e.cloneNode(!0);if(!Xn(i))return r;let o=!1;for(let u of i.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))u.remove(),o=!0;let l=o?(n=i.innerText)!=null?n:"":r;return lx.test(l)&&(l=l.replace(lx,"")),l}function hI(e){let t=e.getAttribute("aria-label");if(typeof t=="string")return t.trim();let n=e.getAttribute("aria-labelledby");if(n){let r=n.split(" ").map(i=>{let o=document.getElementById(i);if(o){let l=o.getAttribute("aria-label");return typeof l=="string"?l.trim():ux(o).trim()}return null}).filter(Boolean);if(r.length>0)return r.join(", ")}return ux(e).trim()}function pI(e){let t=w.useRef(""),n=w.useRef("");return et(()=>{let r=e.current;if(!r)return"";let i=r.innerText;if(t.current===i)return n.current;let o=hI(r).trim().toLowerCase();return t.current=i,n.current=o,o})}var mI=Object.defineProperty,gI=(e,t,n)=>t in e?mI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cx=(e,t,n)=>(gI(e,typeof t!="symbol"?t+"":t,n),n),yn=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(yn||{}),lc=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(lc||{}),St=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItems=5]="RegisterItems",e[e.UnregisterItems=6]="UnregisterItems",e[e.SetButtonElement=7]="SetButtonElement",e[e.SetItemsElement=8]="SetItemsElement",e[e.SortItems=9]="SortItems",e[e.MarkButtonAsMoved=10]="MarkButtonAsMoved",e))(St||{});function dx(e,t=n=>n){let n=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,r=Zw(t(e.items.slice()),o=>o.dataRef.current.domRef.current),i=n?r.indexOf(n):null;return i===-1&&(i=null),{items:r,activeItemIndex:i}}let yI={1(e){if(e.menuState===1)return e;let t=e.buttonElement?Hu.Tracked(Tb(e.buttonElement)):e.buttonPositionState;return{...e,activeItemIndex:null,pendingFocus:{focus:qt.Nothing},menuState:1,buttonPositionState:t}},0(e,t){return e.menuState===0?e:{...e,__demoMode:!1,pendingFocus:t.focus,menuState:0,buttonPositionState:Hu.Idle}},2:(e,t)=>{var n,r,i,o,l;if(e.menuState===1)return e;let u={...e,searchQuery:"",activationTrigger:(n=t.trigger)!=null?n:1,__demoMode:!1};if(t.focus===qt.Nothing)return{...u,activeItemIndex:null};if(t.focus===qt.Specific)return{...u,activeItemIndex:e.items.findIndex(h=>h.id===t.id)};if(t.focus===qt.Previous){let h=e.activeItemIndex;if(h!==null){let p=e.items[h].dataRef.current.domRef,y=Iu(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:v=>v.id,resolveDisabled:v=>v.dataRef.current.disabled});if(y!==null){let v=e.items[y].dataRef.current.domRef;if(((r=p.current)==null?void 0:r.previousElementSibling)===v.current||((i=v.current)==null?void 0:i.previousElementSibling)===null)return{...u,activeItemIndex:y}}}}else if(t.focus===qt.Next){let h=e.activeItemIndex;if(h!==null){let p=e.items[h].dataRef.current.domRef,y=Iu(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:v=>v.id,resolveDisabled:v=>v.dataRef.current.disabled});if(y!==null){let v=e.items[y].dataRef.current.domRef;if(((o=p.current)==null?void 0:o.nextElementSibling)===v.current||((l=v.current)==null?void 0:l.nextElementSibling)===null)return{...u,activeItemIndex:y}}}}let c=dx(e),f=Iu(t,{resolveItems:()=>c.items,resolveActiveIndex:()=>c.activeItemIndex,resolveId:h=>h.id,resolveDisabled:h=>h.dataRef.current.disabled});return{...u,...c,activeItemIndex:f}},3:(e,t)=>{let n=e.searchQuery!==""?0:1,r=e.searchQuery+t.value.toLowerCase(),i=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+n).concat(e.items.slice(0,e.activeItemIndex+n)):e.items).find(l=>{var u;return((u=l.dataRef.current.textValue)==null?void 0:u.startsWith(r))&&!l.dataRef.current.disabled}),o=i?e.items.indexOf(i):-1;return o===-1||o===e.activeItemIndex?{...e,searchQuery:r}:{...e,searchQuery:r,activeItemIndex:o,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,t)=>{let n=e.items.concat(t.items.map(i=>i)),r=e.activeItemIndex;return e.pendingFocus.focus!==qt.Nothing&&(r=Iu(e.pendingFocus,{resolveItems:()=>n,resolveActiveIndex:()=>e.activeItemIndex,resolveId:i=>i.id,resolveDisabled:i=>i.dataRef.current.disabled})),{...e,items:n,activeItemIndex:r,pendingFocus:{focus:qt.Nothing},pendingShouldSort:!0}},6:(e,t)=>{let n=e.items,r=[],i=new Set(t.items);for(let[o,l]of n.entries())if(i.has(l.id)&&(r.push(o),i.delete(l.id),i.size===0))break;if(r.length>0){n=n.slice();for(let o of r.reverse())n.splice(o,1)}return{...e,items:n,activationTrigger:1}},7:(e,t)=>e.buttonElement===t.element?e:{...e,buttonElement:t.element},8:(e,t)=>e.itemsElement===t.element?e:{...e,itemsElement:t.element},9:e=>e.pendingShouldSort?{...e,...dx(e),pendingShouldSort:!1}:e,10(e){return e.buttonPositionState.kind!=="Tracked"?e:{...e,buttonPositionState:Hu.Moved}}};class Jp extends Vw{constructor(t){super(t),cx(this,"actions",{registerItem:Tv(()=>{let n=[],r=new Set;return[(i,o)=>{r.has(o)||(r.add(o),n.push({id:i,dataRef:o}))},()=>(r.clear(),this.send({type:5,items:n.splice(0)}))]}),unregisterItem:Tv(()=>{let n=[];return[r=>n.push(r),()=>this.send({type:6,items:n.splice(0)})]})}),cx(this,"selectors",{activeDescendantId(n){var r;let i=n.activeItemIndex,o=n.items;return i===null||(r=o[i])==null?void 0:r.id},isActive(n,r){var i;let o=n.activeItemIndex,l=n.items;return o!==null?((i=l[o])==null?void 0:i.id)===r:!1},shouldScrollIntoView(n,r){return n.__demoMode||n.menuState!==0||n.activationTrigger===0?!1:this.isActive(n,r)},didButtonMove(n){return n.buttonPositionState.kind==="Moved"}}),this.on(5,()=>{this.disposables.requestAnimationFrame(()=>{this.send({type:9})})});{let n=this.state.id,r=Nc.get(null);this.disposables.add(r.on(Yw.Push,i=>{!r.selectors.isTop(i,n)&&this.state.menuState===0&&this.send({type:1})})),this.on(0,()=>r.actions.push(n)),this.on(1,()=>r.actions.pop(n))}this.disposables.group(n=>{this.on(1,r=>{r.buttonElement&&(n.dispose(),n.add(PT(r.buttonElement,r.buttonPositionState,()=>{this.send({type:10})})))})})}static new({id:t,__demoMode:n=!1}){return new Jp({id:t,__demoMode:n,menuState:n?0:1,buttonElement:null,itemsElement:null,items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1,pendingShouldSort:!1,pendingFocus:{focus:qt.Nothing},buttonPositionState:Hu.Idle})}reduce(t,n){return Er(n.type,yI,t,n)}}const zb=w.createContext(null);function Qp(e){let t=w.useContext(zb);if(t===null){let n=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Bb),n}return t}function Bb({id:e,__demoMode:t=!1}){let n=w.useMemo(()=>Jp.new({id:e,__demoMode:t}),[]);return qp(()=>n.dispose()),n}let vI=w.Fragment;function xI(e,t){let n=w.useId(),{__demoMode:r=!1,...i}=e,o=Bb({id:n,__demoMode:r}),[l,u,c]=dr(o,E=>[E.menuState,E.itemsElement,E.buttonElement]),f=Cn(t),h=Nc.get(null),p=dr(h,w.useCallback(E=>h.selectors.isTop(E,n),[h,n]));nb(p,[c,u],(E,C)=>{var _;o.send({type:St.CloseMenu}),zp(C,Fp.Loose)||(E.preventDefault(),(_=o.state.buttonElement)==null||_.focus())});let y=et(()=>{o.send({type:St.CloseMenu})}),v=Br({open:l===yn.Open,close:y}),S={ref:f},k=Gt();return Me.createElement(yT,null,Me.createElement(zb.Provider,{value:o},Me.createElement(Sb,{value:Er(l,{[yn.Open]:_n.Open,[yn.Closed]:_n.Closed})},k({ourProps:S,theirProps:i,slot:v,defaultTag:vI,name:"Menu"}))))}let wI="button";function bI(e,t){let n=Qp("Menu.Button"),r=w.useId(),{id:i=`headlessui-menu-button-${r}`,disabled:o=!1,autoFocus:l=!1,...u}=e,c=w.useRef(null),f=pT(),h=Cn(t,c,hT(),et(R=>n.send({type:St.SetButtonElement,element:R}))),p=et(R=>{switch(R.key){case on.Space:case on.Enter:case on.ArrowDown:R.preventDefault(),R.stopPropagation(),n.send({type:St.OpenMenu,focus:{focus:qt.First}});break;case on.ArrowUp:R.preventDefault(),R.stopPropagation(),n.send({type:St.OpenMenu,focus:{focus:qt.Last}});break}}),y=et(R=>{switch(R.key){case on.Space:R.preventDefault();break}}),[v,S,k]=dr(n,R=>[R.menuState,R.buttonElement,R.itemsElement]),E=v===yn.Open;Ij(E,{trigger:S,action:w.useCallback(R=>{if(S!=null&&S.contains(R.target))return Nu.Ignore;let D=R.target.closest('[role="menuitem"]:not([data-disabled])');return Xn(D)?Nu.Select(D):k!=null&&k.contains(R.target)?Nu.Ignore:Nu.Close},[S,k]),close:w.useCallback(()=>n.send({type:St.CloseMenu}),[]),select:w.useCallback(R=>R.click(),[])});let C=lj(R=>{var D;o||(v===yn.Open?(Kn.flushSync(()=>n.send({type:St.CloseMenu})),(D=c.current)==null||D.focus({preventScroll:!0})):(R.preventDefault(),n.send({type:St.OpenMenu,focus:{focus:qt.Nothing},trigger:lc.Pointer})))}),{isFocusVisible:_,focusProps:j}=NC({autoFocus:l}),{isHovered:I,hoverProps:M}=jC({isDisabled:o}),{pressed:P,pressProps:z}=OC({disabled:o}),ne=Br({open:v===yn.Open,active:P||v===yn.Open,disabled:o,hover:I,focus:_,autofocus:l}),Z=Ow(f(),{ref:h,id:i,type:Pj(e,c.current),"aria-haspopup":"menu","aria-controls":k==null?void 0:k.id,"aria-expanded":v===yn.Open,disabled:o||void 0,autoFocus:l,onKeyDown:p,onKeyUp:y},C,j,M,z);return Gt()({ourProps:Z,theirProps:u,slot:ne,defaultTag:wI,name:"Menu.Button"})}let kI="div",SI=jo.RenderStrategy|jo.Static;function EI(e,t){let n=w.useId(),{id:r=`headlessui-menu-items-${n}`,anchor:i,portal:o=!1,modal:l=!0,transition:u=!1,...c}=e,f=fT(i),h=Qp("Menu.Items"),[p,y]=gT(f),v=mT(),[S,k]=w.useState(null),E=Cn(t,f?p:null,et(O=>h.send({type:St.SetItemsElement,element:O})),k),[C,_]=dr(h,O=>[O.menuState,O.buttonElement]),j=Qa(_),I=Qa(S);f&&(o=!0);let M=dl(),[P,z]=ob(u,S,M!==null?(M&_n.Open)===_n.Open:C===yn.Open);Jw(P,_,()=>{h.send({type:St.CloseMenu})});let ne=dr(h,O=>O.__demoMode),Z=ne?!1:l&&C===yn.Open;ib(Z,I);let R=ne?!1:l&&C===yn.Open;Kw(R,{allowed:w.useCallback(()=>[_,S],[_,S])});let D=dr(h,h.selectors.didButtonMove)?!1:P;w.useEffect(()=>{let O=S;O&&C===yn.Open&&(Pw(O)||O.focus({preventScroll:!0}))},[C,S]),qj(C===yn.Open,{container:S,accept(O){return O.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:O.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(O){O.setAttribute("role","none")}});let H=Cs(),W=et(O=>{var ee,T,U;switch(H.dispose(),O.key){case on.Space:if(h.state.searchQuery!=="")return O.preventDefault(),O.stopPropagation(),h.send({type:St.Search,value:O.key});case on.Enter:if(O.preventDefault(),O.stopPropagation(),h.state.activeItemIndex!==null){let{dataRef:te}=h.state.items[h.state.activeItemIndex];(T=(ee=te.current)==null?void 0:ee.domRef.current)==null||T.click()}h.send({type:St.CloseMenu}),Xw(h.state.buttonElement);break;case on.ArrowDown:return O.preventDefault(),O.stopPropagation(),h.send({type:St.GoToItem,focus:qt.Next});case on.ArrowUp:return O.preventDefault(),O.stopPropagation(),h.send({type:St.GoToItem,focus:qt.Previous});case on.Home:case on.PageUp:return O.preventDefault(),O.stopPropagation(),h.send({type:St.GoToItem,focus:qt.First});case on.End:case on.PageDown:return O.preventDefault(),O.stopPropagation(),h.send({type:St.GoToItem,focus:qt.Last});case on.Escape:O.preventDefault(),O.stopPropagation(),Kn.flushSync(()=>h.send({type:St.CloseMenu})),(U=h.state.buttonElement)==null||U.focus({preventScroll:!0});break;case on.Tab:O.preventDefault(),O.stopPropagation(),Kn.flushSync(()=>h.send({type:St.CloseMenu})),Cj(h.state.buttonElement,O.shiftKey?kr.Previous:kr.Next);break;default:O.key.length===1&&(h.send({type:St.Search,value:O.key}),H.setTimeout(()=>h.send({type:St.ClearSearch}),350));break}}),G=et(O=>{switch(O.key){case on.Space:O.preventDefault();break}}),$=Br({open:C===yn.Open}),Y=Ow(f?v():{},{"aria-activedescendant":dr(h,h.selectors.activeDescendantId),"aria-labelledby":dr(h,O=>{var ee;return(ee=O.buttonElement)==null?void 0:ee.id}),id:r,onKeyDown:W,onKeyUp:G,role:"menu",tabIndex:C===yn.Open?0:void 0,ref:E,style:{...c.style,...y,"--button-width":aj(P,_,!0).width},...sb(z)}),re=Gt();return Me.createElement(Nb,{enabled:o?e.static||P:!1,ownerDocument:j},re({ourProps:Y,theirProps:c,slot:$,defaultTag:kI,features:SI,visible:D,name:"Menu.Items"}))}let _I=w.Fragment;function CI(e,t){let n=w.useId(),{id:r=`headlessui-menu-item-${n}`,disabled:i=!1,...o}=e,l=Qp("Menu.Item"),u=dr(l,D=>l.selectors.isActive(D,r)),c=w.useRef(null),f=Cn(t,c),h=dr(l,D=>l.selectors.shouldScrollIntoView(D,r));It(()=>{if(h)return Ln().requestAnimationFrame(()=>{var D,H;(H=(D=c.current)==null?void 0:D.scrollIntoView)==null||H.call(D,{block:"nearest"})})},[h,c]);let p=pI(c),y=w.useRef({disabled:i,domRef:c,get textValue(){return p()}});It(()=>{y.current.disabled=i},[y,i]),It(()=>(l.actions.registerItem(r,y),()=>l.actions.unregisterItem(r)),[y,r]);let v=et(()=>{l.send({type:St.CloseMenu})}),S=et(D=>{if(i)return D.preventDefault();l.send({type:St.CloseMenu}),Xw(l.state.buttonElement)}),k=et(()=>{if(i)return l.send({type:St.GoToItem,focus:qt.Nothing});l.send({type:St.GoToItem,focus:qt.Specific,id:r})}),E=$j(),C=et(D=>E.update(D)),_=et(D=>{E.wasMoved(D)&&(i||u||l.send({type:St.GoToItem,focus:qt.Specific,id:r,trigger:lc.Pointer}))}),j=et(D=>{E.wasMoved(D)&&(i||u&&l.state.activationTrigger===lc.Pointer&&l.send({type:St.GoToItem,focus:qt.Nothing}))}),[I,M]=Bw(),[P,z]=zw(),ne=Br({active:u,focus:u,disabled:i,close:v}),Z={id:r,ref:f,role:"menuitem",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,"aria-labelledby":I,"aria-describedby":P,disabled:void 0,onClick:S,onFocus:k,onPointerEnter:C,onMouseEnter:C,onPointerMove:_,onMouseMove:_,onPointerLeave:j,onMouseLeave:j},R=Gt();return Me.createElement(M,null,Me.createElement(z,null,R({ourProps:Z,theirProps:o,slot:ne,defaultTag:_I,name:"Menu.Item"})))}let jI="div";function NI(e,t){let[n,r]=Bw(),i=e,o={ref:t,"aria-labelledby":n,role:"group"},l=Gt();return Me.createElement(r,null,l({ourProps:o,theirProps:i,slot:{},defaultTag:jI,name:"Menu.Section"}))}let TI="header";function II(e,t){let n=w.useId(),{id:r=`headlessui-menu-heading-${n}`,...i}=e,o=$p();It(()=>o.register(r),[r,o.register]);let l={id:r,ref:t,role:"presentation",...o.props};return Gt()({ourProps:l,theirProps:i,slot:{},defaultTag:TI,name:"Menu.Heading"})}let PI="div";function AI(e,t){let n=e,r={ref:t,role:"separator"};return Gt()({ourProps:r,theirProps:n,slot:{},defaultTag:PI,name:"Menu.Separator"})}let RI=$t(xI),OI=$t(bI),MI=$t(EI),DI=$t(CI),LI=$t(NI),$I=$t(II),FI=$t(AI),lr=Object.assign(RI,{Button:OI,Items:MI,Item:DI,Section:LI,Heading:$I,Separator:FI});const Ub=w.createContext(void 0);function Ns(){const e=w.useContext(Ub);if(!e)throw new Error("useAuth debe usarse dentro de un AuthProvider");return e}const zI="modulepreload",BI=function(e){return"/sport-planner/"+e},fx={},fl=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let l=function(f){return Promise.all(f.map(h=>Promise.resolve(h).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),c=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));i=l(n.map(f=>{if(f=BI(f),f in fx)return;fx[f]=!0;const h=f.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${p}`))return;const y=document.createElement("link");if(y.rel=h?"stylesheet":zI,h||(y.as="script"),y.crossOrigin="",y.href=f,c&&y.setAttribute("nonce",c),document.head.appendChild(y),h)return new Promise((v,S)=>{y.addEventListener("load",v),y.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return i.then(l=>{for(const u of l||[])u.status==="rejected"&&o(u.reason);return t().catch(o)})},UI=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>fl(async()=>{const{default:r}=await Promise.resolve().then(()=>$o);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class Xp extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class hx extends Xp{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class px extends Xp{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class mx extends Xp{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Qh;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Qh||(Qh={}));var WI=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};class HI{constructor(t,{headers:n={},customFetch:r,region:i=Qh.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=UI(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return WI(this,arguments,void 0,function*(n,r={}){var i;try{const{headers:o,method:l,body:u,signal:c}=r;let f={},{region:h}=r;h||(h=this.region);const p=new URL(`${this.url}/${n}`);h&&h!=="any"&&(f["x-region"]=h,p.searchParams.set("forceFunctionRegion",h));let y;u&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",y=u):typeof u=="string"?(f["Content-Type"]="text/plain",y=u):typeof FormData<"u"&&u instanceof FormData?y=u:(f["Content-Type"]="application/json",y=JSON.stringify(u)));const v=yield this.fetch(p.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),o),body:y,signal:c}).catch(C=>{throw C.name==="AbortError"?C:new hx(C)}),S=v.headers.get("x-relay-error");if(S&&S==="true")throw new px(v);if(!v.ok)throw new mx(v);let k=((i=v.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),E;return k==="application/json"?E=yield v.json():k==="application/octet-stream"?E=yield v.blob():k==="text/event-stream"?E=v:k==="multipart/form-data"?E=yield v.formData():E=yield v.text(),{data:E,error:null,response:v}}catch(o){return o instanceof Error&&o.name==="AbortError"?{data:null,error:new hx(o)}:{data:null,error:o,response:o instanceof mx||o instanceof px?o.context:void 0}}})}}var sn={},Zs={},eo={},to={},no={},ro={},VI=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},To=VI();const qI=To.fetch,Wb=To.fetch.bind(To),Hb=To.Headers,YI=To.Request,GI=To.Response,$o=Object.freeze(Object.defineProperty({__proto__:null,Headers:Hb,Request:YI,Response:GI,default:Wb,fetch:qI},Symbol.toStringTag,{value:"Module"})),KI=HE($o);var Pu={},gx;function Vb(){if(gx)return Pu;gx=1,Object.defineProperty(Pu,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Pu.default=e,Pu}var yx;function qb(){if(yx)return ro;yx=1;var e=ro&&ro.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ro,"__esModule",{value:!0});const t=e(KI),n=e(Vb());class r{constructor(o){var l,u;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(l=o.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=o.signal,this.isMaybeSingle=(u=o.isMaybeSingle)!==null&&u!==void 0?u:!1,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,l){return this.headers=new Headers(this.headers),this.headers.set(o,l),this}then(o,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let c=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var h,p,y,v;let S=null,k=null,E=null,C=f.status,_=f.statusText;if(f.ok){if(this.method!=="HEAD"){const P=await f.text();P===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((h=this.headers.get("Accept"))===null||h===void 0)&&h.includes("application/vnd.pgrst.plan+text"))?k=P:k=JSON.parse(P))}const I=(p=this.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),M=(y=f.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");I&&M&&M.length>1&&(E=parseInt(M[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(k)&&(k.length>1?(S={code:"PGRST116",details:`Results contain ${k.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},k=null,E=null,C=406,_="Not Acceptable"):k.length===1?k=k[0]:k=null)}else{const I=await f.text();try{S=JSON.parse(I),Array.isArray(S)&&f.status===404&&(k=[],S=null,C=200,_="OK")}catch{f.status===404&&I===""?(C=204,_="No Content"):S={message:I}}if(S&&this.isMaybeSingle&&(!((v=S==null?void 0:S.details)===null||v===void 0)&&v.includes("0 rows"))&&(S=null,C=200,_="OK"),S&&this.shouldThrowOnError)throw new n.default(S)}return{error:S,data:k,count:E,status:C,statusText:_}});return this.shouldThrowOnError||(c=c.catch(f=>{var h,p,y;return{error:{message:`${(h=f==null?void 0:f.name)!==null&&h!==void 0?h:"FetchError"}: ${f==null?void 0:f.message}`,details:`${(p=f==null?void 0:f.stack)!==null&&p!==void 0?p:""}`,hint:"",code:`${(y=f==null?void 0:f.code)!==null&&y!==void 0?y:""}`},data:null,count:null,status:0,statusText:""}})),c.then(o,l)}returns(){return this}overrideTypes(){return this}}return ro.default=r,ro}var vx;function Yb(){if(vx)return no;vx=1;var e=no&&no.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(no,"__esModule",{value:!0});const t=e(qb());class n extends t.default{select(i){let o=!1;const l=(i??"*").split("").map(u=>/\s/.test(u)&&!o?"":(u==='"'&&(o=!o),u)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:o=!0,nullsFirst:l,foreignTable:u,referencedTable:c=u}={}){const f=c?`${c}.order`:"order",h=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${h?`${h},`:""}${i}.${o?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:o,referencedTable:l=o}={}){const u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${i}`),this}range(i,o,{foreignTable:l,referencedTable:u=l}={}){const c=typeof u>"u"?"offset":`${u}.offset`,f=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(c,`${i}`),this.url.searchParams.set(f,`${o-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:o=!1,settings:l=!1,buffers:u=!1,wal:c=!1,format:f="text"}={}){var h;const p=[i?"analyze":null,o?"verbose":null,l?"settings":null,u?"buffers":null,c?"wal":null].filter(Boolean).join("|"),y=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${f}; for="${y}"; options=${p};`),f==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return no.default=n,no}var xx;function Zp(){if(xx)return to;xx=1;var e=to&&to.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(to,"__esModule",{value:!0});const t=e(Yb());class n extends t.default{eq(i,o){return this.url.searchParams.append(i,`eq.${o}`),this}neq(i,o){return this.url.searchParams.append(i,`neq.${o}`),this}gt(i,o){return this.url.searchParams.append(i,`gt.${o}`),this}gte(i,o){return this.url.searchParams.append(i,`gte.${o}`),this}lt(i,o){return this.url.searchParams.append(i,`lt.${o}`),this}lte(i,o){return this.url.searchParams.append(i,`lte.${o}`),this}like(i,o){return this.url.searchParams.append(i,`like.${o}`),this}likeAllOf(i,o){return this.url.searchParams.append(i,`like(all).{${o.join(",")}}`),this}likeAnyOf(i,o){return this.url.searchParams.append(i,`like(any).{${o.join(",")}}`),this}ilike(i,o){return this.url.searchParams.append(i,`ilike.${o}`),this}ilikeAllOf(i,o){return this.url.searchParams.append(i,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(i,o){return this.url.searchParams.append(i,`ilike(any).{${o.join(",")}}`),this}is(i,o){return this.url.searchParams.append(i,`is.${o}`),this}in(i,o){const l=Array.from(new Set(o)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(i,`in.(${l})`),this}contains(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cs.{${o.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(o)}`),this}containedBy(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cd.{${o.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(o)}`),this}rangeGt(i,o){return this.url.searchParams.append(i,`sr.${o}`),this}rangeGte(i,o){return this.url.searchParams.append(i,`nxl.${o}`),this}rangeLt(i,o){return this.url.searchParams.append(i,`sl.${o}`),this}rangeLte(i,o){return this.url.searchParams.append(i,`nxr.${o}`),this}rangeAdjacent(i,o){return this.url.searchParams.append(i,`adj.${o}`),this}overlaps(i,o){return typeof o=="string"?this.url.searchParams.append(i,`ov.${o}`):this.url.searchParams.append(i,`ov.{${o.join(",")}}`),this}textSearch(i,o,{config:l,type:u}={}){let c="";u==="plain"?c="pl":u==="phrase"?c="ph":u==="websearch"&&(c="w");const f=l===void 0?"":`(${l})`;return this.url.searchParams.append(i,`${c}fts${f}.${o}`),this}match(i){return Object.entries(i).forEach(([o,l])=>{this.url.searchParams.append(o,`eq.${l}`)}),this}not(i,o,l){return this.url.searchParams.append(i,`not.${o}.${l}`),this}or(i,{foreignTable:o,referencedTable:l=o}={}){const u=l?`${l}.or`:"or";return this.url.searchParams.append(u,`(${i})`),this}filter(i,o,l){return this.url.searchParams.append(i,`${o}.${l}`),this}}return to.default=n,to}var wx;function Gb(){if(wx)return eo;wx=1;var e=eo&&eo.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(eo,"__esModule",{value:!0});const t=e(Zp());class n{constructor(i,{headers:o={},schema:l,fetch:u}){this.url=i,this.headers=new Headers(o),this.schema=l,this.fetch=u}select(i,o){const{head:l=!1,count:u}=o??{},c=l?"HEAD":"GET";let f=!1;const h=(i??"*").split("").map(p=>/\s/.test(p)&&!f?"":(p==='"'&&(f=!f),p)).join("");return this.url.searchParams.set("select",h),u&&this.headers.append("Prefer",`count=${u}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:o,defaultToNull:l=!0}={}){var u;const c="POST";if(o&&this.headers.append("Prefer",`count=${o}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const f=i.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(f.length>0){const h=[...new Set(f)].map(p=>`"${p}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}upsert(i,{onConflict:o,ignoreDuplicates:l=!1,count:u,defaultToNull:c=!0}={}){var f;const h="POST";if(this.headers.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),u&&this.headers.append("Prefer",`count=${u}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const p=i.reduce((y,v)=>y.concat(Object.keys(v)),[]);if(p.length>0){const y=[...new Set(p)].map(v=>`"${v}"`);this.url.searchParams.set("columns",y.join(","))}}return new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}update(i,{count:o}={}){var l;const u="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:i}={}){var o;const l="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}}return eo.default=n,eo}var bx;function JI(){if(bx)return Zs;bx=1;var e=Zs&&Zs.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Zs,"__esModule",{value:!0});const t=e(Gb()),n=e(Zp());class r{constructor(o,{headers:l={},schema:u,fetch:c}={}){this.url=o,this.headers=new Headers(l),this.schemaName=u,this.fetch=c}from(o){const l=new URL(`${this.url}/${o}`);return new t.default(l,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new r(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,l={},{head:u=!1,get:c=!1,count:f}={}){var h;let p;const y=new URL(`${this.url}/rpc/${o}`);let v;u||c?(p=u?"HEAD":"GET",Object.entries(l).filter(([k,E])=>E!==void 0).map(([k,E])=>[k,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([k,E])=>{y.searchParams.append(k,E)})):(p="POST",v=l);const S=new Headers(this.headers);return f&&S.set("Prefer",`count=${f}`),new n.default({method:p,url:y,headers:S,schema:this.schemaName,body:v,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}}return Zs.default=r,Zs}var kx;function QI(){if(kx)return sn;kx=1;var e=sn&&sn.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(sn,"__esModule",{value:!0}),sn.PostgrestError=sn.PostgrestBuilder=sn.PostgrestTransformBuilder=sn.PostgrestFilterBuilder=sn.PostgrestQueryBuilder=sn.PostgrestClient=void 0;const t=e(JI());sn.PostgrestClient=t.default;const n=e(Gb());sn.PostgrestQueryBuilder=n.default;const r=e(Zp());sn.PostgrestFilterBuilder=r.default;const i=e(Yb());sn.PostgrestTransformBuilder=i.default;const o=e(qb());sn.PostgrestBuilder=o.default;const l=e(Vb());return sn.PostgrestError=l.default,sn.default={PostgrestClient:t.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:o.default,PostgrestError:l.default},sn}var XI=QI();const ZI=Ao(XI),{PostgrestClient:eP,PostgrestQueryBuilder:y5,PostgrestFilterBuilder:v5,PostgrestTransformBuilder:x5,PostgrestBuilder:w5,PostgrestError:b5}=ZI;class tP{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const nP="2.75.0",rP=`realtime-js/${nP}`,iP="1.0.0",Xh=1e4,sP=1e3,oP=100;var $a;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})($a||($a={}));var Xt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Xt||(Xt={}));var br;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(br||(br={}));var Zh;(function(e){e.websocket="websocket"})(Zh||(Zh={}));var fs;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(fs||(fs={}));class aP{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const i=n.getUint8(1),o=n.getUint8(2);let l=this.HEADER_LENGTH+2;const u=r.decode(t.slice(l,l+i));l=l+i;const c=r.decode(t.slice(l,l+o));l=l+o;const f=JSON.parse(r.decode(t.slice(l,t.byteLength)));return{ref:null,topic:u,event:c,payload:f}}}class Kb{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ct;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ct||(Ct={}));const Sx=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((o,l)=>(o[l]=lP(l,e,t,i),o),{}):{}},lP=(e,t,n,r)=>{const i=t.find(u=>u.name===e),o=i==null?void 0:i.type,l=n[e];return o&&!r.includes(o)?Jb(o,l):ep(l)},Jb=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return fP(t,n)}switch(e){case Ct.bool:return uP(t);case Ct.float4:case Ct.float8:case Ct.int2:case Ct.int4:case Ct.int8:case Ct.numeric:case Ct.oid:return cP(t);case Ct.json:case Ct.jsonb:return dP(t);case Ct.timestamp:return hP(t);case Ct.abstime:case Ct.date:case Ct.daterange:case Ct.int4range:case Ct.int8range:case Ct.money:case Ct.reltime:case Ct.text:case Ct.time:case Ct.timestamptz:case Ct.timetz:case Ct.tsrange:case Ct.tstzrange:return ep(t);default:return ep(t)}},ep=e=>e,uP=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},cP=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},dP=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},fP=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let o;const l=e.slice(1,n);try{o=JSON.parse("["+l+"]")}catch{o=l?l.split(","):[]}return o.map(u=>Jb(t,u))}return e},hP=e=>typeof e=="string"?e.replace(" ","T"):e,Qb=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Qf{constructor(t,n,r={},i=Xh){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Ex;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Ex||(Ex={}));class Fa{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Fa.syncState(this.state,i,o,l),this.pendingDiffs.forEach(c=>{this.state=Fa.syncDiff(this.state,c,o,l)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},i=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Fa.syncDiff(this.state,i,o,l),u())}),this.onJoin((i,o,l)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:l})}),this.onLeave((i,o,l)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const o=this.cloneDeep(t),l=this.transformState(n),u={},c={};return this.map(o,(f,h)=>{l[f]||(c[f]=h)}),this.map(l,(f,h)=>{const p=o[f];if(p){const y=h.map(E=>E.presence_ref),v=p.map(E=>E.presence_ref),S=h.filter(E=>v.indexOf(E.presence_ref)<0),k=p.filter(E=>y.indexOf(E.presence_ref)<0);S.length>0&&(u[f]=S),k.length>0&&(c[f]=k)}else u[f]=h}),this.syncDiff(o,{joins:u,leaves:c},r,i)}static syncDiff(t,n,r,i){const{joins:o,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(u,c)=>{var f;const h=(f=t[u])!==null&&f!==void 0?f:[];if(t[u]=this.cloneDeep(c),h.length>0){const p=t[u].map(v=>v.presence_ref),y=h.filter(v=>p.indexOf(v.presence_ref)<0);t[u].unshift(...y)}r(u,h,c)}),this.map(l,(u,c)=>{let f=t[u];if(!f)return;const h=c.map(p=>p.presence_ref);f=f.filter(p=>h.indexOf(p.presence_ref)<0),t[u]=f,i(u,f,c),f.length===0&&delete t[u]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var _x;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(_x||(_x={}));var za;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(za||(za={}));var Zr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Zr||(Zr={}));class em{constructor(t,n={config:{}},r){var i,o;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Xt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Qf(this,br.join,this.params,this.timeout),this.rejoinTimer=new Kb(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Xt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Xt.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Xt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Xt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Xt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(br.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new Fa(this),this.broadcastEndpointURL=Qb(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Xt.closed){const{config:{broadcast:l,presence:u,private:c}}=this.params,f=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(v=>v.filter))!==null&&i!==void 0?i:[],h=!!this.bindings[za.PRESENCE]&&this.bindings[za.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,p={},y={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:h}),postgres_changes:f,private:c};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(v=>t==null?void 0:t(Zr.CHANNEL_ERROR,v)),this._onClose(()=>t==null?void 0:t(Zr.CLOSED)),this.updateJoinPayload(Object.assign({config:y},p)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:v})=>{var S;if(this.socket.setAuth(),v===void 0){t==null||t(Zr.SUBSCRIBED);return}else{const k=this.bindings.postgres_changes,E=(S=k==null?void 0:k.length)!==null&&S!==void 0?S:0,C=[];for(let _=0;_<E;_++){const j=k[_],{filter:{event:I,schema:M,table:P,filter:z}}=j,ne=v&&v[_];if(ne&&ne.event===I&&ne.schema===M&&ne.table===P&&ne.filter===z)C.push(Object.assign(Object.assign({},j),{id:ne.id}));else{this.unsubscribe(),this.state=Xt.errored,t==null||t(Zr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,t&&t(Zr.SUBSCRIBED);return}}).receive("error",v=>{this.state=Xt.errored,t==null||t(Zr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Zr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Xt.joined&&t===za.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){const{event:o,payload:l}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:l,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=f.body)===null||i===void 0?void 0:i.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var l,u,c;const f=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),f.receive("ok",()=>o("ok")),f.receive("error",()=>o("error")),f.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Xt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(br.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Qf(this,br.leave,{},t),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Xt.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const i=new AbortController,o=setTimeout(()=>i.abort(),r),l=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(o),l}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Qf(this,t,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>oP){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,o;const l=t.toLocaleLowerCase(),{close:u,error:c,leave:f,join:h}=br;if(r&&[u,c,f,h].indexOf(l)>=0&&r!==this._joinRef())return;let y=this._onMessage(l,n,r);if(n&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(v=>{var S,k,E;return((S=v.filter)===null||S===void 0?void 0:S.event)==="*"||((E=(k=v.filter)===null||k===void 0?void 0:k.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===l}).map(v=>v.callback(y,r)):(o=this.bindings[l])===null||o===void 0||o.filter(v=>{var S,k,E,C,_,j;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in v){const I=v.id,M=(S=v.filter)===null||S===void 0?void 0:S.event;return I&&((k=n.ids)===null||k===void 0?void 0:k.includes(I))&&(M==="*"||(M==null?void 0:M.toLocaleLowerCase())===((E=n.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const I=(_=(C=v==null?void 0:v.filter)===null||C===void 0?void 0:C.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return I==="*"||I===((j=n==null?void 0:n.event)===null||j===void 0?void 0:j.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===l}).map(v=>{if(typeof y=="object"&&"ids"in y){const S=y.data,{schema:k,table:E,commit_timestamp:C,type:_,errors:j}=S;y=Object.assign(Object.assign({},{schema:k,table:E,commit_timestamp:C,eventType:_,new:{},old:{},errors:j}),this._getPayloadRecords(S))}v.callback(y,r)})}_isClosed(){return this.state===Xt.closed}_isJoined(){return this.state===Xt.joined}_isJoining(){return this.state===Xt.joining}_isLeaving(){return this.state===Xt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),o={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&em.isEqual(i.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(br.close,{},t)}_onError(t){this._on(br.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Xt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Sx(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Sx(t.columns,t.old_record)),n}}const Xf=()=>{},Au={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},pP=[1e3,2e3,5e3,1e4],mP=1e4,gP=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class yP{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Xh,this.transport=null,this.heartbeatIntervalMs=Au.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Xf,this.ref=0,this.reconnectTimer=null,this.logger=Xf,this.conn=null,this.sendBuffer=[],this.serializer=new aP,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>fl(async()=>{const{default:u}=await Promise.resolve().then(()=>$o);return{default:u}},void 0).then(({default:u})=>u(...l)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...l)=>o(...l)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Zh.websocket}`,this.httpEndpoint=Qb(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=tP.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:iP}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case $a.connecting:return fs.Connecting;case $a.open:return fs.Open;case $a.closing:return fs.Closing;default:return fs.Closed}}isConnected(){return this.connectionState()===fs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{const o=new em(`realtime:${t}`,n,this);return this.channels.push(o),o}}push(t){const{topic:n,event:r,payload:i,ref:o}=t,l=()=>{this.encode(t,u=>{var c;(c=this.conn)===null||c===void 0||c.send(u)})};this.log("push",`${n} ${r} (${o})`,i),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(sP,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Au.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:o,ref:l}=n,u=l?`(${l})`:"",c=o.status||"";this.log("receive",`${c} ${r} ${i} ${u}`.trim(),o),this.channels.filter(f=>f._isMember(r)).forEach(f=>f._trigger(i,o,l)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(br.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([gP],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:rP};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(br.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Kb(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Au.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,i,o,l,u,c,f,h;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Xh,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:Au.HEARTBEAT_INTERVAL,this.worker=(o=t==null?void 0:t.worker)!==null&&o!==void 0?o:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=t==null?void 0:t.heartbeatCallback)!==null&&u!==void 0?u:Xf,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:(p=>pP[p-1]||mP),this.encode=(f=t==null?void 0:t.encode)!==null&&f!==void 0?f:((p,y)=>y(JSON.stringify(p))),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class tm extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Vt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class vP extends tm{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class tp extends tm{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var xP=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};const Xb=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>fl(async()=>{const{default:r}=await Promise.resolve().then(()=>$o);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},wP=()=>xP(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield fl(()=>Promise.resolve().then(()=>$o),void 0)).Response:Response}),np=e=>{if(Array.isArray(e))return e.map(n=>np(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[i]=np(r)}),t},bP=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Ts=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};const Zf=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),kP=(e,t,n)=>Ts(void 0,void 0,void 0,function*(){const r=yield wP();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(i=>{const o=e.status||500,l=(i==null?void 0:i.statusCode)||o+"";t(new vP(Zf(i),o,l))}).catch(i=>{t(new tp(Zf(i),i))}):t(new tp(Zf(e),e))}),SP=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?i:(bP(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(r)):i.body=r,t!=null&&t.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),n))};function hl(e,t,n,r,i,o){return Ts(this,void 0,void 0,function*(){return new Promise((l,u)=>{e(n,SP(t,r,i,o)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>l(c)).catch(c=>kP(c,u,r))})})}function uc(e,t,n,r){return Ts(this,void 0,void 0,function*(){return hl(e,"GET",t,n,r)})}function Rr(e,t,n,r,i){return Ts(this,void 0,void 0,function*(){return hl(e,"POST",t,r,i,n)})}function rp(e,t,n,r,i){return Ts(this,void 0,void 0,function*(){return hl(e,"PUT",t,r,i,n)})}function EP(e,t,n,r){return Ts(this,void 0,void 0,function*(){return hl(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Zb(e,t,n,r,i){return Ts(this,void 0,void 0,function*(){return hl(e,"DELETE",t,r,i,n)})}var _P=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};class CP{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return _P(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Vt(t))return{data:null,error:t};throw t}})}}var jP=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};class NP{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}asStream(){return new CP(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.execute().then(t,n)}execute(){return jP(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Vt(t))return{data:null,error:t};throw t}})}}var On=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};const TP={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Cx={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class IP{constructor(t,n={},r,i){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=Xb(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,i){return On(this,void 0,void 0,function*(){try{let o;const l=Object.assign(Object.assign({},Cx),i);let u=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const c=l.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",l.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",l.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=r,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,c&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i!=null&&i.headers&&(u=Object.assign(Object.assign({},u),i.headers));const f=this._removeEmptyFolders(n),h=this._getFinalPath(f),p=yield(t=="PUT"?rp:Rr)(this.fetch,`${this.url}/object/${h}`,o,Object.assign({headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:f,id:p.Id,fullPath:p.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Vt(o))return{data:null,error:o};throw o}})}upload(t,n,r){return On(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,i){return On(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),l=this._getFinalPath(o),u=new URL(this.url+`/object/upload/sign/${l}`);u.searchParams.set("token",n);try{let c;const f=Object.assign({upsert:Cx.upsert},i),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",f.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",f.cacheControl)):(c=r,h["cache-control"]=`max-age=${f.cacheControl}`,h["content-type"]=f.contentType);const p=yield rp(this.fetch,u.toString(),c,{headers:h});return{data:{path:o,fullPath:p.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Vt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return On(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const o=yield Rr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),l=new URL(this.url+o.url),u=l.searchParams.get("token");if(!u)throw new tm("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:u},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Vt(r))return{data:null,error:r};throw r}})}update(t,n,r){return On(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return On(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Vt(i))return{data:null,error:i};throw i}})}copy(t,n,r){return On(this,void 0,void 0,function*(){try{return{data:{path:(yield Rr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Vt(i))return{data:null,error:i};throw i}})}createSignedUrl(t,n,r){return On(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),o=yield Rr(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const l=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${l}`)},{data:o,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Vt(i))return{data:null,error:i};throw i}})}createSignedUrls(t,n,r){return On(this,void 0,void 0,function*(){try{const i=yield Rr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${o}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Vt(i))return{data:null,error:i};throw i}})}download(t,n){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),l=o?`?${o}`:"",u=this._getFinalPath(t),c=()=>uc(this.fetch,`${this.url}/${i}/${u}${l}`,{headers:this.headers,noResolveJson:!0});return new NP(c,this.shouldThrowOnError)}info(t){return On(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield uc(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:np(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Vt(r))return{data:null,error:r};throw r}})}exists(t){return On(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield EP(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Vt(r)&&r instanceof tp){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),i=[],o=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&i.push(o);const u=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&i.push(c);let f=i.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${r}${f}`)}}}remove(t){return On(this,void 0,void 0,function*(){try{return{data:yield Zb(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Vt(n))return{data:null,error:n};throw n}})}list(t,n,r){return On(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},TP),n),{prefix:t||""});return{data:yield Rr(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Vt(i))return{data:null,error:i};throw i}})}listV2(t,n){return On(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield Rr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Vt(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const PP="2.75.0",AP={"X-Client-Info":`storage-js/${PP}`};var io=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};class RP{constructor(t,n={},r,i){this.shouldThrowOnError=!1;const o=new URL(t);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},AP),n),this.fetch=Xb(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return io(this,void 0,void 0,function*(){try{return{data:yield uc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Vt(t))return{data:null,error:t};throw t}})}getBucket(t){return io(this,void 0,void 0,function*(){try{return{data:yield uc(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Vt(n))return{data:null,error:n};throw n}})}createBucket(t){return io(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield Rr(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Vt(i))return{data:null,error:i};throw i}})}updateBucket(t,n){return io(this,void 0,void 0,function*(){try{return{data:yield rp(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Vt(r))return{data:null,error:r};throw r}})}emptyBucket(t){return io(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Vt(n))return{data:null,error:n};throw n}})}deleteBucket(t){return io(this,void 0,void 0,function*(){try{return{data:yield Zb(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Vt(n))return{data:null,error:n};throw n}})}}class OP extends RP{constructor(t,n={},r,i){super(t,n,r,i)}from(t){return new IP(this.url,this.headers,t,this.fetch)}}const MP="2.75.0";let Aa="";typeof Deno<"u"?Aa="deno":typeof document<"u"?Aa="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Aa="react-native":Aa="node";const DP={"X-Client-Info":`supabase-js-${Aa}/${MP}`},LP={headers:DP},$P={schema:"public"},FP={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},zP={};var BP=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};const UP=e=>{let t;return e?t=e:typeof fetch>"u"?t=Wb:t=fetch,(...n)=>t(...n)},WP=()=>typeof Headers>"u"?Hb:Headers,HP=(e,t,n)=>{const r=UP(n),i=WP();return(o,l)=>BP(void 0,void 0,void 0,function*(){var u;const c=(u=yield t())!==null&&u!==void 0?u:e;let f=new i(l==null?void 0:l.headers);return f.has("apikey")||f.set("apikey",e),f.has("Authorization")||f.set("Authorization",`Bearer ${c}`),r(o,Object.assign(Object.assign({},l),{headers:f}))})};var VP=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};function qP(e){return e.endsWith("/")?e:e+"/"}function YP(e,t){var n,r;const{db:i,auth:o,realtime:l,global:u}=e,{db:c,auth:f,realtime:h,global:p}=t,y={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},f),o),realtime:Object.assign(Object.assign({},h),l),storage:{},global:Object.assign(Object.assign(Object.assign({},p),u),{headers:Object.assign(Object.assign({},(n=p==null?void 0:p.headers)!==null&&n!==void 0?n:{}),(r=u==null?void 0:u.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>VP(this,void 0,void 0,function*(){return""})};return e.accessToken?y.accessToken=e.accessToken:delete y.accessToken,y}function GP(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(qP(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const ek="2.75.0",po=30*1e3,ip=3,eh=ip*po,KP="http://localhost:9999",JP="supabase.auth.token",QP={"X-Client-Info":`gotrue-js/${ek}`},sp="X-Supabase-Api-Version",tk={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},XP=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ZP=600*1e3;class el extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Qe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class eA extends el{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function tA(e){return Qe(e)&&e.name==="AuthApiError"}class hs extends el{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Wi extends el{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}}class ji extends Wi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function nA(e){return Qe(e)&&e.name==="AuthSessionMissingError"}class so extends Wi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ru extends Wi{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Ou extends Wi{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function rA(e){return Qe(e)&&e.name==="AuthImplicitGrantRedirectError"}class jx extends Wi{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class op extends Wi{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function th(e){return Qe(e)&&e.name==="AuthRetryableFetchError"}class Nx extends Wi{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class ap extends Wi{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const cc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Tx=` 	
\r=`.split(""),iA=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Tx.length;t+=1)e[Tx[t].charCodeAt(0)]=-2;for(let t=0;t<cc.length;t+=1)e[cc[t].charCodeAt(0)]=t;return e})();function Ix(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(cc[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(cc[r]),t.queuedBits-=6}}function nk(e,t,n){const r=iA[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Px(e){const t=[],n=l=>{t.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=l=>{aA(l,r,n)};for(let l=0;l<e.length;l+=1)nk(e.charCodeAt(l),i,o);return t.join("")}function sA(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function oA(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}sA(r,t)}}function aA(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if((e>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function ko(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)nk(e.charCodeAt(i),n,r);return new Uint8Array(t)}function lA(e){const t=[];return oA(e,n=>t.push(n)),new Uint8Array(t)}function vs(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};return e.forEach(i=>Ix(i,n,r)),Ix(null,n,r),t.join("")}function uA(e){return Math.round(Date.now()/1e3)+e}function cA(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Gn=()=>typeof window<"u"&&typeof document<"u",is={tested:!1,writable:!1},rk=()=>{if(!Gn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(is.tested)return is.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),is.tested=!0,is.writable=!0}catch{is.tested=!0,is.writable=!1}return is.writable};function dA(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,o)=>{t[o]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const ik=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>fl(async()=>{const{default:r}=await Promise.resolve().then(()=>$o);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},fA=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",mo=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},ss=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},_i=async(e,t)=>{await e.removeItem(t)};class zc{constructor(){this.promise=new zc.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}zc.promiseConstructor=Promise;function nh(e){const t=e.split(".");if(t.length!==3)throw new ap("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!XP.test(t[r]))throw new ap("JWT not in base64url format");return{header:JSON.parse(Px(t[0])),payload:JSON.parse(Px(t[1])),signature:ko(t[2]),raw:{header:t[0],payload:t[1]}}}async function hA(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function pA(e,t){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const l=await e(o);if(!t(o,null,l)){r(l);return}}catch(l){if(!t(o,l)){i(l);return}}})()})}function mA(e){return("0"+e.toString(16)).substr(-2)}function gA(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let o=0;o<56;o++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,mA).join("")}async function yA(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function vA(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await yA(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function oo(e,t,n=!1){const r=gA();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await mo(e,`${t}-code-verifier`,i);const o=await vA(r);return[o,r===o?"plain":"s256"]}const xA=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function wA(e){const t=e.headers.get(sp);if(!t||!t.match(xA))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function bA(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function kA(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const SA=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ao(e){if(!SA.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function rh(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Ax(e){return JSON.parse(JSON.stringify(e))}var EA=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const ls=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),_A=[502,503,504];async function Rx(e){var t;if(!fA(e))throw new op(ls(e),0);if(_A.includes(e.status))throw new op(ls(e),e.status);let n;try{n=await e.json()}catch(o){throw new hs(ls(o),o)}let r;const i=wA(e);if(i&&i.getTime()>=tk["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Nx(ls(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new ji}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,l)=>o&&typeof l=="string",!0))throw new Nx(ls(n),e.status,n.weak_password.reasons);throw new eA(ls(n),e.status||500,r)}const CA=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function st(e,t,n,r){var i;const o=Object.assign({},r==null?void 0:r.headers);o[sp]||(o[sp]=tk["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const l=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(l.redirect_to=r.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",c=await jA(e,t,n+u,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function jA(e,t,n,r,i,o){const l=CA(t,r,i,o);let u;try{u=await e(n,Object.assign({},l))}catch(c){throw console.error(c),new op(ls(c),0)}if(u.ok||await Rx(u),r!=null&&r.noResolveJson)return u;try{return await u.json()}catch(c){await Rx(c)}}function xr(e){var t;let n=null;IA(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=uA(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Ox(e){const t=xr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ai(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function NA(e){return{data:e,error:null}}function TA(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o}=e,l=EA(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o},c=Object.assign({},l);return{data:{properties:u,user:c},error:null}}function Mx(e){return e}function IA(e){return e.access_token&&e.refresh_token&&e.expires_in}const ih=["global","local","others"];var PA=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class AA{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=ik(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=ih[0]){if(ih.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ih.join(", ")}`);try{return await st(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Qe(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await st(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ai})}catch(r){if(Qe(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=PA(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await st(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:TA,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Qe(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await st(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ai})}catch(n){if(Qe(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,o,l,u,c;try{const f={nextPage:null,lastPage:0,total:0},h=await st(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Mx});if(h.error)throw h.error;const p=await h.json(),y=(l=h.headers.get("x-total-count"))!==null&&l!==void 0?l:0,v=(c=(u=h.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&c!==void 0?c:[];return v.length>0&&(v.forEach(S=>{const k=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(S.split(";")[1].split("=")[1]);f[`${E}Page`]=k}),f.total=parseInt(y)),{data:Object.assign(Object.assign({},p),f),error:null}}catch(f){if(Qe(f))return{data:{users:[]},error:f};throw f}}async getUserById(t){ao(t);try{return await st(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ai})}catch(n){if(Qe(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){ao(t);try{return await st(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Ai})}catch(r){if(Qe(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){ao(t);try{return await st(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ai})}catch(r){if(Qe(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){ao(t.userId);try{const{data:n,error:r}=await st(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(Qe(n))return{data:null,error:n};throw n}}async _deleteFactor(t){ao(t.userId),ao(t.id);try{return{data:await st(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Qe(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,i,o,l,u,c;try{const f={nextPage:null,lastPage:0,total:0},h=await st(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Mx});if(h.error)throw h.error;const p=await h.json(),y=(l=h.headers.get("x-total-count"))!==null&&l!==void 0?l:0,v=(c=(u=h.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&c!==void 0?c:[];return v.length>0&&(v.forEach(S=>{const k=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(S.split(";")[1].split("=")[1]);f[`${E}Page`]=k}),f.total=parseInt(y)),{data:Object.assign(Object.assign({},p),f),error:null}}catch(f){if(Qe(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(t){try{return await st(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Qe(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await st(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Qe(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await st(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Qe(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await st(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Qe(n))return{data:null,error:n};throw n}}}function Dx(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const lo={debug:!!(globalThis&&rk()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class sk extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class RA extends sk{}async function OA(e,t,n){lo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),lo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){lo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{lo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw lo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new RA(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(lo.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function MA(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function ok(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function DA(e){return parseInt(e,16)}function LA(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function $A(e){var t;const{chainId:n,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:l,notBefore:u,requestId:c,resources:f,scheme:h,uri:p,version:y}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const v=ok(e.address),S=h?`${h}://${r}`:r,k=e.statement?`${e.statement}
`:"",E=`${S} wants you to sign in with your Ethereum account:
${v}

${k}`;let C=`URI: ${p}
Version: ${y}
Chain ID: ${n}${l?`
Nonce: ${l}`:""}
Issued At: ${o.toISOString()}`;if(i&&(C+=`
Expiration Time: ${i.toISOString()}`),u&&(C+=`
Not Before: ${u.toISOString()}`),c&&(C+=`
Request ID: ${c}`),f){let _=`
Resources:`;for(const j of f){if(!j||typeof j!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${j}`);_+=`
- ${j}`}C+=_}return`${E}
${C}`}class Ht extends Error{constructor({message:t,code:n,cause:r,name:i}){var o;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class dc extends Ht{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function FA({error:e,options:t}){var n,r,i;const{publicKey:o}=t;if(!o)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ht({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Ht({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Ht({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Ht({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Ht({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Ht({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return o.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new Ht({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Ht({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const l=window.location.hostname;if(lk(l)){if(o.rp.id!==l)return new Ht({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Ht({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Ht({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Ht({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Ht({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function zA({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ht({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Ht({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(lk(r)){if(n.rpId!==r)return new Ht({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Ht({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Ht({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Ht({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var ak=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class BA{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const UA=new BA;function WA(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,i=ak(e,["challenge","user","excludeCredentials"]),o=ko(t).buffer,l=Object.assign(Object.assign({},n),{id:ko(n.id).buffer}),u=Object.assign(Object.assign({},i),{challenge:o,user:l});if(r&&r.length>0){u.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const f=r[c];u.excludeCredentials[c]=Object.assign(Object.assign({},f),{id:ko(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return u}function HA(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=ak(e,["challenge","allowCredentials"]),i=ko(t).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const u=n[l];o.allowCredentials[l]=Object.assign(Object.assign({},u),{id:ko(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function VA(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:vs(new Uint8Array(e.response.attestationObject)),clientDataJSON:vs(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function qA(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:vs(new Uint8Array(i.authenticatorData)),clientDataJSON:vs(new Uint8Array(i.clientDataJSON)),signature:vs(new Uint8Array(i.signature)),userHandle:i.userHandle?vs(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function lk(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Lx(){var e,t;return!!(Gn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function YA(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new dc("Browser returned unexpected credential type",t)}:{data:null,error:new dc("Empty credential response",t)}}catch(t){return{data:null,error:FA({error:t,options:e})}}}async function GA(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new dc("Browser returned unexpected credential type",t)}:{data:null,error:new dc("Empty credential response",t)}}catch(t){return{data:null,error:zA({error:t,options:e})}}}const KA={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},JA={userVerification:"preferred",hints:["security-key"]};function fc(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of e)if(i)for(const o in i){const l=i[o];if(l!==void 0)if(Array.isArray(l))r[o]=l;else if(n(l))r[o]=l;else if(t(l)){const u=r[o];t(u)?r[o]=fc(u,l):r[o]=fc(l)}else r[o]=l}return r}function QA(e,t){return fc(KA,e,t||{})}function XA(e,t){return fc(JA,e,t||{})}class ZA{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:i},o){try{const{data:l,error:u}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!l)return{data:null,error:u};const c=i??UA.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:f}=l.webauthn.credential_options.publicKey;f.name||(f.name=`${f.id}:${r}`),f.displayName||(f.displayName=f.name)}switch(l.webauthn.type){case"create":{const f=QA(l.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:h,error:p}=await YA({publicKey:f,signal:c});return h?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:h}},error:null}:{data:null,error:p}}case"request":{const f=XA(l.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:h,error:p}=await GA(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:f,signal:c}));return h?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:h}},error:null}:{data:null,error:p}}}}catch(l){return Qe(l)?{data:null,error:l}:{data:null,error:new hs("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}},o){if(!n)return{data:null,error:new el("rpId is required for WebAuthn authentication")};try{if(!Lx())return{data:null,error:new hs("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:o});if(!l)return{data:null,error:u};const{webauthn:c}=l;return this._verify({factorId:t,challengeId:l.challengeId,webauthn:{type:c.type,rpId:n,rpOrigins:r,credential_response:c.credential_response}})}catch(l){return Qe(l)?{data:null,error:l}:{data:null,error:new hs("Unexpected error in authenticate",l)}}}async _register({friendlyName:t,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i},o){if(!n)return{data:null,error:new el("rpId is required for WebAuthn registration")};try{if(!Lx())return{data:null,error:new hs("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this._enroll({friendlyName:t});if(!l)return await this.client.mfa.listFactors().then(h=>{var p;return(p=h.data)===null||p===void 0?void 0:p.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===t&&y.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:u};const{data:c,error:f}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:o});return c?this._verify({factorId:l.id,challengeId:c.challengeId,webauthn:{rpId:n,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:f}}catch(l){return Qe(l)?{data:null,error:l}:{data:null,error:new hs("Unexpected error in register",l)}}}}MA();const eR={url:KP,storageKey:JP,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:QP,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function $x(e,t,n){return await n()}const uo={};class tl{get jwks(){var t,n;return(n=(t=uo[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){uo[this.storageKey]=Object.assign(Object.assign({},uo[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=uo[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){uo[this.storageKey]=Object.assign(Object.assign({},uo[this.storageKey]),{cachedAt:t})}constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=tl.nextInstanceID,tl.nextInstanceID+=1,this.instanceID>0&&Gn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},eR),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new AA({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=ik(i.fetch),this.lock=i.lock||$x,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Gn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=OA:this.lock=$x,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new ZA(this)},this.persistSession?(i.storage?this.storage=i.storage:rk()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Dx(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Dx(this.memoryStorage)),Gn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ek}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=dA(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Gn()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),rA(o)){const c=(t=o.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:l,redirectType:u}=i;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Qe(n)?{error:n}:{error:new hs("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,i;try{const o=await st(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:xr}),{data:l,error:u}=o;if(u||!l)return{data:{user:null,session:null},error:u};const c=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(o){if(Qe(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(t){var n,r,i;try{let o;if("email"in t){const{email:h,password:p,options:y}=t;let v=null,S=null;this.flowType==="pkce"&&([v,S]=await oo(this.storage,this.storageKey)),o=await st(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:h,password:p,data:(n=y==null?void 0:y.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:v,code_challenge_method:S},xform:xr})}else if("phone"in t){const{phone:h,password:p,options:y}=t;o=await st(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:p,data:(r=y==null?void 0:y.data)!==null&&r!==void 0?r:{},channel:(i=y==null?void 0:y.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:xr})}else throw new Ru("You must provide either an email or phone number and a password");const{data:l,error:u}=o;if(u||!l)return{data:{user:null,session:null},error:u};const c=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(o){if(Qe(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(t){try{let n;if("email"in t){const{email:o,password:l,options:u}=t;n=await st(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Ox})}else if("phone"in t){const{phone:o,password:l,options:u}=t;n=await st(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Ox})}else throw new Ru("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new so}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(Qe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,i,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,i,o,l,u,c,f,h,p,y;let v,S;if("message"in t)v=t.message,S=t.signature;else{const{chain:k,wallet:E,statement:C,options:_}=t;let j;if(Gn())if(typeof E=="object")j=E;else{const Z=window;if("ethereum"in Z&&typeof Z.ethereum=="object"&&"request"in Z.ethereum&&typeof Z.ethereum.request=="function")j=Z.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=E}const I=new URL((n=_==null?void 0:_.url)!==null&&n!==void 0?n:window.location.href),M=await j.request({method:"eth_requestAccounts"}).then(Z=>Z).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!M||M.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const P=ok(M[0]);let z=(r=_==null?void 0:_.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!z){const Z=await j.request({method:"eth_chainId"});z=DA(Z)}const ne={domain:I.host,address:P,statement:C,uri:I.href,version:"1",chainId:z,nonce:(i=_==null?void 0:_.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(l=(o=_==null?void 0:_.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(u=_==null?void 0:_.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(c=_==null?void 0:_.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(f=_==null?void 0:_.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(h=_==null?void 0:_.signInWithEthereum)===null||h===void 0?void 0:h.resources};v=$A(ne),S=await j.request({method:"personal_sign",params:[LA(v),P]})}try{const{data:k,error:E}=await st(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:v,signature:S},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:xr});if(E)throw E;return!k||!k.session||!k.user?{data:{user:null,session:null},error:new so}:(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),{data:Object.assign({},k),error:E})}catch(k){if(Qe(k))return{data:{user:null,session:null},error:k};throw k}}async signInWithSolana(t){var n,r,i,o,l,u,c,f,h,p,y,v;let S,k;if("message"in t)S=t.message,k=t.signature;else{const{chain:E,wallet:C,statement:_,options:j}=t;let I;if(Gn())if(typeof C=="object")I=C;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))I=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!(j!=null&&j.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");I=C}const M=new URL((n=j==null?void 0:j.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in I&&I.signIn){const P=await I.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},j==null?void 0:j.signInWithSolana),{version:"1",domain:M.host,uri:M.href}),_?{statement:_}:null));let z;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")z=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)z=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in z&&"signature"in z&&(typeof z.signedMessage=="string"||z.signedMessage instanceof Uint8Array)&&z.signature instanceof Uint8Array)S=typeof z.signedMessage=="string"?z.signedMessage:new TextDecoder().decode(z.signedMessage),k=z.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in I)||typeof I.signMessage!="function"||!("publicKey"in I)||typeof I!="object"||!I.publicKey||!("toBase58"in I.publicKey)||typeof I.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${M.host} wants you to sign in with your Solana account:`,I.publicKey.toBase58(),..._?["",_,""]:[""],"Version: 1",`URI: ${M.href}`,`Issued At: ${(i=(r=j==null?void 0:j.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=j==null?void 0:j.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${j.signInWithSolana.notBefore}`]:[],...!((l=j==null?void 0:j.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${j.signInWithSolana.expirationTime}`]:[],...!((u=j==null?void 0:j.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${j.signInWithSolana.chainId}`]:[],...!((c=j==null?void 0:j.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${j.signInWithSolana.nonce}`]:[],...!((f=j==null?void 0:j.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${j.signInWithSolana.requestId}`]:[],...!((p=(h=j==null?void 0:j.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||p===void 0)&&p.length?["Resources",...j.signInWithSolana.resources.map(z=>`- ${z}`)]:[]].join(`
`);const P=await I.signMessage(new TextEncoder().encode(S),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");k=P}}try{const{data:E,error:C}=await st(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:vs(k)},!((y=t.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:xr});if(C)throw C;return!E||!E.session||!E.user?{data:{user:null,session:null},error:new so}:(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),{data:Object.assign({},E),error:C})}catch(E){if(Qe(E))return{data:{user:null,session:null},error:E};throw E}}async _exchangeCodeForSession(t){const n=await ss(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:o,error:l}=await st(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:xr});if(await _i(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new so}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:l})}catch(o){if(Qe(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(t){try{const{options:n,provider:r,token:i,access_token:o,nonce:l}=t,u=await st(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:o,nonce:l,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:xr}),{data:c,error:f}=u;return f?{data:{user:null,session:null},error:f}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new so}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:f})}catch(n){if(Qe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,i,o,l;try{if("email"in t){const{email:u,options:c}=t;let f=null,h=null;this.flowType==="pkce"&&([f,h]=await oo(this.storage,this.storageKey));const{error:p}=await st(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:f,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in t){const{phone:u,options:c}=t,{data:f,error:h}=await st(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(l=c==null?void 0:c.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:h}}throw new Ru("You must provide either an email or phone number.")}catch(u){if(Qe(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(t){var n,r;try{let i,o;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,o=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:u}=await st(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:xr});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const c=l.session,f=l.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(i){if(Qe(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var n,r,i;try{let o=null,l=null;return this.flowType==="pkce"&&([o,l]=await oo(this.storage,this.storageKey)),await st(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:NA})}catch(o){if(Qe(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new ji;const{error:i}=await st(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(Qe(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:o}=t,{error:l}=await st(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){const{phone:r,type:i,options:o}=t,{data:l,error:u}=await st(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new Ru("You must provide either an email or phone number and a type")}catch(n){if(Qe(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await ss(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<eh:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const l=await ss(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=rh()}if(this.storage.isServer&&t.user){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,f,h)=>(!l&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,f,h))})}return{data:{session:t},error:null}}const{data:i,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await st(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ai}):await this._useSession(async n=>{var r,i,o;const{data:l,error:u}=n;if(u)throw u;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ji}:await st(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:Ai})})}catch(n){if(Qe(n))return nA(n)&&(await this._removeSession(),await _i(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:i,error:o}=r;if(o)throw o;if(!i.session)throw new ji;const l=i.session;let u=null,c=null;this.flowType==="pkce"&&t.email!=null&&([u,c]=await oo(this.storage,this.storageKey));const{data:f,error:h}=await st(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:u,code_challenge_method:c}),jwt:l.access_token,xform:Ai});if(h)throw h;return l.user=f.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(r){if(Qe(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new ji;const n=Date.now()/1e3;let r=n,i=!0,o=null;const{payload:l}=nh(t.access_token);if(l.exp&&(r=l.exp,i=r<=n),i){const{data:u,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!u)return{data:{user:null,session:null},error:null};o=u}else{const{data:u,error:c}=await this._getUser(t.access_token);if(c)throw c;o={access_token:t.access_token,refresh_token:t.refresh_token,user:u.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(n){if(Qe(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:l,error:u}=n;if(u)throw u;t=(r=l.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new ji;const{data:i,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Qe(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!Gn())throw new Ou("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Ou(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new jx("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ou("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new jx("No code detected.");const{data:_,error:j}=await this._exchangeCodeForSession(t.code);if(j)throw j;const I=new URL(window.location.href);return I.searchParams.delete("code"),window.history.replaceState(window.history.state,"",I.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:o,refresh_token:l,expires_in:u,expires_at:c,token_type:f}=t;if(!o||!u||!l||!f)throw new Ou("No session defined in URL");const h=Math.round(Date.now()/1e3),p=parseInt(u);let y=h+p;c&&(y=parseInt(c));const v=y-h;v*1e3<=po&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${p}s`);const S=y-p;h-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,y,h):h-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,y,h);const{data:k,error:E}=await this._getUser(o);if(E)throw E;const C={provider_token:r,provider_refresh_token:i,access_token:o,expires_in:p,expires_at:y,refresh_token:l,token_type:f,user:k.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:C,redirectType:t.type},error:null}}catch(r){if(Qe(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await ss(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return{error:o};const l=(r=i.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:u}=await this.admin.signOut(l,t);if(u&&!(tA(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return t!=="others"&&(await this._removeSession(),await _i(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=cA(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,i;try{const{data:{session:o},error:l}=n;if(l)throw l;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await oo(this.storage,this.storageKey,!0));try{return await st(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(Qe(o))return{data:null,error:o};throw o}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(Qe(n))return{data:null,error:n};throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:i}=await this._useSession(async o=>{var l,u,c,f,h;const{data:p,error:y}=o;if(y)throw y;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=t.options)===null||u===void 0?void 0:u.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await st(this.fetch,"GET",v,{headers:this.headers,jwt:(h=(f=p.session)===null||f===void 0?void 0:f.access_token)!==null&&h!==void 0?h:void 0})});if(i)throw i;return Gn()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Qe(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:o}}=n;if(i)throw i;const{options:l,provider:u,token:c,access_token:f,nonce:h}=t,p=await st(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o==null?void 0:o.access_token)!==null&&r!==void 0?r:void 0,body:{provider:u,id_token:c,access_token:f,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:xr}),{data:y,error:v}=p;return v?{data:{user:null,session:null},error:v}:!y||!y.session||!y.user?{data:{user:null,session:null},error:new so}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),{data:y,error:v})}catch(i){if(Qe(i))return{data:{user:null,session:null},error:i};throw i}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,i;const{data:o,error:l}=n;if(l)throw l;return await st(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Qe(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await pA(async i=>(i>0&&await hA(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await st(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:xr})),(i,o)=>{const l=200*Math.pow(2,i);return o&&th(o)&&Date.now()+l-r<po})}catch(r){if(this._debug(n,"error",r),Qe(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Gn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await ss(this.storage,this.storageKey);if(i&&this.userStorage){let l=await ss(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:i.user},await mo(this.userStorage,this.storageKey+"-user",l)),i.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:rh()}else if(i&&!i.user&&!i.user){const l=await ss(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(i.user=l.user,await _i(this.storage,this.storageKey+"-user"),await mo(this.storage,this.storageKey,i)):i.user=rh()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const o=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<eh;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${eh}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:l}=await this._callRefreshToken(i.refresh_token);l&&(console.error(l),th(l)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(i.access_token);!u&&(l!=null&&l.user)?(i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(r,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new ji;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new zc;const{data:o,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!o.session)throw new ji;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const u={data:o.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(o){if(this._debug(i,"error",o),Qe(o)){const l={data:null,error:o};return th(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,r=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const o=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(t,n)}catch(c){o.push(c)}});if(await Promise.all(l),o.length>0){for(let u=0;u<o.length;u+=1)console.error(o[u]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await mo(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const o=Ax(i);await mo(this.storage,this.storageKey,o)}else{const i=Ax(n);await mo(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await _i(this.storage,this.storageKey),await _i(this.storage,this.storageKey+"-code-verifier"),await _i(this.storage,this.storageKey+"-user"),this.userStorage&&await _i(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Gn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),po);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-t)/po);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${po}ms, refresh threshold is ${ip} ticks`),i<=ip&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof sk)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Gn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,l]=await oo(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(l)}`});i.push(u.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);i.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;return o?{data:null,error:o}:await st(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Qe(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,i;const{data:o,error:l}=n;if(l)return{data:null,error:l};const u=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:f}=await st(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return f?{data:null,error:f}:(t.factorType==="totp"&&c.type==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(Qe(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return{data:null,error:o};const l=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?VA(t.webauthn.credential_response):qA(t.webauthn.credential_response)})}:{code:t.code}),{data:u,error:c}=await st(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:c})})}catch(n){if(Qe(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return{data:null,error:o};const l=await st(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(l.error)return l;const{data:u}=l;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:WA(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:HA(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Qe(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const o of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])i.all.push(o),o.status==="verified"&&i[o.factor_type].push(o);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:i},error:o}=t;if(o)return{data:null,error:o};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=nh(i.access_token);let u=null;l.aal&&(u=l.aal);let c=u;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(p=>p.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const h=l.amr||[];return{data:{currentLevel:u,nextLevel:c,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(u=>u.kid===t);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(u=>u.kid===t),r&&this.jwks_cached_at+ZP>i)return r;const{data:o,error:l}=await st(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,r=o.keys.find(u=>u.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:v,error:S}=await this.getSession();if(S||!v.session)return{data:null,error:S};r=v.session.access_token}const{header:i,payload:o,signature:l,raw:{header:u,payload:c}}=nh(r);n!=null&&n.allowExpired||bA(o.exp);const f=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!f){const{error:v}=await this.getUser(r);if(v)throw v;return{data:{claims:o,header:i,signature:l},error:null}}const h=kA(i.alg),p=await crypto.subtle.importKey("jwk",f,h,!0,["verify"]);if(!await crypto.subtle.verify(h,p,l,lA(`${u}.${c}`)))throw new ap("Invalid JWT signature");return{data:{claims:o,header:i,signature:l},error:null}}catch(r){if(Qe(r))return{data:null,error:r};throw r}}}tl.nextInstanceID=0;const tR=tl;class nR extends tR{constructor(t){super(t)}}var rR=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(h){try{f(r.next(h))}catch(p){l(p)}}function c(h){try{f(r.throw(h))}catch(p){l(p)}}function f(h){h.done?o(h.value):i(h.value).then(u,c)}f((r=r.apply(e,t||[])).next())})};class iR{constructor(t,n,r){var i,o,l;this.supabaseUrl=t,this.supabaseKey=n;const u=GP(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const c=`sb-${u.hostname.split(".")[0]}-auth-token`,f={db:$P,realtime:zP,auth:Object.assign(Object.assign({},FP),{storageKey:c}),global:LP},h=YP(r??{},f);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=h.global.headers)!==null&&o!==void 0?o:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(p,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=h.auth)!==null&&l!==void 0?l:{},this.headers,h.global.fetch),this.fetch=HP(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new eP(new URL("rest/v1",u).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new OP(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new HI(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return rR(this,void 0,void 0,function*(){var t,n;if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:o,storageKey:l,flowType:u,lock:c,debug:f},h,p){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new nR({url:this.authUrl.href,headers:Object.assign(Object.assign({},y),h),storageKey:l,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:o,flowType:u,lock:c,debug:f,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new yP(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const sR=(e,t,n)=>new iR(e,t,n);function oR(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}oR()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const aR="https://kjsdmygqhxaryvfmnhqr.supabase.co",lR="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imtqc2RteWdxaHhhcnl2Zm1uaHFyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAwMTAxMDEsImV4cCI6MjA3NTU4NjEwMX0.kXL7Dgum6CepvcrS8LVY1v_EHnpyUQOFcqndUQWPrkM",Yt=sR(aR,lR,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),Fx=e=>{let t;const n=new Set,r=(f,h)=>{const p=typeof f=="function"?f(t):f;if(!Object.is(p,t)){const y=t;t=h??(typeof p!="object"||p===null)?p:Object.assign({},t,p),n.forEach(v=>v(t,y))}},i=()=>t,u={setState:r,getState:i,getInitialState:()=>c,subscribe:f=>(n.add(f),()=>n.delete(f))},c=t=e(r,i,u);return u},uR=(e=>e?Fx(e):Fx),cR=e=>e;function dR(e,t=cR){const n=Me.useSyncExternalStore(e.subscribe,Me.useCallback(()=>t(e.getState()),[e,t]),Me.useCallback(()=>t(e.getInitialState()),[e,t]));return Me.useDebugValue(n),n}const zx=e=>{const t=uR(e),n=r=>dR(t,r);return Object.assign(n,t),n},fR=(e=>e?zx(e):zx),hR="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Bt=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=hR[n[e]&63];return t};var Vu={exports:{}},pR=Vu.exports,Bx;function uk(){return Bx||(Bx=1,(function(e,t){(function(n,r){e.exports=r()})(pR,(function(){var n=1e3,r=6e4,i=36e5,o="millisecond",l="second",u="minute",c="hour",f="day",h="week",p="month",y="quarter",v="year",S="date",k="Invalid Date",E=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,C=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(G){var $=["th","st","nd","rd"],Y=G%100;return"["+G+($[(Y-20)%10]||$[Y]||$[0])+"]"}},j=function(G,$,Y){var re=String(G);return!re||re.length>=$?G:""+Array($+1-re.length).join(Y)+G},I={s:j,z:function(G){var $=-G.utcOffset(),Y=Math.abs($),re=Math.floor(Y/60),O=Y%60;return($<=0?"+":"-")+j(re,2,"0")+":"+j(O,2,"0")},m:function G($,Y){if($.date()<Y.date())return-G(Y,$);var re=12*(Y.year()-$.year())+(Y.month()-$.month()),O=$.clone().add(re,p),ee=Y-O<0,T=$.clone().add(re+(ee?-1:1),p);return+(-(re+(Y-O)/(ee?O-T:T-O))||0)},a:function(G){return G<0?Math.ceil(G)||0:Math.floor(G)},p:function(G){return{M:p,y:v,w:h,d:f,D:S,h:c,m:u,s:l,ms:o,Q:y}[G]||String(G||"").toLowerCase().replace(/s$/,"")},u:function(G){return G===void 0}},M="en",P={};P[M]=_;var z="$isDayjsObject",ne=function(G){return G instanceof H||!(!G||!G[z])},Z=function G($,Y,re){var O;if(!$)return M;if(typeof $=="string"){var ee=$.toLowerCase();P[ee]&&(O=ee),Y&&(P[ee]=Y,O=ee);var T=$.split("-");if(!O&&T.length>1)return G(T[0])}else{var U=$.name;P[U]=$,O=U}return!re&&O&&(M=O),O||!re&&M},R=function(G,$){if(ne(G))return G.clone();var Y=typeof $=="object"?$:{};return Y.date=G,Y.args=arguments,new H(Y)},D=I;D.l=Z,D.i=ne,D.w=function(G,$){return R(G,{locale:$.$L,utc:$.$u,x:$.$x,$offset:$.$offset})};var H=(function(){function G(Y){this.$L=Z(Y.locale,null,!0),this.parse(Y),this.$x=this.$x||Y.x||{},this[z]=!0}var $=G.prototype;return $.parse=function(Y){this.$d=(function(re){var O=re.date,ee=re.utc;if(O===null)return new Date(NaN);if(D.u(O))return new Date;if(O instanceof Date)return new Date(O);if(typeof O=="string"&&!/Z$/i.test(O)){var T=O.match(E);if(T){var U=T[2]-1||0,te=(T[7]||"0").substring(0,3);return ee?new Date(Date.UTC(T[1],U,T[3]||1,T[4]||0,T[5]||0,T[6]||0,te)):new Date(T[1],U,T[3]||1,T[4]||0,T[5]||0,T[6]||0,te)}}return new Date(O)})(Y),this.init()},$.init=function(){var Y=this.$d;this.$y=Y.getFullYear(),this.$M=Y.getMonth(),this.$D=Y.getDate(),this.$W=Y.getDay(),this.$H=Y.getHours(),this.$m=Y.getMinutes(),this.$s=Y.getSeconds(),this.$ms=Y.getMilliseconds()},$.$utils=function(){return D},$.isValid=function(){return this.$d.toString()!==k},$.isSame=function(Y,re){var O=R(Y);return this.startOf(re)<=O&&O<=this.endOf(re)},$.isAfter=function(Y,re){return R(Y)<this.startOf(re)},$.isBefore=function(Y,re){return this.endOf(re)<R(Y)},$.$g=function(Y,re,O){return D.u(Y)?this[re]:this.set(O,Y)},$.unix=function(){return Math.floor(this.valueOf()/1e3)},$.valueOf=function(){return this.$d.getTime()},$.startOf=function(Y,re){var O=this,ee=!!D.u(re)||re,T=D.p(Y),U=function(Ae,Ie){var X=D.w(O.$u?Date.UTC(O.$y,Ie,Ae):new Date(O.$y,Ie,Ae),O);return ee?X:X.endOf(f)},te=function(Ae,Ie){return D.w(O.toDate()[Ae].apply(O.toDate("s"),(ee?[0,0,0,0]:[23,59,59,999]).slice(Ie)),O)},A=this.$W,we=this.$M,he=this.$D,me="set"+(this.$u?"UTC":"");switch(T){case v:return ee?U(1,0):U(31,11);case p:return ee?U(1,we):U(0,we+1);case h:var de=this.$locale().weekStart||0,Ne=(A<de?A+7:A)-de;return U(ee?he-Ne:he+(6-Ne),we);case f:case S:return te(me+"Hours",0);case c:return te(me+"Minutes",1);case u:return te(me+"Seconds",2);case l:return te(me+"Milliseconds",3);default:return this.clone()}},$.endOf=function(Y){return this.startOf(Y,!1)},$.$set=function(Y,re){var O,ee=D.p(Y),T="set"+(this.$u?"UTC":""),U=(O={},O[f]=T+"Date",O[S]=T+"Date",O[p]=T+"Month",O[v]=T+"FullYear",O[c]=T+"Hours",O[u]=T+"Minutes",O[l]=T+"Seconds",O[o]=T+"Milliseconds",O)[ee],te=ee===f?this.$D+(re-this.$W):re;if(ee===p||ee===v){var A=this.clone().set(S,1);A.$d[U](te),A.init(),this.$d=A.set(S,Math.min(this.$D,A.daysInMonth())).$d}else U&&this.$d[U](te);return this.init(),this},$.set=function(Y,re){return this.clone().$set(Y,re)},$.get=function(Y){return this[D.p(Y)]()},$.add=function(Y,re){var O,ee=this;Y=Number(Y);var T=D.p(re),U=function(we){var he=R(ee);return D.w(he.date(he.date()+Math.round(we*Y)),ee)};if(T===p)return this.set(p,this.$M+Y);if(T===v)return this.set(v,this.$y+Y);if(T===f)return U(1);if(T===h)return U(7);var te=(O={},O[u]=r,O[c]=i,O[l]=n,O)[T]||1,A=this.$d.getTime()+Y*te;return D.w(A,this)},$.subtract=function(Y,re){return this.add(-1*Y,re)},$.format=function(Y){var re=this,O=this.$locale();if(!this.isValid())return O.invalidDate||k;var ee=Y||"YYYY-MM-DDTHH:mm:ssZ",T=D.z(this),U=this.$H,te=this.$m,A=this.$M,we=O.weekdays,he=O.months,me=O.meridiem,de=function(Ie,X,je,De){return Ie&&(Ie[X]||Ie(re,ee))||je[X].slice(0,De)},Ne=function(Ie){return D.s(U%12||12,Ie,"0")},Ae=me||function(Ie,X,je){var De=Ie<12?"AM":"PM";return je?De.toLowerCase():De};return ee.replace(C,(function(Ie,X){return X||(function(je){switch(je){case"YY":return String(re.$y).slice(-2);case"YYYY":return D.s(re.$y,4,"0");case"M":return A+1;case"MM":return D.s(A+1,2,"0");case"MMM":return de(O.monthsShort,A,he,3);case"MMMM":return de(he,A);case"D":return re.$D;case"DD":return D.s(re.$D,2,"0");case"d":return String(re.$W);case"dd":return de(O.weekdaysMin,re.$W,we,2);case"ddd":return de(O.weekdaysShort,re.$W,we,3);case"dddd":return we[re.$W];case"H":return String(U);case"HH":return D.s(U,2,"0");case"h":return Ne(1);case"hh":return Ne(2);case"a":return Ae(U,te,!0);case"A":return Ae(U,te,!1);case"m":return String(te);case"mm":return D.s(te,2,"0");case"s":return String(re.$s);case"ss":return D.s(re.$s,2,"0");case"SSS":return D.s(re.$ms,3,"0");case"Z":return T}return null})(Ie)||T.replace(":","")}))},$.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},$.diff=function(Y,re,O){var ee,T=this,U=D.p(re),te=R(Y),A=(te.utcOffset()-this.utcOffset())*r,we=this-te,he=function(){return D.m(T,te)};switch(U){case v:ee=he()/12;break;case p:ee=he();break;case y:ee=he()/3;break;case h:ee=(we-A)/6048e5;break;case f:ee=(we-A)/864e5;break;case c:ee=we/i;break;case u:ee=we/r;break;case l:ee=we/n;break;default:ee=we}return O?ee:D.a(ee)},$.daysInMonth=function(){return this.endOf(p).$D},$.$locale=function(){return P[this.$L]},$.locale=function(Y,re){if(!Y)return this.$L;var O=this.clone(),ee=Z(Y,re,!0);return ee&&(O.$L=ee),O},$.clone=function(){return D.w(this.$d,this)},$.toDate=function(){return new Date(this.valueOf())},$.toJSON=function(){return this.isValid()?this.toISOString():null},$.toISOString=function(){return this.$d.toISOString()},$.toString=function(){return this.$d.toUTCString()},G})(),W=H.prototype;return R.prototype=W,[["$ms",o],["$s",l],["$m",u],["$H",c],["$W",f],["$M",p],["$y",v],["$D",S]].forEach((function(G){W[G[1]]=function($){return this.$g($,G[0],G[1])}})),R.extend=function(G,$){return G.$i||(G($,H,R),G.$i=!0),R},R.locale=Z,R.isDayjs=ne,R.unix=function(G){return R(1e3*G)},R.en=P[M],R.Ls=P,R.p={},R}))})(Vu)),Vu.exports}var mR=uk();const tt=Ao(mR);function sh(e){return e.trim().toLowerCase().normalize("NFKD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,"").replace(/-{2,}/g,"-")}const So=`
  id,
  name,
  subtitle,
  objective_id,
  parent_work_id,
  node_type,
  tags,
  order_hint,
  next_work_id,
  variant_of_work_id,
  description_markdown,
  estimated_minutes,
  notes,
  video_urls,
  visibility,
  owner_id,
  owner_email,
  created_at,
  updated_at,
  work_collaborators (
    id,
    email,
    role,
    user_id,
    created_at
  )
`,ck=e=>Array.from(new Set(e.map(t=>t.trim().toLowerCase()).filter(t=>t.length>0))),gR=e=>Array.isArray(e)?e.map(t=>typeof t=="string"?t.trim():"").filter(t=>t.length>0):[],nm=e=>Array.isArray(e)?Array.from(new Set(e.map(t=>typeof t=="string"?t.trim().toLowerCase():"").filter(t=>t.length>0))):[],dk=e=>(e??[]).map(t=>({id:`${t.id}`,email:t.email.toLowerCase(),role:t.role,userId:t.user_id??void 0,createdAt:t.created_at})),rm=(e,t)=>{var u,c;const n=dk(e.work_collaborators),r=n.map(f=>f.email),i=((u=t==null?void 0:t.actorEmail)==null?void 0:u.toLowerCase())??"",o=t?e.owner_id===t.actorId:!1,l=o||r.includes(i);return{id:e.id,name:e.name,subtitle:e.subtitle??void 0,objectiveId:e.objective_id,parentWorkId:e.parent_work_id??null,nodeType:e.node_type??void 0,tags:nm(e.tags),orderHint:typeof e.order_hint=="number"?e.order_hint:void 0,nextWorkId:e.next_work_id??null,variantOfWorkId:e.variant_of_work_id??null,descriptionMarkdown:e.description_markdown??"",estimatedMinutes:e.estimated_minutes??0,notes:e.notes??void 0,videoUrls:gR(e.video_urls),visibility:e.visibility??"private",ownerId:e.owner_id,ownerEmail:((c=e.owner_email)==null?void 0:c.toLowerCase())??"",collaborators:n,collaboratorEmails:r,createdAt:e.created_at,updatedAt:e.updated_at,canEdit:l,isOwner:o}};async function yR(e){const{data:t,error:n}=await Yt.from("works").select(So).order("name");if(n)throw console.error("No se pudieron cargar los trabajos compartidos",n),n;return t.map(r=>rm(r,e))}async function Ux(e,t){var S;const n=e.id??Bt(),r=ck(e.collaboratorEmails),i=t.actorEmail.trim().toLowerCase(),o=(S=e.nodeType)!=null&&S.trim()?e.nodeType.trim():null,l=nm(e.tags??[]),u=typeof e.orderHint=="number"&&Number.isFinite(e.orderHint)?e.orderHint:null,c=e.nextWorkId??null,f=e.variantOfWorkId??null,{data:h,error:p}=await Yt.from("works").insert({id:n,name:e.name,subtitle:e.subtitle??null,objective_id:e.objectiveId,parent_work_id:e.parentWorkId??null,node_type:o,tags:l,order_hint:u,next_work_id:c,variant_of_work_id:f,description_markdown:e.descriptionMarkdown,estimated_minutes:e.estimatedMinutes,notes:e.notes??null,video_urls:e.videoUrls,visibility:e.visibility,owner_id:t.actorId,owner_email:i,updated_at:new Date().toISOString()}).select(So).maybeSingle();if(p||!h)throw console.error("No se pudo crear el trabajo",p),p??new Error("Falta respuesta al crear trabajo");if(r.length>0){const k=r.map(C=>({work_id:h.id,email:C})),{error:E}=await Yt.from("work_collaborators").insert(k);if(E)throw console.error("No se pudieron guardar los colaboradores",E),E}const{data:y,error:v}=await Yt.from("works").select(So).eq("id",h.id).maybeSingle();if(v||!y)throw console.error("No se pudo refrescar el trabajo creado",v),v??new Error("No se pudo cargar el trabajo creado");return rm(y,t)}async function vR(e,t,n){const r={};t.name!==void 0&&(r.name=t.name),t.subtitle!==void 0&&(r.subtitle=t.subtitle),t.objectiveId!==void 0&&(r.objective_id=t.objectiveId),t.parentWorkId!==void 0&&(r.parent_work_id=t.parentWorkId),t.nodeType!==void 0&&(r.node_type=t.nodeType),t.tags!==void 0&&(r.tags=nm(t.tags)),t.orderHint!==void 0&&(r.order_hint=t.orderHint),t.nextWorkId!==void 0&&(r.next_work_id=t.nextWorkId),t.variantOfWorkId!==void 0&&(r.variant_of_work_id=t.variantOfWorkId),t.descriptionMarkdown!==void 0&&(r.description_markdown=t.descriptionMarkdown),t.estimatedMinutes!==void 0&&(r.estimated_minutes=t.estimatedMinutes),t.notes!==void 0&&(r.notes=t.notes),t.videoUrls!==void 0&&(r.video_urls=t.videoUrls),t.visibility!==void 0&&(r.visibility=t.visibility),r.updated_at=new Date().toISOString();let i=null;if(Object.keys(r).length>0){const{data:o,error:l}=await Yt.from("works").update(r).eq("id",e).select(So).maybeSingle();if(l||!o)throw console.error("No se pudo actualizar el trabajo",l),l??new Error("Falta respuesta al actualizar trabajo");i=o}else{const{data:o,error:l}=await Yt.from("works").select(So).eq("id",e).maybeSingle();if(l||!o)throw l??new Error("Trabajo no encontrado");i=o}if(t.collaboratorEmails){const o=ck(t.collaboratorEmails),l=dk(i.work_collaborators),u=l.map(y=>y.email),c=o.filter(y=>!u.includes(y)),f=l.filter(y=>!o.includes(y.email));if(c.length>0){const y=c.map(S=>({work_id:e,email:S})),{error:v}=await Yt.from("work_collaborators").insert(y);if(v)throw console.error("No se pudieron aadir los colaboradores",v),v}if(f.length>0){const y=f.map(S=>S.email),{error:v}=await Yt.from("work_collaborators").delete().eq("work_id",e).in("email",y);if(v)throw console.error("No se pudieron eliminar colaboradores",v),v}const{data:h,error:p}=await Yt.from("works").select(So).eq("id",e).maybeSingle();if(p||!h)throw p??new Error("Error al refrescar colaboradores");i=h}return rm(i,n)}async function xR(e){const{error:t}=await Yt.from("works").delete().eq("id",e);if(t)throw console.error("No se pudo eliminar el trabajo",t),t}const kt={objectives:"sport-planner-objetivos",works:"sport-planner-trabajos",sessions:"sport-planner-sesiones",assistants:"sport-planner-asistentes",plans:"sport-planner-plans",kungfuPrograms:"sport-planner-kungfu-programs",kungfuCadence:"sport-planner-kungfu-cadence",kungfuTodayPlan:"sport-planner-kungfu-today-plan",workTaxonomy:"sport-planner-work-taxonomy"},fk=typeof window<"u",xt=()=>new Date().toISOString(),us="18:30",ps="classes",Di="personal-kungfu",ms=[{id:"default",name:"Kung Fu  activo",enabled:!0,include:[{byTags:["kungfu"]}],exclude:[]}],Ti={targetsDays:{work:7,technique:5,segment:8,form:10,drill:7},overrides:[]},dn={limitMode:"count",maxItems:12,minutesBudget:30,template:{totalMinutes:30,focusMinutes:18,rouletteMinutes:10,recapMinutes:2},defaultMinutesByNodeType:{work:3,technique:1.5,segment:6,form:15,drill:4,link:2},focusSelectors:[],rouletteSelectors:[],groups:[{id:"formas",name:"Formas",enabled:!0,order:1,type:"work",limitMode:"minutes",minutesBudget:18,strategy:"overdue",hierarchyRule:"prefer_leaves",include:[{byNodeTypes:["segment","form"]}],exclude:[]},{id:"tecnicas",name:"Tcnicas",enabled:!0,order:2,type:"work",limitMode:"minutes",minutesBudget:10,strategy:"weighted",hierarchyRule:"allow_all",include:[{byNodeTypes:["technique"]},{byTags:["roulette"]}],exclude:[]},{id:"recap",name:"Recap",enabled:!0,order:99,type:"note",limitMode:"minutes",minutesBudget:2}]},Ri={nodeTypes:[{key:"form",label:"Form"},{key:"segment",label:"Segment"},{key:"application",label:"Application"},{key:"technique",label:"Technique"},{key:"drill",label:"Drill"},{key:"work",label:"Work"},{key:"link",label:"Link"},{key:"style",label:"Style"}],tags:[]},wR=e=>e==="class"||e==="personal",bR=(e,t)=>{if(!e||typeof e!="object")return t;const n=e,r=String(n.id??"").trim();if(!r)return t;const i=wR(n.kind)?n.kind:t.kind,o=String(n.name??"").trim()||t.name,l=typeof n.enabled=="boolean"?n.enabled:t.enabled,u=String(n.createdAt??"").trim()||t.createdAt,c=String(n.updatedAt??"").trim()||t.updatedAt;return{...t,id:r,kind:i,name:o,enabled:l,cadence:n.cadence??t.cadence,todayPlan:n.todayPlan??t.todayPlan,createdAt:u,updatedAt:c}},hk=(e,t,n)=>[{id:ps,name:"Clases",kind:"class",enabled:!0,createdAt:e,updatedAt:e},{id:Di,name:"Personal Kung Fu",kind:"personal",enabled:!0,cadence:t,todayPlan:n,createdAt:e,updatedAt:e}],cs=(e,t,n,r)=>{const i=hk(r,t,n),l=(Array.isArray(e)?e:[]).map(f=>{const h=String((f==null?void 0:f.id)??"").trim(),p=i.find(y=>y.id===h)??{id:h||Bt(),name:"Plan",kind:"personal",enabled:!0,cadence:t,todayPlan:n,createdAt:r,updatedAt:r};return bR(f,p)}).filter(f=>f.id.length>0),u=new Map;l.forEach(f=>{u.set(f.id,f)}),i.forEach(f=>{u.has(f.id)||u.set(f.id,f)});const c=u.get(Di);return c&&u.set(Di,{...c,cadence:c.cadence??t,todayPlan:c.todayPlan??n}),Array.from(u.values()).sort((f,h)=>{const p=f.kind===h.kind?0:f.kind==="class"?-1:1;return p!==0?p:f.name.localeCompare(h.name,"es",{sensitivity:"base"})})},kR=e=>{const n=(Array.isArray(e)?e:[]).map(i=>{if(!i||typeof i!="object")return null;const o=i,l=String(o.key??"").trim().toLowerCase(),u=String(o.label??"").trim();return l?{key:l,label:u||l}:null}).filter(Boolean),r=new Map;return n.forEach(i=>{r.set(i.key,i)}),Ri.nodeTypes.forEach(i=>{r.has(i.key)||r.set(i.key,i)}),Array.from(r.values()).sort((i,o)=>i.label.localeCompare(o.label,"en",{sensitivity:"base"}))},SR=e=>{const n=(Array.isArray(e)?e:[]).map(i=>{if(typeof i=="string"){const u=i.trim().toLowerCase();return u?{name:u}:null}if(!i||typeof i!="object")return null;const l=String(i.name??"").trim().toLowerCase();return l?{name:l}:null}).filter(Boolean),r=new Map;return n.forEach(i=>r.set(i.name,i)),Array.from(r.values()).sort((i,o)=>i.name.localeCompare(o.name,"en",{sensitivity:"base"}))},qn=(e,t)=>{const n=(e&&typeof e=="object"?e:{})??{},r=kR(n.nodeTypes),i=SR(n.tags),o=new Map(r.map(u=>[u.key,u])),l=new Map(i.map(u=>[u.name,u]));return t.forEach(u=>{const c=(u.nodeType??"").trim().toLowerCase();c&&!o.has(c)&&o.set(c,{key:c,label:c}),(u.tags??[]).forEach(f=>{const h=String(f??"").trim().toLowerCase();h&&!l.has(h)&&l.set(h,{name:h})})}),{nodeTypes:Array.from(o.values()).sort((u,c)=>u.label.localeCompare(c.label,"en",{sensitivity:"base"})),tags:Array.from(l.values()).sort((u,c)=>u.name.localeCompare(c.name,"en",{sensitivity:"base"}))}},Wx=e=>Array.from(new Set((Array.isArray(e)?e:[]).map(t=>String(t??"").trim().toLowerCase()).filter(t=>t.length>0))),ER=e=>Array.from(new Set((Array.isArray(e)?e:[]).map(t=>String(t??"").trim()).filter(t=>t.length>0))),pk=e=>e==="count"||e==="minutes"||e==="both",_R=e=>e==="work"||e==="note",CR=e=>e==="overdue"||e==="weighted",jR=e=>e==="allow_all"||e==="prefer_leaves",NR=e=>{const t={},n=Wx(e.byTags),r=Wx(e.byNodeTypes),i=ER(e.byWorkIds);return n.length>0&&(t.byTags=n),r.length>0&&(t.byNodeTypes=r),i.length>0&&(t.byWorkIds=i),t},Io=e=>(e??[]).map(NR).filter(t=>Object.keys(t).length>0),TR=e=>{if(!Array.isArray(e))return[];const t=e.map(n=>Number(n)).filter(n=>Number.isFinite(n)).map(n=>Math.round(n)).filter(n=>n>=0&&n<=6);return Array.from(new Set(t)).sort((n,r)=>n-r)},IR=e=>{const t={};return!e||typeof e!="object"?{...dn.defaultMinutesByNodeType}:(Object.entries(e).forEach(([n,r])=>{const i=n.trim().toLowerCase(),o=Number(r);i&&Number.isFinite(o)&&(t[i]=Math.max(.25,o))}),Object.keys(t).length>0?t:{...dn.defaultMinutesByNodeType})},PR=(e,t)=>{const n=String(e.id??"").trim()||Bt(),r=_R(e.type)?e.type:"work",i=typeof e.enabled=="boolean"?e.enabled:!0,o=String(e.name??"").trim()||(r==="note"?"Recap":"Grupo"),l=Number.isFinite(Number(e.order))?Number(e.order):t,u=TR(e.daysOfWeek),c=pk(e.limitMode)?e.limitMode:"minutes",f=Number.isFinite(Number(e.maxItems))?Math.max(0,Math.round(Number(e.maxItems))):void 0,h=Number.isFinite(Number(e.minutesBudget))?Math.max(0,Number(e.minutesBudget)):void 0,p=CR(e.strategy)?e.strategy:"overdue",y=jR(e.hierarchyRule)?e.hierarchyRule:"allow_all",v=Io(e.include),S=Io(e.exclude);return{id:n,name:o,enabled:i,order:l,type:r,daysOfWeek:u,limitMode:c,maxItems:f,minutesBudget:h,strategy:p,hierarchyRule:y,include:v,exclude:S}},AR=e=>{var f,h,p;const t=Math.max(0,Number((f=e.template)==null?void 0:f.focusMinutes)||0),n=Math.max(0,Number((h=e.template)==null?void 0:h.rouletteMinutes)||0),r=Math.max(0,Number((p=e.template)==null?void 0:p.recapMinutes)||0),i=Io(e.focusSelectors),o=Io(e.rouletteSelectors),l=i.length>0?i:[{byNodeTypes:["segment","form"]}],u=o.length>0?o:[{byNodeTypes:["technique"]},{byTags:["roulette"]}],c=[{id:"formas",name:"Formas",enabled:!0,order:1,type:"work",limitMode:"minutes",minutesBudget:t>0?t:18,strategy:"overdue",hierarchyRule:"prefer_leaves",include:l,exclude:[]},{id:"tecnicas",name:"Tcnicas",enabled:!0,order:2,type:"work",limitMode:"minutes",minutesBudget:n>0?n:10,strategy:"weighted",hierarchyRule:"allow_all",include:u,exclude:[]}];return r>0&&c.push({id:"recap",name:"Recap",enabled:!0,order:99,type:"note",limitMode:"minutes",minutesBudget:r}),c},qu=e=>{var S,k,E;const t=e??dn,n=pk(t.limitMode)?t.limitMode:dn.limitMode,r=Math.max(1,Math.round(Number(t.maxItems)||dn.maxItems)),i=Math.max(1,Number(t.minutesBudget)||dn.minutesBudget),o=Math.max(0,Number((S=t.template)==null?void 0:S.focusMinutes)||dn.template.focusMinutes),l=Math.max(0,Number((k=t.template)==null?void 0:k.rouletteMinutes)||dn.template.rouletteMinutes),u=Math.max(0,Number((E=t.template)==null?void 0:E.recapMinutes)||dn.template.recapMinutes),c=Math.max(0,o+l+u),f=IR(t.defaultMinutesByNodeType),h=Io(t.focusSelectors),p=Io(t.rouletteSelectors),v=((t.groups??[]).length>0?t.groups??[]:AR(t)).map((C,_)=>PR(C,_+1)).sort((C,_)=>C.order-_.order).map((C,_)=>({...C,order:_+1}));return{...t,limitMode:n,maxItems:r,minutesBudget:i,template:{totalMinutes:c,focusMinutes:o,rouletteMinutes:l,recapMinutes:u},defaultMinutesByNodeType:f,focusSelectors:h,rouletteSelectors:p,groups:v}},Dn=e=>{if(!e)return null;const t=e.trim();return t.length>0?t:null},Yu=e=>Array.from(new Set((e??[]).map(t=>(t??"").trim().toLowerCase()).filter(t=>t.length>0))),wr=e=>{if(!e)return;const t=e.trim();return t.length>0?t:void 0},lp=e=>Array.from(new Set((e??[]).map(t=>(t??"").trim().toLowerCase()).filter(t=>t.length>0))),Ni=e=>{const t=xt(),n=Dn(e.parentWorkId??null),r=Dn(e.nextWorkId??null),i=Dn(e.variantOfWorkId??null),o=wr(e.nodeType??void 0),l=Yu(e.tags),u=typeof e.orderHint=="number"&&Number.isFinite(e.orderHint)?e.orderHint:void 0,c=(e.collaborators??[]).map((p,y)=>({id:p.id??`${e.id}-collab-${y}`,email:(p.email??"").trim().toLowerCase(),role:p.role??"editor",userId:p.userId??null,createdAt:p.createdAt??t})),f=lp([...e.collaboratorEmails??[],...c.map(p=>p.email)]),h=Array.isArray(e.videoUrls)?e.videoUrls.map(p=>typeof p=="string"?p.trim():"").filter(Boolean):[];return{id:e.id,name:e.name??"Trabajo sin nombre",subtitle:wr(e.subtitle),objectiveId:e.objectiveId??"",parentWorkId:n,nodeType:o,tags:l,orderHint:u,nextWorkId:r,variantOfWorkId:i,descriptionMarkdown:e.descriptionMarkdown??"",estimatedMinutes:e.estimatedMinutes??0,notes:wr(e.notes),videoUrls:h,createdAt:e.createdAt??t,updatedAt:e.updatedAt??t,visibility:e.visibility??"private",ownerId:e.ownerId??"local-owner",ownerEmail:(e.ownerEmail??"").trim().toLowerCase(),collaborators:c,collaboratorEmails:f,canEdit:e.canEdit??!0,isOwner:e.isOwner??!0}},RR=(e,t,n)=>{var o;if(!n)return!1;if(n===t)return!0;const r=new Set;let i=n;for(;i;){if(i===t)return!0;if(r.has(i))break;r.add(i),i=((o=e.find(u=>u.id===i))==null?void 0:o.parentWorkId)??null}return!1},an=(e,t)=>{if(!fk)return t;try{const n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(n){return console.warn(`No se pudo cargar ${e} desde localStorage`,n),t}},mk=e=>e==="present"||e==="absent"||e==="pending",gk=e=>e==="present"||e==="absent",up=e=>(e??[]).map(t=>{const n=mk(t.status)?t.status:"pending",r=gk(t.actualStatus)?t.actualStatus:void 0;return{assistantId:t.assistantId,status:n,actualStatus:r,notes:t.notes,actualNotes:t.actualNotes}}),ut=e=>{if(!fk)return;const t={objectives:an(kt.objectives,[]),works:an(kt.works,[]),sessions:an(kt.sessions,[]),assistants:an(kt.assistants,[]),plans:an(kt.plans,[]),kungfuPrograms:an(kt.kungfuPrograms,ms),kungfuCadence:an(kt.kungfuCadence,Ti),kungfuTodayPlan:an(kt.kungfuTodayPlan,dn),workTaxonomy:an(kt.workTaxonomy,Ri)},n=cp({...t,...e});window.localStorage.setItem(kt.objectives,JSON.stringify(n.objectives)),window.localStorage.setItem(kt.works,JSON.stringify(n.works)),window.localStorage.setItem(kt.sessions,JSON.stringify(n.sessions)),window.localStorage.setItem(kt.assistants,JSON.stringify(n.assistants)),window.localStorage.setItem(kt.plans,JSON.stringify(n.plans)),window.localStorage.setItem(kt.kungfuPrograms,JSON.stringify(n.kungfuPrograms)),window.localStorage.setItem(kt.kungfuCadence,JSON.stringify(n.kungfuCadence)),window.localStorage.setItem(kt.kungfuTodayPlan,JSON.stringify(n.kungfuTodayPlan)),window.localStorage.setItem(kt.workTaxonomy,JSON.stringify(n.workTaxonomy))},cp=e=>{const t=xt(),n=(e.works??[]).map(u=>{const c=u.parent_work_id;return Ni({...u,id:u.id,parentWorkId:Dn(u.parentWorkId??c??null)})}),r=qn(e.workTaxonomy??Ri,n),i=e.kungfuCadence??Ti,o=qu(e.kungfuTodayPlan??dn),l=cs(e.plans,i,o,t);return{objectives:e.objectives??[],works:n,sessions:(e.sessions??[]).map(u=>({...u,planId:(u.planId??"").trim()||((u.kind??"class")==="personal"?Di:ps),kind:u.kind??"class",startTime:u.startTime??us,workItems:(u.workItems??[]).map(c=>({...c,focusLabel:c.focusLabel,completed:c.completed??!1})),attendance:up(u.attendance)})),assistants:e.assistants??[],plans:l,kungfuPrograms:e.kungfuPrograms??ms,kungfuCadence:i,kungfuTodayPlan:o,workTaxonomy:r}},Ce=fR((e,t)=>({ready:!1,objectives:[],works:[],worksLoading:!1,sessions:[],assistants:[],plans:hk(xt(),Ti,dn),kungfuPrograms:ms,kungfuCadence:Ti,kungfuTodayPlan:dn,workTaxonomy:Ri,hydrate:()=>{if(t().ready)return;const n=an(kt.objectives,[]),r=an(kt.works,[]).map(S=>{const k=S.parent_work_id;return Ni({...S,id:S.id,parentWorkId:Dn(S.parentWorkId??k??null)})}),i=an(kt.workTaxonomy,Ri),o=qn(i,r),l=an(kt.sessions,[]).map(S=>({...S,planId:(S.planId??"").trim()||((S.kind??"class")==="personal"?Di:ps),kind:S.kind??"class",startTime:S.startTime??us,workItems:(S.workItems??[]).map(k=>({...k,focusLabel:k.focusLabel,completed:k.completed??!1})),attendance:up(S.attendance)})),u=an(kt.assistants,[]),c=an(kt.kungfuPrograms,ms),f=an(kt.kungfuCadence,Ti),h=an(kt.kungfuTodayPlan,dn),p=qu(h),y=an(kt.plans,[]),v=cs(y,f,p,xt());e({objectives:n,works:r,sessions:l,assistants:u,plans:v,kungfuPrograms:c,kungfuCadence:f,kungfuTodayPlan:p,workTaxonomy:o,ready:!0})},setCollections:n=>{e(r=>{const i=cp({objectives:n.objectives??r.objectives,works:n.works??r.works,sessions:n.sessions??r.sessions,assistants:n.assistants??r.assistants,plans:n.plans??r.plans,kungfuPrograms:n.kungfuPrograms??r.kungfuPrograms,kungfuCadence:n.kungfuCadence??r.kungfuCadence,kungfuTodayPlan:n.kungfuTodayPlan??r.kungfuTodayPlan,workTaxonomy:n.workTaxonomy??r.workTaxonomy}),o={...r,...i,ready:!0};return ut(i),o})},setWorks:n=>{const r=n.map(i=>Ni(i));e(i=>{const o=qn(i.workTaxonomy,r),l={...i,works:r,workTaxonomy:o};return ut({works:r}),l})},loadWorks:async n=>{e({worksLoading:!0});try{const i=(await yR(n)).map(p=>Ni(p)),o=t().works,l=new Set(i.map(p=>p.id)),u=o.filter(p=>!l.has(p.id)&&(!p.ownerId||p.ownerId==="local-owner"||p.ownerId===n.actorId)),c=[];for(const p of u)try{const y=await Ux({id:p.id,name:p.name,subtitle:p.subtitle,objectiveId:p.objectiveId,parentWorkId:p.parentWorkId??null,nodeType:p.nodeType,tags:p.tags,orderHint:p.orderHint,nextWorkId:p.nextWorkId??null,variantOfWorkId:p.variantOfWorkId??null,descriptionMarkdown:p.descriptionMarkdown,estimatedMinutes:p.estimatedMinutes,notes:p.notes,videoUrls:p.videoUrls,visibility:p.visibility??"private",collaboratorEmails:p.collaboratorEmails??[]},n),v=Ni(y);c.push(v),l.add(v.id)}catch(y){console.error(`No se pudo migrar el trabajo legacy ${p.id}`,y)}const f=[...i];c.forEach(p=>{if(!l.has(p.id))l.add(p.id),f.push(p);else{const y=f.findIndex(v=>v.id===p.id);y>=0?f[y]=p:f.push(p)}});const h=f.map(p=>Ni(p)).sort((p,y)=>p.name.localeCompare(y.name,"es",{sensitivity:"base"}));e(p=>{const y=qn(p.workTaxonomy,h),v={...p,works:h,workTaxonomy:y};return ut({works:h}),v})}finally{e({worksLoading:!1})}},reset:()=>{e(n=>{const r=cp({objectives:[],works:[],sessions:[],assistants:[],kungfuPrograms:ms,kungfuCadence:Ti,kungfuTodayPlan:dn,workTaxonomy:Ri}),i={...n,...r,ready:!0,worksLoading:!1};return ut(i),i})},setKungfuPrograms:n=>{const r=Array.isArray(n)?n:ms;e(i=>{const o={...i,kungfuPrograms:r};return ut(o),o})},setKungfuCadence:n=>{const r=n??Ti;e(i=>{const o={...i,kungfuCadence:r};return ut(o),o})},setKungfuTodayPlan:n=>{const r=qu(n??dn);e(i=>{const o={...i,kungfuTodayPlan:r};return ut(o),o})},setWorkTaxonomy:n=>{e(r=>{const i=qn(n??Ri,r.works),o={...r,workTaxonomy:i};return ut(o),o})},addPlan:({name:n,kind:r})=>{const i=xt(),o={id:Bt(),name:n.trim()||(r==="class"?"Clases":"Personal"),kind:r,enabled:!0,cadence:r==="personal"?t().kungfuCadence:void 0,todayPlan:r==="personal"?t().kungfuTodayPlan:void 0,createdAt:i,updatedAt:i};return e(l=>{const u=cs([...l.plans,o],l.kungfuCadence,l.kungfuTodayPlan,i),c={...l,plans:u};return ut(c),c}),o},updatePlan:(n,r)=>{const i=xt();e(o=>{const l=cs(o.plans.map(c=>c.id===n?{...c,...r,updatedAt:i}:c),o.kungfuCadence,o.kungfuTodayPlan,i),u={...o,plans:l};return ut(u),u})},duplicatePlan:n=>{const r=t().plans.find(l=>l.id===n);if(!r)return;const i=xt(),o={...r,id:Bt(),name:`${r.name} (copia)`,createdAt:i,updatedAt:i};return e(l=>{const u=cs([...l.plans,o],l.kungfuCadence,l.kungfuTodayPlan,i),c={...l,plans:u};return ut(c),c}),o},deletePlan:n=>{const r=t();return n===ps||n===Di||r.sessions.some(o=>(o.planId??"")===n)?!1:(e(o=>{const l=xt(),u=cs(o.plans.filter(f=>f.id!==n),o.kungfuCadence,o.kungfuTodayPlan,l),c={...o,plans:u};return ut(c),c}),!0)},upsertNodeType:n=>{const r=sh(n);if(!r)return null;const i=n.trim()||r;return e(o=>{const l=o.workTaxonomy.nodeTypes??[],u=l.some(h=>h.key===r)?l.map(h=>h.key===r?{...h,label:i}:h):[...l,{key:r,label:i}],c=qn({...o.workTaxonomy,nodeTypes:u},o.works),f={...o,workTaxonomy:c};return ut(f),f}),r},removeNodeType:n=>{const r=(n??"").trim().toLowerCase();return!r||t().works.some(o=>(o.nodeType??"").trim().toLowerCase()===r)?!1:(e(o=>{const l=(o.workTaxonomy.nodeTypes??[]).filter(f=>f.key!==r),u=qn({...o.workTaxonomy,nodeTypes:l},o.works),c={...o,workTaxonomy:u};return ut(c),c}),!0)},upsertTag:n=>{const r=sh(n);return r?(e(i=>{const o=i.workTaxonomy.tags??[],l=o.some(f=>f.name===r)?o:[...o,{name:r}],u=qn({...i.workTaxonomy,tags:l},i.works),c={...i,workTaxonomy:u};return ut(c),c}),r):null},removeTag:n=>{const r=sh(n??"");return!r||t().works.some(o=>(o.tags??[]).includes(r))?!1:(e(o=>{const l=(o.workTaxonomy.tags??[]).filter(f=>f.name!==r),u=qn({...o.workTaxonomy,tags:l},o.works),c={...o,workTaxonomy:u};return ut(c),c}),!0)},addObjective:n=>{const r={id:Bt(),name:n.name,colorHex:n.colorHex,descriptionMarkdown:n.descriptionMarkdown,createdAt:xt(),updatedAt:xt()};return e(i=>{const o={objectives:[...i.objectives,r]},l={...i,...o};return ut(l),l}),r},updateObjective:(n,r)=>{e(i=>{const o=i.objectives.map(u=>u.id===n?{...u,...r,updatedAt:xt()}:u),l={...i,objectives:o};return ut(l),l})},deleteObjective:n=>t().works.some(i=>i.objectiveId===n)?!1:(e(i=>{const o=i.objectives.filter(u=>u.id!==n),l={...i,objectives:o};return ut(l),l}),!0),addWork:async(n,r)=>{const i=t(),o=Dn(n.parentWorkId),l=o&&i.works.some(h=>h.id===o)?o:null,u={name:n.name,subtitle:wr(n.subtitle),objectiveId:n.objectiveId,parentWorkId:l,nodeType:wr(n.nodeType)??void 0,tags:Yu(n.tags),orderHint:typeof n.orderHint=="number"&&Number.isFinite(n.orderHint)?n.orderHint:void 0,nextWorkId:Dn(n.nextWorkId??null),variantOfWorkId:Dn(n.variantOfWorkId??null),descriptionMarkdown:n.descriptionMarkdown,estimatedMinutes:n.estimatedMinutes,notes:wr(n.notes),videoUrls:(n.videoUrls??[]).map(h=>h.trim()).filter(h=>h.length>0),visibility:n.visibility??"private",collaboratorEmails:lp(n.collaboratorEmails??[])},c=await Ux(u,r),f=Ni(c);return e(h=>{const p=[...h.works.filter(v=>v.id!==f.id),f],y=qn(h.workTaxonomy,p);return ut({works:p,workTaxonomy:y}),{...h,works:p,workTaxonomy:y}}),f},updateWork:async(n,r,i)=>{const o=t(),l=o.works.find(p=>p.id===n);if(!l)throw new Error("Trabajo no encontrado");let u=l.parentWorkId??null;if(r.parentWorkId!==void 0){const p=Dn(r.parentWorkId);p&&(!o.works.some(y=>y.id===p)||RR(o.works,n,p))?u=null:u=p}const c={...r,subtitle:r.subtitle!==void 0?wr(r.subtitle)??null:void 0,parentWorkId:u,nodeType:r.nodeType!==void 0?wr(r.nodeType??void 0)??null:void 0,tags:r.tags?Yu(r.tags):void 0,orderHint:r.orderHint!==void 0?typeof r.orderHint=="number"&&Number.isFinite(r.orderHint)?r.orderHint:null:void 0,nextWorkId:r.nextWorkId!==void 0?Dn(r.nextWorkId??null):void 0,variantOfWorkId:r.variantOfWorkId!==void 0?Dn(r.variantOfWorkId??null):void 0,notes:r.notes!==void 0?wr(r.notes)??null:void 0,videoUrls:r.videoUrls?r.videoUrls.map(p=>p.trim()).filter(p=>p.length>0):void 0,collaboratorEmails:r.collaboratorEmails?lp(r.collaboratorEmails):void 0},f=await vR(n,c,i),h=Ni(f);return e(p=>{const y=p.works.map(S=>S.id===h.id?h:S),v=qn(p.workTaxonomy,y);return ut({works:y,workTaxonomy:v}),{...p,works:y,workTaxonomy:v}}),h},deleteWork:async(n,r)=>t().sessions.some(l=>l.workItems.some(u=>u.workId===n))||t().works.some(l=>l.parentWorkId===n)?!1:(await xR(n),e(l=>{const u=l.works.filter(f=>f.id!==n),c=qn(l.workTaxonomy,u);return ut({works:u,workTaxonomy:c}),{...l,works:u,workTaxonomy:c}}),!0),addSession:n=>{var o;const r=(n.planId??"").trim()||((n.kind??"class")==="personal"?Di:ps),i={id:Bt(),planId:r,date:n.date,kind:n.kind??((o=t().plans.find(l=>l.id===r))==null?void 0:o.kind)??"class",title:n.title,description:n.description,notes:n.notes,notesByGroupId:n.notesByGroupId,workItems:[],attendance:[],startTime:n.startTime??us,createdAt:xt(),updatedAt:xt()};return e(l=>{const u=[...l.sessions,i],c={...l,sessions:u};return ut(c),c}),i},duplicateSession:(n,r)=>{const i=t().sessions.find(u=>u.id===n);if(!i)return;const o=xt(),l={...i,id:Bt(),date:r,startTime:i.startTime??us,createdAt:o,updatedAt:o,title:`${i.title} (copia)`};return l.workItems=i.workItems.slice().sort((u,c)=>u.order-c.order).map((u,c)=>({...u,id:Bt(),order:c,completed:!1})),l.attendance=i.attendance.map(u=>({assistantId:u.assistantId,status:"pending",notes:u.notes,actualStatus:void 0,actualNotes:void 0})),e(u=>{const c=[...u.sessions,l],f={...u,sessions:c};return ut(f),f}),l},updateSession:(n,r)=>{e(i=>{const o=i.sessions.map(u=>u.id===n?{...u,...r,updatedAt:xt()}:u),l={...i,sessions:o};return ut(l),l})},deleteSession:n=>{e(r=>{const i=r.sessions.filter(l=>l.id!==n),o={...r,sessions:i};return ut(o),o})},updateSessionWorkItems:(n,r)=>{e(i=>{const o=i.sessions.map(u=>u.id===n?{...u,workItems:r.map((c,f)=>({...c,order:f})),updatedAt:xt()}:u),l={...i,sessions:o};return ut(l),l})},addWorkToSession:(n,r)=>{const i=t().sessions.find(u=>u.id===n);if(!i)return;const o={id:Bt(),workId:r.workId,customDescriptionMarkdown:r.customDescriptionMarkdown,customDurationMinutes:r.customDurationMinutes,notes:r.notes,focusLabel:r.focusLabel,completed:!1,order:i.workItems.length},l={...i,workItems:[...i.workItems,o],updatedAt:xt()};return e(u=>{const c=u.sessions.map(h=>h.id===n?l:h),f={...u,sessions:c};return ut(f),f}),o},duplicateSessionWork:(n,r)=>{let i,o=!1;return e(l=>{const u=l.sessions.map(f=>{if(f.id!==n)return f;const h=f.workItems.findIndex(k=>k.id===r);if(h===-1)return f;o=!0;const y={...f.workItems[h],id:Bt(),completed:!1},v=[...f.workItems];v.splice(h+1,0,y);const S=v.map((k,E)=>{const C={...k,order:E};return k.id===y.id&&(i=C),C});return{...f,workItems:S,updatedAt:xt()}});if(!o)return l;const c={...l,sessions:u};return ut(c),c}),i},removeWorkFromSession:(n,r)=>{e(i=>{const o=i.sessions.map(u=>{if(u.id!==n)return u;const c=u.workItems.filter(f=>f.id!==r).map((f,h)=>({...f,order:h}));return{...u,workItems:c,updatedAt:xt()}}),l={...i,sessions:o};return ut(l),l})},toggleSessionWorkCompletion:(n,r,i)=>{e(o=>{const l=o.sessions.map(c=>c.id!==n?c:{...c,workItems:c.workItems.map(f=>f.id===r?{...f,completed:i}:f),updatedAt:xt()}),u={...o,sessions:l};return ut(u),u})},reorderSessionWork:(n,r,i)=>{e(o=>{const l=o.sessions.map(c=>{if(c.id!==n)return c;const f=[...c.workItems],[h]=f.splice(r,1);return f.splice(i,0,h),{...c,workItems:f.map((p,y)=>({...p,order:y})),updatedAt:xt()}}),u={...o,sessions:l};return ut(u),u})},updateSessionWorkDetails:(n,r,i)=>{e(o=>{const l=o.sessions.map(c=>c.id!==n?c:{...c,workItems:c.workItems.map(f=>f.id===r?{...f,...i}:f),updatedAt:xt()}),u={...o,sessions:l};return ut(u),u})},replaceSessionWork:(n,r,i)=>{t().works.some(o=>o.id===i)&&e(o=>{const l=o.sessions.map(c=>{if(c.id!==n)return c;const f=c.workItems.map(h=>h.id!==r?h:{...h,workId:i,customDescriptionMarkdown:void 0,customDurationMinutes:void 0,notes:void 0,focusLabel:void 0,completed:!1});return{...c,workItems:f,updatedAt:xt()}}),u={...o,sessions:l};return ut(u),u})},setAttendanceActualStatus:(n,r,i,o)=>{e(l=>{const u=l.sessions.map(f=>{if(f.id!==n)return f;const h=f.attendance.find(y=>y.assistantId===r);let p;if(h)p=f.attendance.map(y=>{if(y.assistantId!==r)return y;const v={...y,actualStatus:i};return typeof o<"u"&&(v.actualNotes=o),v});else{const y={assistantId:r,status:"pending",actualStatus:i};typeof o<"u"&&(y.actualNotes=o),p=[...f.attendance,y]}return{...f,attendance:p,updatedAt:xt()}}),c={...l,sessions:u};return ut(c),c})},setAttendanceStatus:(n,r,i,o)=>{e(l=>{const u=l.sessions.map(f=>{if(f.id!==n)return f;const h=f.attendance.find(y=>y.assistantId===r);let p;return h?p=f.attendance.map(y=>y.assistantId===r?{...y,status:i,notes:o}:y):p=[...f.attendance,{assistantId:r,status:i,notes:o}],{...f,attendance:p,updatedAt:xt()}}),c={...l,sessions:u};return ut(c),c})},addAssistant:n=>{const r={id:Bt(),name:n.name,notes:n.notes,active:n.active??!0,createdAt:xt(),updatedAt:xt()};return e(i=>{const o=[...i.assistants,r],l={...i,assistants:o};return ut(l),l}),r},updateAssistant:(n,r)=>{e(i=>{const o=i.assistants.map(u=>u.id===n?{...u,...r,updatedAt:xt()}:u),l={...i,assistants:o};return ut(l),l})},deleteAssistant:n=>{e(r=>{const i=r.assistants.filter(u=>u.id!==n),o=r.sessions.map(u=>({...u,attendance:u.attendance.filter(c=>c.assistantId!==n)})),l={...r,assistants:i,sessions:o};return ut(l),l})},importBackup:n=>{if((n.version??1)!==1)throw new Error("Versin de backup no soportada");const i=xt(),o=(n.objetivos??[]).map(_=>({..._,createdAt:_.createdAt??i,updatedAt:_.updatedAt??i})),l=(n.trabajos??[]).map(_=>{const j=_.parent_work_id,I=_.node_type,M=_.tags,P=_.order_hint,z=_.next_work_id,ne=_.variant_of_work_id;return{..._,subtitle:wr(_.subtitle),parentWorkId:Dn(_.parentWorkId??j??null),nodeType:wr(_.nodeType??I??void 0),tags:Yu(Array.isArray(_.tags)?_.tags:Array.isArray(M)?M:[]),orderHint:typeof _.orderHint=="number"?_.orderHint:typeof P=="number"?P:void 0,nextWorkId:Dn(_.nextWorkId??z??null),variantOfWorkId:Dn(_.variantOfWorkId??ne??null),createdAt:_.createdAt??i,updatedAt:_.updatedAt??i,videoUrls:_.videoUrls??[]}}),u=(n.asistentes??[]).map(_=>({..._,createdAt:_.createdAt??i,updatedAt:_.updatedAt??i,active:_.active??!0})),c=n.kungfuPrograms??ms,f=n.kungfuCadence??Ti,h=n.kungfuTodayPlan??dn,p=qn(n.workTaxonomy??Ri,l),y=cs(n.plans,f,qu(h),i),v=new Map;(n.sesiones??[]).forEach(_=>{const j=_.id??Bt(),I=_.notesByGroupId??void 0,M={id:j,planId:(_.planId??"").trim()||((_.kind??"class")==="personal"?Di:ps),date:_.date??tt().format("YYYY-MM-DD"),kind:_.kind??"class",title:_.title??"Sesin importada",description:_.description,notes:_.notes,notesByGroupId:I??void 0,workItems:(_.workItems??[]).map((P,z)=>({id:P.id??Bt(),workId:P.workId,order:P.order??z,customDescriptionMarkdown:P.customDescriptionMarkdown,customDurationMinutes:P.customDurationMinutes,notes:P.notes,focusLabel:P.focusLabel,completed:P.completed??!1,result:P.result,effort:P.effort})),attendance:up(_.attendance),startTime:_.startTime??us,createdAt:_.createdAt??i,updatedAt:_.updatedAt??i};M.workItems=M.workItems.sort((P,z)=>P.order-z.order).map((P,z)=>({...P,order:z})),v.set(j,M)}),(n.sesiones_trabajos??[]).forEach(_=>{const j=_.session_id;if(!j)return;v.has(j)||v.set(j,{id:j,planId:ps,date:_.fecha?tt(_.fecha).format("YYYY-MM-DD"):tt().format("YYYY-MM-DD"),kind:"class",title:_.titulo??"Sesin importada",description:_.descripcion,notes:_.notasSesion??_.notas,workItems:[],attendance:[],startTime:us,createdAt:i,updatedAt:i});const I=v.get(j);I.workItems.push({id:_.id??Bt(),workId:_.trabajo_id,order:_.orden??I.workItems.length,customDescriptionMarkdown:_.descripcionPersonalizada,customDurationMinutes:_.duracionPersonalizada,notes:_.notas,focusLabel:_.focusLabel??_.foco,completed:_.completed??!1,result:_.result??_.resultado,effort:_.effort??_.esfuerzo})}),v.forEach(_=>{_.workItems=_.workItems.sort((j,I)=>j.order-I.order).map((j,I)=>({...j,order:I})),_.startTime=_.startTime??us});const S=new Map,k=_=>mk(_)?_:void 0,E=_=>gk(_)?_:void 0;(n.sesiones_asistencias??[]).forEach(_=>{const j=_.session_id;if(!j)return;const I=_.assistantId??_.asistente_id;if(!I)return;const M=k(_.status??_.estado)??"pending",P=E(_.actualStatus??_.estado_real),z={assistantId:I,status:M,notes:_.notes??_.notas,actualStatus:P,actualNotes:_.actualNotes??_.notas_reales},ne=S.get(j)??[];ne.push(z),S.set(j,ne)}),S.forEach((_,j)=>{const I=v.get(j);I&&(I.attendance=_)});const C=Array.from(v.values());e({objectives:o,works:l,sessions:C,assistants:u,plans:y,kungfuPrograms:c,kungfuCadence:f,kungfuTodayPlan:h,workTaxonomy:p,ready:!0}),ut({objectives:o,works:l,sessions:C,assistants:u,plans:y,kungfuPrograms:c,kungfuCadence:f,kungfuTodayPlan:h,workTaxonomy:p})},exportBackup:()=>{const n=t(),r=n.sessions.flatMap(u=>u.workItems.map(c=>({id:c.id,session_id:u.id,trabajo_id:c.workId,orden:c.order,descripcionPersonalizada:c.customDescriptionMarkdown,duracionPersonalizada:c.customDurationMinutes,notas:c.notes,foco:c.focusLabel,focusLabel:c.focusLabel,completed:c.completed??!1,result:c.result,effort:c.effort}))),i=n.sessions.flatMap(u=>u.attendance.map(c=>({session_id:u.id,assistantId:c.assistantId,estado:c.status,notas:c.notes,...c.actualStatus?{actualStatus:c.actualStatus,estado_real:c.actualStatus}:{},...c.actualNotes?{actualNotes:c.actualNotes,notas_reales:c.actualNotes}:{}}))),o=n.sessions.map(u=>({id:u.id,planId:u.planId,date:u.date,kind:u.kind,title:u.title,description:u.description,notes:u.notes,notesByGroupId:u.notesByGroupId,startTime:u.startTime,createdAt:u.createdAt,updatedAt:u.updatedAt}));return{version:1,usuarios:[],objetivos:n.objectives,trabajos:n.works,sesiones:o,sesiones_trabajos:r,asistentes:n.assistants,sesiones_asistencias:i,plans:n.plans,kungfuPrograms:n.kungfuPrograms,kungfuCadence:n.kungfuCadence,kungfuTodayPlan:n.kungfuTodayPlan,workTaxonomy:n.workTaxonomy}}})),Hx=1,OR=[{id:"default",name:"Kung Fu  activo",enabled:!0,include:[{byTags:["kungfu"]}],exclude:[]}],MR={targetsDays:{work:7,technique:5,segment:8,form:10,drill:7},overrides:[]},DR={limitMode:"count",maxItems:12,minutesBudget:30,template:{totalMinutes:30,focusMinutes:18,rouletteMinutes:10,recapMinutes:2},defaultMinutesByNodeType:{work:3,technique:1.5,segment:6,form:15,drill:4,link:2},focusSelectors:[],rouletteSelectors:[],groups:[{id:"formas",name:"Formas",enabled:!0,order:1,type:"work",limitMode:"minutes",minutesBudget:18,strategy:"overdue",hierarchyRule:"prefer_leaves",include:[{byNodeTypes:["segment","form"]}],exclude:[]},{id:"tecnicas",name:"Tcnicas",enabled:!0,order:2,type:"work",limitMode:"minutes",minutesBudget:10,strategy:"weighted",hierarchyRule:"allow_all",include:[{byNodeTypes:["technique"]},{byTags:["roulette"]}],exclude:[]},{id:"recap",name:"Recap",enabled:!0,order:99,type:"note",limitMode:"minutes",minutesBudget:2}]},LR={nodeTypes:[{key:"form",label:"Form"},{key:"segment",label:"Segment"},{key:"application",label:"Application"},{key:"technique",label:"Technique"},{key:"drill",label:"Drill"},{key:"work",label:"Work"},{key:"link",label:"Link"},{key:"style",label:"Style"}],tags:[]},Mu=e=>({objectives:e.objectives,works:e.works,sessions:e.sessions,assistants:e.assistants,plans:e.plans,kungfuPrograms:e.kungfuPrograms,kungfuCadence:e.kungfuCadence,kungfuTodayPlan:e.kungfuTodayPlan,workTaxonomy:e.workTaxonomy}),$R=e=>({objectives:e.objectives??[],works:e.works??[],sessions:(e.sessions??[]).map(t=>({...t,planId:(t.planId??"").trim()||void 0,kind:t.kind??"class",workItems:t.workItems??[],attendance:t.attendance??[]})),assistants:e.assistants??[],plans:e.plans??[],kungfuPrograms:e.kungfuPrograms??OR,kungfuCadence:e.kungfuCadence??MR,kungfuTodayPlan:e.kungfuTodayPlan??DR,workTaxonomy:e.workTaxonomy??LR}),FR=(e,t)=>e.objectives!==t.objectives||e.works!==t.works||e.sessions!==t.sessions||e.assistants!==t.assistants||e.plans!==t.plans||e.kungfuPrograms!==t.kungfuPrograms||e.kungfuCadence!==t.kungfuCadence||e.kungfuTodayPlan!==t.kungfuTodayPlan||e.workTaxonomy!==t.workTaxonomy;function zR(){const{user:e}=Ns(),t=Ce(f=>f.setCollections),n=Ce(f=>f.reset),r=Ce(f=>f.ready),i=w.useRef(!1),o=w.useRef(null),l=w.useRef(null),u=w.useRef(null),c=w.useRef(Mu(Ce.getState()));w.useEffect(()=>()=>{o.current&&(window.clearTimeout(o.current),o.current=null)},[]),w.useEffect(()=>{e||(n(),u.current=null,l.current=null,i.current=!1,c.current=Mu(Ce.getState()),o.current&&(window.clearTimeout(o.current),o.current=null))},[e,n]),w.useEffect(()=>{if(!e)return;let f=!0;(async()=>{const{data:y,error:v}=await Yt.from("planner_states").select("data, updated_at").eq("user_id",e.id).maybeSingle();if(!f)return;if(v&&v.code!=="PGRST116"){console.error("No se pudo cargar el estado remoto",v);return}const S=y;if(S!=null&&S.data){const k=$R(S.data??{});i.current=!0,u.current=S.updated_at,c.current=k,t(k)}else if(r){const k=Mu(Ce.getState());l.current=null;const{error:E,data:C}=await Yt.from("planner_states").upsert({user_id:e.id,data:{version:Hx,...k}},{onConflict:"user_id"}).select("updated_at").maybeSingle(),_=C;E?console.error("No se pudo inicializar el estado remoto",E):_&&(u.current=_.updated_at)}})();const p=Ce.subscribe(y=>{if(!f)return;const v=Mu(y);if(i.current){i.current=!1,c.current=v,l.current=null;return}const S=c.current;FR(v,S)&&(c.current=v,l.current=v,o.current&&window.clearTimeout(o.current),o.current=window.setTimeout(()=>{if(!l.current)return;const k=l.current;l.current=null,(async()=>{const{error:E,data:C}=await Yt.from("planner_states").upsert({user_id:e.id,data:{version:Hx,...k}},{onConflict:"user_id"}).select("updated_at").maybeSingle(),_=C;E?console.error("No se pudo guardar el estado remoto",E):_&&(u.current=_.updated_at)})()},600))});return()=>{f=!1,p(),o.current&&(window.clearTimeout(o.current),o.current=null)}},[e,r,t])}function BR(){const{user:e}=Ns(),t=Ce(r=>r.loadWorks),n=Ce(r=>r.setWorks);w.useEffect(()=>{if(!e){n([]);return}const r={actorId:e.id,actorEmail:e.email??""},i=async()=>{try{await t(r)}catch(l){console.error("No se pudieron sincronizar los trabajos colaborativos",l)}};i();const o=Yt.channel("works-collaboration").on("postgres_changes",{event:"*",schema:"public",table:"works"},()=>{i()}).on("postgres_changes",{event:"*",schema:"public",table:"work_collaborators"},()=>{i()}).subscribe();return()=>{Yt.removeChannel(o)}},[e,t,n])}var Gu={exports:{}},UR=Gu.exports,Vx;function WR(){return Vx||(Vx=1,(function(e,t){(function(n,r){e.exports=r(uk())})(UR,(function(n){function r(l){return l&&typeof l=="object"&&"default"in l?l:{default:l}}var i=r(n),o={name:"es",monthsShort:"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),weekStart:1,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},ordinal:function(l){return l+""}};return i.default.locale(o,null,!0),o}))})(Gu)),Gu.exports}WR();function Bi({objective:e,size:t="md"}){if(!e)return null;const n=t==="sm"?"text-xs px-2 py-1":"text-sm px-3 py-1.5";return m.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full font-medium text-slate-950 shadow shadow-black/30 ${n}`,style:{backgroundColor:e.colorHex},children:[m.jsx("span",{className:"h-2.5 w-2.5 rounded-full border border-black/20 bg-white/70"}),e.name]})}function HR(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const VR=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,qR=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,YR={};function qx(e,t){return(YR.jsx?qR:VR).test(e)}const GR=/[ \t\n\f\r]/g;function KR(e){return typeof e=="object"?e.type==="text"?Yx(e.value):!1:Yx(e)}function Yx(e){return e.replace(GR,"")===""}class pl{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}pl.prototype.normal={};pl.prototype.property={};pl.prototype.space=void 0;function yk(e,t){const n={},r={};for(const i of e)Object.assign(n,i.property),Object.assign(r,i.normal);return new pl(n,r,t)}function dp(e){return e.toLowerCase()}class $n{constructor(t,n){this.attribute=n,this.property=t}}$n.prototype.attribute="";$n.prototype.booleanish=!1;$n.prototype.boolean=!1;$n.prototype.commaOrSpaceSeparated=!1;$n.prototype.commaSeparated=!1;$n.prototype.defined=!1;$n.prototype.mustUseProperty=!1;$n.prototype.number=!1;$n.prototype.overloadedBoolean=!1;$n.prototype.property="";$n.prototype.spaceSeparated=!1;$n.prototype.space=void 0;let JR=0;const at=Is(),Wt=Is(),fp=Is(),Ee=Is(),jt=Is(),Eo=Is(),Yn=Is();function Is(){return 2**++JR}const hp=Object.freeze(Object.defineProperty({__proto__:null,boolean:at,booleanish:Wt,commaOrSpaceSeparated:Yn,commaSeparated:Eo,number:Ee,overloadedBoolean:fp,spaceSeparated:jt},Symbol.toStringTag,{value:"Module"})),oh=Object.keys(hp);class im extends $n{constructor(t,n,r,i){let o=-1;if(super(t,n),Gx(this,"space",i),typeof r=="number")for(;++o<oh.length;){const l=oh[o];Gx(this,oh[o],(r&hp[l])===hp[l])}}}im.prototype.defined=!0;function Gx(e,t,n){n&&(e[t]=n)}function Fo(e){const t={},n={};for(const[r,i]of Object.entries(e.properties)){const o=new im(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(o.mustUseProperty=!0),t[r]=o,n[dp(r)]=r,n[dp(o.attribute)]=r}return new pl(t,n,e.space)}const vk=Fo({properties:{ariaActiveDescendant:null,ariaAtomic:Wt,ariaAutoComplete:null,ariaBusy:Wt,ariaChecked:Wt,ariaColCount:Ee,ariaColIndex:Ee,ariaColSpan:Ee,ariaControls:jt,ariaCurrent:null,ariaDescribedBy:jt,ariaDetails:null,ariaDisabled:Wt,ariaDropEffect:jt,ariaErrorMessage:null,ariaExpanded:Wt,ariaFlowTo:jt,ariaGrabbed:Wt,ariaHasPopup:null,ariaHidden:Wt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:jt,ariaLevel:Ee,ariaLive:null,ariaModal:Wt,ariaMultiLine:Wt,ariaMultiSelectable:Wt,ariaOrientation:null,ariaOwns:jt,ariaPlaceholder:null,ariaPosInSet:Ee,ariaPressed:Wt,ariaReadOnly:Wt,ariaRelevant:null,ariaRequired:Wt,ariaRoleDescription:jt,ariaRowCount:Ee,ariaRowIndex:Ee,ariaRowSpan:Ee,ariaSelected:Wt,ariaSetSize:Ee,ariaSort:null,ariaValueMax:Ee,ariaValueMin:Ee,ariaValueNow:Ee,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function xk(e,t){return t in e?e[t]:t}function wk(e,t){return xk(e,t.toLowerCase())}const QR=Fo({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Eo,acceptCharset:jt,accessKey:jt,action:null,allow:null,allowFullScreen:at,allowPaymentRequest:at,allowUserMedia:at,alt:null,as:null,async:at,autoCapitalize:null,autoComplete:jt,autoFocus:at,autoPlay:at,blocking:jt,capture:null,charSet:null,checked:at,cite:null,className:jt,cols:Ee,colSpan:null,content:null,contentEditable:Wt,controls:at,controlsList:jt,coords:Ee|Eo,crossOrigin:null,data:null,dateTime:null,decoding:null,default:at,defer:at,dir:null,dirName:null,disabled:at,download:fp,draggable:Wt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:at,formTarget:null,headers:jt,height:Ee,hidden:fp,high:Ee,href:null,hrefLang:null,htmlFor:jt,httpEquiv:jt,id:null,imageSizes:null,imageSrcSet:null,inert:at,inputMode:null,integrity:null,is:null,isMap:at,itemId:null,itemProp:jt,itemRef:jt,itemScope:at,itemType:jt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:at,low:Ee,manifest:null,max:null,maxLength:Ee,media:null,method:null,min:null,minLength:Ee,multiple:at,muted:at,name:null,nonce:null,noModule:at,noValidate:at,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:at,optimum:Ee,pattern:null,ping:jt,placeholder:null,playsInline:at,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:at,referrerPolicy:null,rel:jt,required:at,reversed:at,rows:Ee,rowSpan:Ee,sandbox:jt,scope:null,scoped:at,seamless:at,selected:at,shadowRootClonable:at,shadowRootDelegatesFocus:at,shadowRootMode:null,shape:null,size:Ee,sizes:null,slot:null,span:Ee,spellCheck:Wt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ee,step:null,style:null,tabIndex:Ee,target:null,title:null,translate:null,type:null,typeMustMatch:at,useMap:null,value:Wt,width:Ee,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:jt,axis:null,background:null,bgColor:null,border:Ee,borderColor:null,bottomMargin:Ee,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:at,declare:at,event:null,face:null,frame:null,frameBorder:null,hSpace:Ee,leftMargin:Ee,link:null,longDesc:null,lowSrc:null,marginHeight:Ee,marginWidth:Ee,noResize:at,noHref:at,noShade:at,noWrap:at,object:null,profile:null,prompt:null,rev:null,rightMargin:Ee,rules:null,scheme:null,scrolling:Wt,standby:null,summary:null,text:null,topMargin:Ee,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ee,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:at,disableRemotePlayback:at,prefix:null,property:null,results:Ee,security:null,unselectable:null},space:"html",transform:wk}),XR=Fo({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Yn,accentHeight:Ee,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ee,amplitude:Ee,arabicForm:null,ascent:Ee,attributeName:null,attributeType:null,azimuth:Ee,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ee,by:null,calcMode:null,capHeight:Ee,className:jt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ee,diffuseConstant:Ee,direction:null,display:null,dur:null,divisor:Ee,dominantBaseline:null,download:at,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ee,enableBackground:null,end:null,event:null,exponent:Ee,externalResourcesRequired:null,fill:null,fillOpacity:Ee,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Eo,g2:Eo,glyphName:Eo,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ee,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ee,horizOriginX:Ee,horizOriginY:Ee,id:null,ideographic:Ee,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ee,k:Ee,k1:Ee,k2:Ee,k3:Ee,k4:Ee,kernelMatrix:Yn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ee,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ee,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ee,overlineThickness:Ee,paintOrder:null,panose1:null,path:null,pathLength:Ee,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:jt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ee,pointsAtY:Ee,pointsAtZ:Ee,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Yn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Yn,rev:Yn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Yn,requiredFeatures:Yn,requiredFonts:Yn,requiredFormats:Yn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ee,specularExponent:Ee,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ee,strikethroughThickness:Ee,string:null,stroke:null,strokeDashArray:Yn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ee,strokeOpacity:Ee,strokeWidth:null,style:null,surfaceScale:Ee,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Yn,tabIndex:Ee,tableValues:null,target:null,targetX:Ee,targetY:Ee,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Yn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Ee,underlineThickness:Ee,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ee,values:null,vAlphabetic:Ee,vMathematical:Ee,vectorEffect:null,vHanging:Ee,vIdeographic:Ee,version:null,vertAdvY:Ee,vertOriginX:Ee,vertOriginY:Ee,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ee,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:xk}),bk=Fo({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),kk=Fo({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:wk}),Sk=Fo({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),ZR={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},eO=/[A-Z]/g,Kx=/-[a-z]/g,tO=/^data[-\w.:]+$/i;function nO(e,t){const n=dp(t);let r=t,i=$n;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&tO.test(t)){if(t.charAt(4)==="-"){const o=t.slice(5).replace(Kx,iO);r="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=t.slice(4);if(!Kx.test(o)){let l=o.replace(eO,rO);l.charAt(0)!=="-"&&(l="-"+l),t="data"+l}}i=im}return new i(r,t)}function rO(e){return"-"+e.toLowerCase()}function iO(e){return e.charAt(1).toUpperCase()}const sO=yk([vk,QR,bk,kk,Sk],"html"),sm=yk([vk,XR,bk,kk,Sk],"svg");function oO(e){return e.join(" ").trim()}var co={},ah,Jx;function aO(){if(Jx)return ah;Jx=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,l=/^[;\s]*/,u=/^\s+|\s+$/g,c=`
`,f="/",h="*",p="",y="comment",v="declaration";ah=function(k,E){if(typeof k!="string")throw new TypeError("First argument must be a string");if(!k)return[];E=E||{};var C=1,_=1;function j(W){var G=W.match(t);G&&(C+=G.length);var $=W.lastIndexOf(c);_=~$?W.length-$:_+W.length}function I(){var W={line:C,column:_};return function(G){return G.position=new M(W),ne(),G}}function M(W){this.start=W,this.end={line:C,column:_},this.source=E.source}M.prototype.content=k;function P(W){var G=new Error(E.source+":"+C+":"+_+": "+W);if(G.reason=W,G.filename=E.source,G.line=C,G.column=_,G.source=k,!E.silent)throw G}function z(W){var G=W.exec(k);if(G){var $=G[0];return j($),k=k.slice($.length),G}}function ne(){z(n)}function Z(W){var G;for(W=W||[];G=R();)G!==!1&&W.push(G);return W}function R(){var W=I();if(!(f!=k.charAt(0)||h!=k.charAt(1))){for(var G=2;p!=k.charAt(G)&&(h!=k.charAt(G)||f!=k.charAt(G+1));)++G;if(G+=2,p===k.charAt(G-1))return P("End of comment missing");var $=k.slice(2,G-2);return _+=2,j($),k=k.slice(G),_+=2,W({type:y,comment:$})}}function D(){var W=I(),G=z(r);if(G){if(R(),!z(i))return P("property missing ':'");var $=z(o),Y=W({type:v,property:S(G[0].replace(e,p)),value:$?S($[0].replace(e,p)):p});return z(l),Y}}function H(){var W=[];Z(W);for(var G;G=D();)G!==!1&&(W.push(G),Z(W));return W}return ne(),H()};function S(k){return k?k.replace(u,p):p}return ah}var Qx;function lO(){if(Qx)return co;Qx=1;var e=co&&co.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(co,"__esModule",{value:!0}),co.default=n;var t=e(aO());function n(r,i){var o=null;if(!r||typeof r!="string")return o;var l=(0,t.default)(r),u=typeof i=="function";return l.forEach(function(c){if(c.type==="declaration"){var f=c.property,h=c.value;u?i(f,h,c):h&&(o=o||{},o[f]=h)}}),o}return co}var _a={},Xx;function uO(){if(Xx)return _a;Xx=1,Object.defineProperty(_a,"__esModule",{value:!0}),_a.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,o=function(f){return!f||n.test(f)||e.test(f)},l=function(f,h){return h.toUpperCase()},u=function(f,h){return"".concat(h,"-")},c=function(f,h){return h===void 0&&(h={}),o(f)?f:(f=f.toLowerCase(),h.reactCompat?f=f.replace(i,u):f=f.replace(r,u),f.replace(t,l))};return _a.camelCase=c,_a}var Ca,Zx;function cO(){if(Zx)return Ca;Zx=1;var e=Ca&&Ca.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},t=e(lO()),n=uO();function r(i,o){var l={};return!i||typeof i!="string"||(0,t.default)(i,function(u,c){u&&c&&(l[(0,n.camelCase)(u,o)]=c)}),l}return r.default=r,Ca=r,Ca}var dO=cO();const fO=Ao(dO),Ek=_k("end"),om=_k("start");function _k(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function hO(e){const t=om(e),n=Ek(e);if(t&&n)return{start:t,end:n}}function Ba(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?e0(e.position):"start"in e||"end"in e?e0(e):"line"in e||"column"in e?pp(e):""}function pp(e){return t0(e&&e.line)+":"+t0(e&&e.column)}function e0(e){return pp(e&&e.start)+"-"+pp(e&&e.end)}function t0(e){return e&&typeof e=="number"?e:1}class wn extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",o={},l=!1;if(n&&("line"in n&&"column"in n?o={place:n}:"start"in n&&"end"in n?o={place:n}:"type"in n?o={ancestors:[n],place:n.position}:o={...n}),typeof t=="string"?i=t:!o.cause&&t&&(l=!0,i=t.message,o.cause=t),!o.ruleId&&!o.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?o.ruleId=r:(o.source=r.slice(0,c),o.ruleId=r.slice(c+1))}if(!o.place&&o.ancestors&&o.ancestors){const c=o.ancestors[o.ancestors.length-1];c&&(o.place=c.position)}const u=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=u?u.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=u?u.line:void 0,this.name=Ba(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=l&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}wn.prototype.file="";wn.prototype.name="";wn.prototype.reason="";wn.prototype.message="";wn.prototype.stack="";wn.prototype.column=void 0;wn.prototype.line=void 0;wn.prototype.ancestors=void 0;wn.prototype.cause=void 0;wn.prototype.fatal=void 0;wn.prototype.place=void 0;wn.prototype.ruleId=void 0;wn.prototype.source=void 0;const am={}.hasOwnProperty,pO=new Map,mO=/[A-Z]/g,gO=new Set(["table","tbody","thead","tfoot","tr"]),yO=new Set(["td","th"]),Ck="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function vO(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=CO(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=_O(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?sm:sO,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},o=jk(i,e,void 0);return o&&typeof o!="string"?o:i.create(e,i.Fragment,{children:o||void 0},void 0)}function jk(e,t,n){if(t.type==="element")return xO(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return wO(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return kO(e,t,n);if(t.type==="mdxjsEsm")return bO(e,t);if(t.type==="root")return SO(e,t,n);if(t.type==="text")return EO(e,t)}function xO(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=sm,e.schema=i),e.ancestors.push(t);const o=Tk(e,t.tagName,!1),l=jO(e,t);let u=um(e,t);return gO.has(t.tagName)&&(u=u.filter(function(c){return typeof c=="string"?!KR(c):!0})),Nk(e,l,o,t),lm(l,u),e.ancestors.pop(),e.schema=r,e.create(t,o,l,n)}function wO(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}nl(e,t.position)}function bO(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);nl(e,t.position)}function kO(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=sm,e.schema=i),e.ancestors.push(t);const o=t.name===null?e.Fragment:Tk(e,t.name,!0),l=NO(e,t),u=um(e,t);return Nk(e,l,o,t),lm(l,u),e.ancestors.pop(),e.schema=r,e.create(t,o,l,n)}function SO(e,t,n){const r={};return lm(r,um(e,t)),e.create(t,e.Fragment,r,n)}function EO(e,t){return t.value}function Nk(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function lm(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function _O(e,t,n){return r;function r(i,o,l,u){const f=Array.isArray(l.children)?n:t;return u?f(o,l,u):f(o,l)}}function CO(e,t){return n;function n(r,i,o,l){const u=Array.isArray(o.children),c=om(r);return t(i,o,l,u,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function jO(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&am.call(t.properties,i)){const o=TO(e,i,t.properties[i]);if(o){const[l,u]=o;e.tableCellAlignToStyle&&l==="align"&&typeof u=="string"&&yO.has(t.tagName)?r=u:n[l]=u}}if(r){const o=n.style||(n.style={});o[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function NO(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const o=r.data.estree.body[0];o.type;const l=o.expression;l.type;const u=l.properties[0];u.type,Object.assign(n,e.evaluater.evaluateExpression(u.argument))}else nl(e,t.position);else{const i=r.name;let o;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const u=r.value.data.estree.body[0];u.type,o=e.evaluater.evaluateExpression(u.expression)}else nl(e,t.position);else o=r.value===null?!0:r.value;n[i]=o}return n}function um(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:pO;for(;++r<t.children.length;){const o=t.children[r];let l;if(e.passKeys){const c=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(c){const f=i.get(c)||0;l=c+"-"+f,i.set(c,f+1)}}const u=jk(e,o,l);u!==void 0&&n.push(u)}return n}function TO(e,t,n){const r=nO(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?HR(n):oO(n)),r.property==="style"){let i=typeof n=="object"?n:IO(e,String(n));return e.stylePropertyNameCase==="css"&&(i=PO(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?ZR[r.property]||r.property:r.attribute,n]}}function IO(e,t){try{return fO(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,i=new wn("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=Ck+"#cannot-parse-style-attribute",i}}function Tk(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let o=-1,l;for(;++o<i.length;){const u=qx(i[o])?{type:"Identifier",name:i[o]}:{type:"Literal",value:i[o]};l=l?{type:"MemberExpression",object:l,property:u,computed:!!(o&&u.type==="Literal"),optional:!1}:u}r=l}else r=qx(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return am.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);nl(e)}function nl(e,t){const n=new wn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Ck+"#cannot-handle-mdx-estrees-without-createevaluater",n}function PO(e){const t={};let n;for(n in e)am.call(e,n)&&(t[AO(n)]=e[n]);return t}function AO(e){let t=e.replace(mO,RO);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function RO(e){return"-"+e.toLowerCase()}const lh={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},OO={};function cm(e,t){const n=OO,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Ik(e,r,i)}function Ik(e,t,n){if(MO(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return n0(e.children,t,n)}return Array.isArray(e)?n0(e,t,n):""}function n0(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=Ik(e[i],t,n);return r.join("")}function MO(e){return!!(e&&typeof e=="object")}const r0=document.createElement("i");function dm(e){const t="&"+e+";";r0.innerHTML=t;const n=r0.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Qn(e,t,n,r){const i=e.length;let o=0,l;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)l=Array.from(r),l.unshift(t,n),e.splice(...l);else for(n&&e.splice(t,n);o<r.length;)l=r.slice(o,o+1e4),l.unshift(t,0),e.splice(...l),o+=1e4,t+=1e4}function cr(e,t){return e.length>0?(Qn(e,e.length,0,t),e):t}const i0={}.hasOwnProperty;function Pk(e){const t={};let n=-1;for(;++n<e.length;)DO(t,e[n]);return t}function DO(e,t){let n;for(n in t){const i=(i0.call(e,n)?e[n]:void 0)||(e[n]={}),o=t[n];let l;if(o)for(l in o){i0.call(i,l)||(i[l]=[]);const u=o[l];LO(i[l],Array.isArray(u)?u:u?[u]:[])}}}function LO(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Qn(e,0,0,r)}function Ak(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Sr(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Sn=Hi(/[A-Za-z]/),xn=Hi(/[\dA-Za-z]/),$O=Hi(/[#-'*+\--9=?A-Z^-~]/);function hc(e){return e!==null&&(e<32||e===127)}const mp=Hi(/\d/),FO=Hi(/[\dA-Fa-f]/),zO=Hi(/[!-/:-@[-`{-~]/);function Xe(e){return e!==null&&e<-2}function Et(e){return e!==null&&(e<0||e===32)}function dt(e){return e===-2||e===-1||e===32}const Bc=Hi(new RegExp("\\p{P}|\\p{S}","u")),ks=Hi(/\s/);function Hi(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function zo(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const o=e.charCodeAt(n);let l="";if(o===37&&xn(e.charCodeAt(n+1))&&xn(e.charCodeAt(n+2)))i=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(l=String.fromCharCode(o));else if(o>55295&&o<57344){const u=e.charCodeAt(n+1);o<56320&&u>56319&&u<57344?(l=String.fromCharCode(o,u),i=1):l=""}else l=String.fromCharCode(o);l&&(t.push(e.slice(r,n),encodeURIComponent(l)),r=n+i+1,l=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function pt(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let o=0;return l;function l(c){return dt(c)?(e.enter(n),u(c)):t(c)}function u(c){return dt(c)&&o++<i?(e.consume(c),u):(e.exit(n),t(c))}}const BO={tokenize:UO};function UO(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(u){if(u===null){e.consume(u);return}return e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),pt(e,t,"linePrefix")}function i(u){return e.enter("paragraph"),o(u)}function o(u){const c=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,l(u)}function l(u){if(u===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(u);return}return Xe(u)?(e.consume(u),e.exit("chunkText"),o):(e.consume(u),l)}}const WO={tokenize:HO},s0={tokenize:VO};function HO(e){const t=this,n=[];let r=0,i,o,l;return u;function u(j){if(r<n.length){const I=n[r];return t.containerState=I[1],e.attempt(I[0].continuation,c,f)(j)}return f(j)}function c(j){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&_();const I=t.events.length;let M=I,P;for(;M--;)if(t.events[M][0]==="exit"&&t.events[M][1].type==="chunkFlow"){P=t.events[M][1].end;break}C(r);let z=I;for(;z<t.events.length;)t.events[z][1].end={...P},z++;return Qn(t.events,M+1,0,t.events.slice(I)),t.events.length=z,f(j)}return u(j)}function f(j){if(r===n.length){if(!i)return y(j);if(i.currentConstruct&&i.currentConstruct.concrete)return S(j);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(s0,h,p)(j)}function h(j){return i&&_(),C(r),y(j)}function p(j){return t.parser.lazy[t.now().line]=r!==n.length,l=t.now().offset,S(j)}function y(j){return t.containerState={},e.attempt(s0,v,S)(j)}function v(j){return r++,n.push([t.currentConstruct,t.containerState]),y(j)}function S(j){if(j===null){i&&_(),C(0),e.consume(j);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:o}),k(j)}function k(j){if(j===null){E(e.exit("chunkFlow"),!0),C(0),e.consume(j);return}return Xe(j)?(e.consume(j),E(e.exit("chunkFlow")),r=0,t.interrupt=void 0,u):(e.consume(j),k)}function E(j,I){const M=t.sliceStream(j);if(I&&M.push(null),j.previous=o,o&&(o.next=j),o=j,i.defineSkip(j.start),i.write(M),t.parser.lazy[j.start.line]){let P=i.events.length;for(;P--;)if(i.events[P][1].start.offset<l&&(!i.events[P][1].end||i.events[P][1].end.offset>l))return;const z=t.events.length;let ne=z,Z,R;for(;ne--;)if(t.events[ne][0]==="exit"&&t.events[ne][1].type==="chunkFlow"){if(Z){R=t.events[ne][1].end;break}Z=!0}for(C(r),P=z;P<t.events.length;)t.events[P][1].end={...R},P++;Qn(t.events,ne+1,0,t.events.slice(z)),t.events.length=P}}function C(j){let I=n.length;for(;I-- >j;){const M=n[I];t.containerState=M[1],M[0].exit.call(t,e)}n.length=j}function _(){i.write([null]),o=void 0,i=void 0,t.containerState._closeFlow=void 0}}function VO(e,t,n){return pt(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Po(e){if(e===null||Et(e)||ks(e))return 1;if(Bc(e))return 2}function Uc(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const o=e[i].resolveAll;o&&!r.includes(o)&&(t=o(t,n),r.push(o))}return t}const gp={name:"attention",resolveAll:qO,tokenize:YO};function qO(e,t){let n=-1,r,i,o,l,u,c,f,h;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const p={...e[r][1].end},y={...e[n][1].start};o0(p,-c),o0(y,c),l={type:c>1?"strongSequence":"emphasisSequence",start:p,end:{...e[r][1].end}},u={type:c>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:y},o={type:c>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},i={type:c>1?"strong":"emphasis",start:{...l.start},end:{...u.end}},e[r][1].end={...l.start},e[n][1].start={...u.end},f=[],e[r][1].end.offset-e[r][1].start.offset&&(f=cr(f,[["enter",e[r][1],t],["exit",e[r][1],t]])),f=cr(f,[["enter",i,t],["enter",l,t],["exit",l,t],["enter",o,t]]),f=cr(f,Uc(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),f=cr(f,[["exit",o,t],["enter",u,t],["exit",u,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(h=2,f=cr(f,[["enter",e[n][1],t],["exit",e[n][1],t]])):h=0,Qn(e,r-1,n-r+3,f),n=r+f.length-h-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function YO(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Po(r);let o;return l;function l(c){return o=c,e.enter("attentionSequence"),u(c)}function u(c){if(c===o)return e.consume(c),u;const f=e.exit("attentionSequence"),h=Po(c),p=!h||h===2&&i||n.includes(c),y=!i||i===2&&h||n.includes(r);return f._open=!!(o===42?p:p&&(i||!y)),f._close=!!(o===42?y:y&&(h||!p)),t(c)}}function o0(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const GO={name:"autolink",tokenize:KO};function KO(e,t,n){let r=0;return i;function i(v){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(v),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),o}function o(v){return Sn(v)?(e.consume(v),l):v===64?n(v):f(v)}function l(v){return v===43||v===45||v===46||xn(v)?(r=1,u(v)):f(v)}function u(v){return v===58?(e.consume(v),r=0,c):(v===43||v===45||v===46||xn(v))&&r++<32?(e.consume(v),u):(r=0,f(v))}function c(v){return v===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(v),e.exit("autolinkMarker"),e.exit("autolink"),t):v===null||v===32||v===60||hc(v)?n(v):(e.consume(v),c)}function f(v){return v===64?(e.consume(v),h):$O(v)?(e.consume(v),f):n(v)}function h(v){return xn(v)?p(v):n(v)}function p(v){return v===46?(e.consume(v),r=0,h):v===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(v),e.exit("autolinkMarker"),e.exit("autolink"),t):y(v)}function y(v){if((v===45||xn(v))&&r++<63){const S=v===45?y:p;return e.consume(v),S}return n(v)}}const ml={partial:!0,tokenize:JO};function JO(e,t,n){return r;function r(o){return dt(o)?pt(e,i,"linePrefix")(o):i(o)}function i(o){return o===null||Xe(o)?t(o):n(o)}}const Rk={continuation:{tokenize:XO},exit:ZO,name:"blockQuote",tokenize:QO};function QO(e,t,n){const r=this;return i;function i(l){if(l===62){const u=r.containerState;return u.open||(e.enter("blockQuote",{_container:!0}),u.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(l),e.exit("blockQuoteMarker"),o}return n(l)}function o(l){return dt(l)?(e.enter("blockQuotePrefixWhitespace"),e.consume(l),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(l))}}function XO(e,t,n){const r=this;return i;function i(l){return dt(l)?pt(e,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):o(l)}function o(l){return e.attempt(Rk,t,n)(l)}}function ZO(e){e.exit("blockQuote")}const Ok={name:"characterEscape",tokenize:eM};function eM(e,t,n){return r;function r(o){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(o),e.exit("escapeMarker"),i}function i(o){return zO(o)?(e.enter("characterEscapeValue"),e.consume(o),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(o)}}const Mk={name:"characterReference",tokenize:tM};function tM(e,t,n){const r=this;let i=0,o,l;return u;function u(p){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(p),e.exit("characterReferenceMarker"),c}function c(p){return p===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(p),e.exit("characterReferenceMarkerNumeric"),f):(e.enter("characterReferenceValue"),o=31,l=xn,h(p))}function f(p){return p===88||p===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(p),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),o=6,l=FO,h):(e.enter("characterReferenceValue"),o=7,l=mp,h(p))}function h(p){if(p===59&&i){const y=e.exit("characterReferenceValue");return l===xn&&!dm(r.sliceSerialize(y))?n(p):(e.enter("characterReferenceMarker"),e.consume(p),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return l(p)&&i++<o?(e.consume(p),h):n(p)}}const a0={partial:!0,tokenize:rM},l0={concrete:!0,name:"codeFenced",tokenize:nM};function nM(e,t,n){const r=this,i={partial:!0,tokenize:M};let o=0,l=0,u;return c;function c(P){return f(P)}function f(P){const z=r.events[r.events.length-1];return o=z&&z[1].type==="linePrefix"?z[2].sliceSerialize(z[1],!0).length:0,u=P,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),h(P)}function h(P){return P===u?(l++,e.consume(P),h):l<3?n(P):(e.exit("codeFencedFenceSequence"),dt(P)?pt(e,p,"whitespace")(P):p(P))}function p(P){return P===null||Xe(P)?(e.exit("codeFencedFence"),r.interrupt?t(P):e.check(a0,k,I)(P)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),y(P))}function y(P){return P===null||Xe(P)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),p(P)):dt(P)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),pt(e,v,"whitespace")(P)):P===96&&P===u?n(P):(e.consume(P),y)}function v(P){return P===null||Xe(P)?p(P):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),S(P))}function S(P){return P===null||Xe(P)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),p(P)):P===96&&P===u?n(P):(e.consume(P),S)}function k(P){return e.attempt(i,I,E)(P)}function E(P){return e.enter("lineEnding"),e.consume(P),e.exit("lineEnding"),C}function C(P){return o>0&&dt(P)?pt(e,_,"linePrefix",o+1)(P):_(P)}function _(P){return P===null||Xe(P)?e.check(a0,k,I)(P):(e.enter("codeFlowValue"),j(P))}function j(P){return P===null||Xe(P)?(e.exit("codeFlowValue"),_(P)):(e.consume(P),j)}function I(P){return e.exit("codeFenced"),t(P)}function M(P,z,ne){let Z=0;return R;function R($){return P.enter("lineEnding"),P.consume($),P.exit("lineEnding"),D}function D($){return P.enter("codeFencedFence"),dt($)?pt(P,H,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)($):H($)}function H($){return $===u?(P.enter("codeFencedFenceSequence"),W($)):ne($)}function W($){return $===u?(Z++,P.consume($),W):Z>=l?(P.exit("codeFencedFenceSequence"),dt($)?pt(P,G,"whitespace")($):G($)):ne($)}function G($){return $===null||Xe($)?(P.exit("codeFencedFence"),z($)):ne($)}}}function rM(e,t,n){const r=this;return i;function i(l){return l===null?n(l):(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),o)}function o(l){return r.parser.lazy[r.now().line]?n(l):t(l)}}const uh={name:"codeIndented",tokenize:sM},iM={partial:!0,tokenize:oM};function sM(e,t,n){const r=this;return i;function i(f){return e.enter("codeIndented"),pt(e,o,"linePrefix",5)(f)}function o(f){const h=r.events[r.events.length-1];return h&&h[1].type==="linePrefix"&&h[2].sliceSerialize(h[1],!0).length>=4?l(f):n(f)}function l(f){return f===null?c(f):Xe(f)?e.attempt(iM,l,c)(f):(e.enter("codeFlowValue"),u(f))}function u(f){return f===null||Xe(f)?(e.exit("codeFlowValue"),l(f)):(e.consume(f),u)}function c(f){return e.exit("codeIndented"),t(f)}}function oM(e,t,n){const r=this;return i;function i(l){return r.parser.lazy[r.now().line]?n(l):Xe(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),i):pt(e,o,"linePrefix",5)(l)}function o(l){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?t(l):Xe(l)?i(l):n(l)}}const aM={name:"codeText",previous:uM,resolve:lM,tokenize:cM};function lM(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function uM(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function cM(e,t,n){let r=0,i,o;return l;function l(p){return e.enter("codeText"),e.enter("codeTextSequence"),u(p)}function u(p){return p===96?(e.consume(p),r++,u):(e.exit("codeTextSequence"),c(p))}function c(p){return p===null?n(p):p===32?(e.enter("space"),e.consume(p),e.exit("space"),c):p===96?(o=e.enter("codeTextSequence"),i=0,h(p)):Xe(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),c):(e.enter("codeTextData"),f(p))}function f(p){return p===null||p===32||p===96||Xe(p)?(e.exit("codeTextData"),c(p)):(e.consume(p),f)}function h(p){return p===96?(e.consume(p),i++,h):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(p)):(o.type="codeTextData",f(p))}}class dM{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const o=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&ja(this.left,r),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),ja(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),ja(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);ja(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);ja(this.left,n.reverse())}}}function ja(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function Dk(e){const t={};let n=-1,r,i,o,l,u,c,f;const h=new dM(e);for(;++n<h.length;){for(;n in t;)n=t[n];if(r=h.get(n),n&&r[1].type==="chunkFlow"&&h.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,o=0,o<c.length&&c[o][1].type==="lineEndingBlank"&&(o+=2),o<c.length&&c[o][1].type==="content"))for(;++o<c.length&&c[o][1].type!=="content";)c[o][1].type==="chunkText"&&(c[o][1]._isInFirstContentOfListItem=!0,o++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,fM(h,n)),n=t[n],f=!0);else if(r[1]._container){for(o=n,i=void 0;o--;)if(l=h.get(o),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(i&&(h.get(i)[1].type="lineEndingBlank"),l[1].type="lineEnding",i=o);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;i&&(r[1].end={...h.get(i)[1].start},u=h.slice(i,n),u.unshift(r),h.splice(i,n-i+1,u))}}return Qn(e,0,Number.POSITIVE_INFINITY,h.slice(0)),!f}function fM(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const o=[];let l=n._tokenizer;l||(l=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const u=l.events,c=[],f={};let h,p,y=-1,v=n,S=0,k=0;const E=[k];for(;v;){for(;e.get(++i)[1]!==v;);o.push(i),v._tokenizer||(h=r.sliceStream(v),v.next||h.push(null),p&&l.defineSkip(v.start),v._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(h),v._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),p=v,v=v.next}for(v=n;++y<u.length;)u[y][0]==="exit"&&u[y-1][0]==="enter"&&u[y][1].type===u[y-1][1].type&&u[y][1].start.line!==u[y][1].end.line&&(k=y+1,E.push(k),v._tokenizer=void 0,v.previous=void 0,v=v.next);for(l.events=[],v?(v._tokenizer=void 0,v.previous=void 0):E.pop(),y=E.length;y--;){const C=u.slice(E[y],E[y+1]),_=o.pop();c.push([_,_+C.length-1]),e.splice(_,2,C)}for(c.reverse(),y=-1;++y<c.length;)f[S+c[y][0]]=S+c[y][1],S+=c[y][1]-c[y][0]-1;return f}const hM={resolve:mM,tokenize:gM},pM={partial:!0,tokenize:yM};function mM(e){return Dk(e),e}function gM(e,t){let n;return r;function r(u){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(u)}function i(u){return u===null?o(u):Xe(u)?e.check(pM,l,o)(u):(e.consume(u),i)}function o(u){return e.exit("chunkContent"),e.exit("content"),t(u)}function l(u){return e.consume(u),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function yM(e,t,n){const r=this;return i;function i(l){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),pt(e,o,"linePrefix")}function o(l){if(l===null||Xe(l))return n(l);const u=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?t(l):e.interrupt(r.parser.constructs.flow,n,t)(l)}}function Lk(e,t,n,r,i,o,l,u,c){const f=c||Number.POSITIVE_INFINITY;let h=0;return p;function p(C){return C===60?(e.enter(r),e.enter(i),e.enter(o),e.consume(C),e.exit(o),y):C===null||C===32||C===41||hc(C)?n(C):(e.enter(r),e.enter(l),e.enter(u),e.enter("chunkString",{contentType:"string"}),k(C))}function y(C){return C===62?(e.enter(o),e.consume(C),e.exit(o),e.exit(i),e.exit(r),t):(e.enter(u),e.enter("chunkString",{contentType:"string"}),v(C))}function v(C){return C===62?(e.exit("chunkString"),e.exit(u),y(C)):C===null||C===60||Xe(C)?n(C):(e.consume(C),C===92?S:v)}function S(C){return C===60||C===62||C===92?(e.consume(C),v):v(C)}function k(C){return!h&&(C===null||C===41||Et(C))?(e.exit("chunkString"),e.exit(u),e.exit(l),e.exit(r),t(C)):h<f&&C===40?(e.consume(C),h++,k):C===41?(e.consume(C),h--,k):C===null||C===32||C===40||hc(C)?n(C):(e.consume(C),C===92?E:k)}function E(C){return C===40||C===41||C===92?(e.consume(C),k):k(C)}}function $k(e,t,n,r,i,o){const l=this;let u=0,c;return f;function f(v){return e.enter(r),e.enter(i),e.consume(v),e.exit(i),e.enter(o),h}function h(v){return u>999||v===null||v===91||v===93&&!c||v===94&&!u&&"_hiddenFootnoteSupport"in l.parser.constructs?n(v):v===93?(e.exit(o),e.enter(i),e.consume(v),e.exit(i),e.exit(r),t):Xe(v)?(e.enter("lineEnding"),e.consume(v),e.exit("lineEnding"),h):(e.enter("chunkString",{contentType:"string"}),p(v))}function p(v){return v===null||v===91||v===93||Xe(v)||u++>999?(e.exit("chunkString"),h(v)):(e.consume(v),c||(c=!dt(v)),v===92?y:p)}function y(v){return v===91||v===92||v===93?(e.consume(v),u++,p):p(v)}}function Fk(e,t,n,r,i,o){let l;return u;function u(y){return y===34||y===39||y===40?(e.enter(r),e.enter(i),e.consume(y),e.exit(i),l=y===40?41:y,c):n(y)}function c(y){return y===l?(e.enter(i),e.consume(y),e.exit(i),e.exit(r),t):(e.enter(o),f(y))}function f(y){return y===l?(e.exit(o),c(l)):y===null?n(y):Xe(y)?(e.enter("lineEnding"),e.consume(y),e.exit("lineEnding"),pt(e,f,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===l||y===null||Xe(y)?(e.exit("chunkString"),f(y)):(e.consume(y),y===92?p:h)}function p(y){return y===l||y===92?(e.consume(y),h):h(y)}}function Ua(e,t){let n;return r;function r(i){return Xe(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):dt(i)?pt(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const vM={name:"definition",tokenize:wM},xM={partial:!0,tokenize:bM};function wM(e,t,n){const r=this;let i;return o;function o(v){return e.enter("definition"),l(v)}function l(v){return $k.call(r,e,u,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(v)}function u(v){return i=Sr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),v===58?(e.enter("definitionMarker"),e.consume(v),e.exit("definitionMarker"),c):n(v)}function c(v){return Et(v)?Ua(e,f)(v):f(v)}function f(v){return Lk(e,h,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(v)}function h(v){return e.attempt(xM,p,p)(v)}function p(v){return dt(v)?pt(e,y,"whitespace")(v):y(v)}function y(v){return v===null||Xe(v)?(e.exit("definition"),r.parser.defined.push(i),t(v)):n(v)}}function bM(e,t,n){return r;function r(u){return Et(u)?Ua(e,i)(u):n(u)}function i(u){return Fk(e,o,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(u)}function o(u){return dt(u)?pt(e,l,"whitespace")(u):l(u)}function l(u){return u===null||Xe(u)?t(u):n(u)}}const kM={name:"hardBreakEscape",tokenize:SM};function SM(e,t,n){return r;function r(o){return e.enter("hardBreakEscape"),e.consume(o),i}function i(o){return Xe(o)?(e.exit("hardBreakEscape"),t(o)):n(o)}}const EM={name:"headingAtx",resolve:_M,tokenize:CM};function _M(e,t){let n=e.length-2,r=3,i,o;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},o={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Qn(e,r,n-r+1,[["enter",i,t],["enter",o,t],["exit",o,t],["exit",i,t]])),e}function CM(e,t,n){let r=0;return i;function i(h){return e.enter("atxHeading"),o(h)}function o(h){return e.enter("atxHeadingSequence"),l(h)}function l(h){return h===35&&r++<6?(e.consume(h),l):h===null||Et(h)?(e.exit("atxHeadingSequence"),u(h)):n(h)}function u(h){return h===35?(e.enter("atxHeadingSequence"),c(h)):h===null||Xe(h)?(e.exit("atxHeading"),t(h)):dt(h)?pt(e,u,"whitespace")(h):(e.enter("atxHeadingText"),f(h))}function c(h){return h===35?(e.consume(h),c):(e.exit("atxHeadingSequence"),u(h))}function f(h){return h===null||h===35||Et(h)?(e.exit("atxHeadingText"),u(h)):(e.consume(h),f)}}const jM=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],u0=["pre","script","style","textarea"],NM={concrete:!0,name:"htmlFlow",resolveTo:PM,tokenize:AM},TM={partial:!0,tokenize:OM},IM={partial:!0,tokenize:RM};function PM(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function AM(e,t,n){const r=this;let i,o,l,u,c;return f;function f(A){return h(A)}function h(A){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(A),p}function p(A){return A===33?(e.consume(A),y):A===47?(e.consume(A),o=!0,k):A===63?(e.consume(A),i=3,r.interrupt?t:T):Sn(A)?(e.consume(A),l=String.fromCharCode(A),E):n(A)}function y(A){return A===45?(e.consume(A),i=2,v):A===91?(e.consume(A),i=5,u=0,S):Sn(A)?(e.consume(A),i=4,r.interrupt?t:T):n(A)}function v(A){return A===45?(e.consume(A),r.interrupt?t:T):n(A)}function S(A){const we="CDATA[";return A===we.charCodeAt(u++)?(e.consume(A),u===we.length?r.interrupt?t:H:S):n(A)}function k(A){return Sn(A)?(e.consume(A),l=String.fromCharCode(A),E):n(A)}function E(A){if(A===null||A===47||A===62||Et(A)){const we=A===47,he=l.toLowerCase();return!we&&!o&&u0.includes(he)?(i=1,r.interrupt?t(A):H(A)):jM.includes(l.toLowerCase())?(i=6,we?(e.consume(A),C):r.interrupt?t(A):H(A)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(A):o?_(A):j(A))}return A===45||xn(A)?(e.consume(A),l+=String.fromCharCode(A),E):n(A)}function C(A){return A===62?(e.consume(A),r.interrupt?t:H):n(A)}function _(A){return dt(A)?(e.consume(A),_):R(A)}function j(A){return A===47?(e.consume(A),R):A===58||A===95||Sn(A)?(e.consume(A),I):dt(A)?(e.consume(A),j):R(A)}function I(A){return A===45||A===46||A===58||A===95||xn(A)?(e.consume(A),I):M(A)}function M(A){return A===61?(e.consume(A),P):dt(A)?(e.consume(A),M):j(A)}function P(A){return A===null||A===60||A===61||A===62||A===96?n(A):A===34||A===39?(e.consume(A),c=A,z):dt(A)?(e.consume(A),P):ne(A)}function z(A){return A===c?(e.consume(A),c=null,Z):A===null||Xe(A)?n(A):(e.consume(A),z)}function ne(A){return A===null||A===34||A===39||A===47||A===60||A===61||A===62||A===96||Et(A)?M(A):(e.consume(A),ne)}function Z(A){return A===47||A===62||dt(A)?j(A):n(A)}function R(A){return A===62?(e.consume(A),D):n(A)}function D(A){return A===null||Xe(A)?H(A):dt(A)?(e.consume(A),D):n(A)}function H(A){return A===45&&i===2?(e.consume(A),Y):A===60&&i===1?(e.consume(A),re):A===62&&i===4?(e.consume(A),U):A===63&&i===3?(e.consume(A),T):A===93&&i===5?(e.consume(A),ee):Xe(A)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(TM,te,W)(A)):A===null||Xe(A)?(e.exit("htmlFlowData"),W(A)):(e.consume(A),H)}function W(A){return e.check(IM,G,te)(A)}function G(A){return e.enter("lineEnding"),e.consume(A),e.exit("lineEnding"),$}function $(A){return A===null||Xe(A)?W(A):(e.enter("htmlFlowData"),H(A))}function Y(A){return A===45?(e.consume(A),T):H(A)}function re(A){return A===47?(e.consume(A),l="",O):H(A)}function O(A){if(A===62){const we=l.toLowerCase();return u0.includes(we)?(e.consume(A),U):H(A)}return Sn(A)&&l.length<8?(e.consume(A),l+=String.fromCharCode(A),O):H(A)}function ee(A){return A===93?(e.consume(A),T):H(A)}function T(A){return A===62?(e.consume(A),U):A===45&&i===2?(e.consume(A),T):H(A)}function U(A){return A===null||Xe(A)?(e.exit("htmlFlowData"),te(A)):(e.consume(A),U)}function te(A){return e.exit("htmlFlow"),t(A)}}function RM(e,t,n){const r=this;return i;function i(l){return Xe(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),o):n(l)}function o(l){return r.parser.lazy[r.now().line]?n(l):t(l)}}function OM(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(ml,t,n)}}const MM={name:"htmlText",tokenize:DM};function DM(e,t,n){const r=this;let i,o,l;return u;function u(T){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(T),c}function c(T){return T===33?(e.consume(T),f):T===47?(e.consume(T),M):T===63?(e.consume(T),j):Sn(T)?(e.consume(T),ne):n(T)}function f(T){return T===45?(e.consume(T),h):T===91?(e.consume(T),o=0,S):Sn(T)?(e.consume(T),_):n(T)}function h(T){return T===45?(e.consume(T),v):n(T)}function p(T){return T===null?n(T):T===45?(e.consume(T),y):Xe(T)?(l=p,re(T)):(e.consume(T),p)}function y(T){return T===45?(e.consume(T),v):p(T)}function v(T){return T===62?Y(T):T===45?y(T):p(T)}function S(T){const U="CDATA[";return T===U.charCodeAt(o++)?(e.consume(T),o===U.length?k:S):n(T)}function k(T){return T===null?n(T):T===93?(e.consume(T),E):Xe(T)?(l=k,re(T)):(e.consume(T),k)}function E(T){return T===93?(e.consume(T),C):k(T)}function C(T){return T===62?Y(T):T===93?(e.consume(T),C):k(T)}function _(T){return T===null||T===62?Y(T):Xe(T)?(l=_,re(T)):(e.consume(T),_)}function j(T){return T===null?n(T):T===63?(e.consume(T),I):Xe(T)?(l=j,re(T)):(e.consume(T),j)}function I(T){return T===62?Y(T):j(T)}function M(T){return Sn(T)?(e.consume(T),P):n(T)}function P(T){return T===45||xn(T)?(e.consume(T),P):z(T)}function z(T){return Xe(T)?(l=z,re(T)):dt(T)?(e.consume(T),z):Y(T)}function ne(T){return T===45||xn(T)?(e.consume(T),ne):T===47||T===62||Et(T)?Z(T):n(T)}function Z(T){return T===47?(e.consume(T),Y):T===58||T===95||Sn(T)?(e.consume(T),R):Xe(T)?(l=Z,re(T)):dt(T)?(e.consume(T),Z):Y(T)}function R(T){return T===45||T===46||T===58||T===95||xn(T)?(e.consume(T),R):D(T)}function D(T){return T===61?(e.consume(T),H):Xe(T)?(l=D,re(T)):dt(T)?(e.consume(T),D):Z(T)}function H(T){return T===null||T===60||T===61||T===62||T===96?n(T):T===34||T===39?(e.consume(T),i=T,W):Xe(T)?(l=H,re(T)):dt(T)?(e.consume(T),H):(e.consume(T),G)}function W(T){return T===i?(e.consume(T),i=void 0,$):T===null?n(T):Xe(T)?(l=W,re(T)):(e.consume(T),W)}function G(T){return T===null||T===34||T===39||T===60||T===61||T===96?n(T):T===47||T===62||Et(T)?Z(T):(e.consume(T),G)}function $(T){return T===47||T===62||Et(T)?Z(T):n(T)}function Y(T){return T===62?(e.consume(T),e.exit("htmlTextData"),e.exit("htmlText"),t):n(T)}function re(T){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(T),e.exit("lineEnding"),O}function O(T){return dt(T)?pt(e,ee,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(T):ee(T)}function ee(T){return e.enter("htmlTextData"),l(T)}}const fm={name:"labelEnd",resolveAll:zM,resolveTo:BM,tokenize:UM},LM={tokenize:WM},$M={tokenize:HM},FM={tokenize:VM};function zM(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",t+=i}}return e.length!==n.length&&Qn(e,0,e.length,n),e}function BM(e,t){let n=e.length,r=0,i,o,l,u;for(;n--;)if(i=e[n][1],o){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(l){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(o=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(l=n);const c={type:e[o][1].type==="labelLink"?"link":"image",start:{...e[o][1].start},end:{...e[e.length-1][1].end}},f={type:"label",start:{...e[o][1].start},end:{...e[l][1].end}},h={type:"labelText",start:{...e[o+r+2][1].end},end:{...e[l-2][1].start}};return u=[["enter",c,t],["enter",f,t]],u=cr(u,e.slice(o+1,o+r+3)),u=cr(u,[["enter",h,t]]),u=cr(u,Uc(t.parser.constructs.insideSpan.null,e.slice(o+r+4,l-3),t)),u=cr(u,[["exit",h,t],e[l-2],e[l-1],["exit",f,t]]),u=cr(u,e.slice(l+1)),u=cr(u,[["exit",c,t]]),Qn(e,o,e.length,u),e}function UM(e,t,n){const r=this;let i=r.events.length,o,l;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){o=r.events[i][1];break}return u;function u(y){return o?o._inactive?p(y):(l=r.parser.defined.includes(Sr(r.sliceSerialize({start:o.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(y),e.exit("labelMarker"),e.exit("labelEnd"),c):n(y)}function c(y){return y===40?e.attempt(LM,h,l?h:p)(y):y===91?e.attempt($M,h,l?f:p)(y):l?h(y):p(y)}function f(y){return e.attempt(FM,h,p)(y)}function h(y){return t(y)}function p(y){return o._balanced=!0,n(y)}}function WM(e,t,n){return r;function r(p){return e.enter("resource"),e.enter("resourceMarker"),e.consume(p),e.exit("resourceMarker"),i}function i(p){return Et(p)?Ua(e,o)(p):o(p)}function o(p){return p===41?h(p):Lk(e,l,u,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function l(p){return Et(p)?Ua(e,c)(p):h(p)}function u(p){return n(p)}function c(p){return p===34||p===39||p===40?Fk(e,f,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):h(p)}function f(p){return Et(p)?Ua(e,h)(p):h(p)}function h(p){return p===41?(e.enter("resourceMarker"),e.consume(p),e.exit("resourceMarker"),e.exit("resource"),t):n(p)}}function HM(e,t,n){const r=this;return i;function i(u){return $k.call(r,e,o,l,"reference","referenceMarker","referenceString")(u)}function o(u){return r.parser.defined.includes(Sr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(u):n(u)}function l(u){return n(u)}}function VM(e,t,n){return r;function r(o){return e.enter("reference"),e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),i}function i(o){return o===93?(e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),e.exit("reference"),t):n(o)}}const qM={name:"labelStartImage",resolveAll:fm.resolveAll,tokenize:YM};function YM(e,t,n){const r=this;return i;function i(u){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(u),e.exit("labelImageMarker"),o}function o(u){return u===91?(e.enter("labelMarker"),e.consume(u),e.exit("labelMarker"),e.exit("labelImage"),l):n(u)}function l(u){return u===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(u):t(u)}}const GM={name:"labelStartLink",resolveAll:fm.resolveAll,tokenize:KM};function KM(e,t,n){const r=this;return i;function i(l){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelLink"),o}function o(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):t(l)}}const ch={name:"lineEnding",tokenize:JM};function JM(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),pt(e,t,"linePrefix")}}const Ku={name:"thematicBreak",tokenize:QM};function QM(e,t,n){let r=0,i;return o;function o(f){return e.enter("thematicBreak"),l(f)}function l(f){return i=f,u(f)}function u(f){return f===i?(e.enter("thematicBreakSequence"),c(f)):r>=3&&(f===null||Xe(f))?(e.exit("thematicBreak"),t(f)):n(f)}function c(f){return f===i?(e.consume(f),r++,c):(e.exit("thematicBreakSequence"),dt(f)?pt(e,u,"whitespace")(f):u(f))}}const Mn={continuation:{tokenize:t2},exit:r2,name:"list",tokenize:e2},XM={partial:!0,tokenize:i2},ZM={partial:!0,tokenize:n2};function e2(e,t,n){const r=this,i=r.events[r.events.length-1];let o=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,l=0;return u;function u(v){const S=r.containerState.type||(v===42||v===43||v===45?"listUnordered":"listOrdered");if(S==="listUnordered"?!r.containerState.marker||v===r.containerState.marker:mp(v)){if(r.containerState.type||(r.containerState.type=S,e.enter(S,{_container:!0})),S==="listUnordered")return e.enter("listItemPrefix"),v===42||v===45?e.check(Ku,n,f)(v):f(v);if(!r.interrupt||v===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(v)}return n(v)}function c(v){return mp(v)&&++l<10?(e.consume(v),c):(!r.interrupt||l<2)&&(r.containerState.marker?v===r.containerState.marker:v===41||v===46)?(e.exit("listItemValue"),f(v)):n(v)}function f(v){return e.enter("listItemMarker"),e.consume(v),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||v,e.check(ml,r.interrupt?n:h,e.attempt(XM,y,p))}function h(v){return r.containerState.initialBlankLine=!0,o++,y(v)}function p(v){return dt(v)?(e.enter("listItemPrefixWhitespace"),e.consume(v),e.exit("listItemPrefixWhitespace"),y):n(v)}function y(v){return r.containerState.size=o+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(v)}}function t2(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(ml,i,o);function i(u){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,pt(e,t,"listItemIndent",r.containerState.size+1)(u)}function o(u){return r.containerState.furtherBlankLines||!dt(u)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,l(u)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(ZM,t,l)(u))}function l(u){return r.containerState._closeFlow=!0,r.interrupt=void 0,pt(e,e.attempt(Mn,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u)}}function n2(e,t,n){const r=this;return pt(e,i,"listItemIndent",r.containerState.size+1);function i(o){const l=r.events[r.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===r.containerState.size?t(o):n(o)}}function r2(e){e.exit(this.containerState.type)}function i2(e,t,n){const r=this;return pt(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(o){const l=r.events[r.events.length-1];return!dt(o)&&l&&l[1].type==="listItemPrefixWhitespace"?t(o):n(o)}}const c0={name:"setextUnderline",resolveTo:s2,tokenize:o2};function s2(e,t){let n=e.length,r,i,o;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!o&&e[n][1].type==="definition"&&(o=n);const l={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[i][1].type="setextHeadingText",o?(e.splice(i,0,["enter",l,t]),e.splice(o+1,0,["exit",e[r][1],t]),e[r][1].end={...e[o][1].end}):e[r][1]=l,e.push(["exit",l,t]),e}function o2(e,t,n){const r=this;let i;return o;function o(f){let h=r.events.length,p;for(;h--;)if(r.events[h][1].type!=="lineEnding"&&r.events[h][1].type!=="linePrefix"&&r.events[h][1].type!=="content"){p=r.events[h][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||p)?(e.enter("setextHeadingLine"),i=f,l(f)):n(f)}function l(f){return e.enter("setextHeadingLineSequence"),u(f)}function u(f){return f===i?(e.consume(f),u):(e.exit("setextHeadingLineSequence"),dt(f)?pt(e,c,"lineSuffix")(f):c(f))}function c(f){return f===null||Xe(f)?(e.exit("setextHeadingLine"),t(f)):n(f)}}const a2={tokenize:l2};function l2(e){const t=this,n=e.attempt(ml,r,e.attempt(this.parser.constructs.flowInitial,i,pt(e,e.attempt(this.parser.constructs.flow,i,e.attempt(hM,i)),"linePrefix")));return n;function r(o){if(o===null){e.consume(o);return}return e.enter("lineEndingBlank"),e.consume(o),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const u2={resolveAll:Bk()},c2=zk("string"),d2=zk("text");function zk(e){return{resolveAll:Bk(e==="text"?f2:void 0),tokenize:t};function t(n){const r=this,i=this.parser.constructs[e],o=n.attempt(i,l,u);return l;function l(h){return f(h)?o(h):u(h)}function u(h){if(h===null){n.consume(h);return}return n.enter("data"),n.consume(h),c}function c(h){return f(h)?(n.exit("data"),o(h)):(n.consume(h),c)}function f(h){if(h===null)return!0;const p=i[h];let y=-1;if(p)for(;++y<p.length;){const v=p[y];if(!v.previous||v.previous.call(r,r.previous))return!0}return!1}}}function Bk(e){return t;function t(n,r){let i=-1,o;for(;++i<=n.length;)o===void 0?n[i]&&n[i][1].type==="data"&&(o=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==o+2&&(n[o][1].end=n[i-1][1].end,n.splice(o+2,i-o-2),i=o+2),o=void 0);return e?e(n,r):n}}function f2(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let o=i.length,l=-1,u=0,c;for(;o--;){const f=i[o];if(typeof f=="string"){for(l=f.length;f.charCodeAt(l-1)===32;)u++,l--;if(l)break;l=-1}else if(f===-2)c=!0,u++;else if(f!==-1){o++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(u=0),u){const f={type:n===e.length||c||u<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?l:r.start._bufferIndex+l,_index:r.start._index+o,line:r.end.line,column:r.end.column-u,offset:r.end.offset-u},end:{...r.end}};r.end={...f.start},r.start.offset===r.end.offset?Object.assign(r,f):(e.splice(n,0,["enter",f,t],["exit",f,t]),n+=2)}n++}return e}const h2={42:Mn,43:Mn,45:Mn,48:Mn,49:Mn,50:Mn,51:Mn,52:Mn,53:Mn,54:Mn,55:Mn,56:Mn,57:Mn,62:Rk},p2={91:vM},m2={[-2]:uh,[-1]:uh,32:uh},g2={35:EM,42:Ku,45:[c0,Ku],60:NM,61:c0,95:Ku,96:l0,126:l0},y2={38:Mk,92:Ok},v2={[-5]:ch,[-4]:ch,[-3]:ch,33:qM,38:Mk,42:gp,60:[GO,MM],91:GM,92:[kM,Ok],93:fm,95:gp,96:aM},x2={null:[gp,u2]},w2={null:[42,95]},b2={null:[]},k2=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:w2,contentInitial:p2,disable:b2,document:h2,flow:g2,flowInitial:m2,insideSpan:x2,string:y2,text:v2},Symbol.toStringTag,{value:"Module"}));function S2(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},o=[];let l=[],u=[];const c={attempt:z(M),check:z(P),consume:_,enter:j,exit:I,interrupt:z(P,{interrupt:!0})},f={code:null,containerState:{},defineSkip:k,events:[],now:S,parser:e,previous:null,sliceSerialize:y,sliceStream:v,write:p};let h=t.tokenize.call(f,c);return t.resolveAll&&o.push(t),f;function p(D){return l=cr(l,D),E(),l[l.length-1]!==null?[]:(ne(t,0),f.events=Uc(o,f.events,f),f.events)}function y(D,H){return _2(v(D),H)}function v(D){return E2(l,D)}function S(){const{_bufferIndex:D,_index:H,line:W,column:G,offset:$}=r;return{_bufferIndex:D,_index:H,line:W,column:G,offset:$}}function k(D){i[D.line]=D.column,R()}function E(){let D;for(;r._index<l.length;){const H=l[r._index];if(typeof H=="string")for(D=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===D&&r._bufferIndex<H.length;)C(H.charCodeAt(r._bufferIndex));else C(H)}}function C(D){h=h(D)}function _(D){Xe(D)?(r.line++,r.column=1,r.offset+=D===-3?2:1,R()):D!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===l[r._index].length&&(r._bufferIndex=-1,r._index++)),f.previous=D}function j(D,H){const W=H||{};return W.type=D,W.start=S(),f.events.push(["enter",W,f]),u.push(W),W}function I(D){const H=u.pop();return H.end=S(),f.events.push(["exit",H,f]),H}function M(D,H){ne(D,H.from)}function P(D,H){H.restore()}function z(D,H){return W;function W(G,$,Y){let re,O,ee,T;return Array.isArray(G)?te(G):"tokenize"in G?te([G]):U(G);function U(me){return de;function de(Ne){const Ae=Ne!==null&&me[Ne],Ie=Ne!==null&&me.null,X=[...Array.isArray(Ae)?Ae:Ae?[Ae]:[],...Array.isArray(Ie)?Ie:Ie?[Ie]:[]];return te(X)(Ne)}}function te(me){return re=me,O=0,me.length===0?Y:A(me[O])}function A(me){return de;function de(Ne){return T=Z(),ee=me,me.partial||(f.currentConstruct=me),me.name&&f.parser.constructs.disable.null.includes(me.name)?he():me.tokenize.call(H?Object.assign(Object.create(f),H):f,c,we,he)(Ne)}}function we(me){return D(ee,T),$}function he(me){return T.restore(),++O<re.length?A(re[O]):Y}}}function ne(D,H){D.resolveAll&&!o.includes(D)&&o.push(D),D.resolve&&Qn(f.events,H,f.events.length-H,D.resolve(f.events.slice(H),f)),D.resolveTo&&(f.events=D.resolveTo(f.events,f))}function Z(){const D=S(),H=f.previous,W=f.currentConstruct,G=f.events.length,$=Array.from(u);return{from:G,restore:Y};function Y(){r=D,f.previous=H,f.currentConstruct=W,f.events.length=G,u=$,R()}}function R(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function E2(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,o=t.end._bufferIndex;let l;if(n===i)l=[e[n].slice(r,o)];else{if(l=e.slice(n,i),r>-1){const u=l[0];typeof u=="string"?l[0]=u.slice(r):l.shift()}o>0&&l.push(e[i].slice(0,o))}return l}function _2(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const o=e[n];let l;if(typeof o=="string")l=o;else switch(o){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=t?" ":"	";break}case-1:{if(!t&&i)continue;l=" ";break}default:l=String.fromCharCode(o)}i=o===-2,r.push(l)}return r.join("")}function C2(e){const r={constructs:Pk([k2,...(e||{}).extensions||[]]),content:i(BO),defined:[],document:i(WO),flow:i(a2),lazy:{},string:i(c2),text:i(d2)};return r;function i(o){return l;function l(u){return S2(r,o,u)}}}function j2(e){for(;!Dk(e););return e}const d0=/[\0\t\n\r]/g;function N2(){let e=1,t="",n=!0,r;return i;function i(o,l,u){const c=[];let f,h,p,y,v;for(o=t+(typeof o=="string"?o.toString():new TextDecoder(l||void 0).decode(o)),p=0,t="",n&&(o.charCodeAt(0)===65279&&p++,n=void 0);p<o.length;){if(d0.lastIndex=p,f=d0.exec(o),y=f&&f.index!==void 0?f.index:o.length,v=o.charCodeAt(y),!f){t=o.slice(p);break}if(v===10&&p===y&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),p<y&&(c.push(o.slice(p,y)),e+=y-p),v){case 0:{c.push(65533),e++;break}case 9:{for(h=Math.ceil(e/4)*4,c.push(-2);e++<h;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:r=!0,e=1}p=y+1}return u&&(r&&c.push(-5),t&&c.push(t),c.push(null)),c}}const T2=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function I2(e){return e.replace(T2,P2)}function P2(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),o=i===120||i===88;return Ak(n.slice(o?2:1),o?16:10)}return dm(n)||e}const Uk={}.hasOwnProperty;function A2(e,t,n){return typeof t!="string"&&(n=t,t=void 0),R2(n)(j2(C2(n).document().write(N2()(e,t,!0))))}function R2(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(J),autolinkProtocol:Z,autolinkEmail:Z,atxHeading:o(Ze),blockQuote:o(Ie),characterEscape:Z,characterReference:Z,codeFenced:o(X),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:o(X,l),codeText:o(je,l),codeTextData:Z,data:Z,codeFlowValue:Z,definition:o(De),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:o(Ye),hardBreakEscape:o(ft),hardBreakTrailing:o(ft),htmlFlow:o(Pt,l),htmlFlowData:Z,htmlText:o(Pt,l),htmlTextData:Z,image:o(en),label:l,link:o(J),listItem:o(ge),listItemValue:y,listOrdered:o(ce,p),listUnordered:o(ce),paragraph:o(Pe),reference:A,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:o(Ze),strong:o(ke),thematicBreak:o(Te)},exit:{atxHeading:c(),atxHeadingSequence:M,autolink:c(),autolinkEmail:Ae,autolinkProtocol:Ne,blockQuote:c(),characterEscapeValue:R,characterReferenceMarkerHexadecimal:he,characterReferenceMarkerNumeric:he,characterReferenceValue:me,characterReference:de,codeFenced:c(E),codeFencedFence:k,codeFencedFenceInfo:v,codeFencedFenceMeta:S,codeFlowValue:R,codeIndented:c(C),codeText:c($),codeTextData:R,data:R,definition:c(),definitionDestinationString:I,definitionLabelString:_,definitionTitleString:j,emphasis:c(),hardBreakEscape:c(H),hardBreakTrailing:c(H),htmlFlow:c(W),htmlFlowData:R,htmlText:c(G),htmlTextData:R,image:c(re),label:ee,labelText:O,lineEnding:D,link:c(Y),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:we,resourceDestinationString:T,resourceTitleString:U,resource:te,setextHeading:c(ne),setextHeadingLineSequence:z,setextHeadingText:P,strong:c(),thematicBreak:c()}};Wk(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(ae){let pe={type:"root",children:[]};const Re={stack:[pe],tokenStack:[],config:t,enter:u,exit:f,buffer:l,resume:h,data:n},He=[];let ve=-1;for(;++ve<ae.length;)if(ae[ve][1].type==="listOrdered"||ae[ve][1].type==="listUnordered")if(ae[ve][0]==="enter")He.push(ve);else{const F=He.pop();ve=i(ae,F,ve)}for(ve=-1;++ve<ae.length;){const F=t[ae[ve][0]];Uk.call(F,ae[ve][1].type)&&F[ae[ve][1].type].call(Object.assign({sliceSerialize:ae[ve][2].sliceSerialize},Re),ae[ve][1])}if(Re.tokenStack.length>0){const F=Re.tokenStack[Re.tokenStack.length-1];(F[1]||f0).call(Re,void 0,F[0])}for(pe.position={start:Ci(ae.length>0?ae[0][1].start:{line:1,column:1,offset:0}),end:Ci(ae.length>0?ae[ae.length-2][1].end:{line:1,column:1,offset:0})},ve=-1;++ve<t.transforms.length;)pe=t.transforms[ve](pe)||pe;return pe}function i(ae,pe,Re){let He=pe-1,ve=-1,F=!1,L,V,K,se;for(;++He<=Re;){const fe=ae[He];switch(fe[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{fe[0]==="enter"?ve++:ve--,se=void 0;break}case"lineEndingBlank":{fe[0]==="enter"&&(L&&!se&&!ve&&!K&&(K=He),se=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:se=void 0}if(!ve&&fe[0]==="enter"&&fe[1].type==="listItemPrefix"||ve===-1&&fe[0]==="exit"&&(fe[1].type==="listUnordered"||fe[1].type==="listOrdered")){if(L){let Se=He;for(V=void 0;Se--;){const Oe=ae[Se];if(Oe[1].type==="lineEnding"||Oe[1].type==="lineEndingBlank"){if(Oe[0]==="exit")continue;V&&(ae[V][1].type="lineEndingBlank",F=!0),Oe[1].type="lineEnding",V=Se}else if(!(Oe[1].type==="linePrefix"||Oe[1].type==="blockQuotePrefix"||Oe[1].type==="blockQuotePrefixWhitespace"||Oe[1].type==="blockQuoteMarker"||Oe[1].type==="listItemIndent"))break}K&&(!V||K<V)&&(L._spread=!0),L.end=Object.assign({},V?ae[V][1].start:fe[1].end),ae.splice(V||He,0,["exit",L,fe[2]]),He++,Re++}if(fe[1].type==="listItemPrefix"){const Se={type:"listItem",_spread:!1,start:Object.assign({},fe[1].start),end:void 0};L=Se,ae.splice(He,0,["enter",Se,fe[2]]),He++,Re++,K=void 0,se=!0}}}return ae[pe][1]._spread=F,Re}function o(ae,pe){return Re;function Re(He){u.call(this,ae(He),He),pe&&pe.call(this,He)}}function l(){this.stack.push({type:"fragment",children:[]})}function u(ae,pe,Re){this.stack[this.stack.length-1].children.push(ae),this.stack.push(ae),this.tokenStack.push([pe,Re||void 0]),ae.position={start:Ci(pe.start),end:void 0}}function c(ae){return pe;function pe(Re){ae&&ae.call(this,Re),f.call(this,Re)}}function f(ae,pe){const Re=this.stack.pop(),He=this.tokenStack.pop();if(He)He[0].type!==ae.type&&(pe?pe.call(this,ae,He[0]):(He[1]||f0).call(this,ae,He[0]));else throw new Error("Cannot close `"+ae.type+"` ("+Ba({start:ae.start,end:ae.end})+"): its not open");Re.position.end=Ci(ae.end)}function h(){return cm(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function y(ae){if(this.data.expectingFirstListItemValue){const pe=this.stack[this.stack.length-2];pe.start=Number.parseInt(this.sliceSerialize(ae),10),this.data.expectingFirstListItemValue=void 0}}function v(){const ae=this.resume(),pe=this.stack[this.stack.length-1];pe.lang=ae}function S(){const ae=this.resume(),pe=this.stack[this.stack.length-1];pe.meta=ae}function k(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function E(){const ae=this.resume(),pe=this.stack[this.stack.length-1];pe.value=ae.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function C(){const ae=this.resume(),pe=this.stack[this.stack.length-1];pe.value=ae.replace(/(\r?\n|\r)$/g,"")}function _(ae){const pe=this.resume(),Re=this.stack[this.stack.length-1];Re.label=pe,Re.identifier=Sr(this.sliceSerialize(ae)).toLowerCase()}function j(){const ae=this.resume(),pe=this.stack[this.stack.length-1];pe.title=ae}function I(){const ae=this.resume(),pe=this.stack[this.stack.length-1];pe.url=ae}function M(ae){const pe=this.stack[this.stack.length-1];if(!pe.depth){const Re=this.sliceSerialize(ae).length;pe.depth=Re}}function P(){this.data.setextHeadingSlurpLineEnding=!0}function z(ae){const pe=this.stack[this.stack.length-1];pe.depth=this.sliceSerialize(ae).codePointAt(0)===61?1:2}function ne(){this.data.setextHeadingSlurpLineEnding=void 0}function Z(ae){const Re=this.stack[this.stack.length-1].children;let He=Re[Re.length-1];(!He||He.type!=="text")&&(He=ue(),He.position={start:Ci(ae.start),end:void 0},Re.push(He)),this.stack.push(He)}function R(ae){const pe=this.stack.pop();pe.value+=this.sliceSerialize(ae),pe.position.end=Ci(ae.end)}function D(ae){const pe=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Re=pe.children[pe.children.length-1];Re.position.end=Ci(ae.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(pe.type)&&(Z.call(this,ae),R.call(this,ae))}function H(){this.data.atHardBreak=!0}function W(){const ae=this.resume(),pe=this.stack[this.stack.length-1];pe.value=ae}function G(){const ae=this.resume(),pe=this.stack[this.stack.length-1];pe.value=ae}function $(){const ae=this.resume(),pe=this.stack[this.stack.length-1];pe.value=ae}function Y(){const ae=this.stack[this.stack.length-1];if(this.data.inReference){const pe=this.data.referenceType||"shortcut";ae.type+="Reference",ae.referenceType=pe,delete ae.url,delete ae.title}else delete ae.identifier,delete ae.label;this.data.referenceType=void 0}function re(){const ae=this.stack[this.stack.length-1];if(this.data.inReference){const pe=this.data.referenceType||"shortcut";ae.type+="Reference",ae.referenceType=pe,delete ae.url,delete ae.title}else delete ae.identifier,delete ae.label;this.data.referenceType=void 0}function O(ae){const pe=this.sliceSerialize(ae),Re=this.stack[this.stack.length-2];Re.label=I2(pe),Re.identifier=Sr(pe).toLowerCase()}function ee(){const ae=this.stack[this.stack.length-1],pe=this.resume(),Re=this.stack[this.stack.length-1];if(this.data.inReference=!0,Re.type==="link"){const He=ae.children;Re.children=He}else Re.alt=pe}function T(){const ae=this.resume(),pe=this.stack[this.stack.length-1];pe.url=ae}function U(){const ae=this.resume(),pe=this.stack[this.stack.length-1];pe.title=ae}function te(){this.data.inReference=void 0}function A(){this.data.referenceType="collapsed"}function we(ae){const pe=this.resume(),Re=this.stack[this.stack.length-1];Re.label=pe,Re.identifier=Sr(this.sliceSerialize(ae)).toLowerCase(),this.data.referenceType="full"}function he(ae){this.data.characterReferenceType=ae.type}function me(ae){const pe=this.sliceSerialize(ae),Re=this.data.characterReferenceType;let He;Re?(He=Ak(pe,Re==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):He=dm(pe);const ve=this.stack[this.stack.length-1];ve.value+=He}function de(ae){const pe=this.stack.pop();pe.position.end=Ci(ae.end)}function Ne(ae){R.call(this,ae);const pe=this.stack[this.stack.length-1];pe.url=this.sliceSerialize(ae)}function Ae(ae){R.call(this,ae);const pe=this.stack[this.stack.length-1];pe.url="mailto:"+this.sliceSerialize(ae)}function Ie(){return{type:"blockquote",children:[]}}function X(){return{type:"code",lang:null,meta:null,value:""}}function je(){return{type:"inlineCode",value:""}}function De(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ye(){return{type:"emphasis",children:[]}}function Ze(){return{type:"heading",depth:0,children:[]}}function ft(){return{type:"break"}}function Pt(){return{type:"html",value:""}}function en(){return{type:"image",title:null,url:"",alt:null}}function J(){return{type:"link",title:null,url:"",children:[]}}function ce(ae){return{type:"list",ordered:ae.type==="listOrdered",start:null,spread:ae._spread,children:[]}}function ge(ae){return{type:"listItem",spread:ae._spread,checked:null,children:[]}}function Pe(){return{type:"paragraph",children:[]}}function ke(){return{type:"strong",children:[]}}function ue(){return{type:"text",value:""}}function Te(){return{type:"thematicBreak"}}}function Ci(e){return{line:e.line,column:e.column,offset:e.offset}}function Wk(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?Wk(e,r):O2(e,r)}}function O2(e,t){let n;for(n in t)if(Uk.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function f0(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Ba({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Ba({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Ba({start:t.start,end:t.end})+") is still open")}function M2(e){const t=this;t.parser=n;function n(r){return A2(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function D2(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function L2(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function $2(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function F2(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function z2(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function B2(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=zo(r.toLowerCase()),o=e.footnoteOrder.indexOf(r);let l,u=e.footnoteCounts.get(r);u===void 0?(u=0,e.footnoteOrder.push(r),l=e.footnoteOrder.length):l=o+1,u+=1,e.footnoteCounts.set(r,u);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(u>1?"-"+u:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(l)}]};e.patch(t,c);const f={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,f),e.applyData(t,f)}function U2(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function W2(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function Hk(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),o=i[0];o&&o.type==="text"?o.value="["+o.value:i.unshift({type:"text",value:"["});const l=i[i.length-1];return l&&l.type==="text"?l.value+=r:i.push({type:"text",value:r}),i}function H2(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Hk(e,t);const i={src:zo(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const o={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,o),e.applyData(t,o)}function V2(e,t){const n={src:zo(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function q2(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function Y2(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Hk(e,t);const i={href:zo(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const o={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,o),e.applyData(t,o)}function G2(e,t){const n={href:zo(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function K2(e,t,n){const r=e.all(t),i=n?J2(n):Vk(t),o={},l=[];if(typeof t.checked=="boolean"){const h=r[0];let p;h&&h.type==="element"&&h.tagName==="p"?p=h:(p={type:"element",tagName:"p",properties:{},children:[]},r.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let u=-1;for(;++u<r.length;){const h=r[u];(i||u!==0||h.type!=="element"||h.tagName!=="p")&&l.push({type:"text",value:`
`}),h.type==="element"&&h.tagName==="p"&&!i?l.push(...h.children):l.push(h)}const c=r[r.length-1];c&&(i||c.type!=="element"||c.tagName!=="p")&&l.push({type:"text",value:`
`});const f={type:"element",tagName:"li",properties:o,children:l};return e.patch(t,f),e.applyData(t,f)}function J2(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=Vk(n[r])}return t}function Vk(e){const t=e.spread;return t??e.children.length>1}function Q2(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const l=r[i];if(l.type==="element"&&l.tagName==="li"&&l.properties&&Array.isArray(l.properties.className)&&l.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,o),e.applyData(t,o)}function X2(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Z2(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function eD(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function tD(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const l={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],l),i.push(l)}if(n.length>0){const l={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},u=om(t.children[1]),c=Ek(t.children[t.children.length-1]);u&&c&&(l.position={start:u,end:c}),i.push(l)}const o={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,o),e.applyData(t,o)}function nD(e,t,n){const r=n?n.children:void 0,o=(r?r.indexOf(t):1)===0?"th":"td",l=n&&n.type==="table"?n.align:void 0,u=l?l.length:t.children.length;let c=-1;const f=[];for(;++c<u;){const p=t.children[c],y={},v=l?l[c]:void 0;v&&(y.align=v);let S={type:"element",tagName:o,properties:y,children:[]};p&&(S.children=e.all(p),e.patch(p,S),S=e.applyData(p,S)),f.push(S)}const h={type:"element",tagName:"tr",properties:{},children:e.wrap(f,!0)};return e.patch(t,h),e.applyData(t,h)}function rD(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const h0=9,p0=32;function iD(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const o=[];for(;r;)o.push(m0(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return o.push(m0(t.slice(i),i>0,!1)),o.join("")}function m0(e,t,n){let r=0,i=e.length;if(t){let o=e.codePointAt(r);for(;o===h0||o===p0;)r++,o=e.codePointAt(r)}if(n){let o=e.codePointAt(i-1);for(;o===h0||o===p0;)i--,o=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function sD(e,t){const n={type:"text",value:iD(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function oD(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const aD={blockquote:D2,break:L2,code:$2,delete:F2,emphasis:z2,footnoteReference:B2,heading:U2,html:W2,imageReference:H2,image:V2,inlineCode:q2,linkReference:Y2,link:G2,listItem:K2,list:Q2,paragraph:X2,root:Z2,strong:eD,table:tD,tableCell:rD,tableRow:nD,text:sD,thematicBreak:oD,toml:Du,yaml:Du,definition:Du,footnoteDefinition:Du};function Du(){}const qk=-1,Wc=0,Wa=1,pc=2,hm=3,pm=4,mm=5,gm=6,Yk=7,Gk=8,g0=typeof self=="object"?self:globalThis,lD=(e,t)=>{const n=(i,o)=>(e.set(o,i),i),r=i=>{if(e.has(i))return e.get(i);const[o,l]=t[i];switch(o){case Wc:case qk:return n(l,i);case Wa:{const u=n([],i);for(const c of l)u.push(r(c));return u}case pc:{const u=n({},i);for(const[c,f]of l)u[r(c)]=r(f);return u}case hm:return n(new Date(l),i);case pm:{const{source:u,flags:c}=l;return n(new RegExp(u,c),i)}case mm:{const u=n(new Map,i);for(const[c,f]of l)u.set(r(c),r(f));return u}case gm:{const u=n(new Set,i);for(const c of l)u.add(r(c));return u}case Yk:{const{name:u,message:c}=l;return n(new g0[u](c),i)}case Gk:return n(BigInt(l),i);case"BigInt":return n(Object(BigInt(l)),i);case"ArrayBuffer":return n(new Uint8Array(l).buffer,l);case"DataView":{const{buffer:u}=new Uint8Array(l);return n(new DataView(u),l)}}return n(new g0[o](l),i)};return r},y0=e=>lD(new Map,e)(0),fo="",{toString:uD}={},{keys:cD}=Object,Na=e=>{const t=typeof e;if(t!=="object"||!e)return[Wc,t];const n=uD.call(e).slice(8,-1);switch(n){case"Array":return[Wa,fo];case"Object":return[pc,fo];case"Date":return[hm,fo];case"RegExp":return[pm,fo];case"Map":return[mm,fo];case"Set":return[gm,fo];case"DataView":return[Wa,n]}return n.includes("Array")?[Wa,n]:n.includes("Error")?[Yk,n]:[pc,n]},Lu=([e,t])=>e===Wc&&(t==="function"||t==="symbol"),dD=(e,t,n,r)=>{const i=(l,u)=>{const c=r.push(l)-1;return n.set(u,c),c},o=l=>{if(n.has(l))return n.get(l);let[u,c]=Na(l);switch(u){case Wc:{let h=l;switch(c){case"bigint":u=Gk,h=l.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);h=null;break;case"undefined":return i([qk],l)}return i([u,h],l)}case Wa:{if(c){let y=l;return c==="DataView"?y=new Uint8Array(l.buffer):c==="ArrayBuffer"&&(y=new Uint8Array(l)),i([c,[...y]],l)}const h=[],p=i([u,h],l);for(const y of l)h.push(o(y));return p}case pc:{if(c)switch(c){case"BigInt":return i([c,l.toString()],l);case"Boolean":case"Number":case"String":return i([c,l.valueOf()],l)}if(t&&"toJSON"in l)return o(l.toJSON());const h=[],p=i([u,h],l);for(const y of cD(l))(e||!Lu(Na(l[y])))&&h.push([o(y),o(l[y])]);return p}case hm:return i([u,l.toISOString()],l);case pm:{const{source:h,flags:p}=l;return i([u,{source:h,flags:p}],l)}case mm:{const h=[],p=i([u,h],l);for(const[y,v]of l)(e||!(Lu(Na(y))||Lu(Na(v))))&&h.push([o(y),o(v)]);return p}case gm:{const h=[],p=i([u,h],l);for(const y of l)(e||!Lu(Na(y)))&&h.push(o(y));return p}}const{message:f}=l;return i([u,{name:c,message:f}],l)};return o},v0=(e,{json:t,lossy:n}={})=>{const r=[];return dD(!(t||n),!!t,new Map,r)(e),r},mc=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?y0(v0(e,t)):structuredClone(e):(e,t)=>y0(v0(e,t));function fD(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function hD(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function pD(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||fD,r=e.options.footnoteBackLabel||hD,i=e.options.footnoteLabel||"Footnotes",o=e.options.footnoteLabelTagName||"h2",l=e.options.footnoteLabelProperties||{className:["sr-only"]},u=[];let c=-1;for(;++c<e.footnoteOrder.length;){const f=e.footnoteById.get(e.footnoteOrder[c]);if(!f)continue;const h=e.all(f),p=String(f.identifier).toUpperCase(),y=zo(p.toLowerCase());let v=0;const S=[],k=e.footnoteCounts.get(p);for(;k!==void 0&&++v<=k;){S.length>0&&S.push({type:"text",value:" "});let _=typeof n=="string"?n:n(c,v);typeof _=="string"&&(_={type:"text",value:_}),S.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+y+(v>1?"-"+v:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,v),className:["data-footnote-backref"]},children:Array.isArray(_)?_:[_]})}const E=h[h.length-1];if(E&&E.type==="element"&&E.tagName==="p"){const _=E.children[E.children.length-1];_&&_.type==="text"?_.value+=" ":E.children.push({type:"text",value:" "}),E.children.push(...S)}else h.push(...S);const C={type:"element",tagName:"li",properties:{id:t+"fn-"+y},children:e.wrap(h,!0)};e.patch(f,C),u.push(C)}if(u.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...mc(l),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(u,!0)},{type:"text",value:`
`}]}}const Hc=(function(e){if(e==null)return vD;if(typeof e=="function")return Vc(e);if(typeof e=="object")return Array.isArray(e)?mD(e):gD(e);if(typeof e=="string")return yD(e);throw new Error("Expected function, string, or object as test")});function mD(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Hc(e[n]);return Vc(r);function r(...i){let o=-1;for(;++o<t.length;)if(t[o].apply(this,i))return!0;return!1}}function gD(e){const t=e;return Vc(n);function n(r){const i=r;let o;for(o in e)if(i[o]!==t[o])return!1;return!0}}function yD(e){return Vc(t);function t(n){return n&&n.type===e}}function Vc(e){return t;function t(n,r,i){return!!(xD(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function vD(){return!0}function xD(e){return e!==null&&typeof e=="object"&&"type"in e}const Kk=[],wD=!0,yp=!1,bD="skip";function Jk(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const o=Hc(i),l=r?-1:1;u(e,void 0,[])();function u(c,f,h){const p=c&&typeof c=="object"?c:{};if(typeof p.type=="string"){const v=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(y,"name",{value:"node ("+(c.type+(v?"<"+v+">":""))+")"})}return y;function y(){let v=Kk,S,k,E;if((!t||o(c,f,h[h.length-1]||void 0))&&(v=kD(n(c,h)),v[0]===yp))return v;if("children"in c&&c.children){const C=c;if(C.children&&v[0]!==bD)for(k=(r?C.children.length:-1)+l,E=h.concat(C);k>-1&&k<C.children.length;){const _=C.children[k];if(S=u(_,k,E)(),S[0]===yp)return S;k=typeof S[1]=="number"?S[1]:k+l}}return v}}}function kD(e){return Array.isArray(e)?e:typeof e=="number"?[wD,e]:e==null?Kk:[e]}function qc(e,t,n,r){let i,o,l;typeof t=="function"&&typeof n!="function"?(o=void 0,l=t,i=n):(o=t,l=n,i=r),Jk(e,o,u,i);function u(c,f){const h=f[f.length-1],p=h?h.children.indexOf(c):void 0;return l(c,p,h)}}const vp={}.hasOwnProperty,SD={};function ED(e,t){const n=t||SD,r=new Map,i=new Map,o=new Map,l={...aD,...n.handlers},u={all:f,applyData:CD,definitionById:r,footnoteById:i,footnoteCounts:o,footnoteOrder:[],handlers:l,one:c,options:n,patch:_D,wrap:ND};return qc(e,function(h){if(h.type==="definition"||h.type==="footnoteDefinition"){const p=h.type==="definition"?r:i,y=String(h.identifier).toUpperCase();p.has(y)||p.set(y,h)}}),u;function c(h,p){const y=h.type,v=u.handlers[y];if(vp.call(u.handlers,y)&&v)return v(u,h,p);if(u.options.passThrough&&u.options.passThrough.includes(y)){if("children"in h){const{children:k,...E}=h,C=mc(E);return C.children=u.all(h),C}return mc(h)}return(u.options.unknownHandler||jD)(u,h,p)}function f(h){const p=[];if("children"in h){const y=h.children;let v=-1;for(;++v<y.length;){const S=u.one(y[v],h);if(S){if(v&&y[v-1].type==="break"&&(!Array.isArray(S)&&S.type==="text"&&(S.value=x0(S.value)),!Array.isArray(S)&&S.type==="element")){const k=S.children[0];k&&k.type==="text"&&(k.value=x0(k.value))}Array.isArray(S)?p.push(...S):p.push(S)}}}return p}}function _D(e,t){e.position&&(t.position=hO(e))}function CD(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,o=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const l="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:l}}n.type==="element"&&o&&Object.assign(n.properties,mc(o)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function jD(e,t){const n=t.data||{},r="value"in t&&!(vp.call(n,"hProperties")||vp.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function ND(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function x0(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function w0(e,t){const n=ED(e,t),r=n.one(e,void 0),i=pD(n),o=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&o.children.push({type:"text",value:`
`},i),o}function TD(e,t){return e&&"run"in e?async function(n,r){const i=w0(n,{file:r,...t});await e.run(i,r)}:function(n,r){return w0(n,{file:r,...e||t})}}function b0(e){if(e)throw e}var dh,k0;function ID(){if(k0)return dh;k0=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(f){return typeof Array.isArray=="function"?Array.isArray(f):t.call(f)==="[object Array]"},o=function(f){if(!f||t.call(f)!=="[object Object]")return!1;var h=e.call(f,"constructor"),p=f.constructor&&f.constructor.prototype&&e.call(f.constructor.prototype,"isPrototypeOf");if(f.constructor&&!h&&!p)return!1;var y;for(y in f);return typeof y>"u"||e.call(f,y)},l=function(f,h){n&&h.name==="__proto__"?n(f,h.name,{enumerable:!0,configurable:!0,value:h.newValue,writable:!0}):f[h.name]=h.newValue},u=function(f,h){if(h==="__proto__")if(e.call(f,h)){if(r)return r(f,h).value}else return;return f[h]};return dh=function c(){var f,h,p,y,v,S,k=arguments[0],E=1,C=arguments.length,_=!1;for(typeof k=="boolean"&&(_=k,k=arguments[1]||{},E=2),(k==null||typeof k!="object"&&typeof k!="function")&&(k={});E<C;++E)if(f=arguments[E],f!=null)for(h in f)p=u(k,h),y=u(f,h),k!==y&&(_&&y&&(o(y)||(v=i(y)))?(v?(v=!1,S=p&&i(p)?p:[]):S=p&&o(p)?p:{},l(k,{name:h,newValue:c(_,S,y)})):typeof y<"u"&&l(k,{name:h,newValue:y}));return k},dh}var PD=ID();const fh=Ao(PD);function xp(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function AD(){const e=[],t={run:n,use:r};return t;function n(...i){let o=-1;const l=i.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);u(null,...i);function u(c,...f){const h=e[++o];let p=-1;if(c){l(c);return}for(;++p<i.length;)(f[p]===null||f[p]===void 0)&&(f[p]=i[p]);i=f,h?RD(h,u)(...f):l(null,...f)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function RD(e,t){let n;return r;function r(...l){const u=e.length>l.length;let c;u&&l.push(i);try{c=e.apply(this,l)}catch(f){const h=f;if(u&&n)throw h;return i(h)}u||(c&&c.then&&typeof c.then=="function"?c.then(o,i):c instanceof Error?i(c):o(c))}function i(l,...u){n||(n=!0,t(l,...u))}function o(l){i(null,l)}}const Or={basename:OD,dirname:MD,extname:DD,join:LD,sep:"/"};function OD(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');gl(e);let n=0,r=-1,i=e.length,o;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(o){n=i+1;break}}else r<0&&(o=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let l=-1,u=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(o){n=i+1;break}}else l<0&&(o=!0,l=i+1),u>-1&&(e.codePointAt(i)===t.codePointAt(u--)?u<0&&(r=i):(u=-1,r=l));return n===r?r=l:r<0&&(r=e.length),e.slice(n,r)}function MD(e){if(gl(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function DD(e){gl(e);let t=e.length,n=-1,r=0,i=-1,o=0,l;for(;t--;){const u=e.codePointAt(t);if(u===47){if(l){r=t+1;break}continue}n<0&&(l=!0,n=t+1),u===46?i<0?i=t:o!==1&&(o=1):i>-1&&(o=-1)}return i<0||n<0||o===0||o===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function LD(...e){let t=-1,n;for(;++t<e.length;)gl(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":$D(n)}function $D(e){gl(e);const t=e.codePointAt(0)===47;let n=FD(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function FD(e,t){let n="",r=0,i=-1,o=0,l=-1,u,c;for(;++l<=e.length;){if(l<e.length)u=e.codePointAt(l);else{if(u===47)break;u=47}if(u===47){if(!(i===l-1||o===1))if(i!==l-1&&o===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),i=l,o=0;continue}}else if(n.length>0){n="",r=0,i=l,o=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,l):n=e.slice(i+1,l),r=l-i-1;i=l,o=0}else u===46&&o>-1?o++:o=-1}return n}function gl(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const zD={cwd:BD};function BD(){return"/"}function wp(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function UD(e){if(typeof e=="string")e=new URL(e);else if(!wp(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return WD(e)}function WD(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const hh=["history","path","basename","stem","extname","dirname"];class Qk{constructor(t){let n;t?wp(t)?n={path:t}:typeof t=="string"||HD(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":zD.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<hh.length;){const o=hh[r];o in n&&n[o]!==void 0&&n[o]!==null&&(this[o]=o==="history"?[...n[o]]:n[o])}let i;for(i in n)hh.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Or.basename(this.path):void 0}set basename(t){mh(t,"basename"),ph(t,"basename"),this.path=Or.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Or.dirname(this.path):void 0}set dirname(t){S0(this.basename,"dirname"),this.path=Or.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Or.extname(this.path):void 0}set extname(t){if(ph(t,"extname"),S0(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Or.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){wp(t)&&(t=UD(t)),mh(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Or.basename(this.path,this.extname):void 0}set stem(t){mh(t,"stem"),ph(t,"stem"),this.path=Or.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new wn(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function ph(e,t){if(e&&e.includes(Or.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Or.sep+"`")}function mh(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function S0(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function HD(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const VD=(function(e){const r=this.constructor.prototype,i=r[e],o=function(){return i.apply(o,arguments)};return Object.setPrototypeOf(o,r),o}),qD={}.hasOwnProperty;class ym extends VD{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=AD()}copy(){const t=new ym;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(fh(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(vh("data",this.frozen),this.namespace[t]=n,this):qD.call(this.namespace,t)&&this.namespace[t]||void 0:t?(vh("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=$u(t),r=this.parser||this.Parser;return gh("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),gh("process",this.parser||this.Parser),yh("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(o,l){const u=$u(t),c=r.parse(u);r.run(c,u,function(h,p,y){if(h||!p||!y)return f(h);const v=p,S=r.stringify(v,y);KD(S)?y.value=S:y.result=S,f(h,y)});function f(h,p){h||!p?l(h):o?o(p):n(void 0,p)}}}processSync(t){let n=!1,r;return this.freeze(),gh("processSync",this.parser||this.Parser),yh("processSync",this.compiler||this.Compiler),this.process(t,i),_0("processSync","process",n),r;function i(o,l){n=!0,b0(o),r=l}}run(t,n,r){E0(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?o(void 0,r):new Promise(o);function o(l,u){const c=$u(n);i.run(t,c,f);function f(h,p,y){const v=p||t;h?u(h):l?l(v):r(void 0,v,y)}}}runSync(t,n){let r=!1,i;return this.run(t,n,o),_0("runSync","run",r),i;function o(l,u){b0(l),i=u,r=!0}}stringify(t,n){this.freeze();const r=$u(n),i=this.compiler||this.Compiler;return yh("stringify",i),E0(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(vh("use",this.frozen),t!=null)if(typeof t=="function")c(t,n);else if(typeof t=="object")Array.isArray(t)?u(t):l(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function o(f){if(typeof f=="function")c(f,[]);else if(typeof f=="object")if(Array.isArray(f)){const[h,...p]=f;c(h,p)}else l(f);else throw new TypeError("Expected usable value, not `"+f+"`")}function l(f){if(!("plugins"in f)&&!("settings"in f))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");u(f.plugins),f.settings&&(i.settings=fh(!0,i.settings,f.settings))}function u(f){let h=-1;if(f!=null)if(Array.isArray(f))for(;++h<f.length;){const p=f[h];o(p)}else throw new TypeError("Expected a list of plugins, not `"+f+"`")}function c(f,h){let p=-1,y=-1;for(;++p<r.length;)if(r[p][0]===f){y=p;break}if(y===-1)r.push([f,...h]);else if(h.length>0){let[v,...S]=h;const k=r[y][1];xp(k)&&xp(v)&&(v=fh(!0,k,v)),r[y]=[f,v,...S]}}}}const YD=new ym().freeze();function gh(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function yh(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function vh(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function E0(e){if(!xp(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function _0(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function $u(e){return GD(e)?e:new Qk(e)}function GD(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function KD(e){return typeof e=="string"||JD(e)}function JD(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const QD="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",C0=[],j0={allowDangerousHtml:!0},XD=/^(https?|ircs?|mailto|xmpp)$/i,ZD=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function eL(e){const t=tL(e),n=nL(e);return rL(t.runSync(t.parse(n),n),e)}function tL(e){const t=e.rehypePlugins||C0,n=e.remarkPlugins||C0,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...j0}:j0;return YD().use(M2).use(n).use(TD,r).use(t)}function nL(e){const t=e.children||"",n=new Qk;return typeof t=="string"&&(n.value=t),n}function rL(e,t){const n=t.allowedElements,r=t.allowElement,i=t.components,o=t.disallowedElements,l=t.skipHtml,u=t.unwrapDisallowed,c=t.urlTransform||iL;for(const h of ZD)Object.hasOwn(t,h.from)&&(""+h.from+(h.to?"use `"+h.to+"` instead":"remove it")+QD+h.id,void 0);return t.className&&(e={type:"element",tagName:"div",properties:{className:t.className},children:e.type==="root"?e.children:[e]}),qc(e,f),vO(e,{Fragment:m.Fragment,components:i,ignoreInvalidStyle:!0,jsx:m.jsx,jsxs:m.jsxs,passKeys:!0,passNode:!0});function f(h,p,y){if(h.type==="raw"&&y&&typeof p=="number")return l?y.children.splice(p,1):y.children[p]={type:"text",value:h.value},p;if(h.type==="element"){let v;for(v in lh)if(Object.hasOwn(lh,v)&&Object.hasOwn(h.properties,v)){const S=h.properties[v],k=lh[v];(k===null||k.includes(h.tagName))&&(h.properties[v]=c(String(S||""),v,h))}}if(h.type==="element"){let v=n?!n.includes(h.tagName):o?o.includes(h.tagName):!1;if(!v&&r&&typeof p=="number"&&(v=!r(h,p,y)),v&&y&&typeof p=="number")return u&&h.children?y.children.splice(p,1,...h.children):y.children.splice(p,1),p}}}function iL(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||n!==-1&&t>n||r!==-1&&t>r||XD.test(e.slice(0,t))?e:""}function N0(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(t);for(;i!==-1;)r++,i=n.indexOf(t,i+t.length);return r}function sL(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function oL(e,t,n){const i=Hc((n||{}).ignore||[]),o=aL(t);let l=-1;for(;++l<o.length;)Jk(e,"text",u);function u(f,h){let p=-1,y;for(;++p<h.length;){const v=h[p],S=y?y.children:void 0;if(i(v,S?S.indexOf(v):void 0,y))return;y=v}if(y)return c(f,h)}function c(f,h){const p=h[h.length-1],y=o[l][0],v=o[l][1];let S=0;const E=p.children.indexOf(f);let C=!1,_=[];y.lastIndex=0;let j=y.exec(f.value);for(;j;){const I=j.index,M={index:j.index,input:j.input,stack:[...h,f]};let P=v(...j,M);if(typeof P=="string"&&(P=P.length>0?{type:"text",value:P}:void 0),P===!1?y.lastIndex=I+1:(S!==I&&_.push({type:"text",value:f.value.slice(S,I)}),Array.isArray(P)?_.push(...P):P&&_.push(P),S=I+j[0].length,C=!0),!y.global)break;j=y.exec(f.value)}return C?(S<f.value.length&&_.push({type:"text",value:f.value.slice(S)}),p.children.splice(E,1,..._)):_=[f],E+_.length}}function aL(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const i=n[r];t.push([lL(i[0]),uL(i[1])])}return t}function lL(e){return typeof e=="string"?new RegExp(sL(e),"g"):e}function uL(e){return typeof e=="function"?e:function(){return e}}const xh="phrasing",wh=["autolink","link","image","label"];function cL(){return{transforms:[yL],enter:{literalAutolink:fL,literalAutolinkEmail:bh,literalAutolinkHttp:bh,literalAutolinkWww:bh},exit:{literalAutolink:gL,literalAutolinkEmail:mL,literalAutolinkHttp:hL,literalAutolinkWww:pL}}}function dL(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:xh,notInConstruct:wh},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:xh,notInConstruct:wh},{character:":",before:"[ps]",after:"\\/",inConstruct:xh,notInConstruct:wh}]}}function fL(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function bh(e){this.config.enter.autolinkProtocol.call(this,e)}function hL(e){this.config.exit.autolinkProtocol.call(this,e)}function pL(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function mL(e){this.config.exit.autolinkEmail.call(this,e)}function gL(e){this.exit(e)}function yL(e){oL(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,vL],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),xL]],{ignore:["link","linkReference"]})}function vL(e,t,n,r,i){let o="";if(!Xk(i)||(/^w/i.test(t)&&(n=t+n,t="",o="http://"),!wL(n)))return!1;const l=bL(n+r);if(!l[0])return!1;const u={type:"link",title:null,url:o+t+l[0],children:[{type:"text",value:t+l[0]}]};return l[1]?[u,{type:"text",value:l[1]}]:u}function xL(e,t,n,r){return!Xk(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function wL(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function bL(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const i=N0(e,"(");let o=N0(e,")");for(;r!==-1&&i>o;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),o++;return[e,n]}function Xk(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||ks(n)||Bc(n))&&(!t||n!==47)}Zk.peek=IL;function kL(){this.buffer()}function SL(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function EL(){this.buffer()}function _L(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function CL(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Sr(this.sliceSerialize(e)).toLowerCase(),n.label=t}function jL(e){this.exit(e)}function NL(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Sr(this.sliceSerialize(e)).toLowerCase(),n.label=t}function TL(e){this.exit(e)}function IL(){return"["}function Zk(e,t,n,r){const i=n.createTracker(r);let o=i.move("[^");const l=n.enter("footnoteReference"),u=n.enter("reference");return o+=i.move(n.safe(n.associationId(e),{after:"]",before:o})),u(),l(),o+=i.move("]"),o}function PL(){return{enter:{gfmFootnoteCallString:kL,gfmFootnoteCall:SL,gfmFootnoteDefinitionLabelString:EL,gfmFootnoteDefinition:_L},exit:{gfmFootnoteCallString:CL,gfmFootnoteCall:jL,gfmFootnoteDefinitionLabelString:NL,gfmFootnoteDefinition:TL}}}function AL(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:Zk},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,o,l){const u=o.createTracker(l);let c=u.move("[^");const f=o.enter("footnoteDefinition"),h=o.enter("label");return c+=u.move(o.safe(o.associationId(r),{before:c,after:"]"})),h(),c+=u.move("]:"),r.children&&r.children.length>0&&(u.shift(4),c+=u.move((t?`
`:" ")+o.indentLines(o.containerFlow(r,u.current()),t?e1:RL))),f(),c}}function RL(e,t,n){return t===0?e:e1(e,t,n)}function e1(e,t,n){return(n?"":"    ")+e}const OL=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];t1.peek=FL;function ML(){return{canContainEols:["delete"],enter:{strikethrough:LL},exit:{strikethrough:$L}}}function DL(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:OL}],handlers:{delete:t1}}}function LL(e){this.enter({type:"delete",children:[]},e)}function $L(e){this.exit(e)}function t1(e,t,n,r){const i=n.createTracker(r),o=n.enter("strikethrough");let l=i.move("~~");return l+=n.containerPhrasing(e,{...i.current(),before:l,after:"~"}),l+=i.move("~~"),o(),l}function FL(){return"~"}function zL(e){return e.length}function BL(e,t){const n=t||{},r=(n.align||[]).concat(),i=n.stringLength||zL,o=[],l=[],u=[],c=[];let f=0,h=-1;for(;++h<e.length;){const k=[],E=[];let C=-1;for(e[h].length>f&&(f=e[h].length);++C<e[h].length;){const _=UL(e[h][C]);if(n.alignDelimiters!==!1){const j=i(_);E[C]=j,(c[C]===void 0||j>c[C])&&(c[C]=j)}k.push(_)}l[h]=k,u[h]=E}let p=-1;if(typeof r=="object"&&"length"in r)for(;++p<f;)o[p]=T0(r[p]);else{const k=T0(r);for(;++p<f;)o[p]=k}p=-1;const y=[],v=[];for(;++p<f;){const k=o[p];let E="",C="";k===99?(E=":",C=":"):k===108?E=":":k===114&&(C=":");let _=n.alignDelimiters===!1?1:Math.max(1,c[p]-E.length-C.length);const j=E+"-".repeat(_)+C;n.alignDelimiters!==!1&&(_=E.length+_+C.length,_>c[p]&&(c[p]=_),v[p]=_),y[p]=j}l.splice(1,0,y),u.splice(1,0,v),h=-1;const S=[];for(;++h<l.length;){const k=l[h],E=u[h];p=-1;const C=[];for(;++p<f;){const _=k[p]||"";let j="",I="";if(n.alignDelimiters!==!1){const M=c[p]-(E[p]||0),P=o[p];P===114?j=" ".repeat(M):P===99?M%2?(j=" ".repeat(M/2+.5),I=" ".repeat(M/2-.5)):(j=" ".repeat(M/2),I=j):I=" ".repeat(M)}n.delimiterStart!==!1&&!p&&C.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&_==="")&&(n.delimiterStart!==!1||p)&&C.push(" "),n.alignDelimiters!==!1&&C.push(j),C.push(_),n.alignDelimiters!==!1&&C.push(I),n.padding!==!1&&C.push(" "),(n.delimiterEnd!==!1||p!==f-1)&&C.push("|")}S.push(n.delimiterEnd===!1?C.join("").replace(/ +$/,""):C.join(""))}return S.join(`
`)}function UL(e){return e==null?"":String(e)}function T0(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function WL(e,t,n,r){const i=n.enter("blockquote"),o=n.createTracker(r);o.move("> "),o.shift(2);const l=n.indentLines(n.containerFlow(e,o.current()),HL);return i(),l}function HL(e,t,n){return">"+(n?"":" ")+e}function VL(e,t){return I0(e,t.inConstruct,!0)&&!I0(e,t.notInConstruct,!1)}function I0(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function P0(e,t,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&VL(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function qL(e,t){const n=String(e);let r=n.indexOf(t),i=r,o=0,l=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++o>l&&(l=o):o=1,i=r+t.length,r=n.indexOf(t,i);return l}function YL(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function GL(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function KL(e,t,n,r){const i=GL(n),o=e.value||"",l=i==="`"?"GraveAccent":"Tilde";if(YL(e,n)){const p=n.enter("codeIndented"),y=n.indentLines(o,JL);return p(),y}const u=n.createTracker(r),c=i.repeat(Math.max(qL(o,i)+1,3)),f=n.enter("codeFenced");let h=u.move(c);if(e.lang){const p=n.enter(`codeFencedLang${l}`);h+=u.move(n.safe(e.lang,{before:h,after:" ",encode:["`"],...u.current()})),p()}if(e.lang&&e.meta){const p=n.enter(`codeFencedMeta${l}`);h+=u.move(" "),h+=u.move(n.safe(e.meta,{before:h,after:`
`,encode:["`"],...u.current()})),p()}return h+=u.move(`
`),o&&(h+=u.move(o+`
`)),h+=u.move(c),f(),h}function JL(e,t,n){return(n?"":"    ")+e}function vm(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function QL(e,t,n,r){const i=vm(n),o=i==='"'?"Quote":"Apostrophe",l=n.enter("definition");let u=n.enter("label");const c=n.createTracker(r);let f=c.move("[");return f+=c.move(n.safe(n.associationId(e),{before:f,after:"]",...c.current()})),f+=c.move("]: "),u(),!e.url||/[\0- \u007F]/.test(e.url)?(u=n.enter("destinationLiteral"),f+=c.move("<"),f+=c.move(n.safe(e.url,{before:f,after:">",...c.current()})),f+=c.move(">")):(u=n.enter("destinationRaw"),f+=c.move(n.safe(e.url,{before:f,after:e.title?" ":`
`,...c.current()}))),u(),e.title&&(u=n.enter(`title${o}`),f+=c.move(" "+i),f+=c.move(n.safe(e.title,{before:f,after:i,...c.current()})),f+=c.move(i),u()),l(),f}function XL(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function rl(e){return"&#x"+e.toString(16).toUpperCase()+";"}function gc(e,t,n){const r=Po(e),i=Po(t);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}n1.peek=ZL;function n1(e,t,n,r){const i=XL(n),o=n.enter("emphasis"),l=n.createTracker(r),u=l.move(i);let c=l.move(n.containerPhrasing(e,{after:i,before:u,...l.current()}));const f=c.charCodeAt(0),h=gc(r.before.charCodeAt(r.before.length-1),f,i);h.inside&&(c=rl(f)+c.slice(1));const p=c.charCodeAt(c.length-1),y=gc(r.after.charCodeAt(0),p,i);y.inside&&(c=c.slice(0,-1)+rl(p));const v=l.move(i);return o(),n.attentionEncodeSurroundingInfo={after:y.outside,before:h.outside},u+c+v}function ZL(e,t,n){return n.options.emphasis||"*"}function e$(e,t){let n=!1;return qc(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,yp}),!!((!e.depth||e.depth<3)&&cm(e)&&(t.options.setext||n))}function t$(e,t,n,r){const i=Math.max(Math.min(6,e.depth||1),1),o=n.createTracker(r);if(e$(e,n)){const h=n.enter("headingSetext"),p=n.enter("phrasing"),y=n.containerPhrasing(e,{...o.current(),before:`
`,after:`
`});return p(),h(),y+`
`+(i===1?"=":"-").repeat(y.length-(Math.max(y.lastIndexOf("\r"),y.lastIndexOf(`
`))+1))}const l="#".repeat(i),u=n.enter("headingAtx"),c=n.enter("phrasing");o.move(l+" ");let f=n.containerPhrasing(e,{before:"# ",after:`
`,...o.current()});return/^[\t ]/.test(f)&&(f=rl(f.charCodeAt(0))+f.slice(1)),f=f?l+" "+f:l,n.options.closeAtx&&(f+=" "+l),c(),u(),f}r1.peek=n$;function r1(e){return e.value||""}function n$(){return"<"}i1.peek=r$;function i1(e,t,n,r){const i=vm(n),o=i==='"'?"Quote":"Apostrophe",l=n.enter("image");let u=n.enter("label");const c=n.createTracker(r);let f=c.move("![");return f+=c.move(n.safe(e.alt,{before:f,after:"]",...c.current()})),f+=c.move("]("),u(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(u=n.enter("destinationLiteral"),f+=c.move("<"),f+=c.move(n.safe(e.url,{before:f,after:">",...c.current()})),f+=c.move(">")):(u=n.enter("destinationRaw"),f+=c.move(n.safe(e.url,{before:f,after:e.title?" ":")",...c.current()}))),u(),e.title&&(u=n.enter(`title${o}`),f+=c.move(" "+i),f+=c.move(n.safe(e.title,{before:f,after:i,...c.current()})),f+=c.move(i),u()),f+=c.move(")"),l(),f}function r$(){return"!"}s1.peek=i$;function s1(e,t,n,r){const i=e.referenceType,o=n.enter("imageReference");let l=n.enter("label");const u=n.createTracker(r);let c=u.move("![");const f=n.safe(e.alt,{before:c,after:"]",...u.current()});c+=u.move(f+"]["),l();const h=n.stack;n.stack=[],l=n.enter("reference");const p=n.safe(n.associationId(e),{before:c,after:"]",...u.current()});return l(),n.stack=h,o(),i==="full"||!f||f!==p?c+=u.move(p+"]"):i==="shortcut"?c=c.slice(0,-1):c+=u.move("]"),c}function i$(){return"!"}o1.peek=s$;function o1(e,t,n){let r=e.value||"",i="`",o=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++o<n.unsafe.length;){const l=n.unsafe[o],u=n.compilePattern(l);let c;if(l.atBreak)for(;c=u.exec(r);){let f=c.index;r.charCodeAt(f)===10&&r.charCodeAt(f-1)===13&&f--,r=r.slice(0,f)+" "+r.slice(c.index+1)}}return i+r+i}function s$(){return"`"}function a1(e,t){const n=cm(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}l1.peek=o$;function l1(e,t,n,r){const i=vm(n),o=i==='"'?"Quote":"Apostrophe",l=n.createTracker(r);let u,c;if(a1(e,n)){const h=n.stack;n.stack=[],u=n.enter("autolink");let p=l.move("<");return p+=l.move(n.containerPhrasing(e,{before:p,after:">",...l.current()})),p+=l.move(">"),u(),n.stack=h,p}u=n.enter("link"),c=n.enter("label");let f=l.move("[");return f+=l.move(n.containerPhrasing(e,{before:f,after:"](",...l.current()})),f+=l.move("]("),c(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(c=n.enter("destinationLiteral"),f+=l.move("<"),f+=l.move(n.safe(e.url,{before:f,after:">",...l.current()})),f+=l.move(">")):(c=n.enter("destinationRaw"),f+=l.move(n.safe(e.url,{before:f,after:e.title?" ":")",...l.current()}))),c(),e.title&&(c=n.enter(`title${o}`),f+=l.move(" "+i),f+=l.move(n.safe(e.title,{before:f,after:i,...l.current()})),f+=l.move(i),c()),f+=l.move(")"),u(),f}function o$(e,t,n){return a1(e,n)?"<":"["}u1.peek=a$;function u1(e,t,n,r){const i=e.referenceType,o=n.enter("linkReference");let l=n.enter("label");const u=n.createTracker(r);let c=u.move("[");const f=n.containerPhrasing(e,{before:c,after:"]",...u.current()});c+=u.move(f+"]["),l();const h=n.stack;n.stack=[],l=n.enter("reference");const p=n.safe(n.associationId(e),{before:c,after:"]",...u.current()});return l(),n.stack=h,o(),i==="full"||!f||f!==p?c+=u.move(p+"]"):i==="shortcut"?c=c.slice(0,-1):c+=u.move("]"),c}function a$(){return"["}function xm(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function l$(e){const t=xm(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function u$(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function c1(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function c$(e,t,n,r){const i=n.enter("list"),o=n.bulletCurrent;let l=e.ordered?u$(n):xm(n);const u=e.ordered?l==="."?")":".":l$(n);let c=t&&n.bulletLastUsed?l===n.bulletLastUsed:!1;if(!e.ordered){const h=e.children?e.children[0]:void 0;if((l==="*"||l==="-")&&h&&(!h.children||!h.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),c1(n)===l&&h){let p=-1;for(;++p<e.children.length;){const y=e.children[p];if(y&&y.type==="listItem"&&y.children&&y.children[0]&&y.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(l=u),n.bulletCurrent=l;const f=n.containerFlow(e,r);return n.bulletLastUsed=l,n.bulletCurrent=o,i(),f}function d$(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function f$(e,t,n,r){const i=d$(n);let o=n.bulletCurrent||xm(n);t&&t.type==="list"&&t.ordered&&(o=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+o);let l=o.length+1;(i==="tab"||i==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(l=Math.ceil(l/4)*4);const u=n.createTracker(r);u.move(o+" ".repeat(l-o.length)),u.shift(l);const c=n.enter("listItem"),f=n.indentLines(n.containerFlow(e,u.current()),h);return c(),f;function h(p,y,v){return y?(v?"":" ".repeat(l))+p:(v?o:o+" ".repeat(l-o.length))+p}}function h$(e,t,n,r){const i=n.enter("paragraph"),o=n.enter("phrasing"),l=n.containerPhrasing(e,r);return o(),i(),l}const p$=Hc(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function m$(e,t,n,r){return(e.children.some(function(l){return p$(l)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function g$(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}d1.peek=y$;function d1(e,t,n,r){const i=g$(n),o=n.enter("strong"),l=n.createTracker(r),u=l.move(i+i);let c=l.move(n.containerPhrasing(e,{after:i,before:u,...l.current()}));const f=c.charCodeAt(0),h=gc(r.before.charCodeAt(r.before.length-1),f,i);h.inside&&(c=rl(f)+c.slice(1));const p=c.charCodeAt(c.length-1),y=gc(r.after.charCodeAt(0),p,i);y.inside&&(c=c.slice(0,-1)+rl(p));const v=l.move(i+i);return o(),n.attentionEncodeSurroundingInfo={after:y.outside,before:h.outside},u+c+v}function y$(e,t,n){return n.options.strong||"*"}function v$(e,t,n,r){return n.safe(e.value,r)}function x$(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function w$(e,t,n){const r=(c1(n)+(n.options.ruleSpaces?" ":"")).repeat(x$(n));return n.options.ruleSpaces?r.slice(0,-1):r}const f1={blockquote:WL,break:P0,code:KL,definition:QL,emphasis:n1,hardBreak:P0,heading:t$,html:r1,image:i1,imageReference:s1,inlineCode:o1,link:l1,linkReference:u1,list:c$,listItem:f$,paragraph:h$,root:m$,strong:d1,text:v$,thematicBreak:w$};function b$(){return{enter:{table:k$,tableData:A0,tableHeader:A0,tableRow:E$},exit:{codeText:_$,table:S$,tableData:kh,tableHeader:kh,tableRow:kh}}}function k$(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function S$(e){this.exit(e),this.data.inTable=void 0}function E$(e){this.enter({type:"tableRow",children:[]},e)}function kh(e){this.exit(e)}function A0(e){this.enter({type:"tableCell",children:[]},e)}function _$(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,C$));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function C$(e,t){return t==="|"?t:e}function j$(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,i=t.stringLength,o=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:y,table:l,tableCell:c,tableRow:u}};function l(v,S,k,E){return f(h(v,k,E),v.align)}function u(v,S,k,E){const C=p(v,k,E),_=f([C]);return _.slice(0,_.indexOf(`
`))}function c(v,S,k,E){const C=k.enter("tableCell"),_=k.enter("phrasing"),j=k.containerPhrasing(v,{...E,before:o,after:o});return _(),C(),j}function f(v,S){return BL(v,{align:S,alignDelimiters:r,padding:n,stringLength:i})}function h(v,S,k){const E=v.children;let C=-1;const _=[],j=S.enter("table");for(;++C<E.length;)_[C]=p(E[C],S,k);return j(),_}function p(v,S,k){const E=v.children;let C=-1;const _=[],j=S.enter("tableRow");for(;++C<E.length;)_[C]=c(E[C],v,S,k);return j(),_}function y(v,S,k){let E=f1.inlineCode(v,S,k);return k.stack.includes("tableCell")&&(E=E.replace(/\|/g,"\\$&")),E}}function N$(){return{exit:{taskListCheckValueChecked:R0,taskListCheckValueUnchecked:R0,paragraph:I$}}}function T$(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:P$}}}function R0(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function I$(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=t.children;let o=-1,l;for(;++o<i.length;){const u=i[o];if(u.type==="paragraph"){l=u;break}}l===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function P$(e,t,n,r){const i=e.children[0],o=typeof e.checked=="boolean"&&i&&i.type==="paragraph",l="["+(e.checked?"x":" ")+"] ",u=n.createTracker(r);o&&u.move(l);let c=f1.listItem(e,t,n,{...r,...u.current()});return o&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,f)),c;function f(h){return h+l}}function A$(){return[cL(),PL(),ML(),b$(),N$()]}function R$(e){return{extensions:[dL(),AL(e),DL(),j$(e),T$()]}}const O$={tokenize:z$,partial:!0},h1={tokenize:B$,partial:!0},p1={tokenize:U$,partial:!0},m1={tokenize:W$,partial:!0},M$={tokenize:H$,partial:!0},g1={name:"wwwAutolink",tokenize:$$,previous:v1},y1={name:"protocolAutolink",tokenize:F$,previous:x1},si={name:"emailAutolink",tokenize:L$,previous:w1},Wr={};function D$(){return{text:Wr}}let os=48;for(;os<123;)Wr[os]=si,os++,os===58?os=65:os===91&&(os=97);Wr[43]=si;Wr[45]=si;Wr[46]=si;Wr[95]=si;Wr[72]=[si,y1];Wr[104]=[si,y1];Wr[87]=[si,g1];Wr[119]=[si,g1];function L$(e,t,n){const r=this;let i,o;return l;function l(p){return!bp(p)||!w1.call(r,r.previous)||wm(r.events)?n(p):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),u(p))}function u(p){return bp(p)?(e.consume(p),u):p===64?(e.consume(p),c):n(p)}function c(p){return p===46?e.check(M$,h,f)(p):p===45||p===95||xn(p)?(o=!0,e.consume(p),c):h(p)}function f(p){return e.consume(p),i=!0,c}function h(p){return o&&i&&Sn(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(p)):n(p)}}function $$(e,t,n){const r=this;return i;function i(l){return l!==87&&l!==119||!v1.call(r,r.previous)||wm(r.events)?n(l):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(O$,e.attempt(h1,e.attempt(p1,o),n),n)(l))}function o(l){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(l)}}function F$(e,t,n){const r=this;let i="",o=!1;return l;function l(p){return(p===72||p===104)&&x1.call(r,r.previous)&&!wm(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),i+=String.fromCodePoint(p),e.consume(p),u):n(p)}function u(p){if(Sn(p)&&i.length<5)return i+=String.fromCodePoint(p),e.consume(p),u;if(p===58){const y=i.toLowerCase();if(y==="http"||y==="https")return e.consume(p),c}return n(p)}function c(p){return p===47?(e.consume(p),o?f:(o=!0,c)):n(p)}function f(p){return p===null||hc(p)||Et(p)||ks(p)||Bc(p)?n(p):e.attempt(h1,e.attempt(p1,h),n)(p)}function h(p){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(p)}}function z$(e,t,n){let r=0;return i;function i(l){return(l===87||l===119)&&r<3?(r++,e.consume(l),i):l===46&&r===3?(e.consume(l),o):n(l)}function o(l){return l===null?n(l):t(l)}}function B$(e,t,n){let r,i,o;return l;function l(f){return f===46||f===95?e.check(m1,c,u)(f):f===null||Et(f)||ks(f)||f!==45&&Bc(f)?c(f):(o=!0,e.consume(f),l)}function u(f){return f===95?r=!0:(i=r,r=void 0),e.consume(f),l}function c(f){return i||r||!o?n(f):t(f)}}function U$(e,t){let n=0,r=0;return i;function i(l){return l===40?(n++,e.consume(l),i):l===41&&r<n?o(l):l===33||l===34||l===38||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===60||l===63||l===93||l===95||l===126?e.check(m1,t,o)(l):l===null||Et(l)||ks(l)?t(l):(e.consume(l),i)}function o(l){return l===41&&r++,e.consume(l),i}}function W$(e,t,n){return r;function r(u){return u===33||u===34||u===39||u===41||u===42||u===44||u===46||u===58||u===59||u===63||u===95||u===126?(e.consume(u),r):u===38?(e.consume(u),o):u===93?(e.consume(u),i):u===60||u===null||Et(u)||ks(u)?t(u):n(u)}function i(u){return u===null||u===40||u===91||Et(u)||ks(u)?t(u):r(u)}function o(u){return Sn(u)?l(u):n(u)}function l(u){return u===59?(e.consume(u),r):Sn(u)?(e.consume(u),l):n(u)}}function H$(e,t,n){return r;function r(o){return e.consume(o),i}function i(o){return xn(o)?n(o):t(o)}}function v1(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||Et(e)}function x1(e){return!Sn(e)}function w1(e){return!(e===47||bp(e))}function bp(e){return e===43||e===45||e===46||e===95||xn(e)}function wm(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const V$={tokenize:Z$,partial:!0};function q$(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:J$,continuation:{tokenize:Q$},exit:X$}},text:{91:{name:"gfmFootnoteCall",tokenize:K$},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:Y$,resolveTo:G$}}}}function Y$(e,t,n){const r=this;let i=r.events.length;const o=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let l;for(;i--;){const c=r.events[i][1];if(c.type==="labelImage"){l=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return u;function u(c){if(!l||!l._balanced)return n(c);const f=Sr(r.sliceSerialize({start:l.end,end:r.now()}));return f.codePointAt(0)!==94||!o.includes(f.slice(1))?n(c):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(c),e.exit("gfmFootnoteCallLabelMarker"),t(c))}}function G$(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const o={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},l={type:"chunkString",contentType:"string",start:Object.assign({},o.start),end:Object.assign({},o.end)},u=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",i,t],["exit",i,t],["enter",o,t],["enter",l,t],["exit",l,t],["exit",o,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...u),e}function K$(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o=0,l;return u;function u(p){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(p),e.exit("gfmFootnoteCallLabelMarker"),c}function c(p){return p!==94?n(p):(e.enter("gfmFootnoteCallMarker"),e.consume(p),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",f)}function f(p){if(o>999||p===93&&!l||p===null||p===91||Et(p))return n(p);if(p===93){e.exit("chunkString");const y=e.exit("gfmFootnoteCallString");return i.includes(Sr(r.sliceSerialize(y)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(p),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(p)}return Et(p)||(l=!0),o++,e.consume(p),p===92?h:f}function h(p){return p===91||p===92||p===93?(e.consume(p),o++,f):f(p)}}function J$(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o,l=0,u;return c;function c(S){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(S),e.exit("gfmFootnoteDefinitionLabelMarker"),f}function f(S){return S===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(S),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",h):n(S)}function h(S){if(l>999||S===93&&!u||S===null||S===91||Et(S))return n(S);if(S===93){e.exit("chunkString");const k=e.exit("gfmFootnoteDefinitionLabelString");return o=Sr(r.sliceSerialize(k)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(S),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),y}return Et(S)||(u=!0),l++,e.consume(S),S===92?p:h}function p(S){return S===91||S===92||S===93?(e.consume(S),l++,h):h(S)}function y(S){return S===58?(e.enter("definitionMarker"),e.consume(S),e.exit("definitionMarker"),i.includes(o)||i.push(o),pt(e,v,"gfmFootnoteDefinitionWhitespace")):n(S)}function v(S){return t(S)}}function Q$(e,t,n){return e.check(ml,t,e.attempt(V$,t,n))}function X$(e){e.exit("gfmFootnoteDefinition")}function Z$(e,t,n){const r=this;return pt(e,i,"gfmFootnoteDefinitionIndent",5);function i(o){const l=r.events[r.events.length-1];return l&&l[1].type==="gfmFootnoteDefinitionIndent"&&l[2].sliceSerialize(l[1],!0).length===4?t(o):n(o)}}function e4(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:o,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(l,u){let c=-1;for(;++c<l.length;)if(l[c][0]==="enter"&&l[c][1].type==="strikethroughSequenceTemporary"&&l[c][1]._close){let f=c;for(;f--;)if(l[f][0]==="exit"&&l[f][1].type==="strikethroughSequenceTemporary"&&l[f][1]._open&&l[c][1].end.offset-l[c][1].start.offset===l[f][1].end.offset-l[f][1].start.offset){l[c][1].type="strikethroughSequence",l[f][1].type="strikethroughSequence";const h={type:"strikethrough",start:Object.assign({},l[f][1].start),end:Object.assign({},l[c][1].end)},p={type:"strikethroughText",start:Object.assign({},l[f][1].end),end:Object.assign({},l[c][1].start)},y=[["enter",h,u],["enter",l[f][1],u],["exit",l[f][1],u],["enter",p,u]],v=u.parser.constructs.insideSpan.null;v&&Qn(y,y.length,0,Uc(v,l.slice(f+1,c),u)),Qn(y,y.length,0,[["exit",p,u],["enter",l[c][1],u],["exit",l[c][1],u],["exit",h,u]]),Qn(l,f-1,c-f+3,y),c=f+y.length-2;break}}for(c=-1;++c<l.length;)l[c][1].type==="strikethroughSequenceTemporary"&&(l[c][1].type="data");return l}function o(l,u,c){const f=this.previous,h=this.events;let p=0;return y;function y(S){return f===126&&h[h.length-1][1].type!=="characterEscape"?c(S):(l.enter("strikethroughSequenceTemporary"),v(S))}function v(S){const k=Po(f);if(S===126)return p>1?c(S):(l.consume(S),p++,v);if(p<2&&!n)return c(S);const E=l.exit("strikethroughSequenceTemporary"),C=Po(S);return E._open=!C||C===2&&!!k,E._close=!k||k===2&&!!C,u(S)}}}class t4{constructor(){this.map=[]}add(t,n,r){n4(this,t,n,r)}consume(t){if(this.map.sort(function(o,l){return o[0]-l[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let i=r.pop();for(;i;){for(const o of i)t.push(o);i=r.pop()}this.map.length=0}}function n4(e,t,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<e.map.length;){if(e.map[i][0]===t){e.map[i][1]+=n,e.map[i][2].push(...r);return}i+=1}e.map.push([t,n,r])}}function r4(e,t){let n=!1;const r=[];for(;t<e.length;){const i=e[t];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const o=r.length-1;r[o]=r[o]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function i4(){return{flow:{null:{name:"table",tokenize:s4,resolveAll:o4}}}}function s4(e,t,n){const r=this;let i=0,o=0,l;return u;function u(R){let D=r.events.length-1;for(;D>-1;){const G=r.events[D][1].type;if(G==="lineEnding"||G==="linePrefix")D--;else break}const H=D>-1?r.events[D][1].type:null,W=H==="tableHead"||H==="tableRow"?P:c;return W===P&&r.parser.lazy[r.now().line]?n(R):W(R)}function c(R){return e.enter("tableHead"),e.enter("tableRow"),f(R)}function f(R){return R===124||(l=!0,o+=1),h(R)}function h(R){return R===null?n(R):Xe(R)?o>1?(o=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(R),e.exit("lineEnding"),v):n(R):dt(R)?pt(e,h,"whitespace")(R):(o+=1,l&&(l=!1,i+=1),R===124?(e.enter("tableCellDivider"),e.consume(R),e.exit("tableCellDivider"),l=!0,h):(e.enter("data"),p(R)))}function p(R){return R===null||R===124||Et(R)?(e.exit("data"),h(R)):(e.consume(R),R===92?y:p)}function y(R){return R===92||R===124?(e.consume(R),p):p(R)}function v(R){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(R):(e.enter("tableDelimiterRow"),l=!1,dt(R)?pt(e,S,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(R):S(R))}function S(R){return R===45||R===58?E(R):R===124?(l=!0,e.enter("tableCellDivider"),e.consume(R),e.exit("tableCellDivider"),k):M(R)}function k(R){return dt(R)?pt(e,E,"whitespace")(R):E(R)}function E(R){return R===58?(o+=1,l=!0,e.enter("tableDelimiterMarker"),e.consume(R),e.exit("tableDelimiterMarker"),C):R===45?(o+=1,C(R)):R===null||Xe(R)?I(R):M(R)}function C(R){return R===45?(e.enter("tableDelimiterFiller"),_(R)):M(R)}function _(R){return R===45?(e.consume(R),_):R===58?(l=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(R),e.exit("tableDelimiterMarker"),j):(e.exit("tableDelimiterFiller"),j(R))}function j(R){return dt(R)?pt(e,I,"whitespace")(R):I(R)}function I(R){return R===124?S(R):R===null||Xe(R)?!l||i!==o?M(R):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(R)):M(R)}function M(R){return n(R)}function P(R){return e.enter("tableRow"),z(R)}function z(R){return R===124?(e.enter("tableCellDivider"),e.consume(R),e.exit("tableCellDivider"),z):R===null||Xe(R)?(e.exit("tableRow"),t(R)):dt(R)?pt(e,z,"whitespace")(R):(e.enter("data"),ne(R))}function ne(R){return R===null||R===124||Et(R)?(e.exit("data"),z(R)):(e.consume(R),R===92?Z:ne)}function Z(R){return R===92||R===124?(e.consume(R),ne):ne(R)}}function o4(e,t){let n=-1,r=!0,i=0,o=[0,0,0,0],l=[0,0,0,0],u=!1,c=0,f,h,p;const y=new t4;for(;++n<e.length;){const v=e[n],S=v[1];v[0]==="enter"?S.type==="tableHead"?(u=!1,c!==0&&(O0(y,t,c,f,h),h=void 0,c=0),f={type:"table",start:Object.assign({},S.start),end:Object.assign({},S.end)},y.add(n,0,[["enter",f,t]])):S.type==="tableRow"||S.type==="tableDelimiterRow"?(r=!0,p=void 0,o=[0,0,0,0],l=[0,n+1,0,0],u&&(u=!1,h={type:"tableBody",start:Object.assign({},S.start),end:Object.assign({},S.end)},y.add(n,0,[["enter",h,t]])),i=S.type==="tableDelimiterRow"?2:h?3:1):i&&(S.type==="data"||S.type==="tableDelimiterMarker"||S.type==="tableDelimiterFiller")?(r=!1,l[2]===0&&(o[1]!==0&&(l[0]=l[1],p=Fu(y,t,o,i,void 0,p),o=[0,0,0,0]),l[2]=n)):S.type==="tableCellDivider"&&(r?r=!1:(o[1]!==0&&(l[0]=l[1],p=Fu(y,t,o,i,void 0,p)),o=l,l=[o[1],n,0,0])):S.type==="tableHead"?(u=!0,c=n):S.type==="tableRow"||S.type==="tableDelimiterRow"?(c=n,o[1]!==0?(l[0]=l[1],p=Fu(y,t,o,i,n,p)):l[1]!==0&&(p=Fu(y,t,l,i,n,p)),i=0):i&&(S.type==="data"||S.type==="tableDelimiterMarker"||S.type==="tableDelimiterFiller")&&(l[3]=n)}for(c!==0&&O0(y,t,c,f,h),y.consume(t.events),n=-1;++n<t.events.length;){const v=t.events[n];v[0]==="enter"&&v[1].type==="table"&&(v[1]._align=r4(t.events,n))}return e}function Fu(e,t,n,r,i,o){const l=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",u="tableContent";n[0]!==0&&(o.end=Object.assign({},go(t.events,n[0])),e.add(n[0],0,[["exit",o,t]]));const c=go(t.events,n[1]);if(o={type:l,start:Object.assign({},c),end:Object.assign({},c)},e.add(n[1],0,[["enter",o,t]]),n[2]!==0){const f=go(t.events,n[2]),h=go(t.events,n[3]),p={type:u,start:Object.assign({},f),end:Object.assign({},h)};if(e.add(n[2],0,[["enter",p,t]]),r!==2){const y=t.events[n[2]],v=t.events[n[3]];if(y[1].end=Object.assign({},v[1].end),y[1].type="chunkText",y[1].contentType="text",n[3]>n[2]+1){const S=n[2]+1,k=n[3]-n[2]-1;e.add(S,k,[])}}e.add(n[3]+1,0,[["exit",p,t]])}return i!==void 0&&(o.end=Object.assign({},go(t.events,i)),e.add(i,0,[["exit",o,t]]),o=void 0),o}function O0(e,t,n,r,i){const o=[],l=go(t.events,n);i&&(i.end=Object.assign({},l),o.push(["exit",i,t])),r.end=Object.assign({},l),o.push(["exit",r,t]),e.add(n+1,0,o)}function go(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const a4={name:"tasklistCheck",tokenize:u4};function l4(){return{text:{91:a4}}}function u4(e,t,n){const r=this;return i;function i(c){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(c):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),o)}function o(c){return Et(c)?(e.enter("taskListCheckValueUnchecked"),e.consume(c),e.exit("taskListCheckValueUnchecked"),l):c===88||c===120?(e.enter("taskListCheckValueChecked"),e.consume(c),e.exit("taskListCheckValueChecked"),l):n(c)}function l(c){return c===93?(e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),u):n(c)}function u(c){return Xe(c)?t(c):dt(c)?e.check({tokenize:c4},t,n)(c):n(c)}}function c4(e,t,n){return pt(e,r,"whitespace");function r(i){return i===null?n(i):t(i)}}function d4(e){return Pk([D$(),q$(),e4(e),i4(),l4()])}const f4={};function h4(e){const t=this,n=e||f4,r=t.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),o=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),l=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(d4(n)),o.push(A$()),l.push(R$(n))}const p4=e=>e!=null;function m4(){const e=Ce(t=>t.works);return w.useMemo(()=>{const t=new Map;e.forEach(o=>{var c;const l=(c=o.name)==null?void 0:c.trim();if(!l)return;const u=t.get(l)??[];u.push(o),t.set(l,u)});const n=new Map,r=new Map;t.forEach((o,l)=>{o.length===1?n.set(l,o[0]):o.length>1&&r.set(l,o.filter(p4))});const i=Array.from(n.entries()).map(([o,l])=>({name:o,work:l}));return i.sort((o,l)=>l.name.length-o.name.length||o.name.localeCompare(l.name,"es")),{uniqueByName:n,duplicates:r,entries:i}},[e])}const g4=new RegExp("\\p{L}|\\p{N}","u"),M0=e=>e?g4.test(e):!1,y4=(e,t,n)=>{const r=t===0?void 0:e[t-1],i=n>=e.length?void 0:e[n];return!M0(r)&&!M0(i)},v4=(e,t)=>{const n=[];t.forEach(o=>{let l=0;for(;l<e.length;){const u=e.indexOf(o.name,l);if(u===-1)break;const c=u+o.name.length;y4(e,u,c)&&n.push({start:u,end:c,entry:o}),l=u+o.name.length}}),n.sort((o,l)=>o.start!==l.start?o.start-l.start:l.entry.name.length-o.entry.name.length);const r=[];let i=-1;return n.forEach(o=>{o.start<i||(r.push(o),i=o.end)}),r},x4=e=>e?new Set(["link","linkReference","definition","inlineCode","code"]).has(e.type):!0,w4=e=>{const t=(e==null?void 0:e.entries)??[];return t.length===0?()=>{}:n=>{qc(n,"text",(r,i,o)=>{if(x4(o)||typeof i!="number"||!o)return;const u=r.value;if(!u)return;const c=v4(u,t);if(c.length===0)return;const f=[];let h=0;c.forEach(p=>{p.start>h&&f.push({type:"text",value:u.slice(h,p.start)}),f.push({type:"link",title:null,url:p.entry.href,children:[{type:"text",value:p.entry.name}]}),h=p.end}),h<u.length&&f.push({type:"text",value:u.slice(h)}),o.children.splice(i,1,...f)})}},b4=e=>{var f,h,p;const t="/sport-planner/".replace(/\/$/,""),r=`${t?`${t}/`:"/"}#/`,i=((f=e.href)==null?void 0:f.startsWith("#/"))??!1,o=((h=e.href)==null?void 0:h.startsWith(r))??!1,l=(((p=e.href)==null?void 0:p.startsWith("/"))??!1)||i||o,u=l?e.rel:e.rel??"noreferrer",c=l?e.target:e.target??"_blank";return m.jsx("a",{...e,className:"text-sky-300 underline decoration-dotted underline-offset-4 hover:text-sky-200",target:c,rel:u})},k4=e=>m.jsx("ul",{...e,className:ze("my-2 list-disc space-y-1 pl-6",e.className)}),S4=e=>m.jsx("ol",{...e,className:ze("my-2 list-decimal space-y-1 pl-6",e.className)}),E4=e=>m.jsx("li",{...e,className:ze("leading-relaxed",e.className)});function _4(e){const t=e.trim(),n=t.match(/^(["'])(.*)(["'])$/s);return n?n[2].trim():t}function C4(e){var l;const n=_4(e.trim()).match(/^\[!([^\]]+)\]([+-])?\s*(.*)$/i);if(!n)return null;const r=n[1].toLowerCase(),o=(((l=n[3])==null?void 0:l.trim())??"")||r;return{type:r,title:o}}function b1(e){return typeof e=="object"&&e!==null&&"props"in e&&"type"in e}function kp(e){return e==null||typeof e=="boolean"?"":typeof e=="string"||typeof e=="number"?String(e):Array.isArray(e)?e.map(kp).join(""):b1(e)?kp(e.props.children):""}const D0={danger:{icon:"",containerClassName:"border-rose-500/25 bg-rose-500/10",titleClassName:"text-rose-200"},warning:{icon:"",containerClassName:"border-amber-500/25 bg-amber-500/10",titleClassName:"text-amber-200"},info:{icon:"",containerClassName:"border-sky-500/25 bg-sky-500/10",titleClassName:"text-sky-200"},note:{icon:"",containerClassName:"border-indigo-500/25 bg-indigo-500/10",titleClassName:"text-indigo-200"},tip:{icon:"",containerClassName:"border-emerald-500/25 bg-emerald-500/10",titleClassName:"text-emerald-200"}},j4=e=>{const{node:t,children:n,...r}=e,i=Array.isArray(n)?n:[n],o=i.findIndex(p=>b1(p)&&p.type==="p"),l=o>=0?i[o]:void 0,u=kp(l).trim(),c=C4(u);if(!c)return m.jsx("blockquote",{...r,children:n});const f=D0[c.type]??D0.info,h=i.filter((p,y)=>y!==o);return m.jsxs("aside",{className:ze("my-4 rounded-2xl border p-5",f.containerClassName),children:[m.jsxs("div",{className:ze("flex items-center gap-2 text-lg font-semibold",f.titleClassName),children:[m.jsx("span",{"aria-hidden":"true",children:f.icon}),m.jsx("span",{children:c.title})]}),m.jsx("div",{className:"mt-3",children:h})]})},N4={a:b4,blockquote:j4,ul:k4,ol:S4,li:E4};function Ss({content:e,enableWorkLinks:t=!1}){const{entries:n}=m4(),r=w.useMemo(()=>{if(!t||n.length===0)return null;const o="/sport-planner/".replace(/\/$/,""),u=`${o?`${o}/`:"/"}#/catalog`;return{entries:n.map(({name:c,work:f})=>({name:c,href:`${u}?workId=${encodeURIComponent(f.id)}`}))}},[t,n]),i=w.useMemo(()=>{const o=[h4];return r&&o.push([w4,r]),o},[r]);return e?m.jsx("div",{className:"prose prose-invert max-w-none prose-headings:font-display prose-p:leading-relaxed prose-strong:text-white prose-a:text-sky-300",children:m.jsx(eL,{remarkPlugins:i,components:N4,children:e})}):null}function L0(e){if(!e)return null;const t=e.trim().toLowerCase();if(!t)return null;if(/^\\d+(\\.\\d+)?$/.test(t))return Math.floor(Number(t));if(/^(\\d+:)+\\d+$/.test(t)){const r=t.split(":").map(i=>Number(i));return r.some(i=>Number.isNaN(i))?null:r.reduce((i,o)=>i*60+o,0)}const n=t.match(/^(?:(\\d+)h)?(?:(\\d+)m)?(?:(\\d+)s?)?$/i);if(n){const r=n[1]?Number(n[1]):0,i=n[2]?Number(n[2]):0,o=n[3]?Number(n[3]):0;if(r||i||o)return r*3600+i*60+o}return null}function T4(e){if(!e)return null;try{const t=new URL(e),n=t.hostname.replace("www.","");let r="";if(n==="youtu.be"?r=t.pathname.slice(1).split("/")[0]??"":n.endsWith("youtube.com")?t.searchParams.has("v")?r=t.searchParams.get("v")??"":(t.pathname.startsWith("/shorts/")||t.pathname.startsWith("/embed/"))&&(r=t.pathname.split("/")[2]??""):n==="youtube-nocookie.com"&&t.pathname.startsWith("/embed/")&&(r=t.pathname.split("/")[2]??""),!r)return null;const i=new URL(`https://www.youtube-nocookie.com/embed/${r}`),o=L0(t.searchParams.get("start")??t.searchParams.get("t"));o!==null&&i.searchParams.set("start",String(o));const l=L0(t.searchParams.get("end"));l!==null&&i.searchParams.set("end",String(l));const u=t.searchParams.get("list");return u&&i.searchParams.set("list",u),i.toString()}catch{return null}}function Yc({url:e,title:t,maxWidth:n=300,className:r}){const i=e.trim();if(!i)return null;const o=T4(i);return o?m.jsx("div",{className:ze("flex w-full justify-center",r),children:m.jsx("div",{className:"overflow-hidden rounded-2xl border border-white/10 bg-black shadow-inner shadow-black/50",style:{maxWidth:n},children:m.jsx("iframe",{src:o,title:t,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0,className:"block w-full",style:{aspectRatio:"16 / 9"}})})}):m.jsx("div",{className:ze("flex w-full justify-center",r),children:m.jsx("a",{href:i,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-full border border-amber-400/30 bg-amber-500/10 px-3 py-1 text-xs font-semibold text-amber-200 transition hover:border-amber-400 hover:text-white",children:"URL no reconocida, abrir enlace"})})}function I4(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return w.useMemo(()=>r=>{t.forEach(i=>i(r))},t)}const Gc=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Bo(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function bm(e){return"nodeType"in e}function Fn(e){var t,n;return e?Bo(e)?e:bm(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function km(e){const{Document:t}=Fn(e);return e instanceof t}function yl(e){return Bo(e)?!1:e instanceof Fn(e).HTMLElement}function k1(e){return e instanceof Fn(e).SVGElement}function Uo(e){return e?Bo(e)?e.document:bm(e)?km(e)?e:yl(e)||k1(e)?e.ownerDocument:document:document:document}const zr=Gc?w.useLayoutEffect:w.useEffect;function Sm(e){const t=w.useRef(e);return zr(()=>{t.current=e}),w.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function P4(){const e=w.useRef(null),t=w.useCallback((r,i)=>{e.current=setInterval(r,i)},[]),n=w.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function il(e,t){t===void 0&&(t=[e]);const n=w.useRef(e);return zr(()=>{n.current!==e&&(n.current=e)},t),n}function vl(e,t){const n=w.useRef();return w.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function yc(e){const t=Sm(e),n=w.useRef(null),r=w.useCallback(i=>{i!==n.current&&(t==null||t(i,n.current)),n.current=i},[]);return[n,r]}function Sp(e){const t=w.useRef();return w.useEffect(()=>{t.current=e},[e]),t.current}let Sh={};function xl(e,t){return w.useMemo(()=>{if(t)return t;const n=Sh[e]==null?0:Sh[e]+1;return Sh[e]=n,e+"-"+n},[e,t])}function S1(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((o,l)=>{const u=Object.entries(l);for(const[c,f]of u){const h=o[c];h!=null&&(o[c]=h+e*f)}return o},{...t})}}const _o=S1(1),vc=S1(-1);function A4(e){return"clientX"in e&&"clientY"in e}function Em(e){if(!e)return!1;const{KeyboardEvent:t}=Fn(e.target);return t&&e instanceof t}function R4(e){if(!e)return!1;const{TouchEvent:t}=Fn(e.target);return t&&e instanceof t}function Ep(e){if(R4(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return A4(e)?{x:e.clientX,y:e.clientY}:null}const sl=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[sl.Translate.toString(e),sl.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),$0="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function O4(e){return e.matches($0)?e:e.querySelector($0)}const M4={display:"none"};function D4(e){let{id:t,value:n}=e;return Me.createElement("div",{id:t,style:M4},n)}function L4(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Me.createElement("div",{id:t,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function $4(){const[e,t]=w.useState("");return{announce:w.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const E1=w.createContext(null);function F4(e){const t=w.useContext(E1);w.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function z4(){const[e]=w.useState(()=>new Set),t=w.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[w.useCallback(r=>{let{type:i,event:o}=r;e.forEach(l=>{var u;return(u=l[i])==null?void 0:u.call(l,o)})},[e]),t]}const B4={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},U4={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function W4(e){let{announcements:t=U4,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=B4}=e;const{announce:o,announcement:l}=$4(),u=xl("DndLiveRegion"),[c,f]=w.useState(!1);if(w.useEffect(()=>{f(!0)},[]),F4(w.useMemo(()=>({onDragStart(p){let{active:y}=p;o(t.onDragStart({active:y}))},onDragMove(p){let{active:y,over:v}=p;t.onDragMove&&o(t.onDragMove({active:y,over:v}))},onDragOver(p){let{active:y,over:v}=p;o(t.onDragOver({active:y,over:v}))},onDragEnd(p){let{active:y,over:v}=p;o(t.onDragEnd({active:y,over:v}))},onDragCancel(p){let{active:y,over:v}=p;o(t.onDragCancel({active:y,over:v}))}}),[o,t])),!c)return null;const h=Me.createElement(Me.Fragment,null,Me.createElement(D4,{id:r,value:i.draggable}),Me.createElement(L4,{id:u,announcement:l}));return n?Kn.createPortal(h,n):h}var Zt;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Zt||(Zt={}));function xc(){}const Cr=Object.freeze({x:0,y:0});function H4(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function V4(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function q4(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function Y4(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function F0(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const G4=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=F0(t,t.left,t.top),o=[];for(const l of r){const{id:u}=l,c=n.get(u);if(c){const f=H4(F0(c),i);o.push({id:u,data:{droppableContainer:l,value:f}})}}return o.sort(V4)};function K4(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),l=i-r,u=o-n;if(r<i&&n<o){const c=t.width*t.height,f=e.width*e.height,h=l*u,p=h/(c+f-h);return Number(p.toFixed(4))}return 0}const J4=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=[];for(const o of r){const{id:l}=o,u=n.get(l);if(u){const c=K4(u,t);c>0&&i.push({id:l,data:{droppableContainer:o,value:c}})}}return i.sort(q4)};function Q4(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function _1(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Cr}function X4(e){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i.reduce((l,u)=>({...l,top:l.top+e*u.y,bottom:l.bottom+e*u.y,left:l.left+e*u.x,right:l.right+e*u.x}),{...n})}}const Z4=X4(1);function e3(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function t3(e,t,n){const r=e3(t);if(!r)return e;const{scaleX:i,scaleY:o,x:l,y:u}=r,c=e.left-l-(1-i)*parseFloat(n),f=e.top-u-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),h=i?e.width/i:e.width,p=o?e.height/o:e.height;return{width:h,height:p,top:f,right:c+h,bottom:f+p,left:c}}const n3={ignoreTransform:!1};function Wo(e,t){t===void 0&&(t=n3);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:f,transformOrigin:h}=Fn(e).getComputedStyle(e);f&&(n=t3(n,f,h))}const{top:r,left:i,width:o,height:l,bottom:u,right:c}=n;return{top:r,left:i,width:o,height:l,bottom:u,right:c}}function z0(e){return Wo(e,{ignoreTransform:!0})}function r3(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function i3(e,t){return t===void 0&&(t=Fn(e).getComputedStyle(e)),t.position==="fixed"}function s3(e,t){t===void 0&&(t=Fn(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const o=t[i];return typeof o=="string"?n.test(o):!1})}function _m(e,t){const n=[];function r(i){if(t!=null&&n.length>=t||!i)return n;if(km(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!yl(i)||k1(i)||n.includes(i))return n;const o=Fn(e).getComputedStyle(i);return i!==e&&s3(i,o)&&n.push(i),i3(i,o)?n:r(i.parentNode)}return e?r(e):n}function C1(e){const[t]=_m(e,1);return t??null}function Eh(e){return!Gc||!e?null:Bo(e)?e:bm(e)?km(e)||e===Uo(e).scrollingElement?window:yl(e)?e:null:null}function j1(e){return Bo(e)?e.scrollX:e.scrollLeft}function N1(e){return Bo(e)?e.scrollY:e.scrollTop}function _p(e){return{x:j1(e),y:N1(e)}}var ln;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(ln||(ln={}));function T1(e){return!Gc||!e?!1:e===document.scrollingElement}function I1(e){const t={x:0,y:0},n=T1(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},i=e.scrollTop<=t.y,o=e.scrollLeft<=t.x,l=e.scrollTop>=r.y,u=e.scrollLeft>=r.x;return{isTop:i,isLeft:o,isBottom:l,isRight:u,maxScroll:r,minScroll:t}}const o3={x:.2,y:.2};function a3(e,t,n,r,i){let{top:o,left:l,right:u,bottom:c}=n;r===void 0&&(r=10),i===void 0&&(i=o3);const{isTop:f,isBottom:h,isLeft:p,isRight:y}=I1(e),v={x:0,y:0},S={x:0,y:0},k={height:t.height*i.y,width:t.width*i.x};return!f&&o<=t.top+k.height?(v.y=ln.Backward,S.y=r*Math.abs((t.top+k.height-o)/k.height)):!h&&c>=t.bottom-k.height&&(v.y=ln.Forward,S.y=r*Math.abs((t.bottom-k.height-c)/k.height)),!y&&u>=t.right-k.width?(v.x=ln.Forward,S.x=r*Math.abs((t.right-k.width-u)/k.width)):!p&&l<=t.left+k.width&&(v.x=ln.Backward,S.x=r*Math.abs((t.left+k.width-l)/k.width)),{direction:v,speed:S}}function l3(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:l}=window;return{top:0,left:0,right:o,bottom:l,width:o,height:l}}const{top:t,left:n,right:r,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:i,width:e.clientWidth,height:e.clientHeight}}function P1(e){return e.reduce((t,n)=>_o(t,_p(n)),Cr)}function u3(e){return e.reduce((t,n)=>t+j1(n),0)}function c3(e){return e.reduce((t,n)=>t+N1(n),0)}function d3(e,t){if(t===void 0&&(t=Wo),!e)return;const{top:n,left:r,bottom:i,right:o}=t(e);C1(e)&&(i<=0||o<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const f3=[["x",["left","right"],u3],["y",["top","bottom"],c3]];class Cm{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=_m(n),i=P1(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,l,u]of f3)for(const c of l)Object.defineProperty(this,c,{get:()=>{const f=u(r),h=i[o]-f;return this.rect[c]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Ha{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var i;(i=this.target)==null||i.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function h3(e){const{EventTarget:t}=Fn(e);return e instanceof t?e:Uo(e)}function _h(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var ur;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(ur||(ur={}));function B0(e){e.preventDefault()}function p3(e){e.stopPropagation()}var yt;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(yt||(yt={}));const A1={start:[yt.Space,yt.Enter],cancel:[yt.Esc],end:[yt.Space,yt.Enter,yt.Tab]},m3=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case yt.Right:return{...n,x:n.x+25};case yt.Left:return{...n,x:n.x-25};case yt.Down:return{...n,y:n.y+25};case yt.Up:return{...n,y:n.y-25}}};class R1{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Ha(Uo(n)),this.windowListeners=new Ha(Fn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ur.Resize,this.handleCancel),this.windowListeners.add(ur.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ur.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&d3(r),n(Cr)}handleKeyDown(t){if(Em(t)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:o=A1,coordinateGetter:l=m3,scrollBehavior:u="smooth"}=i,{code:c}=t;if(o.end.includes(c)){this.handleEnd(t);return}if(o.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:f}=r.current,h=f?{x:f.left,y:f.top}:Cr;this.referenceCoordinates||(this.referenceCoordinates=h);const p=l(t,{active:n,context:r.current,currentCoordinates:h});if(p){const y=vc(p,h),v={x:0,y:0},{scrollableAncestors:S}=r.current;for(const k of S){const E=t.code,{isTop:C,isRight:_,isLeft:j,isBottom:I,maxScroll:M,minScroll:P}=I1(k),z=l3(k),ne={x:Math.min(E===yt.Right?z.right-z.width/2:z.right,Math.max(E===yt.Right?z.left:z.left+z.width/2,p.x)),y:Math.min(E===yt.Down?z.bottom-z.height/2:z.bottom,Math.max(E===yt.Down?z.top:z.top+z.height/2,p.y))},Z=E===yt.Right&&!_||E===yt.Left&&!j,R=E===yt.Down&&!I||E===yt.Up&&!C;if(Z&&ne.x!==p.x){const D=k.scrollLeft+y.x,H=E===yt.Right&&D<=M.x||E===yt.Left&&D>=P.x;if(H&&!y.y){k.scrollTo({left:D,behavior:u});return}H?v.x=k.scrollLeft-D:v.x=E===yt.Right?k.scrollLeft-M.x:k.scrollLeft-P.x,v.x&&k.scrollBy({left:-v.x,behavior:u});break}else if(R&&ne.y!==p.y){const D=k.scrollTop+y.y,H=E===yt.Down&&D<=M.y||E===yt.Up&&D>=P.y;if(H&&!y.x){k.scrollTo({top:D,behavior:u});return}H?v.y=k.scrollTop-D:v.y=E===yt.Down?k.scrollTop-M.y:k.scrollTop-P.y,v.y&&k.scrollBy({top:-v.y,behavior:u});break}}this.handleMove(t,_o(vc(p,this.referenceCoordinates),v))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}R1.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=A1,onActivation:i}=t,{active:o}=n;const{code:l}=e.nativeEvent;if(r.start.includes(l)){const u=o.activatorNode.current;return u&&e.target!==u?!1:(e.preventDefault(),i==null||i({event:e.nativeEvent}),!0)}return!1}}];function U0(e){return!!(e&&"distance"in e)}function W0(e){return!!(e&&"delay"in e)}class jm{constructor(t,n,r){var i;r===void 0&&(r=h3(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:o}=t,{target:l}=o;this.props=t,this.events=n,this.document=Uo(l),this.documentListeners=new Ha(this.document),this.listeners=new Ha(r),this.windowListeners=new Ha(Fn(l)),this.initialCoordinates=(i=Ep(o))!=null?i:Cr,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(ur.Resize,this.handleCancel),this.windowListeners.add(ur.DragStart,B0),this.windowListeners.add(ur.VisibilityChange,this.handleCancel),this.windowListeners.add(ur.ContextMenu,B0),this.documentListeners.add(ur.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(W0(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(U0(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:i}=this.props;i(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(ur.Click,p3,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ur.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:i,props:o}=this,{onMove:l,options:{activationConstraint:u}}=o;if(!i)return;const c=(n=Ep(t))!=null?n:Cr,f=vc(i,c);if(!r&&u){if(U0(u)){if(u.tolerance!=null&&_h(f,u.tolerance))return this.handleCancel();if(_h(f,u.distance))return this.handleStart()}if(W0(u)&&_h(f,u.tolerance))return this.handleCancel();this.handlePending(u,f);return}t.cancelable&&t.preventDefault(),l(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===yt.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const g3={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class O1 extends jm{constructor(t){const{event:n}=t,r=Uo(n.target);super(t,g3,r)}}O1.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const y3={move:{name:"mousemove"},end:{name:"mouseup"}};var Cp;(function(e){e[e.RightClick=2]="RightClick"})(Cp||(Cp={}));class v3 extends jm{constructor(t){super(t,y3,Uo(t.event.target))}}v3.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===Cp.RightClick?!1:(r==null||r({event:n}),!0)}}];const Ch={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class x3 extends jm{constructor(t){super(t,Ch)}static setup(){return window.addEventListener(Ch.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Ch.move.name,t)};function t(){}}}x3.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var Va;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Va||(Va={}));var wc;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(wc||(wc={}));function w3(e){let{acceleration:t,activator:n=Va.Pointer,canScroll:r,draggingRect:i,enabled:o,interval:l=5,order:u=wc.TreeOrder,pointerCoordinates:c,scrollableAncestors:f,scrollableAncestorRects:h,delta:p,threshold:y}=e;const v=k3({delta:p,disabled:!o}),[S,k]=P4(),E=w.useRef({x:0,y:0}),C=w.useRef({x:0,y:0}),_=w.useMemo(()=>{switch(n){case Va.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Va.DraggableRect:return i}},[n,i,c]),j=w.useRef(null),I=w.useCallback(()=>{const P=j.current;if(!P)return;const z=E.current.x*C.current.x,ne=E.current.y*C.current.y;P.scrollBy(z,ne)},[]),M=w.useMemo(()=>u===wc.TreeOrder?[...f].reverse():f,[u,f]);w.useEffect(()=>{if(!o||!f.length||!_){k();return}for(const P of M){if((r==null?void 0:r(P))===!1)continue;const z=f.indexOf(P),ne=h[z];if(!ne)continue;const{direction:Z,speed:R}=a3(P,ne,_,t,y);for(const D of["x","y"])v[D][Z[D]]||(R[D]=0,Z[D]=0);if(R.x>0||R.y>0){k(),j.current=P,S(I,l),E.current=R,C.current=Z;return}}E.current={x:0,y:0},C.current={x:0,y:0},k()},[t,I,r,k,o,l,JSON.stringify(_),JSON.stringify(v),S,f,M,h,JSON.stringify(y)])}const b3={x:{[ln.Backward]:!1,[ln.Forward]:!1},y:{[ln.Backward]:!1,[ln.Forward]:!1}};function k3(e){let{delta:t,disabled:n}=e;const r=Sp(t);return vl(i=>{if(n||!r||!i)return b3;const o={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[ln.Backward]:i.x[ln.Backward]||o.x===-1,[ln.Forward]:i.x[ln.Forward]||o.x===1},y:{[ln.Backward]:i.y[ln.Backward]||o.y===-1,[ln.Forward]:i.y[ln.Forward]||o.y===1}}},[n,t,r])}function S3(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return vl(i=>{var o;return t==null?null:(o=r??i)!=null?o:null},[r,t])}function E3(e,t){return w.useMemo(()=>e.reduce((n,r)=>{const{sensor:i}=r,o=i.activators.map(l=>({eventName:l.eventName,handler:t(l.handler,r)}));return[...n,...o]},[]),[e,t])}var ol;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(ol||(ol={}));var jp;(function(e){e.Optimized="optimized"})(jp||(jp={}));const H0=new Map;function _3(e,t){let{dragging:n,dependencies:r,config:i}=t;const[o,l]=w.useState(null),{frequency:u,measure:c,strategy:f}=i,h=w.useRef(e),p=E(),y=il(p),v=w.useCallback(function(C){C===void 0&&(C=[]),!y.current&&l(_=>_===null?C:_.concat(C.filter(j=>!_.includes(j))))},[y]),S=w.useRef(null),k=vl(C=>{if(p&&!n)return H0;if(!C||C===H0||h.current!==e||o!=null){const _=new Map;for(let j of e){if(!j)continue;if(o&&o.length>0&&!o.includes(j.id)&&j.rect.current){_.set(j.id,j.rect.current);continue}const I=j.node.current,M=I?new Cm(c(I),I):null;j.rect.current=M,M&&_.set(j.id,M)}return _}return C},[e,o,n,p,c]);return w.useEffect(()=>{h.current=e},[e]),w.useEffect(()=>{p||v()},[n,p]),w.useEffect(()=>{o&&o.length>0&&l(null)},[JSON.stringify(o)]),w.useEffect(()=>{p||typeof u!="number"||S.current!==null||(S.current=setTimeout(()=>{v(),S.current=null},u))},[u,p,v,...r]),{droppableRects:k,measureDroppableContainers:v,measuringScheduled:o!=null};function E(){switch(f){case ol.Always:return!1;case ol.BeforeDragging:return n;default:return!n}}}function M1(e,t){return vl(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function C3(e,t){return M1(e,t)}function j3(e){let{callback:t,disabled:n}=e;const r=Sm(t),i=w.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(r)},[r,n]);return w.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Kc(e){let{callback:t,disabled:n}=e;const r=Sm(t),i=w.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(r)},[n]);return w.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function N3(e){return new Cm(Wo(e),e)}function V0(e,t,n){t===void 0&&(t=N3);const[r,i]=w.useState(null);function o(){i(c=>{if(!e)return null;if(e.isConnected===!1){var f;return(f=c??n)!=null?f:null}const h=t(e);return JSON.stringify(c)===JSON.stringify(h)?c:h})}const l=j3({callback(c){if(e)for(const f of c){const{type:h,target:p}=f;if(h==="childList"&&p instanceof HTMLElement&&p.contains(e)){o();break}}}}),u=Kc({callback:o});return zr(()=>{o(),e?(u==null||u.observe(e),l==null||l.observe(document.body,{childList:!0,subtree:!0})):(u==null||u.disconnect(),l==null||l.disconnect())},[e]),r}function T3(e){const t=M1(e);return _1(e,t)}const q0=[];function I3(e){const t=w.useRef(e),n=vl(r=>e?r&&r!==q0&&e&&t.current&&e.parentNode===t.current.parentNode?r:_m(e):q0,[e]);return w.useEffect(()=>{t.current=e},[e]),n}function P3(e){const[t,n]=w.useState(null),r=w.useRef(e),i=w.useCallback(o=>{const l=Eh(o.target);l&&n(u=>u?(u.set(l,_p(l)),new Map(u)):null)},[]);return w.useEffect(()=>{const o=r.current;if(e!==o){l(o);const u=e.map(c=>{const f=Eh(c);return f?(f.addEventListener("scroll",i,{passive:!0}),[f,_p(f)]):null}).filter(c=>c!=null);n(u.length?new Map(u):null),r.current=e}return()=>{l(e),l(o)};function l(u){u.forEach(c=>{const f=Eh(c);f==null||f.removeEventListener("scroll",i)})}},[i,e]),w.useMemo(()=>e.length?t?Array.from(t.values()).reduce((o,l)=>_o(o,l),Cr):P1(e):Cr,[e,t])}function Y0(e,t){t===void 0&&(t=[]);const n=w.useRef(null);return w.useEffect(()=>{n.current=null},t),w.useEffect(()=>{const r=e!==Cr;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?vc(e,n.current):Cr}function A3(e){w.useEffect(()=>{if(!Gc)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function R3(e,t){return w.useMemo(()=>e.reduce((n,r)=>{let{eventName:i,handler:o}=r;return n[i]=l=>{o(l,t)},n},{}),[e,t])}function D1(e){return w.useMemo(()=>e?r3(e):null,[e])}const G0=[];function O3(e,t){t===void 0&&(t=Wo);const[n]=e,r=D1(n?Fn(n):null),[i,o]=w.useState(G0);function l(){o(()=>e.length?e.map(c=>T1(c)?r:new Cm(t(c),c)):G0)}const u=Kc({callback:l});return zr(()=>{u==null||u.disconnect(),l(),e.forEach(c=>u==null?void 0:u.observe(c))},[e]),i}function M3(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return yl(t)?t:e}function D3(e){let{measure:t}=e;const[n,r]=w.useState(null),i=w.useCallback(f=>{for(const{target:h}of f)if(yl(h)){r(p=>{const y=t(h);return p?{...p,width:y.width,height:y.height}:y});break}},[t]),o=Kc({callback:i}),l=w.useCallback(f=>{const h=M3(f);o==null||o.disconnect(),h&&(o==null||o.observe(h)),r(h?t(h):null)},[t,o]),[u,c]=yc(l);return w.useMemo(()=>({nodeRef:u,rect:n,setRef:c}),[n,u,c])}const L3=[{sensor:O1,options:{}},{sensor:R1,options:{}}],$3={current:{}},Ju={draggable:{measure:z0},droppable:{measure:z0,strategy:ol.WhileDragging,frequency:jp.Optimized},dragOverlay:{measure:Wo}};class qa extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const F3={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new qa,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:xc},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ju,measureDroppableContainers:xc,windowRect:null,measuringScheduled:!1},z3={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:xc,draggableNodes:new Map,over:null,measureDroppableContainers:xc},Jc=w.createContext(z3),L1=w.createContext(F3);function B3(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new qa}}}function U3(e,t){switch(t.type){case Zt.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Zt.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Zt.DragEnd:case Zt.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Zt.RegisterDroppable:{const{element:n}=t,{id:r}=n,i=new qa(e.droppable.containers);return i.set(r,n),{...e,droppable:{...e.droppable,containers:i}}}case Zt.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const l=new qa(e.droppable.containers);return l.set(n,{...o,disabled:i}),{...e,droppable:{...e.droppable,containers:l}}}case Zt.UnregisterDroppable:{const{id:n,key:r}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const o=new qa(e.droppable.containers);return o.delete(n),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function W3(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:i}=w.useContext(Jc),o=Sp(r),l=Sp(n==null?void 0:n.id);return w.useEffect(()=>{if(!t&&!r&&o&&l!=null){if(!Em(o)||document.activeElement===o.target)return;const u=i.get(l);if(!u)return;const{activatorNode:c,node:f}=u;if(!c.current&&!f.current)return;requestAnimationFrame(()=>{for(const h of[c.current,f.current]){if(!h)continue;const p=O4(h);if(p){p.focus();break}}})}},[r,t,i,l,o]),null}function H3(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((i,o)=>o({transform:i,...r}),n):n}function V3(e){return w.useMemo(()=>({draggable:{...Ju.draggable,...e==null?void 0:e.draggable},droppable:{...Ju.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Ju.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function q3(e){let{activeNode:t,measure:n,initialRect:r,config:i=!0}=e;const o=w.useRef(!1),{x:l,y:u}=typeof i=="boolean"?{x:i,y:i}:i;zr(()=>{if(!l&&!u||!t){o.current=!1;return}if(o.current||!r)return;const f=t==null?void 0:t.node.current;if(!f||f.isConnected===!1)return;const h=n(f),p=_1(h,r);if(l||(p.x=0),u||(p.y=0),o.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const y=C1(f);y&&y.scrollBy({top:p.y,left:p.x})}},[t,l,u,r,n])}const $1=w.createContext({...Cr,scaleX:1,scaleY:1});var Ii;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Ii||(Ii={}));const Y3=w.memo(function(t){var n,r,i,o;let{id:l,accessibility:u,autoScroll:c=!0,children:f,sensors:h=L3,collisionDetection:p=J4,measuring:y,modifiers:v,...S}=t;const k=w.useReducer(U3,void 0,B3),[E,C]=k,[_,j]=z4(),[I,M]=w.useState(Ii.Uninitialized),P=I===Ii.Initialized,{draggable:{active:z,nodes:ne,translate:Z},droppable:{containers:R}}=E,D=z!=null?ne.get(z):null,H=w.useRef({initial:null,translated:null}),W=w.useMemo(()=>{var lt;return z!=null?{id:z,data:(lt=D==null?void 0:D.data)!=null?lt:$3,rect:H}:null},[z,D]),G=w.useRef(null),[$,Y]=w.useState(null),[re,O]=w.useState(null),ee=il(S,Object.values(S)),T=xl("DndDescribedBy",l),U=w.useMemo(()=>R.getEnabled(),[R]),te=V3(y),{droppableRects:A,measureDroppableContainers:we,measuringScheduled:he}=_3(U,{dragging:P,dependencies:[Z.x,Z.y],config:te.droppable}),me=S3(ne,z),de=w.useMemo(()=>re?Ep(re):null,[re]),Ne=ht(),Ae=C3(me,te.draggable.measure);q3({activeNode:z!=null?ne.get(z):null,config:Ne.layoutShiftCompensation,initialRect:Ae,measure:te.draggable.measure});const Ie=V0(me,te.draggable.measure,Ae),X=V0(me?me.parentElement:null),je=w.useRef({activatorEvent:null,active:null,activeNode:me,collisionRect:null,collisions:null,droppableRects:A,draggableNodes:ne,draggingNode:null,draggingNodeRect:null,droppableContainers:R,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),De=R.getNodeFor((n=je.current.over)==null?void 0:n.id),Ye=D3({measure:te.dragOverlay.measure}),Ze=(r=Ye.nodeRef.current)!=null?r:me,ft=P?(i=Ye.rect)!=null?i:Ie:null,Pt=!!(Ye.nodeRef.current&&Ye.rect),en=T3(Pt?null:Ie),J=D1(Ze?Fn(Ze):null),ce=I3(P?De??me:null),ge=O3(ce),Pe=H3(v,{transform:{x:Z.x-en.x,y:Z.y-en.y,scaleX:1,scaleY:1},activatorEvent:re,active:W,activeNodeRect:Ie,containerNodeRect:X,draggingNodeRect:ft,over:je.current.over,overlayNodeRect:Ye.rect,scrollableAncestors:ce,scrollableAncestorRects:ge,windowRect:J}),ke=de?_o(de,Z):null,ue=P3(ce),Te=Y0(ue),ae=Y0(ue,[Ie]),pe=_o(Pe,Te),Re=ft?Z4(ft,Pe):null,He=W&&Re?p({active:W,collisionRect:Re,droppableRects:A,droppableContainers:U,pointerCoordinates:ke}):null,ve=Y4(He,"id"),[F,L]=w.useState(null),V=Pt?Pe:_o(Pe,ae),K=Q4(V,(o=F==null?void 0:F.rect)!=null?o:null,Ie),se=w.useRef(null),fe=w.useCallback((lt,Ge)=>{let{sensor:$e,options:Ue}=Ge;if(G.current==null)return;const nt=ne.get(G.current);if(!nt)return;const bt=lt.nativeEvent,it=new $e({active:G.current,activeNode:nt,event:bt,options:Ue,context:je,onAbort(wt){if(!ne.get(wt))return;const{onDragAbort:Kt}=ee.current,Zn={id:wt};Kt==null||Kt(Zn),_({type:"onDragAbort",event:Zn})},onPending(wt,zn,Kt,Zn){if(!ne.get(wt))return;const{onDragPending:jn}=ee.current,Bn={id:wt,constraint:zn,initialCoordinates:Kt,offset:Zn};jn==null||jn(Bn),_({type:"onDragPending",event:Bn})},onStart(wt){const zn=G.current;if(zn==null)return;const Kt=ne.get(zn);if(!Kt)return;const{onDragStart:Zn}=ee.current,er={activatorEvent:bt,active:{id:zn,data:Kt.data,rect:H}};Kn.unstable_batchedUpdates(()=>{Zn==null||Zn(er),M(Ii.Initializing),C({type:Zt.DragStart,initialCoordinates:wt,active:zn}),_({type:"onDragStart",event:er}),Y(se.current),O(bt)})},onMove(wt){C({type:Zt.DragMove,coordinates:wt})},onEnd:Rt(Zt.DragEnd),onCancel:Rt(Zt.DragCancel)});se.current=it;function Rt(wt){return async function(){const{active:Kt,collisions:Zn,over:er,scrollAdjustedTranslate:jn}=je.current;let Bn=null;if(Kt&&jn){const{cancelDrop:Hr}=ee.current;Bn={activatorEvent:bt,active:Kt,collisions:Zn,delta:jn,over:er},wt===Zt.DragEnd&&typeof Hr=="function"&&await Promise.resolve(Hr(Bn))&&(wt=Zt.DragCancel)}G.current=null,Kn.unstable_batchedUpdates(()=>{C({type:wt}),M(Ii.Uninitialized),L(null),Y(null),O(null),se.current=null;const Hr=wt===Zt.DragEnd?"onDragEnd":"onDragCancel";if(Bn){const Ho=ee.current[Hr];Ho==null||Ho(Bn),_({type:Hr,event:Bn})}})}}},[ne]),Se=w.useCallback((lt,Ge)=>($e,Ue)=>{const nt=$e.nativeEvent,bt=ne.get(Ue);if(G.current!==null||!bt||nt.dndKit||nt.defaultPrevented)return;const it={active:bt};lt($e,Ge.options,it)===!0&&(nt.dndKit={capturedBy:Ge.sensor},G.current=Ue,fe($e,Ge))},[ne,fe]),Oe=E3(h,Se);A3(h),zr(()=>{Ie&&I===Ii.Initializing&&M(Ii.Initialized)},[Ie,I]),w.useEffect(()=>{const{onDragMove:lt}=ee.current,{active:Ge,activatorEvent:$e,collisions:Ue,over:nt}=je.current;if(!Ge||!$e)return;const bt={active:Ge,activatorEvent:$e,collisions:Ue,delta:{x:pe.x,y:pe.y},over:nt};Kn.unstable_batchedUpdates(()=>{lt==null||lt(bt),_({type:"onDragMove",event:bt})})},[pe.x,pe.y]),w.useEffect(()=>{const{active:lt,activatorEvent:Ge,collisions:$e,droppableContainers:Ue,scrollAdjustedTranslate:nt}=je.current;if(!lt||G.current==null||!Ge||!nt)return;const{onDragOver:bt}=ee.current,it=Ue.get(ve),Rt=it&&it.rect.current?{id:it.id,rect:it.rect.current,data:it.data,disabled:it.disabled}:null,wt={active:lt,activatorEvent:Ge,collisions:$e,delta:{x:nt.x,y:nt.y},over:Rt};Kn.unstable_batchedUpdates(()=>{L(Rt),bt==null||bt(wt),_({type:"onDragOver",event:wt})})},[ve]),zr(()=>{je.current={activatorEvent:re,active:W,activeNode:me,collisionRect:Re,collisions:He,droppableRects:A,draggableNodes:ne,draggingNode:Ze,draggingNodeRect:ft,droppableContainers:R,over:F,scrollableAncestors:ce,scrollAdjustedTranslate:pe},H.current={initial:ft,translated:Re}},[W,me,He,Re,ne,Ze,ft,A,R,F,ce,pe]),w3({...Ne,delta:Z,draggingRect:Re,pointerCoordinates:ke,scrollableAncestors:ce,scrollableAncestorRects:ge});const ot=w.useMemo(()=>({active:W,activeNode:me,activeNodeRect:Ie,activatorEvent:re,collisions:He,containerNodeRect:X,dragOverlay:Ye,draggableNodes:ne,droppableContainers:R,droppableRects:A,over:F,measureDroppableContainers:we,scrollableAncestors:ce,scrollableAncestorRects:ge,measuringConfiguration:te,measuringScheduled:he,windowRect:J}),[W,me,Ie,re,He,X,Ye,ne,R,A,F,we,ce,ge,te,he,J]),Be=w.useMemo(()=>({activatorEvent:re,activators:Oe,active:W,activeNodeRect:Ie,ariaDescribedById:{draggable:T},dispatch:C,draggableNodes:ne,over:F,measureDroppableContainers:we}),[re,Oe,W,Ie,C,T,ne,F,we]);return Me.createElement(E1.Provider,{value:j},Me.createElement(Jc.Provider,{value:Be},Me.createElement(L1.Provider,{value:ot},Me.createElement($1.Provider,{value:K},f)),Me.createElement(W3,{disabled:(u==null?void 0:u.restoreFocus)===!1})),Me.createElement(W4,{...u,hiddenTextDescribedById:T}));function ht(){const lt=($==null?void 0:$.autoScrollEnabled)===!1,Ge=typeof c=="object"?c.enabled===!1:c===!1,$e=P&&!lt&&!Ge;return typeof c=="object"?{...c,enabled:$e}:{enabled:$e}}}),G3=w.createContext(null),K0="button",K3="Draggable";function J3(e){let{id:t,data:n,disabled:r=!1,attributes:i}=e;const o=xl(K3),{activators:l,activatorEvent:u,active:c,activeNodeRect:f,ariaDescribedById:h,draggableNodes:p,over:y}=w.useContext(Jc),{role:v=K0,roleDescription:S="draggable",tabIndex:k=0}=i??{},E=(c==null?void 0:c.id)===t,C=w.useContext(E?$1:G3),[_,j]=yc(),[I,M]=yc(),P=R3(l,t),z=il(n);zr(()=>(p.set(t,{id:t,key:o,node:_,activatorNode:I,data:z}),()=>{const Z=p.get(t);Z&&Z.key===o&&p.delete(t)}),[p,t]);const ne=w.useMemo(()=>({role:v,tabIndex:k,"aria-disabled":r,"aria-pressed":E&&v===K0?!0:void 0,"aria-roledescription":S,"aria-describedby":h.draggable}),[r,v,k,E,S,h.draggable]);return{active:c,activatorEvent:u,activeNodeRect:f,attributes:ne,isDragging:E,listeners:r?void 0:P,node:_,over:y,setNodeRef:j,setActivatorNodeRef:M,transform:C}}function Q3(){return w.useContext(L1)}const X3="Droppable",Z3={timeout:25};function eF(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:i}=e;const o=xl(X3),{active:l,dispatch:u,over:c,measureDroppableContainers:f}=w.useContext(Jc),h=w.useRef({disabled:n}),p=w.useRef(!1),y=w.useRef(null),v=w.useRef(null),{disabled:S,updateMeasurementsFor:k,timeout:E}={...Z3,...i},C=il(k??r),_=w.useCallback(()=>{if(!p.current){p.current=!0;return}v.current!=null&&clearTimeout(v.current),v.current=setTimeout(()=>{f(Array.isArray(C.current)?C.current:[C.current]),v.current=null},E)},[E]),j=Kc({callback:_,disabled:S||!l}),I=w.useCallback((ne,Z)=>{j&&(Z&&(j.unobserve(Z),p.current=!1),ne&&j.observe(ne))},[j]),[M,P]=yc(I),z=il(t);return w.useEffect(()=>{!j||!M.current||(j.disconnect(),p.current=!1,j.observe(M.current))},[M,j]),w.useEffect(()=>(u({type:Zt.RegisterDroppable,element:{id:r,key:o,disabled:n,node:M,rect:y,data:z}}),()=>u({type:Zt.UnregisterDroppable,key:o,id:r})),[r]),w.useEffect(()=>{n!==h.current.disabled&&(u({type:Zt.SetDroppableDisabled,id:r,key:o,disabled:n}),h.current.disabled=n)},[r,o,n,u]),{active:l,rect:y,isOver:(c==null?void 0:c.id)===r,node:M,over:c,setNodeRef:P}}function F1(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function tF(e,t){return e.reduce((n,r,i)=>{const o=t.get(r);return o&&(n[i]=o),n},Array(e.length))}function zu(e){return e!==null&&e>=0}function nF(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function rF(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const z1=e=>{let{rects:t,activeIndex:n,overIndex:r,index:i}=e;const o=F1(t,r,n),l=t[i],u=o[i];return!u||!l?null:{x:u.left-l.left,y:u.top-l.top,scaleX:u.width/l.width,scaleY:u.height/l.height}},Bu={scaleX:1,scaleY:1},iF=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:i,rects:o,overIndex:l}=e;const u=(t=o[n])!=null?t:r;if(!u)return null;if(i===n){const f=o[l];return f?{x:0,y:n<l?f.top+f.height-(u.top+u.height):f.top-u.top,...Bu}:null}const c=sF(o,i,n);return i>n&&i<=l?{x:0,y:-u.height-c,...Bu}:i<n&&i>=l?{x:0,y:u.height+c,...Bu}:{x:0,y:0,...Bu}};function sF(e,t,n){const r=e[t],i=e[t-1],o=e[t+1];return r?n<t?i?r.top-(i.top+i.height):o?o.top-(r.top+r.height):0:o?o.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const B1="Sortable",U1=Me.createContext({activeIndex:-1,containerId:B1,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:z1,disabled:{draggable:!1,droppable:!1}});function oF(e){let{children:t,id:n,items:r,strategy:i=z1,disabled:o=!1}=e;const{active:l,dragOverlay:u,droppableRects:c,over:f,measureDroppableContainers:h}=Q3(),p=xl(B1,n),y=u.rect!==null,v=w.useMemo(()=>r.map(P=>typeof P=="object"&&"id"in P?P.id:P),[r]),S=l!=null,k=l?v.indexOf(l.id):-1,E=f?v.indexOf(f.id):-1,C=w.useRef(v),_=!nF(v,C.current),j=E!==-1&&k===-1||_,I=rF(o);zr(()=>{_&&S&&h(v)},[_,v,S,h]),w.useEffect(()=>{C.current=v},[v]);const M=w.useMemo(()=>({activeIndex:k,containerId:p,disabled:I,disableTransforms:j,items:v,overIndex:E,useDragOverlay:y,sortedRects:tF(v,c),strategy:i}),[k,p,I.draggable,I.droppable,j,v,E,c,y,i]);return Me.createElement(U1.Provider,{value:M},t)}const aF=e=>{let{id:t,items:n,activeIndex:r,overIndex:i}=e;return F1(n,r,i).indexOf(t)},lF=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:i,items:o,newIndex:l,previousItems:u,previousContainerId:c,transition:f}=e;return!f||!r||u!==o&&i===l?!1:n?!0:l!==i&&t===c},uF={duration:200,easing:"ease"},W1="transform",cF=sl.Transition.toString({property:W1,duration:0,easing:"linear"}),dF={roleDescription:"sortable"};function fF(e){let{disabled:t,index:n,node:r,rect:i}=e;const[o,l]=w.useState(null),u=w.useRef(n);return zr(()=>{if(!t&&n!==u.current&&r.current){const c=i.current;if(c){const f=Wo(r.current,{ignoreTransform:!0}),h={x:c.left-f.left,y:c.top-f.top,scaleX:c.width/f.width,scaleY:c.height/f.height};(h.x||h.y)&&l(h)}}n!==u.current&&(u.current=n)},[t,n,r,i]),w.useEffect(()=>{o&&l(null)},[o]),o}function hF(e){let{animateLayoutChanges:t=lF,attributes:n,disabled:r,data:i,getNewIndex:o=aF,id:l,strategy:u,resizeObserverConfig:c,transition:f=uF}=e;const{items:h,containerId:p,activeIndex:y,disabled:v,disableTransforms:S,sortedRects:k,overIndex:E,useDragOverlay:C,strategy:_}=w.useContext(U1),j=pF(r,v),I=h.indexOf(l),M=w.useMemo(()=>({sortable:{containerId:p,index:I,items:h},...i}),[p,i,I,h]),P=w.useMemo(()=>h.slice(h.indexOf(l)),[h,l]),{rect:z,node:ne,isOver:Z,setNodeRef:R}=eF({id:l,data:M,disabled:j.droppable,resizeObserverConfig:{updateMeasurementsFor:P,...c}}),{active:D,activatorEvent:H,activeNodeRect:W,attributes:G,setNodeRef:$,listeners:Y,isDragging:re,over:O,setActivatorNodeRef:ee,transform:T}=J3({id:l,data:M,attributes:{...dF,...n},disabled:j.draggable}),U=I4(R,$),te=!!D,A=te&&!S&&zu(y)&&zu(E),we=!C&&re,he=we&&A?T:null,de=A?he??(u??_)({rects:k,activeNodeRect:W,activeIndex:y,overIndex:E,index:I}):null,Ne=zu(y)&&zu(E)?o({id:l,items:h,activeIndex:y,overIndex:E}):I,Ae=D==null?void 0:D.id,Ie=w.useRef({activeId:Ae,items:h,newIndex:Ne,containerId:p}),X=h!==Ie.current.items,je=t({active:D,containerId:p,isDragging:re,isSorting:te,id:l,index:I,items:h,newIndex:Ie.current.newIndex,previousItems:Ie.current.items,previousContainerId:Ie.current.containerId,transition:f,wasDragging:Ie.current.activeId!=null}),De=fF({disabled:!je,index:I,node:ne,rect:z});return w.useEffect(()=>{te&&Ie.current.newIndex!==Ne&&(Ie.current.newIndex=Ne),p!==Ie.current.containerId&&(Ie.current.containerId=p),h!==Ie.current.items&&(Ie.current.items=h)},[te,Ne,p,h]),w.useEffect(()=>{if(Ae===Ie.current.activeId)return;if(Ae&&!Ie.current.activeId){Ie.current.activeId=Ae;return}const Ze=setTimeout(()=>{Ie.current.activeId=Ae},50);return()=>clearTimeout(Ze)},[Ae]),{active:D,activeIndex:y,attributes:G,data:M,rect:z,index:I,newIndex:Ne,items:h,isOver:Z,isSorting:te,isDragging:re,listeners:Y,node:ne,overIndex:E,over:O,setNodeRef:U,setActivatorNodeRef:ee,setDroppableNodeRef:R,setDraggableNodeRef:$,transform:De??de,transition:Ye()};function Ye(){if(De||X&&Ie.current.newIndex===I)return cF;if(!(we&&!Em(H)||!f)&&(te||je))return sl.Transition.toString({...f,property:W1})}}function pF(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}yt.Down,yt.Right,yt.Up,yt.Left;function bc(e,t="18:30"){const n=(e??t).trim(),r=/^(\d{1,2}):(\d{2})$/.exec(n);if(!r)return bc(t,t);const i=Number(r[1]),o=Number(r[2]);return Number.isNaN(i)||Number.isNaN(o)?bc(t,t):(i*60+o)%1440}function Np(e){const t=(e%1440+1440)%1440,n=Math.floor(t/60),r=t%60,i=n.toString().padStart(2,"0"),o=r.toString().padStart(2,"0");return`${i}:${o}`}const J0={present:"Presente",absent:"Ausente",pending:"Pendiente"};function H1({work:e,objective:t,parentChain:n,onSelect:r}){const i=(e.subtitle??"").trim();return m.jsxs("button",{type:"button",onClick:()=>r(e.id),className:"flex w-full items-center justify-between gap-4 rounded-xl border border-white/10 bg-white/5 px-4 py-3 text-left transition hover:border-white/30",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-semibold text-white",children:e.name}),i?m.jsx("p",{className:"text-xs text-white/60",children:i}):null,m.jsxs("p",{className:"text-xs text-white/50",children:[e.estimatedMinutes," min"]}),n?m.jsxs("p",{className:"text-[11px] text-white/40",children:["Deriva de ",n]}):null]}),m.jsx(Bi,{objective:t,size:"sm"})]})}function mF({item:e,work:t,objective:n,expanded:r,isPersonal:i,onToggleExpanded:o,onRemove:l,onDuplicate:u,onUpdateDetails:c,onReplace:f,startTimeLabel:h,durationMinutes:p,works:y,objectiveMap:v,workPathById:S}){const{attributes:k,listeners:E,setNodeRef:C,transform:_,transition:j,isDragging:I}=hF({id:e.id}),[M,P]=w.useState(!1),[z,ne]=w.useState(""),Z={transform:sl.Transform.toString(_),transition:j},D=(e.focusLabel??"").trim(),H=D.length>0,W=e.customDescriptionMarkdown??(t==null?void 0:t.descriptionMarkdown)??"",G=W.trim().length>0,$=((t==null?void 0:t.videoUrls)??[]).map(de=>de.trim()).filter(Boolean),Y=$.length>0,re=G||Y,ee=(t!=null&&t.id?S.get(t.id)??(t==null?void 0:t.name)??"":"").split("  ").slice(0,-1).join("  "),T=((t==null?void 0:t.subtitle)??"").trim(),U=de=>{const Ne=de.target.value;c(e.id,{focusLabel:Ne===""?void 0:Ne})},te=z.trim().toLowerCase(),A=w.useMemo(()=>y.filter(de=>de.id!==(t==null?void 0:t.id)),[y,t==null?void 0:t.id]),we=w.useMemo(()=>te?A.filter(de=>{var De;const Ne=(de.subtitle??"").toLowerCase(),Ae=((De=v.get(de.objectiveId))==null?void 0:De.name.toLowerCase())??"",Ie=(S.get(de.id)??"").toLowerCase(),X=(de.descriptionMarkdown??"").toLowerCase(),je=te;return de.name.toLowerCase().includes(je)||Ne.includes(je)||X.includes(je)||Ae.includes(je)||Ie.includes(je)}):[],[A,te,v,S]);w.useEffect(()=>{M||ne("")},[M]);const he=A.length>0,me=e.result;return m.jsxs("article",{ref:C,style:Z,className:ze("relative flex flex-col gap-3 rounded-3xl border border-white/10 bg-white/10 p-4 shadow-lg shadow-black/20 transition",I&&"ring-2 ring-sky-400/70"),children:[n?m.jsx("div",{className:"absolute inset-0 -z-[1] rounded-3xl opacity-30 blur-xl",style:{backgroundColor:n.colorHex}}):null,m.jsxs("div",{className:"flex items-start gap-4",children:[m.jsx("button",{type:"button",className:"mt-1 flex h-10 w-10 items-center justify-center rounded-full border border-white/20 text-white/70",...E,...k,"aria-label":"Reordenar trabajo",children:""}),m.jsx("div",{className:"flex-1 space-y-1",children:m.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsxs("p",{className:"text-lg font-semibold text-white",children:[(t==null?void 0:t.name)??"Trabajo eliminado",H?m.jsxs("span",{className:"ml-2 text-sky-300",children:[" ",D]}):null]}),T?m.jsx("p",{className:"text-sm text-white/70",children:T}):null,ee?m.jsxs("p",{className:"text-xs text-white/50",children:["Deriva de ",ee]}):null,m.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm text-white/60",children:[m.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:h}),m.jsx("span",{className:"text-white/30",children:""}),m.jsxs("span",{children:[p," min"]})]}),m.jsxs("div",{className:"max-w-md",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Foco dentro del trabajo"}),m.jsx("input",{type:"text",value:e.focusLabel??"",onChange:U,placeholder:"Ej. 1/7  Apertura",className:"input-field mt-1"})]}),i?m.jsx("div",{className:"mt-3 flex flex-wrap items-center gap-3",children:m.jsx("div",{className:"flex flex-wrap items-center gap-2",children:["ok","doubt","fail"].map(de=>m.jsx("button",{type:"button",onClick:()=>c(e.id,{result:de,completed:!0}),className:ze("rounded-full border px-3 py-1 text-xs font-semibold transition",me===de?de==="ok"?"border-emerald-500/60 bg-emerald-500/20 text-emerald-200":de==="doubt"?"border-amber-400/50 bg-amber-500/15 text-amber-200":"border-rose-500/60 bg-rose-500/15 text-rose-200":"border-white/10 text-white/60 hover:border-white/30 hover:text-white"),children:de==="ok"?"OK":de==="doubt"?"Dudosa":"Fallo"},de))})}):null]}),m.jsxs("div",{className:"flex items-center gap-2",children:[re?m.jsxs("button",{type:"button",onClick:()=>o(e.id),className:ze("inline-flex items-center gap-2 rounded-full border border-white/20 px-3 py-1 text-xs font-semibold text-white/70 transition hover:border-white/40 hover:text-white",r&&"border-white/40 text-white"),children:[m.jsx("span",{className:ze("transition-transform",r?"rotate-90":"rotate-0"),children:""}),r?"Ocultar detalles":"Ver detalles"]}):null,m.jsx(Bi,{objective:n,size:"sm"})]})]})}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{type:"button",onClick:()=>P(de=>!de),disabled:!he,className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-white/20 text-white/70 transition hover:border-sky-400/60 hover:text-white disabled:opacity-40","aria-label":"Intercambiar trabajo por otro de la misma categora","aria-expanded":M,children:""}),m.jsx("button",{type:"button",onClick:u,className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-white/20 text-white/70 transition hover:border-sky-400/60 hover:text-white","aria-label":"Duplicar trabajo en la sesin",children:"x2"}),m.jsx("button",{type:"button",onClick:l,className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-rose-500/40 text-rose-300 hover:border-rose-400 hover:text-rose-200","aria-label":"Eliminar trabajo de la sesin",children:""})]})]}),M?m.jsx("div",{className:"mt-3 space-y-3 rounded-2xl border border-white/10 bg-slate-950/70 p-3",children:m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Buscar en el catlogo"}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:"search",className:"input-field",placeholder:"Buscar en el catlogo",value:z,onChange:de=>ne(de.target.value)}),z?m.jsx("div",{className:"absolute top-14 z-10 max-h-60 w-full overflow-y-auto rounded-2xl border border-white/10 bg-slate-900/95 p-2 shadow-xl",children:we.length===0?m.jsx("p",{className:"p-3 text-sm text-white/50",children:"Sin resultados. Ajusta la bsqueda."}):m.jsx("div",{className:"space-y-2",children:we.map(de=>{const Ae=(S.get(de.id)??de.name).split("  ").slice(0,-1).join("  ");return m.jsx(H1,{work:de,objective:v.get(de.objectiveId),parentChain:Ae,onSelect:Ie=>{f(Ie),P(!1),ne("")}},de.id)})})}):null]}),z?null:m.jsx("p",{className:"rounded-2xl border border-dashed border-white/15 px-3 py-2 text-xs text-white/60",children:"Escribe para encontrar un reemplazo. Se mostrarn resultados coincidentes del catlogo."})]})}):null,re&&r?m.jsxs("div",{className:"grid gap-3 rounded-2xl border border-white/10 bg-slate-950/60 p-4",children:[G?m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Descripcin"}),m.jsx("div",{className:"rounded-2xl border border-white/10 bg-slate-950/70 p-3",children:m.jsx(Ss,{content:W,enableWorkLinks:!0})})]}):null,Y?m.jsxs("div",{className:"space-y-2",children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-white/40",children:"Vdeos de referencia"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:$.map(de=>m.jsxs("a",{href:de,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-full border border-white/15 bg-white/5 px-3 py-1 text-xs font-medium text-white/80 transition hover:border-white/30 hover:text-white",children:[m.jsx("span",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-red-500/80 text-white shadow shadow-red-500/40",children:""}),"Ver vdeo"]},de))})]}):null]}):null,m.jsx("span",{className:"absolute -left-4 top-4 flex h-8 w-8 items-center justify-center rounded-full border border-white/20 bg-slate-950/90 text-xs font-semibold text-white/60",children:e.order+1})]})}function Nm({session:e,works:t,objectives:n,assistants:r,onDateChange:i}){const o=Ce(D=>D.updateSession),l=Ce(D=>D.addWorkToSession),u=Ce(D=>D.duplicateSessionWork),c=Ce(D=>D.removeWorkFromSession),f=Ce(D=>D.reorderSessionWork),h=Ce(D=>D.updateSessionWorkDetails),p=Ce(D=>D.replaceSessionWork),y=Ce(D=>D.setAttendanceStatus),v=e.kind==="personal",[S,k]=w.useState(""),[E,C]=w.useState(new Set),_=w.useMemo(()=>new Map(n.map(D=>[D.id,D])),[n]),j=w.useMemo(()=>new Map(t.map(D=>[D.id,D])),[t]),I=w.useMemo(()=>{const D=new Map,H=(W,G)=>{if(D.has(W))return D.get(W);const $=j.get(W);if(!$)return"";const Y=$.parentWorkId;if(!Y||G.has(W))return D.set(W,$.name),$.name;G.add(W);const re=H(Y,G);G.delete(W);const O=re?`${re}  ${$.name}`:$.name;return D.set(W,O),O};return t.forEach(W=>H(W.id,new Set)),D},[t,j]),M=w.useMemo(()=>{if(!S)return t;const D=S.toLowerCase();return t.filter(H=>{const W=_.get(H.objectiveId),G=I.get(H.id)??"";return H.name.toLowerCase().includes(D)||H.descriptionMarkdown.toLowerCase().includes(D)||(W==null?void 0:W.name.toLowerCase().includes(D))||G.toLowerCase().includes(D)})},[t,S,_,I]),P=w.useCallback(D=>{const H=I.get(D);if(!H)return"";const W=H.split("  ");return W.pop(),W.join("  ")},[I]),z=D=>{C(H=>{const W=new Set(H);return W.has(D)?W.delete(D):W.add(D),W})},ne=D=>{l(e.id,{workId:D}),k("")},Z=D=>{const{active:H,over:W}=D;if(!W||H.id===W.id)return;const G=e.workItems.findIndex(Y=>Y.id===H.id),$=e.workItems.findIndex(Y=>Y.id===W.id);G===-1||$===-1||f(e.id,G,$)},R=D=>H=>{const W=H.target.value;o(e.id,{[D]:W}),D==="date"&&i&&i(W)};return m.jsxs("div",{className:"space-y-6",children:[v?null:m.jsxs("div",{className:"grid gap-4 rounded-3xl border border-white/10 bg-white/5 p-6",children:[m.jsxs("div",{className:"grid gap-2 sm:grid-cols-3",children:[m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Ttulo"}),m.jsx("input",{type:"text",className:"input-field",value:e.title,onChange:R("title"),placeholder:"Nombre de la sesin"})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Fecha"}),m.jsx("input",{type:"date",className:"input-field",value:e.date,onChange:R("date")})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Hora de inicio"}),m.jsx("input",{type:"time",className:"input-field",value:e.startTime??"18:30",onChange:R("startTime")})]})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Descripcin"}),m.jsx("textarea",{className:"input-field min-h-[120px]",value:e.description??"",onChange:R("description"),placeholder:"Contexto general, objetivos o recordatorios"})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Notas privadas"}),m.jsx("textarea",{className:"input-field min-h-[100px]",value:e.notes??"",onChange:R("notes"),placeholder:"Notas para ti o recordatorios de material"})]})]}),m.jsxs("section",{className:"space-y-4",children:[m.jsxs("header",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-white",children:"Trabajos en la sesin"}),m.jsx("p",{className:"text-sm text-white/60",children:"Arrastra para reorganizar, pulsa  para ajustar detalles."})]}),m.jsxs("div",{className:"relative w-full sm:w-72",children:[m.jsx("input",{type:"search",className:"input-field",value:S,onChange:D=>k(D.target.value),placeholder:"Buscar en catlogo"}),S&&m.jsx("div",{className:"absolute top-12 z-10 max-h-72 w-full overflow-y-auto rounded-2xl border border-white/10 bg-slate-900/95 p-2 shadow-xl",children:M.length===0?m.jsx("p",{className:"p-4 text-sm text-white/50",children:"Sin resultados. Revisa el catlogo."}):m.jsx("div",{className:"space-y-2",children:M.map(D=>m.jsx(H1,{work:D,objective:_.get(D.objectiveId),parentChain:P(D.id),onSelect:ne},D.id))})})]})]}),m.jsx("div",{className:"space-y-4",children:m.jsx(Y3,{collisionDetection:G4,onDragEnd:Z,children:m.jsx(oF,{items:e.workItems.map(D=>D.id),strategy:iF,children:m.jsx("div",{className:"space-y-5",children:e.workItems.length===0?m.jsx("div",{className:"rounded-3xl border border-dashed border-white/20 p-10 text-center text-white/50",children:"Aade trabajos desde el catlogo con el buscador superior."}):(()=>{let D=0;const H=bc(e.startTime,"18:30");return e.workItems.map(W=>{const G=j.get(W.workId),$=G?_.get(G.objectiveId):void 0,Y=W.customDurationMinutes??(G==null?void 0:G.estimatedMinutes)??0,re=Np(H+D);return D+=Y,m.jsx(mF,{item:W,work:G,objective:$,expanded:E.has(W.id),isPersonal:v,onToggleExpanded:z,onRemove:()=>c(e.id,W.id),onDuplicate:()=>u(e.id,W.id),onUpdateDetails:(O,ee)=>h(e.id,O,ee),onReplace:O=>p(e.id,W.id,O),startTimeLabel:re,durationMinutes:Y,works:t,objectiveMap:_,workPathById:I},W.id)})})()})})})})]}),v?null:m.jsxs("section",{className:"space-y-4",children:[m.jsx("header",{className:"flex flex-col gap-1 sm:flex-row sm:items-baseline sm:justify-between",children:m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-white",children:"Previsin de asistencia"}),m.jsx("p",{className:"text-sm text-white/60",children:"Indica quin esperas que asista. La asistencia real se marca durante la sesin desde la Home."})]})}),m.jsx("div",{className:"space-y-2 rounded-3xl border border-white/10 bg-white/5 p-4",children:r.length===0?m.jsx("p",{className:"text-sm text-white/60",children:"An no tienes asistentes definidos. Adelos desde la seccin correspondiente para empezar a registrar asistencia."}):r.map(D=>{const H=e.attendance.find($=>$.assistantId===D.id),W=(H==null?void 0:H.status)??"pending",G=H==null?void 0:H.actualStatus;return m.jsxs("div",{className:"flex flex-col gap-2 rounded-2xl border border-white/10 bg-slate-950/60 p-3 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-semibold text-white",children:D.name}),D.notes?m.jsx("p",{className:"text-xs text-white/50",children:D.notes}):null,G?m.jsxs("p",{className:"text-xs text-white/40",children:["ltimo registro real: ",J0[G]]}):null]}),m.jsx("div",{className:"flex items-center gap-2",children:["present","absent","pending"].map($=>m.jsx("button",{type:"button",onClick:()=>y(e.id,D.id,$),className:ze("rounded-full px-3 py-1 text-xs font-semibold transition",W===$?$==="present"?"border border-emerald-500/60 bg-emerald-500/20 text-emerald-200":$==="absent"?"border border-rose-500/60 bg-rose-500/20 text-rose-200":"border border-white/30 bg-white/10 text-white":"border border-white/10 text-white/60 hover:border-white/30 hover:text-white"),children:J0[$]},$))})]},D.id)})})]})]})}function gF(e){const t=(e.day()+6)%7;return e.subtract(t,"day")}function yF(e){const t=gF(e.startOf("month"));return Array.from({length:6},(n,r)=>Array.from({length:7},(i,o)=>t.add(r*7+o,"day")))}function Uu(e,t){return tt(e).format("YYYY-MM-DD")===tt(t).format("YYYY-MM-DD")}tt.locale("es");const vF={present:"Presente",absent:"Ausente",pending:"Pendiente"},xF={present:"border border-emerald-500/40 bg-emerald-500/10 text-emerald-100",absent:"border border-rose-500/40 bg-rose-500/10 text-rose-100",pending:"border border-white/20 bg-white/10 text-white/70"},wF=["present","absent"],bF={present:"Han venido",absent:"Faltan"},kF={present:"border border-emerald-500/60 bg-emerald-500/15 text-emerald-100 shadow shadow-emerald-500/15",absent:"border border-rose-500/60 bg-rose-500/10 text-rose-100 shadow shadow-rose-500/10"},SF="group inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-400/30 sm:text-sm",EF="border-emerald-500/60 bg-emerald-500/15 text-emerald-100 shadow-sm shadow-emerald-500/20 hover:border-emerald-400 hover:bg-emerald-500/20",_F="border-white/15 bg-white/5 text-white/60 hover:border-white/40 hover:text-white",CF="flex h-6 w-6 items-center justify-center rounded-full border text-[12px] transition sm:h-7 sm:w-7",jF="border-emerald-400 bg-emerald-400/20 text-emerald-100 shadow shadow-emerald-500/25",NF="border-white/25 text-white/40 group-hover:border-white/50 group-hover:text-white/80",TF=[];function IF(e){return tt(e).locale("es").format("dddd, D [de] MMMM")}function PF(e){return tt(e).format("MMMM YYYY")}function Q0({mode:e,onChange:t}){return m.jsxs("div",{className:"flex items-center gap-2 rounded-full border border-white/10 bg-white/5 p-1",children:[m.jsx("button",{type:"button",className:ze("rounded-full px-4 py-2 text-sm font-semibold transition",e==="view"?"bg-white text-slate-900":"text-white/70 hover:text-white"),onClick:()=>{e!=="view"&&t("view")},children:"Vista"}),m.jsx("button",{type:"button",className:ze("rounded-full px-4 py-2 text-sm font-semibold transition",e==="edit"?"bg-white text-slate-900":"text-white/70 hover:text-white"),onClick:()=>{e!=="edit"&&t("edit")},children:"Editar"})]})}function AF({session:e,objectives:t,works:n,isActive:r,onSelect:i,onDuplicate:o,onDelete:l}){const u=w.useMemo(()=>new Map(t.map(p=>[p.id,p])),[t]),c=w.useMemo(()=>new Map(n.map(p=>[p.id,p])),[n]),f=w.useMemo(()=>{const p=e.workItems[0];if(!p)return;const y=c.get(p.workId);if(y)return u.get(y.objectiveId)},[e.workItems,c,u]),h=e.workItems.reduce((p,y)=>{const v=c.get(y.workId);return p+(y.customDurationMinutes??(v==null?void 0:v.estimatedMinutes)??0)},0);return m.jsxs("button",{type:"button",onClick:i,className:ze("group relative flex flex-col gap-3 rounded-3xl border border-white/10 bg-white/5 p-5 text-left transition hover:border-sky-400/50 hover:shadow-lg hover:shadow-sky-500/10",r&&"ring-2 ring-sky-400/70"),children:[f?m.jsx("div",{className:"absolute inset-0 -z-[1] rounded-3xl opacity-20 blur-2xl transition group-hover:opacity-40",style:{backgroundColor:f.colorHex}}):null,m.jsxs("div",{className:"flex items-start justify-between gap-2",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-lg font-semibold text-white",children:e.title||"Sesin sin ttulo"}),m.jsxs("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:[e.workItems.length," trabajos  ",h," min"]})]}),m.jsx(Bi,{objective:f,size:"sm"})]}),m.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-white/60",children:[e.workItems.slice(0,3).map(p=>{const y=c.get(p.workId),v=((y==null?void 0:y.subtitle)??"").trim();return m.jsx("span",{className:"rounded-full border border-white/10 px-3 py-1",children:v?`${(y==null?void 0:y.name)??"Trabajo"}  ${v}`:(y==null?void 0:y.name)??"Trabajo"},p.id)}),e.workItems.length>3?m.jsxs("span",{className:"rounded-full border border-white/10 px-3 py-1",children:["+",e.workItems.length-3]}):null]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(Bi,{objective:f,size:"sm"}),m.jsxs("div",{className:"ml-auto flex gap-2",children:[m.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),o()},className:"btn-secondary px-3 py-1 text-xs",children:"Duplicar"}),m.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),l()},className:"inline-flex items-center justify-center rounded-full border border-rose-500/40 px-3 py-1 text-xs font-semibold text-rose-300 transition hover:border-rose-400 hover:text-rose-200",children:"Eliminar"})]})]})]})}function RF(){const e=Ce(F=>F.sessions),t=Ce(F=>F.plans),n=Ce(F=>F.works),r=Ce(F=>F.objectives),i=Ce(F=>F.assistants),o=Ce(F=>F.addSession),l=Ce(F=>F.duplicateSession),u=Ce(F=>F.deleteSession),c=Ce(F=>F.setAttendanceActualStatus),f=Ce(F=>F.toggleSessionWorkCompletion),[h,p]=Oo(),y=(h.get("plan")??"").trim(),v=h.get("session")??void 0,S=h.get("mode")==="edit"?"edit":"view",k=w.useMemo(()=>t.filter(F=>F.kind==="class"&&F.enabled),[t]),E=w.useMemo(()=>k.length===0?void 0:k.find(L=>L.id===y)??k[0],[k,y]),C=(E==null?void 0:E.id)??"classes";w.useEffect(()=>{if(!E||y===E.id)return;const F=new URLSearchParams(h);F.set("plan",E.id),p(F,{replace:!0})},[E,y,h,p]);const _=w.useMemo(()=>e.filter(F=>F.kind==="class"&&(F.planId??"classes")===C),[e,C]),[j,I]=w.useState(()=>S==="edit"),[M,P]=w.useState(new Set),z=w.useMemo(()=>[..._].sort((F,L)=>tt(F.date).valueOf()-tt(L.date).valueOf()),[_]),ne=tt().format("YYYY-MM-DD"),Z=w.useMemo(()=>z.find(F=>F.date>=ne)??z[z.length-1],[z,ne]),[R,D]=w.useState(()=>v&&_.some(F=>F.id===v)?v:Z==null?void 0:Z.id),H=F=>{const L=new URLSearchParams(h);F==="edit"?L.set("mode","edit"):L.delete("mode"),p(L,{replace:!0})};w.useEffect(()=>{v&&_.some(F=>F.id===v)&&D(v)},[v,_]),w.useEffect(()=>{if(!(R&&_.some(F=>F.id===R))){if(v&&_.some(F=>F.id===v)){D(v);return}D(Z==null?void 0:Z.id)}},[R,v,_,Z]);const W=w.useMemo(()=>R?z.find(F=>F.id===R)??Z:Z,[z,R,Z]),G=w.useMemo(()=>{const F=(W==null?void 0:W.workItems)??[],L=F.length,V=F.filter(se=>se.completed??!1).length,K=L>0?Math.round(V/L*100):0;return{total:L,done:V,percent:K}},[W==null?void 0:W.workItems]),$=F=>{const L=new URLSearchParams(h);F?L.set("session",F):L.delete("session"),p(L,{replace:!0})},Y=F=>{D(F),$(F)},re=(W==null?void 0:W.date)??ne,[O,ee]=w.useState(re),[T,U]=w.useState(tt(re).startOf("month").format("YYYY-MM-DD"));w.useEffect(()=>{W&&(ee(W.date),U(tt(W.date).startOf("month").format("YYYY-MM-DD")))},[W]);const te=w.useMemo(()=>{const F=new Map;return _.forEach(L=>{const V=tt(L.date).format("YYYY-MM-DD"),K=F.get(V)??[];K.push(L),F.set(V,K)}),F.forEach(L=>L.sort((V,K)=>(V.title??"").localeCompare(K.title??"","es"))),F},[_]),A=w.useMemo(()=>te.get(O)??[],[te,O]),we=w.useMemo(()=>yF(tt(T)),[T]),he=w.useMemo(()=>{const F=tt(T);return _.filter(L=>{const V=tt(L.date);return V.year()===F.year()&&V.month()===F.month()}).sort((L,V)=>tt(L.date).valueOf()-tt(V.date).valueOf())},[_,T]),me=w.useMemo(()=>{const F=new Map;return he.forEach(L=>{const V=tt(L.date).format("YYYY-MM-DD"),K=F.get(V)??[];K.push(L),F.set(V,K)}),Array.from(F.entries()).sort((L,V)=>tt(L[0]).valueOf()-tt(V[0]).valueOf()).map(([L,V])=>({date:L,sessions:V.slice().sort((K,se)=>(K.title??"").localeCompare(se.title??"","es"))}))},[he]),de=F=>{ee(F),U(tt(F).startOf("month").format("YYYY-MM-DD"));const L=te.get(F)??[];L.length>0?Y(L[0].id):Y(void 0)},Ne=()=>{const F=o({date:O,planId:C,title:"Nueva sesin",description:"",notes:""});Y(F.id)},Ae=F=>{const L=l(F,O);L&&Y(L.id)},Ie=F=>{u(F),R===F&&Y(void 0)},X=F=>{const L=tt(T).add(F,"month");U(L.format("YYYY-MM-DD")),ee(V=>{const K=tt(V);return K.month()===L.month()&&K.year()===L.year()?V:L.startOf("month").format("YYYY-MM-DD")})},je=w.useMemo(()=>new Map(r.map(F=>[F.id,F])),[r]),De=w.useMemo(()=>new Map(n.map(F=>[F.id,F])),[n]),Ye=z.length===0,Ze=w.useMemo(()=>i.filter(F=>F.active).slice().sort((F,L)=>F.name.localeCompare(L.name,"es",{sensitivity:"base"})),[i]),ft=(W==null?void 0:W.attendance)??TF,Pt=w.useMemo(()=>{const F=new Map;ft.forEach(K=>{F.set(K.assistantId,K)});let L=0;Ze.forEach(K=>{var se;((se=F.get(K.id))==null?void 0:se.actualStatus)==="present"&&(L+=1)});const V={present:L,absent:Math.max(Ze.length-L,0)};return{map:F,summary:V}},[ft,Ze]),en=Pt.map,J=Pt.summary,ce=w.useMemo(()=>bc(W==null?void 0:W.startTime,"18:30"),[W==null?void 0:W.startTime]),ge=w.useMemo(()=>{if(!W)return new Map;let F=0;const L=new Map;return W.workItems.forEach(V=>{const K=De.get(V.workId),se=V.customDurationMinutes??(K==null?void 0:K.estimatedMinutes)??0,fe=Np(ce+F);L.set(V.id,{startLabel:fe,duration:se}),F+=se}),L},[W,De,ce]),Pe=W?z.findIndex(F=>F.id===W.id):-1,ke=Pe>0,ue=Pe>=0&&Pe<z.length-1,Te=()=>{ke&&Y(z[Pe-1].id)},ae=()=>{ue&&Y(z[Pe+1].id)},pe=F=>{const L=F.target.value;if(!L)return;de(L);const V=te.get(L);V&&V.length>0&&Y(V[0].id)},Re=F=>{P(L=>{const V=new Set(L);return V.has(F)?V.delete(F):V.add(F),V})},He=(F,L)=>{W&&c(W.id,F,L)},ve=j?m.jsxs("section",{className:"glass-panel space-y-6 p-6",children:[m.jsxs("header",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:"Calendario"}),m.jsx("h2",{className:"text-xl font-semibold text-white",children:PF(T)})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>X(-1),children:" Mes anterior"}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>X(1),children:"Mes siguiente "})]})]}),m.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.3fr_1.7fr]",children:[m.jsxs("section",{className:"space-y-4",children:[m.jsx("div",{className:"grid grid-cols-7 gap-2 text-center text-xs font-semibold uppercase tracking-wide text-white/50",children:["L","M","X","J","V","S","D"].map(F=>m.jsx("div",{className:"rounded-full bg-white/5 py-2",children:F},F))}),m.jsx("div",{className:"grid grid-cols-7 gap-2",children:we.flat().map(F=>{const L=F.format("YYYY-MM-DD"),V=te.get(L)??[],K=F.month()===tt(T).month(),se=Uu(L,ne),fe=Uu(L,O);return m.jsxs("button",{type:"button",onClick:()=>de(L),className:ze("relative flex h-20 flex-col items-center justify-between rounded-2xl border p-2 text-sm transition",fe?"border-sky-400/60 bg-sky-500/20 text-white shadow-lg shadow-sky-500/20":"border-white/10 bg-white/5 text-white/70 hover:border-white/30",!K&&"text-white/30"),children:[m.jsx("span",{className:ze("flex h-8 w-8 items-center justify-center rounded-full text-base font-semibold",se?"bg-white text-slate-900":""),children:F.format("D")}),m.jsxs("div",{className:"flex w-full flex-wrap justify-center gap-1",children:[V.slice(0,3).map(Se=>{const Oe=Se.workItems[0],ot=Oe?n.find(ht=>ht.id===Oe.workId):void 0,Be=ot?r.find(ht=>ht.id===ot.objectiveId):void 0;return m.jsx("span",{className:"h-2 w-6 rounded-full",style:{backgroundColor:(Be==null?void 0:Be.colorHex)??"rgba(255,255,255,0.4)"}},Se.id)}),V.length>3?m.jsx("span",{className:"h-2 w-2 rounded-full border border-white/40"}):null]})]},L)})})]}),m.jsxs("section",{className:"space-y-4",children:[m.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:"Sesiones en"}),m.jsx("h3",{className:"text-2xl font-semibold text-white",children:tt(O).format("dddd, D [de] MMMM")})]}),m.jsx("div",{className:"flex gap-3",children:m.jsx("button",{type:"button",onClick:Ne,className:"btn-primary",children:"+ Nueva sesin"})})]}),m.jsx("div",{className:"space-y-3",children:A.length===0?m.jsx("div",{className:"rounded-3xl border border-dashed border-white/15 p-10 text-center text-white/50",children:"An no hay sesiones planificadas este da. Crea una con el botn superior."}):A.map(F=>m.jsx(AF,{session:F,objectives:r,works:n,isActive:F.id===(W==null?void 0:W.id),onSelect:()=>Y(F.id),onDuplicate:()=>Ae(F.id),onDelete:()=>Ie(F.id)},F.id))}),me.length>0?m.jsxs("details",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[m.jsxs("summary",{className:"cursor-pointer text-sm font-semibold text-white/80",children:["Ver sesiones del mes (",he.length,")"]}),m.jsx("div",{className:"custom-scrollbar mt-3 max-h-[22rem] space-y-3 overflow-y-auto pr-1",children:me.map(({date:F,sessions:L})=>{const V=L.length===1?"1 sesin":`${L.length} sesiones`;return m.jsxs("div",{role:"button",tabIndex:0,onClick:()=>de(F),onKeyDown:K=>{(K.key==="Enter"||K.key===" ")&&(K.preventDefault(),de(F))},className:ze("cursor-pointer rounded-2xl border border-white/10 bg-white/5 p-3 text-sm transition hover:border-white/40 hover:bg-white/10",Uu(F,O)&&"border-sky-400/50 bg-sky-500/10 shadow shadow-sky-500/10"),children:[m.jsxs("p",{className:"flex flex-wrap items-center gap-2 text-xs uppercase tracking-[0.3em] text-white/40",children:[m.jsx("span",{children:tt(F).format("ddd  D MMM")}),m.jsx("span",{className:"rounded-full border border-white/15 px-2 py-0.5 text-[9px] font-semibold tracking-[0.2em] text-white/50",children:V})]}),m.jsx("div",{className:"mt-3 space-y-2 text-xs",children:L.map(K=>{const se=(K.description??"").trim(),fe=K.workItems.reduce((Se,Oe)=>{const ot=n.find(Be=>Be.id===Oe.workId);return Se+(Oe.customDurationMinutes??(ot==null?void 0:ot.estimatedMinutes)??0)},0);return m.jsxs("button",{type:"button",onClick:Se=>{Se.stopPropagation(),de(F),Y(K.id)},className:ze("flex w-full flex-col gap-1 rounded-xl border border-white/10 bg-slate-950/60 px-3 py-2 text-left transition hover:border-white/30 hover:text-white",K.id===(W==null?void 0:W.id)&&Uu(F,O)&&"border-sky-400/60 text-white"),children:[m.jsxs("div",{className:"flex w-full items-center justify-between gap-3",children:[m.jsx("span",{className:"truncate font-medium",children:K.title||"Sesin sin ttulo"}),m.jsxs("span",{className:"text-[11px] uppercase tracking-wide text-white/40",children:[K.workItems.length,"  ",fe," min"]})]}),se?m.jsx("p",{className:"text-[11px] leading-relaxed text-white/60",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:se}):null]},K.id)})})]},F)})})]}):null]})]})]}):null;return m.jsxs("div",{className:"space-y-6",children:[Ye||!W?m.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-end",children:[m.jsx(Q0,{mode:S,onChange:H}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>I(F=>!F),children:j?"Ocultar calendario":"Abrir calendario"})]}):null,ve,Ye?m.jsxs("section",{className:"glass-panel flex flex-col items-center justify-center gap-5 p-4 text-center sm:gap-6 sm:p-10",children:[m.jsx("div",{className:"grid h-28 w-28 place-items-center rounded-full bg-gradient-to-br from-sky-500/30 to-purple-500/30 shadow-lg shadow-sky-500/20 sm:h-32 sm:w-32",children:m.jsx("svg",{width:"52",height:"52",viewBox:"0 0 24 24",fill:"none",className:"text-white/80 sm:h-14 sm:w-14",children:m.jsx("path",{d:"M6 3v2M18 3v2M3.5 10h17M5 7h14a2 2 0 0 1 2 2v9a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3V9a2 2 0 0 1 2-2Z",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})})}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("p",{className:"text-lg font-semibold text-white sm:text-2xl",children:"An no hay sesiones"}),m.jsx("p",{className:"mx-auto max-w-md text-sm text-white/60 sm:text-base",children:"Crea tu primera sesin en el calendario y empieza a construir tu plan reutilizable."})]}),m.jsx("button",{type:"button",className:"btn-primary",onClick:()=>I(!0),children:"Abrir calendario"})]}):W?m.jsxs("section",{className:"glass-panel space-y-4 p-3 sm:space-y-6 sm:p-6 lg:p-8",children:[m.jsxs("header",{className:"space-y-3 sm:flex sm:items-start sm:justify-between sm:gap-6 sm:space-y-0",children:[m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs("div",{className:"flex items-center gap-2 text-xs uppercase tracking-[0.3em] text-white/40",children:[m.jsx("span",{className:"sm:hidden",children:"Sesin"}),m.jsx("span",{className:"hidden sm:inline",children:"Fecha"})]}),m.jsx("h2",{className:"font-display text-2xl font-semibold text-white sm:text-3xl",children:IF(W.date)}),m.jsx("p",{className:"text-sm font-medium text-white/80 sm:text-lg",children:W.title})]}),m.jsxs("div",{className:"flex flex-col gap-2.5 rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-sm text-white/70 sm:w-auto",children:[m.jsxs("div",{className:"flex items-center justify-between gap-4",children:[m.jsx("p",{className:"font-semibold text-white",children:"Duracin estimada"}),m.jsxs("span",{className:"rounded-full bg-white/10 px-3 py-1 text-xs text-white/80",children:[W.workItems.map(F=>{const L=De.get(F.workId);return F.customDurationMinutes??(L==null?void 0:L.estimatedMinutes)??0}).reduce((F,L)=>F+L,0)||0," ","min"]})]}),m.jsxs("div",{children:[m.jsxs("p",{className:"mt-1 text-xs text-white/60",children:["Progreso: ",G.done,"/",G.total,"  ",G.percent,"%"]}),m.jsx("div",{className:"mt-2 h-2 w-full overflow-hidden rounded-full border border-white/10 bg-slate-950/50",children:m.jsx("div",{className:"h-full rounded-full bg-white/25",style:{width:`${Math.min(Math.max(G.percent,0),100)}%`}})})]}),m.jsxs("div",{className:"flex flex-col gap-2 sm:items-end",children:[m.jsx("label",{className:"text-[11px] uppercase tracking-wide text-white/40 sm:text-xs",children:"Ir a fecha"}),m.jsx("input",{type:"date",className:"input-field w-full sm:w-auto",value:W.date??ne,onChange:pe})]})]})]}),m.jsxs("div",{className:"flex flex-col gap-2.5 sm:flex-row sm:flex-wrap sm:items-center sm:justify-between",children:[m.jsxs("div",{className:"flex flex-wrap gap-2",children:[m.jsx("button",{type:"button",onClick:Te,disabled:!ke,className:"btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold disabled:opacity-40 sm:h-10 sm:text-sm",children:" Anterior"}),m.jsx("button",{type:"button",onClick:ae,disabled:!ue,className:"btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold disabled:opacity-40 sm:h-10 sm:text-sm",children:"Siguiente "})]}),m.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[m.jsx(Q0,{mode:S,onChange:H}),m.jsx("button",{type:"button",className:"btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold sm:h-10 sm:text-sm",onClick:()=>I(F=>!F),children:j?"Ocultar calendario":"Abrir calendario"})]})]}),S==="edit"?m.jsx("div",{className:"rounded-2xl border border-white/10 bg-slate-950/40 p-3 sm:p-4",children:m.jsx(Nm,{session:W,works:n,objectives:r,assistants:i,onDateChange:F=>{ee(F),U(tt(F).startOf("month").format("YYYY-MM-DD"))}})}):m.jsxs(m.Fragment,{children:[W.description&&m.jsx("div",{className:"rounded-2xl border border-white/5 bg-white/5 p-3 sm:p-4",children:m.jsx(Ss,{content:W.description})}),m.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[m.jsx("h3",{className:"text-sm uppercase tracking-[0.3em] text-white/40",children:"Trabajos"}),m.jsx("div",{className:"space-y-3 sm:space-y-4",children:W.workItems.map(F=>{const L=De.get(F.workId),V=L?je.get(L.objectiveId):void 0,K=M.has(F.id),se=ge.get(F.id),fe=(se==null?void 0:se.startLabel)??Np(ce),Se=(se==null?void 0:se.duration)??F.customDurationMinutes??(L==null?void 0:L.estimatedMinutes)??0,Oe=(F.focusLabel??"").trim(),ot=Oe.length>0,Be=F.customDescriptionMarkdown??(L==null?void 0:L.descriptionMarkdown)??"",ht=Be.trim().length>0,lt=((L==null?void 0:L.videoUrls)??[]).map(nt=>nt.trim()).filter(Boolean),Ge=lt.length>0,$e=ht||Ge,Ue=((L==null?void 0:L.subtitle)??"").trim();return m.jsxs("article",{className:"flex flex-col gap-2.5 rounded-3xl border border-white/10 bg-white/5 p-2.5 shadow shadow-black/20 sm:gap-3 sm:p-4",style:V?{background:`linear-gradient(120deg, ${V.colorHex}1a, rgba(15,23,42,0.8))`}:void 0,children:[m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("label",{className:"mt-1 flex items-center gap-3 text-left",children:m.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded-full border-2 border-white/30 bg-transparent text-sky-400 transition focus:ring-sky-400",checked:F.completed??!1,onChange:nt=>f(W.id,F.id,nt.target.checked)})}),m.jsxs("div",{className:"flex-1 space-y-2",children:[m.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[m.jsxs("div",{children:[m.jsxs("p",{className:"text-lg font-semibold text-white",children:[(L==null?void 0:L.name)??"Trabajo eliminado",ot?m.jsxs("span",{className:"ml-2 text-sky-300",children:[" ",Oe]}):null]}),Ue?m.jsx("p",{className:"text-sm text-white/70",children:Ue}):null,m.jsxs("p",{className:"text-sm text-white/60",children:[m.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:fe}),m.jsx("span",{className:"mx-2 text-white/30",children:""}),m.jsxs("span",{children:[Se," min"]})]})]}),m.jsx(Bi,{objective:V,size:"sm"})]}),($e||Ge)&&m.jsxs("div",{className:"flex items-center gap-3 text-xs text-white/50",children:[$e?m.jsxs("button",{type:"button",onClick:()=>Re(F.id),className:"inline-flex items-center gap-2 rounded-full border border-white/15 px-3 py-1 text-xs font-semibold text-white/70 transition hover:border-white/30 hover:text-white",children:[m.jsx("span",{className:ze("transition-transform",K?"rotate-90":"rotate-0"),children:""}),K?"Ocultar detalles":"Ver detalles"]}):null,Ge?m.jsxs("span",{children:[lt.length," vdeo",lt.length>1?"s":""]}):null]})]}),m.jsx("div",{className:ze("mt-1 flex h-10 w-10 items-center justify-center rounded-full border border-white/10 text-xs font-semibold uppercase text-white/60",F.completed?"bg-white/20 text-white":""),children:F.order+1})]}),$e&&K&&m.jsxs("div",{className:"space-y-3 rounded-2xl border border-white/10 bg-slate-950/60 p-4",children:[ht?m.jsx(Ss,{content:Be,enableWorkLinks:!0}):null,Ge?m.jsx("div",{className:"space-y-3",children:lt.map((nt,bt)=>m.jsxs("div",{className:"space-y-2",children:[m.jsx(Yc,{url:nt,title:`${(L==null?void 0:L.name)??"Trabajo"} vdeo ${bt+1}`}),m.jsx("a",{href:nt,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-full border border-white/15 bg-white/5 px-3 py-1 text-xs font-medium text-white/80 transition hover:border-white/30 hover:text-white",children:"Abrir en YouTube"})]},`${F.id}-video-${bt}`))}):null]})]},F.id)})})]})]}),S==="view"?i.length===0?m.jsxs("div",{className:"rounded-2xl border border-dashed border-white/15 bg-white/5 p-3 text-xs text-white/70 sm:text-sm sm:p-4",children:[m.jsx("p",{className:"font-semibold text-white",children:"Quines participan?"}),m.jsx("p",{className:"mt-1",children:"Crea tu lista de asistentes para poder registrar quin ha venido a clase en tiempo real."}),m.jsx($i,{to:"/assistants",className:"btn-secondary mt-3 h-8 rounded-2xl px-3 text-xs",children:"Gestionar asistentes"})]}):Ze.length===0?m.jsxs("div",{className:"rounded-2xl border border-dashed border-white/15 bg-white/5 p-3 text-xs text-white/70 sm:text-sm sm:p-4",children:[m.jsx("p",{className:"font-semibold text-white",children:"Todos los asistentes estn inactivos."}),m.jsx("p",{className:"mt-1",children:"Activa al menos uno desde la seccin de asistentes para poder marcar su asistencia."}),m.jsx($i,{to:"/assistants",className:"btn-secondary mt-3 h-8 rounded-2xl px-3 text-xs",children:"Ir a asistentes"})]}):m.jsxs("div",{className:"space-y-3 rounded-2xl border border-white/10 bg-slate-950/60 p-3 sm:space-y-4 sm:p-5",children:[m.jsxs("div",{className:"flex flex-col gap-2.5 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:"Asistencia en vivo"}),m.jsx("p",{className:"text-xs text-white/50 sm:text-sm",children:"Marca quin est presente en la sesin actual."})]}),m.jsx("div",{className:"flex flex-wrap gap-2",children:wF.map(F=>m.jsxs("span",{className:ze("inline-flex items-center gap-2 rounded-full px-2.5 py-0.5 text-[11px] font-semibold sm:px-3 sm:py-1 sm:text-xs",kF[F]),children:[J[F]," ",bF[F]]},F))})]}),m.jsx("div",{className:"space-y-2",children:Ze.map(F=>{const L=en.get(F.id),V=(L==null?void 0:L.status)??"pending",K=(L==null?void 0:L.actualStatus)==="present",se=()=>He(F.id,K?"absent":"present");return m.jsx("article",{className:"rounded-2xl border border-white/10 bg-white/5 p-2.5 sm:p-4",children:m.jsxs("div",{className:"flex flex-col gap-2.5 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-semibold text-white",children:F.name}),m.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2 text-[11px] text-white/50 sm:text-xs",children:[m.jsx("span",{className:"uppercase tracking-wide text-white/40",children:"Previsin"}),m.jsx("span",{className:ze("inline-flex items-center gap-2 rounded-full px-2 py-0.5 font-semibold",xF[V]),children:vF[V]}),m.jsx("span",{className:"hidden text-white/30 sm:inline",children:""}),m.jsx("span",{className:"uppercase tracking-wide text-white/40",children:"Asistencia"}),m.jsx("span",{className:ze("font-semibold",K?"text-emerald-200":"text-white/60"),children:K?"Presente":"No asisti"})]})]}),m.jsxs("div",{className:"flex flex-col items-end gap-1 text-right sm:flex-row sm:items-center sm:gap-3",children:[m.jsxs("button",{type:"button",onClick:se,"aria-pressed":K,"aria-label":`${K?"Desmarcar asistencia de":"Marcar asistencia de"} ${F.name}`,title:K?"Desmarcar asistencia":"Marcar como presente",className:ze(SF,K?EF:_F),children:[m.jsx("span",{className:ze(CF,K?jF:NF),children:K?m.jsx("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 sm:h-4 sm:w-4","aria-hidden":"true",children:m.jsx("path",{d:"M4 8.5 6.5 11l5-6",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}):m.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-white/30 transition group-hover:bg-white/60"})}),m.jsx("span",{children:K?"Ha asistido":"Marcar asistencia"})]}),m.jsx("span",{className:ze("text-[10px] font-medium uppercase tracking-[0.25em] sm:text-[11px]",K?"text-emerald-200":"text-white/40"),children:K?"PRESENTE":"AUSENTE"})]})]})},F.id)})})]}):null]}):m.jsx("div",{className:"glass-panel p-10 text-center text-white/60",children:"Selecciona una sesin desde el calendario."})]})}tt.locale("es");const Qu="personal-exclude",jh={ok:"OK",doubt:"Dudosa",fail:"Fallo"},X0={ok:"border-emerald-500/50 bg-emerald-500/15 text-emerald-100 hover:border-emerald-400",doubt:"border-amber-400/40 bg-amber-500/10 text-amber-200 hover:border-amber-300",fail:"border-rose-500/50 bg-rose-500/10 text-rose-200 hover:border-rose-400"},OF={ok:"border-emerald-500/25 bg-emerald-500/10",doubt:"border-amber-400/25 bg-amber-500/10",fail:"border-rose-500/25 bg-rose-500/10"};function Qc(e){return Array.from(new Set((e??[]).map(t=>t.trim().toLowerCase()).filter(t=>t.length>0)))}function vo(e,t){const n=Qc(e.tags),r=e.nodeType??"work";return!(t.byWorkIds&&t.byWorkIds.length>0&&!t.byWorkIds.includes(e.id)||t.byNodeTypes&&t.byNodeTypes.length>0&&!t.byNodeTypes.includes(r)||t.byTags&&t.byTags.length>0&&!t.byTags.map(o=>o.trim().toLowerCase()).filter(Boolean).every(o=>n.includes(o)))}function V1(e,t){const n=e.nodeType??"work",r=t.targetsDays[n]??t.targetsDays.work??7,i=Qc(e.tags),o=(t.overrides??[]).reduce((u,c)=>{var p,y;const f=((y=(p=c.match)==null?void 0:p.tagsAny)==null?void 0:y.map(v=>v.trim().toLowerCase()).filter(Boolean))??[];return f.length===0?u:f.some(v=>i.includes(v))?u*(c.multiplier||1):u},1);return Math.max(1,Math.round(r*o))}function MF(e){return(e.nodeType??"").trim().toLowerCase()!=="style"}function Ra(e,t){const n=typeof e.estimatedMinutes=="number"?e.estimatedMinutes:0;if(Number.isFinite(n)&&n>0)return n;const r=(e.nodeType??"work").trim().toLowerCase()||"work",i=t.defaultMinutesByNodeType[r]??t.defaultMinutesByNodeType.work??3;return Math.max(.25,Number(i)||3)}function q1(e){var h,p,y;const t=e.groups??[];if(t.length>0)return[...t].sort((v,S)=>(v.order??0)-(S.order??0));const n=Math.max(0,Number((h=e.template)==null?void 0:h.focusMinutes)||18),r=Math.max(0,Number((p=e.template)==null?void 0:p.rouletteMinutes)||10),i=Math.max(0,Number((y=e.template)==null?void 0:y.recapMinutes)||0),o=e.focusSelectors??[],l=e.rouletteSelectors??[],u=o.length>0?o:[{byNodeTypes:["segment","form"]}],c=l.length>0?l:[{byNodeTypes:["technique"]},{byTags:["roulette"]}],f=[{id:"formas",name:"Formas",enabled:!0,order:1,type:"work",limitMode:"minutes",minutesBudget:n,strategy:"overdue",hierarchyRule:"prefer_leaves",include:u,exclude:[]},{id:"tecnicas",name:"Tcnicas",enabled:!0,order:2,type:"work",limitMode:"minutes",minutesBudget:r,strategy:"weighted",hierarchyRule:"allow_all",include:c,exclude:[]}];return i>0&&f.push({id:"recap",name:"Recap",enabled:!0,order:99,type:"note",limitMode:"minutes",minutesBudget:i}),f}function DF({mode:e,onChange:t}){return m.jsxs("div",{className:"flex items-center gap-2 rounded-full border border-white/10 bg-white/5 p-1",children:[m.jsx("button",{type:"button",className:ze("rounded-full px-4 py-2 text-sm font-semibold transition",e==="view"?"bg-white text-slate-900":"text-white/70 hover:text-white"),onClick:()=>{e!=="view"&&t("view")},children:"Vista"}),m.jsx("button",{type:"button",className:ze("rounded-full px-4 py-2 text-sm font-semibold transition",e==="edit"?"bg-white text-slate-900":"text-white/70 hover:text-white"),onClick:()=>{e!=="edit"&&t("edit")},children:"Editar"})]})}function LF(e){let t=2166136261;for(let n=0;n<e.length;n+=1)t^=e.charCodeAt(n),t=Math.imul(t,16777619);return t>>>0}function $F(e){let t=e>>>0;return()=>{t=t+1831565813>>>0;let n=Math.imul(t^t>>>15,1|t);return n^=n+Math.imul(n^n>>>7,61|n),((n^n>>>14)>>>0)/4294967296}}function FF(e,t,n){const r=$F(LF(n));return e.map(i=>{const o=Math.max(1e-4,t(i)),l=Math.max(1e-9,r()),u=-Math.log(l)/o;return{item:i,score:u}}).sort((i,o)=>i.score-o.score).map(({item:i})=>i)}function zF(e){const t=new Map;return e.forEach(n=>{n.workItems.forEach(r=>{if(!((r.completed??!1)||typeof r.result<"u"))return;const o=t.get(r.workId);(!o||tt(n.date).isAfter(o.date))&&t.set(r.workId,{date:n.date,result:r.result,effort:r.effort})})}),t}function BF(e){const{works:t,personalSessions:n,cadence:r,today:i}=e,o=zF(n);return t.filter(l=>MF(l)).filter(l=>!Qc(l.tags).includes(Qu)).map(l=>{const u=o.get(l.id),c=V1(l,r);if(!u)return{work:l,targetDays:c,overdueScore:1e4};const f=Math.max(tt(i).diff(tt(u.date),"day"),0),h=Math.max(f-c,0);return{work:l,targetDays:c,lastSeen:u.date,daysSince:f,overdueScore:h,lastResult:u.result}}).sort((l,u)=>{if(u.overdueScore!==l.overdueScore)return u.overdueScore-l.overdueScore;const c=l.daysSince??1e4,f=u.daysSince??1e4;return f!==c?f-c:l.work.name.localeCompare(u.work.name,"es",{sensitivity:"base"})})}function UF(e){return e?tt(e).format("D MMM YYYY"):"Nunca"}function WF(e){const{dueList:t,plan:n,today:r,childCountByWorkId:i}=e,o=n.limitMode==="count"||n.limitMode==="both",l=n.limitMode==="minutes"||n.limitMode==="both",u=o?Math.max(1,Math.round(n.maxItems||12)):Number.POSITIVE_INFINITY,c=l?Math.max(0,Number(n.minutesBudget)||0):Number.POSITIVE_INFINITY,f=new Set([].filter(Z=>(Z.completed??!1)||typeof Z.result<"u").map(Z=>Z.workId)),h=t.filter(Z=>!f.has(Z.work.id)),p=tt(r).day(),y=q1(n).filter(Z=>Z.enabled).filter(Z=>{const R=Z.daysOfWeek??[];return R.length===0||R.includes(p)}).sort((Z,R)=>(Z.order??0)-(R.order??0)),v=y.filter(Z=>(Z.type??"work")==="note").reduce((Z,R)=>R.limitMode==="minutes"||R.limitMode==="both"?Z+Math.max(0,Number(R.minutesBudget)||0):Z,0),S=Number.isFinite(c)?Math.max(0,c-v):Number.POSITIVE_INFINITY,k=`kungfu-${r}`,E=Z=>{const R=Z.overdueScore>=1e4?1e3:Math.max(0,Z.overdueScore+1);return Z.lastResult==="fail"?R*1.6:Z.lastResult==="doubt"?R*1.25:R},C=Z=>Ra(Z.work,n),_=Z=>{const R=(Z.nodeType??"work").trim().toLowerCase()||"work";return{segment:30,drill:22,form:20,work:10,application:0,technique:0,link:0,style:-100}[R]??5},j=Z=>[...Z].sort((R,D)=>{if(D.overdueScore!==R.overdueScore)return D.overdueScore-R.overdueScore;const H=R.daysSince??1e4,W=D.daysSince??1e4;if(W!==H)return W-H;const G=_(D.work)-_(R.work);return G!==0?G:R.work.name.localeCompare(D.work.name,"es",{sensitivity:"base"})}),I=new Set,M=[];let P=0,z=0;for(const Z of y){if((Z.type??"work")==="note"){M.push({group:Z,items:[],plannedMinutes:0});continue}const D=Z.include??[],H=Z.exclude??[];let W=h.filter(me=>I.has(me.work.id)||!(D.length===0?!0:D.some(Ae=>vo(me.work,Ae)))?!1:!H.some(Ae=>vo(me.work,Ae)));if((Z.hierarchyRule??"allow_all")==="prefer_leaves"){const me=new Set(W.map(de=>de.work.parentWorkId).filter(Boolean));W=W.filter(de=>me.has(de.work.id)?(i.get(de.work.id)??0)===0:!0)}const Y=(Z.strategy??"overdue")==="weighted"?FF(W,E,`${k}-${Z.id}`):j(W),re=Z.limitMode??"minutes",O=re==="count"||re==="both",ee=re==="minutes"||re==="both",T=Number(Z.maxItems),U=O&&Number.isFinite(T)&&T>0?Math.round(T):Number.POSITIVE_INFINITY,te=Number(Z.minutesBudget),A=ee&&Number.isFinite(te)?Math.max(0,te):Number.POSITIVE_INFINITY,we=[];let he=0;for(const me of Y){if(z>=u||we.length>=U)break;const de=C(me);if(!(he+de>A)&&!(P+de>S)&&(we.push(me),he+=de,P+=de,z+=1,I.add(me.work.id),l&&P>=S))break}if(M.push({group:Z,items:we,plannedMinutes:Math.round(he*10)/10}),z>=u||l&&P>=S)break}const ne=Math.round((P+v)*10)/10;return{groups:M,plannedMinutes:{work:Math.round(P*10)/10,reserved:Math.round(v*10)/10,total:ne},totalItems:z}}function HF(){const e=Ce(L=>L.works),t=Ce(L=>L.sessions),n=Ce(L=>L.plans),r=Ce(L=>L.objectives),i=Ce(L=>L.assistants),o=Ce(L=>L.kungfuCadence),l=Ce(L=>L.kungfuTodayPlan),u=Ce(L=>L.updateWork),{user:c}=Ns(),f=Ce(L=>L.addSession),h=Ce(L=>L.addWorkToSession),p=Ce(L=>L.updateSessionWorkDetails),y=Ce(L=>L.updateSessionWorkItems),v=Ce(L=>L.updateSession),S=Ce(L=>L.removeWorkFromSession),[k,E]=Oo(),C=(k.get("plan")??"").trim(),_=tt().format("YYYY-MM-DD"),j=(k.get("date")??"").trim(),I=tt(j,"YYYY-MM-DD",!0).isValid()?j:_,M=k.get("mode")==="edit"?"edit":"view",P=w.useMemo(()=>n.filter(L=>L.kind==="personal"&&L.enabled),[n]),z=w.useMemo(()=>P.length===0?void 0:P.find(V=>V.id===C)??P[0],[P,C]),ne=(z==null?void 0:z.id)??"personal-kungfu";w.useEffect(()=>{if(!z||C===z.id)return;const L=new URLSearchParams(k);L.set("plan",z.id),E(L,{replace:!0})},[z,C,k,E]),w.useEffect(()=>{if(!!tt(j,"YYYY-MM-DD",!0).isValid())return;const V=new URLSearchParams(k);V.set("date",I),E(V,{replace:!0})},[I,j,k,E]);const Z=(z==null?void 0:z.cadence)??o,R=(z==null?void 0:z.todayPlan)??l,D=w.useMemo(()=>t.filter(L=>L.kind==="personal"&&(L.planId??"personal-kungfu")===ne),[t,ne]),H=w.useMemo(()=>D.find(L=>L.date===I),[D,I]),W=w.useMemo(()=>BF({works:e,personalSessions:D,cadence:Z,today:I}),[e,D,Z,I]),G=w.useMemo(()=>{const L=new Map;return e.forEach(V=>{const K=V.parentWorkId??"";K&&L.set(K,(L.get(K)??0)+1)}),L},[e]),$=w.useMemo(()=>new Map(e.map(L=>[L.id,L])),[e]),Y=w.useMemo(()=>c?{actorId:c.id,actorEmail:c.email??""}:null,[c]),[re,O]=w.useState(null),[ee,T]=w.useState({}),[U,te]=w.useState(null),[A,we]=w.useState(new Set),he=w.useCallback(L=>{const V=(L??I).trim()||I,K=D.find(se=>se.date===V);return K||f({date:V,kind:"personal",planId:ne,title:(z==null?void 0:z.name)??"Entrenamiento personal",description:"",notes:""})},[I,f,D,z==null?void 0:z.name,ne]),me=w.useCallback(L=>{const V=(L??[]).slice().sort((fe,Se)=>(fe.order??0)-(Se.order??0)),K=new Map,se=[];return V.forEach(fe=>{const Se=fe.workId;if(!Se)return;const Oe=K.get(Se);if(!Oe){K.set(Se,{...fe}),se.push(Se);return}const ot={...Oe,customDescriptionMarkdown:Oe.customDescriptionMarkdown??fe.customDescriptionMarkdown,customDurationMinutes:Oe.customDurationMinutes??fe.customDurationMinutes,notes:Oe.notes??fe.notes,focusLabel:Oe.focusLabel??fe.focusLabel,completed:!!(Oe.completed??!1)||!!(fe.completed??!1),result:Oe.result??fe.result,effort:Oe.effort??fe.effort};K.set(Se,ot)}),se.map((fe,Se)=>({...K.get(fe),order:Se}))},[]);w.useEffect(()=>{if(!H)return;const L=H.workItems??[],V=L.reduce((fe,Se)=>{const Oe=Se.workId;return Oe&&fe.set(Oe,(fe.get(Oe)??0)+1),fe},new Map);if(!Array.from(V.values()).some(fe=>fe>1))return;const se=me(L);se.length!==L.length&&y(H.id,se)},[H,y,me]);const de=w.useMemo(()=>{const L=tt(I).day();return q1(R).filter(V=>V.enabled).filter(V=>{const K=V.daysOfWeek??[];return K.length===0||K.includes(L)}).sort((V,K)=>(V.order??0)-(K.order??0))},[R,I]);w.useEffect(()=>{var se;const L={},V=(H==null?void 0:H.notesByGroupId)??void 0;V&&Object.entries(V).forEach(([fe,Se])=>{const Oe=(fe??"").trim();Oe&&(L[Oe]=String(Se??""))});const K=((H==null?void 0:H.notes)??"").toString();if(K.trim().length>0){const fe=((se=de.find(Se=>(Se.type??"work")==="note"))==null?void 0:se.id)??"note";L[fe]||(L[fe]=K)}T(L)},[H==null?void 0:H.notes,H==null?void 0:H.notesByGroupId,de]);const Ne=w.useMemo(()=>{const L=new Map;return de.filter(V=>(V.type??"work")!=="note").forEach((V,K)=>{L.set(V.name,K)}),L},[de]),Ae=w.useCallback(L=>{const V=de.filter(K=>(K.type??"work")!=="note");for(const K of V){const se=K.include??[],fe=K.exclude??[];if(!(!(se.length===0||se.some(ot=>vo(L,ot)))||fe.some(ot=>vo(L,ot))))return K.name}return"Hoy"},[de]),Ie=w.useMemo(()=>new Set(de.filter(L=>(L.type??"work")!=="note").map(L=>L.name).filter(Boolean)),[de]),X=w.useCallback((L,V)=>{const K=(L.focusLabel??"").trim();return K&&Ie.has(K)?K:Ae(V)},[Ie,Ae]),je=w.useCallback(L=>{const V=Ce.getState().sessions.find(se=>se.id===L);if(!V)return null;const K=(V.workItems??[]).map(se=>{const fe=$.get(se.workId);if(!fe)return se;const Se=X(se,fe);return Se===se.focusLabel?se:{...se,focusLabel:Se}});return K.sort((se,fe)=>{const Se=se.focusLabel??"Hoy",Oe=fe.focusLabel??"Hoy",ot=Ne.get(Se)??999,Be=Ne.get(Oe)??999;return ot!==Be?ot-Be:(se.order??0)-(fe.order??0)}),K},[Ne,$,X]),[De,Ye]=w.useState(!1),Ze=w.useCallback(L=>{if(!De&&W.length!==0){Ye(!0);try{const V=H??he(),K=V.workItems??[],se=new Set(K.map($e=>$e.workId));if((R.limitMode==="count"||R.limitMode==="both")&&se.size>=Math.max(1,Math.round(R.maxItems||12))){L!=null&&L.includeDiagnostics&&(O({type:"success",text:"Plan ya est lleno por cantidad. Sube el mximo de tems en Ajustes."}),window.setTimeout(()=>O(null),2500));return}const Se=new Map;K.forEach($e=>{const Ue=$.get($e.workId);if(!Ue)return;const nt=X($e,Ue),bt=de.find(wt=>wt.name===nt),it=(bt==null?void 0:bt.id)??nt,Rt=Se.get(it)??{minutes:0,items:0};Se.set(it,{minutes:Rt.minutes+Ra(Ue,R),items:Rt.items+1})});const Oe=K.reduce(($e,Ue)=>{const nt=$.get(Ue.workId);return nt?$e+Ra(nt,R):$e},0),ot={...R,maxItems:Math.max(0,Math.round((R.maxItems??0)-se.size)),minutesBudget:Math.max(0,Number(R.minutesBudget??0)-Oe),groups:de.map($e=>{const Ue=Se.get($e.id),nt={...$e};return Ue&&(typeof $e.minutesBudget=="number"&&Number.isFinite($e.minutesBudget)&&(nt.minutesBudget=Math.max(0,$e.minutesBudget-Ue.minutes)),typeof $e.maxItems=="number"&&Number.isFinite($e.maxItems)&&(nt.maxItems=Math.max(0,Math.round($e.maxItems-Ue.items)))),nt})},Be=W.filter($e=>!se.has($e.work.id)),ht=WF({dueList:Be,todaySession:void 0,plan:ot,today:I,childCountByWorkId:G});let lt=0;ht.groups.filter($e=>($e.group.type??"work")!=="note").forEach($e=>{$e.items.forEach(Ue=>{h(V.id,{workId:Ue.work.id,focusLabel:$e.group.name,customDurationMinutes:Ra(Ue.work,R)}),lt+=1})});const Ge=je(V.id);if(Ge&&y(V.id,me(Ge)),L!=null&&L.includeDiagnostics)if(lt>0)O({type:"success",text:`Plan actualizado: +${lt} tem${lt===1?"":"s"}.`}),window.setTimeout(()=>O(null),2e3);else{const $e=de.filter(Ue=>(Ue.type??"work")!=="note").map(Ue=>{const nt=Ue.include??[],bt=Ue.exclude??[],it=Be.filter(Kt=>(nt.length===0?!0:nt.some(jn=>vo(Kt.work,jn)))?!bt.some(jn=>vo(Kt.work,jn)):!1),Rt=Ue.limitMode==="minutes"||Ue.limitMode==="both"?Math.max(0,Number(Ue.minutesBudget)||0):void 0,wt=Ue.limitMode==="count"||Ue.limitMode==="both"?Math.max(0,Math.round(Number(Ue.maxItems)||0)):void 0;return[`${Ue.name}: ${it.length} match`,typeof Rt=="number"?`${Rt}m`:null,typeof wt=="number"?`${wt} items`:null].filter(Boolean).join("  ")}).slice(0,3).join(" | ");O({type:"success",text:$e?`No hay nuevos tems para aadir. ${$e}`:"No hay nuevos tems para aadir con los lmites actuales."}),window.setTimeout(()=>O(null),4e3)}}finally{Ye(!1)}}},[De,W,H,he,R,$,de,I,G,h,y,me,je,X]),ft=w.useCallback(()=>{if(De||!window.confirm("Recrear sesin volver a planificar el da seleccionado. Mantendr los tems ya registrados (OK/Dudosa/Fallo) y las notas, pero quitar el resto. Continuar?"))return;const V=H??he(),K=(V.workItems??[]).filter(se=>(se.completed??!1)||typeof se.result<"u").map(se=>{const fe=$.get(se.workId);return fe?{...se,focusLabel:X(se,fe)}:se}).sort((se,fe)=>(se.order??0)-(fe.order??0)).map((se,fe)=>({...se,order:fe}));y(V.id,me(K)),window.setTimeout(()=>Ze({reason:"recreate",includeDiagnostics:!0}),0)},[me,he,Ze,De,X,H,y,$]);w.useEffect(()=>{W.length===0||((H??he()).workItems??[]).some(se=>!!se.focusLabel)||Ze({reason:"initial-seed"})},[W,R,I,G,y,$,de,Ne,Ae,H,he,Ze]);const Pt=(L,V)=>{try{const K=he(),se=K.workItems.find(fe=>fe.workId===L);if(se)p(K.id,se.id,{result:V,completed:!0});else{const fe=h(K.id,{workId:L});if(!fe)throw new Error("No se pudo aadir el trabajo a la sesin.");p(K.id,fe.id,{result:V,completed:!0})}O({type:"success",text:"Registrado."}),window.setTimeout(()=>O(null),1800)}catch(K){const se=K instanceof Error?K.message:"No se pudo registrar.";O({type:"error",text:se}),window.setTimeout(()=>O(null),2500)}},en=H?H.workItems.filter(L=>(L.completed??!1)||typeof L.result<"u").length:0,J=w.useMemo(()=>de.filter(L=>(L.type??"work")==="note"),[de]),ce=w.useMemo(()=>{const L=(H==null?void 0:H.workItems)??[],V=L.length,K=L.filter(Be=>(Be.completed??!1)||typeof Be.result<"u").length,se=J.length,fe=J.filter(Be=>(ee[Be.id]??"").trim().length>0).length,Se=V+se,Oe=K+fe,ot=Se>0?Math.round(Oe/Se*100):0;return{total:Se,done:Oe,percent:ot,totalWorks:V,doneWorks:K,totalNotes:se,doneNotes:fe}},[ee,J,H==null?void 0:H.workItems]),ge=w.useMemo(()=>{const L=new Map,V=new Map;return((H==null?void 0:H.workItems)??[]).slice().sort((se,fe)=>(se.order??0)-(fe.order??0)).forEach(se=>{const fe=W.find($e=>$e.work.id===se.workId),Se=$.get(se.workId);if(!Se)return;const Oe=(se.completed??!1)||typeof se.result<"u",ot={work:Se,targetDays:V1(Se,Z),overdueScore:0,lastSeen:fe==null?void 0:fe.lastSeen,daysSince:fe==null?void 0:fe.daysSince,lastResult:fe==null?void 0:fe.lastResult},Be=fe??ot,ht=X(se,Se),lt=L.get(ht)??[];lt.push(Be),L.set(ht,lt);const Ge=V.get(ht)??{total:0,done:0};Ge.total+=1,Oe&&(Ge.done+=1),V.set(ht,Ge)}),Array.from(L.entries()).map(([se,fe])=>{const Se=V.get(se)??{total:fe.length,done:0};return{label:se,entries:fe,total:Se.total,done:Se.done}}).sort((se,fe)=>{const Se=Ne.get(se.label)??999,Oe=Ne.get(fe.label)??999;return Se!==Oe?Se-Oe:se.label.localeCompare(fe.label,"es",{sensitivity:"base"})})},[H==null?void 0:H.workItems,W,$,Z,Ne,X]),Pe=w.useMemo(()=>{const L=new Map(ge.map(se=>[se.label,se])),V=new Set,K=[];return de.forEach(se=>{if((se.type??"work")==="note"){K.push({kind:"note",group:se});return}const fe=L.get(se.name);fe&&(V.add(fe.label),K.push({kind:"work",...fe}))}),ge.forEach(se=>{V.has(se.label)||K.push({kind:"work",...se})}),K},[de,ge]),ke=L=>{const V=L.work,K=Qc(V.tags),se=K.includes(Qu),fe=K.filter(it=>it!==Qu),Se=(V.canEdit??!1)&&(V.nodeType??"").trim().toLowerCase()!=="style",Oe=U===V.id,ot=A.has(V.id),Be=H==null?void 0:H.workItems.find(it=>it.workId===V.id),ht=Be==null?void 0:Be.result,lt=!!((Be==null?void 0:Be.completed)??!1)||typeof(Be==null?void 0:Be.result)<"u",Ge=(V.descriptionMarkdown??"").trim(),$e=(V.notes??"").trim(),Ue=(V.videoUrls??[]).map(it=>it.trim()).filter(Boolean),nt=Ge.length>0||$e.length>0||Ue.length>0,bt=async()=>{if(!Y){O({type:"error",text:"Inicia sesin para editar trabajos."}),window.setTimeout(()=>O(null),2500);return}if(Se){te(V.id);try{const it=se?fe:Array.from(new Set([...fe,Qu]));await u(V.id,{tags:it},Y),O({type:"success",text:se?"Incluido en el plan personal.":"Excluido del plan personal."}),window.setTimeout(()=>O(null),1800)}catch(it){console.error("No se pudo actualizar el trabajo",it),O({type:"error",text:"No se pudo actualizar el trabajo."}),window.setTimeout(()=>O(null),2500)}finally{te(null)}}};return m.jsxs("article",{className:ze("flex flex-col gap-3 rounded-3xl border p-4 shadow shadow-black/15",ht?OF[ht]:"border-white/10 bg-white/5"),children:[m.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[m.jsxs("div",{className:"space-y-1",children:[m.jsxs("div",{className:"flex items-start gap-3",children:[nt?m.jsx("button",{type:"button",onClick:()=>we(it=>{const Rt=new Set(it);return Rt.has(V.id)?Rt.delete(V.id):Rt.add(V.id),Rt}),className:ze("mt-0.5 inline-flex h-8 w-8 items-center justify-center rounded-full border border-white/15 bg-white/5 text-sm font-semibold text-white/70 transition hover:border-white/30 hover:text-white",ot?"rotate-90 border-white/30 text-white":""),"aria-label":ot?"Ocultar detalles":"Ver detalles",title:ot?"Ocultar detalles":"Ver detalles",children:""}):null,m.jsxs("div",{children:[m.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[m.jsx("p",{className:"text-lg font-semibold text-white",children:V.name}),ht?m.jsx("span",{className:ze("inline-flex items-center rounded-full border px-2 py-0.5 text-[11px] font-semibold",X0[ht]),children:jh[ht]}):null]}),V.subtitle?m.jsx("p",{className:"text-sm text-white/70",children:V.subtitle}):null]})]}),m.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-[11px] uppercase tracking-wide text-white/40",children:[m.jsx("span",{className:"rounded-full border border-white/15 bg-white/5 px-2 py-0.5 text-[10px] font-semibold text-white/70",children:V.nodeType??"work"}),fe.slice(0,6).map(it=>m.jsx("span",{className:"rounded-full border border-white/10 px-2 py-0.5",children:it},it)),fe.length>6?m.jsxs("span",{className:"text-white/50",children:["+",fe.length-6]}):null]})]}),m.jsx("div",{className:"flex flex-col items-start gap-2 sm:items-end",children:m.jsxs("div",{className:"rounded-2xl border border-white/10 bg-slate-950/60 px-4 py-3 text-sm text-white/70",children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:"ltima vez"}),m.jsx("p",{className:"mt-1 font-semibold text-white",children:UF(L.lastSeen)}),m.jsxs("p",{className:"mt-1 text-xs text-white/50",children:["Objetivo: ",L.targetDays," da",L.targetDays===1?"":"s"," "," ",L.overdueScore>=1e4?"Nuevo":`${L.overdueScore} vencido`]})]})})]}),nt&&ot?m.jsxs("div",{className:"space-y-3 rounded-2xl border border-white/10 bg-slate-950/60 p-4",children:[Ge.length>0?m.jsx(Ss,{content:Ge,enableWorkLinks:!0}):null,$e.length>0?m.jsxs("div",{className:"space-y-2",children:[m.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-white/40",children:"Notas"}),m.jsx(Ss,{content:$e,enableWorkLinks:!0})]}):null,Ue.length>0?m.jsxs("div",{className:"space-y-3",children:[m.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-white/40",children:"Vdeos"}),m.jsx("div",{className:"grid gap-4 lg:grid-cols-3",children:Ue.map((it,Rt)=>m.jsxs("div",{className:"space-y-2",children:[m.jsx(Yc,{url:it,title:`${V.name} vdeo ${Rt+1}`}),m.jsx("a",{href:it,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-full border border-white/15 bg-white/5 px-3 py-1 text-xs font-medium text-white/80 transition hover:border-white/30 hover:text-white",children:"Abrir en YouTube"})]},`${V.id}-video-${Rt}`))})]}):null]}):null,m.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[m.jsx("div",{className:"flex flex-wrap items-center gap-2",children:Object.keys(jh).map(it=>m.jsx("button",{type:"button",className:ze("inline-flex items-center justify-center rounded-full border px-3 py-1 text-xs font-semibold transition",X0[it],ht===it?"ring-2 ring-white/30":"opacity-90 hover:opacity-100"),onClick:()=>Pt(V.id,it),children:jh[it]},it))}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx($i,{to:`/catalog?workId=${encodeURIComponent(V.id)}`,className:"btn-secondary",children:"Ver en catlogo"}),H&&Be?m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>{lt&&!window.confirm("Este tem ya est marcado/registrado hoy. Quieres quitarlo igualmente de la sesin?")||(S(H.id,Be.id),O({type:"success",text:"Quitado de la sesin de hoy."}),window.setTimeout(()=>O(null),1800))},title:"Quitar de la sesin de hoy",children:"Quitar"}):null,m.jsx("button",{type:"button",onClick:bt,disabled:!Se||Oe,className:ze("inline-flex items-center rounded-full border px-4 py-2 text-xs font-semibold transition disabled:opacity-50",se?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200 hover:border-emerald-400":"border-rose-500/40 bg-rose-500/10 text-rose-200 hover:border-rose-400"),title:se?"Incluir en el plan personal":"Excluir del plan personal",children:Oe?"...":se?"Incluir":"Excluir"})]})]})]},V.id)},ue=L=>{var ot;const V=he(),K=(L??"").trim();if(!K)return;const se=ee[K]??"",fe=se.trim().length===0,Se={...V.notesByGroupId??{}};fe?delete Se[K]:Se[K]=se;const Oe=((ot=de.find(Be=>(Be.type??"work")==="note"))==null?void 0:ot.id)??K;v(V.id,{notesByGroupId:Object.keys(Se).length>0?Se:void 0,notes:Se[Oe]??""})};w.useEffect(()=>{H||he(I)},[I,H,he]);const Te=w.useMemo(()=>{const L=(H==null?void 0:H.workItems)??[];return Math.round(L.reduce((V,K)=>{const se=$.get(K.workId);if(!se)return V;const fe=K.customDurationMinutes??se.estimatedMinutes??Ra(se,R);return V+fe},0))},[H==null?void 0:H.workItems,$,R]),ae=L=>{const V=new URLSearchParams(k);L==="edit"?V.set("mode","edit"):V.delete("mode"),E(V,{replace:!0})},pe=L=>{const V=new URLSearchParams(k);V.set("date",L),V.delete("session"),E(V,{replace:!0})},Re=L=>{const V=L.target.value;V&&pe(tt(V).format("YYYY-MM-DD"))},He=()=>pe(tt(I).subtract(1,"day").format("YYYY-MM-DD")),ve=()=>pe(tt(I).add(1,"day").format("YYYY-MM-DD")),F=()=>pe(_);return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("header",{className:"glass-panel space-y-4 p-3 sm:space-y-6 sm:p-6 lg:p-8",children:[m.jsxs("div",{className:"space-y-3 sm:flex sm:items-start sm:justify-between sm:gap-6 sm:space-y-0",children:[m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs("div",{className:"flex items-center gap-2 text-xs uppercase tracking-[0.3em] text-white/40",children:[m.jsx("span",{className:"sm:hidden",children:"Sesin"}),m.jsx("span",{className:"hidden sm:inline",children:"Fecha"})]}),m.jsx("h1",{className:"font-display text-2xl font-semibold text-white sm:text-3xl",children:tt(I).format("dddd, D [de] MMMM")}),m.jsx("p",{className:"text-sm font-medium text-white/80 sm:text-lg",children:(H==null?void 0:H.title)??(z==null?void 0:z.name)??"Entrenamiento personal"})]}),m.jsxs("div",{className:"flex flex-col gap-2.5 rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-sm text-white/70 sm:w-auto",children:[m.jsxs("div",{className:"flex items-center justify-between gap-4",children:[m.jsx("p",{className:"font-semibold text-white",children:"Duracin estimada"}),m.jsxs("span",{className:"rounded-full bg-white/10 px-3 py-1 text-xs text-white/80",children:[Te," min"]})]}),m.jsxs("div",{children:[m.jsxs("p",{className:"mt-1 text-xs text-white/50",children:[en," ",en===1?"tem registrado":"tems registrados"]}),m.jsxs("p",{className:"mt-2 text-xs text-white/60",children:["Progreso: ",ce.done,"/",ce.total,"  ",ce.percent,"%"]}),m.jsx("div",{className:"mt-2 h-2 w-full overflow-hidden rounded-full border border-white/10 bg-slate-950/50",children:m.jsx("div",{className:"h-full rounded-full bg-white/25",style:{width:`${Math.min(Math.max(ce.percent,0),100)}%`}})})]}),m.jsxs("div",{className:"flex flex-col gap-2 sm:items-end",children:[m.jsx("label",{className:"text-[11px] uppercase tracking-wide text-white/40 sm:text-xs",children:"Ir a fecha"}),m.jsx("input",{type:"date",className:"input-field w-full sm:w-auto",value:I,onChange:Re})]})]})]}),m.jsxs("div",{className:"flex flex-col gap-2.5 sm:flex-row sm:flex-wrap sm:items-center sm:justify-between",children:[m.jsxs("div",{className:"flex flex-wrap gap-2",children:[m.jsx("button",{type:"button",onClick:He,className:"btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold sm:h-10 sm:text-sm",children:" Anterior"}),m.jsx("button",{type:"button",onClick:F,disabled:I===_,className:"btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold disabled:opacity-40 sm:h-10 sm:text-sm",children:"Hoy"}),m.jsx("button",{type:"button",onClick:ve,className:"btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold sm:h-10 sm:text-sm",children:"Siguiente "})]}),m.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[m.jsx(DF,{mode:M,onChange:ae}),m.jsxs(lr,{as:"div",className:"relative",children:[m.jsx(lr.Button,{className:"btn-secondary h-9 rounded-2xl px-3 text-xs font-semibold sm:h-10 sm:text-sm",children:"Plan "}),m.jsx(Fb,{as:w.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:m.jsxs(lr.Items,{className:"absolute right-0 z-20 mt-2 w-60 rounded-2xl border border-white/10 bg-slate-950/95 p-1 shadow-xl shadow-black/40 focus:outline-none",children:[m.jsx(lr.Item,{children:({active:L})=>m.jsx("button",{type:"button",className:ze("w-full rounded-xl px-3 py-2 text-left text-sm font-medium transition",L?"bg-white/10 text-white":"text-white/80",(De||W.length===0)&&"opacity-50"),onClick:()=>Ze({reason:"manual-refresh",includeDiagnostics:!0}),disabled:De||W.length===0,title:"Aade tems si has cambiado la configuracin de grupos o lmites",children:De?"Actualizando":"Actualizar plan"})}),m.jsx(lr.Item,{children:({active:L})=>m.jsx("button",{type:"button",className:ze("w-full rounded-xl px-3 py-2 text-left text-sm font-medium transition",L?"bg-white/10 text-white":"text-white/80",De&&"opacity-50"),onClick:ft,disabled:De,title:"Rehace la planificacin del da manteniendo lo registrado",children:"Recrear sesin"})})]})})]})]})]}),re&&m.jsx("div",{className:ze("mt-4 rounded-2xl border px-4 py-3 text-sm",re.type==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-rose-500/40 bg-rose-500/10 text-rose-200"),children:re.text})]}),W.length===0?m.jsxs("div",{className:"glass-panel p-10 text-center text-white/50",children:["No hay ningn trabajo incluido en tu programa activo. Aade la tag ",m.jsx("span",{className:"font-semibold text-white",children:"kungfu"})," a los trabajos que quieras entrenar."]}):M==="edit"?m.jsxs("section",{className:"space-y-4",children:[H?m.jsx("div",{className:"glass-panel p-3 sm:p-4",children:m.jsx(Nm,{session:H,works:e,objectives:r,assistants:i})}):m.jsx("div",{className:"glass-panel p-10 text-center text-white/60",children:"Cargando sesin"}),Pe.filter(L=>L.kind==="note").map(L=>{const V=L.group.id,K=ee[V]??"",se=K.trim().length>0;return m.jsxs("div",{className:"glass-panel space-y-3 p-6",children:[m.jsx("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between",children:m.jsxs("div",{children:[m.jsxs("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:[L.group.name," (",Math.max(0,Number(L.group.minutesBudget)||0)," min)"]}),m.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[m.jsx("span",{className:ze("rounded-full border px-3 py-1 text-xs font-semibold",se?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-white/15 bg-white/5 text-white/60"),children:se?"OK":"Pendiente"}),m.jsx("p",{className:"text-sm text-white/60",children:"Notas de la sesin  se guarda al salir del campo."})]})]})}),m.jsx("textarea",{className:"input-field min-h-[120px] w-full resize-y",value:K,onChange:fe=>T(Se=>({...Se,[V]:fe.target.value})),onBlur:()=>ue(V),placeholder:"Escribe aqu"})]},L.group.id)})]}):m.jsx("section",{className:"space-y-4",children:m.jsxs("div",{className:"space-y-3",children:[ge.length===0?m.jsxs("div",{className:"glass-panel p-10 text-center text-white/50",children:["No hay tems planificados para hoy. Revisa ",m.jsx("span",{className:"font-semibold text-white",children:"Ajustes"})," o marca ms trabajos como entrenables."]}):null,Pe.map(L=>{if(L.kind==="note"){const fe=L.group.id,Se=ee[fe]??"",Oe=Se.trim().length>0;return m.jsxs("div",{className:"glass-panel space-y-3 p-6",children:[m.jsx("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between",children:m.jsxs("div",{children:[m.jsxs("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:[L.group.name," (",Math.max(0,Number(L.group.minutesBudget)||0)," min)"]}),m.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[m.jsx("span",{className:ze("rounded-full border px-3 py-1 text-xs font-semibold",Oe?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-white/15 bg-white/5 text-white/60"),children:Oe?"OK":"Pendiente"}),m.jsx("p",{className:"text-sm text-white/60",children:"Notas de la sesin  se guarda al salir del campo."})]})]})}),m.jsx("textarea",{className:"input-field min-h-[120px] w-full resize-y",value:Se,onChange:ot=>T(Be=>({...Be,[fe]:ot.target.value})),onBlur:()=>ue(fe),placeholder:"Escribe aqu"})]},L.group.id)}const V=Math.max(0,L.total),K=Math.min(Math.max(0,L.done),V),se=V>0?Math.round(K/V*100):0;return m.jsxs("section",{className:"glass-panel space-y-4 p-3 sm:space-y-5 sm:p-6",children:[m.jsx("header",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:m.jsxs("div",{children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:L.label}),m.jsxs("p",{className:"mt-1 text-sm text-white/60",children:[K,"/",V," tem",V===1?"":"s","  ",se,"% completado"]}),m.jsx("div",{className:"mt-2 h-2 w-full overflow-hidden rounded-full border border-white/10 bg-slate-950/50",children:m.jsx("div",{className:"h-full rounded-full bg-white/25",style:{width:`${Math.min(Math.max(se,0),100)}%`}})})]})}),m.jsx("div",{className:"space-y-3 sm:space-y-4",children:L.entries.map(ke)})]},L.label)})]})})]})}function VF(){const e=Ce(f=>f.plans),[t,n]=Oo(),r=(t.get("plan")??"").trim(),i=w.useMemo(()=>e.filter(f=>f.enabled),[e]),o=w.useMemo(()=>{const f=[...i];return f.sort((h,p)=>{const y=h.kind===p.kind?0:h.kind==="class"?-1:1;return y!==0?y:h.name.localeCompare(p.name,"es",{sensitivity:"base"})}),f},[i]),l=w.useMemo(()=>o.length===0?void 0:o.find(h=>h.id===r)??o[0],[o,r]),u=(l==null?void 0:l.id)??"classes";w.useEffect(()=>{if(!l||r===l.id)return;const f=new URLSearchParams(t);f.set("plan",l.id),n(f,{replace:!0})},[l,r,t,n]);const c=f=>{const h=new URLSearchParams(t);h.set("plan",f),h.delete("session"),n(h,{replace:!0})};return l?m.jsxs("div",{className:"space-y-6",children:[m.jsx("header",{className:"glass-panel p-6 sm:p-10",children:m.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold",children:"Sesiones"}),m.jsx("p",{className:"text-white/60",children:"Vista unificada por planes."})]}),m.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(f=>m.jsx("button",{type:"button",onClick:()=>c(f.id),className:ze("rounded-full border px-4 py-2 text-sm font-semibold transition",f.id===u?"border-sky-400/70 bg-sky-500/10 text-white":"border-white/10 bg-white/5 text-white/70 hover:border-white/30 hover:text-white"),title:f.kind==="class"?"Plan de clases":"Plan personal",children:f.name},f.id))})]})}),l.kind==="class"?m.jsx(RF,{}):m.jsx(HF,{})]}):m.jsx("div",{className:"glass-panel p-10 text-center text-white/60",children:"No hay planes activos. Ve a Ajustes y crea/activa uno."})}function qF(){return m.jsx(VF,{})}function YF(){const[e]=Oo(),t=new URLSearchParams(e);return t.set("mode","edit"),m.jsx(Ja,{to:{pathname:"/",search:`?${t.toString()}`},replace:!0})}function Nh(e){return Array.from(new Set(e))}function Ya({options:e,value:t,onChange:n,disabled:r=!1,placeholder:i="Search",allowCreate:o=!1,onCreate:l,maxSelected:u}){const[c,f]=w.useState(""),h=w.useMemo(()=>Nh(t.map(C=>C.trim()).filter(Boolean)),[t]),p=w.useMemo(()=>new Set(h),[h]),y=w.useMemo(()=>new Map(e.map(C=>[C.value,C])),[e]),v=w.useMemo(()=>{const C=c.trim().toLowerCase();return C?e.filter(_=>(_.label??_.value).toLowerCase().includes(C)||_.value.toLowerCase().includes(C)):e},[e,c]),S=typeof u=="number"?h.length<u:!0,k=c.trim(),E=o&&!!k&&typeof l=="function"&&!e.some(C=>C.value.toLowerCase()===k.toLowerCase())&&!e.some(C=>(C.label??"").toLowerCase()===k.toLowerCase());return m.jsxs("div",{className:ze("space-y-2",r&&"opacity-60"),children:[h.length>0?m.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[h.map(C=>{var j;const _=((j=y.get(C))==null?void 0:j.label)??C;return m.jsxs("button",{type:"button",disabled:r,className:"inline-flex items-center gap-2 rounded-full border border-sky-500/30 bg-sky-500/10 px-3 py-1 text-xs font-semibold text-sky-100 transition hover:border-sky-400/50",onClick:()=>n(h.filter(I=>I!==C)),title:"Remove",children:[_,m.jsx("span",{className:"text-sky-200/80",children:""})]},C)}),m.jsx("button",{type:"button",disabled:r,className:"rounded-full border border-white/15 bg-white/5 px-3 py-1 text-xs font-semibold text-white/70 transition hover:border-white/30 hover:text-white",onClick:()=>n([]),children:"Clear"})]}):null,m.jsx("input",{type:"text",className:"input-field",value:c,disabled:r,placeholder:i,onChange:C=>f(C.target.value)}),m.jsx("div",{className:"max-h-48 overflow-auto rounded-2xl border border-white/10 bg-white/5 p-2",children:m.jsxs("div",{className:"flex flex-wrap gap-2",children:[E?m.jsxs("button",{type:"button",disabled:r||!S,className:"rounded-full border border-emerald-500/30 bg-emerald-500/10 px-3 py-1 text-xs font-semibold text-emerald-100 transition hover:border-emerald-400/50 disabled:opacity-50",onClick:()=>{const C=(l==null?void 0:l(k))??null;if(!C)return;const _=Nh([...h,C.createdValue]);n(_),f("")},title:"Create",children:["+ Create ",k,""]}):null,v.map(C=>{const _=C.label??C.value,j=p.has(C.value);return m.jsx("button",{type:"button",disabled:r||!j&&!S,className:ze("rounded-full border px-3 py-1 text-xs font-semibold transition disabled:opacity-50",j?"border-sky-500/40 bg-sky-500/10 text-sky-100":"border-white/15 bg-white/5 text-white/70 hover:border-white/30 hover:text-white"),onClick:()=>{const I=j?h.filter(M=>M!==C.value):Nh([...h,C.value]);n(I)},children:_},C.value)})]})})]})}const Z0={name:"",subtitle:"",objectiveId:"",parentWorkId:"",nodeType:"",tags:[],orderHint:0,nextWorkId:"",variantOfWorkId:"",descriptionMarkdown:"",estimatedMinutes:10,notes:"",videoUrls:[""],visibility:"private",collaborators:[""]},GF=e=>Array.from(new Set((e??[]).map(t=>t.trim().toLowerCase()).filter(Boolean))),Th="__no_objective__",Y1={private:"Privado",shared:"Compartido",public:"Pblico"},KF={private:"Solo t puedes ver y editar este trabajo.",shared:"Solo las personas que aadas pueden editarlo contigo.",public:"Cualquier persona con acceso al catlogo puede verlo. Solo tus editores pueden cambiarlo."},G1=5,Oa="personal-exclude";function JF({work:e,childCount:t,depth:n,expanded:r,isTreeCollapsed:i,isPersonalExcluded:o,canTogglePersonal:l,personalToggleBusy:u,nextLabel:c,variantLabel:f,onToggle:h,onToggleTree:p,onTogglePersonal:y,onEdit:v,onDuplicate:S,onCreateChild:k,onDelete:E}){var we;const C=(e.descriptionMarkdown??"").trim(),_=(e.subtitle??"").trim(),j=(e.notes??"").trim(),I=e.videoUrls.filter(he=>he.trim().length>0),M=C.length>0,P=_.length>0,z=j.length>0,ne=I.length>0,Z=M||z||ne,R=t>0,D=n>0?{marginLeft:`${n*1.5}rem`}:void 0,H=e.visibility??"private",W=Y1[H],G=((we=e.collaboratorEmails)==null?void 0:we.length)??0,$=e.canEdit??!1,Y=e.isOwner??!1,re=(e.ownerEmail??"").trim(),O=(e.nodeType??"").trim(),ee=(e.tags??[]).filter(he=>he!==Oa),T=(O||"work").trim().toLowerCase(),U=Ce(he=>{var me;return(me=he.workTaxonomy.nodeTypes.find(de=>de.key===T))==null?void 0:me.label}),te=(()=>{const he={form:"Forma",segment:"Segmento",application:"Aplicacin",technique:"Tcnica",drill:"Drill",style:"Estilo",link:"Link",work:"Trabajo"},me={form:"border-indigo-500/40 bg-indigo-500/15 text-indigo-100",segment:"border-sky-500/40 bg-sky-500/15 text-sky-100",application:"border-amber-500/40 bg-amber-500/15 text-amber-100",technique:"border-emerald-500/40 bg-emerald-500/15 text-emerald-100",drill:"border-purple-500/40 bg-purple-500/15 text-purple-100",style:"border-white/20 bg-white/10 text-white/70",link:"border-white/20 bg-white/10 text-white/70",work:"border-white/20 bg-white/10 text-white/70"},de=U??he[T]??(O||"Trabajo"),Ne=me[T]??me.work;return m.jsx("span",{className:ze("inline-flex items-center rounded-full border px-3 py-1 text-xs font-semibold",Ne),children:de})})(),A=(()=>{const he={form:"border-indigo-500/25",segment:"border-sky-500/25",application:"border-amber-500/25",technique:"border-emerald-500/25",drill:"border-purple-500/25",work:"border-white/10"},me={form:"bg-indigo-500",segment:"bg-sky-500",application:"bg-amber-500",technique:"bg-emerald-500",drill:"bg-purple-500",work:""},de={form:"bg-indigo-400/60",segment:"bg-sky-400/60",application:"bg-amber-400/60",technique:"bg-emerald-400/60",drill:"bg-purple-400/60",work:"bg-white/10"},Ne=he[T]??he.work,Ae=me[T]??me.work,Ie=de[T]??de.work;return{borderClassName:Ne,glowClassName:Ae,barClassName:Ie}})();return m.jsxs("article",{id:`work-${e.id}`,className:ze("group relative space-y-4 rounded-xl border bg-white/5 p-4 pb-5 shadow shadow-black/30",A.borderClassName),style:D,children:[m.jsx("div",{className:ze("absolute inset-y-0 left-0 w-1 rounded-r-full",A.barClassName),"aria-hidden":!0}),A.glowClassName?m.jsx("div",{className:ze("absolute inset-0 -z-[1] rounded-xl opacity-10 blur-3xl",A.glowClassName)}):null,m.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[m.jsxs("div",{role:Z?"button":void 0,tabIndex:Z?0:void 0,onClick:()=>{Z&&h()},onKeyDown:he=>{Z&&(he.key==="Enter"||he.key===" ")&&(he.preventDefault(),h())},className:ze("flex flex-1 items-start gap-3 border border-transparent px-2 py-2 text-left transition",Z?"cursor-pointer hover:border-white/10 hover:bg-white/5 focus-visible:border-white/20 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-500/40":"cursor-default"),"aria-expanded":Z?r:void 0,children:[R?m.jsx("button",{type:"button",onClick:he=>{he.stopPropagation(),p()},className:ze("mt-1 inline-flex h-8 w-8 items-center justify-center rounded-full border border-white/15 bg-white/5 text-sm font-semibold text-white/70 transition hover:border-white/30 hover:text-white"),"aria-label":i?"Mostrar trabajos hijos":"Ocultar trabajos hijos",title:i?"Mostrar hijos":"Ocultar hijos",children:i?"":""}):null,Z?m.jsx("span",{className:ze("mt-1 inline-flex h-8 w-8 items-center justify-center rounded-full border border-white/15 bg-white/5 text-sm font-semibold text-white/70 transition",r?"rotate-90 border-white/30 text-white":""),"aria-hidden":!0,children:""}):null,m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-white",children:e.name}),P?m.jsx("p",{className:"text-sm text-white/70",children:_}):null,m.jsxs("p",{className:"text-sm text-white/60",children:[e.estimatedMinutes," minutos"]}),m.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-[11px] uppercase tracking-wide text-white/40",children:[m.jsx("span",{className:"rounded-full border border-white/20 px-2 py-0.5 text-[10px] font-semibold text-white/70",children:W}),ee.slice(0,3).map(he=>m.jsx("span",{className:"rounded-full border border-white/10 px-2 py-0.5 text-[10px] font-semibold text-white/60",children:he},he)),Y?m.jsx("span",{children:"Propietario"}):re?m.jsx("span",{children:re}):null,G>0?m.jsxs("span",{children:["+",G," colaborador",G===1?"":"es"]}):null,f?m.jsxs("span",{className:"text-white/50",children:["Variante de: ",f]}):null,c?m.jsxs("span",{className:"text-white/50",children:["Siguiente: ",c]}):null,$?null:m.jsx("span",{className:"text-amber-300/80",children:"Solo lectura"})]})]})]}),m.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:justify-end",children:[te,m.jsx("button",{type:"button",onClick:he=>{he.stopPropagation(),y()},disabled:!l||u,className:ze("inline-flex items-center rounded-full border px-3 py-1 text-xs font-semibold transition disabled:opacity-50",o?"border-rose-500/40 bg-rose-500/10 text-rose-200 hover:border-rose-400":"border-emerald-500/40 bg-emerald-500/10 text-emerald-200 hover:border-emerald-400"),title:o?"Incluir en el plan personal":"Excluir del plan personal",children:u?"...":o?"Fuera":"En plan"}),m.jsxs(lr,{as:"div",className:"relative inline-flex",children:[m.jsxs(lr.Button,{className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-white/20 text-white/70 transition hover:border-white/40 hover:text-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-500/40",children:[m.jsx("span",{className:"sr-only",children:"Abrir acciones"}),m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",className:"h-5 w-5","aria-hidden":"true",children:[m.jsx("circle",{cx:"12",cy:"5",r:"1.5"}),m.jsx("circle",{cx:"12",cy:"12",r:"1.5"}),m.jsx("circle",{cx:"12",cy:"19",r:"1.5"})]})]}),m.jsxs(lr.Items,{className:"absolute right-0 z-10 mt-2 w-44 overflow-hidden rounded-2xl border border-white/10 bg-slate-900/95 p-1 text-sm text-white shadow-lg shadow-black/40 focus:outline-none",children:[m.jsx(lr.Item,{children:({active:he})=>m.jsx("button",{type:"button",onClick:$?v:void 0,disabled:!$,className:ze("flex w-full items-center gap-2 rounded-xl px-3 py-2 text-left disabled:opacity-40",he&&$?"bg-white/10 text-white":"text-white/70"),children:"Editar"})}),m.jsx(lr.Item,{children:({active:he})=>m.jsx("button",{type:"button",onClick:$?S:void 0,disabled:!$,className:ze("flex w-full items-center gap-2 rounded-xl px-3 py-2 text-left disabled:opacity-40",he&&$?"bg-white/10 text-white":"text-white/70"),children:"Duplicar"})}),m.jsx(lr.Item,{children:({active:he})=>m.jsx("button",{type:"button",onClick:$?k:void 0,disabled:!$,className:ze("flex w-full items-center gap-2 rounded-xl px-3 py-2 text-left disabled:opacity-40",he&&$?"bg-white/10 text-white":"text-white/70"),children:"Nuevo hijo"})}),m.jsx(lr.Item,{children:({active:he})=>m.jsx("button",{type:"button",onClick:Y?E:void 0,disabled:!Y,className:ze("flex w-full items-center gap-2 rounded-xl px-3 py-2 text-left disabled:opacity-40",he&&Y?"bg-rose-500/20 text-rose-100":"text-rose-300"),children:"Eliminar"})})]})]})]})]}),Z&&r&&m.jsxs("div",{className:"space-y-4 rounded-2xl border border-white/10 bg-slate-950/60 p-4",children:[M?m.jsx(Ss,{content:e.descriptionMarkdown,enableWorkLinks:!0}):null,z?m.jsx("div",{className:"rounded-2xl border border-dashed border-white/15 bg-white/5 p-3 text-sm text-white/70",children:e.notes}):null,ne?m.jsx("div",{className:"space-y-3",children:m.jsx("div",{className:"grid gap-4 lg:grid-cols-3",children:I.map((he,me)=>m.jsxs("div",{className:"space-y-2",children:[m.jsx(Yc,{url:he,title:`${e.name} vdeo ${me+1}`}),m.jsx("a",{href:he,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-full border border-white/20 px-3 py-1 text-xs font-semibold text-white/70 transition hover:border-white/40 hover:text-white",children:"Abrir en YouTube"})]},`${e.id}-video-${me}`))})}):null]}),m.jsx("button",{type:"button",onClick:$?k:void 0,disabled:!$,className:ze("absolute bottom-0 left-1/2 flex -translate-x-1/2 translate-y-1/2 items-center justify-center rounded-full border border-dashed border-white/20 bg-slate-950/80 px-4 py-2 text-sm font-semibold text-white/80 opacity-0 transition hover:border-white/40 hover:text-white focus-visible:opacity-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-500/40 group-hover:opacity-100 pointer-events-none group-hover:pointer-events-auto focus-visible:pointer-events-auto",!$&&"opacity-30"),title:$?R?"Aadir trabajo hijo":"Crear primer trabajo hijo":"No tienes permisos para crear trabajos hijos","aria-label":"Crear trabajo hijo",children:"+"})]})}function QF({form:e,objectiveOptions:t,parentOptions:n,workOptions:r,nodeTypeOptions:i,tagOptions:o,onCreateNodeType:l,onCreateTag:u,depth:c,onFieldChange:f,onVideoChange:h,onAddVideo:p,onRemoveVideo:y,onCollaboratorChange:v,onAddCollaborator:S,onRemoveCollaborator:k,onSave:E,onCancel:C,isNew:_,canEditContent:j,canManageSharing:I,isSaving:M,isOwner:P,ownerEmail:z}){const ne=t.find($=>$.id===e.objectiveId),Z=n.find($=>$.id===e.parentWorkId),R=r.find($=>$.id===e.nextWorkId),D=r.find($=>$.id===e.variantOfWorkId),H=c>0?{marginLeft:`${c*1.5}rem`}:void 0,W=e.id?`work-name-${e.id}`:void 0,G=e.id?`work-subtitle-${e.id}`:void 0;return m.jsxs("article",{className:"space-y-5 rounded-3xl border border-sky-500/40 bg-slate-950/70 p-5 shadow-lg shadow-sky-500/15",style:H,children:[m.jsxs("header",{className:"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between",children:[m.jsxs("div",{className:"flex-1 space-y-3",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:_?"Nuevo trabajo":"Editando trabajo"}),m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",htmlFor:W,children:"Nombre"}),m.jsx("input",{id:W,type:"text",className:"input-field w-full text-base font-semibold disabled:opacity-60",placeholder:"Nombre descriptivo",value:e.name,onChange:$=>f({name:$.target.value}),disabled:!j})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",htmlFor:G,children:"Subttulo (opcional)"}),m.jsx("input",{id:G,type:"text",className:"input-field w-full disabled:opacity-60",placeholder:"Aade un subttulo breve",value:e.subtitle,onChange:$=>f({subtitle:$.target.value}),disabled:!j})]})]}),m.jsx(Bi,{objective:ne,size:"sm"})]}),j?null:m.jsx("div",{className:"rounded-2xl border border-amber-400/40 bg-amber-500/10 p-3 text-xs text-amber-200",children:"No tienes permisos para editar el contenido de este trabajo. Puedes revisar la informacin y sugerir cambios al propietario."}),m.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Objetivo"}),m.jsxs("select",{className:"input-field disabled:opacity-60",value:e.objectiveId,onChange:$=>f({objectiveId:$.target.value}),disabled:!j,children:[m.jsx("option",{value:"",children:"Selecciona un objetivo"}),t.map($=>m.jsx("option",{value:$.id,children:$.name},$.id))]})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Trabajo padre (opcional)"}),m.jsxs("select",{className:"input-field disabled:opacity-60",value:e.parentWorkId,onChange:$=>f({parentWorkId:$.target.value}),disabled:!j,children:[m.jsx("option",{value:"",children:"Sin trabajo padre"}),n.map($=>m.jsx("option",{value:$.id,children:$.label},$.id))]}),e.parentWorkId&&Z?m.jsxs("p",{className:"text-xs text-white/40",children:["Deriva de: ",Z.label]}):null]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Duracin estimada (min)"}),m.jsx("input",{type:"number",min:0,className:"input-field disabled:opacity-60",value:e.estimatedMinutes,onChange:$=>f({estimatedMinutes:Number($.target.value)}),disabled:!j})]})]}),m.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Node type (opcional)"}),m.jsx(Ya,{options:i,value:e.nodeType?[e.nodeType]:[],maxSelected:1,onChange:$=>f({nodeType:$[0]??""}),placeholder:"Search node types",disabled:!j,allowCreate:!0,onCreate:$=>{const Y=l($);return Y?{createdValue:Y,createdLabel:$.trim()}:null}})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Tags"}),m.jsx(Ya,{options:o,value:e.tags??[],onChange:$=>f({tags:$}),placeholder:"Search tags",disabled:!j,allowCreate:!0,onCreate:$=>{const Y=u($);return Y?{createdValue:Y,createdLabel:Y}:null}})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Order hint (opcional)"}),m.jsx("input",{type:"number",min:0,className:"input-field disabled:opacity-60",value:e.orderHint,onChange:$=>f({orderHint:Number($.target.value)}),disabled:!j})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Siguiente (next)"}),m.jsxs("select",{className:"input-field disabled:opacity-60",value:e.nextWorkId,onChange:$=>f({nextWorkId:$.target.value}),disabled:!j,children:[m.jsx("option",{value:"",children:"Sin siguiente"}),r.filter($=>$.id!==e.id).map($=>m.jsx("option",{value:$.id,children:$.label},$.id))]}),e.nextWorkId&&R?m.jsxs("p",{className:"text-xs text-white/40",children:["Siguiente: ",R.label]}):null]}),m.jsxs("div",{className:"grid gap-2 sm:col-span-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Variante de (variant_of)"}),m.jsxs("select",{className:"input-field disabled:opacity-60",value:e.variantOfWorkId,onChange:$=>f({variantOfWorkId:$.target.value}),disabled:!j,children:[m.jsx("option",{value:"",children:"Sin base"}),r.filter($=>$.id!==e.id).map($=>m.jsx("option",{value:$.id,children:$.label},$.id))]}),e.variantOfWorkId&&D?m.jsxs("p",{className:"text-xs text-white/40",children:["Variante de: ",D.label]}):null]})]}),m.jsxs("section",{className:"space-y-3 rounded-3xl border border-white/10 bg-white/5 p-4",children:[m.jsxs("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-white/40",children:"Visibilidad"}),m.jsx("p",{className:"text-sm text-white/60",children:P?"Eres el propietario de este trabajo.":z?`Propietario: ${z}`:""})]}),I?null:m.jsx("p",{className:"text-xs text-amber-300/80",children:"Solo el propietario puede cambiar la visibilidad o los colaboradores."})]}),m.jsx("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:gap-3",children:["private","shared","public"].map($=>m.jsxs("label",{className:ze("inline-flex items-center gap-2 rounded-2xl border px-3 py-2 text-sm transition",e.visibility===$?"border-sky-400/80 bg-sky-400/10 text-white":"border-white/15 text-white/70 hover:border-white/30 hover:text-white",!I&&"opacity-50"),children:[m.jsx("input",{type:"radio",className:"accent-sky-400",checked:e.visibility===$,onChange:()=>f({visibility:$}),disabled:!I}),Y1[$]]},$))}),m.jsx("p",{className:"text-xs text-white/50",children:KF[e.visibility]}),e.visibility==="private"?null:m.jsxs("div",{className:"space-y-2 rounded-2xl border border-white/10 bg-white/5 p-3",children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-white/40",children:"Colaboradores (edicin)"}),m.jsx("p",{className:"text-xs text-white/50",children:"Aade hasta 5 direcciones de correo. Tendrn permisos de edicin completos."}),m.jsx("div",{className:"space-y-2",children:e.collaborators.map(($,Y)=>m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("input",{type:"email",className:"input-field flex-1 disabled:opacity-60",placeholder:"colega@ejemplo.com",value:$,onChange:re=>v(Y,re.target.value),disabled:!I}),e.collaborators.length>1?m.jsx("button",{type:"button",className:"inline-flex h-9 w-9 items-center justify-center rounded-full border border-rose-500/40 text-rose-300 transition hover:border-rose-400 hover:text-rose-200 disabled:opacity-40",onClick:()=>k(Y),"aria-label":"Eliminar colaborador",disabled:!I,children:""}):null]},`collaborator-${Y}`))}),m.jsx("button",{type:"button",className:"btn-secondary px-3 py-1 text-xs disabled:opacity-40",onClick:S,disabled:!I||e.collaborators.length>=G1,children:"+ Aadir colaborador"})]})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Descripcin (Markdown)"}),m.jsx("textarea",{className:"input-field min-h-[140px] disabled:opacity-60",value:e.descriptionMarkdown,onChange:$=>f({descriptionMarkdown:$.target.value}),placeholder:"Usa formato markdown para resaltar puntos importantes.",disabled:!j})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Notas opcionales"}),m.jsx("textarea",{className:"input-field min-h-[100px] disabled:opacity-60",value:e.notes,onChange:$=>f({notes:$.target.value}),disabled:!j})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Vdeos de YouTube"}),m.jsx("div",{className:"space-y-3",children:e.videoUrls.map(($,Y)=>m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("input",{type:"url",className:"input-field flex-1 disabled:opacity-60",value:$,onChange:re=>h(Y,re.target.value),placeholder:"https://www.youtube.com/watch?v=...",disabled:!j}),e.videoUrls.length>1?m.jsx("button",{type:"button",className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-rose-500/40 text-rose-300 transition hover:border-rose-400 hover:text-rose-200",onClick:()=>y(Y),"aria-label":"Eliminar enlace de vdeo",disabled:!j,children:""}):null]}),m.jsx(Yc,{url:$,title:`Vista previa vdeo ${Y+1}`})]},`video-field-${Y}`))}),m.jsx("button",{type:"button",className:"btn-secondary px-3 py-1 text-xs disabled:opacity-50",onClick:p,disabled:!j,children:"+ Aadir vdeo"})]}),m.jsxs("div",{className:"flex flex-wrap gap-3 pt-2",children:[m.jsx("button",{type:"button",onClick:E,className:"btn-primary disabled:opacity-60",disabled:M,children:M?"Guardando":"Guardar"}),m.jsx("button",{type:"button",className:"btn-secondary disabled:opacity-50",onClick:C,disabled:M,children:"Cancelar"})]})]})}function XF(){var en;const e=Ce(J=>J.works),t=Ce(J=>J.objectives),n=Ce(J=>J.workTaxonomy),r=Ce(J=>J.addWork),i=Ce(J=>J.updateWork),o=Ce(J=>J.deleteWork),l=Ce(J=>J.upsertNodeType),u=Ce(J=>J.upsertTag),c=Ce(J=>J.worksLoading),f=ii(),{user:h}=Ns(),p=w.useMemo(()=>h?{actorId:h.id,actorEmail:h.email??""}:null,[h]),[y,v]=w.useState(""),[S,k]=w.useState(null),[E,C]=w.useState(new Set),[_,j]=w.useState(new Set),[I,M]=w.useState(new Set),[P,z]=w.useState({}),[ne,Z]=w.useState(null),[R,D]=w.useState(null),H=w.useMemo(()=>new Map(t.map(J=>[J.id,J])),[t]),W=w.useMemo(()=>[...t].sort((J,ce)=>(J.name??"").localeCompare(ce.name??"","es")),[t]),G=w.useMemo(()=>(n.nodeTypes??[]).slice().sort((J,ce)=>J.label.localeCompare(ce.label,"en",{sensitivity:"base"})).map(J=>({value:J.key,label:J.label})),[n.nodeTypes]),$=w.useMemo(()=>(n.tags??[]).slice().sort((J,ce)=>J.name.localeCompare(ce.name,"en",{sensitivity:"base"})).map(J=>({value:J.name,label:J.name})),[n.tags]),Y=w.useMemo(()=>new Map(e.map(J=>[J.id,J])),[e]),re=w.useMemo(()=>{const J=new Map;return e.forEach(ce=>{const ge=ce.parentWorkId;if(!ge)return;const Pe=J.get(ge)??[];Pe.push(ce),J.set(ge,Pe)}),J.forEach(ce=>{ce.sort((ge,Pe)=>ge.name.localeCompare(Pe.name,"es",{sensitivity:"base"}))}),J},[e]),O=w.useMemo(()=>{const J=new Map,ce=(ge,Pe)=>{if(J.has(ge))return J.get(ge);const ke=Y.get(ge);if(!ke)return"";if(!ke.parentWorkId||Pe.has(ge))return J.set(ge,ke.name),ke.name;Pe.add(ge);const ue=ce(ke.parentWorkId,Pe);Pe.delete(ge);const Te=ue?`${ue}  ${ke.name}`:ke.name;return J.set(ge,Te),Te};return e.forEach(ge=>{ce(ge.id,new Set)}),J},[e,Y]);w.useEffect(()=>{const J=f.hash,ce="#work-";let ge=null;if(J.startsWith(ce)&&(ge=J.slice(ce.length)),!ge){const ue=new URLSearchParams(f.search);ge=ue.get("workId")??ue.get("work")}if(!ge)return;C(ue=>{if(ue.has(ge))return ue;const Te=new Set(ue);return Te.add(ge),Te});const Pe=document.getElementById(`work-${ge}`);if(!Pe)return;Pe.scrollIntoView({behavior:"smooth",block:"start"}),Pe.classList.add("ring-2","ring-sky-500/60");const ke=window.setTimeout(()=>{Pe.classList.remove("ring-2","ring-sky-500/60")},1500);return()=>{window.clearTimeout(ke),Pe.classList.remove("ring-2","ring-sky-500/60")}},[f.hash,f.search,e]);const ee=w.useMemo(()=>{const J=new Map,ce=ge=>{if(J.has(ge))return J.get(ge);const Pe=new Set;return(re.get(ge)??[]).forEach(ue=>{Pe.add(ue.id),ce(ue.id).forEach(Te=>Pe.add(Te))}),J.set(ge,Pe),Pe};return e.forEach(ge=>ce(ge.id)),J},[e,re]),T=w.useCallback((J,ce)=>{var ke,ue;const ge=new Set;J&&(ge.add(J),(ke=ee.get(J))==null||ke.forEach(Te=>ge.add(Te)));const Pe=e.filter(Te=>!ge.has(Te.id)).map(Te=>({id:Te.id,label:(()=>{var Re;const ae=O.get(Te.id)??Te.name,pe=(Re=H.get(Te.objectiveId))==null?void 0:Re.name;return pe?`${pe}  ${ae}`:ae})()})).sort((Te,ae)=>Te.label.localeCompare(ae.label,"es",{sensitivity:"base"}));if(ce&&ce.length>0&&!Pe.some(Te=>Te.id===ce)){const Te=Y.get(ce),ae=O.get(ce)??(Te==null?void 0:Te.name)??"Trabajo no disponible",pe=Te?(ue=H.get(Te.objectiveId))==null?void 0:ue.name:void 0,Re=pe?`${pe}  ${ae}`:ae;Pe.unshift({id:ce,label:Re})}return Pe},[e,O,ee,Y,H]),U=w.useMemo(()=>e.map(J=>{var ke;const ce=O.get(J.id)??J.name,ge=(ke=H.get(J.objectiveId))==null?void 0:ke.name,Pe=ge?`${ge}  ${ce}`:ce;return{id:J.id,label:Pe}}).sort((J,ce)=>J.label.localeCompare(ce.label,"es",{sensitivity:"base"})),[e,O,H]),te=w.useMemo(()=>{const J=y.trim().toLowerCase(),ce=ke=>{var He;if(!J)return!0;const ue=((He=H.get(ke.objectiveId))==null?void 0:He.name)??"",Te=ke.parentWorkId?O.get(ke.parentWorkId)??"":"",ae=ke.id?O.get(ke.id)??"":"",pe=(ke.nodeType??"").toLowerCase(),Re=Array.isArray(ke.tags)?ke.tags.join(" "):ke.tags??"";return ke.name.toLowerCase().includes(J)||(ke.subtitle??"").toLowerCase().includes(J)||ke.descriptionMarkdown.toLowerCase().includes(J)||ue.toLowerCase().includes(J)||Te.toLowerCase().includes(J)||ae.toLowerCase().includes(J)||pe.includes(J)||Re.toLowerCase().includes(J)},ge=[],Pe=ke=>{if(!ke)return 0;let ue=1,Te=Y.get(ke);const ae=new Set(ke?[ke]:[]);for(;Te&&Te.parentWorkId;){const pe=Te.parentWorkId;if(!pe||ae.has(pe))break;ue+=1,ae.add(pe),Te=Y.get(pe)}return ue};return e.forEach(ke=>{const ue=P[ke.id],Te=(ue==null?void 0:ue.data)??{id:ke.id,name:ke.name,subtitle:ke.subtitle??"",nodeType:ke.nodeType??"",tags:ke.tags??[],descriptionMarkdown:ke.descriptionMarkdown,objectiveId:ke.objectiveId,parentWorkId:ke.parentWorkId??""};!ue&&!ce(Te)||ge.push({id:ke.id,objectiveId:Te.objectiveId,parentWorkId:Te.parentWorkId??"",depth:Pe(Te.parentWorkId),work:ke,isNew:!1,isEditing:!!ue,form:ue==null?void 0:ue.data})}),Object.entries(P).filter(([,ke])=>ke.isNew).forEach(([ke,ue])=>{ce(ue.data)&&ge.push({id:ke,objectiveId:ue.data.objectiveId,parentWorkId:ue.data.parentWorkId,depth:Pe(ue.data.parentWorkId||void 0),work:void 0,isNew:!0,isEditing:!0,form:ue.data})}),ge},[e,Y,P,H,O,y]),A=w.useCallback(J=>{var ke;const ce=(J.isEditing&&J.form?J.form.parentWorkId:J.parentWorkId)??"";if(!ce)return!1;let ge=ce;const Pe=new Set;for(;ge&&!Pe.has(ge);){if(Pe.add(ge),_.has(ge))return!0;ge=(((ke=Y.get(ge))==null?void 0:ke.parentWorkId)??"")||""}return!1},[_,Y]),we=w.useMemo(()=>{const J=new Map;te.forEach(ue=>{const Te=H.has(ue.objectiveId)?ue.objectiveId:Th,ae=J.get(Te)??[];ae.push(ue),J.set(Te,ae)});const ce=ue=>{var Te,ae;if(ue.isEditing&&ue.form){const pe=ue.form.name.trim()||(((Te=ue.work)==null?void 0:Te.name)??""),Re=ue.form.parentWorkId&&ue.form.parentWorkId.length>0?O.get(ue.form.parentWorkId)??((ae=Y.get(ue.form.parentWorkId))==null?void 0:ae.name)??"":"";return Re?`${Re}  ${pe}`:pe}return ue.work?O.get(ue.work.id)??ue.work.name:ue.id},ge=(ue,Te)=>{const ae=ce(ue),pe=ce(Te);return ae.localeCompare(pe,"es",{sensitivity:"base"})},Pe=[];W.forEach(ue=>{const Te=J.get(ue.id);Te&&Te.length&&Pe.push({objective:ue,items:Te.slice().sort(ge)})});const ke=J.get(Th);return ke&&ke.length&&Pe.push({objective:void 0,items:ke.slice().sort(ge)}),Pe},[te,H,W,O,Y]),he=((en=W[0])==null?void 0:en.id)??"",me=(J,ce)=>{z(ge=>{const Pe=ge[J];return Pe?{...ge,[J]:ce(Pe)}:ge})},de=J=>J.length>0?J:[""],Ne=J=>J.length>0?J:[""],Ae=J=>{z(ce=>ce[J.id]?ce:{...ce,[J.id]:{data:{id:J.id,name:J.name,subtitle:J.subtitle??"",objectiveId:J.objectiveId,parentWorkId:J.parentWorkId??"",nodeType:J.nodeType??"",tags:J.tags??[],orderHint:J.orderHint??0,nextWorkId:J.nextWorkId??"",variantOfWorkId:J.variantOfWorkId??"",descriptionMarkdown:J.descriptionMarkdown,estimatedMinutes:J.estimatedMinutes,notes:J.notes??"",videoUrls:de(J.videoUrls.slice()),visibility:J.visibility??"private",collaborators:Ne(J.collaboratorEmails??[])},isNew:!1,originalId:J.id}}),C(ce=>{const ge=new Set(ce);return ge.add(J.id),ge})},Ie=()=>{const J=`draft-${Bt()}`;z(ce=>({...ce,[J]:{data:{...Z0,id:J,subtitle:"",objectiveId:he},isNew:!0}})),C(ce=>{const ge=new Set(ce);return ge.add(J),ge})},X=J=>{const ce=`draft-${Bt()}`;z(ge=>({...ge,[ce]:{data:{id:ce,name:`${J.name} (copia)`,subtitle:J.subtitle??"",objectiveId:J.objectiveId,parentWorkId:J.parentWorkId??"",nodeType:J.nodeType??"",tags:J.tags??[],orderHint:J.orderHint??0,nextWorkId:"",variantOfWorkId:"",descriptionMarkdown:J.descriptionMarkdown,estimatedMinutes:J.estimatedMinutes,notes:J.notes??"",videoUrls:de(J.videoUrls.slice()),visibility:"private",collaborators:[""]},isNew:!0}})),C(ge=>{const Pe=new Set(ge);return Pe.add(ce),Pe}),k({type:"success",text:"Duplicacin creada. Ajusta y guarda para confirmarla."})},je=J=>{const ce=`draft-${Bt()}`;z(ge=>({...ge,[ce]:{data:{...Z0,id:ce,subtitle:"",objectiveId:J.objectiveId,parentWorkId:J.id,estimatedMinutes:J.estimatedMinutes,visibility:J.visibility??"private",collaborators:[""]},isNew:!0}})),C(ge=>{const Pe=new Set(ge);return Pe.add(ce),Pe}),k({type:"success",text:`Creando un trabajo hijo para ${J.name}. Ajusta y guarda para confirmarlo.`})},De=J=>{C(ce=>{const ge=new Set(ce);return ge.has(J)?ge.delete(J):ge.add(J),ge})},Ye=J=>{z(ce=>{const ge={...ce};return delete ge[J],ge}),J.startsWith("draft-")&&C(ce=>{const ge=new Set(ce);return ge.delete(J),ge})},Ze=async J=>{const ce=P[J];if(!ce||ne)return;if(!p){k({type:"error",text:"Inicia sesin para guardar este trabajo."});return}const ge=(ce.data.parentWorkId??"").trim(),Pe=ge.length>0?ge:void 0,ke=ce.data.nodeType.trim(),ue=ke.length>0?ke:void 0,Te=GF(ce.data.tags??[]),ae=Number(ce.data.orderHint)>0?Number(ce.data.orderHint):void 0,pe=(ce.data.nextWorkId??"").trim(),Re=pe.length>0?pe:void 0,He=(ce.data.variantOfWorkId??"").trim(),ve=He.length>0?He:void 0,F={name:ce.data.name.trim(),subtitle:ce.data.subtitle.trim()||void 0,objectiveId:ce.data.objectiveId,nodeType:ue,tags:Te,orderHint:ae,nextWorkId:Re,variantOfWorkId:ve,descriptionMarkdown:ce.data.descriptionMarkdown,estimatedMinutes:Number(ce.data.estimatedMinutes)||0,notes:ce.data.notes.trim()||void 0,videoUrls:ce.data.videoUrls.map(K=>K.trim()).filter(Boolean),parentWorkId:Pe,visibility:ce.data.visibility,collaboratorEmails:Array.from(new Set(ce.data.collaborators.map(K=>K.trim().toLowerCase()).filter(K=>K.length>0)))};if(!F.name){k({type:"error",text:"El nombre es obligatorio."});return}if(!F.objectiveId){k({type:"error",text:"Selecciona un objetivo para el trabajo."});return}if(F.parentWorkId&&ce.originalId){if(F.parentWorkId===ce.originalId){k({type:"error",text:"Un trabajo no puede ser su propio padre."});return}const K=ee.get(ce.originalId);if(K&&K.has(F.parentWorkId)){k({type:"error",text:"Selecciona un trabajo padre que no sea un descendiente."});return}}if(ce.originalId&&F.nextWorkId===ce.originalId){k({type:"error",text:"Un trabajo no puede tenerse como siguiente."});return}if(ce.originalId&&F.variantOfWorkId===ce.originalId){k({type:"error",text:"Un trabajo no puede ser variante de s mismo."});return}const L=ce.originalId?Y.get(ce.originalId):void 0,V=ce.isNew||((L==null?void 0:L.isOwner)??!1);Z(J);try{if(ce.isNew){const K=await r({name:F.name,subtitle:F.subtitle,objectiveId:F.objectiveId,parentWorkId:F.parentWorkId,nodeType:F.nodeType,tags:F.tags,orderHint:F.orderHint,nextWorkId:F.nextWorkId,variantOfWorkId:F.variantOfWorkId,descriptionMarkdown:F.descriptionMarkdown,estimatedMinutes:F.estimatedMinutes,notes:F.notes,videoUrls:F.videoUrls,visibility:F.visibility,collaboratorEmails:F.collaboratorEmails},p);k({type:"success",text:"Trabajo creado correctamente."}),C(se=>{const fe=new Set(se);return fe.delete(J),fe.add(K.id),fe})}else if(ce.originalId){const K={name:F.name,subtitle:F.subtitle??null,objectiveId:F.objectiveId,parentWorkId:F.parentWorkId??null,nodeType:F.nodeType??null,tags:F.tags,orderHint:F.orderHint??null,nextWorkId:F.nextWorkId??null,variantOfWorkId:F.variantOfWorkId??null,descriptionMarkdown:F.descriptionMarkdown,estimatedMinutes:F.estimatedMinutes,notes:F.notes??null,videoUrls:F.videoUrls};V&&(K.visibility=F.visibility,K.collaboratorEmails=F.collaboratorEmails),await i(ce.originalId,K,p),k({type:"success",text:"Trabajo actualizado."})}z(K=>{const se={...K};return delete se[J],se})}catch(K){console.error("No se pudo guardar el trabajo",K),k({type:"error",text:"No se han podido guardar los cambios. Comprueba tus permisos e intntalo de nuevo."})}finally{Z(null)}},ft=async J=>{var ge;if(!p){k({type:"error",text:"Inicia sesin para eliminar trabajos."});return}const ce=(((ge=ee.get(J))==null?void 0:ge.size)??0)>0;try{if(!await o(J,p)){k({type:"error",text:ce?"No se puede eliminar porque tiene trabajos hijos.":"No se puede eliminar porque est siendo usado en alguna sesin."});return}k({type:"success",text:"Trabajo eliminado."}),z(ke=>{const ue={...ke};return delete ue[J],ue}),C(ke=>{const ue=new Set(ke);return ue.delete(J),ue})}catch(Pe){console.error("No se pudo eliminar el trabajo",Pe),k({type:"error",text:"No tienes permisos para eliminar este trabajo o se ha producido un error."})}},Pt=async J=>{if(!p){k({type:"error",text:"Inicia sesin para editar trabajos."});return}if(!(J.canEdit??!1)||(J.nodeType??"").trim().toLowerCase()==="style")return;const ce=(J.tags??[]).map(ke=>ke.trim().toLowerCase()).filter(Boolean),ge=ce.includes(Oa),Pe=ge?ce.filter(ke=>ke!==Oa):Array.from(new Set([...ce,Oa]));D(J.id);try{await i(J.id,{tags:Pe},p),k({type:"success",text:ge?"Incluido en el plan personal.":"Excluido del plan personal."}),window.setTimeout(()=>k(null),1800)}catch(ke){console.error("No se pudo actualizar el trabajo",ke),k({type:"error",text:"No se han podido guardar los cambios. Comprueba tus permisos e intntalo de nuevo."})}finally{D(null)}};return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("header",{className:"glass-panel space-y-4 p-6 sm:p-10",children:[m.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold",children:"Trabajos"}),m.jsx("p",{className:"max-w-2xl text-white/60",children:"Gestiona los ejercicios reutilizables por objetivo. Duplica, edita y ajusta los detalles sin salir del listado."})]}),m.jsxs("div",{className:"flex w-full flex-col gap-3 sm:w-auto sm:flex-row sm:items-center",children:[m.jsx("input",{type:"search",className:"input-field w-full sm:w-72",value:y,onChange:J=>v(J.target.value),placeholder:"Buscar por nombre, descripcin u objetivo"}),m.jsx($i,{to:"/catalog/taxonomy",className:"btn-secondary",children:"Taxonomy"}),m.jsx("button",{type:"button",className:"btn-primary",onClick:Ie,children:"Nuevo trabajo"}),c?m.jsx("span",{className:"text-xs text-white/60 sm:ml-3",children:"Sincronizando trabajos"}):null]})]}),S&&m.jsx("div",{className:ze("rounded-2xl border px-4 py-3 text-sm",S.type==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-rose-500/40 bg-rose-500/10 text-rose-200"),children:S.text})]}),m.jsx("section",{className:"space-y-6",children:we.length===0?c?m.jsx("div",{className:"glass-panel p-10 text-center text-white/60",children:"Sincronizando trabajos"}):m.jsx("div",{className:"glass-panel p-10 text-center text-white/50",children:"An no hay trabajos guardados. Empieza creando uno con el botn Nuevo trabajo."}):we.map(({objective:J,items:ce})=>{const ge=J?J.name:"Sin objetivo asignado",Pe=(J==null?void 0:J.id)??Th,ke=I.has(Pe);return m.jsxs("div",{className:"glass-panel space-y-4 p-6",children:[m.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("button",{type:"button",onClick:()=>M(ue=>{const Te=new Set(ue);return Te.has(Pe)?Te.delete(Pe):Te.add(Pe),Te}),className:"inline-flex h-8 w-8 items-center justify-center rounded-full border border-white/15 bg-white/5 text-sm font-semibold text-white/70 transition hover:border-white/30 hover:text-white","aria-label":ke?"Expandir grupo":"Colapsar grupo",title:ke?"Expandir":"Colapsar",children:ke?"":""}),m.jsx("h3",{className:"text-lg font-semibold text-white",children:ge}),m.jsx(Bi,{objective:J,size:"sm"})]}),m.jsxs("span",{className:"rounded-full border border-white/10 px-3 py-1 text-xs text-white/60",children:[ce.length," trabajo",ce.length===1?"":"s"]})]}),ke?null:m.jsx("div",{className:"space-y-4",children:ce.filter(ue=>!A(ue)).map(ue=>{var V,K,se,fe,Se,Oe,ot;const Te=E.has(ue.id),ae=(ue.isEditing&&ue.form?ue.form.parentWorkId:ue.parentWorkId)??"",pe=ue.isEditing?T((V=ue.work)==null?void 0:V.id,ae):[],He=(ue.work?re.get(ue.work.id)??[]:[]).length,ve=_.has(ue.id);if(ue.isEditing&&ue.form){const Be=ue.isNew||(((K=ue.work)==null?void 0:K.canEdit)??!1),ht=ue.isNew||(((se=ue.work)==null?void 0:se.isOwner)??!1),lt=ue.isNew||(((fe=ue.work)==null?void 0:fe.isOwner)??!1);return m.jsx(QF,{form:ue.form,objectiveOptions:W,parentOptions:pe,workOptions:U,nodeTypeOptions:G,tagOptions:$,onCreateNodeType:l,onCreateTag:u,depth:ue.depth,onFieldChange:Ge=>me(ue.id,$e=>{const Ue={...$e.data,...Ge};if(Ge.parentWorkId!==void 0&&Ge.parentWorkId.length>0){const nt=Y.get(Ge.parentWorkId);nt&&(Ue.objectiveId=nt.objectiveId)}return Ge.visibility==="private"&&(Ue.collaborators=[""]),{...$e,data:Ue}}),onVideoChange:(Ge,$e)=>me(ue.id,Ue=>{const nt=Ue.data.videoUrls.slice();return nt[Ge]=$e,{...Ue,data:{...Ue.data,videoUrls:nt}}}),onAddVideo:()=>me(ue.id,Ge=>({...Ge,data:{...Ge.data,videoUrls:[...Ge.data.videoUrls,""]}})),onRemoveVideo:Ge=>me(ue.id,$e=>{const Ue=$e.data.videoUrls.slice();return Ue.splice(Ge,1),{...$e,data:{...$e.data,videoUrls:Ue.length?Ue:[""]}}}),onCollaboratorChange:(Ge,$e)=>me(ue.id,Ue=>{const nt=Ue.data.collaborators.slice();return nt[Ge]=$e,{...Ue,data:{...Ue.data,collaborators:nt}}}),onAddCollaborator:()=>me(ue.id,Ge=>Ge.data.collaborators.length>=G1?Ge:{...Ge,data:{...Ge.data,collaborators:[...Ge.data.collaborators,""]}}),onRemoveCollaborator:Ge=>me(ue.id,$e=>{const Ue=$e.data.collaborators.slice();return Ue.splice(Ge,1),Ue.length||Ue.push(""),{...$e,data:{...$e.data,collaborators:Ue}}}),onSave:()=>void Ze(ue.id),onCancel:()=>Ye(ue.id),isNew:ue.isNew,canEditContent:Be,canManageSharing:ht,isSaving:ne===ue.id,isOwner:lt,ownerEmail:(Se=ue.work)==null?void 0:Se.ownerEmail},ue.id)}if(!ue.work)return null;const F=ue.work.nextWorkId?O.get(ue.work.nextWorkId)??((Oe=Y.get(ue.work.nextWorkId))==null?void 0:Oe.name):void 0,L=ue.work.variantOfWorkId?O.get(ue.work.variantOfWorkId)??((ot=Y.get(ue.work.variantOfWorkId))==null?void 0:ot.name):void 0;return m.jsx(JF,{work:ue.work,childCount:He,depth:ue.depth,expanded:Te,isTreeCollapsed:ve,isPersonalExcluded:(ue.work.tags??[]).map(Be=>Be.trim().toLowerCase()).includes(Oa),canTogglePersonal:(ue.work.canEdit??!1)&&(ue.work.nodeType??"").trim().toLowerCase()!=="style",personalToggleBusy:R===ue.id,nextLabel:F,variantLabel:L,onToggle:()=>De(ue.id),onToggleTree:()=>j(Be=>{const ht=new Set(Be);return ht.has(ue.id)?ht.delete(ue.id):ht.add(ue.id),ht}),onTogglePersonal:()=>{ue.work&&Pt(ue.work)},onEdit:()=>{const Be=ue.work;Be&&(Be.canEdit??!1)&&Ae(Be)},onDuplicate:()=>{const Be=ue.work;Be&&(Be.canEdit??!1)&&X(Be)},onCreateChild:()=>{const Be=ue.work;Be&&(Be.canEdit??!1)&&je(Be)},onDelete:()=>{const Be=ue.work;Be&&(Be.isOwner??!1)&&ft(Be.id)}},ue.id)})})]},(J==null?void 0:J.id)??"sin-objetivo")})})]})}function ew(e){return e.reduce((t,n)=>(t[n]=(t[n]??0)+1,t),{})}function ZF(){const{works:e,workTaxonomy:t,upsertNodeType:n,removeNodeType:r,upsertTag:i,removeTag:o}=Ce(E=>({works:E.works,workTaxonomy:E.workTaxonomy,upsertNodeType:E.upsertNodeType,removeNodeType:E.removeNodeType,upsertTag:E.upsertTag,removeTag:E.removeTag})),[l,u]=w.useState(""),[c,f]=w.useState(""),[h,p]=w.useState(null),y=w.useMemo(()=>{const E=e.map(C=>(C.nodeType??"").trim().toLowerCase()).filter(Boolean);return ew(E)},[e]),v=w.useMemo(()=>{const E=e.flatMap(C=>(C.tags??[]).map(_=>_.trim().toLowerCase()).filter(Boolean));return ew(E)},[e]),S=t.nodeTypes.slice().sort((E,C)=>E.label.localeCompare(C.label,"en",{sensitivity:"base"})),k=t.tags.slice().sort((E,C)=>E.name.localeCompare(C.name,"en",{sensitivity:"base"}));return m.jsxs("div",{className:"space-y-6",children:[m.jsx("header",{className:"flex flex-wrap items-start justify-between gap-4 rounded-3xl border border-white/10 bg-white/5 px-6 py-5",children:m.jsxs("div",{children:[m.jsx("p",{className:"font-display text-2xl font-semibold",children:"Taxonomy"}),m.jsx("p",{className:"mt-1 text-sm text-white/60",children:"Node types and tags used across the catalog and personal planning."}),m.jsx("p",{className:"mt-2 text-sm",children:m.jsx($i,{to:"/catalog",className:"text-sky-300 hover:text-sky-200",children:" Back to Catalog"})})]})}),h?m.jsx("div",{className:`rounded-2xl border px-4 py-3 text-sm ${h.type==="success"?"border-emerald-500/30 bg-emerald-500/10 text-emerald-100":"border-rose-500/30 bg-rose-500/10 text-rose-100"}`,children:h.text}):null,m.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[m.jsxs("section",{className:"rounded-3xl border border-white/10 bg-white/5 p-6",children:[m.jsx("div",{className:"flex items-start justify-between gap-4",children:m.jsxs("div",{children:[m.jsx("h2",{className:"text-lg font-semibold",children:"Node types"}),m.jsx("p",{className:"mt-1 text-sm text-white/60",children:"Used by works and group rules. Keys are stored in works."})]})}),m.jsxs("div",{className:"mt-5 flex flex-col gap-3 sm:flex-row sm:items-end",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-white/50",children:"New node type"}),m.jsx("input",{className:"input-field mt-2",value:l,onChange:E=>u(E.target.value),placeholder:"e.g. Dance figures"})]}),m.jsx("button",{type:"button",className:"btn-primary",onClick:()=>{const E=n(l);if(!E){p({type:"error",text:"Please enter a valid node type."});return}u(""),p({type:"success",text:`Node type created: ${E}`})},children:"Add"})]}),m.jsxs("div",{className:"mt-6 space-y-2",children:[S.map(E=>{const C=(y[E.key]??0)>0;return m.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 rounded-2xl border border-white/10 bg-slate-950/30 px-4 py-3",children:[m.jsxs("div",{children:[m.jsx("p",{className:"font-semibold text-white",children:E.label}),m.jsxs("p",{className:"text-xs text-white/50",children:["key: ",m.jsx("span",{className:"font-mono",children:E.key}),"  used by ",y[E.key]??0," works"]})]}),m.jsx("button",{type:"button",disabled:C,className:"rounded-full border border-white/15 bg-white/5 px-3 py-2 text-xs font-semibold text-white/70 transition hover:border-white/30 hover:text-white disabled:opacity-50",title:C?"Cannot delete: in use":"Delete",onClick:()=>{const _=r(E.key);p(_?{type:"success",text:`Node type removed: ${E.key}`}:{type:"error",text:"Cannot remove node type (it may be in use)."})},children:"Delete"})]},E.key)}),S.length===0?m.jsx("p",{className:"text-sm text-white/60",children:"No node types yet."}):null]})]}),m.jsxs("section",{className:"rounded-3xl border border-white/10 bg-white/5 p-6",children:[m.jsx("div",{className:"flex items-start justify-between gap-4",children:m.jsxs("div",{children:[m.jsx("h2",{className:"text-lg font-semibold",children:"Tags"}),m.jsx("p",{className:"mt-1 text-sm text-white/60",children:"Lowercase slugs (spaces become hyphens). Deleting is blocked if used."})]})}),m.jsxs("div",{className:"mt-5 flex flex-col gap-3 sm:flex-row sm:items-end",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-white/50",children:"New tag"}),m.jsx("input",{className:"input-field mt-2",value:c,onChange:E=>f(E.target.value),placeholder:"e.g. bei-shaolin"})]}),m.jsx("button",{type:"button",className:"btn-primary",onClick:()=>{const E=i(c);if(!E){p({type:"error",text:"Please enter a valid tag."});return}f(""),p({type:"success",text:`Tag created: ${E}`})},children:"Add"})]}),m.jsxs("div",{className:"mt-6 space-y-2",children:[k.map(E=>{const C=(v[E.name]??0)>0;return m.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 rounded-2xl border border-white/10 bg-slate-950/30 px-4 py-3",children:[m.jsxs("div",{children:[m.jsx("p",{className:"font-semibold text-white",children:E.name}),m.jsxs("p",{className:"text-xs text-white/50",children:["used by ",v[E.name]??0," works"]})]}),m.jsx("button",{type:"button",disabled:C,className:"rounded-full border border-white/15 bg-white/5 px-3 py-2 text-xs font-semibold text-white/70 transition hover:border-white/30 hover:text-white disabled:opacity-50",title:C?"Cannot delete: in use":"Delete",onClick:()=>{const _=o(E.name);p(_?{type:"success",text:`Tag removed: ${E.name}`}:{type:"error",text:"Cannot remove tag (it may be in use)."})},children:"Delete"})]},E.name)}),k.length===0?m.jsx("p",{className:"text-sm text-white/60",children:"No tags yet."}):null]})]})]})]})}const Ih={name:"",colorHex:"#60a5fa",descriptionMarkdown:""},tw=["#F97316","#FB7185","#F43F5E","#EC4899","#D946EF","#A855F7","#8B5CF6","#6366F1","#4F46E5","#3B82F6","#38BDF8","#0EA5E9","#06B6D4","#14B8A6","#0D9488","#10B981","#22C55E","#65A30D","#84CC16","#A3E635","#FACC15","#FBBF24","#F59E0B","#EA580C","#C2410C","#E11D48","#EF4444","#F87171","#FB923C","#F472B6","#FDE047","#7C3AED"];function e5(){const e=Ce(k=>k.objectives),t=Ce(k=>k.addObjective),n=Ce(k=>k.updateObjective),r=Ce(k=>k.deleteObjective),i=Ce(k=>k.works),[o,l]=w.useState(Ih),[u,c]=w.useState(null),f=w.useMemo(()=>{const k=new Map;return i.forEach(E=>{k.set(E.objectiveId,(k.get(E.objectiveId)??0)+1)}),k},[i]),h=w.useMemo(()=>[...e].sort((k,E)=>(k.name??"").localeCompare(E.name??"","es")),[e]),p=k=>{if(k.preventDefault(),!o.name.trim()){c({type:"error",text:"El nombre es obligatorio."});return}const E={name:o.name.trim(),colorHex:o.colorHex,descriptionMarkdown:o.descriptionMarkdown};o.id?(n(o.id,E),c({type:"success",text:"Objetivo actualizado."})):(t(E),c({type:"success",text:"Objetivo creado."})),l(Ih)},y=k=>{l({id:k.id,name:k.name,colorHex:k.colorHex,descriptionMarkdown:k.descriptionMarkdown})},v=k=>{const E=r(k);c(E?{type:"success",text:"Objetivo eliminado."}:{type:"error",text:"No se puede eliminar porque tiene trabajos asociados."})},S=()=>{if(e.length===0){c({type:"error",text:"No hay objetivos a los que asignar colores."});return}const k=[...tw];e.map((C,_)=>{const j=k[_%k.length];return{id:C.id,colorHex:j}}).forEach(({id:C,colorHex:_})=>n(C,{colorHex:_})),c({type:"success",text:"Colores repartidos equitativamente entre los objetivos."})};return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("header",{className:"glass-panel p-6 sm:p-10",children:[m.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold",children:"Objetivos"}),m.jsx("p",{className:"text-white/60",children:"Define categoras de trabajo con color y contexto para identificar visualmente cada ejercicio."})]}),m.jsx("div",{className:"flex flex-wrap gap-3",children:m.jsx("button",{type:"button",className:"btn-secondary",onClick:S,children:"Repartir colores"})})]}),u&&m.jsx("div",{className:`mt-4 rounded-2xl border px-4 py-3 text-sm ${u.type==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-rose-500/40 bg-rose-500/10 text-rose-200"}`,children:u.text})]}),m.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.1fr_1.5fr]",children:[m.jsxs("section",{className:"glass-panel p-6",children:[m.jsx("h2",{className:"text-xl font-semibold text-white",children:o.id?"Editar objetivo":"Nuevo objetivo"}),m.jsxs("form",{className:"mt-4 space-y-4",onSubmit:p,children:[m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Nombre"}),m.jsx("input",{type:"text",className:"input-field",value:o.name,onChange:k=>l(E=>({...E,name:k.target.value})),placeholder:"Ej. Resistencia, Tcnica, Juego",required:!0})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Color identificativo"}),m.jsxs("div",{className:"flex flex-wrap gap-3",children:[m.jsx("input",{type:"color",className:"h-12 w-12 cursor-pointer rounded-full border border-white/20 bg-transparent",value:o.colorHex,onChange:k=>l(E=>({...E,colorHex:k.target.value})),"aria-label":"Elegir color personalizado"}),m.jsx("input",{type:"text",className:"input-field max-w-[140px]",value:o.colorHex,onChange:k=>l(E=>({...E,colorHex:k.target.value})),placeholder:"#60a5fa","aria-label":"Cdigo hex del color"})]}),m.jsx("div",{className:"grid grid-cols-8 gap-2 rounded-3xl border border-white/10 bg-white/5 p-3",children:tw.map(k=>m.jsx("button",{type:"button",onClick:()=>l(E=>({...E,colorHex:k})),className:ze("relative flex h-9 w-9 items-center justify-center rounded-full border border-white/20 transition hover:scale-105 focus:outline-none focus:ring-2 focus:ring-white/60",o.colorHex.toLowerCase()===k.toLowerCase()&&"ring-2 ring-white/80 ring-offset-2 ring-offset-slate-900"),style:{backgroundColor:k},"aria-label":`Seleccionar color ${k}`,children:o.colorHex.toLowerCase()===k.toLowerCase()&&m.jsx("span",{className:"text-xs font-semibold text-slate-900",children:""})},k))})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Descripcin (Markdown)"}),m.jsx("textarea",{className:"input-field min-h-[140px]",value:o.descriptionMarkdown,onChange:k=>l(E=>({...E,descriptionMarkdown:k.target.value})),placeholder:"Explica cundo usar este tipo de trabajo, objetivos pedaggicos, etc."})]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("button",{type:"submit",className:"btn-primary",children:o.id?"Guardar objetivo":"Crear objetivo"}),o.id&&m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>l(Ih),children:"Cancelar edicin"})]})]})]}),m.jsx("section",{className:"space-y-6",children:h.length===0?m.jsx("div",{className:"glass-panel p-10 text-center text-white/50",children:"An no has creado objetivos. Crea uno con el formulario para clasificarlos por color y descripcin."}):h.map(k=>m.jsxs("div",{className:"glass-panel space-y-4 p-6",children:[m.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[m.jsx(Bi,{objective:k}),m.jsxs("div",{className:"flex items-center gap-3 text-xs text-white/60",children:[m.jsxs("span",{children:[f.get(k.id)??0," trabajos"]}),m.jsx("button",{type:"button",className:"btn-secondary px-3 py-1 text-xs",onClick:()=>y(k),children:"Editar"}),m.jsx("button",{type:"button",className:"inline-flex items-center justify-center rounded-full border border-rose-500/40 px-3 py-1 text-xs font-semibold text-rose-300",onClick:()=>v(k.id),children:"Eliminar"})]})]}),m.jsx(Ss,{content:k.descriptionMarkdown})]},k.id))})]})]})}const Ph={name:"",notes:"",active:!0};function t5(){const e=Ce(h=>h.assistants),t=Ce(h=>h.addAssistant),n=Ce(h=>h.updateAssistant),r=Ce(h=>h.deleteAssistant),[i,o]=w.useState(Ph),[l,u]=w.useState(null),c=h=>{if(h.preventDefault(),!i.name.trim()){u({type:"error",text:"El nombre es obligatorio."});return}const p={name:i.name.trim(),notes:i.notes,active:i.active};i.id?(n(i.id,p),u({type:"success",text:"Asistente actualizado."})):(t(p),u({type:"success",text:"Asistente aadido."})),o(Ph)},f=h=>{o({id:h.id,name:h.name,notes:h.notes??"",active:h.active})};return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("header",{className:"glass-panel p-6 sm:p-10",children:[m.jsx("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold",children:"Asistentes"}),m.jsx("p",{className:"text-white/60",children:"Mantn una lista base de alumnado para registrar asistencia rpidamente durante cada sesin."})]})}),l&&m.jsx("div",{className:ze("mt-4 rounded-2xl border px-4 py-3 text-sm",l.type==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-rose-500/40 bg-rose-500/10 text-rose-200"),children:l.text})]}),m.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.1fr_1.5fr]",children:[m.jsxs("section",{className:"glass-panel p-6",children:[m.jsx("h2",{className:"text-xl font-semibold text-white",children:i.id?"Editar asistente":"Nuevo asistente"}),m.jsxs("form",{className:"mt-4 space-y-4",onSubmit:c,children:[m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Nombre"}),m.jsx("input",{type:"text",className:"input-field",value:i.name,onChange:h=>o(p=>({...p,name:h.target.value})),placeholder:"Nombre y apellidos",required:!0})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Notas"}),m.jsx("textarea",{className:"input-field min-h-[120px]",value:i.notes,onChange:h=>o(p=>({...p,notes:h.target.value})),placeholder:"Observaciones, nivel, lesiones, etc."})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("input",{id:"assistant-active",type:"checkbox",className:"h-5 w-5 rounded border border-white/20 bg-white/10 text-sky-400",checked:i.active,onChange:h=>o(p=>({...p,active:h.target.checked}))}),m.jsx("label",{htmlFor:"assistant-active",className:"text-sm text-white/70",children:"Activo (aparecer en los listados de asistencia)"})]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("button",{type:"submit",className:"btn-primary",children:i.id?"Guardar asistente":"Aadir asistente"}),i.id&&m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>o(Ph),children:"Cancelar edicin"})]})]})]}),m.jsx("section",{className:"space-y-4",children:e.length===0?m.jsx("div",{className:"glass-panel p-10 text-center text-white/50",children:"Todava no tienes asistentes guardados. Crea uno desde el formulario para empezar a marcar asistencia en sesiones."}):e.map(h=>m.jsxs("div",{className:"glass-panel flex flex-col gap-4 p-6 sm:flex-row sm:items-start sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-lg font-semibold text-white",children:h.name}),h.notes?m.jsx("p",{className:"text-sm text-white/60",children:h.notes}):null]}),m.jsxs("div",{className:"flex flex-col items-start gap-3 sm:items-end",children:[m.jsx("span",{className:ze("rounded-full border px-3 py-1 text-xs font-semibold",h.active?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-white/20 bg-white/5 text-white/60"),children:h.active?"Activo":"Inactivo"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{type:"button",className:"btn-secondary px-3 py-1 text-xs",onClick:()=>f(h),children:"Editar"}),m.jsx("button",{type:"button",className:"inline-flex items-center justify-center rounded-full border border-rose-500/40 px-3 py-1 text-xs font-semibold text-rose-300",onClick:()=>r(h.id),children:"Eliminar"})]})]})]},h.id))})]})]})}function ho(e,t){return m.jsxs("div",{className:"flex items-center justify-between rounded-2xl border border-white/10 bg-white/5 px-4 py-2 text-sm text-white/70",children:[m.jsx("span",{children:e}),m.jsx("span",{className:"font-semibold text-white",children:t})]},e)}function n5(){var c,f,h,p,y,v;const e=Ce(S=>S.exportBackup),t=Ce(S=>S.importBackup),[n,r]=w.useState(null),[i,o]=w.useState(null),l=()=>{try{const S=e(),k=new Blob([JSON.stringify(S,null,2)],{type:"application/json"}),E=URL.createObjectURL(k),C=document.createElement("a");C.href=E,C.download=`sport-planner-backup-${new Date().toISOString().slice(0,10)}.json`,C.click(),URL.revokeObjectURL(E),r({type:"success",text:"Backup exportado correctamente."})}catch(S){console.error(S),r({type:"error",text:"No se pudo exportar el backup."})}},u=async S=>{var E;const k=(E=S.target.files)==null?void 0:E[0];if(k)try{const C=await k.text(),_=JSON.parse(C);t(_),o(_),r({type:"success",text:"Datos importados correctamente."})}catch(C){console.error(C),r({type:"error",text:"No se pudo importar el archivo. Revisa que sea un JSON vlido."})}finally{S.target.value=""}};return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("header",{className:"glass-panel p-6 sm:p-10",children:[m.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold",children:"Backups"}),m.jsx("p",{className:"text-white/60",children:"Exporta e importa toda tu informacin en JSON versionado para compartir o restaurar en cualquier momento."})]}),m.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row",children:[m.jsx("button",{type:"button",className:"btn-primary",onClick:l,children:"Descargar backup"}),m.jsxs("label",{className:"btn-secondary cursor-pointer",children:["Importar backup",m.jsx("input",{type:"file",accept:"application/json",className:"hidden",onChange:u})]})]})]}),n&&m.jsx("div",{className:`mt-4 rounded-2xl border px-4 py-3 text-sm ${n.type==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-rose-500/40 bg-rose-500/10 text-rose-200"}`,children:n.text})]}),i&&m.jsxs("section",{className:"glass-panel space-y-4 p-6",children:[m.jsx("h2",{className:"text-xl font-semibold text-white",children:"ltima importacin"}),m.jsxs("p",{className:"text-sm text-white/60",children:["Versin del backup: ",i.version]}),m.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[ho("Objetivos",((c=i.objetivos)==null?void 0:c.length)??0),ho("Trabajos",((f=i.trabajos)==null?void 0:f.length)??0),ho("Sesiones",((h=i.sesiones)==null?void 0:h.length)??0),ho("Asistentes",((p=i.asistentes)==null?void 0:p.length)??0),ho("Sesiones  Trabajos",((y=i.sesiones_trabajos)==null?void 0:y.length)??0),ho("Sesiones  Asistencias",((v=i.sesiones_asistencias)==null?void 0:v.length)??0)]})]}),m.jsxs("section",{className:"glass-panel space-y-3 p-6 text-sm text-white/70",children:[m.jsx("h2",{className:"text-lg font-semibold text-white",children:"Consejos"}),m.jsxs("ul",{className:"list-disc space-y-2 pl-5",children:[m.jsx("li",{children:"Guarda tus backups en un servicio en la nube para poder restaurarlos desde cualquier dispositivo."}),m.jsx("li",{children:"Antes de importar, realiza una exportacin por seguridad. La restauracin sobrescribe los datos actuales sin posibilidad de deshacer."}),m.jsx("li",{children:"Los backups mantienen los IDs, as que puedes sincronizar manualmente varias instalaciones si lo necesitas."})]})]})]})}function r5(){const{signInWithPassword:e,signUpWithPassword:t,session:n,loading:r}=Ns(),[i,o]=w.useState("login"),[l,u]=w.useState(""),[c,f]=w.useState(""),[h,p]=w.useState(""),[y,v]=w.useState(!1),[S,k]=w.useState(null),[E,C]=w.useState(null);if(!r&&n)return m.jsx(Ja,{to:"/",replace:!0});const _=async I=>{if(I.preventDefault(),k(null),C(null),!l||!c){k("Introduce tu email y contrasea.");return}if(i==="register"&&c!==h){k("Las contraseas no coinciden.");return}try{v(!0),i==="login"?await e(l,c):(await t(l,c),C("Revisa tu correo para confirmar la cuenta y vuelve a iniciar sesin."))}catch(M){const P=M instanceof Error?M.message:"No se pudo completar la operacin.";k(P)}finally{v(!1)}},j=()=>{o(I=>I==="login"?"register":"login"),k(null),C(null),f(""),p("")};return m.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-950 px-4 py-12",children:m.jsxs("div",{className:"w-full max-w-md rounded-3xl border border-white/10 bg-slate-900/80 p-8 shadow-2xl backdrop-blur",children:[m.jsxs("header",{className:"mb-8 text-center",children:[m.jsx("div",{className:"mx-auto mb-4 flex h-14 w-14 items-center justify-center rounded-full bg-gradient-to-br from-sky-500 to-indigo-500 text-xl font-bold text-white",children:"SP"}),m.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-white",children:i==="login"?"Inicia sesin":"Crea tu cuenta"}),m.jsx("p",{className:"mt-2 text-sm text-white/60",children:"Accede a tus planes desde cualquier dispositivo con Supabase."})]}),m.jsxs("form",{className:"space-y-5",onSubmit:_,children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"email",className:"block text-xs font-semibold uppercase tracking-wide text-white/50",children:"Email"}),m.jsx("input",{id:"email",type:"email",required:!0,className:"input-field w-full",value:l,onChange:I=>u(I.target.value),placeholder:"tu@correo.com",autoComplete:"email"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"password",className:"block text-xs font-semibold uppercase tracking-wide text-white/50",children:"Contrasea"}),m.jsx("input",{id:"password",type:"password",required:!0,className:"input-field w-full",value:c,onChange:I=>f(I.target.value),autoComplete:i==="login"?"current-password":"new-password"})]}),i==="register"&&m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"confirmPassword",className:"block text-xs font-semibold uppercase tracking-wide text-white/50",children:"Confirmar contrasea"}),m.jsx("input",{id:"confirmPassword",type:"password",required:!0,className:"input-field w-full",value:h,onChange:I=>p(I.target.value),autoComplete:"new-password"})]}),S&&m.jsx("div",{className:"rounded-xl border border-red-500/30 bg-red-500/10 px-4 py-3 text-sm text-red-200",children:S}),E&&m.jsx("div",{className:"rounded-xl border border-emerald-500/30 bg-emerald-500/10 px-4 py-3 text-sm text-emerald-200",children:E}),m.jsx("button",{type:"submit",className:"btn-primary w-full justify-center",disabled:y,children:y?"Procesando":i==="login"?"Entrar":"Crear cuenta"})]}),m.jsx("footer",{className:"mt-6 text-center text-sm text-white/60",children:i==="login"?m.jsx("button",{type:"button",className:"text-sky-300 hover:text-sky-200",onClick:j,children:"No tienes cuenta? Regstrate"}):m.jsx("button",{type:"button",className:"text-sky-300 hover:text-sky-200",onClick:j,children:"Ya tienes cuenta? Inicia sesin"})})]})})}tt.locale("es");function i5(){const e=Ce(I=>I.plans),[t,n]=Oo(),r=(t.get("plan")??"").trim(),i=w.useMemo(()=>e.filter(I=>I.kind==="personal"&&I.enabled),[e]),o=w.useMemo(()=>i.length===0?void 0:i.find(M=>M.id===r)??i[0],[i,r]),l=(o==null?void 0:o.id)??"personal-kungfu";w.useEffect(()=>{if(!o||r===o.id)return;const I=new URLSearchParams(t);I.set("plan",o.id),n(I,{replace:!0})},[o,r,t,n]);const u=Ce(I=>I.sessions).filter(I=>I.kind==="personal"&&(I.planId??"personal-kungfu")===l),c=Ce(I=>I.works),f=Ce(I=>I.objectives),h=Ce(I=>I.assistants),p=Ce(I=>I.addSession),y=w.useMemo(()=>[...u].sort((I,M)=>tt(M.date).valueOf()-tt(I.date).valueOf()),[u]),v=t.get("session")??void 0,S=v?u.find(I=>I.id===v):void 0,[k,E]=w.useState(S==null?void 0:S.id);w.useEffect(()=>{if(v&&!u.some(I=>I.id===v)){E(void 0);const I=new URLSearchParams(t);I.delete("session"),n(I,{replace:!0})}},[v,u,t,n]);const C=k?u.find(I=>I.id===k):void 0,_=I=>{E(I);const M=new URLSearchParams(t);M.set("session",I),M.set("plan",l),n(M,{replace:!0})},j=()=>{const I=tt().format("YYYY-MM-DD"),M=u.find(z=>z.date===I);if(M){_(M.id);return}const P=p({date:I,kind:"personal",planId:l,title:(o==null?void 0:o.name)??"Entrenamiento personal",description:"",notes:""});_(P.id)};return m.jsxs("div",{className:"space-y-6",children:[m.jsx("header",{className:"glass-panel p-6 sm:p-10",children:m.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsxs("h1",{className:"text-3xl font-bold",children:[(o==null?void 0:o.name)??"Personal","  Sesiones"]}),m.jsx("p",{className:"text-white/60",children:"Histrico y edicin de sesiones para este plan."})]}),m.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row",children:[m.jsx($i,{to:`/personal?plan=${encodeURIComponent(l)}`,className:"btn-secondary",children:"Volver a hoy"}),m.jsx($i,{to:`/settings?plan=${encodeURIComponent(l)}`,className:"btn-secondary",children:"Ajustes"}),m.jsx("button",{type:"button",className:"btn-primary",onClick:j,children:"Crear/abrir hoy"})]})]})}),m.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.1fr_1.9fr]",children:[m.jsxs("section",{className:"glass-panel space-y-3 p-6",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("h2",{className:"text-lg font-semibold text-white",children:"Sesiones"}),m.jsx("span",{className:"rounded-full border border-white/10 px-3 py-1 text-xs text-white/60",children:y.length})]}),y.length===0?m.jsx("div",{className:"rounded-2xl border border-dashed border-white/15 bg-white/5 p-6 text-sm text-white/50",children:"No hay sesiones personales todava. Crea la sesin de hoy para empezar a registrar tu entrenamiento."}):m.jsx("div",{className:"space-y-2",children:y.map(I=>{const M=I.workItems.filter(P=>(P.completed??!1)||typeof P.result<"u").length;return m.jsxs("button",{type:"button",onClick:()=>_(I.id),className:ze("flex w-full flex-col gap-1 rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-left transition hover:border-white/30 hover:bg-white/10",I.id===k&&"border-sky-400/60 bg-sky-500/10 shadow shadow-sky-500/10"),children:[m.jsx("p",{className:"text-sm font-semibold text-white",children:I.title||"Sesin sin ttulo"}),m.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:tt(I.date).format("ddd  D MMM YYYY")}),m.jsxs("p",{className:"text-xs text-white/60",children:[M,"/",I.workItems.length," registrados"]})]},I.id)})})]}),m.jsx("section",{className:"glass-panel p-6",children:C?m.jsx(Nm,{session:C,works:c,objectives:f,assistants:h}):m.jsx("div",{className:"rounded-2xl border border-dashed border-white/15 bg-white/5 p-10 text-center text-white/50",children:"Selecciona una sesin para verla y editarla."})})]})]})}const Tp=e=>Array.from(new Set((e??[]).map(t=>t.trim().toLowerCase()).filter(Boolean))),K1=e=>Array.from(new Set(e.split(",").map(t=>t.trim()).filter(Boolean))),J1=e=>(e??[]).join(", ");function nw(e){const t=Tp(e.byTags),n=Tp(e.byNodeTypes),r=K1(J1(e.byWorkIds)),i={};return t&&t.length>0&&(i.byTags=t),n&&n.length>0&&(i.byNodeTypes=n),r&&r.length>0&&(i.byWorkIds=r),i}function s5(e){const t={};Object.entries(e.targetsDays??{}).forEach(([r,i])=>{const o=r.trim().toLowerCase(),l=Number(i);o&&Number.isFinite(l)&&(t[o]=Math.max(1,Math.round(l)))});const n=(e.overrides??[]).map(r=>{var i;return{match:{tagsAny:Tp(((i=r.match)==null?void 0:i.tagsAny)??[])},multiplier:Math.max(.1,Number(r.multiplier)||1)}}).filter(r=>r.match.tagsAny.length>0);return{targetsDays:t,overrides:n}}function o5(e){var _,j,I;const t=Math.max(1,Math.round(Number(e.maxItems)||12)),n=Math.max(1,Number(e.minutesBudget)||30),r={};Object.entries(e.defaultMinutesByNodeType??{}).forEach(([M,P])=>{const z=M.trim().toLowerCase(),ne=Number(P);z&&Number.isFinite(ne)&&(r[z]=Math.max(.25,ne))});const i=M=>M==="count"||M==="minutes"||M==="both",o=M=>M==="work"||M==="note",l=M=>M==="overdue"||M==="weighted",u=M=>M==="allow_all"||M==="prefer_leaves",c=M=>{if(!Array.isArray(M))return[];const P=M.map(z=>Number(z)).filter(z=>Number.isFinite(z)).map(z=>Math.round(z)).filter(z=>z>=0&&z<=6);return Array.from(new Set(P)).sort((z,ne)=>z-ne)},f=(M,P)=>{const z=(M.id??"").trim()||Bt(),ne=o(M.type)?M.type:"work",Z=typeof M.enabled=="boolean"?M.enabled:!0,R=Number.isFinite(Number(M.order))?Number(M.order):P,D=(M.name??"").trim()||(ne==="note"?"Recap":"Grupo"),H=i(M.limitMode)?M.limitMode:"minutes",W=Number.isFinite(Number(M.maxItems))?Math.max(0,Math.round(Number(M.maxItems))):void 0,G=Number.isFinite(Number(M.minutesBudget))?Math.max(0,Number(M.minutesBudget)):void 0,$=l(M.strategy)?M.strategy:"overdue",Y=u(M.hierarchyRule)?M.hierarchyRule:"allow_all",re=(M.include??[]).map(nw).filter(ee=>Object.keys(ee).length>0),O=(M.exclude??[]).map(nw).filter(ee=>Object.keys(ee).length>0);return{id:z,name:D,enabled:Z,order:R,type:ne,daysOfWeek:c(M.daysOfWeek),limitMode:H,maxItems:W,minutesBudget:G,strategy:$,hierarchyRule:Y,include:re,exclude:O}},p=((e.groups??[]).length>0?e.groups??[]:[{id:"formas",name:"Formas",enabled:!0,order:1,type:"work",limitMode:"minutes",minutesBudget:18,strategy:"overdue",hierarchyRule:"prefer_leaves",include:[{byNodeTypes:["segment","form"]}],exclude:[]},{id:"tecnicas",name:"Tcnicas",enabled:!0,order:2,type:"work",limitMode:"minutes",minutesBudget:10,strategy:"weighted",hierarchyRule:"allow_all",include:[{byNodeTypes:["technique"]},{byTags:["roulette"]}],exclude:[]},{id:"recap",name:"Recap",enabled:!0,order:99,type:"note",limitMode:"minutes",minutesBudget:2}]).map((M,P)=>f(M,P+1)).sort((M,P)=>M.order-P.order).map((M,P)=>({...M,order:P+1})),y=p.filter(M=>(M.type??"work")!=="note"),v=p.filter(M=>M.type==="note"),S=Math.max(0,Number((_=y[0])==null?void 0:_.minutesBudget)||0),k=Math.max(0,Number((j=y[1])==null?void 0:j.minutesBudget)||0),E=Math.max(0,Number((I=v[0])==null?void 0:I.minutesBudget)||0),C=Math.max(0,S+k+E);return{limitMode:e.limitMode,maxItems:t,minutesBudget:n,template:{totalMinutes:C,focusMinutes:S,rouletteMinutes:k,recapMinutes:E},defaultMinutesByNodeType:r,focusSelectors:[],rouletteSelectors:[],groups:p}}const a5={},rw=[{label:"L",value:1},{label:"M",value:2},{label:"X",value:3},{label:"J",value:4},{label:"V",value:5},{label:"S",value:6},{label:"D",value:0}];function iw(){const e=Ce(X=>X.kungfuCadence),t=Ce(X=>X.kungfuTodayPlan),n=Ce(X=>X.plans),r=Ce(X=>X.workTaxonomy),i=Ce(X=>X.upsertNodeType),o=Ce(X=>X.upsertTag),l=Ce(X=>X.addPlan),u=Ce(X=>X.updatePlan),c=Ce(X=>X.duplicatePlan),f=Ce(X=>X.deletePlan),h=Ce(X=>X.setKungfuCadence),p=Ce(X=>X.setKungfuTodayPlan),[y,v]=Oo(),S=(y.get("plan")??"").trim(),k=w.useMemo(()=>{const X=[...n];return X.sort((je,De)=>{const Ye=je.kind===De.kind?0:je.kind==="class"?-1:1;return Ye!==0?Ye:je.name.localeCompare(De.name,"es",{sensitivity:"base"})}),X},[n]),E=w.useMemo(()=>k.length===0?void 0:k.find(je=>je.id===S)??k[0],[k,S]),C=(E==null?void 0:E.id)??"personal-kungfu",_=(E==null?void 0:E.cadence)??e,j=(E==null?void 0:E.todayPlan)??t,[I,M]=w.useState((E==null?void 0:E.name)??"Plan"),[P,z]=w.useState((E==null?void 0:E.enabled)??!0),[ne,Z]=w.useState(_),[R,D]=w.useState(j),[H,W]=w.useState(null),[G,$]=w.useState([]),[Y,re]=w.useState("personal");w.useEffect(()=>{if(E){if(S!==E.id){const X=new URLSearchParams(y);X.set("plan",E.id),v(X,{replace:!0})}M(E.name),z(E.enabled),E.kind==="personal"?(Z(E.cadence??e),D(E.todayPlan??t)):(Z(e),D(t))}},[E,S,y,v,e,t]);const O=w.useMemo(()=>{if(!E)return!1;const X=E.name!==I||E.enabled!==P;return E.kind!=="personal"?X:X||JSON.stringify(_)!==JSON.stringify(ne)||JSON.stringify(j)!==JSON.stringify(R)},[E,_,j,I,P,ne,R]),ee=X=>{W(X),X&&window.setTimeout(()=>W(null),X.type==="success"?1800:2600)},T=()=>{try{const X={name:I.trim()||(E==null?void 0:E.name)||"Plan",enabled:P};if((E==null?void 0:E.kind)==="personal"){const je=s5(ne),De=o5(R);u(C,{...X,cadence:je,todayPlan:De}),C==="personal-kungfu"&&(h(je),p(De))}else u(C,X);ee({type:"success",text:"Guardado."})}catch(X){const je=X instanceof Error?X.message:"No se pudo guardar.";ee({type:"error",text:je})}},U=()=>{E&&(M(E.name),z(E.enabled)),Z(_),D(j),ee({type:"success",text:"Cambios descartados."})},te=w.useMemo(()=>(r.nodeTypes??[]).slice().sort((X,je)=>X.label.localeCompare(je.label,"en",{sensitivity:"base"})).map(X=>({value:X.key,label:X.label})),[r.nodeTypes]),A=w.useMemo(()=>(r.tags??[]).slice().sort((X,je)=>X.name.localeCompare(je.name,"en",{sensitivity:"base"})).map(X=>({value:X.name,label:X.name})),[r.tags]),we=w.useMemo(()=>new Map(rw.map(X=>[X.value,X.label])),[]),he=w.useCallback((X,je)=>{$(De=>{const Ye=De.includes(X),Ze=typeof je=="boolean"?je:!Ye;return Ze===Ye?De:Ze?[...De,X]:De.filter(ft=>ft!==X)})},[]),me=w.useCallback(()=>{const X=Bt();D(je=>{const De=[...je.groups??[]].sort((ft,Pt)=>(ft.order??0)-(Pt.order??0)),Ye={id:X,name:"Nuevo grupo",enabled:!0,order:De.length+1,type:"work",daysOfWeek:[],limitMode:"minutes",maxItems:12,minutesBudget:5,strategy:"overdue",hierarchyRule:"allow_all",include:[],exclude:[]},Ze=[...De,Ye].map((ft,Pt)=>({...ft,order:Pt+1}));return{...je,groups:Ze}}),he(X,!0)},[he]),de=X=>{const je=new URLSearchParams(y);je.set("plan",X),v(je,{replace:!0})},Ne=()=>{const X=l({kind:Y,name:Y==="class"?"Clases":"Personal"});de(X.id),ee({type:"success",text:"Plan creado."})},Ae=()=>{if(!E)return;const X=c(E.id);if(!X){ee({type:"error",text:"No se pudo duplicar el plan."});return}de(X.id),ee({type:"success",text:"Plan duplicado."})},Ie=()=>{if(!E||!window.confirm(`Eliminar el plan "${E.name}"? (No se borrarn sesiones)`))return;if(!f(E.id)){ee({type:"error",text:"No se pudo eliminar. Puede ser un plan protegido o tener sesiones asociadas."});return}const De=k.find(Ye=>Ye.id!==E.id);De&&de(De.id),ee({type:"success",text:"Plan eliminado."})};return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("header",{className:"glass-panel p-6 sm:p-10",children:[m.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold",children:"Ajustes  Planes"}),m.jsx("p",{className:"text-white/60",children:"Configura planes (personales y clases) y sus reglas."})]}),m.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-end",children:[m.jsxs("div",{className:"flex flex-wrap items-center justify-end gap-2",children:[m.jsxs("select",{className:"input-field h-10 w-[9.5rem] rounded-2xl px-3 text-sm",value:Y,onChange:X=>re(X.target.value),title:"Tipo del nuevo plan",children:[m.jsx("option",{value:"personal",children:"Personal"}),m.jsx("option",{value:"class",children:"Clases"})]}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:Ne,children:"Nuevo"}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:Ae,disabled:!E,children:"Duplicar"}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:Ie,disabled:!E,children:"Eliminar"})]}),m.jsxs("div",{className:"flex gap-3",children:[O?m.jsx("button",{type:"button",className:"btn-secondary",onClick:U,children:"Descartar"}):null,m.jsx("button",{type:"button",className:"btn-primary",onClick:T,disabled:!O,children:"Guardar"})]})]})]}),m.jsx("div",{className:"mt-5 flex flex-wrap gap-2",children:k.map(X=>m.jsx("button",{type:"button",onClick:()=>de(X.id),className:ze("rounded-full border px-4 py-2 text-sm font-semibold transition",X.id===(E==null?void 0:E.id)?"border-sky-400/70 bg-sky-500/10 text-white":"border-white/10 bg-white/5 text-white/70 hover:border-white/30 hover:text-white"),title:X.kind==="class"?"Plan de clases":"Plan personal",children:X.name},X.id))}),H?m.jsx("div",{className:ze("mt-4 rounded-2xl border px-4 py-3 text-sm",H.type==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-rose-500/40 bg-rose-500/10 text-rose-200"),children:H.text}):null]}),m.jsxs("section",{className:"glass-panel space-y-5 p-6",children:[m.jsxs("div",{className:"grid gap-4 sm:grid-cols-[1fr_auto] sm:items-end",children:[m.jsxs("label",{className:"grid gap-2",children:[m.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:"Nombre del plan"}),m.jsx("input",{type:"text",className:"input-field",value:I,onChange:X=>M(X.target.value)})]}),m.jsxs("label",{className:"flex items-center justify-between gap-3 rounded-2xl border border-white/10 bg-white/5 px-4 py-3",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-semibold text-white/80",children:"Plan activo"}),m.jsx("p",{className:"text-xs text-white/50",children:(E==null?void 0:E.kind)==="class"?"Clases":"Personal"})]}),m.jsx("input",{type:"checkbox",className:"h-5 w-5 accent-sky-400",checked:P,onChange:X=>z(X.target.checked)})]})]}),(E==null?void 0:E.kind)==="class"?m.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 text-sm text-white/70",children:[m.jsx("p",{className:"font-semibold text-white/80",children:"Este plan es de tipo Clases."}),m.jsxs("p",{className:"mt-1 text-white/60",children:["Por ahora, los grupos automticos (cadencias + Plan de hoy) solo aplican a planes personales. Para clases, planifica desde ",m.jsx("span",{className:"font-semibold text-white",children:"Sesiones"})," en modo Editar."]})]}):null]}),(E==null?void 0:E.kind)!=="personal"?null:m.jsxs(m.Fragment,{children:[m.jsxs("section",{className:"glass-panel space-y-5 p-6",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-semibold text-white",children:"Plan de hoy"}),m.jsx("p",{className:"text-sm text-white/60",children:"Controla cuntos tems se sugieren y el presupuesto de minutos."})]}),m.jsxs("div",{className:"grid gap-4 sm:grid-cols-3",children:[m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Modo de lmite"}),m.jsxs("select",{className:"input-field",value:R.limitMode,onChange:X=>D(je=>({...je,limitMode:X.target.value})),children:[m.jsx("option",{value:"count",children:"Por cantidad"}),m.jsx("option",{value:"minutes",children:"Por minutos"}),m.jsx("option",{value:"both",children:"Cantidad y minutos"})]})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Mx. tems"}),m.jsx("input",{type:"number",min:1,className:"input-field",value:R.maxItems,onChange:X=>D(je=>({...je,maxItems:Number(X.target.value)}))})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("label",{className:"text-xs uppercase tracking-wide text-white/40",children:"Presupuesto (min)"}),m.jsx("input",{type:"number",min:1,className:"input-field",value:R.minutesBudget,onChange:X=>D(je=>({...je,minutesBudget:Number(X.target.value)}))})]})]}),m.jsxs("div",{className:"space-y-4 rounded-3xl border border-white/10 bg-white/5 p-5",children:[m.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-white",children:"Grupos"}),m.jsx("p",{className:"text-sm text-white/60",children:"Define bloques con reglas, das de la semana y lmites."})]}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:me,children:"+ Grupo"})]}),m.jsx("div",{className:"space-y-4",children:[...R.groups??[]].sort((X,je)=>(X.order??0)-(je.order??0)).map((X,je,De)=>{const Ye=X.type??"work",Ze=X.daysOfWeek??[],ft=Ze.length===0,Pt=X.limitMode??"minutes",en=X.strategy??"overdue",J=X.hierarchyRule??"allow_all",ce=G.includes(X.id),ge=ft?"Todos":Ze.map(ve=>we.get(ve)??String(ve)).filter(Boolean).join(" "),Pe=(()=>{const ve=Math.max(0,Math.round(Number(X.maxItems??0))),F=Math.max(0,Number(X.minutesBudget??0));return Pt==="count"?`${ve} tems`:Pt==="minutes"?`${F} min`:`${ve} tems  ${F} min`})(),ke=(X.include??[]).length,ue=(X.exclude??[]).length,Te=ve=>{D(F=>{const V=[...F.groups??[]].sort((K,se)=>(K.order??0)-(se.order??0)).map(K=>K.id===X.id?{...K,...ve}:K).map((K,se)=>({...K,order:se+1}));return{...F,groups:V}})},ae=ve=>{D(F=>{const L=[...F.groups??[]].sort((Se,Oe)=>(Se.order??0)-(Oe.order??0)),V=L.findIndex(Se=>Se.id===X.id),K=V+ve;if(V<0||K<0||K>=L.length)return F;const se=L.slice(),fe=se[V];return se[V]=se[K],se[K]=fe,{...F,groups:se.map((Se,Oe)=>({...Se,order:Oe+1}))}})},pe=()=>{D(ve=>{const L=[...ve.groups??[]].sort((V,K)=>(V.order??0)-(K.order??0)).filter(V=>V.id!==X.id).map((V,K)=>({...V,order:K+1}));return{...ve,groups:L.length>0?L:ve.groups}}),$(ve=>ve.filter(F=>F!==X.id))},Re=()=>{const ve=Bt();D(F=>{const L=[...F.groups??[]].sort((Se,Oe)=>(Se.order??0)-(Oe.order??0)),V=L.findIndex(Se=>Se.id===X.id);if(V<0)return F;const K=(X.name??"").trim()||"Grupo",se={...X,id:ve,name:`${K} (copia)`},fe=L.slice();return fe.splice(V+1,0,se),{...F,groups:fe.map((Se,Oe)=>({...Se,order:Oe+1}))}}),he(ve,!0)},He=(ve,F)=>{const L=X[ve]??[];Te({[ve]:F(L)})};return m.jsxs("div",{className:"rounded-3xl border border-white/10 bg-slate-950/40",children:[m.jsxs("div",{className:"flex flex-col gap-3 p-4 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{className:"flex flex-1 flex-wrap items-center gap-3",children:[m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>he(X.id),"aria-expanded":ce,title:ce?"Colapsar":"Expandir",children:ce?"":""}),m.jsxs("div",{className:"min-w-[240px] flex-1",children:[m.jsx("p",{className:"text-sm font-semibold text-white",children:(X.name??"").trim()||"Grupo"}),m.jsxs("p",{className:"text-xs text-white/50",children:[Ye==="note"?"Nota":"Trabajos","  ",ge,"  ",Pe,Ye==="work"?`  ${en==="weighted"?"Ruleta":"Cadencia"}`:"",Ye==="work"?`  Incluye:${ke||""} Excluye:${ue||""}`:""]})]}),m.jsx("span",{className:ze("rounded-full border px-3 py-1 text-xs font-semibold",X.enabled?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200":"border-white/15 bg-white/5 text-white/60"),children:X.enabled?"Enabled":"Disabled"})]}),m.jsxs("div",{className:"flex items-center justify-end gap-2",children:[m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>ae(-1),disabled:je===0,title:"Subir",children:""}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>ae(1),disabled:je===De.length-1,title:"Bajar",children:""}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:Re,title:"Duplicar",children:"Duplicar"}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:pe,disabled:De.length<=1,children:"Eliminar"})]})]}),ce?m.jsx("div",{className:"border-t border-white/10 p-5",children:m.jsx("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:m.jsxs("div",{className:"flex flex-1 flex-col gap-3",children:[m.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[m.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-white/70",children:[m.jsx("input",{type:"checkbox",className:"accent-sky-400",checked:X.enabled,onChange:ve=>Te({enabled:ve.target.checked})}),"Enabled"]}),m.jsx("input",{type:"text",className:"input-field flex-1",value:X.name,onChange:ve=>Te({name:ve.target.value}),placeholder:"Nombre del grupo"}),m.jsxs("select",{className:"input-field w-36",value:Ye,onChange:ve=>Te({type:ve.target.value}),children:[m.jsx("option",{value:"work",children:"Trabajos"}),m.jsx("option",{value:"note",children:"Nota"})]})]}),m.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:"Das"}),m.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[m.jsx("button",{type:"button",className:ze("rounded-full border px-3 py-1 text-xs font-semibold transition",ft?"border-sky-500/40 bg-sky-500/10 text-sky-100":"border-white/15 bg-white/5 text-white/70 hover:border-white/30 hover:text-white"),onClick:()=>Te({daysOfWeek:[]}),title:"Vaco = todos los das",children:"Todos"}),rw.map(ve=>{const F=ft?!0:Ze.includes(ve.value);return m.jsx("button",{type:"button",className:ze("h-8 w-8 rounded-full border text-xs font-semibold transition",F?"border-emerald-500/40 bg-emerald-500/10 text-emerald-100":"border-white/15 bg-white/5 text-white/70 hover:border-white/30 hover:text-white"),onClick:()=>{const L=ft?[ve.value]:Ze.includes(ve.value)?Ze.filter(V=>V!==ve.value):[...Ze,ve.value];Te({daysOfWeek:L.sort((V,K)=>V-K)})},title:F?"Activo":"Inactivo",children:ve.label},ve.value)})]}),m.jsx("p",{className:"text-xs text-white/50",children:"Si eliges das especficos, solo aparecer esos das."})]}),m.jsxs("div",{className:"grid gap-3 sm:grid-cols-3",children:[m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:"Lmite"}),m.jsxs("select",{className:"input-field",value:Pt,onChange:ve=>Te({limitMode:ve.target.value}),children:[m.jsx("option",{value:"count",children:"Cantidad"}),m.jsx("option",{value:"minutes",children:"Minutos"}),m.jsx("option",{value:"both",children:"Ambos"})]})]}),m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:"Mx tems"}),m.jsx("input",{type:"number",min:0,className:"input-field",value:X.maxItems??0,onChange:ve=>Te({maxItems:Number(ve.target.value)})})]}),m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:"Mx min"}),m.jsx("input",{type:"number",min:0,className:"input-field",value:X.minutesBudget??0,onChange:ve=>Te({minutesBudget:Number(ve.target.value)})})]})]})]}),Ye==="work"?m.jsxs("div",{className:"mt-2 grid gap-4 lg:grid-cols-2",children:[m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:"Estrategia"}),m.jsxs("select",{className:"input-field",value:en,onChange:ve=>Te({strategy:ve.target.value}),children:[m.jsx("option",{value:"overdue",children:"Vencido (cadencia)"}),m.jsx("option",{value:"weighted",children:"Ponderado (ruleta)"})]})]}),m.jsxs("label",{className:"flex items-center gap-2 text-sm text-white/70",children:[m.jsx("input",{type:"checkbox",className:"accent-sky-400",checked:J==="prefer_leaves",onChange:ve=>Te({hierarchyRule:ve.target.checked?"prefer_leaves":"allow_all"})}),"Preferir hijos (evita padres cuando existan)"]})]}):null,Ye==="work"?m.jsx("div",{className:"mt-4 grid gap-5 lg:grid-cols-2",children:["include","exclude"].map(ve=>m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("p",{className:"text-sm font-semibold text-white/80",children:ve==="include"?"Include (OR)":"Exclude (OR)"}),m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>He(ve,F=>[...F,{...a5}]),children:"+ Regla"})]}),(X[ve]??[]).length===0?m.jsx("p",{className:"text-xs text-white/50",children:ve==="include"?"Vaco = incluye todo (se aplican excludes).":"Vaco = no excluye nada."}):null,(X[ve]??[]).map((F,L)=>m.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:["Regla ",L+1]}),m.jsx("button",{type:"button",className:"text-xs font-semibold text-rose-200 hover:text-rose-100",onClick:()=>He(ve,V=>V.filter((K,se)=>se!==L)),children:"Quitar"})]}),m.jsxs("div",{className:"mt-3 grid gap-3",children:[m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs text-white/50",children:"Tags (AND)"}),m.jsx(Ya,{options:A,value:F.byTags??[],onChange:V=>He(ve,K=>{const se=[...K];return se[L]={...se[L],byTags:V},se}),placeholder:"Search tags",allowCreate:!0,onCreate:V=>{const K=o(V);return K?{createdValue:K,createdLabel:K}:null}})]}),m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs text-white/50",children:"Node types"}),m.jsx(Ya,{options:te,value:F.byNodeTypes??[],onChange:V=>He(ve,K=>{const se=[...K];return se[L]={...se[L],byNodeTypes:V},se}),placeholder:"Search node types",allowCreate:!0,onCreate:V=>{const K=i(V);return K?{createdValue:K,createdLabel:V.trim()}:null}})]}),m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs text-white/50",children:"Work IDs"}),m.jsx("input",{type:"text",className:"input-field",value:J1(F.byWorkIds),placeholder:"id1, id2",onChange:V=>{const K=K1(V.target.value);He(ve,se=>{const fe=[...se];return fe[L]={...fe[L],byWorkIds:K},fe})}})]})]})]},`${ve}-${X.id}-${L}`))]},`${X.id}-${ve}`))}):null]})})}):null]},X.id)})})]}),m.jsxs("details",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[m.jsx("summary",{className:"cursor-pointer text-sm font-semibold text-white/80",children:"Estimacin de minutos por tipo"}),m.jsx("div",{className:"mt-3 grid gap-3 sm:grid-cols-2",children:Object.entries(R.defaultMinutesByNodeType).sort(([X],[je])=>X.localeCompare(je,"es",{sensitivity:"base"})).map(([X,je])=>m.jsxs("label",{className:"grid gap-2",children:[m.jsx("span",{className:"text-xs uppercase tracking-wide text-white/40",children:X}),m.jsx("input",{type:"number",min:.25,step:.25,className:"input-field",value:je,onChange:De=>D(Ye=>({...Ye,defaultMinutesByNodeType:{...Ye.defaultMinutesByNodeType,[X]:Number(De.target.value)}}))})]},X))})]})]}),m.jsxs("section",{className:"glass-panel space-y-5 p-6",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-semibold text-white",children:"Cadencias"}),m.jsx("p",{className:"text-sm text-white/60",children:"Objetivo de das por tipo, con overrides por tags."})]}),m.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:Array.from(new Set([...Object.keys(ne.targetsDays??{}),...(r.nodeTypes??[]).map(X=>X.key)])).map(X=>X.trim().toLowerCase()).filter(Boolean).sort((X,je)=>X.localeCompare(je,"en",{sensitivity:"base"})).map(X=>{var Ye;const je=((Ye=(r.nodeTypes??[]).find(Ze=>Ze.key===X))==null?void 0:Ye.label)??X,De=(ne.targetsDays??{})[X]??(ne.targetsDays??{}).work??7;return m.jsxs("label",{className:"grid gap-2",children:[m.jsxs("span",{className:"text-xs uppercase tracking-wide text-white/40",children:[je," ",m.jsxs("span",{className:"text-white/30",children:["(",X,")"]})]}),m.jsx("input",{type:"number",min:1,className:"input-field",value:De,onChange:Ze=>Z(ft=>({...ft,targetsDays:{...ft.targetsDays,[X]:Number(Ze.target.value)}}))})]},X)})}),m.jsxs("details",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[m.jsx("summary",{className:"cursor-pointer text-sm font-semibold text-white/80",children:"Overrides"}),m.jsxs("div",{className:"mt-3 space-y-3",children:[(ne.overrides??[]).map((X,je)=>m.jsxs("div",{className:"rounded-2xl border border-white/10 bg-slate-950/40 p-4",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40",children:["Override ",je+1]}),m.jsx("button",{type:"button",className:"text-xs font-semibold text-rose-200 hover:text-rose-100",onClick:()=>Z(De=>({...De,overrides:(De.overrides??[]).filter((Ye,Ze)=>Ze!==je)})),children:"Quitar"})]}),m.jsxs("div",{className:"mt-3 grid gap-3 sm:grid-cols-2",children:[m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs text-white/50",children:"Tags (ANY)"}),m.jsx(Ya,{options:A,value:X.match.tagsAny??[],onChange:De=>Z(Ye=>{const Ze=[...Ye.overrides??[]];return Ze[je]={...X,match:{tagsAny:De}},{...Ye,overrides:Ze}}),placeholder:"Search tags",allowCreate:!0,onCreate:De=>{const Ye=o(De);return Ye?{createdValue:Ye,createdLabel:Ye}:null}})]}),m.jsxs("label",{className:"grid gap-1",children:[m.jsx("span",{className:"text-xs text-white/50",children:"Multiplier"}),m.jsx("input",{type:"number",min:.1,step:.1,className:"input-field",value:X.multiplier,onChange:De=>{const Ye=Number(De.target.value);Z(Ze=>{const ft=[...Ze.overrides??[]];return ft[je]={...X,multiplier:Ye},{...Ze,overrides:ft}})}})]})]})]},`override-${je}`)),m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>Z(X=>({...X,overrides:[...X.overrides??[],{match:{tagsAny:[]},multiplier:1}]})),children:"+ Aadir override"})]})]})]})]})]})}const sw=[{to:"/",label:"Sesiones"},{to:"/catalog",label:"Trabajos"},{to:"/settings",label:"Ajustes"},{to:"/objectives",label:"Objetivos"},{to:"/assistants",label:"Asistentes"},{to:"/backups",label:"Backups"}];function l5(){const[e,t]=w.useState(!1),[n,r]=w.useState(!1),{user:i,signOut:o}=Ns(),l=async()=>{try{r(!0),await o()}catch(u){console.error("No se pudo cerrar sesin",u)}finally{r(!1),t(!1)}};return m.jsxs("header",{className:"sticky top-0 z-50 border-b border-white/10 bg-slate-950/80 backdrop-blur-xl",children:[m.jsxs("div",{className:"mx-auto flex max-w-6xl items-center justify-between px-3 py-3 sm:px-4 sm:py-4",children:[m.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[m.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-gradient-to-br from-sky-500 to-indigo-500 text-base font-bold sm:h-10 sm:w-10 sm:text-lg",children:"SP"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-display text-lg font-semibold sm:text-xl",children:"Sport Planner"}),m.jsx("p",{className:"text-[11px] text-white/50 sm:text-xs",children:"Planifica sesiones increbles"})]})]}),m.jsxs("div",{className:"hidden items-center gap-4 md:flex",children:[m.jsx("nav",{className:"flex items-center gap-2",children:sw.map(u=>m.jsx(bv,{to:u.to,className:({isActive:c})=>`rounded-full px-4 py-2 text-sm font-medium transition ${c?"bg-white text-slate-900 shadow-lg shadow-sky-400/30":"text-white/70 hover:text-white hover:bg-white/10"}`,children:u.label},u.to))}),m.jsxs("div",{className:"flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-4 py-2",children:[m.jsxs("div",{className:"text-right",children:[m.jsx("p",{className:"text-xs text-white/50",children:"Sesin iniciada"}),m.jsx("p",{className:"text-sm font-semibold text-white",children:(i==null?void 0:i.email)??"Cuenta"})]}),m.jsx("button",{type:"button",onClick:()=>{l()},disabled:n,className:"inline-flex items-center rounded-full border border-white/20 px-3 py-1 text-xs font-semibold text-white/80 transition hover:bg-white/10 disabled:opacity-60",children:n?"Saliendo":"Cerrar sesin"})]})]}),m.jsx("button",{type:"button",className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-white/20 text-white/80 md:hidden",onClick:()=>t(!0),"aria-label":"Abrir navegacin",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"h-6 w-6",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 6h16M4 12h16M4 18h16"})})})]}),m.jsxs(ax,{open:e,onClose:t,className:"md:hidden",children:[m.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm","aria-hidden":"true"}),m.jsxs(ax.Panel,{className:"fixed inset-y-4 right-3 flex w-[17rem] flex-col rounded-3xl border border-white/10 bg-slate-900/95 p-6 shadow-2xl",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("p",{className:"text-lg font-semibold text-white",children:"Navegacin"}),m.jsx("button",{type:"button",className:"inline-flex h-9 w-9 items-center justify-center rounded-full border border-white/20 text-white/80",onClick:()=>t(!1),"aria-label":"Cerrar navegacin",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"h-5 w-5",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]}),m.jsx("div",{className:"mt-6 flex flex-col gap-2",children:sw.map(u=>m.jsx(bv,{to:u.to,className:({isActive:c})=>`rounded-2xl px-4 py-3 text-sm font-semibold transition ${c?"bg-white text-slate-900 shadow shadow-sky-400/40":"text-white/80 hover:bg-white/10"}`,onClick:()=>t(!1),children:u.label},u.to))}),m.jsxs("div",{className:"mt-auto rounded-2xl border border-white/10 bg-white/5 p-4",children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-white/40",children:"Sesin iniciada"}),m.jsx("p",{className:"mt-1 text-sm font-semibold text-white",children:(i==null?void 0:i.email)??"Cuenta"}),m.jsx("button",{type:"button",onClick:()=>{l()},disabled:n,className:"mt-3 w-full rounded-full border border-white/20 px-3 py-2 text-sm font-semibold text-white/80 transition hover:bg-white/10 disabled:opacity-60",children:n?"Saliendo":"Cerrar sesin"})]})]})]})]})}function u5(){return zR(),BR(),m.jsxs("div",{className:"min-h-screen pb-16",children:[m.jsx(l5,{}),m.jsx("main",{className:"mx-auto w-full max-w-6xl px-3 py-5 sm:px-6 sm:py-10",children:m.jsx(gw,{})})]})}function c5(){return m.jsx("div",{className:"flex min-h-screen items-center justify-center bg-slate-950",children:m.jsxs("div",{className:"flex flex-col items-center gap-4",children:[m.jsx("div",{className:"h-12 w-12 animate-spin rounded-full border-2 border-white/20 border-t-sky-400"}),m.jsx("p",{className:"text-sm font-medium text-white/60",children:"Cargando Sport Planner"})]})})}function d5(){const{session:e,loading:t}=Ns(),n=ii();return t?m.jsx(c5,{}):e?m.jsx(gw,{}):m.jsx(Ja,{to:"/login",replace:!0,state:{from:n}})}function f5(){return m.jsx(Z_,{children:m.jsxs(H_,{children:[m.jsx(gn,{path:"/login",element:m.jsx(r5,{})}),m.jsx(gn,{element:m.jsx(d5,{}),children:m.jsxs(gn,{element:m.jsx(u5,{}),children:[m.jsx(gn,{index:!0,element:m.jsx(qF,{})}),m.jsx(gn,{path:"personal",element:m.jsx(Ja,{to:"/?plan=personal-kungfu",replace:!0})}),m.jsx(gn,{path:"personal/sessions",element:m.jsx(i5,{})}),m.jsx(gn,{path:"personal/settings",element:m.jsx(iw,{})}),m.jsx(gn,{path:"settings",element:m.jsx(iw,{})}),m.jsx(gn,{path:"plan",element:m.jsx(YF,{})}),m.jsx(gn,{path:"catalog",element:m.jsx(XF,{})}),m.jsx(gn,{path:"catalog/taxonomy",element:m.jsx(ZF,{})}),m.jsx(gn,{path:"objectives",element:m.jsx(e5,{})}),m.jsx(gn,{path:"assistants",element:m.jsx(t5,{})}),m.jsx(gn,{path:"backups",element:m.jsx(n5,{})})]})}),m.jsx(gn,{path:"*",element:m.jsx(Ja,{to:"/",replace:!0})})]})})}function h5({children:e}){const[t,n]=w.useState(null),[r,i]=w.useState(null),[o,l]=w.useState(!0);w.useEffect(()=>{let c=!0;(async()=>{l(!0);const{data:{session:p}}=await Yt.auth.getSession();c&&(n(p),i((p==null?void 0:p.user)??null),l(!1))})();const{data:{subscription:h}}=Yt.auth.onAuthStateChange((p,y)=>{c&&(n(y),i((y==null?void 0:y.user)??null),l(!1))});return()=>{c=!1,h.unsubscribe()}},[]);const u=w.useMemo(()=>({session:t,user:r,loading:o,signInWithPassword:async(c,f)=>{const{error:h}=await Yt.auth.signInWithPassword({email:c,password:f});if(h)throw h},signUpWithPassword:async(c,f)=>{const p=typeof window<"u"?`${window.location.origin}/sport-planner/`:void 0,{error:y}=await Yt.auth.signUp({email:c,password:f,options:{emailRedirectTo:p}});if(y)throw y},signOut:async()=>{const{error:c}=await Yt.auth.signOut();if(c)throw c}}),[o,t,r]);return m.jsx(Ub.Provider,{value:u,children:e})}Ce.getState().hydrate();ZE.createRoot(document.getElementById("root")).render(m.jsx(Me.StrictMode,{children:m.jsx(h5,{children:m.jsx(f5,{})})}));
